{"total_count": 32, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/virtuald/pyhcl/issues/78", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/78/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/78/events", "html_url": "https://github.com/virtuald/pyhcl/issues/78", "id": 691845747, "node_id": "MDU6SXNzdWU2OTE4NDU3NDc=", "number": 78, "title": "HCL2 - problem parsing jsoncode fucntion", "user": {"login": "mateusz-nowak-mox", "id": 62553510, "node_id": "MDQ6VXNlcjYyNTUzNTEw", "avatar_url": "https://avatars3.githubusercontent.com/u/62553510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mateusz-nowak-mox", "html_url": "https://github.com/mateusz-nowak-mox", "followers_url": "https://api.github.com/users/mateusz-nowak-mox/followers", "following_url": "https://api.github.com/users/mateusz-nowak-mox/following{/other_user}", "gists_url": "https://api.github.com/users/mateusz-nowak-mox/gists{/gist_id}", "starred_url": "https://api.github.com/users/mateusz-nowak-mox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mateusz-nowak-mox/subscriptions", "organizations_url": "https://api.github.com/users/mateusz-nowak-mox/orgs", "repos_url": "https://api.github.com/users/mateusz-nowak-mox/repos", "events_url": "https://api.github.com/users/mateusz-nowak-mox/events{/privacy}", "received_events_url": "https://api.github.com/users/mateusz-nowak-mox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-03T10:24:51Z", "updated_at": "2020-09-03T12:42:40Z", "closed_at": "2020-09-03T12:42:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Example 1**\r\n\r\n```\r\nresource \"test\" \"this\" {\r\n  profile = jsonencode(\r\n    {\r\n      \"a\" : true\r\n    }\r\n  )\r\n}\r\n```\r\n\r\n**Error:**\r\n```TypeError: ('%s is of type %s; expected type of dict, list, tuple, or str', 'True', <class 'bool'>)```\r\n\r\n**Debug:**\r\n```PLY: PARSE DEBUG START\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'resource',5,84)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : IDENTIFIER . LexToken(STRING,'test',5,98)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x7f8ec186b470> ('resource')\r\nState  : 5\r\nStack  : objectkey . LexToken(STRING,'test',5,98)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey STRING . LexToken(STRING,'this',5,105)\r\nAction : Reduce rule [objectkey -> STRING] with ['test'] and goto state 19\r\n       p_objectkey_0: None | test\r\nResult : <str @ 0x7f8ec186bf30> ('test')\r\nState  : 19\r\nStack  : objectkey objectkey . LexToken(STRING,'this',5,105)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey STRING . LexToken(LEFTBRACE,'{',5,107)\r\nAction : Reduce rule [objectkey -> STRING] with ['this'] and goto state 19\r\n       p_objectkey_0: None | this\r\nResult : <str @ 0x7f8ec1f7df70> ('this')\r\nState  : 19\r\nStack  : objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',5,107)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'profile',6,111)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',6,119)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['profile'] and goto state 5\r\n       p_objectkey_0: None | profile\r\nResult : <str @ 0x7f8ec18ee2f0> ('profile')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',6,119)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(IDENTIFIER,'jsonencode',6,121)\r\nAction : Shift and goto state 44\r\nState  : 44\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER . LexToken(LEFTPAREN,'(',6,131)\r\nAction : Shift and goto state 91\r\nState  : 91\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN . LexToken(LEFTBRACE,'{',7,137)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE . LexToken(STRING,'a',8,147)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE STRING . LexToken(COLON,':',8,149)\r\nAction : Reduce rule [objectkey -> STRING] with ['a'] and goto state 5\r\n       p_objectkey_0: None | a\r\nResult : <str @ 0x7f8ec2239ef0> ('a')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE objectkey . LexToken(COLON,':',8,149)\r\nAction : Shift and goto state 22\r\nState  : 22\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE objectkey COLON . LexToken(BOOL,True,8,151)\r\nAction : Shift and goto state 54\r\nState  : 54\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE objectkey COLON BOOL . LexToken(RIGHTBRACE,'}',9,160)\r\nAction : Reduce rule [objectitem -> objectkey COLON BOOL] with ['a',':',True] and goto state 4\r\n      p_objectitem_0: None | a | : | True\r\nResult : <tuple @ 0x7f8ec1849730> (('a', True))\r\nState  : 4\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE objectitem . LexToken(RIGHTBRACE,'}',9,160)\r\nAction : Reduce rule [objectlist -> objectitem] with [('a', True)] and goto state 61\r\n      p_objectlist_0: None | ('a', True)\r\nResult : <list @ 0x7f8ec1886460> ([('a', True)])\r\nState  : 61\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE objectlist . LexToken(RIGHTBRACE,'}',9,160)\r\nAction : Shift and goto state 105\r\nState  : 105\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACE objectlist RIGHTBRACE . LexToken(RIGHTPAREN,')',10,164)\r\nAction : Reduce rule [object -> LEFTBRACE objectlist RIGHTBRACE] with ['{',[('a', True)],'}'] and goto state 97\r\n          p_object_0: None | { | [('a', True)] | }\r\nResult : <dict @ 0x7f8ec1a2b280> ({'a': True})\r\nState  : 97\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN object . LexToken(RIGHTPAREN,')',10,164)\r\nAction : Reduce rule [listitem -> object] with [{'a': True}] and goto state 95\r\n        p_listitem_0: None | {'a': True}\r\nResult : <dict @ 0x7f8ec1a2b280> ({'a': True})\r\nState  : 95\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitem . LexToken(RIGHTPAREN,')',10,164)\r\nAction : Reduce rule [listitems -> listitem] with [{'a': True}] and goto state 121\r\n       p_listitems_0: None | {'a': True}\r\nResult : <list @ 0x7f8ec1886460> ([{'a': True}])\r\nState  : 121\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems . LexToken(RIGHTPAREN,')',10,164)\r\nAction : Shift and goto state 144\r\nState  : 144\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems RIGHTPAREN . LexToken(RIGHTBRACE,'}',11,166)\r\nAction : Reduce rule [function -> IDENTIFIER LEFTPAREN listitems RIGHTPAREN] with ['jsonencode','(',[{'a': True}],')'] and goto state 48\r\n        p_function_0: None | jsonencode | ( | [{'a': True}] | )\r\n```\r\n\r\n\r\nParser doesn't seem to understand boolean variables nested in jsoncode function.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/77", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/77/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/77/events", "html_url": "https://github.com/virtuald/pyhcl/issues/77", "id": 690199550, "node_id": "MDU6SXNzdWU2OTAxOTk1NTA=", "number": 77, "title": "HCL2 - problem parsing nested array inside function", "user": {"login": "kamil-rogon-dragon", "id": 57525819, "node_id": "MDQ6VXNlcjU3NTI1ODE5", "avatar_url": "https://avatars2.githubusercontent.com/u/57525819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamil-rogon-dragon", "html_url": "https://github.com/kamil-rogon-dragon", "followers_url": "https://api.github.com/users/kamil-rogon-dragon/followers", "following_url": "https://api.github.com/users/kamil-rogon-dragon/following{/other_user}", "gists_url": "https://api.github.com/users/kamil-rogon-dragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamil-rogon-dragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamil-rogon-dragon/subscriptions", "organizations_url": "https://api.github.com/users/kamil-rogon-dragon/orgs", "repos_url": "https://api.github.com/users/kamil-rogon-dragon/repos", "events_url": "https://api.github.com/users/kamil-rogon-dragon/events{/privacy}", "received_events_url": "https://api.github.com/users/kamil-rogon-dragon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-01T14:39:45Z", "updated_at": "2020-09-03T12:43:07Z", "closed_at": "2020-09-03T12:43:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Examples\r\n### Example 1\r\nWorking example. Mixing identifier with nested array.\r\n\r\n```\r\nresource \"test_resource\" \"this\" {\r\n  users = setunion(\r\n    test_resource.other.users,\r\n    [\r\n      \"string1\",\r\n      \"string2\",\r\n    ],\r\n  )\r\n}\r\n\r\nresource \"test_resource\" \"other\" {\r\n  users = []\r\n}\r\n```\r\n\r\n### Example 2\r\nFailing with only difference that nested array is at position 3 of function identifier instead of position 2 as above.\r\n```\r\nresource \"test_resource\" \"this\" {\r\n  users = setunion(\r\n    test_resource.other.users,\r\n    test_resource.other.users,\r\n    [\r\n      \"string1\",\r\n      \"string2\",\r\n    ],\r\n  )\r\n}\r\n\r\nresource \"test_resource\" \"other\" {\r\n  users = []\r\n}\r\n```\r\n\r\n### Example 3\r\nWorking example. Empty nested arrays without mixing with identifiers.\r\n```\r\nresource \"test_resource\" \"this\" {\r\n  users = setunion(\r\n    [],\r\n    [],\r\n    [],\r\n    [],\r\n  )\r\n}\r\n```\r\n\r\n### Example 4\r\nFailing example. Single nested array.\r\n```\r\nresource \"test_resource\" \"this\" {\r\n  users = setunion([])\r\n}\r\n```\r\n\r\n### Example 5\r\nFailing example. Putting identifier after the nested array.\r\n```\r\nresource \"test_resource\" \"this\" {\r\n  users = setunion(\r\n    [],\r\n    test_resource.other.users,\r\n  )\r\n}\r\n\r\nresource \"test_resource\" \"other\" {\r\n  users = []\r\n}\r\n\r\n```\r\n\r\n## Debug\r\n### Example 1\r\n```\r\nPLY: PARSE DEBUG START\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'resource',1,0)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : IDENTIFIER . LexToken(STRING,'test_resource',1,23)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x106fcf830> ('resource')\r\nState  : 5\r\nStack  : objectkey . LexToken(STRING,'test_resource',1,23)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey STRING . LexToken(STRING,'this',1,30)\r\nAction : Reduce rule [objectkey -> STRING] with ['test_resource'] and goto state 19\r\n       p_objectkey_0: None | test_resource\r\nResult : <str @ 0x106e80f70> ('test_resource')\r\nState  : 19\r\nStack  : objectkey objectkey . LexToken(STRING,'this',1,30)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey STRING . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Reduce rule [objectkey -> STRING] with ['this'] and goto state 19\r\n       p_objectkey_0: None | this\r\nResult : <str @ 0x106f115b0> ('this')\r\nState  : 19\r\nStack  : objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'users',2,36)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',2,42)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['users'] and goto state 5\r\n       p_objectkey_0: None | users\r\nResult : <str @ 0x106ed40b0> ('users')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',2,42)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(IDENTIFIER,'setunion',2,44)\r\nAction : Shift and goto state 44\r\nState  : 44\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER . LexToken(LEFTPAREN,'(',2,52)\r\nAction : Shift and goto state 91\r\nState  : 91\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN . LexToken(IDENTIFIER,'test_resource.other',3,58)\r\nAction : Shift and goto state 100\r\nState  : 100\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN IDENTIFIER . LexToken(COMMA,',',3,77)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with [<str @ 0x106f7c2b0>] and goto state 98\r\n       p_objectkey_0: None | test_resource.other\r\nResult : <str @ 0x106f7c2b0> ('test_resource.other')\r\nState  : 98\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey . LexToken(COMMA,',',3,77)\r\nAction : Shift and goto state 132\r\nState  : 132\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA . LexToken(LEFTBRACKET,'[',4,83)\r\nAction : Shift and goto state 50\r\nState  : 50\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET . LexToken(STRING,'string1',5,99)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET STRING . LexToken(COMMA,',',5,100)\r\nAction : Reduce rule [objectkey -> STRING] with ['string1'] and goto state 98\r\n       p_objectkey_0: None | string1\r\nResult : <str @ 0x106ef8df0> ('string1')\r\nState  : 98\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET objectkey . LexToken(COMMA,',',5,100)\r\nAction : Shift and goto state 132\r\nState  : 132\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET objectkey COMMA . LexToken(STRING,'string2',6,116)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET objectkey COMMA STRING . LexToken(COMMA,',',6,117)\r\nAction : Reduce rule [objectkey -> STRING] with ['string2'] and goto state 165\r\n       p_objectkey_0: None | string2\r\nResult : <str @ 0x106ef8630> ('string2')\r\nState  : 165\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET objectkey COMMA objectkey . LexToken(COMMA,',',6,117)\r\nAction : Reduce rule [listitems -> objectkey COMMA objectkey] with ['string1',',','string2'] and goto state 93\r\n       p_listitems_2: None | string1 | , | string2\r\nResult : <list @ 0x106f11100> (['string1', 'string2'])\r\nState  : 93\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET listitems . LexToken(COMMA,',',6,117)\r\nAction : Shift and goto state 130\r\nState  : 130\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET listitems COMMA . LexToken(RIGHTBRACKET,']',7,123)\r\nAction : Shift and goto state 156\r\nState  : 156\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA LEFTBRACKET listitems COMMA RIGHTBRACKET . LexToken(COMMA,',',7,124)\r\nAction : Reduce rule [list -> LEFTBRACKET listitems COMMA RIGHTBRACKET] with ['[',<list @ 0x106f11100>,',',']'] and goto state 167\r\n            p_list_0: None | [ | ['string1', 'string2'] | , | ]\r\nResult : <list @ 0x106f11100> (['string1', 'string2'])\r\nState  : 167\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA list . LexToken(COMMA,',',7,124)\r\nAction : Reduce rule [listitems -> objectkey COMMA list] with [<str @ 0x106f7c2b0>,',',<list @ 0x106f11100>] and goto state 121\r\n       p_listitems_2: None | test_resource.other | , | ['string1', 'string2']\r\nResult : <list @ 0x106ec7380> (['test_resource.other', ['string1', 'str ...)\r\nState  : 121\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems . LexToken(COMMA,',',7,124)\r\nAction : Shift and goto state 145\r\nState  : 145\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems COMMA . LexToken(RIGHTPAREN,')',8,128)\r\nAction : Shift and goto state 187\r\nState  : 187\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems COMMA RIGHTPAREN . LexToken(RIGHTBRACE,'}',9,130)\r\nAction : Reduce rule [function -> IDENTIFIER LEFTPAREN listitems COMMA RIGHTPAREN] with ['setunion','(',<list @ 0x106ec7380>,',',')'] and goto state 48\r\n        p_function_1: None | setunion | ( | ['test_resource.other', ['string1', 'string2']] | , | )\r\nResult : <str @ 0x106f853b0> ('setunion(test_resource.other,\"string1\", ...)\r\nState  : 48\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL function . LexToken(RIGHTBRACE,'}',9,130)\r\nAction : Reduce rule [objectitem -> objectkey EQUAL function] with ['users','=',<str @ 0x106f853b0>] and goto state 4\r\n      p_objectitem_0: None | users | = | setunion(test_resource.other,\"string1\",\"string2\")\r\nResult : <tuple @ 0x106ff44c0> (('users', 'setunion(test_resource.other, ...)\r\nState  : 4\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectitem . LexToken(RIGHTBRACE,'}',9,130)\r\nAction : Reduce rule [objectlist -> objectitem] with [<tuple @ 0x106ff44c0>] and goto state 61\r\n      p_objectlist_0: None | ('users', 'setunion(test_resource.other,\"string1\",\"string2\")')\r\nResult : <list @ 0x106ec7380> ([('users', 'setunion(test_resource.other ...)\r\nState  : 61\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectlist . LexToken(RIGHTBRACE,'}',9,130)\r\nAction : Shift and goto state 105\r\nState  : 105\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectlist RIGHTBRACE . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Reduce rule [object -> LEFTBRACE objectlist RIGHTBRACE] with ['{',<list @ 0x106ec7380>,'}'] and goto state 21\r\n          p_object_0: None | { | [('users', 'setunion(test_resource.other,\"string1\",\"string2\")')] | }\r\nResult : <dict @ 0x106e792c0> ({'users': 'setunion(test_resource.other, ...)\r\nState  : 21\r\nStack  : objectkey objectkey objectkey object . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Reduce rule [block -> objectkey object] with ['this',<dict @ 0x106e792c0>] and goto state 23\r\n           p_block_0: None | this | {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'}\r\nResult : <tuple @ 0x106ff44c0> (('this', {'users': 'setunion(test_resour ...)\r\nState  : 23\r\nStack  : objectkey objectkey block . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Reduce rule [block -> objectkey block] with ['test_resource',<tuple @ 0x106ff44c0>] and goto state 23\r\n           p_block_1: None | test_resource | ('this', {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'})\r\nResult : <tuple @ 0x106ff4280> (('test_resource', {'this': {'users': 'se ...)\r\nState  : 23\r\nStack  : objectkey block . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Reduce rule [block -> objectkey block] with ['resource',<tuple @ 0x106ff4280>] and goto state 9\r\n           p_block_1: None | resource | ('test_resource', {'this': {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'}})\r\nResult : <tuple @ 0x106ff44c0> (('resource', {'test_resource': {'this':  ...)\r\nState  : 9\r\nStack  : block . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Reduce rule [objectitem -> block] with [<tuple @ 0x106ff44c0>] and goto state 4\r\n      p_objectitem_1: None | ('resource', {'test_resource': {'this': {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'}}})\r\nResult : <tuple @ 0x106ff44c0> (('resource', {'test_resource': {'this':  ...)\r\nState  : 4\r\nStack  : objectitem . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Reduce rule [objectlist -> objectitem] with [<tuple @ 0x106ff44c0>] and goto state 3\r\n      p_objectlist_0: None | ('resource', {'test_resource': {'this': {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'}}})\r\nResult : <list @ 0x106f11100> ([('resource', {'test_resource': {'this': ...)\r\nState  : 3\r\nStack  : objectlist . LexToken(IDENTIFIER,'resource',11,133)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectlist IDENTIFIER . LexToken(STRING,'test_resource',11,156)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x106ef8df0> ('resource')\r\nState  : 5\r\nStack  : objectlist objectkey . LexToken(STRING,'test_resource',11,156)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectlist objectkey STRING . LexToken(STRING,'other',11,164)\r\nAction : Reduce rule [objectkey -> STRING] with ['test_resource'] and goto state 19\r\n       p_objectkey_0: None | test_resource\r\nResult : <str @ 0x106ef8630> ('test_resource')\r\nState  : 19\r\nStack  : objectlist objectkey objectkey . LexToken(STRING,'other',11,164)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectlist objectkey objectkey STRING . LexToken(LEFTBRACE,'{',11,166)\r\nAction : Reduce rule [objectkey -> STRING] with ['other'] and goto state 19\r\n       p_objectkey_0: None | other\r\nResult : <str @ 0x106ed43f0> ('other')\r\nState  : 19\r\nStack  : objectlist objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',11,166)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'users',12,170)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',12,176)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['users'] and goto state 5\r\n       p_objectkey_0: None | users\r\nResult : <str @ 0x106ed44f0> ('users')\r\nState  : 5\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',12,176)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(LEFTBRACKET,'[',12,178)\r\nAction : Shift and goto state 50\r\nState  : 50\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectkey EQUAL LEFTBRACKET . LexToken(RIGHTBRACKET,']',12,179)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectkey EQUAL LEFTBRACKET RIGHTBRACKET . LexToken(RIGHTBRACE,'}',13,181)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 46\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x106fbd800> ([])\r\nState  : 46\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectkey EQUAL list . LexToken(RIGHTBRACE,'}',13,181)\r\nAction : Reduce rule [objectitem -> objectkey EQUAL list] with ['users','=',[]] and goto state 4\r\n      p_objectitem_0: None | users | = | []\r\nResult : <tuple @ 0x106ff4280> (('users', []))\r\nState  : 4\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectitem . LexToken(RIGHTBRACE,'}',13,181)\r\nAction : Reduce rule [objectlist -> objectitem] with [('users', [])] and goto state 61\r\n      p_objectlist_0: None | ('users', [])\r\nResult : <list @ 0x106fce700> ([('users', [])])\r\nState  : 61\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectlist . LexToken(RIGHTBRACE,'}',13,181)\r\nAction : Shift and goto state 105\r\nState  : 105\r\nStack  : objectlist objectkey objectkey objectkey LEFTBRACE objectlist RIGHTBRACE . $end\r\nAction : Reduce rule [object -> LEFTBRACE objectlist RIGHTBRACE] with ['{',[('users', [])],'}'] and goto state 21\r\n          p_object_0: None | { | [('users', [])] | }\r\nResult : <dict @ 0x106ec9400> ({'users': []})\r\nState  : 21\r\nStack  : objectlist objectkey objectkey objectkey object . $end\r\nAction : Reduce rule [block -> objectkey object] with ['other',{'users': []}] and goto state 23\r\n           p_block_0: None | other | {'users': []}\r\nResult : <tuple @ 0x106ff4280> (('other', {'users': []}))\r\nState  : 23\r\nStack  : objectlist objectkey objectkey block . $end\r\nAction : Reduce rule [block -> objectkey block] with ['test_resource',<tuple @ 0x106ff4280>] and goto state 23\r\n           p_block_1: None | test_resource | ('other', {'users': []})\r\nResult : <tuple @ 0x106fef700> (('test_resource', {'other': {'users': [] ...)\r\nState  : 23\r\nStack  : objectlist objectkey block . $end\r\nAction : Reduce rule [block -> objectkey block] with ['resource',<tuple @ 0x106fef700>] and goto state 9\r\n           p_block_1: None | resource | ('test_resource', {'other': {'users': []}})\r\nResult : <tuple @ 0x106ff4280> (('resource', {'test_resource': {'other': ...)\r\nState  : 9\r\nStack  : objectlist block . $end\r\nAction : Reduce rule [objectitem -> block] with [<tuple @ 0x106ff4280>] and goto state 17\r\n      p_objectitem_1: None | ('resource', {'test_resource': {'other': {'users': []}}})\r\nResult : <tuple @ 0x106ff4280> (('resource', {'test_resource': {'other': ...)\r\nState  : 17\r\nStack  : objectlist objectitem . $end\r\nAction : Reduce rule [objectlist -> objectlist objectitem] with [<list @ 0x106f11100>,<tuple @ 0x106ff4280>] and goto state 3\r\n      p_objectlist_1: None | [('resource', {'test_resource': {'this': {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'}}})] | ('resource', {'test_resource': {'other': {'users': []}}})\r\nResult : <list @ 0x106ec7380> ([('resource', {'test_resource': {'this': ...)\r\nState  : 3\r\nStack  : objectlist . $end\r\nAction : Reduce rule [top -> objectlist] with [<list @ 0x106ec7380>] and goto state 1\r\n               p_top: None | [('resource', {'test_resource': {'this': {'users': 'setunion(test_resource.other,\"string1\",\"string2\")'}}}), ('resource', {'test_resource': {'other': {'users': []}}})]\r\nResult : <dict @ 0x106ec9f80> ({'resource': {'test_resource': {'this':  ...)\r\nState  : 1\r\nStack  : top . $end\r\nDone   : Returning <dict @ 0x106ec9f80> ({'resource': {'test_resource': {'this':  ...)\r\nPLY: PARSE DEBUG END\r\n<dict at 0x106ec9f80>:\r\n  resource: <dict at 0x106ec90c0>\r\n    test_resource: <dict at 0x106ec9200>\r\n      this: <str at 0x106f83330>: '{\\'users\\': \\'setunion(test_resource.other,\"string1\",\"string2\")\\'}'\r\n      other: <dict at 0x106ec9400>\r\n        users: []\r\n```\r\n\r\n### Example 2\r\n```\r\nPLY: PARSE DEBUG START\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'resource',1,0)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : IDENTIFIER . LexToken(STRING,'test_resource',1,23)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x101cb6d30> ('resource')\r\nState  : 5\r\nStack  : objectkey . LexToken(STRING,'test_resource',1,23)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey STRING . LexToken(STRING,'this',1,30)\r\nAction : Reduce rule [objectkey -> STRING] with ['test_resource'] and goto state 19\r\n       p_objectkey_0: None | test_resource\r\nResult : <str @ 0x101de20b0> ('test_resource')\r\nState  : 19\r\nStack  : objectkey objectkey . LexToken(STRING,'this',1,30)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey STRING . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Reduce rule [objectkey -> STRING] with ['this'] and goto state 19\r\n       p_objectkey_0: None | this\r\nResult : <str @ 0x101da4f30> ('this')\r\nState  : 19\r\nStack  : objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'users',2,36)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',2,42)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['users'] and goto state 5\r\n       p_objectkey_0: None | users\r\nResult : <str @ 0x101dc9770> ('users')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',2,42)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(IDENTIFIER,'setunion',2,44)\r\nAction : Shift and goto state 44\r\nState  : 44\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER . LexToken(LEFTPAREN,'(',2,52)\r\nAction : Shift and goto state 91\r\nState  : 91\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN . LexToken(IDENTIFIER,'test_resource.other',3,58)\r\nAction : Shift and goto state 100\r\nState  : 100\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN IDENTIFIER . LexToken(COMMA,',',3,77)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with [<str @ 0x101e54210>] and goto state 98\r\n       p_objectkey_0: None | test_resource.other\r\nResult : <str @ 0x101e54210> ('test_resource.other')\r\nState  : 98\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey . LexToken(COMMA,',',3,77)\r\nAction : Shift and goto state 132\r\nState  : 132\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA . LexToken(IDENTIFIER,'test_resource.other',4,83)\r\nAction : Shift and goto state 168\r\nState  : 168\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA IDENTIFIER . LexToken(COMMA,',',4,102)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with [<str @ 0x101e54260>] and goto state 165\r\n       p_objectkey_0: None | test_resource.other\r\nResult : <str @ 0x101e54260> ('test_resource.other')\r\nState  : 165\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN objectkey COMMA objectkey . LexToken(COMMA,',',4,102)\r\nAction : Reduce rule [listitems -> objectkey COMMA objectkey] with [<str @ 0x101e54210>,',',<str @ 0x101e54260>] and goto state 121\r\n       p_listitems_2: None | test_resource.other | , | test_resource.other\r\nResult : <list @ 0x101d9b380> (['test_resource.other', 'test_resource.o ...)\r\nState  : 121\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems . LexToken(COMMA,',',4,102)\r\nAction : Shift and goto state 145\r\nState  : 145\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems COMMA . LexToken(LEFTBRACKET,'[',5,108)\r\nERROR: Error  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN listitems COMMA . LexToken(LEFTBRACKET,'[',5,108)\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 7, in <module>\r\n    obj = hcl.load(file)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/api.py\", line 62, in load\r\n    return loads(fp.read(), export_comments=export_comments)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/api.py\", line 81, in loads\r\n    return HclParser().parse(s, export_comments=export_comments)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/parser.py\", line 642, in parse\r\n    return self.yacc.parse(\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/ply/yacc.py\", line 503, in parse\r\n    tok = self.errorfunc(errtoken)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/parser.py\", line 634, in p_error\r\n    raise ValueError(msg)\r\nValueError: Line 5, column 108: unexpected LEFTBRACKET; expected RIGHTPAREN, COMMENT, MULTICOMMENT, IDENTIFIER, STRING, LEFTBRACE, MINUS, NUMBER, FLOAT\r\n```\r\n\r\n### Example 3\r\n```\r\nPLY: PARSE DEBUG START\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'resource',1,0)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : IDENTIFIER . LexToken(STRING,'test_resource',1,23)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x104917df0> ('resource')\r\nState  : 5\r\nStack  : objectkey . LexToken(STRING,'test_resource',1,23)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey STRING . LexToken(STRING,'this',1,30)\r\nAction : Reduce rule [objectkey -> STRING] with ['test_resource'] and goto state 19\r\n       p_objectkey_0: None | test_resource\r\nResult : <str @ 0x1047c8eb0> ('test_resource')\r\nState  : 19\r\nStack  : objectkey objectkey . LexToken(STRING,'this',1,30)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey STRING . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Reduce rule [objectkey -> STRING] with ['this'] and goto state 19\r\n       p_objectkey_0: None | this\r\nResult : <str @ 0x1048593b0> ('this')\r\nState  : 19\r\nStack  : objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'users',2,36)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',2,42)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['users'] and goto state 5\r\n       p_objectkey_0: None | users\r\nResult : <str @ 0x10481cf30> ('users')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',2,42)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(IDENTIFIER,'setunion',2,44)\r\nAction : Shift and goto state 44\r\nState  : 44\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER . LexToken(LEFTPAREN,'(',2,52)\r\nAction : Shift and goto state 91\r\nState  : 91\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN . LexToken(LEFTBRACKET,'[',3,58)\r\nAction : Shift and goto state 124\r\nState  : 124\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACKET . LexToken(RIGHTBRACKET,']',3,59)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACKET RIGHTBRACKET . LexToken(COMMA,',',3,60)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 123\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x104852980> ([])\r\nState  : 123\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list . LexToken(COMMA,',',3,60)\r\nAction : Shift and goto state 149\r\nState  : 149\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list COMMA . LexToken(LEFTBRACKET,'[',4,66)\r\nAction : Shift and goto state 50\r\nState  : 50\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list COMMA LEFTBRACKET . LexToken(RIGHTBRACKET,']',4,67)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list COMMA LEFTBRACKET RIGHTBRACKET . LexToken(COMMA,',',4,68)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 191\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x104905600> ([])\r\nState  : 191\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list COMMA list . LexToken(COMMA,',',4,68)\r\nAction : Reduce rule [list_of_lists -> list COMMA list] with [[],',',[]] and goto state 122\r\n   p_list_of_lists_0: None | [] | , | []\r\nResult : <tuple @ 0x10493c440> (([], []))\r\nState  : 122\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists . LexToken(COMMA,',',4,68)\r\nAction : Shift and goto state 147\r\nState  : 147\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA . LexToken(LEFTBRACKET,'[',5,74)\r\nAction : Shift and goto state 50\r\nState  : 50\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA LEFTBRACKET . LexToken(RIGHTBRACKET,']',5,75)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA LEFTBRACKET RIGHTBRACKET . LexToken(COMMA,',',5,76)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 189\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x10480f200> ([])\r\nState  : 189\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA list . LexToken(COMMA,',',5,76)\r\nAction : Reduce rule [list_of_lists -> list_of_lists COMMA list] with [([], []),',',[]] and goto state 122\r\n   p_list_of_lists_1: None | ([], []) | , | []\r\nResult : <tuple @ 0x1049195c0> (([], [], []))\r\nState  : 122\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists . LexToken(COMMA,',',5,76)\r\nAction : Shift and goto state 147\r\nState  : 147\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA . LexToken(LEFTBRACKET,'[',6,82)\r\nAction : Shift and goto state 50\r\nState  : 50\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA LEFTBRACKET . LexToken(RIGHTBRACKET,']',6,83)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA LEFTBRACKET RIGHTBRACKET . LexToken(COMMA,',',6,84)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 189\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x104905cc0> ([])\r\nState  : 189\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA list . LexToken(COMMA,',',6,84)\r\nAction : Reduce rule [list_of_lists -> list_of_lists COMMA list] with [([], [], []),',',[]] and goto state 122\r\n   p_list_of_lists_1: None | ([], [], []) | , | []\r\nResult : <tuple @ 0x10480b1d0> (([], [], [], []))\r\nState  : 122\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists . LexToken(COMMA,',',6,84)\r\nAction : Shift and goto state 147\r\nState  : 147\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA . LexToken(RIGHTPAREN,')',7,88)\r\nAction : Shift and goto state 188\r\nState  : 188\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list_of_lists COMMA RIGHTPAREN . LexToken(RIGHTBRACE,'}',8,90)\r\nAction : Reduce rule [function -> IDENTIFIER LEFTPAREN list_of_lists COMMA RIGHTPAREN] with ['setunion','(',<tuple @ 0x10480b1d0>,',',')'] and goto state 48\r\n        p_function_1: None | setunion | ( | ([], [], [], []) | , | )\r\nResult : <str @ 0x1047c8fb0> ('setunion(   )')\r\nState  : 48\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL function . LexToken(RIGHTBRACE,'}',8,90)\r\nAction : Reduce rule [objectitem -> objectkey EQUAL function] with ['users','=','setunion(   )'] and goto state 4\r\n      p_objectitem_0: None | users | = | setunion(   )\r\nResult : <tuple @ 0x10493c440> (('users', 'setunion(   )'))\r\nState  : 4\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectitem . LexToken(RIGHTBRACE,'}',8,90)\r\nAction : Reduce rule [objectlist -> objectitem] with [<tuple @ 0x10493c440>] and goto state 61\r\n      p_objectlist_0: None | ('users', 'setunion(   )')\r\nResult : <list @ 0x104852980> ([('users', 'setunion(   )')])\r\nState  : 61\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectlist . LexToken(RIGHTBRACE,'}',8,90)\r\nAction : Shift and goto state 105\r\nState  : 105\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectlist RIGHTBRACE . $end\r\nAction : Reduce rule [object -> LEFTBRACE objectlist RIGHTBRACE] with ['{',<list @ 0x104852980>,'}'] and goto state 21\r\n          p_object_0: None | { | [('users', 'setunion(   )')] | }\r\nResult : <dict @ 0x104811080> ({'users': 'setunion(   )'})\r\nState  : 21\r\nStack  : objectkey objectkey objectkey object . $end\r\nAction : Reduce rule [block -> objectkey object] with ['this',<dict @ 0x104811080>] and goto state 23\r\n           p_block_0: None | this | {'users': 'setunion(   )'}\r\nResult : <tuple @ 0x10493c440> (('this', {'users': 'setunion(   )'}))\r\nState  : 23\r\nStack  : objectkey objectkey block . $end\r\nAction : Reduce rule [block -> objectkey block] with ['test_resource',<tuple @ 0x10493c440>] and goto state 23\r\n           p_block_1: None | test_resource | ('this', {'users': 'setunion(   )'})\r\nResult : <tuple @ 0x10493c200> (('test_resource', {'this': {'users': 'se ...)\r\nState  : 23\r\nStack  : objectkey block . $end\r\nAction : Reduce rule [block -> objectkey block] with ['resource',<tuple @ 0x10493c200>] and goto state 9\r\n           p_block_1: None | resource | ('test_resource', {'this': {'users': 'setunion(   )'}})\r\nResult : <tuple @ 0x10493c440> (('resource', {'test_resource': {'this':  ...)\r\nState  : 9\r\nStack  : block . $end\r\nAction : Reduce rule [objectitem -> block] with [<tuple @ 0x10493c440>] and goto state 4\r\n      p_objectitem_1: None | ('resource', {'test_resource': {'this': {'users': 'setunion(   )'}}})\r\nResult : <tuple @ 0x10493c440> (('resource', {'test_resource': {'this':  ...)\r\nState  : 4\r\nStack  : objectitem . $end\r\nAction : Reduce rule [objectlist -> objectitem] with [<tuple @ 0x10493c440>] and goto state 3\r\n      p_objectlist_0: None | ('resource', {'test_resource': {'this': {'users': 'setunion(   )'}}})\r\nResult : <list @ 0x104905600> ([('resource', {'test_resource': {'this': ...)\r\nState  : 3\r\nStack  : objectlist . $end\r\nAction : Reduce rule [top -> objectlist] with [<list @ 0x104905600>] and goto state 1\r\n               p_top: None | [('resource', {'test_resource': {'this': {'users': 'setunion(   )'}}})]\r\nResult : <dict @ 0x104811640> ({'resource': {'test_resource': {'this':  ...)\r\nState  : 1\r\nStack  : top . $end\r\nDone   : Returning <dict @ 0x104811640> ({'resource': {'test_resource': {'this':  ...)\r\nPLY: PARSE DEBUG END\r\n<dict at 0x104811640>:\r\n  resource: <dict at 0x10473b340>\r\n    test_resource: <dict at 0x104811ec0>\r\n      this: <str at 0x1048c4210>: \"{'users': 'setunion(   )'}\"\r\n```\r\n\r\n### Example 4\r\n```\r\nPLY: PARSE DEBUG START\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'resource',1,0)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : IDENTIFIER . LexToken(STRING,'test_resource',1,23)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x10d2917f0> ('resource')\r\nState  : 5\r\nStack  : objectkey . LexToken(STRING,'test_resource',1,23)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey STRING . LexToken(STRING,'this',1,30)\r\nAction : Reduce rule [objectkey -> STRING] with ['test_resource'] and goto state 19\r\n       p_objectkey_0: None | test_resource\r\nResult : <str @ 0x10d143eb0> ('test_resource')\r\nState  : 19\r\nStack  : objectkey objectkey . LexToken(STRING,'this',1,30)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey STRING . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Reduce rule [objectkey -> STRING] with ['this'] and goto state 19\r\n       p_objectkey_0: None | this\r\nResult : <str @ 0x10d1d43f0> ('this')\r\nState  : 19\r\nStack  : objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'users',2,36)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',2,42)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['users'] and goto state 5\r\n       p_objectkey_0: None | users\r\nResult : <str @ 0x10d1977f0> ('users')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',2,42)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(IDENTIFIER,'setunion',2,44)\r\nAction : Shift and goto state 44\r\nState  : 44\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER . LexToken(LEFTPAREN,'(',2,52)\r\nAction : Shift and goto state 91\r\nState  : 91\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN . LexToken(LEFTBRACKET,'[',2,53)\r\nAction : Shift and goto state 124\r\nState  : 124\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACKET . LexToken(RIGHTBRACKET,']',2,54)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACKET RIGHTBRACKET . LexToken(RIGHTPAREN,')',2,55)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 123\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x10d1cd840> ([])\r\nState  : 123\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list . LexToken(RIGHTPAREN,')',2,55)\r\nERROR: Error  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list . LexToken(RIGHTPAREN,')',2,55)\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 7, in <module>\r\n    obj = hcl.load(file)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/api.py\", line 62, in load\r\n    return loads(fp.read(), export_comments=export_comments)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/api.py\", line 81, in loads\r\n    return HclParser().parse(s, export_comments=export_comments)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/parser.py\", line 642, in parse\r\n    return self.yacc.parse(\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/ply/yacc.py\", line 503, in parse\r\n    tok = self.errorfunc(errtoken)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/parser.py\", line 634, in p_error\r\n    raise ValueError(msg)\r\nValueError: Line 2, column 55: unexpected RIGHTPAREN; expected PERIOD, COMMA\r\n```\r\n### Example 5\r\n```\r\nPLY: PARSE DEBUG START\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'resource',1,0)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : IDENTIFIER . LexToken(STRING,'test_resource',1,23)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['resource'] and goto state 5\r\n       p_objectkey_0: None | resource\r\nResult : <str @ 0x10d6a1170> ('resource')\r\nState  : 5\r\nStack  : objectkey . LexToken(STRING,'test_resource',1,23)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey STRING . LexToken(STRING,'this',1,30)\r\nAction : Reduce rule [objectkey -> STRING] with ['test_resource'] and goto state 19\r\n       p_objectkey_0: None | test_resource\r\nResult : <str @ 0x10d4237f0> ('test_resource')\r\nState  : 19\r\nStack  : objectkey objectkey . LexToken(STRING,'this',1,30)\r\nAction : Shift and goto state 7\r\nState  : 7\r\nStack  : objectkey objectkey STRING . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Reduce rule [objectkey -> STRING] with ['this'] and goto state 19\r\n       p_objectkey_0: None | this\r\nResult : <str @ 0x10d463fb0> ('this')\r\nState  : 19\r\nStack  : objectkey objectkey objectkey . LexToken(LEFTBRACE,'{',1,32)\r\nAction : Shift and goto state 24\r\nState  : 24\r\nStack  : objectkey objectkey objectkey LEFTBRACE . LexToken(IDENTIFIER,'users',2,36)\r\nAction : Shift and goto state 8\r\nState  : 8\r\nStack  : objectkey objectkey objectkey LEFTBRACE IDENTIFIER . LexToken(EQUAL,'=',2,42)\r\nAction : Reduce rule [objectkey -> IDENTIFIER] with ['users'] and goto state 5\r\n       p_objectkey_0: None | users\r\nResult : <str @ 0x10d663d70> ('users')\r\nState  : 5\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey . LexToken(EQUAL,'=',2,42)\r\nAction : Shift and goto state 20\r\nState  : 20\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL . LexToken(IDENTIFIER,'setunion',2,44)\r\nAction : Shift and goto state 44\r\nState  : 44\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER . LexToken(LEFTPAREN,'(',2,52)\r\nAction : Shift and goto state 91\r\nState  : 91\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN . LexToken(LEFTBRACKET,'[',3,58)\r\nAction : Shift and goto state 124\r\nState  : 124\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACKET . LexToken(RIGHTBRACKET,']',3,59)\r\nAction : Shift and goto state 94\r\nState  : 94\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN LEFTBRACKET RIGHTBRACKET . LexToken(COMMA,',',3,60)\r\nAction : Reduce rule [list -> LEFTBRACKET RIGHTBRACKET] with ['[',']'] and goto state 123\r\n            p_list_1: None | [ | ]\r\nResult : <list @ 0x10d69a180> ([])\r\nState  : 123\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list . LexToken(COMMA,',',3,60)\r\nAction : Shift and goto state 149\r\nState  : 149\r\nStack  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list COMMA . LexToken(IDENTIFIER,'test_resource.other.users',4,66)\r\nERROR: Error  : objectkey objectkey objectkey LEFTBRACE objectkey EQUAL IDENTIFIER LEFTPAREN list COMMA . LexToken(IDENTIFIER,'test_resource.other.users',4,66)\r\nTraceback (most recent call last):\r\n  File \"pyhcl.py\", line 7, in <module>\r\n    obj = hcl.load(file)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/api.py\", line 62, in load\r\n    return loads(fp.read(), export_comments=export_comments)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/api.py\", line 81, in loads\r\n    return HclParser().parse(s, export_comments=export_comments)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/parser.py\", line 642, in parse\r\n    return self.yacc.parse(\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/ply/yacc.py\", line 503, in parse\r\n    tok = self.errorfunc(errtoken)\r\n  File \"/Users/kamil.rogon/Library/Python/3.8/lib/python/site-packages/hcl/parser.py\", line 634, in p_error\r\n    raise ValueError(msg)\r\nValueError: Line 4, column 66: unexpected IDENTIFIER; expected RIGHTPAREN, COMMA, LEFTBRACKET, LEFTPAREN\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/76", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/76/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/76/events", "html_url": "https://github.com/virtuald/pyhcl/issues/76", "id": 688552896, "node_id": "MDU6SXNzdWU2ODg1NTI4OTY=", "number": 76, "title": "dependent terraform resources", "user": {"login": "farchide", "id": 7492508, "node_id": "MDQ6VXNlcjc0OTI1MDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7492508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farchide", "html_url": "https://github.com/farchide", "followers_url": "https://api.github.com/users/farchide/followers", "following_url": "https://api.github.com/users/farchide/following{/other_user}", "gists_url": "https://api.github.com/users/farchide/gists{/gist_id}", "starred_url": "https://api.github.com/users/farchide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farchide/subscriptions", "organizations_url": "https://api.github.com/users/farchide/orgs", "repos_url": "https://api.github.com/users/farchide/repos", "events_url": "https://api.github.com/users/farchide/events{/privacy}", "received_events_url": "https://api.github.com/users/farchide/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-29T15:26:13Z", "updated_at": "2020-08-29T17:09:41Z", "closed_at": "2020-08-29T17:09:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "How to use the pyhcl when we have dependent resources in a terraform file?\r\nfor example, let's say we have a vpc resource, and then on then next resource we want to use vpc id to assign it.\r\n\r\npyhcl gives us an error in this situation since the vpc id is not defined and it is not  in the variables. but the terraform code is totally fine and we can execute it with no error.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/75", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/75/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/75/events", "html_url": "https://github.com/virtuald/pyhcl/issues/75", "id": 672949842, "node_id": "MDU6SXNzdWU2NzI5NDk4NDI=", "number": 75, "title": "error parsing 0.12 ", "user": {"login": "bruce-szalwinski", "id": 2782146, "node_id": "MDQ6VXNlcjI3ODIxNDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2782146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bruce-szalwinski", "html_url": "https://github.com/bruce-szalwinski", "followers_url": "https://api.github.com/users/bruce-szalwinski/followers", "following_url": "https://api.github.com/users/bruce-szalwinski/following{/other_user}", "gists_url": "https://api.github.com/users/bruce-szalwinski/gists{/gist_id}", "starred_url": "https://api.github.com/users/bruce-szalwinski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bruce-szalwinski/subscriptions", "organizations_url": "https://api.github.com/users/bruce-szalwinski/orgs", "repos_url": "https://api.github.com/users/bruce-szalwinski/repos", "events_url": "https://api.github.com/users/bruce-szalwinski/events{/privacy}", "received_events_url": "https://api.github.com/users/bruce-szalwinski/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-04T17:16:09Z", "updated_at": "2020-08-04T17:33:37Z", "closed_at": "2020-08-04T17:33:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm a big fan of this library so thank you for your efforts!  We use it to find internally published modules that need to be updated.  Kind of like a dependabot for terraform.  We recently started our upgrade from 0.11 to 0.12 and ran into an issue where pyhcl has issues parsing.  I've stripped things down to the use case below.  This code applys fine using 0.12.28 but fails to parse with latest pyhcl, 0.4.4.\r\n\r\nhcl_parser.py\r\n```\r\nimport hcl\r\n\r\nwith open(\"locals.tf\", \"r\") as fp:\r\n    try:\r\n        nodes = hcl.load(fp)\r\n    except Exception as e:\r\n        print(f\"exception: {e}\")\r\n```\r\n\r\nlocals.tf\r\n```\r\nlocals {\r\n  ids = sort(\r\n    split(\r\n      \",\",\r\n      replace(\"a,b,c,d,e,f\", \"a\", \"z\",),\r\n    ),\r\n  )\r\n}\r\n\r\noutput \"ids\" {\r\n  value = local.ids\r\n}\r\n```\r\n\r\n```\r\nexception: Line 5, column 58: unexpected LEFTPAREN; expected ASTERISK_PERIOD, RIGHTBRACKET, COMMA, RIGHTPAREN, ADD, MINUS, MULTIPLY, DIVIDE\r\n```\r\n\r\nRunning `terraform apply` on the same code is successful.\r\n\r\n```bash\r\nterraform -v  \r\nTerraform v0.12.28\r\n\r\nterraform apply\r\nApply complete! Resources: 0 added, 0 changed, 0 destroyed.\r\n\r\nOutputs:\r\n\r\nids = [\r\n  \"b\",\r\n  \"c\",\r\n  \"d\",\r\n  \"e\",\r\n  \"f\",\r\n  \"z\",\r\n]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/74", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/74/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/74/events", "html_url": "https://github.com/virtuald/pyhcl/issues/74", "id": 642376849, "node_id": "MDU6SXNzdWU2NDIzNzY4NDk=", "number": 74, "title": "Issue parsing nested parenthesis in hcl files", "user": {"login": "cesar-rodriguez", "id": 4625096, "node_id": "MDQ6VXNlcjQ2MjUwOTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4625096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cesar-rodriguez", "html_url": "https://github.com/cesar-rodriguez", "followers_url": "https://api.github.com/users/cesar-rodriguez/followers", "following_url": "https://api.github.com/users/cesar-rodriguez/following{/other_user}", "gists_url": "https://api.github.com/users/cesar-rodriguez/gists{/gist_id}", "starred_url": "https://api.github.com/users/cesar-rodriguez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cesar-rodriguez/subscriptions", "organizations_url": "https://api.github.com/users/cesar-rodriguez/orgs", "repos_url": "https://api.github.com/users/cesar-rodriguez/repos", "events_url": "https://api.github.com/users/cesar-rodriguez/events{/privacy}", "received_events_url": "https://api.github.com/users/cesar-rodriguez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-20T13:35:09Z", "updated_at": "2020-06-20T16:02:02Z", "closed_at": "2020-06-20T16:02:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Description\r\n\r\npyhcl is not able to handle parsing of hcl files containing nested parenthesis.\r\n\r\n# How to reproduce the issue\r\n\r\npyhcl: v0.4.4\r\nPython: 3.7.5\r\n\r\n```\r\n$ cat test.tf \r\nlocals {\r\n  map = {\r\n    r1 = \"21.0.0.0/16\"\r\n    r2 = \"22.4.0.0/16\"\r\n  }\r\n\r\n  sg = {\r\n    \"test\" = [\r\n      \"r1\",\r\n      \"r2\"\r\n    ]\r\n  }\r\n\r\n}\r\n\r\nresource \"aws_security_group\" \"test\" {\r\n  name   = \"testshubham\"\r\n  vpc_id = \"vpc-xxxxxxxxx\"\r\n\r\n  dynamic \"ingress\" {\r\n    for_each = local.sg.test\r\n    content {\r\n      from_port   = 80\r\n      to_port     = 80\r\n      protocol    = \"tcp\"\r\n      cidr_blocks = split(\",\", lookup(local.map, ingress.value, ingress.value))\r\n    }\r\n  }\r\n}\r\n\r\n$ python\r\nPython 3.7.5 (default, Jan  1 2020, 15:46:16) \r\n[Clang 7.0.0 (clang-700.0.72)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import hcl\r\n>>> with open('test.tf', 'r') as fp:\r\n...   obj = hcl.load(fp)\r\n... \r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\n  File \"/Users/therasec/.pyenv/versions/terrascan/lib/python3.7/site-packages/hcl/api.py\", line 62, in load\r\n    return loads(fp.read(), export_comments=export_comments)\r\n  File \"/Users/therasec/.pyenv/versions/terrascan/lib/python3.7/site-packages/hcl/api.py\", line 81, in loads\r\n    return HclParser().parse(s, export_comments=export_comments)\r\n  File \"/Users/therasec/.pyenv/versions/terrascan/lib/python3.7/site-packages/hcl/parser.py\", line 643, in parse\r\n    s, lexer=Lexer(export_comments=export_comments), debug=DEBUG\r\n  File \"/Users/therasec/.pyenv/versions/terrascan/lib/python3.7/site-packages/hcl/ply/yacc.py\", line 503, in parse\r\n    tok = self.errorfunc(errtoken)\r\n  File \"/Users/therasec/.pyenv/versions/terrascan/lib/python3.7/site-packages/hcl/parser.py\", line 634, in p_error\r\n    raise ValueError(msg)\r\nValueError: Line 26, column 397: unexpected LEFTPAREN; expected ASTERISK_PERIOD, RIGHTBRACKET, COMMA, RIGHTPAREN, ADD, MINUS, MULTIPLY, DIVIDE\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/73", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/73/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/73/events", "html_url": "https://github.com/virtuald/pyhcl/issues/73", "id": 631104494, "node_id": "MDU6SXNzdWU2MzExMDQ0OTQ=", "number": 73, "title": "hcl.load throwing error in below code ", "user": {"login": "niarora1406", "id": 57703144, "node_id": "MDQ6VXNlcjU3NzAzMTQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/57703144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niarora1406", "html_url": "https://github.com/niarora1406", "followers_url": "https://api.github.com/users/niarora1406/followers", "following_url": "https://api.github.com/users/niarora1406/following{/other_user}", "gists_url": "https://api.github.com/users/niarora1406/gists{/gist_id}", "starred_url": "https://api.github.com/users/niarora1406/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niarora1406/subscriptions", "organizations_url": "https://api.github.com/users/niarora1406/orgs", "repos_url": "https://api.github.com/users/niarora1406/repos", "events_url": "https://api.github.com/users/niarora1406/events{/privacy}", "received_events_url": "https://api.github.com/users/niarora1406/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-04T19:54:00Z", "updated_at": "2020-06-04T22:38:37Z", "closed_at": "2020-06-04T22:38:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Terraform code in storage_Accounts.tf file :\r\n\r\nresource \"azurerm_storage_account\" \"PAN_FW_STG_AC\" {\r\n  name                     = join(\"\",list(\"paloalto\", substr(md5\"${azurerm_resource_group.fw-e2-rg.name}+1\", 0, 4)))\r\n  resource_group_name      = azurerm_resource_group.fw-e2-rg.name\r\n  location                 = \"eastus2\"\r\n  account_replication_type = \"LRS\"\r\n  account_tier             = \"Standard\"\r\n}\r\n\r\nI don't see any error in my tf code as tf-plan and tf-apply works fine .\r\ni try to parse this code but it throws error : \r\n\r\nimport hcl\r\n\r\nwith open('storage-accounts.tf', 'r') as fp:\r\n    obj = hcl.load(fp)\r\n    print(obj)\r\n\r\n\r\nError: \r\n\r\nValueError: Line 7, column 315: unexpected LEFTPAREN; expected ASTERISK_PERIOD, RIGHTBRACKET, COMMA, RIGHTPAREN, ADD, MINUS, MULTIPLY, DIVIDE\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/72", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/72/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/72/events", "html_url": "https://github.com/virtuald/pyhcl/issues/72", "id": 611599527, "node_id": "MDU6SXNzdWU2MTE1OTk1Mjc=", "number": 72, "title": "Parser failed when reading tf file for aws module", "user": {"login": "amjosuesanchez", "id": 9057537, "node_id": "MDQ6VXNlcjkwNTc1Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/9057537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amjosuesanchez", "html_url": "https://github.com/amjosuesanchez", "followers_url": "https://api.github.com/users/amjosuesanchez/followers", "following_url": "https://api.github.com/users/amjosuesanchez/following{/other_user}", "gists_url": "https://api.github.com/users/amjosuesanchez/gists{/gist_id}", "starred_url": "https://api.github.com/users/amjosuesanchez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amjosuesanchez/subscriptions", "organizations_url": "https://api.github.com/users/amjosuesanchez/orgs", "repos_url": "https://api.github.com/users/amjosuesanchez/repos", "events_url": "https://api.github.com/users/amjosuesanchez/events{/privacy}", "received_events_url": "https://api.github.com/users/amjosuesanchez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-04T04:42:43Z", "updated_at": "2020-05-05T20:35:30Z", "closed_at": "2020-05-05T20:35:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "1st error\r\n```\r\nunexpected IDENTIFIER; expected PERIOD\r\n```\r\nCaused by\r\n```\r\nresource \"aws_instance\" \"ldap\" {\r\n...\r\n  subnet_id              = var.private_subnets[0]\r\n...\r\n}\r\n```\r\n\r\n\r\n2nd error\r\n```\r\nunexpected ASTERISK_PERIOD; expected NUMBER, MULTICOMMENT, MULTIPLY, MINUS, STRING, COMMENT, LE, NE, LT, COMMA, LEFTBRACKET, IDENTIFIER, $end, GT, DIVIDE, LEFTPAREN, RIGHTBRACE, GE, EQ, QMARK, FLOAT, ADD\r\n```\r\nCaused by\r\n```\r\nresource \"aws_route53_record\" \"ldap_int\" {\r\n...\r\nrecords = aws_instance.ldap.*.private_ip\r\n...\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/69", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/69/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/69/events", "html_url": "https://github.com/virtuald/pyhcl/issues/69", "id": 606995474, "node_id": "MDU6SXNzdWU2MDY5OTU0NzQ=", "number": 69, "title": "WARNING: Token 'COMMAEND' defined, but not used", "user": {"login": "raymondbutcher", "id": 993973, "node_id": "MDQ6VXNlcjk5Mzk3Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/993973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raymondbutcher", "html_url": "https://github.com/raymondbutcher", "followers_url": "https://api.github.com/users/raymondbutcher/followers", "following_url": "https://api.github.com/users/raymondbutcher/following{/other_user}", "gists_url": "https://api.github.com/users/raymondbutcher/gists{/gist_id}", "starred_url": "https://api.github.com/users/raymondbutcher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raymondbutcher/subscriptions", "organizations_url": "https://api.github.com/users/raymondbutcher/orgs", "repos_url": "https://api.github.com/users/raymondbutcher/repos", "events_url": "https://api.github.com/users/raymondbutcher/events{/privacy}", "received_events_url": "https://api.github.com/users/raymondbutcher/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-26T12:01:18Z", "updated_at": "2020-04-26T19:26:57Z", "closed_at": "2020-04-26T19:26:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, with 0.4.3 I see this printed out a lot:\r\n\r\n```\r\nWARNING: Token 'COMMAEND' defined, but not used\r\nWARNING: There is 1 unused token\r\n```\r\n\r\nDowngrading to 0.4.2 fixes it.\r\n\r\n#68 was the only difference between those 2 versions so it's likely something in there.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/67", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/67/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/67/events", "html_url": "https://github.com/virtuald/pyhcl/issues/67", "id": 599066313, "node_id": "MDU6SXNzdWU1OTkwNjYzMTM=", "number": 67, "title": ".tfvars nested list parse error", "user": {"login": "robeden", "id": 1891321, "node_id": "MDQ6VXNlcjE4OTEzMjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1891321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robeden", "html_url": "https://github.com/robeden", "followers_url": "https://api.github.com/users/robeden/followers", "following_url": "https://api.github.com/users/robeden/following{/other_user}", "gists_url": "https://api.github.com/users/robeden/gists{/gist_id}", "starred_url": "https://api.github.com/users/robeden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robeden/subscriptions", "organizations_url": "https://api.github.com/users/robeden/orgs", "repos_url": "https://api.github.com/users/robeden/repos", "events_url": "https://api.github.com/users/robeden/events{/privacy}", "received_events_url": "https://api.github.com/users/robeden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-13T18:52:12Z", "updated_at": "2020-04-14T17:10:50Z", "closed_at": "2020-04-14T17:10:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "This variable fails to parse in a `.tfvars` file:\r\n\r\n```\r\nMX_RECORDS = [\r\n  [\"\", [\r\n    \"10 aspmx.l.google.com.\",\r\n    \"20 alt1.aspmx.l.google.com.\",\r\n    \"20 alt2.aspmx.l.google.com.\",\r\n    \"30 aspmx3.googlemail.com.\",\r\n    \"30 aspmx2.googlemail.com.\",\r\n  ]],\r\n]\r\n```\r\n\r\nThe error is: `Line <LINE>, column <COLUMN>: unexpected LEFTBRACKET`\r\n\r\nIt parses cleanly with Terraform and parsers linking with the Hashicorp HCL parser, so I think it should be valid.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/66", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/66/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/66/events", "html_url": "https://github.com/virtuald/pyhcl/issues/66", "id": 585579923, "node_id": "MDU6SXNzdWU1ODU1Nzk5MjM=", "number": 66, "title": "Parser debug hard-coded to on since \"export comments\" merged.", "user": {"login": "fred-vogt", "id": 1837107, "node_id": "MDQ6VXNlcjE4MzcxMDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1837107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fred-vogt", "html_url": "https://github.com/fred-vogt", "followers_url": "https://api.github.com/users/fred-vogt/followers", "following_url": "https://api.github.com/users/fred-vogt/following{/other_user}", "gists_url": "https://api.github.com/users/fred-vogt/gists{/gist_id}", "starred_url": "https://api.github.com/users/fred-vogt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fred-vogt/subscriptions", "organizations_url": "https://api.github.com/users/fred-vogt/orgs", "repos_url": "https://api.github.com/users/fred-vogt/repos", "events_url": "https://api.github.com/users/fred-vogt/events{/privacy}", "received_events_url": "https://api.github.com/users/fred-vogt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-21T20:39:45Z", "updated_at": "2020-04-14T17:08:02Z", "closed_at": "2020-04-14T17:08:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "It would seem that [optional export code comments](https://github.com/virtuald/pyhcl/commit/a34ff30682a18b3f0dd353a450e899f0509671e1#diff-a28c13c8319776e20d180bfc5c31bc78) left `debug=True` when parsing.\r\n\r\n#65 fixes it.\r\n\r\n```python\r\ndef parse(self, s):\r\n      return self.yacc.parse(s, lexer=Lexer())\r\n# => \r\ndef parse(self, s, export_comments=None):\r\n    return self.yacc.parse(s, lexer=Lexer(export_comments=export_comments), debug=True)\r\n```\r\n\r\n## Workaround\r\nUse version 0.4.0 or older.\r\n\r\nrequirements.txt:\r\n```\r\npyhcl==0.4.0\r\n```\r\n\r\n## Output\r\n```\r\nPLY: PARSE DEBUG START\r\n\r\nState  : 0\r\nStack  : . LexToken(IDENTIFIER,'...',...)\r\nAction : Shift and goto state 7\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/60", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/60/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/60/events", "html_url": "https://github.com/virtuald/pyhcl/issues/60", "id": 544772896, "node_id": "MDU6SXNzdWU1NDQ3NzI4OTY=", "number": 60, "title": "python-ply should be vendored in", "user": {"login": "drawks", "id": 410276, "node_id": "MDQ6VXNlcjQxMDI3Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/410276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drawks", "html_url": "https://github.com/drawks", "followers_url": "https://api.github.com/users/drawks/followers", "following_url": "https://api.github.com/users/drawks/following{/other_user}", "gists_url": "https://api.github.com/users/drawks/gists{/gist_id}", "starred_url": "https://api.github.com/users/drawks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drawks/subscriptions", "organizations_url": "https://api.github.com/users/drawks/orgs", "repos_url": "https://api.github.com/users/drawks/repos", "events_url": "https://api.github.com/users/drawks/events{/privacy}", "received_events_url": "https://api.github.com/users/drawks/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-02T22:23:22Z", "updated_at": "2020-01-03T15:39:37Z", "closed_at": "2020-01-03T15:39:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is an interesting history of ply compatibility issues reading through the close issues in this project (#33 #39 #43 etc), given that python-ply itself stop releasing as a standalone python module in 2018 and advised downstream users to vendor it in; this project should do that.\r\n\r\n* https://github.com/dabeaz/ply/blob/master/CHANGES#L3-L9", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/59", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/59/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/59/events", "html_url": "https://github.com/virtuald/pyhcl/issues/59", "id": 541471901, "node_id": "MDU6SXNzdWU1NDE0NzE5MDE=", "number": 59, "title": "Variables interpolation ", "user": {"login": "Ar1k14001", "id": 41908916, "node_id": "MDQ6VXNlcjQxOTA4OTE2", "avatar_url": "https://avatars2.githubusercontent.com/u/41908916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ar1k14001", "html_url": "https://github.com/Ar1k14001", "followers_url": "https://api.github.com/users/Ar1k14001/followers", "following_url": "https://api.github.com/users/Ar1k14001/following{/other_user}", "gists_url": "https://api.github.com/users/Ar1k14001/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ar1k14001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ar1k14001/subscriptions", "organizations_url": "https://api.github.com/users/Ar1k14001/orgs", "repos_url": "https://api.github.com/users/Ar1k14001/repos", "events_url": "https://api.github.com/users/Ar1k14001/events{/privacy}", "received_events_url": "https://api.github.com/users/Ar1k14001/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-22T16:24:38Z", "updated_at": "2019-12-22T19:40:47Z", "closed_at": "2019-12-22T19:40:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "The original hcl implement variables interpolation like in the below example:\r\n\r\n`provider \"linode\" { `\r\n`    token = \"${var.token}\" }`\r\n\r\npyhcl however doesn't implement it and the value given by parsing in `\"${var.token}\"` instead of the token itself.\r\nPlease fix this incompatible parsing.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/58", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/58/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/58/events", "html_url": "https://github.com/virtuald/pyhcl/issues/58", "id": 510680142, "node_id": "MDU6SXNzdWU1MTA2ODAxNDI=", "number": 58, "title": "ship parsetable with wheel/etc", "user": {"login": "virtuald", "id": 567900, "node_id": "MDQ6VXNlcjU2NzkwMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/567900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/virtuald", "html_url": "https://github.com/virtuald", "followers_url": "https://api.github.com/users/virtuald/followers", "following_url": "https://api.github.com/users/virtuald/following{/other_user}", "gists_url": "https://api.github.com/users/virtuald/gists{/gist_id}", "starred_url": "https://api.github.com/users/virtuald/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/virtuald/subscriptions", "organizations_url": "https://api.github.com/users/virtuald/orgs", "repos_url": "https://api.github.com/users/virtuald/repos", "events_url": "https://api.github.com/users/virtuald/events{/privacy}", "received_events_url": "https://api.github.com/users/virtuald/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-22T14:05:23Z", "updated_at": "2020-01-03T15:39:37Z", "closed_at": "2020-01-03T15:39:37Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Make #56 not necessary.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/55", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/55/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/55/events", "html_url": "https://github.com/virtuald/pyhcl/issues/55", "id": 455874163, "node_id": "MDU6SXNzdWU0NTU4NzQxNjM=", "number": 55, "title": "HCL v0.12 brings incompatible updates.", "user": {"login": "NadOby", "id": 761579, "node_id": "MDQ6VXNlcjc2MTU3OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/761579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NadOby", "html_url": "https://github.com/NadOby", "followers_url": "https://api.github.com/users/NadOby/followers", "following_url": "https://api.github.com/users/NadOby/following{/other_user}", "gists_url": "https://api.github.com/users/NadOby/gists{/gist_id}", "starred_url": "https://api.github.com/users/NadOby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NadOby/subscriptions", "organizations_url": "https://api.github.com/users/NadOby/orgs", "repos_url": "https://api.github.com/users/NadOby/repos", "events_url": "https://api.github.com/users/NadOby/events{/privacy}", "received_events_url": "https://api.github.com/users/NadOby/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-06-13T17:51:42Z", "updated_at": "2020-01-08T03:12:33Z", "closed_at": "2020-01-08T03:12:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Steps to reproduce:\r\nupgrade terraform to latest version.\r\n```\r\ncd /tmp/\r\n```\r\n```\r\ngit clone https://github.com/terraform-providers/terraform-provider-aws.git\r\nCloning into 'terraform-provider-aws'...\r\nremote: Enumerating objects: 17, done.\r\nremote: Counting objects: 100% (17/17), done.\r\nremote: Compressing objects: 100% (11/11), done.\r\nremote: Total 97677 (delta 7), reused 11 (delta 6), pack-reused 97660\r\nReceiving objects: 100% (97677/97677), 83.75 MiB | 8.58 MiB/s, done.\r\nResolving deltas: 100% (62884/62884), done.\r\nChecking out files: 100% (6246/6246), done.\r\n```\r\n```\r\ncd terraform-provider-aws/examples/two-tier\r\n```\r\n```\r\nterraform init\r\n\r\nInitializing provider plugins...\r\n- Checking for available provider plugins on https://releases.hashicorp.com...\r\n- Downloading plugin for provider \"aws\" (2.14.0)...\r\n\r\nThe following providers do not have any version constraints in configuration,\r\nso the latest version was installed.\r\n\r\nTo prevent automatic upgrades to new major versions that may contain breaking\r\nchanges, it is recommended to add version = \"...\" constraints to the\r\ncorresponding provider blocks in configuration, with the constraint strings\r\nsuggested below.\r\n\r\n* provider.aws: version = \"~> 2.14\"\r\n\r\nTerraform has been successfully initialized!\r\n\r\nYou may now begin working with Terraform. Try running \"terraform plan\" to see\r\nany changes that are required for your infrastructure. All Terraform commands\r\nshould now work.\r\n\r\nIf you ever set or change modules or backend configuration for Terraform,\r\nrerun this command to reinitialize your working directory. If you forget, other\r\ncommands will detect it and remind you to do so if necessary.\r\n```\r\n```\r\nterraform 0.12upgrade\r\n\r\nThis command will rewrite the configuration files in the given directory so\r\nthat they use the new syntax features from Terraform v0.12, and will identify\r\nany constructs that may need to be adjusted for correct operation with\r\nTerraform v0.12.\r\n\r\nWe recommend using this command in a clean version control work tree, so that\r\nyou can easily see the proposed changes as a diff against the latest commit.\r\nIf you have uncommited changes already present, we recommend aborting this\r\ncommand and dealing with them before running this command again.\r\n\r\nWould you like to upgrade the module in the current directory?\r\n  Only 'yes' will be accepted to confirm.\r\n\r\n  Enter a value: yes\r\n\r\n-----------------------------------------------------------------------------\r\n\r\nUpgrade complete!\r\n\r\nThe configuration files were upgraded successfully. Use your version control\r\nsystem to review the proposed changes, make any necessary adjustments, and\r\nthen commit.\r\n```\r\n```cat ~/tmp/testhcl.py\r\nfrom glob import iglob\r\nimport hcl\r\n\r\nfor filename in iglob('**.tf'):\r\n    with open(filename, 'r') as f:\r\n        print(filename)\r\n        hcl.loads(f.read())\r\n```\r\n```\r\npython3  ~/tmp/testhcl.py\r\nmain.tf\r\nTraceback (most recent call last):\r\n  File \"/home/evgeniy/tmp/testhcl.py\", line 7, in <module>\r\n    hcl.loads(f.read())\r\n  File \"/home/evgeniy/.pyenv/versions/3.7.3/lib/python3.7/site-packages/hcl/api.py\", line 66, in loads\r\n    return HclParser().parse(s)\r\n  File \"/home/evgeniy/.pyenv/versions/3.7.3/lib/python3.7/site-packages/hcl/parser.py\", line 326, in parse\r\n    return self.yacc.parse(s, lexer=Lexer())\r\n  File \"/home/evgeniy/.pyenv/versions/3.7.3/lib/python3.7/site-packages/ply/yacc.py\", line 333, in parse\r\n    return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\r\n  File \"/home/evgeniy/.pyenv/versions/3.7.3/lib/python3.7/site-packages/ply/yacc.py\", line 1201, in parseopt_notrack\r\n    tok = call_errorfunc(self.errorfunc, errtoken, self)\r\n  File \"/home/evgeniy/.pyenv/versions/3.7.3/lib/python3.7/site-packages/ply/yacc.py\", line 192, in call_errorfunc\r\n    r = errorfunc(token)\r\n  File \"/home/evgeniy/.pyenv/versions/3.7.3/lib/python3.7/site-packages/hcl/parser.py\", line 318, in p_error\r\n    raise ValueError(msg)\r\nValueError: Line 3, column 70: unexpected IDENTIFIER\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/54", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/54/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/54/events", "html_url": "https://github.com/virtuald/pyhcl/issues/54", "id": 439312878, "node_id": "MDU6SXNzdWU0MzkzMTI4Nzg=", "number": 54, "title": "pyhcl throws a ValueError when parsing the empty string", "user": {"login": "alexwlchan", "id": 301220, "node_id": "MDQ6VXNlcjMwMTIyMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/301220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexwlchan", "html_url": "https://github.com/alexwlchan", "followers_url": "https://api.github.com/users/alexwlchan/followers", "following_url": "https://api.github.com/users/alexwlchan/following{/other_user}", "gists_url": "https://api.github.com/users/alexwlchan/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexwlchan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexwlchan/subscriptions", "organizations_url": "https://api.github.com/users/alexwlchan/orgs", "repos_url": "https://api.github.com/users/alexwlchan/repos", "events_url": "https://api.github.com/users/alexwlchan/events{/privacy}", "received_events_url": "https://api.github.com/users/alexwlchan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-01T20:32:49Z", "updated_at": "2020-04-14T17:10:52Z", "closed_at": "2020-04-14T17:10:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you try to parse an empty string (or in my case, an empty file), you get an error. Here\u2019s a minimal example:\r\n\r\n```python\r\nimport hcl\r\n\r\nprint(hcl.loads(\"\"))\r\n```\r\n\r\nThis is the error it throws:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"r.py\", line 3, in <module>\r\n    print(hcl.loads(\"\"))\r\n  File \"/Users/alexwlchan/.virtualenvs/tempenv-7c5b148003b76/lib/python3.6/site-packages/hcl/api.py\", line 65, in loads\r\n    if isHcl(s):\r\n  File \"/Users/alexwlchan/.virtualenvs/tempenv-7c5b148003b76/lib/python3.6/site-packages/hcl/api.py\", line 42, in isHcl\r\n    raise ValueError(\"No HCL object could be decoded\")\r\nValueError: No HCL object could be decoded\r\n```\r\n\r\nI think this could be returned as `{}` and not throw an exception. I haven\u2019t checked what the Golang parser does here.\r\n\r\nPackage versions:\r\n\r\n```console\r\n$ pip freeze\r\nply==3.11\r\npyhcl==0.3.12\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/51", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/51/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/51/events", "html_url": "https://github.com/virtuald/pyhcl/issues/51", "id": 427783328, "node_id": "MDU6SXNzdWU0Mjc3ODMzMjg=", "number": 51, "title": "heredoc handling", "user": {"login": "sbalbach", "id": 35373092, "node_id": "MDQ6VXNlcjM1MzczMDky", "avatar_url": "https://avatars3.githubusercontent.com/u/35373092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbalbach", "html_url": "https://github.com/sbalbach", "followers_url": "https://api.github.com/users/sbalbach/followers", "following_url": "https://api.github.com/users/sbalbach/following{/other_user}", "gists_url": "https://api.github.com/users/sbalbach/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbalbach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbalbach/subscriptions", "organizations_url": "https://api.github.com/users/sbalbach/orgs", "repos_url": "https://api.github.com/users/sbalbach/repos", "events_url": "https://api.github.com/users/sbalbach/events{/privacy}", "received_events_url": "https://api.github.com/users/sbalbach/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-01T15:51:26Z", "updated_at": "2019-04-02T00:45:18Z", "closed_at": "2019-04-02T00:44:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "is there a reason that the contents of heredoc blocks are loaded as a single string instead of as json?  If a single line is added at the bottom of the _end_heredoc() method like this:\r\n\r\n`t.value = json.loads(t.value)`\r\n\r\nthe contents of the heredoc will be accessible as a dictionary like the rest of the document.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/49", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/49/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/49/events", "html_url": "https://github.com/virtuald/pyhcl/issues/49", "id": 416037299, "node_id": "MDU6SXNzdWU0MTYwMzcyOTk=", "number": 49, "title": "Unable to build wheel pyhcl, missing ply.lex", "user": {"login": "matthbak", "id": 7922130, "node_id": "MDQ6VXNlcjc5MjIxMzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/7922130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthbak", "html_url": "https://github.com/matthbak", "followers_url": "https://api.github.com/users/matthbak/followers", "following_url": "https://api.github.com/users/matthbak/following{/other_user}", "gists_url": "https://api.github.com/users/matthbak/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthbak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthbak/subscriptions", "organizations_url": "https://api.github.com/users/matthbak/orgs", "repos_url": "https://api.github.com/users/matthbak/repos", "events_url": "https://api.github.com/users/matthbak/events{/privacy}", "received_events_url": "https://api.github.com/users/matthbak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-03-01T10:27:11Z", "updated_at": "2020-01-03T15:39:37Z", "closed_at": "2020-01-03T15:39:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "`mkvirtualenv foo-bar-fudge-tf\r\nNew python executable in /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/python\r\nInstalling setuptools, pip, wheel...done.\r\nvirtualenvwrapper.user_scripts creating /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/predeactivate\r\nvirtualenvwrapper.user_scripts creating /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/postdeactivate\r\nvirtualenvwrapper.user_scripts creating /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/preactivate\r\nvirtualenvwrapper.user_scripts creating /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/postactivate\r\nvirtualenvwrapper.user_scripts creating /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/get_env_details\r\n(foo-bar-fudge-tf) (0) matthbak@matthbak-laptop ~/Projects/cpsre/terraform-modules/foo-bar-fudge-tf\r\n$ pip install pyhcl\r\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.\r\nLooking in indexes: ...\r\nCollecting pyhcl\r\n  Downloading https://files.pythonhosted.org/packages/8c/90/411f698550155532a1375d0367da08c2d0ecc922d4c0362bd4236893238b/pyhcl-0.3.12.tar.gz\r\nCollecting ply<4,>=3.8 (from pyhcl)\r\n  Using cached https://files.pythonhosted.org/packages/a3/58/35da89ee790598a0700ea49b2a66594140f44dec458c07e8e3d4979137fc/ply-3.11-py2.py3-none-any.whl\r\nBuilding wheels for collected packages: pyhcl\r\n  Building wheel for pyhcl (setup.py) ... error\r\n  Complete output from command /home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-q2Up_m/pyhcl/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/pip-wheel-Pt1ol2 --python-tag cp27:\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  Generating parse table...\r\n  Traceback (most recent call last):\r\n    File \"<string>\", line 1, in <module>\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/setup.py\", line 101, in <module>\r\n      \"Topic :: Text Processing\",\r\n    File \"/usr/lib/python2.7/distutils/core.py\", line 151, in setup\r\n      dist.run_commands()\r\n    File \"/usr/lib/python2.7/distutils/dist.py\", line 953, in run_commands\r\n      self.run_command(cmd)\r\n    File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\r\n      cmd_obj.run()\r\n    File \"/home/matthbak/Apps/virtualenvs/foo-bar-fudge-tf/local/lib/python2.7/site-packages/wheel/bdist_wheel.py\", line 192, in run\r\n      self.run_command('build')\r\n    File \"/usr/lib/python2.7/distutils/cmd.py\", line 326, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\r\n      cmd_obj.run()\r\n    File \"/usr/lib/python2.7/distutils/command/build.py\", line 128, in run\r\n      self.run_command(cmd_name)\r\n    File \"/usr/lib/python2.7/distutils/cmd.py\", line 326, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\r\n      cmd_obj.run()\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/setup.py\", line 39, in run\r\n      self.execute(_pre_install, (), msg=\"Generating parse table...\")\r\n    File \"/usr/lib/python2.7/distutils/cmd.py\", line 349, in execute\r\n      util.execute(func, args, msg, dry_run=self.dry_run)\r\n    File \"/usr/lib/python2.7/distutils/util.py\", line 309, in execute\r\n      func(*args)\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/setup.py\", line 31, in _pre_install\r\n      import hcl\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/src/hcl/__init__.py\", line 1, in <module>\r\n      from .api import dumps, load, loads\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/src/hcl/api.py\", line 2, in <module>\r\n      from .parser import HclParser\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/src/hcl/parser.py\", line 4, in <module>\r\n      from .lexer import Lexer\r\n    File \"/tmp/pip-install-q2Up_m/pyhcl/src/hcl/lexer.py\", line 3, in <module>\r\n      import ply.lex as lex\r\n  ImportError: No module named ply.lex\r\n  \r\n  ----------------------------------------\r\n  Failed building wheel for pyhcl\r\n  Running setup.py clean for pyhcl\r\nFailed to build pyhcl\r\nInstalling collected packages: ply, pyhcl\r\n  Running setup.py install for pyhcl ... done\r\nSuccessfully installed ply-3.11 pyhcl-0.3.12\r\n`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/43", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/43/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/43/events", "html_url": "https://github.com/virtuald/pyhcl/issues/43", "id": 370800080, "node_id": "MDU6SXNzdWUzNzA4MDAwODA=", "number": 43, "title": "Upgrade ply to => 3.11 ", "user": {"login": "PsyanticY", "id": 20524473, "node_id": "MDQ6VXNlcjIwNTI0NDcz", "avatar_url": "https://avatars0.githubusercontent.com/u/20524473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PsyanticY", "html_url": "https://github.com/PsyanticY", "followers_url": "https://api.github.com/users/PsyanticY/followers", "following_url": "https://api.github.com/users/PsyanticY/following{/other_user}", "gists_url": "https://api.github.com/users/PsyanticY/gists{/gist_id}", "starred_url": "https://api.github.com/users/PsyanticY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PsyanticY/subscriptions", "organizations_url": "https://api.github.com/users/PsyanticY/orgs", "repos_url": "https://api.github.com/users/PsyanticY/repos", "events_url": "https://api.github.com/users/PsyanticY/events{/privacy}", "received_events_url": "https://api.github.com/users/PsyanticY/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-16T21:07:17Z", "updated_at": "2018-10-24T23:32:56Z", "closed_at": "2018-10-24T23:32:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/40", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/40/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/40/events", "html_url": "https://github.com/virtuald/pyhcl/issues/40", "id": 308653515, "node_id": "MDU6SXNzdWUzMDg2NTM1MTU=", "number": 40, "title": "Failure to load references or resolve them", "user": {"login": "braxtone", "id": 2973952, "node_id": "MDQ6VXNlcjI5NzM5NTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2973952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/braxtone", "html_url": "https://github.com/braxtone", "followers_url": "https://api.github.com/users/braxtone/followers", "following_url": "https://api.github.com/users/braxtone/following{/other_user}", "gists_url": "https://api.github.com/users/braxtone/gists{/gist_id}", "starred_url": "https://api.github.com/users/braxtone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/braxtone/subscriptions", "organizations_url": "https://api.github.com/users/braxtone/orgs", "repos_url": "https://api.github.com/users/braxtone/repos", "events_url": "https://api.github.com/users/braxtone/events{/privacy}", "received_events_url": "https://api.github.com/users/braxtone/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-26T16:53:53Z", "updated_at": "2018-03-27T03:49:30Z", "closed_at": "2018-03-26T23:06:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using [locals](https://www.terraform.io/docs/configuration/locals.html) in my main.tf file for tagging values and then using them to simplify tagging of other resources like so:\r\n````\r\n$ cat main.tf\r\n...\r\nlocals {\r\n  tagging_standard = {\r\n    \"Environment\" = \"Development\"\r\n    \"Description\" = \"<some description>\"\r\n    \"Application\" = \"app1\"\r\n    \"Creator\"     = \"joebob\"\r\n...\r\n  }\r\n}\r\n\r\n$ cat vpc.tf\r\n...\r\nresource \"aws_default_route_table\" \"r\" {\r\n  default_route_table_id = \"${aws_vpc.vpc.default_route_table_id}\"\r\n\r\n  route {\r\n    cidr_block = \"0.0.0.0/0\"\r\n    gateway_id = \"${aws_internet_gateway.gw.id}\"\r\n  }\r\n\r\n  tags = \"${local.tagging_standard}\"\r\n}\r\n````\r\n\r\nWhen I try to use pyhcl to parse the hcl/tf files, it doesn't resolve them, and instead includes them as strings:\r\n````\r\n$ hcltool /path/to/terraform/vpc.tf\r\n{\r\n    \"resource\": {\r\n        \"aws_default_route_table\": {\r\n            \"r\": {\r\n                \"default_route_table_id\": \"${aws_vpc.vpc.default_route_table_id}\",\r\n                \"route\": {\r\n                    \"cidr_block\": \"0.0.0.0/0\",\r\n                    \"gateway_id\": \"${aws_internet_gateway.gw.id}\"\r\n                },\r\n                \"tags\": \"${local.tagging_standard}\"\r\n            }\r\n        },\r\n...\r\n````\r\nExpected behavior:\r\n````\r\n$ hcltool /path/to/terraform/vpc.tf\r\n{\r\n    \"resource\": {\r\n        \"aws_default_route_table\": {\r\n            \"r\": {\r\n                \"default_route_table_id\": \"${aws_vpc.vpc.default_route_table_id}\",\r\n                \"route\": {\r\n                    \"cidr_block\": \"0.0.0.0/0\",\r\n                    \"gateway_id\": \"${aws_internet_gateway.gw.id}\"\r\n                },\r\n                \"tags\": {\r\n                    \"Environment\" = \"Development\",\r\n                    \"Description\" = \"<some description>\",\r\n                    \"Application\" = \"app1\",\r\n                    \"Creator\"     = \"joebob\"\r\n                }\r\n            }\r\n        },\r\n...\r\n````\r\n\r\nIs there another way to get pyhcl to traverse a whole project and do this translation like the terraform cli does? Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/39", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/39/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/39/events", "html_url": "https://github.com/virtuald/pyhcl/issues/39", "id": 302494481, "node_id": "MDU6SXNzdWUzMDI0OTQ0ODE=", "number": 39, "title": "Unable to pip install; No module named 'ply'", "user": {"login": "scbunn", "id": 4461, "node_id": "MDQ6VXNlcjQ0NjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scbunn", "html_url": "https://github.com/scbunn", "followers_url": "https://api.github.com/users/scbunn/followers", "following_url": "https://api.github.com/users/scbunn/following{/other_user}", "gists_url": "https://api.github.com/users/scbunn/gists{/gist_id}", "starred_url": "https://api.github.com/users/scbunn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scbunn/subscriptions", "organizations_url": "https://api.github.com/users/scbunn/orgs", "repos_url": "https://api.github.com/users/scbunn/repos", "events_url": "https://api.github.com/users/scbunn/events{/privacy}", "received_events_url": "https://api.github.com/users/scbunn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-05T22:45:45Z", "updated_at": "2019-10-07T23:59:31Z", "closed_at": "2018-03-07T06:48:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "This started happened today\r\n\r\n```\r\n\u276f pip install pyhcl\r\nCollecting pyhcl\r\n  Using cached pyhcl-0.3.10.tar.gz\r\nCollecting ply==3.10 (from pyhcl)\r\n  Using cached ply-3.10.tar.gz\r\nBuilding wheels for collected packages: pyhcl, ply\r\n  Running setup.py bdist_wheel for pyhcl ... error\r\n  Complete output from command /usr/local/opt/python/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/setup.\r\npy';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/tmp\r\n_zczlpg5pip-wheel- --python-tag cp36:\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  Generating parse table...\r\n  Traceback (most recent call last):\r\n    File \"<string>\", line 1, in <module>\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/setup.py\", line 96, in <module>\r\n      \"Topic :: Text Processing\"\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/core.py\", line 148, in setup\r\n      dist.run_commands()\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 955, in run_commands\r\n      self.run_command(cmd)\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n      cmd_obj.run()\r\n    File \"/usr/local/lib/python3.6/site-packages/wheel/bdist_wheel.py\", line 204, in run\r\n      self.run_command('build')\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n      cmd_obj.run()\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build.py\", line 135, in run\r\n      self.run_command(cmd_name)\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n      cmd_obj.run()\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/setup.py\", line 37, in run\r\n      self.execute(_pre_install, (), msg=\"Generating parse table...\")\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/cmd.py\", line 335, in execute\r\n      util.execute(func, args, msg, dry_run=self.dry_run)\r\n    File \"/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/util.py\", line 301, in execute\r\n      func(*args)\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/setup.py\", line 30, in _pre_install\r\n      import hcl\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/src/hcl/__init__.py\", line 1, in <module>\r\n      from .api import dumps, load, loads\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/src/hcl/api.py\", line 3, in <module>\r\n      from .parser import HclParser\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/src/hcl/parser.py\", line 5, in <module>\r\n      from .lexer import Lexer\r\n    File \"/private/var/folders/f4/rdfz0fk96tggm7k6lm9_10n00000gn/T/pip-build-gx2kk83q/pyhcl/src/hcl/lexer.py\", line 3, in <module>\r\n      import ply.lex as lex\r\n  ModuleNotFoundError: No module named 'ply'\r\n\r\n  ----------------------------------------\r\n  Failed building wheel for pyhcl\r\n  Running setup.py clean for pyhcl\r\n  Running setup.py bdist_wheel for ply ... done\r\n  Stored in directory: /Users/scbunn/Library/Caches/pip/wheels/ad/dd/ad/8ce1991a7b380dfe23d6cc81a4de5c2775bc728b5a0a7721aa\r\nSuccessfully built ply\r\nFailed to build pyhcl\r\nInstalling collected packages: ply, pyhcl\r\n  Running setup.py install for pyhcl ... done\r\nSuccessfully installed ply-3.10 pyhcl-0.3.10\r\n\r\n```\r\n\r\nIt looks like pyhcl gets installed; but it causes my jobs to fail due to the error. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/36", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/36/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/36/events", "html_url": "https://github.com/virtuald/pyhcl/issues/36", "id": 296553982, "node_id": "MDU6SXNzdWUyOTY1NTM5ODI=", "number": 36, "title": "heredoc termination problems", "user": {"login": "28mm", "id": 22941656, "node_id": "MDQ6VXNlcjIyOTQxNjU2", "avatar_url": "https://avatars3.githubusercontent.com/u/22941656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/28mm", "html_url": "https://github.com/28mm", "followers_url": "https://api.github.com/users/28mm/followers", "following_url": "https://api.github.com/users/28mm/following{/other_user}", "gists_url": "https://api.github.com/users/28mm/gists{/gist_id}", "starred_url": "https://api.github.com/users/28mm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/28mm/subscriptions", "organizations_url": "https://api.github.com/users/28mm/orgs", "repos_url": "https://api.github.com/users/28mm/repos", "events_url": "https://api.github.com/users/28mm/events{/privacy}", "received_events_url": "https://api.github.com/users/28mm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-12T22:54:25Z", "updated_at": "2018-02-13T18:54:50Z", "closed_at": "2018-02-13T15:28:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nfirst of all: I've been using pyHCL and love it. Thank you.\r\n\r\nThere seems to be a difference in the way *Terraform* and *pyHCL* handle heredoc termination, that's come up for me a couple of times. \r\n\r\n*Terraform* seems happy to accept `EOF` at either the beginning or the end of a line, while *PyHCL* only accepts it at the beginning (or after tabs, in the case of tabbed heredocs). \r\n\r\nSee below for a simple demonstration of the issue. I pulled the definition of `cert_options` from `tectonic`, where I've most recently encountered it. \r\n\r\nAnyway, I will have a look at the parser code, but any guidance is much appreciated :)\r\n\r\n````hcl\r\nprovider \"aws\" {\r\n\tregion = \"us-east-1\"\r\n}\r\n\r\nvariable cert_options {\r\n\r\n   default=<<EOF\r\n--cert-file=/etc/ssl/etcd/server.crt \\\r\n  --key-file=/etc/ssl/etcd/server.key \\\r\n  --peer-cert-file=/etc/ssl/etcd/peer.crt \\\r\n  --peer-key-file=/etc/ssl/etcd/peer.key \\\r\n  --peer-trusted-ca-file=/etc/ssl/etcd/ca.crt \\\r\n  --peer-client-cert-auth=trueEOF\r\n\r\n}\r\n````\r\n````python\r\nIn [1]: import hcl\r\n\r\nIn [2]: config = \"\"\"\r\n   ...: provider \"aws\" {\r\n   ...: region = \"us-east-1\"\r\n   ...: }\r\n   ...: \r\n   ...: variable cert_options {\r\n   ...: \r\n   ...:    default=<<EOF\r\n   ...:   --cert-file=/etc/ssl/etcd/server.crt \\\r\n   ...:   --key-file=/etc/ssl/etcd/server.key \\\r\n   ...:   --peer-cert-file=/etc/ssl/etcd/peer.crt \\\r\n   ...:   --peer-key-file=/etc/ssl/etcd/peer.key \\\r\n   ...:   --peer-trusted-ca-file=/etc/ssl/etcd/ca.crt \\\r\n   ...:   --peer-client-cert-auth=trueEOF\r\n   ...: \r\n   ...: }\"\"\"\r\n\r\nIn [3]: hcl.loads(config)\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-3-18dfafa781ac> in <module>()\r\n----> 1 hcl.loads(config)\r\n\r\n/usr/local/lib/python3.6/site-packages/hcl/api.py in loads(s)\r\n     60     s = u(s)\r\n     61     if isHcl(s):\r\n---> 62         return HclParser().parse(s)\r\n     63     else:\r\n     64         return json.loads(s)\r\n\r\n/usr/local/lib/python3.6/site-packages/hcl/parser.py in parse(self, s)\r\n    305 \r\n    306     def parse(self, s):\r\n--> 307         return self.yacc.parse(s, lexer=Lexer())\r\n    308 \r\n    309 \r\n\r\n/usr/local/lib/python3.6/site-packages/ply/yacc.py in parse(self, input, lexer, debug, tracking, tokenfunc)\r\n    329             return self.parseopt(input, lexer, debug, tracking, tokenfunc)\r\n    330         else:\r\n--> 331             return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\r\n    332 \r\n    333 \r\n\r\n/usr/local/lib/python3.6/site-packages/ply/yacc.py in parseopt_notrack(self, input, lexer, debug, tracking, tokenfunc)\r\n   1059                 if not lookahead:\r\n   1060                     if not lookaheadstack:\r\n-> 1061                         lookahead = get_token()     # Get the next token\r\n   1062                     else:\r\n   1063                         lookahead = lookaheadstack.pop()\r\n\r\n/usr/local/lib/python3.6/site-packages/hcl/lexer.py in token(self)\r\n    273 \r\n    274     def token(self):\r\n--> 275         return self.lex.token()\r\n\r\n/usr/local/lib/python3.6/site-packages/ply/lex.py in token(self)\r\n    404             tok.lexer = self\r\n    405             self.lexpos = lexpos\r\n--> 406             newtok = self.lexeoff(tok)\r\n    407             return newtok\r\n    408 \r\n\r\n/usr/local/lib/python3.6/site-packages/hcl/lexer.py in t_heredoc_eof(self, t)\r\n    220     def t_heredoc_eof(self, t):\r\n    221         t.lexer.lineno += t.lexer.lexdata[t.lexer.here_start:t.lexer.lexpos].count('\\n')\r\n--> 222         _raise_error(t, 'EOF before closing heredoc')\r\n    223 \r\n    224     t_tabbedheredoc_ignoring = t_heredoc_ignoring\r\n\r\n/usr/local/lib/python3.6/site-packages/hcl/lexer.py in _raise_error(t, message)\r\n     15     if message is None:\r\n     16         message = \"Illegal character '%s'\" % lexdata[lexpos]\r\n---> 17     raise ValueError(\"Line %d, column %d, index %d: %s\" % (lineno, column, lexpos, message))\r\n     18 \r\n     19 def _find_column(input, token):\r\n\r\nValueError: Line 11, column 1, index 325: EOF before closing heredoc\r\n````\r\n\r\nAnd here is Terraform:\r\n\r\n````bash\r\n[...]$ terraform init\r\n[...]$ terraform graph\r\ndigraph {\r\n\tcompound = \"true\"\r\n\tnewrank = \"true\"\r\n\tsubgraph \"root\" {\r\n\t\t\"[root] meta.count-boundary (count boundary fixup)\" -> \"[root] var.cert_options\"\r\n\t}\r\n}\r\n````\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/35", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/35/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/35/events", "html_url": "https://github.com/virtuald/pyhcl/issues/35", "id": 294322337, "node_id": "MDU6SXNzdWUyOTQzMjIzMzc=", "number": 35, "title": "Have comments in the resulting json", "user": {"login": "jeromepin", "id": 2951535, "node_id": "MDQ6VXNlcjI5NTE1MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2951535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromepin", "html_url": "https://github.com/jeromepin", "followers_url": "https://api.github.com/users/jeromepin/followers", "following_url": "https://api.github.com/users/jeromepin/following{/other_user}", "gists_url": "https://api.github.com/users/jeromepin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromepin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromepin/subscriptions", "organizations_url": "https://api.github.com/users/jeromepin/orgs", "repos_url": "https://api.github.com/users/jeromepin/repos", "events_url": "https://api.github.com/users/jeromepin/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromepin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-05T09:21:43Z", "updated_at": "2018-02-05T15:47:39Z", "closed_at": "2018-02-05T15:47:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I didn't find a way to have comment in the object output-ed by pyhcl. It that possible ?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/33", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/33/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/33/events", "html_url": "https://github.com/virtuald/pyhcl/issues/33", "id": 261618612, "node_id": "MDU6SXNzdWUyNjE2MTg2MTI=", "number": 33, "title": "ply library is now at 3.10, 3.9 does not download from pypi any more", "user": {"login": "proffalken", "id": 262545, "node_id": "MDQ6VXNlcjI2MjU0NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/262545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/proffalken", "html_url": "https://github.com/proffalken", "followers_url": "https://api.github.com/users/proffalken/followers", "following_url": "https://api.github.com/users/proffalken/following{/other_user}", "gists_url": "https://api.github.com/users/proffalken/gists{/gist_id}", "starred_url": "https://api.github.com/users/proffalken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/proffalken/subscriptions", "organizations_url": "https://api.github.com/users/proffalken/orgs", "repos_url": "https://api.github.com/users/proffalken/repos", "events_url": "https://api.github.com/users/proffalken/events{/privacy}", "received_events_url": "https://api.github.com/users/proffalken/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-29T11:57:57Z", "updated_at": "2017-10-02T13:53:01Z", "closed_at": "2017-09-29T16:15:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please can we update the dependencies to reflect the new library?\r\n\r\nWhen I install the latest version of ply manually, I get the following output when try and install pyhcl:\r\n\r\n```\r\npip install --index-url=http://pypi.python.org/simple/ pyhcl\r\nDownloading/unpacking pyhcl\r\n  Downloading pyhcl-0.3.8.tar.gz\r\n  Running setup.py egg_info for package pyhcl\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 16, in <module>\r\n      File \"/workspace/my_terraform_job/.venv/build/pyhcl/setup.py\", line 96, in <module>\r\n        \"Topic :: Text Processing\"\r\n      File \"/usr/lib64/python2.7/distutils/core.py\", line 112, in setup\r\n        _setup_distribution = dist = klass(attrs)\r\n      File \"/workspace/my_terraform_job/.venv/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\r\n        self.fetch_build_eggs(attrs.pop('setup_requires'))\r\n      File \"/workspace/my_terraform_job/.venv/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\r\n        parse_requirements(requires), installer=self.fetch_build_egg\r\n      File \"/workspace/my_terraform_job/.venv/lib/python2.7/site-packages/pkg_resources.py\", line 630, in resolve\r\n        raise VersionConflict(dist,req) # XXX put more info here\r\n    pkg_resources.VersionConflict: (ply 3.10 (/workspace/my_terraform_job/.venv/lib/python2.7/site-packages), Requirement.parse('ply==3.9'))\r\n    Complete output from command python setup.py egg_info:\r\n    Traceback (most recent call last):\r\n\r\n  File \"<string>\", line 16, in <module>\r\n\r\n  File \"/workspace/my_terraform_job/.venv/build/pyhcl/setup.py\", line 96, in <module>\r\n\r\n    \"Topic :: Text Processing\"\r\n\r\n  File \"/usr/lib64/python2.7/distutils/core.py\", line 112, in setup\r\n\r\n    _setup_distribution = dist = klass(attrs)\r\n\r\n  File \"/workspace/my_terraform_job/.venv/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\r\n\r\n    self.fetch_build_eggs(attrs.pop('setup_requires'))\r\n\r\n  File \"/workspace/my_terraform_job/.venv/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\r\n\r\n    parse_requirements(requires), installer=self.fetch_build_egg\r\n\r\n  File \"/workspace/my_terraform_job/.venv/lib/python2.7/site-packages/pkg_resources.py\", line 630, in resolve\r\n\r\n    raise VersionConflict(dist,req) # XXX put more info here\r\n\r\npkg_resources.VersionConflict: (ply 3.10 (/workspace/my_terraform_job/.venv/lib/python2.7/site-packages), Requirement.parse('ply==3.9'))\r\n\r\n----------------------------------------\r\nCleaning up...\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/31", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/31/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/31/events", "html_url": "https://github.com/virtuald/pyhcl/issues/31", "id": 250798117, "node_id": "MDU6SXNzdWUyNTA3OTgxMTc=", "number": 31, "title": "Failure to parse tab-indented heredoc", "user": {"login": "agaffney", "id": 825875, "node_id": "MDQ6VXNlcjgyNTg3NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/825875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agaffney", "html_url": "https://github.com/agaffney", "followers_url": "https://api.github.com/users/agaffney/followers", "following_url": "https://api.github.com/users/agaffney/following{/other_user}", "gists_url": "https://api.github.com/users/agaffney/gists{/gist_id}", "starred_url": "https://api.github.com/users/agaffney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agaffney/subscriptions", "organizations_url": "https://api.github.com/users/agaffney/orgs", "repos_url": "https://api.github.com/users/agaffney/repos", "events_url": "https://api.github.com/users/agaffney/events{/privacy}", "received_events_url": "https://api.github.com/users/agaffney/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-17T00:32:03Z", "updated_at": "2017-08-17T11:46:42Z", "closed_at": "2017-08-17T02:00:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Parsing fails when a tab-indented heredoc is encountered.\r\n\r\nExample (the below should have tabs, but I cannot enter one directly and can't find a convenient place to copy/paste one from):\r\n\r\n```\r\n        someparam = <<-EOF\r\n        some content\r\n        some more content\r\n        EOF\r\n```\r\n\r\nThe error that I got:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"./generate_env_docs.py\", line 81, in <module>\r\n    main()\r\n  File \"./generate_env_docs.py\", line 77, in main\r\n    generate_env_doc(basedir, account, env)\r\n  File \"./generate_env_docs.py\", line 61, in generate_env_doc\r\n    terraform_config = load_terraform_config(os.path.join(basedir, account, env, 'main.tf'))\r\n  File \"./generate_env_docs.py\", line 48, in load_terraform_config\r\n    return hcl.load(f)\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/hcl/api.py\", line 51, in load\r\n    return loads(fp.read())\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/hcl/api.py\", line 62, in loads\r\n    return HclParser().parse(s)\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/hcl/parser.py\", line 307, in parse\r\n    return self.yacc.parse(s, lexer=Lexer())\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/ply/yacc.py\", line 331, in parse\r\n    return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/ply/yacc.py\", line 1061, in parseopt_notrack\r\n    lookahead = get_token()     # Get the next token\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/hcl/lexer.py\", line 230, in token\r\n    return self.lex.token()\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/ply/lex.py\", line 406, in token\r\n    newtok = self.lexeoff(tok)\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/hcl/lexer.py\", line 180, in t_heredoc_eof\r\n    _raise_error(t, 'EOF before closing heredoc')\r\n  File \"/home/agaffney/.local/lib/python2.7/site-packages/hcl/lexer.py\", line 17, in _raise_error\r\n    raise ValueError(\"Line %d, column %d, index %d: %s\" % (lineno, column, lexpos, message))\r\nValueError: Line 105, column 0, index 5102: EOF before closing heredoc\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/29", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/29/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/29/events", "html_url": "https://github.com/virtuald/pyhcl/issues/29", "id": 246294662, "node_id": "MDU6SXNzdWUyNDYyOTQ2NjI=", "number": 29, "title": "Unable to express list of maps as a literal in variables", "user": {"login": "w-miller", "id": 14925373, "node_id": "MDQ6VXNlcjE0OTI1Mzcz", "avatar_url": "https://avatars0.githubusercontent.com/u/14925373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/w-miller", "html_url": "https://github.com/w-miller", "followers_url": "https://api.github.com/users/w-miller/followers", "following_url": "https://api.github.com/users/w-miller/following{/other_user}", "gists_url": "https://api.github.com/users/w-miller/gists{/gist_id}", "starred_url": "https://api.github.com/users/w-miller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/w-miller/subscriptions", "organizations_url": "https://api.github.com/users/w-miller/orgs", "repos_url": "https://api.github.com/users/w-miller/repos", "events_url": "https://api.github.com/users/w-miller/events{/privacy}", "received_events_url": "https://api.github.com/users/w-miller/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-28T09:27:53Z", "updated_at": "2017-07-28T14:13:44Z", "closed_at": "2017-07-28T14:13:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A list of maps, such as the minimal test case below, should be parsed successfully, however an error occurs when attempting to parse such a structure with PyHCL.\r\n\r\nsampleinput.tf:\r\n```\r\nresource = [{\r\n    foo = [{\r\n        bar = {}\r\n    }]\r\n}]\r\n```\r\nOutput (PyHCL 0.3.6):\r\n`\r\nValueError: Line 1, column 12: unexpected LEFTBRACE\r\n`\r\n\r\nThis issue was [reported and fixed](https://github.com/hashicorp/terraform/issues/7142) for the golang parser last year. Test case [assign_deep.hcl](https://github.com/hashicorp/hcl/blob/master/test-fixtures/assign_deep.hcl) tests this structure, and for the golang parser this snippet is marked as [valid](https://github.com/hashicorp/hcl/blob/master/decoder_test.go#L230). The same test case exists for PyHCL, however the [same snippet](https://github.com/virtuald/pyhcl/blob/master/tests/lex-fixtures/assign_deep.hcl) is marked as [invalid](https://github.com/virtuald/pyhcl/blob/master/tests/test_parser.py#L49), meaning the test case appears to pass.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/25", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/25/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/25/events", "html_url": "https://github.com/virtuald/pyhcl/issues/25", "id": 228424239, "node_id": "MDU6SXNzdWUyMjg0MjQyMzk=", "number": 25, "title": "heredoc parsing fails if file has DOS/Windows line-endings (carriage returns)", "user": {"login": "bgehman", "id": 11742971, "node_id": "MDQ6VXNlcjExNzQyOTcx", "avatar_url": "https://avatars0.githubusercontent.com/u/11742971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgehman", "html_url": "https://github.com/bgehman", "followers_url": "https://api.github.com/users/bgehman/followers", "following_url": "https://api.github.com/users/bgehman/following{/other_user}", "gists_url": "https://api.github.com/users/bgehman/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgehman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgehman/subscriptions", "organizations_url": "https://api.github.com/users/bgehman/orgs", "repos_url": "https://api.github.com/users/bgehman/repos", "events_url": "https://api.github.com/users/bgehman/events{/privacy}", "received_events_url": "https://api.github.com/users/bgehman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-12T22:39:14Z", "updated_at": "2017-05-16T05:07:45Z", "closed_at": "2017-05-16T05:07:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "heredoc parsing fails if file has DOS/Windows line-endings (carriage returns)\r\n\r\nSample TF file, with heredoc notation (<<EOT):\r\n```\r\n$ cat test.tf \r\nresource \"vault_generic_secret\" \"example\" {\r\n  path = \"secret/foo\"\r\n\r\n  data_json = <<EOT\r\n{\r\n  \"foo\":   \"bar\",\r\n  \"pizza\": \"cheese\"\r\n}\r\nEOT\r\n}\r\n```\r\n\r\nUnix line-endings work:\r\n```\r\n$ dos2unix test.tf \r\ndos2unix: converting file test.tf to Unix format ...\r\n\r\n$ echo -e \"import hcl\\nwith open('test.tf','r') as fp: obj = hcl.load(fp)\" | python\r\n```\r\n\r\nDOS line-endings don't:\r\n```\r\n$ unix2dos test.tf\r\nunix2dos: converting file test.tf to DOS format ...\r\n\r\n$ echo -e \"import hcl\\nwith open('test.tf','r') as fp: obj = hcl.load(fp)\" | python\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\n  File \"/usr/lib/python2.7/site-packages/hcl/api.py\", line 51, in load\r\n    return loads(fp.read())\r\n  File \"/usr/lib/python2.7/site-packages/hcl/api.py\", line 62, in loads\r\n    return HclParser().parse(s)\r\n  File \"/usr/lib/python2.7/site-packages/hcl/parser.py\", line 295, in parse\r\n    return self.yacc.parse(s, lexer=Lexer())\r\n  File \"/usr/lib/python2.7/site-packages/ply/yacc.py\", line 331, in parse\r\n    return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\r\n  File \"/usr/lib/python2.7/site-packages/ply/yacc.py\", line 1061, in parseopt_notrack\r\n    lookahead = get_token()     # Get the next token\r\n  File \"/usr/lib/python2.7/site-packages/hcl/lexer.py\", line 225, in token\r\n    return self.lex.token()\r\n  File \"/usr/lib/python2.7/site-packages/ply/lex.py\", line 386, in token\r\n    newtok = self.lexerrorf(tok)\r\n  File \"/usr/lib/python2.7/site-packages/hcl/lexer.py\", line 211, in t_error\r\n    _raise_error(t, \"Heredoc must have a marker, e.g. '<<FOO'\")\r\n  File \"/usr/lib/python2.7/site-packages/hcl/lexer.py\", line 17, in _raise_error\r\n    raise ValueError(\"Line %d, column %d, index %d: %s\" % (lineno, column, lexpos, message))\r\nValueError: Line 4, column 14, index 84: Heredoc must have a marker, e.g. '<<FOO'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/23", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/23/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/23/events", "html_url": "https://github.com/virtuald/pyhcl/issues/23", "id": 216397736, "node_id": "MDU6SXNzdWUyMTYzOTc3MzY=", "number": 23, "title": "PyHCL does not accept lists whose last entry is followed by a comma", "user": {"login": "jammycakes", "id": 1100072, "node_id": "MDQ6VXNlcjExMDAwNzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1100072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jammycakes", "html_url": "https://github.com/jammycakes", "followers_url": "https://api.github.com/users/jammycakes/followers", "following_url": "https://api.github.com/users/jammycakes/following{/other_user}", "gists_url": "https://api.github.com/users/jammycakes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jammycakes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jammycakes/subscriptions", "organizations_url": "https://api.github.com/users/jammycakes/orgs", "repos_url": "https://api.github.com/users/jammycakes/repos", "events_url": "https://api.github.com/users/jammycakes/events{/privacy}", "received_events_url": "https://api.github.com/users/jammycakes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 128184417, "node_id": "MDU6TGFiZWwxMjgxODQ0MTc=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 128184420, "node_id": "MDU6TGFiZWwxMjgxODQ0MjA=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-03-23T11:32:05Z", "updated_at": "2017-07-17T15:03:37Z", "closed_at": "2017-03-30T13:12:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following is valid HCL and is in fact enforced both by Hashicorp's HCL formatter and many Terraform extensions for popular editors (e.g. VS Code, vim):\r\n\r\n```\r\nip_ranges = [\r\n  \"1.2.3.4/32\",\r\n  \"5.6.7.8/32\",\r\n]\r\n```\r\n\r\nHowever when parsed by PyHCL it gives an \"unexpected RIGHTBRACKET\" error. It appears that PyHCL has been confused by the comma after the second element `\"5.6.7.8/32\"` in the above example.\r\n\r\nThe HCL formatter enforces this last comma whenever the elements are placed on separate lines. As a workaround it is possible to put the elements on a single line; however, this is awkward for long lists or those where comments are required.\r\n\r\nFor compatibility, PyHCL should accept this trailing comma.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/19", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/19/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/19/events", "html_url": "https://github.com/virtuald/pyhcl/issues/19", "id": 201943467, "node_id": "MDU6SXNzdWUyMDE5NDM0Njc=", "number": 19, "title": "Multiple ply.lex warnings when you load HCL", "user": {"login": "elmundio87", "id": 642372, "node_id": "MDQ6VXNlcjY0MjM3Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/642372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elmundio87", "html_url": "https://github.com/elmundio87", "followers_url": "https://api.github.com/users/elmundio87/followers", "following_url": "https://api.github.com/users/elmundio87/following{/other_user}", "gists_url": "https://api.github.com/users/elmundio87/gists{/gist_id}", "starred_url": "https://api.github.com/users/elmundio87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elmundio87/subscriptions", "organizations_url": "https://api.github.com/users/elmundio87/orgs", "repos_url": "https://api.github.com/users/elmundio87/repos", "events_url": "https://api.github.com/users/elmundio87/events{/privacy}", "received_events_url": "https://api.github.com/users/elmundio87/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-01-19T18:48:20Z", "updated_at": "2017-01-22T01:24:21Z", "closed_at": "2017-01-22T01:24:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "This started in pyhcl 0.3.0 and is also present in pyhcl 0.3.1. I get a long list of warnings when I run `hcl.loads()`\r\n\r\nI believe it's related to the implementation of the parser using ply. The source code of ply.lex refers to the error at these points: https://github.com/dabeaz/ply/blob/master/ply/lex.py#L1010-L1012\r\n\r\n```\r\nWARNING: No error rule is defined for exclusive state 'stringdollar'\r\nWARNING: No ignore rule is defined for exclusive state 'stringdollar'\r\nWARNING: No error rule is defined for exclusive state 'heredoc'\r\nWARNING: No ignore rule is defined for exclusive state 'heredoc'\r\nWARNING: No error rule is defined for exclusive state 'string'\r\nWARNING: No ignore rule is defined for exclusive state 'string'\r\nWARNING: No error rule is defined for exclusive state 'stringdollar'\r\nWARNING: No ignore rule is defined for exclusive state 'stringdollar'\r\nWARNING: No error rule is defined for exclusive state 'heredoc'\r\nWARNING: No ignore rule is defined for exclusive state 'heredoc'\r\nWARNING: No error rule is defined for exclusive state 'string'\r\n```\r\n\r\nThis is the HCL that I'm loading\r\n\r\n```\r\nresource \"aws_db_instance\" \"foo\" {\r\n  storage_encrypted = \"True\"\r\n  tags {\r\n    Platform = \"${var.platform}\"\r\n    Name = \"foo\"\r\n    Owner = \"bar\"\r\n  }\r\n}\r\n\r\nresource \"aws_instance\" \"foo\" {\r\n  ebs_block_device {\r\n    encrypted = \"True\"\r\n  }\r\n\r\n  tags {\r\n    Platform = \"${var.platform}\"\r\n    Name = \"bar\"\r\n    Owner = \"bar\"\r\n  }\r\n\r\n}\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/12", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/12/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/12/events", "html_url": "https://github.com/virtuald/pyhcl/issues/12", "id": 170545295, "node_id": "MDU6SXNzdWUxNzA1NDUyOTU=", "number": 12, "title": "Fails to load multiple resources of the same time.", "user": {"login": "nelg", "id": 101949, "node_id": "MDQ6VXNlcjEwMTk0OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/101949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nelg", "html_url": "https://github.com/nelg", "followers_url": "https://api.github.com/users/nelg/followers", "following_url": "https://api.github.com/users/nelg/following{/other_user}", "gists_url": "https://api.github.com/users/nelg/gists{/gist_id}", "starred_url": "https://api.github.com/users/nelg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nelg/subscriptions", "organizations_url": "https://api.github.com/users/nelg/orgs", "repos_url": "https://api.github.com/users/nelg/repos", "events_url": "https://api.github.com/users/nelg/events{/privacy}", "received_events_url": "https://api.github.com/users/nelg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 128184417, "node_id": "MDU6TGFiZWwxMjgxODQ0MTc=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 128184420, "node_id": "MDU6TGFiZWwxMjgxODQ0MjA=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-08-10T23:55:04Z", "updated_at": "2020-04-14T17:36:57Z", "closed_at": "2020-04-14T17:36:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following TF is not loaded correctly.  It does not create the first resource in the output json.\n\nsampleinput.tf\n\n<pre>\nresource \"aws_db_instance\" \"mysqldb\" {\n    identifier = \"${var.environment}-mysqldb\"\n    allocated_storage = 100\n}\nresource \"aws_db_instance\" \"mysqldb-readonly\" {\n    identifier = \"${var.environment}-mysqldb-readonly\"\n    allocated_storage = 100\n}\n</pre>\n\n\nJSON Output is:\n\n<pre>\n{\n    \"resource\": {\n        \"aws_db_instance\": {\n            \"mysqldb-readonly\": {\n                \"allocated_storage\": 100,\n                \"identifier\": \"${var.environment}-mysqldb-readonly\"\n            }\n        }\n    }\n}\n</pre>\n\n\nExpected:\n\n<pre>\n{\n    \"resource\": {\n        \"aws_db_instance\": {\n           \"mysqldb\": {\n                \"allocated_storage\": 100,\n                \"identifier\": \"${var.environment}-mysqldb\"\n            },\n            \"mysqldb-readonly\": {\n                \"allocated_storage\": 100,\n                \"identifier\": \"${var.environment}-mysqldb-readonly\"\n            }\n        }\n    }\n}\n</pre>\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/7", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/7/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/7/events", "html_url": "https://github.com/virtuald/pyhcl/issues/7", "id": 139859991, "node_id": "MDU6SXNzdWUxMzk4NTk5OTE=", "number": 7, "title": "AttributeError: 'unicode' object has no attribute 'iteritems' in 0.2.0", "user": {"login": "kvz", "id": 26752, "node_id": "MDQ6VXNlcjI2NzUy", "avatar_url": "https://avatars2.githubusercontent.com/u/26752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kvz", "html_url": "https://github.com/kvz", "followers_url": "https://api.github.com/users/kvz/followers", "following_url": "https://api.github.com/users/kvz/following{/other_user}", "gists_url": "https://api.github.com/users/kvz/gists{/gist_id}", "starred_url": "https://api.github.com/users/kvz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kvz/subscriptions", "organizations_url": "https://api.github.com/users/kvz/orgs", "repos_url": "https://api.github.com/users/kvz/repos", "events_url": "https://api.github.com/users/kvz/events{/privacy}", "received_events_url": "https://api.github.com/users/kvz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 128184417, "node_id": "MDU6TGFiZWwxMjgxODQ0MTc=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-03-10T11:23:43Z", "updated_at": "2016-04-25T08:04:21Z", "closed_at": "2016-04-25T00:02:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, thanks for hcltool!\n\n0.2.0 solves a few issues for me, but also introduces a regression.\n\nWhen I try to convert the following HCL:\n\n``` hcl\nresource \"aws_security_group\" \"fw-infra-tusd-main\" {\n  name        = \"fw-infra-tusd-main\"\n  description = \"Infra tusd\"\n\n  # SSH\n  ingress {\n    from_port   = \"22\"\n    to_port     = \"22\"\n    protocol    = \"tcp\"\n    cidr_blocks = [\n      \"${var.ip_kevin}\",\n      \"${var.ip_marius}\",\n      \"${var.ip_tim}\"\n    ]\n  }\n\n  # Web\n  ingress {\n    from_port   = \"8080\"\n    to_port     = \"8080\"\n    protocol    = \"tcp\"\n    cidr_blocks = [\n      \"${var.ip_all}\"\n    ]\n  }\n}\n```\n\nvia \n\n``` bash\nhcltool infra.tf infra.json\n```\n\nI'm getting\n\n``` bash\nTraceback (most recent call last):\n  File \"/usr/local/bin/hcltool\", line 45, in <module>\n    main()\n  File \"/usr/local/bin/hcltool\", line 35, in main\n    obj = hcl.load(infile)\n  File \"/Library/Python/2.7/site-packages/hcl/api.py\", line 51, in load\n    return loads(fp.read())\n  File \"/Library/Python/2.7/site-packages/hcl/api.py\", line 62, in loads\n    return HclParser().parse(s)\n  File \"/Library/Python/2.7/site-packages/hcl/parser.py\", line 287, in parse\n    return self.yacc.parse(s, lexer=Lexer())\n  File \"/Library/Python/2.7/site-packages/ply/yacc.py\", line 265, in parse\n    return self.parseopt_notrack(input,lexer,debug,tracking,tokenfunc)\n  File \"/Library/Python/2.7/site-packages/ply/yacc.py\", line 971, in parseopt_notrack\n    p.callable(pslice)\n  File \"/Library/Python/2.7/site-packages/hcl/parser.py\", line 103, in p_object_0\n    p[0] = self.objectlist_flat(p[2])\n  File \"/Library/Python/2.7/site-packages/hcl/parser.py\", line 70, in objectlist_flat\n    for k2, v2 in iteritems(vv):\n  File \"/Library/Python/2.7/site-packages/hcl/parser.py\", line 27, in iteritems\n    return iter(d.iteritems())\nAttributeError: 'unicode' object has no attribute 'iteritems'\n```\n\nOn 0.1.15, this is correctly converted. Also, when I remove one ingress block, 0.2.0 also correctly converts it.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/3", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/3/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/3/events", "html_url": "https://github.com/virtuald/pyhcl/issues/3", "id": 109117978, "node_id": "MDU6SXNzdWUxMDkxMTc5Nzg=", "number": 3, "title": "Error when running pip install pyhcl", "user": {"login": "gposton", "id": 909581, "node_id": "MDQ6VXNlcjkwOTU4MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/909581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gposton", "html_url": "https://github.com/gposton", "followers_url": "https://api.github.com/users/gposton/followers", "following_url": "https://api.github.com/users/gposton/following{/other_user}", "gists_url": "https://api.github.com/users/gposton/gists{/gist_id}", "starred_url": "https://api.github.com/users/gposton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gposton/subscriptions", "organizations_url": "https://api.github.com/users/gposton/orgs", "repos_url": "https://api.github.com/users/gposton/repos", "events_url": "https://api.github.com/users/gposton/events{/privacy}", "received_events_url": "https://api.github.com/users/gposton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 128184417, "node_id": "MDU6TGFiZWwxMjgxODQ0MTc=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-09-30T15:34:52Z", "updated_at": "2015-10-05T20:20:16Z", "closed_at": "2015-10-04T22:57:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "This seems innate as I'm able to use the package despite the install failure, but I do get this error:\n\n```\n$ pip install pyhcl\nCollecting pyhcl\n  Using cached pyhcl-0.1.11.tar.gz\nRequirement already satisfied (use --upgrade to upgrade): ply==3.4 in /Users/glennposton/.virtualenvs/skippy/lib/python3.4/site-packages (from pyhcl)\nBuilding wheels for collected packages: pyhcl\n  Running setup.py bdist_wheel for pyhcl\n  Complete output from command /Users/glennposton/.virtualenvs/skippy/bin/python3.4 -c \"import setuptools;__file__='/private/var/folders/zr/mq8gh7k912324dntrd_sr_0m0000gn/T/pip-build-u4jkjf67/pyhcl/setup.py';exec(compile(open(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" bdist_wheel -d /var/folders/zr/mq8gh7k912324dntrd_sr_0m0000gn/T/tmp3z0z3qbtpip-wheel-:\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build/lib\n  creating build/lib/hcl\n  copying src/hcl/__init__.py -> build/lib/hcl\n  copying src/hcl/api.py -> build/lib/hcl\n  copying src/hcl/lexer.py -> build/lib/hcl\n  copying src/hcl/parser.py -> build/lib/hcl\n  copying src/hcl/version.py -> build/lib/hcl\n  running build_scripts\n  creating build/scripts-3.4\n  copying and adjusting scripts/hcltool -> build/scripts-3.4\n  changing mode of build/scripts-3.4/hcltool from 644 to 755\n  installing to build/bdist.macosx-10.6-intel/wheel\n  running install\n  running install_lib\n  creating build/bdist.macosx-10.6-intel\n  creating build/bdist.macosx-10.6-intel/wheel\n  creating build/bdist.macosx-10.6-intel/wheel/hcl\n  copying build/lib/hcl/__init__.py -> build/bdist.macosx-10.6-intel/wheel/hcl\n  copying build/lib/hcl/api.py -> build/bdist.macosx-10.6-intel/wheel/hcl\n  copying build/lib/hcl/lexer.py -> build/bdist.macosx-10.6-intel/wheel/hcl\n  copying build/lib/hcl/parser.py -> build/bdist.macosx-10.6-intel/wheel/hcl\n  copying build/lib/hcl/version.py -> build/bdist.macosx-10.6-intel/wheel/hcl\n  running install_egg_info\n  running egg_info\n  writing requirements to src/pyhcl.egg-info/requires.txt\n  writing top-level names to src/pyhcl.egg-info/top_level.txt\n  writing dependency_links to src/pyhcl.egg-info/dependency_links.txt\n  writing src/pyhcl.egg-info/PKG-INFO\n  warning: manifest_maker: standard file '-c' not found\n\n  reading manifest file 'src/pyhcl.egg-info/SOURCES.txt'\n  reading manifest template 'MANIFEST.in'\n  writing manifest file 'src/pyhcl.egg-info/SOURCES.txt'\n  Copying src/pyhcl.egg-info to build/bdist.macosx-10.6-intel/wheel/pyhcl-0.1.11-py3.4.egg-info\n  running install_scripts\n  creating build/bdist.macosx-10.6-intel/wheel/pyhcl-0.1.11.data\n  creating build/bdist.macosx-10.6-intel/wheel/pyhcl-0.1.11.data/scripts\n  copying build/scripts-3.4/hcltool -> build/bdist.macosx-10.6-intel/wheel/pyhcl-0.1.11.data/scripts\n  changing mode of build/bdist.macosx-10.6-intel/wheel/pyhcl-0.1.11.data/scripts/hcltool to 755\n  Generating parse table...\n  Traceback (most recent call last):\n    File \"<string>\", line 1, in <module>\n    File \"/private/var/folders/zr/mq8gh7k912324dntrd_sr_0m0000gn/T/pip-build-u4jkjf67/pyhcl/setup.py\", line 79, in <module>\n      \"Topic :: Text Processing\"\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/core.py\", line 148, in setup\n      dist.run_commands()\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/dist.py\", line 955, in run_commands\n      self.run_command(cmd)\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/dist.py\", line 974, in run_command\n      cmd_obj.run()\n    File \"/Users/glennposton/.virtualenvs/skippy/lib/python3.4/site-packages/wheel/bdist_wheel.py\", line 211, in run\n      self.run_command('install')\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/cmd.py\", line 313, in run_command\n      self.distribution.run_command(command)\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/dist.py\", line 974, in run_command\n      cmd_obj.run()\n    File \"/private/var/folders/zr/mq8gh7k912324dntrd_sr_0m0000gn/T/pip-build-u4jkjf67/pyhcl/setup.py\", line 29, in run\n      self.execute(_post_install, (), msg=\"Generating parse table...\")\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/cmd.py\", line 336, in execute\n      util.execute(func, args, msg, dry_run=self.dry_run)\n    File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/distutils/util.py\", line 301, in execute\n      func(*args)\n    File \"/private/var/folders/zr/mq8gh7k912324dntrd_sr_0m0000gn/T/pip-build-u4jkjf67/pyhcl/setup.py\", line 21, in _post_install\n      import hcl\n  ImportError: No module named 'hcl'\n\n  ----------------------------------------\n  Failed building wheel for pyhcl\nFailed to build pyhcl\nInstalling collected packages: pyhcl\n  Running setup.py install for pyhcl\nSuccessfully installed pyhcl-0.1.11\n```\n\nRunning on OSX 10.10.5 with the following python versions:\n\n```\n$ python --version\nPython 3.4.3\n$ virtualenv --version\n13.1.2\n$ pip --version\npip 7.1.2 from /Users/glennposton/.virtualenvs/skippy/lib/python3.4/site-packages (python 3.4)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/virtuald/pyhcl/issues/1", "repository_url": "https://api.github.com/repos/virtuald/pyhcl", "labels_url": "https://api.github.com/repos/virtuald/pyhcl/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/virtuald/pyhcl/issues/1/comments", "events_url": "https://api.github.com/repos/virtuald/pyhcl/issues/1/events", "html_url": "https://github.com/virtuald/pyhcl/issues/1", "id": 53997246, "node_id": "MDU6SXNzdWU1Mzk5NzI0Ng==", "number": 1, "title": "Multiple keys with the same name", "user": {"login": "maljac", "id": 10473754, "node_id": "MDQ6VXNlcjEwNDczNzU0", "avatar_url": "https://avatars2.githubusercontent.com/u/10473754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maljac", "html_url": "https://github.com/maljac", "followers_url": "https://api.github.com/users/maljac/followers", "following_url": "https://api.github.com/users/maljac/following{/other_user}", "gists_url": "https://api.github.com/users/maljac/gists{/gist_id}", "starred_url": "https://api.github.com/users/maljac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maljac/subscriptions", "organizations_url": "https://api.github.com/users/maljac/orgs", "repos_url": "https://api.github.com/users/maljac/repos", "events_url": "https://api.github.com/users/maljac/events{/privacy}", "received_events_url": "https://api.github.com/users/maljac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 128184417, "node_id": "MDU6TGFiZWwxMjgxODQ0MTc=", "url": "https://api.github.com/repos/virtuald/pyhcl/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-01-11T17:02:08Z", "updated_at": "2016-03-03T18:00:18Z", "closed_at": "2016-03-03T18:00:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to: https://github.com/hashicorp/consul-template, HCL supports constructs like the following:\n\n```\ntemplate {\n  source = \"/path/on/disk/to/template\"\n  destination = \"/path/on/disk/where/template/will/render\"\n  command = \"optional command to run when the template is updated\"\n}\n\ntemplate {\n  // Multiple definitions are supported\n}\n```\n\nWhen I parse such a config file using pyhcl (0.18), only the first `template` key is available:\n\n```\n{u'consul': u'someurl:8500', u'template': {u'source': u'/tmp/first.conf', u'destination': u'/tmp/config/first.conf', u'command': u'curl localhost || true'}}\n```\n\nThe right way would probably to make the key `template` a list within the python dict:\n\n```\n{ ..., 'template': [{ _my_first_template_}, {_my_second_template_}], .... }\n```\n", "performed_via_github_app": null, "score": 1.0}]}