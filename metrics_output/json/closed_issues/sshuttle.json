{"total_count": 228, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/508", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/508/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/508/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/508/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/508", "id": 679956093, "node_id": "MDU6SXNzdWU2Nzk5NTYwOTM=", "number": 508, "title": "sshuttle syntax error in kali linux 2020.2", "user": {"login": "redhoodie09", "id": 53815409, "node_id": "MDQ6VXNlcjUzODE1NDA5", "avatar_url": "https://avatars0.githubusercontent.com/u/53815409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redhoodie09", "html_url": "https://github.com/redhoodie09", "followers_url": "https://api.github.com/users/redhoodie09/followers", "following_url": "https://api.github.com/users/redhoodie09/following{/other_user}", "gists_url": "https://api.github.com/users/redhoodie09/gists{/gist_id}", "starred_url": "https://api.github.com/users/redhoodie09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redhoodie09/subscriptions", "organizations_url": "https://api.github.com/users/redhoodie09/orgs", "repos_url": "https://api.github.com/users/redhoodie09/repos", "events_url": "https://api.github.com/users/redhoodie09/events{/privacy}", "received_events_url": "https://api.github.com/users/redhoodie09/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-17T05:53:17Z", "updated_at": "2020-08-18T22:25:46Z", "closed_at": "2020-08-18T22:25:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Traceback (most recent call last):\r\n  File \"/usr/local/bin/sshuttle\", line 11, in <module>\r\n    load_entry_point('sshuttle==1.0.4.dev19+gbe4b081', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 489, in load_entry_point\r\n    return get_distribution(dist).load_entry_point(group, name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 2852, in load_entry_point\r\n    return ep.load()\r\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 2443, in load\r\n    return self.resolve()\r\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 2449, in resolve\r\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-1.0.4.dev19+gbe4b081-py2.7.egg/sshuttle/cmdline.py\", line 5, in <module>\r\n    import sshuttle.client as client\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-1.0.4.dev19+gbe4b081-py2.7.egg/sshuttle/client.py\", line 302\r\n    assert(not re.search(rb'[^-\\w\\.]', hostname))\r\n                                    ^\r\nSyntaxError: invalid syntax\r\n\r\n\r\nTried clean installing it couple of time from github & apt. Getting the same error. Any idea how to fix it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/505", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/505/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/505/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/505/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/505", "id": 677479038, "node_id": "MDU6SXNzdWU2Nzc0NzkwMzg=", "number": 505, "title": "Ssh Key-Based Authentication keys with alias", "user": {"login": "evadogstar", "id": 20259395, "node_id": "MDQ6VXNlcjIwMjU5Mzk1", "avatar_url": "https://avatars3.githubusercontent.com/u/20259395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evadogstar", "html_url": "https://github.com/evadogstar", "followers_url": "https://api.github.com/users/evadogstar/followers", "following_url": "https://api.github.com/users/evadogstar/following{/other_user}", "gists_url": "https://api.github.com/users/evadogstar/gists{/gist_id}", "starred_url": "https://api.github.com/users/evadogstar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evadogstar/subscriptions", "organizations_url": "https://api.github.com/users/evadogstar/orgs", "repos_url": "https://api.github.com/users/evadogstar/repos", "events_url": "https://api.github.com/users/evadogstar/events{/privacy}", "received_events_url": "https://api.github.com/users/evadogstar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-12T07:53:37Z", "updated_at": "2020-08-12T18:58:28Z", "closed_at": "2020-08-12T18:58:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\nHow to exactly use key based authentication if in the same enveroment I successly connect to the server with `ssh someSshAlias` ? \r\n> sshuttle -e \"ssh someSshAlias\" 0.0.0.0/0\r\n\r\ndon't work...\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/503", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/503/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/503/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/503", "id": 677158534, "node_id": "MDU6SXNzdWU2NzcxNTg1MzQ=", "number": 503, "title": "PR#431 breaks connecting to Python <=3.5 hosts.", "user": {"login": "slashdd", "id": 20820594, "node_id": "MDQ6VXNlcjIwODIwNTk0", "avatar_url": "https://avatars2.githubusercontent.com/u/20820594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slashdd", "html_url": "https://github.com/slashdd", "followers_url": "https://api.github.com/users/slashdd/followers", "following_url": "https://api.github.com/users/slashdd/following{/other_user}", "gists_url": "https://api.github.com/users/slashdd/gists{/gist_id}", "starred_url": "https://api.github.com/users/slashdd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slashdd/subscriptions", "organizations_url": "https://api.github.com/users/slashdd/orgs", "repos_url": "https://api.github.com/users/slashdd/repos", "events_url": "https://api.github.com/users/slashdd/events{/privacy}", "received_events_url": "https://api.github.com/users/slashdd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-11T20:00:13Z", "updated_at": "2020-08-17T21:47:00Z", "closed_at": "2020-08-17T21:47:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "#431 breaks connecting to Python <=3.5 hosts.\r\n\r\nEven if those python versions are (or near to) EOL, I think it is reasonable to say that one could use shuttle to log on a remote host that has a no longer supported python 3 versions. \r\n\r\nWould upstream consider adding a backward compatible patch for this use case ?\r\n\r\nUbuntu discussion bug:\r\nhttps://launchpad.net/bugs/1873368\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/499", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/499/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/499/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/499/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/499", "id": 671707833, "node_id": "MDU6SXNzdWU2NzE3MDc4MzM=", "number": 499, "title": "SSHUTTLE no longer working after upgrade", "user": {"login": "RmsMit", "id": 1471738, "node_id": "MDQ6VXNlcjE0NzE3Mzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1471738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RmsMit", "html_url": "https://github.com/RmsMit", "followers_url": "https://api.github.com/users/RmsMit/followers", "following_url": "https://api.github.com/users/RmsMit/following{/other_user}", "gists_url": "https://api.github.com/users/RmsMit/gists{/gist_id}", "starred_url": "https://api.github.com/users/RmsMit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RmsMit/subscriptions", "organizations_url": "https://api.github.com/users/RmsMit/orgs", "repos_url": "https://api.github.com/users/RmsMit/repos", "events_url": "https://api.github.com/users/RmsMit/events{/privacy}", "received_events_url": "https://api.github.com/users/RmsMit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-02T23:08:01Z", "updated_at": "2020-08-02T23:38:24Z", "closed_at": "2020-08-02T23:38:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have used sshuttle for a long time (very grateful for this very useful tool) to connect from my Fedora Machines to CentOS services on customers sites in order to access other adjacent customer HW. As of the upgrade to Fedora 32 this no longer works. The Fedora side works fine but the remote CentOS side seems to have issue with assembler.py\r\n\r\n`sshuttle -r alexys@wa-myvista-mirrabooka.int.alexys.io 10.212.11.1/16\r\n[local sudo] Password: \r\nalexys@wa-myvista-mirrabooka.int.alexys.io's password: \r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 25, in <module>\r\n  File \"sshuttle.server\", line 9, in <module>\r\nImportError: cannot import name which\r\nclient: fatal: server died with error code 1\r\n`\r\nI have included a more complete trace with more verbose outputs bellow. Nothing else has changed. I suspect that python 3 is now the default on Fedroa side and CentOS is still using Python2.\r\n\r\nAny help or pointers you can give me would be much appreciated.\r\n\r\n`sshuttle -r alexys@wa-myvista-mirrabooka.int.alexys.io 10.212.11.1/16 -vvv -e \"ssh -v\"\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.3\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: None\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=5, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.8.3\r\nc : connecting to server...\r\nc : executing: ['ssh', '-v', '-p', '22', 'alexys@wa-myvista-mirrabooka.int.alexys.io', '--', '/bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=3; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1275), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\nc :  > channel=0 cmd=PING len=7 (fullness=0)\r\nOpenSSH_8.3p1, OpenSSL 1.1.1g FIPS  21 Apr 2020\r\ndebug1: Reading configuration data /home/rms-mit/.ssh/config\r\ndebug1: /home/rms-mit/.ssh/config line 1: Applying options for *.int.alexys.io\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/50-redhat.conf\r\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\r\ndebug1: configuration requests final Match pass\r\ndebug1: re-parsing configuration\r\ndebug1: Reading configuration data /home/rms-mit/.ssh/config\r\ndebug1: /home/rms-mit/.ssh/config line 1: Applying options for *.int.alexys.io\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/50-redhat.conf\r\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\r\ndebug1: Connecting to wa-myvista-mirrabooka.int.alexys.io [10.9.3.142] port 22.\r\ndebug1: Connection established.\r\ndebug1: identity file /home/rms-mit/.ssh/id_rsa type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_rsa-cert type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_dsa type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_dsa-cert type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ecdsa type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ecdsa-cert type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ecdsa_sk type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ecdsa_sk-cert type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ed25519 type 3\r\ndebug1: identity file /home/rms-mit/.ssh/id_ed25519-cert type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ed25519_sk type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_ed25519_sk-cert type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_xmss type -1\r\ndebug1: identity file /home/rms-mit/.ssh/id_xmss-cert type -1\r\ndebug1: Local version string SSH-2.0-OpenSSH_8.3\r\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.4\r\ndebug1: match: OpenSSH_7.4 pat OpenSSH_7.0*,OpenSSH_7.1*,OpenSSH_7.2*,OpenSSH_7.3*,OpenSSH_7.4*,OpenSSH_7.5*,OpenSSH_7.6*,OpenSSH_7.7* compat 0x04000002\r\ndebug1: Authenticating to wa-myvista-mirrabooka.int.alexys.io:22 as 'alexys'\r\ndebug1: SSH2_MSG_KEXINIT sent\r\ndebug1: SSH2_MSG_KEXINIT received\r\ndebug1: kex: algorithm: curve25519-sha256\r\ndebug1: kex: host key algorithm: ecdsa-sha2-nistp256\r\ndebug1: kex: server->client cipher: aes256-gcm@openssh.com MAC: <implicit> compression: none\r\ndebug1: kex: client->server cipher: aes256-gcm@openssh.com MAC: <implicit> compression: none\r\ndebug1: kex: curve25519-sha256 need=32 dh_need=32\r\ndebug1: kex: curve25519-sha256 need=32 dh_need=32\r\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\r\ndebug1: Server host key: ecdsa-sha2-nistp256 SHA256:aQjGXn1wydXObwqJhv8uHRHJ69yXnrAI0wa5mO59XkU\r\ndebug1: Host 'wa-myvista-mirrabooka.int.alexys.io' is known and matches the ECDSA host key.\r\ndebug1: Found key in /home/rms-mit/.ssh/known_hosts:383\r\ndebug1: rekey out after 4294967296 blocks\r\ndebug1: SSH2_MSG_NEWKEYS sent\r\ndebug1: expecting SSH2_MSG_NEWKEYS\r\ndebug1: SSH2_MSG_NEWKEYS received\r\ndebug1: rekey in after 4294967296 blocks\r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_rsa \r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_dsa \r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_ecdsa \r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_ecdsa_sk \r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_ed25519 ED25519 SHA256:dgjdZE/SiRSmzHufbSbxq8KNvIM8IPg1dZctbgno+jM\r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_ed25519_sk \r\ndebug1: Will attempt key: /home/rms-mit/.ssh/id_xmss \r\ndebug1: SSH2_MSG_EXT_INFO received\r\ndebug1: kex_input_ext_info: server-sig-algs=<rsa-sha2-256,rsa-sha2-512>\r\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\r\ndebug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password\r\ndebug1: Next authentication method: gssapi-with-mic\r\ndebug1: Unspecified GSS failure.  Minor code may provide more information\r\nNo Kerberos credentials available (default cache: KCM:)\r\n\r\n\r\ndebug1: Unspecified GSS failure.  Minor code may provide more information\r\nNo Kerberos credentials available (default cache: KCM:)\r\n\r\n\r\ndebug1: Next authentication method: publickey\r\ndebug1: Trying private key: /home/rms-mit/.ssh/id_rsa\r\ndebug1: Trying private key: /home/rms-mit/.ssh/id_dsa\r\ndebug1: Trying private key: /home/rms-mit/.ssh/id_ecdsa\r\ndebug1: Trying private key: /home/rms-mit/.ssh/id_ecdsa_sk\r\ndebug1: Offering public key: /home/rms-mit/.ssh/id_ed25519 ED25519 SHA256:dgjdZE/SiRSmzHufbSbxq8KNvIM8IPg1dZctbgno+jM\r\ndebug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password\r\ndebug1: Trying private key: /home/rms-mit/.ssh/id_ed25519_sk\r\ndebug1: Trying private key: /home/rms-mit/.ssh/id_xmss\r\ndebug1: Next authentication method: password\r\nalexys@wa-myvista-mirrabooka.int.alexys.io's password: \r\ndebug1: Authentication succeeded (password).\r\nAuthenticated to wa-myvista-mirrabooka.int.alexys.io ([10.9.3.142]:22).\r\ndebug1: channel 0: new [client-session]\r\ndebug1: Requesting no-more-sessions@openssh.com\r\ndebug1: Entering interactive session.\r\ndebug1: pledge: network\r\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\r\ndebug1: Sending environment.\r\ndebug1: Sending env LANGUAGE = en_GB\r\ndebug1: Sending env LANG = en_AU.UTF-8\r\ndebug1: Sending command: /bin/sh -c 'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c '\"'\"'import sys, os; verbosity=3; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1275), \"assembler.py\", \"exec\"))'\"'\"''\r\nserver: assembling u'sshuttle' (7 bytes)\r\nserver: assembling u'sshuttle.cmdline_options' (66 bytes)\r\nserver: assembling u'sshuttle.helpers' (902 bytes)\r\nserver: assembling u'sshuttle.ssnet' (5734 bytes)\r\nserver: assembling u'sshuttle.hostwatch' (2463 bytes)\r\nserver: assembling u'sshuttle.server' (3673 bytes)\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 25, in <module>\r\n  File \"sshuttle.server\", line 9, in <module>\r\nImportError: cannot import name which\r\ndebug1: client_input_channel_req: channel 0 rtype exit-status reply 0\r\ndebug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0\r\ndebug1: channel 0: free: client-session, nchannels 1\r\ndebug1: fd 0 clearing O_NONBLOCK\r\nTransferred: sent 16720, received 3284 bytes, in 0.5 seconds\r\nBytes per second: sent 30729.1, received 6035.6\r\ndebug1: Exit status 1\r\nc : fatal: server died with error code 1\r\n[rms-mit@rmsmit-work ~]$ cat /etc/os-release \r\nNAME=Fedora\r\nVERSION=\"32 (Thirty Two)\"\r\nID=fedora\r\nVERSION_ID=32\r\nVERSION_CODENAME=\"\"\r\nPLATFORM_ID=\"platform:f32\"\r\nPRETTY_NAME=\"Fedora 32 (Thirty Two)\"\r\nANSI_COLOR=\"0;34\"\r\nLOGO=fedora-logo-icon\r\nCPE_NAME=\"cpe:/o:fedoraproject:fedora:32\"\r\nHOME_URL=\"https://fedoraproject.org/\"\r\nDOCUMENTATION_URL=\"https://docs.fedoraproject.org/en-US/fedora/f32/system-administrators-guide/\"\r\nSUPPORT_URL=\"https://fedoraproject.org/wiki/Communicating_and_getting_help\"\r\nBUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\r\nREDHAT_BUGZILLA_PRODUCT=\"Fedora\"\r\nREDHAT_BUGZILLA_PRODUCT_VERSION=32\r\nREDHAT_SUPPORT_PRODUCT=\"Fedora\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=32\r\nPRIVACY_POLICY_URL=\"https://fedoraproject.org/wiki/Legal:PrivacyPolicy\"\r\n`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/488", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/488/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/488/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/488/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/488", "id": 657212391, "node_id": "MDU6SXNzdWU2NTcyMTIzOTE=", "number": 488, "title": "Fails to connect with missing user", "user": {"login": "ilons", "id": 6905634, "node_id": "MDQ6VXNlcjY5MDU2MzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/6905634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilons", "html_url": "https://github.com/ilons", "followers_url": "https://api.github.com/users/ilons/followers", "following_url": "https://api.github.com/users/ilons/following{/other_user}", "gists_url": "https://api.github.com/users/ilons/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilons/subscriptions", "organizations_url": "https://api.github.com/users/ilons/orgs", "repos_url": "https://api.github.com/users/ilons/repos", "events_url": "https://api.github.com/users/ilons/events{/privacy}", "received_events_url": "https://api.github.com/users/ilons/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-15T09:40:32Z", "updated_at": "2020-08-12T21:59:13Z", "closed_at": "2020-08-12T21:59:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Connecting to a remove host without specifying a username fails under some circumstances.\r\n\r\nI'm not sure WHEN this changed (recently did system upgrade and got new python version), I'm however able to reproduce this on both Python 3.7.8 and 3.8.3.\r\n\r\nSteps to reproduce:\r\n`sshuttle --remote 127.0.0.1:22 0.0.0.0`\r\n\r\nExpected behavior:\r\nA connection to localhost is established\r\n\r\nActual behavior:\r\nA traceback is shown\r\n\r\nDebug output:\r\n```\r\nTraceback (most recent call last):\r\n  File \"... .venv/bin/sshuttle\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"... .venv/lib64/python3.7/site-packages/sshuttle/cmdline.py\", line 102, in main\r\n    opt.sudo_pythonpath)\r\n  File \"... .venv/lib64/python3.7/site-packages/sshuttle/client.py\", line 795, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"... .venv/lib64/python3.7/site-packages/sshuttle/client.py\", line 453, in _main\r\n    auto_nets=auto_nets))\r\n  File \"... .venv/lib64/python3.7/site-packages/sshuttle/ssh.py\", line 152, in connect\r\n    close_fds=True, stderr=stderr)\r\n  File \"/usr/lib64/python3.7/subprocess.py\", line 800, in __init__\r\n    restore_signals, start_new_session)\r\n  File \"/usr/lib64/python3.7/subprocess.py\", line 1482, in _execute_child\r\n    restore_signals, start_new_session, preexec_fn)\r\nTypeError: expected str, bytes or os.PathLike object, not IPv4Address\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/486", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/486/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/486/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/486/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/486", "id": 656510591, "node_id": "MDU6SXNzdWU2NTY1MTA1OTE=", "number": 486, "title": "AttributeError: 'module' object has no attribute 'set_blocking'", "user": {"login": "Schalli1987", "id": 11866488, "node_id": "MDQ6VXNlcjExODY2NDg4", "avatar_url": "https://avatars1.githubusercontent.com/u/11866488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Schalli1987", "html_url": "https://github.com/Schalli1987", "followers_url": "https://api.github.com/users/Schalli1987/followers", "following_url": "https://api.github.com/users/Schalli1987/following{/other_user}", "gists_url": "https://api.github.com/users/Schalli1987/gists{/gist_id}", "starred_url": "https://api.github.com/users/Schalli1987/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Schalli1987/subscriptions", "organizations_url": "https://api.github.com/users/Schalli1987/orgs", "repos_url": "https://api.github.com/users/Schalli1987/repos", "events_url": "https://api.github.com/users/Schalli1987/events{/privacy}", "received_events_url": "https://api.github.com/users/Schalli1987/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-14T10:35:12Z", "updated_at": "2020-07-15T10:39:04Z", "closed_at": "2020-07-14T20:52:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nI was using sshuttle 0.78.5 without any issues, when upgrading to 1.0.[0-3] I keep getting the following error:\r\n\r\n> /run -r remoteHost --dns 10.12.0.0/16 10.10.4.0/24\r\n> [local sudo] Password: \r\n> client: Connected.\r\n> Traceback (most recent call last):\r\n>   File \"<string>\", line 1, in <module>\r\n>   File \"assembler.py\", line 41, in <module>\r\n>   File \"sshuttle.server\", line 395, in main\r\n>   File \"sshuttle.ssnet\", line 600, in runonce\r\n>   File \"sshuttle.ssnet\", line 490, in callback\r\n>   File \"sshuttle.ssnet\", line 439, in flush\r\n> AttributeError: 'module' object has no attribute 'set_blocking'\r\n> client: fatal: server died with error code 1\r\n\r\nI'm running on arch linux (5.7.8-arch1-1 #1 SMP PREEMPT Thu, 09 Jul 2020 16:34:01 +0000 x86_64 GNU/Linux) using Python 3.8.3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/485", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/485/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/485/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/485/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/485", "id": 654841438, "node_id": "MDU6SXNzdWU2NTQ4NDE0Mzg=", "number": 485, "title": "SSHUTTLE not working", "user": {"login": "cauasiqueira", "id": 757657, "node_id": "MDQ6VXNlcjc1NzY1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/757657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cauasiqueira", "html_url": "https://github.com/cauasiqueira", "followers_url": "https://api.github.com/users/cauasiqueira/followers", "following_url": "https://api.github.com/users/cauasiqueira/following{/other_user}", "gists_url": "https://api.github.com/users/cauasiqueira/gists{/gist_id}", "starred_url": "https://api.github.com/users/cauasiqueira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cauasiqueira/subscriptions", "organizations_url": "https://api.github.com/users/cauasiqueira/orgs", "repos_url": "https://api.github.com/users/cauasiqueira/repos", "events_url": "https://api.github.com/users/cauasiqueira/events{/privacy}", "received_events_url": "https://api.github.com/users/cauasiqueira/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-10T14:58:44Z", "updated_at": "2020-07-12T09:17:02Z", "closed_at": "2020-07-12T09:17:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u279c  ~ sshuttle -V\r\n1.0.2\r\n\r\nMacOS Catalina\r\n10.15.3\r\n\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.3\r\nfirewall manager: ready method name pf.\r\nIPv6 enabled: True\r\nUDP enabled: False\r\nDNS enabled: True\r\nUser enabled: False\r\nTCP redirector listening on ('::1', 12300, 0, 0).\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nDNS listening on ('::1', 12299, 0, 0).\r\nDNS listening on ('127.0.0.1', 12299).\r\nStarting client with Python version 3.8.3 ===> Python 3.8 version\r\nc : connecting to server...\r\n\r\n\r\n        !!! Este servidor deve ser acessado somente por pessoas autorizadas !!!\r\n\r\n\r\nVerification code:\r\nPassword:\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 18, in <module>\r\nTypeError: module.__init__() argument 1 must be string, not unicode\r\nc : fatal: expected server init string b'SSHUTTLE0001'; got b''", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/484", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/484/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/484/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/484/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/484", "id": 651853827, "node_id": "MDU6SXNzdWU2NTE4NTM4Mjc=", "number": 484, "title": "`TypeError: module.__init__() argument 1 must be string, not unicode` in assembler.py", "user": {"login": "LeifW", "id": 28711, "node_id": "MDQ6VXNlcjI4NzEx", "avatar_url": "https://avatars2.githubusercontent.com/u/28711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeifW", "html_url": "https://github.com/LeifW", "followers_url": "https://api.github.com/users/LeifW/followers", "following_url": "https://api.github.com/users/LeifW/following{/other_user}", "gists_url": "https://api.github.com/users/LeifW/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeifW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeifW/subscriptions", "organizations_url": "https://api.github.com/users/LeifW/orgs", "repos_url": "https://api.github.com/users/LeifW/repos", "events_url": "https://api.github.com/users/LeifW/events{/privacy}", "received_events_url": "https://api.github.com/users/LeifW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-06T22:21:14Z", "updated_at": "2020-07-07T21:03:58Z", "closed_at": "2020-07-07T21:03:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "In version 1.0.2,\r\ninvoking:\r\n```\r\nsshuttle -vv --ssh-cmd \"$SSH_CMD\" --dns -r myuser@myhostname.com:2222 172.42.0.0.0/16\r\n```\r\ngives:\r\n```\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.3\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: None\r\nUDP enabled: False\r\nDNS enabled: True\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=5, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nBinding DNS: 12300 12299\r\nDNS listening on ('127.0.0.1', 12299).\r\nDNS listening with <socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_DGRAM, proto=0, laddr=('127.0.0.1', 12299)>.\r\nStarting client with Python version 3.8.3\r\nc : connecting to server...\r\nc : executing: ['ssh', '-o', 'IdentitiesOnly=yes', '-i', './foo.pem', '-p', '2222', 'myuser@myhostname.com', '--', '/bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=2; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1279), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\nc : > channel=0 cmd=PING len=7 (fullness=0)\r\nload pubkey \"./foo.pem\": invalid format\r\nserver: assembling u'sshuttle' (88 bytes)\r\nTraceback (most recent call last):\r\nFile \"<string>\", line 1, in <module>\r\nFile \"assembler.py\", line 18, in <module>\r\nTypeError: module.__init__() argument 1 must be string, not unicode\r\nc : fatal: server died with error code 1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/482", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/482/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/482/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/482", "id": 649010695, "node_id": "MDU6SXNzdWU2NDkwMTA2OTU=", "number": 482, "title": "Latest version not available via apt install", "user": {"login": "doktorjw", "id": 14839255, "node_id": "MDQ6VXNlcjE0ODM5MjU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14839255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doktorjw", "html_url": "https://github.com/doktorjw", "followers_url": "https://api.github.com/users/doktorjw/followers", "following_url": "https://api.github.com/users/doktorjw/following{/other_user}", "gists_url": "https://api.github.com/users/doktorjw/gists{/gist_id}", "starred_url": "https://api.github.com/users/doktorjw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doktorjw/subscriptions", "organizations_url": "https://api.github.com/users/doktorjw/orgs", "repos_url": "https://api.github.com/users/doktorjw/repos", "events_url": "https://api.github.com/users/doktorjw/events{/privacy}", "received_events_url": "https://api.github.com/users/doktorjw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-01T14:06:09Z", "updated_at": "2020-07-12T09:58:43Z", "closed_at": "2020-07-12T09:58:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following the install instructions, the latest I can get is 0.78.5. What repo would I have to add in order for an apt install to install latest version?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/481", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/481/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/481/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/481/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/481", "id": 648460326, "node_id": "MDU6SXNzdWU2NDg0NjAzMjY=", "number": 481, "title": "sshuttle not properly handling unicode?", "user": {"login": "jasonboukheir", "id": 5115126, "node_id": "MDQ6VXNlcjUxMTUxMjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5115126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonboukheir", "html_url": "https://github.com/jasonboukheir", "followers_url": "https://api.github.com/users/jasonboukheir/followers", "following_url": "https://api.github.com/users/jasonboukheir/following{/other_user}", "gists_url": "https://api.github.com/users/jasonboukheir/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonboukheir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonboukheir/subscriptions", "organizations_url": "https://api.github.com/users/jasonboukheir/orgs", "repos_url": "https://api.github.com/users/jasonboukheir/repos", "events_url": "https://api.github.com/users/jasonboukheir/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonboukheir/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-06-30T20:09:16Z", "updated_at": "2020-07-22T04:03:18Z", "closed_at": "2020-07-12T09:17:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use\r\n\r\n`sshuttle -r my-host -v 10.13.0.0/16`\r\n\r\nwith version `1.0.2`, I'm getting the follow error:\r\n\r\n```\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.3\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: None\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nStarting client with Python version 3.8.3\r\nc : connecting to server...\r\nAll keys already loaded\r\nWarning: Permanently added the ECDSA host key for IP address '18.213.216.154' to the list of known hosts.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 18, in <module>\r\nTypeError: module.__init__() argument 1 must be string, not unicode\r\nc : fatal: server died with error code 1\r\n```\r\n\r\nI wasn't having this issue in version `0.78.5`. Looking at that the history of `assembler.py`, that line was last changed in #449 . I wonder if something changed there that wasn't properly converting unicode to a string?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/479", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/479/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/479/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/479", "id": 647160768, "node_id": "MDU6SXNzdWU2NDcxNjA3Njg=", "number": 479, "title": "AttributeError: 'module' object has no attribute 'set_blocking'", "user": {"login": "vBlackOut", "id": 26262208, "node_id": "MDQ6VXNlcjI2MjYyMjA4", "avatar_url": "https://avatars2.githubusercontent.com/u/26262208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vBlackOut", "html_url": "https://github.com/vBlackOut", "followers_url": "https://api.github.com/users/vBlackOut/followers", "following_url": "https://api.github.com/users/vBlackOut/following{/other_user}", "gists_url": "https://api.github.com/users/vBlackOut/gists{/gist_id}", "starred_url": "https://api.github.com/users/vBlackOut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vBlackOut/subscriptions", "organizations_url": "https://api.github.com/users/vBlackOut/orgs", "repos_url": "https://api.github.com/users/vBlackOut/repos", "events_url": "https://api.github.com/users/vBlackOut/events{/privacy}", "received_events_url": "https://api.github.com/users/vBlackOut/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-29T06:44:17Z", "updated_at": "2020-07-28T18:22:50Z", "closed_at": "2020-06-29T08:05:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Error on Python 3.8.3\r\n\r\nlook like trackback:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 41, in <module>\r\n  File \"sshuttle.server\", line 395, in main\r\n  File \"sshuttle.ssnet\", line 600, in runonce\r\n  File \"sshuttle.ssnet\", line 490, in callback\r\n  File \"sshuttle.ssnet\", line 439, in flush\r\nAttributeError: 'module' object has no attribute 'set_blocking'\r\nc : Connected.\r\nc : Waiting: 2 r=[5, 8] w=[8] x=[] (fullness=7/0)\r\nc :   Ready: 2 r=[] w=[8] x=[]\r\nc : mux wrote: 15/15\r\nc : Waiting: 2 r=[5, 8] w=[] x=[] (fullness=7/0)\r\nc :   Ready: 2 r=[8] w=[] x=[]\r\nc : fatal: server died with error code 1\r\n```\r\nit's weird", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/478", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/478/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/478/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/478/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/478", "id": 646867000, "node_id": "MDU6SXNzdWU2NDY4NjcwMDA=", "number": 478, "title": "Update auto sudoers documentation", "user": {"login": "pascencio", "id": 9783678, "node_id": "MDQ6VXNlcjk3ODM2Nzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/9783678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pascencio", "html_url": "https://github.com/pascencio", "followers_url": "https://api.github.com/users/pascencio/followers", "following_url": "https://api.github.com/users/pascencio/following{/other_user}", "gists_url": "https://api.github.com/users/pascencio/gists{/gist_id}", "starred_url": "https://api.github.com/users/pascencio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pascencio/subscriptions", "organizations_url": "https://api.github.com/users/pascencio/orgs", "repos_url": "https://api.github.com/users/pascencio/repos", "events_url": "https://api.github.com/users/pascencio/events{/privacy}", "received_events_url": "https://api.github.com/users/pascencio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-28T08:05:28Z", "updated_at": "2020-07-17T18:21:43Z", "closed_at": "2020-07-16T21:08:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys!\r\n\r\nI tried to create a sudoers file following the official [documentation](https://sshuttle.readthedocs.io/en/stable/installation.html).\r\n\r\nWhen a I ran this command:\r\n\r\n`sshuttle -sudoers`\r\n\r\nGot this output:\r\n\r\n```shell\r\nusage: sshuttle [-l [ip:]port] [-r [user@]sshserver[:port]] <subnets...>\r\nsshuttle: error: argument -s/--subnets: Unable to open subnet file: udoers\r\n```\r\n\r\nAfter read the message with detail I saw `Unable to open subnet file: udoers`.\r\n\r\nThen try this:\r\n\r\n`sshuttle --sudoers`\r\n\r\nAnd tada!!\r\n\r\n`Success, sudoers file update.`\r\n\r\nCan you update the official documentation please?\r\n\r\nThanks in the advance!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/477", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/477/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/477/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/477/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/477", "id": 646680699, "node_id": "MDU6SXNzdWU2NDY2ODA2OTk=", "number": 477, "title": "SyntaxError: invalid syntax", "user": {"login": "limingzhang513", "id": 39159345, "node_id": "MDQ6VXNlcjM5MTU5MzQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/39159345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/limingzhang513", "html_url": "https://github.com/limingzhang513", "followers_url": "https://api.github.com/users/limingzhang513/followers", "following_url": "https://api.github.com/users/limingzhang513/following{/other_user}", "gists_url": "https://api.github.com/users/limingzhang513/gists{/gist_id}", "starred_url": "https://api.github.com/users/limingzhang513/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/limingzhang513/subscriptions", "organizations_url": "https://api.github.com/users/limingzhang513/orgs", "repos_url": "https://api.github.com/users/limingzhang513/repos", "events_url": "https://api.github.com/users/limingzhang513/events{/privacy}", "received_events_url": "https://api.github.com/users/limingzhang513/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-27T13:13:43Z", "updated_at": "2020-07-12T09:19:27Z", "closed_at": "2020-07-12T09:19:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Traceback (most recent call last):\r\n  File \"/usr/local/bin/sshuttle\", line 5, in <module>\r\n    from sshuttle.cmdline import main\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle/cmdline.py\", line 5, in <module>\r\n    import sshuttle.client as client\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle/client.py\", line 302\r\n    assert(not re.search(rb'[^-\\w\\.]', hostname))\r\n                                    ^\r\nSyntaxError: invalid syntax", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/474", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/474/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/474/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/474/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/474", "id": 644961541, "node_id": "MDU6SXNzdWU2NDQ5NjE1NDE=", "number": 474, "title": "module 'importlib' has no attribute 'util'", "user": {"login": "spuck", "id": 4632974, "node_id": "MDQ6VXNlcjQ2MzI5NzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/4632974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spuck", "html_url": "https://github.com/spuck", "followers_url": "https://api.github.com/users/spuck/followers", "following_url": "https://api.github.com/users/spuck/following{/other_user}", "gists_url": "https://api.github.com/users/spuck/gists{/gist_id}", "starred_url": "https://api.github.com/users/spuck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spuck/subscriptions", "organizations_url": "https://api.github.com/users/spuck/orgs", "repos_url": "https://api.github.com/users/spuck/repos", "events_url": "https://api.github.com/users/spuck/events{/privacy}", "received_events_url": "https://api.github.com/users/spuck/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-24T20:57:53Z", "updated_at": "2020-06-30T18:23:51Z", "closed_at": "2020-06-29T21:36:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Just downloaded and installed sshuttle 1.0.2 with pip on an Amazon Linux EC2.\r\n\r\nTrying to run for the first time, I got this message and traceback:\r\n\r\n\r\n    [ec2-user@ip-172-31-2-69 ~]$ sshuttle -Nvr ec2-user@<redacted IP>\r\n    Starting sshuttle proxy.\r\n    firewall manager: Starting firewall with Python version 3.7.6\r\n    firewall manager: ready method name nat.\r\n    IPv6 enabled: None\r\n    UDP enabled: False\r\n    DNS enabled: False\r\n    User enabled: False\r\n    TCP redirector listening on ('127.0.0.1', 12300).\r\n    Starting client with Python version 3.7.6\r\n    c : connecting to server...\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/bin/sshuttle\", line 8, in <module>\r\n        sys.exit(main())\r\n      File \"/usr/local/lib/python3.7/site-packages/sshuttle/cmdline.py\", line 102, in main\r\n        opt.sudo_pythonpath)\r\n      File \"/usr/local/lib/python3.7/site-packages/sshuttle/client.py\", line 795, in main\r\n        seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n      File \"/usr/local/lib/python3.7/site-packages/sshuttle/client.py\", line 453, in _main\r\n        auto_nets=auto_nets))\r\n      File \"/usr/local/lib/python3.7/site-packages/sshuttle/ssh.py\", line 92, in connect\r\n        content = get_module_source('sshuttle.assembler')\r\n      File \"/usr/local/lib/python3.7/site-packages/sshuttle/ssh.py\", line 18, in get_module_source\r\n        spec = importlib.util.find_spec(name)\r\n    AttributeError: module 'importlib' has no attribute 'util'\r\n\r\nI inserted this line on line 7 of site-packages/sshuttle/ssh.py:\r\n\r\n    import importlib.util\r\n\r\n(Gave this a try after finding this message: https://bugs.python.org/msg301085)\r\n\r\nIt appears to be working now. It's very possible that I missed some install step; Python is not my first language.\r\n\r\n-Thanks,\r\n\r\n Travis\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/470", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/470/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/470/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/470/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/470", "id": 640612500, "node_id": "MDU6SXNzdWU2NDA2MTI1MDA=", "number": 470, "title": "Remove Python2 compatibility on PyPI", "user": {"login": "wilsonehusin", "id": 14004487, "node_id": "MDQ6VXNlcjE0MDA0NDg3", "avatar_url": "https://avatars1.githubusercontent.com/u/14004487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wilsonehusin", "html_url": "https://github.com/wilsonehusin", "followers_url": "https://api.github.com/users/wilsonehusin/followers", "following_url": "https://api.github.com/users/wilsonehusin/following{/other_user}", "gists_url": "https://api.github.com/users/wilsonehusin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wilsonehusin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wilsonehusin/subscriptions", "organizations_url": "https://api.github.com/users/wilsonehusin/orgs", "repos_url": "https://api.github.com/users/wilsonehusin/repos", "events_url": "https://api.github.com/users/wilsonehusin/events{/privacy}", "received_events_url": "https://api.github.com/users/wilsonehusin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-17T17:18:22Z", "updated_at": "2020-06-18T08:04:49Z", "closed_at": "2020-06-18T05:27:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "sshuttle's entry on PyPI seem to mark 1.0.x releases as Python2 compatible when it's not. Can we get this removed on PyPI?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/467", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/467/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/467/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/467", "id": 639853331, "node_id": "MDU6SXNzdWU2Mzk4NTMzMzE=", "number": 467, "title": "Parse error with domain user", "user": {"login": "bang-uin", "id": 23202066, "node_id": "MDQ6VXNlcjIzMjAyMDY2", "avatar_url": "https://avatars3.githubusercontent.com/u/23202066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bang-uin", "html_url": "https://github.com/bang-uin", "followers_url": "https://api.github.com/users/bang-uin/followers", "following_url": "https://api.github.com/users/bang-uin/following{/other_user}", "gists_url": "https://api.github.com/users/bang-uin/gists{/gist_id}", "starred_url": "https://api.github.com/users/bang-uin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bang-uin/subscriptions", "organizations_url": "https://api.github.com/users/bang-uin/orgs", "repos_url": "https://api.github.com/users/bang-uin/repos", "events_url": "https://api.github.com/users/bang-uin/events{/privacy}", "received_events_url": "https://api.github.com/users/bang-uin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-16T17:40:53Z", "updated_at": "2020-06-16T23:39:57Z", "closed_at": "2020-06-16T21:09:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/sshuttle/sshuttle/blob/9d79bb82c53f75f9bcf362aa214b4230931dfec5/sshuttle/ssh.py#L51\r\n\r\nIf one uses a domain account then the parse function will break.\r\n\r\n```\r\n#~ sshuttle -r user@domain.local@<ip>:<port> 192.168.0.0/16\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python-exec/python3.6/sshuttle\", line 11, in <module>\r\n    load_entry_point('sshuttle==1.0.1', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/lib64/python3.6/site-packages/sshuttle/cmdline.py\", line 102, in main\r\n    opt.sudo_pythonpath)\r\n  File \"/usr/lib64/python3.6/site-packages/sshuttle/client.py\", line 795, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"/usr/lib64/python3.6/site-packages/sshuttle/client.py\", line 453, in _main\r\n    auto_nets=auto_nets))\r\n  File \"/usr/lib64/python3.6/site-packages/sshuttle/ssh.py\", line 113, in connect\r\n    username, password, port, host = parse_hostport(rhostport)\r\n  File \"/usr/lib64/python3.6/site-packages/sshuttle/ssh.py\", line 79, in parse_hostport\r\n    username, host = host.split(\"@\")\r\nValueError: too many values to unpack (expected 2)\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/466", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/466/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/466/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/466/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/466", "id": 638785287, "node_id": "MDU6SXNzdWU2Mzg3ODUyODc=", "number": 466, "title": "Mistakenly created", "user": {"login": "AnubhaS24", "id": 45566884, "node_id": "MDQ6VXNlcjQ1NTY2ODg0", "avatar_url": "https://avatars2.githubusercontent.com/u/45566884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AnubhaS24", "html_url": "https://github.com/AnubhaS24", "followers_url": "https://api.github.com/users/AnubhaS24/followers", "following_url": "https://api.github.com/users/AnubhaS24/following{/other_user}", "gists_url": "https://api.github.com/users/AnubhaS24/gists{/gist_id}", "starred_url": "https://api.github.com/users/AnubhaS24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AnubhaS24/subscriptions", "organizations_url": "https://api.github.com/users/AnubhaS24/orgs", "repos_url": "https://api.github.com/users/AnubhaS24/repos", "events_url": "https://api.github.com/users/AnubhaS24/events{/privacy}", "received_events_url": "https://api.github.com/users/AnubhaS24/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-15T11:44:52Z", "updated_at": "2020-06-15T11:45:22Z", "closed_at": "2020-06-15T11:44:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/464", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/464/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/464/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/464/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/464", "id": 638424691, "node_id": "MDU6SXNzdWU2Mzg0MjQ2OTE=", "number": 464, "title": "SyntaxError: invalid syntax", "user": {"login": "de-adshot", "id": 11958190, "node_id": "MDQ6VXNlcjExOTU4MTkw", "avatar_url": "https://avatars3.githubusercontent.com/u/11958190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/de-adshot", "html_url": "https://github.com/de-adshot", "followers_url": "https://api.github.com/users/de-adshot/followers", "following_url": "https://api.github.com/users/de-adshot/following{/other_user}", "gists_url": "https://api.github.com/users/de-adshot/gists{/gist_id}", "starred_url": "https://api.github.com/users/de-adshot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/de-adshot/subscriptions", "organizations_url": "https://api.github.com/users/de-adshot/orgs", "repos_url": "https://api.github.com/users/de-adshot/repos", "events_url": "https://api.github.com/users/de-adshot/events{/privacy}", "received_events_url": "https://api.github.com/users/de-adshot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-14T20:29:39Z", "updated_at": "2020-06-17T21:21:59Z", "closed_at": "2020-06-17T21:21:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "### kali@kali:~$ sshuttle -vr user@x.x.x.x x.y.y.0/24\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/sshuttle\", line 11, in <module>\r\n    load_entry_point('sshuttle==1.0.2.dev8+ga53f026', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 489, in load_entry_point\r\n    return get_distribution(dist).load_entry_point(group, name)\r\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 2852, in load_entry_point\r\n    return ep.load()\r\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 2443, in load\r\n    return self.resolve()\r\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 2449, in resolve\r\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-1.0.2.dev8+ga53f026-py2.7.egg/sshuttle/cmdline.py\", line 5, in <module>\r\n    import sshuttle.client as client\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-1.0.2.dev8+ga53f026-py2.7.egg/sshuttle/client.py\", line 302\r\n    assert(not re.search(rb'[^-\\w\\.]', hostname))\r\n                                    ^\r\nSyntaxError: invalid syntax\r\nkali@kali:~$ \r\n\r\n\r\nI'm using kali 2020.1 and i'm unable to fix this error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/463", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/463/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/463/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/463", "id": 637006260, "node_id": "MDU6SXNzdWU2MzcwMDYyNjA=", "number": 463, "title": "SSH config Port value ignored in recent sshuttle", "user": {"login": "mksh", "id": 1139113, "node_id": "MDQ6VXNlcjExMzkxMTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1139113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mksh", "html_url": "https://github.com/mksh", "followers_url": "https://api.github.com/users/mksh/followers", "following_url": "https://api.github.com/users/mksh/following{/other_user}", "gists_url": "https://api.github.com/users/mksh/gists{/gist_id}", "starred_url": "https://api.github.com/users/mksh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mksh/subscriptions", "organizations_url": "https://api.github.com/users/mksh/orgs", "repos_url": "https://api.github.com/users/mksh/repos", "events_url": "https://api.github.com/users/mksh/events{/privacy}", "received_events_url": "https://api.github.com/users/mksh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-11T13:19:09Z", "updated_at": "2020-06-16T22:04:40Z", "closed_at": "2020-06-16T22:04:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "After this change https://github.com/sshuttle/sshuttle/commit/966fd0c5231d56c4f464752865d96f97bd3c0aac (sshuttle > `0.78.5`), sshuttle started to ignore Port value from SSH configuration, and now it always assumes the default 22 port.\r\n\r\nWhen launched with `sshuttle -vvv <some_sshuttle_host> <subnet1> <subnet2>`, regardless of Port setting for `<some_sshuttle_host>` in `~/.ssh/config`, the following SSH connection string is executed:\r\n\r\n```\r\nc : connecting to server...\r\nc : executing: ['ssh', '-p', '22', '<some_sshuttle_host>', '--', '/bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=3; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1275), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\n```\r\n\r\nThe only way to change 22 port is to explicitly specify it on the command line\r\n\r\n```\r\nsshuttle -vvv <some_sshuttle_host>:<NEW_PORT_INTEGER> <subnet1> <subnet2>\r\n```\r\n\r\nI guess this behavior may break many integrations with automatically provisioned hosts. Could `sshuttle` somehow revert to honoring SSH configuration files ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/462", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/462/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/462/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/462/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/462", "id": 636775158, "node_id": "MDU6SXNzdWU2MzY3NzUxNTg=", "number": 462, "title": "invalid syntax if installing from git", "user": {"login": "accessone67", "id": 7426496, "node_id": "MDQ6VXNlcjc0MjY0OTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7426496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/accessone67", "html_url": "https://github.com/accessone67", "followers_url": "https://api.github.com/users/accessone67/followers", "following_url": "https://api.github.com/users/accessone67/following{/other_user}", "gists_url": "https://api.github.com/users/accessone67/gists{/gist_id}", "starred_url": "https://api.github.com/users/accessone67/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/accessone67/subscriptions", "organizations_url": "https://api.github.com/users/accessone67/orgs", "repos_url": "https://api.github.com/users/accessone67/repos", "events_url": "https://api.github.com/users/accessone67/events{/privacy}", "received_events_url": "https://api.github.com/users/accessone67/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-11T07:08:24Z", "updated_at": "2020-06-12T11:48:56Z", "closed_at": "2020-06-12T11:48:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey\r\n\r\nAfter git clone and then \"sudo ./setup.py install\" I get syntax error.\r\n\r\nbyte-compiling build/bdist.linux-x86_64/egg/sshuttle/client.py to client.pyc\r\n  File \"build/bdist.linux-x86_64/egg/sshuttle/client.py\", line 302\r\n    assert(not re.search(rb'[^-\\w\\.]', hostname))\r\n                                    ^\r\nSyntaxError: invalid syntax\r\n\r\n\r\nExtracting sshuttle-1.0.2.dev8+ga53f026-py2.7.egg to /usr/local/lib/python2.7/dist-packages\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-1.0.2.dev8+ga53f026-py2.7.egg/sshuttle/client.py\", line 302\r\n    assert(not re.search(rb'[^-\\w\\.]', hostname))\r\n                                    ^\r\nSyntaxError: invalid syntax\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/459", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/459/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/459/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/459", "id": 636217561, "node_id": "MDU6SXNzdWU2MzYyMTc1NjE=", "number": 459, "title": "Error in documentation about Python 2.x being supported on the server", "user": {"login": "vincent-dm", "id": 8799841, "node_id": "MDQ6VXNlcjg3OTk4NDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8799841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincent-dm", "html_url": "https://github.com/vincent-dm", "followers_url": "https://api.github.com/users/vincent-dm/followers", "following_url": "https://api.github.com/users/vincent-dm/following{/other_user}", "gists_url": "https://api.github.com/users/vincent-dm/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincent-dm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincent-dm/subscriptions", "organizations_url": "https://api.github.com/users/vincent-dm/orgs", "repos_url": "https://api.github.com/users/vincent-dm/repos", "events_url": "https://api.github.com/users/vincent-dm/events{/privacy}", "received_events_url": "https://api.github.com/users/vincent-dm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-10T12:47:32Z", "updated_at": "2020-06-10T23:55:37Z", "closed_at": "2020-06-10T23:55:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "While running into #457 I noticed that it could be fixed by installing Python3 on the server. This makes sense, because [the changelog mentions that Python 2.x support was dropped](https://github.com/sshuttle/sshuttle/blob/master/CHANGES.rst#101---2020-06-05).\r\n\r\nHowever, the documentation [still claims that Python 2.4 and higher are supported on the server](https://sshuttle.readthedocs.io/en/stable/requirements.html#server-side-requirements).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/458", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/458/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/458/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/458/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/458", "id": 635705403, "node_id": "MDU6SXNzdWU2MzU3MDU0MDM=", "number": 458, "title": "can't use username with @ sign on version 1.0.1", "user": {"login": "alekseymykhailov", "id": 3235145, "node_id": "MDQ6VXNlcjMyMzUxNDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3235145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alekseymykhailov", "html_url": "https://github.com/alekseymykhailov", "followers_url": "https://api.github.com/users/alekseymykhailov/followers", "following_url": "https://api.github.com/users/alekseymykhailov/following{/other_user}", "gists_url": "https://api.github.com/users/alekseymykhailov/gists{/gist_id}", "starred_url": "https://api.github.com/users/alekseymykhailov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alekseymykhailov/subscriptions", "organizations_url": "https://api.github.com/users/alekseymykhailov/orgs", "repos_url": "https://api.github.com/users/alekseymykhailov/repos", "events_url": "https://api.github.com/users/alekseymykhailov/events{/privacy}", "received_events_url": "https://api.github.com/users/alekseymykhailov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-09T19:35:15Z", "updated_at": "2020-06-10T21:03:26Z", "closed_at": "2020-06-10T21:03:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\nIt is impossible to use connection string if username contains @ sign `user@name@example.com` after this change :\r\nhttps://github.com/sshuttle/sshuttle/commit/966fd0c5231d56c4f464752865d96f97bd3c0aac#diff-8d7b1e96a737eb7011e2012d5d797916R90\r\n\r\n\r\nmaybe it is an uncommon use case, but it definitely exists :) \r\nin this example - example.com expect username with format user@another-host-to-ssh.com\r\n\r\nI believe a simple fix could be \r\n```\r\n-        username, host = host.split(\"@\")\r\n+        username, host = host.rsplit(\"@\", 1)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/457", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/457/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/457/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/457/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/457", "id": 635659120, "node_id": "MDU6SXNzdWU2MzU2NTkxMjA=", "number": 457, "title": "Import error/String mismatch on version 1.0.1 (MacOS)", "user": {"login": "darakian", "id": 3607524, "node_id": "MDQ6VXNlcjM2MDc1MjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/3607524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darakian", "html_url": "https://github.com/darakian", "followers_url": "https://api.github.com/users/darakian/followers", "following_url": "https://api.github.com/users/darakian/following{/other_user}", "gists_url": "https://api.github.com/users/darakian/gists{/gist_id}", "starred_url": "https://api.github.com/users/darakian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darakian/subscriptions", "organizations_url": "https://api.github.com/users/darakian/orgs", "repos_url": "https://api.github.com/users/darakian/repos", "events_url": "https://api.github.com/users/darakian/events{/privacy}", "received_events_url": "https://api.github.com/users/darakian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-06-09T18:19:09Z", "updated_at": "2020-06-11T15:59:39Z", "closed_at": "2020-06-10T23:55:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just updated to 1.0.1 and I'm seeing \r\n```\r\nc :  > channel=0 cmd=PING len=7 (fullness=0)\r\nserver: assembling u'sshuttle' (7 bytes)\r\nserver: assembling u'sshuttle.cmdline_options' (66 bytes)\r\nserver: assembling u'sshuttle.helpers' (902 bytes)\r\nserver: assembling u'sshuttle.ssnet' (5734 bytes)\r\nserver: assembling u'sshuttle.hostwatch' (2463 bytes)\r\nserver: assembling u'sshuttle.server' (3673 bytes)\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 25, in <module>\r\n  File \"sshuttle.server\", line 9, in <module>\r\nImportError: cannot import name which\r\nc : fatal: expected server init string b'SSHUTTLE0001'; got b''\r\n```\r\n\r\nThis obviously is a problem as I can't use sshuttle at all. My usage is of the form\r\n```\r\nsudo sshuttle -vvv -vr user@box.mydomain.com CIDR/RANGE\r\n```\r\nThis is sshing into an openssh server on the remote end which was working on version `0.78.5_2`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/455", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/455/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/455/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/455", "id": 632962850, "node_id": "MDU6SXNzdWU2MzI5NjI4NTA=", "number": 455, "title": "I keep getting the following error on python", "user": {"login": "hackedWifi", "id": 22781207, "node_id": "MDQ6VXNlcjIyNzgxMjA3", "avatar_url": "https://avatars0.githubusercontent.com/u/22781207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackedWifi", "html_url": "https://github.com/hackedWifi", "followers_url": "https://api.github.com/users/hackedWifi/followers", "following_url": "https://api.github.com/users/hackedWifi/following{/other_user}", "gists_url": "https://api.github.com/users/hackedWifi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackedWifi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackedWifi/subscriptions", "organizations_url": "https://api.github.com/users/hackedWifi/orgs", "repos_url": "https://api.github.com/users/hackedWifi/repos", "events_url": "https://api.github.com/users/hackedWifi/events{/privacy}", "received_events_url": "https://api.github.com/users/hackedWifi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-07T03:03:22Z", "updated_at": "2020-08-11T21:36:37Z", "closed_at": "2020-08-11T21:36:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have tried to test sshuttle on Gentoo and Pop_os and I keep getting the following error. Is anybody experiencing this?\r\n\r\n`firewall manager: Starting firewall with Python version 3.7.7\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: None\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=5, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.7.7\r\nc : connecting to server...\r\nTraceback (most recent call last):\r\n  File \"/home/dzentu/.local/bin/sshuttle\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/dzentu/.local/lib/python3.7/site-packages/sshuttle/cmdline.py\", line 102, in main\r\n    opt.sudo_pythonpath)\r\n  File \"/home/dzentu/.local/lib/python3.7/site-packages/sshuttle/client.py\", line 795, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"/home/dzentu/.local/lib/python3.7/site-packages/sshuttle/client.py\", line 453, in _main\r\n    auto_nets=auto_nets))\r\n  File \"/home/dzentu/.local/lib/python3.7/site-packages/sshuttle/ssh.py\", line 113, in connect\r\n    username, password, port, host = parse_hostport(rhostport)\r\n  File \"/home/dzentu/.local/lib/python3.7/site-packages/sshuttle/ssh.py\", line 77, in parse_hostport\r\n    if \"@\" in host:\r\nTypeError: argument of type 'NoneType' is not iterable`\r\n\r\nI am on the latest sshuttle 1.0.1 using python 3.8 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/454", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/454/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/454/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/454/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/454", "id": 632639492, "node_id": "MDU6SXNzdWU2MzI2Mzk0OTI=", "number": 454, "title": "Version 0.78.6.dev55+gec2018d+ Traceback for tunnel-in-tunnel", "user": {"login": "larrypl", "id": 718014, "node_id": "MDQ6VXNlcjcxODAxNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/718014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larrypl", "html_url": "https://github.com/larrypl", "followers_url": "https://api.github.com/users/larrypl/followers", "following_url": "https://api.github.com/users/larrypl/following{/other_user}", "gists_url": "https://api.github.com/users/larrypl/gists{/gist_id}", "starred_url": "https://api.github.com/users/larrypl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larrypl/subscriptions", "organizations_url": "https://api.github.com/users/larrypl/orgs", "repos_url": "https://api.github.com/users/larrypl/repos", "events_url": "https://api.github.com/users/larrypl/events{/privacy}", "received_events_url": "https://api.github.com/users/larrypl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-06T18:11:20Z", "updated_at": "2020-07-12T09:18:57Z", "closed_at": "2020-07-12T09:18:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Under version 0.78.6.dev50+g994ce07 I can create a second tunnel that goes through the first tunnel. With version 0.78.6.dev55+gec2018d and higher I get tracebacks:\r\n\r\n> Traceback (most recent call last):\r\n>   File \"<string>\", line 1, in <module>\r\n>   File \"assembler.py\", line 41, in <module>\r\n>   File \"sshuttle.server\", line 399, in main\r\n>   File \"sshuttle.ssnet\", line 603, in runonce\r\n>   File \"sshuttle.ssnet\", line 493, in callback\r\n>   File \"sshuttle.ssnet\", line 442, in flush\r\n> AttributeError: 'module' object has no attribute 'set_blocking'\r\n\r\nfor version 0.78.6.dev55+gec2018d, and\r\n\r\n> Traceback (most recent call last):\r\n>   File \"<string>\", line 1, in <module>\r\n>   File \"assembler.py\", line 25, in <module>\r\n>   File \"sshuttle.server\", line 9, in <module>\r\n> ImportError: cannot import name which\r\n> c : fatal: expected server init string b'SSHUTTLE0001'; got b''\r\n\r\nfor higher versions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/448", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/448/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/448/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/448/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/448", "id": 628549061, "node_id": "MDU6SXNzdWU2Mjg1NDkwNjE=", "number": 448, "title": "can i run it from windows 10", "user": {"login": "zefzafy", "id": 59182011, "node_id": "MDQ6VXNlcjU5MTgyMDEx", "avatar_url": "https://avatars3.githubusercontent.com/u/59182011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zefzafy", "html_url": "https://github.com/zefzafy", "followers_url": "https://api.github.com/users/zefzafy/followers", "following_url": "https://api.github.com/users/zefzafy/following{/other_user}", "gists_url": "https://api.github.com/users/zefzafy/gists{/gist_id}", "starred_url": "https://api.github.com/users/zefzafy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zefzafy/subscriptions", "organizations_url": "https://api.github.com/users/zefzafy/orgs", "repos_url": "https://api.github.com/users/zefzafy/repos", "events_url": "https://api.github.com/users/zefzafy/events{/privacy}", "received_events_url": "https://api.github.com/users/zefzafy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-01T15:57:31Z", "updated_at": "2020-06-01T21:01:24Z", "closed_at": "2020-06-01T21:01:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "i have isolated linux server behind vpn, i need to create tunnel between my laptop \"windows 10\" and cantos.\r\n\r\nRequired linux machine to access internet through my labtop", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/432", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/432/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/432/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/432/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/432", "id": 620170120, "node_id": "MDU6SXNzdWU2MjAxNzAxMjA=", "number": 432, "title": "Why hasn't there been a new build since jan 2019? ", "user": {"login": "andloh", "id": 21281033, "node_id": "MDQ6VXNlcjIxMjgxMDMz", "avatar_url": "https://avatars2.githubusercontent.com/u/21281033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andloh", "html_url": "https://github.com/andloh", "followers_url": "https://api.github.com/users/andloh/followers", "following_url": "https://api.github.com/users/andloh/following{/other_user}", "gists_url": "https://api.github.com/users/andloh/gists{/gist_id}", "starred_url": "https://api.github.com/users/andloh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andloh/subscriptions", "organizations_url": "https://api.github.com/users/andloh/orgs", "repos_url": "https://api.github.com/users/andloh/repos", "events_url": "https://api.github.com/users/andloh/events{/privacy}", "received_events_url": "https://api.github.com/users/andloh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-18T12:30:11Z", "updated_at": "2020-06-04T22:22:57Z", "closed_at": "2020-06-04T22:22:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Many fixes and features has been merged to master since jan 2019. Installing from ./setup.py throwing module errors when trying to run sshuttle ( ImportError: No module named ipaddress). (after installing the req's and python setuptools) \r\n\r\nIs it possible to get the debian/ubuntu repositories updated to the newest version ? :) \r\n\r\nThanks! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/427", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/427/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/427/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/427/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/427", "id": 615883757, "node_id": "MDU6SXNzdWU2MTU4ODM3NTc=", "number": 427, "title": "How to add multiple remotes and subnets to config file? ", "user": {"login": "andloh", "id": 21281033, "node_id": "MDQ6VXNlcjIxMjgxMDMz", "avatar_url": "https://avatars2.githubusercontent.com/u/21281033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andloh", "html_url": "https://github.com/andloh", "followers_url": "https://api.github.com/users/andloh/followers", "following_url": "https://api.github.com/users/andloh/following{/other_user}", "gists_url": "https://api.github.com/users/andloh/gists{/gist_id}", "starred_url": "https://api.github.com/users/andloh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andloh/subscriptions", "organizations_url": "https://api.github.com/users/andloh/orgs", "repos_url": "https://api.github.com/users/andloh/repos", "events_url": "https://api.github.com/users/andloh/events{/privacy}", "received_events_url": "https://api.github.com/users/andloh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-11T13:26:07Z", "updated_at": "2020-05-13T14:38:39Z", "closed_at": "2020-05-13T14:38:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "How to accomplish something like this? \r\n```\r\n10.0.1.0/24 10.0.2.0/24\r\n--remote\r\nme@bastion1.com\r\n10.0.3.0/24\r\n--remote\r\nme@bastion2.com\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/417", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/417/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/417/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/417/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/417", "id": 595914858, "node_id": "MDU6SXNzdWU1OTU5MTQ4NTg=", "number": 417, "title": "Remotehost parsing of simple hostname or ssh alias throws IndexError", "user": {"login": "tobigrimm", "id": 24915377, "node_id": "MDQ6VXNlcjI0OTE1Mzc3", "avatar_url": "https://avatars1.githubusercontent.com/u/24915377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobigrimm", "html_url": "https://github.com/tobigrimm", "followers_url": "https://api.github.com/users/tobigrimm/followers", "following_url": "https://api.github.com/users/tobigrimm/following{/other_user}", "gists_url": "https://api.github.com/users/tobigrimm/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobigrimm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobigrimm/subscriptions", "organizations_url": "https://api.github.com/users/tobigrimm/orgs", "repos_url": "https://api.github.com/users/tobigrimm/repos", "events_url": "https://api.github.com/users/tobigrimm/events{/privacy}", "received_events_url": "https://api.github.com/users/tobigrimm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-07T14:33:05Z", "updated_at": "2020-04-14T21:05:23Z", "closed_at": "2020-04-14T21:05:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When starting sshuttle with an alias defined in ~/.ssh/config, like the following: `./run -r paua 10.1.2.3/32` or a simple hostname as remotehost, it throws an IndexError while parsing the given remotehost (to find username/password, host and port):\r\n\r\n```\r\n[local sudo] Password:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)                                                                                                                                                                                         \r\n  File \"/usr/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"[...]/sshuttle/__main__.py\", line 4, in <module>                                                                                                                    \r\n    sys.exit(main())                                                                                                                                                                                              \r\n  File \"[...]/sshuttle/sshuttle/cmdline.py\", line 102, in main\r\n    opt.sudo_pythonpath)\r\n  File \"[...]/sshuttle/sshuttle/client.py\", line 800, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)                                                                                                                                                     \r\n  File \"[...]/sshuttle/sshuttle/client.py\", line 458, in _main\r\n    auto_nets=auto_nets))\r\n  File \"[...]/sshuttle/sshuttle/ssh.py\", line 108, in connect\r\n    username, password, port, host = parse_hostport(rhostport)                                                                                                                                                    \r\n  File \"[...]/sshuttle/sshuttle/ssh.py\", line 89, in parse_hostport                                                                                                                  \r\n    host = \"{}\".format(re.split(r'\\s*@', rhostport)[1])                                                                                                                                                           \r\nIndexError: list index out of range   \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/413", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/413/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/413/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/413/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/413", "id": 592427651, "node_id": "MDU6SXNzdWU1OTI0Mjc2NTE=", "number": 413, "title": "No way to proxy the client of the natwork sharing when using NAT methed.", "user": {"login": "1ndeed", "id": 46162162, "node_id": "MDQ6VXNlcjQ2MTYyMTYy", "avatar_url": "https://avatars0.githubusercontent.com/u/46162162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1ndeed", "html_url": "https://github.com/1ndeed", "followers_url": "https://api.github.com/users/1ndeed/followers", "following_url": "https://api.github.com/users/1ndeed/following{/other_user}", "gists_url": "https://api.github.com/users/1ndeed/gists{/gist_id}", "starred_url": "https://api.github.com/users/1ndeed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1ndeed/subscriptions", "organizations_url": "https://api.github.com/users/1ndeed/orgs", "repos_url": "https://api.github.com/users/1ndeed/repos", "events_url": "https://api.github.com/users/1ndeed/events{/privacy}", "received_events_url": "https://api.github.com/users/1ndeed/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-02T07:47:50Z", "updated_at": "2020-04-03T14:03:36Z", "closed_at": "2020-04-03T14:03:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried using:\r\n`iptables -t nat -I POSTROUTING -s 169.254.31.130 -j SNAT --to-source 192.168.31.131`\r\nor\r\n`iptables -t nat -I POSTROUTING -s 169.254.31.130 -o ens33 -j MASQUERADE`\r\nor\r\n`iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE`\r\n`iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT`\r\n`iptables -A FORWARD -i enp3s10 -o ens33 -j ACCEPT`\r\nto share the local internet, then execute:\r\n`sshuttle -r i@$remote_server_ip -x 169.254.31.131 --dns 0/0`\r\nto let both the local server and my internet sharing clients to use the proxy, but the clients all failed with:\r\nERR_CONNECTION_REFUSED\r\n\r\nWhile Internet Sharing of Mac OS works fine when using sshuttle, the client's IP successfully changed without any configuration AT ALL(This is extremely useful when it comes to apple tv).\r\n\r\nMaybe it's the limitation of iptables? Or it's a bug of sshuttle?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/410", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/410/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/410/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/410/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/410", "id": 589441538, "node_id": "MDU6SXNzdWU1ODk0NDE1Mzg=", "number": 410, "title": "ssh authentification broken", "user": {"login": "drjbarker", "id": 53377004, "node_id": "MDQ6VXNlcjUzMzc3MDA0", "avatar_url": "https://avatars2.githubusercontent.com/u/53377004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drjbarker", "html_url": "https://github.com/drjbarker", "followers_url": "https://api.github.com/users/drjbarker/followers", "following_url": "https://api.github.com/users/drjbarker/following{/other_user}", "gists_url": "https://api.github.com/users/drjbarker/gists{/gist_id}", "starred_url": "https://api.github.com/users/drjbarker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drjbarker/subscriptions", "organizations_url": "https://api.github.com/users/drjbarker/orgs", "repos_url": "https://api.github.com/users/drjbarker/repos", "events_url": "https://api.github.com/users/drjbarker/events{/privacy}", "received_events_url": "https://api.github.com/users/drjbarker/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-27T22:21:58Z", "updated_at": "2020-03-28T06:45:03Z", "closed_at": "2020-03-28T06:45:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think the latest pull #401 has broken something with the ssh authentification. With my previously working configuration I now get asked to enter a password for:\r\n\r\n`username@gateway.domain.com@gateway.domain.com's password:` \r\n\r\ni.e. the username has become mangled and ended up as `username@gateway.domain.com` rather than `username`. If I don't specify a username (i.e. fall back to .ssh/config) then I get a crash here the root cause is:\r\n\r\n```\r\nline 84, in parse_hostport\r\n    host = \"{}\".format(re.split(r'\\s*@', rhostport)[1])\r\nIndexError: list index out of range\r\n```\r\n\r\nI'll take a look at this myself and see if I can fix.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/404", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/404/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/404/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/404/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/404", "id": 584850111, "node_id": "MDU6SXNzdWU1ODQ4NTAxMTE=", "number": 404, "title": "invalid reverse-lookup hostname triggering error", "user": {"login": "lordsutch", "id": 2024917, "node_id": "MDQ6VXNlcjIwMjQ5MTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/2024917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lordsutch", "html_url": "https://github.com/lordsutch", "followers_url": "https://api.github.com/users/lordsutch/followers", "following_url": "https://api.github.com/users/lordsutch/following{/other_user}", "gists_url": "https://api.github.com/users/lordsutch/gists{/gist_id}", "starred_url": "https://api.github.com/users/lordsutch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lordsutch/subscriptions", "organizations_url": "https://api.github.com/users/lordsutch/orgs", "repos_url": "https://api.github.com/users/lordsutch/repos", "events_url": "https://api.github.com/users/lordsutch/events{/privacy}", "received_events_url": "https://api.github.com/users/lordsutch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-20T05:18:18Z", "updated_at": "2020-03-25T20:37:10Z", "closed_at": "2020-03-25T20:37:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the -H option enabled connecting to a remote host that gets a lot of traffic from miscellaneous IP addresses, after a few minutes the remote side crashes with the following traceback:\r\n\r\nhostwatch: Found: : 109.201.137.30\r\nhostwatch: Found: .: 109.201.137.30\r\nhostwatch: Traceback (most recent call last):\r\n--->   File \"/usr/lib/python3.7/encodings/idna.py\", line 165, in encode\r\n--->     raise UnicodeError(\"label empty or too long\")\r\n---> UnicodeError: label empty or too long\r\n--->\r\n---> The above exception was the direct cause of the following exception:\r\n--->\r\n---> Traceback (most recent call last):\r\n--->   File \"sshuttle.server\", line 144, in start_hostwatch\r\n--->   File \"sshuttle.hostwatch\", line 294, in hw_main\r\n--->   File \"sshuttle.hostwatch\", line 118, in _check_dns\r\n---> UnicodeError: encoding with 'idna' codec failed (UnicodeError: label empty or too long)\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 39, in <module>\r\n  File \"sshuttle.server\", line 403, in main\r\n  File \"sshuttle.ssnet\", line 598, in runonce\r\n  File \"sshuttle.server\", line 334, in hostwatch_ready\r\nsshuttle.helpers.Fatal: hostwatch process died\r\n\r\nApparently this IP address has an invalid reverse DNS lookup which is messing up the hostwatch process. It would probably be preferable to ignore bogus hostnames instead of crashing the connection.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/400", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/400/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/400/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/400/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/400", "id": 579091317, "node_id": "MDU6SXNzdWU1NzkwOTEzMTc=", "number": 400, "title": "Socket error", "user": {"login": "ishmael1851", "id": 1690665, "node_id": "MDQ6VXNlcjE2OTA2NjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1690665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishmael1851", "html_url": "https://github.com/ishmael1851", "followers_url": "https://api.github.com/users/ishmael1851/followers", "following_url": "https://api.github.com/users/ishmael1851/following{/other_user}", "gists_url": "https://api.github.com/users/ishmael1851/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishmael1851/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishmael1851/subscriptions", "organizations_url": "https://api.github.com/users/ishmael1851/orgs", "repos_url": "https://api.github.com/users/ishmael1851/repos", "events_url": "https://api.github.com/users/ishmael1851/events{/privacy}", "received_events_url": "https://api.github.com/users/ishmael1851/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T08:33:21Z", "updated_at": "2020-03-11T09:17:17Z", "closed_at": "2020-03-11T09:17:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried running this on Mac using the latest clone of sshuttle.\r\n\r\n```\r\nTERMUX_USER=\"u0_a305\"\r\nTERMUX_IP=\"192.168.43.94\"\r\nTERMUX_PORT=\"8022\"\r\nsshuttle -r $TERMUX_USER@$TERMUX_IP:$TERMUX_PORT 0.0.0.0/0 -l 0.0.0.0:0\r\n```\r\nBut I got this error\r\n\r\n> Environment:\r\n>   USER=u0_a305\r\n>   LOGNAME=u0_a305\r\n>   HOME=/data/data/com.termux/files/home\r\n>   PATH=/data/data/com.termux/files/usr/bin:/data/data/com.termux/files/usr/bin/applets\r\n>   SHELL=/data/data/com.termux/files/usr/bin/login\r\n>   ANDROID_DATA=/data\r\n>   ANDROID_ROOT=/system\r\n>   ANDROID_RUNTIME_ROOT=/apex/com.android.runtime\r\n>   ANDROID_TZDATA_ROOT=/apex/com.android.tzdata\r\n>   BOOTCLASSPATH=/apex/com.android.runtime/javalib/core-oj.jar:/apex/com.android.runtime/javalib/core-libart.jar:/apex/com.android.runtime/javalib/okhttp.jar:/apex/com.android.runtime/javalib/bouncycastl\r\n>   EXTERNAL_STORAGE=/sdcard\r\n>   LANG=en_US.UTF-8\r\n>   PREFIX=/data/data/com.termux/files/usr\r\n>   TMPDIR=/data/data/com.termux/files/usr/tmp\r\n>   SSH_CLIENT=192.168.43.37 50007 8022\r\n>   SSH_CONNECTION=192.168.43.37 50007 192.168.43.94 8022\r\n> assembler.py:3: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n> client: Connected.\r\n> Traceback (most recent call last):\r\n>   File \"<string>\", line 1, in <module>\r\n>   File \"assembler.py\", line 40, in <module>\r\n>   File \"sshuttle.server\", line 297, in main\r\n>   File \"/data/data/com.termux/files/usr/lib/python3.8/socket.py\", line 544, in fromfd\r\n>     return socket(family, type, proto, nfd)\r\n>   File \"/data/data/com.termux/files/usr/lib/python3.8/socket.py\", line 231, in __init__\r\n>     _socket.socket.__init__(self, family, type, proto, fileno)\r\n> OSError: [Errno 88] Socket operation on non-socket\r\n> client: fatal: server died with error code 1\r\n\r\nThe host reports\r\n\r\n```\r\n$ sshd -dD\r\ndebug1: sshd version OpenSSH_8.2, OpenSSL 1.1.1d  10 Sep 2019\r\ndebug1: private host key #0: ssh-rsa SHA256:F8/zXjd/KPuSL7vH+gQbX2nrlN1q/2U0nESv21qcLfA\r\ndebug1: private host key #1: ecdsa-sha2-nistp256 SHA256:Rm0dYNscHgizvVNBjbcxRWjNFxOxWt1/eeYUpsIzphE\r\ndebug1: private host key #2: ssh-ed25519 SHA256:hRrrmhQ3KZLQmkNxDS5UTJWdKx9qNb+1j/qewdGZXyE\r\ndebug1: rexec_argv[0]='/data/data/com.termux/files/usr/bin/sshd'\r\ndebug1: rexec_argv[1]='-dD'\r\ndebug1: Bind to port 8022 on ::.\r\nServer listening on :: port 8022.\r\ndebug1: Bind to port 8022 on 0.0.0.0.\r\nServer listening on 0.0.0.0 port 8022.\r\ndebug1: Server will not fork when running in debugging mode.\r\ndebug1: rexec start in 5 out 5 newsock 5 pipe -1 sock 8\r\ndebug1: sshd version OpenSSH_8.2, OpenSSL 1.1.1d  10 Sep 2019\r\ndebug1: private host key #0: ssh-rsa SHA256:F8/zXjd/KPuSL7vH+gQbX2nrlN1q/2U0nESv21qcLfA\r\ndebug1: private host key #1: ecdsa-sha2-nistp256 SHA256:Rm0dYNscHgizvVNBjbcxRWjNFxOxWt1/eeYUpsIzphE\r\ndebug1: private host key #2: ssh-ed25519 SHA256:hRrrmhQ3KZLQmkNxDS5UTJWdKx9qNb+1j/qewdGZXyE\r\ndebug1: inetd sockets after dupping: 3, 3\r\nConnection from 192.168.43.37 port 50198 on 192.168.43.94 port 8022\r\ndebug1: Local version string SSH-2.0-OpenSSH_8.2\r\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.9\r\ndebug1: match: OpenSSH_7.9 pat OpenSSH* compat 0x04000000\r\ndebug1: list_hostkey_types: rsa-sha2-512,rsa-sha2-256,ssh-rsa,ecdsa-sha2-nistp256,ssh-ed25519\r\ndebug1: SSH2_MSG_KEXINIT sent\r\ndebug1: SSH2_MSG_KEXINIT received\r\ndebug1: kex: algorithm: curve25519-sha256\r\ndebug1: kex: host key algorithm: ecdsa-sha2-nistp256\r\ndebug1: kex: client->server cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug1: kex: server->client cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug1: expecting SSH2_MSG_KEX_ECDH_INIT\r\ndebug1: rekey out after 134217728 blocks\r\ndebug1: SSH2_MSG_NEWKEYS sent\r\ndebug1: Sending SSH2_MSG_EXT_INFO\r\ndebug1: expecting SSH2_MSG_NEWKEYS\r\ndebug1: SSH2_MSG_NEWKEYS received\r\ndebug1: rekey in after 134217728 blocks\r\ndebug1: KEX done\r\ndebug1: userauth-request for user u0_a305 service ssh-connection method none\r\ndebug1: attempt 0 failures 0\r\nFailed none for u0_a305 from 192.168.43.37 port 50198 ssh2\r\ndebug1: userauth-request for user u0_a305 service ssh-connection method publickey\r\ndebug1: attempt 1 failures 0\r\ndebug1: userauth_pubkey: test pkalg rsa-sha2-512 pkblob RSA SHA256:P9nfVZFzzCmS1fFHKlaliOZad55lnMBSCbZ9PW0BoBI\r\ndebug1: temporarily_use_uid: 10305/10305 (e=10305/10305)\r\ndebug1: trying public key file /data/data/com.termux/files/home/.ssh/authorized_keys\r\ndebug1: fd 4 clearing O_NONBLOCK\r\ndebug1: /data/data/com.termux/files/home/.ssh/authorized_keys:1: matching key found: RSA SHA256:P9nfVZFzzCmS1fFHKlaliOZad55lnMBSCbZ9PW0BoBI\r\ndebug1: /data/data/com.termux/files/home/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\nAccepted key RSA SHA256:P9nfVZFzzCmS1fFHKlaliOZad55lnMBSCbZ9PW0BoBI found at /data/data/com.termux/files/home/.ssh/authorized_keys:1\r\ndebug1: restore_uid: (unprivileged)\r\nPostponed publickey for u0_a305 from 192.168.43.37 port 50198 ssh2\r\ndebug1: userauth-request for user u0_a305 service ssh-connection method publickey                                     debug1: attempt 2 failures 0\r\ndebug1: temporarily_use_uid: 10305/10305 (e=10305/10305)   debug1: trying public key file /data/data/com.termux/files/home/.ssh/authorized_keys                                  debug1: fd 4 clearing O_NONBLOCK\r\ndebug1: /data/data/com.termux/files/home/.ssh/authorized_keys:1: matching key found: RSA SHA256:P9nfVZFzzCmS1fFHKlaliOZad55lnMBSCbZ9PW0BoBI                                      debug1: /data/data/com.termux/files/home/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\nAccepted key RSA SHA256:P9nfVZFzzCmS1fFHKlaliOZad55lnMBSCbZ9PW0BoBI found at /data/data/com.termux/files/home/.ssh/authorized_keys:1                                             debug1: restore_uid: (unprivileged)\r\ndebug1: auth_activate_options: setting new authentication options\r\nAccepted publickey for u0_a305 from 192.168.43.37 port 50198 ssh2: RSA SHA256:P9nfVZFzzCmS1fFHKlaliOZad55lnMBSCbZ9PW0BoBI                                                        debug1: active: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding                              debug1: Entering interactive session for SSH2.\r\ndebug1: server_init_dispatch                               debug1: server_input_channel_open: ctype session rchan 0 win 2097152 max 32768\r\ndebug1: input_session_request\r\ndebug1: channel 0: new [server-session]\r\ndebug1: session_new: session 0                             debug1: session_open: channel 0\r\ndebug1: session_open: session 0: link with channel 0\r\ndebug1: server_input_channel_open: confirm session\r\ndebug1: server_input_global_request: rtype no-more-sessions@openssh.com want_reply 0\r\ndebug1: server_input_channel_req: channel 0 request env reply 0\r\ndebug1: session_by_channel: session 0 channel 0            debug1: session_input_channel_req: session 0 req env\r\ndebug1: server_input_channel_req: channel 0 request env reply 0                                                       debug1: session_by_channel: session 0 channel 0\r\ndebug1: session_input_channel_req: session 0 req env\r\ndebug1: server_input_channel_req: channel 0 request env reply 0\r\ndebug1: session_by_channel: session 0 channel 0            debug1: session_input_channel_req: session 0 req env\r\ndebug1: server_input_channel_req: channel 0 request exec reply 1\r\ndebug1: session_by_channel: session 0 channel 0            debug1: session_input_channel_req: session 0 req exec\r\nStarting session: command for u0_a305 from 192.168.43.37 port 50198 id 0\r\ndebug1: Received SIGCHLD.                                  debug1: session_by_pid: pid 23153\r\ndebug1: session_exit_message: session 0 channel 0 pid 23153\r\ndebug1: session_exit_message: release channel 0\r\nReceived disconnect from 192.168.43.37 port 50198:11: disconnected by user\r\nDisconnected from user u0_a305 192.168.43.37 port 50198\r\ndebug1: do_cleanup\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/398", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/398/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/398/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/398", "id": 575411970, "node_id": "MDU6SXNzdWU1NzU0MTE5NzA=", "number": 398, "title": "iptables operation not supported", "user": {"login": "chrissound", "id": 1499652, "node_id": "MDQ6VXNlcjE0OTk2NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1499652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrissound", "html_url": "https://github.com/chrissound", "followers_url": "https://api.github.com/users/chrissound/followers", "following_url": "https://api.github.com/users/chrissound/following{/other_user}", "gists_url": "https://api.github.com/users/chrissound/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrissound/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrissound/subscriptions", "organizations_url": "https://api.github.com/users/chrissound/orgs", "repos_url": "https://api.github.com/users/chrissound/repos", "events_url": "https://api.github.com/users/chrissound/events{/privacy}", "received_events_url": "https://api.github.com/users/chrissound/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-04T13:43:54Z", "updated_at": "2020-03-06T19:15:49Z", "closed_at": "2020-03-06T19:15:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Apologies this might not be strictly relevant, but just in case someone else runs into this error I'm posting it.\r\n\r\nI'm trying to run this within a docker container within Kubernetes though hitting an error of `iptables: Operation not supported.` \r\n\r\nI've set the container to be a privliged + NET_ADMIN + NET_RAW capabilities.\r\n\r\n```\r\noot@chris-sshuttle-k8stest:~# sshuttle -vvv --ssh-cmd \"ssh -i k8s-ssh\" -r root@trycatchchris.co.uk 0.0.0.0/32\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.7.6\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=5, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.7.6\r\nc : connecting to server...\r\nc : executing: ['ssh', '-i', 'k8s-ssh', 'root@trycatchchris.co.uk', '--', 'exec /bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=3; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1106), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\nc :  > channel=0 cmd=PING len=7 (fullness=0)\r\n-c:3: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\nserver: assembling 'sshuttle' (7 bytes)\r\nserver: assembling 'sshuttle.cmdline_options' (66 bytes)\r\nserver: assembling 'sshuttle.helpers' (944 bytes)\r\nserver: assembling 'sshuttle.ssnet' (5653 bytes)\r\nserver: assembling 'sshuttle.hostwatch' (2386 bytes)\r\nserver: assembling 'sshuttle.server' (3830 bytes)\r\nStarting server with Python version 3.7.5\r\n s: latency control setting = True\r\n s:  > channel=0 cmd=PING len=7 (fullness=0)\r\n s: auto-nets:False\r\n s:  > channel=0 cmd=ROUTES len=0 (fullness=7)\r\nc : Connected.\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=7/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\nc : Waiting: 2 r=[5, 8] w=[8] x=[] (fullness=7/0)\r\nc :   Ready: 2 r=[8] w=[8] x=[]\r\nc : <  channel=0 cmd=PING len=7\r\nc :  > channel=0 cmd=PONG len=7 (fullness=7)\r\nc : mux wrote: 15/15\r\nc : mux wrote: 15/15\r\nc : Waiting: 2 r=[5, 8] w=[] x=[] (fullness=14/0)\r\n s: mux wrote: 15/15\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=7/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\n s: mux wrote: 8/8\r\n s: Waiting: 1 r=[4] w=[] x=[] (fullness=7/0)\r\nc :   Ready: 2 r=[8] w=[] x=[]\r\nc : <  channel=0 cmd=ROUTES len=0\r\nfirewall manager: Got subnets: [(2, 32, False, '0.0.0.0', 0, 0), (2, 32, True, '127.0.0.1', 0, 0)]\r\nfirewall manager: Got nslist: []\r\nfirewall manager: Got ports: 0,12300,0,0\r\nfirewall manager: Got udp: False, user: None\r\nfirewall manager: setting up.\r\nfirewall manager: setting up IPv4.\r\n s:   Ready: 1 r=[4] w=[] x=[]\r\n s: <  channel=0 cmd=PING len=7\r\n s:  > channel=0 cmd=PONG len=7 (fullness=7)\r\n s: <  channel=0 cmd=PONG len=7\r\n s: received PING response\r\n s: mux wrote: 15/15\r\n s: Waiting: 1 r=[4] w=[] x=[] (fullness=0/0)\r\niptables: Operation not supported.\r\nfirewall manager: undoing changes.\r\nfirewall manager: undoing IPv4 changes.\r\niptables: Operation not supported.\r\nfirewall manager: Error trying to undo IPv4 firewall.\r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/linux.py\", line 28, in ipt_chain_exists\r\nfirewall manager: --->     output = ssubprocess.check_output(argv, env=env)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/subprocess.py\", line 411, in check_output\r\nfirewall manager: --->     **kwargs).stdout\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/subprocess.py\", line 512, in run\r\nfirewall manager: --->     output=stdout, stderr=stderr)\r\nfirewall manager: ---> subprocess.CalledProcessError: Command '['iptables', '-t', 'nat', '-nL']' returned non-zero exit status 1.\r\nfirewall manager: ---> \r\nfirewall manager: ---> During handling of the above exception, another exception occurred:\r\nfirewall manager: ---> \r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/firewall.py\", line 219, in main\r\nfirewall manager: --->     user)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/methods/nat.py\", line 39, in setup_firewall\r\nfirewall manager: --->     self.restore_firewall(port, family, udp, user)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/methods/nat.py\", line 99, in restore_firewall\r\nfirewall manager: --->     if ipt_chain_exists(family, table, chain):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/linux.py\", line 33, in ipt_chain_exists\r\nfirewall manager: --->     raise Fatal('%r returned %d' % (argv, e.returncode))\r\nfirewall manager: ---> sshuttle.helpers.Fatal: ['iptables', '-t', 'nat', '-nL'] returned 1\r\nfirewall manager: ---> \r\nfirewall manager: ---> During handling of the above exception, another exception occurred:\r\nfirewall manager: ---> \r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/linux.py\", line 28, in ipt_chain_exists\r\nfirewall manager: --->     output = ssubprocess.check_output(argv, env=env)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/subprocess.py\", line 411, in check_output\r\nfirewall manager: --->     **kwargs).stdout\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/subprocess.py\", line 512, in run\r\nfirewall manager: --->     output=stdout, stderr=stderr)\r\nfirewall manager: ---> subprocess.CalledProcessError: Command '['iptables', '-t', 'nat', '-nL']' returned non-zero exit status 1.\r\nfirewall manager: ---> \r\nfirewall manager: ---> During handling of the above exception, another exception occurred:\r\nfirewall manager: ---> \r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/firewall.py\", line 270, in main\r\nfirewall manager: --->     method.restore_firewall(port_v4, socket.AF_INET, udp, user)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/methods/nat.py\", line 99, in restore_firewall\r\nfirewall manager: --->     if ipt_chain_exists(family, table, chain):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/linux.py\", line 33, in ipt_chain_exists\r\nfirewall manager: --->     raise Fatal('%r returned %d' % (argv, e.returncode))\r\nfirewall manager: ---> sshuttle.helpers.Fatal: ['iptables', '-t', 'nat', '-nL'] returned 1\r\nfirewall manager: undoing /etc/hosts changes.\r\nfirewall manager: Error trying to undo /etc/hosts changes.\r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/linux.py\", line 28, in ipt_chain_exists\r\nfirewall manager: --->     output = ssubprocess.check_output(argv, env=env)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/subprocess.py\", line 411, in check_output\r\nfirewall manager: --->     **kwargs).stdout\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/subprocess.py\", line 512, in run\r\nfirewall manager: --->     output=stdout, stderr=stderr)\r\nfirewall manager: ---> subprocess.CalledProcessError: Command '['iptables', '-t', 'nat', '-nL']' returned non-zero exit status 1.\r\nfirewall manager: ---> \r\nfirewall manager: ---> During handling of the above exception, another exception occurred:\r\nfirewall manager: ---> \r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/firewall.py\", line 219, in main\r\nfirewall manager: --->     user)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/methods/nat.py\", line 39, in setup_firewall\r\nfirewall manager: --->     self.restore_firewall(port, family, udp, user)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/methods/nat.py\", line 99, in restore_firewall\r\nfirewall manager: --->     if ipt_chain_exists(family, table, chain):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/linux.py\", line 33, in ipt_chain_exists\r\nfirewall manager: --->     raise Fatal('%r returned %d' % (argv, e.returncode))\r\nfirewall manager: ---> sshuttle.helpers.Fatal: ['iptables', '-t', 'nat', '-nL'] returned 1\r\nfirewall manager: ---> \r\nfirewall manager: ---> During handling of the above exception, another exception occurred:\r\nfirewall manager: ---> \r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/firewall.py\", line 282, in main\r\nfirewall manager: --->     restore_etc_hosts(port_v6 or port_v4)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/firewall.py\", line 51, in restore_etc_hosts\r\nfirewall manager: --->     rewrite_etc_hosts({}, port)\r\nfirewall manager: --->   File \"/usr/local/lib/python3.7/site-packages/sshuttle/firewall.py\", line 30, in rewrite_etc_hosts\r\nfirewall manager: --->     os.link(HOSTSFILE, BAKFILE)\r\nfirewall manager: ---> OSError: [Errno 18] Invalid cross-device link: '/etc/hosts' -> '/etc/hosts.sbak'\r\nfatal: ['iptables', '-t', 'nat', '-nL'] returned 1\r\nc : fatal: cleanup: ['/usr/local/bin/python', '/usr/local/bin/sshuttle', '-v', '-v', '-v', '--method', 'auto', '--firewall'] returned 99\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/397", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/397/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/397/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/397/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/397", "id": 562130302, "node_id": "MDU6SXNzdWU1NjIxMzAzMDI=", "number": 397, "title": "not routing 192.168.x.x", "user": {"login": "DeoLeung", "id": 3764720, "node_id": "MDQ6VXNlcjM3NjQ3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3764720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeoLeung", "html_url": "https://github.com/DeoLeung", "followers_url": "https://api.github.com/users/DeoLeung/followers", "following_url": "https://api.github.com/users/DeoLeung/following{/other_user}", "gists_url": "https://api.github.com/users/DeoLeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeoLeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeoLeung/subscriptions", "organizations_url": "https://api.github.com/users/DeoLeung/orgs", "repos_url": "https://api.github.com/users/DeoLeung/repos", "events_url": "https://api.github.com/users/DeoLeung/events{/privacy}", "received_events_url": "https://api.github.com/users/DeoLeung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-09T06:25:22Z", "updated_at": "2020-02-09T06:43:48Z", "closed_at": "2020-02-09T06:43:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi I'm using a brew installed version of `0.78.5` and start as `sshuttle -v -r deo@host:port 0/0`\r\n\r\nit used to be working fine that forwarding all my traffic.\r\n\r\nbut today it only forward internet traffic but not intranet on (e.g. 192.168.x.x), is there a way that I can look into what happend?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/396", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/396/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/396/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/396/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/396", "id": 562075121, "node_id": "MDU6SXNzdWU1NjIwNzUxMjE=", "number": 396, "title": "docs site not updated", "user": {"login": "rjharmon", "id": 42002, "node_id": "MDQ6VXNlcjQyMDAy", "avatar_url": "https://avatars3.githubusercontent.com/u/42002?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjharmon", "html_url": "https://github.com/rjharmon", "followers_url": "https://api.github.com/users/rjharmon/followers", "following_url": "https://api.github.com/users/rjharmon/following{/other_user}", "gists_url": "https://api.github.com/users/rjharmon/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjharmon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjharmon/subscriptions", "organizations_url": "https://api.github.com/users/rjharmon/orgs", "repos_url": "https://api.github.com/users/rjharmon/repos", "events_url": "https://api.github.com/users/rjharmon/events{/privacy}", "received_events_url": "https://api.github.com/users/rjharmon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-08T20:41:13Z", "updated_at": "2020-02-09T23:55:01Z", "closed_at": "2020-02-09T08:48:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "readthedocs isn't updated with any recent release\r\n\r\nhttps://sshuttle.readthedocs.io/en/latest/changes.html\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/394", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/394/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/394/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/394/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/394", "id": 560676379, "node_id": "MDU6SXNzdWU1NjA2NzYzNzk=", "number": 394, "title": "Daemon usage when tunnel box prompts for a dynamic password", "user": {"login": "darakian", "id": 3607524, "node_id": "MDQ6VXNlcjM2MDc1MjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/3607524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darakian", "html_url": "https://github.com/darakian", "followers_url": "https://api.github.com/users/darakian/followers", "following_url": "https://api.github.com/users/darakian/following{/other_user}", "gists_url": "https://api.github.com/users/darakian/gists{/gist_id}", "starred_url": "https://api.github.com/users/darakian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darakian/subscriptions", "organizations_url": "https://api.github.com/users/darakian/orgs", "repos_url": "https://api.github.com/users/darakian/repos", "events_url": "https://api.github.com/users/darakian/events{/privacy}", "received_events_url": "https://api.github.com/users/darakian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-05T22:51:55Z", "updated_at": "2020-02-06T19:39:18Z", "closed_at": "2020-02-06T19:39:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey all,\r\n\r\nFirst off thanks for the tool. I'm implementing a dynamic password for my tunnel box and I'm wondering if/how I can set this up with sshuttle. At the moment I'm using a command of the form\r\n```\r\nsshuttle -vr $USER@tunnel_host --seed-hosts some.domains --pidfile /foo/tunnel.pid ip_range/mask\r\n```\r\nand while this works fine with ssh keys set via my ssg-agent, I'm getting what looks like success when I attempt the password prompt, but all ssh connections to my ip_range hang.\r\n\r\nHere's some output when adding `-vv` to my command above \r\n```\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.1\r\nfirewall manager: ready method name pf.\r\nIPv6 enabled: True\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('::1', 12300, 0, 0).\r\nTCP redirector listening with <socket.socket fd=5, family=AddressFamily.AF_INET6, type=SocketKind.SOCK_STREAM, proto=0, laddr=('::1', 12300, 0, 0)>.\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.8.1\r\nc : connecting to server...\r\nc : executing: ['ssh', 'user@host', '--', 'exec /bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=3; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1106), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\n```\r\n\r\nIdeally I'd expect to be prompted for the password on sshuttle launch. Is there something I'm missing?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/390", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/390/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/390/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/390/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/390", "id": 549683393, "node_id": "MDU6SXNzdWU1NDk2ODMzOTM=", "number": 390, "title": "Status on implementing a socks proxy?", "user": {"login": "gidoBOSSftw5731", "id": 13257145, "node_id": "MDQ6VXNlcjEzMjU3MTQ1", "avatar_url": "https://avatars3.githubusercontent.com/u/13257145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gidoBOSSftw5731", "html_url": "https://github.com/gidoBOSSftw5731", "followers_url": "https://api.github.com/users/gidoBOSSftw5731/followers", "following_url": "https://api.github.com/users/gidoBOSSftw5731/following{/other_user}", "gists_url": "https://api.github.com/users/gidoBOSSftw5731/gists{/gist_id}", "starred_url": "https://api.github.com/users/gidoBOSSftw5731/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gidoBOSSftw5731/subscriptions", "organizations_url": "https://api.github.com/users/gidoBOSSftw5731/orgs", "repos_url": "https://api.github.com/users/gidoBOSSftw5731/repos", "events_url": "https://api.github.com/users/gidoBOSSftw5731/events{/privacy}", "received_events_url": "https://api.github.com/users/gidoBOSSftw5731/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-14T16:34:44Z", "updated_at": "2020-02-07T12:45:46Z", "closed_at": "2020-01-27T22:58:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to use this to help bypass firewalls, where right now I use ssh tunnels which are very slow. Is it possible to convert this into a socks or http proxy? Also, what's the UDP support?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/388", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/388/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/388/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/388/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/388", "id": 546356382, "node_id": "MDU6SXNzdWU1NDYzNTYzODI=", "number": 388, "title": "sshutle extremely slow", "user": {"login": "matiwinnetou", "id": 335933, "node_id": "MDQ6VXNlcjMzNTkzMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/335933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matiwinnetou", "html_url": "https://github.com/matiwinnetou", "followers_url": "https://api.github.com/users/matiwinnetou/followers", "following_url": "https://api.github.com/users/matiwinnetou/following{/other_user}", "gists_url": "https://api.github.com/users/matiwinnetou/gists{/gist_id}", "starred_url": "https://api.github.com/users/matiwinnetou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matiwinnetou/subscriptions", "organizations_url": "https://api.github.com/users/matiwinnetou/orgs", "repos_url": "https://api.github.com/users/matiwinnetou/repos", "events_url": "https://api.github.com/users/matiwinnetou/events{/privacy}", "received_events_url": "https://api.github.com/users/matiwinnetou/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-07T15:45:19Z", "updated_at": "2020-01-07T16:05:38Z", "closed_at": "2020-01-07T16:05:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nsudo dtruss sshuttle -H --dns -r pi@server.com 192.168.0.0/8\r\n```\r\n\r\nLooks like app goes into some loop and eventually succeeds but this takes a long time, here output from dtruss:\r\n\r\n```\r\nmmap(0x0, 0x40000, 0x3, 0x1002, 0xFFFFFFFFFFFFFFFF, 0x0)\t\t = 0x105D71000 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/bin\\0\", 0x7FFEEA537950, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8\\0\", 0x7FFEEA537950, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload\\0\", 0x7FFEEA537950, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_bz2.cpython-38-darwin.so\\0\", 0x7FFEEA537530, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_bz2.cpython-38-darwin.so\\0\", 0x7FFEEA536870, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_bz2.cpython-38-darwin.so\\0\", 0x7FFEEA536CB0, 0x0)\t\t = 0 0\r\nopen(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_bz2.cpython-38-darwin.so\\0\", 0x0, 0x0)\t\t = 3 0\r\ndtrace: error on enabled probe ID 2189 (ID 461: syscall::pread:return): invalid kernel access in action #12 at DIF offset 20\r\nfcntl(0x3, 0x62, 0x7FFEEA52E440)\t\t = 0 0\r\nmmap(0x105DB1000, 0x3000, 0x5, 0x12, 0x3, 0x0)\t\t = 0x105DB1000 0\r\nmmap(0x105DB4000, 0x1000, 0x3, 0x12, 0x3, 0x3000)\t\t = 0x105DB4000 0\r\nmmap(0x105DB5000, 0x1358, 0x1, 0x12, 0x3, 0x4000)\t\t = 0x105DB5000 0\r\nclose(0x3)\t\t = 0 0\r\nstat64(\"/usr/lib/libbz2.1.0.dylib\\0\", 0x7FFEEA536990, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/bin\\0\", 0x7FFEEA5389E0, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8\\0\", 0x7FFEEA5389E0, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload\\0\", 0x7FFEEA5389E0, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/python@3.8/3.8.1/Frameworks/Python.framework/Versions/3.8/lib/python3.8\\0\", 0x7FFEEA5389E0, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/python@3.8/3.8.1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/lzma.py\\0\", 0x7FFEEA5385C0, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/python@3.8/3.8.1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/lzma.py\\0\", 0x7FFEEA538EC0, 0x0)\t\t = 0 0\r\nopen(\"/usr/local/Cellar/python@3.8/3.8.1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/__pycache__/lzma.cpython-38.pyc\\0\", 0x1000000, 0x1B6)\t\t = 3 0\r\nfstat64(0x3, 0x7FFEEA538C58, 0x0)\t\t = 0 0\r\nioctl(0x3, 0x4004667A, 0x7FFEEA538D24)\t\t = -1 Err#25\r\nioctl(0x3, 0x40487413, 0x7FFEEA538D28)\t\t = -1 Err#25\r\nlseek(0x3, 0x0, 0x1)\t\t = 0 0\r\nlseek(0x3, 0x0, 0x1)\t\t = 0 0\r\nfstat64(0x3, 0x7FFEEA5390D0, 0x0)\t\t = 0 0\r\ndtrace: error on enabled probe ID 2174 (ID 161: syscall::read:return): invalid kernel access in action #12 at DIF offset 68\r\ndtrace: error on enabled probe ID 2174 (ID 161: syscall::read:return): invalid kernel access in action #12 at DIF offset 68\r\nclose(0x3)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/bin\\0\", 0x7FFEEA537950, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8\\0\", 0x7FFEEA537950, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload\\0\", 0x7FFEEA537950, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_lzma.cpython-38-darwin.so\\0\", 0x7FFEEA537530, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_lzma.cpython-38-darwin.so\\0\", 0x7FFEEA536870, 0x0)\t\t = 0 0\r\nstat64(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_lzma.cpython-38-darwin.so\\0\", 0x7FFEEA536CB0, 0x0)\t\t = 0 0\r\nopen(\"/usr/local/Cellar/sshuttle/0.78.5_1/libexec/lib/python3.8/lib-dynload/_lzma.cpython-38-darwin.so\\0\", 0x0, 0x0)\t\t = 3 0\r\ndtrace: error on enabled probe ID 2189 (ID 461: syscall::pread:return): invalid kernel access in action #12 at DIF offset 20\r\nfcntl(0x3, 0x62, 0x7FFEEA52E440)\t\t = 0 0\r\n```\r\n\r\nany ideas what this could be?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/384", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/384/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/384/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/384/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/384", "id": 535602810, "node_id": "MDU6SXNzdWU1MzU2MDI4MTA=", "number": 384, "title": "sshuttle need sudo, but I cannot have my ssh key in sudo, how to fix this  ? ", "user": {"login": "ttpro1995", "id": 7196876, "node_id": "MDQ6VXNlcjcxOTY4NzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/7196876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ttpro1995", "html_url": "https://github.com/ttpro1995", "followers_url": "https://api.github.com/users/ttpro1995/followers", "following_url": "https://api.github.com/users/ttpro1995/following{/other_user}", "gists_url": "https://api.github.com/users/ttpro1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/ttpro1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ttpro1995/subscriptions", "organizations_url": "https://api.github.com/users/ttpro1995/orgs", "repos_url": "https://api.github.com/users/ttpro1995/repos", "events_url": "https://api.github.com/users/ttpro1995/events{/privacy}", "received_events_url": "https://api.github.com/users/ttpro1995/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-10T09:32:00Z", "updated_at": "2019-12-10T21:19:36Z", "closed_at": "2019-12-10T21:19:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "The command to run \r\n\r\n`sudo sshuttle -r username@ip 0/0 -vv`\r\n\r\nHowever, I get `Permission denied (publickey) `\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/383", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/383/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/383/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/383/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/383", "id": 529354207, "node_id": "MDU6SXNzdWU1MjkzNTQyMDc=", "number": 383, "title": "Reverse connection", "user": {"login": "dsolstad", "id": 346888, "node_id": "MDQ6VXNlcjM0Njg4OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/346888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsolstad", "html_url": "https://github.com/dsolstad", "followers_url": "https://api.github.com/users/dsolstad/followers", "following_url": "https://api.github.com/users/dsolstad/following{/other_user}", "gists_url": "https://api.github.com/users/dsolstad/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsolstad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsolstad/subscriptions", "organizations_url": "https://api.github.com/users/dsolstad/orgs", "repos_url": "https://api.github.com/users/dsolstad/repos", "events_url": "https://api.github.com/users/dsolstad/events{/privacy}", "received_events_url": "https://api.github.com/users/dsolstad/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-27T13:42:48Z", "updated_at": "2019-11-27T21:10:25Z", "closed_at": "2019-11-27T21:10:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to use sshuttle on a reverse connection now, or is this a planned feature?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/382", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/382/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/382/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/382/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/382", "id": 528186566, "node_id": "MDU6SXNzdWU1MjgxODY1NjY=", "number": 382, "title": "unable to ssh tunnel to server while sshuttle is running", "user": {"login": "farshf", "id": 8484291, "node_id": "MDQ6VXNlcjg0ODQyOTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/8484291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farshf", "html_url": "https://github.com/farshf", "followers_url": "https://api.github.com/users/farshf/followers", "following_url": "https://api.github.com/users/farshf/following{/other_user}", "gists_url": "https://api.github.com/users/farshf/gists{/gist_id}", "starred_url": "https://api.github.com/users/farshf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farshf/subscriptions", "organizations_url": "https://api.github.com/users/farshf/orgs", "repos_url": "https://api.github.com/users/farshf/repos", "events_url": "https://api.github.com/users/farshf/events{/privacy}", "received_events_url": "https://api.github.com/users/farshf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-25T16:10:25Z", "updated_at": "2019-12-01T07:46:59Z", "closed_at": "2019-12-01T07:46:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\nI have serverA and serverB, I ssh tunnel to serverA and then run:\r\n`sshuttle --dns -r root@serverB 0/0 -x serverB`\r\nAnd all my traffic passes through serverB, just as I intend to.\r\nProblem is that after running sshuttle on serverA, it refuses to accept new ssh tunnel connection on port 22, previously connected sessions work fine but I want to be able to ssh tunnel to serverA while it runs shuttle to serverB\r\nHow do I do that? please help me!\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/381", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/381/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/381/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/381", "id": 527001834, "node_id": "MDU6SXNzdWU1MjcwMDE4MzQ=", "number": 381, "title": "Fails to connect to endpoints with Python 3.8", "user": {"login": "fredronnv", "id": 5538536, "node_id": "MDQ6VXNlcjU1Mzg1MzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/5538536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredronnv", "html_url": "https://github.com/fredronnv", "followers_url": "https://api.github.com/users/fredronnv/followers", "following_url": "https://api.github.com/users/fredronnv/following{/other_user}", "gists_url": "https://api.github.com/users/fredronnv/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredronnv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredronnv/subscriptions", "organizations_url": "https://api.github.com/users/fredronnv/orgs", "repos_url": "https://api.github.com/users/fredronnv/repos", "events_url": "https://api.github.com/users/fredronnv/events{/privacy}", "received_events_url": "https://api.github.com/users/fredronnv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2019-11-22T05:50:52Z", "updated_at": "2020-07-14T07:39:15Z", "closed_at": "2020-05-28T21:48:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Endpoints that have been updated with python 3.8 seem to cause issues with sshuttle.\r\n\r\n```\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.0\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nStarting client with Python version 3.8.0\r\nc : connecting to server...\r\nassembler.py:3: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\nStarting server with Python version 3.8.0\r\n s: latency control setting = True\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 38, in <module>\r\n  File \"sshuttle.server\", line 298, in main\r\n  File \"/usr/lib/python3.8/socket.py\", line 544, in fromfd\r\n    return socket(family, type, proto, nfd)\r\n  File \"/usr/lib/python3.8/socket.py\", line 231, in __init__\r\n    _socket.socket.__init__(self, family, type, proto, fileno)\r\nOSError: [Errno 88] Socket operation on non-socket\r\nc : Connected.\r\nc : fatal: server died with error code 1\r\n```\r\n\r\nOlder python endpoinds are fine:\r\n```\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.8.0\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nStarting client with Python version 3.8.0\r\nc : connecting to server...\r\nStarting server with Python version 2.6.6\r\n s: latency control setting = True\r\nc : Connected.\r\n s: auto-nets:False\r\nfirewall manager: setting up.\r\n[...]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/377", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/377/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/377/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/377/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/377", "id": 514604957, "node_id": "MDU6SXNzdWU1MTQ2MDQ5NTc=", "number": 377, "title": "hostwatch assumes ASCII-only locale", "user": {"login": "BenWiederhake", "id": 2690845, "node_id": "MDQ6VXNlcjI2OTA4NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2690845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BenWiederhake", "html_url": "https://github.com/BenWiederhake", "followers_url": "https://api.github.com/users/BenWiederhake/followers", "following_url": "https://api.github.com/users/BenWiederhake/following{/other_user}", "gists_url": "https://api.github.com/users/BenWiederhake/gists{/gist_id}", "starred_url": "https://api.github.com/users/BenWiederhake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BenWiederhake/subscriptions", "organizations_url": "https://api.github.com/users/BenWiederhake/orgs", "repos_url": "https://api.github.com/users/BenWiederhake/repos", "events_url": "https://api.github.com/users/BenWiederhake/events{/privacy}", "received_events_url": "https://api.github.com/users/BenWiederhake/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-30T11:49:11Z", "updated_at": "2019-11-09T00:28:33Z", "closed_at": "2019-11-09T00:28:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This sounds like the same bug as #110 and #93, but I'm using version 0.78.5, and those issues claim it has been resolved in 0.78.1 and \"0.78.1.dev6<+ng1d64879\" (which I guess is older than 0.78.5).\r\n\r\nHere's a part of the log:\r\n\r\n    firewall manager: setting up /etc/hosts.\r\n     s: mux wrote: 30/30\r\n     s: Waiting: 2 r=[4, 7] w=[] x=[] (fullness=22/0)\r\n    HH: <    127.0.1.1\r\n    HH:  > hosts\r\n    HH: <    127.0.0.1 ['localhost']\r\n    HH: <    127.0.1.1 ['myremote']\r\n    HH: <    192.168.0.200 ['otherpc']\r\n    HH:  > netstat\r\n    HH: Traceback (most recent call last):\r\n    --->   File \"sshuttle.server\", line 144, in start_hostwatch\r\n    --->   File \"sshuttle.hostwatch\", line 294, in hw_main\r\n    --->   File \"sshuttle.hostwatch\", line 131, in _check_netstat\r\n    ---> UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 552: ordinal not in range(128)\r\n     s:   Ready: 2 r=[7] w=[] x=[]\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"assembler.py\", line 39, in <module>\r\n      File \"sshuttle.server\", line 403, in main\r\n      File \"sshuttle.ssnet\", line 598, in runonce\r\n      File \"sshuttle.server\", line 334, in hostwatch_ready\r\n    sshuttle.helpers.Fatal: hostwatch process died\r\n\r\nAnd here's the first 570 (>522) bytes of output of `ssh myremote netstat`:\r\n\r\n    Aktive Internetverbindungen (ohne Server)\r\n    Proto Recv-Q Send-Q Local Address           Foreign Address         State      \r\n    tcp        0      0 192.168.0.2:22001       xxxxxxxxxxxxxxxxxxxxxxx VERBUNDEN  \r\n    tcp        0    236 192.168.0.2:1509        xxxxxxxxxxxxxxxxxxxxxxx VERBUNDEN  \r\n    tcp        0      0 192.168.0.2:50796       xxxxxxxxxxxxxxxxxxxxxxx VERBUNDEN  \r\n    tcp        0      0 192.168.0.2:1509        xxxxxxxxxxxxxxxxxxxxxxx VERBUNDEN  \r\n    tcp        0      0 192.168.0.2:1509        xxxxxxxxxxxxxxxxxxxxxxx VERBUNDEN  \r\n    Aktive Sockets in der UNIX-Dom\u00e4ne (ohne Server) \r\n\r\nNote the non-ASCII character `\u00e4` in `Dom\u00e4ne`.\r\n\r\nMaybe change the invocation to something like `LC_ALL=C netstat`, wouldn't this fix the problem?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/370", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/370/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/370/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/370/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/370", "id": 509410234, "node_id": "MDU6SXNzdWU1MDk0MTAyMzQ=", "number": 370, "title": "About safety", "user": {"login": "ohh-haolin", "id": 48576354, "node_id": "MDQ6VXNlcjQ4NTc2MzU0", "avatar_url": "https://avatars2.githubusercontent.com/u/48576354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ohh-haolin", "html_url": "https://github.com/ohh-haolin", "followers_url": "https://api.github.com/users/ohh-haolin/followers", "following_url": "https://api.github.com/users/ohh-haolin/following{/other_user}", "gists_url": "https://api.github.com/users/ohh-haolin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ohh-haolin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ohh-haolin/subscriptions", "organizations_url": "https://api.github.com/users/ohh-haolin/orgs", "repos_url": "https://api.github.com/users/ohh-haolin/repos", "events_url": "https://api.github.com/users/ohh-haolin/events{/privacy}", "received_events_url": "https://api.github.com/users/ohh-haolin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-19T07:35:36Z", "updated_at": "2019-11-28T03:43:53Z", "closed_at": "2019-11-28T03:43:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been using this tools for a while, and I think it's great.\r\nI know it based on SSH tunnel. However, I wonder whether the TCP stream is encrypted by SSH.\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/369", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/369/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/369/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/369/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/369", "id": 507186508, "node_id": "MDU6SXNzdWU1MDcxODY1MDg=", "number": 369, "title": "Does it leave any trace?", "user": {"login": "ftbarata", "id": 20630844, "node_id": "MDQ6VXNlcjIwNjMwODQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/20630844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftbarata", "html_url": "https://github.com/ftbarata", "followers_url": "https://api.github.com/users/ftbarata/followers", "following_url": "https://api.github.com/users/ftbarata/following{/other_user}", "gists_url": "https://api.github.com/users/ftbarata/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftbarata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftbarata/subscriptions", "organizations_url": "https://api.github.com/users/ftbarata/orgs", "repos_url": "https://api.github.com/users/ftbarata/repos", "events_url": "https://api.github.com/users/ftbarata/events{/privacy}", "received_events_url": "https://api.github.com/users/ftbarata/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-15T11:36:24Z", "updated_at": "2019-10-15T17:34:03Z", "closed_at": "2019-10-15T17:34:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I work on a company where everything is monitored. The users are forced to use non-transparent proxy and all outgoing ports are blocked except port 80 and 443, but the servers network don't have any outgoing filtered port, and I have access to the servers.  So, sometimes I need to access my vps and I'm using the sshuttle to be able connect to my vps via ssh.\r\nI ran the \"last\" command on the local server here and it seems that sshuttle does not leave login log, which is good.\r\nSo, I'd like to know if sshuttle leaves any kind of trace, except obviously the network traffic, that could be easily got with tcpdump for example.\r\nIf so, what trail does it leave?\r\nThanks in advance", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/367", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/367/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/367/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/367", "id": 506132635, "node_id": "MDU6SXNzdWU1MDYxMzI2MzU=", "number": 367, "title": "sshuttle doesn't add ports to tproxy udp MARK rules", "user": {"login": "normanr", "id": 14849, "node_id": "MDQ6VXNlcjE0ODQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/14849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/normanr", "html_url": "https://github.com/normanr", "followers_url": "https://api.github.com/users/normanr/followers", "following_url": "https://api.github.com/users/normanr/following{/other_user}", "gists_url": "https://api.github.com/users/normanr/gists{/gist_id}", "starred_url": "https://api.github.com/users/normanr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/normanr/subscriptions", "organizations_url": "https://api.github.com/users/normanr/orgs", "repos_url": "https://api.github.com/users/normanr/repos", "events_url": "https://api.github.com/users/normanr/events{/privacy}", "received_events_url": "https://api.github.com/users/normanr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-12T04:58:32Z", "updated_at": "2019-10-13T00:45:54Z", "closed_at": "2019-10-13T00:45:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n$ sshuttle --method=tproxy <remote-ip>:7777\r\n>> iptables -t mangle -A sshuttle-m-12300 -j MARK --set-mark 1 --dest <remote-ip>/32 -m tcp -p tcp --dport 7777:7777\r\n>> iptables -t mangle -A sshuttle-t-12300 -j TPROXY --tproxy-mark 0x1/0x1 --dest <remote-ip>/32 -m tcp -p tcp --dport 7777:7777 --on-port 12300\r\n>> iptables -t mangle -A sshuttle-m-12300 -j MARK --set-mark 1 --dest <remote-ip>/32 -m udp -p udp\r\n>> iptables -t mangle -A sshuttle-t-12300 -j TPROXY --tproxy-mark 0x1/0x1 --dest <remote-ip>/32 -m udp -p udp --dport 7777:7777 --on-port 12300\r\n```\r\n\r\nNotice how line 3 doesn't end with ` --dport 7777:7777`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/361", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/361/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/361/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/361/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/361", "id": 496673609, "node_id": "MDU6SXNzdWU0OTY2NzM2MDk=", "number": 361, "title": "Will sshuttle support Android?", "user": {"login": "unl89", "id": 53639555, "node_id": "MDQ6VXNlcjUzNjM5NTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/53639555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unl89", "html_url": "https://github.com/unl89", "followers_url": "https://api.github.com/users/unl89/followers", "following_url": "https://api.github.com/users/unl89/following{/other_user}", "gists_url": "https://api.github.com/users/unl89/gists{/gist_id}", "starred_url": "https://api.github.com/users/unl89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unl89/subscriptions", "organizations_url": "https://api.github.com/users/unl89/orgs", "repos_url": "https://api.github.com/users/unl89/repos", "events_url": "https://api.github.com/users/unl89/events{/privacy}", "received_events_url": "https://api.github.com/users/unl89/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-21T16:22:04Z", "updated_at": "2019-09-22T00:31:03Z", "closed_at": "2019-09-22T00:31:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/357", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/357/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/357/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/357/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/357", "id": 493437803, "node_id": "MDU6SXNzdWU0OTM0Mzc4MDM=", "number": 357, "title": "Local DNS forwarding is broken in master", "user": {"login": "chemikadze", "id": 867294, "node_id": "MDQ6VXNlcjg2NzI5NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/867294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemikadze", "html_url": "https://github.com/chemikadze", "followers_url": "https://api.github.com/users/chemikadze/followers", "following_url": "https://api.github.com/users/chemikadze/following{/other_user}", "gists_url": "https://api.github.com/users/chemikadze/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemikadze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemikadze/subscriptions", "organizations_url": "https://api.github.com/users/chemikadze/orgs", "repos_url": "https://api.github.com/users/chemikadze/repos", "events_url": "https://api.github.com/users/chemikadze/events{/privacy}", "received_events_url": "https://api.github.com/users/chemikadze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-13T17:28:09Z", "updated_at": "2019-09-22T00:37:50Z", "closed_at": "2019-09-22T00:37:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Previous release (0.78.5) was using the following rule to ignore local traffic:\r\n```\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN --dest 0.0.0.0/32 -p tcp\r\n```\r\nCurrent master is using the following:\r\n```\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN -m addrtype --dst-type LOCAL\r\n```\r\nThis is causing DNS requests to local DNS server not be handled by sshuttle.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/356", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/356/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/356/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/356/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/356", "id": 493094342, "node_id": "MDU6SXNzdWU0OTMwOTQzNDI=", "number": 356, "title": "server side crashes on ConnectionResetError", "user": {"login": "chemikadze", "id": 867294, "node_id": "MDQ6VXNlcjg2NzI5NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/867294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemikadze", "html_url": "https://github.com/chemikadze", "followers_url": "https://api.github.com/users/chemikadze/followers", "following_url": "https://api.github.com/users/chemikadze/following{/other_user}", "gists_url": "https://api.github.com/users/chemikadze/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemikadze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemikadze/subscriptions", "organizations_url": "https://api.github.com/users/chemikadze/orgs", "repos_url": "https://api.github.com/users/chemikadze/repos", "events_url": "https://api.github.com/users/chemikadze/events{/privacy}", "received_events_url": "https://api.github.com/users/chemikadze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-13T01:11:27Z", "updated_at": "2019-09-22T00:32:38Z", "closed_at": "2019-09-22T00:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Version used: 0.78.5\r\nRemote python version: 3.6.8\r\n_Sometimes_ remote process running in ssh crashes with following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 39, in <module>\r\n  File \"sshuttle.server\", line 403, in main\r\n  File \"sshuttle.ssnet\", line 598, in runonce\r\n  File \"sshuttle.ssnet\", line 317, in callback\r\n  File \"sshuttle.ssnet\", line 150, in try_connect\r\nConnectionResetError: [Errno 104] Connection reset by peer\r\n```\r\n\r\nNo reliable way to reproduce yet.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/352", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/352/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/352/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/352/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/352", "id": 491693371, "node_id": "MDU6SXNzdWU0OTE2OTMzNzE=", "number": 352, "title": "Ignore end-of-line comments in multi-line command", "user": {"login": "smoyer64", "id": 328333, "node_id": "MDQ6VXNlcjMyODMzMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/328333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smoyer64", "html_url": "https://github.com/smoyer64", "followers_url": "https://api.github.com/users/smoyer64/followers", "following_url": "https://api.github.com/users/smoyer64/following{/other_user}", "gists_url": "https://api.github.com/users/smoyer64/gists{/gist_id}", "starred_url": "https://api.github.com/users/smoyer64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smoyer64/subscriptions", "organizations_url": "https://api.github.com/users/smoyer64/orgs", "repos_url": "https://api.github.com/users/smoyer64/repos", "events_url": "https://api.github.com/users/smoyer64/events{/privacy}", "received_events_url": "https://api.github.com/users/smoyer64/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-09-10T14:02:23Z", "updated_at": "2019-12-03T16:45:24Z", "closed_at": "2019-11-07T21:18:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I create shell scripts to launch ``sshuttle`` in a specific configuration for each of the environments I work with and it would be really convenient if this tool (which is awesome BTW) would ignore comments in these scripts.  For example, here's a (sanitized) example of one my my scripts:\r\n\r\n```\r\nshell#!/bin/bash\r\n\r\n/usr/bin/sshuttle -Dr smoyer64@example.com \\\r\n    10.0.1.0/24 \\ # Kubernetes develop\r\n    10.0.2.0/24 \\ # Kubernetes develop\r\n    10.0.3.0/24 \\ # Kubernetes develop\r\n    10.0.4.0/24 \\ # PG bouncer develop\r\n    10.0.5.0/24 \\ # PG bouncer test\r\n    10.0.6.0/24 \\ # PostgreSQL production\r\n    10.0.7.0/24 \\ # AMQ develop\r\n    10.0.8.0/24 \\ # AMQ acceptance\r\n    10.0.9.0/24 \\ # AMQ production\r\n```\r\n\r\nThe bash shell will take care of the line wraps in this command but it will fail (as written) because the ``#`` character isn't part of a valid network specification.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/351", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/351/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/351/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/351/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/351", "id": 487029106, "node_id": "MDU6SXNzdWU0ODcwMjkxMDY=", "number": 351, "title": "-N, --auto-nets generates c : fatal: server died with error code 255", "user": {"login": "noraj", "id": 16578570, "node_id": "MDQ6VXNlcjE2NTc4NTcw", "avatar_url": "https://avatars3.githubusercontent.com/u/16578570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noraj", "html_url": "https://github.com/noraj", "followers_url": "https://api.github.com/users/noraj/followers", "following_url": "https://api.github.com/users/noraj/following{/other_user}", "gists_url": "https://api.github.com/users/noraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/noraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noraj/subscriptions", "organizations_url": "https://api.github.com/users/noraj/orgs", "repos_url": "https://api.github.com/users/noraj/repos", "events_url": "https://api.github.com/users/noraj/events{/privacy}", "received_events_url": "https://api.github.com/users/noraj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-29T15:27:34Z", "updated_at": "2019-09-22T16:46:44Z", "closed_at": "2019-09-22T00:21:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "For example `sshuttle -vr noraj@192.168.1.80 10.42.42.0/24` is working but when I remove the subet and add `-N, --auto-nets` it keeps crashing.\r\n\r\n```\r\n$ sshuttle -vNr noraj@192.168.1.80             \r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.7.4\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nStarting client with Python version 3.7.4\r\nc : connecting to server...\r\nPassword: \r\nStarting server with Python version 3.6.5\r\n s: latency control setting = True\r\nc : Connected.\r\n s: auto-nets:True\r\n s: available routes:\r\n s:   2/10.42.42.0/24\r\n s:   2/192.168.1.0/24\r\nfirewall manager: setting up.\r\n>> iptables -t nat -N sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -I OUTPUT 1 -j sshuttle-12300\r\n>> iptables -t nat -I PREROUTING 1 -j sshuttle-12300\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN --dest 127.0.0.1/32 -p tcp\r\n>> iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 10.42.42.0/24 -p tcp --to-ports 12300 -m ttl ! --ttl 42\r\n>> iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 192.168.1.0/24 -p tcp --to-ports 12300 -m ttl ! --ttl 42\r\nclient_loop: send disconnect: Broken pipe\r\nfirewall manager: undoing changes.\r\n>> iptables -t nat -D OUTPUT -j sshuttle-12300\r\n>> iptables -t nat -D PREROUTING -j sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -X sshuttle-12300\r\nc : fatal: server died with error code 255\r\n```\r\n\r\nPS : as other issues adding `-x 192.168.1.0/24` avoids fail.\r\n\r\n## (Potential) related issues\r\n\r\n- #191\r\n- #257\r\n- #193\r\n\r\n## Versions\r\n\r\n- sshuttle : 0.78.5\r\n- client : \r\n  + python 3.7.4\r\n  + kernel 4.19.68-1-lts (archlinux x86_64)\r\n- server : \r\n  + python 3.6.5\r\n  + kernel 4.12.14-lp151.28.13-default (openSUSE Leap 15.1 x86_64)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/347", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/347/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/347/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/347/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/347", "id": 474683218, "node_id": "MDU6SXNzdWU0NzQ2ODMyMTg=", "number": 347, "title": "DNS forwarding fails (Ubuntu 16.04)", "user": {"login": "LukeAI", "id": 43993778, "node_id": "MDQ6VXNlcjQzOTkzNzc4", "avatar_url": "https://avatars3.githubusercontent.com/u/43993778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukeAI", "html_url": "https://github.com/LukeAI", "followers_url": "https://api.github.com/users/LukeAI/followers", "following_url": "https://api.github.com/users/LukeAI/following{/other_user}", "gists_url": "https://api.github.com/users/LukeAI/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukeAI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukeAI/subscriptions", "organizations_url": "https://api.github.com/users/LukeAI/orgs", "repos_url": "https://api.github.com/users/LukeAI/repos", "events_url": "https://api.github.com/users/LukeAI/events{/privacy}", "received_events_url": "https://api.github.com/users/LukeAI/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-30T16:27:08Z", "updated_at": "2019-07-31T10:40:17Z", "closed_at": "2019-07-31T10:40:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to forward all network traffic including DNS lookups,  excluding link-local IP and reserved local IP Addresses.\r\nRunning this:\r\n`sshuttle --dns -vv -r me@myserver:myport 0/0 -x 169.254.0.0/16 -x 10.0.0.0/8 -x 192.168.0.0/16`\r\nMeans that DNS lookups just never resolve (new webpages won't ever load)\r\nI installed the latest version (0.78.5) available through pip on ubuntu 16.04 - have I made a mistake or is this a bug?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/345", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/345/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/345/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/345", "id": 471384587, "node_id": "MDU6SXNzdWU0NzEzODQ1ODc=", "number": 345, "title": "sshuttle over a vpn through a jumphost over ssh", "user": {"login": "nitrocode", "id": 7775707, "node_id": "MDQ6VXNlcjc3NzU3MDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/7775707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nitrocode", "html_url": "https://github.com/nitrocode", "followers_url": "https://api.github.com/users/nitrocode/followers", "following_url": "https://api.github.com/users/nitrocode/following{/other_user}", "gists_url": "https://api.github.com/users/nitrocode/gists{/gist_id}", "starred_url": "https://api.github.com/users/nitrocode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nitrocode/subscriptions", "organizations_url": "https://api.github.com/users/nitrocode/orgs", "repos_url": "https://api.github.com/users/nitrocode/repos", "events_url": "https://api.github.com/users/nitrocode/events{/privacy}", "received_events_url": "https://api.github.com/users/nitrocode/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-22T23:09:17Z", "updated_at": "2019-07-26T20:36:18Z", "closed_at": "2019-07-26T20:36:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Awesome program by the way! Been using it for a few months now and tunneling is easier than ever. Today I noticed my first issue and I scoured the web and docs and past issues to find an awesome but no luck.\r\n\r\nI have a jump host called jumphost.company.com and while I'm in the office, I can sshuttle my connections through the tunnel but while I'm not in the office, I connect to the VPN, and run the same sshuttle command, prompts me for the password, and it hangs.\r\n\r\n```bash\r\nsshuttle -v -r user@jumphost.company.com 10.200.200.200/32\r\nStarting sshuttle proxy.\r\n[local sudo] Password:\r\n```\r\n\r\nWhile on the VPN, I can ssh to the jumphost correctly too so unsure how this gets blocked. The verbose output doesn't seem to give any useful information.\r\n\r\nIs it possible to connect to the office VPN, then use sshuttle to shuttle my connections over my jumphost like I can when I'm in the office?\r\n\r\nI'm on `osx 10.14.5` using version `0.78.5`\r\n\r\nRelated:\r\n* https://github.com/sshuttle/sshuttle/issues/102\r\n* https://github.com/sshuttle/sshuttle/issues/221 - tried downgrading to `0.78.3` but same result", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/344", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/344/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/344/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/344/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/344", "id": 468932576, "node_id": "MDU6SXNzdWU0Njg5MzI1NzY=", "number": 344, "title": "Something Special about 192.168.156.151?", "user": {"login": "larrypl", "id": 718014, "node_id": "MDQ6VXNlcjcxODAxNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/718014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larrypl", "html_url": "https://github.com/larrypl", "followers_url": "https://api.github.com/users/larrypl/followers", "following_url": "https://api.github.com/users/larrypl/following{/other_user}", "gists_url": "https://api.github.com/users/larrypl/gists{/gist_id}", "starred_url": "https://api.github.com/users/larrypl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larrypl/subscriptions", "organizations_url": "https://api.github.com/users/larrypl/orgs", "repos_url": "https://api.github.com/users/larrypl/repos", "events_url": "https://api.github.com/users/larrypl/events{/privacy}", "received_events_url": "https://api.github.com/users/larrypl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 295319960, "node_id": "MDU6TGFiZWwyOTUzMTk5NjA=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/MacOSX", "name": "MacOSX", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-17T00:43:55Z", "updated_at": "2019-07-20T19:33:38Z", "closed_at": "2019-07-20T19:33:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it me or is there some special handling of this IP address? This just started happening shortly after upgrading to MacOS Catalina (but it worked for a while) and then shortly after replacing cable modem and wireless router hardware (but it worked for a while). And as you can see it doesn't fail with one IP address lower or one higher; just 192.168.156.151/\\<anything\\> (e.g. 192.168.156.148/31 works; 192.169.156.150/31 fails, 192.168.156.152/31 works. Any range that happens to include 192.168.156.151 fails.)\r\n\r\n```\r\nHelios:sshuttle larry$ sshuttle --version\r\n0.78.6.dev7+g935393b\r\nHelios:sshuttle larry$ sshuttle -r remoteid@remotehost 192.168.156.151/32\r\nclient: Connected.\r\nTraceback (most recent call last):\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/bin/sshuttle\", line 11, in <module>\r\n    load_entry_point('sshuttle==0.78.6.dev7+g935393b', 'console_scripts', 'sshuttle')()\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/cmdline.py\", line 82, in main\r\n    opt.sudo_pythonpath)\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/client.py\", line 797, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/client.py\", line 551, in _main\r\n    ssnet.runonce(handlers, mux)\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/ssnet.py\", line 599, in runonce\r\n    h.callback(s)\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/client.py\", line 140, in <lambda>\r\n    lambda sock: callback(sock, method, mux, handlers)\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/client.py\", line 366, in onaccept_tcp\r\n    dstip = method.get_tcp_dstip(sock)\r\n  File \"/Users/larry/git/sshuttle/INSTALL-0.78.6.dev6+g3e2ad68/lib/python3.7/site-packages/sshuttle-0.78.6.dev7+g935393b-py3.7.egg/sshuttle/methods/pf.py\", line 424, in get_tcp_dstip\r\n    peer = sock.getpeername()\r\nOSError: [Errno 22] Invalid argument\r\nHelios:sshuttle larry$ sshuttle -r remoteid@remotehost 192.168.156.150/32\r\nclient: Connected.\r\n^Cclient: \r\nclient: Keyboard interrupt: exiting.\r\nHelios:sshuttle larry$ sshuttle -r remoteid@remotehost 192.168.156.152/32\r\nclient: Connected.\r\n^Cclient: \r\nclient: Keyboard interrupt: exiting.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/338", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/338/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/338/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/338", "id": 448280150, "node_id": "MDU6SXNzdWU0NDgyODAxNTA=", "number": 338, "title": "Proxied connections are connecting to a closed port", "user": {"login": "Gillingham", "id": 385396, "node_id": "MDQ6VXNlcjM4NTM5Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/385396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gillingham", "html_url": "https://github.com/Gillingham", "followers_url": "https://api.github.com/users/Gillingham/followers", "following_url": "https://api.github.com/users/Gillingham/following{/other_user}", "gists_url": "https://api.github.com/users/Gillingham/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gillingham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gillingham/subscriptions", "organizations_url": "https://api.github.com/users/Gillingham/orgs", "repos_url": "https://api.github.com/users/Gillingham/repos", "events_url": "https://api.github.com/users/Gillingham/events{/privacy}", "received_events_url": "https://api.github.com/users/Gillingham/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-24T17:35:36Z", "updated_at": "2019-09-22T01:04:37Z", "closed_at": "2019-09-22T01:04:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Seeing odd behaviour on OS X `18.5.0 Darwin Kernel Version 18.5.0: Mon Mar 11 20:40:32 PDT 2019; root:xnu-4903.251.3~3/RELEASE_X86_64 x86_64`, with sshuttle `0.78.5`. When I try to connect to a host over sshuttle, the connection is \"established\" but the target port isn't actually open.\r\n\r\nFrom OS X host with sshuttle active:\r\n```\r\n$ telnet target 1857\r\nTrying target-ip...\r\nConnected to target.\r\nEscape character is '^]'.\r\nConnection closed by foreign host.\r\n```\r\n\r\nFrom a host on the same network as target, not having to go through sshuttle:\r\n```\r\n$ telnet target 1857\r\nTrying target-ip...\r\ntelnet: connect to address  target-ip: Connection refused\r\n```\r\n\r\nIs this behavior expected, is there anything to be done about it? It's breaking some software that fails over between servers because it _thinks_ the server is active as it accepts the connection and doesn't try to then failover to the secondary.\r\n\r\n\r\nOutput from `sshuttle -vv` during the attempted telnet:\r\n```\r\nc :   Ready: 3 r=[7] w=[] x=[]\r\nc : QUERY_PF_NAT 2,6,source-machine-ip,56035,127.0.0.1,12300\r\n--->  > QUERY_PF_NAT_SUCCESS target-ip,1857\r\nc : Accept TCP: source-machine-ip:56035 -> target-ip:1857.\r\nc :  > channel=1 cmd=TCP_CONNECT len=21 (fullness=0)\r\nc : new channel: 1\r\nc : Waiting: 4 r=[5, 7, 8, 9, 10, 11] w=[11] x=[] (fullness=21/0)\r\nc :   Ready: 4 r=[] w=[11] x=[]\r\nc : mux wrote: 29/29\r\nc : Waiting: 4 r=[5, 7, 8, 9, 10, 11] w=[] x=[] (fullness=21/0)\r\n s:   Ready: 1 r=[4] w=[] x=[]\r\n s: <  channel=1 cmd=TCP_CONNECT len=21\r\n s: Connecting to target-ip:1857\r\n s: new channel: 1\r\n s: Waiting: 2 r=[4] w=[6] x=[] (fullness=0/0)\r\n s:   Ready: 2 r=[] w=[6] x=[]\r\n s: SW#6:target-ip:1857: done writing\r\n s: SW#6:target-ip:1857: done reading\r\n s:  > channel=1 cmd=TCP_EOF len=0 (fullness=0)\r\n s: SW'unknown':Mux#1: done writing\r\n s:  > channel=1 cmd=TCP_STOP_SENDING len=0 (fullness=0)\r\n s: SW'unknown':Mux#1: done reading\r\n s: SW'unknown':Mux#1: closing connection\r\n s: Waiting: 2 r=[4] w=[5] x=[] (fullness=0/0)\r\n s:   Ready: 2 r=[] w=[5] x=[]\r\n s: mux wrote: 8/8\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=0/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\n s: mux wrote: 8/8\r\n s: SW'unknown':Mux#1: deleting (1 remain)\r\n s: SW#6:target-ip:1857: deleting (0 remain)\r\n s: SW#6:target-ip:1857: error was: [Errno 111] Connection refused\r\n s: Waiting: 1 r=[4] w=[] x=[] (fullness=0/0)\r\nc :   Ready: 4 r=[11] w=[] x=[]\r\nc : <  channel=1 cmd=TCP_EOF len=0\r\nc : SW'unknown':Mux#1: done reading\r\nc : <  channel=1 cmd=TCP_STOP_SENDING len=0\r\nc : SW'unknown':Mux#1: done writing\r\nc : SW'unknown':Mux#1: closing connection\r\nc : SW#10:source-machine-ip:56035: done writing\r\nc : SW#10:source-machine-ip:56035: done reading\r\nc : Waiting: 4 r=[5, 7, 8, 9, 11] w=[] x=[] (fullness=21/0)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/336", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/336/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/336/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/336/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/336", "id": 445807852, "node_id": "MDU6SXNzdWU0NDU4MDc4NTI=", "number": 336, "title": "Route traffic traffic over proxy to another machine?", "user": {"login": "dominikheinz", "id": 32770080, "node_id": "MDQ6VXNlcjMyNzcwMDgw", "avatar_url": "https://avatars0.githubusercontent.com/u/32770080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dominikheinz", "html_url": "https://github.com/dominikheinz", "followers_url": "https://api.github.com/users/dominikheinz/followers", "following_url": "https://api.github.com/users/dominikheinz/following{/other_user}", "gists_url": "https://api.github.com/users/dominikheinz/gists{/gist_id}", "starred_url": "https://api.github.com/users/dominikheinz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dominikheinz/subscriptions", "organizations_url": "https://api.github.com/users/dominikheinz/orgs", "repos_url": "https://api.github.com/users/dominikheinz/repos", "events_url": "https://api.github.com/users/dominikheinz/events{/privacy}", "received_events_url": "https://api.github.com/users/dominikheinz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-19T11:16:25Z", "updated_at": "2019-09-22T00:58:44Z", "closed_at": "2019-09-22T00:58:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nIn my scenario I have 3 machines:\r\n\r\nA local machine **A**\r\nA remote machine **B** that can only be reached when connected to a VPN X.\r\nA remote machine **C** that can only be reached when connected to a VPN X.\r\n_(B and C are in the same network)_\r\n\r\nAll machines have their ssh ports open. My goal is to configure machine **B** in such a way when establishing a connection to **B** I automatically get proxied to **C**. So basically as a client, I only know the IP address of machine **B** and I get silently redirected to **C**. How can I do that?\r\nHow do I have to configure **B** that all incoming requests are redirected to **C**?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/334", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/334/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/334/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/334", "id": 443730981, "node_id": "MDU6SXNzdWU0NDM3MzA5ODE=", "number": 334, "title": "Name cannot be resolved if it contains `-`", "user": {"login": "Dissem", "id": 1177852, "node_id": "MDQ6VXNlcjExNzc4NTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1177852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dissem", "html_url": "https://github.com/Dissem", "followers_url": "https://api.github.com/users/Dissem/followers", "following_url": "https://api.github.com/users/Dissem/following{/other_user}", "gists_url": "https://api.github.com/users/Dissem/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dissem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dissem/subscriptions", "organizations_url": "https://api.github.com/users/Dissem/orgs", "repos_url": "https://api.github.com/users/Dissem/repos", "events_url": "https://api.github.com/users/Dissem/events{/privacy}", "received_events_url": "https://api.github.com/users/Dissem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-14T06:23:51Z", "updated_at": "2019-10-28T14:14:33Z", "closed_at": "2019-05-14T15:11:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I try to set up sshuttle to connect to a subnet by a name containing a dash, it fails with the following error message:\r\n```\r\n# sshuttle -H -r user@ssh.example.com test-system.example.com\r\n\r\nsshuttle: error: argument IP/MASK[:PORT[-PORT]]...: 'test-system.example.com' is not a valid address/mask:port format\r\n```\r\nI think sshuttle doesn-t recognize it as an url and then tries to parse it as an IP range.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/333", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/333/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/333/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/333/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/333", "id": 443701804, "node_id": "MDU6SXNzdWU0NDM3MDE4MDQ=", "number": 333, "title": "Unable to negotiate error", "user": {"login": "fuluel", "id": 46042507, "node_id": "MDQ6VXNlcjQ2MDQyNTA3", "avatar_url": "https://avatars2.githubusercontent.com/u/46042507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fuluel", "html_url": "https://github.com/fuluel", "followers_url": "https://api.github.com/users/fuluel/followers", "following_url": "https://api.github.com/users/fuluel/following{/other_user}", "gists_url": "https://api.github.com/users/fuluel/gists{/gist_id}", "starred_url": "https://api.github.com/users/fuluel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fuluel/subscriptions", "organizations_url": "https://api.github.com/users/fuluel/orgs", "repos_url": "https://api.github.com/users/fuluel/repos", "events_url": "https://api.github.com/users/fuluel/events{/privacy}", "received_events_url": "https://api.github.com/users/fuluel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-14T04:14:15Z", "updated_at": "2019-05-14T07:28:23Z", "closed_at": "2019-05-14T07:28:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I ran he sshuttle on a Mac 10.14. Once I tried to connect a server, it give me the following error: \r\n\r\nUnable to negotiate with [SERVER_IP] port 22: no matching cipher found. Their offer: aes128-cbc,aes256-cbc,3des-cbc,des-cbc\r\nclient: fatal: failed to establish ssh session (1)\r\n\r\nI got the similar error during using ssh, but I can can connect it by use this command\r\n\r\nssh -vvv -c aes256-cbc admin@[SERVER_IP]\r\n\r\nHow should I use sshuttle to connect it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/330", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/330/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/330/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/330/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/330", "id": 432735940, "node_id": "MDU6SXNzdWU0MzI3MzU5NDA=", "number": 330, "title": "instructions to whitelist or blacklist interfaces", "user": {"login": "drewwells", "id": 239123, "node_id": "MDQ6VXNlcjIzOTEyMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/239123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewwells", "html_url": "https://github.com/drewwells", "followers_url": "https://api.github.com/users/drewwells/followers", "following_url": "https://api.github.com/users/drewwells/following{/other_user}", "gists_url": "https://api.github.com/users/drewwells/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewwells/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewwells/subscriptions", "organizations_url": "https://api.github.com/users/drewwells/orgs", "repos_url": "https://api.github.com/users/drewwells/repos", "events_url": "https://api.github.com/users/drewwells/events{/privacy}", "received_events_url": "https://api.github.com/users/drewwells/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535036, "node_id": "MDU6TGFiZWwxMjk1MzUwMzY=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-12T20:38:15Z", "updated_at": "2019-10-11T14:10:05Z", "closed_at": "2019-10-11T14:10:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "sshuttle's mechanism for intercepting all traffic bound for destination IPs makes it challenging to circumvent. If I have two interfaces on a computer wlan0 and tun0. If I want `sshuttle` to only manipulate traffic going out on tun0, how would I do this? I think instructions outside of `sshuttle` would be fine for this, if it is possible.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/325", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/325/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/325/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/325", "id": 423661318, "node_id": "MDU6SXNzdWU0MjM2NjEzMTg=", "number": 325, "title": "Non-transparent mode", "user": {"login": "lars18th", "id": 9989964, "node_id": "MDQ6VXNlcjk5ODk5NjQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/9989964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lars18th", "html_url": "https://github.com/lars18th", "followers_url": "https://api.github.com/users/lars18th/followers", "following_url": "https://api.github.com/users/lars18th/following{/other_user}", "gists_url": "https://api.github.com/users/lars18th/gists{/gist_id}", "starred_url": "https://api.github.com/users/lars18th/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lars18th/subscriptions", "organizations_url": "https://api.github.com/users/lars18th/orgs", "repos_url": "https://api.github.com/users/lars18th/repos", "events_url": "https://api.github.com/users/lars18th/events{/privacy}", "received_events_url": "https://api.github.com/users/lars18th/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535036, "node_id": "MDU6TGFiZWwxMjk1MzUwMzY=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-21T10:31:08Z", "updated_at": "2019-04-14T02:40:00Z", "closed_at": "2019-04-14T02:40:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nPerhaps this sounds \"stupid\", but I have this question: Can SSHuttle work in a non-transparent mode?\r\n\r\nWhat's the non-transparent mode?\r\nThat's working as a regular SOCKS proxy, instead of a transparent TCP VPN.\r\n\r\nAnd why we'll want to do this, if when can do it with the plain SSH client?\r\nBecause the SSHuttle has improved QoS capabilities for interactive sessions.\r\n\r\nSo, if anyone can comment on that, I'd appreciate it.\r\nThank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/324", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/324/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/324/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/324/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/324", "id": 422544409, "node_id": "MDU6SXNzdWU0MjI1NDQ0MDk=", "number": 324, "title": "doas issues on OpenBSD", "user": {"login": "leonstafford", "id": 2066833, "node_id": "MDQ6VXNlcjIwNjY4MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2066833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonstafford", "html_url": "https://github.com/leonstafford", "followers_url": "https://api.github.com/users/leonstafford/followers", "following_url": "https://api.github.com/users/leonstafford/following{/other_user}", "gists_url": "https://api.github.com/users/leonstafford/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonstafford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonstafford/subscriptions", "organizations_url": "https://api.github.com/users/leonstafford/orgs", "repos_url": "https://api.github.com/users/leonstafford/repos", "events_url": "https://api.github.com/users/leonstafford/events{/privacy}", "received_events_url": "https://api.github.com/users/leonstafford/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1066874749, "node_id": "MDU6TGFiZWwxMDY2ODc0NzQ5", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/OpenBSD", "name": "OpenBSD", "color": "7d0eed", "default": false, "description": ""}, {"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-19T04:57:33Z", "updated_at": "2019-09-22T00:28:21Z", "closed_at": "2019-09-22T00:28:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "When attempting to run as regular user, sshuttle seems to fail trying to prompt for `doas` login:\r\n\r\n`sshuttle --dns -v -r me@some.ip.address -x me@some.ip.address 0/0`\r\n\r\n> Starting sshuttle proxy.\r\ndoas: unknown option -- p\r\nusage: doas [-Lns] [-a style] [-C config] [-u user] command [args]\r\nfatal: ['doas', '-p', '[local doas] Password: ', '/usr/bin/env', 'PYTHONPATH=/usr/local/lib/python3.6/site-packages/sshuttle-0.78.6.dev3+g4372c6c-py3.6.egg', '/usr/local/bin/python', '/usr/local/bin/sshuttle', '-v', '--method', 'auto', '--firewall'] expected READY, got b''\r\n\r\nRunning sshuttle with `doas` results in it looking for the SSH key under root user.\r\n\r\nWill look into adding to `doas.conf` to workaround, but it seems to be an issue with intended behaviour\r\n\r\nOpenBSD -current (6.5 beta)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/321", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/321/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/321/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/321/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/321", "id": 414628948, "node_id": "MDU6SXNzdWU0MTQ2Mjg5NDg=", "number": 321, "title": "Ubuntu 16.04.5 LTS/ fatal: expected server init string 'SSHUTTLE0001'; got ''", "user": {"login": "rasulovk", "id": 17510490, "node_id": "MDQ6VXNlcjE3NTEwNDkw", "avatar_url": "https://avatars0.githubusercontent.com/u/17510490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rasulovk", "html_url": "https://github.com/rasulovk", "followers_url": "https://api.github.com/users/rasulovk/followers", "following_url": "https://api.github.com/users/rasulovk/following{/other_user}", "gists_url": "https://api.github.com/users/rasulovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/rasulovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rasulovk/subscriptions", "organizations_url": "https://api.github.com/users/rasulovk/orgs", "repos_url": "https://api.github.com/users/rasulovk/repos", "events_url": "https://api.github.com/users/rasulovk/events{/privacy}", "received_events_url": "https://api.github.com/users/rasulovk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-26T14:07:38Z", "updated_at": "2019-04-14T02:43:44Z", "closed_at": "2019-04-14T02:43:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using latest pull from git, and have following error:\r\nfatal: expected server init string 'SSHUTTLE0001'; got ''\r\n\r\nOn version 0.78.5 error was : \r\nfatal: expected server init string 'SSHUTTLE0001'; got b''\r\n\r\nWhat could be cause, please advise", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/320", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/320/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/320/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/320/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/320", "id": 414428262, "node_id": "MDU6SXNzdWU0MTQ0MjgyNjI=", "number": 320, "title": "FileNotFoundError: [Errno 2] No such file or directory: '-l' when running on Vagrant", "user": {"login": "SuperMasterBlasterLaser", "id": 8684688, "node_id": "MDQ6VXNlcjg2ODQ2ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8684688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SuperMasterBlasterLaser", "html_url": "https://github.com/SuperMasterBlasterLaser", "followers_url": "https://api.github.com/users/SuperMasterBlasterLaser/followers", "following_url": "https://api.github.com/users/SuperMasterBlasterLaser/following{/other_user}", "gists_url": "https://api.github.com/users/SuperMasterBlasterLaser/gists{/gist_id}", "starred_url": "https://api.github.com/users/SuperMasterBlasterLaser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SuperMasterBlasterLaser/subscriptions", "organizations_url": "https://api.github.com/users/SuperMasterBlasterLaser/orgs", "repos_url": "https://api.github.com/users/SuperMasterBlasterLaser/repos", "events_url": "https://api.github.com/users/SuperMasterBlasterLaser/events{/privacy}", "received_events_url": "https://api.github.com/users/SuperMasterBlasterLaser/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-26T04:41:19Z", "updated_at": "2019-03-11T05:10:55Z", "closed_at": "2019-03-11T05:10:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\n\r\nI have launched vagrant in my Windows PC and installed sshuttle. As it was written in this [instructions](https://github.com/sshuttle/sshuttle/blob/master/docs/windows.rst) I have run this command:\r\n\r\n    sshuttle -l 0.0.0.0 -x 10.0.0.0/8 -x 192.168.0.0/16 0/0\r\n\r\nIt throws me this error:\r\n\r\n    Traceback (most recent call last):\r\n      File \"/usr/bin/sshuttle\", line 9, in <module>\r\n    load_entry_point('sshuttle==0.76', 'console_scripts', 'sshuttle')()\r\n      File \"/usr/lib/python3/dist-packages/sshuttle/cmdline.py\", line 226, in main\r\n    opt.daemon, opt.pidfile)\r\n      File \"/usr/lib/python3/dist-packages/sshuttle/client.py\", line 701, in main\r\n    seed_hosts, auto_nets, daemon)\r\n      File \"/usr/lib/python3/dist-packages/sshuttle/client.py\", line 408, in _main\r\n    options=dict(latency_control=latency_control))\r\n      File \"/usr/lib/python3/dist-packages/sshuttle/ssh.py\", line 125, in connect\r\n    close_fds=True, stderr=stderr)\r\n      File \"/usr/lib/python3.5/subprocess.py\", line 947, in __init__\r\n    restore_signals, start_new_session)\r\n      File \"/usr/lib/python3.5/subprocess.py\", line 1551, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg)\r\n    FileNotFoundError: [Errno 2] No such file or directory: '-l'\r\n\r\nWhy this is happening?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/314", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/314/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/314/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/314/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/314", "id": 409233124, "node_id": "MDU6SXNzdWU0MDkyMzMxMjQ=", "number": 314, "title": "Expected server init string b'SSHUTTLE0001'; got b'' error", "user": {"login": "crahan", "id": 172588, "node_id": "MDQ6VXNlcjE3MjU4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/172588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crahan", "html_url": "https://github.com/crahan", "followers_url": "https://api.github.com/users/crahan/followers", "following_url": "https://api.github.com/users/crahan/following{/other_user}", "gists_url": "https://api.github.com/users/crahan/gists{/gist_id}", "starred_url": "https://api.github.com/users/crahan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crahan/subscriptions", "organizations_url": "https://api.github.com/users/crahan/orgs", "repos_url": "https://api.github.com/users/crahan/repos", "events_url": "https://api.github.com/users/crahan/events{/privacy}", "received_events_url": "https://api.github.com/users/crahan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-02-12T10:44:10Z", "updated_at": "2019-02-14T01:11:12Z", "closed_at": "2019-02-14T01:11:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This appears to be similar to issue #304. The version provided with Homebrew (0.78.5) does not exhibit this problem, but when I install the code directly from the repo and try to run `sshuttle -vvvv -r sshserver www.google.com` I get the following error message and debug output:\r\n\r\n```Starting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.7.2\r\nfirewall manager: ready method name pf.\r\nIPv6 enabled: True\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('::1', 12300, 0, 0).\r\nTCP redirector listening with <socket.socket fd=7, family=AddressFamily.AF_INET6, type=SocketKind.SOCK_STREAM, proto=0, laddr=('::1', 12300, 0, 0)>.\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.7.2\r\nc : connecting to server...\r\nc : executing: ['ssh', 'sshserver', '--', 'exec /bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=4; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1107), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\nc :  > channel=0 cmd=PING len=7 (fullness=0)\r\n-c:3: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 5, in <module>\r\nModuleNotFoundError: No module named 'sshuttle'\r\nc : fatal: expected server init string b'SSHUTTLE0001'; got b''\r\n```\r\n\r\nThis is with a local Python 3.7.2 version and 2.7.15 on the SSH server. When running the same command using  a local 3.6.5 Python version the ModuleNotFoundError line changes to `ImportError: no module named sshuttle.helpers`. The issue seems to occur on both Ubuntu 16.04 and macOS 10.14.1 client systems.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/310", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/310/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/310/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/310", "id": 403490405, "node_id": "MDU6SXNzdWU0MDM0OTA0MDU=", "number": 310, "title": "New release", "user": {"login": "brianmay", "id": 112729, "node_id": "MDQ6VXNlcjExMjcyOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/112729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianmay", "html_url": "https://github.com/brianmay", "followers_url": "https://api.github.com/users/brianmay/followers", "following_url": "https://api.github.com/users/brianmay/following{/other_user}", "gists_url": "https://api.github.com/users/brianmay/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianmay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianmay/subscriptions", "organizations_url": "https://api.github.com/users/brianmay/orgs", "repos_url": "https://api.github.com/users/brianmay/repos", "events_url": "https://api.github.com/users/brianmay/events{/privacy}", "received_events_url": "https://api.github.com/users/brianmay/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-26T22:24:34Z", "updated_at": "2019-01-28T03:33:01Z", "closed_at": "2019-01-28T03:33:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "TODO items for new release.\r\n\r\n* Need updated `CHANGES.rst` file.\r\n\r\nAnything else?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/309", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/309/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/309/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/309", "id": 402991065, "node_id": "MDU6SXNzdWU0MDI5OTEwNjU=", "number": 309, "title": "is this tool can trap traffic through sock5", "user": {"login": "tty5", "id": 26674599, "node_id": "MDQ6VXNlcjI2Njc0NTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/26674599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tty5", "html_url": "https://github.com/tty5", "followers_url": "https://api.github.com/users/tty5/followers", "following_url": "https://api.github.com/users/tty5/following{/other_user}", "gists_url": "https://api.github.com/users/tty5/gists{/gist_id}", "starred_url": "https://api.github.com/users/tty5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tty5/subscriptions", "organizations_url": "https://api.github.com/users/tty5/orgs", "repos_url": "https://api.github.com/users/tty5/repos", "events_url": "https://api.github.com/users/tty5/events{/privacy}", "received_events_url": "https://api.github.com/users/tty5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-25T03:30:12Z", "updated_at": "2019-01-26T22:21:20Z", "closed_at": "2019-01-26T22:21:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "i have no remote linux machine, only has a sock5 proxy can be use.\r\nso is there any method to use sock5 as proxy server\r\nthanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/308", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/308/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/308/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/308/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/308", "id": 402864510, "node_id": "MDU6SXNzdWU0MDI4NjQ1MTA=", "number": 308, "title": "packet_write_wait: Connection to xx.xxx.xx.xx port 22: Broken pipe", "user": {"login": "iarsov", "id": 16723886, "node_id": "MDQ6VXNlcjE2NzIzODg2", "avatar_url": "https://avatars2.githubusercontent.com/u/16723886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iarsov", "html_url": "https://github.com/iarsov", "followers_url": "https://api.github.com/users/iarsov/followers", "following_url": "https://api.github.com/users/iarsov/following{/other_user}", "gists_url": "https://api.github.com/users/iarsov/gists{/gist_id}", "starred_url": "https://api.github.com/users/iarsov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iarsov/subscriptions", "organizations_url": "https://api.github.com/users/iarsov/orgs", "repos_url": "https://api.github.com/users/iarsov/repos", "events_url": "https://api.github.com/users/iarsov/events{/privacy}", "received_events_url": "https://api.github.com/users/iarsov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-24T19:38:33Z", "updated_at": "2019-01-24T23:23:55Z", "closed_at": "2019-01-24T23:23:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI have been struggling to configure sshuttle for a while today.\r\n\r\nAny idea what might be the problem for \"packet_write_wait: Connection to xx.xxx.xx.xx port 22: Broken pipe\" ?\r\n\r\nI thought the solution might be to add -x for server_ip, but I tried with -x server_ip and without, same problem. \r\n\r\nI use \"-p 2222\" because I have opened reverse tunnel on port 2222. That works fine.\r\n\r\n```\r\nsudo /usr/bin/sshuttle -vv -e \"ssh -vv -i /home/....key.pem -p 2222\" -r user@localhost 0/0 --exclude xx.xxx.xx.xx\r\n...\r\nserver: assembling u'sshuttle.helpers' (945 bytes)\r\nserver: assembling u'sshuttle.ssnet' (5648 bytes)\r\nserver: assembling u'sshuttle.hostwatch' (2384 bytes)\r\nserver: assembling u'sshuttle.server' (3775 bytes)\r\nStarting server with Python version 2.6.6\r\n s: latency control setting = True\r\ndebug2: channel 0: written 341 to efd 6\r\ndebug2: channel 0: rcvd ext data 410\r\n s: available routes:\r\n s:   2/169.254.0.0/16\r\n s:   2/192.168.100.0/24\r\n s:  > channel=0 cmd=PING len=7 (fullness=0)\r\n s:  > channel=0 cmd=ROUTES len=36 (fullness=7)\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=43/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\n s: mux wrote: 15/15\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=43/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\n s: mux wrote: 44/44\r\n s: Waiting: 1 r=[4] w=[] x=[] (fullness=43/0)\r\ndebug2: channel 0: written 410 to efd 6\r\nc : Connected.\r\nc : Waiting: 2 r=[4, 8] w=[8] x=[] (fullness=7/0)\r\nc :   Ready: 2 r=[8] w=[8] x=[]\r\nc : <  channel=0 cmd=PING len=7\r\nc :  > channel=0 cmd=PONG len=7 (fullness=7)\r\nc : <  channel=0 cmd=ROUTES len=36\r\nfirewall manager: Got subnets: [(2, 0, False, '0.0.0.0', 0, 0), (2, 32, True, 'xx.xxx.xx.xx', 0, 0), (2, 32, True, '127.0.0.1', 0, 0)]\r\nfirewall manager: Got nslist: []\r\nfirewall manager: Got ports: 0,12300,0,0\r\nfirewall manager: Got udp: False, user: None\r\nfirewall manager: setting up.\r\nfirewall manager: setting up IPv4.\r\n>> iptables -t nat -N sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -I OUTPUT 1 -j sshuttle-12300\r\n>> iptables -t nat -I PREROUTING 1 -j sshuttle-12300\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN --dest xx.xxx.xx.xx/32 -p tcp\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN --dest 127.0.0.1/32 -p tcp\r\n>> iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 0.0.0.0/0 -p tcp --to-ports 12300 -m ttl ! --ttl 42\r\npacket_write_wait: Connection to xx.xxx.xx.xx port 22: Broken pipe\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/306", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/306/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/306/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/306/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/306", "id": 401080596, "node_id": "MDU6SXNzdWU0MDEwODA1OTY=", "number": 306, "title": "sshuttle to host with large routing table results in AssertionError", "user": {"login": "krokodilerian", "id": 2760353, "node_id": "MDQ6VXNlcjI3NjAzNTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2760353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krokodilerian", "html_url": "https://github.com/krokodilerian", "followers_url": "https://api.github.com/users/krokodilerian/followers", "following_url": "https://api.github.com/users/krokodilerian/following{/other_user}", "gists_url": "https://api.github.com/users/krokodilerian/gists{/gist_id}", "starred_url": "https://api.github.com/users/krokodilerian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krokodilerian/subscriptions", "organizations_url": "https://api.github.com/users/krokodilerian/orgs", "repos_url": "https://api.github.com/users/krokodilerian/repos", "events_url": "https://api.github.com/users/krokodilerian/events{/privacy}", "received_events_url": "https://api.github.com/users/krokodilerian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-20T09:45:37Z", "updated_at": "2019-01-27T19:54:12Z", "closed_at": "2019-01-27T19:54:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Trying to sshuttle to a node with large (full bgp) routing table results in AssertionError:\r\n\r\n```\r\nvasil@nymphadora:~$ sshuttle -r xxx@yyyyyy 172.31.1.0/24      \r\nclient: Connected.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 38, in <module>\r\n  File \"sshuttle.server\", line 310, in main\r\n  File \"sshuttle.ssnet\", line 379, in send\r\nAssertionError\r\nclient: fatal: server died with error code 1\r\n```\r\n\r\nFrom a workaround I found on the internet (basically having `list_routes()` return an empty list) I've found that the issue is that `mux.send()` can't send messages larger than 64K, and the routing table is definitely bigger.\r\n\r\nI'm willing to write a patch for this, the question is what is the proper direction?\r\n- send just the beginning of the routing table\r\n- if not needed, do not request the routing table\r\n- send the routing table in chunks (which might require an update in the internal protocol)\r\n- add support for larger messages in the protocol (no idea if it's useful)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/305", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/305/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/305/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/305", "id": 400537610, "node_id": "MDU6SXNzdWU0MDA1Mzc2MTA=", "number": 305, "title": "sshuttle crashes if auto-hosts is used", "user": {"login": "drewib", "id": 46729320, "node_id": "MDQ6VXNlcjQ2NzI5MzIw", "avatar_url": "https://avatars2.githubusercontent.com/u/46729320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewib", "html_url": "https://github.com/drewib", "followers_url": "https://api.github.com/users/drewib/followers", "following_url": "https://api.github.com/users/drewib/following{/other_user}", "gists_url": "https://api.github.com/users/drewib/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewib/subscriptions", "organizations_url": "https://api.github.com/users/drewib/orgs", "repos_url": "https://api.github.com/users/drewib/repos", "events_url": "https://api.github.com/users/drewib/events{/privacy}", "received_events_url": "https://api.github.com/users/drewib/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-18T01:46:54Z", "updated_at": "2019-03-27T15:59:35Z", "closed_at": "2019-03-27T15:59:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Happening on os x and linux. I have two different sshuttle servers setup and only one of them is crashing. It just started happening and a server reboot does not resolve it. I am able to connect fine without auto-hosts.\r\n\r\nVersion: 0.78.4_1\r\n\r\nError\r\n```\r\nhostwatch: Traceback (most recent call last):\r\n--->   File \"sshuttle.server\", line 144, in start_hostwatch\r\n--->   File \"sshuttle.hostwatch\", line 294, in hw_main\r\n--->   File \"sshuttle.hostwatch\", line 107, in _check_revdns\r\n---> socket.gaierror: [Errno -2] Name or service not known\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 38, in <module>\r\n  File \"sshuttle.server\", line 397, in main\r\n  File \"sshuttle.ssnet\", line 596, in runonce\r\n  File \"sshuttle.server\", line 328, in hostwatch_ready\r\nsshuttle.helpers.Fatal: hostwatch process died\r\nfirewall manager: undoing changes.\r\n>> iptables -t nat -D OUTPUT -j sshuttle-12300\r\n>> iptables -t nat -D PREROUTING -j sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -X sshuttle-12300\r\nc : fatal: server died with error code 1\r\n```\r\n\r\nThis part likely isn't new, but hostwatch is finding 950 domains. Is there some limit to the number of domains located? Is there any workaround?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/304", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/304/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/304/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/304", "id": 399012472, "node_id": "MDU6SXNzdWUzOTkwMTI0NzI=", "number": 304, "title": "shuttle stopped working on mojave (10.14.1) and python3.7", "user": {"login": "sargense", "id": 29827715, "node_id": "MDQ6VXNlcjI5ODI3NzE1", "avatar_url": "https://avatars2.githubusercontent.com/u/29827715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sargense", "html_url": "https://github.com/sargense", "followers_url": "https://api.github.com/users/sargense/followers", "following_url": "https://api.github.com/users/sargense/following{/other_user}", "gists_url": "https://api.github.com/users/sargense/gists{/gist_id}", "starred_url": "https://api.github.com/users/sargense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sargense/subscriptions", "organizations_url": "https://api.github.com/users/sargense/orgs", "repos_url": "https://api.github.com/users/sargense/repos", "events_url": "https://api.github.com/users/sargense/events{/privacy}", "received_events_url": "https://api.github.com/users/sargense/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-01-14T18:16:12Z", "updated_at": "2019-01-27T07:10:08Z", "closed_at": "2019-01-27T07:10:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "c : fatal: expected server init string b'SSHUTTLE0001'; got b''\r\nPython3.7.1 on macos mojave 10.14.1\r\nPython3.7.2 on linux host\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/303", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/303/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/303/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/303/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/303", "id": 397854001, "node_id": "MDU6SXNzdWUzOTc4NTQwMDE=", "number": 303, "title": "Disabling IPv6 makes sshuttle fail.", "user": {"login": "absorber", "id": 2358532, "node_id": "MDQ6VXNlcjIzNTg1MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2358532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/absorber", "html_url": "https://github.com/absorber", "followers_url": "https://api.github.com/users/absorber/followers", "following_url": "https://api.github.com/users/absorber/following{/other_user}", "gists_url": "https://api.github.com/users/absorber/gists{/gist_id}", "starred_url": "https://api.github.com/users/absorber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/absorber/subscriptions", "organizations_url": "https://api.github.com/users/absorber/orgs", "repos_url": "https://api.github.com/users/absorber/repos", "events_url": "https://api.github.com/users/absorber/events{/privacy}", "received_events_url": "https://api.github.com/users/absorber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299355340, "node_id": "MDU6TGFiZWwyOTkzNTUzNDA=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/Linux", "name": "Linux", "color": "fad8c7", "default": false, "description": null}, {"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-10T14:25:27Z", "updated_at": "2019-04-14T02:46:35Z", "closed_at": "2019-04-14T02:46:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm on Ubuntu 16.04 and noticed that my WLAN NIC had an IPv6 address despite me disabling it in the `/etc/sysctl.conf` using these values:\r\n```\r\nnet.ipv6.conf.all.disable_ipv6 = 1\r\nnet.ipv6.conf.default.disable_ipv6 = 1\r\nnet.ipv6.conf.lo.disable_ipv6 = 1\r\n```\r\n(I got that from [here](https://askubuntu.com/a/309463))\r\n\r\nSince that apparently didn't help, I took more drastic measures and followed the advice of [this](https://askubuntu.com/a/337736) comment (`GRUB_CMDLINE_LINUX_DEFAULT=\"ipv6.disable=1\"` in `/etc/default/grub`)\r\n\r\nHowever, that made sshuttle break:\r\n\r\n```\r\n\u2514\u2500$  sudo sshuttle -v --dns -r my_remote_server 0/0\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.5.2\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: True\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/sshuttle\", line 9, in <module>\r\n    load_entry_point('sshuttle==0.76', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/lib/python3/dist-packages/sshuttle/cmdline.py\", line 226, in main\r\n    opt.daemon, opt.pidfile)\r\n  File \"/usr/lib/python3/dist-packages/sshuttle/client.py\", line 571, in main\r\n    tcp_listener = MultiListener()\r\n  File \"/usr/lib/python3/dist-packages/sshuttle/client.py\", line 98, in __init__\r\n    self.v6 = socket.socket(socket.AF_INET6, type, proto)\r\n  File \"/usr/lib/python3.5/socket.py\", line 134, in __init__\r\n    _socket.socket.__init__(self, family, type, proto, fileno)\r\nOSError: [Errno 97] Address family not supported by protocol\r\n```\r\n\r\nI've tried using the latest git version, but after installing using `sudo ./setup.py` method, I can't seem to run it at all (regardless of whether IPv6 is disabled or not)\r\n\r\n```\r\n\u2514\u2500$  sudo sshuttle -v --dns -r my_remote_server 0/0\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 2.7.12\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: True\r\nUser enabled: False\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nDNS listening on ('127.0.0.1', 12299).\r\nStarting client with Python version 2.7.12\r\nc : connecting to server...\r\nHost key fingerprint is SHA256:xxx\r\nEnter passphrase for key '/root/.ssh/sshkey':\r\nStarting server with Python version 3.6.3\r\n s: latency control setting = True\r\n s: available routes:\r\n s:   2/192.168.2.0/24\r\n s:   2/192.168.2.66/32\r\nc : Connected.\r\nfirewall manager: setting up.\r\nfirewall manager: undoing changes.\r\nfirewall manager: Error trying to undo IPv4 firewall.\r\nfirewall manager: ---> Traceback (most recent call last):\r\nfirewall manager: --->   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/firewall.py\", line 270, in main\r\nfirewall manager: --->     method.restore_firewall(port_v4, socket.AF_INET, udp, user)\r\nfirewall manager: --->   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/methods/nat.py\", line 99, in restore_firewall\r\nfirewall manager: --->     if ipt_chain_exists(family, table, chain):\r\nfirewall manager: --->   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/linux.py\", line 27, in ipt_chain_exists\r\nfirewall manager: --->     completed = ssubprocess.run(argv, stdout=ssubprocess.PIPE, env=env, encoding='ASCII')\r\nfirewall manager: ---> AttributeError: 'module' object has no attribute 'run'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/sshuttle\", line 9, in <module>\r\n    load_entry_point('sshuttle==0.78.5.dev25+g531a17c', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/cmdline.py\", line 26, in main\r\n    return firewall.main(opt.method, opt.syslog)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/firewall.py\", line 219, in main\r\n    user)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/methods/nat.py\", line 39, in setup_firewall\r\n    self.restore_firewall(port, family, udp, user)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/methods/nat.py\", line 99, in restore_firewall\r\n    if ipt_chain_exists(family, table, chain):\r\n  File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.5.dev25+g531a17c-py2.7.egg/sshuttle/linux.py\", line 27, in ipt_chain_exists\r\n    completed = ssubprocess.run(argv, stdout=ssubprocess.PIPE, env=env, encoding='ASCII')\r\nAttributeError: 'module' object has no attribute 'run'\r\nc : fatal: cleanup: ['/usr/bin/python', '/usr/local/bin/sshuttle', '-v', '--method', 'auto', '--firewall'] returned 1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/300", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/300/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/300/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/300", "id": 396396190, "node_id": "MDU6SXNzdWUzOTYzOTYxOTA=", "number": 300, "title": "autossh vs systemd", "user": {"login": "guettli", "id": 414336, "node_id": "MDQ6VXNlcjQxNDMzNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/414336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guettli", "html_url": "https://github.com/guettli", "followers_url": "https://api.github.com/users/guettli/followers", "following_url": "https://api.github.com/users/guettli/following{/other_user}", "gists_url": "https://api.github.com/users/guettli/gists{/gist_id}", "starred_url": "https://api.github.com/users/guettli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guettli/subscriptions", "organizations_url": "https://api.github.com/users/guettli/orgs", "repos_url": "https://api.github.com/users/guettli/repos", "events_url": "https://api.github.com/users/guettli/events{/privacy}", "received_events_url": "https://api.github.com/users/guettli/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-07T08:44:04Z", "updated_at": "2019-01-26T22:24:58Z", "closed_at": "2019-01-26T22:24:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "This issue is about the documentation:\r\n\r\nhttps://sshuttle.readthedocs.io/en/stable/requirements.html#additional-suggested-software\r\n\r\nWe switched from authssh to systemd for port-forwarding (up to now without sshuttle).\r\n\r\nI think systemd is superior. If you think the same, then I think it would be nice to update the docs, to makes this more clear (to help new comers to find the right way faster).\r\n\r\nThank you for this tool!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/299", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/299/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/299/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/299", "id": 395023010, "node_id": "MDU6SXNzdWUzOTUwMjMwMTA=", "number": 299, "title": "error with python 3.7.2", "user": {"login": "Char-Aznable", "id": 32589713, "node_id": "MDQ6VXNlcjMyNTg5NzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/32589713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Char-Aznable", "html_url": "https://github.com/Char-Aznable", "followers_url": "https://api.github.com/users/Char-Aznable/followers", "following_url": "https://api.github.com/users/Char-Aznable/following{/other_user}", "gists_url": "https://api.github.com/users/Char-Aznable/gists{/gist_id}", "starred_url": "https://api.github.com/users/Char-Aznable/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Char-Aznable/subscriptions", "organizations_url": "https://api.github.com/users/Char-Aznable/orgs", "repos_url": "https://api.github.com/users/Char-Aznable/repos", "events_url": "https://api.github.com/users/Char-Aznable/events{/privacy}", "received_events_url": "https://api.github.com/users/Char-Aznable/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-31T19:31:53Z", "updated_at": "2019-04-14T02:47:49Z", "closed_at": "2019-04-14T02:47:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed sshuttle via pip version 3.7.2 and could not get it to connect to remote:\r\n```\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.7.2\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=5, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.7.2\r\nc : connecting to server...\r\nc : executing: ['ssh', 'nexus1', '--', 'exec /bin/sh -c \\'P=python3; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'\"\\'\"\\'import sys, os; verbosity=2; sys.stdin = os.fdopen(0, \"rb\"); exec(compile(sys.stdin.read(1082), \"assembler.py\", \"exec\"))\\'\"\\'\"\\'\\'']\r\nc :  > channel=0 cmd=PING len=7 (fullness=0)\r\nc : fatal: server died with error code 255\r\n```\r\nhowever, I could get it run by switching to python 3.7.1 in the remote machine. \r\n\r\nThis happens with both 0.78.4 release and the 531a17c version\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/297", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/297/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/297/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/297/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/297", "id": 391027745, "node_id": "MDU6SXNzdWUzOTEwMjc3NDU=", "number": 297, "title": "Buffer sizes should be configurable", "user": {"login": "kwilczek", "id": 12379619, "node_id": "MDQ6VXNlcjEyMzc5NjE5", "avatar_url": "https://avatars1.githubusercontent.com/u/12379619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwilczek", "html_url": "https://github.com/kwilczek", "followers_url": "https://api.github.com/users/kwilczek/followers", "following_url": "https://api.github.com/users/kwilczek/following{/other_user}", "gists_url": "https://api.github.com/users/kwilczek/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwilczek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwilczek/subscriptions", "organizations_url": "https://api.github.com/users/kwilczek/orgs", "repos_url": "https://api.github.com/users/kwilczek/repos", "events_url": "https://api.github.com/users/kwilczek/events{/privacy}", "received_events_url": "https://api.github.com/users/kwilczek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535036, "node_id": "MDU6TGFiZWwxMjk1MzUwMzY=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-12-14T09:18:41Z", "updated_at": "2020-05-10T20:55:22Z", "closed_at": "2019-11-07T21:01:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI noticed that (I don't want to use `--no-latency-control` because it basically destroys other connections)\r\nfor some reason my speed limit when using `sshuttle` (great project :+1: ) I reach a plateau about\r\n~1-1,5 MB/s. This limit does not depend on my network capabilities (symmetric 1 Gbps) or a CPU of any of the tunnel sides. I started to trace the code starting from the keyword `latency` and got to these lines:\r\n\r\nhttps://github.com/sshuttle/sshuttle/blob/d43db80decebce2d3e072f3b0a6acb9d0f71d523/sshuttle/ssnet.py#L368-L372\r\n\r\nhttps://github.com/sshuttle/sshuttle/blob/d43db80decebce2d3e072f3b0a6acb9d0f71d523/sshuttle/ssnet.py#L446-L457\r\n\r\nI increased the hardcoded limit twice and my throughput basically doubled :) Could you tell if changing these values from `32768` to basically anything else can have any side effects? I currently set this to `65535` and went from ~1MB/s to ~2 MB/s.\r\n\r\nI also noticed that initial speeds tends to drop after some time to about 1 MB/s. Does someone know why?\r\n\r\nEdit: on my other PC I changed it and the speed tripled initially.\r\n\r\nBest Regards\r\nKamil", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/296", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/296/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/296/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/296/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/296", "id": 389413165, "node_id": "MDU6SXNzdWUzODk0MTMxNjU=", "number": 296, "title": "Make not a fork", "user": {"login": "MatthewScholefield", "id": 5875019, "node_id": "MDQ6VXNlcjU4NzUwMTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5875019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MatthewScholefield", "html_url": "https://github.com/MatthewScholefield", "followers_url": "https://api.github.com/users/MatthewScholefield/followers", "following_url": "https://api.github.com/users/MatthewScholefield/following{/other_user}", "gists_url": "https://api.github.com/users/MatthewScholefield/gists{/gist_id}", "starred_url": "https://api.github.com/users/MatthewScholefield/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MatthewScholefield/subscriptions", "organizations_url": "https://api.github.com/users/MatthewScholefield/orgs", "repos_url": "https://api.github.com/users/MatthewScholefield/repos", "events_url": "https://api.github.com/users/MatthewScholefield/events{/privacy}", "received_events_url": "https://api.github.com/users/MatthewScholefield/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-10T17:43:14Z", "updated_at": "2018-12-13T01:35:45Z", "closed_at": "2018-12-13T01:35:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "It's a little confusing how this project is marked as a fork. @brianmay Can you contact GitHub support and ask them to remove the fork status? I've done it before and they normally have no problem doing this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/294", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/294/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/294/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/294/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/294", "id": 388615777, "node_id": "MDU6SXNzdWUzODg2MTU3Nzc=", "number": 294, "title": "dns with tproxy not working", "user": {"login": "BlackDex", "id": 610450, "node_id": "MDQ6VXNlcjYxMDQ1MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/610450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlackDex", "html_url": "https://github.com/BlackDex", "followers_url": "https://api.github.com/users/BlackDex/followers", "following_url": "https://api.github.com/users/BlackDex/following{/other_user}", "gists_url": "https://api.github.com/users/BlackDex/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlackDex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlackDex/subscriptions", "organizations_url": "https://api.github.com/users/BlackDex/orgs", "repos_url": "https://api.github.com/users/BlackDex/repos", "events_url": "https://api.github.com/users/BlackDex/events{/privacy}", "received_events_url": "https://api.github.com/users/BlackDex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299355340, "node_id": "MDU6TGFiZWwyOTkzNTUzNDA=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/Linux", "name": "Linux", "color": "fad8c7", "default": false, "description": null}, {"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-12-07T11:28:18Z", "updated_at": "2019-04-14T02:52:18Z", "closed_at": "2019-04-14T02:52:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to use tproxy together with DNS it doesn't seem to be working.\r\nIf i put the method on NAT DNS is working via the remote connection but no UDP for the rest.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/292", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/292/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/292/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/292/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/292", "id": 387420016, "node_id": "MDU6SXNzdWUzODc0MjAwMTY=", "number": 292, "title": "deadlock cleaning up iptables rules on exit with large set of routes.", "user": {"login": "alext", "id": 5560, "node_id": "MDQ6VXNlcjU1NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alext", "html_url": "https://github.com/alext", "followers_url": "https://api.github.com/users/alext/followers", "following_url": "https://api.github.com/users/alext/following{/other_user}", "gists_url": "https://api.github.com/users/alext/gists{/gist_id}", "starred_url": "https://api.github.com/users/alext/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alext/subscriptions", "organizations_url": "https://api.github.com/users/alext/orgs", "repos_url": "https://api.github.com/users/alext/repos", "events_url": "https://api.github.com/users/alext/events{/privacy}", "received_events_url": "https://api.github.com/users/alext/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-04T18:24:49Z", "updated_at": "2018-12-09T07:03:55Z", "closed_at": "2018-12-09T07:03:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running sshuttle with a large list of routes it's failing to clean them up at exit. I get the following output:\r\n\r\n```\r\n$ sshuttle -r user@host.example.com -s /tmp/aws-cidrs.txt\r\nuser@host.example.com's password: \r\nclient: Connected.\r\n^CAnother app is currently holding the xtables lock; still -9s 0us time ahead to have a chance to grab the lock...\r\nAnother app is currently holding the xtables lock; still -19s 0us time ahead to have a chance to grab the lock...\r\nAnother app is currently holding the xtables lock; still -29s 0us time ahead to have a chance to grab the lock...\r\n```\r\n\r\nThis continues. If I look at `ps` I can see that there are 2 iptables calls. If I `kill -9` the first one, sshuttle then cleans up successfully\r\n\r\nI'm running sshuttle 0.78.3 (as shipped with Ubuntu Bionic). my list of routes has 855 entries (everything from https://ip-ranges.amazonaws.com/ip-ranges.json).\r\n\r\nI've done a bit of digging, and I think the problem lies in the use of `subprocess.Popen` here: https://github.com/sshuttle/sshuttle/blob/0b1a260/sshuttle/linux.py#L27-L33. When it finds the chain it's looking for the function returns without reading all the output from the iptables call. If the output is larger than the buffer, the iptables command will block. This means that subsequent iptables calls fail to obtain the kernel xtables lock.\r\n\r\nI've been testing the following patch locally and it seems to fix the issue for me, although I'm not sure how portable it is to other Python versions:\r\n\r\n```diff\r\n--- a/sshuttle/linux.py\t2018-12-04 13:57:38.956939197 +0000\r\n+++ b/sshuttle/linux.py\t2018-12-04 15:26:02.739084232 +0000\r\n@@ -23,14 +23,12 @@\r\n         'PATH': os.environ['PATH'],\r\n         'LC_ALL': \"C\",\r\n     }\r\n-    p = ssubprocess.Popen(argv, stdout=ssubprocess.PIPE, env=env)\r\n-    for line in p.stdout:\r\n-        if line.startswith(b'Chain %s ' % name.encode(\"ASCII\")):\r\n+    completed = ssubprocess.run(argv, stdout=ssubprocess.PIPE, env=env, encoding='ASCII')\r\n+    if completed.returncode:\r\n+        raise Fatal('%r returned %d' % (argv, completed.returncode))\r\n+    for line in completed.stdout.split('\\n'):\r\n+        if line.startswith('Chain %s ' % name):\r\n             return True\r\n-    rv = p.wait()\r\n-    if rv:\r\n-        raise Fatal('%r returned %d' % (argv, rv))\r\n-\r\n \r\n def ipt(family, table, *args):\r\n     if family == socket.AF_INET6:\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/288", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/288/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/288/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/288", "id": 381841650, "node_id": "MDU6SXNzdWUzODE4NDE2NTA=", "number": 288, "title": "I can not access https://sshuttle.readthedocs.org/", "user": {"login": "zaoqi-unsafe", "id": 26081596, "node_id": "MDQ6VXNlcjI2MDgxNTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/26081596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaoqi-unsafe", "html_url": "https://github.com/zaoqi-unsafe", "followers_url": "https://api.github.com/users/zaoqi-unsafe/followers", "following_url": "https://api.github.com/users/zaoqi-unsafe/following{/other_user}", "gists_url": "https://api.github.com/users/zaoqi-unsafe/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaoqi-unsafe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaoqi-unsafe/subscriptions", "organizations_url": "https://api.github.com/users/zaoqi-unsafe/orgs", "repos_url": "https://api.github.com/users/zaoqi-unsafe/repos", "events_url": "https://api.github.com/users/zaoqi-unsafe/events{/privacy}", "received_events_url": "https://api.github.com/users/zaoqi-unsafe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-17T08:25:49Z", "updated_at": "2019-01-13T03:52:57Z", "closed_at": "2019-01-13T03:52:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/287", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/287/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/287/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/287", "id": 380137989, "node_id": "MDU6SXNzdWUzODAxMzc5ODk=", "number": 287, "title": "sshuttle triggers exception on nmap scan", "user": {"login": "ajinabraham", "id": 4301109, "node_id": "MDQ6VXNlcjQzMDExMDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4301109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajinabraham", "html_url": "https://github.com/ajinabraham", "followers_url": "https://api.github.com/users/ajinabraham/followers", "following_url": "https://api.github.com/users/ajinabraham/following{/other_user}", "gists_url": "https://api.github.com/users/ajinabraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajinabraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajinabraham/subscriptions", "organizations_url": "https://api.github.com/users/ajinabraham/orgs", "repos_url": "https://api.github.com/users/ajinabraham/repos", "events_url": "https://api.github.com/users/ajinabraham/events{/privacy}", "received_events_url": "https://api.github.com/users/ajinabraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 295319960, "node_id": "MDU6TGFiZWwyOTUzMTk5NjA=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/MacOSX", "name": "MacOSX", "color": "bfd4f2", "default": false, "description": null}, {"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-11-13T09:43:15Z", "updated_at": "2020-05-10T04:20:39Z", "closed_at": "2020-05-10T04:20:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nsshuttle --dns -r foo@bastion:2222 10.1.0.0/16\r\nclient: Connected\r\n```\r\nRun Nmap on a different tab\r\n```\r\n nmap -F 10.1.2.3\r\n```\r\nIt cause an exception and kills sshuttle\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/sshuttle\", line 11, in <module>\r\n    load_entry_point('sshuttle==0.78.4', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/cmdline.py\", line 79, in main\r\n    opt.user)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/client.py\", line 778, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/client.py\", line 538, in _main\r\n    ssnet.runonce(handlers, mux)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/ssnet.py\", line 596, in runonce\r\n    h.callback(s)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/client.py\", line 139, in <lambda>\r\n    lambda sock: callback(sock, method, mux, handlers)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/client.py\", line 355, in onaccept_tcp\r\n    dstip = method.get_tcp_dstip(sock)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4_1/libexec/lib/python3.7/site-packages/sshuttle/methods/pf.py\", line 423, in get_tcp_dstip\r\n    peer = sock.getpeername()\r\nOSError: [Errno 22] Invalid argument\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/286", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/286/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/286/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/286/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/286", "id": 376470950, "node_id": "MDU6SXNzdWUzNzY0NzA5NTA=", "number": 286, "title": "iptables v1.8.0 (legacy): unknown option \"--to-ports\"", "user": {"login": "WhyNotHugo", "id": 730811, "node_id": "MDQ6VXNlcjczMDgxMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/730811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WhyNotHugo", "html_url": "https://github.com/WhyNotHugo", "followers_url": "https://api.github.com/users/WhyNotHugo/followers", "following_url": "https://api.github.com/users/WhyNotHugo/following{/other_user}", "gists_url": "https://api.github.com/users/WhyNotHugo/gists{/gist_id}", "starred_url": "https://api.github.com/users/WhyNotHugo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WhyNotHugo/subscriptions", "organizations_url": "https://api.github.com/users/WhyNotHugo/orgs", "repos_url": "https://api.github.com/users/WhyNotHugo/repos", "events_url": "https://api.github.com/users/WhyNotHugo/events{/privacy}", "received_events_url": "https://api.github.com/users/WhyNotHugo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-11-01T16:36:06Z", "updated_at": "2020-04-09T11:42:29Z", "closed_at": "2018-12-21T13:41:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting this error when attempting to sshuttle into a remote host (using `sshuttle -vr ssh.mycompany.com 10.176.0.0/12 192.168.0.0/16`).\r\n\r\n```\r\nStarting client with Python version 3.7.1\r\nc : connecting to server...\r\nStarting server with Python version 3.5.2\r\n s: latency control setting = True\r\n s: available routes:\r\n s:   2/10.30.110.0/24\r\nc : Connected.\r\nfirewall manager: setting up.\r\n>> iptables -t nat -N sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -I OUTPUT 1 -j sshuttle-12300\r\n>> iptables -t nat -I PREROUTING 1 -j sshuttle-12300\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN --dest 127.0.0.1/32 -p tcp\r\n>> iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 192.168.0.0/16 -p tcp --to-ports 12300 -m ttl ! --ttl 42\r\niptables v1.8.0 (legacy): unknown option \"--to-ports\"\r\nTry `iptables -h' or 'iptables --help' for more information.\r\n>> iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 192.168.0.0/16 -p tcp --to-ports 12300\r\niptables v1.8.0 (legacy): unknown option \"--to-ports\"\r\nTry `iptables -h' or 'iptables --help' for more information.\r\nfirewall manager: undoing changes.\r\n>> iptables -t nat -D OUTPUT -j sshuttle-12300\r\n>> iptables -t nat -D PREROUTING -j sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -X sshuttle-12300\r\nfatal: ['iptables', '-t', 'nat', '-A', 'sshuttle-12300', '-j', 'REDIRECT', '--dest', '192.168.0.0/16', '-p', 'tcp', '--to-ports', '12300'] returned 2\r\nc : fatal: cleanup: ['sudo', '-p', '[local sudo] Password: ', '/usr/bin/env', 'PYTHONPATH=/usr/lib/python3.7/site-packages', '/usr/bin/python', '/usr/bin/sshuttle', '-v', '--method', 'auto', '--firewall'] returned 99\r\n```\r\n\r\nAny idea what I'm doing wrong? Or is this a bug?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/279", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/279/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/279/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/279", "id": 370612155, "node_id": "MDU6SXNzdWUzNzA2MTIxNTU=", "number": 279, "title": "No such file or directory: '/dev/null' on Windows with Cmder", "user": {"login": "AbbalYouness", "id": 15120524, "node_id": "MDQ6VXNlcjE1MTIwNTI0", "avatar_url": "https://avatars1.githubusercontent.com/u/15120524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AbbalYouness", "html_url": "https://github.com/AbbalYouness", "followers_url": "https://api.github.com/users/AbbalYouness/followers", "following_url": "https://api.github.com/users/AbbalYouness/following{/other_user}", "gists_url": "https://api.github.com/users/AbbalYouness/gists{/gist_id}", "starred_url": "https://api.github.com/users/AbbalYouness/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AbbalYouness/subscriptions", "organizations_url": "https://api.github.com/users/AbbalYouness/orgs", "repos_url": "https://api.github.com/users/AbbalYouness/repos", "events_url": "https://api.github.com/users/AbbalYouness/events{/privacy}", "received_events_url": "https://api.github.com/users/AbbalYouness/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-16T13:28:02Z", "updated_at": "2018-10-17T11:23:52Z", "closed_at": "2018-10-17T11:23:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\nI use Cmder as a terminal for Windows.\r\nI got an error when I use it to forward some ip from a VM to my host.\r\nIt's just about there is no directory `/dev/null` on Windows\r\nThere is the trace of the error : \r\n```Traceback (most recent call last):\r\n  File \"c:\\users\\me\\appdata\\local\\programs\\python\\python36-32\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"c:\\users\\me\\appdata\\local\\programs\\python\\python36-32\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\me\\AppData\\Local\\Programs\\Python\\Python36-32\\Scripts\\sshuttle.exe\\__main__.py\", line 5, in <module>\r\n  File \"c:\\users\\me\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages\\sshuttle\\cmdline.py\", line 4, in <module>\r\n    import sshuttle.client as client\r\n  File \"c:\\users\\me\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages\\sshuttle\\client.py\", line 36, in <module>\r\n    _extra_fd = os.open('/dev/null', os.O_RDONLY)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/dev/null'\r\n```\r\nA way to solve this problem, is maybe to use `os.devnull` from the package os instead of directly write `'/dev/null'`\r\nThank you of any response ^^", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/278", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/278/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/278/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/278/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/278", "id": 370366415, "node_id": "MDU6SXNzdWUzNzAzNjY0MTU=", "number": 278, "title": "tproxy method causes lock up on fedora vanilla kernels ", "user": {"login": "colinmkeith", "id": 964721, "node_id": "MDQ6VXNlcjk2NDcyMQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/964721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colinmkeith", "html_url": "https://github.com/colinmkeith", "followers_url": "https://api.github.com/users/colinmkeith/followers", "following_url": "https://api.github.com/users/colinmkeith/following{/other_user}", "gists_url": "https://api.github.com/users/colinmkeith/gists{/gist_id}", "starred_url": "https://api.github.com/users/colinmkeith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colinmkeith/subscriptions", "organizations_url": "https://api.github.com/users/colinmkeith/orgs", "repos_url": "https://api.github.com/users/colinmkeith/repos", "events_url": "https://api.github.com/users/colinmkeith/events{/privacy}", "received_events_url": "https://api.github.com/users/colinmkeith/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-15T22:20:26Z", "updated_at": "2018-10-16T21:38:08Z", "closed_at": "2018-10-16T21:38:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "In trying to debug a problem with a blank screen on waking up my laptop I switched to the mainline kernels for Fedora 28. Since doing so running with tproxy method causes the entire machine to lock up.\r\n\r\nRunning the command\r\n\r\n```./run -vvvvv --method=tproxy --dns -r work <network>```\r\n\r\nI took a photo of the screen and it gets to the end of adding rules to the mangle table, sends a PONG cmd, receives a PING response, starts Waiting and then everything locks up:\r\n\r\n```\r\n>> iptables -t mangle -A sshuttle-t-12300 -j TPROXY --tproxy-mark 0x1/0x1 --dest <network> -m udp -p udp --on-port 12300\r\nc : < channel=0 cmd=PONG len=7\r\nc : receiving PING response\r\nc : Waiting: 4 r[5, 8, 9, 10, 11, 12, 14] w=[] x=[] (fullness=0/0)\r\n```\r\n\r\nAnd then the entire computer has locked up. The HD activity light doesn't flash at all, only the RF indicator and the power light are on. No windows respond. I had journalctl running in another window and it displayed nothing before things locked up.\r\n\r\nFails like this with:\r\n\r\nkernel-core-4.19.0-0.rc8.git0.1.vanilla.knurd.1.fc28.x86_64\r\nkernel-core-4.19.0-0.rc5.git0.1.vanilla.knurd.1.fc28.x86_64\r\n\r\nHas worked wonderfully well with standard fedora kernels, tested using latest copy of sshuttle from git (commit 97ed2030f340113908fa218f90964767415c55ab)\r\n\r\n./run picks python3, which is version Python 3.6.6 (RPM: python3-3.6.6-1.fc28.x86_64)\r\n\r\nUnfortunately I'm not sure how to debug this further.\r\n\r\nAny helpful suggestions would be appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/274", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/274/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/274/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/274/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/274", "id": 365186145, "node_id": "MDU6SXNzdWUzNjUxODYxNDU=", "number": 274, "title": "sshuttle continues to run after ssh connection dies", "user": {"login": "drewwells", "id": 239123, "node_id": "MDQ6VXNlcjIzOTEyMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/239123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewwells", "html_url": "https://github.com/drewwells", "followers_url": "https://api.github.com/users/drewwells/followers", "following_url": "https://api.github.com/users/drewwells/following{/other_user}", "gists_url": "https://api.github.com/users/drewwells/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewwells/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewwells/subscriptions", "organizations_url": "https://api.github.com/users/drewwells/orgs", "repos_url": "https://api.github.com/users/drewwells/repos", "events_url": "https://api.github.com/users/drewwells/events{/privacy}", "received_events_url": "https://api.github.com/users/drewwells/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535034, "node_id": "MDU6TGFiZWwxMjk1MzUwMzQ=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-30T02:55:55Z", "updated_at": "2019-04-14T02:56:44Z", "closed_at": "2019-04-14T02:56:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I leave sshuttle running in daemon mode for long periods of time. If the SSH connection dies, my computer's network goes into a broken state. Others have written projects around sshuttle to solve this problem https://github.com/flashashen/no-YOU-talk-to-the-hand\r\n\r\nIt may not be simple to relogin to the remote server like PKS providers, so perhaps by default sshuttle should just shut down. A cli arg/config to enable automatic re-login would be nice too \ud83d\udc4d ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/273", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/273/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/273/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/273", "id": 364070843, "node_id": "MDU6SXNzdWUzNjQwNzA4NDM=", "number": 273, "title": "Prevent saving pid file to the current directory", "user": {"login": "msudgh", "id": 11756815, "node_id": "MDQ6VXNlcjExNzU2ODE1", "avatar_url": "https://avatars0.githubusercontent.com/u/11756815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msudgh", "html_url": "https://github.com/msudgh", "followers_url": "https://api.github.com/users/msudgh/followers", "following_url": "https://api.github.com/users/msudgh/following{/other_user}", "gists_url": "https://api.github.com/users/msudgh/gists{/gist_id}", "starred_url": "https://api.github.com/users/msudgh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msudgh/subscriptions", "organizations_url": "https://api.github.com/users/msudgh/orgs", "repos_url": "https://api.github.com/users/msudgh/repos", "events_url": "https://api.github.com/users/msudgh/events{/privacy}", "received_events_url": "https://api.github.com/users/msudgh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-26T14:50:14Z", "updated_at": "2019-04-14T02:58:25Z", "closed_at": "2019-04-14T02:58:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "why would `sshuttle` save pid file into the current directory in `daemon` case?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/270", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/270/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/270/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/270/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/270", "id": 361236100, "node_id": "MDU6SXNzdWUzNjEyMzYxMDA=", "number": 270, "title": "\"Permission denied, please try again.\"", "user": {"login": "wally-yu", "id": 4316855, "node_id": "MDQ6VXNlcjQzMTY4NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4316855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wally-yu", "html_url": "https://github.com/wally-yu", "followers_url": "https://api.github.com/users/wally-yu/followers", "following_url": "https://api.github.com/users/wally-yu/following{/other_user}", "gists_url": "https://api.github.com/users/wally-yu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wally-yu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wally-yu/subscriptions", "organizations_url": "https://api.github.com/users/wally-yu/orgs", "repos_url": "https://api.github.com/users/wally-yu/repos", "events_url": "https://api.github.com/users/wally-yu/events{/privacy}", "received_events_url": "https://api.github.com/users/wally-yu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-18T10:22:51Z", "updated_at": "2018-09-23T22:21:59Z", "closed_at": "2018-09-23T22:21:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,\r\nThanks for working out such a handy tool.\r\nhowever when i am trying to use it, i got \"Permission denied, please try again.\"\r\n\r\nMy local machine is Mac.\r\nRemote server was build on AWS ubuntu 16.04.\r\n\r\ncould you please give me some suggestion how to debug and find the prob?\r\n\r\nthanks in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/268", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/268/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/268/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/268", "id": 356962408, "node_id": "MDU6SXNzdWUzNTY5NjI0MDg=", "number": 268, "title": "How to reach another client in virtual network?", "user": {"login": "ivakyb", "id": 7225779, "node_id": "MDQ6VXNlcjcyMjU3Nzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/7225779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivakyb", "html_url": "https://github.com/ivakyb", "followers_url": "https://api.github.com/users/ivakyb/followers", "following_url": "https://api.github.com/users/ivakyb/following{/other_user}", "gists_url": "https://api.github.com/users/ivakyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivakyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivakyb/subscriptions", "organizations_url": "https://api.github.com/users/ivakyb/orgs", "repos_url": "https://api.github.com/users/ivakyb/repos", "events_url": "https://api.github.com/users/ivakyb/events{/privacy}", "received_events_url": "https://api.github.com/users/ivakyb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-04T20:23:55Z", "updated_at": "2018-09-05T09:57:06Z", "closed_at": "2018-09-05T09:57:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "$subject\r\n\r\nIs it possible?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/267", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/267/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/267/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/267", "id": 356207568, "node_id": "MDU6SXNzdWUzNTYyMDc1Njg=", "number": 267, "title": "Not working in sudeors file", "user": {"login": "wmantly", "id": 6242401, "node_id": "MDQ6VXNlcjYyNDI0MDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6242401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmantly", "html_url": "https://github.com/wmantly", "followers_url": "https://api.github.com/users/wmantly/followers", "following_url": "https://api.github.com/users/wmantly/following{/other_user}", "gists_url": "https://api.github.com/users/wmantly/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmantly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmantly/subscriptions", "organizations_url": "https://api.github.com/users/wmantly/orgs", "repos_url": "https://api.github.com/users/wmantly/repos", "events_url": "https://api.github.com/users/wmantly/events{/privacy}", "received_events_url": "https://api.github.com/users/wmantly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129535036, "node_id": "MDU6TGFiZWwxMjk1MzUwMzY=", "url": "https://api.github.com/repos/sshuttle/sshuttle/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-09-01T14:42:39Z", "updated_at": "2019-12-22T22:26:02Z", "closed_at": "2019-12-22T22:26:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am using sshuttle in a NodeJS app and the sudo password is becoming annoying...\r\nI have used these instructions, correcting for the paths of my system.\r\n\r\nhttps://github.com/apenwarr/sshuttle/pull/51#issuecomment-326314545\r\n\r\nThis is my current `/etc/sudoers.d/sshuttle` file and i have version 0.78.3 of sshuttle on Linux Mint 19, basically Ubuntu 18.04\r\n\r\n```\r\nCmnd_Alias SSHUTTLE = /usr/bin/env PYTHONPATH=/usr/lib/python3/dist-packages /usr/bin/python3 /usr/bin/sshuttle\r\n\r\nwilliam ALL=NOPASSWD: SSHUTTLE\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/266", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/266/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/266/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/266", "id": 355896753, "node_id": "MDU6SXNzdWUzNTU4OTY3NTM=", "number": 266, "title": "Please add -i parameter to specify Identity file", "user": {"login": "DavidRabel-b1", "id": 22914857, "node_id": "MDQ6VXNlcjIyOTE0ODU3", "avatar_url": "https://avatars1.githubusercontent.com/u/22914857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidRabel-b1", "html_url": "https://github.com/DavidRabel-b1", "followers_url": "https://api.github.com/users/DavidRabel-b1/followers", "following_url": "https://api.github.com/users/DavidRabel-b1/following{/other_user}", "gists_url": "https://api.github.com/users/DavidRabel-b1/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidRabel-b1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidRabel-b1/subscriptions", "organizations_url": "https://api.github.com/users/DavidRabel-b1/orgs", "repos_url": "https://api.github.com/users/DavidRabel-b1/repos", "events_url": "https://api.github.com/users/DavidRabel-b1/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidRabel-b1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-31T08:59:06Z", "updated_at": "2018-09-23T22:04:44Z", "closed_at": "2018-09-23T22:04:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nmany SSH related tools support specifiying the identity file with a -i parameter. Could you add something like that, too?\r\n\r\nYours\r\nDavid", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/263", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/263/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/263/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/263", "id": 353964969, "node_id": "MDU6SXNzdWUzNTM5NjQ5Njk=", "number": 263, "title": "not closing sockets", "user": {"login": "ColeRominger", "id": 14206975, "node_id": "MDQ6VXNlcjE0MjA2OTc1", "avatar_url": "https://avatars0.githubusercontent.com/u/14206975?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ColeRominger", "html_url": "https://github.com/ColeRominger", "followers_url": "https://api.github.com/users/ColeRominger/followers", "following_url": "https://api.github.com/users/ColeRominger/following{/other_user}", "gists_url": "https://api.github.com/users/ColeRominger/gists{/gist_id}", "starred_url": "https://api.github.com/users/ColeRominger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ColeRominger/subscriptions", "organizations_url": "https://api.github.com/users/ColeRominger/orgs", "repos_url": "https://api.github.com/users/ColeRominger/repos", "events_url": "https://api.github.com/users/ColeRominger/events{/privacy}", "received_events_url": "https://api.github.com/users/ColeRominger/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-25T00:24:07Z", "updated_at": "2018-08-25T00:44:54Z", "closed_at": "2018-08-25T00:44:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using sshuttle to allow a whitelisted IP to be used as I migrate services.\r\nI am making hundreds of connections an hour over sshuttle.\r\nEach connection is getting closed but the socket is being left in a FIN_WAIT2 state.\r\nThese FIN_WAIT2 sockets accumulate until the nofile ulimit is reached.\r\nSshuttle then crashes without sending a bad exit code to systemd.\r\nAlthough I am currently running sshuttle as a service this also happens when I run it directly in the foreground or daemonized. \r\nAlthough the snippet says the exit code was 1, my service definition should recognize that but it does not.\r\nThe service still seems up and something is still listening at my listen address because I can no longer make outgoing connections aka `curl icanhazip.com` until I restart the service manually.\r\n```shell\r\n$ sockstat -P sshuttle | grep FWAIT2 | wc -l\r\n2115\r\n```\r\n```shell\r\n$ cat /etc/systemd/system/sshuttle.service\r\n[Unit]\r\nDescription=sshuttle proxy\r\nAfter=network.target\r\n\r\n[Service]\r\nType=notify\r\nNotifyAccess=all\r\nLimitNOFILE=4096\r\nUser=ubuntu\r\nKillMode=process\r\nPIDFile=/home/ubuntu/sshuttle/sshuttle.pid\r\nExecStart=/usr/local/bin/sshuttle @/home/ubuntu/sshuttle/sshuttle_config\r\nExecReload=/bin/kill -SIGINT $MAINPID\r\nRestart=on-failure\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\nAlias=sshuttle.service\r\n```\r\n```shell\r\n$  journalctl -u sshuttle.service\r\n-- Logs begin at Fri 2018-08-24 00:08:20 UTC, end at Sat 2018-08-25 00:29:27 UTC. --\r\nAug 24 14:15:10 redacted-01 sshuttle[1292]: server: warning: closed channel 36137 got cmd=TCP_DATA len=31\r\nAug 24 16:48:33 redacted-01 sshuttle[1292]: client: warning: closed channel 44975 got cmd=TCP_EOF len=0\r\nAug 24 16:48:34 redacted-01 sshuttle[1292]: server: warning: closed channel 44975 got cmd=TCP_STOP_SENDING len=0\r\nAug 24 16:49:05 redacted-01 sshuttle[1292]: client: warning: closed channel 45002 got cmd=TCP_EOF len=0\r\nAug 24 16:49:05 redacted-01 sshuttle[1292]: server: warning: closed channel 45002 got cmd=TCP_STOP_SENDING len=0\r\nAug 24 16:51:19 redacted-01 sshuttle[1292]: client: warning: closed channel 44971 got cmd=TCP_STOP_SENDING len=0\r\nAug 24 16:51:19 redacted-01 sshuttle[1292]: client: warning: closed channel 44994 got cmd=TCP_STOP_SENDING len=0\r\nAug 24 16:51:19 redacted-01 sshuttle[1292]: server: warning: closed channel 44971 got cmd=TCP_EOF len=0\r\nAug 24 16:51:19 redacted-01 sshuttle[1292]: server: warning: closed channel 44994 got cmd=TCP_EOF len=0\r\nAug 24 16:51:56 redacted-01 sshuttle[1292]: client: warning: closed channel 45112 got cmd=TCP_DATA len=1267\r\nAug 24 16:51:56 redacted-01 sshuttle[1292]: client: warning: closed channel 45112 got cmd=TCP_EOF len=0\r\nAug 24 16:51:56 redacted-01 sshuttle[1292]: server: warning: closed channel 45112 got cmd=TCP_STOP_SENDING len=0\r\nAug 24 17:39:34 redacted-01 sshuttle[1292]: Traceback (most recent call last):\r\nAug 24 17:39:34 redacted-01 sshuttle[1292]:   File \"/usr/local/bin/sshuttle\", line 9, in <module>\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     load_entry_point('sshuttle==0.78.4', 'console_scripts', 'sshuttle')()\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/cmdline.py\", line 79, in main\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     opt.user)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/client.py\", line 778, in main\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/client.py\", line 538, in _main\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     ssnet.runonce(handlers, mux)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/ssnet.py\", line 596, in runonce\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     h.callback(s)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/client.py\", line 139, in <lambda>\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     lambda sock: callback(sock, method, mux, handlers)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/client.py\", line 355, in onaccept_tcp\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     dstip = method.get_tcp_dstip(sock)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/methods/__init__.py\", line 49, in get_tcp_dstip\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     return original_dst(sock)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/local/lib/python2.7/dist-packages/sshuttle-0.78.4-py2.7.egg/sshuttle/methods/__init__.py\", line 14, in original_dst\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     SO_ORIGINAL_DST, SOCKADDR_MIN)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:   File \"/usr/lib/python2.7/socket.py\", line 228, in meth\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]:     return getattr(self._sock,name)(*args)\r\nAug 24 17:39:35 redacted-01 sshuttle[1292]: socket.error: [Errno 2] No such file or directory\r\nAug 24 17:39:42 redacted-01 systemd[1]: sshuttle.service: Main process exited, code=exited, status=1/FAILURE\r\nAug 24 17:39:42 redacted-01 systemd[1]: sshuttle.service: Unit entered failed state.\r\nAug 24 17:39:42 redacted-01 systemd[1]: sshuttle.service: Failed with result 'exit-code'.\r\n```\r\n```shell\r\n$ cat sshuttle/sshuttle_config \r\n0/0\r\n-l\r\n0.0.0.0\r\n-r\r\nuser@x.x.x.x\r\n--no-latency-control\r\n-D\r\n--pidfile\r\n/home/ubuntu/sshuttle/sshuttle.pid\r\n-X\r\n/home/ubuntu/sshuttle/excluded_networks\r\n-e\r\nssh -i /home/ubuntu/.ssh/wildcard_bastion\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/261", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/261/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/261/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/261/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/261", "id": 353611399, "node_id": "MDU6SXNzdWUzNTM2MTEzOTk=", "number": 261, "title": "Poor performance on Mac OS", "user": {"login": "fagg", "id": 1742468, "node_id": "MDQ6VXNlcjE3NDI0Njg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1742468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fagg", "html_url": "https://github.com/fagg", "followers_url": "https://api.github.com/users/fagg/followers", "following_url": "https://api.github.com/users/fagg/following{/other_user}", "gists_url": "https://api.github.com/users/fagg/gists{/gist_id}", "starred_url": "https://api.github.com/users/fagg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fagg/subscriptions", "organizations_url": "https://api.github.com/users/fagg/orgs", "repos_url": "https://api.github.com/users/fagg/repos", "events_url": "https://api.github.com/users/fagg/events{/privacy}", "received_events_url": "https://api.github.com/users/fagg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-24T01:33:47Z", "updated_at": "2018-09-23T22:24:28Z", "closed_at": "2018-09-23T22:24:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having an issue with sshuttle on Mac OS High Sierra. \r\n\r\nI am connecting using this command:\r\n\r\n`sshuttle -r hostmachine -x <host machine IP> -x 192.168.0.0/16 0/0 -vv --dns --no-latency-control`\r\n\r\nOn my Linux machines, the throughput is great - ~10 megabits down, ~5 up.\r\n\r\nOn my Mac, however, I'm lucky to get 0.2 megabits down, and barely 0.1 up. Same command, same network.\r\n\r\nAny ideas on what I should try?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/259", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/259/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/259/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/259/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/259", "id": 350183544, "node_id": "MDU6SXNzdWUzNTAxODM1NDQ=", "number": 259, "title": "Exception AttributeError: \"SockWrapper instance has no attribute 'peername'\" in  ignored when scanning with NMAP", "user": {"login": "lakewik", "id": 9087566, "node_id": "MDQ6VXNlcjkwODc1NjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/9087566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lakewik", "html_url": "https://github.com/lakewik", "followers_url": "https://api.github.com/users/lakewik/followers", "following_url": "https://api.github.com/users/lakewik/following{/other_user}", "gists_url": "https://api.github.com/users/lakewik/gists{/gist_id}", "starred_url": "https://api.github.com/users/lakewik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lakewik/subscriptions", "organizations_url": "https://api.github.com/users/lakewik/orgs", "repos_url": "https://api.github.com/users/lakewik/repos", "events_url": "https://api.github.com/users/lakewik/events{/privacy}", "received_events_url": "https://api.github.com/users/lakewik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-13T20:34:09Z", "updated_at": "2018-08-20T22:38:14Z", "closed_at": "2018-08-20T22:38:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nI getting this exception and crash after trying to scan remote addresses pool:\r\n`\r\nclient: Connected.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/sshuttle\", line 11, in <module>\r\n    load_entry_point('sshuttle==0.78.4', 'console_scripts', 'sshuttle')()\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/cmdline.py\", line 79, in main\r\n    opt.user)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/client.py\", line 778, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/client.py\", line 538, in _main\r\n    ssnet.runonce(handlers, mux)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/ssnet.py\", line 596, in runonce\r\n    h.callback(s)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/client.py\", line 139, in <lambda>\r\n    lambda sock: callback(sock, method, mux, handlers)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/client.py\", line 370, in onaccept_tcp\r\n    handlers.append(Proxy(SockWrapper(sock, sock), outwrap))\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/ssnet.py\", line 116, in __init__\r\n    self.peername = peername or _try_peername(self.rsock)\r\n  File \"/usr/local/Cellar/sshuttle/0.78.4/libexec/lib/python2.7/site-packages/sshuttle/ssnet.py\", line 91, in _try_peername\r\n    pn = sock.getpeername()\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py\", line 228, in meth\r\n    return getattr(self._sock,name)(*args)\r\nsocket.error: [Errno 22] Invalid argument\r\nException AttributeError: \"SockWrapper instance has no attribute 'peername'\" in  ignored`\r\n\r\nOccurs on Mac I will try on Linux", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/258", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/258/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/258/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/258", "id": 347599086, "node_id": "MDU6SXNzdWUzNDc1OTkwODY=", "number": 258, "title": "how to use a pkcs11 hardware token for ssh (like epass2003) ?", "user": {"login": "sandys", "id": 76883, "node_id": "MDQ6VXNlcjc2ODgz", "avatar_url": "https://avatars2.githubusercontent.com/u/76883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandys", "html_url": "https://github.com/sandys", "followers_url": "https://api.github.com/users/sandys/followers", "following_url": "https://api.github.com/users/sandys/following{/other_user}", "gists_url": "https://api.github.com/users/sandys/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandys/subscriptions", "organizations_url": "https://api.github.com/users/sandys/orgs", "repos_url": "https://api.github.com/users/sandys/repos", "events_url": "https://api.github.com/users/sandys/events{/privacy}", "received_events_url": "https://api.github.com/users/sandys/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-04T08:05:44Z", "updated_at": "2018-09-23T22:12:14Z", "closed_at": "2018-09-23T22:12:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,\r\nwe normally do ssh like\r\n\r\n\r\n```\r\n#Fedora - \r\nssh\u2002\u2002 -o PKCS11Provider=/usr/lib64/opensc-pkcs11.so user@gcp.red.com\r\n\r\n#Ubuntu - \r\nssh\u2002\u2002-o PKCS11Provider=/usr/lib/x86_64-linux-gnu/opensc-pkcs11.so\u2002\u2002user@gcp.red.com\r\n\r\n#OSX - \r\nssh -o PKCS11Provider=/Library/OpenSC/lib/opensc-pkcs11.so user@gcp.red.com\r\n```\r\n\r\nhow do we enable hardware token access with sshuttle ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/257", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/257/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/257/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/257/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/257", "id": 346171031, "node_id": "MDU6SXNzdWUzNDYxNzEwMzE=", "number": 257, "title": "Fails with error code 255", "user": {"login": "kmallajosyulaBOL", "id": 40880050, "node_id": "MDQ6VXNlcjQwODgwMDUw", "avatar_url": "https://avatars0.githubusercontent.com/u/40880050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmallajosyulaBOL", "html_url": "https://github.com/kmallajosyulaBOL", "followers_url": "https://api.github.com/users/kmallajosyulaBOL/followers", "following_url": "https://api.github.com/users/kmallajosyulaBOL/following{/other_user}", "gists_url": "https://api.github.com/users/kmallajosyulaBOL/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmallajosyulaBOL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmallajosyulaBOL/subscriptions", "organizations_url": "https://api.github.com/users/kmallajosyulaBOL/orgs", "repos_url": "https://api.github.com/users/kmallajosyulaBOL/repos", "events_url": "https://api.github.com/users/kmallajosyulaBOL/events{/privacy}", "received_events_url": "https://api.github.com/users/kmallajosyulaBOL/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-07-31T12:44:46Z", "updated_at": "2020-06-30T07:06:35Z", "closed_at": "2018-09-23T22:27:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to sshuttle into an EC2 instance. I am able to ssh into the instance without the pem file by adding my public key to the instance's authorized_keys file.\r\nEC2 os: Amazon Linux 2\r\nClient os: Ubuntu 16 Kernel: 4.15.0-29\r\n\r\nWhen I run `sudo sshuttle -vvvvr kmallajosyula@xx.xx.xx.xx 0/0`, I get the following trace - \r\n`Starting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.5.2\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nBinding redirector: 12300\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nTCP redirector listening with <socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 12300)>.\r\nStarting client with Python version 3.5.2\r\nc : connecting to server...\r\nc : executing: ['ssh', 'kmallajosyula@xx.xx.xx.xx', '--', 'P=python3.5; $P -V 2>/dev/null || P=python; exec \"$P\" -c \\'import sys; verbosity=4; stdin=getattr(sys.stdin,\"buffer\",sys.stdin); exec(compile(stdin.read(915), \"assembler.py\", \"exec\"))\\'']\r\nc :  > channel=0 cmd=PING len=7 (fullness=0)\r\nkmallajosyula@xx.xx.xx.xx's password: \r\n-c:3: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\nserver: assembling 'sshuttle' (7 bytes)\r\nserver: assembling 'sshuttle.cmdline_options' (27 bytes)\r\nserver: assembling 'sshuttle.helpers' (861 bytes)\r\nserver: assembling 'sshuttle.ssnet' (5502 bytes)\r\nserver: assembling 'sshuttle.hostwatch' (2333 bytes)\r\nserver: assembling 'sshuttle.server' (3088 bytes)\r\nStarting server with Python version 3.7.0rc1\r\n s: latency control setting = True\r\n s: available routes:\r\n s:   2/10.0.1.0/24\r\n s:   2/169.254.169.254/32\r\n s:  > channel=0 cmd=PING len=7 (fullness=0)\r\n s:  > channel=0 cmd=ROUTES len=35 (fullness=7)\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=42/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\n s: mux wrote: 15/15\r\n s: Waiting: 1 r=[4] w=[5] x=[] (fullness=42/0)\r\n s:   Ready: 1 r=[] w=[5] x=[]\r\n s: mux wrote: 43/43\r\nc : Connected.\r\nc : Waiting: 2 r=[7, 8] w=[8] x=[] (fullness=7/0)\r\nc :   Ready: 2 r=[8] w=[8] x=[]\r\nc : <  channel=0 cmd=PING len=7\r\nc :  > channel=0 cmd=PONG len=7 (fullness=7)\r\nc : <  channel=0 cmd=ROUTES len=35\r\nfirewall manager: Got subnets: [(2, 0, False, '0.0.0.0'), (2, 8, True, '127.0.0.0')]\r\nfirewall manager: Got nslist: []\r\nfirewall manager: Got ports: 0,12300,0,0\r\nfirewall manager: Got udp: False\r\nfirewall manager: setting up.\r\nfirewall manager: setting up IPv4.\r\n>> iptables -t nat -N sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -I OUTPUT 1 -j sshuttle-12300\r\n>> iptables -t nat -I PREROUTING 1 -j sshuttle-12300\r\n>> iptables -t nat -A sshuttle-12300 -j RETURN --dest 127.0.0.0/8 -p tcp\r\n>> iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 0.0.0.0/0 -p tcp --to-ports 12300 -m ttl ! --ttl 42\r\nc : mux wrote: 15/15\r\nc : mux wrote: 15/15\r\npacket_write_wait: Connection to xx.xx.xx.xx port 22: Broken pipe\r\nc : Waiting: 2 r=[7, 8] w=[] x=[] (fullness=14/0)\r\nc :   Ready: 2 r=[8] w=[] x=[]\r\nfirewall manager: undoing changes.\r\nfirewall manager: undoing IPv4 changes.\r\n>> iptables -t nat -D OUTPUT -j sshuttle-12300\r\n>> iptables -t nat -D PREROUTING -j sshuttle-12300\r\n>> iptables -t nat -F sshuttle-12300\r\n>> iptables -t nat -X sshuttle-12300\r\nfirewall manager: undoing /etc/hosts changes.\r\nc : fatal: server died with error code 255`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/256", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/256/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/256/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/256", "id": 344185494, "node_id": "MDU6SXNzdWUzNDQxODU0OTQ=", "number": 256, "title": "Issue to connect to local server while connected to remote server", "user": {"login": "HichamAffia", "id": 37811366, "node_id": "MDQ6VXNlcjM3ODExMzY2", "avatar_url": "https://avatars2.githubusercontent.com/u/37811366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HichamAffia", "html_url": "https://github.com/HichamAffia", "followers_url": "https://api.github.com/users/HichamAffia/followers", "following_url": "https://api.github.com/users/HichamAffia/following{/other_user}", "gists_url": "https://api.github.com/users/HichamAffia/gists{/gist_id}", "starred_url": "https://api.github.com/users/HichamAffia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HichamAffia/subscriptions", "organizations_url": "https://api.github.com/users/HichamAffia/orgs", "repos_url": "https://api.github.com/users/HichamAffia/repos", "events_url": "https://api.github.com/users/HichamAffia/events{/privacy}", "received_events_url": "https://api.github.com/users/HichamAffia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-24T20:10:30Z", "updated_at": "2019-04-14T03:01:17Z", "closed_at": "2019-04-14T03:01:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI work a lot on remote calculation servers and I use sshutlle to open a jupyter notebook on the server and accessing it throught my browser.\r\n\r\nBut when I attempt to connect to the local server we have in outr lab local network the ip adress of the server is not found, same thing if I try to ssh it, ssh cant resolve the host name.\r\n\r\nI'm quite sure there is a easy fix but I'm quite a newbie when it comes to networks.\r\n\r\nMy sshuttle command to connect to the remote server is : sshuttle --dns -Nr username@server\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/255", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/255/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/255/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/255/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/255", "id": 343243994, "node_id": "MDU6SXNzdWUzNDMyNDM5OTQ=", "number": 255, "title": "No module named 'zlib'", "user": {"login": "ssabetan", "id": 2876713, "node_id": "MDQ6VXNlcjI4NzY3MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2876713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssabetan", "html_url": "https://github.com/ssabetan", "followers_url": "https://api.github.com/users/ssabetan/followers", "following_url": "https://api.github.com/users/ssabetan/following{/other_user}", "gists_url": "https://api.github.com/users/ssabetan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssabetan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssabetan/subscriptions", "organizations_url": "https://api.github.com/users/ssabetan/orgs", "repos_url": "https://api.github.com/users/ssabetan/repos", "events_url": "https://api.github.com/users/ssabetan/events{/privacy}", "received_events_url": "https://api.github.com/users/ssabetan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-20T20:52:41Z", "updated_at": "2018-07-23T20:53:55Z", "closed_at": "2018-07-23T20:53:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've recenrtly encountered an error with sshuttle on Ubuntu 16.04 and two separate installs of Mac OS X Sierra. \r\n\r\nHere is the error I'm receiving:\r\n\r\n```user@hostname:~/sshuttle$ ./run -vr user@host 10.0.0.0/24\r\nStarting sshuttle proxy.\r\nfirewall manager: Starting firewall with Python version 3.5.2\r\nfirewall manager: ready method name nat.\r\nIPv6 enabled: False\r\nUDP enabled: False\r\nDNS enabled: False\r\nUser enabled: False\r\nTCP redirector listening on ('127.0.0.1', 12300).\r\nStarting client with Python version 3.5.2\r\nc : connecting to server...\r\nuser@host's password: \r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"assembler.py\", line 2, in <module>\r\nModuleNotFoundError: No module named 'zlib'\r\nc : fatal: server died with error code 1\r\n```\r\n\r\nI have verified that zlib is installed on both Ubuntu and Mac (see below). I have also verified that zlib is installed on pip. I've even tried installing using apt-get install sshuttle and brew install sshuttle. \r\n```\r\nuser@hostname:~/sshuttle$ python3\r\nPython 3.5.2 (default, Nov 23 2017, 16:37:01) \r\n[GCC 5.4.0 20160609] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import zlib\r\n>>> \r\nuser@hostname::~/sshuttle$ python\r\nPython 2.7.12 (default, Dec  4 2017, 14:50:18) \r\n[GCC 5.4.0 20160609] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import zlib\r\n>>> \r\n```\r\n\r\nAny ideas?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/253", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/253/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/253/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/253/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/253", "id": 342346524, "node_id": "MDU6SXNzdWUzNDIzNDY1MjQ=", "number": 253, "title": "error iptables: No chain/target/match by that name.", "user": {"login": "Andreser", "id": 17357163, "node_id": "MDQ6VXNlcjE3MzU3MTYz", "avatar_url": "https://avatars0.githubusercontent.com/u/17357163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andreser", "html_url": "https://github.com/Andreser", "followers_url": "https://api.github.com/users/Andreser/followers", "following_url": "https://api.github.com/users/Andreser/following{/other_user}", "gists_url": "https://api.github.com/users/Andreser/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andreser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andreser/subscriptions", "organizations_url": "https://api.github.com/users/Andreser/orgs", "repos_url": "https://api.github.com/users/Andreser/repos", "events_url": "https://api.github.com/users/Andreser/events{/privacy}", "received_events_url": "https://api.github.com/users/Andreser/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-18T14:12:15Z", "updated_at": "2018-07-22T22:29:09Z", "closed_at": "2018-07-22T22:29:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using a fresh Linux Manjaro up-to-date installation:\r\nLinux 4.14.53-1-MANJARO x86_64\r\nWhen issuing the command connecting to a remote server which was working before with a Linux Mint distro the following happens:\r\n\r\n`\r\nsshuttle -r root@138.1XX.XX.X:2225 138.1XX.XX.0/22 192.168.0.0/16 10.11.0.0/13 10.4.0.0/16 200.1XX.XX.0/24 --exclude 138.1XX.XX.4`\r\n\r\n`client: Connected.\r\niptables: No chain/target/match by that name.\r\niptables: No chain/target/match by that name.\r\nfatal: ['iptables', '-t', 'nat', '-A', 'sshuttle-12300', '-j', 'REDIRECT', '--dest', '200.1XX.XX.0/24', '-p', 'tcp', '--to-ports', '12300'] returned 1\r\nclient: fatal: cleanup: ['sudo', '-p', '[local sudo] Password: ', '/usr/bin/env', 'PYTHONPATH=/usr/lib/python3.6/site-packages', '/usr/bin/python', '/bin/sshuttle', '--method', 'auto', '--firewall'] returned 99\r\n`\r\n\r\nAny ideas of what is going on? I don't know where to begin looking...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/252", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/252/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/252/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/252/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/252", "id": 341262496, "node_id": "MDU6SXNzdWUzNDEyNjI0OTY=", "number": 252, "title": "use sshuttle on windows by DOCKER container to connect external server behind firewall", "user": {"login": "robgrzel", "id": 7314853, "node_id": "MDQ6VXNlcjczMTQ4NTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7314853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robgrzel", "html_url": "https://github.com/robgrzel", "followers_url": "https://api.github.com/users/robgrzel/followers", "following_url": "https://api.github.com/users/robgrzel/following{/other_user}", "gists_url": "https://api.github.com/users/robgrzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/robgrzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robgrzel/subscriptions", "organizations_url": "https://api.github.com/users/robgrzel/orgs", "repos_url": "https://api.github.com/users/robgrzel/repos", "events_url": "https://api.github.com/users/robgrzel/events{/privacy}", "received_events_url": "https://api.github.com/users/robgrzel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-14T19:46:32Z", "updated_at": "2018-09-23T22:47:58Z", "closed_at": "2018-09-23T22:47:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nHow to use sshuttle with docker on windows host as it would be used on normal ubuntu to connect some external server?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/251", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/251/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/251/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/251/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/251", "id": 339854153, "node_id": "MDU6SXNzdWUzMzk4NTQxNTM=", "number": 251, "title": "sshuttle --method=tproxy python 3.4.2: dies with TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'", "user": {"login": "pmorch", "id": 159292, "node_id": "MDQ6VXNlcjE1OTI5Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/159292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmorch", "html_url": "https://github.com/pmorch", "followers_url": "https://api.github.com/users/pmorch/followers", "following_url": "https://api.github.com/users/pmorch/following{/other_user}", "gists_url": "https://api.github.com/users/pmorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmorch/subscriptions", "organizations_url": "https://api.github.com/users/pmorch/orgs", "repos_url": "https://api.github.com/users/pmorch/repos", "events_url": "https://api.github.com/users/pmorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pmorch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-10T13:56:18Z", "updated_at": "2018-07-12T00:09:56Z", "closed_at": "2018-07-12T00:09:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wanted to report it in case this is an unknown issue. My personal itch has been scratched, as I'm just using python 3.6.5. Feel free to summarily close this issue, if you want.\r\n\r\nBut here goes, on a debian jessie (oldstable) installation:\r\n```\r\njulie@peter:~> mkdir sshuttle\r\njulie@peter:~> python3 -m venv sshuttle\r\njulie@peter:~> ./sshuttle/bin/python --version\r\nPython 3.4.2\r\njulie@peter:~> ./sshuttle/bin/pip install sshuttle\r\nDownloading/unpacking sshuttle\r\n  Downloading sshuttle-0.78.4-py2.py3-none-any.whl (46kB): 46kB downloaded\r\nInstalling collected packages: sshuttle\r\nSuccessfully installed sshuttle\r\nCleaning up...\r\njulie@peter:~> sudo SSH_AUTH_SOCK=\"$SSH_AUTH_SOCK\" ./sshuttle/bin/sshuttle -r root@port:2231 --method=tproxy 10.143.96.21/32\r\nTraceback (most recent call last):\r\n  File \"./sshuttle/bin/sshuttle\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/peter/sshuttle/lib/python3.4/site-packages/sshuttle/cmdline.py\", line 79, in main\r\n    opt.user)\r\n  File \"/home/peter/sshuttle/lib/python3.4/site-packages/sshuttle/client.py\", line 778, in main\r\n    seed_hosts, auto_hosts, auto_nets, daemon, to_nameserver)\r\n  File \"/home/peter/sshuttle/lib/python3.4/site-packages/sshuttle/client.py\", line 448, in _main\r\n    to_nameserver=to_nameserver))\r\n  File \"/home/peter/sshuttle/lib/python3.4/site-packages/sshuttle/ssh.py\", line 96, in connect\r\n    empackage(z, 'sshuttle.server') +\r\n  File \"/home/peter/sshuttle/lib/python3.4/site-packages/sshuttle/ssh.py\", line 60, in empackage\r\n    return b'%s\\n%d\\n%s' % (name.encode(\"ASCII\"), len(content), content)\r\nTypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'\r\n\r\n```\r\nIt works fine with python 3.6.5.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sshuttle/sshuttle/issues/250", "repository_url": "https://api.github.com/repos/sshuttle/sshuttle", "labels_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/250/labels{/name}", "comments_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/250/comments", "events_url": "https://api.github.com/repos/sshuttle/sshuttle/issues/250/events", "html_url": "https://github.com/sshuttle/sshuttle/issues/250", "id": 339852308, "node_id": "MDU6SXNzdWUzMzk4NTIzMDg=", "number": 250, "title": "sshuttle --method=tproxy doesn't create udp iptables rules with python 2.7.9", "user": {"login": "pmorch", "id": 159292, "node_id": "MDQ6VXNlcjE1OTI5Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/159292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmorch", "html_url": "https://github.com/pmorch", "followers_url": "https://api.github.com/users/pmorch/followers", "following_url": "https://api.github.com/users/pmorch/following{/other_user}", "gists_url": "https://api.github.com/users/pmorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmorch/subscriptions", "organizations_url": "https://api.github.com/users/pmorch/orgs", "repos_url": "https://api.github.com/users/pmorch/repos", "events_url": "https://api.github.com/users/pmorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pmorch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-10T13:51:55Z", "updated_at": "2018-07-12T00:08:11Z", "closed_at": "2018-07-12T00:08:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wanted to report it in case this is an unknown issue. My personal itch has been scratched, as I'm just using python 3.6.5. Feel free to summarily close this issue, if you want.\r\n\r\nBut here goes, on a debian jessie (oldstable) installation:\r\n```\r\njulie@peter:~> mkdir sshuttle\r\njulie@peter:~> virtualenv sshuttle\r\nRunning virtualenv with interpreter /usr/bin/python2\r\nNew python executable in sshuttle/bin/python2\r\nAlso creating executable in sshuttle/bin/python\r\nInstalling setuptools, pip...done.\r\njulie@peter:~> ./sshuttle/bin/python --version\r\nPython 2.7.9\r\njulie@peter:~> ./sshuttle/bin/pip install sshuttle\r\nDownloading/unpacking sshuttle\r\n  Downloading sshuttle-0.78.4-py2.py3-none-any.whl (46kB): 46kB downloaded\r\nInstalling collected packages: sshuttle\r\nSuccessfully installed sshuttle\r\nCleaning up...\r\njulie@peter:~> sudo SSH_AUTH_SOCK=\"$SSH_AUTH_SOCK\" $w/ttle/bin/sshuttle -r root@port:2231 --method=tproxy 10.143.96.21/32\r\nclient: Connected.\r\n```\r\n\r\nNow, in another terminal, we can see that sshuttle doesn't add the udp iptables rules:\r\n```\r\njulie@peter:~> sudo iptables-save | grep sshuttle\r\n:sshuttle-d-12300 - [0:0]\r\n:sshuttle-m-12300 - [0:0]\r\n:sshuttle-t-12300 - [0:0]\r\n-A PREROUTING -j sshuttle-t-12300\r\n-A OUTPUT -j sshuttle-m-12300\r\n-A sshuttle-d-12300 -j MARK --set-xmark 0x1/0xffffffff\r\n-A sshuttle-d-12300 -j ACCEPT\r\n-A sshuttle-m-12300 -d 127.0.0.1/32 -p tcp -m tcp -j RETURN\r\n-A sshuttle-m-12300 -d 10.143.96.21/32 -p tcp -m tcp -j MARK --set-xmark 0x1/0xffffffff\r\n-A sshuttle-t-12300 -p tcp -m socket -m tcp -j sshuttle-d-12300\r\n-A sshuttle-t-12300 -d 127.0.0.1/32 -p tcp -m tcp -j RETURN\r\n-A sshuttle-t-12300 -d 10.143.96.21/32 -p tcp -m tcp -j TPROXY --on-port 12300 --on-ip 0.0.0.0 --tproxy-mark 0x1/0x1\r\n\r\n```\r\nLike this, TCP works (e.g. ssh), but UDP does not (e.g. SNMP)\r\n\r\nWhen it does work, with python 3.6.5, it does add the udp rules and both ssh and SNMP work:\r\n```\r\njulie@peter:~/git/capmon> sudo iptables-save | grep sshuttle\r\n:sshuttle-d-12300 - [0:0]\r\n:sshuttle-m-12300 - [0:0]\r\n:sshuttle-t-12300 - [0:0]\r\n-A PREROUTING -j sshuttle-t-12300\r\n-A OUTPUT -j sshuttle-m-12300\r\n-A sshuttle-d-12300 -j MARK --set-xmark 0x1/0xffffffff\r\n-A sshuttle-d-12300 -j ACCEPT\r\n-A sshuttle-m-12300 -d 127.0.0.1/32 -p tcp -m tcp -j RETURN\r\n-A sshuttle-m-12300 -d 127.0.0.1/32 -p udp -m udp -j RETURN\r\n-A sshuttle-m-12300 -d 10.143.96.21/32 -p tcp -m tcp -j MARK --set-xmark 0x1/0xffffffff\r\n-A sshuttle-m-12300 -d 10.143.96.21/32 -p udp -m udp -j MARK --set-xmark 0x1/0xffffffff\r\n-A sshuttle-t-12300 -p tcp -m socket -m tcp -j sshuttle-d-12300\r\n-A sshuttle-t-12300 -p udp -m socket -m udp -j sshuttle-d-12300\r\n-A sshuttle-t-12300 -d 127.0.0.1/32 -p tcp -m tcp -j RETURN\r\n-A sshuttle-t-12300 -d 127.0.0.1/32 -p udp -m udp -j RETURN\r\n-A sshuttle-t-12300 -d 10.143.96.21/32 -p tcp -m tcp -j TPROXY --on-port 12300 --on-ip 0.0.0.0 --tproxy-mark 0x1/0x1\r\n-A sshuttle-t-12300 -d 10.143.96.21/32 -p udp -m udp -j TPROXY --on-port 12300 --on-ip 0.0.0.0 --tproxy-mark 0x1/0x1\r\n```", "performed_via_github_app": null, "score": 1.0}]}