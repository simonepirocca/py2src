{"total_count": 545, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/devpi/devpi/issues/812", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/812/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/812/events", "html_url": "https://github.com/devpi/devpi/issues/812", "id": 663000011, "node_id": "MDU6SXNzdWU2NjMwMDAwMTE=", "number": 812, "title": "Mirror without caching?", "user": {"login": "pfmoore", "id": 1110419, "node_id": "MDQ6VXNlcjExMTA0MTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1110419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pfmoore", "html_url": "https://github.com/pfmoore", "followers_url": "https://api.github.com/users/pfmoore/followers", "following_url": "https://api.github.com/users/pfmoore/following{/other_user}", "gists_url": "https://api.github.com/users/pfmoore/gists{/gist_id}", "starred_url": "https://api.github.com/users/pfmoore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pfmoore/subscriptions", "organizations_url": "https://api.github.com/users/pfmoore/orgs", "repos_url": "https://api.github.com/users/pfmoore/repos", "events_url": "https://api.github.com/users/pfmoore/events{/privacy}", "received_events_url": "https://api.github.com/users/pfmoore/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-21T13:08:14Z", "updated_at": "2020-07-22T12:12:59Z", "closed_at": "2020-07-22T12:12:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to create a PyPI mirror *without* a local cache? Pip already caches files downloaded from the index, and when running a local devpi index on my laptop, I end up with everything cached twice - particularly annoying for packages like tensorflow which take 500M a time. And it's not obvious how to clear cached items when a new release happens - pip has `pip cache remove`, so keeping the pip cache under control is possible, but short of removing and rebuilding the devpi server, I couldn't find any information on how to manage the cache.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/805", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/805/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/805/events", "html_url": "https://github.com/devpi/devpi/issues/805", "id": 619034024, "node_id": "MDU6SXNzdWU2MTkwMzQwMjQ=", "number": 805, "title": "devpi upload fails due to check-manifest release 0.42", "user": {"login": "agentram", "id": 37303331, "node_id": "MDQ6VXNlcjM3MzAzMzMx", "avatar_url": "https://avatars0.githubusercontent.com/u/37303331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agentram", "html_url": "https://github.com/agentram", "followers_url": "https://api.github.com/users/agentram/followers", "following_url": "https://api.github.com/users/agentram/following{/other_user}", "gists_url": "https://api.github.com/users/agentram/gists{/gist_id}", "starred_url": "https://api.github.com/users/agentram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agentram/subscriptions", "organizations_url": "https://api.github.com/users/agentram/orgs", "repos_url": "https://api.github.com/users/agentram/repos", "events_url": "https://api.github.com/users/agentram/events{/privacy}", "received_events_url": "https://api.github.com/users/agentram/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-15T14:54:35Z", "updated_at": "2020-08-03T16:12:23Z", "closed_at": "2020-05-15T15:44:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/devpi/devpi/blob/7b2a40e87e9927a28eb554d0454130cd663e34f3/client/setup.py#L32\r\n\r\nSince check-manifest [made release](https://github.com/mgedmin/check-manifest/releases) 0.42, the command `devpi upload --formats bdist_wheel` raises the error:\r\n\r\n```\r\nroot@9dbb2544ee26:/build# devpi upload --formats bdist_wheel\r\nTraceback (most recent call last):\r\n  File \"/opt/python3.6/bin/devpi\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/python3.6/lib/python3.6/site-packages/devpi/main.py\", line 32, in main\r\n    return method(hub, hub.args)\r\n  File \"/opt/python3.6/lib/python3.6/site-packages/devpi/upload.py\", line 33, in main\r\n    setupdir_only=setupcfg.get(\"setupdir-only\"))\r\n  File \"/opt/python3.6/lib/python3.6/site-packages/devpi/upload.py\", line 281, in __init__\r\n    hasvcs = check_manifest.detect_vcs().metadata_name\r\nTypeError: detect_vcs() missing 1 required positional argument: 'ui'\r\n\r\nroot@9dbb2544ee26:/# python --version\r\nPython 3.6.1\r\n\r\nroot@9dbb2544ee26:/# pip list\r\nPackage        Version\r\n-------------- ----------\r\nappdirs        1.4.4\r\ncertifi        2020.4.5.1\r\nchardet        3.0.4\r\ncheck-manifest 0.42\r\ndevpi-client   5.2.0\r\ndevpi-common   3.5.0\r\ndistlib        0.3.0\r\nfilelock       3.0.12\r\nidna           2.9\r\nlazy           1.4\r\npackaging      20.3\r\npep517         0.8.2\r\npip            20.1\r\npkginfo        1.5.0.1\r\npluggy         0.13.1\r\npy             1.8.1\r\npyparsing      2.4.7\r\nrequests       2.23.0\r\nsetuptools     46.3.0\r\nsix            1.14.0\r\ntoml           0.10.1\r\ntox            3.15.0\r\nurllib3        1.25.9\r\nvirtualenv     20.0.20\r\nwheel          0.34.2\r\n```\r\n\r\nIt works well under check-manifest 0.41:\r\n\r\n```\r\nroot@9dbb2544ee26:/build# pip install check-manifest==0.41\r\nCollecting check-manifest==0.41\r\n  Downloading check_manifest-0.41-py2.py3-none-any.whl (18 kB)\r\nRequirement already satisfied: toml in /usr/local/lib/python3.8/site-packages (from check-manifest==0.41) (0.10.1)\r\nRequirement already satisfied: pep517 in /usr/local/lib/python3.8/site-packages (from check-manifest==0.41) (0.8.2)\r\nInstalling collected packages: check-manifest\r\n  Attempting uninstall: check-manifest\r\n    Found existing installation: check-manifest 0.42\r\n    Uninstalling check-manifest-0.42:\r\n      Successfully uninstalled check-manifest-0.42\r\nSuccessfully installed check-manifest-0.41\r\nroot@9dbb2544ee26:/build# devpi upload --formats bdist_wheel\r\nusing workdir /tmp/devpi0\r\npre-build: cleaning /build/dist\r\n-->  /build$ /opt/python3.6/bin/python3 setup.py bdist_wheel\r\nbuilt: /build/dist/pkg-0.1.19-py3-none-any.whl [BDIST_WHEEL] 1433.35kb\r\nregister pkg-0.1.19 to https://devpypi.example.net/INDEX/master/\r\nfile_upload of pkg-0.1.19-py3-none-any.whl to https://devpypi.example.net/INDEX/master/\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/802", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/802/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/802/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/802/events", "html_url": "https://github.com/devpi/devpi/issues/802", "id": 612552975, "node_id": "MDU6SXNzdWU2MTI1NTI5NzU=", "number": 802, "title": "Offline server copy", "user": {"login": "CBtiger", "id": 17408411, "node_id": "MDQ6VXNlcjE3NDA4NDEx", "avatar_url": "https://avatars1.githubusercontent.com/u/17408411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CBtiger", "html_url": "https://github.com/CBtiger", "followers_url": "https://api.github.com/users/CBtiger/followers", "following_url": "https://api.github.com/users/CBtiger/following{/other_user}", "gists_url": "https://api.github.com/users/CBtiger/gists{/gist_id}", "starred_url": "https://api.github.com/users/CBtiger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CBtiger/subscriptions", "organizations_url": "https://api.github.com/users/CBtiger/orgs", "repos_url": "https://api.github.com/users/CBtiger/repos", "events_url": "https://api.github.com/users/CBtiger/events{/privacy}", "received_events_url": "https://api.github.com/users/CBtiger/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-05T12:08:30Z", "updated_at": "2020-05-05T14:39:01Z", "closed_at": "2020-05-05T14:39:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "A similar issue was this mentioned here:  #630\r\n\r\n\r\nI would like to use a devpi server to allow \"normal\" python development in a stand-alone local network. I did not see that use-case mentioned somewhere. \r\n\r\nOne way I see is to set up a devpi server online, install all packages I could think of, then copy the server config file(s) and the repository. On the local network I install an \"empty\" devpi server, then paste the config and repository. \r\n\r\nHowever, I would rather try to setup a devpi server online and install a single package, say numpy to that the index is created. Then I would use the tool minirepo ([https://github.com/sganis/minirepo](url) to download all wheel and source packages and store them in the devpi repository folder. Now I guess I would need to have a way to make the devpi server to update its internal index, do I?\r\nFinally I would copy the system as above.\r\n\r\nDoes one of these approaches work or is there a another, better way to do it? \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/799", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/799/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/799/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/799/events", "html_url": "https://github.com/devpi/devpi/issues/799", "id": 611650391, "node_id": "MDU6SXNzdWU2MTE2NTAzOTE=", "number": 799, "title": "Exception on devpi login without previous devpi use", "user": {"login": "GergelyKalmar", "id": 5601876, "node_id": "MDQ6VXNlcjU2MDE4NzY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5601876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GergelyKalmar", "html_url": "https://github.com/GergelyKalmar", "followers_url": "https://api.github.com/users/GergelyKalmar/followers", "following_url": "https://api.github.com/users/GergelyKalmar/following{/other_user}", "gists_url": "https://api.github.com/users/GergelyKalmar/gists{/gist_id}", "starred_url": "https://api.github.com/users/GergelyKalmar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GergelyKalmar/subscriptions", "organizations_url": "https://api.github.com/users/GergelyKalmar/orgs", "repos_url": "https://api.github.com/users/GergelyKalmar/repos", "events_url": "https://api.github.com/users/GergelyKalmar/events{/privacy}", "received_events_url": "https://api.github.com/users/GergelyKalmar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-04T07:09:24Z", "updated_at": "2020-05-04T09:24:37Z", "closed_at": "2020-05-04T09:24:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that ``devpi-client`` (v. 5.1.1) fails on Python 3.8:\r\n\r\n```\r\n$ devpi login xxx\r\nTraceback (most recent call last):\r\n  File \"/home/gregory/.pyorbs/cc/bin/devpi\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/gregory/.pyorbs/cc/lib/python3.8/site-packages/devpi/main.py\", line 36, in main\r\n    return method(hub, hub.args)\r\n  File \"/home/gregory/.pyorbs/cc/lib/python3.8/site-packages/devpi/login.py\", line 12, in main\r\n    url=hub.current.root_url.url, username=user)\r\nAttributeError: 'NoneType' object has no attribute 'url'\r\n```\r\n\r\nCould support be added? Ubuntu 20.04 LTS comes with Python 3.8 and so I cannot seem to be able to release packages now due to this issue.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/792", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/792/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/792/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/792/events", "html_url": "https://github.com/devpi/devpi/issues/792", "id": 605276323, "node_id": "MDU6SXNzdWU2MDUyNzYzMjM=", "number": 792, "title": "devpi-server violates PEP 592", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-23T06:32:21Z", "updated_at": "2020-04-26T12:00:43Z", "closed_at": "2020-04-26T12:00:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "PyPI now supports [PEP 592](https://www.python.org/dev/peps/pep-0592/) and devpi-server currently violates the following part, because the ``yanked`` attribute is lost:\r\n\r\n> Mirrors **MUST NOT** mirror a yanked file without also mirroring the ``data-yanked`` attribute for it.\r\n\r\nThe PEP proposes two solutions for mirrors:\r\n\r\n> 1. They may choose to omit them from their simple repository API completely, providing a view over the repository that shows only \"active\", unyanked files.\r\n> 2. They may choose to include yanked files, and additionally mirror the data-yanked attribute as well.\r\n\r\nThe plan is to go for 2. in devpi-server 6.0.0 which is currently in the works.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/787", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/787/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/787/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/787/events", "html_url": "https://github.com/devpi/devpi/issues/787", "id": 593608385, "node_id": "MDU6SXNzdWU1OTM2MDgzODU=", "number": 787, "title": "404 on /+login when devpi deployed behind proxies", "user": {"login": "DrPyser", "id": 6059294, "node_id": "MDQ6VXNlcjYwNTkyOTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6059294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrPyser", "html_url": "https://github.com/DrPyser", "followers_url": "https://api.github.com/users/DrPyser/followers", "following_url": "https://api.github.com/users/DrPyser/following{/other_user}", "gists_url": "https://api.github.com/users/DrPyser/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrPyser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrPyser/subscriptions", "organizations_url": "https://api.github.com/users/DrPyser/orgs", "repos_url": "https://api.github.com/users/DrPyser/repos", "events_url": "https://api.github.com/users/DrPyser/events{/privacy}", "received_events_url": "https://api.github.com/users/DrPyser/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-03T19:58:51Z", "updated_at": "2020-04-07T05:56:56Z", "closed_at": "2020-04-07T05:56:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!\r\n\r\nPlease check the following points before submitting:\r\n\r\n- [ ] Are you using the latest released version?\r\n      If something is preventing you from trying with the newest version,\r\n      we would like to know so we can make it easier.\r\n- [ ] Provide the output of ``pip list`` from the virtual environment you are using.\r\n- [ ] Provide the Python and operating system versions under which the issue occurs.\r\n- [ ] If possible, provide a minimal example to reproduce the issue.\r\n\r\n-->\r\ndevpi-server: `devpi-server 4.7.1`\r\ndevpi-client: `devpi-client 5.1.1`\r\n\r\nI have a setup with devpi deployed behind an nginx proxy with the generated configuration(edited for our docker infrastructure). Both are also behind a kong api gateway that terminates ssl connections.\r\n\r\nThings seemed to be working fine, but now I'm getting `404`s on login(`devpi use htttps://pip.mydomain.com/root/myindex/+simple; devpi login root`):\r\n\r\n```\r\nNot Found\r\n\r\nThe following resource could not be found:\r\n\r\npredicate mismatch for view PyPIView (request_method = POST)\r\n\r\n    devpi-server-4.7.1\r\n    devpi-web-3.4.1\r\n\r\n```\r\n\r\nSame issue as this: https://stackoverflow.com/questions/52319514/devpi-server-devpi-login-returns-404\r\n\r\nIt seems the request ends up being interpreted as a search query instead of correctly hitting the login endpoint?\r\n\r\nThe nginx log doesn't tell me anything useful, and the devpi log either(both receive the request):\r\n(nginx)\r\n```\r\n...\r\npip-proxy-default_nginx.1.3wd29cpgedvf@slrs01v00000127    | 10.0.1.4 - - [03/Apr/2020:19:47:14 +0000] \"GET /+login HTTP/1.1\" 404 1994 \"-\" \"devpi-client/5.1.1 (py3.7.5; linux)\"\r\n...\r\n```\r\n(devpi-server)\r\n```\r\n...\r\npip-proxy-default_devpi.1.ikcyz9ls7hnt@slrs01v00000127    | 2020-04-03 19:46:15,024 INFO  [req2348] GET /+login\r\n...\r\n```\r\n\r\nmy nginx configuration:\r\n\r\n```\r\nserver {\r\n    server_name _ $hostname \"\" localhost;   \r\n    listen 80 default_server;\r\n\r\n    resolver 127.0.0.11 ipv6=off;\r\n\r\n    gzip             on;\r\n    gzip_min_length  2000;\r\n    gzip_proxied     any;\r\n    gzip_types       text/html application/json; \r\n\r\n    error_log /dev/stderr debug;\r\n    access_log /dev/stdout;\r\n\r\n    proxy_read_timeout 60s;\r\n    client_max_body_size 64M;\r\n\r\n    # set to where your devpi-server state is on the filesystem\r\n    root /devpi;  \r\n\r\n    # try serving static files directly\r\n    location ~ /\\+f/ {\r\n        # workaround to pass non-GET/HEAD requests through to the named location below\r\n        error_page 418 = @proxy_to_app;\r\n        if ($request_method !~ (GET)|(HEAD)) {\r\n            return 418; \r\n        }\r\n\r\n        expires max;\r\n        try_files /+files$uri @proxy_to_app;\r\n    }\r\n    # try serving docs directly\r\n    location ~ /\\+doc/ {\r\n        try_files $uri @proxy_to_app;\r\n    }\r\n    location / {\r\n        # workaround to pass all requests to / through to the named location below\r\n        error_page 418 = @proxy_to_app;\r\n        return 418;\r\n    }\r\n\r\n    location /robots.txt {\r\n        add_header Content-Type text/plain;\r\n        return 200 \"User-Agent: *\\nDisallow: /\\n\";\r\n    }\r\n\r\n    location @proxy_to_app {\r\n        # the upstream devpi server is in a docker container in the same docker network \r\n        set $upstream devpi.pip-proxy;\r\n        proxy_pass http://$upstream:3141;\r\n        proxy_set_header X-outside-url $scheme://$host:$server_port;\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n    }\r\n} \r\n```\r\nThat's basicaly what's generated by `devpi-server --gen-config`, with the upstream url changed and the docker dns resolver config.\r\nIs there a `location` block for `/+login` that should be added? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/785", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/785/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/785/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/785/events", "html_url": "https://github.com/devpi/devpi/issues/785", "id": 589795912, "node_id": "MDU6SXNzdWU1ODk3OTU5MTI=", "number": 785, "title": "AssertionError when running devpi-gen-config", "user": {"login": "rozsasarpi", "id": 6670894, "node_id": "MDQ6VXNlcjY2NzA4OTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6670894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rozsasarpi", "html_url": "https://github.com/rozsasarpi", "followers_url": "https://api.github.com/users/rozsasarpi/followers", "following_url": "https://api.github.com/users/rozsasarpi/following{/other_user}", "gists_url": "https://api.github.com/users/rozsasarpi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rozsasarpi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rozsasarpi/subscriptions", "organizations_url": "https://api.github.com/users/rozsasarpi/orgs", "repos_url": "https://api.github.com/users/rozsasarpi/repos", "events_url": "https://api.github.com/users/rozsasarpi/events{/privacy}", "received_events_url": "https://api.github.com/users/rozsasarpi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-29T13:47:22Z", "updated_at": "2020-04-07T06:40:56Z", "closed_at": "2020-04-07T06:40:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!\r\n\r\nPlease check the following points before submitting:\r\n\r\n- [ ] Are you using the latest released version?\r\n      If something is preventing you from trying with the newest version,\r\n      we would like to know so we can make it easier.\r\n- [ ] Provide the output of ``pip list`` from the virtual environment you are using.\r\n- [ ] Provide the Python and operating system versions under which the issue occurs.\r\n- [ ] If possible, provide a minimal example to reproduce the issue.\r\n\r\n-->\r\nWhen following this [Quickstart](https://devpi.net/docs/devpi/devpi/stable/+d/quickstart-releaseprocess.html), I receive the following assertion error when trying to run `devpi-gen-config`:\r\n\r\n```\r\nIt is highly recommended to use a configuration file for devpi-server, see --configfile option.\r\nwrote gen-config\\crontab\r\nwrote gen-config\\net.devpi.plist\r\nwrote gen-config\\launchd-macos.txt\r\nwrote gen-config\\nginx-devpi.conf\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\arpada\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"c:\\Users\\arpada\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\arpada\\Wok\\Projects\\python_sandbox\\devpi_test\\venv\\Scripts\\devpi-gen-config.exe\\__main__.py\", line 9, in <module>\r\n  File \"c:\\users\\arpada\\wok\\projects\\python_sandbox\\devpi_test\\venv\\lib\\site-packages\\devpi_server\\genconfig.py\", line 171, in genconfig\r\n    globals()[name](tw, new_args, new_argv, writer)\r\n  File \"c:\\users\\arpada\\wok\\projects\\python_sandbox\\devpi_test\\venv\\lib\\site-packages\\devpi_server\\genconfig.py\", line 33, in gen_supervisor\r\n    assert devpibin.exists()\r\nAssertionError\r\n```\r\n\r\nI'm using Python 3.7.2 and Windows 10 Enterprise version 1809. I'm using the latest version of devpi.\r\n\r\nAny suggestion on how to resolve this error and get all the config files generated?\r\n\r\n`pip list`:\r\n```\r\nPackage             Version\r\n------------------- ----------\r\napipkg              1.5\r\nappdirs             1.4.3\r\nargon2-cffi         19.2.0\r\nattrs               19.3.0\r\nbeautifulsoup4      4.8.2\r\nbleach              3.1.4\r\ncertifi             2019.11.28\r\ncffi                1.14.0\r\nChameleon           3.7.0\r\nchardet             3.0.4\r\ncheck-manifest      0.41\r\ncmarkgfm            0.4.2\r\ncolorama            0.4.3\r\ndefusedxml          0.6.0\r\ndevpi-client        5.1.1\r\ndevpi-common        3.4.0\r\ndevpi-server        5.4.1\r\ndevpi-web           4.0.2\r\ndistlib             0.3.0\r\ndocutils            0.16\r\nexecnet             1.7.1\r\nfilelock            3.0.12\r\nhupper              1.10.2\r\nidna                2.9\r\nimportlib-metadata  1.6.0\r\nitsdangerous        1.1.0\r\npackaging           20.3\r\npasslib             1.7.2\r\nPasteDeploy         2.1.0\r\npep517              0.8.1\r\npip                 20.0.2\r\npkginfo             1.5.0.1\r\nplaster             1.0\r\nplaster-pastedeploy 0.7\r\npluggy              0.13.1\r\npy                  1.8.1\r\npycparser           2.20\r\nPygments            2.6.1\r\npyparsing           2.4.6\r\npyramid             1.10.4\r\npyramid-chameleon   0.3\r\npython-dateutil     2.8.1\r\nreadme-renderer     25.0\r\nrepoze.lru          0.7\r\nrequests            2.23.0\r\nruamel.yaml         0.16.10\r\nruamel.yaml.clib    0.2.0\r\nsetuptools          39.1.0\r\nsix                 1.14.0\r\nsoupsieve           2.0\r\nstrictyaml          1.0.6\r\ntoml                0.10.0\r\ntox                 3.14.6\r\ntranslationstring   1.3\r\nurllib3             1.25.8\r\nvenusian            3.0.0\r\nvirtualenv          20.0.15\r\nwaitress            1.4.3\r\nwebencodings        0.5.1\r\nWebOb               1.8.6\r\nWhoosh              2.7.4\r\nzipp                3.1.0\r\nzope.deprecation    4.4.0\r\nzope.interface      5.0.1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/783", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/783/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/783/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/783/events", "html_url": "https://github.com/devpi/devpi/issues/783", "id": 585731793, "node_id": "MDU6SXNzdWU1ODU3MzE3OTM=", "number": 783, "title": "pg8000 ssl interface changed", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-22T14:28:03Z", "updated_at": "2020-04-14T09:36:33Z", "closed_at": "2020-04-14T09:36:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@JonathanRRogers  pg8000 1.14.0 has changed its ssl interface and I'm not sure how to adapt to it. Instead of options for wrap_socket it now wants an SSLContext object.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/782", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/782/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/782/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/782/events", "html_url": "https://github.com/devpi/devpi/issues/782", "id": 580474610, "node_id": "MDU6SXNzdWU1ODA0NzQ2MTA=", "number": 782, "title": "Don't pass the file contents as strings through the software", "user": {"login": "hansingt", "id": 1199678, "node_id": "MDQ6VXNlcjExOTk2Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1199678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hansingt", "html_url": "https://github.com/hansingt", "followers_url": "https://api.github.com/users/hansingt/followers", "following_url": "https://api.github.com/users/hansingt/following{/other_user}", "gists_url": "https://api.github.com/users/hansingt/gists{/gist_id}", "starred_url": "https://api.github.com/users/hansingt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hansingt/subscriptions", "organizations_url": "https://api.github.com/users/hansingt/orgs", "repos_url": "https://api.github.com/users/hansingt/repos", "events_url": "https://api.github.com/users/hansingt/events{/privacy}", "received_events_url": "https://api.github.com/users/hansingt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-13T09:26:23Z", "updated_at": "2020-03-13T12:04:40Z", "closed_at": "2020-03-13T12:04:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Description\r\nCurrently, the `devpi-server` is reading the file contents it is receiving or sending into a string and passed this string through the whole system. For small files and without much pressure on this server, this might be fine.\r\nBut as soon as the files get larger or many files need to be transferred in parallel, the RAM usage of the devpi-server increases significantly. At my company we have large python packages (up to 1 GiB) which need to be transferred often. This results in high RAM usage and decrease in performance as the whole package data need to be read from the disk, kept in memory and then streamed to the client.\r\nUsing the `devpi-postgresql` backend, this issue is even worse, as the file contents are copied when inserting to (or reading from) the database and thus, are kept twice in memory!\r\n\r\n## Solution Suggestion\r\nA solution to this problem would be to not read the file contents if not needed and instead pass file-like objects (e.g. io.FileIO or io.BufferedRandom) and let both ends (the webserver and the database) read the data directly from this objects in chunks. \r\nAdditionally, the checksum of the file contens are currently calculated multiple times in the server, which is unnecessary as the contents don't change. This should be done only once and maybe even stored to the database for later reuse.\r\nThese two suggestions should significantly reduce the RAM usage and avoid wasting some CPU time.\r\n\r\n## Are you using the latest released version?\r\nI'm currently using the following configuration:\r\n\r\n- devpi-findlinks-2.0.1\r\n- devpi-ldap-1.2.2\r\n- devpi-postgresql-1.1.0\r\n- devpi-server-5.4.0\r\n- devpi-web-4.0.2\r\n\r\n## Provide the output of ``pip list`` from the virtual environment you are using\r\nSee above. We are not using a virtual environment but a docker deployment.\r\n\r\n## Provide the Python and operating system versions under which the issue occurs\r\nRunning in a docker container based on python:3.8-alpine", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/781", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/781/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/781/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/781/events", "html_url": "https://github.com/devpi/devpi/issues/781", "id": 579355114, "node_id": "MDU6SXNzdWU1NzkzNTUxMTQ=", "number": 781, "title": "pypi_whitelist being present causes general whitelisting and other problems", "user": {"login": "con-f-use", "id": 11145016, "node_id": "MDQ6VXNlcjExMTQ1MDE2", "avatar_url": "https://avatars0.githubusercontent.com/u/11145016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/con-f-use", "html_url": "https://github.com/con-f-use", "followers_url": "https://api.github.com/users/con-f-use/followers", "following_url": "https://api.github.com/users/con-f-use/following{/other_user}", "gists_url": "https://api.github.com/users/con-f-use/gists{/gist_id}", "starred_url": "https://api.github.com/users/con-f-use/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/con-f-use/subscriptions", "organizations_url": "https://api.github.com/users/con-f-use/orgs", "repos_url": "https://api.github.com/users/con-f-use/repos", "events_url": "https://api.github.com/users/con-f-use/events{/privacy}", "received_events_url": "https://api.github.com/users/con-f-use/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T15:36:05Z", "updated_at": "2020-04-25T15:10:32Z", "closed_at": "2020-04-25T15:10:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "So, I had migrated my devpi-server a while back from 4.8.x to 5.4.0. \r\n\r\nIt used to have `mirror_whitelist` and the obsoleted `pypi_whitlist` set, e.g. it was present in the output of `devpi index root/devel`, both empty, so nothing whitelisted. I just now realized that despite nothing in the whitelist a package from the parent index (pypi.org) got installed although a (lower) version of a package of the same name was on `root/devel`.\r\n\r\nI could correct that behavior by simply running `devpi index root/devel pypi_whitelist-=` . That leads me to belief something in the migration process is amiss.\r\n\r\nI understand `pypi_whitelist` was supposed to be removed and ignored since devpi-server 5.3.0.\r\n\r\nIn trying to reproduce this issue, I also noticed that when running `devpi root/devel mirror_whitelist=-` by accident, weird things happen:\r\n\r\n```\r\n$ devpi root/devel | grep mirror_\r\n  mirror_whitelist=\r\n\r\n$ devpi root/devel mirror_whitelist=- &>/dev/null  # introduces glitch\r\n\r\n$ devpi index root/devel 'mirror_whitelist=[testpkg,testpkg2]' | grep mirror_             \r\n/root/devel mirror_whitelist=[testpkg,testpkg2]\r\n  mirror_whitelist=-testpkg,testpkg2-\r\n\r\n$ devpi index root/devel 'mirror_whitelist=[]' | grep mirror_                             \r\n/root/devel mirror_whitelist=[]\r\n  mirror_whitelist=-\r\n```\r\n\r\nI.e. the unusual hyphen (`-`) cannot be removed once glitched into existence.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/777", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/777/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/777/events", "html_url": "https://github.com/devpi/devpi/issues/777", "id": 571443899, "node_id": "MDU6SXNzdWU1NzE0NDM4OTk=", "number": 777, "title": "Devpi-Server ignores port using `--port`", "user": {"login": "VikashKothary", "id": 4839435, "node_id": "MDQ6VXNlcjQ4Mzk0MzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4839435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VikashKothary", "html_url": "https://github.com/VikashKothary", "followers_url": "https://api.github.com/users/VikashKothary/followers", "following_url": "https://api.github.com/users/VikashKothary/following{/other_user}", "gists_url": "https://api.github.com/users/VikashKothary/gists{/gist_id}", "starred_url": "https://api.github.com/users/VikashKothary/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VikashKothary/subscriptions", "organizations_url": "https://api.github.com/users/VikashKothary/orgs", "repos_url": "https://api.github.com/users/VikashKothary/repos", "events_url": "https://api.github.com/users/VikashKothary/events{/privacy}", "received_events_url": "https://api.github.com/users/VikashKothary/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-26T14:55:30Z", "updated_at": "2020-03-11T12:07:29Z", "closed_at": "2020-03-11T12:07:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!\r\n\r\nPlease check the following points before submitting:\r\n\r\n- [ ] Are you using the latest released version?\r\n      If something is preventing you from trying with the newest version,\r\n      we would like to know so we can make it easier.\r\n- [x] Provide the output of ``pip list`` from the virtual environment you are using.\r\n- [x] Provide the Python and operating system versions under which the issue occurs.\r\n- [ ] If possible, provide a minimal example to reproduce the issue.\r\n\r\n-->\r\n\r\n#### Issue\r\nI'm trying to set the port which devpi runs on. I run\r\n`devpi-server --start --host 0.0.0.0 --port $DEVPI_PORT`\r\nI expect that it would use my port but it just uses the default.\r\n\r\n#### Thoughts\r\nhttps://github.com/devpi/devpi/blob/921bb905630753d92e3e1e9d13487a4f74bb080d/server/devpi_server/config.py#L95 Allows devpi to use options such as `--port`.\r\n\r\nIt doesn't seem to be used. I think It's meant to be added here. https://github.com/devpi/devpi/blob/921bb905630753d92e3e1e9d13487a4f74bb080d/server/devpi_server/init.py#L38\r\n#### Python and OS\r\nPython: 3.7\r\nOS: Debian GNU/Linux 10 (in Docker)\r\n\r\n#### pip list\r\nPackage                    Version  \r\n-------------------------- ---------\r\napipkg                     1.5      \r\nappdirs                    1.4.3    \r\nargon2-cffi                19.1.0   \r\nbeautifulsoup4             4.8.1    \r\nbleach                     3.1.0    \r\ncertifi                    2019.9.11\r\ncffi                       1.12.3   \r\nChameleon                  3.6.2    \r\nchardet                    3.0.4    \r\ncheck-manifest             0.39     \r\ncmarkgfm                   0.4.2    \r\ndefusedxml                 0.6.0    \r\ndevpi-cleaner              0.2.0    \r\ndevpi-client               5.0.0    \r\ndevpi-common               3.4.0    \r\ndevpi-findlinks            2.0.0    \r\ndevpi-ldap                 1.2.2    \r\ndevpi-lockdown             1.0.1    \r\ndevpi-plumber              0.5.1    \r\ndevpi-semantic-ui          0.2.2    \r\ndevpi-server               5.0.0    \r\ndevpi-slack                0.1.3    \r\ndevpi-web                  3.5.2    \r\ndocutils                   0.15.2   \r\nexecnet                    1.7.1    \r\nfilelock                   3.0.12   \r\nhupper                     1.8.1    \r\nidna                       2.8      \r\nimportlib-metadata         0.23     \r\nitsdangerous               1.1.0    \r\nldap3                      2.6.1    \r\nmore-itertools             7.2.0    \r\npackaging                  19.2     \r\npasslib                    1.7.1    \r\nPasteDeploy                2.0.1    \r\npip                        19.2.3   \r\npkginfo                    1.5.0.1  \r\nplaster                    1.0      \r\nplaster-pastedeploy        0.7      \r\npluggy                     0.13.0   \r\nprogressbar2               3.47.0   \r\npy                         1.8.0    \r\npyasn1                     0.4.7    \r\npycparser                  2.19     \r\nPygments                   2.4.2    \r\npyparsing                  2.4.2    \r\npyramid                    1.10.4   \r\npyramid-chameleon          0.3      \r\npython-dateutil            2.8.0    \r\npython-utils               2.3.0    \r\nPyYAML                     5.1.2    \r\nreadme-renderer            24.0     \r\nrepoze.lru                 0.7      \r\nrequests                   2.22.0   \r\nruamel.yaml                0.16.5   \r\nruamel.yaml.clib           0.2.0    \r\nsetuptools                 41.2.0   \r\nsix                        1.12.0   \r\nsoupsieve                  1.9.4    \r\nstrictyaml                 1.0.5    \r\ntoml                       0.10.0   \r\ntox                        3.14.0   \r\ntranslationstring          1.3      \r\ntwitter.common.contextutil 0.3.11   \r\ntwitter.common.dirutil     0.3.11   \r\ntwitter.common.lang        0.3.11   \r\nurllib3                    1.25.6   \r\nvenusian                   1.2.0    \r\nvirtualenv                 16.7.5   \r\nwaitress                   1.3.1    \r\nwebencodings               0.5.1    \r\nWebOb                      1.8.5    \r\nwheel                      0.33.6   \r\nWhoosh                     2.7.4    \r\nzipp                       0.6.0    \r\nzope.deprecation           4.4.0    \r\nzope.interface             4.6.0    \r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/776", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/776/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/776/events", "html_url": "https://github.com/devpi/devpi/issues/776", "id": 562399010, "node_id": "MDU6SXNzdWU1NjIzOTkwMTA=", "number": 776, "title": "Is `requests-only: false` interpreted the same as `requests-only: foo`?", "user": {"login": "aigr", "id": 1277246, "node_id": "MDQ6VXNlcjEyNzcyNDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1277246?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aigr", "html_url": "https://github.com/aigr", "followers_url": "https://api.github.com/users/aigr/followers", "following_url": "https://api.github.com/users/aigr/following{/other_user}", "gists_url": "https://api.github.com/users/aigr/gists{/gist_id}", "starred_url": "https://api.github.com/users/aigr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aigr/subscriptions", "organizations_url": "https://api.github.com/users/aigr/orgs", "repos_url": "https://api.github.com/users/aigr/repos", "events_url": "https://api.github.com/users/aigr/events{/privacy}", "received_events_url": "https://api.github.com/users/aigr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-10T08:25:15Z", "updated_at": "2020-04-25T07:18:23Z", "closed_at": "2020-04-25T07:18:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "After installing devpi-server, putting in some packages and then letting it sit for a while to get the queue to drop down to zero, I get the error message\r\n\r\n```\r\nNo changes processed by plugins for more than 30 minutes\r\n```\r\n\r\nAnd `server status` is set to `fatal`\r\n\r\nWhat does that even mean? Any clues about what I should change?\r\n\r\n### pip list\r\n```\r\nPackage             Version\r\n------------------- ----------\r\napipkg              1.5\r\nappdirs             1.4.3\r\nargon2-cffi         19.2.0\r\nattrs               19.3.0\r\nbeautifulsoup4      4.8.2\r\nbleach              3.1.0\r\ncertifi             2019.11.28\r\ncffi                1.14.0\r\nChameleon           3.6.2\r\nchardet             3.0.4\r\ncheck-manifest      0.40\r\ncmarkgfm            0.4.2\r\ndefusedxml          0.6.0\r\ndevpi-client        5.1.1\r\ndevpi-common        3.4.0\r\ndevpi-server        5.4.0\r\ndevpi-web           4.0.2\r\ndocutils            0.16\r\nexecnet             1.7.1\r\nfilelock            3.0.12\r\nhupper              1.9.1\r\nidna                2.8\r\nimportlib-metadata  1.5.0\r\nitsdangerous        1.1.0\r\npackaging           20.1\r\npasslib             1.7.2\r\nPasteDeploy         2.1.0\r\npip                 20.0.2\r\npkg-resources       0.0.0\r\npkginfo             1.5.0.1\r\nplaster             1.0\r\nplaster-pastedeploy 0.7\r\npluggy              0.13.1\r\npy                  1.8.1\r\npycparser           2.19\r\nPygments            2.5.2\r\npyparsing           2.4.6\r\npyramid             1.10.4\r\npyramid-chameleon   0.3\r\npython-dateutil     2.8.1\r\nreadme-renderer     24.0\r\nrepoze.lru          0.7\r\nrequests            2.22.0\r\nruamel.yaml         0.16.7\r\nruamel.yaml.clib    0.2.0\r\nsetuptools          45.2.0\r\nsix                 1.14.0\r\nsoupsieve           1.9.5\r\nstrictyaml          1.0.6\r\ntoml                0.10.0\r\ntox                 3.14.3\r\ntranslationstring   1.3\r\nurllib3             1.25.8\r\nvenusian            3.0.0\r\nvirtualenv          16.7.9\r\nwaitress            1.4.3\r\nwebencodings        0.5.1\r\nWebOb               1.8.6\r\nwheel               0.29.0\r\nWhoosh              2.7.4\r\nzipp                1.1.0\r\nzope.deprecation    4.4.0\r\nzope.interface      4.7.1\r\n```\r\n\r\nThis is on Debian 9.12.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/766", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/766/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/766/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/766/events", "html_url": "https://github.com/devpi/devpi/issues/766", "id": 555210301, "node_id": "MDU6SXNzdWU1NTUyMTAzMDE=", "number": 766, "title": "Fix simple typo: refering -> referring", "user": {"login": "timgates42", "id": 47873678, "node_id": "MDQ6VXNlcjQ3ODczNjc4", "avatar_url": "https://avatars1.githubusercontent.com/u/47873678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timgates42", "html_url": "https://github.com/timgates42", "followers_url": "https://api.github.com/users/timgates42/followers", "following_url": "https://api.github.com/users/timgates42/following{/other_user}", "gists_url": "https://api.github.com/users/timgates42/gists{/gist_id}", "starred_url": "https://api.github.com/users/timgates42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timgates42/subscriptions", "organizations_url": "https://api.github.com/users/timgates42/orgs", "repos_url": "https://api.github.com/users/timgates42/repos", "events_url": "https://api.github.com/users/timgates42/events{/privacy}", "received_events_url": "https://api.github.com/users/timgates42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-26T10:47:23Z", "updated_at": "2020-01-27T17:03:09Z", "closed_at": "2020-01-27T17:03:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There is a small typo in server/devpi_server/keyfs.py.\nShould read `referring` rather than `refering`.\n\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/765", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/765/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/765/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/765/events", "html_url": "https://github.com/devpi/devpi/issues/765", "id": 550062862, "node_id": "MDU6SXNzdWU1NTAwNjI4NjI=", "number": 765, "title": "Https / X-Original-url potentially not respected when using `devpi use` with Cloudflare's Argo Tunnel", "user": {"login": "fgmehlin", "id": 2466140, "node_id": "MDQ6VXNlcjI0NjYxNDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2466140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fgmehlin", "html_url": "https://github.com/fgmehlin", "followers_url": "https://api.github.com/users/fgmehlin/followers", "following_url": "https://api.github.com/users/fgmehlin/following{/other_user}", "gists_url": "https://api.github.com/users/fgmehlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/fgmehlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fgmehlin/subscriptions", "organizations_url": "https://api.github.com/users/fgmehlin/orgs", "repos_url": "https://api.github.com/users/fgmehlin/repos", "events_url": "https://api.github.com/users/fgmehlin/events{/privacy}", "received_events_url": "https://api.github.com/users/fgmehlin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-15T09:22:57Z", "updated_at": "2020-01-15T09:58:21Z", "closed_at": "2020-01-15T09:58:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey,\r\n\r\nThere seems to be an problem with using `https` to connect to devpi indexes. Currently, our setup looks like the following:\r\n\r\nOn a kubernetes cluster, we have: [Cloudflare argo tunnel] -> [Nginx] -> [Devpi-Server]\r\n\r\nWe want to connect to our devpi-server over https, hence using something like \r\n\r\n```\r\n\u279c  devpi use https://pypi.myserver.com/my-user/prod/ \r\nUsing existing basic auth for '<URL 'https://pypi.myserver.com/my-user/prod/'>'.\r\nThe password is stored unencrypted!\r\ncurrent devpi index: http://pypi.myserver.com/my-user/prod (not logged in) # Here devpi-server returns the index's address over http. \r\n``` \r\nSo, since devpi-server seems to return the index's address over `http`, `devpi login` does not work, since it tries to connect to the `http` index.\r\n\r\n```\r\n\u279c devpi login my-user --password my-password\r\n*redirected: https://pypi.myserver.com/+login    # Abnormal redirection\r\nGET https://pypi.myserver.com/+login\r\n404 Not Found: The resource could not be found.\r\n\r\npredicate mismatch for view PyPIView (request_method = POST) \r\n```\r\n\r\nWe have then noticed that devpi-server uses `waitress` to serve as wsgi server:\r\nhttps://github.com/devpi/devpi/blob/master/server/devpi_server/main.py#L199\r\n\r\nFrom waitress documentation, it seems that the `serve` function should add the `url_scheme='https'`, following what is documented [here](https://docs.pylonsproject.org/projects/waitress/en/latest/reverse-proxy.html).\r\n\r\nSo in the case of `devpi_server/main`, there should potentially be an additional `kwargs['url_scheme'] = 'https'` added in the function that serves waitress.\r\n\r\nI haven't validated that hypothesis yet, will try to do so and update the issue.\r\n\r\n\r\n\r\n\r\n\r\nVersions:\r\ndevpi-client: 5.1.1\r\ndevpi-server: 5.3.1\r\npython 3.7\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/762", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/762/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/762/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/762/events", "html_url": "https://github.com/devpi/devpi/issues/762", "id": 544458124, "node_id": "MDU6SXNzdWU1NDQ0NTgxMjQ=", "number": 762, "title": "How to avoid using `&amp;` for `&` while downloading a package from mirror URL?", "user": {"login": "anu-kailash", "id": 56872944, "node_id": "MDQ6VXNlcjU2ODcyOTQ0", "avatar_url": "https://avatars2.githubusercontent.com/u/56872944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anu-kailash", "html_url": "https://github.com/anu-kailash", "followers_url": "https://api.github.com/users/anu-kailash/followers", "following_url": "https://api.github.com/users/anu-kailash/following{/other_user}", "gists_url": "https://api.github.com/users/anu-kailash/gists{/gist_id}", "starred_url": "https://api.github.com/users/anu-kailash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anu-kailash/subscriptions", "organizations_url": "https://api.github.com/users/anu-kailash/orgs", "repos_url": "https://api.github.com/users/anu-kailash/repos", "events_url": "https://api.github.com/users/anu-kailash/events{/privacy}", "received_events_url": "https://api.github.com/users/anu-kailash/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-02T06:10:55Z", "updated_at": "2020-01-10T11:39:33Z", "closed_at": "2020-01-10T11:39:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to use [dockerized devpi][1] to mirror my organization's private pypi(pypicloud) hosted using a s3 bucket.\r\nThe simple index is visible but when I try to install/download one of the packages listed, I get a 403 from S3. Initially I thought it to be a permissions issue, but on comparing the download URL from direct pip install from private pypi (which works fine) and the URL from devpi(local mirror) pip install, I see that all the `&` between the parameters like Signature, Expires and AWSAccessKeyId have been replaced by `&amp;`\r\n\r\n```\r\ndevpi_1  | 2020-01-02 04:04:27,264 INFO  [req8] GET /root/pypi/+e/https_<s3_bucket>.s3.amazonaws.com_5ce3_<pkgname>/<pkgname>-1.6.54-py2-none-any.whl\r\ndevpi_1  | 2020-01-02 04:04:28,060 ERROR [req8] [Wtx19] error 403 getting https://<s3_bucket>.s3.amazonaws.com/5ce3/<pkgname>/<pkgname>-1.6.54-py2-none-any.whl?Signature=0CKDD9FUTEGi%2BbVCCSQy8na%2B04M%3D&amp;Expires=1578024263&amp;AWSAccessKeyId=<AWS-key>&amp;x-amz-security-token=IQoJb3JpZ2luX2VjEKv//////////wEaCWV1LXdlc3QtMSJGMEQCIEun9GCSbCYLWdFbqTpEaQIZTsn9yJ3Y16GeC4QXq6pvAiALICvkSk7txVZ67VYxm%2BH0QRCzeHqF/CXlzY2NQ6jd5Sq0AwgkEAAaDDI3MzkzNTU2Njg5NyIMXbbQoq2JfrMTpP2zKpEDcfjzykSWpYaxYGI%2BSRRF3qomng2bSpIiYTc9U4Cjw2u/OIt4aRsEENdqiMXzRULfVPsVp3388%2Bb4jc/XLuDoEqAL5L3hVAt1xE6rNrPsIisplQwrjONSSfiOLBzAu/pVjxU37ww2m1cZJNiB6zTMLf8kenmb7yEZclQASMxg%2Boq/nyZvyXrzk11Rth4HXYHUsFTKVh9ANjp7r3oDv0Q3/zSGDD6M2HXNMlpcrPOQcXIe2Q/cYvfiJW4MiqlS7Oh5Ub20KD9Q91PYru/YNuxdi%2BawesZhwHw4xe2egxeAQzS3yVPuyVYhOsyYQ2JagXs9h%2B72bYncyywT5LW4PvcZGHukiZ3aB4vQtkFoPmc4VN2Wa9KbpYod0jOksN/aRtN8D35VlF8896N9TZUZ6mJGLDCoVWvn/1ZQY2uV9oV1nufVB6W8bYTarZmmGDwU/GD9qQxD4CLosVx6cwHridO23vR1/4Vzbqblwt4moVNeypzqW%2BbOO9N6Npx6B9Rbo1gtiiZOMLkL56GXH/dotRVSdWIw4b218AU67AHb83rzu7dAYtH9L0bS02sqL12iem/RMFeR%2BHIRF2m8JZ2PO8t8XyNleMLKayAmKyBckO7T6qq3dtrRH/zka1wkSZ2anBZ7ku87TYI7li%2ByQ23Lf5zh2VqyqGnLL/zi8NhF3kPCU5OqbxY0y90et8ZYk4oZIak4LNbWpBV/N6ofBLJml1fBXfnrck1LAsPfzoOwHHkxmAzckkM4XT6I8auiFlfWShPJ1pdshkKMhBArECkRGZZGQhQw0SGp0CC6fx7Q/Ho31UzUarOwMrYgch6%2BuaCShijd3dHPd1n2FTEG9F6bjMqp%2BLq18X/04g%3D%3D\r\n```\r\n\r\nOn manually replacing these `&amp;` back with `&`, the URL works perfectly and I can download the package. My question is, how to fix the issue within devpi or any other alternatives to be explored for mirroring a remote pypi repository.\r\n\r\n\r\n  [1]: https://github.com/muccg/docker-devpi", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/761", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/761/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/761/events", "html_url": "https://github.com/devpi/devpi/issues/761", "id": 541938409, "node_id": "MDU6SXNzdWU1NDE5Mzg0MDk=", "number": 761, "title": "How to update favicon and page title of devpi web", "user": {"login": "dullahan8", "id": 7637030, "node_id": "MDQ6VXNlcjc2MzcwMzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/7637030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dullahan8", "html_url": "https://github.com/dullahan8", "followers_url": "https://api.github.com/users/dullahan8/followers", "following_url": "https://api.github.com/users/dullahan8/following{/other_user}", "gists_url": "https://api.github.com/users/dullahan8/gists{/gist_id}", "starred_url": "https://api.github.com/users/dullahan8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dullahan8/subscriptions", "organizations_url": "https://api.github.com/users/dullahan8/orgs", "repos_url": "https://api.github.com/users/dullahan8/repos", "events_url": "https://api.github.com/users/dullahan8/events{/privacy}", "received_events_url": "https://api.github.com/users/dullahan8/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-23T23:58:28Z", "updated_at": "2020-04-15T20:02:52Z", "closed_at": "2020-04-15T20:02:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running two instances of the devpi server for my users. A user pointed out it would be a good idea to make the two instances be visually distinguishable from each other. Is it possible to update the page title where it says \"devpi\" beside the search bar of the web page and the favicon and where would I do it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/760", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/760/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/760/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/760/events", "html_url": "https://github.com/devpi/devpi/issues/760", "id": 540432312, "node_id": "MDU6SXNzdWU1NDA0MzIzMTI=", "number": 760, "title": "Disk Cleanup on Mirrors", "user": {"login": "exhuma", "id": 65717, "node_id": "MDQ6VXNlcjY1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/65717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/exhuma", "html_url": "https://github.com/exhuma", "followers_url": "https://api.github.com/users/exhuma/followers", "following_url": "https://api.github.com/users/exhuma/following{/other_user}", "gists_url": "https://api.github.com/users/exhuma/gists{/gist_id}", "starred_url": "https://api.github.com/users/exhuma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/exhuma/subscriptions", "organizations_url": "https://api.github.com/users/exhuma/orgs", "repos_url": "https://api.github.com/users/exhuma/repos", "events_url": "https://api.github.com/users/exhuma/events{/privacy}", "received_events_url": "https://api.github.com/users/exhuma/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-19T16:49:17Z", "updated_at": "2020-04-07T06:24:22Z", "closed_at": "2020-04-07T06:24:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Today we've run into a \"No space left on device\" error on our devpi instance and noticed that the mirror of \"pypi\" has completely filled up the disk.\r\n\r\nThis was not really surprising as we kept the available disk-space fairly conservative. By setting it up this way I was \"expecting\" it to fail at some point.\r\n\r\nWhat was surprising however was the difficulty of cleanup. I came across #542 which seemed scary at first. Yet, I gave it a try to delete a file to be able to do *anything* at all really because most API calls failed due to missing free disk-space. Deleting some files helped some, *but* I ran into an interesting issue: When deleting small packages, the `.sqlite` file grows by more bytes than the size of the deleted files, which leads to the weird behaviour that you *occupy more* disk-space by deleting packages.\r\n\r\nBecause the `pypi` index on our side is a mirror, I decided it was safe to clean it up as missing packages would be refetched next time they are needed and ran the following sledge-hammer of a command:\r\n\r\n```\r\nfor line in `devpi list`; do devpi remove -y ${line}; done\r\n```\r\n\r\nAnd to my surprise the free disk space *declined* (because of the increase of space in `.sqlite`).\r\n\r\nI resorted to just manually removing some big packages like `pyqt` and `sphinx` which gave me some breathing room.\r\n\r\nBut apart from nuking the index and recreating it I don't see a good option to reclaim disk-space.\r\n\r\nWould it not make sense to allow a optional periodic cleanup of a volatile mirror? Something which removes all files older than a specific age?\r\n\r\nAlso, I noticed that the mirror always downloads all files from a release, even files for a platform which is not needed (say, macosx on a linux platform). Would it not make sense to download only what's really needed?\r\n\r\nMaybe I am just using mirrors for a use-case that was not intended.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/759", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/759/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/759/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/759/events", "html_url": "https://github.com/devpi/devpi/issues/759", "id": 539938091, "node_id": "MDU6SXNzdWU1Mzk5MzgwOTE=", "number": 759, "title": "Package info page not working with UpstreamError.", "user": {"login": "turokm", "id": 29981311, "node_id": "MDQ6VXNlcjI5OTgxMzEx", "avatar_url": "https://avatars2.githubusercontent.com/u/29981311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/turokm", "html_url": "https://github.com/turokm", "followers_url": "https://api.github.com/users/turokm/followers", "following_url": "https://api.github.com/users/turokm/following{/other_user}", "gists_url": "https://api.github.com/users/turokm/gists{/gist_id}", "starred_url": "https://api.github.com/users/turokm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/turokm/subscriptions", "organizations_url": "https://api.github.com/users/turokm/orgs", "repos_url": "https://api.github.com/users/turokm/repos", "events_url": "https://api.github.com/users/turokm/events{/privacy}", "received_events_url": "https://api.github.com/users/turokm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580728710, "node_id": "MDU6TGFiZWw1ODA3Mjg3MTA=", "url": "https://api.github.com/repos/devpi/devpi/labels/investigate", "name": "investigate", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-18T21:37:38Z", "updated_at": "2020-04-25T07:23:42Z", "closed_at": "2020-04-25T07:23:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having a bit of an issue with devpi's web interface.\r\n\r\nI'm running these versions:\r\n```\r\n$ pip list | grep devpi\r\ndevpi-client        5.1.0              \r\ndevpi-common        3.4.0              \r\ndevpi-server        5.2.0              \r\ndevpi-web           4.0.0              \r\n```\r\n\r\nI started a devpi server, and used the devpi client to upload several *.tgz files.\r\n\r\nThey were registered and uploaded:\r\n\r\n```\r\n$ devpi upload *\r\nregister foo-0.5.0.4 to http://localhost:8080/testuser/dev/\r\nfile_upload of foo-0.5.0.4.tar.gz to http://localhost:8080/testuser/dev/\r\nregister foo-0.5 to http://localhost:8080/testuser/dev/\r\nfile_upload of foo-0.5.tar.gz to http://localhost:8080/testuser/dev/\r\n```\r\n\r\nWhen I navigate to the web page for http://localhost:8080/testuser/dev, I only see version 0.5.0.4.\r\n\r\nI can download the .tgz from the link under \"Releases\", but the \"Info page\" link shows:\r\n\r\n```\r\nInternal Server Error\r\n\r\nThe server encountered an unexpected internal server error\r\n\r\n(generated by waitress)\r\n```\r\n\r\nAnd the server log says:\r\n```\r\n2019-12-18 16:09:24,303 ERROR Exception while serving /testuser/dev/foo/0.5.0.4\r\nTraceback (most recent call last):\r\n  File \"/home/qestrat1/system/conda/envs/pypiserver-local/lib/python3.8/site-packages/pyramid/tweens.py\", line 13, in _error_handler\r\n    response = request.invoke_exception_view(exc_info)\r\n  File \"/home/qestrat1/system/conda/envs/pypiserver-local/lib/python3.8/site-packages/pyramid/view.py\", line 779, in invoke_exception_view\r\n    raise HTTPNotFound\r\npyramid.httpexceptions.HTTPNotFound: The resource could not be found.\r\n```\r\n\r\nNot sure if I'm missing something simple and obvious.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/758", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/758/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/758/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/758/events", "html_url": "https://github.com/devpi/devpi/issues/758", "id": 538387766, "node_id": "MDU6SXNzdWU1MzgzODc3NjY=", "number": 758, "title": "how to configure parameters of target url", "user": {"login": "flashfiring", "id": 32921558, "node_id": "MDQ6VXNlcjMyOTIxNTU4", "avatar_url": "https://avatars2.githubusercontent.com/u/32921558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flashfiring", "html_url": "https://github.com/flashfiring", "followers_url": "https://api.github.com/users/flashfiring/followers", "following_url": "https://api.github.com/users/flashfiring/following{/other_user}", "gists_url": "https://api.github.com/users/flashfiring/gists{/gist_id}", "starred_url": "https://api.github.com/users/flashfiring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flashfiring/subscriptions", "organizations_url": "https://api.github.com/users/flashfiring/orgs", "repos_url": "https://api.github.com/users/flashfiring/repos", "events_url": "https://api.github.com/users/flashfiring/events{/privacy}", "received_events_url": "https://api.github.com/users/flashfiring/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-16T12:39:43Z", "updated_at": "2020-04-07T06:31:37Z", "closed_at": "2020-04-07T06:31:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n![image](https://user-images.githubusercontent.com/32921558/70907689-75890380-2044-11ea-909d-e0a2aad0b07b.png)\r\n\r\nthe value of mirror_url is \"https://pypi.org/simple/\" by default.\r\nBut how to configure it to something else .", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/756", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/756/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/756/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/756/events", "html_url": "https://github.com/devpi/devpi/issues/756", "id": 538315802, "node_id": "MDU6SXNzdWU1MzgzMTU4MDI=", "number": 756, "title": "Links to toxresults broken when using \"latest\" or \"stable\" version.", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580720853, "node_id": "MDU6TGFiZWw1ODA3MjA4NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-web", "name": "devpi-web", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-16T10:18:50Z", "updated_at": "2019-12-17T15:05:07Z", "closed_at": "2019-12-17T15:05:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The version page generates broken links to the tox results when using ``latest`` or ``stable`` as version in the URL.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/753", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/753/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/753/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/753/events", "html_url": "https://github.com/devpi/devpi/issues/753", "id": 538163194, "node_id": "MDU6SXNzdWU1MzgxNjMxOTQ=", "number": 753, "title": "how to modify devpi-server default mirror_url ?", "user": {"login": "lengxu", "id": 4252198, "node_id": "MDQ6VXNlcjQyNTIxOTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4252198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lengxu", "html_url": "https://github.com/lengxu", "followers_url": "https://api.github.com/users/lengxu/followers", "following_url": "https://api.github.com/users/lengxu/following{/other_user}", "gists_url": "https://api.github.com/users/lengxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/lengxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lengxu/subscriptions", "organizations_url": "https://api.github.com/users/lengxu/orgs", "repos_url": "https://api.github.com/users/lengxu/repos", "events_url": "https://api.github.com/users/lengxu/events{/privacy}", "received_events_url": "https://api.github.com/users/lengxu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-16T03:22:48Z", "updated_at": "2020-04-07T06:31:50Z", "closed_at": "2020-04-07T06:31:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to change default reading remote: https://files.pythonhosted.org/packages url to http://mirrors.aliyun.com/pypi/simple/\r\nWhat shall I do?\r\n\r\npreviously on :\r\n\r\n$ devpi index root/pypi\r\n\r\n```\r\nhttp://pypi.mydomain.com/root/pypi:\r\n  type=mirror\r\n  volatile=False\r\n  mirror_url=http://mirrors.aliyun.com/pypi/simple/\r\n  mirror_web_url_fmt=https://pypi.org/project/{name}/\r\n  title=PyPI\r\n```\r\n\r\nthis is devpi-client,i want change devpi-server by default.\r\n\r\ntks.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/751", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/751/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/751/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/751/events", "html_url": "https://github.com/devpi/devpi/issues/751", "id": 536195470, "node_id": "MDU6SXNzdWU1MzYxOTU0NzA=", "number": 751, "title": "How to regular clean  the package\uff1f", "user": {"login": "ZhangSIming-blyq", "id": 58658883, "node_id": "MDQ6VXNlcjU4NjU4ODgz", "avatar_url": "https://avatars2.githubusercontent.com/u/58658883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhangSIming-blyq", "html_url": "https://github.com/ZhangSIming-blyq", "followers_url": "https://api.github.com/users/ZhangSIming-blyq/followers", "following_url": "https://api.github.com/users/ZhangSIming-blyq/following{/other_user}", "gists_url": "https://api.github.com/users/ZhangSIming-blyq/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhangSIming-blyq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhangSIming-blyq/subscriptions", "organizations_url": "https://api.github.com/users/ZhangSIming-blyq/orgs", "repos_url": "https://api.github.com/users/ZhangSIming-blyq/repos", "events_url": "https://api.github.com/users/ZhangSIming-blyq/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhangSIming-blyq/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-11T07:38:37Z", "updated_at": "2020-04-07T06:32:12Z", "closed_at": "2020-04-07T06:32:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here I want to clean my package on /root/dev index, I use a simple shell script:\r\n```shell\r\n#!/bin/bash\r\n#use devpi's dev index\r\ndevpi use https://devpi.com/root/dev\r\ndevpi login root --password=\"xxxxxxxx\"\r\n#Guaranteed on dev index\r\ndevpi use | grep \"current devpi index\" | grep \"/root/dev\"\r\nif [ $? != 0 ];then\r\n    exit 1\r\nfi\r\necho -e \"current devpi index is /root/dev\\n\"\r\n\r\n#delete packages use loop\r\nfor package in `devpi list | xargs`\r\ndo\r\n    devpi remove -y $package >/dev/null 2>&1\r\n    if [ $? == 0 ];then\r\n        echo \"Delete package $package on dev index successfully.\"\r\n    fi\r\ndone\r\n```\r\n\r\nI want to clean the package which is existed more than 7 days, but how to judge the time about upload?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/750", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/750/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/750/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/750/events", "html_url": "https://github.com/devpi/devpi/issues/750", "id": 535647341, "node_id": "MDU6SXNzdWU1MzU2NDczNDE=", "number": 750, "title": "database disk image is malformed", "user": {"login": "ZhangSIming-blyq", "id": 58658883, "node_id": "MDQ6VXNlcjU4NjU4ODgz", "avatar_url": "https://avatars2.githubusercontent.com/u/58658883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhangSIming-blyq", "html_url": "https://github.com/ZhangSIming-blyq", "followers_url": "https://api.github.com/users/ZhangSIming-blyq/followers", "following_url": "https://api.github.com/users/ZhangSIming-blyq/following{/other_user}", "gists_url": "https://api.github.com/users/ZhangSIming-blyq/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhangSIming-blyq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhangSIming-blyq/subscriptions", "organizations_url": "https://api.github.com/users/ZhangSIming-blyq/orgs", "repos_url": "https://api.github.com/users/ZhangSIming-blyq/repos", "events_url": "https://api.github.com/users/ZhangSIming-blyq/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhangSIming-blyq/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-10T10:49:07Z", "updated_at": "2019-12-11T02:19:11Z", "closed_at": "2019-12-11T02:19:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "devpi's log:\r\n\r\n```\r\n/usr/local/lib/python3.6/site-packages/devpi_ldap/main.py:65: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\r\n  _config = yaml.load(f)\r\n/usr/local/lib/python3.6/site-packages/devpi_ldap/main.py:65: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\r\n  _config = yaml.load(f)\r\n2019-12-10 18:43:18,163 INFO  NOCTX Loading node info from /data/server/.nodeinfo\r\n2019-12-10 18:43:18,232 INFO  NOCTX wrote nodeinfo to: /data/server/.nodeinfo\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/devpi-server\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/main.py\", line 67, in main\r\n    return _main(pluginmanager, argv=argv)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/main.py\", line 112, in _main\r\n    if not xom.is_replica() and xom.keyfs.get_current_serial() == -1:\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_common/types.py\", line 38, in get\r\n    x = self._property_cache[f] = f(self)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/main.py\", line 280, in keyfs\r\n    cache_size=self.config.args.keyfs_cache_size)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/keyfs.py\", line 134, in __init__\r\n    self._storage.perform_crash_recovery()\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/keyfs_sqlite_fs.py\", line 94, in perform_crash_recovery\r\n    if conn.last_changelog_serial == -1:\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_common/types.py\", line 38, in get\r\n    x = self._property_cache[f] = f(self)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/keyfs_sqlite.py\", line 34, in last_changelog_serial\r\n    return self.db_read_last_changelog_serial()\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/keyfs_sqlite.py\", line 38, in db_read_last_changelog_serial\r\n    res = self._sqlconn.execute(q).fetchone()[0]\r\nsqlite3.DatabaseError: database disk image is malformed\r\n```\r\n\r\nAnd devpi is down, I can't use it.\r\nIt seems that some file in /data/server is bug\r\nI want know the reason?\r\n\r\nCurrently, the only way to recover is use another serverdir with backup files", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/749", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/749/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/749/events", "html_url": "https://github.com/devpi/devpi/issues/749", "id": 533620278, "node_id": "MDU6SXNzdWU1MzM2MjAyNzg=", "number": 749, "title": "Pypi Caching", "user": {"login": "kurtabersold", "id": 1917706, "node_id": "MDQ6VXNlcjE5MTc3MDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1917706?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kurtabersold", "html_url": "https://github.com/kurtabersold", "followers_url": "https://api.github.com/users/kurtabersold/followers", "following_url": "https://api.github.com/users/kurtabersold/following{/other_user}", "gists_url": "https://api.github.com/users/kurtabersold/gists{/gist_id}", "starred_url": "https://api.github.com/users/kurtabersold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kurtabersold/subscriptions", "organizations_url": "https://api.github.com/users/kurtabersold/orgs", "repos_url": "https://api.github.com/users/kurtabersold/repos", "events_url": "https://api.github.com/users/kurtabersold/events{/privacy}", "received_events_url": "https://api.github.com/users/kurtabersold/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-05T21:53:12Z", "updated_at": "2020-04-07T06:32:38Z", "closed_at": "2020-04-07T06:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have some Python2 applications that won't be ported to Python3, and I want to ensure I will have cached copies of the necessary dependencies before the end of support for python2.\r\n\r\nIf a package gets deleted from pypi, will the cached copy on devpi still be available, or will it also get deleted?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/746", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/746/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/746/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/746/events", "html_url": "https://github.com/devpi/devpi/issues/746", "id": 531840845, "node_id": "MDU6SXNzdWU1MzE4NDA4NDU=", "number": 746, "title": "remove devpi-client's tox dependency for non-development install", "user": {"login": "cjw296", "id": 632049, "node_id": "MDQ6VXNlcjYzMjA0OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/632049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjw296", "html_url": "https://github.com/cjw296", "followers_url": "https://api.github.com/users/cjw296/followers", "following_url": "https://api.github.com/users/cjw296/following{/other_user}", "gists_url": "https://api.github.com/users/cjw296/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjw296/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjw296/subscriptions", "organizations_url": "https://api.github.com/users/cjw296/orgs", "repos_url": "https://api.github.com/users/cjw296/repos", "events_url": "https://api.github.com/users/cjw296/events{/privacy}", "received_events_url": "https://api.github.com/users/cjw296/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-12-03T09:23:29Z", "updated_at": "2020-04-07T07:47:55Z", "closed_at": "2020-04-07T06:33:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm confused why tox is a dependency of devpy-client. It seems unrelated to devpi-client's use case and is a pretty heavy dependency that [causes ](https://github.com/tox-dev/tox/pull/1472) [issues](https://github.com/tox-dev/tox/issues/1473).\r\n\r\nWould it be possible to remove 'tox' and hopefully 'check-manifest' and maybe even 'pkginfo', or at least make them development-only dependencies?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/742", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/742/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/742/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/742/events", "html_url": "https://github.com/devpi/devpi/issues/742", "id": 529002555, "node_id": "MDU6SXNzdWU1MjkwMDI1NTU=", "number": 742, "title": "Can I duplicate or rename an index?", "user": {"login": "ghicks-rmn", "id": 5115694, "node_id": "MDQ6VXNlcjUxMTU2OTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5115694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghicks-rmn", "html_url": "https://github.com/ghicks-rmn", "followers_url": "https://api.github.com/users/ghicks-rmn/followers", "following_url": "https://api.github.com/users/ghicks-rmn/following{/other_user}", "gists_url": "https://api.github.com/users/ghicks-rmn/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghicks-rmn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghicks-rmn/subscriptions", "organizations_url": "https://api.github.com/users/ghicks-rmn/orgs", "repos_url": "https://api.github.com/users/ghicks-rmn/repos", "events_url": "https://api.github.com/users/ghicks-rmn/events{/privacy}", "received_events_url": "https://api.github.com/users/ghicks-rmn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-26T22:17:23Z", "updated_at": "2020-04-07T06:34:49Z", "closed_at": "2020-04-07T06:34:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently running devpi 4.1. \r\n\r\nWhen I originally set it up we created a single index (we'll call it `local`) that had `root/pypi` as a base, and put our custom packages in it. \r\n\r\nNow I want to separate our custom packages out into their own index (with no base - call this one `internal`), but do so without disrupting builds and users that expect the current index to have PyPI packages. So, my end goal is to have `internal` with custom packages and no base, and `local` with both `internal` and `root/pypi` as bases.\r\n\r\nI can think of a couple ways to do this relatively transparently, but they all involve duplicating an index under another name, copying an index package-by-package, or renaming an index. I can't seem to find an easy way to do any of these. Can someone help me figure one of these out, or possibly suggest another option?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/740", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/740/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/740/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/740/events", "html_url": "https://github.com/devpi/devpi/issues/740", "id": 523412202, "node_id": "MDU6SXNzdWU1MjM0MTIyMDI=", "number": 740, "title": "RuntimeError: Could not start process devpi-server", "user": {"login": "CSimpiFoN", "id": 35144906, "node_id": "MDQ6VXNlcjM1MTQ0OTA2", "avatar_url": "https://avatars1.githubusercontent.com/u/35144906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CSimpiFoN", "html_url": "https://github.com/CSimpiFoN", "followers_url": "https://api.github.com/users/CSimpiFoN/followers", "following_url": "https://api.github.com/users/CSimpiFoN/following{/other_user}", "gists_url": "https://api.github.com/users/CSimpiFoN/gists{/gist_id}", "starred_url": "https://api.github.com/users/CSimpiFoN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CSimpiFoN/subscriptions", "organizations_url": "https://api.github.com/users/CSimpiFoN/orgs", "repos_url": "https://api.github.com/users/CSimpiFoN/repos", "events_url": "https://api.github.com/users/CSimpiFoN/events{/privacy}", "received_events_url": "https://api.github.com/users/CSimpiFoN/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-15T11:18:26Z", "updated_at": "2019-12-09T12:28:35Z", "closed_at": "2019-11-18T16:00:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "devpi-server version 5.2.0 cannot be started on a CentOS 7.7 server with Python3.\r\n\r\n`# devpi-server --version`\r\n`5.2.0`\r\n\r\n`# devpi-server --start`\r\n`2019-11-15 11:10:00,088 INFO  NOCTX Loading node info from /root/.devpi/server/.nodeinfo`\r\n`2019-11-15 11:10:00,089 INFO  NOCTX wrote nodeinfo to: /root/.devpi/server/.nodeinfo`\r\n`/usr/local/lib/python3.6/site-packages/devpi_server/bgserver.py:31: UserWarning: Use of --start, --stop, --status and --log is deprecated. You should use a process manager of your OS, for example: systemd for Linux, Windows Services, launchd for macOS or http://supervisord.org/`\r\n`Also see the devpi-gen-config option to create example configuration files for such services.`\r\n`  \"Use of --start, --stop, --status and --log is deprecated. \"`\r\n`starting background devpi-server at http://localhost:3141`\r\n`/root/.devpi/server/.xproc/devpi-server$ /usr/bin/devpi-server`\r\n`process 'devpi-server' started pid=111378`\r\n`Traceback (most recent call last):`\r\n`  File \"/usr/bin/devpi-server\", line 11, in <module>`\r\n`    sys.exit(main())`\r\n`  File \"/usr/local/lib/python3.6/site-packages/devpi_server/main.py\", line 80, in main`\r\n`    return _main(pluginmanager, argv=argv)`\r\n`  File \"/usr/local/lib/python3.6/site-packages/devpi_server/main.py\", line 164, in _main`\r\n`    return bgserver.start(args, argv[1:])`\r\n`  File \"/usr/local/lib/python3.6/site-packages/devpi_server/bgserver.py\", line 86, in start`\r\n`    self.xproc.ensure(\"devpi-server\", prepare_devpiserver)`\r\n`  File \"/usr/local/lib/python3.6/site-packages/devpi_server/vendor/xprocess.py\", line 171, in ensure`\r\n`    raise RuntimeError(\"Could not start process %s\" % name)`\r\n`RuntimeError: Could not start process devpi-server`\r\n\r\nThe service was installed by pip3\r\n`# pip3 install devpi-server`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/738", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/738/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/738/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/738/events", "html_url": "https://github.com/devpi/devpi/issues/738", "id": 520221323, "node_id": "MDU6SXNzdWU1MjAyMjEzMjM=", "number": 738, "title": "postgres storage plugin can't use SSL", "user": {"login": "JonathanRRogers", "id": 1103019, "node_id": "MDQ6VXNlcjExMDMwMTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1103019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JonathanRRogers", "html_url": "https://github.com/JonathanRRogers", "followers_url": "https://api.github.com/users/JonathanRRogers/followers", "following_url": "https://api.github.com/users/JonathanRRogers/following{/other_user}", "gists_url": "https://api.github.com/users/JonathanRRogers/gists{/gist_id}", "starred_url": "https://api.github.com/users/JonathanRRogers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JonathanRRogers/subscriptions", "organizations_url": "https://api.github.com/users/JonathanRRogers/orgs", "repos_url": "https://api.github.com/users/JonathanRRogers/repos", "events_url": "https://api.github.com/users/JonathanRRogers/events{/privacy}", "received_events_url": "https://api.github.com/users/JonathanRRogers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-08T20:34:17Z", "updated_at": "2019-11-12T06:56:39Z", "closed_at": "2019-11-12T06:56:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The postgres storage plugin exposes most useful connection options from pg8000, but not \"ssl\".", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/737", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/737/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/737/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/737/events", "html_url": "https://github.com/devpi/devpi/issues/737", "id": 518775879, "node_id": "MDU6SXNzdWU1MTg3NzU4Nzk=", "number": 737, "title": "devpi-server runs at 100% all the time inside my Docker container", "user": {"login": "JeffLabonte", "id": 9425955, "node_id": "MDQ6VXNlcjk0MjU5NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/9425955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffLabonte", "html_url": "https://github.com/JeffLabonte", "followers_url": "https://api.github.com/users/JeffLabonte/followers", "following_url": "https://api.github.com/users/JeffLabonte/following{/other_user}", "gists_url": "https://api.github.com/users/JeffLabonte/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffLabonte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffLabonte/subscriptions", "organizations_url": "https://api.github.com/users/JeffLabonte/orgs", "repos_url": "https://api.github.com/users/JeffLabonte/repos", "events_url": "https://api.github.com/users/JeffLabonte/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffLabonte/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-06T21:10:54Z", "updated_at": "2019-11-10T19:40:10Z", "closed_at": "2019-11-10T19:37:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have dockerized devpi-server for my personal use, and I have noticed that it runs at 100% all the time so I reduced the cpus rights of the devpi container as a workaround for now!\r\n\r\nI seem to be running the latest version available, here is a screenshot of a `pip freeze`\r\n\r\n![image](https://user-images.githubusercontent.com/9425955/68338201-f51fcc00-00af-11ea-8917-24ba7a1b4824.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/732", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/732/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/732/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/732/events", "html_url": "https://github.com/devpi/devpi/issues/732", "id": 512747630, "node_id": "MDU6SXNzdWU1MTI3NDc2MzA=", "number": 732, "title": "`unix-socket` option needs companion `unix-socket-perms` option", "user": {"login": "nickwilliams-eventbrite", "id": 8230828, "node_id": "MDQ6VXNlcjgyMzA4Mjg=", "avatar_url": "https://avatars3.githubusercontent.com/u/8230828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickwilliams-eventbrite", "html_url": "https://github.com/nickwilliams-eventbrite", "followers_url": "https://api.github.com/users/nickwilliams-eventbrite/followers", "following_url": "https://api.github.com/users/nickwilliams-eventbrite/following{/other_user}", "gists_url": "https://api.github.com/users/nickwilliams-eventbrite/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickwilliams-eventbrite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickwilliams-eventbrite/subscriptions", "organizations_url": "https://api.github.com/users/nickwilliams-eventbrite/orgs", "repos_url": "https://api.github.com/users/nickwilliams-eventbrite/repos", "events_url": "https://api.github.com/users/nickwilliams-eventbrite/events{/privacy}", "received_events_url": "https://api.github.com/users/nickwilliams-eventbrite/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-25T22:40:21Z", "updated_at": "2019-10-27T06:10:53Z", "closed_at": "2019-10-27T06:10:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running in a Docker container (for example), Nginx might be running as user `www-data`, but Devpi might be running as some other user. If you use the new `--unix-socket` option, Waitress creates the the Unix socket to be owned by the user running Devpi with default permissions `600`, which means that no other users can use the socket. I'm currently working around this by spinning up something to `chmod` the file after Devpi starts, but this is not ideal. Waitress has a `unix_socket_perms` option that defaults to `'600'` (the string, not the number). Devpi should add a `--unix-socket-perms` option to mirror it. :-) \r\n\r\nSee: https://docs.pylonsproject.org/projects/waitress/en/stable/api.html\r\n\r\nRelated to: issue #253, PR #718 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/731", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/731/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/731/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/731/events", "html_url": "https://github.com/devpi/devpi/issues/731", "id": 510064333, "node_id": "MDU6SXNzdWU1MTAwNjQzMzM=", "number": 731, "title": "Simple indexes with \"simple/\" in addition or as an alternative to \"+simple/\"", "user": {"login": "henryborchers", "id": 7454877, "node_id": "MDQ6VXNlcjc0NTQ4Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7454877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryborchers", "html_url": "https://github.com/henryborchers", "followers_url": "https://api.github.com/users/henryborchers/followers", "following_url": "https://api.github.com/users/henryborchers/following{/other_user}", "gists_url": "https://api.github.com/users/henryborchers/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryborchers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryborchers/subscriptions", "organizations_url": "https://api.github.com/users/henryborchers/orgs", "repos_url": "https://api.github.com/users/henryborchers/repos", "events_url": "https://api.github.com/users/henryborchers/events{/privacy}", "received_events_url": "https://api.github.com/users/henryborchers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-21T15:44:06Z", "updated_at": "2019-10-21T20:43:41Z", "closed_at": "2019-10-21T20:43:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there any way to make the simple indexes to devpi hosted repositories use \"/simple/\" instead of \"/+simple/\" URL?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/730", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/730/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/730/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/730/events", "html_url": "https://github.com/devpi/devpi/issues/730", "id": 510052915, "node_id": "MDU6SXNzdWU1MTAwNTI5MTU=", "number": 730, "title": "Simple indexes with \"simple/\" in addition or as an alternative to /+simple/", "user": {"login": "henryborchers", "id": 7454877, "node_id": "MDQ6VXNlcjc0NTQ4Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7454877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryborchers", "html_url": "https://github.com/henryborchers", "followers_url": "https://api.github.com/users/henryborchers/followers", "following_url": "https://api.github.com/users/henryborchers/following{/other_user}", "gists_url": "https://api.github.com/users/henryborchers/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryborchers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryborchers/subscriptions", "organizations_url": "https://api.github.com/users/henryborchers/orgs", "repos_url": "https://api.github.com/users/henryborchers/repos", "events_url": "https://api.github.com/users/henryborchers/events{/privacy}", "received_events_url": "https://api.github.com/users/henryborchers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-21T15:31:05Z", "updated_at": "2019-12-05T12:47:30Z", "closed_at": "2019-12-05T12:47:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/729", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/729/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/729/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/729/events", "html_url": "https://github.com/devpi/devpi/issues/729", "id": 509923689, "node_id": "MDU6SXNzdWU1MDk5MjM2ODk=", "number": 729, "title": "attrs dependency missing from devpi-web", "user": {"login": "EvaSDK", "id": 745513, "node_id": "MDQ6VXNlcjc0NTUxMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/745513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EvaSDK", "html_url": "https://github.com/EvaSDK", "followers_url": "https://api.github.com/users/EvaSDK/followers", "following_url": "https://api.github.com/users/EvaSDK/following{/other_user}", "gists_url": "https://api.github.com/users/EvaSDK/gists{/gist_id}", "starred_url": "https://api.github.com/users/EvaSDK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EvaSDK/subscriptions", "organizations_url": "https://api.github.com/users/EvaSDK/orgs", "repos_url": "https://api.github.com/users/EvaSDK/repos", "events_url": "https://api.github.com/users/EvaSDK/events{/privacy}", "received_events_url": "https://api.github.com/users/EvaSDK/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-21T12:15:11Z", "updated_at": "2019-12-05T12:46:33Z", "closed_at": "2019-12-05T12:46:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to upgrade my Docker images here,\r\n\r\nmy current setup is to have a base image with just devpi-server and devpi-web extend that image. However this leads to a situation where devpi-web dependencies allow me to generate an image of devpi-web-4.0.0 with devpi-server-4.9.0. This should work fine as far as I can tell except for the fact that `attrs` usage was introduced in the last release and it cannot be found as it is only listing in devpi-server-5.2.0 dependencies.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/727", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/727/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/727/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/727/events", "html_url": "https://github.com/devpi/devpi/issues/727", "id": 505912655, "node_id": "MDU6SXNzdWU1MDU5MTI2NTU=", "number": 727, "title": "devpi will not run without ipv6", "user": {"login": "foxx", "id": 651797, "node_id": "MDQ6VXNlcjY1MTc5Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/651797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/foxx", "html_url": "https://github.com/foxx", "followers_url": "https://api.github.com/users/foxx/followers", "following_url": "https://api.github.com/users/foxx/following{/other_user}", "gists_url": "https://api.github.com/users/foxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/foxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/foxx/subscriptions", "organizations_url": "https://api.github.com/users/foxx/orgs", "repos_url": "https://api.github.com/users/foxx/repos", "events_url": "https://api.github.com/users/foxx/events{/privacy}", "received_events_url": "https://api.github.com/users/foxx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-11T15:16:39Z", "updated_at": "2019-12-05T12:45:37Z", "closed_at": "2019-12-05T12:45:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "By default, devpi wants to bind to ipv6, and if the machine doesn't have IPv6 it will fail to start with an unhelpful error (I had to add a print into libs to figure out why it wasn't working).\r\n\r\n```\r\n# devpi-server\r\n2019-10-11 16:13:57,046 INFO  NOCTX Loading node info from /root/.devpi/server/.nodeinfo\r\n2019-10-11 16:13:57,047 INFO  NOCTX wrote nodeinfo to: /root/.devpi/server/.nodeinfo\r\n2019-10-11 16:13:57,090 WARNI NOCTX No secret file provided, creating a new random secret. Login tokens issued before are invalidate. Use --secretfile option to provide a persistent secret.\r\n2019-10-11 16:13:57,093 INFO  NOCTX Found plugin devpi-server-5.1.0 (None).\r\n2019-10-11 16:13:57,095 INFO  NOCTX Found plugin devpi-server-5.1.0 (None).\r\n2019-10-11 16:13:57,098 INFO  NOCTX Found plugin devpi-server-5.1.0 (None).\r\n2019-10-11 16:13:57,100 INFO  NOCTX Found plugin devpi-server-5.1.0 (None).\r\n2019-10-11 16:13:57,102 INFO  NOCTX Found plugin devpi-server-5.1.0 (None).\r\n2019-10-11 16:13:57,104 INFO  NOCTX Found plugin devpi-server-5.1.0 (None).\r\n2019-10-11 16:13:57,161 INFO  NOCTX devpi-server version: 5.1.0\r\n2019-10-11 16:13:57,162 INFO  NOCTX serverdir: /root/.devpi/server\r\n2019-10-11 16:13:57,162 INFO  NOCTX uuid: 087887ab9d924fdb9887d58c1659613c\r\n2019-10-11 16:13:57,162 INFO  NOCTX serving at url: http://localhost:3141 (might be http://[localhost]:3141 for IPv6)\r\n2019-10-11 16:13:57,162 INFO  NOCTX using 50 threads\r\n2019-10-11 16:13:57,162 INFO  NOCTX bug tracker: https://github.com/devpi/devpi/issues\r\n2019-10-11 16:13:57,162 INFO  NOCTX IRC: #devpi on irc.freenode.net\r\n2019-10-11 16:13:57,162 INFO  NOCTX Hit Ctrl-C to quit.\r\n('127.0.0.1', 3141)\r\n('::1', 3141, 0, 0)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/devpi-server\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi_server/main.py\", line 81, in main\r\n    return _main(pluginmanager, argv=argv)\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi_server/main.py\", line 167, in _main\r\n    return xom.main()\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi_server/main.py\", line 284, in main\r\n    return wsgi_run(xom, app)\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi_server/main.py\", line 196, in wsgi_run\r\n    serve(app, host=host, port=port, threads=threads, max_request_body_size=max_body)\r\n  File \"/usr/local/lib/python3.5/dist-packages/waitress/__init__.py\", line 11, in serve\r\n    server = _server(app, **kw)\r\n  File \"/usr/local/lib/python3.5/dist-packages/waitress/server.py\", line 85, in create_server\r\n    sockinfo=sockinfo)\r\n  File \"/usr/local/lib/python3.5/dist-packages/waitress/server.py\", line 229, in __init__\r\n    self.bind_server_socket()\r\n  File \"/usr/local/lib/python3.5/dist-packages/waitress/server.py\", line 360, in bind_server_socket\r\n    self.bind(sockaddr)\r\n  File \"/usr/local/lib/python3.5/dist-packages/waitress/wasyncore.py\", line 370, in bind\r\n    return self.socket.bind(addr)\r\nOSError: [Errno 99] Cannot assign requested address\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/726", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/726/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/726/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/726/events", "html_url": "https://github.com/devpi/devpi/issues/726", "id": 501962952, "node_id": "MDU6SXNzdWU1MDE5NjI5NTI=", "number": 726, "title": "predictable download url", "user": {"login": "scauglog", "id": 4425250, "node_id": "MDQ6VXNlcjQ0MjUyNTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4425250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scauglog", "html_url": "https://github.com/scauglog", "followers_url": "https://api.github.com/users/scauglog/followers", "following_url": "https://api.github.com/users/scauglog/following{/other_user}", "gists_url": "https://api.github.com/users/scauglog/gists{/gist_id}", "starred_url": "https://api.github.com/users/scauglog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scauglog/subscriptions", "organizations_url": "https://api.github.com/users/scauglog/orgs", "repos_url": "https://api.github.com/users/scauglog/repos", "events_url": "https://api.github.com/users/scauglog/events{/privacy}", "received_events_url": "https://api.github.com/users/scauglog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429759, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTk=", "url": "https://api.github.com/repos/devpi/devpi/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-03T09:49:00Z", "updated_at": "2019-10-03T12:56:56Z", "closed_at": "2019-10-03T09:59:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "link to download package (.egg, .tar.gz, ...) on the webui should be formed with the username, repo name and package. It should not contain randomly generated part.\r\n\r\n- current download link: http://localhost:3141/myuser/myrepo/+f/3ce/bf885d4dba0e8/my_package-0.0.1-py2.7.egg\r\n\r\n- proposed download link: \r\nhttp://localhost:3141/myuser/myrepo/my_package-0.0.1-py2.7.egg", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/725", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/725/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/725/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/725/events", "html_url": "https://github.com/devpi/devpi/issues/725", "id": 500691236, "node_id": "MDU6SXNzdWU1MDA2OTEyMzY=", "number": 725, "title": "mirror_whitelist inheritance", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}, {"id": 573429758, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTg=", "url": "https://api.github.com/repos/devpi/devpi/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-10-01T06:27:02Z", "updated_at": "2020-04-26T08:44:58Z", "closed_at": "2020-04-26T08:44:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A problem with ``mirror_whitelist`` inheritance was brought to my attention which showed that my own expectation of how ``mirror_whitelist`` currently works was wrong.\r\n\r\nThere is a common need to upload binary wheels for packages which don't have the required ones, but at the same time have private packages. My suggestion for a solution was this:\r\n\r\n1. create an index \"org/wheels\" which has ``bases=root/pypi`` and ``mirror_whitelist=*``\r\n2. create an index \"org/private\" which has ``bases=org/wheels`` and the default empty ``mirror_whitelist``\r\n\r\nMy expectation was, that any private package uploaded in \"org/private\" would be protected by its whitelist. Unfortunately that is not the case, as the whitelist is checked for each index in the chain.\r\n\r\nMy proposed solution is to only use ``mirror_whitelist`` from the first index in the inheritance chain.\r\n\r\nThe problem with that is, that existing setups might break with that change.\r\n\r\nSo, two questions:\r\n1. Is my proposed change correct or did I overlook something?\r\n2. Is this a bugfix, or does it require a major version bump?\r\n\r\ncc @r2dan @StephanErb ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/722", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/722/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/722/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/722/events", "html_url": "https://github.com/devpi/devpi/issues/722", "id": 499929273, "node_id": "MDU6SXNzdWU0OTk5MjkyNzM=", "number": 722, "title": "Hundreds of \"failed to check mirror whitelist\" warnings for private package", "user": {"login": "nickwilliams-eventbrite", "id": 8230828, "node_id": "MDQ6VXNlcjgyMzA4Mjg=", "avatar_url": "https://avatars3.githubusercontent.com/u/8230828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickwilliams-eventbrite", "html_url": "https://github.com/nickwilliams-eventbrite", "followers_url": "https://api.github.com/users/nickwilliams-eventbrite/followers", "following_url": "https://api.github.com/users/nickwilliams-eventbrite/following{/other_user}", "gists_url": "https://api.github.com/users/nickwilliams-eventbrite/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickwilliams-eventbrite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickwilliams-eventbrite/subscriptions", "organizations_url": "https://api.github.com/users/nickwilliams-eventbrite/orgs", "repos_url": "https://api.github.com/users/nickwilliams-eventbrite/repos", "events_url": "https://api.github.com/users/nickwilliams-eventbrite/events{/privacy}", "received_events_url": "https://api.github.com/users/nickwilliams-eventbrite/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-29T15:02:22Z", "updated_at": "2019-09-30T12:15:34Z", "closed_at": "2019-09-30T08:08:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We have a Devpi index configured as follows:\r\n* Name: `internal/stable`\r\n* Non-volatile\r\n* Mirroring `root/pypi`\r\n* `mirror_whitelist='*'`\r\n\r\nWe have uploaded several internal packages to this index.\r\n\r\nWhen we run the command `devpi list django`, we get a correct list of its files and no warnings in the Devpi log output. When we run the command `devpi list our-internal-package`, we get a correct list of its files and HUNDREDS of warnings in the Devpi log output that looks like this:\r\n\r\n```\r\n2019-09-29 14:51:21,360 WARNING: [req24333] [Rtx13944] Failed to check mirror whitelist. Assume it does not exists (cached not found for project our-internal-package)\r\n```\r\n\r\nThis happens _every time_ we run `devpi list our-internal-package`. It happens only for internal packages. It happens for all internal packages. The number of warnings varies from ~10 warnings per `devpi list` call to > 100 warnings per `devpi list` call. Everything is working correctly, so the warning appears to be a false warning. This is going to blow up our logs with these warning and we won't be able to see real problems through the noise.\r\n\r\nPerhaps we've configured something wrong, but this seems like a bug (or, at the very least, a documentation bug, if we can change something to stop this from happening).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/710", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/710/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/710/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/710/events", "html_url": "https://github.com/devpi/devpi/issues/710", "id": 495709071, "node_id": "MDU6SXNzdWU0OTU3MDkwNzE=", "number": 710, "title": "Error 401 with mirrored pypi with basic auth", "user": {"login": "dequis", "id": 94108, "node_id": "MDQ6VXNlcjk0MTA4", "avatar_url": "https://avatars2.githubusercontent.com/u/94108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dequis", "html_url": "https://github.com/dequis", "followers_url": "https://api.github.com/users/dequis/followers", "following_url": "https://api.github.com/users/dequis/following{/other_user}", "gists_url": "https://api.github.com/users/dequis/gists{/gist_id}", "starred_url": "https://api.github.com/users/dequis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dequis/subscriptions", "organizations_url": "https://api.github.com/users/dequis/orgs", "repos_url": "https://api.github.com/users/dequis/repos", "events_url": "https://api.github.com/users/dequis/events{/privacy}", "received_events_url": "https://api.github.com/users/dequis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-19T10:22:19Z", "updated_at": "2020-04-07T06:36:01Z", "closed_at": "2020-04-07T06:36:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey there! Not sure if bug or just something I'm doing wrong.\r\n\r\nMy company has a private pypi index with http basic auth, specified in the example below `https://user:pass@pip.example.com/`.\r\n\r\nI'm setting up a laptop cache like this:\r\n\r\n```\r\ndevpi login root --password ''\r\ndevpi index example type=mirror mirror_url=https://user:pass@pip.example.com/ bases=root/pypi\r\ndevpi use --set-cfg root/example\r\n```\r\n\r\nPublic pypi packages appear to work just fine (most of the time. i had a spurious 502 error once that i couldn't reproduce)\r\n\r\nFetching package lists and versions from the private index is also working fine, but the actual downloading of packages doesn't pass the user/pass through:\r\n\r\n```\r\n$ pip install --user somelib\r\nLooking in indexes: http://localhost:3141/root/example/+simple/\r\nCollecting somelib\r\nCould not install packages due to an EnvironmentError: 502 Server Error: Bad Gateway for url: http://localhost:3141/root/example/+f/cdc/a8022e7cbb68a/somelib-3.0.0-py3-none-any.whl\r\n```\r\n\r\nLogs show a 401 error for the upstream fetch:\r\n\r\n```\r\n2019-09-19 11:57:46,535 INFO  [req52] GET /root/example/+simple/somelib/\r\n2019-09-19 11:57:46,579 INFO  [req53] GET /root/example/+f/cdc/a8022e7cbb68a/somelib-3.0.0-py3-none-any.whl\r\n2019-09-19 11:57:46,785 ERROR [req53] [Wtx17] error 401 getting https://pip.example.com/packages/somelib-3.0.0-py3-none-any.whl\r\n```\r\n\r\nVersion:\r\n\r\n```\r\n$ devpi --version\r\ndevpi-client 5.0.0\r\n\r\ncurrent devpi server: http://localhost:3141/\r\n    devpi-server 5.1.0\r\n```\r\n\r\nNo plugins.\r\n\r\nUpstream pypi server:\r\n\r\n>This instance is running version 1.2.1 of the [pypiserver](https://pypi.python.org/pypi/pypiserver) software.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/702", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/702/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/702/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/702/events", "html_url": "https://github.com/devpi/devpi/issues/702", "id": 491574095, "node_id": "MDU6SXNzdWU0OTE1NzQwOTU=", "number": 702, "title": "Kubernetes, mixed content, and TLS.", "user": {"login": "kierun", "id": 3079575, "node_id": "MDQ6VXNlcjMwNzk1NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3079575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kierun", "html_url": "https://github.com/kierun", "followers_url": "https://api.github.com/users/kierun/followers", "following_url": "https://api.github.com/users/kierun/following{/other_user}", "gists_url": "https://api.github.com/users/kierun/gists{/gist_id}", "starred_url": "https://api.github.com/users/kierun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kierun/subscriptions", "organizations_url": "https://api.github.com/users/kierun/orgs", "repos_url": "https://api.github.com/users/kierun/repos", "events_url": "https://api.github.com/users/kierun/events{/privacy}", "received_events_url": "https://api.github.com/users/kierun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-10T10:01:55Z", "updated_at": "2019-09-10T12:19:47Z", "closed_at": "2019-09-10T12:19:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have devpi deployed in kubernetes with a custom TLS via the ingress. Devpi runs as \"normal\" without any certificates whatsoever. My set up works fine but for mixed content warnings. looking at the source, I can see that a lot of CSS are fetched via `http` which clearly is causing Firefox to moan about \"mixed content\".\r\n\r\n*How could I solve this?*\r\n\r\nWhat more information would you need to help?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/694", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/694/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/694/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/694/events", "html_url": "https://github.com/devpi/devpi/issues/694", "id": 476656305, "node_id": "MDU6SXNzdWU0NzY2NTYzMDU=", "number": 694, "title": "Aligning supported Python versions", "user": {"login": "00willo", "id": 6183357, "node_id": "MDQ6VXNlcjYxODMzNTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6183357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/00willo", "html_url": "https://github.com/00willo", "followers_url": "https://api.github.com/users/00willo/followers", "following_url": "https://api.github.com/users/00willo/following{/other_user}", "gists_url": "https://api.github.com/users/00willo/gists{/gist_id}", "starred_url": "https://api.github.com/users/00willo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/00willo/subscriptions", "organizations_url": "https://api.github.com/users/00willo/orgs", "repos_url": "https://api.github.com/users/00willo/repos", "events_url": "https://api.github.com/users/00willo/events{/privacy}", "received_events_url": "https://api.github.com/users/00willo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-05T04:56:31Z", "updated_at": "2019-08-18T15:35:02Z", "closed_at": "2019-08-18T15:35:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There's an existing PR (https://github.com/devpi/devpi-ldap/pull/48) to remove python 3.4 from the ldap auth plugin.\r\n\r\nI did a quick look at what's around in various setup.py, tox.ini and documentation. I have a couple of quick questions.\r\n\r\n- Is python 3.4 still determined to be \"officially\" supported by devpi?\r\n- Is python 3.7 deemed supported, as I noticed that 3.7 is missing from `setup.py` as a version, as well as not being explicitly tested via `tox.ini` and `.travis.yml`\r\n- With 2.7 reaching EOL at the end of the year, would that mean that devpi would no longer support it, or would the continued use and support by various distros impact this?\r\n- Where would be good to document the generalised statement on the current position of the project on what are the supported versions? \r\n\r\nI can raise a PR to align all the things once the answers to these are determined.  Maybe \r\n\r\nI'm working on this as the reference for the current python versions - https://devguide.python.org/devcycle/#end-of-life-branches\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/690", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/690/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/690/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/690/events", "html_url": "https://github.com/devpi/devpi/issues/690", "id": 472571694, "node_id": "MDU6SXNzdWU0NzI1NzE2OTQ=", "number": 690, "title": "doc.devpi.net is down", "user": {"login": "vinnyfuria", "id": 13631038, "node_id": "MDQ6VXNlcjEzNjMxMDM4", "avatar_url": "https://avatars1.githubusercontent.com/u/13631038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vinnyfuria", "html_url": "https://github.com/vinnyfuria", "followers_url": "https://api.github.com/users/vinnyfuria/followers", "following_url": "https://api.github.com/users/vinnyfuria/following{/other_user}", "gists_url": "https://api.github.com/users/vinnyfuria/gists{/gist_id}", "starred_url": "https://api.github.com/users/vinnyfuria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vinnyfuria/subscriptions", "organizations_url": "https://api.github.com/users/vinnyfuria/orgs", "repos_url": "https://api.github.com/users/vinnyfuria/repos", "events_url": "https://api.github.com/users/vinnyfuria/events{/privacy}", "received_events_url": "https://api.github.com/users/vinnyfuria/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-24T22:21:35Z", "updated_at": "2019-07-25T16:38:04Z", "closed_at": "2019-07-25T08:46:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://doc.devpi.net/ is not accessible from anywhere. Is there a mirror somewhere?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/689", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/689/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/689/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/689/events", "html_url": "https://github.com/devpi/devpi/issues/689", "id": 471168077, "node_id": "MDU6SXNzdWU0NzExNjgwNzc=", "number": 689, "title": "Error 503 when trying to recreate search index", "user": {"login": "fj-sanchez", "id": 14216725, "node_id": "MDQ6VXNlcjE0MjE2NzI1", "avatar_url": "https://avatars1.githubusercontent.com/u/14216725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fj-sanchez", "html_url": "https://github.com/fj-sanchez", "followers_url": "https://api.github.com/users/fj-sanchez/followers", "following_url": "https://api.github.com/users/fj-sanchez/following{/other_user}", "gists_url": "https://api.github.com/users/fj-sanchez/gists{/gist_id}", "starred_url": "https://api.github.com/users/fj-sanchez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fj-sanchez/subscriptions", "organizations_url": "https://api.github.com/users/fj-sanchez/orgs", "repos_url": "https://api.github.com/users/fj-sanchez/repos", "events_url": "https://api.github.com/users/fj-sanchez/events{/privacy}", "received_events_url": "https://api.github.com/users/fj-sanchez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-07-22T16:13:10Z", "updated_at": "2020-04-07T06:44:38Z", "closed_at": "2020-04-07T06:44:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI have deployed a devpi image to a kubernetes cluster. In the entrypoint I have something like this:\r\n\r\n```bash\r\nif [ ! -z \"${RECREATE_SEARCH_INDEX}\" ]; then\r\n    echo \"recreating search index, this might take a while\"\r\n    devpi-server --recreate-search-index --offline\r\nfi\r\n\r\necho \"+ devpi-server --host=\\\"${DEVPISERVER_HOST}\\\" --port=\\\"${DEVPISERVER_PORT}\\\" $@\"\r\nexec devpi-server --host=\"${DEVPISERVER_HOST}\" --port=\"${DEVPISERVER_PORT}\" $@\r\n```\r\nAnd then, when launching I set the environment variable to it will recreate the search index. But it fails with the next error:\r\n\r\n```\r\nskip initialization\r\nrecreating search index, this might take a while\r\n2019-07-22 16:04:51,516 INFO  NOCTX Loading node info from /srv/devpi/.nodeinfo\r\n2019-07-22 16:04:51,516 INFO  NOCTX wrote nodeinfo to: /srv/devpi/.nodeinfo\r\n2019-07-22 16:04:51,589 INFO  [Rtx154] Search-Indexing root/pypi:\r\n2019-07-22 16:04:51,589 WARNI [Rtx154] offline mode: using stale projects list\r\n2019-07-22 16:04:51,598 WARNI [Rtx154] serving stale links for 'soupsieve', url 'https://pypi.org/simple/soupsieve/' responded 503 None\r\n2019-07-22 16:04:51,601 WARNI [Rtx154] serving stale links for 'soupsieve', url 'https://pypi.org/simple/soupsieve/' responded 503 None\r\n2019-07-22 16:04:51,603 WARNI [Rtx154] serving stale links for 'soupsieve', url 'https://pypi.org/simple/soupsieve/' responded 503 None\r\n2019-07-22 16:04:51,603 INFO  [Rtx154] Processed 0 projects\r\n2019-07-22 16:04:51,612 WARNI [Rtx154] serving stale links for 'cliff', url 'https://pypi.org/simple/cliff/' responded 503 None\r\n2019-07-22 16:04:51,617 WARNI [Rtx154] serving stale links for 'cliff', url 'https://pypi.org/simple/cliff/' responded 503 None\r\n2019-07-22 16:04:51,621 WARNI [Rtx154] serving stale links for 'cliff', url 'https://pypi.org/simple/cliff/' responded 503 None\r\n\r\n...\r\n\r\n2019-07-22 16:04:53,398 WARNI [Rtx154] serving stale links for 'prettytable', url 'https://pypi.org/simple/prettytable/' responded 503 None\r\n2019-07-22 16:04:53,399 INFO  [Rtx154] Search-Indexing private/stable:\r\n2019-07-22 16:04:53,399 INFO  [Rtx154] Search-Indexing private/staging:\r\n2019-07-22 16:04:53,403 INFO  [Rtx154] Committing 77 new documents to search index.\r\n2019-07-22 16:04:53,570 INFO  [Rtx154] Finished committing 77 documents to search index.\r\n+ devpi-server --host=\"0.0.0.0\" --port=\"3141\" \r\n2019-07-22 16:04:54,051 INFO  NOCTX Loading node info from /srv/devpi/.nodeinfo\r\n2019-07-22 16:04:54,051 INFO  NOCTX wrote nodeinfo to: /srv/devpi/.nodeinfo\r\n2019-07-22 16:04:54,078 INFO  NOCTX Using secret file '/srv/devpi/.secret'.\r\n2019-07-22 16:04:54,080 INFO  NOCTX Found plugin devpi-server-5.0.0 (None).\r\n2019-07-22 16:04:54,082 INFO  NOCTX Found plugin devpi-server-5.0.0 (None).\r\n2019-07-22 16:04:54,083 INFO  NOCTX Found plugin devpi-server-5.0.0 (None).\r\n2019-07-22 16:04:54,085 INFO  NOCTX Found plugin devpi-server-5.0.0 (None).\r\n2019-07-22 16:04:54,086 INFO  NOCTX Found plugin devpi-server-5.0.0 (None).\r\n2019-07-22 16:04:54,088 INFO  NOCTX Found plugin devpi-server-5.0.0 (None).\r\n2019-07-22 16:04:54,089 INFO  NOCTX Found plugin devpi-web-3.5.2 (None).\r\n2019-07-22 16:04:54,281 INFO  NOCTX devpi-server version: 5.0.0\r\n2019-07-22 16:04:54,281 INFO  NOCTX serverdir: /srv/devpi\r\n2019-07-22 16:04:54,281 INFO  NOCTX uuid: e3e800e460a74bca908bf6650a66df4a\r\n2019-07-22 16:04:54,281 INFO  NOCTX serving at url: http://0.0.0.0:3141 (might be http://[0.0.0.0]:3141 for IPv6)\r\n2019-07-22 16:04:54,281 INFO  NOCTX using 50 threads\r\n2019-07-22 16:04:54,281 INFO  NOCTX bug tracker: https://github.com/devpi/devpi/issues\r\n2019-07-22 16:04:54,281 INFO  NOCTX IRC: #devpi on irc.freenode.net\r\n2019-07-22 16:04:54,281 INFO  NOCTX Hit Ctrl-C to quit.\r\n```\r\n\r\nAny idea of why is it? I have tried a few times always with the same result, and the search option doesn't work...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/688", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/688/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/688/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/688/events", "html_url": "https://github.com/devpi/devpi/issues/688", "id": 468620293, "node_id": "MDU6SXNzdWU0Njg2MjAyOTM=", "number": 688, "title": "requires_dist metadata missing", "user": {"login": "pierreluctg", "id": 1785698, "node_id": "MDQ6VXNlcjE3ODU2OTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1785698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierreluctg", "html_url": "https://github.com/pierreluctg", "followers_url": "https://api.github.com/users/pierreluctg/followers", "following_url": "https://api.github.com/users/pierreluctg/following{/other_user}", "gists_url": "https://api.github.com/users/pierreluctg/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierreluctg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierreluctg/subscriptions", "organizations_url": "https://api.github.com/users/pierreluctg/orgs", "repos_url": "https://api.github.com/users/pierreluctg/repos", "events_url": "https://api.github.com/users/pierreluctg/events{/privacy}", "received_events_url": "https://api.github.com/users/pierreluctg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-07-16T12:16:44Z", "updated_at": "2019-12-05T13:36:54Z", "closed_at": "2019-12-05T13:36:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When uploading a new release with `devpi upload`, I have noticed that `requires_dist` metadata is missing. Calling `devpi upload` a second time on the same source is adding the `requires_dist` metadata even on non-volatile index.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/687", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/687/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/687/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/687/events", "html_url": "https://github.com/devpi/devpi/issues/687", "id": 466632800, "node_id": "MDU6SXNzdWU0NjY2MzI4MDA=", "number": 687, "title": "Devpi-web  encountered an unexpected internal server error", "user": {"login": "helloocc", "id": 4636271, "node_id": "MDQ6VXNlcjQ2MzYyNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4636271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/helloocc", "html_url": "https://github.com/helloocc", "followers_url": "https://api.github.com/users/helloocc/followers", "following_url": "https://api.github.com/users/helloocc/following{/other_user}", "gists_url": "https://api.github.com/users/helloocc/gists{/gist_id}", "starred_url": "https://api.github.com/users/helloocc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/helloocc/subscriptions", "organizations_url": "https://api.github.com/users/helloocc/orgs", "repos_url": "https://api.github.com/users/helloocc/repos", "events_url": "https://api.github.com/users/helloocc/events{/privacy}", "received_events_url": "https://api.github.com/users/helloocc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-11T02:59:41Z", "updated_at": "2019-07-12T06:41:11Z", "closed_at": "2019-07-12T06:41:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "- When i search the web for requests\uff0cit shows error. Howerer, i can download the package by `pip download`. (The devpi is run with py2 now, and i have tried py3, it runs well. But i think it's better to fix the little bug)\r\n- My env\r\n```\r\n$ pip2 freeze |grep devpi\r\ndevpi-client==5.0.0\r\ndevpi-common==3.4.0\r\ndevpi-server==5.0.0\r\ndevpi-web==3.5.2\r\n```\r\n- Search Error\r\n![image](https://user-images.githubusercontent.com/4636271/61020180-5ae49b80-a3cf-11e9-8108-0c9ab6351c8b.png)\r\n\r\n```\r\n2019-07-11 11:25:09,246 ERROR Exception while serving /+search\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/waitress/channel.py\", line 356, in service\r\n    task.service()\r\n  File \"/usr/lib/python2.7/site-packages/waitress/task.py\", line 176, in service\r\n    self.execute()\r\n  File \"/usr/lib/python2.7/site-packages/waitress/task.py\", line 447, in execute\r\n    app_iter = self.channel.server.application(env, start_response)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_server/views.py\", line 148, in __call__\r\n    return self.app(environ, start_response)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 270, in __call__\r\n    response = self.execution_policy(environ, self)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 279, in default_execution_policy\r\n    return request.invoke_exception_view(reraise=True)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/view.py\", line 778, in invoke_exception_view\r\n    reraise_(*exc_info)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 277, in default_execution_policy\r\n    return router.invoke_request(request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 249, in invoke_request\r\n    response = handle_request(request)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_server/views.py\", line 172, in request_log_handler\r\n    response = handler(request)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_server/views.py\", line 208, in request_tx_handler\r\n    response = handler(request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/tweens.py\", line 43, in excview_tween\r\n    response = _error_handler(request, exc)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/tweens.py\", line 17, in _error_handler\r\n    reraise(*exc_info)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/tweens.py\", line 41, in excview_tween\r\n    response = handler(request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 148, in handle_request\r\n    registry, request, context, context_iface, view_name\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/view.py\", line 667, in _call_view\r\n    response = view_callable(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/viewderivers.py\", line 436, in rendered_view\r\n    result = view(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/viewderivers.py\", line 116, in _class_requestonly_view\r\n    response = getattr(inst, attr)()\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/views.py\", line 901, in __call__\r\n    batch_links=self.batch_links,\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/decorator.py\", line 43, in __get__\r\n    val = self.wrapped(inst)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/views.py\", line 740, in batch_links\r\n    if not self.search_result or not self.search_result['items']:\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/decorator.py\", line 43, in __get__\r\n    val = self.wrapped(inst)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/views.py\", line 735, in search_result\r\n    self.params['query'], page=self.params['page'])\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/whoosh_index.py\", line 474, in query_projects\r\n    searcher = self.project_ix.searcher()\r\n  File \"/usr/lib/python2.7/site-packages/devpi_common/types.py\", line 38, in get\r\n    x = self._property_cache[f] = f(self)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/whoosh_index.py\", line 217, in project_ix\r\n    return self.ix('project')\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/whoosh_index.py\", line 198, in ix\r\n    if not exists_in(self.index_path, indexname=name):\r\n  File \"/usr/lib/python2.7/site-packages/whoosh/index.py\", line 136, in exists_in\r\n    ix = open_dir(dirname, indexname=indexname)\r\n  File \"/usr/lib/python2.7/site-packages/whoosh/index.py\", line 123, in open_dir\r\n    return FileIndex(storage, schema=schema, indexname=indexname)\r\n  File \"/usr/lib/python2.7/site-packages/whoosh/index.py\", line 421, in __init__\r\n    TOC.read(self.storage, self.indexname, schema=self._schema)\r\n  File \"/usr/lib/python2.7/site-packages/whoosh/index.py\", line 664, in read\r\n    segments = stream.read_pickle()\r\n  File \"/usr/lib/python2.7/site-packages/whoosh/filedb/structfile.py\", line 245, in read_pickle\r\n    return load_pickle(self.file)\r\nValueError: unsupported pickle protocol: 4\r\n```\r\n- Details Error\r\n![image](https://user-images.githubusercontent.com/4636271/61017411-ab56fb80-a3c5-11e9-9cce-f83f7f997b1e.png)\r\n ```\r\n2019-07-11 10:18:40,113 ERROR Exception while serving /iaas/product/requests/2.22.0\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/waitress/channel.py\", line 356, in service\r\n    task.service()\r\n  File \"/usr/lib/python2.7/site-packages/waitress/task.py\", line 176, in service\r\n    self.execute()\r\n  File \"/usr/lib/python2.7/site-packages/waitress/task.py\", line 447, in execute\r\n    app_iter = self.channel.server.application(env, start_response)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_server/views.py\", line 148, in __call__\r\n    return self.app(environ, start_response)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 270, in __call__\r\n    response = self.execution_policy(environ, self)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 279, in default_execution_policy\r\n    return request.invoke_exception_view(reraise=True)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/view.py\", line 778, in invoke_exception_view\r\n    reraise_(*exc_info)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 277, in default_execution_policy\r\n    return router.invoke_request(request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 249, in invoke_request\r\n    response = handle_request(request)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_server/views.py\", line 172, in request_log_handler\r\n    response = handler(request)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_server/views.py\", line 208, in request_tx_handler\r\n    response = handler(request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/tweens.py\", line 43, in excview_tween\r\n    response = _error_handler(request, exc)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/tweens.py\", line 17, in _error_handler\r\n    reraise(*exc_info)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/tweens.py\", line 41, in excview_tween\r\n    response = handler(request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/router.py\", line 148, in handle_request\r\n    registry, request, context, context_iface, view_name\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/view.py\", line 667, in _call_view\r\n    response = view_callable(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/config/views.py\", line 169, in   __call__\r\n    return view(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/config/views.py\", line 188, in attr_view\r\n    return view(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/config/views.py\", line 214, in predicate_wrapper\r\n    return view(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/pyramid/viewderivers.py\", line 436, in rendered_view\r\n    result = view(context, request)\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/views.py\", line 574, in version_get\r\n    content=get_description(stage, name, version),\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/description.py\", line 11, in get_description\r\n    stage, name, version).get_description()\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/description.py\", line 41, in get_description\r\n    self._render_description(desc))\r\n  File \"/usr/lib/python2.7/site-packages/devpi_web/description.py\", line 82, in _render_description\r\n    html = readme_renderer.markdown.render(desc, stream=warnings)\r\n  File \"/usr/lib/python2.7/site-packages/readme_renderer/markdown.py\", line 63, in render\r\n    highlighted = _highlight(rendered)\r\n  File \"/usr/lib/python2.7/site-packages/readme_renderer/markdown.py\", line 108, in _highlight\r\n    result = code_expr.sub(replacer, html)\r\n  File \"/usr/lib/python2.7/site-packages/readme_renderer/markdown.py\", line 106, in replacer\r\n    return '<pre>{}</pre>'.format(highlighted)\r\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 26-28: ordinal not in range(128)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/686", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/686/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/686/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/686/events", "html_url": "https://github.com/devpi/devpi/issues/686", "id": 466187755, "node_id": "MDU6SXNzdWU0NjYxODc3NTU=", "number": 686, "title": "The toxresult numbering can result in duplicate filenames causing exports to fail", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-10T08:59:47Z", "updated_at": "2019-09-28T16:09:06Z", "closed_at": "2019-09-28T16:09:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "upload toxresult -> toxresult0\r\nupload toxresult -> toxresult1\r\ndelete toxresult0\r\nupload toxresult -> toxresult1\r\n\r\nNow there are two toxresult1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/685", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/685/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/685/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/685/events", "html_url": "https://github.com/devpi/devpi/issues/685", "id": 464601917, "node_id": "MDU6SXNzdWU0NjQ2MDE5MTc=", "number": 685, "title": "How do I upload documentation without using the devpi command?", "user": {"login": "exhuma", "id": 65717, "node_id": "MDQ6VXNlcjY1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/65717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/exhuma", "html_url": "https://github.com/exhuma", "followers_url": "https://api.github.com/users/exhuma/followers", "following_url": "https://api.github.com/users/exhuma/following{/other_user}", "gists_url": "https://api.github.com/users/exhuma/gists{/gist_id}", "starred_url": "https://api.github.com/users/exhuma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/exhuma/subscriptions", "organizations_url": "https://api.github.com/users/exhuma/orgs", "repos_url": "https://api.github.com/users/exhuma/repos", "events_url": "https://api.github.com/users/exhuma/events{/privacy}", "received_events_url": "https://api.github.com/users/exhuma/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2019-07-05T11:42:57Z", "updated_at": "2019-10-01T07:58:27Z", "closed_at": "2019-10-01T07:56:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are moving to devpi and all of our projects use `fabric` tasks to build the docs (instead of `setup.py build_sphinx`).\r\n\r\nHow can I upload our existing documentation to the devpi server?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/684", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/684/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/684/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/684/events", "html_url": "https://github.com/devpi/devpi/issues/684", "id": 463748174, "node_id": "MDU6SXNzdWU0NjM3NDgxNzQ=", "number": 684, "title": "How to use \u201c--root-passwd-hash\u201d ?", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-07-03T13:18:00Z", "updated_at": "2019-08-18T15:46:50Z", "closed_at": "2019-08-18T15:46:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I see it in devpi-server --help, It seem that I can set a hashed password when initialize a devpi-server. But you didn't give a declare on which hash arithmetic it supports. I tried some hash but failed.\r\n \r\nJust give me a way to gengrate a hash password?\r\nHere is my (wrong) way:\r\n```\r\nmkpasswd -m sha-512 test\r\n$6$ZfNZMZv8KAu$yxxNPl8z4CcR3mvf2EYqcxTwaq8PxWry9PHBY5WqANk2K9gNiQ2jJ8fC4Wc1xo4GmsAn3AUGMKFHUWh4/Yzjh/\r\n```\r\nIn my method, `yxxNPl8z4CcR3mvf2EYqcxTwaq8PxWry9PHBY5WqANk2K9gNiQ2jJ8fC4Wc1xo4GmsAn3AUGMKFHUWh4/Yzjh/` part is hash for \"test\". But I cannot use \"test\" to login root.\r\n\r\n```\r\ndevpi-server --theme semantic-ui --root-passwd-hash yxxNPl8z4CcR3mvf2EYqcxTwaq8PxWry9PHBY5WqANk2K9gNiQ2jJ8fC4Wc1xo4GmsAn3AUGMKFHUWh4/Yzjh/ --restrict-modify ${adminuser} --ldap-config ${ldapfile} --serverdir /data/jjj --start --host 0.0.0.0 --port 3141 --init \r\n```\r\n\r\nSO, Just give me a way to gengrate a effective hash password? Thanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/683", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/683/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/683/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/683/events", "html_url": "https://github.com/devpi/devpi/issues/683", "id": 463732869, "node_id": "MDU6SXNzdWU0NjM3MzI4Njk=", "number": 683, "title": "Unable to enter password starting with dash from script", "user": {"login": "davidsmf", "id": 20317032, "node_id": "MDQ6VXNlcjIwMzE3MDMy", "avatar_url": "https://avatars0.githubusercontent.com/u/20317032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidsmf", "html_url": "https://github.com/davidsmf", "followers_url": "https://api.github.com/users/davidsmf/followers", "following_url": "https://api.github.com/users/davidsmf/following{/other_user}", "gists_url": "https://api.github.com/users/davidsmf/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidsmf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidsmf/subscriptions", "organizations_url": "https://api.github.com/users/davidsmf/orgs", "repos_url": "https://api.github.com/users/davidsmf/repos", "events_url": "https://api.github.com/users/davidsmf/events{/privacy}", "received_events_url": "https://api.github.com/users/davidsmf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-03T12:46:51Z", "updated_at": "2019-07-03T16:31:55Z", "closed_at": "2019-07-03T16:31:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "We use `devpi-gitlab-auth` which allows us to authenticate using short-lived build tokens from gitlab.\r\n\r\nWe have a line that says:\r\n> devpi login \"gitlab-ci-token\" --password \"$CI_BUILD_TOKEN\"\r\n\r\nUnfortunately the builds fail every so often. It turns out that this is due to `CI_BUILD_TOKEN` starting with a dash (`-`).\r\n\r\nThe error message looks like: \r\n```\r\n\r\n# devpi login gitlab-ci-token --password '-example-password'\r\nusage: devpi [-h] [--version] [--debug] [-y] [-v] [--clientdir DIR]\r\n             {quickstart,use,getjson,patchjson,list,remove,user,passwd,login,logoff,logout,index,upload,test,push,install,refresh}\r\n             ...\r\ndevpi: error: argument --password: expected one argument\r\n```\r\n\r\nI can't find a way to specify a password with a dash. Can we have a way to specify via a file (maybe enable `fromfile_prefix_chars` on `argparse.ArgumentParser`, or have a separate `--password-file` option), or via an env var? Maybe `DEVPI_PASSWORD` could be checked before using `getpass`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/680", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/680/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/680/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/680/events", "html_url": "https://github.com/devpi/devpi/issues/680", "id": 460796699, "node_id": "MDU6SXNzdWU0NjA3OTY2OTk=", "number": 680, "title": "Inherit from multiple indexes, combine packages", "user": {"login": "jrast", "id": 146369, "node_id": "MDQ6VXNlcjE0NjM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/146369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrast", "html_url": "https://github.com/jrast", "followers_url": "https://api.github.com/users/jrast/followers", "following_url": "https://api.github.com/users/jrast/following{/other_user}", "gists_url": "https://api.github.com/users/jrast/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrast/subscriptions", "organizations_url": "https://api.github.com/users/jrast/orgs", "repos_url": "https://api.github.com/users/jrast/repos", "events_url": "https://api.github.com/users/jrast/events{/privacy}", "received_events_url": "https://api.github.com/users/jrast/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-06-26T07:02:10Z", "updated_at": "2020-04-26T08:42:35Z", "closed_at": "2020-04-26T08:42:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have setup the following indexes:\r\n\r\n- root/pypi --> default mirror of PyPi\r\n- root/piwheels --> mirror of pywheels.org index\r\n- org/prod --> local packages, inherits from root/pypi and root/piwheels\r\n\r\nNow I want to install numpy from a raspberry pi which uses the org/prod index. Numpy is available as wheel on root/piwheels and therefore I expect that it will be available from there. However, pip uses the source package which is available on root/pypi.\r\nIf I use the devpi web search I can find numpy in both indexes (root/pypi and root/piwheels), why does pip use the wrong package? Or is this a limitation of devpi which hides one of the indexes because the package is available in both indexes?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/679", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/679/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/679/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/679/events", "html_url": "https://github.com/devpi/devpi/issues/679", "id": 457356616, "node_id": "MDU6SXNzdWU0NTczNTY2MTY=", "number": 679, "title": "Question about the plugin \"devpi-semantic-ui\"", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-06-18T09:20:52Z", "updated_at": "2019-08-18T15:43:19Z", "closed_at": "2019-08-18T15:43:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I'm using devpi on Ubuntu 16.04 LTS for a long time. Today I attempt to use \"devpi-semantic-ui\" because it is more human-friendly than \"devpi-web\".\r\n\r\nI use:\r\n```\r\n/usr/local/bin/devpi-server --theme semantic-ui --restrict-modify :devpi-admin --ldap-config /ldap/ldap.yaml --storage pg8000:host=xxxxxxxxxx,port=5432,database=devpi,user=devpi,password=xxxxxx --serverdir /data/server --host 0.0.0.0 --port 3141\r\n```\r\nto launch my devpi-server.\r\n\r\nAnd then I access \"http://xxxxxxxxxxxx:3141\" to the devpi-ui.\r\n\r\nMost of things are ok, but I found two things odd:\r\n\r\n1.On the devpi-ui, I have a warning on status,here is the screenshot:\r\n\r\n![image](https://user-images.githubusercontent.com/49146774/59664609-f5dcc200-91e3-11e9-92fa-bd6b1dc4b747.png)\r\n\r\nAnd each time I refreshed the ui\uff0cthe log below would be appeared.\r\n```\r\ndevpi    | 2019-06-18 08:05:09,958 INFO  [req130] GET /+status\r\ndevpi    | 2019-06-18 08:05:10,127 INFO  [req131] GET /robots.txt\r\ndevpi    | 2019-06-18 08:05:10,181 ERROR [req131] [Rtx15] while handling http://172.31.28.20:3141/robots.txt?1560845109000:\r\ndevpi    | no user 'robots.txt'\r\n``` \r\nMy devpi-server is functional. That confused me a lot, please help me to figure it out.\r\n\r\n2.What's the mirror_whitelist's meaning, can you give a crisp and clear account of in which condition should I use it?\r\n![image](https://user-images.githubusercontent.com/49146774/59665194-05103f80-91e5-11e9-8c6d-ed124bb085d1.png)\r\n\r\nWaiting for your reply.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/678", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/678/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/678/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/678/events", "html_url": "https://github.com/devpi/devpi/issues/678", "id": 457318674, "node_id": "MDU6SXNzdWU0NTczMTg2NzQ=", "number": 678, "title": "status", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-18T07:59:48Z", "updated_at": "2019-06-18T08:00:03Z", "closed_at": "2019-06-18T08:00:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/676", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/676/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/676/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/676/events", "html_url": "https://github.com/devpi/devpi/issues/676", "id": 456237159, "node_id": "MDU6SXNzdWU0NTYyMzcxNTk=", "number": 676, "title": "Question for devpi-ldap connection", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-06-14T13:01:00Z", "updated_at": "2019-07-03T13:12:05Z", "closed_at": "2019-07-03T13:12:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm using devpi and I'm trying to use devpi-ldap plugin.\r\nMy OS is Ubuntu16.04LTS, and of course, I have a functional ldap server.\r\n\r\nMy devpi version is:\r\nDEVPI_SERVER_VERSION=4.9.0\r\nDEVPI_WEB_VERSION=3.5.1\r\nDEVPI_CLIENT_VERSION=4.4.0\r\nDEVPI_LDAP_VERSION=1.2.2\r\n\r\nThe follow is my operation:\r\n\r\n1. Install a devpi-server, add devpi-ldap plugin.\r\n\r\n2. use\r\n```\r\ndevpi-server --ldap-config /ldap/ldap.yaml --serverdir /data/server --host 0.0.0.0 --port 3141 --start --init\r\n```\r\nto start a new devpi-server with ldap.\r\n\r\n3. do a user login authentication,but it occured:\r\n```\r\nroot@ip-172-31-28-20:/data# devpi login Tom\r\npassword for user Tom: \r\nWARN: devpi-client-4.4.0 got an unversioned reply, assuming API-VERSION 2 (as implemented by devpi-server-2.0)\r\nPOST http://localhost:3141/+login\r\n500 Internal Server Error: Internal Server Error\r\n\r\nThe server encountered an unexpected internal server error\r\n\r\n(generated by waitress)\r\n```\r\n\r\nIs this something wrong with the version of devpi-ldap? Or which step I did is wrong?\r\nPlease help me figure it out, thanks a lot!\r\n\r\nBy the way, here's the yaml of ldap:\r\n```\r\nzhangsiming@ip-172-31-28-20:~/docker-devpi$ cat ldap/ldap.yaml \r\n---\r\n  devpi-ldap:\r\n    url: ldaps://ldap.xxxxxxxxx.com\r\n    user_search:\r\n        base: ou=users,dc=xxxxxxxx,dc=com \r\n        filter: (objectClass=person)(memberOf=cn=devpi,ou=project,dc=xxxxxxxxx,dc=com)\r\n        attribute_name: uid\r\n        scope: whole-subtree\r\n        userdn: cn=devpi,ou=project,dc=xxxxxxxx,dc=com\r\n        password: h6xnoI^3\r\n    group_search:\r\n        base: ou=department,dc=xxxxxxxx,dc=com\r\n        filter: (objectclass=groupOfUniqueNames)\r\n        attribute_name: cn\r\n        scope: whole-subtree\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/670", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/670/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/670/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/670/events", "html_url": "https://github.com/devpi/devpi/issues/670", "id": 449574043, "node_id": "MDU6SXNzdWU0NDk1NzQwNDM=", "number": 670, "title": "Can you give me some backup Suggestions?", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-05-29T02:58:13Z", "updated_at": "2019-11-10T08:24:17Z", "closed_at": "2019-08-18T15:41:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use devpi on Ubuntu 16.04 LTS.\r\nBut I didn't found anything about the backups for devpi ,It bothers me ,because backup is essential for using devpi on-line.\r\n\r\nQuestions:\r\n1.I used devpi-postgresql plugin with a postgresql on my server. I think it is very easy to use.\r\nI looked over the database I use for devpi backup .And I see:\r\n```\r\npostgres=# \\c exampledb\r\nYou are now connected to database \"exampledb\" as user \"postgres\".\r\nexampledb=# \\d\r\n          List of relations\r\n Schema |   Name    | Type  | Owner  \r\n--------+-----------+-------+--------\r\n public | changelog | table | siming\r\n public | files     | table | siming\r\n public | kv        | table | siming\r\n(3 rows)\r\n``` \r\nI want to know what thing did the database stored .What is the kv\u3001files\u3001changelog? Did it stored the packages I upload?\r\n\r\n\r\n\r\n2.I knew by default the packages and the index information stored in \"$HOME/.devpi/server/+files/\" \uff0cso is it enough to only back up this directory? Or I should do \"devpi export\" termly? Do I need \"devpi-server replication\"?\r\n\r\nI'm sorry for too many question about the backup. But I sincerely hope to get your reply for the above two questions. And I'd like to hear your suggestions for the devpi backup.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/669", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/669/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/669/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/669/events", "html_url": "https://github.com/devpi/devpi/issues/669", "id": 448655267, "node_id": "MDU6SXNzdWU0NDg2NTUyNjc=", "number": 669, "title": "Question for devpi packages\uff1f", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-27T03:57:34Z", "updated_at": "2019-05-27T06:52:09Z", "closed_at": "2019-05-27T06:52:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\uff0cI'm using devpi and I'm on Ubuntu 16.04,but I met so many problem,wait for you answer~\r\n\r\n1.when I upload my python package like:\r\n```\r\nzhangsiming@cpuserver:/usr/local$ devpi upload test-2.3.4.5.tar.gz \r\nregister test-2.3.4.5 to http://localhost:3141/zhang/aaa/\r\nfile_upload of test-2.3.4.5.tar.gz to http://localhost:3141/zhang/aaa/\r\n```\r\nI know it will add on the index and I can use \"devpi install package\" to install it.\r\nWhat I want to ask is where the package itself will be upload to ?\r\nCan I delete the package on my local after the upload operation?\r\nOr give me some method on how to manager my private python packages.\r\n\r\n\r\n\r\n2.The command \"devpi\" is default Install in \"$HOME/.local/bin/devpi\" ,but when I switch a user ,the command cannot even found ,this is so inconvenient and affect the normal use , like below:\r\n```\r\nzhangsiming@cpuserver:~$ which devpi\r\n/home/zhangsiming/.local/bin/devpi\r\nzhangsiming@cpuserver:~$ sudo su \r\nroot@cpuserver:/home/zhangsiming# which devpi\r\nroot@cpuserver:/home/zhangsiming# devpi use\r\ndevpi: command not found\r\n```\r\nIs there something I can do to fix it ?\r\nI sincerely and urgently need your reply and help for the above two questions ,thanks a lot!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/668", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/668/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/668/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/668/events", "html_url": "https://github.com/devpi/devpi/issues/668", "id": 448446055, "node_id": "MDU6SXNzdWU0NDg0NDYwNTU=", "number": 668, "title": "Question for accessing devpi-web in docker", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-25T09:43:36Z", "updated_at": "2019-05-27T03:57:46Z", "closed_at": "2019-05-27T03:57:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,I'm using devpi in docker and my docker is installed in Ubuntu 16.04 LTS.\r\n\r\nFirst,I know after installed the plugin devpi-web,I need to add \"host 0.0.0.0\" to start the devpi-server,so that another computer in the local-network can access the web for my devpi-server.\r\n\r\nIt's OK.But this time I installed devpi-server in a docker,and I still add \"host 0.0.0.0\" to start my devpi-server ,I can access the devpi-server on my Ubuntu(docker's host) ,but I cannot access the web via another computer in the local-network.This indeed confused me .\r\nCan you help me out? Sincerely hope your reply.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/667", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/667/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/667/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/667/events", "html_url": "https://github.com/devpi/devpi/issues/667", "id": 448030082, "node_id": "MDU6SXNzdWU0NDgwMzAwODI=", "number": 667, "title": "Question for \"devpi upload\"", "user": {"login": "zhangsimingshannonai", "id": 49146774, "node_id": "MDQ6VXNlcjQ5MTQ2Nzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49146774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangsimingshannonai", "html_url": "https://github.com/zhangsimingshannonai", "followers_url": "https://api.github.com/users/zhangsimingshannonai/followers", "following_url": "https://api.github.com/users/zhangsimingshannonai/following{/other_user}", "gists_url": "https://api.github.com/users/zhangsimingshannonai/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangsimingshannonai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangsimingshannonai/subscriptions", "organizations_url": "https://api.github.com/users/zhangsimingshannonai/orgs", "repos_url": "https://api.github.com/users/zhangsimingshannonai/repos", "events_url": "https://api.github.com/users/zhangsimingshannonai/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangsimingshannonai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-24T07:56:39Z", "updated_at": "2019-08-18T15:39:52Z", "closed_at": "2019-08-18T15:39:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using Ubuntu 16.04 and I install devpi-server and devpi-client by \r\n```\r\npip3 install -U devpi-server\r\npip3 install -U devpi-client\r\n```\r\nBut when I do a upload,something error occured:\r\n```\r\nroot@ip-172-31-31-120:/usr/local/test-2.3.4.5# ls\r\nMANIFEST  PKG-INFO  setup.py  test.py\r\nroot@ip-172-31-31-120:/usr/local/test-2.3.4.5# devpi upload\r\nusing workdir /tmp/devpi4\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/devpi\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi/main.py\", line 36, in main\r\n    return method(hub, hub.args)\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi/upload.py\", line 36, in main\r\n    exported = checkout.export(uploadbase)\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi/upload.py\", line 302, in export\r\n    return Exported(self.hub, self.setupdir, self.setupdir)\r\n  File \"/usr/local/lib/python3.5/dist-packages/devpi/upload.py\", line 339, in __init__\r\n    raise ValueError(\"could not find 'python' executable\")\r\nValueError: could not find 'python' executable\r\n```\r\n\r\nIs this invovled with python's version ,It's success in python2 env.\r\nHow can I fix it? Waiting for you reply.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/665", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/665/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/665/events", "html_url": "https://github.com/devpi/devpi/issues/665", "id": 445538939, "node_id": "MDU6SXNzdWU0NDU1Mzg5Mzk=", "number": 665, "title": "Is there a way to get packages hashes?", "user": {"login": "juanformoso", "id": 1533810, "node_id": "MDQ6VXNlcjE1MzM4MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1533810?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juanformoso", "html_url": "https://github.com/juanformoso", "followers_url": "https://api.github.com/users/juanformoso/followers", "following_url": "https://api.github.com/users/juanformoso/following{/other_user}", "gists_url": "https://api.github.com/users/juanformoso/gists{/gist_id}", "starred_url": "https://api.github.com/users/juanformoso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juanformoso/subscriptions", "organizations_url": "https://api.github.com/users/juanformoso/orgs", "repos_url": "https://api.github.com/users/juanformoso/repos", "events_url": "https://api.github.com/users/juanformoso/events{/privacy}", "received_events_url": "https://api.github.com/users/juanformoso/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-17T17:15:06Z", "updated_at": "2019-05-17T17:48:25Z", "closed_at": "2019-05-17T17:48:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, is there an endpoint in devpi server (or web) I can use to get the version hashes like I can in pypi?\r\n\r\nI mean something like this: https://pypi.org/pypi/devpi-client/json  \r\nI can get the sha256 of every version via that URL, I can't find something similar in devpi nor an \r\n existing plugin.\r\n\r\nThanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/663", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/663/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/663/events", "html_url": "https://github.com/devpi/devpi/issues/663", "id": 443282481, "node_id": "MDU6SXNzdWU0NDMyODI0ODE=", "number": 663, "title": "Memory Error for large packages", "user": {"login": "MGough", "id": 6558104, "node_id": "MDQ6VXNlcjY1NTgxMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/6558104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MGough", "html_url": "https://github.com/MGough", "followers_url": "https://api.github.com/users/MGough/followers", "following_url": "https://api.github.com/users/MGough/following{/other_user}", "gists_url": "https://api.github.com/users/MGough/gists{/gist_id}", "starred_url": "https://api.github.com/users/MGough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MGough/subscriptions", "organizations_url": "https://api.github.com/users/MGough/orgs", "repos_url": "https://api.github.com/users/MGough/repos", "events_url": "https://api.github.com/users/MGough/events{/privacy}", "received_events_url": "https://api.github.com/users/MGough/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-13T09:00:18Z", "updated_at": "2019-05-13T10:10:31Z", "closed_at": "2019-05-13T09:30:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Every time pyTorch 1.1.0 is requested from Devpi it hangs for a while and then throws this MemoryError, it's a large package at 676.9 MB, once this error is thrown Devpi-server sometimes stops completely.\r\n\r\nI'm running devpi-server-4.9.0.\r\n\r\n```\r\n2019-05-13 08:56:00,691 INFO  [req153] GET /root/pypi/+f/40c/644abef1767dc/torch-1.1.0-cp36-cp36m-manylinux1_x86_64.whl\r\n2019-05-13 08:56:00,801 INFO  [req153] [Wtx1128] reading remote: https://files.pythonhosted.org/packages/69/60/f685fb2cfb3088736bafbc9bdbb455327bdc8906b606da9c9a81bae1c81e/torch-1.1.0-cp36-cp36m-manylinux1_x86_64.whl, target root/pypi/+f/40c/644abef1767dc/torch-1.1.0-cp36-cp36m-manylinux1_x86_64.whl\r\n2019-05-13 08:56:32,358 ERROR Exception while serving /root/pypi/+f/40c/644abef1767dc/torch-1.1.0-cp36-cp36m-manylinux1_x86_64.whl\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/waitress/channel.py\", line 356, in service\r\n    task.service()\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/waitress/task.py\", line 176, in service\r\n    self.execute()\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/waitress/task.py\", line 469, in execute\r\n    for chunk in app_iter:\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/devpi_server/views.py\", line 1242, in iter_fetch_remote_file\r\n    for part in entry.iter_cache_remote_file():\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/devpi_server/filestore.py\", line 303, in iter_cache_remote_file\r\n    content.write(data)\r\nMemoryError\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/658", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/658/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/658/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/658/events", "html_url": "https://github.com/devpi/devpi/issues/658", "id": 442140740, "node_id": "MDU6SXNzdWU0NDIxNDA3NDA=", "number": 658, "title": "Always require --storage option for custom backends", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-09T09:32:04Z", "updated_at": "2019-05-19T12:40:37Z", "closed_at": "2019-05-19T12:40:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently the ``--storage`` option is only required when initializing a devpi-server instance with ``--init``. It writes those options into ``.nodeinfo`` and looks them up when ``--storage`` isn't given.\r\n\r\nThis should be changed, so ``--storage`` is always required.\r\n\r\nFor the default case of using the sqlite backend with file storage, we should detect whether the ``.sqlite`` file exists. If it doesn't, then we tell the user that the ``--serverdir`` doesn't contain the sqlite database and remind him of the ``--storage`` option or the ``--init`` option in case the didn't initialize devpi-server yet.\r\n\r\nThis is a pre-requisit to get rid of ``.nodeinfo``.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/657", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/657/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/657/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/657/events", "html_url": "https://github.com/devpi/devpi/issues/657", "id": 438919043, "node_id": "MDU6SXNzdWU0Mzg5MTkwNDM=", "number": 657, "title": "Support replicating to a specific serial id", "user": {"login": "FRidh", "id": 2129135, "node_id": "MDQ6VXNlcjIxMjkxMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2129135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FRidh", "html_url": "https://github.com/FRidh", "followers_url": "https://api.github.com/users/FRidh/followers", "following_url": "https://api.github.com/users/FRidh/following{/other_user}", "gists_url": "https://api.github.com/users/FRidh/gists{/gist_id}", "starred_url": "https://api.github.com/users/FRidh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FRidh/subscriptions", "organizations_url": "https://api.github.com/users/FRidh/orgs", "repos_url": "https://api.github.com/users/FRidh/repos", "events_url": "https://api.github.com/users/FRidh/events{/privacy}", "received_events_url": "https://api.github.com/users/FRidh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-30T18:37:58Z", "updated_at": "2019-05-02T09:43:22Z", "closed_at": "2019-05-02T09:43:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "In order to let `pip` reproducibly evaluate a given set of requirements, we need a snapshot of PyPI. `devpi` allows one to replicate a PyPI index. Is it possible to replicate it to a given serial id? If not, what would it roughly take to implement such feature?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/656", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/656/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/656/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/656/events", "html_url": "https://github.com/devpi/devpi/issues/656", "id": 438199759, "node_id": "MDU6SXNzdWU0MzgxOTk3NTk=", "number": 656, "title": "RAM usage on kubernetes instation", "user": {"login": "kierun", "id": 3079575, "node_id": "MDQ6VXNlcjMwNzk1NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3079575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kierun", "html_url": "https://github.com/kierun", "followers_url": "https://api.github.com/users/kierun/followers", "following_url": "https://api.github.com/users/kierun/following{/other_user}", "gists_url": "https://api.github.com/users/kierun/gists{/gist_id}", "starred_url": "https://api.github.com/users/kierun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kierun/subscriptions", "organizations_url": "https://api.github.com/users/kierun/orgs", "repos_url": "https://api.github.com/users/kierun/repos", "events_url": "https://api.github.com/users/kierun/events{/privacy}", "received_events_url": "https://api.github.com/users/kierun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-29T08:23:48Z", "updated_at": "2019-08-18T15:37:23Z", "closed_at": "2019-08-18T15:37:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a local kubernetes deployment of devpi. Looking at it, it was taking 1.4G of RAM on the cluster, which I think is unreasonable. I killed the pod and now it is running with much less RAM -- several M which is fine and reasonable.\r\n\r\nI am not sure if this is devpi or my deployment of it on a local kubernetes cluster that causes it. Has anyone else seen something similar?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/648", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/648/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/648/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/648/events", "html_url": "https://github.com/devpi/devpi/issues/648", "id": 434607525, "node_id": "MDU6SXNzdWU0MzQ2MDc1MjU=", "number": 648, "title": "devpi-server can't connect to root/pypi index mirror_url", "user": {"login": "cncert", "id": 19517430, "node_id": "MDQ6VXNlcjE5NTE3NDMw", "avatar_url": "https://avatars1.githubusercontent.com/u/19517430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cncert", "html_url": "https://github.com/cncert", "followers_url": "https://api.github.com/users/cncert/followers", "following_url": "https://api.github.com/users/cncert/following{/other_user}", "gists_url": "https://api.github.com/users/cncert/gists{/gist_id}", "starred_url": "https://api.github.com/users/cncert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cncert/subscriptions", "organizations_url": "https://api.github.com/users/cncert/orgs", "repos_url": "https://api.github.com/users/cncert/repos", "events_url": "https://api.github.com/users/cncert/events{/privacy}", "received_events_url": "https://api.github.com/users/cncert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-18T06:18:33Z", "updated_at": "2019-04-19T07:10:09Z", "closed_at": "2019-04-19T07:10:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear,\r\nI modify root/pypi index is \"http://pypi.doubanio.com/simple\", and My devpi-server can't connect to the new root/pypi index mirror_url.,\r\nbut command  wget\u3001curl can access http://pypi.doubanio.com/simple very well.\r\nThe log is below:\r\n``2019-04-18 13:54:52,521 INFO  [req10] GET /\r\n2019-04-18 13:54:57,374 INFO  [req11] GET /root/pypi\r\n2019-04-18 13:55:05,535 INFO  [req12] GET /root/pypi/+simple/\r\n2019-04-18 13:55:05,535 INFO  [req12] starting +simple\r\n2019-04-18 13:55:46,057 WARNI [req12] [Rtx5] Connection error during httpget of http://pypi.doubanio.com/simple at /usr/local/ansible_python/python/lib/python2.7/site-packages/devpi_server/extpypi.py:254::_get_remote_projects\r\n2019-04-18 13:55:46,058 WARNI [req12] [Rtx5] upstream error (URL u'http://pypi.doubanio.com/simple' returned -1 ConnectTimeout(MaxRetryError(\"HTTPConnectionPool(host='pypi.doubanio.com/simple', port=80): Max retries exceeded with url: / (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x2b836afb0cd0>, 'Connection to pypi.doubanio.com/simple timed out. (connect timeout=5)'))\",),)): using stale projects list\r\n``\r\nand devpi index root/pypi config:\r\n``\r\n[root@gudru ~]# devpi index root/pypi\r\n\r\nhttp://218.221.108.115:3141/root/pypi:\r\n  type=mirror\r\n  volatile=False\r\n  mirror_url=pypi.doubanio.com/simple\r\n  mirror_web_url_fmt=https://pypi.org/project/{name}/\r\n  title=PyPI\r\n``\r\ncould you help me? THX\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/645", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/645/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/645/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/645/events", "html_url": "https://github.com/devpi/devpi/issues/645", "id": 432642945, "node_id": "MDU6SXNzdWU0MzI2NDI5NDU=", "number": 645, "title": "devpi upload --only-docs check_manifest.Failure", "user": {"login": "dougscc", "id": 48954562, "node_id": "MDQ6VXNlcjQ4OTU0NTYy", "avatar_url": "https://avatars3.githubusercontent.com/u/48954562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dougscc", "html_url": "https://github.com/dougscc", "followers_url": "https://api.github.com/users/dougscc/followers", "following_url": "https://api.github.com/users/dougscc/following{/other_user}", "gists_url": "https://api.github.com/users/dougscc/gists{/gist_id}", "starred_url": "https://api.github.com/users/dougscc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dougscc/subscriptions", "organizations_url": "https://api.github.com/users/dougscc/orgs", "repos_url": "https://api.github.com/users/dougscc/repos", "events_url": "https://api.github.com/users/dougscc/events{/privacy}", "received_events_url": "https://api.github.com/users/dougscc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-12T16:15:12Z", "updated_at": "2019-05-19T12:41:01Z", "closed_at": "2019-05-19T12:41:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "When attempting to upload docs to my devpi server with `devpi upload --only-docs` I get the following fail:\r\n\r\n```bash\r\n(venv) C:\\Users\\SomePerson\\Projects\\the-project>devpi upload --only-docs\r\nusing workdir C:\\Users\\SomePerson\\AppData\\Local\\Temp\\devpi9\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\check_manifest.py\", line 149, in run\r\n    stderr=subprocess.STDOUT, cwd=cwd)\r\n  File \"C:\\Users\\SomePerson\\AppData\\Local\\Programs\\Python\\Python37\\Lib\\subprocess.py\", line 775, in __init__\r\n    restore_signals, start_new_session)\r\n  File \"C:\\Users\\SomePerson\\AppData\\Local\\Programs\\Python\\Python37\\Lib\\subprocess.py\", line 1178, in _execute_child\r\n    startupinfo)\r\nFileNotFoundError: [WinError 2] The system cannot find the file specified\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\SomePerson\\AppData\\Local\\Programs\\Python\\Python37\\Lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"C:\\Users\\SomePerson\\AppData\\Local\\Programs\\Python\\Python37\\Lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\SomePerson\\Projects\\the-project\\venv\\Scripts\\devpi.exe\\__main__.py\", line 9, in <module>\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\devpi\\main.py\", line 36, in main\r\n    return method(hub, hub.args)\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\devpi\\upload.py\", line 36, in main\r\n    exported = checkout.export(uploadbase)\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\devpi\\upload.py\", line 304, in export\r\n    files = check_manifest.get_vcs_files()\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\check_manifest.py\", line 480, in get_vcs_files\r\n    return normalize_names(vcs.get_versioned_files())\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\check_manifest.py\", line 337, in get_versioned_files\r\n    files = cls._git_ls_files()\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\check_manifest.py\", line 346, in _git_ls_files\r\n    output = run(['git', 'ls-files', '-z'], encoding=cls._encoding, cwd=cwd)\r\n  File \"c:\\users\\someperson\\projects\\the-project\\venv\\lib\\site-packages\\check_manifest.py\", line 151, in run\r\n    raise Failure(\"could not run %s: %s\" % (command, e))\r\ncheck_manifest.Failure: could not run ['git', 'ls-files', '-z']: [WinError 2] The system cannot find the file specified\r\n```\r\nThe command is being run in a regular windows 10 `CMD` window in a virtual environment. I have successfully run this command in an almost identical layout. Is there a way to bypass the call to `git`?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/641", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/641/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/641/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/641/events", "html_url": "https://github.com/devpi/devpi/issues/641", "id": 428232001, "node_id": "MDU6SXNzdWU0MjgyMzIwMDE=", "number": 641, "title": "devpi test results uploaded with tox==3.8.4 are interpreted as failed", "user": {"login": "r2dan", "id": 26278998, "node_id": "MDQ6VXNlcjI2Mjc4OTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/26278998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r2dan", "html_url": "https://github.com/r2dan", "followers_url": "https://api.github.com/users/r2dan/followers", "following_url": "https://api.github.com/users/r2dan/following{/other_user}", "gists_url": "https://api.github.com/users/r2dan/gists{/gist_id}", "starred_url": "https://api.github.com/users/r2dan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r2dan/subscriptions", "organizations_url": "https://api.github.com/users/r2dan/orgs", "repos_url": "https://api.github.com/users/r2dan/repos", "events_url": "https://api.github.com/users/r2dan/events{/privacy}", "received_events_url": "https://api.github.com/users/r2dan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-04-02T13:36:52Z", "updated_at": "2019-04-04T18:36:06Z", "closed_at": "2019-04-04T10:43:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nWe're struggling with tox==3.8.4 and devpi test uploads as devpi-web renders the test results and test setup as failed, even though the return code of both setup commands and tests commands are 0.\r\n\r\nThe only difference is that tox==3.7.0 reports `\"retcode\": \"0\"`, while new tox: `\"retcode\": 0` (str vs int). I'm wondering if it makes sense to report it to tox community as well, or to fix it on devpi-common side (https://github.com/devpi/devpi/blob/master/common/devpi_common/viewhelp.py#L65).\r\n\r\nWhat's your opinion?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/640", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/640/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/640/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/640/events", "html_url": "https://github.com/devpi/devpi/issues/640", "id": 423826474, "node_id": "MDU6SXNzdWU0MjM4MjY0NzQ=", "number": 640, "title": "Test use tox's parallel instead of detox", "user": {"login": "henryborchers", "id": 7454877, "node_id": "MDQ6VXNlcjc0NTQ4Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7454877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryborchers", "html_url": "https://github.com/henryborchers", "followers_url": "https://api.github.com/users/henryborchers/followers", "following_url": "https://api.github.com/users/henryborchers/following{/other_user}", "gists_url": "https://api.github.com/users/henryborchers/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryborchers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryborchers/subscriptions", "organizations_url": "https://api.github.com/users/henryborchers/orgs", "repos_url": "https://api.github.com/users/henryborchers/repos", "events_url": "https://api.github.com/users/henryborchers/events{/privacy}", "received_events_url": "https://api.github.com/users/henryborchers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-21T16:32:46Z", "updated_at": "2019-05-19T12:41:31Z", "closed_at": "2019-05-19T12:41:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "detox support for tox is deprecated and is not even compatible with versions of tox > 3.6. Any chance devpi could support the newly builtin -p/--parallel flag?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/639", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/639/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/639/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/639/events", "html_url": "https://github.com/devpi/devpi/issues/639", "id": 423130238, "node_id": "MDU6SXNzdWU0MjMxMzAyMzg=", "number": 639, "title": "light-mirror mode", "user": {"login": "RonnyPfannschmidt", "id": 156838, "node_id": "MDQ6VXNlcjE1NjgzOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/156838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RonnyPfannschmidt", "html_url": "https://github.com/RonnyPfannschmidt", "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers", "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}", "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions", "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs", "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos", "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-20T08:44:18Z", "updated_at": "2019-09-30T07:36:16Z", "closed_at": "2019-09-30T07:36:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "i'm wondering if there is a sensible way for devpi, to refer to external file locations instead of mirroring the contents of pypi\r\n\r\nthe idea behind that being to safe space both when involving larger dependency trees, and the pip caches on consumers using the devpi", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/638", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/638/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/638/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/638/events", "html_url": "https://github.com/devpi/devpi/issues/638", "id": 422570703, "node_id": "MDU6SXNzdWU0MjI1NzA3MDM=", "number": 638, "title": "RFC Python compatibility policy", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-03-19T06:52:31Z", "updated_at": "2019-05-19T12:49:05Z", "closed_at": "2019-05-19T12:49:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For Python 2.7 we will provide support until our infrastructure (travis-ci, appveyor etc) makes it too hard to test it anymore or the workarounds necessary become to costly for our service contract customers.\r\n\r\nFor Python 3.x this is still an open question. Any input on that? Just recently Python 3.4 had it's EOL, see https://devguide.python.org/\r\n\r\nUnfortunately the tests for devpi-client require a running devpi-server and so far we didn't have a good incentive to try to run it with a different Python version. This would also have to work with Travis-CI, Appveyor and in a local dev environment. Otherwise we would only have to care about devpi-common/devpi-client, and devpi-server with all plugins could move on much quicker.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/637", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/637/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/637/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/637/events", "html_url": "https://github.com/devpi/devpi/issues/637", "id": 422568725, "node_id": "MDU6SXNzdWU0MjI1Njg3MjU=", "number": 637, "title": "Share server secret with replicas", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}, {"id": 573429755, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTU=", "url": "https://api.github.com/repos/devpi/devpi/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-03-19T06:45:15Z", "updated_at": "2020-04-26T12:04:55Z", "closed_at": "2020-04-26T12:04:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently replicas have their own server secret. This isn't an issue yet. I discovered it when I wanted to check a permission for a logged in user in a plugin. The login goes to master and it returns the signed token. That token can't be verified on the replica, because the replica has it's own secret. The question is how to best share it. Either we would need to require an https connection to the master or build our own exchange. We could also add a config option to let the secret be passed via http in cases where you are sure it can't be sniffed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/636", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/636/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/636/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/636/events", "html_url": "https://github.com/devpi/devpi/issues/636", "id": 422386438, "node_id": "MDU6SXNzdWU0MjIzODY0Mzg=", "number": 636, "title": "`devpi list <package_name>` should have an option to list only releases in current index", "user": {"login": "r2dan", "id": 26278998, "node_id": "MDQ6VXNlcjI2Mjc4OTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/26278998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r2dan", "html_url": "https://github.com/r2dan", "followers_url": "https://api.github.com/users/r2dan/followers", "following_url": "https://api.github.com/users/r2dan/following{/other_user}", "gists_url": "https://api.github.com/users/r2dan/gists{/gist_id}", "starred_url": "https://api.github.com/users/r2dan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r2dan/subscriptions", "organizations_url": "https://api.github.com/users/r2dan/orgs", "repos_url": "https://api.github.com/users/r2dan/repos", "events_url": "https://api.github.com/users/r2dan/events{/privacy}", "received_events_url": "https://api.github.com/users/r2dan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-18T19:07:10Z", "updated_at": "2019-05-31T11:10:24Z", "closed_at": "2019-05-31T11:10:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "devpi-client version: 4.3.0\r\n\r\nThe **devpi list <package_name>** subcommand currently shows all releases of a package specified in the command. Let's see at the output on one of the indexes living on https://m.devpi.net:\r\n```\r\n$ devpi list --index stefan12/dev example                         \r\nhttps://m.devpi.net/stefan12/dev/+f/7b7/b642210fbccd3/example-1.1.tar.gz\r\nhttps://m.devpi.net/stefan12/dev/+f/5c0/5b87ff675b39c/example-1.0.tar.gz\r\nhttps://m.devpi.net/stefan12/prod/+f/5c0/5b87ff675b39c/example-1.0.tar.gz\r\n```\r\n\r\nLast result is released on the index that stefan12/dev inherits from. I think that the default behaviour should remain unchanged (as sometimes you do not specify the index name explicitly), but maybe it would be useful to have some kind of switch to limit the result to the current index only (no inherited packages included). I'm not sure about the name of the switch though, maybe someone will come up with a better name ;):\r\n\r\n```\r\n$ devpi list --index stefan12/dev example --no-bases                      \r\nhttps://m.devpi.net/stefan12/dev/+f/7b7/b642210fbccd3/example-1.1.tar.gz\r\nhttps://m.devpi.net/stefan12/dev/+f/5c0/5b87ff675b39c/example-1.0.tar.gz\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/632", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/632/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/632/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/632/events", "html_url": "https://github.com/devpi/devpi/issues/632", "id": 416043683, "node_id": "MDU6SXNzdWU0MTYwNDM2ODM=", "number": 632, "title": "devpi-test should not report tests results when Interpreter is not found", "user": {"login": "r2dan", "id": 26278998, "node_id": "MDQ6VXNlcjI2Mjc4OTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/26278998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r2dan", "html_url": "https://github.com/r2dan", "followers_url": "https://api.github.com/users/r2dan/followers", "following_url": "https://api.github.com/users/r2dan/following{/other_user}", "gists_url": "https://api.github.com/users/r2dan/gists{/gist_id}", "starred_url": "https://api.github.com/users/r2dan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r2dan/subscriptions", "organizations_url": "https://api.github.com/users/r2dan/orgs", "repos_url": "https://api.github.com/users/r2dan/repos", "events_url": "https://api.github.com/users/r2dan/events{/privacy}", "received_events_url": "https://api.github.com/users/r2dan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580720853, "node_id": "MDU6TGFiZWw1ODA3MjA4NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-web", "name": "devpi-web", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-01T10:42:56Z", "updated_at": "2019-09-28T12:18:41Z", "closed_at": "2019-09-28T12:18:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running `devpi test` on machine where only one version of Python interpreter is installed and tox is configured to run on multiple Python interpreter versions and skip_missing_interpreters flag is set to true, devpi test uploads the test results even if the interpreter was not available on machine and devpi web displays the test as passed on version.pt page, which might be misleading, as in example below:\r\n![image](https://user-images.githubusercontent.com/26278998/53632964-8207b100-3c16-11e9-9303-97b4ad3899d9.png)\r\n\r\nUser can check what really happened when checking detailed view (toxresults.pt):\r\n![image](https://user-images.githubusercontent.com/26278998/53633066-bd09e480-3c16-11e9-8652-eb373f7ecb28.png)\r\n\r\nIMHO it wouldn't be better to somehow change the devpi-client behaviour to not upload such test results.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/629", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/629/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/629/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/629/events", "html_url": "https://github.com/devpi/devpi/issues/629", "id": 414181001, "node_id": "MDU6SXNzdWU0MTQxODEwMDE=", "number": 629, "title": "Fresh install of depvi-server 4.8.0 doesn't start", "user": {"login": "pradeeps", "id": 224577, "node_id": "MDQ6VXNlcjIyNDU3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/224577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pradeeps", "html_url": "https://github.com/pradeeps", "followers_url": "https://api.github.com/users/pradeeps/followers", "following_url": "https://api.github.com/users/pradeeps/following{/other_user}", "gists_url": "https://api.github.com/users/pradeeps/gists{/gist_id}", "starred_url": "https://api.github.com/users/pradeeps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pradeeps/subscriptions", "organizations_url": "https://api.github.com/users/pradeeps/orgs", "repos_url": "https://api.github.com/users/pradeeps/repos", "events_url": "https://api.github.com/users/pradeeps/events{/privacy}", "received_events_url": "https://api.github.com/users/pradeeps/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-25T16:07:33Z", "updated_at": "2019-05-19T15:07:04Z", "closed_at": "2019-05-19T15:07:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nThis is my install \r\ndevpi-server-4.8.0\r\ndevpi-web-3.5.0\r\n\r\nI've installed these in virtualenv with python 3.7.2 on windows 10\r\n\r\nThis is the error message when I try to start devpi server:\r\n\r\n> \r\n> C:\\Users\\pradeepsusarla\\Desktop\\devpi\\devpi_env\\Scripts\\devpi-server --port 3141 --host=0.0.0.0\r\n> process 'devpi-server' started pid=572\r\n> Traceback (most recent call last):\r\n>   File \"c:\\program files (x86)\\python37-32\\Lib\\runpy.py\", line 193, in _run_module_as_main\r\n>     \"__main__\", mod_spec)\r\n>   File \"c:\\program files (x86)\\python37-32\\Lib\\runpy.py\", line 85, in _run_code\r\n>     exec(code, run_globals)\r\n>   File \"C:\\Users\\pradeepsusarla\\Desktop\\devpi\\devpi_env\\Scripts\\devpi-server.exe\\__main__.py\", line 9, in <module>\r\n>   File \"c:\\users\\pradeepsusarla\\desktop\\devpi\\devpi_env\\lib\\site-packages\\devpi_server\\main.py\", line 56, in main\r\n>     return _main(pluginmanager, argv=argv)\r\n>   File \"c:\\users\\pradeepsusarla\\desktop\\devpi\\devpi_env\\lib\\site-packages\\devpi_server\\main.py\", line 105, in _main\r\n>     return bgserver.start(args, argv[1:])\r\n>   File \"c:\\users\\pradeepsusarla\\desktop\\devpi\\devpi_env\\lib\\site-packages\\devpi_server\\bgserver.py\", line 78, in start\r\n>     self.xproc.ensure(\"devpi-server\", prepare_devpiserver)\r\n>   File \"c:\\users\\pradeepsusarla\\desktop\\devpi\\devpi_env\\lib\\site-packages\\devpi_server\\vendor\\xprocess.py\", line 171, in ensure\r\n>     raise RuntimeError(\"Could not start process %s\" % name)\r\n> RuntimeError: Could not start process devpi-server\r\n\r\nBut I can access devpi at the above address anyway. But this error is not supposed to happen. \r\n\r\nAny ideas?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/628", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/628/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/628/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/628/events", "html_url": "https://github.com/devpi/devpi/issues/628", "id": 411799435, "node_id": "MDU6SXNzdWU0MTE3OTk0MzU=", "number": 628, "title": "Replica fails to show package details when master is down", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-19T08:22:08Z", "updated_at": "2019-09-14T13:08:30Z", "closed_at": "2019-09-14T13:08:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The replica calls get_mirror_whitelist_info which in turn calls has_project_perstage on root/pypi. When the cache is expired, then the resulting connection error isn't caught and the replica returns an error page.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/625", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/625/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/625/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/625/events", "html_url": "https://github.com/devpi/devpi/issues/625", "id": 400182160, "node_id": "MDU6SXNzdWU0MDAxODIxNjA=", "number": 625, "title": "Remove requirement for \"register\" call", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}, {"id": 573429758, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTg=", "url": "https://api.github.com/repos/devpi/devpi/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-17T09:26:47Z", "updated_at": "2019-05-31T10:28:21Z", "closed_at": "2019-05-31T10:28:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was thinking about removing the requirement to register for a while now.\r\n\r\nIt was brought up again in #605 \r\n\r\nMy biggest concern was typos in package name, but that seems irrelevant now that I thought about it more. The likelihood of having a typo is at the start of a package. The registration step doesn't solve that.\r\n\r\nThe other concern was accidental uploads of a package to the wrong index. Here the registration step helps, because you get an error if the package wasn't uploaded before.\r\n\r\nIt's relatively easy to clean up an accidental upload in a volatile index, so this shouldn't be a blocker either.\r\n\r\nThe only question I still have is:\r\nShould we still require it for non volatile indices, because it's (much) harder to clean them up?\r\nAny input on that question is appreciated. cc @r2dan, @jaraco, @StephanErb, @hpk42, @rhelms", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/624", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/624/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/624/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/624/events", "html_url": "https://github.com/devpi/devpi/issues/624", "id": 399776641, "node_id": "MDU6SXNzdWUzOTk3NzY2NDE=", "number": 624, "title": "Package name clash: always use the local one!", "user": {"login": "kierun", "id": 3079575, "node_id": "MDQ6VXNlcjMwNzk1NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3079575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kierun", "html_url": "https://github.com/kierun", "followers_url": "https://api.github.com/users/kierun/followers", "following_url": "https://api.github.com/users/kierun/following{/other_user}", "gists_url": "https://api.github.com/users/kierun/gists{/gist_id}", "starred_url": "https://api.github.com/users/kierun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kierun/subscriptions", "organizations_url": "https://api.github.com/users/kierun/orgs", "repos_url": "https://api.github.com/users/kierun/repos", "events_url": "https://api.github.com/users/kierun/events{/privacy}", "received_events_url": "https://api.github.com/users/kierun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-01-16T11:59:56Z", "updated_at": "2019-01-16T13:16:37Z", "closed_at": "2019-01-16T13:16:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a devpi server set up to have a local repository which inherits from the main PyPI one. I have a local package called `mead` which clashes with one in PyPI. I assumed that if the local index has the mead package, then I would not need to worry about the PyPI one. \r\n\r\nRunning search, this is fine:\r\n\r\n```\r\n; pip search mead                           \r\nmead            - [root/public] My crazy package.\r\nnelder-mead     - [root/pypi]\r\nneldermead      - [root/pypi]\r\n```\r\n\r\nHowever, running pip install gives me the *wrong package*:\r\n\r\n```\r\n; pip install mead                          \r\nCollecting mead\r\n  Downloading http://devpi.example.org/root/pypi/+f/978/98e728d01b4d3/mead-0.0.11.tar.gz\r\nCollecting redis (from mead)\r\n```\r\n\r\nPinning to a version I know I have *in my local repository* gets me the *right package*:\r\n\r\n```\r\n; pip install mead==0.4.0.dev2\r\nCollecting mead==0.4.0.dev2\r\n  Downloading http://devpi.example.org/root/public/+f/492/f6301e2c5305f/mead-0.4.0.dev2.tar.gz (156kB)\r\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 159kB 26.9MB/s \r\n```\r\n\r\nApart from renaming my package -- which sounds really stupid and brittle as a solution -- is there a way to set `devpi` so that it ignore modules if they are present in the local index?\r\n\r\nIs there a black list I can add to an index?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/622", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/622/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/622/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/622/events", "html_url": "https://github.com/devpi/devpi/issues/622", "id": 394835692, "node_id": "MDU6SXNzdWUzOTQ4MzU2OTI=", "number": 622, "title": "`devpi remove` raises 404 if inheriting from index containing the same package ", "user": {"login": "DomHudson", "id": 10864294, "node_id": "MDQ6VXNlcjEwODY0Mjk0", "avatar_url": "https://avatars2.githubusercontent.com/u/10864294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DomHudson", "html_url": "https://github.com/DomHudson", "followers_url": "https://api.github.com/users/DomHudson/followers", "following_url": "https://api.github.com/users/DomHudson/following{/other_user}", "gists_url": "https://api.github.com/users/DomHudson/gists{/gist_id}", "starred_url": "https://api.github.com/users/DomHudson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DomHudson/subscriptions", "organizations_url": "https://api.github.com/users/DomHudson/orgs", "repos_url": "https://api.github.com/users/DomHudson/repos", "events_url": "https://api.github.com/users/DomHudson/events{/privacy}", "received_events_url": "https://api.github.com/users/DomHudson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-30T00:30:26Z", "updated_at": "2019-04-25T18:42:27Z", "closed_at": "2019-04-25T18:42:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Summary\r\n\r\nAttempting to delete a package from an index which inherits from another index (which has a package by the same name) causes an error.\r\n\r\nThis causes an issue as my workflow is to \"stage\" releases to a development or staging index prior to releasing them to a production index.\r\n\r\n## Expected results\r\n\r\nWhen deleting from an index, I do not expect it to list versions of the package which are not present in that index.\r\nWhen deleting from an index, I only expect it to hit the `DELETE` endpoint for packages which are in that index.\r\n\r\n## Actual results\r\n\r\nWhen deleting from an index, it lists packages by the same name in parent indices.\r\nWhen deleting from an index, the `DELETE` endpoint is requested even if that package version is only present in a parent index. This raises a 404 and the program exits.\r\n\r\n## Replication\r\n\r\n[I have created a repository that replicates the problem from scratch](https://github.com/DomHudson/devpi-bug-replication). Simply clone repository and run `script.sh`.\r\n\r\n## Replication (details)\r\n\r\nThe steps that the script in the above repository calls are as follows:\r\n\r\n0. Create a virtualenv and devpi instance etc\r\n\r\n1. Login to the server.\r\n```bash\r\n    devpi use http://localhost:8000\r\n    devpi login root --password=\r\n```\r\n\r\n2. Set up indices.\r\n```bash\r\n    devpi index -c production\r\n    devpi index -c development bases=root/production\r\n```\r\n\r\n3. Upload the package to the production index.\r\n```bash\r\n    cd test_package upload\r\n    devpi use root/production\r\n    devpi upload\r\n    cd ..\r\n```\r\n\r\n4. Upload a package with the same name (but a newer version) to the development index.\r\n```bash\r\n    cd test_package_v2\r\n    devpi use root/development\r\n    devpi upload\r\n    cd ..\r\n```\r\n\r\n**At this point, we have v1.0.0 on the production index, and v2.0.0 on the development index.**\r\n\r\n5. Try and remove the package from development index.\r\n```bash\r\n    devpi use root/development\r\n    devpi remove test_package\r\n```\r\n\r\nThe stdout out of this remove command indicates both version 1.0.0 and version 2.0.0 and claims that it will delete version 1.0.0 of the package even though the development index does not have this version.\r\n```bash\r\n    About to remove the following releases and distributions\r\n    version: 1.0.0\r\n      - No releases\r\n    version: 2.0.0\r\n      - http://localhost:8000/root/development/+f/734/2e0f2266bd498/test_package-2.0.0.tar.gz\r\n    Are you sure (yes/no)?\r\n```\r\n\r\nTyping `yes` in response to this prompt returns an error:\r\n```\r\n    Are you sure (yes/no)? yes\r\n    deleting release 1.0.0 of test-package\r\n    DELETE http://localhost:8000/root/development/test-package/1.0.0\r\n    404 Not Found: version '1.0.0' of project 'test-package' not found on stage 'root/development'\r\n```\r\n\r\n## Bypass\r\n\r\nA way to bypass this bug is to specify the exact version number when you wish to delete from the inheriting index.\r\n\r\n```bash\r\ndevpi remove test_package==2.0.0\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/620", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/620/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/620/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/620/events", "html_url": "https://github.com/devpi/devpi/issues/620", "id": 392354335, "node_id": "MDU6SXNzdWUzOTIzNTQzMzU=", "number": 620, "title": "--recreate-search-index for a replica?", "user": {"login": "sdwilliams61", "id": 38796933, "node_id": "MDQ6VXNlcjM4Nzk2OTMz", "avatar_url": "https://avatars1.githubusercontent.com/u/38796933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdwilliams61", "html_url": "https://github.com/sdwilliams61", "followers_url": "https://api.github.com/users/sdwilliams61/followers", "following_url": "https://api.github.com/users/sdwilliams61/following{/other_user}", "gists_url": "https://api.github.com/users/sdwilliams61/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdwilliams61/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdwilliams61/subscriptions", "organizations_url": "https://api.github.com/users/sdwilliams61/orgs", "repos_url": "https://api.github.com/users/sdwilliams61/repos", "events_url": "https://api.github.com/users/sdwilliams61/events{/privacy}", "received_events_url": "https://api.github.com/users/sdwilliams61/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-12-18T22:01:27Z", "updated_at": "2019-05-19T15:12:09Z", "closed_at": "2019-05-19T15:12:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello all,\r\n[Apologies if I've missed a pre-existing answer to my question]\r\n\r\nWe've got v4.6.0  devpi master and replica server,  devpi-web is installed.  The system has been operational for several months w/SQLite files at about 15Gb.   *Thank you!*\r\n\r\nUnfortunately, I need to rebuild the .indices directory on the replica (only).  I have tried it without much luck, meaning, I watched the subdirectories under .indices and saw no changes over a long period.   \r\n\r\n I notice that the docs for --recreate-search-index don't specify what role a server is. Does it matter?\r\n\r\nIs there any way to rebuild the search index wholly with the (offline) replica data?\r\n\r\nAny general issues to consider when rebuilding a search index in this arrangement?  \r\n\r\nBTW, I like the direction this is going: https://github.com/devpi/devpi/issues/566\r\n\r\nThanks again,\r\nScott\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/619", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/619/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/619/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/619/events", "html_url": "https://github.com/devpi/devpi/issues/619", "id": 390848960, "node_id": "MDU6SXNzdWUzOTA4NDg5NjA=", "number": 619, "title": "Support docs building/upload without invoking setup.py", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-12-13T20:34:22Z", "updated_at": "2019-05-19T15:13:35Z", "closed_at": "2019-05-19T15:13:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In order to wean ourselves off of an assumption of setuptools and build on the emergent PEP 517 and 518 behavior, I'm seeking to avoid invoking setup.py at all in a process to build and upload docs to devpi from a tagged commit in CI.\r\n\r\nI see in #388 and #546, I and others have encountered this issue before.\r\n\r\nThe comments in #546 imply that it should be possible for a routine to build the docs and then upload them.\r\n\r\nI've got a routine that does this in a tox env:\r\n\r\n```\r\n\tpython -m sphinx docs html\r\n\tpython -m zipfile -c dist/docs.zip html/*\r\n\tdevpi use {env:TWINE_REPOSITORY_URL}\r\n\tdevpi upload --only-docs dist/docs.zip\r\n```\r\n\r\nBut it fails on the last line with\r\n\r\n```\r\ndocs.zip: does not contain PKGINFO, skipping\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/616", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/616/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/616/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/616/events", "html_url": "https://github.com/devpi/devpi/issues/616", "id": 388995720, "node_id": "MDU6SXNzdWUzODg5OTU3MjA=", "number": 616, "title": "How to list cached packages?", "user": {"login": "GreatBahram", "id": 14103831, "node_id": "MDQ6VXNlcjE0MTAzODMx", "avatar_url": "https://avatars1.githubusercontent.com/u/14103831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GreatBahram", "html_url": "https://github.com/GreatBahram", "followers_url": "https://api.github.com/users/GreatBahram/followers", "following_url": "https://api.github.com/users/GreatBahram/following{/other_user}", "gists_url": "https://api.github.com/users/GreatBahram/gists{/gist_id}", "starred_url": "https://api.github.com/users/GreatBahram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GreatBahram/subscriptions", "organizations_url": "https://api.github.com/users/GreatBahram/orgs", "repos_url": "https://api.github.com/users/GreatBahram/repos", "events_url": "https://api.github.com/users/GreatBahram/events{/privacy}", "received_events_url": "https://api.github.com/users/GreatBahram/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-12-09T07:26:17Z", "updated_at": "2018-12-12T11:17:41Z", "closed_at": "2018-12-12T11:17:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I ran these instructions [link](https://devpi.net/docs/devpi/devpi/stable/+doc/quickstart-pypimirror.html) (your simple quick-start) and then I created another indices that inherited from `root/pypi` and after that I installed some packages on that via `devpi install` command ( no to mention that I ran `dev use new_index` before installing anything).\r\nNow I want to list cached packages in this index? I've tried `devpi list` but it shows nothing empty output and `devpi install -l` shows the `pip freeze` result.\r\nOutput of `devpi list`:\r\n```bash\r\n(devpi) user:~/ $ devpi list                                                                                                                                         \r\n(devpi) user:~/ $\r\n```\r\nOutput of `devpi getjson http://localhost:3141/root`\r\n```bash\r\n{\r\n    \"result\": {\r\n        \"indexes\": {\r\n            \"pypi\": {\r\n                \"mirror_url\": \"https://pypi.org/simple/\",\r\n                \"mirror_web_url_fmt\": \"https://pypi.org/project/{name}/\",\r\n                \"title\": \"PyPI\",\r\n                \"type\": \"mirror\",\r\n                \"volatile\": false\r\n            },\r\n            \"second\": {\r\n                \"acl_toxresult_upload\": [\r\n                    \":ANONYMOUS:\"\r\n                ],\r\n                \"acl_upload\": [\r\n                    \"root\"\r\n                ],\r\n                \"bases\": [\r\n                    \"root/pypi\"\r\n                ],\r\n                \"mirror_whitelist\": [],\r\n                \"pypi_whitelist\": [],\r\n                \"type\": \"stage\",\r\n                \"volatile\": true\r\n            }\r\n        },\r\n        \"username\": \"root\"\r\n    },\r\n    \"type\": \"userconfig\"\r\n}\r\n\r\n```\r\nAny suggestions?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/615", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/615/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/615/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/615/events", "html_url": "https://github.com/devpi/devpi/issues/615", "id": 388247201, "node_id": "MDU6SXNzdWUzODgyNDcyMDE=", "number": 615, "title": "devpi-server can't modify root/pypi index offline", "user": {"login": "lixianyang", "id": 6286227, "node_id": "MDQ6VXNlcjYyODYyMjc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6286227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lixianyang", "html_url": "https://github.com/lixianyang", "followers_url": "https://api.github.com/users/lixianyang/followers", "following_url": "https://api.github.com/users/lixianyang/following{/other_user}", "gists_url": "https://api.github.com/users/lixianyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/lixianyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lixianyang/subscriptions", "organizations_url": "https://api.github.com/users/lixianyang/orgs", "repos_url": "https://api.github.com/users/lixianyang/repos", "events_url": "https://api.github.com/users/lixianyang/events{/privacy}", "received_events_url": "https://api.github.com/users/lixianyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-12-06T14:50:13Z", "updated_at": "2019-03-13T08:40:59Z", "closed_at": "2019-03-13T08:40:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "## info\r\ndevpi-lockdown-1.0.1\r\ndevpi-server-4.8.0\r\ndevpi-theme-16-2.1.0\r\ndevpi-web-3.5.0\r\ndevpi-client-4.2.0\r\npython:3.6.5\r\n## what I do\r\ndevpi-server can't connect Internet\r\n```shell\r\ndevpi index root/pypi volatile=True\r\n```\r\n## devpi client output\r\n```\r\nWARN: devpi-client-4.2.0 got an unversioned reply, assuming API-VERSION 2 (as implemented by devpi-server-2.0)\r\nPATCH http://xx.xxx.xxx.cn/root/pypi\r\n500 Internal Server Error: Internal Server Error\r\n\r\nThe server encountered an unexpected internal server error\r\n\r\n(generated by waitress)\r\n```\r\n## devpi server log\r\n```\r\n2018-12-06 22:33:41,480 INFO  [req148] GET /root/pypi\r\n2018-12-06 22:34:02,239 ERROR [req148] [Rtx1083] Error during httpget of https://pypi.org/simple/\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connection.py\", line 159, in _new_conn\r\n    (self._dns_host, self.port), self.timeout, **extra_kw)\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py\", line 80, in create_connection\r\n    raise err\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py\", line 70, in create_connection\r\n    sock.connect(sa)\r\nOSError: [Errno 101] Network is unreachable\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 600, in urlopen\r\n    chunked=chunked)\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 343, in _make_request\r\n    self._validate_conn(conn)\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 839, in _validate_conn\r\n    conn.connect()\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connection.py\", line 301, in connect\r\n    conn = self._new_conn()\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connection.py\", line 168, in _new_conn\r\n    self, \"Failed to establish a new connection: %s\" % e)\r\nurllib3.exceptions.NewConnectionError: <urllib3.connection.VerifiedHTTPSConnection object at 0x7f646786bf98>: Failed to establish a new connection: [Errno 101] Network is unreachable\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/requests/adapters.py\", line 449, in send\r\n    timeout=timeout\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 638, in urlopen\r\n    _stacktrace=sys.exc_info()[2])\r\n  File \"/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py\", line 398, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='pypi.org', port=443): Max retries exceeded with url: /simple/ (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x7f646786bf98>: Failed to establish a new connection: [Errno 101] Network is unreachable',))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/main.py\", line 297, in httpget\r\n    timeout=timeout or self.config.args.request_timeout)\r\n  File \"/usr/local/lib/python3.6/site-packages/requests/sessions.py\", line 546, in get\r\n    return self.request('GET', url, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/requests/sessions.py\", line 533, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/requests/sessions.py\", line 646, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/requests/adapters.py\", line 516, in send\r\n    raise ConnectionError(e, request=request)\r\nrequests.exceptions.ConnectionError: HTTPSConnectionPool(host='pypi.org', port=443): Max retries exceeded with url: /simple/ (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x7f646786bf98>: Failed to establish a new connection: [Errno 101] Network is unreachable',))\r\n2018-12-06 22:34:02,243 WARNI [req148] [Rtx1083] upstream error (URL 'https://pypi.org/simple/' returned -1): using stale projects list\r\n2018-12-06 22:34:02,263 INFO  [req149] PATCH /root/pypi\r\n2018-12-06 22:34:02,273 ERROR Exception when serving /root/pypi\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 13, in _error_handler\r\n    response = request.invoke_exception_view(exc_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/view.py\", line 769, in invoke_exception_view\r\n    raise HTTPNotFound\r\npyramid.httpexceptions.HTTPNotFound: The resource could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/channel.py\", line 338, in service\r\n    task.service()\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/task.py\", line 169, in service\r\n    self.execute()\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/task.py\", line 399, in execute\r\n    app_iter = self.channel.server.application(env, start_response)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 146, in __call__\r\n    return self.app(environ, start_response)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 270, in __call__\r\n    response = self.execution_policy(environ, self)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 279, in default_execution_policy\r\n    return request.invoke_exception_view(reraise=True)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/view.py\", line 768, in invoke_exception_view\r\n    reraise_(*exc_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/compat.py\", line 179, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 277, in default_execution_policy\r\n    return router.invoke_request(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 249, in invoke_request\r\n    response = handle_request(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 170, in request_log_handler\r\n    response = handler(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 206, in request_tx_handler\r\n    response = handler(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 43, in excview_tween\r\n    response = _error_handler(request, exc)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 17, in _error_handler\r\n    reraise(*exc_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/compat.py\", line 179, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 41, in excview_tween\r\n    response = handler(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 148, in handle_request\r\n    registry, request, context, context_iface, view_name\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/view.py\", line 657, in _call_view\r\n    response = view_callable(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/config/views.py\", line 169, in __call__\r\n    return view(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/config/views.py\", line 188, in attr_view\r\n    return view(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/config/views.py\", line 214, in predicate_wrapper\r\n    return view(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/viewderivers.py\", line 325, in secured_view\r\n    return view(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/viewderivers.py\", line 401, in viewresult_to_response\r\n    result = view(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/viewderivers.py\", line 116, in _class_requestonly_view\r\n    response = getattr(inst, attr)()\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 640, in index_modify\r\n    ixconfig = stage.get()\r\nAttributeError: 'PyPIStage' object has no attribute 'get'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/614", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/614/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/614/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/614/events", "html_url": "https://github.com/devpi/devpi/issues/614", "id": 388239953, "node_id": "MDU6SXNzdWUzODgyMzk5NTM=", "number": 614, "title": "unknown hook 'devpiserver_hookimpl' on updating devpi-web to 3.4.0, 3.4.1 or 3.5.0", "user": {"login": "prupert", "id": 171170, "node_id": "MDQ6VXNlcjE3MTE3MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/171170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prupert", "html_url": "https://github.com/prupert", "followers_url": "https://api.github.com/users/prupert/followers", "following_url": "https://api.github.com/users/prupert/following{/other_user}", "gists_url": "https://api.github.com/users/prupert/gists{/gist_id}", "starred_url": "https://api.github.com/users/prupert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prupert/subscriptions", "organizations_url": "https://api.github.com/users/prupert/orgs", "repos_url": "https://api.github.com/users/prupert/repos", "events_url": "https://api.github.com/users/prupert/events{/privacy}", "received_events_url": "https://api.github.com/users/prupert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-06T14:33:43Z", "updated_at": "2019-03-14T13:03:04Z", "closed_at": "2019-03-14T13:03:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "We encountered the following error when running `devpi-server` after updating the `devpi-web`  package to 3.4.0, 3.4.1 or 3.5.0. It seems to be working when using devpi-web==3.3.0.\r\n\r\n```\r\nTraceback (most recent call last):\r\nFile \"/home/devpi/venv/bin/devpi-server\", line 11, in <module>\r\nsys.exit(main())\r\nFile \"/home/devpi/venv/lib/python3.5/site-packages/devpi_server/main.py\", line 54, in main\r\npluginmanager = get_pluginmanager()\r\nFile \"/home/devpi/venv/lib/python3.5/site-packages/devpi_server/config.py\", line 35, in get_pluginmanager\r\npm.check_pending()\r\nFile \"/home/devpi/venv/lib/python3.5/site-packages/pluggy.py\", line 498, in check_pending\r\n(name, hookimpl.plugin))\r\npluggy.PluginValidationError: unknown hook 'devpiserver_hookimpl' in plugin <module 'devpi_web.main' from '/home/devpi/venv/lib/python3.5/site-packages/devpi_web/main.py'>\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/613", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/613/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/613/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/613/events", "html_url": "https://github.com/devpi/devpi/issues/613", "id": 387635687, "node_id": "MDU6SXNzdWUzODc2MzU2ODc=", "number": 613, "title": "How do I mirror pypi completely with devpi?", "user": {"login": "GreatBahram", "id": 14103831, "node_id": "MDQ6VXNlcjE0MTAzODMx", "avatar_url": "https://avatars1.githubusercontent.com/u/14103831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GreatBahram", "html_url": "https://github.com/GreatBahram", "followers_url": "https://api.github.com/users/GreatBahram/followers", "following_url": "https://api.github.com/users/GreatBahram/following{/other_user}", "gists_url": "https://api.github.com/users/GreatBahram/gists{/gist_id}", "starred_url": "https://api.github.com/users/GreatBahram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GreatBahram/subscriptions", "organizations_url": "https://api.github.com/users/GreatBahram/orgs", "repos_url": "https://api.github.com/users/GreatBahram/repos", "events_url": "https://api.github.com/users/GreatBahram/events{/privacy}", "received_events_url": "https://api.github.com/users/GreatBahram/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-05T08:02:13Z", "updated_at": "2018-12-07T17:41:04Z", "closed_at": "2018-12-07T17:41:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nHow do I mirror pypi completely I mean I don't want to just cache it.\r\nDoes `devpi` can do this? Second solution is to first mirror the pypi with `bandersnatch` and then run `devpi` on that? is there any better solution?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/611", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/611/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/611/events", "html_url": "https://github.com/devpi/devpi/issues/611", "id": 386760812, "node_id": "MDU6SXNzdWUzODY3NjA4MTI=", "number": 611, "title": "how to mirror PYPI public server?", "user": {"login": "GreatBahram", "id": 14103831, "node_id": "MDQ6VXNlcjE0MTAzODMx", "avatar_url": "https://avatars1.githubusercontent.com/u/14103831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GreatBahram", "html_url": "https://github.com/GreatBahram", "followers_url": "https://api.github.com/users/GreatBahram/followers", "following_url": "https://api.github.com/users/GreatBahram/following{/other_user}", "gists_url": "https://api.github.com/users/GreatBahram/gists{/gist_id}", "starred_url": "https://api.github.com/users/GreatBahram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GreatBahram/subscriptions", "organizations_url": "https://api.github.com/users/GreatBahram/orgs", "repos_url": "https://api.github.com/users/GreatBahram/repos", "events_url": "https://api.github.com/users/GreatBahram/events{/privacy}", "received_events_url": "https://api.github.com/users/GreatBahram/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-03T10:51:02Z", "updated_at": "2018-12-04T10:59:22Z", "closed_at": "2018-12-04T10:59:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\nI want to mirror pypi server but not all of the packges, I just want some of them, is there any whitelist plugin for that?\r\nCan I have both public caching mechanism and private pypi repository at the same time? how?\r\nShould I use cheese shop source for my internal pypi?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/610", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/610/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/610/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/610/events", "html_url": "https://github.com/devpi/devpi/issues/610", "id": 384196274, "node_id": "MDU6SXNzdWUzODQxOTYyNzQ=", "number": 610, "title": "unable to access devpi-server from other machine. Devpi-server is running on http://locahost:3141//cloud-labs/dev/+simple/. I wish to connect other Machines on the same network and use the server.", "user": {"login": "jotrobin", "id": 11808186, "node_id": "MDQ6VXNlcjExODA4MTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/11808186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jotrobin", "html_url": "https://github.com/jotrobin", "followers_url": "https://api.github.com/users/jotrobin/followers", "following_url": "https://api.github.com/users/jotrobin/following{/other_user}", "gists_url": "https://api.github.com/users/jotrobin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jotrobin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jotrobin/subscriptions", "organizations_url": "https://api.github.com/users/jotrobin/orgs", "repos_url": "https://api.github.com/users/jotrobin/repos", "events_url": "https://api.github.com/users/jotrobin/events{/privacy}", "received_events_url": "https://api.github.com/users/jotrobin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 36, "created_at": "2018-11-26T06:53:27Z", "updated_at": "2018-11-30T11:32:15Z", "closed_at": "2018-11-28T09:40:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/607", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/607/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/607/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/607/events", "html_url": "https://github.com/devpi/devpi/issues/607", "id": 378469031, "node_id": "MDU6SXNzdWUzNzg0NjkwMzE=", "number": 607, "title": "unable to run devpi test with --detox  option", "user": {"login": "henryborchers", "id": 7454877, "node_id": "MDQ6VXNlcjc0NTQ4Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7454877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryborchers", "html_url": "https://github.com/henryborchers", "followers_url": "https://api.github.com/users/henryborchers/followers", "following_url": "https://api.github.com/users/henryborchers/following{/other_user}", "gists_url": "https://api.github.com/users/henryborchers/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryborchers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryborchers/subscriptions", "organizations_url": "https://api.github.com/users/henryborchers/orgs", "repos_url": "https://api.github.com/users/henryborchers/repos", "events_url": "https://api.github.com/users/henryborchers/events{/privacy}", "received_events_url": "https://api.github.com/users/henryborchers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-07T21:06:17Z", "updated_at": "2019-03-13T08:41:55Z", "closed_at": "2019-03-13T08:41:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try...\r\n\r\n     devpi test --index https://devpi.library.illinois.edu/DS_Jenkins/dev_staging py3exiv2bind==0.1.3.dev0 -s whl  --detox\r\n\r\nI get the following error.\r\n\r\n    C:\\Users\\hborcher\\AppData\\Local\\Temp\\devpi-test5\\targz\\py3exiv2bind-0.1.3.dev0$ tox --installpkg C:\\Users\\hborcher\\AppData\\Local\\Temp\\devpi-test5\\downloads\\py3exiv2bind-0.1.3.dev0-cp36-cp36m-win_amd64.whl -i ALL=https://devpi.library.illinois.edu/DS_Jenkins/dev_staging/+simple/ --recreate --result-json C:\\Users\\hborcher\\AppData\\Local\\Temp\\devpi-test5\\py3exiv2bind-0.1.3.dev0-cp36-cp36m-win_amd64.whl\\toxreport.json -c C:\\Users\\hborcher\\AppData\\Local\\Temp\\devpi-test5\\targz\\py3exiv2bind-0.1.3.dev0\\tox.ini\r\n\r\n    Traceback (most recent call last):\r\n      File \"c:\\program files\\python36\\lib\\runpy.py\", line 193, in _run_module_as_main \"__main__\", mod_spec)\r\n      File \"c:\\program files\\python36\\lib\\runpy.py\", line 85, in _run_code \r\n        exec(code, run_globals)\r\n      File \"C:\\Program Files\\Python36\\Scripts\\devpi.exe\\__main__.py\", line 9, in <module>\r\n      File \"c:\\program files\\python36\\lib\\site-packages\\devpi\\main.py\", line 36, in main \r\n        return method(hub, hub.args)\r\n      File \"c:\\program files\\python36\\lib\\site-packages\\devpi\\test.py\", line 252, in main \r\n        ret = devindex.runtox(*toxargs, upload_tox_results=args.upload_tox_results)\r\n      File \"c:\\program files\\python36\\lib\\site-packages\\devpi\\test.py\", line 99, in runtox\r\n        toxrunner = self.get_tox_runner()\r\n      File \"c:\\program files\\python36\\lib\\site-packages\\devpi\\test.py\", line 116, in get_tox_runner\r\n        import detox.main\r\n    ModuleNotFoundError: No module named 'detox.main'\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/605", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/605/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/605/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/605/events", "html_url": "https://github.com/devpi/devpi/issues/605", "id": 373773184, "node_id": "MDU6SXNzdWUzNzM3NzMxODQ=", "number": 605, "title": "Uploading a new package via twine fails", "user": {"login": "rhelms", "id": 815879, "node_id": "MDQ6VXNlcjgxNTg3OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/815879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rhelms", "html_url": "https://github.com/rhelms", "followers_url": "https://api.github.com/users/rhelms/followers", "following_url": "https://api.github.com/users/rhelms/following{/other_user}", "gists_url": "https://api.github.com/users/rhelms/gists{/gist_id}", "starred_url": "https://api.github.com/users/rhelms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rhelms/subscriptions", "organizations_url": "https://api.github.com/users/rhelms/orgs", "repos_url": "https://api.github.com/users/rhelms/repos", "events_url": "https://api.github.com/users/rhelms/events{/privacy}", "received_events_url": "https://api.github.com/users/rhelms/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-25T04:55:04Z", "updated_at": "2019-01-16T20:36:26Z", "closed_at": "2018-10-25T05:20:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not sure if devpi is supposed to support uploads via twine, but I've seen plenty of examples around using `twine upload`, and it seems to be the most convenient method, considering the automation I'm trying to achieve.\r\n\r\nI'm attempting to push a built package from a Jenkins pipline, but I'm getting the following error.\r\n\r\n```\r\nHTTPError: 400 Client Error: no project named '****-jwt' was ever registered for url: http://<host>:3141/****/stable/\r\n```\r\nI'm using twine instead of devpi because I have to run the command via pipenv in my Jenkins pipeline, and can specify the username and password via environment variables. devpi doesn't seem to have a single line option, and requires a login, a use and then an upload command to get the job done. \r\nI'm also aware that devpi has options to run builds via Jenkins, but I'd rather control the build first, and push into devpi at this point.\r\n\r\nLooking at the source code, it would appear that twine is launching straight into a file_upload with the command I'm using.\r\n```\r\nsh '$HOME/.local/bin/pipenv run twine upload --verbose --repository-url http://<host>:3141/otw/stable/ dist/*'\r\n```\r\nAnd the error occurs because it (the stage) doesn't know about the normalized project.\r\n\r\nThis is the full output from the Jenkins log:\r\n```\r\n+ /var/jenkins_home/.local/bin/pipenv run twine upload --verbose --repository-url http://<host>:3141/****/stable/ dist/****_jwt-20181025-py2.py3-none-any.whl dist/****_jwt-20181025.tar.gz\r\n\r\nUploading distributions to http://<host>:3141/****/stable/\r\nUploading ****_jwt-20181025-py2.py3-none-any.whl\r\n\r\n  0%|          | 0.00/8.92k [00:00<?, ?B/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 8.92k/8.92k [00:00<00:00, 143kB/s]\r\nContent received from server:\r\n<html>\r\n <head>\r\n  <title>400 no project named '****-jwt' was ever registered</title>\r\n </head>\r\n <body>\r\n  <h1>400 no project named '****-jwt' was ever registered</h1>\r\n  <br/><br/>\r\n\r\n\r\n\r\n </body>\r\n</html>\r\nHTTPError: 400 Client Error: no project named '****-jwt' was ever registered for url: http://<host>:3141/****/stable/\r\n```\r\n\r\nAt first I thought I might have a mismatch between my package name in setup.py and something else, but apparently the name gets normalized, and the underscore in my setup.py gets replaced with a dash.\r\n\r\nNext, I saw somewhere that twine shouldn't need to explicitly register with PyPI, and thought devpi might allow the same thing, considering none of the examples I saw mentioned it.\r\n\r\nAs a part of my own troubleshooting, I'm going to try an explicity registration via twine first, and see if that does the trick. If it doesn't, I'll also have a harder look for a devpi one liner that will allow me to upload a distribution.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/604", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/604/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/604/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/604/events", "html_url": "https://github.com/devpi/devpi/issues/604", "id": 372449869, "node_id": "MDU6SXNzdWUzNzI0NDk4Njk=", "number": 604, "title": "using devpi-server for caching pip, fails to install any package. If i stop the devpi-server,  pip works fine.", "user": {"login": "jotrobin", "id": 11808186, "node_id": "MDQ6VXNlcjExODA4MTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/11808186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jotrobin", "html_url": "https://github.com/jotrobin", "followers_url": "https://api.github.com/users/jotrobin/followers", "following_url": "https://api.github.com/users/jotrobin/following{/other_user}", "gists_url": "https://api.github.com/users/jotrobin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jotrobin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jotrobin/subscriptions", "organizations_url": "https://api.github.com/users/jotrobin/orgs", "repos_url": "https://api.github.com/users/jotrobin/repos", "events_url": "https://api.github.com/users/jotrobin/events{/privacy}", "received_events_url": "https://api.github.com/users/jotrobin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-22T09:25:11Z", "updated_at": "2019-08-18T15:29:59Z", "closed_at": "2019-08-18T15:29:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Looking in indexes: http://localhost:4040/cloud-labs/dev/+simple/\r\nCollecting pytest\r\n  Could not find a version that satisfies the requirement pytest (from versions: )\r\nNo matching distribution found for pytest\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/602", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/602/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/602/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/602/events", "html_url": "https://github.com/devpi/devpi/issues/602", "id": 370785118, "node_id": "MDU6SXNzdWUzNzA3ODUxMTg=", "number": 602, "title": "ConnectionResetError: [Errno 104] Connection reset by peer", "user": {"login": "mam8cc", "id": 1774337, "node_id": "MDQ6VXNlcjE3NzQzMzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1774337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mam8cc", "html_url": "https://github.com/mam8cc", "followers_url": "https://api.github.com/users/mam8cc/followers", "following_url": "https://api.github.com/users/mam8cc/following{/other_user}", "gists_url": "https://api.github.com/users/mam8cc/gists{/gist_id}", "starred_url": "https://api.github.com/users/mam8cc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mam8cc/subscriptions", "organizations_url": "https://api.github.com/users/mam8cc/orgs", "repos_url": "https://api.github.com/users/mam8cc/repos", "events_url": "https://api.github.com/users/mam8cc/events{/privacy}", "received_events_url": "https://api.github.com/users/mam8cc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-10-16T20:26:03Z", "updated_at": "2018-11-20T08:18:41Z", "closed_at": "2018-11-20T08:18:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are running `devpi-server` and running into recurring issues where we get `502` errors while trying to pull packages from devpi.  We see these issues near-consistently when we attempt to install a package that devpi has never cached, and then sporadically with packages we install tens-hundreds times of days.\r\n\r\nServer Command:  `devpi-server --replica-max-retries=3 --host 0.0.0.0 --port 4141 --serverdir devpi_files --debug`\r\n\r\nVersions:\r\n```\r\n(venv) mike@devpi:/opt/devpi$ pip freeze | grep devpi\r\ndevpi-client==4.0.1\r\ndevpi-common==3.3.1\r\ndevpi-server==4.5.0\r\ndevpi-web==3.2.2\r\n```\r\n\r\nHost information:\r\n```\r\n(venv) mike@devpi:~$ python --version\r\nPython 3.6.3\r\n(venv) mike@devpi:~$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 14.04.3 LTS\r\nRelease:\t14.04\r\nCodename:\ttrusty\r\n```\r\n\r\nAnd the debug output log:\r\n```\r\n2018-09-27 13:15:11,893 INFO  [req146851] GET /es/prod/+simple/infinity/\r\n2018-09-27 13:15:11,896 ERROR [req146851] [Rtx456] Error during httpget of https://pypi.org/simple/infinity/\r\nTraceback (most recent call last):\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 601, in urlopen\r\n    chunked=chunked)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 387, in _make_request\r\n    six.raise_from(e, None)\r\n  File \"<string>\", line 2, in raise_from\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 383, in _make_request\r\n    httplib_response = conn.getresponse()\r\n  File \"/usr/lib/python3.6/http/client.py\", line 1331, in getresponse\r\n    response.begin()\r\n  File \"/usr/lib/python3.6/http/client.py\", line 297, in begin\r\n    version, status, reason = self._read_status()\r\n  File \"/usr/lib/python3.6/http/client.py\", line 258, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n  File \"/usr/lib/python3.6/socket.py\", line 586, in readinto\r\n    return self._sock.recv_into(b)\r\n  File \"/usr/lib/python3.6/ssl.py\", line 1009, in recv_into\r\n    return self.read(nbytes, buffer)\r\n  File \"/usr/lib/python3.6/ssl.py\", line 871, in read\r\n    return self._sslobj.read(len, buffer)\r\n  File \"/usr/lib/python3.6/ssl.py\", line 631, in read\r\n    v = self._sslobj.read(len, buffer)\r\nConnectionResetError: [Errno 104] Connection reset by peer\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/requests/adapters.py\", line 440, in send\r\n    timeout=timeout\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 639, in urlopen\r\n    _stacktrace=sys.exc_info()[2])\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/util/retry.py\", line 357, in increment\r\n    raise six.reraise(type(error), error, _stacktrace)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/packages/six.py\", line 685, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 601, in urlopen\r\n    chunked=chunked)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 387, in _make_request\r\n    six.raise_from(e, None)\r\n  File \"<string>\", line 2, in raise_from\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 383, in _make_request\r\n    httplib_response = conn.getresponse()\r\n  File \"/usr/lib/python3.6/http/client.py\", line 1331, in getresponse\r\n    response.begin()\r\n  File \"/usr/lib/python3.6/http/client.py\", line 297, in begin\r\n    version, status, reason = self._read_status()\r\n  File \"/usr/lib/python3.6/http/client.py\", line 258, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n  File \"/usr/lib/python3.6/socket.py\", line 586, in readinto\r\n    return self._sock.recv_into(b)\r\n  File \"/usr/lib/python3.6/ssl.py\", line 1009, in recv_into\r\n    return self.read(nbytes, buffer)\r\n  File \"/usr/lib/python3.6/ssl.py\", line 871, in read\r\n    return self._sslobj.read(len, buffer)\r\n  File \"/usr/lib/python3.6/ssl.py\", line 631, in read\r\n    v = self._sslobj.read(len, buffer)\r\nurllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/devpi_server/main.py\", line 287, in httpget\r\n    timeout=timeout)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/requests/sessions.py\", line 521, in get\r\n    return self.request('GET', url, **kwargs)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/requests/sessions.py\", line 508, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/requests/sessions.py\", line 618, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/opt/devpi/venv/lib/python3.6/site-packages/requests/adapters.py\", line 490, in send\r\n    raise ConnectionError(err, request=request)\r\nrequests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))\r\n```\r\n\r\n**EDIT**\r\nI see this is possibly related to https://github.com/devpi/devpi/issues/597\r\n\r\nAnd to answer your last comment in that issue, it does impact our ability to do pip installs and causes builds to fail often.  Here is a recent example from today.\r\n\r\n```\r\nHTTP error 502 while getting http://devpi.internal.equipmentshare.com/root/pypi/+f/bfc/ff1a3878eebf5/pbr-5.0.0-py2.py3-none-any.whl#sha256=bfcff1a3878eebf559392c2130a17f612a03f96a0d44c3559d9c1e62a4235a2d (from http://devpi.internal.equipmentshare.com/es/prod/+simple/pbr/)\r\n  Could not install requirement pbr>=0.11 from http://devpi.internal.equipmentshare.com/root/pypi/+f/bfc/ff1a3878eebf5/pbr-5.0.0-py2.py3-none-any.whl#sha256=bfcff1a3878eebf559392c2130a17f612a03f96a0d44c3559d9c1e62a4235a2d (from mock->moto-ext==1.3.3->localstack==0.8.7->-r dev-requirements.txt (line 5)) because of error 502 Server Error: Bad Gateway for url: http://devpi.internal.equipmentshare.com/root/pypi/+f/bfc/ff1a3878eebf5/pbr-5.0.0-py2.py3-none-any.whl\r\nCould not install requirement pbr>=0.11 from http://devpi.internal.equipmentshare.com/root/pypi/+f/bfc/ff1a3878eebf5/pbr-5.0.0-py2.py3-none-any.whl#sha256=bfcff1a3878eebf559392c2130a17f612a03f96a0d44c3559d9c1e62a4235a2d (from mock->moto-ext==1.3.3->localstack==0.8.7->-r dev-requirements.txt (line 5)) because of HTTP error 502 Server Error: Bad Gateway for url: http://devpi.internal.equipmentshare.com/root/pypi/+f/bfc/ff1a3878eebf5/pbr-5.0.0-py2.py3-none-any.whl for URL http://devpi.internal.equipmentshare.com/root/pypi/+f/bfc/ff1a3878eebf5/pbr-5.0.0-py2.py3-none-any.whl#sha256=bfcff1a3878eebf559392c2130a17f612a03f96a0d44c3559d9c1e62a4235a2d (from http://devpi.internal.equipmentshare.com/es/prod/+simple/pbr/)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/598", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/598/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/598/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/598/events", "html_url": "https://github.com/devpi/devpi/issues/598", "id": 367853900, "node_id": "MDU6SXNzdWUzNjc4NTM5MDA=", "number": 598, "title": "Bug: Seriously inefficient byte concatenation hindering and breaking streamed downloads", "user": {"login": "DomHudson", "id": 10864294, "node_id": "MDQ6VXNlcjEwODY0Mjk0", "avatar_url": "https://avatars2.githubusercontent.com/u/10864294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DomHudson", "html_url": "https://github.com/DomHudson", "followers_url": "https://api.github.com/users/DomHudson/followers", "following_url": "https://api.github.com/users/DomHudson/following{/other_user}", "gists_url": "https://api.github.com/users/DomHudson/gists{/gist_id}", "starred_url": "https://api.github.com/users/DomHudson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DomHudson/subscriptions", "organizations_url": "https://api.github.com/users/DomHudson/orgs", "repos_url": "https://api.github.com/users/DomHudson/repos", "events_url": "https://api.github.com/users/DomHudson/events{/privacy}", "received_events_url": "https://api.github.com/users/DomHudson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-08T15:55:36Z", "updated_at": "2018-11-22T14:41:40Z", "closed_at": "2018-10-11T09:42:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Summary\r\n\r\nI am experiencing issues pulling large packages from my root/pypi mirror. The downloads start fast but progressively get slower over time. Eventually the download will become very very slow and never complete. The issue is most prevalent to me with the Tensorflow package where the wheel is large - approximately 60MB.\r\n\r\n## The cause\r\n\r\nI have investigated this issue and believe it is caused by inefficient byte concatenation in [`filestore.iter_cache_remote_file`](https://github.com/devpi/devpi/blob/master/server/devpi_server/filestore.py#L298)\r\n\r\nRepeatedly concatenating these byte-strings is triggering excessive garbage collection or memory reallocation.\r\n\r\nThe following is a working example of this, this code is extracted from `devpi_common.request` and `devpi_server.filestore`. \r\n\r\nThe original code gets progressively slower as it loops to around iteration 3971 before becoming unresponsive. This takes approximately 40 seconds on my machine.\r\n\r\nThe fixed code runs at a linear speed and completes the entire download (6148 iterations) in 9 seconds.\r\n\r\n## Original code\r\nThis code is almost identical to what is currently in devpi. I just extracted it to prove the problem.\r\n```python\r\nimport sys\r\nfrom requests import Session\r\nfrom requests.adapters import HTTPAdapter\r\nfrom requests.exceptions import ConnectionError, RequestException, BaseHTTPError, SSLError\r\n\r\nclass RetrySession(Session):\r\n    def __init__(self, max_retries):\r\n        super(RetrySession, self).__init__()\r\n        if max_retries is not None:\r\n            self.mount('https://', HTTPAdapter(max_retries=max_retries))\r\n            self.mount('http://', HTTPAdapter(max_retries=max_retries))\r\n\r\ndef new_requests_session(agent=None, max_retries=None):\r\n    if agent is None:\r\n        agent = \"devpi\"\r\n    else:\r\n        agent = \"devpi-%s/%s\" % agent\r\n    agent += \" (py%s; %s)\" % (sys.version.split()[0], sys.platform)\r\n    session = RetrySession(max_retries)\r\n    session.headers[\"user-agent\"] = agent\r\n    session.ConnectionError = ConnectionError\r\n    session.RequestException = RequestException\r\n    session.Errors = (RequestException, BaseHTTPError)\r\n    session.SSLError = SSLError\r\n    return session\r\n\r\nsession = new_requests_session()\r\n\r\nURL = 'https://files.pythonhosted.org/packages/ce/d5/38cd4543401708e64c9ee6afa664b936860f4630dd93a49ab863f9998cd2/tensorflow-1.11.0-cp36-cp36m-manylinux1_x86_64.whl'\r\n\r\nr = session.get(\r\n    URL,\r\n    stream = True,\r\n    allow_redirects = True,\r\n    timeout = 5\r\n)\r\n\r\ncontent = b''\r\ni = 0\r\nwhile 1:\r\n    data = r.raw.read(10240)\r\n    print('Iteration %s' % i)\r\n    i += 1\r\n    if not data:\r\n        break\r\n    content = content + data\r\n\r\nprint('Done')\r\n```\r\n\r\n## Fixed code\r\nThe fixed code assigns the byte-strings to an array before joining them at the end.\r\n```python\r\ncontents = []\r\ni = 0\r\nwhile 1:\r\n    print('Iteration %s' % i)\r\n    i += 1\r\n    data = r.raw.read(10240)\r\n    if not data:\r\n        break\r\n    contents.append(data)\r\n\r\ncontent = b''.join(contents)\r\n\r\nprint('Done')\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/594", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/594/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/594/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/594/events", "html_url": "https://github.com/devpi/devpi/issues/594", "id": 366672547, "node_id": "MDU6SXNzdWUzNjY2NzI1NDc=", "number": 594, "title": "devpi-web search: UnboundLocalError", "user": {"login": "gotcha", "id": 105204, "node_id": "MDQ6VXNlcjEwNTIwNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/105204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gotcha", "html_url": "https://github.com/gotcha", "followers_url": "https://api.github.com/users/gotcha/followers", "following_url": "https://api.github.com/users/gotcha/following{/other_user}", "gists_url": "https://api.github.com/users/gotcha/gists{/gist_id}", "starred_url": "https://api.github.com/users/gotcha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gotcha/subscriptions", "organizations_url": "https://api.github.com/users/gotcha/orgs", "repos_url": "https://api.github.com/users/gotcha/repos", "events_url": "https://api.github.com/users/gotcha/events{/privacy}", "received_events_url": "https://api.github.com/users/gotcha/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-04T08:17:20Z", "updated_at": "2018-11-16T15:11:21Z", "closed_at": "2018-11-16T15:11:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reported by @r2dan\r\n\r\nGo to https://m.devpi.net/+search?query=devpi&page=132 \r\n\r\nAnd try to click on \" 1 more results for devpi \u2026 \" under devpi-4-7 search result. It ends up with the stack trace as below:\r\n\r\n```\r\n2018-10-03 11:16:40,307 ERROR Exception when serving /+search\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 12, in _error_handler\r\n    response = request.invoke_exception_view(exc_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/view.py\", line 756, in invoke_exception_view\r\n    raise HTTPNotFound\r\npyramid.httpexceptions.HTTPNotFound: The resource could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/channel.py\", line 338, in service\r\n    task.service()\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/task.py\", line 169, in service\r\n    self.execute()\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/task.py\", line 399, in execute\r\n    app_iter = self.channel.server.application(env, start_response)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 146, in __call__\r\n    return self.app(environ, start_response)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 270, in __call__\r\n    response = self.execution_policy(environ, self)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 278, in default_execution_policy\r\n    return request.invoke_exception_view(reraise=True)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/view.py\", line 755, in invoke_exception_view\r\n    reraise_(*exc_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/compat.py\", line 148, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 276, in default_execution_policy\r\n    return router.invoke_request(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 249, in invoke_request\r\n    response = handle_request(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 170, in request_log_handler\r\n    response = handler(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_server/views.py\", line 206, in request_tx_handler\r\n    response = handler(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 41, in excview_tween\r\n    response = _error_handler(request, exc)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 16, in _error_handler\r\n    reraise(*exc_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/compat.py\", line 148, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/tweens.py\", line 39, in excview_tween\r\n    response = handler(request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/router.py\", line 156, in handle_request\r\n    view_name\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/view.py\", line 642, in _call_view\r\n    response = view_callable(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/viewderivers.py\", line 439, in rendered_view\r\n    result = view(context, request)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/viewderivers.py\", line 124, in _class_requestonly_view\r\n    response = getattr(inst, attr)()\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_web/views.py\", line 888, in __call__\r\n    print(self.batch_links)\r\n  File \"/usr/local/lib/python3.6/site-packages/pyramid/decorator.py\", line 42, in __get__\r\n    val = self.wrapped(inst)\r\n  File \"/usr/local/lib/python3.6/site-packages/devpi_web/views.py\", line 752, in batch_links\r\n    if current < (len(batch_links) - 1):\r\nUnboundLocalError: local variable 'current' referenced before assignment \ufeff\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/591", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/591/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/591/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/591/events", "html_url": "https://github.com/devpi/devpi/issues/591", "id": 364878938, "node_id": "MDU6SXNzdWUzNjQ4Nzg5Mzg=", "number": 591, "title": "devpi-server --serverdir in non-homedir seems broken", "user": {"login": "toejough", "id": 5317312, "node_id": "MDQ6VXNlcjUzMTczMTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5317312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/toejough", "html_url": "https://github.com/toejough", "followers_url": "https://api.github.com/users/toejough/followers", "following_url": "https://api.github.com/users/toejough/following{/other_user}", "gists_url": "https://api.github.com/users/toejough/gists{/gist_id}", "starred_url": "https://api.github.com/users/toejough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/toejough/subscriptions", "organizations_url": "https://api.github.com/users/toejough/orgs", "repos_url": "https://api.github.com/users/toejough/repos", "events_url": "https://api.github.com/users/toejough/events{/privacy}", "received_events_url": "https://api.github.com/users/toejough/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-28T13:00:20Z", "updated_at": "2019-11-20T12:52:36Z", "closed_at": "2018-09-28T19:17:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Possibly I'm missing something, but...\r\n\r\n### Given\r\n* python 3.6.5\r\n* mac OSX 10.13.6\r\n* devpi-server 4.7.1\r\n* no plugins (at least that I installed, I can't speak for devpi)\r\n\r\n### When\r\n* `devpi-server --init --serverdir random-dir`\r\n* `devpi-server --start --severdir random-dir`\r\n\r\n### Then\r\n```\r\n2018-09-28 08:52:40,964 INFO  NOCTX Loading node info from /<userdir>/<projectdir>/random-dir/.nodeinfo\r\n2018-09-28 08:52:40,965 INFO  NOCTX wrote nodeinfo to: /<userdir>/<projectdir>/random-dir/.nodeinfo\r\nstarting background devpi-server at http://localhost:3141\r\n/<userdir>/<projectdir>/random-dir/.xproc/devpi-server$ /<userdir>/.pyenv/versions/must/bin/devpi-server --serverdir random-dir\r\nprocess 'devpi-server' started pid=126\r\nTraceback (most recent call last):\r\n  File \"/<userdir>/.pyenv/versions/must/bin/devpi-server\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/<userdir>/.pyenv/versions/3.6.5/envs/must/lib/python3.6/site-packages/devpi_server/main.py\", line 56, in main\r\n    return _main(pluginmanager, argv=argv)\r\n  File \"/<userdir>/.pyenv/versions/3.6.5/envs/must/lib/python3.6/site-packages/devpi_server/main.py\", line 105, in _main\r\n    return bgserver.start(args, argv[1:])\r\n  File \"/<userdir>/.pyenv/versions/3.6.5/envs/must/lib/python3.6/site-packages/devpi_server/bgserver.py\", line 78, in start\r\n    self.xproc.ensure(\"devpi-server\", prepare_devpiserver)\r\n  File \"/<userdir>/.pyenv/versions/3.6.5/envs/must/lib/python3.6/site-packages/devpi_server/vendor/xprocess.py\", line 171, in ensure\r\n    raise RuntimeError(\"Could not start process %s\" % name)\r\nRuntimeError: Could not start process devpi-server\r\n```\r\n\r\nThe log file at `/<userdir>/<projectdir>/random-dir/.xproc/devpi-server/xprocess.log` contains one line: `fatal: The path '/<userdir>/<projectdir>/random-dir/.xproc/devpi-server/random-dir' contains no devpi-server data, use --init to initialize.`\r\n\r\nRunning the init command again prints `fatal: The path '/<userdir>/<projectdir>/random-dir' already contains devpi-server data.`\r\n\r\n### Other\r\nIf I repeat the steps above, but with `~/random-dir` instead, everything works fine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/586", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/586/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/586/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/586/events", "html_url": "https://github.com/devpi/devpi/issues/586", "id": 359901511, "node_id": "MDU6SXNzdWUzNTk5MDE1MTE=", "number": 586, "title": "Replication errors should be stored in the backend", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/devpi/devpi/milestones/1", "html_url": "https://github.com/devpi/devpi/milestone/1", "labels_url": "https://api.github.com/repos/devpi/devpi/milestones/1/labels", "id": 3048276, "node_id": "MDk6TWlsZXN0b25lMzA0ODI3Ng==", "number": 1, "title": "twelve-factor", "description": "https://12factor.net", "creator": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "open_issues": 4, "closed_issues": 5, "state": "open", "created_at": "2018-01-19T11:15:50Z", "updated_at": "2020-04-20T15:46:06Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2018-09-13T13:41:47Z", "updated_at": "2020-04-20T15:46:07Z", "closed_at": "2020-04-20T15:46:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently replication errors are stored on the filesystem in ``.replicationerrors``.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/579", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/579/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/579/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/579/events", "html_url": "https://github.com/devpi/devpi/issues/579", "id": 355483499, "node_id": "MDU6SXNzdWUzNTU0ODM0OTk=", "number": 579, "title": "devpi client should allow deletion of a specific file", "user": {"login": "gotcha", "id": 105204, "node_id": "MDQ6VXNlcjEwNTIwNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/105204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gotcha", "html_url": "https://github.com/gotcha", "followers_url": "https://api.github.com/users/gotcha/followers", "following_url": "https://api.github.com/users/gotcha/following{/other_user}", "gists_url": "https://api.github.com/users/gotcha/gists{/gist_id}", "starred_url": "https://api.github.com/users/gotcha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gotcha/subscriptions", "organizations_url": "https://api.github.com/users/gotcha/orgs", "repos_url": "https://api.github.com/users/gotcha/repos", "events_url": "https://api.github.com/users/gotcha/events{/privacy}", "received_events_url": "https://api.github.com/users/gotcha/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-30T08:43:00Z", "updated_at": "2018-09-10T06:38:54Z", "closed_at": "2018-09-10T06:38:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "> With devpi-server 4.6.0 a single release can be deleted using a DELETE request on it's URL. For now one has to use curl or similar tool, which is a bit cumbersome because of authentication etc. I plan to add support for it in devpi-client.\r\n\r\nhttps://github.com/devpi/devpi/issues/448#issuecomment-404763560\r\nhttps://github.com/devpi/devpi/issues/446#issuecomment-404763756", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/577", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/577/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/577/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/577/events", "html_url": "https://github.com/devpi/devpi/issues/577", "id": 354502516, "node_id": "MDU6SXNzdWUzNTQ1MDI1MTY=", "number": 577, "title": "\"HTTP error 502 while getting ...\"", "user": {"login": "glyph", "id": 716529, "node_id": "MDQ6VXNlcjcxNjUyOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/716529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glyph", "html_url": "https://github.com/glyph", "followers_url": "https://api.github.com/users/glyph/followers", "following_url": "https://api.github.com/users/glyph/following{/other_user}", "gists_url": "https://api.github.com/users/glyph/gists{/gist_id}", "starred_url": "https://api.github.com/users/glyph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glyph/subscriptions", "organizations_url": "https://api.github.com/users/glyph/orgs", "repos_url": "https://api.github.com/users/glyph/repos", "events_url": "https://api.github.com/users/glyph/events{/privacy}", "received_events_url": "https://api.github.com/users/glyph/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-08-27T22:33:02Z", "updated_at": "2019-07-21T06:24:11Z", "closed_at": "2019-05-19T15:20:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using 4.5.0, but I see the behavior described on #449 every time I install a new version of a dependency for the first time.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/567", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/567/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/567/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/567/events", "html_url": "https://github.com/devpi/devpi/issues/567", "id": 345261088, "node_id": "MDU6SXNzdWUzNDUyNjEwODg=", "number": 567, "title": "`pip search` fails if `devpi-web` is only installed on the replica", "user": {"login": "theMarix", "id": 1125055, "node_id": "MDQ6VXNlcjExMjUwNTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1125055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theMarix", "html_url": "https://github.com/theMarix", "followers_url": "https://api.github.com/users/theMarix/followers", "following_url": "https://api.github.com/users/theMarix/following{/other_user}", "gists_url": "https://api.github.com/users/theMarix/gists{/gist_id}", "starred_url": "https://api.github.com/users/theMarix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theMarix/subscriptions", "organizations_url": "https://api.github.com/users/theMarix/orgs", "repos_url": "https://api.github.com/users/theMarix/repos", "events_url": "https://api.github.com/users/theMarix/events{/privacy}", "received_events_url": "https://api.github.com/users/theMarix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 573429753, "node_id": "MDU6TGFiZWw1NzM0Mjk3NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 580721078, "node_id": "MDU6TGFiZWw1ODA3MjEwNzg=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-server", "name": "devpi-server", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-27T15:04:20Z", "updated_at": "2019-09-29T14:39:22Z", "closed_at": "2019-09-29T14:39:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to get `pip search` working following the example given in the documentation. Doing so I ran into an issue with the way that our set-up works. Using a standalone Devpi as in the documentation `pip search` works as expected. The same is true in a replica set-up where `devpi-web` is installed on both, master and replica. However, in the following case it break:\r\n\r\n* Have a master that does not have `devpi-web` (installed via `pip install devpi-server`)\r\n* Have a replica that does have `devpi-web` (installed via `pip install devpi-server devpi-web`). In the example it listens on port 3142.\r\n\r\nNow, `pip search` will fail:\r\n```bash\r\n$ pip search -i http://localhost:3142/root/pypi/ zypper\r\nHTTP error 404 while getting http://localhost:3142/root/pypi/\r\nException:\r\nTraceback (most recent call last):\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/basecommand.py\", line 215, in main\r\n    status = self.run(options, args)\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/commands/search.py\", line 45, in run\r\n    pypi_hits = self.search(query, options)\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/commands/search.py\", line 62, in search\r\n    hits = pypi.search({'name': query, 'summary': query}, 'or')\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py\", line 1243, in __call__\r\n    return self.__send(self.__name, args)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py\", line 1602, in __request\r\n    verbose=self.__verbose\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/download.py\", line 776, in request\r\n    response.raise_for_status()\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/_vendor/requests/models.py\", line 862, in raise_for_status\r\n    raise HTTPError(http_error_msg, response=self)\r\nHTTPError: 404 Client Error: cannot submit to pypi mirror for url: http://localhost:3142/root/pypi/\r\n```\r\n\r\nReplica log shows the following:\r\n```\r\nServing on http://localhost:3142\r\n2018-07-27 16:55:39,104 INFO  [req0] POST /root/pypi/\r\n2018-07-27 16:55:39,105 INFO  [req0] relaying: POST http://localhost:3141/root/pypi/\r\n2018-07-27 16:55:39,115 INFO  [req0] FIN: relaying: POST http://localhost:3141/root/pypi/\r\n```\r\n\r\nMaster log shows the following:\r\n```\r\n2018-07-27 16:55:39,110 INFO  [req1] POST /root/pypi/\r\n2018-07-27 16:55:39,112 ERROR [req1] [Wtx1] while handling http://localhost:3141/root/pypi/:\r\ncannot submit to pypi mirror\r\n```\r\n\r\nWhen attempting to access a non-mirrored index it fails, too. However, in this case Devpi seems to request authentication, as pip starts querying me for user credentials.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/566", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/566/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/566/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/566/events", "html_url": "https://github.com/devpi/devpi/issues/566", "id": 343314183, "node_id": "MDU6SXNzdWUzNDMzMTQxODM=", "number": 566, "title": "Proposal to split up indexing for search", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580720853, "node_id": "MDU6TGFiZWw1ODA3MjA4NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-web", "name": "devpi-web", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-21T09:46:06Z", "updated_at": "2020-04-07T07:04:39Z", "closed_at": "2020-04-07T07:04:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We shouldn't tie the search index directly to the serial. What this means is, that we would split up the indexing by project and assign priorities. We would make a commit to the search index for each project and data from mirror indexes would be indexed last.\r\n\r\nThe result would be, that search data becomes available step by step. A new replica would start to return only some results in the beginning, until it caught up. Since the individual commits are smaller this would speed things up overall. Also if a later serial updates data and the project wasn't indexed yet, it would only be indexed once and not repeatedly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/565", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/565/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/565/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/565/events", "html_url": "https://github.com/devpi/devpi/issues/565", "id": 342690672, "node_id": "MDU6SXNzdWUzNDI2OTA2NzI=", "number": 565, "title": "'devpi list <package_name>' shows too detailed data", "user": {"login": "r2dan", "id": 26278998, "node_id": "MDQ6VXNlcjI2Mjc4OTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/26278998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r2dan", "html_url": "https://github.com/r2dan", "followers_url": "https://api.github.com/users/r2dan/followers", "following_url": "https://api.github.com/users/r2dan/following{/other_user}", "gists_url": "https://api.github.com/users/r2dan/gists{/gist_id}", "starred_url": "https://api.github.com/users/r2dan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r2dan/subscriptions", "organizations_url": "https://api.github.com/users/r2dan/orgs", "repos_url": "https://api.github.com/users/r2dan/repos", "events_url": "https://api.github.com/users/r2dan/events{/privacy}", "received_events_url": "https://api.github.com/users/r2dan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-19T11:33:35Z", "updated_at": "2018-08-24T14:36:32Z", "closed_at": "2018-08-24T14:36:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "devpi-client version: 4.0.3\r\n\r\nWhen invoking `devpi list <package_name>` devpi client actually lists few latest release files together with the test results. Fetching all tox results requires quite some time (especially when results are big). \r\n\r\nWould it make sense to display by default only the release files? User might want to view release files and tox results by adding -v flag: `devpi list <package_name> -v`. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/564", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/564/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/564/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/564/events", "html_url": "https://github.com/devpi/devpi/issues/564", "id": 341094923, "node_id": "MDU6SXNzdWUzNDEwOTQ5MjM=", "number": 564, "title": "Prevent browser caching of documentation files", "user": {"login": "antoinehumbert", "id": 920555, "node_id": "MDQ6VXNlcjkyMDU1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/920555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoinehumbert", "html_url": "https://github.com/antoinehumbert", "followers_url": "https://api.github.com/users/antoinehumbert/followers", "following_url": "https://api.github.com/users/antoinehumbert/following{/other_user}", "gists_url": "https://api.github.com/users/antoinehumbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoinehumbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoinehumbert/subscriptions", "organizations_url": "https://api.github.com/users/antoinehumbert/orgs", "repos_url": "https://api.github.com/users/antoinehumbert/repos", "events_url": "https://api.github.com/users/antoinehumbert/events{/privacy}", "received_events_url": "https://api.github.com/users/antoinehumbert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 580720853, "node_id": "MDU6TGFiZWw1ODA3MjA4NTM=", "url": "https://api.github.com/repos/devpi/devpi/labels/devpi-web", "name": "devpi-web", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-13T17:12:06Z", "updated_at": "2019-09-28T17:40:03Z", "closed_at": "2019-09-28T17:40:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "When accessing a package documentation files, there is no cache-control or max-age defined in http response headers. Thus, documentation files are usually cached by browsers.\r\n\r\nThis is not a real problem when accessing the documentation for a specified version of a package, because documentation is not expected to change after it cas been released.\r\n\r\nBut when using the \"latest\" or \"stable\" shortcuts to access a package documentation, the related documentation will change for each new release, so browser caching should be avoided.\r\n\r\nTo achieve that, the \"docroot\" view should set a cache-control: no-cache header when the requested version is \"latest\" or \"stable\".", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/557", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/557/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/557/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/557/events", "html_url": "https://github.com/devpi/devpi/issues/557", "id": 338636692, "node_id": "MDU6SXNzdWUzMzg2MzY2OTI=", "number": 557, "title": "Devpi does not upload symbolic links to directories", "user": {"login": "lykahb", "id": 852150, "node_id": "MDQ6VXNlcjg1MjE1MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/852150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lykahb", "html_url": "https://github.com/lykahb", "followers_url": "https://api.github.com/users/lykahb/followers", "following_url": "https://api.github.com/users/lykahb/following{/other_user}", "gists_url": "https://api.github.com/users/lykahb/gists{/gist_id}", "starred_url": "https://api.github.com/users/lykahb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lykahb/subscriptions", "organizations_url": "https://api.github.com/users/lykahb/orgs", "repos_url": "https://api.github.com/users/lykahb/repos", "events_url": "https://api.github.com/users/lykahb/events{/privacy}", "received_events_url": "https://api.github.com/users/lykahb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-05T16:05:06Z", "updated_at": "2018-07-06T19:33:40Z", "closed_at": "2018-07-06T19:33:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "When building a namespace package with `python setup.py sdist`, it preserves symbolic links. But `devpi upload` creates a package that doesn't have them. That happens because `Checkout.export` only copies files, ignoring the symlinks even if they are in git.\r\nEdit: it copies symlinks to files but not to the directories.\r\n\r\nThe project has Python and JS api that need access to the same data, so the data folder needs to be on the top level. The project has the structure of\r\n```\r\n/data/*.json\r\n/namespace1/namespace2/{symlink to ../../data/}\r\n/namespace1/namespace2/*.py\r\n/js/*.js\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/556", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/556/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/556/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/556/events", "html_url": "https://github.com/devpi/devpi/issues/556", "id": 337598893, "node_id": "MDU6SXNzdWUzMzc1OTg4OTM=", "number": 556, "title": "Get UpstreamError while changing index value", "user": {"login": "yorodm", "id": 5833680, "node_id": "MDQ6VXNlcjU4MzM2ODA=", "avatar_url": "https://avatars0.githubusercontent.com/u/5833680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yorodm", "html_url": "https://github.com/yorodm", "followers_url": "https://api.github.com/users/yorodm/followers", "following_url": "https://api.github.com/users/yorodm/following{/other_user}", "gists_url": "https://api.github.com/users/yorodm/gists{/gist_id}", "starred_url": "https://api.github.com/users/yorodm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yorodm/subscriptions", "organizations_url": "https://api.github.com/users/yorodm/orgs", "repos_url": "https://api.github.com/users/yorodm/repos", "events_url": "https://api.github.com/users/yorodm/events{/privacy}", "received_events_url": "https://api.github.com/users/yorodm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-02T17:15:29Z", "updated_at": "2019-05-19T15:24:41Z", "closed_at": "2019-05-19T15:24:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to change an existing index mirror_url since the old one stopped working and I need to keep the downloaded packages. Is there a viable solution that doesn't imply creating a new index?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/devpi/devpi/issues/555", "repository_url": "https://api.github.com/repos/devpi/devpi", "labels_url": "https://api.github.com/repos/devpi/devpi/issues/555/labels{/name}", "comments_url": "https://api.github.com/repos/devpi/devpi/issues/555/comments", "events_url": "https://api.github.com/repos/devpi/devpi/issues/555/events", "html_url": "https://github.com/devpi/devpi/issues/555", "id": 336739384, "node_id": "MDU6SXNzdWUzMzY3MzkzODQ=", "number": 555, "title": "devpi test exits with an error when acl_toxresult_upload is not ANONYMOUS", "user": {"login": "lbrack", "id": 14916861, "node_id": "MDQ6VXNlcjE0OTE2ODYx", "avatar_url": "https://avatars1.githubusercontent.com/u/14916861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbrack", "html_url": "https://github.com/lbrack", "followers_url": "https://api.github.com/users/lbrack/followers", "following_url": "https://api.github.com/users/lbrack/following{/other_user}", "gists_url": "https://api.github.com/users/lbrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbrack/subscriptions", "organizations_url": "https://api.github.com/users/lbrack/orgs", "repos_url": "https://api.github.com/users/lbrack/repos", "events_url": "https://api.github.com/users/lbrack/events{/privacy}", "received_events_url": "https://api.github.com/users/lbrack/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-28T18:53:55Z", "updated_at": "2018-06-29T18:40:54Z", "closed_at": "2018-06-29T18:40:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When an index has its ``acl_toxresult_upload`` (#469) configuration field set to anything but :ANONYMOUS: and you run tests with devpi test, the command fails even though all tests were successful because the server returns 403 when the client attempts to upload test results. \r\n\r\nWhile this is okay when running interactively, it is a problem in a CI environment for obvious reasons. \r\nWhile the first thing that comes to mind is to simply not return an error in that particular case, this could hide genuine problems. \r\n\r\nJust to bring more clarity, we use pytest in python projects to test systems which are external to those projects, and the same distribution can be used for long periods of time leading to a large and useless accumulation of tox results, bogging down our devpi server. \r\n\r\nSo an option to disable the tox result uploads or to instruct the devpi client to ignore the 403 error (and issue a simple warning) would be much welcome. \r\n\r\nMany thanks for the outstanding work by the way. \r\n\r\n**Environment Information:**\r\n\r\n> devpi-client 4.0.2\r\n> devpi-findlinks 2.0.0\r\n> devpi-server 4.4.0\r\n> devpi-web 3.2.2\r\n\r\nBelow is an example\r\n\r\n```\r\n  py35-dev: commands succeeded\r\n  py36-dev: commands succeeded\r\n  py27-dev: commands succeeded\r\n  congratulations :)\r\nwrote json report at: /var/folders/rt/s5hlby7n69v1kvng23px5kdw0000gn/T/devpi-test0/targz/toxreport.json\r\nposting tox result data to https://devpi-us.dolby.net/lpbrac/gti-wallet/+f/760/d5b54685ca688/gti-mmi-0.1.dev194+g14bce0f.d20180619.tar.gz\r\nPOST https://devpi-us.dolby.net/lpbrac/gti-wallet/+f/760/d5b54685ca688/gti-mmi-0.1.dev194+g14bce0f.d20180619.tar.gz\r\n403 Forbidden: Access was denied to this resource.\r\nUnauthorized: PyPIView failed permission check\r\n$ echo $?\r\n1\r\n```", "performed_via_github_app": null, "score": 1.0}]}