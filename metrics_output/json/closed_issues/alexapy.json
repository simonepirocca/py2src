{"total_count": 532, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/873", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/873/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/873/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/873", "id": 683526486, "node_id": "MDU6SXNzdWU2ODM1MjY0ODY=", "number": 873, "title": "Captcha requested continuusly", "user": {"login": "antoweb", "id": 32364871, "node_id": "MDQ6VXNlcjMyMzY0ODcx", "avatar_url": "https://avatars1.githubusercontent.com/u/32364871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoweb", "html_url": "https://github.com/antoweb", "followers_url": "https://api.github.com/users/antoweb/followers", "following_url": "https://api.github.com/users/antoweb/following{/other_user}", "gists_url": "https://api.github.com/users/antoweb/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoweb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoweb/subscriptions", "organizations_url": "https://api.github.com/users/antoweb/orgs", "repos_url": "https://api.github.com/users/antoweb/repos", "events_url": "https://api.github.com/users/antoweb/events{/privacy}", "received_events_url": "https://api.github.com/users/antoweb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-21T12:29:25Z", "updated_at": "2020-08-22T09:47:00Z", "closed_at": "2020-08-22T09:47:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. open hassio\r\n2. See notfication\r\n3. Notification authentication is present\r\n4. Insert captcha\r\n\r\n**Expected behavior**\r\nI need to authenticate just first time not every 10/15 mins\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/872", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/872/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/872/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/872/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/872", "id": 683468299, "node_id": "MDU6SXNzdWU2ODM0NjgyOTk=", "number": 872, "title": "Approval Link SMS Completed, But cannnot Submit", "user": {"login": "Vandiliz3r", "id": 48084630, "node_id": "MDQ6VXNlcjQ4MDg0NjMw", "avatar_url": "https://avatars0.githubusercontent.com/u/48084630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vandiliz3r", "html_url": "https://github.com/Vandiliz3r", "followers_url": "https://api.github.com/users/Vandiliz3r/followers", "following_url": "https://api.github.com/users/Vandiliz3r/following{/other_user}", "gists_url": "https://api.github.com/users/Vandiliz3r/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vandiliz3r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vandiliz3r/subscriptions", "organizations_url": "https://api.github.com/users/Vandiliz3r/orgs", "repos_url": "https://api.github.com/users/Vandiliz3r/repos", "events_url": "https://api.github.com/users/Vandiliz3r/events{/privacy}", "received_events_url": "https://api.github.com/users/Vandiliz3r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-21T10:38:14Z", "updated_at": "2020-08-22T09:48:03Z", "closed_at": "2020-08-22T09:48:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "The new authentication with the approval link from Amazon does not work correctly. Seems that once i have approved it does not allow me to submit.\r\nCould you please assist with this if you know of a fix or work around?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/869", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/869/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/869/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/869/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/869", "id": 680355799, "node_id": "MDU6SXNzdWU2ODAzNTU3OTk=", "number": 869, "title": "routines don't trigger", "user": {"login": "micaelp", "id": 44983322, "node_id": "MDQ6VXNlcjQ0OTgzMzIy", "avatar_url": "https://avatars2.githubusercontent.com/u/44983322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micaelp", "html_url": "https://github.com/micaelp", "followers_url": "https://api.github.com/users/micaelp/followers", "following_url": "https://api.github.com/users/micaelp/following{/other_user}", "gists_url": "https://api.github.com/users/micaelp/gists{/gist_id}", "starred_url": "https://api.github.com/users/micaelp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micaelp/subscriptions", "organizations_url": "https://api.github.com/users/micaelp/orgs", "repos_url": "https://api.github.com/users/micaelp/repos", "events_url": "https://api.github.com/users/micaelp/events{/privacy}", "received_events_url": "https://api.github.com/users/micaelp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-17T16:18:42Z", "updated_at": "2020-08-20T19:46:57Z", "closed_at": "2020-08-20T12:53:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nFollowing from your example in the wiki for routine triggering, I tried the following in Developer Tools/Services\r\n\r\nService\r\nmedia_player.play_media\r\n\r\nService Data\r\n{\r\n  \"entity_id\": \"media_player.alexa\",\r\n  \"media_content_id\": \"BathroomLights\",\r\n  \"media_content_type\": \"routine\"\r\n}\r\n  \r\nThis does not trigger the BathroomLights routine, which I can trigger just fine from Alexa.\r\n\r\nI also tried\r\n\r\n{\r\n  \"entity_id\": \"media_player.play_media\",\r\n  \"media_content_id\": \"BathroomLights\",\r\n  \"media_content_type\": \"routine\"\r\n}\r\n\r\nBut this doesn't work either.\r\n\r\nHA is 0.114.1\r\nAMP is 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/868", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/868/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/868/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/868/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/868", "id": 679837758, "node_id": "MDU6SXNzdWU2Nzk4Mzc3NTg=", "number": 868, "title": "Fire and Event when a timer goes off", "user": {"login": "fjmiller", "id": 25325540, "node_id": "MDQ6VXNlcjI1MzI1NTQw", "avatar_url": "https://avatars1.githubusercontent.com/u/25325540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fjmiller", "html_url": "https://github.com/fjmiller", "followers_url": "https://api.github.com/users/fjmiller/followers", "following_url": "https://api.github.com/users/fjmiller/following{/other_user}", "gists_url": "https://api.github.com/users/fjmiller/gists{/gist_id}", "starred_url": "https://api.github.com/users/fjmiller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fjmiller/subscriptions", "organizations_url": "https://api.github.com/users/fjmiller/orgs", "repos_url": "https://api.github.com/users/fjmiller/repos", "events_url": "https://api.github.com/users/fjmiller/events{/privacy}", "received_events_url": "https://api.github.com/users/fjmiller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-16T22:19:57Z", "updated_at": "2020-08-19T03:26:03Z", "closed_at": "2020-08-19T03:26:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "**NOTE: For a feature to be created it has to be doable in the Amazon app because we are basically replicating the app for \r\nCurrently the functionality is to have an entity called next_timer which shows the time the next timer will go off.  While this can be used to calculate when a timer actually does go off it gets awfully confusing and lots of steps in the automation to get it accurate for all devices, multiple timer, changes etc.  If we could get an event that fired to make Home Assistant aware a timer fired, include the device it is from and any names from the user it would make automations much more simple.\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nThis is a feature request.\r\n\r\n**Describe the solution you'd like**\r\nI would like an event or entity that can trigger an automation when a timer goes off on any alexa device and include the device identifier and any custom names.  Currently we can determine when a timer goes off through IFTTT integration.\r\n\r\n**Describe alternatives you've considered**\r\nUsing IFTT and a detailed flow to try and trigger events on timers.  Still not 100% in the case of multiple timers on a single device and the user changing durations.\r\n\r\n**Additional context**\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/867", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/867/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/867/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/867/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/867", "id": 679825525, "node_id": "MDU6SXNzdWU2Nzk4MjU1MjU=", "number": 867, "title": "TypeError: object NoneType can't be used in 'await' expression", "user": {"login": "poudenes", "id": 4399532, "node_id": "MDQ6VXNlcjQzOTk1MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4399532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poudenes", "html_url": "https://github.com/poudenes", "followers_url": "https://api.github.com/users/poudenes/followers", "following_url": "https://api.github.com/users/poudenes/following{/other_user}", "gists_url": "https://api.github.com/users/poudenes/gists{/gist_id}", "starred_url": "https://api.github.com/users/poudenes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poudenes/subscriptions", "organizations_url": "https://api.github.com/users/poudenes/orgs", "repos_url": "https://api.github.com/users/poudenes/repos", "events_url": "https://api.github.com/users/poudenes/events{/privacy}", "received_events_url": "https://api.github.com/users/poudenes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-16T21:02:40Z", "updated_at": "2020-08-19T03:15:07Z", "closed_at": "2020-08-19T03:15:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "**System details**\r\n - Home-assistant (version): 0.114.1\r\n - Hassio (Yes/No): YES\r\n - alexa_media  (version from `const.py` or HA startup): v2.10.1\r\n - alexapy (version from `pip show alexapy` or HA startup): unknown \r\n\r\n**Logs**\r\n```\r\n2020-08-16 22:46:38 ERROR (MainThread) [alexapy.helpers] alexaapi.get_device_preferences((<alexapy.alexalogin.AlexaLogin object at 0xacf96f70>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-08-16 22:46:38 ERROR (MainThread) [custom_components.alexa_media] Unexpected error fetching alexa_media data: object NoneType can't be used in 'await' expression\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 111, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexaapi.py\", line 943, in get_device_preferences\r\n    return await response.json(content_type=None) if response else None\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/aiohttp/client_reqrep.py\", line 1095, in json\r\n    return loads(stripped.decode(encoding))\r\n  File \"/usr/local/lib/python3.8/json/__init__.py\", line 357, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/usr/local/lib/python3.8/json/decoder.py\", line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/usr/local/lib/python3.8/json/decoder.py\", line 355, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 298, in async_update_data\r\n    ) = await asyncio.gather(*tasks)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 131, in wrapper\r\n    raise AlexapyLoginError\r\nalexapy.errors.AlexapyLoginError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 143, in async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 131, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 314, in async_update_data\r\n    await hass.bus.async_fire(\r\nTypeError: object NoneType can't be used in 'await' expression\r\n2020-08-16 22:46:38 ERROR (MainThread) [alexapy.helpers] alexaapi.get_devices((<alexapy.alexalogin.AlexaLogin object at 0xacf96f70>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-08-16 22:46:38 ERROR (MainThread) [alexapy.helpers] alexaapi.get_notifications((<alexapy.alexalogin.AlexaLogin object at 0xacf96f70>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-08-16 22:46:38 ERROR (MainThread) [alexapy.helpers] alexaapi.get_dnd_state((<alexapy.alexalogin.AlexaLogin object at 0xacf96f70>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-08-16 22:46:38 ERROR (MainThread) [alexapy.helpers] alexaapi.get_bluetooth((<alexapy.alexalogin.AlexaLogin object at 0xacf96f70>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/865", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/865/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/865/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/865/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/865", "id": 679444683, "node_id": "MDU6SXNzdWU2Nzk0NDQ2ODM=", "number": 865, "title": "dont know how i can add this in home-assistant", "user": {"login": "gbdavidx", "id": 26369204, "node_id": "MDQ6VXNlcjI2MzY5MjA0", "avatar_url": "https://avatars3.githubusercontent.com/u/26369204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbdavidx", "html_url": "https://github.com/gbdavidx", "followers_url": "https://api.github.com/users/gbdavidx/followers", "following_url": "https://api.github.com/users/gbdavidx/following{/other_user}", "gists_url": "https://api.github.com/users/gbdavidx/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbdavidx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbdavidx/subscriptions", "organizations_url": "https://api.github.com/users/gbdavidx/orgs", "repos_url": "https://api.github.com/users/gbdavidx/repos", "events_url": "https://api.github.com/users/gbdavidx/events{/privacy}", "received_events_url": "https://api.github.com/users/gbdavidx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-14T23:11:09Z", "updated_at": "2020-08-15T20:33:45Z", "closed_at": "2020-08-15T19:26:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI have HACS installed but it does not show up\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to hacs, search for alexa media, does not show up\r\n\r\n**Expected behavior**\r\nbe able to see alexia media player in Integrations\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\nIntegration version: | 1.3.3\r\n-- | --\r\nFrontend version: | 202008050145\r\nRepositories: | 606\r\nInstalled repositories: | 20\r\n\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/864", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/864/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/864/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/864/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/864", "id": 675967856, "node_id": "MDU6SXNzdWU2NzU5Njc4NTY=", "number": 864, "title": "2FA login request every few hours", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars3.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}, {"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-08-10T08:42:43Z", "updated_at": "2020-08-12T03:17:18Z", "closed_at": "2020-08-11T03:51:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nUnfortunately since a couple of days, I get a request for 2FA login every few hours.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Login with 2FA\r\n2. Wait a few hours\r\n\r\n**Expected behavior**\r\nLogin with 2FA should be persistent (don't ask again code on this device)\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/57354320/89765048-dabec700-daf5-11ea-9c5e-ed7961eef3ad.png)\r\n\r\n![image](https://user-images.githubusercontent.com/57354320/89765005-c67aca00-daf5-11ea-9968-d22530fc565b.png)\r\n\r\n![image](https://user-images.githubusercontent.com/57354320/89765027-d1cdf580-daf5-11ea-99ee-e06be99c2eec.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.113.3\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v2.10.1\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/863", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/863/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/863/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/863/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/863", "id": 674676400, "node_id": "MDU6SXNzdWU2NzQ2NzY0MDA=", "number": 863, "title": "Every Update Breaks Existing Version", "user": {"login": "SawKyrom", "id": 34008245, "node_id": "MDQ6VXNlcjM0MDA4MjQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/34008245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SawKyrom", "html_url": "https://github.com/SawKyrom", "followers_url": "https://api.github.com/users/SawKyrom/followers", "following_url": "https://api.github.com/users/SawKyrom/following{/other_user}", "gists_url": "https://api.github.com/users/SawKyrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/SawKyrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SawKyrom/subscriptions", "organizations_url": "https://api.github.com/users/SawKyrom/orgs", "repos_url": "https://api.github.com/users/SawKyrom/repos", "events_url": "https://api.github.com/users/SawKyrom/events{/privacy}", "received_events_url": "https://api.github.com/users/SawKyrom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-07T00:26:46Z", "updated_at": "2020-08-08T01:28:24Z", "closed_at": "2020-08-08T01:08:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAnytime there is a new Alexa Media Player version release, the existing setup stops working and requires update and configuration.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Have working version of Alexa Media Player\r\n2. Use said version until next version update released (not installed)\r\n3. Discover no announcements have been made only after receiving configuration notification that the existing media player needs to be reconfigured.\r\n4. See error\r\n\r\n**Expected behavior**\r\nInstalled version to continue operating after to newest version release.  Is there a means to allow continued operation prior to installation of the newest version? It appears that a bug in the software breaks any prior version after a new version is released, forcing an update and reconfiguration.  Systems that rely on voice announcements are rendered inactive without warning.\r\n\r\n**Screenshots**\r\n![Screenshot (310)](https://user-images.githubusercontent.com/34008245/89594814-7e6b5700-d818-11ea-9237-56f37a6c5df2.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 112.4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.10.0, but happens with all versions\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\n\r\n2020-08-06 19:13:23 ERROR (MainThread) [alexapy.helpers] alexaapi.run_behavior((<alexapy.alexaapi.AlexaAPI object at 0x6c82cab0>, {'@type': 'com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode', 'type': 'Alexa.Speak', 'operationPayload': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************DJU', 'locale': 'en-us', 'customerId': 'A**********A4R', 'textToSpeak': 'test', 'target': {'customerId': 'A**********A4R', 'devices': [{'deviceSerialNumber': 'G************DJU', 'deviceTypeId': 'A32DOYMUN6DTXA'}]}, 'skillId': 'amzn1.ask.1p.saysomething'}}), {'queue_delay': 1.5}): An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Session is closed',)\r\n2020-08-06 19:13:23 ERROR (MainThread) [alexapy.helpers] alexaapi.send_sequence((<alexapy.alexaapi.AlexaAPI object at 0x6c82cab0>, 'Alexa.Speak'), {'customerId': 'A**********A4R', 'textToSpeak': 'test', 'target': {'customerId': 'A**********A4R', 'devices': [{'deviceSerialNumber': 'G************DJU', 'deviceTypeId': 'A32DOYMUN6DTXA'}]}, 'skillId': 'amzn1.ask.1p.saysomething', 'queue_delay': 1.5}): An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Session is closed',)\r\n2020-08-06 19:13:23 ERROR (MainThread) [alexapy.helpers] alexaapi.send_tts((<alexapy.alexaapi.AlexaAPI object at 0x6c82cab0>, 'test'), {'customer_id': 'A1ZNBQCAAGBA4R', 'queue_delay': 1.5}): An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Session is closed',)\r\n\r\n**Additional context**\r\nHas anyone else experienced this phenomenon with Alexa Media Player?  Thanks for the input!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/861", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/861/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/861/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/861/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/861", "id": 670406836, "node_id": "MDU6SXNzdWU2NzA0MDY4MzY=", "number": 861, "title": "shuffle, repeat, do no disturb toggle with area", "user": {"login": "metaxis", "id": 251061, "node_id": "MDQ6VXNlcjI1MTA2MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/251061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metaxis", "html_url": "https://github.com/metaxis", "followers_url": "https://api.github.com/users/metaxis/followers", "following_url": "https://api.github.com/users/metaxis/following{/other_user}", "gists_url": "https://api.github.com/users/metaxis/gists{/gist_id}", "starred_url": "https://api.github.com/users/metaxis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metaxis/subscriptions", "organizations_url": "https://api.github.com/users/metaxis/orgs", "repos_url": "https://api.github.com/users/metaxis/repos", "events_url": "https://api.github.com/users/metaxis/events{/privacy}", "received_events_url": "https://api.github.com/users/metaxis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-01T01:25:15Z", "updated_at": "2020-08-09T19:52:14Z", "closed_at": "2020-08-09T19:52:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter putting the various Echo devices into the correct rooms, announcements stopped, but only when the lights were turned on.  This is because the device \"do not disturb\" option is showing up as a switch device. Same for shuffle and repeat.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n0. Give your echo device a non-null area\r\n1. Go to any area panel with an echo device in it\r\n2. Toggle the area room switch\r\n3. See the echo option switches toggle along with the lights\r\n\r\n**Expected behavior**\r\nArea-wide toggles should not adjust echo device options\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.113.2\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v2.10.1\r\n - alexapy (version from `pip show alexapy` or HA startup):1.12.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/860", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/860/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/860/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/860/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/860", "id": 669169059, "node_id": "MDU6SXNzdWU2NjkxNjkwNTk=", "number": 860, "title": "Alexa Speechcon Integration", "user": {"login": "andykams", "id": 65895397, "node_id": "MDQ6VXNlcjY1ODk1Mzk3", "avatar_url": "https://avatars0.githubusercontent.com/u/65895397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andykams", "html_url": "https://github.com/andykams", "followers_url": "https://api.github.com/users/andykams/followers", "following_url": "https://api.github.com/users/andykams/following{/other_user}", "gists_url": "https://api.github.com/users/andykams/gists{/gist_id}", "starred_url": "https://api.github.com/users/andykams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andykams/subscriptions", "organizations_url": "https://api.github.com/users/andykams/orgs", "repos_url": "https://api.github.com/users/andykams/repos", "events_url": "https://api.github.com/users/andykams/events{/privacy}", "received_events_url": "https://api.github.com/users/andykams/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-30T20:29:51Z", "updated_at": "2020-07-31T23:39:45Z", "closed_at": "2020-07-31T23:39:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**NOTE: For a feature to be created it has to be doable in the Amazon app because we are basically replicating the app for HA. If you can't find it in the app, we probably can't create it here.**\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI am trying to use speechcon  function but it does not seem to work.\r\n\r\n**Describe the solution you'd like**\r\nBelow is the link to speechcon where we can add interjections similar to emotions and effects.\r\nhttps://developer.amazon.com/en-US/docs/alexa/custom-skills/speechcon-reference-interjections-english-us.html\r\n\r\n**Describe alternatives you've considered**\r\nTried using Lang feature but does not have the same effect. \r\n\r\n**Additional context**\r\nhttps://developer.amazon.com/en-US/docs/alexa/custom-skills/speechcon-reference-interjections-english-india.html\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/859", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/859/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/859/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/859/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/859", "id": 666814552, "node_id": "MDU6SXNzdWU2NjY4MTQ1NTI=", "number": 859, "title": "No more tts to echo dot", "user": {"login": "antoweb", "id": 32364871, "node_id": "MDQ6VXNlcjMyMzY0ODcx", "avatar_url": "https://avatars1.githubusercontent.com/u/32364871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoweb", "html_url": "https://github.com/antoweb", "followers_url": "https://api.github.com/users/antoweb/followers", "following_url": "https://api.github.com/users/antoweb/following{/other_user}", "gists_url": "https://api.github.com/users/antoweb/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoweb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoweb/subscriptions", "organizations_url": "https://api.github.com/users/antoweb/orgs", "repos_url": "https://api.github.com/users/antoweb/repos", "events_url": "https://api.github.com/users/antoweb/events{/privacy}", "received_events_url": "https://api.github.com/users/antoweb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-28T06:49:08Z", "updated_at": "2020-07-29T05:29:00Z", "closed_at": "2020-07-29T05:14:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nEcho dot no more tts notify\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nCreate an automation with notify.alexa_media like this\r\n```yaml\r\ndata:\r\n  method: all\r\n  type: announce\r\nmessage: C'\u00e8 qualcuno al portone\r\ntarget: media_player.echo_dot_di_MISSING\r\n```\r\n\r\nNo more tts on echo dot\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.113.1\r\n - Hassio Yes restartes\r\nThis looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/854", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/854/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/854/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/854", "id": 666500662, "node_id": "MDU6SXNzdWU2NjY1MDA2NjI=", "number": 854, "title": "Problem setting up integration - AttributeError", "user": {"login": "jgalak", "id": 4943417, "node_id": "MDQ6VXNlcjQ5NDM0MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4943417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgalak", "html_url": "https://github.com/jgalak", "followers_url": "https://api.github.com/users/jgalak/followers", "following_url": "https://api.github.com/users/jgalak/following{/other_user}", "gists_url": "https://api.github.com/users/jgalak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgalak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgalak/subscriptions", "organizations_url": "https://api.github.com/users/jgalak/orgs", "repos_url": "https://api.github.com/users/jgalak/repos", "events_url": "https://api.github.com/users/jgalak/events{/privacy}", "received_events_url": "https://api.github.com/users/jgalak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-27T18:34:59Z", "updated_at": "2020-07-30T20:46:26Z", "closed_at": "2020-07-30T20:46:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I attempt to add the integration, I get a message that says \"Unknown error, please report log info\"\r\n\r\nThe HA log contains the following:\r\n\r\nERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7feab64e46d0>,), {'cookies': {'session-id': '136-0112779-1138664', 'session-id-time': '2219522337l', 'ubid-main': 'REDACTED', 'session-token': 'REDACTED', 'x-main': 'REDACTED', 'at-main': 'REDACTED', 'sess-at-main': 'REDACTED', 'csrf': 'REDACTED'}}): An error occured accessing AlexaAPI: An exception of type AttributeError occurred. Arguments:\r\n(\"module 'aiofiles.os' has no attribute 'remove'\",)\r\n\r\n(I've redacted out most of the JSON data, as I don't know if it contains encoded log in credentials or other private data.  If it's important for resolving the issue, please let me know which elements you need and I'll post them.)\r\n\r\nfollowed by: \r\nWARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: module 'aiofiles.os' has no attribute 'remove'\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nI am running HA 0.106.6 installed in Docker on generic Linux (Ubuntu).  In the past, I had the alexa media player component running on older versions of HA, installed directly.  I recently removed the old installation and reinstalled with HACS.  HACS is showing that version 2.10.0 is installed.\r\n\r\nFollowing Instructions, I went to the Integrations tab, clicked the orange + button, selected \"Alexa Media Player\" and got the configuration screen.\r\n\r\nOn that screen I entered the user name and password, leaving everything else as default.\r\n\r\nIt displayed the \"Unknown error, please report log info\" message and did not create the integration.  See above for log details.\r\n\r\nSelecting \"Advanced Logging\" did not add anything new to the log.\r\n\r\nI have tried this multiple times.\r\n\r\n**Expected behavior**\r\nAn integration would be created for this component.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.106.6\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes.  Tried multiple restarts.\r\n - alexa_media  (version from `const.py` or HA startup): 2.10.0 (as per HACS)\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.12.0 (as per pip show alexapy\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\nThe instructions at that address tell you how to enable logging when the component is installed without HACS and configured via YAML.  I don't see instructions for how to enable logging when installing via HACS and integration, unless it's just the \"advanced debugging\" checkbox, which doesn't seem to do anything.\r\n\r\nHA log errors posted above.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/853", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/853/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/853/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/853/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/853", "id": 665721705, "node_id": "MDU6SXNzdWU2NjU3MjE3MDU=", "number": 853, "title": "JSONDecodeError exception", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars3.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-26T06:49:37Z", "updated_at": "2020-07-28T03:31:21Z", "closed_at": "2020-07-28T03:31:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nPlugin not working, please check log below\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Just leave HA running\r\n\r\n**Expected behavior**\r\nNo error in log and plugin working fine\r\n\r\n**System details**\r\n - Home-assistant (version): 0.113.0\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v2.10.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2020-07-25 00:31:52 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f010ff7ed30>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-07-25 00:31:53 WARNING (MainThread) [alexapy.alexawebsocket] Websocket is missing ubid-main and ubid-acbit cookies; please report this if anything isn't working.\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/850", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/850/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/850/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/850/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/850", "id": 665319229, "node_id": "MDU6SXNzdWU2NjUzMTkyMjk=", "number": 850, "title": "Login not Possible An error occured accessing AlexaAPI", "user": {"login": "thecem", "id": 46648579, "node_id": "MDQ6VXNlcjQ2NjQ4NTc5", "avatar_url": "https://avatars0.githubusercontent.com/u/46648579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thecem", "html_url": "https://github.com/thecem", "followers_url": "https://api.github.com/users/thecem/followers", "following_url": "https://api.github.com/users/thecem/following{/other_user}", "gists_url": "https://api.github.com/users/thecem/gists{/gist_id}", "starred_url": "https://api.github.com/users/thecem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thecem/subscriptions", "organizations_url": "https://api.github.com/users/thecem/orgs", "repos_url": "https://api.github.com/users/thecem/repos", "events_url": "https://api.github.com/users/thecem/events{/privacy}", "received_events_url": "https://api.github.com/users/thecem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-24T17:43:02Z", "updated_at": "2020-08-07T14:42:42Z", "closed_at": "2020-07-26T01:03:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter updating to 0.113.0 HA no login possible:\r\n\r\n```\r\n Protokolldetails ( ERROR )\r\n\r\nLogger: alexapy.helpers\r\nSource: custom_components/alexa_media/config_flow.py:181\r\nFirst occurred: 18:31:39 (4 occurrences)\r\nLast logged: 18:51:09\r\n\r\n    alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f9397eacb80>,), {'cookies': {'session-id': '262-37933', 'session-id-time': '2224824323l', 'ubid-acbde': '260-929609', 'x-acbde': 'nVVWqW7Cni7EOBWNp', 'at-acbde': 'Atza|IwEBIAS3sThiLpu7STtzgUMovddh7G8d8HTLauAVXiEKh9IHTbqR6dpoJU9M2I61oopC8dow1CHUWdrtNRpfjB6EqSF9', 'sess-at-acbde': 'dD4QBnWO9QsFhB3xq7haoxMHuDHb4G8E=', 'sst-acbde': 'Sst1|PQFpKq37oxA41IIgJLQ50BCsC1CFyaaJbqXG9zZD4H3e-ZmH0szuig9klQ2crwnXQeoZ4LfPDYA_ZQpoFVAPLlPHP7hxXsSyaKt0j2FsYcgTeeNNA9CWEaUoDbewESzw3hZuj-cwsxs-1H1MOdLRlUu00-FHVdPz20GsyMYw', 'csrf': '-1382469230'}}): An error occured accessing AlexaAPI: An exception of type CookieError occurred. Arguments: (\"Attempt to set a reserved key 'SameSite'\",)\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. After deleting the integration and reinstalation no login is not possible with my account.\r\n2. Attached what i get, abouve the error in HA Log.\r\n![grafik](https://user-images.githubusercontent.com/46648579/88416333-532c4500-cde0-11ea-875c-11a761256adc.png)\r\n\r\n\r\n**Expected behavior**\r\nLogin with my account, login into api works.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n![grafik](https://user-images.githubusercontent.com/46648579/88416416-7c4cd580-cde0-11ea-8221-e9f8c358d04f.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.113.0\r\n - Hassio (Yes/No): 1.12.0 (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.10.0\r\n - alexapy (version from `pip show alexapy` or HA startup): \r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nI restartet HA and the VM many times....", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/849", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/849/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/849/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/849/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/849", "id": 663261001, "node_id": "MDU6SXNzdWU2NjMyNjEwMDE=", "number": 849, "title": "Issues with install with python 3.8 - No module named 'importlib_metadata'", "user": {"login": "cbailes78", "id": 37811841, "node_id": "MDQ6VXNlcjM3ODExODQx", "avatar_url": "https://avatars3.githubusercontent.com/u/37811841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbailes78", "html_url": "https://github.com/cbailes78", "followers_url": "https://api.github.com/users/cbailes78/followers", "following_url": "https://api.github.com/users/cbailes78/following{/other_user}", "gists_url": "https://api.github.com/users/cbailes78/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbailes78/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbailes78/subscriptions", "organizations_url": "https://api.github.com/users/cbailes78/orgs", "repos_url": "https://api.github.com/users/cbailes78/repos", "events_url": "https://api.github.com/users/cbailes78/events{/privacy}", "received_events_url": "https://api.github.com/users/cbailes78/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-21T19:40:16Z", "updated_at": "2020-07-28T03:51:37Z", "closed_at": "2020-07-28T03:51:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "My Home Assistant instance is version 0.112.4 built upon Ubuntu 20.04 standard with python 3.8.  Everything works well apart from trying to install alexa_media install gives me the following error:\r\n\r\n2020-07-21 19:08:54 ERROR (MainThread) [homeassistant.config_entries] Error occurred loading configuration flow for integration alexa_media: No module named 'importlib_metadata'\r\n\r\nI cannot get to the screen where I add the email and password.\r\n\r\nGoogling suggest external module 'importlib_metadata' became internal function 'importlib.metadata' at python 3.8.\r\n\r\nMany thanks for your kind help and for a great product.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/847", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/847/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/847/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/847/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/847", "id": 661377924, "node_id": "MDU6SXNzdWU2NjEzNzc5MjQ=", "number": 847, "title": "HASSIO Integration Config Page - no labels", "user": {"login": "njloki30", "id": 20994562, "node_id": "MDQ6VXNlcjIwOTk0NTYy", "avatar_url": "https://avatars2.githubusercontent.com/u/20994562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njloki30", "html_url": "https://github.com/njloki30", "followers_url": "https://api.github.com/users/njloki30/followers", "following_url": "https://api.github.com/users/njloki30/following{/other_user}", "gists_url": "https://api.github.com/users/njloki30/gists{/gist_id}", "starred_url": "https://api.github.com/users/njloki30/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njloki30/subscriptions", "organizations_url": "https://api.github.com/users/njloki30/orgs", "repos_url": "https://api.github.com/users/njloki30/repos", "events_url": "https://api.github.com/users/njloki30/events{/privacy}", "received_events_url": "https://api.github.com/users/njloki30/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-07-20T05:05:13Z", "updated_at": "2020-07-22T01:52:18Z", "closed_at": "2020-07-20T19:04:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nMissing field labels on Home Assistant Config Integration Page / can't sign in\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1.Go to integrations, Add new, Choose Alexa Media Player\r\n2. When pop up opens to sign in, labels are missing, can't log in\r\n![image](https://user-images.githubusercontent.com/20994562/87901293-a8550900-ca24-11ea-8437-eb684766a0bb.png)\r\n\r\n**System details**\r\n - Home-assistant:  0.112.4\r\n - Hassio : Yes\r\n - alexa_media : 2.10.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/846", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/846/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/846/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/846/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/846", "id": 658175326, "node_id": "MDU6SXNzdWU2NTgxNzUzMjY=", "number": 846, "title": "Can't setup integration / can't login", "user": {"login": "ps-tfriedl", "id": 5499934, "node_id": "MDQ6VXNlcjU0OTk5MzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5499934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ps-tfriedl", "html_url": "https://github.com/ps-tfriedl", "followers_url": "https://api.github.com/users/ps-tfriedl/followers", "following_url": "https://api.github.com/users/ps-tfriedl/following{/other_user}", "gists_url": "https://api.github.com/users/ps-tfriedl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ps-tfriedl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ps-tfriedl/subscriptions", "organizations_url": "https://api.github.com/users/ps-tfriedl/orgs", "repos_url": "https://api.github.com/users/ps-tfriedl/repos", "events_url": "https://api.github.com/users/ps-tfriedl/events{/privacy}", "received_events_url": "https://api.github.com/users/ps-tfriedl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-16T12:58:48Z", "updated_at": "2020-07-17T01:32:25Z", "closed_at": "2020-07-17T01:32:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nMy integration stopped working and I was getting a notification to verify my Alexa account in the sidebar - after trying it a couple of times (entering the one time code I got from Amazon) I gave up and and uninstalled and re-installed the integration.\r\n\r\nNow I'm trying to login again but I'm stuck at the screen that says \"Alexa Media Player - Action Required\" - I get the email and SMS from Amazon and I confirm the login but the \"Submit\" button the dialog does nothing. I just has a short loading indicator and the dialog stays the same. I don't see anything in the logs either (debug activated) - or at least I'm not sure what to look for.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to Integrations and add the Alexa Media Player integration\r\n2. Fill out details\r\n3. After the dialog with the title \"Alexa Media Player - Action Required\" appears open the email from Amazon and confirm the login\r\n4. Click Submit in the dialog - nothing happens\r\n\r\n**Expected behavior**\r\nAfter step 4 I expect to have the integration connected to my account.\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.10\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.12\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/845", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/845/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/845/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/845/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/845", "id": 657956068, "node_id": "MDU6SXNzdWU2NTc5NTYwNjg=", "number": 845, "title": "Repeat sound", "user": {"login": "poudenes", "id": 4399532, "node_id": "MDQ6VXNlcjQzOTk1MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4399532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poudenes", "html_url": "https://github.com/poudenes", "followers_url": "https://api.github.com/users/poudenes/followers", "following_url": "https://api.github.com/users/poudenes/following{/other_user}", "gists_url": "https://api.github.com/users/poudenes/gists{/gist_id}", "starred_url": "https://api.github.com/users/poudenes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poudenes/subscriptions", "organizations_url": "https://api.github.com/users/poudenes/orgs", "repos_url": "https://api.github.com/users/poudenes/repos", "events_url": "https://api.github.com/users/poudenes/events{/privacy}", "received_events_url": "https://api.github.com/users/poudenes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-16T08:02:00Z", "updated_at": "2020-07-18T08:42:09Z", "closed_at": "2020-07-18T08:42:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi All,\r\n\r\nLove the script and how far developers are with implementation of Alexa into HA!!!\r\nIs there a way to repeat a sound until there will be send a stop signal?\r\n\r\nI want use Alexa to repeat a alarm sound... and when I hit a button (in ha) it will send a stop signal.\r\n\r\ncheers\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/842", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/842/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/842/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/842/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/842", "id": 657842609, "node_id": "MDU6SXNzdWU2NTc4NDI2MDk=", "number": 842, "title": "Cant find \"Alexa Media\" in HACS", "user": {"login": "PatMei", "id": 59027829, "node_id": "MDQ6VXNlcjU5MDI3ODI5", "avatar_url": "https://avatars3.githubusercontent.com/u/59027829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PatMei", "html_url": "https://github.com/PatMei", "followers_url": "https://api.github.com/users/PatMei/followers", "following_url": "https://api.github.com/users/PatMei/following{/other_user}", "gists_url": "https://api.github.com/users/PatMei/gists{/gist_id}", "starred_url": "https://api.github.com/users/PatMei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PatMei/subscriptions", "organizations_url": "https://api.github.com/users/PatMei/orgs", "repos_url": "https://api.github.com/users/PatMei/repos", "events_url": "https://api.github.com/users/PatMei/events{/privacy}", "received_events_url": "https://api.github.com/users/PatMei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-16T04:41:01Z", "updated_at": "2020-07-16T05:02:21Z", "closed_at": "2020-07-16T05:02:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have newest Version of HA and also HACS. I cant find Alexa Media. Has it been removed?\r\n\r\nThanks in advance!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/840", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/840/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/840/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/840/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/840", "id": 654177449, "node_id": "MDU6SXNzdWU2NTQxNzc0NDk=", "number": 840, "title": "Captcha notification appears repeatedly after logging in", "user": {"login": "antoweb", "id": 32364871, "node_id": "MDQ6VXNlcjMyMzY0ODcx", "avatar_url": "https://avatars1.githubusercontent.com/u/32364871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoweb", "html_url": "https://github.com/antoweb", "followers_url": "https://api.github.com/users/antoweb/followers", "following_url": "https://api.github.com/users/antoweb/following{/other_user}", "gists_url": "https://api.github.com/users/antoweb/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoweb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoweb/subscriptions", "organizations_url": "https://api.github.com/users/antoweb/orgs", "repos_url": "https://api.github.com/users/antoweb/repos", "events_url": "https://api.github.com/users/antoweb/events{/privacy}", "received_events_url": "https://api.github.com/users/antoweb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-07-09T16:03:51Z", "updated_at": "2020-07-28T04:33:57Z", "closed_at": "2020-07-28T04:33:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter last update HA continuusly request captcha authentication every some minutes\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nAfter first time captcha inserted no more requested\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/839", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/839/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/839/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/839", "id": 653778091, "node_id": "MDU6SXNzdWU2NTM3NzgwOTE=", "number": 839, "title": "Node-Red Sound Integration", "user": {"login": "pbishop1418", "id": 68039398, "node_id": "MDQ6VXNlcjY4MDM5Mzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/68039398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pbishop1418", "html_url": "https://github.com/pbishop1418", "followers_url": "https://api.github.com/users/pbishop1418/followers", "following_url": "https://api.github.com/users/pbishop1418/following{/other_user}", "gists_url": "https://api.github.com/users/pbishop1418/gists{/gist_id}", "starred_url": "https://api.github.com/users/pbishop1418/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pbishop1418/subscriptions", "organizations_url": "https://api.github.com/users/pbishop1418/orgs", "repos_url": "https://api.github.com/users/pbishop1418/repos", "events_url": "https://api.github.com/users/pbishop1418/events{/privacy}", "received_events_url": "https://api.github.com/users/pbishop1418/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-09T05:35:44Z", "updated_at": "2020-07-12T01:43:03Z", "closed_at": "2020-07-12T01:43:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to follow the sound instructions for Node-Red. I can get it working in the HA but can not in Node-Red.\r\n\r\nHere is my HA script and my Node-Red setup. Please advise!\r\n\r\n![HA](https://user-images.githubusercontent.com/68039398/87001026-79b57380-c184-11ea-942c-b5deee61fb44.png)\r\n\r\nNode-Red\r\n\r\n![NR-2](https://user-images.githubusercontent.com/68039398/87001033-7de19100-c184-11ea-9998-bd2d47c5f4b1.png)\r\n![NR-1](https://user-images.githubusercontent.com/68039398/87001034-7e7a2780-c184-11ea-8c6f-af97a2c67218.png)\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/838", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/838/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/838/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/838/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/838", "id": 652261622, "node_id": "MDU6SXNzdWU2NTIyNjE2MjI=", "number": 838, "title": "No album artwork + other issues when logged into wrong domain", "user": {"login": "agneevX", "id": 19761269, "node_id": "MDQ6VXNlcjE5NzYxMjY5", "avatar_url": "https://avatars2.githubusercontent.com/u/19761269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agneevX", "html_url": "https://github.com/agneevX", "followers_url": "https://api.github.com/users/agneevX/followers", "following_url": "https://api.github.com/users/agneevX/following{/other_user}", "gists_url": "https://api.github.com/users/agneevX/gists{/gist_id}", "starred_url": "https://api.github.com/users/agneevX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agneevX/subscriptions", "organizations_url": "https://api.github.com/users/agneevX/orgs", "repos_url": "https://api.github.com/users/agneevX/repos", "events_url": "https://api.github.com/users/agneevX/events{/privacy}", "received_events_url": "https://api.github.com/users/agneevX/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-07T11:55:23Z", "updated_at": "2020-07-09T12:23:02Z", "closed_at": "2020-07-08T19:25:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen music is playing from Amazon Music/Apple Music, the state of the `media_player` keeps switching from `standby` to `unavailable` and there is no Now Playing screen or any artwork. \r\n\r\nThe only thing that works is that the correct devices show up and the volume is shown correctly although I can't change it but changing it elsewhere reflects immediately. \r\n\r\n**To Reproduce**\r\n\r\n**Expected behavior**\r\nNow Playing/Album Artwork should show. \r\n\r\n**Screenshots**\r\nAs I'm typing this, I noticed that the device is showing `Unavailable` as it does from time to time.\r\n\r\n<img width=\"952\" alt=\"image\" src=\"https://user-images.githubusercontent.com/19761269/86776487-df670a00-c075-11ea-91c1-0997369bf96d.png\">\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.0\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.8\r\n\r\n**Logs**\r\nhttps://paste.ubuntu.com/p/QGC9wWpds6/\r\n\r\n**Additional context**", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/837", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/837/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/837/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/837/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/837", "id": 651848369, "node_id": "MDU6SXNzdWU2NTE4NDgzNjk=", "number": 837, "title": "[FR] Consider switching to official API", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars3.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-06T22:07:45Z", "updated_at": "2020-07-07T01:12:43Z", "closed_at": "2020-07-07T01:12:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Would you consider switching your great plugin to the official API ?\r\n\r\n- https://developer.amazon.com/en-US/docs/alexa/alexa-voice-service/avs-rest-alarms.html\r\n- https://developer.amazon.com/en-US/docs/alexa/alexa-voice-service/get-started-with-alexa-voice-service.html\r\n\r\nI think the gain is a more stable access to Alexa functions and get more of those available in HA\r\n\r\nAlternative is to stay with current unofficial API that works great but require nearly daily release.\r\n\r\nSimone\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/836", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/836/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/836/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/836", "id": 651495076, "node_id": "MDU6SXNzdWU2NTE0OTUwNzY=", "number": 836, "title": "Returning Authorization Code Request Notification / Reinstall fails \"Unclosed connector\"", "user": {"login": "cotwild", "id": 8470092, "node_id": "MDQ6VXNlcjg0NzAwOTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/8470092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cotwild", "html_url": "https://github.com/cotwild", "followers_url": "https://api.github.com/users/cotwild/followers", "following_url": "https://api.github.com/users/cotwild/following{/other_user}", "gists_url": "https://api.github.com/users/cotwild/gists{/gist_id}", "starred_url": "https://api.github.com/users/cotwild/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cotwild/subscriptions", "organizations_url": "https://api.github.com/users/cotwild/orgs", "repos_url": "https://api.github.com/users/cotwild/repos", "events_url": "https://api.github.com/users/cotwild/events{/privacy}", "received_events_url": "https://api.github.com/users/cotwild/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-06T12:22:59Z", "updated_at": "2020-07-11T23:13:53Z", "closed_at": "2020-07-11T23:13:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter googling and asking on HA Discord channel and trying to delete/uninstall anything connected with Amazon Alexa and reinstall I don't get any further.\r\nThe Alexa integration was working fine, then it started asking for a configuration / code authorization process under the notification. I proceeded, became an email with a 6-digit code, which I entered... but then the first message appeared again. I tryed this a few times.... until I found time (and nuts) to uninstall it. So I remove the \"Alexa media player\" integration by deleting it under HA settings / integrations. Then I removed an existing entry in the \"configuration.yaml\" file. After a HA restart I filled in email, password and amazon.de, pressed OK then a failure with \"Abgebrochen\" (Cancelled) came up. The home assistant logfile showed:\r\n2020-07-06 14:07:36 ERROR (MainThread) [homeassistant.core] Error doing job: Unclosed client session\r\n2020-07-06 14:07:36 ERROR (MainThread) [homeassistant.core] Error doing job: Unclosed connector\r\nI tried to uninstall the alexa media player integration over HACS, restarted HA and installed it again over HACS. Still no luck.\r\nFinally full server reboot... no changes... Still error \"Cancelled\" with the unclosed client session / connector...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to integrations\r\n2. Click on '+' and search for \"Alexa Media Player\"\r\n3. Fill in valid email adress, password, and \"amazon.de\" (advanced debug and the rest of the settings doesn't change a thing)\r\n4. Click on \"Send\" and I get a popup message \"Abgebrochen\" (as I set German as language, \"Cancelled\")\r\n5. in the homeassistant/homeassistant.log file I got the above two lines with unclosed client session / connector...\r\n\r\n**Expected behavior**\r\nWorking Alexa Media Player integration to be able to use my Echo's again with home assistant... \r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.2\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.9.2\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.8\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n2020-07-06 14:07:36 ERROR (MainThread) [homeassistant.core] Error doing job: Unclosed client session\r\n2020-07-06 14:07:36 ERROR (MainThread) [homeassistant.core] Error doing job: Unclosed connector\r\n\r\n**Additional context**\r\nanything else?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/835", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/835/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/835/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/835/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/835", "id": 651445158, "node_id": "MDU6SXNzdWU2NTE0NDUxNTg=", "number": 835, "title": "Notify at Amazon Echo create an error ans no anounce", "user": {"login": "Snobs76", "id": 46965176, "node_id": "MDQ6VXNlcjQ2OTY1MTc2", "avatar_url": "https://avatars0.githubusercontent.com/u/46965176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Snobs76", "html_url": "https://github.com/Snobs76", "followers_url": "https://api.github.com/users/Snobs76/followers", "following_url": "https://api.github.com/users/Snobs76/following{/other_user}", "gists_url": "https://api.github.com/users/Snobs76/gists{/gist_id}", "starred_url": "https://api.github.com/users/Snobs76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Snobs76/subscriptions", "organizations_url": "https://api.github.com/users/Snobs76/orgs", "repos_url": "https://api.github.com/users/Snobs76/repos", "events_url": "https://api.github.com/users/Snobs76/events{/privacy}", "received_events_url": "https://api.github.com/users/Snobs76/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-06T10:56:14Z", "updated_at": "2020-07-07T01:08:37Z", "closed_at": "2020-07-07T01:08:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\nI create some month befor a script that send a message to my sonos speaker nd one Amazon echo device.\r\n\r\nThe was always working. Now the anounce for Alexa Echo is broken.\r\nI delete the part from AlexaMediaplayer and the script is running again well\r\n\r\nBut if I try create a small script that only anounce a test message I got the same erros`s again.\r\nMy HA and AMP ist up to date with the last stable versions.\r\n\r\nHere a the yaml file:\r\nalias: Alexa Annouce Test\r\n  sequence:\r\n  - data:\r\n      message: Testmessage\r\n      method: speak\r\n      type: announce\r\n    service: notify.alexa_media_echo_buro\r\n\r\n\r\nand the Error from HA\r\n\r\nProtokolldetails ( ERROR )\r\nLogger: homeassistant.components.websocket_api.http.connection.140367275672784\r\nSource: core.py:1222\r\nIntegration: Home Assistant WebSocket API (documentation, issues)\r\nFirst occurred: 12:39:13 (6 occurrences)\r\nLast logged: 12:52:35\r\n\r\nextra keys not allowed @ data['method']\r\nextra keys not allowed @ data['type']\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1260, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1295, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/script/__init__.py\", line 204, in service_handler\r\n    await script.async_turn_on(variables=service.data, context=service.context)\r\n  File \"/usr/src/homeassistant/homeassistant/components/script/__init__.py\", line 280, in async_turn_on\r\n    await self.script.async_run(kwargs.get(ATTR_VARIABLES), context)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 831, in async_run\r\n    await run.async_run()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 555, in async_run\r\n    await self._async_run()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 572, in _async_run\r\n    await self._async_step(log_exceptions=not propagate_exceptions)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 153, in _async_step\r\n    self, f\"_async_{cv.determine_script_action(self._action)}_step\"\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 656, in _async_call_service_step\r\n    *self._prep_call_service_step(), blocking=True, context=self._context\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1222, in async_call\r\n    processed_data = handler.schema(service_data)\r\n  File \"/usr/local/lib/python3.7/site-packages/voluptuous/schema_builder.py\", line 272, in __call__\r\n    return self._compiled([], data)\r\n  File \"/usr/local/lib/python3.7/site-packages/voluptuous/schema_builder.py\", line 594, in validate_dict\r\n    return base_validate(path, iteritems(data), out)\r\n  File \"/usr/local/lib/python3.7/site-packages/voluptuous/schema_builder.py\", line 432, in validate_mapping\r\n    raise er.MultipleInvalid(errors)\r\nvoluptuous.error.MultipleInvalid: extra keys not allowed @ data['method']\r\n\r\nPlease help me to get it back to work.\r\n\r\nBest regards\r\nSascha\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/832", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/832/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/832/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/832/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/832", "id": 650992512, "node_id": "MDU6SXNzdWU2NTA5OTI1MTI=", "number": 832, "title": "captcha image is broken", "user": {"login": "k1ng440", "id": 3443226, "node_id": "MDQ6VXNlcjM0NDMyMjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/3443226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k1ng440", "html_url": "https://github.com/k1ng440", "followers_url": "https://api.github.com/users/k1ng440/followers", "following_url": "https://api.github.com/users/k1ng440/following{/other_user}", "gists_url": "https://api.github.com/users/k1ng440/gists{/gist_id}", "starred_url": "https://api.github.com/users/k1ng440/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k1ng440/subscriptions", "organizations_url": "https://api.github.com/users/k1ng440/orgs", "repos_url": "https://api.github.com/users/k1ng440/repos", "events_url": "https://api.github.com/users/k1ng440/events{/privacy}", "received_events_url": "https://api.github.com/users/k1ng440/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-05T03:20:11Z", "updated_at": "2020-07-05T05:12:52Z", "closed_at": "2020-07-05T05:12:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\ncomponents ask for captcha frequently and I have to remove and add it back every time because the captcha image is always unavailable. \r\n\r\nhttps://puu.sh/G3KWh/0c4c483b1e.png\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'notifications'\r\n2. Click on 'configure'\r\n4. captcha image is broken\r\n\r\n**Expected behavior**\r\ncaptcha image should be visible \r\n\r\n**Screenshots**\r\nhttps://puu.sh/G3KWh/0c4c483b1e.png\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/828", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/828/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/828/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/828", "id": 650845176, "node_id": "MDU6SXNzdWU2NTA4NDUxNzY=", "number": 828, "title": "TypeError: unsupported operand type(s) for +: 'datetime.datetime' and 'float' upon captcha entry", "user": {"login": "tlpbu", "id": 8039755, "node_id": "MDQ6VXNlcjgwMzk3NTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/8039755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tlpbu", "html_url": "https://github.com/tlpbu", "followers_url": "https://api.github.com/users/tlpbu/followers", "following_url": "https://api.github.com/users/tlpbu/following{/other_user}", "gists_url": "https://api.github.com/users/tlpbu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tlpbu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tlpbu/subscriptions", "organizations_url": "https://api.github.com/users/tlpbu/orgs", "repos_url": "https://api.github.com/users/tlpbu/repos", "events_url": "https://api.github.com/users/tlpbu/events{/privacy}", "received_events_url": "https://api.github.com/users/tlpbu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-04T07:35:03Z", "updated_at": "2020-07-04T22:16:48Z", "closed_at": "2020-07-04T22:16:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n`TypeError: unsupported operand type(s) for +: 'datetime.datetime' and 'float'` exception thrown upon Amazon captcha entry\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behaviour:\r\n1. When Amazon captcha is requested in HA sidebar open configure modal window\r\n2. Enter captcha and submit \r\n3. Notice error notification popping up for few seconds un HA lower left corner\r\n4. Open HA logs and look for exception (attached here)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.1\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.9.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\n```\r\n2020-07-04 10:05:50 ERROR (MainThread) [alexapy.helpers] alexaapi.send_sequence((<alexapy.alexaapi.AlexaAPI object at 0x6cd48e90>, 'Alexa.DeviceControls.Volume'), {'value': 13.0, 'queue_delay': 1.5}): An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Session is closed',)\r\n2020-07-04 10:05:50 ERROR (MainThread) [alexapy.helpers] alexaapi.set_volume((<alexapy.alexaapi.AlexaAPI object at 0x6cd48e90>, 0.13), {}): An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Session is closed',)\r\n2020-07-04 10:22:17 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.1831490640] unsupported operand type(s) for +: 'datetime.datetime' and 'float'\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1260, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1295, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 28, in configuration_callback\r\n    setup_platform_callback, hass, config_entry, login, callback_data\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 173, in setup_platform_callback\r\n    await test_login_status(hass, config_entry, login, alexa_setup_callback)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 179, in test_login_status\r\n    await hass.async_add_job(alexa_setup_callback, hass, config_entry, login)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 899, in setup_alexa\r\n    await coordinator.async_refresh()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 174, in async_refresh\r\n    self._schedule_refresh()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 105, in _schedule_refresh\r\n    utcnow().replace(microsecond=0) + self.update_interval,\r\nTypeError: unsupported operand type(s) for +: 'datetime.datetime' and 'float'\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/827", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/827/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/827/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/827/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/827", "id": 650834439, "node_id": "MDU6SXNzdWU2NTA4MzQ0Mzk=", "number": 827, "title": "notify.alexa_media with target not working but others do", "user": {"login": "sinabahram", "id": 1811181, "node_id": "MDQ6VXNlcjE4MTExODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1811181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinabahram", "html_url": "https://github.com/sinabahram", "followers_url": "https://api.github.com/users/sinabahram/followers", "following_url": "https://api.github.com/users/sinabahram/following{/other_user}", "gists_url": "https://api.github.com/users/sinabahram/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinabahram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinabahram/subscriptions", "organizations_url": "https://api.github.com/users/sinabahram/orgs", "repos_url": "https://api.github.com/users/sinabahram/repos", "events_url": "https://api.github.com/users/sinabahram/events{/privacy}", "received_events_url": "https://api.github.com/users/sinabahram/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-07-04T06:02:11Z", "updated_at": "2020-07-05T21:08:02Z", "closed_at": "2020-07-05T21:08:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using Appdaemon or just the services test in HA, I get no errors but also no speech when doing something like this.\r\n\r\n{ \"message\": \"test\", \"data\": { \"type\": \"tts\"}, \"target\": \"name of echo device\"}\r\n\r\nIf I chop off the target and use any of the notify services that include the alexa device in their name already, again in Python with AD or in the services test in HA, I get speech.\r\n\r\nSuper possible I'm doing something wrong here, but since I get speech the other way, and I'm essentially just setting things up so copy/pasting from the docs themselves, I feel like maybe there's an odd bug or I'm seriously missing something about notify/alexa_media compared to the notify services specific to an Alexa device, which work fine.\r\n\r\nMy only goal is to be able to specify a target so I can begin building up some logic in AD about when to speak what where.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nUse notify/alexa_media in AD or notify.alexa_media in HA services test and specify a target. There is no speech.\r\n\r\nNow change to any of the alexa_media that specifies a specific device, delete target from your payload, either in AD or HA, and notice speech works just fine.\r\n\r\n**Expected behavior**\r\nSpeech should come out of the specified alexa device specified in target\r\n\r\nHappy to provide more info. Running latest HA and AD via docker-compose. No errors reported in either HA services test tool or via AD in the various logs. Oh, and a million thanks for creating this. You rock!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/826", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/826/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/826/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/826", "id": 650658842, "node_id": "MDU6SXNzdWU2NTA2NTg4NDI=", "number": 826, "title": "Error while setting up next_reminder sensor", "user": {"login": "brianewman", "id": 45852375, "node_id": "MDQ6VXNlcjQ1ODUyMzc1", "avatar_url": "https://avatars2.githubusercontent.com/u/45852375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianewman", "html_url": "https://github.com/brianewman", "followers_url": "https://api.github.com/users/brianewman/followers", "following_url": "https://api.github.com/users/brianewman/following{/other_user}", "gists_url": "https://api.github.com/users/brianewman/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianewman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianewman/subscriptions", "organizations_url": "https://api.github.com/users/brianewman/orgs", "repos_url": "https://api.github.com/users/brianewman/repos", "events_url": "https://api.github.com/users/brianewman/events{/privacy}", "received_events_url": "https://api.github.com/users/brianewman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-03T15:21:36Z", "updated_at": "2020-07-28T04:33:19Z", "closed_at": "2020-07-28T04:33:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nNext reminder sensors are showing as \"unavailable\".\r\n\r\n**To Reproduce**\r\nRestart Home Assistant\r\nLook at logs, see error\r\nLook at sensor.xxx_next_reminder sensors, state is \"unavailable\"\r\n\r\n**Expected behavior**\r\nsensor.xxx_next_reminder state should show date and time of next reminder \r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.1 \r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.9.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.7\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n2020-07-03 09:49:02 INFO (MainThread) [homeassistant.components.switch] Setting up switch.alexa_media\r\n2020-07-03 09:49:02 INFO (MainThread) [homeassistant.components.sensor] Setting up sensor.alexa_media\r\n2020-07-03 09:49:02 INFO (MainThread) [homeassistant.components.alarm_control_panel] Setting up alarm_control_panel.alexa_media\r\n2020-07-03 09:49:02 INFO (MainThread) [homeassistant.components.notify] Setting up notify.alexa_media\r\n2020-07-03 09:49:03 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up alexa_media platform for sensor\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 186, in _async_setup_platform\r\n    await asyncio.gather(*pending)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 292, in async_add_entities\r\n    await asyncio.gather(*tasks)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 449, in _async_add_entity\r\n    await entity.async_added_to_hass()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 265, in async_added_to_hass\r\n    await self.async_update()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 358, in async_update\r\n    self._process_raw_notifications()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 166, in _process_raw_notifications\r\n    self._all = list(map(self._update_recurring_alarm, self._all))\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 229, in _update_recurring_alarm\r\n    and alarm.isoweekday not in RECURRING_PATTERN_ISO_SET[recurring_pattern]\r\nAttributeError: 'float' object has no attribute 'isoweekday'\r\n\r\n\r\n**Additional context**\r\nOne Alexa device has a reminder set for every weekday at 6:30am.  Others have reminders set for specific days.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/825", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/825/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/825/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/825/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/825", "id": 650446931, "node_id": "MDU6SXNzdWU2NTA0NDY5MzE=", "number": 825, "title": "Removal deletes entire custom_components folder", "user": {"login": "Shadowstrider77", "id": 50249449, "node_id": "MDQ6VXNlcjUwMjQ5NDQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/50249449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shadowstrider77", "html_url": "https://github.com/Shadowstrider77", "followers_url": "https://api.github.com/users/Shadowstrider77/followers", "following_url": "https://api.github.com/users/Shadowstrider77/following{/other_user}", "gists_url": "https://api.github.com/users/Shadowstrider77/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shadowstrider77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shadowstrider77/subscriptions", "organizations_url": "https://api.github.com/users/Shadowstrider77/orgs", "repos_url": "https://api.github.com/users/Shadowstrider77/repos", "events_url": "https://api.github.com/users/Shadowstrider77/events{/privacy}", "received_events_url": "https://api.github.com/users/Shadowstrider77/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-03T08:48:50Z", "updated_at": "2020-07-03T09:29:44Z", "closed_at": "2020-07-03T09:29:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nRemoval deletes entire custom_components folder\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'HACS'\r\n2. Click on 'three dots'\r\n3. Scroll down to 'click Unistall'\r\n4. Folder is gone. HACS not working after reboot as HACS is also gone.\r\n\r\n**Expected behavior**\r\nOnly remove the Alexa component.\r\n\r\n**System details**\r\n - Home-assistant (0.111.4): \r\n - Hassio (No): \r\n\r\n**Logs**\r\nNo logs\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/822", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/822/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/822/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/822", "id": 650039743, "node_id": "MDU6SXNzdWU2NTAwMzk3NDM=", "number": 822, "title": "notify.alexa_media not working", "user": {"login": "pizzakid25", "id": 61093919, "node_id": "MDQ6VXNlcjYxMDkzOTE5", "avatar_url": "https://avatars3.githubusercontent.com/u/61093919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pizzakid25", "html_url": "https://github.com/pizzakid25", "followers_url": "https://api.github.com/users/pizzakid25/followers", "following_url": "https://api.github.com/users/pizzakid25/following{/other_user}", "gists_url": "https://api.github.com/users/pizzakid25/gists{/gist_id}", "starred_url": "https://api.github.com/users/pizzakid25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pizzakid25/subscriptions", "organizations_url": "https://api.github.com/users/pizzakid25/orgs", "repos_url": "https://api.github.com/users/pizzakid25/repos", "events_url": "https://api.github.com/users/pizzakid25/events{/privacy}", "received_events_url": "https://api.github.com/users/pizzakid25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327111, "node_id": "MDU6TGFiZWw5ODMzMjcxMTE=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-02T15:52:41Z", "updated_at": "2020-07-03T00:08:51Z", "closed_at": "2020-07-03T00:08:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nUnable to use notify.alexa_media service, returns error: ```'NoneType' object is not iterable```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'Developer Tools'\r\n2. Click on 'Services'\r\n3. Select 'notify.alexa_media'\r\n4. Input service data: \r\n```\r\nmessage: test\r\ndata: \r\n  type: tts\r\n  target: \r\n    - media_player.edward_s_tv\r\n```\r\n5. See error\r\n\r\n**Expected behavior**\r\nTV says the word 'test'\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.0\r\n - Hassio (Yes/No): Yes; HassOS 4.10\r\n - alexa_media: 2.8.9\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.7\r\n\r\n**Logs**\r\n```\r\n2020-07-02 11:50:11 INFO (MainThread) [custom_components.alexa_media] \r\n-------------------------------------------------------------------\r\nalexa_media\r\nVersion: 2.8.9\r\nThis is a custom component\r\nIf you have any issues with this you need to open an issue here:\r\nhttps://github.com/custom-components/alexa_media_player/issues\r\n-------------------------------------------------------------------\r\n\r\n2020-07-02 11:50:11 INFO (MainThread) [custom_components.alexa_media] Loaded alexapy==1.10.7\r\n2020-07-02 11:50:11 DEBUG (MainThread) [alexapy.alexalogin] Trying to load pickled cookie from file /config/.storage/alexa_media.7******305.pickle\r\n2020-07-02 11:50:13 DEBUG (MainThread) [alexapy.alexalogin] Trying to load aiohttpCookieJar to session\r\n2020-07-02 11:50:13 DEBUG (MainThread) [alexapy.alexalogin] Loaded 8 cookies\r\n2020-07-02 11:50:13 DEBUG (MainThread) [alexapy.alexalogin] Using cookies to log in\r\n2020-07-02 11:50:16 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.com/api/bootstrap returned 200:OK with response <CIMultiDictProxy('Content-Type': 'application/json', 'Content-Length': '133', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 02 Jul 2020 15:50:15 GMT', 'x-amzn-RequestId': 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx', 'Content-Encoding': 'gzip', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'xxxxxxxxxxxxxxxxxxxxx', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 ba82151bf51e4c722c5305c983d8b71e.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'IAD89-C3', 'X-Amz-Cf-Id': 'O1r7xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-hJDgyh-ngM2OYrg==')>\r\n2020-07-02 11:50:16 DEBUG (MainThread) [alexapy.alexalogin] Logged in as mobile account \r\n2020-07-02 11:50:16 DEBUG (MainThread) [alexapy.alexalogin] Log in successful with cookies\r\n2020-07-02 11:50:16 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'login_successful': True}\r\n2020-07-02 11:50:16 DEBUG (MainThread) [custom_components.alexa_media.configurator] Setting up Alexa devices for 7******305\r\n2020-07-02 11:50:16 DEBUG (MainThread) [custom_components.alexa_media] 7******305: Websocket created: <alexapy.alexawebsocket.WebsocketEchoClient object at 0x6de450f0>\r\n2020-07-02 11:50:16 DEBUG (MainThread) [alexapy.alexawebsocket] Connecting to wss://dp-gw-na-js.amazon.com/?x-amz-device-type=ALEGCNGL9K0HM&x-amz-device-serial=135xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx with {'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://alexa.amazon.com/api/bootstrap', 'Cookie': 'session-id=140-xxxxxxx-6847763; session-id-time=2223982821l; ubid-main=135-xxxxxxx-3390638; session-token=XhUfMRqgIzvJQmgTQR86lNld4GIgZBje/mRoYTme6QtJ410ScWtHHvB1Tfr2M4s8Us9rK6XUyo4m6Dq5VGLne3TGvpDurEtEUM8OSlfIyVLgTKhvmXO4CnsudD2W2OFSCIL+H8lVQ89En7EM3KaFcqpDj/YwMnb2n3lBJPBFnRRI2uex636swB0/Mj7e8Ngdz/YPcGc2Gt6+qka4XUIfFC77cBjCaWg1ExF5zBD+4tk=; x-main=Kl0BGOWT5CrUbLCpPRPXfvhyIHKt7nqOXedOMwFynGDUGefAJWF6ARLd69CcCUc0; at-main=Atza|IwEBIKAcsbPTWqz6JcMWNoHHRfgTvLt0TJA8tnYFh6v3YBpf1EWdeZSVREO8z2_KzmW6ViEhZW5G65Z8UuTaRlI_Awwr3JYUg595Th2hZQgH20Yu-oqdvUMnNDYNm-YiAsNF5fgjQRBX8MvY1Ev5_a7TrzD_JPl5urhx0zvMkPg3ZaDkOv2znQYYOU-9Ap4UuRY6kQPaNVF6PAtL8L4Wnqxj6uEU; sess-at-main=kejhsRXhfR2v3UETPBnj9XKcTqC+1iHTe0W6zNEpFCw=; csrf=-1468769599; ', 'Origin': 'https://alexa.amazon.com'}\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Initating Async Handshake.\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Starting message parsing loop.\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: 0x37a3b607 0x0000009c {\"protocolName\":\"A:H\",\"parameters\":{\"AlphaProtocolHandler.maxFragmentSize\":\"16000\",\"AlphaProtocolHandler.receiveWindowSize\":\"16\"}}TUNE\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding WebSocket Handshake MSG.\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Handshake MSG.\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000361 0x00f8b29f f 0x00000001 0xce83af88 0x000000b9 ACK 0x00000003 1.0 0x00000024 01e09e62-f504-476c-85c8-9c97c8da26ed 0x00000064 0x0000016978ff598c 0x000001731038b920 END FABE\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received ACK MSG for Registration.\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Register MSG.\r\n2020-07-02 11:50:19 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding PING.\r\n2020-07-02 11:50:20 DEBUG (MainThread) [custom_components.alexa_media] 7******305: Websocket succesfully connected\r\n2020-07-02 11:50:20 DEBUG (MainThread) [custom_components.alexa_media] Creating coordinator\r\n2020-07-02 11:50:20 DEBUG (MainThread) [custom_components.alexa_media] Refreshing coordinator\r\n2020-07-02 11:50:20 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/devices-v2/device returned 200:OK:application/json\r\n2020-07-02 11:50:20 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/bootstrap returned 200:OK:application/json\r\n2020-07-02 11:50:20 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-07-02 11:50:20 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-07-02 11:50:20 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/device-preferences returned 200:OK:application/json\r\n2020-07-02 11:50:20 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/notifications returned 200:OK:application/json\r\n2020-07-02 11:50:20 DEBUG (MainThread) [custom_components.alexa_media] 7******305: Found 7 devices, 7 bluetooth\r\n2020-07-02 11:50:21 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/notifications returned 200:OK:application/json\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] 7******305: Updated 0 notifications for 1 devices at 2020-07-02 11:50:21.180346-04:00\r\n2020-07-02 11:50:21 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] 7******305: Updated last_called: {'serialNumber': 'G************2EM', 'timestamp': 1593704005796}\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] 7******305: last_called changed:  to {'serialNumber': 'G************2EM', 'timestamp': 1593704005796}\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Diz: Locale en-us timezone America/New_York\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Diz: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Isaac's TV: Locale en-us timezone America/New_York\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Isaac's TV: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Edward's TV: Locale en-us timezone America/New_York\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Edward's TV: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] William's TV: Locale en-us timezone America/New_York\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] William's TV: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Echo Dot: Locale en-us timezone America/New_York\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Echo Dot: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-us timezone America/New_York\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Rob's Alexa Apps: Locale en-us timezone None\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Rob's Alexa Apps: DND False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] 7******305: Existing: [] New: ['Diz', \"Isaac's TV\", \"Edward's TV\", \"William's TV\", 'Echo Dot', 'This Device', \"Rob's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: []\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 0.904 seconds\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing Isaac's TV\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] Isaac's TV: Last_called check: self: G************2EU reported: \r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing Edward's TV\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] Edward's TV: Last_called check: self: G************198 reported: \r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing William's TV\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] William's TV: Last_called check: self: G************2EM reported: \r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing Echo Dot\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot: Last_called check: self: G************U3K reported: \r\n2020-07-02 11:50:21 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber+xxxxxxxxxxxxxxxxx&deviceType=A3S5BH2HU6VAYF&screenWidth=2560 returned 400:Bad Request:application/json\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing This Device\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.media_player] This Device: Last_called check: self: f****************************5c9 reported: \r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.helpers] 7******305: Adding [<Entity Diz: unavailable>, <Entity Isaac's TV: standby>, <Entity Edward's TV: standby>, <Entity William's TV: standby>, <Entity Echo Dot: standby>, <Entity This Device: standby>, <Entity Rob's Alexa Apps: unavailable>]\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Loading switches\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************J76 dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping shuffle for G************J76\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping repeat for G************J76\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************2EU dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping shuffle for G************2EU\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping repeat for G************2EU\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************198 dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping shuffle for G************198\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping repeat for G************198\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************2EM dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping shuffle for G************2EM\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping repeat for G************2EM\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************U3K dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************U3K shuffle switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found G************U3K repeat switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found f****************************5c9 dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping shuffle for f****************************5c9\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping repeat for f****************************5c9\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Found 6****************************9e9 dnd switch with status: False\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping shuffle for 6****************************9e9\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.switch] 7******305: Skipping repeat for 6****************************9e9\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.helpers] 7******305: Adding [<Entity Diz do not disturb switch: off>, <Entity Isaac's TV do not disturb switch: off>, <Entity Edward's TV do not disturb switch: off>, <Entity William's TV do not disturb switch: off>, <Entity Echo Dot do not disturb switch: off>, <Entity Echo Dot shuffle switch: off>, <Entity Echo Dot repeat switch: off>, <Entity This Device do not disturb switch: off>, <Entity Rob's Alexa Apps do not disturb switch: off>]\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Loading sensors\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************J76 Alarm sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************J76 Timer sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************J76 Reminder sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************2EU Alarm sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************2EU Timer sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************2EU Reminder sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************198 Alarm sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************198 Timer sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************198 Reminder sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************2EM Alarm sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************2EM Timer sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************2EM Reminder sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************U3K Alarm sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************U3K Timer sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found G************U3K Reminder sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found f****************************5c9 Alarm sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found f****************************5c9 Timer sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.sensor] 7******305: Found f****************************5c9 Reminder sensor (0) with next: unavailable\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.helpers] 7******305: Adding [<Entity Diz next Alarm: unavailable>, <Entity Diz next Timer: unavailable>, <Entity Diz next Reminder: unavailable>, <Entity Isaac's TV next Alarm: unavailable>, <Entity Isaac's TV next Timer: unavailable>, <Entity Isaac's TV next Reminder: unavailable>, <Entity Edward's TV next Alarm: unavailable>, <Entity Edward's TV next Timer: unavailable>, <Entity Edward's TV next Reminder: unavailable>, <Entity William's TV next Alarm: unavailable>, <Entity William's TV next Timer: unavailable>, <Entity William's TV next Reminder: unavailable>, <Entity Echo Dot next Alarm: unavailable>, <Entity Echo Dot next Timer: unavailable>, <Entity Echo Dot next Reminder: unavailable>, <Entity This Device next Alarm: unavailable>, <Entity This Device next Timer: unavailable>, <Entity This Device next Reminder: unavailable>]\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Trying with limit 5 delay 2 catch_exceptions True\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 1/5 after waiting 0 seconds result: <custom_components.alexa_media.notify.AlexaNotificationService object at 0x6a80c2d0>\r\n2020-07-02 11:50:21 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/phoenix returned 200:OK:application/json\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] 7******305: No Alexa Guard entity found\r\n2020-07-02 11:50:21 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] 7******305: Skipping creation of uninitialized device: <Entity Alexa Guard: None>\r\n2020-07-02 11:50:28 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: test213fgd, kwargs: {'title': 'test', 'data': {'type': 'tts', 'target': ['media_player.wiliam_s_tv']}, 'message': 'test213fgd'}\r\n2020-07-02 11:50:28 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'NoneType'>\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Diz\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing Isaac's TV\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Isaac's TV: Last_called check: self: G************2EU reported: G************2EM\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Isaac's TV\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing Edward's TV\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Edward's TV: Last_called check: self: G************198 reported: G************2EM\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Edward's TV\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing William's TV\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] William's TV: Last_called check: self: G************2EM reported: G************2EM\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for William's TV\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing Echo Dot\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot: Last_called check: self: G************U3K reported: G************2EM\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] 7******305: Refreshing This Device\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] This Device: Last_called check: self: f****************************5c9 reported: G************2EM\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for This Device\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Rob's Alexa Apps\r\n2020-07-02 11:50:32 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=xxxxxxxxxxxxxxxxxxx&deviceType=A3S5BH2HU6VAYF&screenWidth=2560 returned 400:Bad Request:application/json\r\n2020-07-02 11:50:32 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Echo Dot\r\n```\r\nThere is also this:\r\n```\r\nLogger: homeassistant.components.websocket_api.http.connection.xxxxxxxxxx\r\nSource: custom_components/alexa_media/notify.py:168\r\nIntegration: Home Assistant WebSocket API (documentation, issues)\r\nFirst occurred: 11:50:28 AM (1 occurrences)\r\nLast logged: 11:50:28 AM\r\n\r\n'NoneType' object is not iterable\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1260, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1295, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/notify/__init__.py\", line 119, in async_notify_message\r\n    await notify_service.async_send_message(**kwargs)\r\n  File \"/config/custom_components/alexa_media/notify.py\", line 168, in async_send_message\r\n    for target in targets:\r\nTypeError: 'NoneType' object is not iterable\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/820", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/820/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/820/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/820/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/820", "id": 649621476, "node_id": "MDU6SXNzdWU2NDk2MjE0NzY=", "number": 820, "title": "No devices detected on one of two accounts", "user": {"login": "genem2", "id": 46231389, "node_id": "MDQ6VXNlcjQ2MjMxMzg5", "avatar_url": "https://avatars3.githubusercontent.com/u/46231389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/genem2", "html_url": "https://github.com/genem2", "followers_url": "https://api.github.com/users/genem2/followers", "following_url": "https://api.github.com/users/genem2/following{/other_user}", "gists_url": "https://api.github.com/users/genem2/gists{/gist_id}", "starred_url": "https://api.github.com/users/genem2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/genem2/subscriptions", "organizations_url": "https://api.github.com/users/genem2/orgs", "repos_url": "https://api.github.com/users/genem2/repos", "events_url": "https://api.github.com/users/genem2/events{/privacy}", "received_events_url": "https://api.github.com/users/genem2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-02T04:15:07Z", "updated_at": "2020-07-03T00:15:39Z", "closed_at": "2020-07-03T00:14:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Tonight I'm seeing that all my devices on my primary account are unavailable. One device on a secondary account is still fine. I've tried everything: removed the integration & pickle, uninstalled/reinstalled from the HACS, and even restored my .db and .storage folder from earlier today.  I'm at a loss. \r\nAll my Alexa devices are appearing as unavailable. (And under Entities, these are reported as Restored.)\r\nThe one device on that second account appears perfectly fine.\r\n\r\nDo you see anything?\r\n[MyLogs.txt](https://github.com/custom-components/alexa_media_player/files/4861925/MyLogs.txt)\r\n\r\nHome Assistant 0.111.4  (Docker)\r\narch | x86_64\r\ndev | false\r\ndocker | true\r\nhassio | false\r\ninstallation_type | Home Assistant Container\r\nos_name | Linux\r\nos_version | 4.19.107-Unraid\r\npython_version | 3.7.7\r\ntimezone | America/Los_Angeles\r\nversion | 0.111.4\r\nvirtualenv | false\r\n\r\nThank you, sir.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/819", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/819/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/819/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/819/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/819", "id": 649416564, "node_id": "MDU6SXNzdWU2NDk0MTY1NjQ=", "number": 819, "title": "Sending command after HA shutdown requires reconfiguring at every reboot", "user": {"login": "wiiNinja", "id": 82509, "node_id": "MDQ6VXNlcjgyNTA5", "avatar_url": "https://avatars1.githubusercontent.com/u/82509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiiNinja", "html_url": "https://github.com/wiiNinja", "followers_url": "https://api.github.com/users/wiiNinja/followers", "following_url": "https://api.github.com/users/wiiNinja/following{/other_user}", "gists_url": "https://api.github.com/users/wiiNinja/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiiNinja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiiNinja/subscriptions", "organizations_url": "https://api.github.com/users/wiiNinja/orgs", "repos_url": "https://api.github.com/users/wiiNinja/repos", "events_url": "https://api.github.com/users/wiiNinja/events{/privacy}", "received_events_url": "https://api.github.com/users/wiiNinja/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2020-07-01T23:44:22Z", "updated_at": "2020-07-05T11:03:58Z", "closed_at": "2020-07-04T22:16:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn the latest version 2.8.9, when Home Assistant is reboots, there's an alert to configure the Alexa player using a captcha. This did not happen in 2.8.8. I'm not sure if this is intended starting in 2.8.9 or inadvertent.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1- Restart HA\r\n2- When asked, enter CAPTCHA to configure Alexa player - Success\r\n3- Restart HA\r\n4- Configuration alert is displayed again to configure Alexa player using CAPTCHA\r\n5- I do run Hassio, therefore, I repeat steps 1-2 several times (more than 5 times) - and each time the configuration alert comes up.\r\n\r\n**Expected behavior**\r\nThis is where I'm not sure if it was intended or not. I would like to see configuration, and verification every once in a while, not at every restart of Home Assistant, because some people, like myself, have HA be automatically restart periodically, and this is an inconvenience.  This behavior was not in the 2.8.8 version, but only started in 2.8.9.\r\n\r\n**Screenshots**\r\nNone.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.0\r\n - Hassio (Yes/No): Yes - and I do restarted at least 5 times.\r\n(Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.9\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.7\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/818", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/818/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/818/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/818", "id": 646901437, "node_id": "MDU6SXNzdWU2NDY5MDE0Mzc=", "number": 818, "title": "Add Russian language to the translation", "user": {"login": "vlad36N", "id": 30022288, "node_id": "MDQ6VXNlcjMwMDIyMjg4", "avatar_url": "https://avatars2.githubusercontent.com/u/30022288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlad36N", "html_url": "https://github.com/vlad36N", "followers_url": "https://api.github.com/users/vlad36N/followers", "following_url": "https://api.github.com/users/vlad36N/following{/other_user}", "gists_url": "https://api.github.com/users/vlad36N/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlad36N/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlad36N/subscriptions", "organizations_url": "https://api.github.com/users/vlad36N/orgs", "repos_url": "https://api.github.com/users/vlad36N/repos", "events_url": "https://api.github.com/users/vlad36N/events{/privacy}", "received_events_url": "https://api.github.com/users/vlad36N/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-28T11:46:34Z", "updated_at": "2020-06-29T23:16:19Z", "closed_at": "2020-06-28T17:20:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**NOTE: For a feature to be created it has to be doable in the Amazon app because we are basically replicating the app for HA. If you can't find it in the app, we probably can't create it here.**\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/813", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/813/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/813/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/813/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/813", "id": 646640767, "node_id": "MDU6SXNzdWU2NDY2NDA3Njc=", "number": 813, "title": "de verificaci\u00f3n por n\u00famero. (e.g., `0` or `1`)\\n{message}\",", "user": {"login": "todo[bot]", "id": 32347756, "node_id": "MDM6Qm90MzIzNDc3NTY=", "avatar_url": "https://avatars1.githubusercontent.com/in/5534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/todo%5Bbot%5D", "html_url": "https://github.com/apps/todo", "followers_url": "https://api.github.com/users/todo%5Bbot%5D/followers", "following_url": "https://api.github.com/users/todo%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/todo%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/todo%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/todo%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/todo%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/todo%5Bbot%5D/repos", "events_url": "https://api.github.com/users/todo%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/todo%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 1528847859, "node_id": "MDU6TGFiZWwxNTI4ODQ3ODU5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/todo%20:spiral_notepad:", "name": "todo :spiral_notepad:", "color": "00B0D8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-27T08:50:52Z", "updated_at": "2020-06-27T08:53:20Z", "closed_at": "2020-06-27T08:53:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/custom-components/alexa_media_player/blob/d4ea84d22be6c563866cdec1c2bcf1c5bc6426b4/custom_components/alexa_media/.translations/es.json#L49-L54\n\n---\n\n###### This issue was generated by [todo](https://todo.jasonet.co) based on a `todo` comment in d4ea84d22be6c563866cdec1c2bcf1c5bc6426b4 when #811 was merged. cc @custom-components.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/812", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/812/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/812/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/812", "id": 646640760, "node_id": "MDU6SXNzdWU2NDY2NDA3NjA=", "number": 812, "title": "de verificaci\u00f3n\"", "user": {"login": "todo[bot]", "id": 32347756, "node_id": "MDM6Qm90MzIzNDc3NTY=", "avatar_url": "https://avatars1.githubusercontent.com/in/5534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/todo%5Bbot%5D", "html_url": "https://github.com/apps/todo", "followers_url": "https://api.github.com/users/todo%5Bbot%5D/followers", "following_url": "https://api.github.com/users/todo%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/todo%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/todo%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/todo%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/todo%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/todo%5Bbot%5D/repos", "events_url": "https://api.github.com/users/todo%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/todo%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 1528847859, "node_id": "MDU6TGFiZWwxNTI4ODQ3ODU5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/todo%20:spiral_notepad:", "name": "todo :spiral_notepad:", "color": "00B0D8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-27T08:50:49Z", "updated_at": "2020-06-27T08:53:19Z", "closed_at": "2020-06-27T08:53:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/custom-components/alexa_media_player/blob/d4ea84d22be6c563866cdec1c2bcf1c5bc6426b4/custom_components/alexa_media/.translations/es.json#L47-L52\n\n---\n\n###### This issue was generated by [todo](https://todo.jasonet.co) based on a `todo` comment in d4ea84d22be6c563866cdec1c2bcf1c5bc6426b4 when #811 was merged. cc @custom-components.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/809", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/809/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/809/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/809", "id": 645763107, "node_id": "MDU6SXNzdWU2NDU3NjMxMDc=", "number": 809, "title": "Log error \"Session is closed\"", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars3.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-25T18:22:40Z", "updated_at": "2020-06-27T11:58:14Z", "closed_at": "2020-06-27T08:49:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nEcho devices not working and log traced\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart HA\r\n2. Check log\r\n\r\n**Expected behavior**\r\nNo error logged and plugin working as designed\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.111.4\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.7\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\n\r\n```\r\n2020-06-25 20:19:38 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f28aa86a850>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\n('Session is closed',)\r\n2020-06-25 20:19:38 ERROR (MainThread) [homeassistant.helpers.entity] Update for media_player.in_tutta_la_casa fails\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 279, in async_update_ha_state\r\n    await self.async_device_update()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 470, in async_device_update\r\n    await self.async_update()\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 802, in async_update\r\n    device, no_throttle=True\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 545, in refresh\r\n    session = await self.alexa_api.get_state()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/helpers.py\", line 69, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 761, in get_state\r\n    + \"&screenWidth=2560\"\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 122, in _get_request\r\n    return await self._request(\"get\", uri, data)\r\n  File \"/usr/local/lib/python3.7/site-packages/backoff/_async.py\", line 133, in retry\r\n    ret = await target(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 93, in _request\r\n    ssl=self._login._ssl,\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/aiohttp/client.py\", line 377, in _request\r\n    raise RuntimeError(\"Session is closed\")\r\nRuntimeError: Session is closed\r\n\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/808", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/808/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/808/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/808/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/808", "id": 645672568, "node_id": "MDU6SXNzdWU2NDU2NzI1Njg=", "number": 808, "title": "Setup Integration - amazon.com works somewhat but amazon.de won't at all", "user": {"login": "SublimePotato", "id": 4058166, "node_id": "MDQ6VXNlcjQwNTgxNjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/4058166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SublimePotato", "html_url": "https://github.com/SublimePotato", "followers_url": "https://api.github.com/users/SublimePotato/followers", "following_url": "https://api.github.com/users/SublimePotato/following{/other_user}", "gists_url": "https://api.github.com/users/SublimePotato/gists{/gist_id}", "starred_url": "https://api.github.com/users/SublimePotato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SublimePotato/subscriptions", "organizations_url": "https://api.github.com/users/SublimePotato/orgs", "repos_url": "https://api.github.com/users/SublimePotato/repos", "events_url": "https://api.github.com/users/SublimePotato/events{/privacy}", "received_events_url": "https://api.github.com/users/SublimePotato/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-25T15:51:58Z", "updated_at": "2020-06-26T03:18:13Z", "closed_at": "2020-06-25T16:56:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Under construction**\r\nI figured I was missing the alexapy debug log - adding it a the moment. \r\n\r\n**Describe the bug**\r\nI recently did an overhaul of my HASS instance and in the progress I needed to recreate the alexa_media integration.\r\nPreviously I was using a combination of configuration entry and integration, which was working fine. \r\n\r\nWith the new HASS instance I am only using the integration as the wiki suggests, but the setup fails with `Unknown error, please report log info` (logs at the end). \r\nWhile troubleshooting i did create the integration with `amazon.com` by accident, but it worked fetched a captcha and 2FA and even found my devices. But devices found with the `amazon.com` integration are crippled, not showing media and read only, so I am still facing an issue here.\r\n\r\n![image](https://user-images.githubusercontent.com/4058166/85751473-e81d1f00-b70a-11ea-802d-a7689f6d0058.png)\r\n\r\n**Additional Info**\r\nI did delete my pickle while redoing everything deleted the new (amazon.com) one multiple times while troubleshooting. \r\nActually I am quite sure the error I get now is not the same as a few days before when I was trying. The previous error was an `ContentTypeError` where the `text\\html` did not match the `json` that was needed. Likely due to my update `2.8.6` -> `2.8.7`?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/806", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/806/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/806/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/806/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/806", "id": 645269835, "node_id": "MDU6SXNzdWU2NDUyNjk4MzU=", "number": 806, "title": "echo devices not available anymore", "user": {"login": "Joebinator", "id": 44570824, "node_id": "MDQ6VXNlcjQ0NTcwODI0", "avatar_url": "https://avatars0.githubusercontent.com/u/44570824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Joebinator", "html_url": "https://github.com/Joebinator", "followers_url": "https://api.github.com/users/Joebinator/followers", "following_url": "https://api.github.com/users/Joebinator/following{/other_user}", "gists_url": "https://api.github.com/users/Joebinator/gists{/gist_id}", "starred_url": "https://api.github.com/users/Joebinator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Joebinator/subscriptions", "organizations_url": "https://api.github.com/users/Joebinator/orgs", "repos_url": "https://api.github.com/users/Joebinator/repos", "events_url": "https://api.github.com/users/Joebinator/events{/privacy}", "received_events_url": "https://api.github.com/users/Joebinator/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-25T07:39:42Z", "updated_at": "2020-06-29T11:31:10Z", "closed_at": "2020-06-29T11:31:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there!\r\n\r\nI noticed that my echo devices are not available anymore. :(\r\n\r\nAfter trying to new install the the integration via hacs i alway get an unknown error when trying to login\r\n\r\nMaybe someone has an idea what to do\r\n\r\n> 2020-06-25 09:20:12 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f9f9e492850>,), {'cookies': {'session-id': '258-9861325-3973868', 'session-id-time': '2222343526l', 'ubid-acbde': '262-9988822-0972906', 'session-token': 'daKalFoDv6CXoKt5O3kpNybbR6Vrpcqa6fmXZknD84lxZSMA+stBdfKA7Zd6ka0jkPp1S0ZFKMSLiiB7y5vY04nepY5sIT0sjuQRzTHsxXEDOr9LaRabsxpFAy57mecUWN7mnEGxA0KjlxDopJYzBj1t6FyxcUgkzBnNesd7leWI3XylGllcs/egmOJlReKwCH3o3vOdIcOeNUTCpRV2LTkLpuDEdSxHmT8xvSQhdHU=', 'x-acbde': 'idgHH36OLN09BAg8rJNtPwUuN8qaTlJE', 'at-acbde': 'Atza|IwEBIM2Vf6nIsrU3KvmgRy2pj3-P7Mz9_l0j1uo9eE4mZTUK3i66j2YO9ZWJ7wi31KaM0-8kThb1zmK8KtRLxlX7E8TIIHvNJoxa5L9TfWyp0SqMjBFx03nyPO9ZqdBNyih25LDSPkenwK8SsHSuBQloLllk3sOG9fnLA1R_JNDcQ5PFYu6IV5VFBQH2p74jKXrfIb-bW0KOSuo3-K-UTgLDAcLBTMGjBu60JB5JdCW1XBvafxKyVoxep7NPOcmvBybZ3JiW9OwkDObI4OiMhWWJFIWm9PDLlAiHirUb2XTsidup3mERJ0X1UEoExjTcHY5jlwR1QoYj8abHchn-Xm4fHhCVurrPpx3VBM6cQZAlr9ahsHrFIcSLO3VKMCnt-nxBthGzlkVbf45I2-LEc-0nd2XC', 'sess-at-acbde': '+ncEKsvTf1D138x0Hv5zTgNmU1IFMuybVETxIe3CIgI=', 'sst-acbde': 'Sst1|PQHJ9zEyhgydj22GsLNOQJszC9oufw5HpxE4JAb_WZ9ODzmu5OIHpntA48QAEf_ducPUgOy-M4WSFihZOqmjkOnvsQGNKWrrXcr9dec0gUzzKofpk2OBBAzSoCNzbIdIQGQiSQn7rdJN_LrDmCkac73Q9twRi7LpdwfPxYklQnU4yFk-ywYIvliYP0kGlctwp7_8iYWJNvKdJs1zflzjZjr4-AQ8gAjZOyLjkhWbdl5uww-BGxmqvoatLcv8AfnBL10_e3piw366yVk0NQCEWQY01rXFKqfjD_rbBLzbOtNPQXz75K4raUxBB-oD2Dpykbnn3es-f1t2RiS9DbjqHArJoQ', 'csrf': '-1702881792'}}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n> ()\r\n> 2020-06-25 09:20:12 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: \r\n> 2020-06-25 09:20:25 INFO (SyncWorker_7) [pynetgear] Get attached devices 2\r\n> 2020-06-25 09:20:36 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f9f9e492850>,), {'data': {'url': 'amazon.de', 'debug': False, 'scan_interval': 60, 'email': 'j************s@g*******m', 'password': 'REDACTED 64 CHARS', 'exclude_devices': '', 'include_devices': ''}}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n> ()\r\n> 2020-06-25 09:20:36 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: \r\n> \r\n> 2020-06-25 09:28:59 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f9f9e492850>,), {'data': {'url': 'amazon.de', 'debug': True, 'scan_interval': 60, 'email': 'j************s@g*******m', 'password': 'REDACTED 1016 CHARS', 'exclude_devices': '', 'include_devices': ''}}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n> ()\r\n> 2020-06-25 09:28:59 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: \r\n> ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/805", "id": 644654345, "node_id": "MDU6SXNzdWU2NDQ2NTQzNDU=", "number": 805, "title": "Not logged in due to email mismatch - Mobile accounts unable to log in", "user": {"login": "pizzakid25", "id": 61093919, "node_id": "MDQ6VXNlcjYxMDkzOTE5", "avatar_url": "https://avatars3.githubusercontent.com/u/61093919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pizzakid25", "html_url": "https://github.com/pizzakid25", "followers_url": "https://api.github.com/users/pizzakid25/followers", "following_url": "https://api.github.com/users/pizzakid25/following{/other_user}", "gists_url": "https://api.github.com/users/pizzakid25/gists{/gist_id}", "starred_url": "https://api.github.com/users/pizzakid25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pizzakid25/subscriptions", "organizations_url": "https://api.github.com/users/pizzakid25/orgs", "repos_url": "https://api.github.com/users/pizzakid25/repos", "events_url": "https://api.github.com/users/pizzakid25/events{/privacy}", "received_events_url": "https://api.github.com/users/pizzakid25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-24T14:19:30Z", "updated_at": "2020-06-28T21:28:14Z", "closed_at": "2020-06-27T08:39:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI am still unable to login after upgrading to v2.8.7 via HACS and restarting multiple times.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'Configuration'\r\n2. Click on 'Integrations'\r\n3. Select 'Set up a new integration'\r\n4. Click 'Alexa Media Player'\r\n5. Attempt login\r\n6. See error\r\n\r\n**Expected behavior**\r\nSuccessfully login and integrate Alexa Media Player\r\n\r\n**System details**\r\n - Home-assistant (version): v0.111.4\r\n - Hassio (Yes/No): Yes; HassOS v4.10\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.7\r\n - alexapy (version from `pip show alexapy` or HA startup): v1.10.5\r\n\r\n**Logs**\r\n```\r\n020-06-24 09:33:44 DEBUG (MainThread) [custom_components.alexa_media.config_flow] show_form user None None OrderedDict([('email', <class 'str'>), ('password', <class 'str'>), ('url', <class 'str'>), ('debug', <class 'bool'>), ('include_devices', <class 'str'>), ('exclude_devices', <class 'str'>), ('scan_interval', <class 'int'>)])\r\n2020-06-24 09:34:01 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Creating new login\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0& returned 200:OK with response <CIMultiDictProxy('Server': 'Server', 'Content-Type': 'text/html;charset=UTF-8', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'TEHV6NV92SNP8ZBMS0FD', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'Date': 'Wed, 24 Jun 2020 13:34:01 GMT', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Connection': 'Transfer-Encoding', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=140-5623353-3294106; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:01 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223725641l; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:01 GMT; Path=/; Secure')>\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Found standard login page\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin/140-5623353-3294106\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to https://www.amazon.com/ap/signin/140-5623353-3294106 with input data: {}\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] POST: \r\nhttps://www.amazon.com/ap/signin/140-5623353-3294106 returned 200:OK with response <CIMultiDictProxy('Server': 'Server', 'Content-Type': 'text/html;charset=UTF-8', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'NFEEXM5373HRTK3JBRE3', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'Date': 'Wed, 24 Jun 2020 13:34:02 GMT', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Connection': 'Transfer-Encoding', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=140-5623353-3294106; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:02 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223725642l; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:02 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=134-4902074-9930055; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:02 GMT; Path=/; Secure')>\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin/140-5623353-3294106\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Error message: Important Message!\r\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\r\n          \r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-24 09:34:02 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Testing login status: {'error_message': 'Important Message!\\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\\n          ', 'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/d72619c6349d404f910a491ecc6cbf1d.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593005942&Signature=sr2sSA%2FSj314vssUo%2BHsTDK3tGg%3D'}\r\n2020-06-24 09:34:02 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Creating config_flow to request captcha\r\n2020-06-24 09:34:02 DEBUG (MainThread) [custom_components.alexa_media.config_flow] show_form captcha {'email': 'REDACTED EMAIL', 'url': 'amazon.com', 'captcha_image': '[![captcha](https://opfcaptcha-prod.s3.amazonaws.com/d72619c6349d404f910a491ecc6cbf1d.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593005942&Signature=sr2sSA%2FSj314vssUo%2BHsTDK3tGg%3D)](https://opfcaptcha-prod.s3.amazonaws.com/d72619c6349d404f910a491ecc6cbf1d.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593005942&Signature=sr2sSA%2FSj314vssUo%2BHsTDK3tGg%3D)', 'message': '\\n> Important Message!\\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\\n          '} {} OrderedDict([('password', <class 'str'>), ('captcha', <class 'str'>)])\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/signin/140-5623353-3294106 \r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin/140-5623353-3294106\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Error message: Important Message!\r\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\r\n          \r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to https://www.amazon.com/ap/signin with input data: {'password': 'REDACTED PASSWORD', 'captcha': 'dng576'}\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] POST: redirected from\r\nhttps://www.amazon.com/ap/signin\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com/?openid.assoc_handle=amzn_dp_project_dee&openid.claimed_id=https://www.amazon.com/ap/id/amzn1.account.AEOJOM2G45WJCGXCRXXBFJIRJXUQ&openid.identity=https://www.amazon.com/ap/id/amzn1.account.AEOJOM2G45WJCGXCRXXBFJIRJXUQ&openid.mode=id_res&openid.ns=http://specs.openid.net/auth/2.0&openid.op_endpoint=https://www.amazon.com/ap/signin&openid.response_nonce=2020-06-24T13:34:12Z3941085863088886186&openid.return_to=https://alexa.amazon.com/&openid.signed=assoc_handle,claimed_id,identity,mode,ns,op_endpoint,response_nonce,return_to,ns.pape,pape.auth_policies,pape.auth_time,captcha_verified,signed&openid.ns.pape=http://specs.openid.net/extensions/pape/1.0&openid.pape.auth_policies=http://schemas.openid.net/pape/policies/2007/06/none&openid.pape.auth_time=2020-06-24T13:34:11Z&openid.sig=eZ/ElVkuzXVH/KxgHfURt0kwihWlD/8bHlf0ogq86kI%3D&serial=&captcha_verified=1&\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.com:443/spa/index.html returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html', 'Content-Length': '6864', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Wed, 24 Jun 2020 13:34:12 GMT', 'x-amzn-RequestId': '0f603370-f12a-4eda-b35a-6b7a38b70c03', 'X-XSS-Protection': '1; mode=block', 'Content-Encoding': 'gzip', 'X-Frame-Options': 'DENY', 'Content-Security-Policy': \"script-src  'self'  'unsafe-inline'  'unsafe-eval'  https://*.amazon.com https://*.amazon.com https://static.cdn-ec.viddler.com https://c2c-eu.amazon.com https://c2c-fe.amazon.com https://completion.amazon.com https://completion.amazon.co.uk https://completion.amazon.co.jp; connect-src  'self'  wss://*.amazon.com wss://*.amazon.com:443 wss://*.amazon.com wss://*.amazon.co.uk wss://*.amazon.de wss://*.amazon.in wss://*.amazon.fr wss://*.amazon.it wss://*.amazon.nl wss://*.amazon.ca wss://*.amazon.com.mx wss://*.amazon.com.br wss://*.amazon.cn wss://*.amazon.co.jp wss://*.amazon.com.au wss://*.amazon.es  https://*.amazon.com https://*.amazon.com https://cognito-identity.us-east-1.amazonaws.com https://mobileanalytics.us-east-1.amazonaws.com https://s3.amazonaws.com https://10.201.126.241:8080 https://192.168.11.1:8080 http://10.201.126.241:8080 http://192.168.11.1:8080; report-uri /api/contentSecurityPolicy/violations\", 'Set-Cookie': 'csrf=-805186995; expires=Mon, 24-Jun-2030 13:34:12 GMT; Domain=.amazon.com; Path=/', 'Cache-Control': 'no-cache', 'Expires': 'Wed, 24 Jun 2020 13:34:12 UTC', 'X-Content-Type-Options': 'nosniff', 'Frame-Options': 'DENY', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'WFH3S6YARQH01C2WPGEN', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 826f3843a9f6b2040e54551f0def9c7b.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'IAD79-C2', 'X-Amz-Cf-Id': 'Se8846FCKN0E10lQTKgZABwKyUMuReGKIiucfpUHG8CUOchsbgw87Q==')>\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Processing https://alexa.amazon.com:443/spa/index.html\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Captcha/2FA not requested; confirming login.\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.com/api/bootstrap returned 200:OK with response <CIMultiDictProxy('Content-Type': 'application/json', 'Content-Length': '133', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Wed, 24 Jun 2020 13:34:12 GMT', 'x-amzn-RequestId': '53b14078-6075-4a8a-aeda-69ada74ccb8f', 'Content-Encoding': 'gzip', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'W5TSZZH6M4GWETK9AGSS', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 826f3843a9f6b2040e54551f0def9c7b.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'IAD79-C2', 'X-Amz-Cf-Id': '3UYm7Pws5gzL1JI5XBhw5oFODUSQzE9kmR4R4iP5JzlY9XTyfLhANw==')>\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Not logged in due to email mismatch\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Login failed; check credentials\r\n2020-06-24 09:34:12 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x6b5ec250>,), {'data': {'password': 'REDACTED 8 CHARS', 'captcha': 'dng576'}}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n()\r\n2020-06-24 09:34:12 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: \r\n2020-06-24 09:34:12 DEBUG (MainThread) [custom_components.alexa_media.config_flow] show_form user None {'base': 'unknown_error'} None\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/803", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/803/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/803/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/803/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/803", "id": 644371050, "node_id": "MDU6SXNzdWU2NDQzNzEwNTA=", "number": 803, "title": "Change password of Amazon account", "user": {"login": "jfgisbert", "id": 59794025, "node_id": "MDQ6VXNlcjU5Nzk0MDI1", "avatar_url": "https://avatars2.githubusercontent.com/u/59794025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfgisbert", "html_url": "https://github.com/jfgisbert", "followers_url": "https://api.github.com/users/jfgisbert/followers", "following_url": "https://api.github.com/users/jfgisbert/following{/other_user}", "gists_url": "https://api.github.com/users/jfgisbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfgisbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfgisbert/subscriptions", "organizations_url": "https://api.github.com/users/jfgisbert/orgs", "repos_url": "https://api.github.com/users/jfgisbert/repos", "events_url": "https://api.github.com/users/jfgisbert/events{/privacy}", "received_events_url": "https://api.github.com/users/jfgisbert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-24T07:00:52Z", "updated_at": "2020-06-24T08:45:07Z", "closed_at": "2020-06-24T08:45:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi There,\r\n\r\nI just updated the password of my Amazon account, and now Alexa Media Player is not working anymore. I can see a notification in HASSIO, but it does not let me introduce the new password, there is no text box. How can I update the password without reinstalling the integration?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/800", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/800/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/800/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/800/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/800", "id": 643460959, "node_id": "MDU6SXNzdWU2NDM0NjA5NTk=", "number": 800, "title": "Manifest.json needs the requirements version bumped to 1.10.4", "user": {"login": "ransom3910", "id": 25153829, "node_id": "MDQ6VXNlcjI1MTUzODI5", "avatar_url": "https://avatars2.githubusercontent.com/u/25153829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ransom3910", "html_url": "https://github.com/ransom3910", "followers_url": "https://api.github.com/users/ransom3910/followers", "following_url": "https://api.github.com/users/ransom3910/following{/other_user}", "gists_url": "https://api.github.com/users/ransom3910/gists{/gist_id}", "starred_url": "https://api.github.com/users/ransom3910/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ransom3910/subscriptions", "organizations_url": "https://api.github.com/users/ransom3910/orgs", "repos_url": "https://api.github.com/users/ransom3910/repos", "events_url": "https://api.github.com/users/ransom3910/events{/privacy}", "received_events_url": "https://api.github.com/users/ransom3910/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-23T01:29:43Z", "updated_at": "2020-06-24T03:40:53Z", "closed_at": "2020-06-23T03:50:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the manifest.json file requirements is set to \"requirements\": [\"alexapy==1.10.3\"].\r\n\r\nThe current version on pypi is 1.10.4. The .3 version seems to be missing the aiohttp folder.   I found I was able to pip install alexapy to get it to work but as soon as you restart the services or click on interrogations it reads the manifest file and tries to install version .3 which breaks it.\r\n\r\nI updated the version to 10.1.4 in the manifest files and all is working great now.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/799", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/799/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/799/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/799/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/799", "id": 642748716, "node_id": "MDU6SXNzdWU2NDI3NDg3MTY=", "number": 799, "title": "ModuleNotFoundError: No module named 'alexapy.aiohttp'", "user": {"login": "ransom3910", "id": 25153829, "node_id": "MDQ6VXNlcjI1MTUzODI5", "avatar_url": "https://avatars2.githubusercontent.com/u/25153829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ransom3910", "html_url": "https://github.com/ransom3910", "followers_url": "https://api.github.com/users/ransom3910/followers", "following_url": "https://api.github.com/users/ransom3910/following{/other_user}", "gists_url": "https://api.github.com/users/ransom3910/gists{/gist_id}", "starred_url": "https://api.github.com/users/ransom3910/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ransom3910/subscriptions", "organizations_url": "https://api.github.com/users/ransom3910/orgs", "repos_url": "https://api.github.com/users/ransom3910/repos", "events_url": "https://api.github.com/users/ransom3910/events{/privacy}", "received_events_url": "https://api.github.com/users/ransom3910/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-22T04:48:40Z", "updated_at": "2020-06-22T05:01:56Z", "closed_at": "2020-06-22T05:01:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to install the Alexa media component I am getting an error in the log \"ModuleNotFoundError: No module named 'alexapy.aiohttp'\r\n\r\nI then went to the CLI and just ran python.  I did an import of alexapy and I get this error just from trying to import the module.\r\n\r\nBefore this I also ran pip3 install alexapy.  It said all requirements are already met.\r\n\r\nFull Traceback\r\n>>> >>> import alexapy\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/srv/homeassistant/lib/python3.8/site-packages/alexapy/__init__.py\", line 11, in <module>\r\n    from .alexaapi import AlexaAPI\r\n  File \"/srv/homeassistant/lib/python3.8/site-packages/alexapy/alexaapi.py\", line 16, in <module>\r\n    from alexapy.aiohttp import ClientConnectionError, ClientResponse\r\nModuleNotFoundError: No module named 'alexapy.aiohttp'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/797", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/797/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/797/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/797/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/797", "id": 642643739, "node_id": "MDU6SXNzdWU2NDI2NDM3Mzk=", "number": 797, "title": "HA 0.111.4 - An exception of type CancelledError occurred", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars3.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-21T21:23:22Z", "updated_at": "2020-06-21T23:13:24Z", "closed_at": "2020-06-21T23:13:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nError logged and plugin not working\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart HA\r\n2. Check log\r\n\r\n**Expected behavior**\r\nNo error and plugin working as usual\r\n\r\n**System details**\r\n - Home-assistant (version): 0.111.4\r\n - Hassio (Yes/No):  No\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.6\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2020-06-21 23:18:53 WARNING (MainThread) [alexapy.helpers] alexaapi.get_devices((<alexapy.alexalogin.AlexaLogin object at 0x7f68e2676150>,), {}): Timeout error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments:\r\n()\r\n2020-06-21 23:18:53 WARNING (MainThread) [alexapy.helpers] alexaapi.get_bluetooth((<alexapy.alexalogin.AlexaLogin object at 0x7f68e2676150>,), {}): Timeout error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments:\r\n()\r\n2020-06-21 23:18:53 WARNING (MainThread) [alexapy.helpers] alexaapi.get_device_preferences((<alexapy.alexalogin.AlexaLogin object at 0x7f68e2676150>,), {}): Timeout error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments:\r\n()\r\n2020-06-21 23:18:53 WARNING (MainThread) [alexapy.helpers] alexaapi.get_dnd_state((<alexapy.alexalogin.AlexaLogin object at 0x7f68e2676150>,), {}): Timeout error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments:\r\n()\r\n2020-06-21 23:18:53 WARNING (MainThread) [alexapy.helpers] alexaapi.get_notifications((<alexapy.alexalogin.AlexaLogin object at 0x7f68e2676150>,), {}): Timeout error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments:\r\n()\r\n2020-06-21 23:18:53 WARNING (MainThread) [alexapy.helpers] alexaapi.get_authentication((<alexapy.alexalogin.AlexaLogin object at 0x7f68e2676150>,), {}): Timeout error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments:\r\n()\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/796", "id": 642628105, "node_id": "MDU6SXNzdWU2NDI2MjgxMDU=", "number": 796, "title": "An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments: ('Session is closed',)", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-21T19:42:34Z", "updated_at": "2020-06-24T04:30:30Z", "closed_at": "2020-06-24T04:30:30Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter a relogin attempt, the component reconnects succesfully and performs static gets without error.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Relogin with configurator after session expires.\r\n2. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nSession should automatically be refreshed for all commands.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version):  111.4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.6\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.4\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2020-06-21 12:36:29 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0xa8cddbd0>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\n('Session is closed',)\r\n2020-06-21 12:36:29 ERROR (MainThread) [homeassistant.util.logging] Exception in _handle_event when dispatching 'alexa_media_a******e@g*******m': ({'player_state': {'destinationUserId': 'XXX', 'dopplerId': {'deviceType': 'AB72C64C86AW2', 'deviceSerialNumber': 'XXX'}, 'audioPlayerState': 'PLAYING', 'quality': None, 'error': False, 'errorMessage': None, 'mediaReferenceId': '78e56ac3-4ab4-4c85-86b4-3d9bb3f5ae60:6'}},)\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 369, in _handle_event\r\n    await self.async_update()\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 802, in async_update\r\n    device, no_throttle=True\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 545, in refresh\r\n    session = await self.alexa_api.get_state()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/helpers.py\", line 69, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 761, in get_state\r\n    + \"&screenWidth=2560\"\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 122, in _get_request\r\n    return await self._request(\"get\", uri, data)\r\n  File \"/usr/local/lib/python3.7/site-packages/backoff/_async.py\", line 133, in retry\r\n    ret = await target(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 93, in _request\r\n    ssl=self._login._ssl,\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/aiohttp/client.py\", line 377, in _request\r\n    raise RuntimeError(\"Session is closed\")\r\nRuntimeError: Session is closed\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/795", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/795/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/795/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/795/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/795", "id": 642518161, "node_id": "MDU6SXNzdWU2NDI1MTgxNjE=", "number": 795, "title": "Question: Is Alexa Media Player emulating Google Chrome Browser?", "user": {"login": "monotonus", "id": 51734505, "node_id": "MDQ6VXNlcjUxNzM0NTA1", "avatar_url": "https://avatars1.githubusercontent.com/u/51734505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monotonus", "html_url": "https://github.com/monotonus", "followers_url": "https://api.github.com/users/monotonus/followers", "following_url": "https://api.github.com/users/monotonus/following{/other_user}", "gists_url": "https://api.github.com/users/monotonus/gists{/gist_id}", "starred_url": "https://api.github.com/users/monotonus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monotonus/subscriptions", "organizations_url": "https://api.github.com/users/monotonus/orgs", "repos_url": "https://api.github.com/users/monotonus/repos", "events_url": "https://api.github.com/users/monotonus/events{/privacy}", "received_events_url": "https://api.github.com/users/monotonus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-21T08:11:46Z", "updated_at": "2020-06-21T08:45:01Z", "closed_at": "2020-06-21T08:45:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Today I received a account warning from Amazon which has more or less the same timestamp as some home assistant log entries belonging to alexa media player.\r\n\r\nDate 21. Juni 2020 09:07\r\nDevice Google Chrome for Windows (Desktop)\r\nLocation Hesse/Germany\r\n\r\nThis is my location indeed.\r\n\r\nIn the HA log I see:\r\n\r\nProtokolldetails ( WARNING )\r\nLogger: alexapy.alexawebsocket\r\nSource: custom_components/alexa_media/__init__.py:587\r\nFirst occurred: 9:07:48 (1 occurrences)\r\nLast logged: 9:07:48\r\n\r\nWebsocket is missing ubid-main and ubid-acbde cookies; please report this if anything isn't working.\r\n\r\nLogger: aiohttp.websocket\r\nSource: custom_components/alexa_media/__init__.py:590\r\nFirst occurred: 9:07:49 (4 occurrences)\r\nLast logged: 9:07:49\r\n\r\nwebsocket connection is closing.\r\n\r\nAnd further I see problems with updating my devices:\r\n\r\nLogger: alexapy.helpers\r\nSource: custom_components/alexa_media/media_player.py:545\r\nFirst occurred: 9:07:48 (78 occurrences)\r\nLast logged: 10:04:10\r\n\r\nalexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f03018d0f90>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments: ('Expecting value: line 1 column 1 (char 0)',)\r\nalexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f0302bb9f50>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments: ('Session is closed',)\r\nalexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f03018d0f90>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments: ('Session is closed',)\r\nalexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f03018c8d50>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments: ('Session is closed',)\r\nalexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0x7f03018c8d10>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments: ('Session is closed',)\r\n\r\nI haven't blocked the login yet or changed my password. I wanted to ensure if it is really the Google chrome desktop browser which I'm not using by myself.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/794", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/794/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/794/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/794/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/794", "id": 642404361, "node_id": "MDU6SXNzdWU2NDI0MDQzNjE=", "number": 794, "title": "Unclosed client session & Unclosed connector", "user": {"login": "stvnmbr1", "id": 9010189, "node_id": "MDQ6VXNlcjkwMTAxODk=", "avatar_url": "https://avatars1.githubusercontent.com/u/9010189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stvnmbr1", "html_url": "https://github.com/stvnmbr1", "followers_url": "https://api.github.com/users/stvnmbr1/followers", "following_url": "https://api.github.com/users/stvnmbr1/following{/other_user}", "gists_url": "https://api.github.com/users/stvnmbr1/gists{/gist_id}", "starred_url": "https://api.github.com/users/stvnmbr1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stvnmbr1/subscriptions", "organizations_url": "https://api.github.com/users/stvnmbr1/orgs", "repos_url": "https://api.github.com/users/stvnmbr1/repos", "events_url": "https://api.github.com/users/stvnmbr1/events{/privacy}", "received_events_url": "https://api.github.com/users/stvnmbr1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-20T16:20:24Z", "updated_at": "2020-06-22T19:10:58Z", "closed_at": "2020-06-22T19:10:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Add-on just stopped working\r\nHome Assistant 0.111.4 supervised on debian host\r\naddon 2.8.6\r\n\r\ntried deleting from HACS & integrations, reboot, delete pickle & file in custom_components root, reboot, reinstall through HACS, login\r\n\r\n Unknown error, please report log info \r\n\r\n    Error doing job: Unclosed client session\r\n    Error doing job: Unclosed connecton\r\n\r\n\r\nalso ended all open sessions through amazon.com and retried..", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/793", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/793/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/793/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/793/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/793", "id": 642325870, "node_id": "MDU6SXNzdWU2NDIzMjU4NzA=", "number": 793, "title": "List of Compatible sounds - Questions - Potential sounds / available sounds", "user": {"login": "RoldyBuffalo", "id": 58420778, "node_id": "MDQ6VXNlcjU4NDIwNzc4", "avatar_url": "https://avatars2.githubusercontent.com/u/58420778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RoldyBuffalo", "html_url": "https://github.com/RoldyBuffalo", "followers_url": "https://api.github.com/users/RoldyBuffalo/followers", "following_url": "https://api.github.com/users/RoldyBuffalo/following{/other_user}", "gists_url": "https://api.github.com/users/RoldyBuffalo/gists{/gist_id}", "starred_url": "https://api.github.com/users/RoldyBuffalo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RoldyBuffalo/subscriptions", "organizations_url": "https://api.github.com/users/RoldyBuffalo/orgs", "repos_url": "https://api.github.com/users/RoldyBuffalo/repos", "events_url": "https://api.github.com/users/RoldyBuffalo/events{/privacy}", "received_events_url": "https://api.github.com/users/RoldyBuffalo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-20T07:13:16Z", "updated_at": "2020-06-20T09:25:04Z", "closed_at": "2020-06-20T09:10:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I currently use my alexa's for several automation's involving sounds that are played to signify certain events in my house. I love that alexa has 100's of sounds to choose from in it's api, but I was curious as to why the majority of the sounds that are in the list on amazon's website (\"potentially working sounds\") is so much different then the sounds available inside home assistant automation's with this integration.\r\n\r\nI'd love to be able to run through all the available sounds to pick out the perfect one to creep out guests, or notify when it's time to give my cat her meds... and so on and so forth. \r\n\r\nSorry if this seems brash, I just was curious as to why the available sounds seem to far undershadow the potentially available ones. \r\n\r\nI'm willing to bet if I where to implement my own alexa media player api integration this wouldn't be an issue? or maybe it's just how home assisstant / the integration talks to alexa that is beansing it up?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/792", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/792/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/792/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/792/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/792", "id": 642270925, "node_id": "MDU6SXNzdWU2NDIyNzA5MjU=", "number": 792, "title": "Alexa Notify Text to Speech error", "user": {"login": "tux43", "id": 53364421, "node_id": "MDQ6VXNlcjUzMzY0NDIx", "avatar_url": "https://avatars2.githubusercontent.com/u/53364421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tux43", "html_url": "https://github.com/tux43", "followers_url": "https://api.github.com/users/tux43/followers", "following_url": "https://api.github.com/users/tux43/following{/other_user}", "gists_url": "https://api.github.com/users/tux43/gists{/gist_id}", "starred_url": "https://api.github.com/users/tux43/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tux43/subscriptions", "organizations_url": "https://api.github.com/users/tux43/orgs", "repos_url": "https://api.github.com/users/tux43/repos", "events_url": "https://api.github.com/users/tux43/events{/privacy}", "received_events_url": "https://api.github.com/users/tux43/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-20T00:15:39Z", "updated_at": "2020-06-20T03:25:03Z", "closed_at": "2020-06-20T03:25:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI\u2019ve installed https://github.com/custom-components/alexa_media_player/\r\n\r\nI\u2019m trying to do TTS and receive the error below.\r\n\r\n<img width=\"607\" alt=\"Screen Shot 2020-06-20 at 9 34 24 am\" src=\"https://user-images.githubusercontent.com/53364421/85186920-f5857400-b2da-11ea-844c-af3f942699eb.png\">\r\n\r\n\r\n`2020-06-20 09:36:22 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.240165373216230] 'NoneType' object is not subscriptable\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1260, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1295, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/notify/__init__.py\", line 119, in async_notify_message\r\n    await notify_service.async_send_message(**kwargs)\r\n  File \"/config/custom_components/alexa_media/notify.py\", line 189, in async_send_message\r\n    if data[\"type\"] == \"tts\":\r\nTypeError: 'NoneType' object is not subscriptable`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/791", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/791/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/791/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/791", "id": 642267488, "node_id": "MDU6SXNzdWU2NDIyNjc0ODg=", "number": 791, "title": "help: triggering a skill", "user": {"login": "jactora", "id": 64601448, "node_id": "MDQ6VXNlcjY0NjAxNDQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/64601448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jactora", "html_url": "https://github.com/jactora", "followers_url": "https://api.github.com/users/jactora/followers", "following_url": "https://api.github.com/users/jactora/following{/other_user}", "gists_url": "https://api.github.com/users/jactora/gists{/gist_id}", "starred_url": "https://api.github.com/users/jactora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jactora/subscriptions", "organizations_url": "https://api.github.com/users/jactora/orgs", "repos_url": "https://api.github.com/users/jactora/repos", "events_url": "https://api.github.com/users/jactora/events{/privacy}", "received_events_url": "https://api.github.com/users/jactora/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-19T23:58:12Z", "updated_at": "2020-06-27T23:52:04Z", "closed_at": "2020-06-27T23:52:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "i use this for sending tts message from HA to Alexa.\r\nbut i want to trigger a skill.\r\nskill is \r\nhttps://alexa.amazon.co.uk/spa/index.html#skills/dp/B07H3LFKW1/?ref=skill_dsk_skb_ys\r\nis skill id - B07H3LFKW1 ?\r\ni want this skill to be triggered when HA meets a condition.\r\neg. when xiaomi room temp is 15 deg, i want my climote heating to be switched on.\r\ni usually tell alexa - Alexa ask climote to turn on the heating\r\nhow can i do this from home assistant using this alexa media player?\r\ncan i send a message to alexa to trigger a skill?\r\ni saw this link but still dont know how to send the exact command to switch on heating\r\nhttps://github.com/custom-components/alexa_media_player/wiki#triggering-a-skill-versions--270", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/790", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/790/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/790/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/790/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/790", "id": 642255371, "node_id": "MDU6SXNzdWU2NDIyNTUzNzE=", "number": 790, "title": "No captcha", "user": {"login": "danmed", "id": 3878490, "node_id": "MDQ6VXNlcjM4Nzg0OTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3878490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danmed", "html_url": "https://github.com/danmed", "followers_url": "https://api.github.com/users/danmed/followers", "following_url": "https://api.github.com/users/danmed/following{/other_user}", "gists_url": "https://api.github.com/users/danmed/gists{/gist_id}", "starred_url": "https://api.github.com/users/danmed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danmed/subscriptions", "organizations_url": "https://api.github.com/users/danmed/orgs", "repos_url": "https://api.github.com/users/danmed/repos", "events_url": "https://api.github.com/users/danmed/events{/privacy}", "received_events_url": "https://api.github.com/users/danmed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-19T23:04:23Z", "updated_at": "2020-06-20T03:22:01Z", "closed_at": "2020-06-20T03:22:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI've got a notification to \"Click button to configure Alexa Media Player - Captcha -\" however i don't see a captch to enter..\r\n\r\n![image](https://user-images.githubusercontent.com/3878490/85184887-80d61980-b289-11ea-852e-503be260e8c5.png)\r\n\r\n\r\n**To Reproduce**\r\nBe running HA 0.111.4 and latest integration.\r\n\r\n**Expected behavior**\r\nCaptcha should be available to enter\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version):  0.111.4\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/788", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/788/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/788/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/788/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/788", "id": 639482518, "node_id": "MDU6SXNzdWU2Mzk0ODI1MTg=", "number": 788, "title": "Can't integrate Alexa Media Player", "user": {"login": "Gdii", "id": 17603858, "node_id": "MDQ6VXNlcjE3NjAzODU4", "avatar_url": "https://avatars1.githubusercontent.com/u/17603858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gdii", "html_url": "https://github.com/Gdii", "followers_url": "https://api.github.com/users/Gdii/followers", "following_url": "https://api.github.com/users/Gdii/following{/other_user}", "gists_url": "https://api.github.com/users/Gdii/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gdii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gdii/subscriptions", "organizations_url": "https://api.github.com/users/Gdii/orgs", "repos_url": "https://api.github.com/users/Gdii/repos", "events_url": "https://api.github.com/users/Gdii/events{/privacy}", "received_events_url": "https://api.github.com/users/Gdii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-06-16T08:39:38Z", "updated_at": "2020-06-24T05:21:35Z", "closed_at": "2020-06-24T05:21:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nHello,\r\nfor some days I have been unable to integrate Alexa media palyer into my Home assistant, when I try to enter my credentials, (which I am sure of, and that they work perfectly on the amazon.it website), does not log in, and writes me in red \"Unknown error, please report log info \", please, help !!\r\n\r\nmy HA is\r\nHome Assistant\r\n0.111.2\r\nthe log:\r\nUnknown error:\r\n10:24:35 - Alexa Media Player (WARNING)\r\nalexalogin.login ((<alexapy.alexalogin.AlexaLogin object at 0x7f8e639190>,), {'data': {'email': 'XXXXXXX@gmail.com', 'password': 'XXXXXXXXX', 'url': 'amazon .it ',' debug ': False,' scan_interval ': 60,' include_devices': '', 'exclude_devices':' '}}): An error occured accessing AlexaAPI: An exception of type InvalidURL occurred. Arguments: (URL (''),)\r\n10:24:35 - custom_components / alexa_media / config_flow.py (ERROR)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/787", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/787/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/787/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/787/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/787", "id": 639387044, "node_id": "MDU6SXNzdWU2MzkzODcwNDQ=", "number": 787, "title": "Integration error: No module named 'alexapy.aiohttp'", "user": {"login": "somar05", "id": 38601295, "node_id": "MDQ6VXNlcjM4NjAxMjk1", "avatar_url": "https://avatars1.githubusercontent.com/u/38601295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somar05", "html_url": "https://github.com/somar05", "followers_url": "https://api.github.com/users/somar05/followers", "following_url": "https://api.github.com/users/somar05/following{/other_user}", "gists_url": "https://api.github.com/users/somar05/gists{/gist_id}", "starred_url": "https://api.github.com/users/somar05/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somar05/subscriptions", "organizations_url": "https://api.github.com/users/somar05/orgs", "repos_url": "https://api.github.com/users/somar05/repos", "events_url": "https://api.github.com/users/somar05/events{/privacy}", "received_events_url": "https://api.github.com/users/somar05/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-16T05:44:09Z", "updated_at": "2020-06-17T16:41:58Z", "closed_at": "2020-06-16T05:49:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nError received when launch Alexa Media through Integration page (release v2.8.5)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Clean install throught HACS\r\n2. Reboot 2 twice to be sure\r\n3. Install integration: popup windows close and never show dialog windows to install as before\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant Core 0.111.1 (HassOS 4.10)\r\n - Hassio (Yes/No): yes \r\n - alexa_media  (version from `const.py` or HA startup): v.2.8.5\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\n```\r\nLogger: homeassistant.config_entries\r\nSource: config_entries.py:526\r\nFirst occurred: 7:34:26 (1 occurrences)\r\nLast logged: 7:34:26\r\nError occurred loading configuration flow for integration alexa_media: No module named 'alexapy.aiohttp'\r\n```\r\n\r\n**Additional context**\r\nAmazon domain: .es.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/783", "id": 639318265, "node_id": "MDU6SXNzdWU2MzkzMTgyNjU=", "number": 783, "title": "[Security Issue] Log file displaying password on error", "user": {"login": "rkaramandi", "id": 11652239, "node_id": "MDQ6VXNlcjExNjUyMjM5", "avatar_url": "https://avatars0.githubusercontent.com/u/11652239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rkaramandi", "html_url": "https://github.com/rkaramandi", "followers_url": "https://api.github.com/users/rkaramandi/followers", "following_url": "https://api.github.com/users/rkaramandi/following{/other_user}", "gists_url": "https://api.github.com/users/rkaramandi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rkaramandi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rkaramandi/subscriptions", "organizations_url": "https://api.github.com/users/rkaramandi/orgs", "repos_url": "https://api.github.com/users/rkaramandi/repos", "events_url": "https://api.github.com/users/rkaramandi/events{/privacy}", "received_events_url": "https://api.github.com/users/rkaramandi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-16T02:18:40Z", "updated_at": "2020-06-24T05:21:35Z", "closed_at": "2020-06-24T05:21:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "For some reason my install was broken and while trying to reinstall it I ran into some issues and decided to check the logs. \r\n\r\nThis was while going through the configuration flow in the integrations page\r\n\r\nI noticed the following:\r\n```\r\n2020-06-15 22:12:34 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f1fc2a86c50>,), {'data': {'url': 'amazon.com', 'debug': False, 'scan_interval': 60, 'email': 'fake@email.com', 'password': 'fakepassword', 'exclude_devices': '', 'include_devices': ''}}): An error occurred accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n()\r\n```\r\nSpecifically, the password is in plaintext. This shouldn't be in the logs - maybe indicate if it was entered or blank, but directly including it in the log can be dangerous.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/782", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/782/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/782/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/782/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/782", "id": 638936618, "node_id": "MDU6SXNzdWU2Mzg5MzY2MTg=", "number": 782, "title": "Configurator Call failed", "user": {"login": "ykiv63", "id": 47497632, "node_id": "MDQ6VXNlcjQ3NDk3NjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/47497632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ykiv63", "html_url": "https://github.com/ykiv63", "followers_url": "https://api.github.com/users/ykiv63/followers", "following_url": "https://api.github.com/users/ykiv63/following{/other_user}", "gists_url": "https://api.github.com/users/ykiv63/gists{/gist_id}", "starred_url": "https://api.github.com/users/ykiv63/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ykiv63/subscriptions", "organizations_url": "https://api.github.com/users/ykiv63/orgs", "repos_url": "https://api.github.com/users/ykiv63/repos", "events_url": "https://api.github.com/users/ykiv63/events{/privacy}", "received_events_url": "https://api.github.com/users/ykiv63/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-15T15:18:20Z", "updated_at": "2020-06-15T16:59:12Z", "closed_at": "2020-06-15T16:59:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nConfigurator Alexia Media Player Call failed\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'Notify' (new request to Alexia Media Player begin)\r\n2. Click on 'Configure'\r\n3. \"Call Failed\"\r\n\r\n**Expected behavior**\r\nA new request for amazon Login credentials\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0111.2\r\n - Hassio (Yes): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.4\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nUpdated Hassio to 111.2\r\nHe asks me to confirm Alexa media player\r\nPress confirmation button\r\nResult:\r\nCall failed\r\nAlexa installed by hacs\r\nUp to 111.1 fully functional\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/781", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/781/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/781/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/781/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/781", "id": 638368897, "node_id": "MDU6SXNzdWU2MzgzNjg4OTc=", "number": 781, "title": "HA upgrade causes Notification without dismiss and without Captcha image (error)", "user": {"login": "scacace", "id": 55767079, "node_id": "MDQ6VXNlcjU1NzY3MDc5", "avatar_url": "https://avatars1.githubusercontent.com/u/55767079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scacace", "html_url": "https://github.com/scacace", "followers_url": "https://api.github.com/users/scacace/followers", "following_url": "https://api.github.com/users/scacace/following{/other_user}", "gists_url": "https://api.github.com/users/scacace/gists{/gist_id}", "starred_url": "https://api.github.com/users/scacace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scacace/subscriptions", "organizations_url": "https://api.github.com/users/scacace/orgs", "repos_url": "https://api.github.com/users/scacace/repos", "events_url": "https://api.github.com/users/scacace/events{/privacy}", "received_events_url": "https://api.github.com/users/scacace/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-14T15:01:44Z", "updated_at": "2020-06-14T18:00:36Z", "closed_at": "2020-06-14T18:00:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nNotice this in HA .111 and .110 upgrades.  Notification generated without dismiss.   Attempts to satisfy, generates an error in the Captcha image.  Does not matter browser, or HA App.   Only able to resolve is to delete the implementation and adding it again from Configuration / Integrations.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nAfter HA upgrade notification is generated.\r\n\r\n**Expected behavior**\r\nProgress to Notification completion with Captcha image\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/780", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/780/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/780/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/780/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/780", "id": 638266346, "node_id": "MDU6SXNzdWU2MzgyNjYzNDY=", "number": 780, "title": "clarification on white space after comma for listing devices", "user": {"login": "flashbacck", "id": 10257835, "node_id": "MDQ6VXNlcjEwMjU3ODM1", "avatar_url": "https://avatars1.githubusercontent.com/u/10257835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flashbacck", "html_url": "https://github.com/flashbacck", "followers_url": "https://api.github.com/users/flashbacck/followers", "following_url": "https://api.github.com/users/flashbacck/following{/other_user}", "gists_url": "https://api.github.com/users/flashbacck/gists{/gist_id}", "starred_url": "https://api.github.com/users/flashbacck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flashbacck/subscriptions", "organizations_url": "https://api.github.com/users/flashbacck/orgs", "repos_url": "https://api.github.com/users/flashbacck/repos", "events_url": "https://api.github.com/users/flashbacck/events{/privacy}", "received_events_url": "https://api.github.com/users/flashbacck/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-14T01:50:19Z", "updated_at": "2020-06-14T10:00:51Z", "closed_at": "2020-06-14T10:00:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is very minor, but confused me for a good 30 minutes. During the setup of the integration, where you can list devices you would like included or excluded, the white space after a comma is also included in the device name. I don't think any behavior needs to be changed since white spaces can be included in a device name, but a note about white spaces where it mentions separating the list by commas would be useful for future users.\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/779", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/779/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/779/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/779/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/779", "id": 638184636, "node_id": "MDU6SXNzdWU2MzgxODQ2MzY=", "number": 779, "title": "TypeError: '>' not supported between instances of 'NoneType' and 'int'", "user": {"login": "JoeTN", "id": 44653208, "node_id": "MDQ6VXNlcjQ0NjUzMjA4", "avatar_url": "https://avatars2.githubusercontent.com/u/44653208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoeTN", "html_url": "https://github.com/JoeTN", "followers_url": "https://api.github.com/users/JoeTN/followers", "following_url": "https://api.github.com/users/JoeTN/following{/other_user}", "gists_url": "https://api.github.com/users/JoeTN/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoeTN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoeTN/subscriptions", "organizations_url": "https://api.github.com/users/JoeTN/orgs", "repos_url": "https://api.github.com/users/JoeTN/repos", "events_url": "https://api.github.com/users/JoeTN/events{/privacy}", "received_events_url": "https://api.github.com/users/JoeTN/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-13T15:50:29Z", "updated_at": "2020-06-16T04:28:03Z", "closed_at": "2020-06-16T04:28:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm getting the \"TypeError: '>' not supported between instances of 'NoneType' and 'int'\"-error when using door_bell_alexa-script from https://github.com/custom-components/alexa_media_player/wiki - mine looks like this: https://pastebin.com/3k2mvqpe\r\n\r\n**To Reproduce**\r\nRun the script above, or something similar.\r\n\r\n**Expected behavior**\r\nI expected no errors.\r\n\r\n**System details**\r\nHome-assistant (version): Core-edition, 0.111.1\r\nHassio (Yes/No): No\r\nalexapy after an update. This looks like a HA bug). No\r\nalexa_media (version from const.py or HA startup): 2.8.4\r\nalexapy (version from pip show alexapy or HA startup): 1.10.2\r\n\r\n**Logs**\r\n```\r\n2020-06-13 17:34:28 ERROR (MainThread) [homeassistant.core] Error executing service: <ServiceCall script.door_bell_alexa (c:773fa0abeac042398c961c124b962854)>                                                                                                                                                                                                                             \r\nTraceback (most recent call last):                                                                                                                                                                                                                                                                                                                                                         \r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1275, in catch_exceptions                                                                                                                                                                                                                                                                                                      \r\n    await coro_or_task                                                                                                                                                                                                                                                                                                                                                                     \r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1294, in _execute_service                                                                                                                                                                                                                                                                                                      \r\n    await handler.func(service_call)                                                                                                                                                                                                                                                                                                                                                       \r\n  File \"/usr/src/homeassistant/homeassistant/components/script/__init__.py\", line 207, in service_handler                                                                                                                                                                                                                                                                                  \r\n    await script.async_turn_on(variables=service.data, context=service.context)                                                                                                                                                                                                                                                                                                            \r\n  File \"/usr/src/homeassistant/homeassistant/components/script/__init__.py\", line 284, in async_turn_on                                                                                                                                                                                                                                                                                    \r\n    await self.script.async_run(kwargs.get(ATTR_VARIABLES), context)                                                                                                                                                                                                                                                                                                                       \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 831, in async_run                                                                                                                                                                                                                                                                                                    \r\n    await run.async_run()                                                                                                                                                                                                                                                                                                                                                                  \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 555, in async_run                                                                                                                                                                                                                                                                                                    \r\n    await self._async_run()                                                                                                                                                                                                                                                                                                                                                                \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 572, in _async_run                                                                                                                                                                                                                                                                                                   \r\n    await self._async_step(log_exceptions=not propagate_exceptions)                                                                                                                                                                                                                                                                                                                        \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 153, in _async_step                                                                                                                                                                                                                                                                                                  \r\n    self, f\"_async_{cv.determine_script_action(self._action)}_step\"                                                                                                                                                                                                                                                                                                                        \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 656, in _async_call_service_step                                                                                                                                                                                                                                                                                     \r\n    *self._prep_call_service_step(), blocking=True, context=self._context                                                                                                                                                                                                                                                                                                                  \r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1259, in async_call                                                                                                                                                                                                                                                                                                            \r\n    task.result()                                                                                                                                                                                                                                                                                                                                                                          \r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1294, in _execute_service                                                                                                                                                                                                                                                                                                      \r\n    await handler.func(service_call)                                                                                                                                                                                                                                                                                                                                                       \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 209, in handle_service                                                                                                                                                                                                                                                                                     \r\n    self._platforms.values(), func, call, required_features                                                                                                                                                                                                                                                                                                                                \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/service.py\", line 454, in entity_service_call                                                                                                                                                                                                                                                                                         \r\n    future.result()  # pop exception if have                                                                                                                                                                                                                                                                                                                                               \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 597, in async_request_call                                                                                                                                                                                                                                                                                           \r\n    await coro                                                                                                                                                                                                                                                                                                                                                                             \r\n  File \"/usr/src/homeassistant/homeassistant/helpers/service.py\", line 485, in _handle_entity_call                                                                                                                                                                                                                                                                                         \r\n    await result                                                                                                                                                                                                                                                                                                                                                                           \r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper                                                                                                                                                                                                                                                                                                            \r\n    result = await func(*args, **kwargs)                                                                                                                                                                                                                                                                                                                                                   \r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 1159, in async_play_media                                                                                                                                                                                                                                                                                             \r\n    **kwargs,                                                                                                                                                                                                                                                                                                                                                                              \r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/helpers.py\", line 69, in wrapper                                                                                                                                                                                                                                                                                                    \r\n    return await func(*args, **kwargs)                                                                                                                                                                                                                                                                                                                                                     \r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 434, in play_sound                                                                                                                                                                                                                                                                                               \r\n    queue_delay=queue_delay,                                                                                                                                                                                                                                                                                                                                                               \r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/helpers.py\", line 69, in wrapper                                                                                                                                                                                                                                                                                                    \r\n    return await func(*args, **kwargs)                                                                                                                                                                                                                                                                                                                                                     \r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 295, in send_sequence                                                                                                                                                                                                                                                                                            \r\n    await self.run_behavior(node_data, queue_delay=queue_delay)                                                                                                                                                                                                                                                                                                                            \r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/helpers.py\", line 69, in wrapper                                                                                                                                                                                                                                                                                                    \r\n    return await func(*args, **kwargs)                                                                                                                                                                                                                                                                                                                                                     \r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 189, in run_behavior                                                                                                                                                                                                                                                                                             \r\n    if queue_delay > 0:                                                                                                                                                                                                                                                                                                                                                                    \r\nTypeError: '>' not supported between instances of 'NoneType' and 'int'  \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/778", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/778/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/778/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/778/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/778", "id": 637767489, "node_id": "MDU6SXNzdWU2Mzc3Njc0ODk=", "number": 778, "title": "Failed to install as integration", "user": {"login": "CiquattroFPV", "id": 8178822, "node_id": "MDQ6VXNlcjgxNzg4MjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8178822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CiquattroFPV", "html_url": "https://github.com/CiquattroFPV", "followers_url": "https://api.github.com/users/CiquattroFPV/followers", "following_url": "https://api.github.com/users/CiquattroFPV/following{/other_user}", "gists_url": "https://api.github.com/users/CiquattroFPV/gists{/gist_id}", "starred_url": "https://api.github.com/users/CiquattroFPV/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CiquattroFPV/subscriptions", "organizations_url": "https://api.github.com/users/CiquattroFPV/orgs", "repos_url": "https://api.github.com/users/CiquattroFPV/repos", "events_url": "https://api.github.com/users/CiquattroFPV/events{/privacy}", "received_events_url": "https://api.github.com/users/CiquattroFPV/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-12T13:54:12Z", "updated_at": "2020-06-12T15:54:58Z", "closed_at": "2020-06-12T15:54:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'settings'\r\n2. Click on 'Integration'\r\n3. Find Alexa Integration click on install\r\n4. Compile alle required data username password etc.. \r\n5. HA Not able to  configure it.. On HA logs there is this logs\r\n\r\n**Expected behavior**\r\nThe installation go straight\r\n\r\n\r\n**System details**\r\n - Home-assistant (version):  lates 0.111.1\r\n - Hassio  \r\nYes\r\n - alexa_media  (version from `const.py` or HA startup): Latest\r\n - alexapy (version from `pip show alexapy` or HA startup): Lates\r\n\r\n**Logs**\r\n2020-06-12 15:50:36 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f77499110>,), {'data': {'url': 'amazon.com', 'debug': True, 'scan_interval': 60, 'email': 'xxx.xxx@gmail.com', 'password': 'xxxxxxx', 'include_devices': '', 'exclude_devices': ''}}): An error occured accessing AlexaAPI: An exception of type InvalidURL occurred. Arguments:\r\n(URL(''),)\r\n2020-06-12 15:50:36 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/777", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/777/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/777/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/777", "id": 636561813, "node_id": "MDU6SXNzdWU2MzY1NjE4MTM=", "number": 777, "title": "Captcha Broken", "user": {"login": "omayhemo", "id": 2934415, "node_id": "MDQ6VXNlcjI5MzQ0MTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2934415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omayhemo", "html_url": "https://github.com/omayhemo", "followers_url": "https://api.github.com/users/omayhemo/followers", "following_url": "https://api.github.com/users/omayhemo/following{/other_user}", "gists_url": "https://api.github.com/users/omayhemo/gists{/gist_id}", "starred_url": "https://api.github.com/users/omayhemo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omayhemo/subscriptions", "organizations_url": "https://api.github.com/users/omayhemo/orgs", "repos_url": "https://api.github.com/users/omayhemo/repos", "events_url": "https://api.github.com/users/omayhemo/events{/privacy}", "received_events_url": "https://api.github.com/users/omayhemo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-10T21:28:31Z", "updated_at": "2020-06-10T21:38:33Z", "closed_at": "2020-06-10T21:38:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCan't see the captcha\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Got Configuration Notification\r\n2. Click Configure Captcha\r\n\r\n\r\n**Expected behavior**\r\nI expected to be able to see the Captcha\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/2934415/84320247-f37f2080-ab36-11ea-82f2-c7ef15779c97.png)\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): HASSIO 0111\r\n - alexa_media : 2.8.4\r\n - alexapy: Whatever comes with HACS", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/776", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/776/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/776/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/776", "id": 636458432, "node_id": "MDU6SXNzdWU2MzY0NTg0MzI=", "number": 776, "title": "Cannot dismiss persistent notification regarding 2FA / Captcha", "user": {"login": "kmycek", "id": 5732030, "node_id": "MDQ6VXNlcjU3MzIwMzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/5732030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmycek", "html_url": "https://github.com/kmycek", "followers_url": "https://api.github.com/users/kmycek/followers", "following_url": "https://api.github.com/users/kmycek/following{/other_user}", "gists_url": "https://api.github.com/users/kmycek/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmycek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmycek/subscriptions", "organizations_url": "https://api.github.com/users/kmycek/orgs", "repos_url": "https://api.github.com/users/kmycek/repos", "events_url": "https://api.github.com/users/kmycek/events{/privacy}", "received_events_url": "https://api.github.com/users/kmycek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-10T18:27:59Z", "updated_at": "2020-06-10T18:39:59Z", "closed_at": "2020-06-10T18:39:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI noticed a persistent notification today after a reboot, asking me to type in a captcha code. The captcha is probably some of the hardest to decipher that I have seen. I must have tried 10-15 times this morning. I can tell when I get it completely wrong - I'm given a new one. If I don't get it after 3-4 tries, then I'm kinda blocked from getting any more attempts until I reboot HA. But there were a few this morning that were very straightforward and SEEMED to be accepted - but the nag is still there.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Receive the \"configurator\" notification (Click button to configure Alexa Media Player - Captcha - [my@email.com])\r\n2. Click \"configure\"\r\n3. Read the captcha received in the popup (Please enter the text for the captcha. Please hit confirm to reload image.)\r\n4. Enter the characters, hit \"confirm\"\r\n5. Notification is not dismissed \r\n\r\n**Expected behavior**\r\nResult accepted, notification dismissed.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.7\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.4\r\n - alexapy (version from `pip show alexapy` or HA startup): ???\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/775", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/775/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/775/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/775/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/775", "id": 636264322, "node_id": "MDU6SXNzdWU2MzYyNjQzMjI=", "number": 775, "title": "Alexa play media not working in everywhere group", "user": {"login": "Wibias", "id": 37517432, "node_id": "MDQ6VXNlcjM3NTE3NDMy", "avatar_url": "https://avatars0.githubusercontent.com/u/37517432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wibias", "html_url": "https://github.com/Wibias", "followers_url": "https://api.github.com/users/Wibias/followers", "following_url": "https://api.github.com/users/Wibias/following{/other_user}", "gists_url": "https://api.github.com/users/Wibias/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wibias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wibias/subscriptions", "organizations_url": "https://api.github.com/users/Wibias/orgs", "repos_url": "https://api.github.com/users/Wibias/repos", "events_url": "https://api.github.com/users/Wibias/events{/privacy}", "received_events_url": "https://api.github.com/users/Wibias/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-10T13:48:47Z", "updated_at": "2020-07-28T10:52:53Z", "closed_at": "2020-07-28T10:52:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey!\r\n\r\nSo once again playing music in the everywhere group via\r\n\r\n```\r\n{\r\n    \"media_content_type\": \"TUNEIN\",\r\n    \"media_content_id\": \"Radio Hamburg in uberall Gruppe\"\r\n}\r\n```\r\n\r\nisn't working. I'm just getting \"I am not sure\" from Alexa(Hope thats the right translation since I am using german Alexa).\r\nI am on the newest Alexa Media Player Verison and Home Assistant Version 0.110.7.\r\n\r\n![grafik](https://user-images.githubusercontent.com/37517432/84275824-d3992e00-ab31-11ea-8e69-efc0ee3695ae.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/774", "id": 636222091, "node_id": "MDU6SXNzdWU2MzYyMjIwOTE=", "number": 774, "title": "Cannot log in with amazon.es, amazon.fr and amazon.it", "user": {"login": "sinclairfr", "id": 118417, "node_id": "MDQ6VXNlcjExODQxNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/118417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinclairfr", "html_url": "https://github.com/sinclairfr", "followers_url": "https://api.github.com/users/sinclairfr/followers", "following_url": "https://api.github.com/users/sinclairfr/following{/other_user}", "gists_url": "https://api.github.com/users/sinclairfr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinclairfr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinclairfr/subscriptions", "organizations_url": "https://api.github.com/users/sinclairfr/orgs", "repos_url": "https://api.github.com/users/sinclairfr/repos", "events_url": "https://api.github.com/users/sinclairfr/events{/privacy}", "received_events_url": "https://api.github.com/users/sinclairfr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 79, "created_at": "2020-06-10T12:54:07Z", "updated_at": "2020-06-19T05:43:36Z", "closed_at": "2020-06-16T04:35:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone,\r\n\r\n**Describe the bug**\r\n\r\nI lost both tts and announce features since Hassio & Alexa Media update.\r\nAlson realized I cannot log in with a amazon.fr domain, only amazon.com\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nUpdate to the latest HA and HACS Amazon Media component\r\n\r\n**Expected behavior**\r\nNo more TTS and Announce\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/118417/84269308-5669bb00-ab29-11ea-90c2-4771d1b7bcec.png)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.7\r\n - Hassio : yes\r\n - alexa_media  v2.8.4\r\n\r\n**Logs**\r\n\r\n```\r\n2020-06-10 14:47:23 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f70cc361150>,),}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n```\r\n.\r\n**_After trying TTS :_**\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Announce targets: ['G************XTK'] entities: [<Entity Echo Dot - Study: unavailable>]\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Echo Dot - Study: unavailable>, Echo Dot - Study, G************XTK, media_player.echo_dot_study)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Converting: <Entity Echo Dot - Study: unavailable> to (serialnumbers): G090U50990350XTK\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Echo Dot  - Kitchen: unavailable>, Echo Dot  - Kitchen, G************6RR, media_player.echo_dot_kitchen)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Everywhere: unavailable>, Everywhere, d****************************483, media_player.everywhere)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Echo Dot - bedroom: unavailable>, Echo Dot - bedroom, G************W6R, media_player.echo_dot_bedroom)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Zoo: unavailable>, Zoo, 1****************************fc8, media_player.zoo)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity This Device: standby>, This Device, 5****************************126, media_player.this_device)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Announce targets: ['G************XTK'] entities: [<Entity Echo Dot - Study: unavailable>]\r\n\r\n\r\n      \r\n**Additional context**\r\nEverything worked fine for a long time before the update.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/773", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/773/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/773/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/773/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/773", "id": 634960597, "node_id": "MDU6SXNzdWU2MzQ5NjA1OTc=", "number": 773, "title": "Can't see this integration on HACS", "user": {"login": "rmarinho", "id": 1235097, "node_id": "MDQ6VXNlcjEyMzUwOTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1235097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmarinho", "html_url": "https://github.com/rmarinho", "followers_url": "https://api.github.com/users/rmarinho/followers", "following_url": "https://api.github.com/users/rmarinho/following{/other_user}", "gists_url": "https://api.github.com/users/rmarinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmarinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmarinho/subscriptions", "organizations_url": "https://api.github.com/users/rmarinho/orgs", "repos_url": "https://api.github.com/users/rmarinho/repos", "events_url": "https://api.github.com/users/rmarinho/events{/privacy}", "received_events_url": "https://api.github.com/users/rmarinho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-08T21:56:07Z", "updated_at": "2020-06-08T22:03:30Z", "closed_at": "2020-06-08T22:03:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nHi, i tried to install this via HACS , but i can't find it .\r\n\r\nSteps to reproduce the behavior:\r\n1. Go to 'HACS\r\n2.  Search for Alexa Media Player\r\n\r\n**Expected behavior**\r\nShould be able to find it.\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant 0.110.5\r\n - Hassio (Yes/No): NO\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/772", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/772/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/772/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/772/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/772", "id": 633417487, "node_id": "MDU6SXNzdWU2MzM0MTc0ODc=", "number": 772, "title": "WARNING: The directory '/.cache/pip' not owned or is not writable by the current user.", "user": {"login": "reefland", "id": 16230914, "node_id": "MDQ6VXNlcjE2MjMwOTE0", "avatar_url": "https://avatars2.githubusercontent.com/u/16230914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reefland", "html_url": "https://github.com/reefland", "followers_url": "https://api.github.com/users/reefland/followers", "following_url": "https://api.github.com/users/reefland/following{/other_user}", "gists_url": "https://api.github.com/users/reefland/gists{/gist_id}", "starred_url": "https://api.github.com/users/reefland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reefland/subscriptions", "organizations_url": "https://api.github.com/users/reefland/orgs", "repos_url": "https://api.github.com/users/reefland/repos", "events_url": "https://api.github.com/users/reefland/events{/privacy}", "received_events_url": "https://api.github.com/users/reefland/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-07T13:30:30Z", "updated_at": "2020-06-08T16:15:19Z", "closed_at": "2020-06-08T16:15:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nError message in log creating cache directory.\r\n\r\n**To Reproduce**\r\n1. Restart HA\r\n2. Review log file.\r\n\r\n**Expected behavior**\r\nNo error message.\r\n\r\n**Screenshots**\r\nn/a\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.5\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.4\r\n - alexapy (version from `pip show alexapy` or HA startup): Version: 1.10.1\r\n\r\n**Logs**\r\n```\r\n2020-06-07 08:53:18 ERROR (SyncWorker_16) [homeassistant.util.package] Unable to install package alexapy==1.10.2: WARNING: The directory '/.cache/pip' or its parent directory is no\r\nt owned or is not writable by the current user. The cache has been disabled. Check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H f\r\nlag.\r\nERROR: Could not install packages due to an EnvironmentError: [Errno 13] Permission denied: 'LICENSE'\r\n2020-06-07 08:53:18 ERROR (MainThread) [homeassistant.setup] Setup failed for alexa_media: Requirements for alexa_media not found: ['alexapy==1.10.2'].\r\n```\r\n**Additional context**\r\nI'm not sure if the `/.cache/pip` is relative to something.  I've found:\r\n```\r\n/.cache/pip\r\n/root/.cache/pip\r\n/usr/home/homeassistant/.cache/pip\r\n```\r\nThis is where I assumed it would be writing, permissions seem ok:\r\n```\r\n(homeassistant) % ls -l /usr/local/share/homeassistant/.cache\r\ntotal 1\r\ndrwxr-xr-x  5 homeassistant  homeassistant  5 May 23 11:17 pip\r\n\r\n(homeassistant) % ls -l /usr/local/share/homeassistant/.cache/pip\r\ntotal 48\r\ndrwxr-xr-x  14 homeassistant  homeassistant  14 Jun  7 08:52 http\r\ndrwxr-xr-x   2 homeassistant  homeassistant   3 Jun  7 08:52 selfcheck\r\ndrwxr-xr-x   4 homeassistant  homeassistant   4 May 23 11:17 wheels\r\n```\r\n\r\n```\r\n(homeassistant) % pip show alexapy\r\nName: alexapy\r\nVersion: 1.10.1\r\nSummary: Python API to control Amazon Echo Devices Programatically.\r\nHome-page: https://gitlab.com/keatontaylor/alexapy\r\nAuthor: Keaton Taylor\r\nAuthor-email: keatonstaylor@gmail.com\r\nLicense: Apache-2.0\r\nLocation: /usr/local/share/homeassistant/lib/python3.7/site-packages\r\nRequires: bs4, aiofiles, certifi, backoff, requests, yarl, simplejson, aiohttp\r\nRequired-by: \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/771", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/771/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/771/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/771/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/771", "id": 633386960, "node_id": "MDU6SXNzdWU2MzMzODY5NjA=", "number": 771, "title": "Update for sensor.echo_dot_next_reminder fails: AttributeError: 'float' object has no attribute 'isoweekday'", "user": {"login": "drthanwho", "id": 22405505, "node_id": "MDQ6VXNlcjIyNDA1NTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/22405505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drthanwho", "html_url": "https://github.com/drthanwho", "followers_url": "https://api.github.com/users/drthanwho/followers", "following_url": "https://api.github.com/users/drthanwho/following{/other_user}", "gists_url": "https://api.github.com/users/drthanwho/gists{/gist_id}", "starred_url": "https://api.github.com/users/drthanwho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drthanwho/subscriptions", "organizations_url": "https://api.github.com/users/drthanwho/orgs", "repos_url": "https://api.github.com/users/drthanwho/repos", "events_url": "https://api.github.com/users/drthanwho/events{/privacy}", "received_events_url": "https://api.github.com/users/drthanwho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-07T12:50:25Z", "updated_at": "2020-06-08T16:16:35Z", "closed_at": "2020-06-08T16:16:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI don't see any issues in the frontend but my logs get filled with the following log. Is this a known issue? \r\n\r\n**System details**\r\n - Home-assistant (version): 1.110.4\r\n - Hassio (Yes/No):  Yes\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.2\r\n - alexapy (version from `pip show alexapy` or HA startup): not sure\r\n\r\n**Logs**\r\n```\r\n2020-06-07 15:25:05 ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.thanasis_dot_next_reminder fails\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 279, in async_update_ha_state\r\n    await self.async_device_update()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 470, in async_device_update\r\n    await self.async_update()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 353, in async_update\r\n    self._process_raw_notifications()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 166, in _process_raw_notifications\r\n    self._all = list(map(self._update_recurring_alarm, self._all))\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 229, in _update_recurring_alarm\r\n    and alarm.isoweekday not in RECURRING_PATTERN_ISO_SET[recurring_pattern]\r\nAttributeError: 'float' object has no attribute 'isoweekday'\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/770", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/770/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/770/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/770/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/770", "id": 633277178, "node_id": "MDU6SXNzdWU2MzMyNzcxNzg=", "number": 770, "title": "Bug on an example on the wiki", "user": {"login": "paoloantinori", "id": 1520602, "node_id": "MDQ6VXNlcjE1MjA2MDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1520602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paoloantinori", "html_url": "https://github.com/paoloantinori", "followers_url": "https://api.github.com/users/paoloantinori/followers", "following_url": "https://api.github.com/users/paoloantinori/following{/other_user}", "gists_url": "https://api.github.com/users/paoloantinori/gists{/gist_id}", "starred_url": "https://api.github.com/users/paoloantinori/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paoloantinori/subscriptions", "organizations_url": "https://api.github.com/users/paoloantinori/orgs", "repos_url": "https://api.github.com/users/paoloantinori/repos", "events_url": "https://api.github.com/users/paoloantinori/events{/privacy}", "received_events_url": "https://api.github.com/users/paoloantinori/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-07T10:24:19Z", "updated_at": "2020-06-08T07:17:16Z", "closed_at": "2020-06-08T07:17:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nBefore trying to modify this by myself, I'd like a second pair of eyes to validate this\r\n\r\nThis is not specific of `alexa_media_player` but if user copy paste the example, it will fail in a time wasting manner.\r\n\r\nIn the section `Live Sensor Report`, https://github.com/custom-components/alexa_media_player/wiki/Examples%3A-Automation#live-sensor-reports\r\n\r\nthe logic to convert the `light.alexa_virtual` is bugged.\r\n\r\nIt says:\r\n\r\n`if (states.light.alexa_virtual.attributes.brightness | int / 255 * 100 ) | round  == 1`\r\n\r\nbut this was leading to wrong behavior.\r\n\r\nIn my case, when I've set the percentage on `1%` on an Alexa Routine, this was sending the value `4` to as the requested brigtness value.\r\n\r\nIf you debug the result of the above expression:\r\n`(states.light.alexa_virtual.attributes.brightness | int / 255 * 100 ) | round` when the input value is `4` it produces `2` as the final output. The expected value should be `1`.\r\n\r\nThe reason for this is that `1.5686274509803921 | round` returns `2`.\r\n\r\nTo produce the correct answer, a different filter should be used:\r\n\r\n` | int `\r\n\r\nI'm not sure if this is the result of recent changes but I'd suggest to mention this on the wiki, otherwise it might be hard to notice the problem (in particular if the logic was also providing a `if x== 2` branch.\r\n\r\nMy system versions:\r\n\r\n```\r\nconfig $ ha core info\r\narch: aarch64\r\naudio_input: null\r\naudio_output: null\r\nboot: true\r\nimage: homeassistant/raspberrypi4-64-homeassistant\r\nip_address: 172.30.32.1\r\nlast_version: 0.110.5\r\nmachine: raspberrypi4-64\r\nport: 8123\r\nssl: false\r\nversion: 0.110.5\r\nversion_latest: 0.110.5\r\nwait_boot: 600\r\nwatchdog: true\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/767", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/767/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/767/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/767/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/767", "id": 632543312, "node_id": "MDU6SXNzdWU2MzI1NDMzMTI=", "number": 767, "title": "Requesting Reathentication but not showing captcha", "user": {"login": "Trev-W", "id": 45542943, "node_id": "MDQ6VXNlcjQ1NTQyOTQz", "avatar_url": "https://avatars1.githubusercontent.com/u/45542943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Trev-W", "html_url": "https://github.com/Trev-W", "followers_url": "https://api.github.com/users/Trev-W/followers", "following_url": "https://api.github.com/users/Trev-W/following{/other_user}", "gists_url": "https://api.github.com/users/Trev-W/gists{/gist_id}", "starred_url": "https://api.github.com/users/Trev-W/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Trev-W/subscriptions", "organizations_url": "https://api.github.com/users/Trev-W/orgs", "repos_url": "https://api.github.com/users/Trev-W/repos", "events_url": "https://api.github.com/users/Trev-W/events{/privacy}", "received_events_url": "https://api.github.com/users/Trev-W/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-06T15:45:03Z", "updated_at": "2020-06-06T15:58:06Z", "closed_at": "2020-06-06T15:58:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nPlease enter the text for the captcha. Please hit confirm to reload image.\r\nNOTE: Actual Amazon error message in red below. Remember password will be provided automatically and Amazon error message normally appears first!\r\n\r\nDescription image <<---Not showing captcha image\r\n\r\nImportant Message! To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\r\n\r\n \r\nCaptcha\r\n\r\n\r\n**To Reproduce**\r\nSystem generated - not initiated by user\r\n\r\n**Expected behavior**\r\nCaptcha image is displayed enabling correct response to be entered at the prompt\r\n\r\n\r\n**Screenshots**\r\n![Screenshot (2)](https://user-images.githubusercontent.com/45542943/83948163-12876500-a84e-11ea-9ed3-37f6ddce2889.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant 0.110.5\r\n - Hassio (Yes/No) true\r\n--\r\n\r\n\r\n: (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):v2.8.3\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n[home-assistant.log](https://github.com/custom-components/alexa_media_player/files/4740550/home-assistant.log)\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/765", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/765/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/765/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/765/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/765", "id": 631565619, "node_id": "MDU6SXNzdWU2MzE1NjU2MTk=", "number": 765, "title": "Next Timer, Next Alarm, Next Reminder sensors not being created", "user": {"login": "vadimolen", "id": 31488282, "node_id": "MDQ6VXNlcjMxNDg4Mjgy", "avatar_url": "https://avatars3.githubusercontent.com/u/31488282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimolen", "html_url": "https://github.com/vadimolen", "followers_url": "https://api.github.com/users/vadimolen/followers", "following_url": "https://api.github.com/users/vadimolen/following{/other_user}", "gists_url": "https://api.github.com/users/vadimolen/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimolen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimolen/subscriptions", "organizations_url": "https://api.github.com/users/vadimolen/orgs", "repos_url": "https://api.github.com/users/vadimolen/repos", "events_url": "https://api.github.com/users/vadimolen/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimolen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-05T12:50:52Z", "updated_at": "2020-06-06T07:08:07Z", "closed_at": "2020-06-06T07:08:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe Next Timer, Next Alarm, and Next Reminder sensors are not being created for any of my Alexa devices. media_player devices are created for each and work correctly.\r\n\r\n**To Reproduce**\r\nRestart Home Assistant. Notice the lack of sensors.\r\n\r\n**Expected behavior**\r\nEach included Echo device should have corresponding Next Timer, Next Alarm, Next Reminder sensors.\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**System details**\r\n - Home-assistant (version): 0.108.4\r\n - Hassio (Yes/No): NO\r\n - alexa_media  (version from `const.py` or HA startup):  2.8.3\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.1\r\n\r\n**Logs**\r\nSee attached.\r\n[home-assistant.log](https://github.com/custom-components/alexa_media_player/files/4736195/home-assistant.log)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/764", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/764/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/764/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/764/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/764", "id": 630661208, "node_id": "MDU6SXNzdWU2MzA2NjEyMDg=", "number": 764, "title": "An exception of type CancelledError occurred.", "user": {"login": "aptonline", "id": 190136, "node_id": "MDQ6VXNlcjE5MDEzNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/190136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aptonline", "html_url": "https://github.com/aptonline", "followers_url": "https://api.github.com/users/aptonline/followers", "following_url": "https://api.github.com/users/aptonline/following{/other_user}", "gists_url": "https://api.github.com/users/aptonline/gists{/gist_id}", "starred_url": "https://api.github.com/users/aptonline/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aptonline/subscriptions", "organizations_url": "https://api.github.com/users/aptonline/orgs", "repos_url": "https://api.github.com/users/aptonline/repos", "events_url": "https://api.github.com/users/aptonline/events{/privacy}", "received_events_url": "https://api.github.com/users/aptonline/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-06-04T09:25:59Z", "updated_at": "2020-07-03T00:14:30Z", "closed_at": "2020-07-03T00:14:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nI recently removed the integration as my devices were showing as 'unavailable'. After installing the component again (which went smoothly and allowed logging in) the integration shows no devices even though my account has a number of devices enabled and can be seen in the Alexa iOS app and the Alexa website.\r\n\r\nPlease see below for the log errors.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Removed existing integration and component.\r\n2. Reinstalled integration and component.\r\n3. Logged in.\r\n4. See error logs.\r\n\r\n**Expected behaviour**\r\n\r\nDevices should appear in devices/entities after installing and logging in.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\nN/A\r\n\r\n**System details**\r\n - Home-assistant (version):  0.110.4 (Docker)\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). No\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.3\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\nLog Details (ERROR)\r\nLogger: alexapy.helpers\r\nSource: __main__.py:356 \r\nFirst occurred: 10:02:43 (18 occurrences) \r\nLast logged: 10:03:56\r\n\r\nalexaapi._static_request:An error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments: ()\r\nalexaapi.get_bluetooth:An error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments: ()\r\nalexaapi.get_dnd_state:An error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments: ()\r\nalexaapi.get_authentication:An error occured accessing AlexaAPI: An exception of type CancelledError occurred. Arguments: ()\r\n\r\n\r\nLog Details (ERROR)\r\nLogger: custom_components.alexa_media\r\nSource: helpers/update_coordinator.py:140 \r\nIntegration: Alexa Media Player (documentation) \r\nFirst occurred: 10:02:43 (1 occurrences) \r\nLast logged: 10:02:43\r\n\r\nTimeout fetching alexa_media data\r\n```\r\n\r\n**Additional context**\r\n\r\nAs mentioned above was working but devices became unavailable hence why removed and reinstalled.  Checked to make sure pickle was removed and recreated.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/763", "id": 630586705, "node_id": "MDU6SXNzdWU2MzA1ODY3MDU=", "number": 763, "title": "Alexa TTS to devices on different Amazon accounts", "user": {"login": "SheriffOfNotts", "id": 16319499, "node_id": "MDQ6VXNlcjE2MzE5NDk5", "avatar_url": "https://avatars1.githubusercontent.com/u/16319499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SheriffOfNotts", "html_url": "https://github.com/SheriffOfNotts", "followers_url": "https://api.github.com/users/SheriffOfNotts/followers", "following_url": "https://api.github.com/users/SheriffOfNotts/following{/other_user}", "gists_url": "https://api.github.com/users/SheriffOfNotts/gists{/gist_id}", "starred_url": "https://api.github.com/users/SheriffOfNotts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SheriffOfNotts/subscriptions", "organizations_url": "https://api.github.com/users/SheriffOfNotts/orgs", "repos_url": "https://api.github.com/users/SheriffOfNotts/repos", "events_url": "https://api.github.com/users/SheriffOfNotts/events{/privacy}", "received_events_url": "https://api.github.com/users/SheriffOfNotts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2020-06-04T07:39:12Z", "updated_at": "2020-06-16T13:25:47Z", "closed_at": "2020-06-16T04:35:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there, first of all thanks for the integration!\r\n\r\nI've been trying to get TTS working to different echo devices on different accounts.\r\nIt all works fine if I send a message to devices just on one account, but if I send a message to devices registered to different accounts nothing happens - I get the notification that the script has run, but there is no output.\r\n\r\nI am assuming that this should work as there is the option to register multiple accounts in alexa_media_player?\r\n\r\nLet me know what additional info you require.\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/762", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/762/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/762/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/762/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/762", "id": 630580812, "node_id": "MDU6SXNzdWU2MzA1ODA4MTI=", "number": 762, "title": "Speech Synthesis Markup Language is not working with tts", "user": {"login": "schoenof", "id": 46902705, "node_id": "MDQ6VXNlcjQ2OTAyNzA1", "avatar_url": "https://avatars1.githubusercontent.com/u/46902705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schoenof", "html_url": "https://github.com/schoenof", "followers_url": "https://api.github.com/users/schoenof/followers", "following_url": "https://api.github.com/users/schoenof/following{/other_user}", "gists_url": "https://api.github.com/users/schoenof/gists{/gist_id}", "starred_url": "https://api.github.com/users/schoenof/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schoenof/subscriptions", "organizations_url": "https://api.github.com/users/schoenof/orgs", "repos_url": "https://api.github.com/users/schoenof/repos", "events_url": "https://api.github.com/users/schoenof/events{/privacy}", "received_events_url": "https://api.github.com/users/schoenof/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-04T07:29:37Z", "updated_at": "2020-06-07T05:34:16Z", "closed_at": "2020-06-05T04:43:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Speech Synthesis Markup Language is not working with tts but works fine with announce....\r\n\r\nSSML worked originally with tts when Keaton first posted about it here....but then stopped working in later updates....\r\n\r\nTHIS READS the XML tags as text - In HA Developer tools -> Services\r\nService = notify.alexa_media\r\nService Data\r\n```\r\nmessage: <amazon:effect name=\"whispered\">test</amazon:effect>\r\ndata:\r\n  type: tts\r\ntarget: media_player.upstairs_echo_dot\r\n```\r\n\r\nTHIS WORKS - In HA Developer tools -> Services\r\nService = notify.alexa_media\r\nService Data\r\n```\r\nmessage: <amazon:effect name=\"whispered\">test</amazon:effect>\r\ndata:\r\n  type: announce\r\n  method: all\r\ntarget: media_player.upstairs_echo_dot\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/761", "id": 630387825, "node_id": "MDU6SXNzdWU2MzAzODc4MjU=", "number": 761, "title": "YAML macros do not work in HA service call", "user": {"login": "alesoft73", "id": 46445679, "node_id": "MDQ6VXNlcjQ2NDQ1Njc5", "avatar_url": "https://avatars1.githubusercontent.com/u/46445679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alesoft73", "html_url": "https://github.com/alesoft73", "followers_url": "https://api.github.com/users/alesoft73/followers", "following_url": "https://api.github.com/users/alesoft73/following{/other_user}", "gists_url": "https://api.github.com/users/alesoft73/gists{/gist_id}", "starred_url": "https://api.github.com/users/alesoft73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alesoft73/subscriptions", "organizations_url": "https://api.github.com/users/alesoft73/orgs", "repos_url": "https://api.github.com/users/alesoft73/repos", "events_url": "https://api.github.com/users/alesoft73/events{/privacy}", "received_events_url": "https://api.github.com/users/alesoft73/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2020-06-03T23:01:26Z", "updated_at": "2020-06-07T08:43:18Z", "closed_at": "2020-06-07T07:28:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the documentation the target setup in notify is :  \r\n```yaml\r\n  - service: notify.alexa_media\r\n    data:\r\n      data:\r\n        type: tts\r\n      target: \r\n        - media_player.downstairs\r\n        - media_player.upstairs\r\n```\r\nor target \r\n\r\n      target: \r\n        - media_player.downstairs\r\n\r\nor target:\r\n  \r\n  target : \r\n    - '{{ states...... }}'\r\nbut don't work if i create a macro to pass a media:player\r\n  target: >-\r\n      {{ macro ecc ecc }}\r\n  with resoult  - media_player.downstairs\r\n\r\nIs possible to add a templete in target : ???\r\nMany thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/760", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/760/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/760/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/760/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/760", "id": 627944215, "node_id": "MDU6SXNzdWU2Mjc5NDQyMTU=", "number": 760, "title": "Dual Alexa Media integration", "user": {"login": "ripvega", "id": 42817627, "node_id": "MDQ6VXNlcjQyODE3NjI3", "avatar_url": "https://avatars1.githubusercontent.com/u/42817627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ripvega", "html_url": "https://github.com/ripvega", "followers_url": "https://api.github.com/users/ripvega/followers", "following_url": "https://api.github.com/users/ripvega/following{/other_user}", "gists_url": "https://api.github.com/users/ripvega/gists{/gist_id}", "starred_url": "https://api.github.com/users/ripvega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ripvega/subscriptions", "organizations_url": "https://api.github.com/users/ripvega/orgs", "repos_url": "https://api.github.com/users/ripvega/repos", "events_url": "https://api.github.com/users/ripvega/events{/privacy}", "received_events_url": "https://api.github.com/users/ripvega/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-31T11:28:38Z", "updated_at": "2020-06-01T06:17:37Z", "closed_at": "2020-06-01T06:17:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nHome Assistant alerted me to a new integration - Alexa Media Player, which is already integrated.\r\n\r\nPlease see the screenshot.\r\n\r\nLatest versions of both HA and Alexa Media Player\r\n<img width=\"541\" alt=\"Screenshot 2020-05-31 at 12 12 00\" src=\"https://user-images.githubusercontent.com/42817627/83351105-22c4af00-a339-11ea-942a-8eecace0473d.png\">\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/757", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/757/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/757/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/757/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/757", "id": 627536528, "node_id": "MDU6SXNzdWU2Mjc1MzY1Mjg=", "number": 757, "title": "Additional Sounds - Not All Play ", "user": {"login": "tonyawad88", "id": 3638322, "node_id": "MDQ6VXNlcjM2MzgzMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3638322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tonyawad88", "html_url": "https://github.com/tonyawad88", "followers_url": "https://api.github.com/users/tonyawad88/followers", "following_url": "https://api.github.com/users/tonyawad88/following{/other_user}", "gists_url": "https://api.github.com/users/tonyawad88/gists{/gist_id}", "starred_url": "https://api.github.com/users/tonyawad88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tonyawad88/subscriptions", "organizations_url": "https://api.github.com/users/tonyawad88/orgs", "repos_url": "https://api.github.com/users/tonyawad88/repos", "events_url": "https://api.github.com/users/tonyawad88/events{/privacy}", "received_events_url": "https://api.github.com/users/tonyawad88/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-29T21:02:39Z", "updated_at": "2020-05-30T01:44:48Z", "closed_at": "2020-05-30T01:44:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using HAAS service: \"media_player.play_media\" with the entity being my echo dot, not all sounds play on the echo dot. I basically tried to retrieve the sounds from the link at: https://developer.amazon.com/en-US/docs/alexa/custom-skills/ask-soundlibrary.html \r\n**works well:**\r\n`{\"entity_id\": \"media_player.my_echo_do\",\"media_content_id\": \"amzn_sfx_doorbell_01\", \"media_content_type\": \"sound\"}`\r\n**doesn't work:**\r\n`{\"entity_id\": \"media_player.my_echo_do\",\"media_content_id\": \"amzn_sfx_doorbell_buzz_01\", \"media_content_type\": \"sound\"}`\r\n\r\nCould it be a limitation of the echo device? \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'HAAS Developer Tools' \r\n2. Select Service: `media_player.play_media`\r\n3. Select your Amazon Alexa device\r\n4. Paste the above JSON and click \"Call Service\"\r\n\r\n**Expected behavior**\r\nI was expecting that both should play. \r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.3\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.2\r\n - alexapy (version from `pip show alexapy` or HA startup): Not sure where to get it..\r\n\r\n**Logs**\r\nN/A\r\n**Additional context**\r\nN/A\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/756", "id": 626792350, "node_id": "MDU6SXNzdWU2MjY3OTIzNTA=", "number": 756, "title": "JSONDecodeError on login error flooding the logs", "user": {"login": "eifinger", "id": 1481961, "node_id": "MDQ6VXNlcjE0ODE5NjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1481961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eifinger", "html_url": "https://github.com/eifinger", "followers_url": "https://api.github.com/users/eifinger/followers", "following_url": "https://api.github.com/users/eifinger/following{/other_user}", "gists_url": "https://api.github.com/users/eifinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/eifinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eifinger/subscriptions", "organizations_url": "https://api.github.com/users/eifinger/orgs", "repos_url": "https://api.github.com/users/eifinger/repos", "events_url": "https://api.github.com/users/eifinger/events{/privacy}", "received_events_url": "https://api.github.com/users/eifinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-28T20:26:49Z", "updated_at": "2020-05-31T05:43:39Z", "closed_at": "2020-05-31T05:43:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nMy homeassistant log gets flooded with messages in the form of\r\n```bash\r\n2020-05-28 01:09:15 ERROR (MainThread) [alexapy.helpers] alexaapi.get_notifications: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n```\r\nThe exact function differs but it is always in the form of `alexaapi.get_<...>`.\r\nDue to the extreme volume of messages I cannot determine what started them.\r\nA restart of homeassistant seems to work.\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\nUnknown\r\n\r\n**Expected behavior**\r\n\r\nNo JSONDecodeErrors\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.3\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). No\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.2\r\n - alexapy (version from `pip show alexapy` or HA startup): v1.10.1\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```bash\r\n2020-05-28 01:09:15 ERROR (MainThread) [alexapy.helpers] alexaapi.get_notifications: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/755", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/755/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/755/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/755/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/755", "id": 625775100, "node_id": "MDU6SXNzdWU2MjU3NzUxMDA=", "number": 755, "title": "ValueError: Config entry has already been setup!", "user": {"login": "RobinCutshaw", "id": 1699220, "node_id": "MDQ6VXNlcjE2OTkyMjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1699220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RobinCutshaw", "html_url": "https://github.com/RobinCutshaw", "followers_url": "https://api.github.com/users/RobinCutshaw/followers", "following_url": "https://api.github.com/users/RobinCutshaw/following{/other_user}", "gists_url": "https://api.github.com/users/RobinCutshaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/RobinCutshaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RobinCutshaw/subscriptions", "organizations_url": "https://api.github.com/users/RobinCutshaw/orgs", "repos_url": "https://api.github.com/users/RobinCutshaw/repos", "events_url": "https://api.github.com/users/RobinCutshaw/events{/privacy}", "received_events_url": "https://api.github.com/users/RobinCutshaw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-27T15:02:21Z", "updated_at": "2020-06-06T07:34:23Z", "closed_at": "2020-06-06T07:34:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nValueError: Config entry has already been setup!\r\nThis error is printed every 10 minutes for a while then pauses for a while then starts back up.\r\n\r\n**To Reproduce**\r\nI configured the custom component with the wrong amazon account and then deleted the integration and re-added with the correct account.  I have restarted hass with no effect.\r\n\r\n**Expected behavior**\r\n\r\n**Screenshots**\r\n\r\n**System details**\r\n - Home-assistant (version): commit be416d9fc66306027991afbc2d9f22557bde794c (HEAD -> dev, upstream/dev)\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): __version__ = \"2.8.0\" (git ed7c21a)\r\n - alexapy (version from `pip show alexapy` or HA startup): Version: 1.10.1\r\n\r\n**Logs**\r\n2020-05-27 10:45:38 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry xxx@example.com - amazon.com for media_player\r\nTraceback (most recent call last):\r\n  File \"/home/robin/github/core/homeassistant/config_entries.py\", line 217, in async_setup\r\n    hass, self\r\n  File \"/home/robin/github/core/homeassistant/components/media_player/__init__.py\", line 333, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/home/robin/github/core/homeassistant/helpers/entity_component.py\", line 163, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n2020-05-27 10:45:50 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry xxx@example.com - amazon.com for media_player\r\nTraceback (most recent call last):\r\n  File \"/home/robin/github/core/homeassistant/config_entries.py\", line 217, in async_setup\r\n    hass, self\r\n  File \"/home/robin/github/core/homeassistant/components/media_player/__init__.py\", line 333, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/home/robin/github/core/homeassistant/helpers/entity_component.py\", line 163, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n\r\n**Additional context**\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/754", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/754/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/754/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/754/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/754", "id": 625175939, "node_id": "MDU6SXNzdWU2MjUxNzU5Mzk=", "number": 754, "title": "unable to link account", "user": {"login": "ygarti", "id": 35875976, "node_id": "MDQ6VXNlcjM1ODc1OTc2", "avatar_url": "https://avatars0.githubusercontent.com/u/35875976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygarti", "html_url": "https://github.com/ygarti", "followers_url": "https://api.github.com/users/ygarti/followers", "following_url": "https://api.github.com/users/ygarti/following{/other_user}", "gists_url": "https://api.github.com/users/ygarti/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygarti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygarti/subscriptions", "organizations_url": "https://api.github.com/users/ygarti/orgs", "repos_url": "https://api.github.com/users/ygarti/repos", "events_url": "https://api.github.com/users/ygarti/events{/privacy}", "received_events_url": "https://api.github.com/users/ygarti/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-26T20:25:44Z", "updated_at": "2020-05-26T20:44:25Z", "closed_at": "2020-05-26T20:44:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "**unable to link account and to start use alexa_media**\r\ni am using the latest alexa_media \r\ni used alexa_media a lot and today on HA Core 0.110.3 (docker) i got a notification that i need to enter a captcha but not matter what i did it didn't work.\r\nafter a while i saw that i got an email from amazon (Amazon Authentication) and that i needed to enter a code (i didn't know it because the gui didn't tell me that this is what i needed to do)\r\ni tried to log in to the site and enter the the Amazon Authentication and i was able to enter the site from chrome but the custom component didn't work.\r\n\r\ni tried to delete the custom component  folder i tried to remove it from the GUI and reinstall\r\nnothing i tried make it work\r\n\r\nit;s asking me for my username and password ask me to enter a captcha theni got a blank text with no info and the alexa_meida was waiting for me to enter something but i don't know what because it's just a blank text (see below the link for the pic)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. to reconfigure the component.\r\n\r\n**Expected behavior**\r\npassing the authentication \r\n\r\n**Screenshots**\r\nhttps://ibb.co/2ZD1vxk\r\n\r\n**Additional context**\r\ni have backup to my HA folder if it helps in any way\r\n\r\nThanks a lot :)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/753", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/753/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/753/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/753/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/753", "id": 625043853, "node_id": "MDU6SXNzdWU2MjUwNDM4NTM=", "number": 753, "title": "AlarmControlPanel is deprecated, modify AlexaAlarmControlPanel to extend AlarmControlPanelEntity", "user": {"login": "tri94", "id": 13280508, "node_id": "MDQ6VXNlcjEzMjgwNTA4", "avatar_url": "https://avatars1.githubusercontent.com/u/13280508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tri94", "html_url": "https://github.com/tri94", "followers_url": "https://api.github.com/users/tri94/followers", "following_url": "https://api.github.com/users/tri94/following{/other_user}", "gists_url": "https://api.github.com/users/tri94/gists{/gist_id}", "starred_url": "https://api.github.com/users/tri94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tri94/subscriptions", "organizations_url": "https://api.github.com/users/tri94/orgs", "repos_url": "https://api.github.com/users/tri94/repos", "events_url": "https://api.github.com/users/tri94/events{/privacy}", "received_events_url": "https://api.github.com/users/tri94/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-26T17:09:00Z", "updated_at": "2020-05-27T08:04:54Z", "closed_at": "2020-05-27T08:04:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry never created one of these. \r\n\r\nRunning Home Assistant 0.110.3\r\nIn my logs i see the following errors \r\nAlarmControlPanel is deprecated, modify AlexaAlarmControlPanel to extend AlarmControlPanelEntity\r\n\r\nSwitchDevice is deprecated, modify AlexaMediaSwitch to extend SwitchEntity\r\n\r\nMediaPlayerDevice is deprecated, modify AlexaClient to extend MediaPlayerEntity\r\n\r\nThanks\r\n\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant 0.110.3\r\n - Hassio (**Yes**/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/750", "id": 624413058, "node_id": "MDU6SXNzdWU2MjQ0MTMwNTg=", "number": 750, "title": "Error while revalidating user with captcha", "user": {"login": "duhow", "id": 1145001, "node_id": "MDQ6VXNlcjExNDUwMDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1145001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duhow", "html_url": "https://github.com/duhow", "followers_url": "https://api.github.com/users/duhow/followers", "following_url": "https://api.github.com/users/duhow/following{/other_user}", "gists_url": "https://api.github.com/users/duhow/gists{/gist_id}", "starred_url": "https://api.github.com/users/duhow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duhow/subscriptions", "organizations_url": "https://api.github.com/users/duhow/orgs", "repos_url": "https://api.github.com/users/duhow/repos", "events_url": "https://api.github.com/users/duhow/events{/privacy}", "received_events_url": "https://api.github.com/users/duhow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-25T17:26:26Z", "updated_at": "2020-05-25T20:24:45Z", "closed_at": "2020-05-25T20:24:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCan't confirm captcha due to code (UI) error.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Alexa Media component requests to renew captcha.\r\n2. After completion, an error appears in Home Assistant UI. Logs provided.\r\n\r\n**Expected behavior**\r\nExpected to complete captcha verification and reenable Alexa Media players.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.2\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.1\r\n\r\n**Logs**\r\n```\r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.es/ap/cvf/verify\r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Verification captcha code requested:\r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: \r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Found post url to verify; converting to https://www.amazon.es/ap/cvf/verify\r\n2020-05-25 19:16:50 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/xxxxxxxxxxxxxxxxxxx.jpg?AWSAccessKeyId=xxxxxxxxxxxxxxx&Expires=1590427309&Signature=xxxxxxxxxxxx%3D', 'verification_captcha_required': True}\r\n2020-05-25 19:16:50 DEBUG (MainThread) [custom_components.alexa_media.configurator] Creating configurator to request captcha\r\n\r\nLogger: homeassistant.components.websocket_api.http.connection.140211693798864\r\nSource: custom_components/alexa_media/configurator.py:143\r\nIntegration: Home Assistant WebSocket API (documentation, issues)\r\nFirst occurred: 19:16:50 (1 occurrences)\r\nLast logged: 19:16:50\r\n\r\nlocal variable 'config_id' referenced before assignment\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1253, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1288, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 28, in configuration_callback\r\n    setup_platform_callback, hass, config_entry, login, callback_data\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 177, in setup_platform_callback\r\n    await test_login_status(hass, config_entry, login, alexa_setup_callback)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 206, in test_login_status\r\n    await hass.async_add_job(request_configuration, hass, config_entry, login)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 143, in request_configuration\r\n    if config_id:\r\nUnboundLocalError: local variable 'config_id' referenced before assignment\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/749", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/749/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/749/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/749", "id": 624140995, "node_id": "MDU6SXNzdWU2MjQxNDA5OTU=", "number": 749, "title": "Alexa Media Player integration doesn't work", "user": {"login": "maciej-szalaj", "id": 65733177, "node_id": "MDQ6VXNlcjY1NzMzMTc3", "avatar_url": "https://avatars1.githubusercontent.com/u/65733177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciej-szalaj", "html_url": "https://github.com/maciej-szalaj", "followers_url": "https://api.github.com/users/maciej-szalaj/followers", "following_url": "https://api.github.com/users/maciej-szalaj/following{/other_user}", "gists_url": "https://api.github.com/users/maciej-szalaj/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciej-szalaj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciej-szalaj/subscriptions", "organizations_url": "https://api.github.com/users/maciej-szalaj/orgs", "repos_url": "https://api.github.com/users/maciej-szalaj/repos", "events_url": "https://api.github.com/users/maciej-szalaj/events{/privacy}", "received_events_url": "https://api.github.com/users/maciej-szalaj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-05-25T08:38:11Z", "updated_at": "2020-06-03T01:56:33Z", "closed_at": "2020-06-03T01:56:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nCan anyone help to solve my issue with the integration? I did follow all instruction how to run it on my Home Assistant (Raspberry Pi 4; HassOS 3.13). I can see all entities and devices (4 Echo Dot 3rd Gen.) but cannot make Alexa to speak. When running service media_player nothing happens. State of my Echo Dot's remains unavailable or standby.\r\nI'm completely new with HA so please let me know if more information would be required to solve me issue.  \r\n\r\n![image](https://user-images.githubusercontent.com/65733177/82794891-79cb0f80-9e73-11ea-938f-ea2196be617c.png)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/65733177/82794824-5f913180-9e73-11ea-81e9-0a31981b022a.png)\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/748", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/748/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/748/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/748/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/748", "id": 623822742, "node_id": "MDU6SXNzdWU2MjM4MjI3NDI=", "number": 748, "title": "No captcha image - can't login", "user": {"login": "Stooovie", "id": 10572373, "node_id": "MDQ6VXNlcjEwNTcyMzcz", "avatar_url": "https://avatars2.githubusercontent.com/u/10572373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stooovie", "html_url": "https://github.com/Stooovie", "followers_url": "https://api.github.com/users/Stooovie/followers", "following_url": "https://api.github.com/users/Stooovie/following{/other_user}", "gists_url": "https://api.github.com/users/Stooovie/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stooovie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stooovie/subscriptions", "organizations_url": "https://api.github.com/users/Stooovie/orgs", "repos_url": "https://api.github.com/users/Stooovie/repos", "events_url": "https://api.github.com/users/Stooovie/events{/privacy}", "received_events_url": "https://api.github.com/users/Stooovie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-24T08:50:35Z", "updated_at": "2020-05-26T18:36:29Z", "closed_at": "2020-05-24T08:51:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nHA notification asks me to configure the addon. Required captcha never displays \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior\r\n1. Click Notifications \r\n2. Click Configure on the notification\r\n3. Click \"confirm\" to refresh as requested \r\n4. Captcha is not displayed \r\n\r\n**Expected behavior**\r\nCaptcha displays properly \r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.1\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.1l\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/745", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/745/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/745/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/745/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/745", "id": 623620809, "node_id": "MDU6SXNzdWU2MjM2MjA4MDk=", "number": 745, "title": "Alarms and Timers are not discovered using HACS", "user": {"login": "lweberru", "id": 20902204, "node_id": "MDQ6VXNlcjIwOTAyMjA0", "avatar_url": "https://avatars1.githubusercontent.com/u/20902204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lweberru", "html_url": "https://github.com/lweberru", "followers_url": "https://api.github.com/users/lweberru/followers", "following_url": "https://api.github.com/users/lweberru/following{/other_user}", "gists_url": "https://api.github.com/users/lweberru/gists{/gist_id}", "starred_url": "https://api.github.com/users/lweberru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lweberru/subscriptions", "organizations_url": "https://api.github.com/users/lweberru/orgs", "repos_url": "https://api.github.com/users/lweberru/repos", "events_url": "https://api.github.com/users/lweberru/events{/privacy}", "received_events_url": "https://api.github.com/users/lweberru/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-23T09:39:11Z", "updated_at": "2020-05-24T19:30:33Z", "closed_at": "2020-05-23T19:25:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI installed the integration with HACS and added it via integration page. The Echo Devices itself got listed in the positive list there. The 5 devices where found but not one timer or alert sensor got created as explained in the documentation.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'HACS'\r\n2. Click on 'Install Alexa Media Player'\r\n3. Follow Link to 'Integration Page'\r\n4. Add 'Alexa Media Player'\r\n5. Enter email, password and the list of the real alexa device names\r\n\r\n**Expected behavior**\r\nDiscovery of the selected devices + all correcsponding alarms and timers.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/20902204/82727234-8b80ab80-9ce9-11ea-9865-bfad1acff79e.png)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.0\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.0\r\n\r\n**Logs**\r\nLogs show neither errors nor things explaining why these alarms and timers are not created.\r\n\r\n**Additional context**\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/738", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/738/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/738/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/738/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/738", "id": 622875551, "node_id": "MDU6SXNzdWU2MjI4NzU1NTE=", "number": 738, "title": "I cant login from integration page", "user": {"login": "Mohannadshariefhome", "id": 61806818, "node_id": "MDQ6VXNlcjYxODA2ODE4", "avatar_url": "https://avatars0.githubusercontent.com/u/61806818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mohannadshariefhome", "html_url": "https://github.com/Mohannadshariefhome", "followers_url": "https://api.github.com/users/Mohannadshariefhome/followers", "following_url": "https://api.github.com/users/Mohannadshariefhome/following{/other_user}", "gists_url": "https://api.github.com/users/Mohannadshariefhome/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mohannadshariefhome/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mohannadshariefhome/subscriptions", "organizations_url": "https://api.github.com/users/Mohannadshariefhome/orgs", "repos_url": "https://api.github.com/users/Mohannadshariefhome/repos", "events_url": "https://api.github.com/users/Mohannadshariefhome/events{/privacy}", "received_events_url": "https://api.github.com/users/Mohannadshariefhome/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-22T00:51:32Z", "updated_at": "2020-05-22T06:56:31Z", "closed_at": "2020-05-22T06:56:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "after HA and integration update I cant login and it is not showing any error messages ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/737", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/737/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/737/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/737/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/737", "id": 622496113, "node_id": "MDU6SXNzdWU2MjI0OTYxMTM=", "number": 737, "title": "Home Assistant SwitchDevice is deprecated now shows in log", "user": {"login": "mnaz", "id": 374086, "node_id": "MDQ6VXNlcjM3NDA4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/374086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mnaz", "html_url": "https://github.com/mnaz", "followers_url": "https://api.github.com/users/mnaz/followers", "following_url": "https://api.github.com/users/mnaz/following{/other_user}", "gists_url": "https://api.github.com/users/mnaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mnaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mnaz/subscriptions", "organizations_url": "https://api.github.com/users/mnaz/orgs", "repos_url": "https://api.github.com/users/mnaz/repos", "events_url": "https://api.github.com/users/mnaz/events{/privacy}", "received_events_url": "https://api.github.com/users/mnaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-21T13:23:14Z", "updated_at": "2020-05-22T06:57:17Z", "closed_at": "2020-05-22T06:57:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAn update to SwitchDevice now causes a warning in logs. See https://github.com/home-assistant/core/pull/34673\r\nalexa_media_player should replace all instances of SwitchDevice with the new SwitchEntity definition. See https://github.com/custom-components/alexa_media_player/blob/dev/custom_components/alexa_media/switch.py#L13 and https://github.com/custom-components/alexa_media_player/blob/dev/custom_components/alexa_media/switch.py#L129\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to Developer -> Logs\r\n2. Search for \"SwitchDevice is deprecated\"\r\n\r\n**Expected behavior**\r\nNo warning messages...\r\n\r\n**Screenshots**\r\nshown in logs only as warning\r\n\r\n**System details**\r\n - Home Assistant 0.110.0\r\n - Alexa Media Player: v2.8.0 from HACA \r\n\r\n**Logs**\r\nLog Details (WARNING)\r\nLogger: homeassistant.components.switch\r\nSource: components/switch/__init__.py:73\r\nIntegration: Switch (documentation, issues)\r\nFirst occurred: 7:24:11 AM (4 occurrences)\r\nLast logged: 7:24:11 AM\r\n\r\nSwitchDevice is deprecated, modify AlexaMediaSwitch to extend SwitchEntity\r\nSwitchDevice is deprecated, modify DNDSwitch to extend SwitchEntity\r\nSwitchDevice is deprecated, modify ShuffleSwitch to extend SwitchEntity\r\nSwitchDevice is deprecated, modify RepeatSwitch to extend SwitchEntity\r\n\r\n**Additional context**\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/736", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/736/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/736/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/736/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/736", "id": 622378542, "node_id": "MDU6SXNzdWU2MjIzNzg1NDI=", "number": 736, "title": "Ability to turn on/off scheduled alarm", "user": {"login": "Molodax", "id": 22867988, "node_id": "MDQ6VXNlcjIyODY3OTg4", "avatar_url": "https://avatars2.githubusercontent.com/u/22867988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Molodax", "html_url": "https://github.com/Molodax", "followers_url": "https://api.github.com/users/Molodax/followers", "following_url": "https://api.github.com/users/Molodax/following{/other_user}", "gists_url": "https://api.github.com/users/Molodax/gists{/gist_id}", "starred_url": "https://api.github.com/users/Molodax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Molodax/subscriptions", "organizations_url": "https://api.github.com/users/Molodax/orgs", "repos_url": "https://api.github.com/users/Molodax/repos", "events_url": "https://api.github.com/users/Molodax/events{/privacy}", "received_events_url": "https://api.github.com/users/Molodax/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-21T09:38:51Z", "updated_at": "2020-05-22T09:31:49Z", "closed_at": "2020-05-22T09:31:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**NOTE: For a feature to be created it has to be doable in the Amazon app because we are basically replicating the app for HA. If you can't find it in the app, we probably can't create it here.**\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nThere is a problem with Alexa alarm that scheduled weekdays alarm will ring respectively of national holidays, while homeassistant is able to identify those days.\r\n\r\n**Describe the solution you'd like**\r\nIt would be nice to be able to control the scheduled Alexa alarm from homeassistant such as on/off alarm.\r\n\r\n**Describe alternatives you've considered**\r\nIt would be even better to be able to schedule the Alexa alarm from the component.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/735", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/735/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/735/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/735/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/735", "id": 622166418, "node_id": "MDU6SXNzdWU2MjIxNjY0MTg=", "number": 735, "title": "Login / 2FA / captcha error with 2.8.0. Cannot login anymore!", "user": {"login": "energywave", "id": 2051567, "node_id": "MDQ6VXNlcjIwNTE1Njc=", "avatar_url": "https://avatars1.githubusercontent.com/u/2051567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/energywave", "html_url": "https://github.com/energywave", "followers_url": "https://api.github.com/users/energywave/followers", "following_url": "https://api.github.com/users/energywave/following{/other_user}", "gists_url": "https://api.github.com/users/energywave/gists{/gist_id}", "starred_url": "https://api.github.com/users/energywave/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/energywave/subscriptions", "organizations_url": "https://api.github.com/users/energywave/orgs", "repos_url": "https://api.github.com/users/energywave/repos", "events_url": "https://api.github.com/users/energywave/events{/privacy}", "received_events_url": "https://api.github.com/users/energywave/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-05-21T00:31:47Z", "updated_at": "2020-05-24T19:32:36Z", "closed_at": "2020-05-22T20:01:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nJust updated to 2.8.0. After some reboots I've got a notification to insert captcha for Amazon login. I did it several times. The first nothing happens (no error shown/logged) but the notification still there. From the second time an error is showing in the bottom (log attached). So I'm out of my account, cannot use it anymore.\r\n\r\n**To Reproduce**\r\n1. Amazon should request the captcha, frankly I don't know what to do for it. Maybe some wrong password attempt? (I didn't however)\r\n2. Reboot HA\r\n3. A notification will show that request to insert the captcha\r\n4. Insert the correct captcha\r\n5. You'll notice that the notification is still there\r\n6. Reinsert the captcha\r\n7. The error is shown for a second on the bottom and saved in the log file\r\n\r\n**Expected behavior**\r\nCorrect login, all should work then.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.0\r\n - Hassio (Yes/No): yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.0\r\n - alexapy (version from `pip show alexapy` or HA startup): cannot verify\r\n\r\n**Logs**\r\n```\r\n2020-05-21 02:18:44 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.2876995792] local variable 'config_id' referenced before assignment\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1253, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1288, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 28, in configuration_callback\r\n    setup_platform_callback, hass, config_entry, login, callback_data\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 174, in setup_platform_callback\r\n    await test_login_status(hass, config_entry, login, alexa_setup_callback)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 203, in test_login_status\r\n    await hass.async_add_job(request_configuration, hass, config_entry, login)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 143, in request_configuration\r\n    hass.data[DATA_ALEXAMEDIA][\"accounts\"][email][\"configurator\"].append(config_id)\r\nUnboundLocalError: local variable 'config_id' referenced before assignment\r\n\r\n```\r\n\r\n**Additional context**\r\nI tried to install 2.7.5 from HACS, reboot. Same problem. Maybe the problem is in HA 0.110.0?\r\nPlease help, I'm out of Alexa :(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/734", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/734/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/734/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/734/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/734", "id": 621063127, "node_id": "MDU6SXNzdWU2MjEwNjMxMjc=", "number": 734, "title": "Speaker group device missing service data", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars3.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-19T15:13:57Z", "updated_at": "2020-05-19T16:06:30Z", "closed_at": "2020-05-19T15:30:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nService data sample not shown\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'developer tools -> services'\r\n2. Select a device representing a group of speakers\r\n3. Service data are empty\r\n\r\n**Expected behavior**\r\nSame service data as physical device should be shown\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/57354320/82344148-fa14ef00-99f3-11ea-9a39-f2cff2565aca.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.b4\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/733", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/733/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/733/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/733/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/733", "id": 620931697, "node_id": "MDU6SXNzdWU2MjA5MzE2OTc=", "number": 733, "title": "Unable to login in 2.8.0 after cookie expires", "user": {"login": "ThisBytes5", "id": 7539201, "node_id": "MDQ6VXNlcjc1MzkyMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/7539201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThisBytes5", "html_url": "https://github.com/ThisBytes5", "followers_url": "https://api.github.com/users/ThisBytes5/followers", "following_url": "https://api.github.com/users/ThisBytes5/following{/other_user}", "gists_url": "https://api.github.com/users/ThisBytes5/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThisBytes5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThisBytes5/subscriptions", "organizations_url": "https://api.github.com/users/ThisBytes5/orgs", "repos_url": "https://api.github.com/users/ThisBytes5/repos", "events_url": "https://api.github.com/users/ThisBytes5/events{/privacy}", "received_events_url": "https://api.github.com/users/ThisBytes5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 38, "created_at": "2020-05-19T12:20:42Z", "updated_at": "2020-06-04T05:17:58Z", "closed_at": "2020-05-24T02:25:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "**After upgrading to 2.8.0 I received a notification:**\r\nConfigurator\r\nClick button to configure Alexa Media Player - Begin - wayne.com\r\n\r\n**Clicking configure brings up this window:**\r\nAlexa Media Player - Begin - AmazonEmailAddress\r\nPlease hit confirm to begin login attempt.\r\n\r\n**Clicking Confirm**\r\nThis causes a second duplicate notification to show up, then disappear and one of the notifications stick around.\r\n\r\n**What I've done to try and fix it:**\r\n1) rolled back to 2.7.5 \r\n        same notifications and issues above\r\n2) uninstalled the component, rebooted, re-installed 2.80, went through init set up\r\n        Given error email address already registered\r\n3) Deleted the token for my account from storage, rebooted, tried to re-register\r\n        User/pass screen would go away and come back, no error\r\n4) rolled back to 2.7.5\r\n     This appears to fix the issue, but only because I deleted my token in step 3\r\n\r\nHome Assistant 0.109.6\r\nHASSIO: Yes\r\nAlexa_media: __version__ = \"2.8.0\"\r\nalexapy: not sure how to get this\r\n\r\n\r\n\r\n\r\nI attached the logs for step 3 & 4.\r\nEDIT: Logs downloaded so removed.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/730", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/730/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/730/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/730/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/730", "id": 620627524, "node_id": "MDU6SXNzdWU2MjA2Mjc1MjQ=", "number": 730, "title": "type: announce not works", "user": {"login": "Stefaniscion", "id": 12040333, "node_id": "MDQ6VXNlcjEyMDQwMzMz", "avatar_url": "https://avatars1.githubusercontent.com/u/12040333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stefaniscion", "html_url": "https://github.com/Stefaniscion", "followers_url": "https://api.github.com/users/Stefaniscion/followers", "following_url": "https://api.github.com/users/Stefaniscion/following{/other_user}", "gists_url": "https://api.github.com/users/Stefaniscion/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stefaniscion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stefaniscion/subscriptions", "organizations_url": "https://api.github.com/users/Stefaniscion/orgs", "repos_url": "https://api.github.com/users/Stefaniscion/repos", "events_url": "https://api.github.com/users/Stefaniscion/events{/privacy}", "received_events_url": "https://api.github.com/users/Stefaniscion/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-19T02:26:41Z", "updated_at": "2020-05-19T03:03:14Z", "closed_at": "2020-05-19T03:03:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\ntype: announce not works\r\n(like: https://github.com/custom-components/alexa_media_player/issues/114#issuecomment-472174540)\r\n\r\n**Communications for my echo device in Alexa App is Active**\r\n\r\nTHIS code works:\r\n```\r\ndata:\r\n  type: tts\r\nmessage: test\r\ntarget:\r\n  - media_player.echo\r\n```\r\n\r\nTHIS code dosn't:\r\n```\r\ndata:\r\n  method: speak\r\n  type: announce\r\nmessage: test\r\ntarget:\r\n  - media_player.echo\r\n```\r\nI got no error in log file...\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.6\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.7.5\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/728", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/728/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/728/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/728/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/728", "id": 619940476, "node_id": "MDU6SXNzdWU2MTk5NDA0NzY=", "number": 728, "title": "2.7.5 not triggering routines", "user": {"login": "oneseventhree", "id": 15043282, "node_id": "MDQ6VXNlcjE1MDQzMjgy", "avatar_url": "https://avatars2.githubusercontent.com/u/15043282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oneseventhree", "html_url": "https://github.com/oneseventhree", "followers_url": "https://api.github.com/users/oneseventhree/followers", "following_url": "https://api.github.com/users/oneseventhree/following{/other_user}", "gists_url": "https://api.github.com/users/oneseventhree/gists{/gist_id}", "starred_url": "https://api.github.com/users/oneseventhree/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oneseventhree/subscriptions", "organizations_url": "https://api.github.com/users/oneseventhree/orgs", "repos_url": "https://api.github.com/users/oneseventhree/repos", "events_url": "https://api.github.com/users/oneseventhree/events{/privacy}", "received_events_url": "https://api.github.com/users/oneseventhree/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-18T06:18:54Z", "updated_at": "2020-05-31T22:10:49Z", "closed_at": "2020-05-31T22:10:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Had to move back to 2.7.4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/725", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/725/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/725/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/725/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/725", "id": 619871357, "node_id": "MDU6SXNzdWU2MTk4NzEzNTc=", "number": 725, "title": "Integration isn't accepting the captcha", "user": {"login": "drthanwho", "id": 22405505, "node_id": "MDQ6VXNlcjIyNDA1NTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/22405505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drthanwho", "html_url": "https://github.com/drthanwho", "followers_url": "https://api.github.com/users/drthanwho/followers", "following_url": "https://api.github.com/users/drthanwho/following{/other_user}", "gists_url": "https://api.github.com/users/drthanwho/gists{/gist_id}", "starred_url": "https://api.github.com/users/drthanwho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drthanwho/subscriptions", "organizations_url": "https://api.github.com/users/drthanwho/orgs", "repos_url": "https://api.github.com/users/drthanwho/repos", "events_url": "https://api.github.com/users/drthanwho/events{/privacy}", "received_events_url": "https://api.github.com/users/drthanwho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-05-18T02:54:00Z", "updated_at": "2020-05-19T16:10:25Z", "closed_at": "2020-05-19T16:10:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nFIrstly, I have to keep #714 on hold for now since I ended up setting the integration up all over again. Now I have a whole other problem. Hopefully this is easy to fix and then I can swap the python file with your fix to test out. \r\n\r\nSo basically after I had that issue I ended up getting it to work by removing integration and re installing it in HACS and setting it up again. Now today I guess it logged me out and it's asking for a captcha. But it's not accepting it.\r\n\r\n**To Reproduce**\r\n1. Yes at first picture wouldn't load so I just submitted a made up code to force the new image to show\r\n2. Submitted captcha. Pop up closed but still notification there asking for one \r\n![image](https://user-images.githubusercontent.com/22405505/82169666-7effeb80-98c2-11ea-8198-5b0bc34dc511.png)\r\n3. Clicking \"CONFIGURE\" again shows this\r\n![image](https://user-images.githubusercontent.com/22405505/82169629-5d9eff80-98c2-11ea-8122-855ae3ad4719.png)\r\n\r\nI've tried \r\na. captcha alone\r\nb. Amazon password followed by the captcha\r\nc. Amazon password following by the two factor authentication\r\n\r\nI don't know what else I should be trying or if due to the two-factor code it's affecting the login somehow\r\n\r\n**System details**\r\nHome-assistant (version): 0.109.2\r\nHassio (Yes/No): Yes\r\nalexa_media: 2.7.3\r\nalexapy: 1.8.4\r\n\r\n**Logs**\r\n```yaml\r\n2020-05-17 22:42:49 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 22:42:50 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 23:21:36 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:22:40 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:23:27 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:23:51 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:25:13 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:27:49 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:27:59 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:28:50 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 23:31:14 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 23:31:15 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 23:31:21 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 23:32:09 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n2020-05-17 23:32:13 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:32:14 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:36:15 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:38:21 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:51:09 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-17 23:51:30 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n2020-05-18 03:59:26 ERROR (MainThread) [alexapy.helpers] alexaapi._request:An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments:\r\n('Unauthorized',)\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/724", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/724/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/724/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/724/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/724", "id": 619449585, "node_id": "MDU6SXNzdWU2MTk0NDk1ODU=", "number": 724, "title": "Alexa Notify not pausing with full stops or commas anymore", "user": {"login": "pdgithub78", "id": 60198486, "node_id": "MDQ6VXNlcjYwMTk4NDg2", "avatar_url": "https://avatars2.githubusercontent.com/u/60198486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdgithub78", "html_url": "https://github.com/pdgithub78", "followers_url": "https://api.github.com/users/pdgithub78/followers", "following_url": "https://api.github.com/users/pdgithub78/following{/other_user}", "gists_url": "https://api.github.com/users/pdgithub78/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdgithub78/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdgithub78/subscriptions", "organizations_url": "https://api.github.com/users/pdgithub78/orgs", "repos_url": "https://api.github.com/users/pdgithub78/repos", "events_url": "https://api.github.com/users/pdgithub78/events{/privacy}", "received_events_url": "https://api.github.com/users/pdgithub78/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1759454045, "node_id": "MDU6TGFiZWwxNzU5NDU0MDQ1", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/amazonissue", "name": "amazonissue", "color": "0e8a16", "default": false, "description": "Issue needs to have a change made by Amazon"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-16T11:26:17Z", "updated_at": "2020-05-20T14:04:57Z", "closed_at": "2020-05-20T14:04:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf you write a message and include a full stop or comma Alexa used to pause at each. Now she ignore's these and just reads the message a one long sentence. I have tried all older versions of the intergration that worked and the result is the same. I would assume it is an Amazon recent change?\r\n\r\n**To Reproduce**\r\nRun a notify.alexa_media service with codes such as\r\n\r\ndata:\r\n  type: tts\r\nmessage: >-\r\n  Hello, how are you? I am fine. What is the weather like?\r\ntarget:\r\n  - media_player.lounge_echo\r\n\r\n**Expected behavior**\r\nWhen alexa reads this she should pause where there is a question mark, full stop or comma, but now she doesn't\r\n\r\n**Screenshots**\r\nNA\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.6\r\n - Hassio (Yes/No): Yes (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.7.5 but also tried other versions available in HACS\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nNo Error logs available\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/723", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/723/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/723/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/723/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/723", "id": 619216676, "node_id": "MDU6SXNzdWU2MTkyMTY2NzY=", "number": 723, "title": "Unable to login to amazon account", "user": {"login": "clsferguson", "id": 48876201, "node_id": "MDQ6VXNlcjQ4ODc2MjAx", "avatar_url": "https://avatars1.githubusercontent.com/u/48876201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clsferguson", "html_url": "https://github.com/clsferguson", "followers_url": "https://api.github.com/users/clsferguson/followers", "following_url": "https://api.github.com/users/clsferguson/following{/other_user}", "gists_url": "https://api.github.com/users/clsferguson/gists{/gist_id}", "starred_url": "https://api.github.com/users/clsferguson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clsferguson/subscriptions", "organizations_url": "https://api.github.com/users/clsferguson/orgs", "repos_url": "https://api.github.com/users/clsferguson/repos", "events_url": "https://api.github.com/users/clsferguson/events{/privacy}", "received_events_url": "https://api.github.com/users/clsferguson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-15T20:12:56Z", "updated_at": "2020-05-24T02:25:41Z", "closed_at": "2020-05-24T02:25:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI made the mistake of running out of hd space on my server drive. Since then I have had several issues. I was able to resolve most fairly easily. But now I am having issues getting this component to work.\r\n\r\nWhen first got home assistant out of safe mode, there was a notification that said \"click here to log in\" it would not do anything, and my alexa stuff would not be accessible. First I tried to reinstall the component (2.7.5). same issue, so I removed the pickle files and uninstalled the component. then rebooted, reinstalled.\r\n\r\nnow when i try to add the integration and click the \"sign in\" button I have the same problem still. I disabled 2fa on my amazon account to be sure, no luck. I tried to down grade to 2.7.1. still no luck.\r\n\r\nlogs are minimal\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.6\r\n - Hassio (Yes/No): yes\r\n\r\n**Logs**\r\nLogger: alexapy.helpers\r\nSource: custom_components/alexa_media/config_flow.py:218\r\nFirst occurred: 2:03:26 PM (1 occurrences)\r\nLast logged: 2:03:26 PM\r\nalexalogin.login:An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments: ()", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/720", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/720/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/720/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/720/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/720", "id": 618472794, "node_id": "MDU6SXNzdWU2MTg0NzI3OTQ=", "number": 720, "title": "With the Beta from HA 0.110 following have changed", "user": {"login": "northpower25", "id": 36472486, "node_id": "MDQ6VXNlcjM2NDcyNDg2", "avatar_url": "https://avatars3.githubusercontent.com/u/36472486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/northpower25", "html_url": "https://github.com/northpower25", "followers_url": "https://api.github.com/users/northpower25/followers", "following_url": "https://api.github.com/users/northpower25/following{/other_user}", "gists_url": "https://api.github.com/users/northpower25/gists{/gist_id}", "starred_url": "https://api.github.com/users/northpower25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/northpower25/subscriptions", "organizations_url": "https://api.github.com/users/northpower25/orgs", "repos_url": "https://api.github.com/users/northpower25/repos", "events_url": "https://api.github.com/users/northpower25/events{/privacy}", "received_events_url": "https://api.github.com/users/northpower25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-14T19:12:57Z", "updated_at": "2020-05-15T03:08:56Z", "closed_at": "2020-05-15T03:08:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "**NOTE: For a feature to be created it has to be doable in the Amazon app because we are basically replicating the app for HA. If you can't find it in the app, we probably can't create it here.**\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nin preparation for HA 0.110 the following errors are shown and make changes to the integration necessary\r\n\r\nAlarmControlPanel is deprecated, modify AlexaAlarmControlPanel to extend AlarmControlPanelEntity\r\n\r\nSwitchDevice is deprecated, modify AlexaMediaSwitch to extend SwitchEntity\r\nSwitchDevice is deprecated, modify DNDSwitch to extend SwitchEntity\r\nSwitchDevice is deprecated, modify ShuffleSwitch to extend SwitchEntity\r\nSwitchDevice is deprecated, modify RepeatSwitch to extend SwitchEntity\r\n\r\nMediaPlayerDevice is deprecated, modify AlexaClient to extend MediaPlayerEntity\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/719", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/719/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/719/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/719/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/719", "id": 618191127, "node_id": "MDU6SXNzdWU2MTgxOTExMjc=", "number": 719, "title": "Media player is not in the entity list ", "user": {"login": "leon38", "id": 1986448, "node_id": "MDQ6VXNlcjE5ODY0NDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1986448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leon38", "html_url": "https://github.com/leon38", "followers_url": "https://api.github.com/users/leon38/followers", "following_url": "https://api.github.com/users/leon38/following{/other_user}", "gists_url": "https://api.github.com/users/leon38/gists{/gist_id}", "starred_url": "https://api.github.com/users/leon38/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leon38/subscriptions", "organizations_url": "https://api.github.com/users/leon38/orgs", "repos_url": "https://api.github.com/users/leon38/repos", "events_url": "https://api.github.com/users/leon38/events{/privacy}", "received_events_url": "https://api.github.com/users/leon38/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-14T12:30:46Z", "updated_at": "2020-05-19T19:53:50Z", "closed_at": "2020-05-19T19:53:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI don't see alexa devices in the entity list\r\n\r\n**To Reproduce**\r\n1. Installed the component with hacs.\r\n2. Rebooted server twice\r\n3. Add Alexa media player integration\r\n4. Configure alexa media player with my credentials\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.6\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.7.5\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.8.4\r\n\r\n**Logs**\r\n\r\n2020-05-15 08:49:11 INFO (MainThread) [homeassistant.setup] Setting up alexa_media\r\n2020-05-15 08:49:11 INFO (MainThread) [homeassistant.setup] Setup of domain alexa_media took 0.0 seconds.\r\n2020-05-15 08:49:11 INFO (MainThread) [custom_components.alexa_media] \r\n\r\nalexa_media\r\nVersion: 2.7.5\r\nThis is a custom component\r\nIf you have any issues with this you need to open an issue here:\r\nhttps://github.com/custom-components/alexa_media_player/issues\r\n\r\n2020-05-15 08:49:11 INFO (MainThread) [custom_components.alexa_media] Loaded alexapy==1.8.4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/718", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/718/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/718/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/718/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/718", "id": 617441548, "node_id": "MDU6SXNzdWU2MTc0NDE1NDg=", "number": 718, "title": "List connected Bluetooth speakers", "user": {"login": "mdm2207", "id": 48740594, "node_id": "MDQ6VXNlcjQ4NzQwNTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/48740594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdm2207", "html_url": "https://github.com/mdm2207", "followers_url": "https://api.github.com/users/mdm2207/followers", "following_url": "https://api.github.com/users/mdm2207/following{/other_user}", "gists_url": "https://api.github.com/users/mdm2207/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdm2207/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdm2207/subscriptions", "organizations_url": "https://api.github.com/users/mdm2207/orgs", "repos_url": "https://api.github.com/users/mdm2207/repos", "events_url": "https://api.github.com/users/mdm2207/events{/privacy}", "received_events_url": "https://api.github.com/users/mdm2207/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-13T13:18:19Z", "updated_at": "2020-05-22T21:41:18Z", "closed_at": "2020-05-19T01:56:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used to use the source list to detect if certain Bluetooth speakers were connected as part of a room presence automation, but I can see from the wiki that this is now only for inputs. \r\n\r\nIs it no longer possible to get this info?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/716", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/716/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/716/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/716/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/716", "id": 616963916, "node_id": "MDU6SXNzdWU2MTY5NjM5MTY=", "number": 716, "title": "ERROR alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred.", "user": {"login": "monotonus", "id": 51734505, "node_id": "MDQ6VXNlcjUxNzM0NTA1", "avatar_url": "https://avatars1.githubusercontent.com/u/51734505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monotonus", "html_url": "https://github.com/monotonus", "followers_url": "https://api.github.com/users/monotonus/followers", "following_url": "https://api.github.com/users/monotonus/following{/other_user}", "gists_url": "https://api.github.com/users/monotonus/gists{/gist_id}", "starred_url": "https://api.github.com/users/monotonus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monotonus/subscriptions", "organizations_url": "https://api.github.com/users/monotonus/orgs", "repos_url": "https://api.github.com/users/monotonus/repos", "events_url": "https://api.github.com/users/monotonus/events{/privacy}", "received_events_url": "https://api.github.com/users/monotonus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-12T21:13:11Z", "updated_at": "2020-05-12T21:15:29Z", "closed_at": "2020-05-12T21:15:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter the latest updates I receive these messages massively in syslog when restarting home assistant:\r\n\r\nMay 12 22:38:17 homeassistant hass[3109]: 2020-05-12 22:38:17 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 22:38:17 homeassistant hass[3109]: ('Session is closed',)\r\n\r\nThe CPU load goes very high and it takes some time to stop/start or restart home assistant service.\r\n\r\nCurrently reinstalled version v.2.7.0 without thes errors.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Update Alexa Media Player to v2.7.2 - 4\r\n2. Restart Home Assistant\r\n3. Check syslog live via tail -f /var/log/syslog\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version):  0.109.6 / virtualenv / Proxmox Debian LXC\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): n/a\r\n - alexapy (version from `pip show alexapy` or HA startup): n/a\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/714", "id": 616896281, "node_id": "MDU6SXNzdWU2MTY4OTYyODE=", "number": 714, "title": "AttributeError: 'NoneType' object has no attribute 'get'", "user": {"login": "drthanwho", "id": 22405505, "node_id": "MDQ6VXNlcjIyNDA1NTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/22405505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drthanwho", "html_url": "https://github.com/drthanwho", "followers_url": "https://api.github.com/users/drthanwho/followers", "following_url": "https://api.github.com/users/drthanwho/following{/other_user}", "gists_url": "https://api.github.com/users/drthanwho/gists{/gist_id}", "starred_url": "https://api.github.com/users/drthanwho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drthanwho/subscriptions", "organizations_url": "https://api.github.com/users/drthanwho/orgs", "repos_url": "https://api.github.com/users/drthanwho/repos", "events_url": "https://api.github.com/users/drthanwho/events{/privacy}", "received_events_url": "https://api.github.com/users/drthanwho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-12T19:17:09Z", "updated_at": "2020-05-19T05:08:49Z", "closed_at": "2020-05-19T05:08:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nAll of a sudden after my last restart I've been getting the below error in the log. \r\nFirst error leads to --> AttributeError: 'NoneType' object has no attribute 'get'\r\nNext errors that show up --> ValueError: Config entry has already been setup!\r\n\r\nIn the meantime all Echos on home assistant are unavailable \r\n\r\nI also tried restarting again but keep getting same errors. On the other hand, I have restarted several other times, in the past I don't know how long since I set it up, and this hasn't happened.\r\n\r\n**To Reproduce**\r\nUnknown. Happened after HA restart.\r\n\r\n**Expected behavior**\r\nNo errors and Echo media players to be available in HA\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.2\r\n - Hassio (Yes/No): Yes\r\n - alexa_media: 2.7.3\r\n - alexapy: 1.8.4\r\n\r\n**Logs**\r\n```yaml\r\n020-05-12 21:46:23 DEBUG (MainThread) [custom_components.alexa_media] Nothing to import from configuration.yaml, loading from Integrations\r\n2020-05-12 21:46:23 INFO (MainThread) [custom_components.alexa_media] \r\n-------------------------------------------------------------------\r\nalexa_media\r\nVersion: 2.7.3\r\nThis is a custom component\r\nIf you have any issues with this you need to open an issue here:\r\nhttps://github.com/custom-components/alexa_media_player/issues\r\n-------------------------------------------------------------------\r\n\r\n2020-05-12 21:46:23 INFO (MainThread) [custom_components.alexa_media] Loaded alexapy==1.8.4\r\n2020-05-12 21:46:23 DEBUG (MainThread) [alexapy.alexalogin] Trying to load pickled cookie from file /config/.storage/alexa_media.t*********5@gmail.com.pickle\r\n2020-05-12 21:46:26 DEBUG (MainThread) [alexapy.alexalogin] Trying to load aiohttpCookieJar to session\r\n2020-05-12 21:46:26 DEBUG (MainThread) [alexapy.alexalogin] Loaded 9 cookies\r\n2020-05-12 21:46:27 WARNING (MainThread) [homeassistant.setup] Setup of input_select is taking over 10 seconds.\r\n2020-05-12 21:46:27 WARNING (MainThread) [homeassistant.setup] Setup of updater is taking over 10 seconds.\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.co.uk/api/bootstrap returned 200:OK with response <CIMultiDictProxy('Content-Type': 'application/json', 'Content-Length': '156', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Tue, 12 May 2020 18:46:28 GMT', 'x-amzn-RequestId': 'db4fcd9a-ce74-493c-b9d5-d17fa227eb3b', 'Content-Encoding': 'gzip', 'x-amz-rid': 'AB78B4B7ZCE19YK2W4H2', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 98f1fdf093c866d186183399254afdf0.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'ATH50-C1', 'X-Amz-Cf-Id': 'Ae14d8YAyjptn8qWpJXngZVtxiAnw0z4cbSXHkCdB-NeRsW9fK6LdQ==')>\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] Logged in as t*********5@gmail.com\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] Using cookies to log in\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] Log in successful with cookies\r\n2020-05-12 21:46:28 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'login_successful': True}\r\n2020-05-12 21:46:28 DEBUG (MainThread) [custom_components.alexa_media.configurator] Setting up Alexa devices for t*********5@g*******m\r\n2020-05-12 21:46:28 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Websocket created: <alexapy.alexawebsocket.WebsocketEchoClient object at 0x6ed59410>\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexawebsocket] Connecting to wss://dp-gw-na.amazon.co.uk/?x-amz-device-type=ALEGCNGL9K0HM&x-amz-device-serial=**** with {'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://alexa.amazon.co.uk/api/bootstrap', 'Cookie': 'session-id=***; session-id-time=***; ubid-acbuk=***; session-token=***; x-acbuk=***; at-acbuk=***; sess-at-acbuk=***; sst-acbuk=***; csrf=***; ', 'Origin': 'https://alexa.amazon.co.uk'}\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Initating Async Handshake.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Starting message parsing loop.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding WebSocket Handshake MSG.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: 0xbafef3f3 0x000000cd {\"protocolName\":\"A:H\",\"parameters\":{\"AlphaProtocolHandler.supportedEncodings\":\"GZIP\",\"AlphaProtocolHandler.maxFragmentSize\":\"16000\",\"AlphaProtocolHandler.receiveWindowSize\":\"16\"}}TUNE\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Handshake MSG.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Register MSG.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000361 0x3ff2313f f 0x00000001 0xc784e881 0x000000b9 ACK 0x00000003 1.0 0x00000024 01e09e62-f504-476c-85c8-9c97c8da26ed 0x00000064 0x0000016978ff598c 0x000001720a35b563 END FABE\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Received ACK MSG for Registration.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding PING.\r\n2020-05-12 21:46:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Websocket succesfully connected\r\n2020-05-12 21:46:32 DEBUG (MainThread) [custom_components.alexa_media] Creating coordinator\r\n2020-05-12 21:46:32 DEBUG (MainThread) [custom_components.alexa_media] Refreshing coordinator\r\n2020-05-12 21:46:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2020-05-12 21:46:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2020-05-12 21:46:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Found 7 devices, 7 bluetooth\r\n2020-05-12 21:46:33 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated 6 notifications for 2 devices at 2020-05-12 21:46:33.768585+03:00\r\n2020-05-12 21:46:34 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated last_called: {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: last_called changed:  to {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Bedroom: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: Locale en-gb timezone Europe/Athens\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: Locale en-us timezone None\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Existing: [] New: [\"Thanasis' Dot\", 'Bedroom', 'Home Echo', 'This Device', \"Thanasis's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: [\"Thanasis' Flex\"]\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 2.097 seconds\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Trying with limit 5 delay 2 catch_exceptions True\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 1/5 after waiting 0 seconds result: False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.media_player] t*********5@g*******m: Refreshing Thanasis' Dot\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.media_player] Thanasis' Dot: Last_called check: self: G************UK5 reported: \r\n2020-05-12 21:46:35 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.co.uk/api/np/player?deviceSerialNumber=***=2560 returned 200:OK:application/json\r\n2020-05-12 21:46:35 ERROR (MainThread) [homeassistant.components.media_player] Error while setting up alexa_media platform for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 178, in _async_setup_platform\r\n    await asyncio.wait_for(asyncio.shield(task), SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 442, in wait_for\r\n    return fut.result()\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 109, in async_setup_entry\r\n    hass, config_entry.data, async_add_devices, discovery_info=None\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 89, in async_setup_platform\r\n    await alexa_client.init(device)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 211, in init\r\n    await self.refresh(device)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 563, in refresh\r\n    self._media_image_url = self._session.get(\"mainArt\", {}).get(\"url\")\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n2020-05-12 21:46:38 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:46:38 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 2/5 after waiting 4 seconds result: False\r\n2020-05-12 21:46:46 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:46:46 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 3/5 after waiting 8 seconds result: False\r\n2020-05-12 21:47:02 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:47:02 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 4/5 after waiting 16 seconds result: False\r\n2020-05-12 21:47:34 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:47:34 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 5/5 after waiting 32 seconds result: False\r\n2020-05-12 21:47:34 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/notify/__init__.py\", line 95, in async_setup_platform\r\n    notify_service.hass = hass\r\nAttributeError: 'bool' object has no attribute 'hass'\r\n2020-05-12 21:47:44 ERROR (MainThread) [homeassistant.components.automation] Home Assistant Startup: Error executing script. Service not found for call_service at pos 2: Unable to find service notify/alexa_media_thanasis_dot\r\n2020-05-12 21:58:30 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbcd f 0x00000001 0x0ddef2c0 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:**** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"***\\\",\\\"deviceSerialNumber\\\":\\\"****\\\"},\\\"volumeSetting\\\":47,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-05-12 21:58:30 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:30 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': '***', 'deviceSerialNumber': 'G************UK5'}, 'volumeSetting': 47, 'isMuted': False}\r\n2020-05-12 21:58:30 DEBUG (MainThread) [custom_components.alexa_media] Adding PUSH_VOLUME_CHANGE to seen_commands: {'PUSH_VOLUME_CHANGE': 1589309910.9605808}\r\n2020-05-12 21:58:30 DEBUG (MainThread) [custom_components.alexa_media] Discovered new media_player ***\r\n2020-05-12 21:58:31 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2020-05-12 21:58:31 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2020-05-12 21:58:31 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Found 7 devices, 7 bluetooth\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated 6 notifications for 2 devices at 2020-05-12 21:58:32.529738+03:00\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated last_called: {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Bedroom: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: Locale en-gb timezone Europe/Athens\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: Locale en-us timezone None\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Existing: [] New: [\"Thanasis' Dot\", 'Bedroom', 'Home Echo', 'This Device', \"Thanasis's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: [\"Thanasis' Flex\"]\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 1.918 seconds\r\n2020-05-12 21:58:32 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry t*********5@gmail.com - amazon.co.uk for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 216, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/media_player/__init__.py\", line 332, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 163, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbe0 f 0x00000001 0x4ff9228d 0x0000022e GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:***:deviceType:*** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"***\\\",\\\"deviceSerialNumber\\\":\\\"***\\\"},\\\"bass\\\":0,\\\"midrange\\\":1,\\\"treble\\\":6}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': '***', 'deviceSerialNumber': 'G************UK5'}, 'bass': 0, 'midrange': 1, 'treble': 6}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Adding PUSH_EQUALIZER_STATE_CHANGE to seen_commands: {'PUSH_VOLUME_CHANGE': 1589309910.9605808, 'PUSH_EQUALIZER_STATE_CHANGE': 1589309912.9135938}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Discovered new media_player ***\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbf4 f 0x00000001 0x3fd80fc1 0x0000022e GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:***:deviceType:*** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3VRME03NAXFUB\\\",\\\"deviceSerialNumber\\\":\\\"***\\\"},\\\"bass\\\":0,\\\"midrange\\\":0,\\\"treble\\\":0}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': 'A3VRME03NAXFUB', 'deviceSerialNumber': 'G************SUG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbf5 f 0x00000001 0xc6bee5f7 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:***:deviceType:*** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3VRME03NAXFUB\\\",\\\"deviceSerialNumber\\\":\\\"***\\\"},\\\"volumeSetting\\\":63,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': 'A3VRME03NAXFUB', 'deviceSerialNumber': 'G************SUG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-05-12 21:58:43 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Found 7 devices, 7 bluetooth\r\n2020-05-12 21:58:50 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated 6 notifications for 2 devices at 2020-05-12 21:58:50.815032+03:00\r\n2020-05-12 21:58:51 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated last_called: {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Bedroom: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: Locale en-gb timezone Europe/Athens\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: Locale en-us timezone None\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Existing: [] New: [\"Thanasis' Dot\", 'Bedroom', 'Home Echo', 'This Device', \"Thanasis's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: [\"Thanasis' Flex\"]\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 8.202 seconds\r\n2020-05-12 21:58:51 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry t*********5@gmail.com - amazon.co.uk for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 216, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/media_player/__init__.py\", line 332, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 163, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/712", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/712/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/712/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/712", "id": 616745146, "node_id": "MDU6SXNzdWU2MTY3NDUxNDY=", "number": 712, "title": "last_alexa sensor stops working after upgrade to 2.7.1 and 2.7.2", "user": {"login": "timota", "id": 11276397, "node_id": "MDQ6VXNlcjExMjc2Mzk3", "avatar_url": "https://avatars1.githubusercontent.com/u/11276397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timota", "html_url": "https://github.com/timota", "followers_url": "https://api.github.com/users/timota/followers", "following_url": "https://api.github.com/users/timota/following{/other_user}", "gists_url": "https://api.github.com/users/timota/gists{/gist_id}", "starred_url": "https://api.github.com/users/timota/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timota/subscriptions", "organizations_url": "https://api.github.com/users/timota/orgs", "repos_url": "https://api.github.com/users/timota/repos", "events_url": "https://api.github.com/users/timota/events{/privacy}", "received_events_url": "https://api.github.com/users/timota/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-12T15:22:16Z", "updated_at": "2020-05-12T17:57:21Z", "closed_at": "2020-05-12T17:57:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nlast_alexa sensor stops working after upgrade to 2.7.1 and 2.7.2\r\n\r\n**Expected behavior**\r\nSensors should be updated with last called alexa\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.6\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): _version__ = \"2.7.2\r\n - alexapy (version from `pip show alexapy` or HA startup): alexapy==1.8.4\r\n\r\n**Logs**\r\n\r\n1. Call alexa broadcast\r\n2. check last_alexa sensor\r\n\r\n```\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: My test message, kwargs: {'target': ['media_player.echo_dot'], 'data': {'type': 'announce'}}\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity tata: standby>, tata, G************DMR, media_player.tata)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity Echo Dot: standby>, Echo Dot, G************4R4, media_player.echo_dot)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Converting: media_player.echo_dot to (entities): <Entity Echo Dot: standby>\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity Tetiana: standby>, Tetiana, G************HV8, media_player.tetiana)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity Taras's Sonos One: standby>, Taras's Sonos One, 2****************************a37, media_player.taras_s_sonos_one)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity Office: standby>, Office, 9****************************32e, media_player.office)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity Office 2: standby>, Office 2, 5****************************570, media_player.office_2)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: media_player.echo_dot against (<Entity This Device: standby>, This Device, 1****************************865, media_player.this_device)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity tata: standby>, tata, G************DMR, media_player.tata)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Echo Dot: standby>, Echo Dot, G************4R4, media_player.echo_dot)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Converting: <Entity Echo Dot: standby> to (serialnumbers): G090LF10729614R4\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Tetiana: standby>, Tetiana, G************HV8, media_player.tetiana)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Taras's Sonos One: standby>, Taras's Sonos One, 2****************************a37, media_player.taras_s_sonos_one)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Office: standby>, Office, 9****************************32e, media_player.office)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Office 2: standby>, Office 2, 5****************************570, media_player.office_2)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity This Device: standby>, This Device, 1****************************865, media_player.this_device)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Announce targets: ['G************4R4'] entities: [<Entity Echo Dot: standby>]\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity tata: standby>, tata, G************DMR, media_player.tata)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Echo Dot: standby>, Echo Dot, G************4R4, media_player.echo_dot)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Converting: <Entity Echo Dot: standby> to (serialnumbers): G090LF10729614R4\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Tetiana: standby>, Tetiana, G************HV8, media_player.tetiana)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Taras's Sonos One: standby>, Taras's Sonos One, 2****************************a37, media_player.taras_s_sonos_one)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Office: standby>, Office, 9****************************32e, media_player.office)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity Office 2: standby>, Office 2, 5****************************570, media_player.office_2)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot: standby> against (<Entity This Device: standby>, This Device, 1****************************865, media_player.this_device)\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] Announce targets: ['G************4R4'] entities: [<Entity Echo Dot: standby>]\r\n2020-05-12 16:17:13 DEBUG (MainThread) [custom_components.alexa_media.notify] t**********o@g*******m: Announce by <Entity Echo Dot: standby> to targets: ['G************4R4']: My test message\r\n2020-05-12 16:17:14 DEBUG (MainThread) [alexapy.alexaapi] Creating sequence for 1 items\r\n2020-05-12 16:17:14 DEBUG (MainThread) [alexapy.alexaapi] Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A3S5BH2HU6VAYF\\\", \\\"deviceSerialNumber\\\": \\\"G090LF10729614R4\\\", \\\"locale\\\": \\\"en-gb\\\", \\\"customerId\\\": \\\"A2JC2JHY2355FU\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-gb\\\", \\\"display\\\": {\\\"title\\\": \\\"Home Assistant\\\", \\\"body\\\": \\\"My test message\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"My test message\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2JC2JHY2355FU\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G090LF10729614R4\\\", \\\"deviceTypeId\\\": \\\"A3S5BH2HU6VAYF\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2020-05-12 16:17:15 DEBUG (MainThread) [alexapy.alexaapi] POST: https://alexa.amazon.co.uk/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2020-05-12 16:17:16 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x0e994fe7 f 0x00000001 0xeeb7a69e 0x0000022e GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:A2JC2JHY2355FU:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:260-9248940-0895229-1589296547000 {\"payload\":\"{\\\"destinationUserId\\\":\\\"A2JC2JHY2355FU\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF10729614R4\\\"},\\\"bass\\\":0,\\\"midrange\\\":0,\\\"treble\\\":0}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-05-12 16:17:16 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media] t**********o@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media] Adding PUSH_EQUALIZER_STATE_CHANGE to seen_commands: {'PUSH_EQUALIZER_STATE_CHANGE': 1589296636.081319}\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] t**********o@g*******m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] t**********o@g*******m: Refreshing Echo Dot\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot: Last_called check: self: G************4R4 reported: G************HV8\r\n2020-05-12 16:17:16 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x0e7c4a45 f 0x00000001 0x9c9e77a4 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:A2JC2JHY2355FU:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:260-9248940-0895229-1589296547000 {\"payload\":\"{\\\"destinationUserId\\\":\\\"A2JC2JHY2355FU\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF10729614R4\\\"},\\\"volumeSetting\\\":83,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-05-12 16:17:16 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media] t**********o@g*******m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'volumeSetting': 83, 'isMuted': False}\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media] Adding PUSH_VOLUME_CHANGE to seen_commands: {'PUSH_EQUALIZER_STATE_CHANGE': 1589296636.081319, 'PUSH_VOLUME_CHANGE': 1589296636.0869043}\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'volumeSetting': 83, 'isMuted': False}\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot volume updated: 83\r\n2020-05-12 16:17:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] t**********o@g*******m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE']);forcing refresh\r\n2020-05-12 16:17:16 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.co.uk/api/np/player?deviceSerialNumber=G090LF10729614R4&deviceType=A3S5BH2HU6VAYF&screenWidth=2560 returned 200:OK:application/json\r\n2020-05-12 16:17:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x0e638095 f 0x00000001 0xe6bb706f 0x0000022e GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:A2JC2JHY2355FU:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:260-9248940-0895229-1589296547000 {\"payload\":\"{\\\"destinationUserId\\\":\\\"A2JC2JHY2355FU\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF10729614R4\\\"},\\\"bass\\\":0,\\\"midrange\\\":0,\\\"treble\\\":0}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-05-12 16:17:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media] t**********o@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media.media_player] t**********o@g*******m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE']);forcing refresh\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media.media_player] t**********o@g*******m: Refreshing Echo Dot\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot: Last_called check: self: G************4R4 reported: G************HV8\r\n2020-05-12 16:17:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x0e83a5c4 f 0x00000001 0x6bcb4bd4 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:A2JC2JHY2355FU:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:260-9248940-0895229-1589296547000 {\"payload\":\"{\\\"destinationUserId\\\":\\\"A2JC2JHY2355FU\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF10729614R4\\\"},\\\"volumeSetting\\\":83,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-05-12 16:17:19 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media] t**********o@g*******m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'volumeSetting': 83, 'isMuted': False}\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********5FU', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************4R4'}, 'volumeSetting': 83, 'isMuted': False}\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot volume updated: 83\r\n2020-05-12 16:17:19 DEBUG (MainThread) [custom_components.alexa_media.media_player] t**********o@g*******m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE']);forcing refresh\r\n2020-05-12 16:17:19 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.co.uk/api/np/player?deviceSerialNumber=G090LF10729614R4&deviceType=A3S5BH2HU6VAYF&screenWidth=2560 returned 200:OK:application/json\r\n\r\n```\r\n\r\n**Additional context**\r\nlast_alexa sensor configuration:\r\n\r\n```\r\nsensor:\r\n  - platform: template\r\n    sensors: \r\n      last_alexa: \r\n        entity_id: \r\n          - media_player.<alexa1>\r\n          - media_player.<alexa2>\r\n          - media_player.echo_dot\r\n        value_template: >\r\n          {{ states.media_player | selectattr('attributes.last_called','eq',True) | map(attribute='entity_id') | first }}\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}]}