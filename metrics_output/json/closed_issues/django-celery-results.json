{"total_count": 62, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/celery/django-celery-results/issues/150", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/150/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/150/events", "html_url": "https://github.com/celery/django-celery-results/issues/150", "id": 631345858, "node_id": "MDU6SXNzdWU2MzEzNDU4NTg=", "number": 150, "title": "Incompatibility with celery v4.4.4", "user": {"login": "solarissmoke", "id": 160227, "node_id": "MDQ6VXNlcjE2MDIyNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/160227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solarissmoke", "html_url": "https://github.com/solarissmoke", "followers_url": "https://api.github.com/users/solarissmoke/followers", "following_url": "https://api.github.com/users/solarissmoke/following{/other_user}", "gists_url": "https://api.github.com/users/solarissmoke/gists{/gist_id}", "starred_url": "https://api.github.com/users/solarissmoke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solarissmoke/subscriptions", "organizations_url": "https://api.github.com/users/solarissmoke/orgs", "repos_url": "https://api.github.com/users/solarissmoke/repos", "events_url": "https://api.github.com/users/solarissmoke/events{/privacy}", "received_events_url": "https://api.github.com/users/solarissmoke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-05T06:27:36Z", "updated_at": "2020-06-18T23:24:58Z", "closed_at": "2020-06-18T23:24:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Celery v4.4.4 [changed the signature](https://github.com/celery/celery/commit/0463bff0530b8aef8d31bd8039f245735295db59) of the `set()` method for results backends, which means that you currently get the following error when using celery 4.4.4:\r\n\r\n```\r\nset() takes 3 positional arguments but 4 were given\r\n```\r\n\r\nSo we need to update that method here to accept the 4th argument.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/149", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/149/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/149/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/149/events", "html_url": "https://github.com/celery/django-celery-results/issues/149", "id": 630838622, "node_id": "MDU6SXNzdWU2MzA4Mzg2MjI=", "number": 149, "title": "DB Violation on task Exception", "user": {"login": "Ixiodor", "id": 21291221, "node_id": "MDQ6VXNlcjIxMjkxMjIx", "avatar_url": "https://avatars1.githubusercontent.com/u/21291221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ixiodor", "html_url": "https://github.com/Ixiodor", "followers_url": "https://api.github.com/users/Ixiodor/followers", "following_url": "https://api.github.com/users/Ixiodor/following{/other_user}", "gists_url": "https://api.github.com/users/Ixiodor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ixiodor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ixiodor/subscriptions", "organizations_url": "https://api.github.com/users/Ixiodor/orgs", "repos_url": "https://api.github.com/users/Ixiodor/repos", "events_url": "https://api.github.com/users/Ixiodor/events{/privacy}", "received_events_url": "https://api.github.com/users/Ixiodor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-04T13:44:45Z", "updated_at": "2020-06-06T01:33:43Z", "closed_at": "2020-06-06T01:33:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a task(on_error set), i force an Exception and the chord tries to write itself in the DB with some null values.\r\n\r\n> Traceback (most recent call last):\r\n>   File \"/home/ubuntu/.local/lib/python3.7/site-packages/django/db/backends/utils.py\", line 86, in _execute\r\n>     return self.cursor.execute(sql, params)\r\n> psycopg2.errors.NotNullViolation: null value in column \"task_id\" violates not-null constraint\r\n> DETAIL:  Failing row contains (183, null, FAILURE, application/x-python-serialize, binary, gAJjY2VsZXJ5LmV4Y2VwdGlvbnMKQ2hvcmRFcnJvcgpxAFgRAAAARXhjZXB0aW9u..., 2020-06-04 13:42:01.738637+00, Traceback (most recent call last):\r\n>   File \"/home/ubuntu/.local/l..., gAJ9cQBYCAAAAGNoaWxkcmVucQFdcQJYJAAAADA5OTc2YmJhLWE4YzktNDQzNi05..., null, null, null, null, 2020-06-04 13:42:01.738617+00).\r\n\r\nThere are other chord_unlock. Why this one in particular wants to be written in DB?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/137", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/137/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/137/events", "html_url": "https://github.com/celery/django-celery-results/issues/137", "id": 572998840, "node_id": "MDU6SXNzdWU1NzI5OTg4NDA=", "number": 137, "title": "InterfaceError in store_result in celery.app.trace.handle_failure", "user": {"login": "DylanYoung", "id": 5795220, "node_id": "MDQ6VXNlcjU3OTUyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/5795220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DylanYoung", "html_url": "https://github.com/DylanYoung", "followers_url": "https://api.github.com/users/DylanYoung/followers", "following_url": "https://api.github.com/users/DylanYoung/following{/other_user}", "gists_url": "https://api.github.com/users/DylanYoung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DylanYoung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DylanYoung/subscriptions", "organizations_url": "https://api.github.com/users/DylanYoung/orgs", "repos_url": "https://api.github.com/users/DylanYoung/repos", "events_url": "https://api.github.com/users/DylanYoung/events{/privacy}", "received_events_url": "https://api.github.com/users/DylanYoung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-28T20:53:40Z", "updated_at": "2020-03-19T04:26:25Z", "closed_at": "2020-03-19T04:26:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I believe this was triggered by running a too-small pgbouncer pool in front of celery, but could be unrelated. \r\n\r\nUsing gevent workers\r\ndjango-celery-results==1.0.1\r\ngevent 1.4\r\ncelery 4.2.2\r\n\r\nAnyone else seen this one? \r\n\r\nTraceback \r\n------------\r\n\r\n```\r\n[2020-02-28 10:09:31,745: WARNING/celerybw/MainProcess] Traceback (most recent call last):\r\n[2020-02-28 10:09:31,751: WARNING/celerybw/MainProcess] File \"src/gevent/greenlet.py\", line 766, in gevent._greenlet.Greenlet.run\r\n[2020-02-28 10:09:31,751: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/concurrency/base.py\", line 31, in apply_target\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] ret = target(*args, **kwargs)\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/app/trace.py\", line 549, in _fast_trace_task\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] uuid, args, kwargs, request,\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/app/trace.py\", line 492, in trace_task\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] I, _, _, _ = on_error(task_request, exc, uuid)\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/app/trace.py\", line 338, in on_error\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] task, request, eager=eager, call_errbacks=call_errbacks,\r\n[2020-02-28 10:09:31,752: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/app/trace.py\", line 172, in handle_error_state\r\n[2020-02-28 10:09:31,753: WARNING/celerybw/MainProcess] call_errbacks=call_errbacks)\r\n[2020-02-28 10:09:31,753: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/app/trace.py\", line 217, in handle_failure\r\n[2020-02-28 10:09:31,753: WARNING/celerybw/MainProcess] call_errbacks=call_errbacks,\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/backends/base.py\", line 157, in mark_as_failure\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] traceback=traceback, request=request)\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/celery/backends/base.py\", line 322, in store_result\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] request=request, **kwargs)\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django_celery_results/backends/database.py\", line 29, in _store_result\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] meta=meta,\r\n[2020-02-28 10:09:31,754: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n[2020-02-28 10:09:31,755: WARNING/celerybw/MainProcess] return fun(*args, **kwargs)\r\n[2020-02-28 10:09:31,755: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django_celery_results/managers.py\", line 119, in store_result\r\n[2020-02-28 10:09:31,761: WARNING/celerybw/MainProcess] obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n[2020-02-28 10:09:31,761: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/manager.py\", line 122, in manager_method\r\n[2020-02-28 10:09:31,763: WARNING/celerybw/MainProcess] return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n[2020-02-28 10:09:31,763: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/query.py\", line 465, in get_or_create\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] return self.get(**lookup), False\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/query.py\", line 381, in get\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] num = len(clone)\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/query.py\", line 240, in __len__\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] self._fetch_all()\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/query.py\", line 1074, in _fetch_all\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] self._result_cache = list(self.iterator())\r\n[2020-02-28 10:09:31,764: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/query.py\", line 52, in __iter__\r\n[2020-02-28 10:09:31,765: WARNING/celerybw/MainProcess] results = compiler.execute_sql()\r\n[2020-02-28 10:09:31,765: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 846, in execute_sql\r\n[2020-02-28 10:09:31,765: WARNING/celerybw/MainProcess] cursor = self.connection.cursor()\r\n[2020-02-28 10:09:31,769: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 233, in cursor\r\n[2020-02-28 10:09:31,769: WARNING/celerybw/MainProcess] cursor = self.make_cursor(self._cursor())\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 206, in _cursor\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] return self.create_cursor()\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/utils.py\", line 95, in __exit__\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] six.reraise(dj_exc_type, dj_exc_value, traceback)\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 206, in _cursor\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] return self.create_cursor()\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] File \"/home/www/env/lib/python2.7/site-packages/django/db/backends/postgresql/base.py\", line 210, in create_cursor\r\n[2020-02-28 10:09:31,770: WARNING/celerybw/MainProcess] cursor = self.connection.cursor()\r\n[2020-02-28 10:09:31,771: WARNING/celerybw/MainProcess] InterfaceError: connection already closed\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/132", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/132/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/132/events", "html_url": "https://github.com/celery/django-celery-results/issues/132", "id": 563995943, "node_id": "MDU6SXNzdWU1NjM5OTU5NDM=", "number": 132, "title": "Django Celery 1.2.0 migrations are not reversible", "user": {"login": "vekakela", "id": 165419, "node_id": "MDQ6VXNlcjE2NTQxOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/165419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vekakela", "html_url": "https://github.com/vekakela", "followers_url": "https://api.github.com/users/vekakela/followers", "following_url": "https://api.github.com/users/vekakela/following{/other_user}", "gists_url": "https://api.github.com/users/vekakela/gists{/gist_id}", "starred_url": "https://api.github.com/users/vekakela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vekakela/subscriptions", "organizations_url": "https://api.github.com/users/vekakela/orgs", "repos_url": "https://api.github.com/users/vekakela/repos", "events_url": "https://api.github.com/users/vekakela/events{/privacy}", "received_events_url": "https://api.github.com/users/vekakela/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-12T13:21:24Z", "updated_at": "2020-02-28T14:26:27Z", "closed_at": "2020-02-28T14:26:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Django Celery migration rollback fails when trying to rollback migrations from migration version `0006_taskresult_date_created` to any earlier version.\r\n\r\n`django.db.migrations.exceptions.IrreversibleError: Operation <RunPython <function copy_date_done_to_date_created at 0x1117c4578>> in django_celery_results.0006_taskresult_date_created is not reversible\r\n`\r\n\r\nMigrations are missing the reverse code:\r\n`migrations.RunPython(copy_date_done_to_date_created),`\r\n\r\nSteps to reproduce:\r\n- Upgrade to Django Celery 1.2.0\r\n- Apply migrations\r\n- Rollback migrations to version `0004_auto_20190516_0412`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/131", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/131/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/131/events", "html_url": "https://github.com/celery/django-celery-results/issues/131", "id": 561800757, "node_id": "MDU6SXNzdWU1NjE4MDA3NTc=", "number": 131, "title": "Django 3.0 Support", "user": {"login": "Palisand", "id": 4138177, "node_id": "MDQ6VXNlcjQxMzgxNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/4138177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Palisand", "html_url": "https://github.com/Palisand", "followers_url": "https://api.github.com/users/Palisand/followers", "following_url": "https://api.github.com/users/Palisand/following{/other_user}", "gists_url": "https://api.github.com/users/Palisand/gists{/gist_id}", "starred_url": "https://api.github.com/users/Palisand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Palisand/subscriptions", "organizations_url": "https://api.github.com/users/Palisand/orgs", "repos_url": "https://api.github.com/users/Palisand/repos", "events_url": "https://api.github.com/users/Palisand/events{/privacy}", "received_events_url": "https://api.github.com/users/Palisand/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-07T18:29:20Z", "updated_at": "2020-05-29T13:06:16Z", "closed_at": "2020-05-29T13:06:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Does this package support Django 3.0? Has it been tested on the latest version?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/117", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/117/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/117/events", "html_url": "https://github.com/celery/django-celery-results/issues/117", "id": 509112719, "node_id": "MDU6SXNzdWU1MDkxMTI3MTk=", "number": 117, "title": "Cleanup task times out", "user": {"login": "asfaltboy", "id": 321520, "node_id": "MDQ6VXNlcjMyMTUyMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/321520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asfaltboy", "html_url": "https://github.com/asfaltboy", "followers_url": "https://api.github.com/users/asfaltboy/followers", "following_url": "https://api.github.com/users/asfaltboy/following{/other_user}", "gists_url": "https://api.github.com/users/asfaltboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/asfaltboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asfaltboy/subscriptions", "organizations_url": "https://api.github.com/users/asfaltboy/orgs", "repos_url": "https://api.github.com/users/asfaltboy/repos", "events_url": "https://api.github.com/users/asfaltboy/events{/privacy}", "received_events_url": "https://api.github.com/users/asfaltboy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-18T14:20:31Z", "updated_at": "2019-10-28T03:42:51Z", "closed_at": "2019-10-28T03:42:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `celery.backend_cleanup` task is super slow reaching our configured soft time limit of 15 minutes. The slow query is the delete and update queries called by `TaskResultManager.delete_expired()`:\r\n\r\nhttps://github.com/celery/django-celery-results/blob/64315751dbe7eac8b3276acb8ed56db2add71b74/django_celery_results/managers.py#L173-L177\r\n\r\nWe can increase the limit for the cleanup task (by updating the `soft_time_limit` property of the task), but that will only be a bandaid rather than a long term solution.\r\n\r\nI have reproduced a simplified case of this issue by creating 2mil results locally (only setting uuid() and using default of the model), setting 1mil to an older date and running the query:\r\n\r\n```python\r\n>>> from datetime import datetime, timedelta\r\n>>> from django.db import connection\r\n>>> from celery import states, uuid\r\n>>> from django_celery_results.models import  *\r\n>>> [TaskResult(task_id=uuid()) for _ in range(1_000_000)]\r\n>>> [TaskResult(task_id=uuid()) for _ in range(1_000_000)]\r\n>>> othermil = TaskResult.objects.filter(id__gt=1_000_000)\r\n\r\n>>> old_date = datetime.now() - timedelta(days=5)\r\n>>> othermil.update(date_done=old_date)\r\n\r\n>>> print(\"\\n\".join(f\"{q['sql'][:300]}: {q['time']}\" for q in connection.queries))\r\n\r\nINSERT INTO \"django_celery_results_taskresult\" (\"task_id\", \"task_name\", \"task_args\", \"task_kwargs\", \"status\", \"worker\", \"content_type\", \"content_encoding\", \"result\", \"date_created\", \"date_done\", \"traceback\", \"hidden\", \"meta\") VALUES ('33efa9af-08b3-4dc6-8808-4597f1da2b17', NULL, NULL, NULL, 'PEND...: 203.467\r\nINSERT INTO \"django_celery_results_taskresult\" (\"task_id\", \"task_name\", \"task_args\", \"task_kwargs\", \"status\", \"worker\", \"content_type\", \"content_encoding\", \"result\", \"date_created\", \"date_done\", \"traceback\", \"hidden\", \"meta\") VALUES ('0f9d897a-bebb-42b3-ba24-f80061c97c95', NULL, NULL, NULL, 'PEND...: 214.064\r\nUPDATE \"django_celery_results_taskresult\" SET \"date_done\" = '2019-10-16T13:19:12.314815+00:00'::timestamptz WHERE \"django_celery_results_taskresult\".\"id\" >= 1000002: 137.222\r\n\r\n# and after running: TaskResult.objects.delete_expired(86_400)\r\n\r\nUPDATE \"django_celery_results_taskresult\" SET \"hidden\" = true WHERE \"django_celery_results_taskresult\".\"date_done\" < '2019-10-20T18:41:52.125578+00:00'::timestamptz: 149.066\r\nDELETE FROM \"django_celery_results_taskresult\" WHERE \"django_celery_results_taskresult\".\"hidden\" = true: 3.387\r\n```\r\n\r\nThe UPDATE query takes over 2 minutes, the DELETE is pretty fast.\r\n\r\nIn our production case we're talking slightly bigger dataset than this, with significantly more data in other fields (e.g metadata of `chord_unlocks` to collect multiple tasks that were chained into a group). I just timed the \"update portion\" of the `delete_expired` task manually, and it took over an hour and a half:\r\n```python\r\nIn [20]: %time expired_update = TaskResult.objects.get_all_expired(expires).update(hidden=True)\r\nCPU times: user 12 ms, sys: 0 ns, total: 12 ms\r\nWall time: 1h 33min 46s\r\nIn [22]: TaskResult.objects.filter(hidden=True).delete()\r\nOut[22]: (1977820, {'django_celery_results.TaskResult': 1977820})\r\n```\r\n\r\nIs it there anything we can do to help debug the issue, what should we consider to improve the database operation? Can we consider removing the index on mtime, or use a partial index maybe?\r\ncount", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/116", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/116/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/116/events", "html_url": "https://github.com/celery/django-celery-results/issues/116", "id": 506140540, "node_id": "MDU6SXNzdWU1MDYxNDA1NDA=", "number": 116, "title": "Celery beat results are not captured in Task Results", "user": {"login": "uderani", "id": 7395076, "node_id": "MDQ6VXNlcjczOTUwNzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7395076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uderani", "html_url": "https://github.com/uderani", "followers_url": "https://api.github.com/users/uderani/followers", "following_url": "https://api.github.com/users/uderani/following{/other_user}", "gists_url": "https://api.github.com/users/uderani/gists{/gist_id}", "starred_url": "https://api.github.com/users/uderani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uderani/subscriptions", "organizations_url": "https://api.github.com/users/uderani/orgs", "repos_url": "https://api.github.com/users/uderani/repos", "events_url": "https://api.github.com/users/uderani/events{/privacy}", "received_events_url": "https://api.github.com/users/uderani/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-12T06:23:19Z", "updated_at": "2019-10-12T07:40:37Z", "closed_at": "2019-10-12T07:35:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "`celery -A Edvice.celery beat -l info --scheduler django_celery_beat.schedulers:DatabaseScheduler`\r\n\r\nI am running celery beat using the above command and below are the versions of related packages.\r\n\r\n`Django==1.11.25\r\ncelery==4.1.1\r\namqp==2.5.1\r\ndjango-celery-beat==1.5.0\r\ndjango-celery-results==1.0.4\r\nkombu==4.2.0`\r\n\r\nI can see async tasks that are called being shown in the TaskResults table but not the ones that are triggered by beat\r\n\r\n`2019-10-12T06:21:23.729228+00:00 app[course-worker.1]: [2019-10-12 06:21:23,728: INFO/ForkPoolWorker-34] Task live.tasks.update_lectures_broadcast_status[9dba8cee-162b-4bb5-8c9e-597978a67fbf] succeeded in 0.1788608169881627s: None\r\n\r\n2019-10-12T06:21:23.737196+00:00 app[course-worker.1]: [2019-10-12 06:21:23,736: INFO/ForkPoolWorker-33] Task live.tasks.update_lectures_live_user_count[a53d9402-b3e1-4bb8-bc63-6dcbc64d9e77] succeeded in 0.17302220303099602s: None`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/115", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/115/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/115/events", "html_url": "https://github.com/celery/django-celery-results/issues/115", "id": 505758108, "node_id": "MDU6SXNzdWU1MDU3NTgxMDg=", "number": 115, "title": "redis version issue", "user": {"login": "emxxjnm", "id": 54089360, "node_id": "MDQ6VXNlcjU0MDg5MzYw", "avatar_url": "https://avatars1.githubusercontent.com/u/54089360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emxxjnm", "html_url": "https://github.com/emxxjnm", "followers_url": "https://api.github.com/users/emxxjnm/followers", "following_url": "https://api.github.com/users/emxxjnm/following{/other_user}", "gists_url": "https://api.github.com/users/emxxjnm/gists{/gist_id}", "starred_url": "https://api.github.com/users/emxxjnm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emxxjnm/subscriptions", "organizations_url": "https://api.github.com/users/emxxjnm/orgs", "repos_url": "https://api.github.com/users/emxxjnm/repos", "events_url": "https://api.github.com/users/emxxjnm/events{/privacy}", "received_events_url": "https://api.github.com/users/emxxjnm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-11T10:01:09Z", "updated_at": "2019-10-12T03:08:15Z", "closed_at": "2019-10-12T03:08:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "when running the celery worker getting this exception:\r\n     **kombu.exceptions.VersionMismatch: Redis transport requires redis-py versions 3.2.0 or later. You have 2.10.6**\r\nAfter I update redis-py version:\r\n    **redis.exceptions.DataError: Invalid input of type: 'CacheKey'. Convert to a byte, string or number first.**", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/106", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/106/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/106/events", "html_url": "https://github.com/celery/django-celery-results/issues/106", "id": 469096615, "node_id": "MDU6SXNzdWU0NjkwOTY2MTU=", "number": 106, "title": "It is support mongodb save result?", "user": {"login": "lovezeropython", "id": 35518020, "node_id": "MDQ6VXNlcjM1NTE4MDIw", "avatar_url": "https://avatars3.githubusercontent.com/u/35518020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovezeropython", "html_url": "https://github.com/lovezeropython", "followers_url": "https://api.github.com/users/lovezeropython/followers", "following_url": "https://api.github.com/users/lovezeropython/following{/other_user}", "gists_url": "https://api.github.com/users/lovezeropython/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovezeropython/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovezeropython/subscriptions", "organizations_url": "https://api.github.com/users/lovezeropython/orgs", "repos_url": "https://api.github.com/users/lovezeropython/repos", "events_url": "https://api.github.com/users/lovezeropython/events{/privacy}", "received_events_url": "https://api.github.com/users/lovezeropython/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-17T09:51:59Z", "updated_at": "2019-07-18T14:58:38Z", "closed_at": "2019-07-18T14:58:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "It is support mongodb save result?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/104", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/104/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/104/events", "html_url": "https://github.com/celery/django-celery-results/issues/104", "id": 464969625, "node_id": "MDU6SXNzdWU0NjQ5Njk2MjU=", "number": 104, "title": "unsupported operand type(s) for -: 'datetime.datetime' and 'str'", "user": {"login": "rosdyana", "id": 4516635, "node_id": "MDQ6VXNlcjQ1MTY2MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/4516635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rosdyana", "html_url": "https://github.com/rosdyana", "followers_url": "https://api.github.com/users/rosdyana/followers", "following_url": "https://api.github.com/users/rosdyana/following{/other_user}", "gists_url": "https://api.github.com/users/rosdyana/gists{/gist_id}", "starred_url": "https://api.github.com/users/rosdyana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rosdyana/subscriptions", "organizations_url": "https://api.github.com/users/rosdyana/orgs", "repos_url": "https://api.github.com/users/rosdyana/repos", "events_url": "https://api.github.com/users/rosdyana/events{/privacy}", "received_events_url": "https://api.github.com/users/rosdyana/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-07T16:29:31Z", "updated_at": "2019-08-15T01:57:45Z", "closed_at": "2019-07-07T17:23:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Recently I got this on my django app logs.\r\n\r\nTask celery.backend_cleanup with id f516a28c-58b8-415d-8389-ef9d4dc2722a raised exception:\r\nTypeError(\"unsupported operand type(s) for -: 'datetime.datetime' and 'str'\")\r\n\r\nTask was called with args: [] kwargs: {}.\r\n\r\nThe contents of the full traceback was:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/app/.heroku/python/lib/python3.7/site-packages/celery/app/trace.py\", line 375, in trace_task\r\n    R = retval = fun(*args, **kwargs)\r\n  File \"/app/.heroku/python/lib/python3.7/site-packages/celery/app/trace.py\", line 632, in __protected_call__\r\n    return self.run(*args, **kwargs)\r\n  File \"/app/.heroku/python/lib/python3.7/site-packages/celery/app/builtins.py\", line 25, in backend_cleanup\r\n    app.backend.cleanup()\r\n  File \"/app/.heroku/python/lib/python3.7/site-packages/django_celery_results/backends/database.py\", line 71, in cleanup\r\n    self.TaskModel._default_manager.delete_expired(self.expires)\r\n  File \"/app/.heroku/python/lib/python3.7/site-packages/django_celery_results/managers.py\", line 167, in delete_expired\r\n    self.get_all_expired(expires).update(hidden=True)\r\n  File \"/app/.heroku/python/lib/python3.7/site-packages/django_celery_results/managers.py\", line 162, in get_all_expired\r\n    return self.filter(date_done__lt=now() - maybe_timedelta(expires))\r\nTypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'\r\n```\r\n\r\ndjango version 2.2\r\ndjango celery results version 1.1.2\r\ncelery version 4.1.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/103", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/103/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/103/events", "html_url": "https://github.com/celery/django-celery-results/issues/103", "id": 461667829, "node_id": "MDU6SXNzdWU0NjE2Njc4Mjk=", "number": 103, "title": "any plans or interest in replicating the task status json response from django-celery?", "user": {"login": "nthall", "id": 632670, "node_id": "MDQ6VXNlcjYzMjY3MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/632670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nthall", "html_url": "https://github.com/nthall", "followers_url": "https://api.github.com/users/nthall/followers", "following_url": "https://api.github.com/users/nthall/following{/other_user}", "gists_url": "https://api.github.com/users/nthall/gists{/gist_id}", "starred_url": "https://api.github.com/users/nthall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nthall/subscriptions", "organizations_url": "https://api.github.com/users/nthall/orgs", "repos_url": "https://api.github.com/users/nthall/repos", "events_url": "https://api.github.com/users/nthall/events{/privacy}", "received_events_url": "https://api.github.com/users/nthall/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-27T17:54:50Z", "updated_at": "2020-01-17T06:37:54Z", "closed_at": "2020-01-17T06:37:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm wondering if the omission of the django-celery feature for returning json data about task status in this project is intentional or not. Seems like this is the logical place for that functionality. If it's welcome I would be glad to add it but if it's omitted intentionally I will roll my own replacement and live with that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/101", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/101/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/101/events", "html_url": "https://github.com/celery/django-celery-results/issues/101", "id": 456997831, "node_id": "MDU6SXNzdWU0NTY5OTc4MzE=", "number": 101, "title": "Is it iny way to save tasks with RECEIVED state", "user": {"login": "Kuzyashin", "id": 33540273, "node_id": "MDQ6VXNlcjMzNTQwMjcz", "avatar_url": "https://avatars0.githubusercontent.com/u/33540273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kuzyashin", "html_url": "https://github.com/Kuzyashin", "followers_url": "https://api.github.com/users/Kuzyashin/followers", "following_url": "https://api.github.com/users/Kuzyashin/following{/other_user}", "gists_url": "https://api.github.com/users/Kuzyashin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kuzyashin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kuzyashin/subscriptions", "organizations_url": "https://api.github.com/users/Kuzyashin/orgs", "repos_url": "https://api.github.com/users/Kuzyashin/repos", "events_url": "https://api.github.com/users/Kuzyashin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kuzyashin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-17T15:24:10Z", "updated_at": "2019-09-03T13:12:22Z", "closed_at": "2019-07-10T16:37:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi. How can i save tasks with received state? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/100", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/100/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/100/events", "html_url": "https://github.com/celery/django-celery-results/issues/100", "id": 455551075, "node_id": "MDU6SXNzdWU0NTU1NTEwNzU=", "number": 100, "title": "On hard time out, task called again and results not saved to db", "user": {"login": "arevanth", "id": 6545682, "node_id": "MDQ6VXNlcjY1NDU2ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/6545682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arevanth", "html_url": "https://github.com/arevanth", "followers_url": "https://api.github.com/users/arevanth/followers", "following_url": "https://api.github.com/users/arevanth/following{/other_user}", "gists_url": "https://api.github.com/users/arevanth/gists{/gist_id}", "starred_url": "https://api.github.com/users/arevanth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arevanth/subscriptions", "organizations_url": "https://api.github.com/users/arevanth/orgs", "repos_url": "https://api.github.com/users/arevanth/repos", "events_url": "https://api.github.com/users/arevanth/events{/privacy}", "received_events_url": "https://api.github.com/users/arevanth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-13T06:07:53Z", "updated_at": "2019-06-18T02:31:57Z", "closed_at": "2019-06-18T02:31:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "On hard timeout limit, task is in started state but it is not running on the worker. I am not using retries anywhere but I notice that it is trying to call the task again but with a None task_id.\r\n\r\nThis is the function stack: \r\n[2019-06-13 05:54:43,723: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/concurrency/asynpool.py\", line 548, in _on_hard_timeout\r\n    self.on_hard_timeout(result)\r\n[2019-06-13 05:54:43,723: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/billiard/pool.py\", line 660, in on_hard_timeout\r\n    job._set(job._job, (False, ExceptionInfo()))\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/billiard/pool.py\", line 1780, in _set\r\n    self._error_callback, self._value)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/billiard/pool.py\", line 1747, in safe_apply_callback\r\n    fun(*args, **kwargs)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/worker/request.py\", line 367, in on_failure\r\n    self.id, exc, request=self, store_result=self.store_errors,\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/backends/base.py\", line 157, in mark_as_failure\r\n    traceback=traceback, request=request)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/backends/base.py\", line 322, in store_result\r\n    request=request, **kwargs)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_results/backends/database.py\", line 35, in _store_result\r\n    task_kwargs=task_kwargs,\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n    return fun(*args, **kwargs)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_results/managers.py\", line 126, in store_result\r\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 488, in get_or_create\r\n    return self._create_object_from_params(lookup, params)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 519, in _create_object_from_params\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 519, in <dictcomp>\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/app/trace.py\", line 642, in __protected_call__\r\n    return orig(self, *args, **kwargs)\r\n[2019-06-13 05:54:43,724: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/app/task.py\", line 375, in __call__\r\n    return self.run(*args, **kwargs)\r\n\r\nI notice that the task_id is none and there are no kwargs and the task results are not saved on to the db.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/92", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/92/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/92/events", "html_url": "https://github.com/celery/django-celery-results/issues/92", "id": 425058027, "node_id": "MDU6SXNzdWU0MjUwNTgwMjc=", "number": 92, "title": "Allow For Filtering Of Custom Task State In Admin", "user": {"login": "ndibari-sp", "id": 31661703, "node_id": "MDQ6VXNlcjMxNjYxNzAz", "avatar_url": "https://avatars1.githubusercontent.com/u/31661703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ndibari-sp", "html_url": "https://github.com/ndibari-sp", "followers_url": "https://api.github.com/users/ndibari-sp/followers", "following_url": "https://api.github.com/users/ndibari-sp/following{/other_user}", "gists_url": "https://api.github.com/users/ndibari-sp/gists{/gist_id}", "starred_url": "https://api.github.com/users/ndibari-sp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ndibari-sp/subscriptions", "organizations_url": "https://api.github.com/users/ndibari-sp/orgs", "repos_url": "https://api.github.com/users/ndibari-sp/repos", "events_url": "https://api.github.com/users/ndibari-sp/events{/privacy}", "received_events_url": "https://api.github.com/users/ndibari-sp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419792598, "node_id": "MDU6TGFiZWw0MTk3OTI1OTg=", "url": "https://api.github.com/repos/celery/django-celery-results/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-25T18:41:04Z", "updated_at": "2019-05-06T04:03:28Z", "closed_at": "2019-05-06T04:03:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the django_celery_results Django admin interface, there is an option to filter by task state. This allows one to quickly see all task results that are in a particular state, like seeing all the FAILURE tasks or RETRY tasks. This only allows one to filter by the default celery states, so if you have any custom states in your database (in the case you manually call the backend.store_result method with a custom state) you won't be able to filter on the special state.\r\n\r\nCan we add some logic in the admin view to \"know\" about the different states in the database and allow for filtering on any valid (existing) state for the TaskResult table? We could write a custom filter for the `status` field that does a query on the TaskResult table to find all distinct `status` options and use that list for filtering.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/90", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/90/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/90/events", "html_url": "https://github.com/celery/django-celery-results/issues/90", "id": 420288700, "node_id": "MDU6SXNzdWU0MjAyODg3MDA=", "number": 90, "title": "Need info about the structure of the project", "user": {"login": "ajaykmr2292", "id": 29298860, "node_id": "MDQ6VXNlcjI5Mjk4ODYw", "avatar_url": "https://avatars3.githubusercontent.com/u/29298860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajaykmr2292", "html_url": "https://github.com/ajaykmr2292", "followers_url": "https://api.github.com/users/ajaykmr2292/followers", "following_url": "https://api.github.com/users/ajaykmr2292/following{/other_user}", "gists_url": "https://api.github.com/users/ajaykmr2292/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajaykmr2292/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajaykmr2292/subscriptions", "organizations_url": "https://api.github.com/users/ajaykmr2292/orgs", "repos_url": "https://api.github.com/users/ajaykmr2292/repos", "events_url": "https://api.github.com/users/ajaykmr2292/events{/privacy}", "received_events_url": "https://api.github.com/users/ajaykmr2292/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419792599, "node_id": "MDU6TGFiZWw0MTk3OTI1OTk=", "url": "https://api.github.com/repos/celery/django-celery-results/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-13T02:30:16Z", "updated_at": "2019-05-16T16:55:17Z", "closed_at": "2019-05-16T05:04:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can you explain in plain terms how the project works? I mean specifically how are the task status, date_done etc. obtained from the celery? Please explain the flow if possible.\r\nPS: I am new to Django. So, I cant understand the how celery contacts the backend to save results.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/88", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/88/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/88/events", "html_url": "https://github.com/celery/django-celery-results/issues/88", "id": 408875168, "node_id": "MDU6SXNzdWU0MDg4NzUxNjg=", "number": 88, "title": "Exception when revoking task, leading to frozen celery worker", "user": {"login": "salty-horse", "id": 28355, "node_id": "MDQ6VXNlcjI4MzU1", "avatar_url": "https://avatars3.githubusercontent.com/u/28355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salty-horse", "html_url": "https://github.com/salty-horse", "followers_url": "https://api.github.com/users/salty-horse/followers", "following_url": "https://api.github.com/users/salty-horse/following{/other_user}", "gists_url": "https://api.github.com/users/salty-horse/gists{/gist_id}", "starred_url": "https://api.github.com/users/salty-horse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salty-horse/subscriptions", "organizations_url": "https://api.github.com/users/salty-horse/orgs", "repos_url": "https://api.github.com/users/salty-horse/repos", "events_url": "https://api.github.com/users/salty-horse/events{/privacy}", "received_events_url": "https://api.github.com/users/salty-horse/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-02-11T16:48:49Z", "updated_at": "2019-04-24T06:20:40Z", "closed_at": "2019-04-24T06:20:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "This only happens with the `django-db` results backend.\r\n\r\n### Versions:\r\n```\r\ncelery===4.2.1\r\ndjango-celery-results==1.0.4\r\n```\r\n### Settings:\r\n```\r\nCELERY_RESULT_BACKEND = 'django-db'\r\nCELERY_BROKER_URL = 'redis://localhost/2'\r\nCELERY_IGNORE_RESULT = False\r\nCELERY_DISABLE_RATE_LIMITS = True\r\nCELERY_WORKER_DIRECT = True\r\n```\r\n\r\n### Steps to reproduce:\r\n1. Create a simple task:\r\n```python\r\nfrom celery import shared_task\r\n@shared_task\r\ndef delayed_print(message):\r\n    print(message)\r\n```\r\n\r\n2. Run a worker:\r\n`celery -A APPNAME worker -l debug`\r\n```\r\n[config]\r\n.> transport:   redis://localhost:6379/2\r\n.> results:     \r\n.> concurrency: 4 (prefork)\r\n.> task events: OFF (enable -E to monitor tasks in this worker)\r\n```\r\n(BTW, note how the \"results:\" startup message is empty even if there is a backend).\r\n\r\n3. Run a task with a delay, then revoke it:\r\n```\r\nfrom APPNAME.tasks import delayed_print\r\nresult = delayed_print.apply_async(args=['this is a test'], countdown=5)\r\nAsyncResult(result.id).revoke()\r\n```\r\n\r\nAfter 5 seconds, this will cause an exception in the worker:\r\n```\r\n[INFO/MainProcess] Discarding revoked task: APPNAME.tasks.delayed_print[332acfa6-956c-4e00-89d7-b85888940488]\r\n[ERROR/MainProcess] Error in timer: TypeError(\"delayed_print() missing 1 required positional argument: 'message'\",)\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 486, in get_or_create\r\n    return self.get(**lookup), False\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 399, in get\r\n    self.model._meta.object_name\r\ndjango_celery_results.models.TaskResult.DoesNotExist: TaskResult matching query does not exist.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/hub.py\", line 145, in fire_timers\r\n    entry()\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/timer.py\", line 68, in __call__\r\n    return self.fun(*self.args, **self.kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/worker/consumer/consumer.py\", line 477, in apply_eta_task\r\n    self.on_task_request(task)\r\n  File \"/lib/python3.6/site-packages/celery/worker/worker.py\", line 223, in _process_task_sem\r\n    return self._quick_acquire(self._process_task, req)\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/semaphore.py\", line 62, in acquire\r\n    callback(*partial_args, **partial_kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/worker/worker.py\", line 228, in _process_task\r\n    req.execute_using_pool(self.pool)\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 518, in execute_using_pool\r\n    if (self.expires or task_id in revoked_tasks) and self.revoked():\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 280, in revoked\r\n    'expired' if expired else 'revoked', False, None, expired,\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 263, in _announce_revoked\r\n    self.id, reason, request=self, store_result=self.store_errors,\r\n  File \"/lib/python3.6/site-packages/celery/backends/base.py\", line 191, in mark_as_revoked\r\n    traceback=None, request=request)\r\n  File \"/lib/python3.6/site-packages/celery/backends/base.py\", line 322, in store_result\r\n    request=request, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django_celery_results/backends/database.py\", line 35, in _store_result\r\n    task_kwargs=task_kwargs,\r\n  File \"/lib/python3.6/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n    return fun(*args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django_celery_results/managers.py\", line 126, in store_result\r\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n  File \"/lib/python3.6/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 488, in get_or_create\r\n    return self._create_object_from_params(lookup, params)\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 521, in _create_object_from_params\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 521, in <dictcomp>\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/lib/python3.6/site-packages/celery/app/trace.py\", line 642, in __protected_call__\r\n    return orig(self, *args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/app/task.py\", line 375, in __call__\r\n    return self.run(*args, **kwargs)\r\nTypeError: delayed_print() missing 1 required positional argument: 'message'\r\n[INFO/MainProcess] Discarding revoked task: APPNAME.tasks.delayed_print[5fd60b5d-835d-4d25-890d-f2457bb43fc0]\r\n[ERROR/MainProcess] Error in timer: TypeError(\"delayed_print() missing 1 required positional argument: 'message'\",)\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 486, in get_or_create\r\n    return self.get(**lookup), False\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 399, in get\r\n    self.model._meta.object_name\r\ndjango_celery_results.models.TaskResult.DoesNotExist: TaskResult matching query does not exist.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/hub.py\", line 145, in fire_timers\r\n    entry()\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/timer.py\", line 68, in __call__\r\n    return self.fun(*self.args, **self.kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/worker/consumer/consumer.py\", line 477, in apply_eta_task\r\n    self.on_task_request(task)\r\n  File \"/lib/python3.6/site-packages/celery/worker/worker.py\", line 223, in _process_task_sem\r\n    return self._quick_acquire(self._process_task, req)\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/semaphore.py\", line 62, in acquire\r\n    callback(*partial_args, **partial_kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/worker/worker.py\", line 228, in _process_task\r\n    req.execute_using_pool(self.pool)\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 518, in execute_using_pool\r\n    if (self.expires or task_id in revoked_tasks) and self.revoked():\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 280, in revoked\r\n    'expired' if expired else 'revoked', False, None, expired,\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 263, in _announce_revoked\r\n    self.id, reason, request=self, store_result=self.store_errors,\r\n  File \"/lib/python3.6/site-packages/celery/backends/base.py\", line 191, in mark_as_revoked\r\n    traceback=None, request=request)\r\n  File \"/lib/python3.6/site-packages/celery/backends/base.py\", line 322, in store_result\r\n    request=request, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django_celery_results/backends/database.py\", line 35, in _store_result\r\n    task_kwargs=task_kwargs,\r\n  File \"/lib/python3.6/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n    return fun(*args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django_celery_results/managers.py\", line 126, in store_result\r\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n  File \"/lib/python3.6/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 488, in get_or_create\r\n    return self._create_object_from_params(lookup, params)\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 521, in _create_object_from_params\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 521, in <dictcomp>\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/lib/python3.6/site-packages/celery/app/trace.py\", line 642, in __protected_call__\r\n    return orig(self, *args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/app/task.py\", line 375, in __call__\r\n    return self.run(*args, **kwargs)\r\nTypeError: delayed_print() missing 1 required positional argument: 'message'\r\n[INFO/MainProcess] Discarding revoked task: APPNAME.tasks.delayed_print[df83ae59-b455-4928-a4e3-bdbff847aa7f]\r\n[ERROR/MainProcess] Error in timer: TypeError(\"delayed_print() missing 1 required positional argument: 'message'\",)\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 486, in get_or_create\r\n    return self.get(**lookup), False\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 399, in get\r\n    self.model._meta.object_name\r\ndjango_celery_results.models.TaskResult.DoesNotExist: TaskResult matching query does not exist.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/hub.py\", line 145, in fire_timers\r\n    entry()\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/timer.py\", line 68, in __call__\r\n    return self.fun(*self.args, **self.kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/worker/consumer/consumer.py\", line 477, in apply_eta_task\r\n    self.on_task_request(task)\r\n  File \"/lib/python3.6/site-packages/celery/worker/worker.py\", line 223, in _process_task_sem\r\n    return self._quick_acquire(self._process_task, req)\r\n  File \"/lib/python3.6/site-packages/kombu/asynchronous/semaphore.py\", line 62, in acquire\r\n    callback(*partial_args, **partial_kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/worker/worker.py\", line 228, in _process_task\r\n    req.execute_using_pool(self.pool)\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 518, in execute_using_pool\r\n    if (self.expires or task_id in revoked_tasks) and self.revoked():\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 280, in revoked\r\n    'expired' if expired else 'revoked', False, None, expired,\r\n  File \"/lib/python3.6/site-packages/celery/worker/request.py\", line 263, in _announce_revoked\r\n    self.id, reason, request=self, store_result=self.store_errors,\r\n  File \"/lib/python3.6/site-packages/celery/backends/base.py\", line 191, in mark_as_revoked\r\n    traceback=None, request=request)\r\n  File \"/lib/python3.6/site-packages/celery/backends/base.py\", line 322, in store_result\r\n    request=request, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django_celery_results/backends/database.py\", line 35, in _store_result\r\n    task_kwargs=task_kwargs,\r\n  File \"/lib/python3.6/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n    return fun(*args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django_celery_results/managers.py\", line 126, in store_result\r\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n  File \"/lib/python3.6/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 488, in get_or_create\r\n    return self._create_object_from_params(lookup, params)\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 521, in _create_object_from_params\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/lib/python3.6/site-packages/django/db/models/query.py\", line 521, in <dictcomp>\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/lib/python3.6/site-packages/celery/app/trace.py\", line 642, in __protected_call__\r\n    return orig(self, *args, **kwargs)\r\n  File \"/lib/python3.6/site-packages/celery/app/task.py\", line 375, in __call__\r\n    return self.run(*args, **kwargs)\r\nTypeError: delayed_print() missing 1 required positional argument: 'message'\r\n```\r\nThe worker will now be frozen. It will continue to print messages of tasks it receives, but will never execute them.\r\n(This action needs to repeat as many times as there are concurrent workers in order to completely stop all operations).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/85", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/85/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/85/events", "html_url": "https://github.com/celery/django-celery-results/issues/85", "id": 403728874, "node_id": "MDU6SXNzdWU0MDM3Mjg4NzQ=", "number": 85, "title": "Django 2.1 support ", "user": {"login": "barseghyanartur", "id": 4925587, "node_id": "MDQ6VXNlcjQ5MjU1ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/4925587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barseghyanartur", "html_url": "https://github.com/barseghyanartur", "followers_url": "https://api.github.com/users/barseghyanartur/followers", "following_url": "https://api.github.com/users/barseghyanartur/following{/other_user}", "gists_url": "https://api.github.com/users/barseghyanartur/gists{/gist_id}", "starred_url": "https://api.github.com/users/barseghyanartur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barseghyanartur/subscriptions", "organizations_url": "https://api.github.com/users/barseghyanartur/orgs", "repos_url": "https://api.github.com/users/barseghyanartur/repos", "events_url": "https://api.github.com/users/barseghyanartur/events{/privacy}", "received_events_url": "https://api.github.com/users/barseghyanartur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-28T09:52:47Z", "updated_at": "2019-05-06T07:03:46Z", "closed_at": "2019-05-06T03:41:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any hope for Django 2.1 support soon? I did try tests (clone, install reqs, then `py.test -xv` - they fail).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/83", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/83/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/83/events", "html_url": "https://github.com/celery/django-celery-results/issues/83", "id": 391859652, "node_id": "MDU6SXNzdWUzOTE4NTk2NTI=", "number": 83, "title": "Unknown System Variable 'tx_isolation' when using MySQL 8", "user": {"login": "Planswalker", "id": 15692311, "node_id": "MDQ6VXNlcjE1NjkyMzEx", "avatar_url": "https://avatars0.githubusercontent.com/u/15692311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Planswalker", "html_url": "https://github.com/Planswalker", "followers_url": "https://api.github.com/users/Planswalker/followers", "following_url": "https://api.github.com/users/Planswalker/following{/other_user}", "gists_url": "https://api.github.com/users/Planswalker/gists{/gist_id}", "starred_url": "https://api.github.com/users/Planswalker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Planswalker/subscriptions", "organizations_url": "https://api.github.com/users/Planswalker/orgs", "repos_url": "https://api.github.com/users/Planswalker/repos", "events_url": "https://api.github.com/users/Planswalker/events{/privacy}", "received_events_url": "https://api.github.com/users/Planswalker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419792594, "node_id": "MDU6TGFiZWw0MTk3OTI1OTQ=", "url": "https://api.github.com/repos/celery/django-celery-results/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-17T19:36:03Z", "updated_at": "2019-05-30T20:08:41Z", "closed_at": "2019-05-30T20:08:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\n\r\nI recently have created a set of celery tasks using django_celery_results on a Mysql 8 backend. Most of the time this works well, but recently I've seen the following error while waiting for celery tasks to complete:\r\n\r\n`_mysql_exceptions.OperationalError: (1193, \"Unknown system variable 'tx_isolation'\")`\r\n\r\nWhen tracing the error I was able to locate the following in managers.py:\r\n\r\n```   \r\n def warn_if_repeatable_read(self):\r\n        if 'mysql' in self.current_engine().lower():\r\n            cursor = self.connection_for_read().cursor()\r\n            if cursor.execute('SELECT @@tx_isolation'):\r\n                isolation = cursor.fetchone()[0]\r\n                if isolation == 'REPEATABLE-READ':\r\n                    warnings.warn(TxIsolationWarning(W_ISOLATION_REP.strip()))\r\n```\r\n\r\nWhich I am pretty sure is the cause of this issue - `tx_isolation` was deprecated in MySQL 5.7 ([see here](https://dev.mysql.com/doc/refman/5.7/en/added-deprecated-removed.html#optvars-deprecated)) and MySQL 8 changed the name of the system variable from `tx_isolation` to `transaction_isolation` ([see here](https://dev.mysql.com/doc/refman/8.0/en/mysql-nutshell.html#mysql-nutshell-removals))\r\n\r\nThanks! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/81", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/81/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/81/events", "html_url": "https://github.com/celery/django-celery-results/issues/81", "id": 390268764, "node_id": "MDU6SXNzdWUzOTAyNjg3NjQ=", "number": 81, "title": "Can not get state before task finished", "user": {"login": "zhaoxin", "id": 324931, "node_id": "MDQ6VXNlcjMyNDkzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/324931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhaoxin", "html_url": "https://github.com/zhaoxin", "followers_url": "https://api.github.com/users/zhaoxin/followers", "following_url": "https://api.github.com/users/zhaoxin/following{/other_user}", "gists_url": "https://api.github.com/users/zhaoxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhaoxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhaoxin/subscriptions", "organizations_url": "https://api.github.com/users/zhaoxin/orgs", "repos_url": "https://api.github.com/users/zhaoxin/repos", "events_url": "https://api.github.com/users/zhaoxin/events{/privacy}", "received_events_url": "https://api.github.com/users/zhaoxin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-12T15:09:24Z", "updated_at": "2019-09-03T13:14:22Z", "closed_at": "2018-12-12T15:25:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Seems that if I use 'django-db' as result backend, AsyncResult would always return 'pending' before task finished. Any workaround?\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/79", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/79/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/79/events", "html_url": "https://github.com/celery/django-celery-results/issues/79", "id": 388740527, "node_id": "MDU6SXNzdWUzODg3NDA1Mjc=", "number": 79, "title": "delete_expired does not send deletion related signal", "user": {"login": "m-hu", "id": 2564015, "node_id": "MDQ6VXNlcjI1NjQwMTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2564015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-hu", "html_url": "https://github.com/m-hu", "followers_url": "https://api.github.com/users/m-hu/followers", "following_url": "https://api.github.com/users/m-hu/following{/other_user}", "gists_url": "https://api.github.com/users/m-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-hu/subscriptions", "organizations_url": "https://api.github.com/users/m-hu/orgs", "repos_url": "https://api.github.com/users/m-hu/repos", "events_url": "https://api.github.com/users/m-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/m-hu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-07T17:11:37Z", "updated_at": "2018-12-10T16:57:02Z", "closed_at": "2018-12-10T16:57:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "function **django_celery_results/managers.py: delete_expired** does not send django standard deletion related signal, i.e. **pre_delete**, **post_delete**\r\n\r\nThis may lead to potential errors if the TaskResult model is referenced as a ManyToManyField.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/77", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/77/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/77/events", "html_url": "https://github.com/celery/django-celery-results/issues/77", "id": 380303405, "node_id": "MDU6SXNzdWUzODAzMDM0MDU=", "number": 77, "title": "Migrations issue", "user": {"login": "mrbish", "id": 5868289, "node_id": "MDQ6VXNlcjU4NjgyODk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5868289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrbish", "html_url": "https://github.com/mrbish", "followers_url": "https://api.github.com/users/mrbish/followers", "following_url": "https://api.github.com/users/mrbish/following{/other_user}", "gists_url": "https://api.github.com/users/mrbish/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrbish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrbish/subscriptions", "organizations_url": "https://api.github.com/users/mrbish/orgs", "repos_url": "https://api.github.com/users/mrbish/repos", "events_url": "https://api.github.com/users/mrbish/events{/privacy}", "received_events_url": "https://api.github.com/users/mrbish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-13T16:10:50Z", "updated_at": "2018-11-13T17:11:24Z", "closed_at": "2018-11-13T17:11:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I faced with migration issue after update to 1.0.3:\r\n```\r\nTraceback (most recent call last):\r\n  File \"manage.py\", line 25, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/__init__.py\", line 375, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/base.py\", line 316, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/base.py\", line 353, in execute\r\n    output = self.handle(*args, **options)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/base.py\", line 83, in wrapped\r\n    res = handle_func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/commands/migrate.py\", line 82, in handle\r\n    executor = MigrationExecutor(connection, self.migration_progress_callback)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/executor.py\", line 18, in __init__\r\n    self.loader = MigrationLoader(self.connection)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/loader.py\", line 49, in __init__\r\n    self.build_graph()\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/loader.py\", line 273, in build_graph\r\n    raise exc\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/loader.py\", line 247, in build_graph\r\n    self.graph.validate_consistency()\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/graph.py\", line 243, in validate_consistency\r\n    [n.raise_error() for n in self.node_map.values() if isinstance(n, DummyNode)]\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/graph.py\", line 243, in <listcomp>\r\n    [n.raise_error() for n in self.node_map.values() if isinstance(n, DummyNode)]\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/migrations/graph.py\", line 96, in raise_error\r\n    raise NodeNotFoundError(self.error_message, self.key, origin=self.origin)\r\ndjango.db.migrations.exceptions.NodeNotFoundError: Migration django_celery_results.0002_add_task_name_args_kwargs dependencies reference nonexistent parent node ('celery_results', '0001_initial')\r\n```\r\nBut 1.0.1 works correctly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/75", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/75/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/75/events", "html_url": "https://github.com/celery/django-celery-results/issues/75", "id": 380003989, "node_id": "MDU6SXNzdWUzODAwMDM5ODk=", "number": 75, "title": "New app config changes the app_label for django_celery_results", "user": {"login": "LegoStormtroopr", "id": 2173174, "node_id": "MDQ6VXNlcjIxNzMxNzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/2173174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LegoStormtroopr", "html_url": "https://github.com/LegoStormtroopr", "followers_url": "https://api.github.com/users/LegoStormtroopr/followers", "following_url": "https://api.github.com/users/LegoStormtroopr/following{/other_user}", "gists_url": "https://api.github.com/users/LegoStormtroopr/gists{/gist_id}", "starred_url": "https://api.github.com/users/LegoStormtroopr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LegoStormtroopr/subscriptions", "organizations_url": "https://api.github.com/users/LegoStormtroopr/orgs", "repos_url": "https://api.github.com/users/LegoStormtroopr/repos", "events_url": "https://api.github.com/users/LegoStormtroopr/events{/privacy}", "received_events_url": "https://api.github.com/users/LegoStormtroopr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-13T00:14:34Z", "updated_at": "2018-11-15T18:26:25Z", "closed_at": "2018-11-15T18:26:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "This will cause migrations to break if people had foreign keys to django_celery_results models.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/74", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/74/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/74/events", "html_url": "https://github.com/celery/django-celery-results/issues/74", "id": 379585438, "node_id": "MDU6SXNzdWUzNzk1ODU0Mzg=", "number": 74, "title": "Support for revoked tasks", "user": {"login": "Noxwizard", "id": 442353, "node_id": "MDQ6VXNlcjQ0MjM1Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/442353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Noxwizard", "html_url": "https://github.com/Noxwizard", "followers_url": "https://api.github.com/users/Noxwizard/followers", "following_url": "https://api.github.com/users/Noxwizard/following{/other_user}", "gists_url": "https://api.github.com/users/Noxwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/Noxwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Noxwizard/subscriptions", "organizations_url": "https://api.github.com/users/Noxwizard/orgs", "repos_url": "https://api.github.com/users/Noxwizard/repos", "events_url": "https://api.github.com/users/Noxwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/Noxwizard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-12T01:01:22Z", "updated_at": "2018-11-12T16:55:15Z", "closed_at": "2018-11-12T16:55:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is this library supposed to be able to support task revocation? I've run into a problem where Celery flags the task as revoked, states that it's discarding it, but then attempts to run it. Additionally, since revoked tasks don't get their arguments passed along from Celery, the task is called without them and causes exceptions to occur. I've traced this back to my use of the django-celery-results library.\r\n\r\nWhen a task is revoked, Celery's [`mark_as_revoked()`](https://github.com/celery/celery/blob/v4.2.1/celery/backends/base.py#L190) method makes a call to `store_result()` to store the revocation as the result, provided the task's call didn't have `ignore_result` set to True. This eventually calls into django-celery-results' [`store_result()`](https://github.com/celery/django-celery-results/blob/master/django_celery_results/managers.py#L126) which calls into Django to create an instance of (and run!) the task.\r\n\r\nVersions:\r\n- Celery: 4.2.1\r\n- Django: 1.11.16\r\n- django-celery-results: master\r\n\r\nBroker: RabbitMQ\r\nResult Backend: django-db\r\n\r\nSimple reproduction code:\r\ntasks.py:\r\n```\r\nfrom __future__ import absolute_import, unicode_literals\r\nfrom django_celery.celery import app\r\n\r\n@app.task\r\ndef add(x, y):\r\n    return x + y\r\n\r\n@app.task\r\ndef add_no_crash(*args, **kwargs):\r\n    print('In add_no_crash()')\r\n\r\n    if len(args) == 2:\r\n        x = args[0]\r\n        y = args[1]\r\n        return x + y\r\n\r\n    return None\r\n```\r\nThe second task is simply to show that it does actually enter and run the task.\r\n\r\nA simple task runner:\r\n```\r\nimport django\r\nimport os\r\nimport datetime\r\n\r\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"django_celery.settings\")\r\ndjango.setup()\r\n\r\nfrom celery_test.tasks import add\r\nfrom celery.result import AsyncResult\r\nfrom time import sleep\r\n\r\nnow = datetime.datetime.utcnow()\r\nrunat = now + datetime.timedelta(seconds=30)\r\nprint('Time is: {}'.format(now))\r\nprint('Task scheduled to run at: {}'.format(runat))\r\nresult = add.apply_async((1,2), eta=runat)\r\nprint('Task ID: {}'.format(result.task_id))\r\nsleep(5)\r\nprint('Revoking task')\r\nAsyncResult(result.task_id).revoke()\r\n```\r\n\r\nResults:\r\n```\r\n[2018-11-11 22:08:34,323: INFO/MainProcess] Received task: celery_test.tasks.add[7a4bf100-ca02-4e32-ab9d-a6552e9e939e]  ETA:[2018-11-11 22:09:34.290097+00:00] \r\n[2018-11-11 22:08:34,335: INFO/MainProcess] Tasks flagged as revoked: 7a4bf100-ca02-4e32-ab9d-a6552e9e939e\r\n[2018-11-11 22:09:34,290: INFO/MainProcess] Discarding revoked task: celery_test.tasks.add[7a4bf100-ca02-4e32-ab9d-a6552e9e939e]\r\n[2018-11-11 22:09:34,317: ERROR/MainProcess] Error in timer: TypeError(\"add() missing 2 required positional arguments: 'x' and 'y'\",)\r\nTraceback (most recent call last):\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django/db/models/query.py\", line 464, in get_or_create\r\n    return self.get(**lookup), False\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django/db/models/query.py\", line 380, in get\r\n    self.model._meta.object_name\r\ndjango_celery_results.models.DoesNotExist: TaskResult matching query does not exist.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/kombu/asynchronous/hub.py\", line 136, in fire_timers\r\n    entry()\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/kombu/asynchronous/timer.py\", line 68, in __call__\r\n    return self.fun(*self.args, **self.kwargs)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/worker/consumer/consumer.py\", line 477, in apply_eta_task\r\n    self.on_task_request(task)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/worker/worker.py\", line 223, in _process_task_sem\r\n    return self._quick_acquire(self._process_task, req)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/kombu/asynchronous/semaphore.py\", line 62, in acquire\r\n    callback(*partial_args, **partial_kwargs)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/worker/worker.py\", line 228, in _process_task\r\n    req.execute_using_pool(self.pool)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/worker/request.py\", line 518, in execute_using_pool\r\n    if (self.expires or task_id in revoked_tasks) and self.revoked():\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/worker/request.py\", line 280, in revoked\r\n    'expired' if expired else 'revoked', False, None, expired,\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/worker/request.py\", line 263, in _announce_revoked\r\n    self.id, reason, request=self, store_result=self.store_errors,\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/backends/base.py\", line 191, in mark_as_revoked\r\n    traceback=None, request=request)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/backends/base.py\", line 322, in store_result\r\n    request=request, **kwargs)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django_celery_results/backends/database.py\", line 35, in _store_result\r\n    task_kwargs=task_kwargs,\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n    return fun(*args, **kwargs)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django_celery_results/managers.py\", line 126, in store_result\r\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django/db/models/manager.py\", line 85, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django/db/models/query.py\", line 466, in get_or_create\r\n    return self._create_object_from_params(lookup, params)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django/db/models/query.py\", line 499, in _create_object_from_params\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/django/db/models/query.py\", line 499, in <dictcomp>\r\n    params = {k: v() if callable(v) else v for k, v in params.items()}\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/app/trace.py\", line 642, in __protected_call__\r\n    return orig(self, *args, **kwargs)\r\n  File \"/home/noxwizard/.virtualenvs/django-celery/lib/python3.6/site-packages/celery/app/task.py\", line 375, in __call__\r\n    return self.run(*args, **kwargs)\r\nTypeError: add() missing 2 required positional arguments: 'x' and 'y'\r\n```\r\n\r\nFor the time being, I've written a decorator that I use on each task that will automatically check to see if the task has been revoked and then bail if required. It would be nice to not need it though.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/70", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/70/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/70/events", "html_url": "https://github.com/celery/django-celery-results/issues/70", "id": 372305753, "node_id": "MDU6SXNzdWUzNzIzMDU3NTM=", "number": 70, "title": "Incorrect documentation on seting up `CELERY_CACHE_BACKEND`", "user": {"login": "AdriaanRol", "id": 6142932, "node_id": "MDQ6VXNlcjYxNDI5MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/6142932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdriaanRol", "html_url": "https://github.com/AdriaanRol", "followers_url": "https://api.github.com/users/AdriaanRol/followers", "following_url": "https://api.github.com/users/AdriaanRol/following{/other_user}", "gists_url": "https://api.github.com/users/AdriaanRol/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdriaanRol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdriaanRol/subscriptions", "organizations_url": "https://api.github.com/users/AdriaanRol/orgs", "repos_url": "https://api.github.com/users/AdriaanRol/repos", "events_url": "https://api.github.com/users/AdriaanRol/events{/privacy}", "received_events_url": "https://api.github.com/users/AdriaanRol/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-21T11:40:47Z", "updated_at": "2018-11-22T06:25:32Z", "closed_at": "2018-11-22T06:25:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "The [First steps with Django](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html) tutorial of the celery documentation describes what variables to set in the settings.py file of a Django project. \r\nIn the section \"`django-celery-results` - Using the Django ORM/Cache as a result backend\" it indicates that the following settings have to be set: \r\n\r\n```\r\nCELERY_RESULT_BACKEND = 'django-db'\r\nCELERY_RESULT_BACKEND = 'django-cache'\r\n```\r\n\r\nThis is obviously incorrect but nonetheless cost me significant time debugging before I spotted the mistake. \r\n\r\nThe correct settings should be :\r\n```\r\nCELERY_RESULT_BACKEND = 'django-db'\r\nCELERY_CACHE_BACKEND = 'django-cache'\r\n```\r\n\r\nThis bug is present in `v4.2.1` and `latest`. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/69", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/69/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/69/events", "html_url": "https://github.com/celery/django-celery-results/issues/69", "id": 367205682, "node_id": "MDU6SXNzdWUzNjcyMDU2ODI=", "number": 69, "title": "traceback is null", "user": {"login": "sorter", "id": 763548, "node_id": "MDQ6VXNlcjc2MzU0OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/763548?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sorter", "html_url": "https://github.com/sorter", "followers_url": "https://api.github.com/users/sorter/followers", "following_url": "https://api.github.com/users/sorter/following{/other_user}", "gists_url": "https://api.github.com/users/sorter/gists{/gist_id}", "starred_url": "https://api.github.com/users/sorter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sorter/subscriptions", "organizations_url": "https://api.github.com/users/sorter/orgs", "repos_url": "https://api.github.com/users/sorter/repos", "events_url": "https://api.github.com/users/sorter/events{/privacy}", "received_events_url": "https://api.github.com/users/sorter/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-05T13:12:56Z", "updated_at": "2019-05-06T03:47:30Z", "closed_at": "2019-05-06T03:47:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am having several tasks which are being reported with status `FAILURE` however the traceback field in the database result is null. Shouldn't the traceback contain a stack trace?\r\n\r\nAnother (potentially related) issue is that the `result` field is containing some strange unreadable data. Here are some sample rows. \r\n\r\nAny help into diagnosing the issue would be appreciated.\r\n\r\n```\r\ndevtaskresult=> select * from celery_taskmeta where status = 'FAILURE' and date_done > '2018-10-05 03:00' and date_done < '2018-10-05 04:00' order by id asc;        \r\n-[ RECORD 1 ]-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nid        | 6080263\r\ntask_id   | e1425dc2-00d6-42e6-8069-21cbe034fcac\r\nstatus    | FAILURE\r\nresult    | \\x80027d710128580b0000006578635f6d6573736167657102581900000054696d654c696d69744578636565646564283330302e302c2958080000006578635f747970657103551154696d654c696d697445786365656465647104752e\r\ndate_done | 2018-10-05 03:05:45.301703\r\ntraceback |\r\n-[ RECORD 2 ]-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nid        | 6080264\r\ntask_id   | 0fe13afe-2947-4765-8309-74ddd1132688\r\nstatus    | FAILURE\r\nresult    | \\x80027d710128580b0000006578635f6d6573736167657102581900000054696d654c696d69744578636565646564283330302e302c2958080000006578635f747970657103551154696d654c696d697445786365656465647104752e\r\ndate_done | 2018-10-05 03:10:47.547563\r\ntraceback |\r\n\r\ndevtaskresult=> select * from celery_taskmeta  where task_id = 'a9d85f18-6db8-4261-b88d-73e683e4c1f4';\r\n-[ RECORD 1 ]---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nid        | 6115068\r\ntask_id   | a9d85f18-6db8-4261-b88d-73e683e4c1f4\r\nstatus    | FAILURE\r\nresult    | \\x80027d710128580b0000006578635f6d6573736167657102474072c0000000000085580a0000006578635f6d6f64756c657103551362696c6c696172642e657863657074696f6e73710458080000006578635f747970657105551154696d654c696d697445786365656465647106752e\r\ndate_done | 2018-10-05 13:08:57.323079\r\ntraceback |\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/68", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/68/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/68/events", "html_url": "https://github.com/celery/django-celery-results/issues/68", "id": 366893276, "node_id": "MDU6SXNzdWUzNjY4OTMyNzY=", "number": 68, "title": "missing migration", "user": {"login": "jaredmcdonald", "id": 3476784, "node_id": "MDQ6VXNlcjM0NzY3ODQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/3476784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredmcdonald", "html_url": "https://github.com/jaredmcdonald", "followers_url": "https://api.github.com/users/jaredmcdonald/followers", "following_url": "https://api.github.com/users/jaredmcdonald/following{/other_user}", "gists_url": "https://api.github.com/users/jaredmcdonald/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredmcdonald/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredmcdonald/subscriptions", "organizations_url": "https://api.github.com/users/jaredmcdonald/orgs", "repos_url": "https://api.github.com/users/jaredmcdonald/repos", "events_url": "https://api.github.com/users/jaredmcdonald/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredmcdonald/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-04T17:28:36Z", "updated_at": "2018-12-03T22:30:52Z", "closed_at": "2018-12-03T22:30:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "with a fresh install (django version 2.1.2) I'm getting a migration not committed to source:\r\n\r\n```\r\nMigrations for 'celery_results':\r\n  /path/to/virtualenv/lib/python3.6/site-packages/django_celery_results/migrations/0003_auto_20181004_1724.py\r\n    - Change Meta options on taskresult\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/67", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/67/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/67/events", "html_url": "https://github.com/celery/django-celery-results/issues/67", "id": 359671073, "node_id": "MDU6SXNzdWUzNTk2NzEwNzM=", "number": 67, "title": "Quick Question: Using the cache backend, when does the result expire?", "user": {"login": "fxfitz", "id": 6355826, "node_id": "MDQ6VXNlcjYzNTU4MjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6355826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxfitz", "html_url": "https://github.com/fxfitz", "followers_url": "https://api.github.com/users/fxfitz/followers", "following_url": "https://api.github.com/users/fxfitz/following{/other_user}", "gists_url": "https://api.github.com/users/fxfitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxfitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxfitz/subscriptions", "organizations_url": "https://api.github.com/users/fxfitz/orgs", "repos_url": "https://api.github.com/users/fxfitz/repos", "events_url": "https://api.github.com/users/fxfitz/events{/privacy}", "received_events_url": "https://api.github.com/users/fxfitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419792599, "node_id": "MDU6TGFiZWw0MTk3OTI1OTk=", "url": "https://api.github.com/repos/celery/django-celery-results/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-12T22:10:55Z", "updated_at": "2019-05-16T05:04:29Z", "closed_at": "2019-05-16T05:04:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "How does expiry work when using the cache result backend?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/66", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/66/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/66/events", "html_url": "https://github.com/celery/django-celery-results/issues/66", "id": 357393239, "node_id": "MDU6SXNzdWUzNTczOTMyMzk=", "number": 66, "title": "ProgrammingError: relation \"celery_results_taskresult\" does not exist LINE 1: SELECT COUNT(*) AS \"__count\" FROM \"celery_results_taskresult...", "user": {"login": "ACPK", "id": 2019893, "node_id": "MDQ6VXNlcjIwMTk4OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2019893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ACPK", "html_url": "https://github.com/ACPK", "followers_url": "https://api.github.com/users/ACPK/followers", "following_url": "https://api.github.com/users/ACPK/following{/other_user}", "gists_url": "https://api.github.com/users/ACPK/gists{/gist_id}", "starred_url": "https://api.github.com/users/ACPK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ACPK/subscriptions", "organizations_url": "https://api.github.com/users/ACPK/orgs", "repos_url": "https://api.github.com/users/ACPK/repos", "events_url": "https://api.github.com/users/ACPK/events{/privacy}", "received_events_url": "https://api.github.com/users/ACPK/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-05T20:37:52Z", "updated_at": "2019-05-06T03:50:45Z", "closed_at": "2019-05-06T03:50:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I tried out the master version (1.0.2), I receive the following error when visiting /admin/celery_results/taskresult.\r\n\r\n    ProgrammingError: relation \"celery_results_taskresult\" does not exist\r\n    LINE 1: SELECT COUNT(*) AS \"__count\" FROM \"celery_results_taskresult...\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/61", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/61/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/61/events", "html_url": "https://github.com/celery/django-celery-results/issues/61", "id": 345062114, "node_id": "MDU6SXNzdWUzNDUwNjIxMTQ=", "number": 61, "title": "New release?", "user": {"login": "xfxf", "id": 138684, "node_id": "MDQ6VXNlcjEzODY4NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/138684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xfxf", "html_url": "https://github.com/xfxf", "followers_url": "https://api.github.com/users/xfxf/followers", "following_url": "https://api.github.com/users/xfxf/following{/other_user}", "gists_url": "https://api.github.com/users/xfxf/gists{/gist_id}", "starred_url": "https://api.github.com/users/xfxf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xfxf/subscriptions", "organizations_url": "https://api.github.com/users/xfxf/orgs", "repos_url": "https://api.github.com/users/xfxf/repos", "events_url": "https://api.github.com/users/xfxf/events{/privacy}", "received_events_url": "https://api.github.com/users/xfxf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "thedrow", "id": 48936, "node_id": "MDQ6VXNlcjQ4OTM2", "avatar_url": "https://avatars2.githubusercontent.com/u/48936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thedrow", "html_url": "https://github.com/thedrow", "followers_url": "https://api.github.com/users/thedrow/followers", "following_url": "https://api.github.com/users/thedrow/following{/other_user}", "gists_url": "https://api.github.com/users/thedrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thedrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thedrow/subscriptions", "organizations_url": "https://api.github.com/users/thedrow/orgs", "repos_url": "https://api.github.com/users/thedrow/repos", "events_url": "https://api.github.com/users/thedrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thedrow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "thedrow", "id": 48936, "node_id": "MDQ6VXNlcjQ4OTM2", "avatar_url": "https://avatars2.githubusercontent.com/u/48936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thedrow", "html_url": "https://github.com/thedrow", "followers_url": "https://api.github.com/users/thedrow/followers", "following_url": "https://api.github.com/users/thedrow/following{/other_user}", "gists_url": "https://api.github.com/users/thedrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thedrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thedrow/subscriptions", "organizations_url": "https://api.github.com/users/thedrow/orgs", "repos_url": "https://api.github.com/users/thedrow/repos", "events_url": "https://api.github.com/users/thedrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thedrow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-07-27T01:48:30Z", "updated_at": "2018-11-12T15:36:27Z", "closed_at": "2018-11-12T15:36:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi - now that Celery 4.2 is released, is it possible to do a new release?  I've been using a Celery 4.2 pre-release for a while and had to point to a later django-celery-results commit for it to work (4cc5f274b5d59d72f243e15d2d67c02a410b8b1d); I don't recall why (it wouldn't have been due to that specific commit; that was probably just the latest at the time I did it). \r\n\r\nLast release was quite some time ago.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/58", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/58/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/58/events", "html_url": "https://github.com/celery/django-celery-results/issues/58", "id": 342529255, "node_id": "MDU6SXNzdWUzNDI1MjkyNTU=", "number": 58, "title": "OperationalError: (2006, 'MySQL server has gone away') after upgrading from celery 4.1.0 to 4.2.0", "user": {"login": "mghantous", "id": 3407536, "node_id": "MDQ6VXNlcjM0MDc1MzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/3407536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mghantous", "html_url": "https://github.com/mghantous", "followers_url": "https://api.github.com/users/mghantous/followers", "following_url": "https://api.github.com/users/mghantous/following{/other_user}", "gists_url": "https://api.github.com/users/mghantous/gists{/gist_id}", "starred_url": "https://api.github.com/users/mghantous/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mghantous/subscriptions", "organizations_url": "https://api.github.com/users/mghantous/orgs", "repos_url": "https://api.github.com/users/mghantous/repos", "events_url": "https://api.github.com/users/mghantous/events{/privacy}", "received_events_url": "https://api.github.com/users/mghantous/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1363752040, "node_id": "MDU6TGFiZWwxMzYzNzUyMDQw", "url": "https://api.github.com/repos/celery/django-celery-results/labels/celery%20core", "name": "celery core", "color": "6f0cad", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-07-18T23:45:04Z", "updated_at": "2019-05-16T05:02:18Z", "closed_at": "2019-05-16T05:01:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using an amqp broker and the following packages: \r\n```\r\nDjango==1.11.14\r\ndjango-celery-results==1.0.1\r\namqp==2.3.2\r\nkombu==4.2.1\r\n```\r\n\r\nAfter upgrading from celery 4.1.0 to 4.2.0, I am getting the following error:\r\n\r\n```bash\r\n[2018-07-18 18:47:02,439: ERROR/ForkPoolWorker-1] Task my_app.common.tasks.echo[f8e242bf-14af-48c7-a20f-9d6d94e4cc45] raised unexpected: OperationalError(2006, 'MySQL server has gone away')\r\nTraceback (most recent call last):\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/celery/app/trace.py\", line 442, in trace_task\r\n    uuid, retval, task_request, publish_result,\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/celery/backends/base.py\", line 146, in mark_as_done\r\n    self.store_result(task_id, result, state, request=request)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/celery/backends/base.py\", line 322, in store_result\r\n    request=request, **kwargs)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django_celery_results/backends/database.py\", line 29, in _store_result\r\n    meta=meta,\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django_celery_results/managers.py\", line 50, in _inner\r\n    return fun(*args, **kwargs)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django_celery_results/managers.py\", line 119, in store_result\r\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/manager.py\", line 85, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 464, in get_or_create\r\n    return self.get(**lookup), False\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 374, in get\r\n    num = len(clone)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 232, in __len__\r\n    self._fetch_all()\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\r\n    self._result_cache = list(self._iterable_class(self))\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 53, in __iter__\r\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\r\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 899, in execute_sql\r\n    raise original_exception\r\nOperationalError: (2006, 'MySQL server has gone away')\r\n```\r\n\r\nThe strange part is the task result actually makes it to the database.\r\n\r\n```python\r\nIn [3]: vars(TaskResult.objects.get(task_id='f8e242bf-14af-48c7-a20f-9d6d94e4cc45'))\r\nlims.settings django.db.backends DEBUG (0.002) SELECT `django_celery_results_taskresult`.`id`, `django_celery_results_taskresult`.`task_id`, `django_celery_results_taskresult`.`status`, `django_celery_results_taskresult`.`content_type`, `django_celery_results_taskresult`.`content_encoding`, `django_celery_results_taskresult`.`result`, `django_celery_results_taskresult`.`date_done`, `django_celery_results_taskresult`.`traceback`, `django_celery_results_taskresult`.`hidden`, `django_celery_results_taskresult`.`meta` FROM `django_celery_results_taskresult` WHERE `django_celery_results_taskresult`.`task_id` = 'f8e242bf-14af-48c7-a20f-9d6d94e4cc45'; args=('f8e242bf-14af-48c7-a20f-9d6d94e4cc45',)\r\nlims.settings django.db.backends DEBUG (0.002) SELECT `django_celery_results_taskresult`.`id`, `django_celery_results_taskresult`.`task_id`, `django_celery_results_taskresult`.`status`, `django_celery_results_taskresult`.`content_type`, `django_celery_results_taskresult`.`content_encoding`, `django_celery_results_taskresult`.`result`, `django_celery_results_taskresult`.`date_done`, `django_celery_results_taskresult`.`traceback`, `django_celery_results_taskresult`.`hidden`, `django_celery_results_taskresult`.`meta` FROM `django_celery_results_taskresult` WHERE `django_celery_results_taskresult`.`task_id` = 'f8e242bf-14af-48c7-a20f-9d6d94e4cc45'; args=('f8e242bf-14af-48c7-a20f-9d6d94e4cc45',)\r\nOut[3]:\r\n{'_state': <django.db.models.base.ModelState at 0x7fc6f86acfd0>,\r\n 'content_encoding': u'utf-8',\r\n 'content_type': u'application/json',\r\n 'date_done': datetime.datetime(2018, 7, 18, 18, 47, 2),\r\n 'hidden': False,\r\n 'id': 7L,\r\n 'meta': u'{\"children\": []}',\r\n 'result': u'{\"exc_message\": [2006, \"MySQL server has gone away\"], \"exc_module\": \"django.db.utils\", \"exc_type\": \"OperationalError\"}',\r\n 'status': u'FAILURE',\r\n 'task_id': u'f8e242bf-14af-48c7-a20f-9d6d94e4cc45',\r\n 'traceback': u'Traceback (most recent call last):\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/celery/app/trace.py\", line 442, in trace_task\\n    uuid, retval, task_request, publish_result,\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/celery/backends/base.py\", line 146, in mark_as_done\\n    self.store_result(task_id, result, state, request=request)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/celery/backends/base.py\", line 322, in store_result\\n    request=request, **kwargs)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django_celery_results/backends/database.py\", line 29, in _store_result\\n    meta=meta,\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django_celery_results/managers.py\", line 50, in _inner\\n    return fun(*args, **kwargs)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django_celery_results/managers.py\", line 119, in store_result\\n    obj, created = self.get_or_create(task_id=task_id, defaults=fields)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/manager.py\", line 85, in manager_method\\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 464, in get_or_create\\n    return self.get(**lookup), False\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 374, in get\\n    num = len(clone)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 232, in __len__\\n    self._fetch_all()\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\\n    self._result_cache = list(self._iterable_class(self))\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/query.py\", line 53, in __iter__\\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\\n  File \"/srv/my_app/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 899, in execute_sql\\n    raise original_exception\\nOperationalError: (2006, \\'MySQL server has gone away\\')\\n'}\r\n ```\r\n\r\n\r\nIf I switch to an rpc result backend instead of django-db, the issue goes away and the task succeeds. Is there a compatibility problem between django-celery-results==1.0.1 and celery==4.2.0?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/57", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/57/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/57/events", "html_url": "https://github.com/celery/django-celery-results/issues/57", "id": 341379477, "node_id": "MDU6SXNzdWUzNDEzNzk0Nzc=", "number": 57, "title": "How to get the task_id generated by crontab task", "user": {"login": "NoSongmaster", "id": 25659914, "node_id": "MDQ6VXNlcjI1NjU5OTE0", "avatar_url": "https://avatars0.githubusercontent.com/u/25659914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NoSongmaster", "html_url": "https://github.com/NoSongmaster", "followers_url": "https://api.github.com/users/NoSongmaster/followers", "following_url": "https://api.github.com/users/NoSongmaster/following{/other_user}", "gists_url": "https://api.github.com/users/NoSongmaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/NoSongmaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NoSongmaster/subscriptions", "organizations_url": "https://api.github.com/users/NoSongmaster/orgs", "repos_url": "https://api.github.com/users/NoSongmaster/repos", "events_url": "https://api.github.com/users/NoSongmaster/events{/privacy}", "received_events_url": "https://api.github.com/users/NoSongmaster/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-16T03:14:40Z", "updated_at": "2019-07-10T16:34:56Z", "closed_at": "2019-07-10T16:34:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run task, I can get the result of task through django_celery_result, but task can not find the one-to-one correspondence with the result.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/53", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/53/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/53/events", "html_url": "https://github.com/celery/django-celery-results/issues/53", "id": 329524466, "node_id": "MDU6SXNzdWUzMjk1MjQ0NjY=", "number": 53, "title": " UUIDField instead of sequence id", "user": {"login": "neg3ntropy", "id": 1849552, "node_id": "MDQ6VXNlcjE4NDk1NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1849552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neg3ntropy", "html_url": "https://github.com/neg3ntropy", "followers_url": "https://api.github.com/users/neg3ntropy/followers", "following_url": "https://api.github.com/users/neg3ntropy/following{/other_user}", "gists_url": "https://api.github.com/users/neg3ntropy/gists{/gist_id}", "starred_url": "https://api.github.com/users/neg3ntropy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neg3ntropy/subscriptions", "organizations_url": "https://api.github.com/users/neg3ntropy/orgs", "repos_url": "https://api.github.com/users/neg3ntropy/repos", "events_url": "https://api.github.com/users/neg3ntropy/events{/privacy}", "received_events_url": "https://api.github.com/users/neg3ntropy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-05T16:04:17Z", "updated_at": "2019-05-06T04:02:20Z", "closed_at": "2019-05-06T04:02:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is not currently causing me any real issue, but I was wondering if there is a reason to have an id other than the task_id from celery itself.\r\n\r\nYou save a sequence a column and index.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/51", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/51/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/51/events", "html_url": "https://github.com/celery/django-celery-results/issues/51", "id": 321885804, "node_id": "MDU6SXNzdWUzMjE4ODU4MDQ=", "number": 51, "title": "Wrong application name in 0002 migration", "user": {"login": "danie1k", "id": 7894107, "node_id": "MDQ6VXNlcjc4OTQxMDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7894107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danie1k", "html_url": "https://github.com/danie1k", "followers_url": "https://api.github.com/users/danie1k/followers", "following_url": "https://api.github.com/users/danie1k/following{/other_user}", "gists_url": "https://api.github.com/users/danie1k/gists{/gist_id}", "starred_url": "https://api.github.com/users/danie1k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danie1k/subscriptions", "organizations_url": "https://api.github.com/users/danie1k/orgs", "repos_url": "https://api.github.com/users/danie1k/repos", "events_url": "https://api.github.com/users/danie1k/events{/privacy}", "received_events_url": "https://api.github.com/users/danie1k/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-10T10:34:05Z", "updated_at": "2019-03-19T21:08:45Z", "closed_at": "2019-03-19T21:08:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "#34 introduced new migration `0002_add_task_name_args_kwargs` with following dependencies:\r\n```\r\n    dependencies = [\r\n        ('celery_results', '0001_initial'),\r\n    ]\r\n```\r\nbut application name is `django_celery_results`, **not** `celery_results`.\r\n\r\nThat causes following issue, after installing package:\r\n```\r\ndjango.db.migrations.exceptions.NodeNotFoundError: Migration django_celery_results.0002_add_task_name_args_kwargs dependencies reference nonexistent parent node ('celery_results', '0001_initial')\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/50", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/50/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/50/events", "html_url": "https://github.com/celery/django-celery-results/issues/50", "id": 309566007, "node_id": "MDU6SXNzdWUzMDk1NjYwMDc=", "number": 50, "title": "DecodeError: \"invalid load key\" with CELERY_RESULT_SERIALIZER = 'pickle'", "user": {"login": "inducer", "id": 352067, "node_id": "MDQ6VXNlcjM1MjA2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/352067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inducer", "html_url": "https://github.com/inducer", "followers_url": "https://api.github.com/users/inducer/followers", "following_url": "https://api.github.com/users/inducer/following{/other_user}", "gists_url": "https://api.github.com/users/inducer/gists{/gist_id}", "starred_url": "https://api.github.com/users/inducer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inducer/subscriptions", "organizations_url": "https://api.github.com/users/inducer/orgs", "repos_url": "https://api.github.com/users/inducer/repos", "events_url": "https://api.github.com/users/inducer/events{/privacy}", "received_events_url": "https://api.github.com/users/inducer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-28T23:18:00Z", "updated_at": "2019-05-06T04:09:25Z", "closed_at": "2019-05-06T04:09:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Django 2.0.3, SQLite database, django-celery-results 1.0.1\r\n\r\nHere is what it's trying to unpickle:\r\n\r\n```\r\n_trusted_content | frozenset({'application/data', 'application/text'})\r\n-- | --\r\naccept | {'application/json', 'application/x-python-serialize'}\r\ncontent_encoding | 'binary'\r\ncontent_type | 'application/x-python-serialize'\r\ndata | (b'n\\x00\\t\\xf5\\xc4\\x01` \\x00\\x00\\x01\\x8d\\xa1\\xa5\\xb1\\x91\\xc9\\x95\\xb9\\xc4'  b'\\x05u\\xc4\\t\\xcc\\xb8')\r\ndecode | <function unpickle at 0x7f9b91935d08>\r\nforce | False\r\nself | <kombu.serialization.SerializerRegistry object at 0x7f9b91938518>\r\n```\r\n\r\nSample traceback: <details>\r\n\r\n```\r\nEnvironment:\r\n\r\nRequest Method: GET\r\nRequest URL: http://localhost:8000/monitor-task/9d49ffda-9f80-4862-a8b6-ed23b8f50224\r\n\r\nDjango Version: 2.0.3\r\nPython Version: 3.6.5\r\nInstalled Applications:\r\n('django.contrib.admin',\r\n 'django.contrib.auth',\r\n 'django.contrib.contenttypes',\r\n 'django.contrib.sessions',\r\n 'django.contrib.messages',\r\n 'django.contrib.staticfiles',\r\n 'crispy_forms',\r\n 'jsonfield',\r\n 'bootstrap3_datetime',\r\n 'django_select2',\r\n 'django_celery_results',\r\n 'accounts',\r\n 'course')\r\nInstalled Middleware:\r\n('django.contrib.sessions.middleware.SessionMiddleware',\r\n 'django.middleware.locale.LocaleMiddleware',\r\n 'django.middleware.common.CommonMiddleware',\r\n 'django.middleware.csrf.CsrfViewMiddleware',\r\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\r\n 'django.contrib.messages.middleware.MessageMiddleware',\r\n 'django.middleware.clickjacking.XFrameOptionsMiddleware',\r\n 'course.auth.ImpersonateMiddleware',\r\n 'course.utils.FacilityFindingMiddleware',\r\n 'course.exam.ExamFacilityMiddleware',\r\n 'course.exam.ExamLockdownMiddleware',\r\n 'relate.utils.MaintenanceMiddleware')\r\n\r\n\r\n\r\nTraceback:\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in _reraise_errors\r\n  50.         yield\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in loads\r\n  263.                     return decode(data)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in unpickle\r\n  337.         return pickle_loads(str_to_bytes(s))\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in pickle_loads\r\n  59.     return load(BytesIO(s))\r\n\r\nDuring handling of the above exception (invalid load key, 'n'.), another exception occurred:\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/django/core/handlers/exception.py\" in inner\r\n  35.             response = get_response(request)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/django/core/handlers/base.py\" in _get_response\r\n  128.                 response = self.process_exception_by_middleware(e, request)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/django/core/handlers/base.py\" in _get_response\r\n  126.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\r\n  21.                 return view_func(request, *args, **kwargs)\r\n\r\nFile \"/home/andreas/work/django/relate/course/views.py\" in monitor_task\r\n  1317.     if async_res.state == \"PROGRESS\":\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/celery/result.py\" in state\r\n  436.         return self._get_task_meta()['status']\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/celery/result.py\" in _get_task_meta\r\n  375.             return self._maybe_set_cache(self.backend.get_task_meta(self.id))\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/celery/backends/base.py\" in get_task_meta\r\n  352.         meta = self._get_task_meta_for(task_id)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/django_celery_results/backends/database.py\" in _get_task_meta_for\r\n  37.         meta = self.decode_content(obj, res.pop('meta', None)) or {}\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/django_celery_results/backends/database.py\" in decode_content\r\n  52.             return self.decode(content)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/celery/backends/base.py\" in decode\r\n  278.                      accept=self.accept)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in loads\r\n  263.                     return decode(data)\r\n\r\nFile \"/usr/lib/python3.6/contextlib.py\" in __exit__\r\n  99.                 self.gen.throw(type, value, traceback)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in _reraise_errors\r\n  54.         reraise(wrapper, wrapper(exc), sys.exc_info()[2])\r\n\r\nFile \"/usr/lib/python3/dist-packages/vine/five.py\" in reraise\r\n  178.             raise value.with_traceback(tb)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in _reraise_errors\r\n  50.         yield\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in loads\r\n  263.                     return decode(data)\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in unpickle\r\n  337.         return pickle_loads(str_to_bytes(s))\r\n\r\nFile \"/home/andreas/src/env-3.6/lib/python3.6/site-packages/kombu/serialization.py\" in pickle_loads\r\n  59.     return load(BytesIO(s))\r\n\r\nException Type: DecodeError at /monitor-task/9d49ffda-9f80-4862-a8b6-ed23b8f50224\r\nException Value: invalid load key, 'n'.\r\n```\r\n\r\n</details>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/48", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/48/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/48/events", "html_url": "https://github.com/celery/django-celery-results/issues/48", "id": 301548042, "node_id": "MDU6SXNzdWUzMDE1NDgwNDI=", "number": 48, "title": "Hardcoded django-cache backend serializer", "user": {"login": "kmctown", "id": 1482857, "node_id": "MDQ6VXNlcjE0ODI4NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1482857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmctown", "html_url": "https://github.com/kmctown", "followers_url": "https://api.github.com/users/kmctown/followers", "following_url": "https://api.github.com/users/kmctown/following{/other_user}", "gists_url": "https://api.github.com/users/kmctown/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmctown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmctown/subscriptions", "organizations_url": "https://api.github.com/users/kmctown/orgs", "repos_url": "https://api.github.com/users/kmctown/repos", "events_url": "https://api.github.com/users/kmctown/events{/privacy}", "received_events_url": "https://api.github.com/users/kmctown/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-03-01T20:27:34Z", "updated_at": "2018-06-28T19:28:46Z", "closed_at": "2018-06-28T19:28:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a reason why the cache backend hardcodes its `serializer` to `pickle`? \r\n\r\nhttps://github.com/celery/django-celery-results/blob/master/django_celery_results/backends/cache.py#L16\r\n\r\nI'm using this to cache results in redis, since django allows me to configure redis SSL support via the `rediss` connection string and I don't have another option in production with Heroku. Using my redis SSL connection string as the backend breaks.\r\n\r\nGoing this route is working, but now I'm stuck with the `pickle` serializer. Looking for a way to help improve support for this case and trying to understand first!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/47", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/47/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/47/events", "html_url": "https://github.com/celery/django-celery-results/issues/47", "id": 301091580, "node_id": "MDU6SXNzdWUzMDEwOTE1ODA=", "number": 47, "title": "Latest release number is behind current master", "user": {"login": "thclark", "id": 7223170, "node_id": "MDQ6VXNlcjcyMjMxNzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/7223170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thclark", "html_url": "https://github.com/thclark", "followers_url": "https://api.github.com/users/thclark/followers", "following_url": "https://api.github.com/users/thclark/following{/other_user}", "gists_url": "https://api.github.com/users/thclark/gists{/gist_id}", "starred_url": "https://api.github.com/users/thclark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thclark/subscriptions", "organizations_url": "https://api.github.com/users/thclark/orgs", "repos_url": "https://api.github.com/users/thclark/repos", "events_url": "https://api.github.com/users/thclark/events{/privacy}", "received_events_url": "https://api.github.com/users/thclark/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-28T16:28:31Z", "updated_at": "2019-07-10T16:36:20Z", "closed_at": "2019-07-10T16:36:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all, some substantial changes have been made in the last 15 months, including the database migration to 0002 in the recent merge #34 .\r\n\r\nIs there any chance of a new release (to 1.0.2??) to correspond with this, please? It'd help with tracking migrations and dependencies when `pip install`ing a version, rather than setting a specific commit SHA :)\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/44", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/44/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/44/events", "html_url": "https://github.com/celery/django-celery-results/issues/44", "id": 283879249, "node_id": "MDU6SXNzdWUyODM4NzkyNDk=", "number": 44, "title": "relation \"task_id_sequence\" does not exist", "user": {"login": "ldynia", "id": 1820831, "node_id": "MDQ6VXNlcjE4MjA4MzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1820831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ldynia", "html_url": "https://github.com/ldynia", "followers_url": "https://api.github.com/users/ldynia/followers", "following_url": "https://api.github.com/users/ldynia/following{/other_user}", "gists_url": "https://api.github.com/users/ldynia/gists{/gist_id}", "starred_url": "https://api.github.com/users/ldynia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ldynia/subscriptions", "organizations_url": "https://api.github.com/users/ldynia/orgs", "repos_url": "https://api.github.com/users/ldynia/repos", "events_url": "https://api.github.com/users/ldynia/events{/privacy}", "received_events_url": "https://api.github.com/users/ldynia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-21T13:17:10Z", "updated_at": "2019-05-06T04:17:30Z", "closed_at": "2019-05-06T04:17:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Celery fails to save data into database backend \r\n\r\n**Stack**\r\ncelery==4.1.0\r\ndjango-celery==3.2.2\r\ndjango-celery-results==1.0.1\r\n\r\n**Run migrations**\r\n`python3 manage.py migrate djcelery`\r\n`python3 manage.py migrate django_celery_results`\r\n\r\nThis is schema for `celery_taskmeta` table (\"task_id_sequence\" does not exist)\r\n\r\n```\r\nid \t    integer               NOT NULL nextval('celery_taskmeta_id_seq'::regclass) \t[pk]\r\ntask_id     character varying(255)    NOT NULL [uniq] \r\nstatus \t    character varying(50)     NOT NULL\r\nresult \t    text\r\ndate_done \ttimestamp with time zone  NOT NULL\r\ntraceback \ttext\r\nhidden \t        boolean                   NOT NULL\r\nmeta \t      text\r\n\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.5/dist-packages/billiard/pool.py\", line 1747, in safe_apply_callback\r\n    fun(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/celery/worker/request.py\", line 366, in on_failure\r\n    self.id, exc, request=self, store_result=self.store_errors,\r\n  File \"/usr/local/lib/python3.5/dist-packages/celery/backends/base.py\", line 163, in mark_as_failure\r\n    traceback=traceback, request=request)\r\n  File \"/usr/local/lib/python3.5/dist-packages/celery/backends/base.py\", line 309, in store_result\r\n    request=request, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/celery/backends/database/__init__.py\", line 53, in _inner\r\n    return fun(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/celery/backends/database/__init__.py\", line 112, in _store_result\r\n    session.add(task)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/session.py\", line 2237, in flush\r\n    self._flush(objects)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/session.py\", line 2363, in _flush\r\n    transaction.rollback(_capture_exception=True)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/util/langhelpers.py\", line 66, in __exit__\r\n    compat.reraise(exc_type, exc_value, exc_tb)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/util/compat.py\", line 187, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/session.py\", line 2327, in _flush\r\n    flush_context.execute()\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/unitofwork.py\", line 391, in execute\r\n    rec.execute(self)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/unitofwork.py\", line 556, in execute\r\n    uow\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/persistence.py\", line 181, in save_obj\r\n    mapper, table, insert)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/orm/persistence.py\", line 866, in _emit_insert_statements\r\n    execute(statement, params)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/engine/base.py\", line 948, in execute\r\n    return meth(self, multiparams, params)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/sql/elements.py\", line 269, in _execute_on_connection\r\n    return connection._execute_clauseelement(self, multiparams, params)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/engine/base.py\", line 1060, in _execute_clauseelement\r\n    compiled_sql, distilled_params\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/engine/base.py\", line 1200, in _execute_context\r\n    context)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/engine/base.py\", line 1413, in _handle_dbapi_exception\r\n    exc_info\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/util/compat.py\", line 203, in raise_from_cause\r\n    reraise(type(exception), exception, tb=exc_tb, cause=cause)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/util/compat.py\", line 186, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/engine/base.py\", line 1193, in _execute_context\r\n    context)\r\n  File \"/usr/local/lib/python3.5/dist-packages/sqlalchemy/engine/default.py\", line 507, in do_execute\r\n    cursor.execute(statement, parameters)\r\nsqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation \"task_id_sequence\" does not exist\r\nLINE 1: ...us, result, date_done, traceback) VALUES (nextval('task_id_s...\r\n                                                             ^\r\n [SQL: \"INSERT INTO celery_taskmeta (id, task_id, status, result, date_done, traceback) VALUES (nextval('task_id_sequence'), %(task_id)s, %(status)s, %(result)s, %(date_done)s, %(traceback)s) RETURNING celery_taskmeta.id\"] [parameters: {'date_done': datetime.datetime(2017, 12, 21, 13, 0, 8, 211704), 'result': None, 'traceback': None, 'status': 'PENDING', 'task_id': 'a06b980a-36f8-4fe0-a8c6-d920341a217a'}]\r\n```\r\n\r\nHow to fix this compatibility problem ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/43", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/43/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/43/events", "html_url": "https://github.com/celery/django-celery-results/issues/43", "id": 283794931, "node_id": "MDU6SXNzdWUyODM3OTQ5MzE=", "number": 43, "title": "How to configure expiration time?", "user": {"login": "sobolevn", "id": 4660275, "node_id": "MDQ6VXNlcjQ2NjAyNzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/4660275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sobolevn", "html_url": "https://github.com/sobolevn", "followers_url": "https://api.github.com/users/sobolevn/followers", "following_url": "https://api.github.com/users/sobolevn/following{/other_user}", "gists_url": "https://api.github.com/users/sobolevn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sobolevn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sobolevn/subscriptions", "organizations_url": "https://api.github.com/users/sobolevn/orgs", "repos_url": "https://api.github.com/users/sobolevn/repos", "events_url": "https://api.github.com/users/sobolevn/events{/privacy}", "received_events_url": "https://api.github.com/users/sobolevn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419792599, "node_id": "MDU6TGFiZWw0MTk3OTI1OTk=", "url": "https://api.github.com/repos/celery/django-celery-results/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-21T07:28:10Z", "updated_at": "2019-05-16T05:02:51Z", "closed_at": "2019-05-16T05:02:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I need to store my tasks only for 3 days. \r\nBut then I want them to be expired.\r\n\r\nPreviously we had `CELERY_TASK_RESULT_EXPIRES`. Does it still work?\r\n\r\nIf yes, maybe it would be a good idea to update docs about that?\r\nIf no, how we suppose to cleanup tasks?\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/39", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/39/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/39/events", "html_url": "https://github.com/celery/django-celery-results/issues/39", "id": 272678036, "node_id": "MDU6SXNzdWUyNzI2NzgwMzY=", "number": 39, "title": "Jobs that are enqueued and running", "user": {"login": "ACPK", "id": 2019893, "node_id": "MDQ6VXNlcjIwMTk4OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2019893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ACPK", "html_url": "https://github.com/ACPK", "followers_url": "https://api.github.com/users/ACPK/followers", "following_url": "https://api.github.com/users/ACPK/following{/other_user}", "gists_url": "https://api.github.com/users/ACPK/gists{/gist_id}", "starred_url": "https://api.github.com/users/ACPK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ACPK/subscriptions", "organizations_url": "https://api.github.com/users/ACPK/orgs", "repos_url": "https://api.github.com/users/ACPK/repos", "events_url": "https://api.github.com/users/ACPK/events{/privacy}", "received_events_url": "https://api.github.com/users/ACPK/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-09T18:45:31Z", "updated_at": "2018-02-27T23:35:57Z", "closed_at": "2018-02-27T23:35:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "How would I see jobs that are either enqueued or currently running?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/38", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/38/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/38/events", "html_url": "https://github.com/celery/django-celery-results/issues/38", "id": 272677678, "node_id": "MDU6SXNzdWUyNzI2Nzc2Nzg=", "number": 38, "title": "Job Names", "user": {"login": "ACPK", "id": 2019893, "node_id": "MDQ6VXNlcjIwMTk4OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2019893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ACPK", "html_url": "https://github.com/ACPK", "followers_url": "https://api.github.com/users/ACPK/followers", "following_url": "https://api.github.com/users/ACPK/following{/other_user}", "gists_url": "https://api.github.com/users/ACPK/gists{/gist_id}", "starred_url": "https://api.github.com/users/ACPK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ACPK/subscriptions", "organizations_url": "https://api.github.com/users/ACPK/orgs", "repos_url": "https://api.github.com/users/ACPK/repos", "events_url": "https://api.github.com/users/ACPK/events{/privacy}", "received_events_url": "https://api.github.com/users/ACPK/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-11-09T18:44:17Z", "updated_at": "2019-07-10T16:32:52Z", "closed_at": "2019-07-10T16:32:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "How do I see the name on the job? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/29", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/29/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/29/events", "html_url": "https://github.com/celery/django-celery-results/issues/29", "id": 267059255, "node_id": "MDU6SXNzdWUyNjcwNTkyNTU=", "number": 29, "title": "NotImplementedError: No result backend is configured.", "user": {"login": "Argonautic", "id": 23227835, "node_id": "MDQ6VXNlcjIzMjI3ODM1", "avatar_url": "https://avatars1.githubusercontent.com/u/23227835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Argonautic", "html_url": "https://github.com/Argonautic", "followers_url": "https://api.github.com/users/Argonautic/followers", "following_url": "https://api.github.com/users/Argonautic/following{/other_user}", "gists_url": "https://api.github.com/users/Argonautic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Argonautic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Argonautic/subscriptions", "organizations_url": "https://api.github.com/users/Argonautic/orgs", "repos_url": "https://api.github.com/users/Argonautic/repos", "events_url": "https://api.github.com/users/Argonautic/events{/privacy}", "received_events_url": "https://api.github.com/users/Argonautic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-20T04:14:58Z", "updated_at": "2017-10-20T20:12:45Z", "closed_at": "2017-10-20T20:11:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using django, postgres, ubuntu, and (obviously) celery + django-celery-results. I'm following the django guide on the official celery docs that links to this package. In my app's settings.py, CELERY_RESULT_BACKEND is set to 'django-db', and when I check my postgres database, I do see a table for public.django_celery_results_taskresult correctly populating with results, but when I try to access them from a python shell in the following manner:\r\n\r\n```\r\nfrom tasks import add\r\nresult = add.delay(5, 5) \r\nresult.get()\r\n```\r\n\r\nI get the error \"NotImplementedError: No result backend is configured.\"\r\n\r\nFor the life of me, I can neither figure out why this is happening nor find any answers online.\r\n\r\nMy celery.py file is:\r\n```\r\n\r\nfrom __future__ import absolute_import, unicode_literals\r\nimport os\r\nfrom celery import Celery\r\n\r\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'BeerAggregate.settings')\r\n\r\napp = Celery('BeerAggregate')\r\n\r\napp.config_from_object('django.conf:settings', namespace='CELERY')\r\n\r\napp.autodiscover_tasks()\r\n\r\n@app.task(bind=True)\r\ndef debug_task(self):\r\n    print('Request: {0!r}'.format(self.request))\r\n```\r\n\r\nFinally, when I access the celery shell through\r\n\r\n`celery -A BeerAggregate -l info`\r\n\r\n The config message looks like this:\r\n\r\n```\r\n[config]\r\n.> app:         BeerAggregate:0x7f5f0e4159e8\r\n.> transport:   amqp://guest:**@localhost:5672//\r\n.> results:     \r\n.> concurrency: 4 (prefork)\r\n.> task events: OFF (enable -E to monitor tasks in this worker)\r\n```\r\n\r\nThe results section is empty\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/27", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/27/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/27/events", "html_url": "https://github.com/celery/django-celery-results/issues/27", "id": 260490123, "node_id": "MDU6SXNzdWUyNjA0OTAxMjM=", "number": 27, "title": "Migrations not being Found", "user": {"login": "techdragon", "id": 2115079, "node_id": "MDQ6VXNlcjIxMTUwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2115079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/techdragon", "html_url": "https://github.com/techdragon", "followers_url": "https://api.github.com/users/techdragon/followers", "following_url": "https://api.github.com/users/techdragon/following{/other_user}", "gists_url": "https://api.github.com/users/techdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/techdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/techdragon/subscriptions", "organizations_url": "https://api.github.com/users/techdragon/orgs", "repos_url": "https://api.github.com/users/techdragon/repos", "events_url": "https://api.github.com/users/techdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/techdragon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-26T04:49:45Z", "updated_at": "2017-09-27T03:30:00Z", "closed_at": "2017-09-27T03:30:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "For some reason this app is not correctly showing up in the list of migrations for me.\r\n```\r\nOperations to perform:\r\n  Apply all migrations: django_celery_results\r\nRunning migrations:\r\n  No migrations to apply.\r\n```\r\nIts in INSTALLED_APPS, and even happens when I copy the folder into my project structure to ensure that it is discovered with the rest of my project apps.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/26", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/26/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/26/events", "html_url": "https://github.com/celery/django-celery-results/issues/26", "id": 257140099, "node_id": "MDU6SXNzdWUyNTcxNDAwOTk=", "number": 26, "title": "Celery app fails when importing Django user model", "user": {"login": "sam-thecoder", "id": 15666437, "node_id": "MDQ6VXNlcjE1NjY2NDM3", "avatar_url": "https://avatars2.githubusercontent.com/u/15666437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sam-thecoder", "html_url": "https://github.com/sam-thecoder", "followers_url": "https://api.github.com/users/sam-thecoder/followers", "following_url": "https://api.github.com/users/sam-thecoder/following{/other_user}", "gists_url": "https://api.github.com/users/sam-thecoder/gists{/gist_id}", "starred_url": "https://api.github.com/users/sam-thecoder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sam-thecoder/subscriptions", "organizations_url": "https://api.github.com/users/sam-thecoder/orgs", "repos_url": "https://api.github.com/users/sam-thecoder/repos", "events_url": "https://api.github.com/users/sam-thecoder/events{/privacy}", "received_events_url": "https://api.github.com/users/sam-thecoder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-12T18:33:30Z", "updated_at": "2017-10-07T19:49:07Z", "closed_at": "2017-10-07T19:49:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "![screenshot from 2017-09-12 21-07-18](https://user-images.githubusercontent.com/15666437/30342181-90635476-9801-11e7-937f-5b15bce3c9b7.png)\r\n\r\nas in snapshot and highlighted text in red I have this line \r\n\r\n`from gallery.colorfest import render_full`\r\n\r\nwhich inside goes to import Django user model and it fails claiming apps not installed. If I un comment this line it works, so with possibly a good amount of code reshuffling I might get it to work but I believe figuring this out will end up making a more streamlined implementation.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/25", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/25/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/25/events", "html_url": "https://github.com/celery/django-celery-results/issues/25", "id": 256690248, "node_id": "MDU6SXNzdWUyNTY2OTAyNDg=", "number": 25, "title": "using Cache backends requires the app to be in INSTALLED_APPS", "user": {"login": "riccardodivirgilio", "id": 187641, "node_id": "MDQ6VXNlcjE4NzY0MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/187641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/riccardodivirgilio", "html_url": "https://github.com/riccardodivirgilio", "followers_url": "https://api.github.com/users/riccardodivirgilio/followers", "following_url": "https://api.github.com/users/riccardodivirgilio/following{/other_user}", "gists_url": "https://api.github.com/users/riccardodivirgilio/gists{/gist_id}", "starred_url": "https://api.github.com/users/riccardodivirgilio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/riccardodivirgilio/subscriptions", "organizations_url": "https://api.github.com/users/riccardodivirgilio/orgs", "repos_url": "https://api.github.com/users/riccardodivirgilio/repos", "events_url": "https://api.github.com/users/riccardodivirgilio/events{/privacy}", "received_events_url": "https://api.github.com/users/riccardodivirgilio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-11T12:48:34Z", "updated_at": "2019-05-06T04:04:51Z", "closed_at": "2019-05-06T04:04:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to use the CacheBackend but in order to do that I need to have this app registered as INSTALLED_APPS.\r\nthis means that migrate will be creating database table for DatabaseBackend which I'm not using.\r\nthis is happening because in django_celery_results.backends the module imports DatabaseBackend, and this is imported even if it's unused.\r\n\r\nthis triggers the import of TaskResult, which triggers an error from __new__ in django.\r\n\r\n```\r\n    from django_celery_results.backends.cache import CacheBackend as DjangoCacheBackend\r\n  File \"/usr/local/rotostampa/workflow-local/env/lib/python3.6/site-packages/django_celery_results/backends/__init__.py\", line 4, in <module>\r\n    from .database import DatabaseBackend\r\n  File \"/usr/local/rotostampa/workflow-local/env/lib/python3.6/site-packages/django_celery_results/backends/database.py\", line 7, in <module>\r\n    from ..models import TaskResult\r\n  File \"/usr/local/rotostampa/workflow-local/env/lib/python3.6/site-packages/django_celery_results/models.py\", line 17, in <module>\r\n    class TaskResult(models.Model):\r\n  File \"/usr/local/rotostampa/workflow-local/env/lib/python3.6/site-packages/django/db/models/base.py\", line 113, in __new__\r\n    \"INSTALLED_APPS.\" % (module, name)\r\nRuntimeError: Model class django_celery_results.models.TaskResult doesn't declare an explicit app_label and isn't in an application in INSTALLED_APPS.\r\n```\r\n\r\ncan you remove the import of DatabaseBackend from there or remove the import of TaskResult?\r\n\r\nthanks! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/24", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/24/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/24/events", "html_url": "https://github.com/celery/django-celery-results/issues/24", "id": 255744257, "node_id": "MDU6SXNzdWUyNTU3NDQyNTc=", "number": 24, "title": "Migrate from django-celery and keep older results", "user": {"login": "mauroka", "id": 13524412, "node_id": "MDQ6VXNlcjEzNTI0NDEy", "avatar_url": "https://avatars0.githubusercontent.com/u/13524412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mauroka", "html_url": "https://github.com/mauroka", "followers_url": "https://api.github.com/users/mauroka/followers", "following_url": "https://api.github.com/users/mauroka/following{/other_user}", "gists_url": "https://api.github.com/users/mauroka/gists{/gist_id}", "starred_url": "https://api.github.com/users/mauroka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mauroka/subscriptions", "organizations_url": "https://api.github.com/users/mauroka/orgs", "repos_url": "https://api.github.com/users/mauroka/repos", "events_url": "https://api.github.com/users/mauroka/events{/privacy}", "received_events_url": "https://api.github.com/users/mauroka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-06T21:12:56Z", "updated_at": "2020-04-14T14:33:32Z", "closed_at": "2017-10-24T18:57:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\nI am trying to migrate from django-celery to django-celery-results.\r\nDjango-celery-results is working just fine. But the older results kept in the database in the table celery_taskmeta weren't migrated automatically to django-celery-result table.\r\nShould I do it manually or there is something that I am missing?\r\n\r\nThanks a lot for the help.\r\nMauro. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/22", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/22/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/22/events", "html_url": "https://github.com/celery/django-celery-results/issues/22", "id": 249833095, "node_id": "MDU6SXNzdWUyNDk4MzMwOTU=", "number": 22, "title": "Relation \"django_celery_beat_periodictask\" does not exist", "user": {"login": "mbaragiola", "id": 3682895, "node_id": "MDQ6VXNlcjM2ODI4OTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3682895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbaragiola", "html_url": "https://github.com/mbaragiola", "followers_url": "https://api.github.com/users/mbaragiola/followers", "following_url": "https://api.github.com/users/mbaragiola/following{/other_user}", "gists_url": "https://api.github.com/users/mbaragiola/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbaragiola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbaragiola/subscriptions", "organizations_url": "https://api.github.com/users/mbaragiola/orgs", "repos_url": "https://api.github.com/users/mbaragiola/repos", "events_url": "https://api.github.com/users/mbaragiola/events{/privacy}", "received_events_url": "https://api.github.com/users/mbaragiola/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-12T20:16:23Z", "updated_at": "2018-01-09T03:14:24Z", "closed_at": "2017-08-17T12:46:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Relevant versions:\r\n\r\n```\r\npython:3.5-slim\r\npostgres:9.6-alpine\r\nredis:4.0-alpine\r\ndjango==1.11.4\r\ncelery==4.1.0\r\ndjango-celery-beat==1.0.1\r\ndjango-celery-results==1.0.1\r\n```\r\n\r\nRelevant `python manage.py migrate` output:\r\n\r\n```\r\n...\r\n...\r\nApplying django_celery_beat.0001_initial... OK\r\nApplying django_celery_results.0001_initial... OK\r\n...\r\n...\r\n```\r\n\r\nRelevant `settings.py`:\r\n\r\n```python\r\nCELERY_REDIS_HOSTNAME = env('CELERY_REDIS_HOSTNAME', default='redis_celery')\r\nCELERY_REDIS_PORT = env('CELERY_REDIS_PORT', default=6379)\r\nCELERY_REDIS_DB = env('CELERY_REDIS_DB', default=0)\r\nCELERY_BROKER_URL = env('CELERY_BROKER_URL', default='')\r\n\r\nif not CELERY_BROKER_URL:\r\n    CELERY_BROKER_URL = 'redis://{hostname}:{port}/{db}'.format(\r\n        hostname=CELERY_REDIS_HOSTNAME,\r\n        port=CELERY_REDIS_PORT,\r\n        db=CELERY_REDIS_DB\r\n    )\r\n\r\nCELERY_BROKER_POOL_LIMIT = 1\r\nCELERY_BROKER_CONNECTION_TIMEOUT = 10\r\n\r\nCELERY_ENABLE_UTC = True\r\nCELERY_TIMEZONE = 'UTC'\r\n\r\nCELERY_DEFAULT_QUEUE = 'default'\r\nCELERY_QUEUES = (\r\n    Queue('default', Exchange('default'), routing_key='default')\r\n)\r\n\r\nCELERY_ALWAYS_EAGER = False\r\nCELERY_ACKS_LATE = True\r\nCELERY_TASK_PUBLISH_RETRY = True\r\nCELERY_DISABLE_RATE_LIMITS = False\r\n\r\nCELERY_RESULT_BACKEND = 'django-db'\r\n```\r\n\r\n`INSTALLED_APPS` of course has `django_celery_beat`, `django_celery_results` (that's why it is seen in the `migrate` output).\r\n\r\n`project_name/celery.py`:\r\n\r\n```python\r\nimport os\r\nfrom celery import Celery\r\n\r\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings.local')\r\n\r\napp = Celery('turnateme')\r\napp.config_from_object('django.conf:settings', namespace='CELERY')\r\napp.autodiscover_tasks()\r\n\r\n@app.task(bind=True)\r\ndef debug_task(self):\r\n    print('Request: {0!r}'.format(self.request))\r\n```\r\n\r\nHere's the relevant `docker-compose up` (local development) output:\r\n\r\n```\r\ndjangodev_1        | System check identified no issues (0 silenced).\r\ncelerybeatdev_1    | Postgres is up - continuing...\r\nceleryworkerdev_1  | Postgres is up - continuing...\r\nceleryworkerdev_1  | /usr/local/lib/python3.5/site-packages/celery/platforms.py:795: RuntimeWarning: You're running the worker with superuser privileges: this is\r\nceleryworkerdev_1  | absolutely not recommended!\r\nceleryworkerdev_1  | \r\nceleryworkerdev_1  | Please specify a different user using the -u option.\r\nceleryworkerdev_1  | \r\nceleryworkerdev_1  | User information: uid=0 euid=0 gid=0 egid=0\r\nceleryworkerdev_1  | \r\nceleryworkerdev_1  |   uid=uid, euid=euid, gid=gid, egid=egid,\r\nceleryworkerdev_1  |  \r\nceleryworkerdev_1  |  -------------- default@4d8350ed217b v4.1.0 (latentcall)\r\nceleryworkerdev_1  | ---- **** ----- \r\nceleryworkerdev_1  | --- * ***  * -- Linux-4.4.66-boot2docker-x86_64-with-debian-8.9 2017-08-12 20:11:55\r\nceleryworkerdev_1  | -- * - **** --- \r\nceleryworkerdev_1  | - ** ---------- [config]\r\nceleryworkerdev_1  | - ** ---------- .> app:         turnateme:0x7fdd92f53b70\r\nceleryworkerdev_1  | - ** ---------- .> transport:   redis://redis_celery:6379/0\r\nceleryworkerdev_1  | - ** ---------- .> results:     \r\nceleryworkerdev_1  | - *** --- * --- .> concurrency: 1 (prefork)\r\nceleryworkerdev_1  | -- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)\r\nceleryworkerdev_1  | --- ***** ----- \r\nceleryworkerdev_1  |  -------------- [queues]\r\nceleryworkerdev_1  |                 .> default          exchange=default(direct) key=default\r\nceleryworkerdev_1  |                 \r\nceleryworkerdev_1  | \r\nceleryworkerdev_1  | [tasks]\r\nceleryworkerdev_1  |   . billing.tasks.charge_period\r\nceleryworkerdev_1  |   . billing.tasks.finish_period\r\nceleryworkerdev_1  |   . billing.tasks.process_webhook_event\r\nceleryworkerdev_1  |   . turnateme.celery.debug_task\r\nceleryworkerdev_1  | \r\nceleryworkerdev_1  | [2017-08-12 20:11:55,228: INFO/MainProcess] Connected to redis://redis_celery:6379/0\r\ncelerybeatdev_1    | celery beat v4.1.0 (latentcall) is starting.\r\ncelerybeatdev_1    | __    -    ... __   -        _\r\ncelerybeatdev_1    | LocalTime -> 2017-08-12 20:11:55\r\ncelerybeatdev_1    | Configuration ->\r\ncelerybeatdev_1    |     . broker -> redis://redis_celery:6379/0\r\ncelerybeatdev_1    |     . loader -> celery.loaders.app.AppLoader\r\ncelerybeatdev_1    |     . scheduler -> django_celery_beat.schedulers.DatabaseScheduler\r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    |     . logfile -> [stderr]@%INFO\r\ncelerybeatdev_1    |     . maxinterval -> 5.00 seconds (5s)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,520: INFO/MainProcess] beat: Starting...\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,521: INFO/MainProcess] Writing entries...\r\npostgres_1         | ERROR:  relation \"django_celery_beat_periodictask\" does not exist at character 748\r\npostgres_1         | STATEMENT:  SELECT \"django_celery_beat_periodictask\".\"id\", \"django_celery_beat_periodictask\".\"name\", \"django_celery_beat_periodictask\".\"task\", \"django_celery_beat_periodictask\".\"interval_id\", \"django_celery_beat_periodictask\".\"crontab_id\", \"django_celery_beat_periodictask\".\"args\", \"django_celery_beat_periodictask\".\"kwargs\", \"django_celery_beat_periodictask\".\"queue\", \"django_celery_beat_periodictask\".\"exchange\", \"django_celery_beat_periodictask\".\"routing_key\", \"django_celery_beat_periodictask\".\"expires\", \"django_celery_beat_periodictask\".\"enabled\", \"django_celery_beat_periodictask\".\"last_run_at\", \"django_celery_beat_periodictask\".\"total_run_count\", \"django_celery_beat_periodictask\".\"date_changed\", \"django_celery_beat_periodictask\".\"description\" FROM \"django_celery_beat_periodictask\" WHERE \"django_celery_beat_periodictask\".\"enabled\" = true\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,538: CRITICAL/MainProcess] beat raised exception <class 'django.db.utils.ProgrammingError'>: ProgrammingError('relation \"django_celery_beat_periodictask\" does not exist\\nLINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\\n                                                             ^\\n',)\r\ncelerybeatdev_1    | Traceback (most recent call last):\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/kombu/utils/objects.py\", line 42, in __get__\r\ncelerybeatdev_1    |     return obj.__dict__[self.__name__]\r\ncelerybeatdev_1    | KeyError: 'scheduler'\r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    | During handling of the above exception, another exception occurred:\r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    | Traceback (most recent call last):\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 65, in execute\r\ncelerybeatdev_1    |     return self.cursor.execute(sql, params)\r\ncelerybeatdev_1    | psycopg2.ProgrammingError: relation \"django_celery_beat_periodictask\" does not exist\r\ncelerybeatdev_1    | LINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\r\ncelerybeatdev_1    |                                                              ^\r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    | The above exception was the direct cause of the following exception:\r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    | Traceback (most recent call last):\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/celery/apps/beat.py\", line 107, in start_scheduler\r\ncelerybeatdev_1    |     service.start()\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 549, in start\r\ncelerybeatdev_1    |     humanize_seconds(self.scheduler.max_interval))\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/kombu/utils/objects.py\", line 44, in __get__\r\ncelerybeatdev_1    |     value = obj.__dict__[self.__name__] = self.__get(obj)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 593, in scheduler\r\ncelerybeatdev_1    |     return self.get_scheduler()\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 588, in get_scheduler\r\ncelerybeatdev_1    |     lazy=lazy,\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 179, in __init__\r\ncelerybeatdev_1    |     Scheduler.__init__(self, *args, **kwargs)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 206, in __init__\r\ncelerybeatdev_1    |     self.setup_schedule()\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 187, in setup_schedule\r\ncelerybeatdev_1    |     self.install_default_entries(self.schedule)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 280, in schedule\r\ncelerybeatdev_1    |     self._schedule = self.all_as_schedule()\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 193, in all_as_schedule\r\ncelerybeatdev_1    |     for model in self.Model.objects.enabled():\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 250, in __iter__\r\ncelerybeatdev_1    |     self._fetch_all()\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\r\ncelerybeatdev_1    |     self._result_cache = list(self._iterable_class(self))\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 53, in __iter__\r\ncelerybeatdev_1    |     results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/models/sql/compiler.py\", line 894, in execute_sql\r\ncelerybeatdev_1    |     raise original_exception\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/models/sql/compiler.py\", line 884, in execute_sql\r\ncelerybeatdev_1    |     cursor.execute(sql, params)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 80, in execute\r\ncelerybeatdev_1    |     return super(CursorDebugWrapper, self).execute(sql, params)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 65, in execute\r\ncelerybeatdev_1    |     return self.cursor.execute(sql, params)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/utils.py\", line 94, in __exit__\r\ncelerybeatdev_1    |     six.reraise(dj_exc_type, dj_exc_value, traceback)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/utils/six.py\", line 685, in reraise\r\ncelerybeatdev_1    |     raise value.with_traceback(tb)\r\ncelerybeatdev_1    |   File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 65, in execute\r\ncelerybeatdev_1    |     return self.cursor.execute(sql, params)\r\ncelerybeatdev_1    | django.db.utils.ProgrammingError: relation \"django_celery_beat_periodictask\" does not exist\r\ncelerybeatdev_1    | LINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\r\ncelerybeatdev_1    |                                                              ^\r\ncelerybeatdev_1    | \r\ncelerybeatdev_1    | [2017-08-12 20:11:55,540: WARNING/MainProcess] Traceback (most recent call last):\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,540: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/kombu/utils/objects.py\", line 42, in __get__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] return obj.__dict__[self.__name__]\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] KeyError\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] :\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] 'scheduler'\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] During handling of the above exception, another exception occurred:\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] Traceback (most recent call last):\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 65, in execute\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,541: WARNING/MainProcess] return self.cursor.execute(sql, params)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] psycopg2\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] .\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] ProgrammingError\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] :\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] relation \"django_celery_beat_periodictask\" does not exist\r\ncelerybeatdev_1    | LINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\r\ncelerybeatdev_1    |                                                              ^\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] The above exception was the direct cause of the following exception:\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] Traceback (most recent call last):\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] File \"/usr/local/bin/celery\", line 11, in <module>\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] sys.exit(main())\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/__main__.py\", line 14, in main\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,542: WARNING/MainProcess] _main()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,543: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/celery.py\", line 326, in main\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,543: WARNING/MainProcess] cmd.execute_from_commandline(argv)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,543: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/celery.py\", line 488, in execute_from_commandline\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,543: WARNING/MainProcess] super(CeleryCommand, self).execute_from_commandline(argv)))\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,544: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/base.py\", line 281, in execute_from_commandline\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,544: WARNING/MainProcess] return self.handle_argv(self.prog_name, argv[1:])\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,544: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/celery.py\", line 480, in handle_argv\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,544: WARNING/MainProcess] return self.execute(command, argv)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,544: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/celery.py\", line 412, in execute\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,545: WARNING/MainProcess] ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,545: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/base.py\", line 285, in run_from_argv\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,545: WARNING/MainProcess] sys.argv if argv is None else argv, command)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,545: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/base.py\", line 368, in handle_argv\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,545: WARNING/MainProcess] return self(*args, **options)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,545: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/base.py\", line 244, in __call__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,546: WARNING/MainProcess] ret = self.run(*args, **kwargs)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,546: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/bin/beat.py\", line 107, in run\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,546: WARNING/MainProcess] return beat().run()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,546: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/apps/beat.py\", line 79, in run\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,546: WARNING/MainProcess] self.start_scheduler()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/apps/beat.py\", line 107, in start_scheduler\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] service.start()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 549, in start\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] humanize_seconds(self.scheduler.max_interval))\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/kombu/utils/objects.py\", line 44, in __get__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] value = obj.__dict__[self.__name__] = self.__get(obj)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,547: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 593, in scheduler\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,548: WARNING/MainProcess] return self.get_scheduler()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,548: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 588, in get_scheduler\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,548: WARNING/MainProcess] lazy=lazy,\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,548: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 179, in __init__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] Scheduler.__init__(self, *args, **kwargs)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/celery/beat.py\", line 206, in __init__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] self.setup_schedule()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 187, in setup_schedule\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] self.install_default_entries(self.schedule)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 280, in schedule\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] self._schedule = self.all_as_schedule()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,549: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django_celery_beat/schedulers.py\", line 193, in all_as_schedule\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,550: WARNING/MainProcess] for model in self.Model.objects.enabled():\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,550: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 250, in __iter__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,550: WARNING/MainProcess] self._fetch_all()\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,550: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,551: WARNING/MainProcess] self._result_cache = list(self._iterable_class(self))\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,551: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/query.py\", line 53, in __iter__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,551: WARNING/MainProcess] results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,551: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/sql/compiler.py\", line 894, in execute_sql\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,560: WARNING/MainProcess] raise original_exception\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,560: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/models/sql/compiler.py\", line 884, in execute_sql\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,561: WARNING/MainProcess] cursor.execute(sql, params)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,561: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 80, in execute\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,561: WARNING/MainProcess] return super(CursorDebugWrapper, self).execute(sql, params)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,561: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 65, in execute\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,561: WARNING/MainProcess] return self.cursor.execute(sql, params)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,562: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/utils.py\", line 94, in __exit__\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,562: WARNING/MainProcess] six.reraise(dj_exc_type, dj_exc_value, traceback)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,562: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/utils/six.py\", line 685, in reraise\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,562: WARNING/MainProcess] raise value.with_traceback(tb)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] File \"/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py\", line 65, in execute\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] return self.cursor.execute(sql, params)\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] django.db.utils\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] .\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] ProgrammingError\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] :\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: WARNING/MainProcess] relation \"django_celery_beat_periodictask\" does not exist\r\ncelerybeatdev_1    | LINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\r\ncelerybeatdev_1    |                                                              ^\r\ncelerybeatdev_1    | [2017-08-12 20:11:55,564: INFO/MainProcess] Writing entries...\r\nturnateme_celerybeatdev_1 exited with code 1\r\nceleryworkerdev_1  | [2017-08-12 20:11:55,240: INFO/MainProcess] mingle: searching for neighbors\r\nceleryworkerdev_1  | [2017-08-12 20:11:56,273: INFO/MainProcess] mingle: all alone\r\nceleryworkerdev_1  | [2017-08-12 20:11:56,284: WARNING/MainProcess] /usr/local/lib/python3.5/site-packages/celery/fixups/django.py:202: UserWarning: Using settings.DEBUG leads to a memory leak, never use this setting in production environments!\r\n```\r\n\r\nIf anything else is needed to further debug this, please let me know. Thank you in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/20", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/20/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/20/events", "html_url": "https://github.com/celery/django-celery-results/issues/20", "id": 226869744, "node_id": "MDU6SXNzdWUyMjY4Njk3NDQ=", "number": 20, "title": "AppRegistryNotReady when trying to use CELERY_RESULT_BACKEND = 'django-db'", "user": {"login": "immerrr", "id": 579798, "node_id": "MDQ6VXNlcjU3OTc5OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/579798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/immerrr", "html_url": "https://github.com/immerrr", "followers_url": "https://api.github.com/users/immerrr/followers", "following_url": "https://api.github.com/users/immerrr/following{/other_user}", "gists_url": "https://api.github.com/users/immerrr/gists{/gist_id}", "starred_url": "https://api.github.com/users/immerrr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/immerrr/subscriptions", "organizations_url": "https://api.github.com/users/immerrr/orgs", "repos_url": "https://api.github.com/users/immerrr/repos", "events_url": "https://api.github.com/users/immerrr/events{/privacy}", "received_events_url": "https://api.github.com/users/immerrr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419792598, "node_id": "MDU6TGFiZWw0MTk3OTI1OTg=", "url": "https://api.github.com/repos/celery/django-celery-results/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-05-07T15:42:42Z", "updated_at": "2019-11-04T19:39:27Z", "closed_at": "2019-05-06T04:13:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nI'm experiencing an issue very similar to what was described in #11, but I can't find a misconfiguration. I have been following http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html so far, and I have:\r\n\r\ncelery.py\r\n\r\n```python\r\nimport os\r\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myapp.settings')\r\n\r\nfrom celery import Celery\r\n\r\napp = Celery('myapp')\r\napp.config_from_object('django.conf:settings', namespace='CELERY')\r\n\r\napp.autodiscover_tasks()\r\n\r\n\r\n@app.task(bind=True)\r\ndef debug_task(self):\r\n    print('Request: {0!r}'.format(self.request))\r\n```\r\n\r\nAnd then in settings I have:\r\n\r\n```\r\nINSTALLED_APPS = [\r\n    ....\r\n    'django_celery_results',\r\n]\r\n\r\n...\r\n\r\nCELERY_RESULT_BACKEND = 'django-db'\r\n```\r\n\r\nI can run a worker successfully, and I can run a task from django shell. What I cannot do is, for example, to inspect the result of the task:\r\n```\r\n$ celery -A myapp result 3e5d00a5-f20e-4d1b-8996-eaade4b1b051\r\nTraceback (most recent call last):\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/kombu/utils/objects.py\", line 42, in __get__\r\n    return obj.__dict__[self.__name__]\r\nKeyError: 'backend'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/immerrr/.conda/envs/myapp/bin/celery\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/__main__.py\", line 14, in main\r\n    _main()\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 326, in main\r\n    cmd.execute_from_commandline(argv)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 488, in execute_from_commandline\r\n    super(CeleryCommand, self).execute_from_commandline(argv)))\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 281, in execute_from_commandline\r\n    return self.handle_argv(self.prog_name, argv[1:])\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 480, in handle_argv\r\n    return self.execute(command, argv)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 412, in execute\r\n    ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 285, in run_from_argv\r\n    sys.argv if argv is None else argv, command)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 368, in handle_argv\r\n    return self(*args, **options)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 244, in __call__\r\n    ret = self.run(*args, **kwargs)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/result.py\", line 36, in run\r\n    task_result = result_cls(task_id)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/result.py\", line 93, in __init__\r\n    self.backend = backend or self.app.backend\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/kombu/utils/objects.py\", line 44, in __get__\r\n    value = obj.__dict__[self.__name__] = self.__get(obj)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/app/base.py\", line 1182, in backend\r\n    return self._get_backend()\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/app/base.py\", line 900, in _get_backend\r\n    self.loader)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/app/backends.py\", line 65, in by_url\r\n    return by_name(backend, loader), url\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/app/backends.py\", line 45, in by_name\r\n    cls = symbol_by_name(backend, aliases)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/kombu/utils/imports.py\", line 56, in symbol_by_name\r\n    module = imp(module_name, package=package, **kwargs)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 978, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 950, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 655, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 205, in _call_with_frames_removed\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/django_celery_results/backends/__init__.py\", line 4, in <module>\r\n    from .database import DatabaseBackend\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/django_celery_results/backends/database.py\", line 7, in <module>\r\n    from ..models import TaskResult\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/django_celery_results/models.py\", line 17, in <module>\r\n    class TaskResult(models.Model):\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/django/db/models/base.py\", line 110, in __new__\r\n    app_config = apps.get_containing_app_config(module)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/django/apps/registry.py\", line 247, in get_containing_app_config\r\n    self.check_apps_ready()\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/django/apps/registry.py\", line 125, in check_apps_ready\r\n    raise AppRegistryNotReady(\"Apps aren't loaded yet.\")\r\ndjango.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.\r\n\r\n```\r\n\r\nIt seems like for some reason the fixup doesn't fire before the backend is accessed.\r\n\r\nIf it is of any help, accessing the backend happens from here:\r\n```\r\n  File \"/home/immerrr/.conda/envs/myapp/bin/celery\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/__main__.py\", line 14, in main\r\n    _main()\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 326, in main\r\n    cmd.execute_from_commandline(argv)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 488, in execute_from_commandline\r\n    super(CeleryCommand, self).execute_from_commandline(argv)))\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 281, in execute_from_commandline\r\n    return self.handle_argv(self.prog_name, argv[1:])\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 480, in handle_argv\r\n    return self.execute(command, argv)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/celery.py\", line 412, in execute\r\n    ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 285, in run_from_argv\r\n    sys.argv if argv is None else argv, command)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 368, in handle_argv\r\n    return self(*args, **options)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/base.py\", line 244, in __call__\r\n    ret = self.run(*args, **kwargs)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/bin/result.py\", line 36, in run\r\n    task_result = result_cls(task_id)\r\n  File \"/home/immerrr/.conda/envs/myapp/lib/python3.6/site-packages/celery/result.py\", line 93, in __init__\r\n    self.backend = backend or self.app.backend\r\n```\r\n\r\n\r\nHere's my pip freeze:\r\n```\r\namqp==2.1.4\r\nanyjson==0.3.3\r\nbilliard==3.5.0.2\r\ncelery==4.0.2\r\nCerberus==1.1\r\nclick==6.7\r\ncoverage==4.3.4\r\ndecorator==4.0.11\r\nDjango==1.11.1\r\ndjango-celery-results==1.0.1\r\ndjangorestframework==3.6.2\r\nfirst==2.0.1\r\nhttmock==1.2.6\r\nipython==6.0.0\r\nipython-genutils==0.2.0\r\nkombu==4.0.2\r\npexpect==4.2.1\r\npickleshare==0.7.4\r\npip-tools==1.9.0\r\nprompt-toolkit==1.0.14\r\nptyprocess==0.5.1\r\npudb==2017.1.2\r\npy==1.4.33\r\nPygments==2.2.0\r\npytest==3.0.7\r\npytest-cov==2.4.0\r\npytest-django==3.1.2\r\npytz==2017.2\r\nrequests==2.13.0\r\nsimplegeneric==0.8.1\r\nsix==1.10.0\r\ntraitlets==4.3.2\r\nurwid==1.3.1\r\nvine==1.1.3\r\nwcwidth==0.1.7\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/19", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/19/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/19/events", "html_url": "https://github.com/celery/django-celery-results/issues/19", "id": 225271478, "node_id": "MDU6SXNzdWUyMjUyNzE0Nzg=", "number": 19, "title": "Tasks are not getting added to database", "user": {"login": "sohaibfarooqi", "id": 13061583, "node_id": "MDQ6VXNlcjEzMDYxNTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/13061583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sohaibfarooqi", "html_url": "https://github.com/sohaibfarooqi", "followers_url": "https://api.github.com/users/sohaibfarooqi/followers", "following_url": "https://api.github.com/users/sohaibfarooqi/following{/other_user}", "gists_url": "https://api.github.com/users/sohaibfarooqi/gists{/gist_id}", "starred_url": "https://api.github.com/users/sohaibfarooqi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sohaibfarooqi/subscriptions", "organizations_url": "https://api.github.com/users/sohaibfarooqi/orgs", "repos_url": "https://api.github.com/users/sohaibfarooqi/repos", "events_url": "https://api.github.com/users/sohaibfarooqi/events{/privacy}", "received_events_url": "https://api.github.com/users/sohaibfarooqi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2017-04-29T17:16:17Z", "updated_at": "2020-01-31T08:48:59Z", "closed_at": "2019-05-06T04:12:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI have followed this link: http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#django-celery-results-using-the-django-orm-cache-as-a-result-backend\r\nto set up django-celery-results for my project. Migrations are running fine and i can see table `django_celery_results_taskresult` got created. \r\nThe problem is when i try to execute a task, it runs fine but the table i mentioned above didn't get populated.\r\nI have put `CELERY_RESULT_BACKEND = 'django-db'` and have placed `django_celery_results` in my INSTALLED_APPS. There is no error in logs either. Can anyone give me hint what i am doing wrong? Or guide me how can i debug this issue? \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/18", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/18/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/18/events", "html_url": "https://github.com/celery/django-celery-results/issues/18", "id": 220868942, "node_id": "MDU6SXNzdWUyMjA4Njg5NDI=", "number": 18, "title": "How to use it?", "user": {"login": "lehabaev", "id": 873055, "node_id": "MDQ6VXNlcjg3MzA1NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/873055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lehabaev", "html_url": "https://github.com/lehabaev", "followers_url": "https://api.github.com/users/lehabaev/followers", "following_url": "https://api.github.com/users/lehabaev/following{/other_user}", "gists_url": "https://api.github.com/users/lehabaev/gists{/gist_id}", "starred_url": "https://api.github.com/users/lehabaev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lehabaev/subscriptions", "organizations_url": "https://api.github.com/users/lehabaev/orgs", "repos_url": "https://api.github.com/users/lehabaev/repos", "events_url": "https://api.github.com/users/lehabaev/events{/privacy}", "received_events_url": "https://api.github.com/users/lehabaev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-11T07:58:45Z", "updated_at": "2017-04-11T18:00:26Z", "closed_at": "2017-04-11T18:00:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "When i start celery worker i get error\r\n\r\n```\r\nappregistrynotready: apps aren't loaded yet.\r\n```\r\n\r\nif i change, __CELERY_RESULT_BACKEND = 'django-db'__ to __CELERY_RESULT_BACKEND = 'redis://localhost:6379'__ , celery started, but i don't have task results in Django Admin.\r\n\r\nWhat i do wrong?\r\n\r\nApp versions\r\n```\r\nDjango (1.10.5)\r\ndjango-celery-beat (1.0.1)\r\ndjango-celery-results (1.0.1)\r\ncelery (4.0.2)\r\n```\r\n\r\nproject/celery.py\r\n\r\n```\r\nfrom __future__ import absolute_import, unicode_literals\r\nimport os\r\nfrom celery import Celery\r\n\r\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'project.settings')\r\n\r\napp = Celery(\"project_celery\")\r\n\r\n# Using a string here means the worker don't have to serialize\r\n# the configuration object to child processes.\r\n# - namespace='CELERY' means all celery-related configuration keys\r\n#   should have a `CELERY_` prefix.\r\napp.config_from_object('django.conf:settings', namespace='CELERY')\r\n\r\n# Load task modules from all registered Django app configs.\r\napp.autodiscover_tasks()\r\n```\r\n\r\nproject/__init__.py\r\n\r\n```\r\nfrom __future__ import absolute_import, unicode_literals\r\n\r\n# This will make sure the app is always imported when\r\n# Django starts so that shared_task will use this app.\r\nfrom .celery import app as celery_app\r\nfrom .tasks import *\r\n\r\n\r\n__all__ = ['celery_app']\r\n```\r\n\r\nproject/settings.py\r\n\r\n```\r\nINSTALLED_APPS = [\r\n    . . . \r\n    'django_celery_results',\r\n    'django_celery_beat'\r\n]\r\n\r\n# CELERY SETTINGS\r\nCELERY_BROKER_URL = 'redis://localhost:6379/0'\r\nCELERY_RESULT_BACKEND = 'django-db'\r\nCELERY_TIMEZONE = TIME_ZONE\r\nCELERY_ACCEPT_CONTENT = ['application/json']\r\nCELERY_TASK_SERIALIZER = 'json'\r\nCELERY_RESULT_SERIALIZER = 'json'\r\nCELERY_TASK_TRACK_STARTED = True\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/17", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/17/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/17/events", "html_url": "https://github.com/celery/django-celery-results/issues/17", "id": 220841196, "node_id": "MDU6SXNzdWUyMjA4NDExOTY=", "number": 17, "title": "What's the use of 'hidden' field?", "user": {"login": "gotounix", "id": 18606632, "node_id": "MDQ6VXNlcjE4NjA2NjMy", "avatar_url": "https://avatars2.githubusercontent.com/u/18606632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gotounix", "html_url": "https://github.com/gotounix", "followers_url": "https://api.github.com/users/gotounix/followers", "following_url": "https://api.github.com/users/gotounix/following{/other_user}", "gists_url": "https://api.github.com/users/gotounix/gists{/gist_id}", "starred_url": "https://api.github.com/users/gotounix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gotounix/subscriptions", "organizations_url": "https://api.github.com/users/gotounix/orgs", "repos_url": "https://api.github.com/users/gotounix/repos", "events_url": "https://api.github.com/users/gotounix/events{/privacy}", "received_events_url": "https://api.github.com/users/gotounix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-11T05:10:57Z", "updated_at": "2017-08-01T10:40:16Z", "closed_at": "2017-08-01T10:40:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/16", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/16/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/16/events", "html_url": "https://github.com/celery/django-celery-results/issues/16", "id": 219949356, "node_id": "MDU6SXNzdWUyMTk5NDkzNTY=", "number": 16, "title": "Writing results temporarly to memory", "user": {"login": "psychok7", "id": 282284, "node_id": "MDQ6VXNlcjI4MjI4NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/282284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psychok7", "html_url": "https://github.com/psychok7", "followers_url": "https://api.github.com/users/psychok7/followers", "following_url": "https://api.github.com/users/psychok7/following{/other_user}", "gists_url": "https://api.github.com/users/psychok7/gists{/gist_id}", "starred_url": "https://api.github.com/users/psychok7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psychok7/subscriptions", "organizations_url": "https://api.github.com/users/psychok7/orgs", "repos_url": "https://api.github.com/users/psychok7/repos", "events_url": "https://api.github.com/users/psychok7/events{/privacy}", "received_events_url": "https://api.github.com/users/psychok7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-04-06T16:05:02Z", "updated_at": "2017-05-11T13:59:18Z", "closed_at": "2017-05-11T13:59:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Would you consider a new feature (if there is not  a similar one already that i couldn't find) which is writing the celery results in a temporary cache backend (like Redis for example), and having a callable Django management command to retrieve multiple results and dump them in bulk as well into a Database (Postgres for e.g)??\r\n\r\nThis way we could have the \"historical\" data without massacring our database even if it was not up to date.\r\n\r\nIn my case i only check these results in Django admin once in a while and before i do, i see myself running the command (or assigning it to celery beat) to get the updates into the database and into the admin.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/15", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/15/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/15/events", "html_url": "https://github.com/celery/django-celery-results/issues/15", "id": 208448067, "node_id": "MDU6SXNzdWUyMDg0NDgwNjc=", "number": 15, "title": "Worker status in the admin", "user": {"login": "psychok7", "id": 282284, "node_id": "MDQ6VXNlcjI4MjI4NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/282284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psychok7", "html_url": "https://github.com/psychok7", "followers_url": "https://api.github.com/users/psychok7/followers", "following_url": "https://api.github.com/users/psychok7/following{/other_user}", "gists_url": "https://api.github.com/users/psychok7/gists{/gist_id}", "starred_url": "https://api.github.com/users/psychok7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psychok7/subscriptions", "organizations_url": "https://api.github.com/users/psychok7/orgs", "repos_url": "https://api.github.com/users/psychok7/repos", "events_url": "https://api.github.com/users/psychok7/events{/privacy}", "received_events_url": "https://api.github.com/users/psychok7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-17T13:53:16Z", "updated_at": "2017-05-05T13:36:50Z", "closed_at": "2017-05-05T13:36:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "@ask In django-celery we could see the active workers in the admin, with this new package is there a way for that as well? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/12", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/12/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/12/events", "html_url": "https://github.com/celery/django-celery-results/issues/12", "id": 198928043, "node_id": "MDU6SXNzdWUxOTg5MjgwNDM=", "number": 12, "title": "how to get task's result from database realtime", "user": {"login": "imaemo", "id": 11534313, "node_id": "MDQ6VXNlcjExNTM0MzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/11534313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imaemo", "html_url": "https://github.com/imaemo", "followers_url": "https://api.github.com/users/imaemo/followers", "following_url": "https://api.github.com/users/imaemo/following{/other_user}", "gists_url": "https://api.github.com/users/imaemo/gists{/gist_id}", "starred_url": "https://api.github.com/users/imaemo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imaemo/subscriptions", "organizations_url": "https://api.github.com/users/imaemo/orgs", "repos_url": "https://api.github.com/users/imaemo/repos", "events_url": "https://api.github.com/users/imaemo/events{/privacy}", "received_events_url": "https://api.github.com/users/imaemo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-01-05T10:54:26Z", "updated_at": "2017-01-11T01:56:35Z", "closed_at": "2017-01-11T01:56:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using `celery 4.0.2`, `django 1.10`, `mysql` and I add a task like below:  \r\n```\r\n@app.task\r\ndef add():\r\n    print 'start add'\r\n    time.sleep(30)\r\n    print 'end add'\r\n    return 1\r\n```\r\nbut in the table`django_celery_results_taskresult`, I can only get the record after the task excuted (means after 30s). I don't know why, can any one help me\r\n\r\n`update`\r\nfinal, i find it's my config's problem, after i add `CELERY_TASK_TRACK_STARTED=True`, it works", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/11", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/11/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/11/events", "html_url": "https://github.com/celery/django-celery-results/issues/11", "id": 197091134, "node_id": "MDU6SXNzdWUxOTcwOTExMzQ=", "number": 11, "title": "AppRegistryNotReady - apps aren't loaded yet", "user": {"login": "grantmcconnaughey", "id": 4023140, "node_id": "MDQ6VXNlcjQwMjMxNDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/4023140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grantmcconnaughey", "html_url": "https://github.com/grantmcconnaughey", "followers_url": "https://api.github.com/users/grantmcconnaughey/followers", "following_url": "https://api.github.com/users/grantmcconnaughey/following{/other_user}", "gists_url": "https://api.github.com/users/grantmcconnaughey/gists{/gist_id}", "starred_url": "https://api.github.com/users/grantmcconnaughey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grantmcconnaughey/subscriptions", "organizations_url": "https://api.github.com/users/grantmcconnaughey/orgs", "repos_url": "https://api.github.com/users/grantmcconnaughey/repos", "events_url": "https://api.github.com/users/grantmcconnaughey/events{/privacy}", "received_events_url": "https://api.github.com/users/grantmcconnaughey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-12-22T04:14:25Z", "updated_at": "2016-12-22T20:37:35Z", "closed_at": "2016-12-22T13:45:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I receive an `AppRegistryNotReady` exception when starting up the celery worker using `celery worker -A myapp.celery`. I am the following versions:\r\n\r\n```\r\ndjango-celery-results (1.0.1)\r\ncelery (4.0.2)\r\n```\r\n\r\nMy `CELERY_RESULT_BACKEND` is `'django-db'`.`django_celery_results` is in `INSTALLED_APPS`.\r\n\r\nI understand why this is happening... I'm not starting up Celery in the context of a `manage.py` script. But I'm wondering how I'm supposed to start celery if I'm using the DB backend with django-celery-results.\r\n\r\nHow should I be starting up the celery worker using django-celery-results?\r\n\r\nThe full traceback:\r\n\r\n```\r\n[2016-12-21 21:56:51,028: CRITICAL/MainProcess] Unrecoverable error: AppRegistryNotReady(\"Apps aren't loaded yet.\",)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/worker/worker.py\", line 203, in start\r\n    self.blueprint.start(self)\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/bootsteps.py\", line 115, in start\r\n    self.on_start()\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/apps/worker.py\", line 143, in on_start\r\n    self.emit_banner()\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/apps/worker.py\", line 158, in emit_banner\r\n    ' \\n', self.startup_info(artlines=not use_image))),\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/apps/worker.py\", line 221, in startup_info\r\n    results=self.app.backend.as_uri(),\r\n  File \"/usr/local/lib/python2.7/site-packages/kombu/utils/objects.py\", line 44, in __get__\r\n    value = obj.__dict__[self.__name__] = self.__get(obj)\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/app/base.py\", line 1182, in backend\r\n    return self._get_backend()\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/app/base.py\", line 900, in _get_backend\r\n    self.loader)\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/app/backends.py\", line 65, in by_url\r\n    return by_name(backend, loader), url\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/app/backends.py\", line 45, in by_name\r\n    cls = symbol_by_name(backend, aliases)\r\n  File \"/usr/local/lib/python2.7/site-packages/kombu/utils/imports.py\", line 56, in symbol_by_name\r\n    module = imp(module_name, package=package, **kwargs)\r\n  File \"/usr/local/lib/python2.7/importlib/__init__.py\", line 37, in import_module\r\n    __import__(name)\r\n  File \"/usr/local/lib/python2.7/site-packages/django_celery_results/backends/__init__.py\", line 4, in <module>\r\n    from .database import DatabaseBackend\r\n  File \"/usr/local/lib/python2.7/site-packages/django_celery_results/backends/database.py\", line 7, in <module>\r\n    from ..models import TaskResult\r\n  File \"/usr/local/lib/python2.7/site-packages/django_celery_results/models.py\", line 17, in <module>\r\n    class TaskResult(models.Model):\r\n  File \"/usr/local/lib/python2.7/site-packages/django/db/models/base.py\", line 94, in __new__\r\n    app_config = apps.get_containing_app_config(module)\r\n  File \"/usr/local/lib/python2.7/site-packages/django/apps/registry.py\", line 239, in get_containing_app_config\r\n    self.check_apps_ready()\r\n  File \"/usr/local/lib/python2.7/site-packages/django/apps/registry.py\", line 124, in check_apps_ready\r\n    raise AppRegistryNotReady(\"Apps aren't loaded yet.\")\r\nAppRegistryNotReady: Apps aren't loaded yet.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/10", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/10/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/10/events", "html_url": "https://github.com/celery/django-celery-results/issues/10", "id": 196938289, "node_id": "MDU6SXNzdWUxOTY5MzgyODk=", "number": 10, "title": "Use multiple Database Backends with celery", "user": {"login": "NotANormalNerd", "id": 2896599, "node_id": "MDQ6VXNlcjI4OTY1OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2896599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotANormalNerd", "html_url": "https://github.com/NotANormalNerd", "followers_url": "https://api.github.com/users/NotANormalNerd/followers", "following_url": "https://api.github.com/users/NotANormalNerd/following{/other_user}", "gists_url": "https://api.github.com/users/NotANormalNerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotANormalNerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotANormalNerd/subscriptions", "organizations_url": "https://api.github.com/users/NotANormalNerd/orgs", "repos_url": "https://api.github.com/users/NotANormalNerd/repos", "events_url": "https://api.github.com/users/NotANormalNerd/events{/privacy}", "received_events_url": "https://api.github.com/users/NotANormalNerd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-12-21T13:54:06Z", "updated_at": "2019-07-10T16:33:45Z", "closed_at": "2019-07-10T16:33:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to use the django-celery-results on a Django installation and the database backend backend on a worker or are they incompatible?\r\nIs it possible to configure them to be compatible?\r\n\r\nOr would it be better to have a custom table to share results?\r\n\r\nThe problem that arises when just using celery and the database backend on the django end is that it will bypass all the nice django features and optimizations. As well as not being noticed by the debug-toolbar.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/9", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/9/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/9/events", "html_url": "https://github.com/celery/django-celery-results/issues/9", "id": 196093620, "node_id": "MDU6SXNzdWUxOTYwOTM2MjA=", "number": 9, "title": "Not compatible with celery < 4.0", "user": {"login": "driesdesmet", "id": 60802, "node_id": "MDQ6VXNlcjYwODAy", "avatar_url": "https://avatars3.githubusercontent.com/u/60802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/driesdesmet", "html_url": "https://github.com/driesdesmet", "followers_url": "https://api.github.com/users/driesdesmet/followers", "following_url": "https://api.github.com/users/driesdesmet/following{/other_user}", "gists_url": "https://api.github.com/users/driesdesmet/gists{/gist_id}", "starred_url": "https://api.github.com/users/driesdesmet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/driesdesmet/subscriptions", "organizations_url": "https://api.github.com/users/driesdesmet/orgs", "repos_url": "https://api.github.com/users/driesdesmet/repos", "events_url": "https://api.github.com/users/driesdesmet/events{/privacy}", "received_events_url": "https://api.github.com/users/driesdesmet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-12-16T16:08:05Z", "updated_at": "2017-07-04T19:04:56Z", "closed_at": "2016-12-23T08:32:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I had installed this with Celery 3.1.23 and got this error:\r\n\r\n`ImportError: cannot import name python_2_unicode_compatible`\r\n\r\nbut I couldn't find any warning on that in the docs or elsewhere. Even better would be to fix the dependancies in setup.py.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/8", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/8/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/8/events", "html_url": "https://github.com/celery/django-celery-results/issues/8", "id": 189960773, "node_id": "MDU6SXNzdWUxODk5NjA3NzM=", "number": 8, "title": "a demo ? ", "user": {"login": "stfenjobs", "id": 6580897, "node_id": "MDQ6VXNlcjY1ODA4OTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6580897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stfenjobs", "html_url": "https://github.com/stfenjobs", "followers_url": "https://api.github.com/users/stfenjobs/followers", "following_url": "https://api.github.com/users/stfenjobs/following{/other_user}", "gists_url": "https://api.github.com/users/stfenjobs/gists{/gist_id}", "starred_url": "https://api.github.com/users/stfenjobs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stfenjobs/subscriptions", "organizations_url": "https://api.github.com/users/stfenjobs/orgs", "repos_url": "https://api.github.com/users/stfenjobs/repos", "events_url": "https://api.github.com/users/stfenjobs/events{/privacy}", "received_events_url": "https://api.github.com/users/stfenjobs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-17T07:19:00Z", "updated_at": "2016-12-07T17:12:41Z", "closed_at": "2016-12-07T17:12:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/7", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/7/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/7/events", "html_url": "https://github.com/celery/django-celery-results/issues/7", "id": 188474140, "node_id": "MDU6SXNzdWUxODg0NzQxNDA=", "number": 7, "title": "Store task name ?", "user": {"login": "kedare", "id": 359877, "node_id": "MDQ6VXNlcjM1OTg3Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/359877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kedare", "html_url": "https://github.com/kedare", "followers_url": "https://api.github.com/users/kedare/followers", "following_url": "https://api.github.com/users/kedare/following{/other_user}", "gists_url": "https://api.github.com/users/kedare/gists{/gist_id}", "starred_url": "https://api.github.com/users/kedare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kedare/subscriptions", "organizations_url": "https://api.github.com/users/kedare/orgs", "repos_url": "https://api.github.com/users/kedare/repos", "events_url": "https://api.github.com/users/kedare/events{/privacy}", "received_events_url": "https://api.github.com/users/kedare/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 27, "created_at": "2016-11-10T10:40:05Z", "updated_at": "2019-05-06T04:10:45Z", "closed_at": "2019-05-06T04:10:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\n\r\nWould there be a way to store the task name with the result ? If not, how to know what is the task associated with a result ?\r\n\r\nThanks.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/5", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/5/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/5/events", "html_url": "https://github.com/celery/django-celery-results/issues/5", "id": 187729490, "node_id": "MDU6SXNzdWUxODc3Mjk0OTA=", "number": 5, "title": "Result Task Admin interface", "user": {"login": "zeezdev", "id": 11330574, "node_id": "MDQ6VXNlcjExMzMwNTc0", "avatar_url": "https://avatars2.githubusercontent.com/u/11330574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeezdev", "html_url": "https://github.com/zeezdev", "followers_url": "https://api.github.com/users/zeezdev/followers", "following_url": "https://api.github.com/users/zeezdev/following{/other_user}", "gists_url": "https://api.github.com/users/zeezdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeezdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeezdev/subscriptions", "organizations_url": "https://api.github.com/users/zeezdev/orgs", "repos_url": "https://api.github.com/users/zeezdev/repos", "events_url": "https://api.github.com/users/zeezdev/events{/privacy}", "received_events_url": "https://api.github.com/users/zeezdev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-07T14:45:03Z", "updated_at": "2016-11-07T22:27:10Z", "closed_at": "2016-11-07T22:27:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/4", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/4/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/4/events", "html_url": "https://github.com/celery/django-celery-results/issues/4", "id": 187630803, "node_id": "MDU6SXNzdWUxODc2MzA4MDM=", "number": 4, "title": "pip does not install migrations", "user": {"login": "mmlin", "id": 401800, "node_id": "MDQ6VXNlcjQwMTgwMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/401800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmlin", "html_url": "https://github.com/mmlin", "followers_url": "https://api.github.com/users/mmlin/followers", "following_url": "https://api.github.com/users/mmlin/following{/other_user}", "gists_url": "https://api.github.com/users/mmlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmlin/subscriptions", "organizations_url": "https://api.github.com/users/mmlin/orgs", "repos_url": "https://api.github.com/users/mmlin/repos", "events_url": "https://api.github.com/users/mmlin/events{/privacy}", "received_events_url": "https://api.github.com/users/mmlin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-11-07T05:55:25Z", "updated_at": "2016-11-07T21:40:16Z", "closed_at": "2016-11-07T21:40:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "When doing `pip install django-celery-results`, the migrations directory is not installed. The consequence is that doing `python manage.py migrate` does not create the results table. Doing the `pip install` directly from GitHub works fine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/2", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/2/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/2/events", "html_url": "https://github.com/celery/django-celery-results/issues/2", "id": 176724840, "node_id": "MDU6SXNzdWUxNzY3MjQ4NDA=", "number": 2, "title": "Docs link in README 404s", "user": {"login": "edmorley", "id": 501702, "node_id": "MDQ6VXNlcjUwMTcwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/501702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edmorley", "html_url": "https://github.com/edmorley", "followers_url": "https://api.github.com/users/edmorley/followers", "following_url": "https://api.github.com/users/edmorley/following{/other_user}", "gists_url": "https://api.github.com/users/edmorley/gists{/gist_id}", "starred_url": "https://api.github.com/users/edmorley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edmorley/subscriptions", "organizations_url": "https://api.github.com/users/edmorley/orgs", "repos_url": "https://api.github.com/users/edmorley/repos", "events_url": "https://api.github.com/users/edmorley/events{/privacy}", "received_events_url": "https://api.github.com/users/edmorley/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-09-13T19:11:09Z", "updated_at": "2016-11-07T23:35:43Z", "closed_at": "2016-11-07T22:27:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "The link to http://django-celery-results.readthedocs.org 404s.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-results/issues/1", "repository_url": "https://api.github.com/repos/celery/django-celery-results", "labels_url": "https://api.github.com/repos/celery/django-celery-results/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-results/issues/1/comments", "events_url": "https://api.github.com/repos/celery/django-celery-results/issues/1/events", "html_url": "https://github.com/celery/django-celery-results/issues/1", "id": 171217162, "node_id": "MDU6SXNzdWUxNzEyMTcxNjI=", "number": 1, "title": "Migrations", "user": {"login": "stuartaccent", "id": 20105514, "node_id": "MDQ6VXNlcjIwMTA1NTE0", "avatar_url": "https://avatars3.githubusercontent.com/u/20105514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stuartaccent", "html_url": "https://github.com/stuartaccent", "followers_url": "https://api.github.com/users/stuartaccent/followers", "following_url": "https://api.github.com/users/stuartaccent/following{/other_user}", "gists_url": "https://api.github.com/users/stuartaccent/gists{/gist_id}", "starred_url": "https://api.github.com/users/stuartaccent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stuartaccent/subscriptions", "organizations_url": "https://api.github.com/users/stuartaccent/orgs", "repos_url": "https://api.github.com/users/stuartaccent/repos", "events_url": "https://api.github.com/users/stuartaccent/events{/privacy}", "received_events_url": "https://api.github.com/users/stuartaccent/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-08-15T17:21:33Z", "updated_at": "2016-09-29T07:43:57Z", "closed_at": "2016-09-26T17:13:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi. I was just wondering if you plan on creating any migrations for this project.\n\nThanks Stuart\n", "performed_via_github_app": null, "score": 1.0}]}