{"total_count": 179, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/199", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/199/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/199/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/199", "id": 668234090, "node_id": "MDU6SXNzdWU2NjgyMzQwOTA=", "number": 199, "title": "Is this model available to be converted to a .tflite?", "user": {"login": "hguan8", "id": 24465732, "node_id": "MDQ6VXNlcjI0NDY1NzMy", "avatar_url": "https://avatars1.githubusercontent.com/u/24465732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hguan8", "html_url": "https://github.com/hguan8", "followers_url": "https://api.github.com/users/hguan8/followers", "following_url": "https://api.github.com/users/hguan8/following{/other_user}", "gists_url": "https://api.github.com/users/hguan8/gists{/gist_id}", "starred_url": "https://api.github.com/users/hguan8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hguan8/subscriptions", "organizations_url": "https://api.github.com/users/hguan8/orgs", "repos_url": "https://api.github.com/users/hguan8/repos", "events_url": "https://api.github.com/users/hguan8/events{/privacy}", "received_events_url": "https://api.github.com/users/hguan8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-29T23:28:03Z", "updated_at": "2020-08-08T08:51:13Z", "closed_at": "2020-08-08T08:51:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can Tensorflow Lite convert this BERT model to .tflite for mobile deployment? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/197", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/197/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/197/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/197", "id": 665606408, "node_id": "MDU6SXNzdWU2NjU2MDY0MDg=", "number": 197, "title": "How to save and load Python Keras BERT model to serialize it?", "user": {"login": "lxykyle01", "id": 47942619, "node_id": "MDQ6VXNlcjQ3OTQyNjE5", "avatar_url": "https://avatars1.githubusercontent.com/u/47942619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lxykyle01", "html_url": "https://github.com/lxykyle01", "followers_url": "https://api.github.com/users/lxykyle01/followers", "following_url": "https://api.github.com/users/lxykyle01/following{/other_user}", "gists_url": "https://api.github.com/users/lxykyle01/gists{/gist_id}", "starred_url": "https://api.github.com/users/lxykyle01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lxykyle01/subscriptions", "organizations_url": "https://api.github.com/users/lxykyle01/orgs", "repos_url": "https://api.github.com/users/lxykyle01/repos", "events_url": "https://api.github.com/users/lxykyle01/events{/privacy}", "received_events_url": "https://api.github.com/users/lxykyle01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-25T15:40:14Z", "updated_at": "2020-07-25T18:33:14Z", "closed_at": "2020-07-25T18:33:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I didn't find this useful packaging tool before, so I tried to build the tool myself. I encountered such a problem when saving the model. Do you have any relevant solutions? This link describes all the details of the problem. \r\nhttps://stackoverflow.com/questions/63086969/how-to-save-and-load-python-keras-bert-model-to-serialize-it \r\nIf you can solve this problem, I will be very grateful to you.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/196", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/196/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/196/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/196/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/196", "id": 664874208, "node_id": "MDU6SXNzdWU2NjQ4NzQyMDg=", "number": 196, "title": "Which version of keras-bert should I download? keras:2.2.4 tf:1.12.0", "user": {"login": "AliveHH", "id": 15663907, "node_id": "MDQ6VXNlcjE1NjYzOTA3", "avatar_url": "https://avatars0.githubusercontent.com/u/15663907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AliveHH", "html_url": "https://github.com/AliveHH", "followers_url": "https://api.github.com/users/AliveHH/followers", "following_url": "https://api.github.com/users/AliveHH/following{/other_user}", "gists_url": "https://api.github.com/users/AliveHH/gists{/gist_id}", "starred_url": "https://api.github.com/users/AliveHH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AliveHH/subscriptions", "organizations_url": "https://api.github.com/users/AliveHH/orgs", "repos_url": "https://api.github.com/users/AliveHH/repos", "events_url": "https://api.github.com/users/AliveHH/events{/privacy}", "received_events_url": "https://api.github.com/users/AliveHH/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-24T02:24:42Z", "updated_at": "2020-07-26T16:36:59Z", "closed_at": "2020-07-26T16:36:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "when I pip install keras-bert, keras was automatically upgraded to 2.4.3, which does not match tf 1.12.0.\r\nSo, which version of keras-bert should I download?\r\nthx~~~~", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/195", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/195/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/195/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/195/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/195", "id": 664126464, "node_id": "MDU6SXNzdWU2NjQxMjY0NjQ=", "number": 195, "title": "NoneType error when fine tuning BERT CLS embeddings directly", "user": {"login": "radurevutchi", "id": 25625538, "node_id": "MDQ6VXNlcjI1NjI1NTM4", "avatar_url": "https://avatars0.githubusercontent.com/u/25625538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radurevutchi", "html_url": "https://github.com/radurevutchi", "followers_url": "https://api.github.com/users/radurevutchi/followers", "following_url": "https://api.github.com/users/radurevutchi/following{/other_user}", "gists_url": "https://api.github.com/users/radurevutchi/gists{/gist_id}", "starred_url": "https://api.github.com/users/radurevutchi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radurevutchi/subscriptions", "organizations_url": "https://api.github.com/users/radurevutchi/orgs", "repos_url": "https://api.github.com/users/radurevutchi/repos", "events_url": "https://api.github.com/users/radurevutchi/events{/privacy}", "received_events_url": "https://api.github.com/users/radurevutchi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-23T00:24:01Z", "updated_at": "2020-08-06T08:49:49Z", "closed_at": "2020-08-06T08:49:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am attempting to fine-tune the BERT embeddings, instead of fine-tuning the BERT model on a downstream task. Basically I input several sentences and attempt to fine-tune the 'CLS' token directly according to a specific target embedding.\r\n\r\nI imported keras_bert and loaded the BERT base uncased model. I peel off the NSP and MLM layers and keep the final output as the 'Extract' layer - which is the CLS token embedding. I have a set of Y labels (target embeddings for CLS). I would like to fine-tune for 4 epochs. However, I keep getting a NoneType error which I cannot debug for days now.\r\n\r\nThis is the error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"fine_tune_embedding.py\", line 309, in <module>\r\n    epochs=4)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/keras/engine/training.py\", line 1213, in fit\r\n    self._make_train_function()\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/keras/engine/training.py\", line 316, in _make_train_function\r\n    loss=self.total_loss)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py\", line 506, in get_updates\r\n    return [self.apply_gradients(grads_and_vars)]\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py\", line 441, in apply_gradients\r\n    kwargs={\"name\": name})\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 1917, in merge_call\r\n    return self._merge_call(merge_fn, args, kwargs)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 1924, in _merge_call\r\n    return merge_fn(self._strategy, *args, **kwargs)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py\", line 494, in _distributed_apply\r\n    with ops.control_dependencies(update_ops):\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 5257, in control_dependencies\r\n    return get_default_graph().control_dependencies(control_inputs)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/framework/func_graph.py\", line 356, in control_dependencies\r\n    return super(FuncGraph, self).control_dependencies(filtered_control_inputs)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 4691, in control_dependencies\r\n    c = self.as_graph_element(c)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 3610, in as_graph_element\r\n    return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\r\n  File \"/home/rrevutch/.conda/envs/training/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 3699, in _as_graph_element_locked\r\n    (type(obj).__name__, types_str))\r\nTypeError: Can not convert a NoneType into a Tensor or Operation.\r\n```\r\nI tried passing in a few sentences into BERT and just using model.predict() to get their respective output CLS embeddings. That worked out fine. I even double checked them with BERT's built in extract_features.py code. However, I do not understand the cause of this type error and any documentation for it online.\r\n\r\nThe code:\r\n```\r\nadam = Adam(lr=2e-5,decay=0.01)\r\nmaxlen = 50\r\nprint('begin_build')\r\n\r\nconfig_file = os.path.join(BERT_PRETRAINED_DIR, 'bert_config.json')\r\ncheckpoint_file = os.path.join(BERT_PRETRAINED_DIR, 'bert_model.ckpt')\r\nmodel = load_trained_model_from_checkpoint(config_file, checkpoint_file, training=True, trainable=True, seq_len=maxlen)\r\nmodel3 = Model(inputs=model.input,\r\n                        outputs=model.get_layer('Extract').output)\r\nmodel3.compile(loss='mse',\r\n                optimizer=adam)\r\nmodel3.summary()\r\n\r\n\r\n\r\ninput_ids = []\r\ntoken_type_ids = []\r\nattention_mask = []\r\ns = [\"Hello there, I fly airplanes.\"]\r\ninput_ids.append(tokenized_X['input_ids'][0].numpy())\r\ntoken_type_ids.append(tokenized_X['token_type_ids'][0].numpy())\r\nattention_mask.append(tokenized_X['attention_mask'][0].numpy())\r\n\r\nX = [input_ids, token_type_ids, attention_mask]\r\n\r\n# This works flawlessly\r\n#embedding_output = model3.predict(X)\r\n\r\n\r\n# This fails\r\nmodel3.fit(X,\r\n            Y,\r\n            batch_size=8,\r\n            epochs=4)\r\n```\r\n\r\nUltimately, I will want to replace that last 'Extract' layer with a similar one that extracts the embedding of the first token after CLS, but that is a later challenge. For now, could someone help me understand what is going on here? Any help would be appreciated :)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/194", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/194/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/194/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/194", "id": 656104080, "node_id": "MDU6SXNzdWU2NTYxMDQwODA=", "number": 194, "title": "error on codec call, no file found", "user": {"login": "troy109", "id": 52894889, "node_id": "MDQ6VXNlcjUyODk0ODg5", "avatar_url": "https://avatars3.githubusercontent.com/u/52894889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/troy109", "html_url": "https://github.com/troy109", "followers_url": "https://api.github.com/users/troy109/followers", "following_url": "https://api.github.com/users/troy109/following{/other_user}", "gists_url": "https://api.github.com/users/troy109/gists{/gist_id}", "starred_url": "https://api.github.com/users/troy109/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/troy109/subscriptions", "organizations_url": "https://api.github.com/users/troy109/orgs", "repos_url": "https://api.github.com/users/troy109/repos", "events_url": "https://api.github.com/users/troy109/events{/privacy}", "received_events_url": "https://api.github.com/users/troy109/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-07-13T20:05:13Z", "updated_at": "2020-07-26T16:37:04Z", "closed_at": "2020-07-26T16:37:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am trying to run the codec call below but I am getting and error that the file is not found.\r\n\r\nAlso, isn't the codec call deprecated?\r\n\r\nAlso, I am not sure that the extract embeddings section of this code is supposed to do.  Is it writing the results?\r\n\r\n**Describe the Bug**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/troy/PycharmProjects/BERTPARSE/BERT-CODE/BERT_MIL.py\", line 297, in <module>\r\n    with codecs.open('xxx.txt', 'r', 'utf8') as reader:\r\n  File \"/usr/lib/python3.5/codecs.py\", line 895, in open\r\n    file = builtins.open(filename, mode, buffering)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'xxx.txt'\r\n```\r\n**Version Info**\r\n\r\n* [ ] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\n\r\nwith codecs.open('xxx.txt', 'r', 'utf8') as reader:\r\n    texts = map(lambda x: x.strip(), reader)\r\n    embeddings = extract_embeddings(model_path, texts)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/193", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/193/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/193/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/193/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/193", "id": 653447501, "node_id": "MDU6SXNzdWU2NTM0NDc1MDE=", "number": 193, "title": "Warning: Don't upgrade to 0.85.0 if you Keras version is less than 2.4", "user": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-08T16:48:34Z", "updated_at": "2020-07-25T01:37:57Z", "closed_at": "2020-07-08T16:48:51Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/192", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/192/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/192/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/192", "id": 645908984, "node_id": "MDU6SXNzdWU2NDU5MDg5ODQ=", "number": 192, "title": "Position embedding for relation extraction", "user": {"login": "juanluis17", "id": 43195222, "node_id": "MDQ6VXNlcjQzMTk1MjIy", "avatar_url": "https://avatars1.githubusercontent.com/u/43195222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juanluis17", "html_url": "https://github.com/juanluis17", "followers_url": "https://api.github.com/users/juanluis17/followers", "following_url": "https://api.github.com/users/juanluis17/following{/other_user}", "gists_url": "https://api.github.com/users/juanluis17/gists{/gist_id}", "starred_url": "https://api.github.com/users/juanluis17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juanluis17/subscriptions", "organizations_url": "https://api.github.com/users/juanluis17/orgs", "repos_url": "https://api.github.com/users/juanluis17/repos", "events_url": "https://api.github.com/users/juanluis17/events{/privacy}", "received_events_url": "https://api.github.com/users/juanluis17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-25T23:25:33Z", "updated_at": "2020-07-03T18:11:38Z", "closed_at": "2020-07-03T18:11:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I would like to know how I can modify the model input. In relation extraction, a position emebeddings is used based on the relative positions of each word with respect to each of the entities. How could I add a new input layer and even incorporate it as input for the current layers.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/191", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/191/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/191/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/191/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/191", "id": 629265242, "node_id": "MDU6SXNzdWU2MjkyNjUyNDI=", "number": 191, "title": "Removed \"adapter\"", "user": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-02T14:47:57Z", "updated_at": "2020-06-02T14:49:08Z", "closed_at": "2020-06-02T14:49:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The \"adapter\" was removed for its unstable behavior. For those who want to use this function, use the versions below:\r\n\r\n```\r\nkeras-bert==0.81.0\r\nkeras-transformer==0.33.0\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/190", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/190/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/190/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/190/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/190", "id": 628613152, "node_id": "MDU6SXNzdWU2Mjg2MTMxNTI=", "number": 190, "title": "keras-bert relies on features removed in keras-transformer 0.34.0", "user": {"login": "joseph-wakeling-frequenz", "id": 47320452, "node_id": "MDQ6VXNlcjQ3MzIwNDUy", "avatar_url": "https://avatars1.githubusercontent.com/u/47320452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joseph-wakeling-frequenz", "html_url": "https://github.com/joseph-wakeling-frequenz", "followers_url": "https://api.github.com/users/joseph-wakeling-frequenz/followers", "following_url": "https://api.github.com/users/joseph-wakeling-frequenz/following{/other_user}", "gists_url": "https://api.github.com/users/joseph-wakeling-frequenz/gists{/gist_id}", "starred_url": "https://api.github.com/users/joseph-wakeling-frequenz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joseph-wakeling-frequenz/subscriptions", "organizations_url": "https://api.github.com/users/joseph-wakeling-frequenz/orgs", "repos_url": "https://api.github.com/users/joseph-wakeling-frequenz/repos", "events_url": "https://api.github.com/users/joseph-wakeling-frequenz/events{/privacy}", "received_events_url": "https://api.github.com/users/joseph-wakeling-frequenz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-06-01T17:42:01Z", "updated_at": "2020-06-11T15:17:16Z", "closed_at": "2020-06-11T15:04:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nThe `get_model` function in the `keras_bert.bert` module passes a `use_adapter` parameter to the `keras_transformers.get_encoders` function:\r\nhttps://github.com/CyberZHG/keras-bert/blob/26bdfe3c36e77fa0524902f31263a920ccd62efb/keras_bert/bert.py#L124\r\n\r\nHowever, the latest commit to `keras-transformer`, corresponding to the v0.34.0 release, removes this parameter from the API:\r\nhttps://github.com/CyberZHG/keras-transformer/commit/60f1a0968caba6adb914a14b743f0ffbdc176a18\r\n\r\n`keras-bert` specifies its `keras-transformer` dependency as `>=0.30.0`.  This means that new or upgraded installs will automatically use 0.34.0 despite the breaking change.\r\n\r\nThis means that calling `get_model` fails with the following error:\r\n\r\n```\r\nTypeError: get_encoders() got an unexpected keyword argument 'use_adapter'\r\n```\r\n\r\nThe problem can be worked around by pinning the `keras-transformer` version at v0.33.0.\r\n\r\n**Version Info**\r\n\r\n* [x] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\nThe problem can be seen by running the `load_and_predict.py` demo.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/189", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/189/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/189/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/189", "id": 626398963, "node_id": "MDU6SXNzdWU2MjYzOTg5NjM=", "number": 189, "title": "Training a model from scratch?", "user": {"login": "ddofer", "id": 5120387, "node_id": "MDQ6VXNlcjUxMjAzODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5120387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ddofer", "html_url": "https://github.com/ddofer", "followers_url": "https://api.github.com/users/ddofer/followers", "following_url": "https://api.github.com/users/ddofer/following{/other_user}", "gists_url": "https://api.github.com/users/ddofer/gists{/gist_id}", "starred_url": "https://api.github.com/users/ddofer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ddofer/subscriptions", "organizations_url": "https://api.github.com/users/ddofer/orgs", "repos_url": "https://api.github.com/users/ddofer/repos", "events_url": "https://api.github.com/users/ddofer/events{/privacy}", "received_events_url": "https://api.github.com/users/ddofer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-28T10:29:02Z", "updated_at": "2020-06-05T00:02:54Z", "closed_at": "2020-06-05T00:02:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "1. Does the package support training a model from scratch (tokenizer and all)? (Both MLM pretraining, and later finetuning)\r\n2. Could you provide an example of the code you used for processing the data for the MLM? I see there's a generator for it that expects sentence pairs, but it's unclear to me how they should be structured (As there aren't labels there for the NSP), or how to efficiently structure it. The code you used for this would be awesome to have in the examples!\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/188", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/188/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/188/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/188", "id": 602486680, "node_id": "MDU6SXNzdWU2MDI0ODY2ODA=", "number": 188, "title": "The loss of MLM seems wrong", "user": {"login": "showerage", "id": 23148749, "node_id": "MDQ6VXNlcjIzMTQ4NzQ5", "avatar_url": "https://avatars0.githubusercontent.com/u/23148749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/showerage", "html_url": "https://github.com/showerage", "followers_url": "https://api.github.com/users/showerage/followers", "following_url": "https://api.github.com/users/showerage/following{/other_user}", "gists_url": "https://api.github.com/users/showerage/gists{/gist_id}", "starred_url": "https://api.github.com/users/showerage/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/showerage/subscriptions", "organizations_url": "https://api.github.com/users/showerage/orgs", "repos_url": "https://api.github.com/users/showerage/repos", "events_url": "https://api.github.com/users/showerage/events{/privacy}", "received_events_url": "https://api.github.com/users/showerage/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-04-18T15:31:59Z", "updated_at": "2020-04-18T15:57:37Z", "closed_at": "2020-04-18T15:57:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\nIn keras-bert, the loss of MLM is the sum of log loss of all the tokens in the sequence. However, the loss of MLM is the sum of   log loss  of the **masked tokens** in the original implementation of Google. Therefore, the implementation of keras-bert seems wrong. \r\n\r\n**Version Info**\r\n\r\n* [x] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\n# bert.py line 136\r\nmasked_layer = Masked(name='MLM')([mlm_pred_layer, inputs[-1]])\r\n# Masked.call()\r\ndef call(self, inputs, mask=None, **kwargs):\r\n        output = inputs[0] + 0\r\n        if self.return_masked:\r\n            return [output, K.cast(self.compute_mask(inputs, mask)[0], K.floatx())]\r\n        return output\r\n# The function return all tokens rather than masked tokens.  It seems a bug.\r\n# The same operation of google is get_masked_lm_output  in run_pretraining.py.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/187", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/187/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/187/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/187", "id": 596154572, "node_id": "MDU6SXNzdWU1OTYxNTQ1NzI=", "number": 187, "title": "WARNING:tensorflow:Entity ", "user": {"login": "kulturevulture", "id": 63319231, "node_id": "MDQ6VXNlcjYzMzE5MjMx", "avatar_url": "https://avatars1.githubusercontent.com/u/63319231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kulturevulture", "html_url": "https://github.com/kulturevulture", "followers_url": "https://api.github.com/users/kulturevulture/followers", "following_url": "https://api.github.com/users/kulturevulture/following{/other_user}", "gists_url": "https://api.github.com/users/kulturevulture/gists{/gist_id}", "starred_url": "https://api.github.com/users/kulturevulture/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kulturevulture/subscriptions", "organizations_url": "https://api.github.com/users/kulturevulture/orgs", "repos_url": "https://api.github.com/users/kulturevulture/repos", "events_url": "https://api.github.com/users/kulturevulture/events{/privacy}", "received_events_url": "https://api.github.com/users/kulturevulture/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-04-07T21:11:13Z", "updated_at": "2020-04-23T04:21:48Z", "closed_at": "2020-04-23T04:21:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Warnings for tensorflow when running keras-bert example from site:\r\nhttps://blogs.rstudio.com/tensorflow/posts/2019-09-30-bert-r/\r\n\r\nWarnings for tensorflow while creating keras-bert nodel fromo url.\r\n\r\nRStudio Version 1.2.1335\r\nR version 3.5.3\r\ntensorflow version 1.14\r\nkeras version 2.2.4\r\nlatest version of keras_bert\r\n \r\ncode to reproduce issue:\r\n#install and test bert-keras\r\n#need tensorflow 1.14 or 1.15!!!\r\nSys.setenv(TF_KERAS=1)\r\nlibrary(dplyr)\r\nlibrary(zeallot)\r\n\r\n# make sure we use python 3\r\nreticulate::use_python('C:/Users/anawima/AppData/Local/Continuum/anaconda3/python.exe',\r\n                       required=T)\r\n# to see python version\r\nreticulate::py_config()\r\nreticulate::py_module_available('keras_bert')\r\n\r\n#check tensorflow and keras versions\r\ntensorflow::tf_version()\r\nkeras:::keras_version()\r\n\r\n\r\n#install.packages(\"tensorflow\")\r\n#install.packages(\"keras\")\r\n#library(\"keras\")\r\n#install_keras()\r\n\r\n\r\n#zip file locatsions\r\npretrained_path = '/Users/anawima/Downloads/uncased_L-12_H-768_A-12/uncased_L-12_H-768_A-12'\r\nconfig_path = file.path(pretrained_path, 'bert_config.json')\r\ncheckpoint_path = file.path(pretrained_path, 'bert_model.ckpt')\r\nvocab_path = file.path(pretrained_path, 'vocab.txt')\r\n\r\n#impor keras-bert model\r\nlibrary(reticulate)\r\nk_bert = import('keras_bert')\r\ntoken_dict = k_bert$load_vocabulary(vocab_path)\r\ntokenizer = k_bert$Tokenizer(token_dict)\r\n\r\n#define model parameters and column names\r\nseq_length = 50L\r\nbch_size = 70\r\nepochs = 1\r\nlearning_rate = 1e-4\r\n\r\nDATA_COLUMN = 'comment_text'\r\nLABEL_COLUMN = 'target'\r\n\r\n#load model\r\nmodel = k_bert$load_trained_model_from_checkpoint(\r\n  config_path,\r\n  checkpoint_path,\r\n  training=T,\r\n  trainable=T,\r\n  seq_len=seq_length)\r\n\r\n#########################################\r\nconsole output: \r\nWARNING:tensorflow:Entity <bound method TokenEmbedding.call of <keras_bert.layers.embedding.TokenEmbedding object at 0x000001E7DF73E828>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method TokenEmbedding.call of <keras_bert.layers.embedding.TokenEmbedding object at 0x000001E7DF73E828>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method PositionEmbedding.call of <keras_pos_embd.pos_embd.PositionEmbedding object at 0x000001E7E3CEF2E8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method PositionEmbedding.call of <keras_pos_embd.pos_embd.PositionEmbedding object at 0x000001E7E3CEF2E8>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E3CACF98>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E3CACF98>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E3D79828>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E3D79828>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E4E63EB8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E4E63EB8>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E3DC7C50>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E3DC7C50>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E3DFEEF0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E3DFEEF0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E4F46C18>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E4F46C18>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E4FDE9B0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E4FDE9B0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E5115908>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E5115908>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E502FE48>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E502FE48>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E510A400>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E510A400>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E50E2E48>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E50E2E48>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5285F28>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5285F28>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E53D2AC8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E53D2AC8>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E52A52E8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E52A52E8>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E53BED30>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E53BED30>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E535ACC0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E535ACC0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E556C748>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E556C748>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E567A860>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E567A860>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5543F28>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5543F28>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5753710>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5753710>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5816048>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5816048>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5816518>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5816518>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E59332B0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E59332B0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5829358>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5829358>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5A2D6A0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5A2D6A0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5ACA630>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5ACA630>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5AD3FD0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5AD3FD0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E5BDD748>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E5BDD748>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5ABBC50>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5ABBC50>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5B4DEF0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5B4DEF0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5D185F8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5D185F8>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5D5FCC0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E5D5FCC0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E5E997B8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E5E997B8>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5DDB160>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5DDB160>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5E6E9B0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E5E6E9B0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5FB4B00>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E5FB4B00>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E600EC50>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E600EC50>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E61501D0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E61501D0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E600A320>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E600A320>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E613C0B8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E613C0B8>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E625B7F0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E625B7F0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E6104588>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E6104588>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E63FF780>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E63FF780>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E631FF28>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E631FF28>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E74F0438>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E74F0438>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E63CE208>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E63CE208>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E7510358>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E7510358>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E7682F28>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E7682F28>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E75D42B0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E75D42B0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E3035160>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E3035160>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7782588>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7782588>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E781BBE0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E781BBE0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E7931978>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E7931978>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7861A20>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7861A20>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E792A048>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E792A048>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7924630>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7924630>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E7AB0EF0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method MultiHeadAttention.call of <keras_multi_head.multi_head_attention.MultiHeadAttention object at 0x000001E7E7AB0EF0>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E7BEC470>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method ScaledDotProductAttention.call of <keras_self_attention.scaled_dot_attention.ScaledDotProductAttention object at 0x000001E7E7BEC470>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7AB3E48>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7AB3E48>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E7B87C88>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method FeedForward.call of <keras_position_wise_feed_forward.feed_forward.FeedForward object at 0x000001E7E7B87C88>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7B9CAC8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7B9CAC8>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7DDA588>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method LayerNormalization.call of <keras_layer_normalization.layer_normalization.LayerNormalization object at 0x000001E7E7DDA588>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method EmbeddingSimilarity.call of <keras_bert.layers.embedding.EmbeddingSimilarity object at 0x000001E7E7DDA3C8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method EmbeddingSimilarity.call of <keras_bert.layers.embedding.EmbeddingSimilarity object at 0x000001E7E7DDA3C8>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\nWARNING:tensorflow:Entity <bound method Masked.call of <keras_bert.layers.masked.Masked object at 0x000001E7E7D8A438>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method Masked.call of <keras_bert.layers.masked.Masked object at 0x000001E7E7D8A438>>: AttributeError: module 'gast' has no attribute 'Num'\r\nWARNING:tensorflow:Entity <bound method Extract.call of <keras_bert.layers.extract.Extract object at 0x000001E7E7DDC5F8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method Extract.call of <keras_bert.layers.extract.Extract object at 0x000001E7E7DDC5F8>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\n2020-04-07 15:45:24.900795: I tensorflow/core/platform/cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  AVX AVX2\r\nTo enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2020-04-07 15:45:24.902881: I tensorflow/core/common_runtime/process_util.cc:115] Creating new thread pool with default inter op setting: 12. Tune using inter_op_parallelism_threads for best performance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/186", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/186/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/186/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/186", "id": 585312436, "node_id": "MDU6SXNzdWU1ODUzMTI0MzY=", "number": 186, "title": "Attention maps", "user": {"login": "jogonba2", "id": 6236806, "node_id": "MDQ6VXNlcjYyMzY4MDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6236806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jogonba2", "html_url": "https://github.com/jogonba2", "followers_url": "https://api.github.com/users/jogonba2/followers", "following_url": "https://api.github.com/users/jogonba2/following{/other_user}", "gists_url": "https://api.github.com/users/jogonba2/gists{/gist_id}", "starred_url": "https://api.github.com/users/jogonba2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jogonba2/subscriptions", "organizations_url": "https://api.github.com/users/jogonba2/orgs", "repos_url": "https://api.github.com/users/jogonba2/repos", "events_url": "https://api.github.com/users/jogonba2/events{/privacy}", "received_events_url": "https://api.github.com/users/jogonba2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-20T20:32:38Z", "updated_at": "2020-06-11T15:14:32Z", "closed_at": "2020-06-11T15:14:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nis there any way to extract the attention map of each head of the multi-head attention layers?\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/185", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/185/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/185/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/185/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/185", "id": 577462127, "node_id": "MDU6SXNzdWU1Nzc0NjIxMjc=", "number": 185, "title": "fine-tuning without using NSP-Dense", "user": {"login": "kuroshiba-Ginji", "id": 3660647, "node_id": "MDQ6VXNlcjM2NjA2NDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3660647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuroshiba-Ginji", "html_url": "https://github.com/kuroshiba-Ginji", "followers_url": "https://api.github.com/users/kuroshiba-Ginji/followers", "following_url": "https://api.github.com/users/kuroshiba-Ginji/following{/other_user}", "gists_url": "https://api.github.com/users/kuroshiba-Ginji/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuroshiba-Ginji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuroshiba-Ginji/subscriptions", "organizations_url": "https://api.github.com/users/kuroshiba-Ginji/orgs", "repos_url": "https://api.github.com/users/kuroshiba-Ginji/repos", "events_url": "https://api.github.com/users/kuroshiba-Ginji/events{/privacy}", "received_events_url": "https://api.github.com/users/kuroshiba-Ginji/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-08T08:00:53Z", "updated_at": "2020-03-15T10:52:06Z", "closed_at": "2020-03-15T10:52:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thank you for your work with keras-bert. It has been helping out A LOT with my research.\r\n\r\nIt may be out of the topic of your work but do you happen to know how to fine-tune a model that does not have weights for NSP?\r\nI have a Bert pretrained model that does not have weights fro NSP so I cannot load them using your loader function (load_trained_model_from_checkpoint)\r\n- cls/seq_relationship/output_weights\r\n- cls/seq_relationship/output_bias\r\n\r\nThank you for your time!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/184", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/184/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/184/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/184/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/184", "id": 569813672, "node_id": "MDU6SXNzdWU1Njk4MTM2NzI=", "number": 184, "title": "Concatenate BERT and CNN", "user": {"login": "efabb95", "id": 39314018, "node_id": "MDQ6VXNlcjM5MzE0MDE4", "avatar_url": "https://avatars3.githubusercontent.com/u/39314018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/efabb95", "html_url": "https://github.com/efabb95", "followers_url": "https://api.github.com/users/efabb95/followers", "following_url": "https://api.github.com/users/efabb95/following{/other_user}", "gists_url": "https://api.github.com/users/efabb95/gists{/gist_id}", "starred_url": "https://api.github.com/users/efabb95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/efabb95/subscriptions", "organizations_url": "https://api.github.com/users/efabb95/orgs", "repos_url": "https://api.github.com/users/efabb95/repos", "events_url": "https://api.github.com/users/efabb95/events{/privacy}", "received_events_url": "https://api.github.com/users/efabb95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-24T12:05:07Z", "updated_at": "2020-03-02T14:51:34Z", "closed_at": "2020-03-02T14:51:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to concatenate two model in one. I have a BERT model and EfficientNet model.\r\n\r\n```\r\ninput_text = model_Bert.inputs[:2]\r\ntext = model_Bert(input_text)\r\ninput_img = model_EfNet.layers[0].input\r\nimg = model_EfNet(input_img)\r\nconcatenated = layers.concatenate([text, img], axis=1) #same dimension\r\ndense = layers.Dense(512, activation='relu')(concatenated)\r\ndense = layers.Dense(128, activation='relu')(dense)\r\ndense = layers.Dropout(0.3)(dense)\r\noutputs = layers.Dense(2, activation='softmax', name = 'real_output')(dense)\r\nmodel_Multimodal = keras.models.Model(inputs=[input_text, input_img], outputs=outputs)\r\n```\r\nBut I got this error:\r\n```\r\nValueError Traceback (most recent call last) in 9 outputs = layers.Dense(2, activation='softmax', name = 'real_output')(dense) 10 ---> 11 model_Multimodal = keras.models.Model(inputs=[input_text, input_img], outputs=outputs)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/keras/legacy/interfaces.py in wrapper(*args, **kwargs) 89 warnings.warn('Update your ' + object_name + ' call to the ' + 90 'Keras 2 API: ' + signature, stacklevel=2) ---> 91 return func(*args, **kwargs) 92 wrapper._original_function = func 93 return wrapper\r\n\r\n~/anaconda3/lib/python3.7/site-packages/keras/engine/network.py in init(self, *args, **kwargs) 92 'inputs' in kwargs and 'outputs' in kwargs): 93 # Graph network ---> 94 self._init_graph_network(*args, **kwargs) 95 else: 96 # Subclassed network\r\n\r\n~/anaconda3/lib/python3.7/site-packages/keras/engine/network.py in _init_graph_network(self, inputs, outputs, name, **kwargs) 167 'must come from keras.layers.Input. ' 168 'Received: ' + str(x) + --> 169 ' (missing previous layer metadata).') 170 # Check that x is an input tensor. 171 layer, node_index, tensor_index = x._keras_history\r\n\r\nValueError: Input tensors to a Model must come from `keras.layers.Input`. Received: [<tf.Tensor 'Input-Token_1:0' shape=(None, 128) dtype=float32>, <tf.Tensor 'Input-Segment_1:0' shape=(None, 128) dtype=float32>] (missing previous layer metadata).\r\n```\r\n\r\nHow can I merge this two models?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/183", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/183/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/183/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/183/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/183", "id": 559826976, "node_id": "MDU6SXNzdWU1NTk4MjY5NzY=", "number": 183, "title": "TypeError in gelu when using different float precision", "user": {"login": "f-kretschmer", "id": 27863821, "node_id": "MDQ6VXNlcjI3ODYzODIx", "avatar_url": "https://avatars1.githubusercontent.com/u/27863821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/f-kretschmer", "html_url": "https://github.com/f-kretschmer", "followers_url": "https://api.github.com/users/f-kretschmer/followers", "following_url": "https://api.github.com/users/f-kretschmer/following{/other_user}", "gists_url": "https://api.github.com/users/f-kretschmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/f-kretschmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/f-kretschmer/subscriptions", "organizations_url": "https://api.github.com/users/f-kretschmer/orgs", "repos_url": "https://api.github.com/users/f-kretschmer/repos", "events_url": "https://api.github.com/users/f-kretschmer/events{/privacy}", "received_events_url": "https://api.github.com/users/f-kretschmer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-04T16:18:08Z", "updated_at": "2020-02-11T17:21:21Z", "closed_at": "2020-02-11T17:21:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nWhen changing the float precision tensorflow uses, e.g., to float16 (can be done by setting \"floatx\" in ~/.keras/config or with `keras.backend.set_floatx('float16')`), using the `get_model` function results in a TypeError (truncated traceback):\r\n`File \"/site-packages/keras_bert/activations/gelu_tensorflow.py\", line 7, in gelu\r\n    return 0.5 * x * (1.0 + erf(x / sqrt(2.0)))\r\n  File \"/site-packages/tensorflow_core/python/ops/math_ops.py\", line 899, in binary_op_wrapper\r\n    return func(x, y, name=name)\r\n  File \"/site-packages/tensorflow_core/python/ops/math_ops.py\", line 997, in _truediv_python3\r\n    (x_dtype, y_dtype))\r\nTypeError: x and y must have the same dtype, got tf.float16 != tf.float32`\r\n\r\n**Version Info**\r\n\r\n* [X] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nimport keras_bert\r\n\r\nkeras.backend.set_floatx('float16')\r\nmodel = get_model()\r\n```\r\n\r\nThis can be fixed by changing the implementation of gelu_tensorflow to\r\n```python\r\nfrom tensorflow.python.ops.math_ops import erf, sqrt\r\nfrom tensorflow.keras.backend import floatx\r\nfrom tensorflow import cast\r\n\r\n__all__ = ['gelu']\r\n\r\n\r\ndef gelu(x):\r\n    return 0.5 * x * (1.0 + erf(x / cast(sqrt(2.0), floatx())))\r\n\r\n```\r\nI'm wondering whether there is a more elegant solution to this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/182", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/182/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/182/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/182/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/182", "id": 558639196, "node_id": "MDU6SXNzdWU1NTg2MzkxOTY=", "number": 182, "title": "Does keras_bert support task with segment id greater than 1?.  For example, I want to enter a text with five sentences. So , I want to set segment id in range [0, 4]", "user": {"login": "zhongerqiandan", "id": 33475702, "node_id": "MDQ6VXNlcjMzNDc1NzAy", "avatar_url": "https://avatars0.githubusercontent.com/u/33475702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhongerqiandan", "html_url": "https://github.com/zhongerqiandan", "followers_url": "https://api.github.com/users/zhongerqiandan/followers", "following_url": "https://api.github.com/users/zhongerqiandan/following{/other_user}", "gists_url": "https://api.github.com/users/zhongerqiandan/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhongerqiandan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhongerqiandan/subscriptions", "organizations_url": "https://api.github.com/users/zhongerqiandan/orgs", "repos_url": "https://api.github.com/users/zhongerqiandan/repos", "events_url": "https://api.github.com/users/zhongerqiandan/events{/privacy}", "received_events_url": "https://api.github.com/users/zhongerqiandan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-02T04:07:28Z", "updated_at": "2020-02-09T04:30:48Z", "closed_at": "2020-02-09T04:30:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/180", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/180/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/180/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/180", "id": 557248060, "node_id": "MDU6SXNzdWU1NTcyNDgwNjA=", "number": 180, "title": "How to prepare the input of test data?", "user": {"login": "houzeyu2683", "id": 42731603, "node_id": "MDQ6VXNlcjQyNzMxNjAz", "avatar_url": "https://avatars2.githubusercontent.com/u/42731603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houzeyu2683", "html_url": "https://github.com/houzeyu2683", "followers_url": "https://api.github.com/users/houzeyu2683/followers", "following_url": "https://api.github.com/users/houzeyu2683/following{/other_user}", "gists_url": "https://api.github.com/users/houzeyu2683/gists{/gist_id}", "starred_url": "https://api.github.com/users/houzeyu2683/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houzeyu2683/subscriptions", "organizations_url": "https://api.github.com/users/houzeyu2683/orgs", "repos_url": "https://api.github.com/users/houzeyu2683/repos", "events_url": "https://api.github.com/users/houzeyu2683/events{/privacy}", "received_events_url": "https://api.github.com/users/houzeyu2683/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-30T03:40:57Z", "updated_at": "2020-02-06T04:43:52Z", "closed_at": "2020-02-06T04:43:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to do a classification task, and I read your document for training a classifier with _generator function. I don't understand what is the model input. The input X is a list, the first element look like token index, I don't known the second element is it. Actually, I want to known how to prepare the model input when I have test data, eg test_text = [\"Hello world\"].\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/179", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/179/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/179/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/179", "id": 553422094, "node_id": "MDU6SXNzdWU1NTM0MjIwOTQ=", "number": 179, "title": "Question about the ordering of LayerNorm and Dropout.", "user": {"login": "Alkaiddd", "id": 44248877, "node_id": "MDQ6VXNlcjQ0MjQ4ODc3", "avatar_url": "https://avatars2.githubusercontent.com/u/44248877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alkaiddd", "html_url": "https://github.com/Alkaiddd", "followers_url": "https://api.github.com/users/Alkaiddd/followers", "following_url": "https://api.github.com/users/Alkaiddd/following{/other_user}", "gists_url": "https://api.github.com/users/Alkaiddd/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alkaiddd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alkaiddd/subscriptions", "organizations_url": "https://api.github.com/users/Alkaiddd/orgs", "repos_url": "https://api.github.com/users/Alkaiddd/repos", "events_url": "https://api.github.com/users/Alkaiddd/events{/privacy}", "received_events_url": "https://api.github.com/users/Alkaiddd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-22T09:45:11Z", "updated_at": "2020-01-29T10:57:58Z", "closed_at": "2020-01-29T10:57:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I'm a new user of keras and keras-bert. I found that the ordering of LayerNorm and Dropout here is different from Google's BERT and I wonder why. \r\nIn the paper/code of Google's BERT, they implement LayerNorm before Dropout. However, in this repo and keras_transformer, the ordering of LayerNorm and Dropout is reversed.  \r\nThank you.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/178", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/178/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/178/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/178/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/178", "id": 545329408, "node_id": "MDU6SXNzdWU1NDUzMjk0MDg=", "number": 178, "title": "Slow inference on TPU with Colaboratory", "user": {"login": "alex4321", "id": 1594529, "node_id": "MDQ6VXNlcjE1OTQ1Mjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1594529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex4321", "html_url": "https://github.com/alex4321", "followers_url": "https://api.github.com/users/alex4321/followers", "following_url": "https://api.github.com/users/alex4321/following{/other_user}", "gists_url": "https://api.github.com/users/alex4321/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex4321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex4321/subscriptions", "organizations_url": "https://api.github.com/users/alex4321/orgs", "repos_url": "https://api.github.com/users/alex4321/repos", "events_url": "https://api.github.com/users/alex4321/events{/privacy}", "received_events_url": "https://api.github.com/users/alex4321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-04T20:32:18Z", "updated_at": "2020-01-12T06:22:40Z", "closed_at": "2020-01-12T06:22:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I ran [classification demo](https://colab.research.google.com/github/CyberZHG/keras-bert/blob/master/demo/tune/keras_bert_classification_tpu.ipynb) I got about minute for each epoch's training and validation.\r\n\r\n```\r\n# @title Fit\r\n\r\nmodel.fit(\r\n    train_x,\r\n    train_y,\r\n    epochs=EPOCHS,\r\n    batch_size=BATCH_SIZE,\r\n    verbose=True,\r\n)\r\n```\r\n```\r\nEpoch 1/5\r\n195/195 [==============================] - 86s 443ms/step - loss: 0.6862 - sparse_categorical_accuracy: 0.5688\r\nEpoch 2/5\r\n195/195 [==============================] - 40s 206ms/step - loss: 0.5359 - sparse_categorical_accuracy: 0.7207\r\nEpoch 3/5\r\n195/195 [==============================] - 43s 218ms/step - loss: 0.3754 - sparse_categorical_accuracy: 0.8328\r\nEpoch 4/5\r\n195/195 [==============================] - 43s 218ms/step - loss: 0.2753 - sparse_categorical_accuracy: 0.8876\r\nEpoch 5/5\r\n195/195 [==============================] - 41s 210ms/step - loss: 0.1901 - sparse_categorical_accuracy: 0.9270\r\n<tensorflow.python.keras.callbacks.History at 0x7fe96b54f710>\r\n```\r\n\r\n```\r\n# @title Predict\r\n\r\npredicts = model.predict(test_x, batch_size=BATCH_SIZE, verbose=True).argmax(axis=-1)\r\n```\r\n```\r\n 37/195 [====>.........................] - ETA: 37:59\r\n```\r\n\r\nSo the prediction stage becomes slower than training.\r\n\r\nInstalled keras & tensorflow versions is:\r\n- keras=2.2.5\r\n- tensorflow=1.15.0\r\n\r\nupd. Ok, seems like information about keras version is irrelevant here - we have `os.environ['TF_KERAS'] = '1'` in the beginning og the notebook", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/177", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/177/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/177/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/177/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/177", "id": 543679716, "node_id": "MDU6SXNzdWU1NDM2Nzk3MTY=", "number": 177, "title": "error happens in the next-sentence prediction case", "user": {"login": "TiranoGreatLand", "id": 20046954, "node_id": "MDQ6VXNlcjIwMDQ2OTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/20046954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TiranoGreatLand", "html_url": "https://github.com/TiranoGreatLand", "followers_url": "https://api.github.com/users/TiranoGreatLand/followers", "following_url": "https://api.github.com/users/TiranoGreatLand/following{/other_user}", "gists_url": "https://api.github.com/users/TiranoGreatLand/gists{/gist_id}", "starred_url": "https://api.github.com/users/TiranoGreatLand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TiranoGreatLand/subscriptions", "organizations_url": "https://api.github.com/users/TiranoGreatLand/orgs", "repos_url": "https://api.github.com/users/TiranoGreatLand/repos", "events_url": "https://api.github.com/users/TiranoGreatLand/events{/privacy}", "received_events_url": "https://api.github.com/users/TiranoGreatLand/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-30T02:14:02Z", "updated_at": "2020-01-06T02:40:03Z", "closed_at": "2020-01-06T02:40:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nA clear and concise description of what the bug is.\r\n\r\n**Version Info**\r\n\r\n* [ ] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nimport keras_bert\r\nfrom keras_bert import load_vocabulary, load_trained_model_from_checkpoint, Tokenizer, get_checkpoint_paths\r\nfrom keras_bert.datasets import get_pretrained, PretrainedList\r\n\r\nmodel_path = get_pretrained(PretrainedList.chinese_base)\r\npaths = get_checkpoint_paths(model_path)\r\nmodel = load_trained_model_from_checkpoint(paths.config, paths.checkpoint, seq_len=30)\r\nmodel.summary(line_length=120)\r\n\r\nsentence_1 = '\u6570\u5b66\u662f\u5229\u7528\u7b26\u53f7\u8bed\u8a00\u7814\u7a76\u6578\u91cf\u3001\u7ed3\u6784\u3001\u53d8\u5316\u4ee5\u53ca\u7a7a\u95f4\u7b49\u6982\u5ff5\u7684\u4e00\u9580\u5b66\u79d1\u3002'\r\nsentence_2 = '\u4ece\u67d0\u79cd\u89d2\u5ea6\u770b\u5c6c\u65bc\u5f62\u5f0f\u79d1\u5b78\u7684\u4e00\u7a2e\u3002'\r\nprint('Tokens:', tokenizer.tokenize(first=sentence_1, second=sentence_2))\r\nindices, segments = tokenizer.encode(first=sentence_1, second=sentence_2)\r\nmasks = np.array([[0] * len(indices)])\r\n\r\npredicts = model.predict([np.array([indices]), np.array([segments]), masks])[1]\r\n\r\n```\r\n\r\nthe error happens in the last line of code and the corresponding bug is :\r\nValueError: Error when checking model input: the list of Numpy arrays that you are passing to your model is not the size the model expected. Expected to see 2 array(s), but instead got the following list of 3 arrays:\r\n\r\nit means that I shall just input array with two lists such as [indices, segments] rather than input array with three lists such as [indices, segments, masks]\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/176", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/176/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/176/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/176/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/176", "id": 539970683, "node_id": "MDU6SXNzdWU1Mzk5NzA2ODM=", "number": 176, "title": "Add words to a pretrained model", "user": {"login": "dberma15", "id": 10905096, "node_id": "MDQ6VXNlcjEwOTA1MDk2", "avatar_url": "https://avatars1.githubusercontent.com/u/10905096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberma15", "html_url": "https://github.com/dberma15", "followers_url": "https://api.github.com/users/dberma15/followers", "following_url": "https://api.github.com/users/dberma15/following{/other_user}", "gists_url": "https://api.github.com/users/dberma15/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberma15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberma15/subscriptions", "organizations_url": "https://api.github.com/users/dberma15/orgs", "repos_url": "https://api.github.com/users/dberma15/repos", "events_url": "https://api.github.com/users/dberma15/events{/privacy}", "received_events_url": "https://api.github.com/users/dberma15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-18T22:56:29Z", "updated_at": "2019-12-25T23:51:36Z", "closed_at": "2019-12-25T23:51:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI was wondering if it's possible to load in a pretrained model, say and then add words to the embedding layer so there are more words and if so, how would one do that?\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/175", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/175/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/175/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/175/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/175", "id": 539668885, "node_id": "MDU6SXNzdWU1Mzk2Njg4ODU=", "number": 175, "title": "POOL_NSP", "user": {"login": "zhangxin9988", "id": 57290221, "node_id": "MDQ6VXNlcjU3MjkwMjIx", "avatar_url": "https://avatars3.githubusercontent.com/u/57290221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangxin9988", "html_url": "https://github.com/zhangxin9988", "followers_url": "https://api.github.com/users/zhangxin9988/followers", "following_url": "https://api.github.com/users/zhangxin9988/following{/other_user}", "gists_url": "https://api.github.com/users/zhangxin9988/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangxin9988/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangxin9988/subscriptions", "organizations_url": "https://api.github.com/users/zhangxin9988/orgs", "repos_url": "https://api.github.com/users/zhangxin9988/repos", "events_url": "https://api.github.com/users/zhangxin9988/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangxin9988/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-18T13:06:20Z", "updated_at": "2019-12-25T13:51:36Z", "closed_at": "2019-12-25T13:51:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,Mr,when I followed  the README tutorial :\r\nembeddings = extract_embeddings(model_path, texts, output_layer_num=4, poolings=[POOL_NSP, POOL_MAX])........\r\nI want to ask: if the POOL_NSP is the the final layer and the [CLS] token output?\r\nIn addition, is POOL_MAX,POOL_AVG act on the final four layer [CLS] token output?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/174", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/174/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/174/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/174/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/174", "id": 536355686, "node_id": "MDU6SXNzdWU1MzYzNTU2ODY=", "number": 174, "title": "\u8bf7\u95ee\u8fd9\u4e2a\u5305\u5bf9tensorflow\u7684\u7248\u672c\u6ca1\u6709\u8981\u6c42\u5417", "user": {"login": "duterscmy", "id": 26225639, "node_id": "MDQ6VXNlcjI2MjI1NjM5", "avatar_url": "https://avatars2.githubusercontent.com/u/26225639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duterscmy", "html_url": "https://github.com/duterscmy", "followers_url": "https://api.github.com/users/duterscmy/followers", "following_url": "https://api.github.com/users/duterscmy/following{/other_user}", "gists_url": "https://api.github.com/users/duterscmy/gists{/gist_id}", "starred_url": "https://api.github.com/users/duterscmy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duterscmy/subscriptions", "organizations_url": "https://api.github.com/users/duterscmy/orgs", "repos_url": "https://api.github.com/users/duterscmy/repos", "events_url": "https://api.github.com/users/duterscmy/events{/privacy}", "received_events_url": "https://api.github.com/users/duterscmy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-11T13:02:12Z", "updated_at": "2019-12-18T14:13:57Z", "closed_at": "2019-12-18T14:13:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u6211\u7528tf 1.2.0\u7248\u672c\u7684\u8bdd\u62a5\u9519 AttributeError: module 'tensorflow.python.training.training' has no attribute 'load_variable'\r\n\u770b\u6837\u5b50\u662f\u7248\u672c\u592a\u4f4e\u4e86\r\n\u53ef\u662f\u770brequitment.txt\u91cc\u5bf9tf\u6ca1\u6709\u6307\u5b9a\u7248\u672c\u8981\u6c42\u554a", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/173", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/173/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/173/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/173/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/173", "id": 534824500, "node_id": "MDU6SXNzdWU1MzQ4MjQ1MDA=", "number": 173, "title": "fine-tuning", "user": {"login": "OKtang", "id": 37769273, "node_id": "MDQ6VXNlcjM3NzY5Mjcz", "avatar_url": "https://avatars2.githubusercontent.com/u/37769273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OKtang", "html_url": "https://github.com/OKtang", "followers_url": "https://api.github.com/users/OKtang/followers", "following_url": "https://api.github.com/users/OKtang/following{/other_user}", "gists_url": "https://api.github.com/users/OKtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/OKtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OKtang/subscriptions", "organizations_url": "https://api.github.com/users/OKtang/orgs", "repos_url": "https://api.github.com/users/OKtang/repos", "events_url": "https://api.github.com/users/OKtang/events{/privacy}", "received_events_url": "https://api.github.com/users/OKtang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-09T10:14:49Z", "updated_at": "2020-01-16T09:12:54Z", "closed_at": "2019-12-16T11:16:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u4f60\u597d\uff0c\r\n\u8bf7\u95ee\u5728\u505a\u5206\u7c7b\u4efb\u52a1\u7684\u65f6\u5019\u5fc5\u987b\u5c06training\u8bbe\u7f6e\u4e3aTrue\uff0c\u83b7\u53d6NSP\u5c42\u561b\uff1f\u53ef\u4ee5\u5c06training\u8bbe\u7f6e\u4e3aFalse\uff0c\u7136\u540e\u83b7\u53d6\u6a21\u578b\u8f93\u51fa\u7684\u7b2c\u4e00\u7ef4\u561b\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/172", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/172/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/172/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/172", "id": 529766774, "node_id": "MDU6SXNzdWU1Mjk3NjY3NzQ=", "number": 172, "title": "\u5173\u4e8e\u6a21\u578b\u7684\u52a0\u8f7d\u548c\u4fee\u6539", "user": {"login": "yuhao1982", "id": 25892131, "node_id": "MDQ6VXNlcjI1ODkyMTMx", "avatar_url": "https://avatars1.githubusercontent.com/u/25892131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuhao1982", "html_url": "https://github.com/yuhao1982", "followers_url": "https://api.github.com/users/yuhao1982/followers", "following_url": "https://api.github.com/users/yuhao1982/following{/other_user}", "gists_url": "https://api.github.com/users/yuhao1982/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuhao1982/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuhao1982/subscriptions", "organizations_url": "https://api.github.com/users/yuhao1982/orgs", "repos_url": "https://api.github.com/users/yuhao1982/repos", "events_url": "https://api.github.com/users/yuhao1982/events{/privacy}", "received_events_url": "https://api.github.com/users/yuhao1982/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-28T08:38:21Z", "updated_at": "2019-12-05T09:04:51Z", "closed_at": "2019-12-05T09:04:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u95ee\u9898\u4e00\uff1aload_trained_model_from_checkpoint\u5fc5\u987b\u662f\u4ee5.ckpt\u7ed3\u5c3e\u7684\u6587\u4ef6\uff1f\u5728keras_bert\u4e2d\u4fdd\u5b58\u7684hdf5\u7ed3\u5c3e\u7684\u6a21\u578b\u4e0d\u80fd\u7528load_trained_model_from_checkpoint  load\u5417\uff1f.ckpt\u548c.hdf5\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f\r\n\u95ee\u9898\u4e8c\uff1b\u5982\u679c\u6211\u8bad\u7ec3\u5e76\u4fdd\u5b58\u4e86\u4e00\u4e2a\u6a21\u578b**.hdf5, \u7136\u540e\u6211\u60f3\u5728\u8fd9\u4e2a\u6a21\u578b\u57fa\u7840\u4e0a\u52a0\u4e2aadapter\u6a21\u5757(\u6a21\u578b\u5176\u4ed6\u67b6\u6784\u548c\u53c2\u6570\u4fdd\u6301)\uff0c\u518d\u505a\u7b2c\u4e8c\u6b21\u8bad\u7ec3\uff0c\u8bf7\u95ee\u4ee3\u7801\u8be5\u600e\u4e48\u5199\u6700\u65b9\u4fbf\uff1f\u8c22\u8c22\uff01", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/171", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/171/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/171/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/171/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/171", "id": 526372350, "node_id": "MDU6SXNzdWU1MjYzNzIzNTA=", "number": 171, "title": "Attention mask\u662f\u4e0d\u9700\u8981\u5417\uff1f", "user": {"login": "BaberMuyu", "id": 21008660, "node_id": "MDQ6VXNlcjIxMDA4NjYw", "avatar_url": "https://avatars1.githubusercontent.com/u/21008660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BaberMuyu", "html_url": "https://github.com/BaberMuyu", "followers_url": "https://api.github.com/users/BaberMuyu/followers", "following_url": "https://api.github.com/users/BaberMuyu/following{/other_user}", "gists_url": "https://api.github.com/users/BaberMuyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/BaberMuyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BaberMuyu/subscriptions", "organizations_url": "https://api.github.com/users/BaberMuyu/orgs", "repos_url": "https://api.github.com/users/BaberMuyu/repos", "events_url": "https://api.github.com/users/BaberMuyu/events{/privacy}", "received_events_url": "https://api.github.com/users/BaberMuyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-21T05:24:39Z", "updated_at": "2019-11-25T14:28:45Z", "closed_at": "2019-11-25T14:28:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u4f60\u597d\uff0c\u6211\u5728\u5bf9\u6bd4\u4e86kears-bert\u548cgoogle\u7684bert\u5b9e\u73b0\u540e\u53d1\u73b0\u6709\u4e00\u70b9\u4e0d\u540c\uff0ckeares-bert\u4e2d\u6ca1\u6709\u5bf9padding\u7684\u6570\u636e\u505aattention mask\uff0c\u800cgoogle\u7684bert\u4e2d\u6709\u8fd9\u4e00\u90e8\u5206\u5b9e\u73b0\u3002\u6211\u5728\u5b9e\u9a8c\u4e2d\u4e5f\u610f\u5916\u53d1\u73b0\u5728\u77ed\u6587\u672c\u4e0a\u4f7f\u7528bert\u65f6\uff0c\u4e0d\u540c\u7684max_length\uff08\u90fd\u4f1a\u5927\u4e8e\u6587\u672c\u7684\u6700\u5927\u957f\u5ea6\uff09\u4f1a\u5bf9\u7ed3\u679c\u4ea7\u751f\u5f71\u54cd\uff0c\u800c\u6309\u7167\u6211\u539f\u672c\u7684\u7406\u89e3\u662f\u4e0d\u5e94\u8be5\u51fa\u73b0\u8fd9\u79cd\u533a\u522b\u7684\u3002\r\n![image](https://user-images.githubusercontent.com/21008660/69306356-21b41600-0c62-11ea-92b8-0f511b49ae28.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/170", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/170/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/170/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/170/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/170", "id": 523240734, "node_id": "MDU6SXNzdWU1MjMyNDA3MzQ=", "number": 170, "title": "Run extract_embeddings with GPU", "user": {"login": "336655asd", "id": 26518323, "node_id": "MDQ6VXNlcjI2NTE4MzIz", "avatar_url": "https://avatars0.githubusercontent.com/u/26518323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/336655asd", "html_url": "https://github.com/336655asd", "followers_url": "https://api.github.com/users/336655asd/followers", "following_url": "https://api.github.com/users/336655asd/following{/other_user}", "gists_url": "https://api.github.com/users/336655asd/gists{/gist_id}", "starred_url": "https://api.github.com/users/336655asd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/336655asd/subscriptions", "organizations_url": "https://api.github.com/users/336655asd/orgs", "repos_url": "https://api.github.com/users/336655asd/repos", "events_url": "https://api.github.com/users/336655asd/events{/privacy}", "received_events_url": "https://api.github.com/users/336655asd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-15T04:04:08Z", "updated_at": "2020-03-13T07:31:08Z", "closed_at": "2019-11-20T05:48:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "How can I run **extract_embeddings** with GPU? It takes a lot of time when I extract embeddings from a large corpus. And I found GPU-Util is 0 which may imply that the default settings is no-GPU.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/169", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/169/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/169/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/169/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/169", "id": 520417922, "node_id": "MDU6SXNzdWU1MjA0MTc5MjI=", "number": 169, "title": "failed to create cublas handle: CUBLAS_STATUS_NOT_INITIALIZED", "user": {"login": "Imorton-zd", "id": 13865086, "node_id": "MDQ6VXNlcjEzODY1MDg2", "avatar_url": "https://avatars1.githubusercontent.com/u/13865086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Imorton-zd", "html_url": "https://github.com/Imorton-zd", "followers_url": "https://api.github.com/users/Imorton-zd/followers", "following_url": "https://api.github.com/users/Imorton-zd/following{/other_user}", "gists_url": "https://api.github.com/users/Imorton-zd/gists{/gist_id}", "starred_url": "https://api.github.com/users/Imorton-zd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Imorton-zd/subscriptions", "organizations_url": "https://api.github.com/users/Imorton-zd/orgs", "repos_url": "https://api.github.com/users/Imorton-zd/repos", "events_url": "https://api.github.com/users/Imorton-zd/events{/privacy}", "received_events_url": "https://api.github.com/users/Imorton-zd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-09T12:54:52Z", "updated_at": "2019-11-13T06:13:15Z", "closed_at": "2019-11-13T06:13:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\n![image](https://user-images.githubusercontent.com/13865086/68528866-22c87780-0333-11ea-9358-768f87fa9b8c.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13865086/68528880-4db2cb80-0333-11ea-852e-881f96ea2386.png)\r\n\r\nAlways this error!\r\n\r\n**Version Info**\r\n\r\n* [V0.60.0 or V0.70.0] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nfrom keras.layers import *\r\nfrom keras.models import Model\r\nimport keras.backend as K\r\nfrom keras.optimizers import Adam\r\n\r\n\r\nbert_model = load_trained_model_from_checkpoint(config_path, checkpoint_path, seq_len=None)\r\n\r\nfor l in bert_model.layers:\r\n    l.trainable = True\r\n\r\nx1_in = Input(shape=(None,))\r\nx2_in = Input(shape=(None,))\r\n\r\nx = bert_model([x1_in, x2_in])\r\nprint ('bert out', x._keras_shape)\r\nx = Lambda(lambda x: x[:, 0])(x)\r\nprint ('after lambda', x._keras_shape)\r\nx = Dense(128, activation='tanh')(x)\r\np = Dense(7, activation='sigmoid')(x)\r\n\r\nmodel = Model([x1_in, x2_in], p)\r\nmodel.compile(\r\n    loss='binary_crossentropy',\r\n    optimizer=Adam(1e-5),\r\n    metrics=['accuracy']\r\n)\r\nmodel.summary()\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/168", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/168/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/168/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/168", "id": 517118650, "node_id": "MDU6SXNzdWU1MTcxMTg2NTA=", "number": 168, "title": "support albert?", "user": {"login": "illcat", "id": 40688514, "node_id": "MDQ6VXNlcjQwNjg4NTE0", "avatar_url": "https://avatars3.githubusercontent.com/u/40688514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illcat", "html_url": "https://github.com/illcat", "followers_url": "https://api.github.com/users/illcat/followers", "following_url": "https://api.github.com/users/illcat/following{/other_user}", "gists_url": "https://api.github.com/users/illcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/illcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illcat/subscriptions", "organizations_url": "https://api.github.com/users/illcat/orgs", "repos_url": "https://api.github.com/users/illcat/repos", "events_url": "https://api.github.com/users/illcat/events{/privacy}", "received_events_url": "https://api.github.com/users/illcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705537, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM3", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-04T12:25:07Z", "updated_at": "2019-11-11T13:50:59Z", "closed_at": "2019-11-11T13:50:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nAlbert had released a weight and hopes to support it.\r\n\r\nhttps://github.com/google-research/google-research/tree/master/albert", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/167", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/167/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/167/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/167", "id": 516764236, "node_id": "MDU6SXNzdWU1MTY3NjQyMzY=", "number": 167, "title": "AdamWarmup not working in transformers", "user": {"login": "acmilannesta", "id": 47703762, "node_id": "MDQ6VXNlcjQ3NzAzNzYy", "avatar_url": "https://avatars1.githubusercontent.com/u/47703762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acmilannesta", "html_url": "https://github.com/acmilannesta", "followers_url": "https://api.github.com/users/acmilannesta/followers", "following_url": "https://api.github.com/users/acmilannesta/following{/other_user}", "gists_url": "https://api.github.com/users/acmilannesta/gists{/gist_id}", "starred_url": "https://api.github.com/users/acmilannesta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acmilannesta/subscriptions", "organizations_url": "https://api.github.com/users/acmilannesta/orgs", "repos_url": "https://api.github.com/users/acmilannesta/repos", "events_url": "https://api.github.com/users/acmilannesta/events{/privacy}", "received_events_url": "https://api.github.com/users/acmilannesta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-03T00:44:09Z", "updated_at": "2019-11-15T19:42:13Z", "closed_at": "2019-11-15T19:42:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI tried to wrap AdamWarmup in TFRobertaModel, which use tensoflow 2.0 and tf keras.\r\nEven if I set environment variable\r\nTF_KERAS = 1\r\nI got the following error:\r\nCould not interpret optimizer identifier:', <keras_bert.optimizers.warmup.AdamWarmup object at 0x000002891F6D3E80>.\r\nCould that be because in the 'backend.py', \r\n```\r\nif TF_KERAS:\r\n    from tensorflow.python import keras\r\n```\r\nShould be changed to?\r\n```\r\nif TF_KERAS:\r\n    from tensorflow import keras\r\n```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/166", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/166/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/166/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/166", "id": 515403696, "node_id": "MDU6SXNzdWU1MTU0MDM2OTY=", "number": 166, "title": "How can I input padding mask?", "user": {"login": "xinbingzhe", "id": 12292924, "node_id": "MDQ6VXNlcjEyMjkyOTI0", "avatar_url": "https://avatars1.githubusercontent.com/u/12292924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xinbingzhe", "html_url": "https://github.com/xinbingzhe", "followers_url": "https://api.github.com/users/xinbingzhe/followers", "following_url": "https://api.github.com/users/xinbingzhe/following{/other_user}", "gists_url": "https://api.github.com/users/xinbingzhe/gists{/gist_id}", "starred_url": "https://api.github.com/users/xinbingzhe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xinbingzhe/subscriptions", "organizations_url": "https://api.github.com/users/xinbingzhe/orgs", "repos_url": "https://api.github.com/users/xinbingzhe/repos", "events_url": "https://api.github.com/users/xinbingzhe/events{/privacy}", "received_events_url": "https://api.github.com/users/xinbingzhe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-31T12:44:51Z", "updated_at": "2019-11-07T13:43:59Z", "closed_at": "2019-11-07T13:43:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/165", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/165/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/165/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/165", "id": 513655136, "node_id": "MDU6SXNzdWU1MTM2NTUxMzY=", "number": 165, "title": "\u600e\u4e48\u4f7f\u7528tensorflow\u7684keras", "user": {"login": "lx-rookie", "id": 54061448, "node_id": "MDQ6VXNlcjU0MDYxNDQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/54061448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lx-rookie", "html_url": "https://github.com/lx-rookie", "followers_url": "https://api.github.com/users/lx-rookie/followers", "following_url": "https://api.github.com/users/lx-rookie/following{/other_user}", "gists_url": "https://api.github.com/users/lx-rookie/gists{/gist_id}", "starred_url": "https://api.github.com/users/lx-rookie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lx-rookie/subscriptions", "organizations_url": "https://api.github.com/users/lx-rookie/orgs", "repos_url": "https://api.github.com/users/lx-rookie/repos", "events_url": "https://api.github.com/users/lx-rookie/events{/privacy}", "received_events_url": "https://api.github.com/users/lx-rookie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-29T02:25:18Z", "updated_at": "2019-11-05T03:56:46Z", "closed_at": "2019-11-05T03:56:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "TF_KERAS=1\u6dfb\u52a0\u5230\u73af\u5883\u53d8\u91cf\uff0c\u6dfb\u52a0\u5230\u54ea\u91cc\u7684\u73af\u5883\u53d8\u91cf\uff0c\u8bd5\u4e86\u4e00\u4e0b\u6ca1\u6210\u529f\u3002\u3002", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/164", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/164/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/164/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/164/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/164", "id": 513638962, "node_id": "MDU6SXNzdWU1MTM2Mzg5NjI=", "number": 164, "title": "Is there a way to convert a tf.keras saved model to keras?", "user": {"login": "gargomeiste", "id": 18292409, "node_id": "MDQ6VXNlcjE4MjkyNDA5", "avatar_url": "https://avatars3.githubusercontent.com/u/18292409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargomeiste", "html_url": "https://github.com/gargomeiste", "followers_url": "https://api.github.com/users/gargomeiste/followers", "following_url": "https://api.github.com/users/gargomeiste/following{/other_user}", "gists_url": "https://api.github.com/users/gargomeiste/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargomeiste/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargomeiste/subscriptions", "organizations_url": "https://api.github.com/users/gargomeiste/orgs", "repos_url": "https://api.github.com/users/gargomeiste/repos", "events_url": "https://api.github.com/users/gargomeiste/events{/privacy}", "received_events_url": "https://api.github.com/users/gargomeiste/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705537, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM3", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-29T01:17:34Z", "updated_at": "2019-11-05T02:56:46Z", "closed_at": "2019-11-05T02:56:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey!\r\n\r\nI trained a Bert model using tk.keras and would like to convert it and import it using keras only? Is there an easy solution for that? \r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/163", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/163/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/163/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/163", "id": 512976082, "node_id": "MDU6SXNzdWU1MTI5NzYwODI=", "number": 163, "title": "I would like to embed Bert Embeddings Layer and use it in my model for Word Sense Disambiguation", "user": {"login": "elsheikh21", "id": 26064109, "node_id": "MDQ6VXNlcjI2MDY0MTA5", "avatar_url": "https://avatars1.githubusercontent.com/u/26064109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elsheikh21", "html_url": "https://github.com/elsheikh21", "followers_url": "https://api.github.com/users/elsheikh21/followers", "following_url": "https://api.github.com/users/elsheikh21/following{/other_user}", "gists_url": "https://api.github.com/users/elsheikh21/gists{/gist_id}", "starred_url": "https://api.github.com/users/elsheikh21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elsheikh21/subscriptions", "organizations_url": "https://api.github.com/users/elsheikh21/orgs", "repos_url": "https://api.github.com/users/elsheikh21/repos", "events_url": "https://api.github.com/users/elsheikh21/events{/privacy}", "received_events_url": "https://api.github.com/users/elsheikh21/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-27T14:49:28Z", "updated_at": "2019-11-03T23:05:10Z", "closed_at": "2019-11-03T23:05:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "```{python}\r\n\r\nimport os\r\nimport yaml\r\nimport numpy as np\r\nfrom argparse import ArgumentParser\r\n\r\nfrom tensorflow.keras.layers import (LSTM, Softmax, Add, Bidirectional, Dense, Input, TimeDistributed, Embedding)\r\nfrom tensorflow.keras.models import Model\r\n\r\nfrom model_utils import visualize_plot_mdl\r\nfrom parsing_dataset import load_dataset\r\nfrom utilities import configure_tf, initialize_logger\r\nfrom train import train_model\r\n\r\n\r\ndef parse_args():\r\n    ''' Parse command line args '''\r\n    parser = ArgumentParser(description=\"WSD\")\r\n    parser.add_argument(\"--model_type\", default='baseline', type=str,\r\n                        help=\"\"\"Choose the model: baseline: BiLSTM Model.\r\n                                attention: Attention Stacked BiLSTM Model.\r\n                                seq2seq: Seq2Seq Attention.\"\"\")\r\n\r\n    return vars(parser.parse_args())\r\n\r\n\r\ndef baseline_model(output_size, visualize=False, plot=False):\r\n    ''' Build basic BiLSTM model with Bert Embeddings Layer '''\r\n    hidden_size = 128\r\n    batch_size = 8\r\n\r\n    input_type = 'string'\r\n    in_sentences = Input(shape=(None,), dtype=input_type,\r\n                         batch_size=batch_size, name='Input')\r\n\r\n    embedding_size = 400\r\n\r\n    bert_embeddings = # HOW CAN I DO SO\r\n\r\n    bilstm = Bidirectional(LSTM(hidden_size, dropout=0.2,\r\n                                recurrent_dropout=0.2,\r\n                                return_sequences=True,\r\n                                input_shape=(None, None, embedding_size)\r\n                                ),\r\n                           merge_mode='sum')(bert_embeddings)\r\n\r\n    logits = TimeDistributed(Dense(output_size))(bilstm)\r\n\r\n    in_mask = Input(shape=(None, output_size), batch_size=batch_size,\r\n                    name='Candidate_Synsets_Mask')\r\n\r\n    logits_mask = Add()([logits, in_mask])\r\n    output = Softmax()(logits_mask)\r\n\r\n    mdl = Model(inputs=[in_sentences, in_mask], outputs=output, name=\"Bert_BiLSTM\")\r\n\r\n    mdl.compile(loss=\"sparse_categorical_crossentropy\",\r\n                optimizer='adadelta', metrics=[\"acc\"])\r\n\r\n    visualize_plot_mdl(visualize, plot, mdl)\r\n\r\n    return mdl\r\n\r\n\r\n# Read cmd args. And, Configure workspace\r\nparams = parse_args()\r\ninitialize_logger()\r\nconfigure_tf()\r\n\r\n# Load our config file\r\nconfig_file_path = os.path.join(os.getcwd(), \"config.yaml\")\r\nconfig_file = open(config_file_path)\r\nconfig_params = yaml.load(config_file)\r\n\r\n# Load the dataset\r\nelmo = config_params[\"use_elmo\"]  # FLAG\r\ndataset = load_dataset(elmo=elmo)\r\nvocabulary_size = dataset.get(\"vocabulary_size\")\r\noutput_size = dataset.get(\"output_size\")\r\n\r\nmodel = baseline_model(output_size, visualize=True)\r\n\r\nhistory = train_model(model, dataset, config_params, elmo, shuffle=False)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/162", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/162/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/162/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/162", "id": 512940803, "node_id": "MDU6SXNzdWU1MTI5NDA4MDM=", "number": 162, "title": "AttributeError: 'tuple' object has no attribute 'layer'", "user": {"login": "linWujl", "id": 9161371, "node_id": "MDQ6VXNlcjkxNjEzNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9161371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linWujl", "html_url": "https://github.com/linWujl", "followers_url": "https://api.github.com/users/linWujl/followers", "following_url": "https://api.github.com/users/linWujl/following{/other_user}", "gists_url": "https://api.github.com/users/linWujl/gists{/gist_id}", "starred_url": "https://api.github.com/users/linWujl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linWujl/subscriptions", "organizations_url": "https://api.github.com/users/linWujl/orgs", "repos_url": "https://api.github.com/users/linWujl/repos", "events_url": "https://api.github.com/users/linWujl/events{/privacy}", "received_events_url": "https://api.github.com/users/linWujl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-27T09:14:37Z", "updated_at": "2019-11-03T10:05:10Z", "closed_at": "2019-11-03T10:05:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, when i use the model to fine-tune a classification task, get the following error:\r\nAttributeError: 'tuple' object has no attribute 'layer'.  code as:\r\nmodel = load_trained_model_from_checkpoint(\r\n    config_path,\r\n    checkpoint_path,\r\n    training=True,\r\n    trainable=True,\r\n    seq_len=SEQ_LEN,\r\n)\r\ninputs = model.inputs[:2]\r\ndense = model.get_layer('NSP-Dense').output\r\noutputs = keras.layers.Dense(units=2, activation='softmax')(dense)\r\n\r\nmodel = keras.models.Model(inputs, outputs)\r\nmodel.compile(\r\n    RAdam(lr=LR),\r\n    loss='sparse_categorical_crossentropy',\r\n    metrics=['sparse_categorical_accuracy'],\r\n)\r\nHow can i fit this problem, thanks a lot!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/161", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/161/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/161/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/161", "id": 511766616, "node_id": "MDU6SXNzdWU1MTE3NjY2MTY=", "number": 161, "title": "suport for conda\uff1f", "user": {"login": "lidadreamer", "id": 17985259, "node_id": "MDQ6VXNlcjE3OTg1MjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/17985259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lidadreamer", "html_url": "https://github.com/lidadreamer", "followers_url": "https://api.github.com/users/lidadreamer/followers", "following_url": "https://api.github.com/users/lidadreamer/following{/other_user}", "gists_url": "https://api.github.com/users/lidadreamer/gists{/gist_id}", "starred_url": "https://api.github.com/users/lidadreamer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lidadreamer/subscriptions", "organizations_url": "https://api.github.com/users/lidadreamer/orgs", "repos_url": "https://api.github.com/users/lidadreamer/repos", "events_url": "https://api.github.com/users/lidadreamer/events{/privacy}", "received_events_url": "https://api.github.com/users/lidadreamer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-24T07:42:18Z", "updated_at": "2019-10-31T09:14:22Z", "closed_at": "2019-10-31T09:14:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u80fd\u5426\u652f\u6301\u4f7f\u7528conda \u547d\u4ee4\u5b89\u88c5", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/160", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/160/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/160/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/160", "id": 511671335, "node_id": "MDU6SXNzdWU1MTE2NzEzMzU=", "number": 160, "title": "checkpoints being auto deleted", "user": {"login": "Xie-Fangyuan", "id": 27992800, "node_id": "MDQ6VXNlcjI3OTkyODAw", "avatar_url": "https://avatars3.githubusercontent.com/u/27992800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xie-Fangyuan", "html_url": "https://github.com/Xie-Fangyuan", "followers_url": "https://api.github.com/users/Xie-Fangyuan/followers", "following_url": "https://api.github.com/users/Xie-Fangyuan/following{/other_user}", "gists_url": "https://api.github.com/users/Xie-Fangyuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xie-Fangyuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xie-Fangyuan/subscriptions", "organizations_url": "https://api.github.com/users/Xie-Fangyuan/orgs", "repos_url": "https://api.github.com/users/Xie-Fangyuan/repos", "events_url": "https://api.github.com/users/Xie-Fangyuan/events{/privacy}", "received_events_url": "https://api.github.com/users/Xie-Fangyuan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-24T02:51:53Z", "updated_at": "2019-10-31T04:14:22Z", "closed_at": "2019-10-31T04:14:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "after runing for the first time, the checkpoints will be downloaded, but sometimes, when i run the program again, i will download the checkpoints again, don't know why.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/159", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/159/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/159/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/159/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/159", "id": 509582548, "node_id": "MDU6SXNzdWU1MDk1ODI1NDg=", "number": 159, "title": "Albert support", "user": {"login": "flydsc", "id": 4379221, "node_id": "MDQ6VXNlcjQzNzkyMjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/4379221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flydsc", "html_url": "https://github.com/flydsc", "followers_url": "https://api.github.com/users/flydsc/followers", "following_url": "https://api.github.com/users/flydsc/following{/other_user}", "gists_url": "https://api.github.com/users/flydsc/gists{/gist_id}", "starred_url": "https://api.github.com/users/flydsc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flydsc/subscriptions", "organizations_url": "https://api.github.com/users/flydsc/orgs", "repos_url": "https://api.github.com/users/flydsc/repos", "events_url": "https://api.github.com/users/flydsc/events{/privacy}", "received_events_url": "https://api.github.com/users/flydsc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705537, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM3", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-20T11:35:29Z", "updated_at": "2019-10-28T06:32:47Z", "closed_at": "2019-10-28T06:32:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, thanks for this wonderful tool!\r\n\r\nDo you have plan to support albert, a lighter version of bert [albert](https://github.com/brightmart/albert_zh)\r\n\r\nThanks again!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/158", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/158/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/158/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/158", "id": 509553412, "node_id": "MDU6SXNzdWU1MDk1NTM0MTI=", "number": 158, "title": "Further question about trainable and trainning", "user": {"login": "weizhenzhao", "id": 13706689, "node_id": "MDQ6VXNlcjEzNzA2Njg5", "avatar_url": "https://avatars2.githubusercontent.com/u/13706689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weizhenzhao", "html_url": "https://github.com/weizhenzhao", "followers_url": "https://api.github.com/users/weizhenzhao/followers", "following_url": "https://api.github.com/users/weizhenzhao/following{/other_user}", "gists_url": "https://api.github.com/users/weizhenzhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/weizhenzhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weizhenzhao/subscriptions", "organizations_url": "https://api.github.com/users/weizhenzhao/orgs", "repos_url": "https://api.github.com/users/weizhenzhao/repos", "events_url": "https://api.github.com/users/weizhenzhao/events{/privacy}", "received_events_url": "https://api.github.com/users/weizhenzhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-20T06:32:17Z", "updated_at": "2019-11-03T07:05:10Z", "closed_at": "2019-11-03T07:05:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi   @CyberZHG \r\n\r\n\r\n![image](https://user-images.githubusercontent.com/13706689/67155639-a3ecaa00-f345-11e9-9c3d-37f3fcf5944b.png)\r\n![image](https://user-images.githubusercontent.com/13706689/67155646-cda5d100-f345-11e9-94a8-7f01abd137f3.png)\r\nI ' m not very clear about the trainning and trainable\r\nI set the output_num = 4 , it means concat the last 4 layers' output from the pretrain bert model\r\nand I added a lstm layer with GlobalMax pool on top of that.\r\nif I also want to train the variables in the   ( lstm + maxpool + last 4 layers' )\r\nhow should I set the training and trainable  value?\r\n\r\n\r\nThanks\r\nweizhen", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/157", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/157/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/157/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/157", "id": 508311234, "node_id": "MDU6SXNzdWU1MDgzMTEyMzQ=", "number": 157, "title": "GPU memory use too much after load trained model", "user": {"login": "moriwang", "id": 9151525, "node_id": "MDQ6VXNlcjkxNTE1MjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/9151525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moriwang", "html_url": "https://github.com/moriwang", "followers_url": "https://api.github.com/users/moriwang/followers", "following_url": "https://api.github.com/users/moriwang/following{/other_user}", "gists_url": "https://api.github.com/users/moriwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/moriwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moriwang/subscriptions", "organizations_url": "https://api.github.com/users/moriwang/orgs", "repos_url": "https://api.github.com/users/moriwang/repos", "events_url": "https://api.github.com/users/moriwang/events{/privacy}", "received_events_url": "https://api.github.com/users/moriwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-17T08:15:53Z", "updated_at": "2019-10-24T09:25:00Z", "closed_at": "2019-10-24T09:25:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "keras-bert v0.80\r\npython 3.6\r\nGTX 1060(6G)\r\n\r\nI run the code below.\r\n```\r\nimport json\r\nimport numpy as np\r\nfrom random import choice\r\nfrom tqdm import tqdm\r\nfrom keras_bert import load_trained_model_from_checkpoint, Tokenizer\r\nfrom keras_bert.datasets import get_pretrained, PretrainedList\r\nimport re, os\r\nimport codecs\r\n\r\nmodel_path = get_pretrained(PretrainedList.chinese_base)\r\nconfig_path = model_path + '/bert_config.json'\r\ncheckpoint_path = model_path + '/bert_model.ckpt'\r\ndict_path = model_path + '/vocab.txt'\r\n\r\nbert_model = load_trained_model_from_checkpoint(config_path, checkpoint_path, seq_len=None)\r\n```\r\n\r\nI use `nvidia-smi` to check gpu memory usage.\r\nIt cost 5865MiB /  6075MiB, is that normal? I can't train model anymore due to OOM.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/156", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/156/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/156/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/156", "id": 507100348, "node_id": "MDU6SXNzdWU1MDcxMDAzNDg=", "number": 156, "title": "When I turn the batch_size up or change to the bert_large model, I get the following error.", "user": {"login": "George191", "id": 41810038, "node_id": "MDQ6VXNlcjQxODEwMDM4", "avatar_url": "https://avatars3.githubusercontent.com/u/41810038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/George191", "html_url": "https://github.com/George191", "followers_url": "https://api.github.com/users/George191/followers", "following_url": "https://api.github.com/users/George191/following{/other_user}", "gists_url": "https://api.github.com/users/George191/gists{/gist_id}", "starred_url": "https://api.github.com/users/George191/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/George191/subscriptions", "organizations_url": "https://api.github.com/users/George191/orgs", "repos_url": "https://api.github.com/users/George191/repos", "events_url": "https://api.github.com/users/George191/events{/privacy}", "received_events_url": "https://api.github.com/users/George191/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-15T08:51:33Z", "updated_at": "2019-10-22T10:04:39Z", "closed_at": "2019-10-22T10:04:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unfortunately, these max batch sizes for BERT-Large are so small that they will actually harm the model accuracy, regardless of the learning rate used. We are working on adding code to this repository which will allow much larger effective batch sizes to be used on the GPU. The code will be based on one (or both) of the following techniques:Gradient accumulation: The samples in a minibatch are typically independent with respect to gradient computation (excluding batch normalization, which is not used here). This means that the gradients of multiple smaller minibatches can be accumulated before performing the weight update, and this will be exactly equivalent to a single larger update.Gradient checkpointing: The major use of GPU/TPU memory during DNN training is caching the intermediate activations in the forward pass that are necessary for efficient computation in the backward pass. \"Gradient checkpointing\" trades memory for compute time by re-computing the activations in an intelligen\r\n\r\nt way.However, this is not implemented in the current release.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/155", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/155/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/155/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/155", "id": 506607337, "node_id": "MDU6SXNzdWU1MDY2MDczMzc=", "number": 155, "title": "support 3-d input", "user": {"login": "lsq357", "id": 13764760, "node_id": "MDQ6VXNlcjEzNzY0NzYw", "avatar_url": "https://avatars0.githubusercontent.com/u/13764760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lsq357", "html_url": "https://github.com/lsq357", "followers_url": "https://api.github.com/users/lsq357/followers", "following_url": "https://api.github.com/users/lsq357/following{/other_user}", "gists_url": "https://api.github.com/users/lsq357/gists{/gist_id}", "starred_url": "https://api.github.com/users/lsq357/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lsq357/subscriptions", "organizations_url": "https://api.github.com/users/lsq357/orgs", "repos_url": "https://api.github.com/users/lsq357/repos", "events_url": "https://api.github.com/users/lsq357/events{/privacy}", "received_events_url": "https://api.github.com/users/lsq357/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-14T11:57:08Z", "updated_at": "2019-10-21T13:02:13Z", "closed_at": "2019-10-21T13:02:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "when input is very long,  it need segment input to `num_segment * 512`,\r\nand like below\r\n```python\r\nbert_model = load_model_from_pretrain(...)\r\ninput_ids = Input(shape=(num_segment, 512))\r\nsegm_ids = Input(shape=(num_segment, 512)\r\nseq_output = bert_model([input_ids, segm_ids])\r\n\r\n# seq_output's shape = (None, 4, hidden_size)  hidden_size = 768/1024  bert-base/bert-large \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/154", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/154/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/154/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/154/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/154", "id": 506446383, "node_id": "MDU6SXNzdWU1MDY0NDYzODM=", "number": 154, "title": "Warning Message after updates ver0.80.0.0", "user": {"login": "Xiaoping777", "id": 54298181, "node_id": "MDQ6VXNlcjU0Mjk4MTgx", "avatar_url": "https://avatars0.githubusercontent.com/u/54298181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiaoping777", "html_url": "https://github.com/Xiaoping777", "followers_url": "https://api.github.com/users/Xiaoping777/followers", "following_url": "https://api.github.com/users/Xiaoping777/following{/other_user}", "gists_url": "https://api.github.com/users/Xiaoping777/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiaoping777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiaoping777/subscriptions", "organizations_url": "https://api.github.com/users/Xiaoping777/orgs", "repos_url": "https://api.github.com/users/Xiaoping777/repos", "events_url": "https://api.github.com/users/Xiaoping777/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiaoping777/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-14T04:55:11Z", "updated_at": "2019-10-21T05:02:12Z", "closed_at": "2019-10-21T05:02:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nAfter upgrading to ver 0.80.0, when run \"load_trained_model_from_checkpoint()\", I got following warning messages:\r\n\r\n> WARNING: Entity <bound method Masked.call of <keras_bert.layers.masked.Masked object at 0x7faf94bdd4a8>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method Masked.call of <keras_bert.layers.masked.Masked object at 0x7faf94bdd4a8>>: AttributeError: module 'gast' has no attribute 'Num'\r\n> WARNING: Entity <bound method Extract.call of <keras_bert.layers.extract.Extract object at 0x7faf94bdd9b0>> could not be transformed and will be executed as-is. Please report this to the AutgoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: converting <bound method Extract.call of <keras_bert.layers.extract.Extract object at 0x7faf94bdd9b0>>: AssertionError: Bad argument number for Name: 3, expecting 4\r\n> \r\n\r\n**Version Info**\r\n\r\n* [X] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n# Load basic model\r\nimport codecs\r\nfrom keras_bert import load_trained_model_from_checkpoint\r\n\r\ntoken_dict = {}\r\nwith codecs.open(vocab_path, 'r', 'utf8') as reader:\r\n    for line in reader:\r\n        token = line.strip()\r\n        token_dict[token] = len(token_dict)\r\n\r\nmodel = load_trained_model_from_checkpoint(\r\n    config_path, \r\n    checkpoint_path,\r\n    training=True,\r\n    trainable=True,\r\n    seq_len=SEQ_LEN,\r\n)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/153", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/153/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/153/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/153/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/153", "id": 506270817, "node_id": "MDU6SXNzdWU1MDYyNzA4MTc=", "number": 153, "title": "support albert?", "user": {"login": "yongzhuo", "id": 31341349, "node_id": "MDQ6VXNlcjMxMzQxMzQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/31341349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongzhuo", "html_url": "https://github.com/yongzhuo", "followers_url": "https://api.github.com/users/yongzhuo/followers", "following_url": "https://api.github.com/users/yongzhuo/following{/other_user}", "gists_url": "https://api.github.com/users/yongzhuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongzhuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongzhuo/subscriptions", "organizations_url": "https://api.github.com/users/yongzhuo/orgs", "repos_url": "https://api.github.com/users/yongzhuo/repos", "events_url": "https://api.github.com/users/yongzhuo/events{/privacy}", "received_events_url": "https://api.github.com/users/yongzhuo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705537, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM3", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-13T04:08:07Z", "updated_at": "2019-10-20T04:30:35Z", "closed_at": "2019-10-20T04:30:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Are there any plans to support Albert?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/152", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/152/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/152/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/152", "id": 506125172, "node_id": "MDU6SXNzdWU1MDYxMjUxNzI=", "number": 152, "title": "How to save fine tuned bert model with origin bert format", "user": {"login": "luzhongqiu", "id": 13563650, "node_id": "MDQ6VXNlcjEzNTYzNjUw", "avatar_url": "https://avatars2.githubusercontent.com/u/13563650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luzhongqiu", "html_url": "https://github.com/luzhongqiu", "followers_url": "https://api.github.com/users/luzhongqiu/followers", "following_url": "https://api.github.com/users/luzhongqiu/following{/other_user}", "gists_url": "https://api.github.com/users/luzhongqiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/luzhongqiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luzhongqiu/subscriptions", "organizations_url": "https://api.github.com/users/luzhongqiu/orgs", "repos_url": "https://api.github.com/users/luzhongqiu/repos", "events_url": "https://api.github.com/users/luzhongqiu/events{/privacy}", "received_events_url": "https://api.github.com/users/luzhongqiu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-12T03:35:46Z", "updated_at": "2019-10-19T05:00:43Z", "closed_at": "2019-10-19T05:00:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have done some fine-tuning task and now I want to save fine-tuned bert. I will use bert-as-service to service this, how can save as origin bert format? Thanks :)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/151", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/151/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/151/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/151/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/151", "id": 505666631, "node_id": "MDU6SXNzdWU1MDU2NjY2MzE=", "number": 151, "title": "I get some problem when I do the task of cws with keras-bert ", "user": {"login": "kiko441500", "id": 4480771, "node_id": "MDQ6VXNlcjQ0ODA3NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4480771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiko441500", "html_url": "https://github.com/kiko441500", "followers_url": "https://api.github.com/users/kiko441500/followers", "following_url": "https://api.github.com/users/kiko441500/following{/other_user}", "gists_url": "https://api.github.com/users/kiko441500/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiko441500/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiko441500/subscriptions", "organizations_url": "https://api.github.com/users/kiko441500/orgs", "repos_url": "https://api.github.com/users/kiko441500/repos", "events_url": "https://api.github.com/users/kiko441500/events{/privacy}", "received_events_url": "https://api.github.com/users/kiko441500/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-11T06:36:58Z", "updated_at": "2019-10-18T07:17:10Z", "closed_at": "2019-10-18T07:17:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://drive.google.com/open?id=19uxoBhWJeZVLRJsXLGeVVveg22-XLdP6\r\nhere is the file of ipynb. I can bulid model. I can also use the pre-trained model for the fine-tune task.\r\nwhen I train the model. I got the accuracy 99%. And the model looks good. But when I do the predict task, I find the model works bad bad.\r\nSo I modify the following layers. First, I used crf which is import form keras.contrib. The accuracy is 35%. I donot konw what is the matter. \r\nIf there is anyone can help me ? Thanks very much.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/150", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/150/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/150/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/150", "id": 504519139, "node_id": "MDU6SXNzdWU1MDQ1MTkxMzk=", "number": 150, "title": "\u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u8bad\u7ec3\u7684\u6a21\u578b", "user": {"login": "yanqiangmiffy", "id": 15925090, "node_id": "MDQ6VXNlcjE1OTI1MDkw", "avatar_url": "https://avatars1.githubusercontent.com/u/15925090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yanqiangmiffy", "html_url": "https://github.com/yanqiangmiffy", "followers_url": "https://api.github.com/users/yanqiangmiffy/followers", "following_url": "https://api.github.com/users/yanqiangmiffy/following{/other_user}", "gists_url": "https://api.github.com/users/yanqiangmiffy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yanqiangmiffy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yanqiangmiffy/subscriptions", "organizations_url": "https://api.github.com/users/yanqiangmiffy/orgs", "repos_url": "https://api.github.com/users/yanqiangmiffy/repos", "events_url": "https://api.github.com/users/yanqiangmiffy/events{/privacy}", "received_events_url": "https://api.github.com/users/yanqiangmiffy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-09T09:14:58Z", "updated_at": "2019-10-09T09:18:47Z", "closed_at": "2019-10-09T09:18:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u4e3b\u8981\u662f\u770b\u7684\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u4e0d\u662f\u5f88\u660e\u767d`get_model()`\r\nhttps://github.com/CyberZHG/keras-bert/blob/master/README.zh-CN.md#%E8%AE%AD%E7%BB%83%E5%92%8C%E4%BD%BF%E7%94%A8\r\n\r\n# Use the trained model\r\ninputs, output_layer = get_model(\r\n    token_num=len(token_dict),\r\n    head_num=5,\r\n    transformer_num=12,\r\n    embed_dim=25,\r\n    feed_forward_dim=100,\r\n    seq_len=20,\r\n    pos_num=20,\r\n    dropout_rate=0.05,\r\n    training=False,      # The input layers and output layer will be returned if `training` is `False`\r\n    trainable=False,     # Whether the model is trainable. The default value is the same with `training`\r\n    output_layer_num=4,  # The number of layers whose outputs will be concatenated as a single output.\r\n                         # Only available when `training` is `False`.\r\n)\r\nprint(inputs,output_layer)\r\n\r\n\r\n\u56e0\u4e3a\u4e0d\u9700\u8981\u8bad\u7ec3\u53ef\u4ee5\u6267\u884c\u8fd9\u6bb5\u4ee3\u7801\uff0c\r\n\u662f\u4e0d\u662f\u8fd9\u6837\u7684\u8fc7\u7a0b\uff1a\r\nmodel fit\u5b8c\u4e4b\u540e\uff0c\u7136\u540e\u518dload\uff0c\u4e4b\u540e\u6211\u7528model\u53bbpredict\uff1f\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/149", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/149/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/149/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/149/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/149", "id": 503399210, "node_id": "MDU6SXNzdWU1MDMzOTkyMTA=", "number": 149, "title": "How to use FP16 mode?", "user": {"login": "illcat", "id": 40688514, "node_id": "MDQ6VXNlcjQwNjg4NTE0", "avatar_url": "https://avatars3.githubusercontent.com/u/40688514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illcat", "html_url": "https://github.com/illcat", "followers_url": "https://api.github.com/users/illcat/followers", "following_url": "https://api.github.com/users/illcat/following{/other_user}", "gists_url": "https://api.github.com/users/illcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/illcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illcat/subscriptions", "organizations_url": "https://api.github.com/users/illcat/orgs", "repos_url": "https://api.github.com/users/illcat/repos", "events_url": "https://api.github.com/users/illcat/events{/privacy}", "received_events_url": "https://api.github.com/users/illcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-07T11:43:53Z", "updated_at": "2019-10-13T10:14:18Z", "closed_at": "2019-10-13T10:14:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/148", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/148/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/148/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/148", "id": 502968123, "node_id": "MDU6SXNzdWU1MDI5NjgxMjM=", "number": 148, "title": "I want to add a few special words to Pre-training-bert.", "user": {"login": "illcat", "id": 40688514, "node_id": "MDQ6VXNlcjQwNjg4NTE0", "avatar_url": "https://avatars3.githubusercontent.com/u/40688514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illcat", "html_url": "https://github.com/illcat", "followers_url": "https://api.github.com/users/illcat/followers", "following_url": "https://api.github.com/users/illcat/following{/other_user}", "gists_url": "https://api.github.com/users/illcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/illcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illcat/subscriptions", "organizations_url": "https://api.github.com/users/illcat/orgs", "repos_url": "https://api.github.com/users/illcat/repos", "events_url": "https://api.github.com/users/illcat/events{/privacy}", "received_events_url": "https://api.github.com/users/illcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-05T14:11:08Z", "updated_at": "2019-10-05T15:07:23Z", "closed_at": "2019-10-05T15:07:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "So how to resize_token_embeddings like \"pytorch-transformers\"?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/147", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/147/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/147/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/147", "id": 501720997, "node_id": "MDU6SXNzdWU1MDE3MjA5OTc=", "number": 147, "title": "Slow predictions", "user": {"login": "richfolsom", "id": 11282477, "node_id": "MDQ6VXNlcjExMjgyNDc3", "avatar_url": "https://avatars0.githubusercontent.com/u/11282477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richfolsom", "html_url": "https://github.com/richfolsom", "followers_url": "https://api.github.com/users/richfolsom/followers", "following_url": "https://api.github.com/users/richfolsom/following{/other_user}", "gists_url": "https://api.github.com/users/richfolsom/gists{/gist_id}", "starred_url": "https://api.github.com/users/richfolsom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richfolsom/subscriptions", "organizations_url": "https://api.github.com/users/richfolsom/orgs", "repos_url": "https://api.github.com/users/richfolsom/repos", "events_url": "https://api.github.com/users/richfolsom/events{/privacy}", "received_events_url": "https://api.github.com/users/richfolsom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-02T20:54:25Z", "updated_at": "2019-10-09T22:32:44Z", "closed_at": "2019-10-09T22:32:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nWhen I run the model on Colab TPU everything works fine up until the prediction step.  Then It estimates hours to predict the x_test set.\r\n\r\n**Version Info**\r\n\r\n* [x ] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nimport keras_bert\r\n\r\n# @title Predict\r\n\r\npredicts = model.predict(test_x, verbose=True).argmax(axis=-1)\r\n```\r\n48/780 [>.............................] - ETA: 3:27:09", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/146", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/146/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/146/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/146/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/146", "id": 501485533, "node_id": "MDU6SXNzdWU1MDE0ODU1MzM=", "number": 146, "title": "MaskMaxPooling1D", "user": {"login": "rortegagit", "id": 32016141, "node_id": "MDQ6VXNlcjMyMDE2MTQx", "avatar_url": "https://avatars3.githubusercontent.com/u/32016141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rortegagit", "html_url": "https://github.com/rortegagit", "followers_url": "https://api.github.com/users/rortegagit/followers", "following_url": "https://api.github.com/users/rortegagit/following{/other_user}", "gists_url": "https://api.github.com/users/rortegagit/gists{/gist_id}", "starred_url": "https://api.github.com/users/rortegagit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rortegagit/subscriptions", "organizations_url": "https://api.github.com/users/rortegagit/orgs", "repos_url": "https://api.github.com/users/rortegagit/repos", "events_url": "https://api.github.com/users/rortegagit/events{/privacy}", "received_events_url": "https://api.github.com/users/rortegagit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705537, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM3", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-02T13:21:49Z", "updated_at": "2019-10-09T14:32:52Z", "closed_at": "2019-10-09T14:32:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nError when adding a MaxPooling1D layer on top of the BERT embeddings (masked input)\r\n\r\n**Describe the solution you'd like**\r\nCould you make a class for MaskMaxPooling1D layer?\r\n\r\n**Describe alternatives you've considered**\r\nPR\r\n\r\n**Additional context**\r\nN/A\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/145", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/145/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/145/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/145", "id": 500061922, "node_id": "MDU6SXNzdWU1MDAwNjE5MjI=", "number": 145, "title": "bert_model.fit_generator\u4e0d\u80fd\u4fdd\u5b58\u6a21\u578b", "user": {"login": "yanqiangmiffy", "id": 15925090, "node_id": "MDQ6VXNlcjE1OTI1MDkw", "avatar_url": "https://avatars1.githubusercontent.com/u/15925090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yanqiangmiffy", "html_url": "https://github.com/yanqiangmiffy", "followers_url": "https://api.github.com/users/yanqiangmiffy/followers", "following_url": "https://api.github.com/users/yanqiangmiffy/following{/other_user}", "gists_url": "https://api.github.com/users/yanqiangmiffy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yanqiangmiffy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yanqiangmiffy/subscriptions", "organizations_url": "https://api.github.com/users/yanqiangmiffy/orgs", "repos_url": "https://api.github.com/users/yanqiangmiffy/repos", "events_url": "https://api.github.com/users/yanqiangmiffy/events{/privacy}", "received_events_url": "https://api.github.com/users/yanqiangmiffy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705541, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQx", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-30T05:40:57Z", "updated_at": "2019-09-30T11:08:44Z", "closed_at": "2019-09-30T06:48:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nbert_model.fit_generator\u4e0d\u80fd\u4fdd\u5b58\u6a21\u578b\uff0cdata\u8def\u5f84\u4e0b\u6ca1\u6709\u6a21\u578bh5\u6587\u4ef6\r\n\r\n**Version Info**\r\n\r\n* [x] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\ncheckpointer = ModelCheckpoint(filepath=\"data/checkpoint_%d.hdf5\" % (j),\r\n                                       monitor='val_acc', verbose=True,\r\n                                       save_best_only=True, mode='auto')\r\n\r\n\r\nbert_model.fit_generator(\r\n            train_D.__iter__(),\r\n            steps_per_epoch=len(train_D),\r\n            epochs=5,\r\n            validation_data=valid_D.__iter__(),\r\n            validation_steps=len(valid_D),\r\n            callbacks=[checkpointer, early],\r\n            verbose=True\r\n        )\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/144", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/144/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/144/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/144/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/144", "id": 499195390, "node_id": "MDU6SXNzdWU0OTkxOTUzOTA=", "number": 144, "title": "bert model could not applied in TimeDistributed wrapper.", "user": {"login": "phoenixkillerli", "id": 42628115, "node_id": "MDQ6VXNlcjQyNjI4MTE1", "avatar_url": "https://avatars3.githubusercontent.com/u/42628115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phoenixkillerli", "html_url": "https://github.com/phoenixkillerli", "followers_url": "https://api.github.com/users/phoenixkillerli/followers", "following_url": "https://api.github.com/users/phoenixkillerli/following{/other_user}", "gists_url": "https://api.github.com/users/phoenixkillerli/gists{/gist_id}", "starred_url": "https://api.github.com/users/phoenixkillerli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phoenixkillerli/subscriptions", "organizations_url": "https://api.github.com/users/phoenixkillerli/orgs", "repos_url": "https://api.github.com/users/phoenixkillerli/repos", "events_url": "https://api.github.com/users/phoenixkillerli/events{/privacy}", "received_events_url": "https://api.github.com/users/phoenixkillerli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705541, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQx", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-27T02:05:38Z", "updated_at": "2019-09-30T02:59:02Z", "closed_at": "2019-09-30T02:59:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\nmodified test code, got error:\r\n```python\r\nAssertionError: Could not compute output Tensor(\"lambda_1/strided_slice:0\", shape=(?, 768), dtype=float32)\r\n```\r\n\r\nbert model could not applied in TimeDistributed wrapper.\r\n\r\n\r\n\r\n**Version Info**\r\n\r\n*tensorflow 1.12\r\n*keras 2.2.4\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nfrom keras_bert import load_trained_model_from_checkpoint, Tokenizer\r\nfrom keras.layers import *\r\nfrom keras.models import Model\r\n\r\nconfig_path = './chinese_L-12_H-768_A-12/bert_config.json'\r\ncheckpoint_path = './chinese_L-12_H-768_A-12/bert_model.ckpt'\r\ndict_path = './chinese_L-12_H-768_A-12/vocab.txt'\r\n\r\nbert_model = load_trained_model_from_checkpoint(config_path,\r\n                                                checkpoint_path,\r\n                                                seq_len=None)\r\n\r\nfor l in bert_model.layers:\r\n    l.trainable = True\r\n\r\nMAX_SENTENCE_LENGTH = 128\r\nMAX_SENTENCE_COUNT = 64\r\nl2_reg = regularizers.l2(1e-8)\r\nn_classes = 2\r\n\r\nx1 = Input(shape=(MAX_SENTENCE_LENGTH, ), dtype='int32')\r\nx2 = Input(shape=(MAX_SENTENCE_LENGTH, ), dtype='int32')\r\nsentence = bert_model([x1, x2])\r\nsentence = Lambda(lambda x: x[:, 0])(sentence)\r\ntemp = Model([x1, x2], sentence)\r\ntexts_in = Input(shape=(MAX_SENTENCE_COUNT, MAX_SENTENCE_LENGTH, 2),\r\n                 dtype='int32')\r\nattention_weighted_sentences = TimeDistributed(temp)(texts_in)\r\n# modified just like below, still error\r\n# attention_weighted_sentences = TimeDistributed(bert_model)(texts_in)\r\n\r\nmodel = Model(texts_in, attention_weighted_sentences)\r\nmodel.summary()\r\n\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/phoenixkiller/.vscode/extensions/ms-python.python-2019.9.34911/pythonFiles/ptvsd_launcher.py\", line 43, in <module>\r\n    main(ptvsdArgs)\r\n  File \"/home/phoenixkiller/.vscode/extensions/ms-python.python-2019.9.34911/pythonFiles/lib/python/ptvsd/__main__.py\", line 432, in main\r\n    run()\r\n  File \"/home/phoenixkiller/.vscode/extensions/ms-python.python-2019.9.34911/pythonFiles/lib/python/ptvsd/__main__.py\", line 316, in run_file\r\n    runpy.run_path(target, run_name='__main__')\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/phoenixkiller/source/hnatt_bert_keras/error.py\", line 29, in <module>\r\n    attention_weighted_sentences = TimeDistributed(temp)(texts_in)\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/site-packages/keras/engine/base_layer.py\", line 457, in __call__\r\n    output = self.call(inputs, **kwargs)\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/site-packages/keras/layers/wrappers.py\", line 248, in call\r\n    y = self.layer.call(inputs, **kwargs)\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/site-packages/keras/engine/network.py\", line 564, in call\r\n    output_tensors, _, _ = self.run_internal_graph(inputs, masks)\r\n  File \"/home/phoenixkiller/anaconda3/envs/tf1.12/lib/python3.6/site-packages/keras/engine/network.py\", line 798, in run_internal_graph\r\n    assert str(id(x)) in tensor_map, 'Could not compute output ' + str(x)\r\nAssertionError: Could not compute output Tensor(\"lambda_1/strided_slice:0\", shape=(?, 768), dtype=float32)\r\n\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/143", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/143/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/143/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/143/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/143", "id": 498156740, "node_id": "MDU6SXNzdWU0OTgxNTY3NDA=", "number": 143, "title": "get_updates() takes 3 positional arguments but 4 were given", "user": {"login": "pengchenghu428", "id": 42515548, "node_id": "MDQ6VXNlcjQyNTE1NTQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/42515548?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pengchenghu428", "html_url": "https://github.com/pengchenghu428", "followers_url": "https://api.github.com/users/pengchenghu428/followers", "following_url": "https://api.github.com/users/pengchenghu428/following{/other_user}", "gists_url": "https://api.github.com/users/pengchenghu428/gists{/gist_id}", "starred_url": "https://api.github.com/users/pengchenghu428/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pengchenghu428/subscriptions", "organizations_url": "https://api.github.com/users/pengchenghu428/orgs", "repos_url": "https://api.github.com/users/pengchenghu428/repos", "events_url": "https://api.github.com/users/pengchenghu428/events{/privacy}", "received_events_url": "https://api.github.com/users/pengchenghu428/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-25T09:17:23Z", "updated_at": "2019-10-02T09:28:18Z", "closed_at": "2019-10-02T09:28:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "there is an error when i run the demo.\r\ntensorflow=1.8.0\r\nkeras=2.0.5\r\n![image](https://user-images.githubusercontent.com/42515548/65587294-381e5800-dfb8-11e9-8474-455b8eeb4770.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/142", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/142/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/142/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/142", "id": 497978293, "node_id": "MDU6SXNzdWU0OTc5NzgyOTM=", "number": 142, "title": "keras.utils.multi_gpu_model() does not work", "user": {"login": "superxuxin", "id": 5152493, "node_id": "MDQ6VXNlcjUxNTI0OTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5152493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/superxuxin", "html_url": "https://github.com/superxuxin", "followers_url": "https://api.github.com/users/superxuxin/followers", "following_url": "https://api.github.com/users/superxuxin/following{/other_user}", "gists_url": "https://api.github.com/users/superxuxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/superxuxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/superxuxin/subscriptions", "organizations_url": "https://api.github.com/users/superxuxin/orgs", "repos_url": "https://api.github.com/users/superxuxin/repos", "events_url": "https://api.github.com/users/superxuxin/events{/privacy}", "received_events_url": "https://api.github.com/users/superxuxin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705541, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQx", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-24T23:57:27Z", "updated_at": "2019-10-04T04:49:33Z", "closed_at": "2019-10-04T04:49:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Running the following code\r\n\r\nmodel = load_trained_model_from_checkpoint(config_path, checkpoint_path, seq_len=10, training=True)\r\nmodel = keras.utils.multi_gpu_model(model, 2)\r\nmodel.summary(line_length=120)\r\n\r\nI got a strange model that only contains very few layers. Commenting out the multi_gpu_model() part give me the expected model. Does anyone see a similar issue?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/141", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/141/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/141/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/141", "id": 497550928, "node_id": "MDU6SXNzdWU0OTc1NTA5Mjg=", "number": 141, "title": "Load model error,  .h5 file load error: error message = 'Is a directory'", "user": {"login": "luzhongqiu", "id": 13563650, "node_id": "MDQ6VXNlcjEzNTYzNjUw", "avatar_url": "https://avatars2.githubusercontent.com/u/13563650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luzhongqiu", "html_url": "https://github.com/luzhongqiu", "followers_url": "https://api.github.com/users/luzhongqiu/followers", "following_url": "https://api.github.com/users/luzhongqiu/following{/other_user}", "gists_url": "https://api.github.com/users/luzhongqiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/luzhongqiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luzhongqiu/subscriptions", "organizations_url": "https://api.github.com/users/luzhongqiu/orgs", "repos_url": "https://api.github.com/users/luzhongqiu/repos", "events_url": "https://api.github.com/users/luzhongqiu/events{/privacy}", "received_events_url": "https://api.github.com/users/luzhongqiu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705541, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQx", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-24T08:54:59Z", "updated_at": "2019-09-30T11:09:05Z", "closed_at": "2019-09-24T08:59:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I made a classification task, I save the model(also tried save weights), but I can not load the .h5 file, error message are below\r\n\r\nOSError: Unable to open file (file read failed: time = Tue Sep 24 16:30:59 2019\r\n, filename = '/root/.keras/datasets/chinese_L-12_H-768_A-12', file descriptor = 25, errno = 21, error message = 'Is a directory', buf = 0x7ffdc8a0ade0, total read size = 8, bytes this sub-read = 8, bytes actually read = 18446744073709551615, offset = 0)\r\n\r\nIt seem that when i use `keras.models.load_model`, it read a folder.\r\n\r\n\r\n```python\r\nlayer_num = 12\r\nbert_model = load_trained_model_from_checkpoint(\r\n    paths.config,\r\n    paths.checkpoint,\r\n    seq_len=512,\r\n    training=False,\r\n    use_adapter=True,\r\n    trainable=['Encoder-{}-MultiHeadSelfAttention-Adapter'.format(i + 1) for i in range(layer_num)] +\r\n    ['Encoder-{}-FeedForward-Adapter'.format(i + 1) for i in range(layer_num)] +\r\n    ['Encoder-{}-MultiHeadSelfAttention-Norm'.format(i + 1) for i in range(layer_num)] +\r\n    ['Encoder-{}-FeedForward-Norm'.format(i + 1) for i in range(layer_num)],\r\n)\r\n\r\nmodel_input = bert_model.inputs\r\nx = keras.layers.Lambda(lambda x: x[:, 0])(bert_model.outputs[0])\r\np = keras.layers.Dense(1, activation='sigmoid')(x)\r\nmodel = keras.Model(model_input, p)\r\nmodel.compile(\r\n    loss='binary_crossentropy',\r\n    optimizer=optimizers.Adam(1e-5),\r\n    metrics=[metrics.binary_accuracy]\r\n)\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/140", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/140/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/140/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/140", "id": 495689525, "node_id": "MDU6SXNzdWU0OTU2ODk1MjU=", "number": 140, "title": " model.predict([np.array([indices]), np.array([segments]), masks])[1]", "user": {"login": "LyJss", "id": 31007878, "node_id": "MDQ6VXNlcjMxMDA3ODc4", "avatar_url": "https://avatars3.githubusercontent.com/u/31007878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LyJss", "html_url": "https://github.com/LyJss", "followers_url": "https://api.github.com/users/LyJss/followers", "following_url": "https://api.github.com/users/LyJss/following{/other_user}", "gists_url": "https://api.github.com/users/LyJss/gists{/gist_id}", "starred_url": "https://api.github.com/users/LyJss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LyJss/subscriptions", "organizations_url": "https://api.github.com/users/LyJss/orgs", "repos_url": "https://api.github.com/users/LyJss/repos", "events_url": "https://api.github.com/users/LyJss/events{/privacy}", "received_events_url": "https://api.github.com/users/LyJss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-19T09:44:19Z", "updated_at": "2019-09-20T03:31:03Z", "closed_at": "2019-09-20T03:31:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u667a\u80fd\u4f20\u5165\u4e24\u4e2aarrays\uff0c\u8fd9\u662f\u4ec0\u4e48\u95ee\u9898\uff0c\u4e0d\u80fd\u4f20\u5165 masks\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/139", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/139/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/139/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/139", "id": 495027317, "node_id": "MDU6SXNzdWU0OTUwMjczMTc=", "number": 139, "title": "Remove tensorflow warnings", "user": {"login": "BrikerMan", "id": 9368907, "node_id": "MDQ6VXNlcjkzNjg5MDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/9368907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BrikerMan", "html_url": "https://github.com/BrikerMan", "followers_url": "https://api.github.com/users/BrikerMan/followers", "following_url": "https://api.github.com/users/BrikerMan/following{/other_user}", "gists_url": "https://api.github.com/users/BrikerMan/gists{/gist_id}", "starred_url": "https://api.github.com/users/BrikerMan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BrikerMan/subscriptions", "organizations_url": "https://api.github.com/users/BrikerMan/orgs", "repos_url": "https://api.github.com/users/BrikerMan/repos", "events_url": "https://api.github.com/users/BrikerMan/events{/privacy}", "received_events_url": "https://api.github.com/users/BrikerMan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-09-18T06:58:54Z", "updated_at": "2019-09-23T09:15:01Z", "closed_at": "2019-09-23T09:15:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nThere will lots of warning about renaming, maybe we could change it?\r\n\r\nLogs:\r\n\r\n```\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:541: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.\r\n\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:4432: The name tf.random_uniform is deprecated. Please use tf.random.uniform instead.\r\n\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:66: The name tf.get_default_graph is deprecated. Please use tf.compat.v1.get_default_graph instead.\r\n\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:148: The name tf.placeholder_with_default is deprecated. Please use tf.compat.v1.placeholder_with_default instead.\r\n\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:3733: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nPlease use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:4479: The name tf.truncated_normal is deprecated. Please use tf.random.truncated_normal instead.\r\n```\r\n\r\n**Version Info**\r\n\r\n```\r\nkeras-bert                       0.77.0 \r\ntensorflow                       1.14.0\r\n```\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nimport keras\r\nfrom keras_bert import get_base_dict, get_model, compile_model, gen_batch_inputs\r\n\r\n\r\n# A toy input example\r\nsentence_pairs = [\r\n    [['all', 'work', 'and', 'no', 'play'], ['makes', 'jack', 'a', 'dull', 'boy']],\r\n    [['from', 'the', 'day', 'forth'], ['my', 'arm', 'changed']],\r\n    [['and', 'a', 'voice', 'echoed'], ['power', 'give', 'me', 'more', 'power']],\r\n]\r\n\r\n\r\n# Build token dictionary\r\ntoken_dict = get_base_dict()  # A dict that contains some special tokens\r\nfor pairs in sentence_pairs:\r\n    for token in pairs[0] + pairs[1]:\r\n        if token not in token_dict:\r\n            token_dict[token] = len(token_dict)\r\ntoken_list = list(token_dict.keys())  # Used for selecting a random word\r\n\r\n\r\n# Build & train the model\r\nmodel = get_model(\r\n    token_num=len(token_dict),\r\n    head_num=5,\r\n    transformer_num=12,\r\n    embed_dim=25,\r\n    feed_forward_dim=100,\r\n    seq_len=20,\r\n    pos_num=20,\r\n    dropout_rate=0.05,\r\n)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/138", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/138/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/138/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/138", "id": 493944028, "node_id": "MDU6SXNzdWU0OTM5NDQwMjg=", "number": 138, "title": "Tokenization", "user": {"login": "sonfire86", "id": 26105224, "node_id": "MDQ6VXNlcjI2MTA1MjI0", "avatar_url": "https://avatars0.githubusercontent.com/u/26105224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sonfire86", "html_url": "https://github.com/sonfire86", "followers_url": "https://api.github.com/users/sonfire86/followers", "following_url": "https://api.github.com/users/sonfire86/following{/other_user}", "gists_url": "https://api.github.com/users/sonfire86/gists{/gist_id}", "starred_url": "https://api.github.com/users/sonfire86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sonfire86/subscriptions", "organizations_url": "https://api.github.com/users/sonfire86/orgs", "repos_url": "https://api.github.com/users/sonfire86/repos", "events_url": "https://api.github.com/users/sonfire86/events{/privacy}", "received_events_url": "https://api.github.com/users/sonfire86/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-16T09:39:44Z", "updated_at": "2019-09-23T10:56:15Z", "closed_at": "2019-09-23T10:20:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/137", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/137/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/137/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/137", "id": 493060065, "node_id": "MDU6SXNzdWU0OTMwNjAwNjU=", "number": 137, "title": "Question about why transpose Weight Matrix when load \"NSP\" layer (THX)", "user": {"login": "Zenghao-CQ", "id": 45357384, "node_id": "MDQ6VXNlcjQ1MzU3Mzg0", "avatar_url": "https://avatars0.githubusercontent.com/u/45357384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zenghao-CQ", "html_url": "https://github.com/Zenghao-CQ", "followers_url": "https://api.github.com/users/Zenghao-CQ/followers", "following_url": "https://api.github.com/users/Zenghao-CQ/following{/other_user}", "gists_url": "https://api.github.com/users/Zenghao-CQ/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zenghao-CQ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zenghao-CQ/subscriptions", "organizations_url": "https://api.github.com/users/Zenghao-CQ/orgs", "repos_url": "https://api.github.com/users/Zenghao-CQ/repos", "events_url": "https://api.github.com/users/Zenghao-CQ/events{/privacy}", "received_events_url": "https://api.github.com/users/Zenghao-CQ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-12T22:35:06Z", "updated_at": "2019-09-20T03:30:58Z", "closed_at": "2019-09-20T03:30:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for your working, its both solid and elegant!\r\nBut i am so confused that why you **transpose** the weight matrix when loading **\"NSP\"** layer (at line 142 in loader.py)?  MLM_Dense, NSP_Dense and NSP are all Dense layers, but why only transpose weight NSP?\r\nTHX\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/136", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/136/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/136/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/136", "id": 492528817, "node_id": "MDU6SXNzdWU0OTI1Mjg4MTc=", "number": 136, "title": "Pathological memory usage in training, scaling with number of examples", "user": {"login": "LordZorgoth", "id": 16193308, "node_id": "MDQ6VXNlcjE2MTkzMzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/16193308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LordZorgoth", "html_url": "https://github.com/LordZorgoth", "followers_url": "https://api.github.com/users/LordZorgoth/followers", "following_url": "https://api.github.com/users/LordZorgoth/following{/other_user}", "gists_url": "https://api.github.com/users/LordZorgoth/gists{/gist_id}", "starred_url": "https://api.github.com/users/LordZorgoth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LordZorgoth/subscriptions", "organizations_url": "https://api.github.com/users/LordZorgoth/orgs", "repos_url": "https://api.github.com/users/LordZorgoth/repos", "events_url": "https://api.github.com/users/LordZorgoth/events{/privacy}", "received_events_url": "https://api.github.com/users/LordZorgoth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-09-12T00:38:54Z", "updated_at": "2019-09-20T15:14:59Z", "closed_at": "2019-09-20T15:14:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using TF_KERAS=1 and running on CPU using tensorflow 1.14.\r\n\r\nFor every example I fit on, the memory usage is increasing by somewhere from 400-600MB. It seems likely that it is duplicating the weights in memory for each training example. This is to say, if I train it on 10 examples, it uses 6.5GB of memory. It I train it on 20, it uses 12GB. If I train it on 30, it uses 17GB. This obviously prevents me from using the model for any practical purpose, since I want to train it on thousands of examples.\r\n\r\nI'm loading and fine-tuning a pretrained model from a checkpoint using\r\n\r\n    \r\n    os.environ['TF_KERAS'] = '1'\r\n    import keras_bert\r\n    import numpy as np\r\n    import tensorflow.keras as keras\r\n    from tensorflow.keras.layers import Input, Dense, Dropout, Lambda\r\n    from tensorflow.keras.models import Model\r\n    def get_model(config, checkpoint):\r\n        model = keras_bert.load_trained_model_from_checkpoint(config, checkpoint, trainable=True, seq_len=256)\r\n        pooling_layer = Lambda(lambda X: X[:, 0, :],\r\n                                            output_shape=(768,),\r\n                                            input_shape=(256, 768))\r\n        inputs = [Input(256), Input(256)]\r\n        X = model(inputs)\r\n        X = pooling_layer(X)\r\n        X = Dropout(0.1)(X)\r\n        X = Dense(50, activation='relu')(X)\r\n        X = Dropout(0.1)(X)\r\n        X = Dense(1, activation='sigmoid')(X)\r\n        model = Model(inputs=inputs, outputs=X)    \r\n        return model\r\n    model = get_model(config, checkpoint)\r\n    model.compile(optimizer='adam', loss='binary_crossentropy')\r\n    model.fit([input_tokens, np.zeros_like(input_tokens)], labels)\r\n\r\nwhere input_tokens are token IDs and labels are binary labels. In my use case, the config and checkpoint I am using are from v1.1 of `https://github.com/naver/biobert-pretrained`, in case that is relevant.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/135", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/135/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/135/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/135", "id": 492475412, "node_id": "MDU6SXNzdWU0OTI0NzU0MTI=", "number": 135, "title": "Use the trained model?", "user": {"login": "hi-im-ryanli", "id": 10702581, "node_id": "MDQ6VXNlcjEwNzAyNTgx", "avatar_url": "https://avatars1.githubusercontent.com/u/10702581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hi-im-ryanli", "html_url": "https://github.com/hi-im-ryanli", "followers_url": "https://api.github.com/users/hi-im-ryanli/followers", "following_url": "https://api.github.com/users/hi-im-ryanli/following{/other_user}", "gists_url": "https://api.github.com/users/hi-im-ryanli/gists{/gist_id}", "starred_url": "https://api.github.com/users/hi-im-ryanli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hi-im-ryanli/subscriptions", "organizations_url": "https://api.github.com/users/hi-im-ryanli/orgs", "repos_url": "https://api.github.com/users/hi-im-ryanli/repos", "events_url": "https://api.github.com/users/hi-im-ryanli/events{/privacy}", "received_events_url": "https://api.github.com/users/hi-im-ryanli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-11T21:27:11Z", "updated_at": "2019-09-19T19:18:33Z", "closed_at": "2019-09-19T19:18:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for the contribution!\r\n\r\nIn the `README.md`, under section **Train & Use**; after you train the model with your toy input example, I am confused on how did you load the trained model.\r\n\r\nIn the `README.md`, you did:\r\n\r\n```python\r\n# Use the trained model\r\ninputs, output_layer = get_model(\r\n    token_num=len(token_dict),\r\n    head_num=5,\r\n    transformer_num=12,\r\n    embed_dim=25,\r\n    feed_forward_dim=100,\r\n    seq_len=20,\r\n    pos_num=20,\r\n    dropout_rate=0.05,\r\n    training=False,      # The input layers and output layer will be returned if `training` is `False`\r\n    trainable=False,     # Whether the model is trainable. The default value is the same with `training`\r\n    output_layer_num=4,  # The number of layers whose outputs will be concatenated as a single output.\r\n                         # Only available when `training` is `False`.\r\n)\r\n```\r\n\r\nBut I am confused on how did the function load the the weights of the trained model, since you did not explicitly pass the argument `model` into the `get_mode()` function?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/134", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/134/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/134/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/134", "id": 487766176, "node_id": "MDU6SXNzdWU0ODc3NjYxNzY=", "number": 134, "title": "How can I get the output of the last few layers?", "user": {"login": "Chevalier1024", "id": 26433095, "node_id": "MDQ6VXNlcjI2NDMzMDk1", "avatar_url": "https://avatars0.githubusercontent.com/u/26433095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chevalier1024", "html_url": "https://github.com/Chevalier1024", "followers_url": "https://api.github.com/users/Chevalier1024/followers", "following_url": "https://api.github.com/users/Chevalier1024/following{/other_user}", "gists_url": "https://api.github.com/users/Chevalier1024/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chevalier1024/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chevalier1024/subscriptions", "organizations_url": "https://api.github.com/users/Chevalier1024/orgs", "repos_url": "https://api.github.com/users/Chevalier1024/repos", "events_url": "https://api.github.com/users/Chevalier1024/events{/privacy}", "received_events_url": "https://api.github.com/users/Chevalier1024/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-31T12:38:39Z", "updated_at": "2019-08-31T13:29:57Z", "closed_at": "2019-08-31T13:29:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi~Thank you very much for your work. Can you tell me how to get the output of the last few layers?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/133", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/133/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/133/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/133", "id": 487508714, "node_id": "MDU6SXNzdWU0ODc1MDg3MTQ=", "number": 133, "title": "Masked Language modelling only predicts padding tokens", "user": {"login": "RAXAI", "id": 32540275, "node_id": "MDQ6VXNlcjMyNTQwMjc1", "avatar_url": "https://avatars0.githubusercontent.com/u/32540275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RAXAI", "html_url": "https://github.com/RAXAI", "followers_url": "https://api.github.com/users/RAXAI/followers", "following_url": "https://api.github.com/users/RAXAI/following{/other_user}", "gists_url": "https://api.github.com/users/RAXAI/gists{/gist_id}", "starred_url": "https://api.github.com/users/RAXAI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RAXAI/subscriptions", "organizations_url": "https://api.github.com/users/RAXAI/orgs", "repos_url": "https://api.github.com/users/RAXAI/repos", "events_url": "https://api.github.com/users/RAXAI/events{/privacy}", "received_events_url": "https://api.github.com/users/RAXAI/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-30T14:18:42Z", "updated_at": "2019-09-06T16:55:42Z", "closed_at": "2019-09-06T16:55:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nmy main problem is my bert model only outputs padding tokens. since most of the input is padding tokens its learnt to only predict padding tokens therefore giving low loss. How do I stop the model from attending to the padding token. and focus on the real tokens. I tried to use your masking layer but do not not know how to use this . could you provide an example and solution? or tell me how i should modify my code.\r\n\r\nalso am I using the correct loss function for masked language modelling.\r\n\r\n\r\n![bert_q](https://user-images.githubusercontent.com/32540275/64027786-5a4bc400-cb39-11e9-98f4-fd50f48629fd.png)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/132", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/132/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/132/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/132", "id": 487246025, "node_id": "MDU6SXNzdWU0ODcyNDYwMjU=", "number": 132, "title": "How do I load your model's predictions as inputs to my model via fit_generator?", "user": {"login": "moonman239", "id": 8889379, "node_id": "MDQ6VXNlcjg4ODkzNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/8889379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moonman239", "html_url": "https://github.com/moonman239", "followers_url": "https://api.github.com/users/moonman239/followers", "following_url": "https://api.github.com/users/moonman239/following{/other_user}", "gists_url": "https://api.github.com/users/moonman239/gists{/gist_id}", "starred_url": "https://api.github.com/users/moonman239/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moonman239/subscriptions", "organizations_url": "https://api.github.com/users/moonman239/orgs", "repos_url": "https://api.github.com/users/moonman239/repos", "events_url": "https://api.github.com/users/moonman239/events{/privacy}", "received_events_url": "https://api.github.com/users/moonman239/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-30T01:49:06Z", "updated_at": "2019-09-06T20:25:16Z", "closed_at": "2019-09-06T02:44:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "0\r\n\r\n\r\nI am trying to train a neural network on the SQuAD v1.1 dataset, using a pretrained BERT model, by feeding the outputs from the BERT model as inputs to mine. Due to the large amount of data I need to work with, I feel that I need to create a generator, on which my neural network can then fit:\r\n\r\n# @title Preparation\r\n!pip install -q keras-bert\r\n!wget -q https://storage.googleapis.com/bert_models/2018_10_18/uncased_L-12_H-768_A-12.zip\r\n!unzip -o uncased_L-12_H-768_A-12.zip\r\nimport os\r\npretrained_path = 'uncased_L-12_H-768_A-12'\r\nconfig_path = os.path.join(pretrained_path, 'bert_config.json')\r\ncheckpoint_path = os.path.join(pretrained_path, 'bert_model.ckpt')\r\nvocab_path = os.path.join(pretrained_path, 'vocab.txt')\r\n# TF_KERAS must be added to environment variables in order to use TPU\r\nos.environ['TF_KERAS'] = '1'\r\nimport codecs\r\nfrom keras_bert import load_trained_model_from_checkpoint\r\ntoken_dict = {}\r\nwith codecs.open(vocab_path, 'r', 'utf8') as reader:\r\n    for line in reader:\r\n        token = line.strip()\r\n        token_dict[token] = len(token_dict)\r\nmodel = load_trained_model_from_checkpoint(config_path, checkpoint_path)\r\nimport numpy as np\r\nfrom keras_bert import Tokenizer\r\ntokenizer = Tokenizer(token_dict)\r\ndef tokenize(text):\r\n  tokens = tokenizer.tokenize(text)\r\n  indices, segments = tokenizer.encode(first=text, max_len=512)\r\n  return indices,segments\r\ndef feature_extraction(texts):\r\n  return_values = []\r\n  for text_ in texts:\r\n    try:\r\n      text_.split(\" \")\r\n    except AttributeError as e:\r\n      raise TypeError(\"Expected array of strings.\")\r\n    try:\r\n      indices,segments = tokenize(text_)\r\n      predicts = model.predict([np.array([indices] * 8), np.array([segments] * 8)])[0]\r\n      return_values.append(predicts)\r\n    except ValueError as v:\r\n      print(v)\r\n  return_values = np.array(return_values)\r\n  return return_values\r\nprint(feature_extraction(text_array).shape)\r\ndef batch_generator(dataframe,batch_size):\r\n  while True:\r\n    batch = dataframe.sample(n=batch_size)\r\n    try:\r\n      batch_features = feature_extraction(batch[\"question\"].values)\r\n    except ValueError as v:\r\n      print(\"Oops, I'm getting a ValueError for batch_features.\")\r\n      print(v)\r\n    try:\r\n      batch_targets = batch[\"answer_start\"]\r\n    except ValueError as v:\r\n      print(\"Oops, I'm getting a ValueError for batch_targets.\")\r\n      print(v)\r\n\r\n    yield batch_features,batch_targets\r\nThis works when I feed it test data:\r\n\r\ndef batch_generator(dataframe,batch_size):\r\n  while True:\r\n    batch = dataframe.sample(n=batch_size)\r\n    try:\r\n      batch_features = feature_extraction(batch[\"question\"].values)\r\n    except ValueError as v:\r\n      print(\"Oops, I'm getting a ValueError for batch_features.\")\r\n      print(v)\r\n    try:\r\n      batch_targets = batch[\"answer_start\"]\r\n    except ValueError as v:\r\n      print(\"Oops, I'm getting a ValueError for batch_targets.\")\r\n      print(v)\r\n\r\n    yield batch_features,batch_targets\r\nThis works when I use this test code:\r\n\r\ntestDataframe = pd.DataFrame({\"question\":[\"Does she sell seashells by the seashore?\"],\"answer\":[\"She sells seashells by the seashore\"],\"answer_start\":[0]})\r\nfor x,y in batch_generator(testDataframe,1):\r\n  print (x)\r\n  print (y)\r\n  break\r\nOutput:\r\n\r\n[[[-0.11251544 -0.09277309 0.04996187 ... -0.43535435 0.23852573 0.3206718 ] [ 0.35688528 0.43881682 -0.1390086 ... -0.32458037 0.64422214 -0.11743623] [ 0.6213926 -0.9945548 0.07564903 ... -0.87357795 0.2069801 -0.25303575] ... [-0.06796454 -0.24819699 -0.25508618 ... 0.20477912 0.36703664 0.04691853] [ 0.15030818 -0.05989693 0.17198643 ... 0.19960165 0.0324061 -0.31075317] [ 0.05091426 -0.14167279 0.18194658 ... 0.12112649 0.05029908 -0.15253511]]] 0 0 Name: answer_start, dtype: int64\r\n\r\nI create and compile my neural network and inputs like so:\r\n\r\nimport json\r\nimport re\r\n#regex = re.compile(r'\\W+')\r\ndef readFile(filename):\r\n  with open(filename) as file:\r\n    fields = []\r\n    JSON = json.loads(file.read())\r\n    articles = []\r\n    for article in JSON[\"data\"]:\r\n      articleTitle = article[\"title\"]\r\n      article_body = []\r\n      for paragraph in article[\"paragraphs\"]:\r\n        paragraphContext = paragraph[\"context\"]\r\n        article_body.append(paragraphContext)\r\n        for qas in paragraph[\"qas\"]:\r\n          question = qas[\"question\"]\r\n          answer = qas[\"answers\"][0]\r\n      article_body = \"\\\\n\".join(article_body)\r\n      article = {\"title\":articleTitle,\"body\":article_body}\r\n      articles.append(article)\r\n  fields = pd.DataFrame(fields)\r\n  #fields[\"question\"] = fields[\"question\"].str.replace(regex,\" \")\r\n  assert not (fields[\"question\"].str.contains(\"catalanswhat\").any())\r\n  #fields[\"paragraph_context\"] = fields[\"paragraph_context\"].str.replace(regex,\" \")\r\n  #fields[\"answer_text\"] = fields[\"answer_text\"].str.replace(regex,\" \")\r\n  assert not (fields[\"paragraph_context\"].str.contains(\"catalanswhat\").any())\r\n  fields[\"article_title\"] = fields[\"article_title\"].str.replace(\"_\",\" \")\r\n  assert not (fields[\"article_title\"].str.contains(\"catalanswhat\").any())\r\n  return fields\r\ntrainingData = readFile(\"train-v1.1.json\")\r\nanswers_network = Sequential()\r\nanswers_network.add(Dense(32,input_shape=(512,768)))\r\nanswers_network.summary()\r\nanswers_network.compile(\"rmsprop\",\"categorical_crossentropy\")\r\nanswers_network_checkpoint = ModelCheckpoint('answers_network-rnn-best.h5', verbose=1, monitor='val_loss',save_best_only=True, mode='auto')\r\nanswers_network.fit_generator(batch_generator(trainingData[[\"question\",\"paragraph_context\",\"answer_start\"]],100),steps_per_epoch=8)\r\nThis fails with an error:\r\n\r\nTensor Input-Token:0, specified in either feed_devices or fetch_devices was not found in the Graph\r\n\r\nNow, Input-Token is the name of one of the input layers in the BERT model.\r\n\r\nI think TensorFlow is suggesting that the BERT model is using a different graph than my model.\r\n\r\nHow do I fix this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/131", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/131/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/131/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/131", "id": 487209820, "node_id": "MDU6SXNzdWU0ODcyMDk4MjA=", "number": 131, "title": "Self-Attention Mask", "user": {"login": "Azharo", "id": 25023182, "node_id": "MDQ6VXNlcjI1MDIzMTgy", "avatar_url": "https://avatars1.githubusercontent.com/u/25023182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Azharo", "html_url": "https://github.com/Azharo", "followers_url": "https://api.github.com/users/Azharo/followers", "following_url": "https://api.github.com/users/Azharo/following{/other_user}", "gists_url": "https://api.github.com/users/Azharo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Azharo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Azharo/subscriptions", "organizations_url": "https://api.github.com/users/Azharo/orgs", "repos_url": "https://api.github.com/users/Azharo/repos", "events_url": "https://api.github.com/users/Azharo/events{/privacy}", "received_events_url": "https://api.github.com/users/Azharo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-29T22:53:11Z", "updated_at": "2019-09-07T01:04:14Z", "closed_at": "2019-09-07T01:04:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I noticed that there doesn't seem to be a self-attention mask as an input layer? Isn't the attention mask needed so that the transformers don't attend to [PAD] tokens?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/130", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/130/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/130/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/130/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/130", "id": 485647539, "node_id": "MDU6SXNzdWU0ODU2NDc1Mzk=", "number": 130, "title": "padding\u5bf9\u7ed3\u679c\u7684\u5f71\u54cd", "user": {"login": "bojone", "id": 9159613, "node_id": "MDQ6VXNlcjkxNTk2MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9159613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bojone", "html_url": "https://github.com/bojone", "followers_url": "https://api.github.com/users/bojone/followers", "following_url": "https://api.github.com/users/bojone/following{/other_user}", "gists_url": "https://api.github.com/users/bojone/gists{/gist_id}", "starred_url": "https://api.github.com/users/bojone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bojone/subscriptions", "organizations_url": "https://api.github.com/users/bojone/orgs", "repos_url": "https://api.github.com/users/bojone/repos", "events_url": "https://api.github.com/users/bojone/events{/privacy}", "received_events_url": "https://api.github.com/users/bojone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-27T07:56:05Z", "updated_at": "2019-08-29T09:03:34Z", "closed_at": "2019-08-29T09:03:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\u8fd9\u4e24\u5929\u6211\u81ea\u5df1\u4e5f\u5b9e\u73b0\u4e86\u4e00\u4e2abert4keras\uff08 https://github.com/bojone/bert4keras \uff09\uff0c\u53c2\u8003\u4e86\u4e0d\u5c11\u5927\u4f6c\u7684\u6e90\u7801\uff0c\u5728\u6b64\u5148\u611f\u8c22\u4e00\u4e0b\u3002\r\n\r\n\u5728\u6d4b\u8bd5\u4e4b\u4e2d\u6211\u610f\u5916\u53d1\u73b0\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0c\u8fd9\u4e2a\u95ee\u9898\u5728\u4f60\u6211\u7684\u5b9e\u73b0\u4e2d\u90fd\u5b58\u5728\uff0c\u5c31\u662f\u5e8f\u5217padding\u76840\u7684\u6570\u76ee\u4f1a\u8f7b\u5fae\u5f71\u54cd\u5e8f\u5217\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u4e5f\u5c31\u662f\u8bf4[1, 2, 3, 0, 0]\u8ddf[1, 2, 3, 0, 0, 0, 0, 0]\u7ecf\u8fc7encode\u540e\uff0c\u524d\u51e0\u9879\u90fd\u662f\u6709\u5dee\u522b\u7684\uff0c\u5dee\u522b\u57281e-5\u5de6\u53f3\u3002\r\n\r\n\u8fd9\u95ee\u9898\u4e5f\u4e0d\u5927\uff0c\u53ea\u662f\u597d\u5947\u8fd9\u4e2a\u5dee\u522b\u7684\u6765\u6e90\uff0c\u6bd5\u7adf\u7406\u8bba\u4e0apadding\u7684\u6548\u5e94\u5df2\u7ecf\u88abmask\u6389\u4e86", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/129", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/129/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/129/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/129", "id": 485146670, "node_id": "MDU6SXNzdWU0ODUxNDY2NzA=", "number": 129, "title": "\u5173\u4e8egelu\u5b9e\u73b0\u7684\u5dee\u5f02", "user": {"login": "bojone", "id": 9159613, "node_id": "MDQ6VXNlcjkxNTk2MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9159613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bojone", "html_url": "https://github.com/bojone", "followers_url": "https://api.github.com/users/bojone/followers", "following_url": "https://api.github.com/users/bojone/following{/other_user}", "gists_url": "https://api.github.com/users/bojone/gists{/gist_id}", "starred_url": "https://api.github.com/users/bojone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bojone/subscriptions", "organizations_url": "https://api.github.com/users/bojone/orgs", "repos_url": "https://api.github.com/users/bojone/repos", "events_url": "https://api.github.com/users/bojone/events{/privacy}", "received_events_url": "https://api.github.com/users/bojone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-26T09:43:06Z", "updated_at": "2019-08-27T07:51:37Z", "closed_at": "2019-08-27T07:51:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\u6211\u53d1\u73b0\u4f60\u7684\u5b9e\u73b0\u4e4b\u4e2d\uff0c\u5982\u679c\u7528tensorflow\u540e\u7aef\u7684\u8bdd\uff0cgelu\u6fc0\u6d3b\u51fd\u6570\u662f\u7528tf\u81ea\u5e26\u7684erf\u51fd\u6570\u5b9e\u73b0\u7684\uff0c\u4f46\u662f\u6211\u770b\u4e86\u5b98\u65b9bert\u7684\u6e90\u7801\uff0c\u662f\u901a\u8fc7tanh\u6765\u8fd1\u4f3c\u7684\uff1ahttps://github.com/google-research/bert/blob/master/modeling.py#L264\r\n\r\n\u6211\u4e5f\u6bd4\u8f83\u8fc7\u4e24\u8005\u7684\u5dee\u5f02\uff0c\u53d1\u73b0\u5b83\u4eec\u7684\u8f93\u51fa\u4f1a\u5728\u5c0f\u6570\u70b9\u540e\u7b2c\u4e8c\u4e09\u4f4d\u5f00\u59cb\u51fa\u73b0\u5dee\u5f02\uff0c\u6240\u4ee5\u6211\u60f3\u8bf7\u6559\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\uff0c\u7a76\u7adf\u4f7f\u7528\u54ea\u4e2a\u7248\u672c\u597d\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/128", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/128/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/128/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/128", "id": 483999626, "node_id": "MDU6SXNzdWU0ODM5OTk2MjY=", "number": 128, "title": "\u60f3\u7cbe\u7b80\u6a21\u578b\uff0c\u628abert\u7684\u5c42\u6570\u964d\u4f4e\uff0c\u518d\u4eba\u5de5\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u6709\u76f8\u5e94\u7684Demo\u5417", "user": {"login": "li1191863273", "id": 21698414, "node_id": "MDQ6VXNlcjIxNjk4NDE0", "avatar_url": "https://avatars0.githubusercontent.com/u/21698414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/li1191863273", "html_url": "https://github.com/li1191863273", "followers_url": "https://api.github.com/users/li1191863273/followers", "following_url": "https://api.github.com/users/li1191863273/following{/other_user}", "gists_url": "https://api.github.com/users/li1191863273/gists{/gist_id}", "starred_url": "https://api.github.com/users/li1191863273/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/li1191863273/subscriptions", "organizations_url": "https://api.github.com/users/li1191863273/orgs", "repos_url": "https://api.github.com/users/li1191863273/repos", "events_url": "https://api.github.com/users/li1191863273/events{/privacy}", "received_events_url": "https://api.github.com/users/li1191863273/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-22T13:36:50Z", "updated_at": "2019-08-29T14:48:11Z", "closed_at": "2019-08-29T14:48:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u60f3\u7cbe\u7b80\u6a21\u578b\uff0c\u628abert\u7684\u5c42\u6570\u964d\u4f4e\uff0c\u518d\u4eba\u5de5\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u6709\u76f8\u5e94\u7684Demo\u5417", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/127", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/127/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/127/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/127", "id": 483529037, "node_id": "MDU6SXNzdWU0ODM1MjkwMzc=", "number": 127, "title": "MLM\u8bad\u7ec3\u7684\u673a\u5236", "user": {"login": "dengkunn", "id": 34706567, "node_id": "MDQ6VXNlcjM0NzA2NTY3", "avatar_url": "https://avatars2.githubusercontent.com/u/34706567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengkunn", "html_url": "https://github.com/dengkunn", "followers_url": "https://api.github.com/users/dengkunn/followers", "following_url": "https://api.github.com/users/dengkunn/following{/other_user}", "gists_url": "https://api.github.com/users/dengkunn/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengkunn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengkunn/subscriptions", "organizations_url": "https://api.github.com/users/dengkunn/orgs", "repos_url": "https://api.github.com/users/dengkunn/repos", "events_url": "https://api.github.com/users/dengkunn/events{/privacy}", "received_events_url": "https://api.github.com/users/dengkunn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-08-21T16:36:16Z", "updated_at": "2019-09-03T07:22:02Z", "closed_at": "2019-08-30T12:57:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \u60a8\u597d\uff01\u5982\u679c\u6211\u4eec\u505a\u9884\u8bad\u7ec3\u7684MLM\u4efb\u52a1\uff0c\u8bba\u6587\u4e2d\u662f\u8981\u6c42\u53ea\u9488\u5bf9\u8f93\u5165\u4e2d\u88abMask\u7684\u5b57\u6240\u5bf9\u5e94\u7684\u8f93\u51fa\u6c42Loss\uff0c\u505a\u68af\u5ea6\u4e0b\u964d\u6765\u4f18\u5316\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u5e94\u8be5\u662f\u9700\u8981\u7528\u5230\u3000masked_inputs\u8fd9\u4e2a\u8f93\u5165\uff0c\u7528\uff10\u6765\u906e\u853d\u6240\u5bf9\u5e94\u5b57\u7684\u8f93\u51fa\uff1b\u4ee3\u7801\u91cc\u4f3c\u4e4e\u6ca1\u6709\u5b9e\u73b0\u8fd9\u4e00\u529f\u80fd\uff0c\u4ee3\u7801\u4f3c\u4e4e\u662f\u9488\u5bf9\u6240\u6709\u975epadding\u7684\u5b57\u7684loss\u6765\u505a\u4f18\u5316\u7684?\u3000\u5982\u679c\u4ee3\u7801\u91cc\u6709\u5b9e\u73b0\uff0c\u9ebb\u70e6\u5e2e\u6307\u70b9\u4e0b\uff1b\u6216\u8005\u4e0d\u6309\u7167\u8bba\u6587\u5b9e\u73b0\u6709\u5176\u5b83\u7684\u8003\u8651\uff1f\u3000\u8c22\u8c22\uff01", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/125", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/125/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/125/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/125", "id": 483157433, "node_id": "MDU6SXNzdWU0ODMxNTc0MzM=", "number": 125, "title": "\u5173\u4e8eextract_embedding\u7684\u53e5\u5b50\u957f\u5ea6\u9650\u5236", "user": {"login": "jc-ryan", "id": 33245553, "node_id": "MDQ6VXNlcjMzMjQ1NTUz", "avatar_url": "https://avatars0.githubusercontent.com/u/33245553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jc-ryan", "html_url": "https://github.com/jc-ryan", "followers_url": "https://api.github.com/users/jc-ryan/followers", "following_url": "https://api.github.com/users/jc-ryan/following{/other_user}", "gists_url": "https://api.github.com/users/jc-ryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jc-ryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jc-ryan/subscriptions", "organizations_url": "https://api.github.com/users/jc-ryan/orgs", "repos_url": "https://api.github.com/users/jc-ryan/repos", "events_url": "https://api.github.com/users/jc-ryan/events{/privacy}", "received_events_url": "https://api.github.com/users/jc-ryan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-21T01:44:57Z", "updated_at": "2019-08-23T04:33:23Z", "closed_at": "2019-08-23T04:33:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u8bf7\u95ee\u4f7f\u7528extract_embedding\u63d0\u53d6\u53e5\u5b50\u7279\u5f81\u65f6\uff0c\u53e5\u5b50\u9ed8\u8ba4\u6700\u5927\u957f\u5ea6\u662f\u9650\u5236\u572825\u5417(\u6211\u8fd9\u8fb9\u5f97\u5230\u7684\u662f\u8fd9\u6837)\uff0c\u8bf7\u95ee\u6709\u4ec0\u4e48\u66f4\u6539\u6700\u5927\u957f\u5ea6\u7684\u65b9\u6cd5\u5417", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/123", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/123/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/123/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/123", "id": 482641359, "node_id": "MDU6SXNzdWU0ODI2NDEzNTk=", "number": 123, "title": "AttributeError: 'Dense' object has no attribute 'outbound_nodes'", "user": {"login": "Xiaoping777", "id": 54298181, "node_id": "MDQ6VXNlcjU0Mjk4MTgx", "avatar_url": "https://avatars0.githubusercontent.com/u/54298181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiaoping777", "html_url": "https://github.com/Xiaoping777", "followers_url": "https://api.github.com/users/Xiaoping777/followers", "following_url": "https://api.github.com/users/Xiaoping777/following{/other_user}", "gists_url": "https://api.github.com/users/Xiaoping777/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiaoping777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiaoping777/subscriptions", "organizations_url": "https://api.github.com/users/Xiaoping777/orgs", "repos_url": "https://api.github.com/users/Xiaoping777/repos", "events_url": "https://api.github.com/users/Xiaoping777/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiaoping777/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705541, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQx", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-08-20T04:45:09Z", "updated_at": "2019-08-23T04:33:16Z", "closed_at": "2019-08-23T04:33:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\nwhen run \"outputs = keras.layers.Dense(units=2, activation='softmax')(dense)\"\r\ngot error : AttributeError: 'Dense' object has no attribute 'outbound_nodes'\r\n\r\n**Version Info**\r\n\r\n* [X] I'm using the latest version\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nimport keras_bert\r\n\r\ninputs = model.inputs[:2]\r\ndense = model.get_layer('NSP-Dense').output\r\noutputs = keras.layers.Dense(units=2, activation='softmax')(dense)\r\n\r\npass\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/122", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/122/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/122/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/122", "id": 482092483, "node_id": "MDU6SXNzdWU0ODIwOTI0ODM=", "number": 122, "title": "\u83b7\u53d6\u5b57\u5411\u91cf", "user": {"login": "jc-ryan", "id": 33245553, "node_id": "MDQ6VXNlcjMzMjQ1NTUz", "avatar_url": "https://avatars0.githubusercontent.com/u/33245553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jc-ryan", "html_url": "https://github.com/jc-ryan", "followers_url": "https://api.github.com/users/jc-ryan/followers", "following_url": "https://api.github.com/users/jc-ryan/following{/other_user}", "gists_url": "https://api.github.com/users/jc-ryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jc-ryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jc-ryan/subscriptions", "organizations_url": "https://api.github.com/users/jc-ryan/orgs", "repos_url": "https://api.github.com/users/jc-ryan/repos", "events_url": "https://api.github.com/users/jc-ryan/events{/privacy}", "received_events_url": "https://api.github.com/users/jc-ryan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-19T03:55:03Z", "updated_at": "2019-08-19T04:07:05Z", "closed_at": "2019-08-19T04:07:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u8bf7\u95eekeras-Bert\u6709\u4ec0\u4e48\u63a5\u53e3\u53ef\u4ee5\u4e0d\u5fae\u8c03\u4ec5\u83b7\u53d6\u5b57\u5411\u91cf\u5417\uff08\u6216\u8005\u83b7\u53d6\u53ef\u4ee5\u7d22\u5f15\u5230\u5b57\u7684\u53e5\u5b50\u5411\u91cf\uff09\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/121", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/121/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/121/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/121", "id": 480323880, "node_id": "MDU6SXNzdWU0ODAzMjM4ODA=", "number": 121, "title": "How to get sequence output from bert model when training = True", "user": {"login": "ananya0112", "id": 1576620, "node_id": "MDQ6VXNlcjE1NzY2MjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1576620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ananya0112", "html_url": "https://github.com/ananya0112", "followers_url": "https://api.github.com/users/ananya0112/followers", "following_url": "https://api.github.com/users/ananya0112/following{/other_user}", "gists_url": "https://api.github.com/users/ananya0112/gists{/gist_id}", "starred_url": "https://api.github.com/users/ananya0112/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ananya0112/subscriptions", "organizations_url": "https://api.github.com/users/ananya0112/orgs", "repos_url": "https://api.github.com/users/ananya0112/repos", "events_url": "https://api.github.com/users/ananya0112/events{/privacy}", "received_events_url": "https://api.github.com/users/ananya0112/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-13T19:19:24Z", "updated_at": "2019-08-14T17:06:11Z", "closed_at": "2019-08-14T17:06:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "How to get sequence output when `training=True`, is it accurate to use  `bert.get_layer(\"Encoder-12-FeedForward-Norm\").output`?\r\n\r\nKindly help - Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/120", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/120/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/120/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/120", "id": 479510677, "node_id": "MDU6SXNzdWU0Nzk1MTA2Nzc=", "number": 120, "title": "just for chinese?", "user": {"login": "hshrimp", "id": 24310442, "node_id": "MDQ6VXNlcjI0MzEwNDQy", "avatar_url": "https://avatars0.githubusercontent.com/u/24310442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hshrimp", "html_url": "https://github.com/hshrimp", "followers_url": "https://api.github.com/users/hshrimp/followers", "following_url": "https://api.github.com/users/hshrimp/following{/other_user}", "gists_url": "https://api.github.com/users/hshrimp/gists{/gist_id}", "starred_url": "https://api.github.com/users/hshrimp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hshrimp/subscriptions", "organizations_url": "https://api.github.com/users/hshrimp/orgs", "repos_url": "https://api.github.com/users/hshrimp/repos", "events_url": "https://api.github.com/users/hshrimp/events{/privacy}", "received_events_url": "https://api.github.com/users/hshrimp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-12T07:53:35Z", "updated_at": "2019-08-19T09:39:25Z", "closed_at": "2019-08-19T09:39:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it this project just for chinese but english?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/119", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/119/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/119/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/119", "id": 479341196, "node_id": "MDU6SXNzdWU0NzkzNDExOTY=", "number": 119, "title": "EmbeddingSimilarity cause 'NoneType' object has no attribute '_inbound_nodes'", "user": {"login": "Atakey", "id": 29856062, "node_id": "MDQ6VXNlcjI5ODU2MDYy", "avatar_url": "https://avatars3.githubusercontent.com/u/29856062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Atakey", "html_url": "https://github.com/Atakey", "followers_url": "https://api.github.com/users/Atakey/followers", "following_url": "https://api.github.com/users/Atakey/following{/other_user}", "gists_url": "https://api.github.com/users/Atakey/gists{/gist_id}", "starred_url": "https://api.github.com/users/Atakey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Atakey/subscriptions", "organizations_url": "https://api.github.com/users/Atakey/orgs", "repos_url": "https://api.github.com/users/Atakey/repos", "events_url": "https://api.github.com/users/Atakey/events{/privacy}", "received_events_url": "https://api.github.com/users/Atakey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-11T07:21:35Z", "updated_at": "2019-08-11T12:33:20Z", "closed_at": "2019-08-11T12:33:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to implement a model that should use EmbeddingSimilarity ,but it caused 'NoneType' object has no attribute '_inbound_nodes'.\r\nI create a simple example:\r\n`\r\n```\r\nimport keras.backend as K\r\nfrom keras import Input, Model, losses\r\nfrom keras.layers import Embedding\r\nfrom keras.optimizers import SGD\r\n\r\nfrom BERT.transformer import EmbeddingSimilarity\r\n\r\nif __name__ == \"__main__\":\r\n    input = Input(shape=(256,))\r\n    word_Embedding = Embedding(1024, 256, input_length=256,\r\n                               mask_zero=False, trainable=True,\r\n                               name=\"Embedding-word\")\r\n    input_embedding = word_Embedding(input)\r\n    embed_weights = K.identity(word_Embedding.embeddings)\r\n    mlm_pred_layer = EmbeddingSimilarity(name='MLM-Sim')([input_embedding, embed_weights])\r\n\r\n    model = Model(inputs=input, outputs=mlm_pred_layer)\r\n    model.compile(optimizer=SGD(), loss=losses.sparse_categorical_crossentropy)\r\n```\r\n`\r\nError information:\r\n````\r\nUsing TensorFlow backend.\r\nWARNING:tensorflow:From G:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\nTraceback (most recent call last):\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 3326, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-2-3ba785bf2396>\", line 1, in <module>\r\n    runfile('G:/JupyterWorkSpace/InfosExtractor/code/BERT/AttrTest.py', wdir='G:/JupyterWorkSpace/InfosExtractor/code/BERT')\r\n  File \"G:\\PyCharm\\PyCharm 2018.3.4\\helpers\\pydev\\_pydev_bundle\\pydev_umd.py\", line 197, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"G:\\PyCharm\\PyCharm 2018.3.4\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"G:/JupyterWorkSpace/InfosExtractor/code/BERT/AttrTest.py\", line 17, in <module>\r\n    model = Model(inputs=input, outputs=mlm_pred_layer)\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\keras\\legacy\\interfaces.py\", line 91, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\keras\\engine\\network.py\", line 93, in __init__\r\n    self._init_graph_network(*args, **kwargs)\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\keras\\engine\\network.py\", line 231, in _init_graph_network\r\n    self.inputs, self.outputs)\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\keras\\engine\\network.py\", line 1366, in _map_graph_network\r\n    tensor_index=tensor_index)\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\keras\\engine\\network.py\", line 1353, in build_map\r\n    node_index, tensor_index)\r\n  File \"G:\\Anaconda3\\lib\\site-packages\\keras\\engine\\network.py\", line 1325, in build_map\r\n    node = layer._inbound_nodes[node_index]\r\nAttributeError: 'NoneType' object has no attribute '_inbound_nodes'\r\n````\r\n\r\nkeras==2.2.4\r\ntf ==1.13.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/118", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/118/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/118/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/118", "id": 478293938, "node_id": "MDU6SXNzdWU0NzgyOTM5Mzg=", "number": 118, "title": "\u9884\u8bad\u7ec3\u6a21\u578b\u4fdd\u5b58", "user": {"login": "Xiao-da-1", "id": 53893878, "node_id": "MDQ6VXNlcjUzODkzODc4", "avatar_url": "https://avatars3.githubusercontent.com/u/53893878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiao-da-1", "html_url": "https://github.com/Xiao-da-1", "followers_url": "https://api.github.com/users/Xiao-da-1/followers", "following_url": "https://api.github.com/users/Xiao-da-1/following{/other_user}", "gists_url": "https://api.github.com/users/Xiao-da-1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiao-da-1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiao-da-1/subscriptions", "organizations_url": "https://api.github.com/users/Xiao-da-1/orgs", "repos_url": "https://api.github.com/users/Xiao-da-1/repos", "events_url": "https://api.github.com/users/Xiao-da-1/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiao-da-1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-08T07:15:48Z", "updated_at": "2019-08-19T04:07:40Z", "closed_at": "2019-08-19T04:07:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u60a8\u597d\uff01\u6211\u60f3\u8bf7\u6559\u4e00\u4e0b\uff0c\u60a8\u7ed9\u7684\u4f8b\u5b50\u91cc\u9762\u201c\u8bad\u7ec3\u548c\u4f7f\u7528\u201d\u90e8\u5206\uff0c\u6ca1\u6709\u76f4\u63a5\u4fdd\u5b58\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u800c\u662f\u4f7f\u7528\u4e86inputs \u548coutput_layer\uff0c\u5982\u679c\u60f3\u8981\u4fdd\u5b58\u6210Bert\u90a3\u79cdbert_model.ckpt\u3001bert_config.json\u3001vocab.txt\u53ef\u4ee5\u5417\uff1f\u5982\u679c\u53ef\u4ee5\u5e94\u8be5\u600e\u4e48\u505a\u5462\uff1f\u9ebb\u70e6\u60a8\u5566~", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/117", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/117/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/117/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/117", "id": 476523243, "node_id": "MDU6SXNzdWU0NzY1MjMyNDM=", "number": 117, "title": "How to use adapters", "user": {"login": "MNCTTY", "id": 37251686, "node_id": "MDQ6VXNlcjM3MjUxNjg2", "avatar_url": "https://avatars0.githubusercontent.com/u/37251686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MNCTTY", "html_url": "https://github.com/MNCTTY", "followers_url": "https://api.github.com/users/MNCTTY/followers", "following_url": "https://api.github.com/users/MNCTTY/following{/other_user}", "gists_url": "https://api.github.com/users/MNCTTY/gists{/gist_id}", "starred_url": "https://api.github.com/users/MNCTTY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MNCTTY/subscriptions", "organizations_url": "https://api.github.com/users/MNCTTY/orgs", "repos_url": "https://api.github.com/users/MNCTTY/repos", "events_url": "https://api.github.com/users/MNCTTY/events{/privacy}", "received_events_url": "https://api.github.com/users/MNCTTY/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-04T07:14:47Z", "updated_at": "2019-08-11T08:19:22Z", "closed_at": "2019-08-11T08:19:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, @CyberZHG !\r\nI read about adapters in an article you attached to the tutorial, and understand the block of code in tutorial.\r\nBut I don't understand one thing: where we define for what task we train our model? \r\n\r\nMy version:\r\n\r\n1 we define a model with adapters and 'original' weights\r\n2 we add more layers for the specific task\r\n3 read and process data for this task\r\n4 do train and save weights\r\n...\r\n5 define a model with same adapters and saved previously weights, but not added layers\r\n6 add other layers for other specific task\r\n7 same\r\n8 same\r\n...\r\nsame\r\n\r\nDo I understand this pipeline correctly?\r\nOr we not need to add new layers at all and can use only adapters between old layers? But how to know then what kind of configuration I should use for every of tasks?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/116", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/116/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/116/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/116", "id": 476390781, "node_id": "MDU6SXNzdWU0NzYzOTA3ODE=", "number": 116, "title": "TypeError: get_encoders() got an unexpected keyword argument 'use_adapter'", "user": {"login": "MNCTTY", "id": 37251686, "node_id": "MDQ6VXNlcjM3MjUxNjg2", "avatar_url": "https://avatars0.githubusercontent.com/u/37251686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MNCTTY", "html_url": "https://github.com/MNCTTY", "followers_url": "https://api.github.com/users/MNCTTY/followers", "following_url": "https://api.github.com/users/MNCTTY/following{/other_user}", "gists_url": "https://api.github.com/users/MNCTTY/gists{/gist_id}", "starred_url": "https://api.github.com/users/MNCTTY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MNCTTY/subscriptions", "organizations_url": "https://api.github.com/users/MNCTTY/orgs", "repos_url": "https://api.github.com/users/MNCTTY/repos", "events_url": "https://api.github.com/users/MNCTTY/events{/privacy}", "received_events_url": "https://api.github.com/users/MNCTTY/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705541, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQx", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-02T23:44:29Z", "updated_at": "2020-08-03T07:04:53Z", "closed_at": "2019-08-03T07:26:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nimport os\r\nfrom keras_bert import load_trained_model_from_checkpoint\r\n\r\nlayer_num = 12\r\ncheckpoint_path = 'rubert_cased_L-12_H-768_A-12_v1'\r\n\r\nconfig_path = os.path.join(checkpoint_path, 'bert_config.json')\r\nmodel_path = os.path.join(checkpoint_path, 'bert_model.ckpt')\r\nmodel = load_trained_model_from_checkpoint(\r\n    config_path,\r\n    model_path,\r\n    training=False,\r\n    use_adapter=True,\r\n    trainable=['Encoder-{}-MultiHeadSelfAttention-Adapter'.format(i + 1) for i in range(layer_num)] +\r\n    ['Encoder-{}-FeedForward-Adapter'.format(i + 1) for i in range(layer_num)] +\r\n    ['Encoder-{}-MultiHeadSelfAttention-Norm'.format(i + 1) for i in range(layer_num)] +\r\n    ['Encoder-{}-FeedForward-Norm'.format(i + 1) for i in range(layer_num)],\r\n)\r\n\r\n```\r\nI try to run this code from tutorial\r\nand this error arises:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-23-a18dfbad0880> in <module>\r\n     15     ['Encoder-{}-FeedForward-Adapter'.format(i + 1) for i in range(layer_num)] +\r\n     16     ['Encoder-{}-MultiHeadSelfAttention-Norm'.format(i + 1) for i in range(layer_num)] +\r\n---> 17     ['Encoder-{}-FeedForward-Norm'.format(i + 1) for i in range(layer_num)],\r\n     18 )\r\n\r\nTypeError: load_trained_model_from_checkpoint() got an unexpected keyword argument 'use_adapter'\r\n```\r\nBy the way, i tried to upgrade keras-transformers - it didnt help", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/114", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/114/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/114/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/114", "id": 474995745, "node_id": "MDU6SXNzdWU0NzQ5OTU3NDU=", "number": 114, "title": "TypeError: get_encoders() got an unexpected keyword argument 'use_adapter'", "user": {"login": "nwth", "id": 11645755, "node_id": "MDQ6VXNlcjExNjQ1NzU1", "avatar_url": "https://avatars1.githubusercontent.com/u/11645755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nwth", "html_url": "https://github.com/nwth", "followers_url": "https://api.github.com/users/nwth/followers", "following_url": "https://api.github.com/users/nwth/following{/other_user}", "gists_url": "https://api.github.com/users/nwth/gists{/gist_id}", "starred_url": "https://api.github.com/users/nwth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nwth/subscriptions", "organizations_url": "https://api.github.com/users/nwth/orgs", "repos_url": "https://api.github.com/users/nwth/repos", "events_url": "https://api.github.com/users/nwth/events{/privacy}", "received_events_url": "https://api.github.com/users/nwth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-31T08:04:22Z", "updated_at": "2020-08-03T07:14:41Z", "closed_at": "2019-08-01T02:18:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "get_model(token_num, pos_num, seq_len, embed_dim, transformer_num, head_num, feed_forward_dim, dropout_rate, attention_activation, feed_forward_activation, training, trainable, output_layer_num, use_adapter, adapter_units)\r\n    115         # use_adapter=use_adapter,\r\n    116         adapter_units=adapter_units,\r\n--> 117         adapter_activation=gelu,\r\n    118     )\r\n    119     if training:\r\nTypeError: get_encoders() got an unexpected keyword argument 'use_adapter'\r\n\r\nhi,i always get this error when i run the demo code!\r\nHow to fix this ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/112", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/112/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/112/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/112", "id": 474536964, "node_id": "MDU6SXNzdWU0NzQ1MzY5NjQ=", "number": 112, "title": "Questions about how to embedding the sentence ?", "user": {"login": "yananchen1989", "id": 26405281, "node_id": "MDQ6VXNlcjI2NDA1Mjgx", "avatar_url": "https://avatars2.githubusercontent.com/u/26405281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yananchen1989", "html_url": "https://github.com/yananchen1989", "followers_url": "https://api.github.com/users/yananchen1989/followers", "following_url": "https://api.github.com/users/yananchen1989/following{/other_user}", "gists_url": "https://api.github.com/users/yananchen1989/gists{/gist_id}", "starred_url": "https://api.github.com/users/yananchen1989/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yananchen1989/subscriptions", "organizations_url": "https://api.github.com/users/yananchen1989/orgs", "repos_url": "https://api.github.com/users/yananchen1989/repos", "events_url": "https://api.github.com/users/yananchen1989/events{/privacy}", "received_events_url": "https://api.github.com/users/yananchen1989/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-30T11:45:51Z", "updated_at": "2019-08-06T12:19:42Z", "closed_at": "2019-08-06T12:19:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\ndef embed_by_bert(title_):\r\n    indices, segments = tokenizer.encode(first=title_.decode('utf-8'), max_len=20)\r\n    predicts = model_bert.predict([np.array([indices]), np.array([segments])])[0].mean(axis=1)\r\n    return list(predicts)\r\n\r\nIn [25]: title_\r\nOut[25]: 'anthony joshua offer million join ufc joshua accept'\r\n```\r\n`**sta = embed_by_bert(title_)**`\r\nHere is my code just like your demo. And sta is a list of size 20, that equals to max_len.  \r\nSo I guess that the predict function only return the embeddings of the sep words. That's fine.\r\n\r\nIs there any control params that can make the `predict` send out the embedding of the whole title?\r\nFor example, some embedding from the last or inter layer of bert model ? In that way, there is no need for me to process these embeddings of words again. That would be a direct way.\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/111", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/111/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/111/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/111", "id": 473560405, "node_id": "MDU6SXNzdWU0NzM1NjA0MDU=", "number": 111, "title": "Which layer is equivalent to \"sequence_output\" from https://github.com/google-research/bert/blob/master/run_classifier.py", "user": {"login": "ananya0112", "id": 1576620, "node_id": "MDQ6VXNlcjE1NzY2MjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1576620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ananya0112", "html_url": "https://github.com/ananya0112", "followers_url": "https://api.github.com/users/ananya0112/followers", "following_url": "https://api.github.com/users/ananya0112/following{/other_user}", "gists_url": "https://api.github.com/users/ananya0112/gists{/gist_id}", "starred_url": "https://api.github.com/users/ananya0112/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ananya0112/subscriptions", "organizations_url": "https://api.github.com/users/ananya0112/orgs", "repos_url": "https://api.github.com/users/ananya0112/repos", "events_url": "https://api.github.com/users/ananya0112/events{/privacy}", "received_events_url": "https://api.github.com/users/ananya0112/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-26T22:41:36Z", "updated_at": "2019-08-05T21:21:36Z", "closed_at": "2019-08-05T21:21:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to use the sequence output of the BERT model as a custom layer to my regression model when `training=True`. i.e. I would like to use this as an embedding layer, while fine-tuning the BERT model. This is specifically for the `STS-B` task.\r\n\r\nI believe from your demo, that `NSP-Dense` is the equivalent of `get_pooled_output()` from `run_classifier.py`, please correct me if I am wrong i.e. `[CLS]`.\r\n\r\nIf `training = False`, I understand that `model.output` = `get_sequence_output()`.\r\n\r\nCan you please help me with which layer I must use to get the `sequence output` in my model when `training = True`, as I would like to then feed this output to an LSTM.\r\n\r\nI see in issue https://github.com/CyberZHG/keras-bert/issues/19#issue-414040554 that layer [-9] is used, would this be the right one to use.\r\n\r\nOr should I simply extract the output of layer `Encoder-12-FeedForward-Norm` from the BERT model and feed this to the LSTM i.e. use `bert.get_layer(\"Encoder-12-FeedForward-Norm\").output`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/110", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/110/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/110/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/110", "id": 472883685, "node_id": "MDU6SXNzdWU0NzI4ODM2ODU=", "number": 110, "title": "While adding Keras layesr to the model, getting masked input error ", "user": {"login": "rajeshkumargp", "id": 10574181, "node_id": "MDQ6VXNlcjEwNTc0MTgx", "avatar_url": "https://avatars1.githubusercontent.com/u/10574181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajeshkumargp", "html_url": "https://github.com/rajeshkumargp", "followers_url": "https://api.github.com/users/rajeshkumargp/followers", "following_url": "https://api.github.com/users/rajeshkumargp/following{/other_user}", "gists_url": "https://api.github.com/users/rajeshkumargp/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajeshkumargp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajeshkumargp/subscriptions", "organizations_url": "https://api.github.com/users/rajeshkumargp/orgs", "repos_url": "https://api.github.com/users/rajeshkumargp/repos", "events_url": "https://api.github.com/users/rajeshkumargp/events{/privacy}", "received_events_url": "https://api.github.com/users/rajeshkumargp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705537, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM3", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-25T14:00:57Z", "updated_at": "2019-08-02T03:50:14Z", "closed_at": "2019-08-02T03:50:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "While adding Keras layesr to the model, getting masked input error .\r\n\r\nHow to fix this ? \r\n\r\nPlease find  details here #104", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/109", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/109/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/109/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/109", "id": 471757706, "node_id": "MDU6SXNzdWU0NzE3NTc3MDY=", "number": 109, "title": "\u00a0running tutorial from the project description, i only train NSP or masked LM too?", "user": {"login": "MNCTTY", "id": 37251686, "node_id": "MDQ6VXNlcjM3MjUxNjg2", "avatar_url": "https://avatars0.githubusercontent.com/u/37251686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MNCTTY", "html_url": "https://github.com/MNCTTY", "followers_url": "https://api.github.com/users/MNCTTY/followers", "following_url": "https://api.github.com/users/MNCTTY/following{/other_user}", "gists_url": "https://api.github.com/users/MNCTTY/gists{/gist_id}", "starred_url": "https://api.github.com/users/MNCTTY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MNCTTY/subscriptions", "organizations_url": "https://api.github.com/users/MNCTTY/orgs", "repos_url": "https://api.github.com/users/MNCTTY/repos", "events_url": "https://api.github.com/users/MNCTTY/events{/privacy}", "received_events_url": "https://api.github.com/users/MNCTTY/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-07-23T15:14:12Z", "updated_at": "2019-08-15T17:21:24Z", "closed_at": "2019-08-15T17:21:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I have one question, may be I don't understand something\r\nWhen I use example from this tutorial https://pypi.org/project/keras-bert/ , is the model only learns next sentence prediction task, or masked lm task too? \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/108", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/108/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/108/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/108", "id": 470962594, "node_id": "MDU6SXNzdWU0NzA5NjI1OTQ=", "number": 108, "title": " using bert pretrainning there are so many trainable params?", "user": {"login": "liuchenbaidu", "id": 20473182, "node_id": "MDQ6VXNlcjIwNDczMTgy", "avatar_url": "https://avatars2.githubusercontent.com/u/20473182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuchenbaidu", "html_url": "https://github.com/liuchenbaidu", "followers_url": "https://api.github.com/users/liuchenbaidu/followers", "following_url": "https://api.github.com/users/liuchenbaidu/following{/other_user}", "gists_url": "https://api.github.com/users/liuchenbaidu/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuchenbaidu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuchenbaidu/subscriptions", "organizations_url": "https://api.github.com/users/liuchenbaidu/orgs", "repos_url": "https://api.github.com/users/liuchenbaidu/repos", "events_url": "https://api.github.com/users/liuchenbaidu/events{/privacy}", "received_events_url": "https://api.github.com/users/liuchenbaidu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-22T08:30:40Z", "updated_at": "2019-08-02T04:50:14Z", "closed_at": "2019-08-02T04:50:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "i imitate keras-bert/demo/tune/keras_bert_classification_tpu.ipynb for test classfication in GPU.then\r\ni get the params:\r\nTotal params: 101,973,890\r\nTrainable params: 101,973,890\r\nafter one epoch,the acc is 0.89\r\n\r\nif i frozening the bert_model params, the params is :\r\nTotal params: 101,973,890\r\nTrainable params: 283,890\r\nafter one epoch,the acc is 0.15 \r\n\r\nwhy does it happend?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/107", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/107/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/107/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/107", "id": 470879472, "node_id": "MDU6SXNzdWU0NzA4Nzk0NzI=", "number": 107, "title": "when running over model.fit  in gpu,the memory in the gpu isn't clear", "user": {"login": "liuchenbaidu", "id": 20473182, "node_id": "MDQ6VXNlcjIwNDczMTgy", "avatar_url": "https://avatars2.githubusercontent.com/u/20473182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuchenbaidu", "html_url": "https://github.com/liuchenbaidu", "followers_url": "https://api.github.com/users/liuchenbaidu/followers", "following_url": "https://api.github.com/users/liuchenbaidu/following{/other_user}", "gists_url": "https://api.github.com/users/liuchenbaidu/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuchenbaidu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuchenbaidu/subscriptions", "organizations_url": "https://api.github.com/users/liuchenbaidu/orgs", "repos_url": "https://api.github.com/users/liuchenbaidu/repos", "events_url": "https://api.github.com/users/liuchenbaidu/events{/privacy}", "received_events_url": "https://api.github.com/users/liuchenbaidu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-22T03:52:23Z", "updated_at": "2019-07-22T06:51:49Z", "closed_at": "2019-07-22T06:51:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "when running over model.fit  in gpu,the memory in the gpu isn't clear", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/106", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/106/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/106/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/106", "id": 470149770, "node_id": "MDU6SXNzdWU0NzAxNDk3NzA=", "number": 106, "title": "extract_embeddings significantly slower than the pytorch version ", "user": {"login": "albertnanda", "id": 20819507, "node_id": "MDQ6VXNlcjIwODE5NTA3", "avatar_url": "https://avatars0.githubusercontent.com/u/20819507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertnanda", "html_url": "https://github.com/albertnanda", "followers_url": "https://api.github.com/users/albertnanda/followers", "following_url": "https://api.github.com/users/albertnanda/following{/other_user}", "gists_url": "https://api.github.com/users/albertnanda/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertnanda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertnanda/subscriptions", "organizations_url": "https://api.github.com/users/albertnanda/orgs", "repos_url": "https://api.github.com/users/albertnanda/repos", "events_url": "https://api.github.com/users/albertnanda/events{/privacy}", "received_events_url": "https://api.github.com/users/albertnanda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-19T05:50:34Z", "updated_at": "2019-07-26T07:05:45Z", "closed_at": "2019-07-26T07:05:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nextract_embeddings is painfully slow - document size - 700 words. I am preloading the model and vocab, but still it's orders of magnitude slower than pytorch version. \r\n\r\nThanks,\r\nAN", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/104", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/104/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/104/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/104", "id": 468488798, "node_id": "MDU6SXNzdWU0Njg0ODg3OTg=", "number": 104, "title": "Getting error while adding convolution Layer conv1d_1 does not support masking", "user": {"login": "rajeshkumargp", "id": 10574181, "node_id": "MDQ6VXNlcjEwNTc0MTgx", "avatar_url": "https://avatars1.githubusercontent.com/u/10574181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajeshkumargp", "html_url": "https://github.com/rajeshkumargp", "followers_url": "https://api.github.com/users/rajeshkumargp/followers", "following_url": "https://api.github.com/users/rajeshkumargp/following{/other_user}", "gists_url": "https://api.github.com/users/rajeshkumargp/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajeshkumargp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajeshkumargp/subscriptions", "organizations_url": "https://api.github.com/users/rajeshkumargp/orgs", "repos_url": "https://api.github.com/users/rajeshkumargp/repos", "events_url": "https://api.github.com/users/rajeshkumargp/events{/privacy}", "received_events_url": "https://api.github.com/users/rajeshkumargp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-16T07:17:30Z", "updated_at": "2019-07-23T08:06:45Z", "closed_at": "2019-07-23T08:06:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying for CNN by Yoon Kim, with BERT encoding as features. \r\nTrying for the similar model https://github.com/inspirehep/magpie.\r\n\r\nMy intention is to build model\r\n    keras-bert(without training) on pretrained model and \r\n    keras-bert.model's output is fed to Convolution for various grams. \r\n\r\n\r\nCode snippet is as below:\r\n\r\n`import keras`\r\n`import sys`\r\n`import numpy as np`\r\n`from keras_bert import load_vocabulary, load_trained_model_from_checkpoint, Tokenizer,` `get_checkpoint_paths`\r\n\r\n\r\n     \r\n`SEQ_LEN = 128`\r\n`BATCH_SIZE = 128`\r\n`EPOCHS = 5`\r\n`LR = 1e-4`\r\n\r\n\r\n`def get_nn_model():`\r\n`  SEQ_LEN = SAMPLE_LENGTH = 128`\r\n`  BATCH_SIZE = 128`\r\n`  EPOCHS = 5`\r\n`  LR = 1e-4`\r\n`  output_length = 70`\r\n  \r\n`  pretrained_path = 'bert_model_base'`\r\n`  config_path = os.path.join(pretrained_path, 'bert_config.json')`\r\n`  checkpoint_path = os.path.join(pretrained_path, 'bert_model.ckpt')`\r\n`  vocab_path = os.path.join(pretrained_path, 'vocab.txt')`\r\n  \r\n`  model = load_trained_model_from_checkpoint(`\r\n`      config_path,`\r\n`      checkpoint_path,`\r\n`      training=False,`\r\n`      trainable=False,`\r\n`      seq_len=SEQ_LEN,`\r\n`      )`\r\n  \r\n`  NB_FILTER = 256`\r\n`  NGRAM_LENGTHS = [1, 2, 3, 4, 5]`\r\n`  conv_layers, inputs = [], []`\r\n`  for ngram_length in NGRAM_LENGTHS:`\r\n`    #current_input = Input(shape=(SAMPLE_LENGTH, embedding_size))`\r\n`    #inputs.append(current_input)`\r\n    \r\n`    convolution = keras.layers.Conv1D(`\r\n`        filters=NB_FILTER,`\r\n`        kernel_size=ngram_length,`\r\n`        kernel_initializer='lecun_uniform',`\r\n`        activation='tanh',`\r\n`        )(model.output)`\r\n\r\n`    pool_size = SAMPLE_LENGTH - ngram_length + 1`\r\n`    pooling = MaxPooling1D(pool_size=pool_size)(convolution)`\r\n`    conv_layers.append(pooling)`\r\n\r\n`  merged = Concatenate()(conv_layers)`\r\n`  print('merged',merged.shape)`\r\n`  dropout = Dropout(0.5)(merged)`\r\n`  print('dropout',dropout.shape)`\r\n`  flattened = Flatten()(dropout)`\r\n`  print('flattened',flattened.shape)`\r\n  \r\n`  outputs = Dense(output_length, activation='sigmoid')(flattened)`\r\n`  print('outputs',outputs.shape)`\r\n  \r\n`  fin_model = Model(inputs=model.input, outputs=outputs)`\r\n`  return fin_model`\r\n\r\n`km = get_nn_model()`\r\n\r\n\r\n\r\n\r\nWhile adding Convolution, I am getting error as if input is masked, and convolution cant be added. \r\n \r\nError: \r\n\r\n`Layer conv1d_1 does not support masking, but was passed an input_mask: Tensor(\"Encoder-12-FeedForward-Add_1/All:0\", shape=(?, 128), dtype=bool `\r\n \r\n\r\nCan you please guide how to proceed further. .\r\n\r\n\r\n\r\nAlso, I made a try using MaskedConv1D(provided in keras-bert), but the next layers getting failed. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/103", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/103/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/103/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/103", "id": 467413101, "node_id": "MDU6SXNzdWU0Njc0MTMxMDE=", "number": 103, "title": "\u4e66\u5199\u5931\u8bef", "user": {"login": "xiaoyichao", "id": 30403377, "node_id": "MDQ6VXNlcjMwNDAzMzc3", "avatar_url": "https://avatars0.githubusercontent.com/u/30403377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaoyichao", "html_url": "https://github.com/xiaoyichao", "followers_url": "https://api.github.com/users/xiaoyichao/followers", "following_url": "https://api.github.com/users/xiaoyichao/following{/other_user}", "gists_url": "https://api.github.com/users/xiaoyichao/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaoyichao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaoyichao/subscriptions", "organizations_url": "https://api.github.com/users/xiaoyichao/orgs", "repos_url": "https://api.github.com/users/xiaoyichao/repos", "events_url": "https://api.github.com/users/xiaoyichao/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaoyichao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-12T13:25:48Z", "updated_at": "2019-07-21T16:57:40Z", "closed_at": "2019-07-21T16:57:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e00\u4e2alist\uff0c\u957f\u5ea6\u548c\u8f93\u5165\u6587\u672c\u7684\u4e2a\u6570\u76f8\u540c\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662fnumpy\u7684\u6570\u7ec4\uff0c\u9ed8\u8ba4\u4f1a\u6839\u636e\u8f93\u51fa\u7684\u957f\u5ea6\u8fdb\u884c\u88c1\u526a\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u8f93\u51fa\u7684\u5927\u5c0f\u5206\u522b\u4e3a(8, 768)\u548c(9, 768)\u3002\r\n\r\n\u4e24\u4e2a\u5927\u5c0f\u5206\u522b\u662f(7, 768)\u548c(8, 768)\u3002", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/102", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/102/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/102/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/102", "id": 464911058, "node_id": "MDU6SXNzdWU0NjQ5MTEwNTg=", "number": 102, "title": "out_put_layer_num=1\u662f \u6700\u6df1\u7684\u6700\u540e\u4e00\u5c42\u8f93\u51fa \u8fd8\u662f\u7b2c\u4e00\u5c42\u8f93\u51fa", "user": {"login": "taichuai", "id": 44742469, "node_id": "MDQ6VXNlcjQ0NzQyNDY5", "avatar_url": "https://avatars2.githubusercontent.com/u/44742469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taichuai", "html_url": "https://github.com/taichuai", "followers_url": "https://api.github.com/users/taichuai/followers", "following_url": "https://api.github.com/users/taichuai/following{/other_user}", "gists_url": "https://api.github.com/users/taichuai/gists{/gist_id}", "starred_url": "https://api.github.com/users/taichuai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taichuai/subscriptions", "organizations_url": "https://api.github.com/users/taichuai/orgs", "repos_url": "https://api.github.com/users/taichuai/repos", "events_url": "https://api.github.com/users/taichuai/events{/privacy}", "received_events_url": "https://api.github.com/users/taichuai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-07T03:32:30Z", "updated_at": "2019-07-16T09:48:08Z", "closed_at": "2019-07-16T09:48:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u60a8\u597d\uff0c\u6709\u4e24\u4e2a\u95ee\u9898\uff1a\r\n1\u3001\u8c03\u7528\u6a21\u578b\u65f6\uff0cout_put_layer_num=1\u662f \u6700\u6df1\u7684\u6700\u540e\u4e00\u5c42\u8f93\u51fa \u8fd8\u662f\u7b2c\u4e00\u5c42\u8f93\u51fa\r\n2\u3001\u8bbe\u7f6e\u53effine_tune\u65f6\u5982\u3000bert_model.layers[1].trainable = True\uff0cbert_layers[0] = \u662fbert\u7684\u7b2c\u4e00\u5c42\u8f93\u51fa\u8fd8\u662f\u6700\u540e\u4e00\u5c42\u8f93\u51fa\r\n\u9ebb\u70e6\u80fd\u89e3\u7b54\u4e00\u4e0b\uff0c\u8c22\u8c22", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/101", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/101/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/101/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/101", "id": 464450234, "node_id": "MDU6SXNzdWU0NjQ0NTAyMzQ=", "number": 101, "title": "Error when execute TPU colab notebook", "user": {"login": "leemengtaiwan", "id": 3454980, "node_id": "MDQ6VXNlcjM0NTQ5ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/3454980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leemengtaiwan", "html_url": "https://github.com/leemengtaiwan", "followers_url": "https://api.github.com/users/leemengtaiwan/followers", "following_url": "https://api.github.com/users/leemengtaiwan/following{/other_user}", "gists_url": "https://api.github.com/users/leemengtaiwan/gists{/gist_id}", "starred_url": "https://api.github.com/users/leemengtaiwan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leemengtaiwan/subscriptions", "organizations_url": "https://api.github.com/users/leemengtaiwan/orgs", "repos_url": "https://api.github.com/users/leemengtaiwan/repos", "events_url": "https://api.github.com/users/leemengtaiwan/events{/privacy}", "received_events_url": "https://api.github.com/users/leemengtaiwan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-05T03:54:27Z", "updated_at": "2019-07-12T05:11:15Z", "closed_at": "2019-07-12T05:11:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the Bug**\r\n\r\n![image](https://user-images.githubusercontent.com/3454980/60697152-dfdd3a00-9f23-11e9-9af3-e8f56b8322d0.png)\r\n\r\nEncountered error when executing the above Colab notebook `classification_demo` listed in README:\r\n\r\n![image](https://user-images.githubusercontent.com/3454980/60697049-4f065e80-9f23-11e9-978e-664647b3c71e.png)\r\n\r\nThe notebook is not working anymore when trying to convert to TPU model, can you please show some direction for how to fix the error? Thanks so much for your contribution!\r\n\r\n\r\n**Version Info**\r\n\r\n* [x] I'm using the latest version\r\n* TensorFlow version: 1.14.0\r\n\r\n**Minimal Codes To Reproduce**\r\n\r\n```python\r\nwith tf.keras.utils.custom_object_scope(get_custom_objects()):\r\n    tpu_model = tf.contrib.tpu.keras_to_tpu_model(model, strategy=strategy)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/100", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/100/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/100/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/100", "id": 463902676, "node_id": "MDU6SXNzdWU0NjM5MDI2NzY=", "number": 100, "title": "Error while predicting using a saved model", "user": {"login": "devinharia", "id": 10565678, "node_id": "MDQ6VXNlcjEwNTY1Njc4", "avatar_url": "https://avatars2.githubusercontent.com/u/10565678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinharia", "html_url": "https://github.com/devinharia", "followers_url": "https://api.github.com/users/devinharia/followers", "following_url": "https://api.github.com/users/devinharia/following{/other_user}", "gists_url": "https://api.github.com/users/devinharia/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinharia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinharia/subscriptions", "organizations_url": "https://api.github.com/users/devinharia/orgs", "repos_url": "https://api.github.com/users/devinharia/repos", "events_url": "https://api.github.com/users/devinharia/events{/privacy}", "received_events_url": "https://api.github.com/users/devinharia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-07-03T18:47:22Z", "updated_at": "2019-09-13T19:58:18Z", "closed_at": "2019-07-16T12:41:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I saved the model using model.save() and then loaded it back in a fresh instance. I used 'custom_objects=get_custom_objects()' as well while loading the model. \r\n\r\nNow when I am predicting, I get the following error -\r\n'Error when checking model input: the list of Numpy arrays that you are passing to your model is not the size the model expected. Expected to see 2 array(s), but instead got the following list of 3 arrays'\r\n\r\nI did not get this error when I predicted after training the model. I see that if I remove the 'mask input' while predicting, I get back the original predictions, but ideally should not do so, any ideas why this might be happening?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/99", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/99/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/99/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/99", "id": 460053594, "node_id": "MDU6SXNzdWU0NjAwNTM1OTQ=", "number": 99, "title": "Has anyone managed to integrate this with the Tf.data dataset functions?", "user": {"login": "tinkermachine", "id": 29440958, "node_id": "MDQ6VXNlcjI5NDQwOTU4", "avatar_url": "https://avatars1.githubusercontent.com/u/29440958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinkermachine", "html_url": "https://github.com/tinkermachine", "followers_url": "https://api.github.com/users/tinkermachine/followers", "following_url": "https://api.github.com/users/tinkermachine/following{/other_user}", "gists_url": "https://api.github.com/users/tinkermachine/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinkermachine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinkermachine/subscriptions", "organizations_url": "https://api.github.com/users/tinkermachine/orgs", "repos_url": "https://api.github.com/users/tinkermachine/repos", "events_url": "https://api.github.com/users/tinkermachine/events{/privacy}", "received_events_url": "https://api.github.com/users/tinkermachine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-24T19:19:55Z", "updated_at": "2019-07-04T14:28:47Z", "closed_at": "2019-07-04T14:28:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Have anyone been able to use this repo with the from_tensor_slices function function from the Tf.data modeule? I keep ending up with a ValueError..\r\n\r\n`ValueError: Error when checking model input: the list of Numpy arrays that you are passing to your model is not the size the model expected. Expected to see 2 array(s), but instead got the following list of 1 arrays: [<tf.Tensor 'IteratorGetNext:0' shape=(?, 2, 128) dtype=int32>]...`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/98", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/98/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/98/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/98", "id": 459992379, "node_id": "MDU6SXNzdWU0NTk5OTIzNzk=", "number": 98, "title": "TypeError: ('Keyword argument not understood:', 'dropout_rate')", "user": {"login": "tinkermachine", "id": 29440958, "node_id": "MDQ6VXNlcjI5NDQwOTU4", "avatar_url": "https://avatars1.githubusercontent.com/u/29440958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinkermachine", "html_url": "https://github.com/tinkermachine", "followers_url": "https://api.github.com/users/tinkermachine/followers", "following_url": "https://api.github.com/users/tinkermachine/following{/other_user}", "gists_url": "https://api.github.com/users/tinkermachine/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinkermachine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinkermachine/subscriptions", "organizations_url": "https://api.github.com/users/tinkermachine/orgs", "repos_url": "https://api.github.com/users/tinkermachine/repos", "events_url": "https://api.github.com/users/tinkermachine/events{/privacy}", "received_events_url": "https://api.github.com/users/tinkermachine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-06-24T16:45:14Z", "updated_at": "2019-07-01T20:59:56Z", "closed_at": "2019-07-01T20:59:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Getting this error when loading an h5 model even after passing the get_Custom_objects() in the load function.\r\n\r\n`\r\nfrom tensorflow import keras\r\nkeras.models.load_model(checkpoint_path,custom_objects = get_custom_objects())`\r\n\r\nError is:\r\n`  packages\\tensorflow\\python\\keras\\utils\\generic_utils.py\", line 600, in validate_kwargs\r\n    raise TypeError(error_message, kwarg)\r\n**TypeError: ('Keyword argument not understood:', 'dropout_rate'**)`\r\n\r\nInteresting I never got this error before when I was running on just 1 epoch. But after fine-tuning over a large dataset and multiple epochs, I now get this error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/97", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/97/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/97/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/97", "id": 459797815, "node_id": "MDU6SXNzdWU0NTk3OTc4MTU=", "number": 97, "title": "how to get char vector of bert outputing\uff1fthanks", "user": {"login": "Chenny0808", "id": 32391740, "node_id": "MDQ6VXNlcjMyMzkxNzQw", "avatar_url": "https://avatars3.githubusercontent.com/u/32391740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chenny0808", "html_url": "https://github.com/Chenny0808", "followers_url": "https://api.github.com/users/Chenny0808/followers", "following_url": "https://api.github.com/users/Chenny0808/following{/other_user}", "gists_url": "https://api.github.com/users/Chenny0808/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chenny0808/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chenny0808/subscriptions", "organizations_url": "https://api.github.com/users/Chenny0808/orgs", "repos_url": "https://api.github.com/users/Chenny0808/repos", "events_url": "https://api.github.com/users/Chenny0808/events{/privacy}", "received_events_url": "https://api.github.com/users/Chenny0808/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-06-24T09:53:30Z", "updated_at": "2019-07-01T12:59:56Z", "closed_at": "2019-07-01T12:59:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/96", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/96/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/96/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/96", "id": 459724816, "node_id": "MDU6SXNzdWU0NTk3MjQ4MTY=", "number": 96, "title": "\u5728\u505a\u5206\u7c7b\u4efb\u52a1\u65f6\u7528\u81ea\u5df1\u7684\u6570\u636e\u8fc7\u62df\u5408\u4e86\uff0c\u6dfb\u52a0dropout\u6ca1\u6709\u6548\u679c", "user": {"login": "xxxxxxxxy", "id": 8981864, "node_id": "MDQ6VXNlcjg5ODE4NjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8981864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xxxxxxxxy", "html_url": "https://github.com/xxxxxxxxy", "followers_url": "https://api.github.com/users/xxxxxxxxy/followers", "following_url": "https://api.github.com/users/xxxxxxxxy/following{/other_user}", "gists_url": "https://api.github.com/users/xxxxxxxxy/gists{/gist_id}", "starred_url": "https://api.github.com/users/xxxxxxxxy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xxxxxxxxy/subscriptions", "organizations_url": "https://api.github.com/users/xxxxxxxxy/orgs", "repos_url": "https://api.github.com/users/xxxxxxxxy/repos", "events_url": "https://api.github.com/users/xxxxxxxxy/events{/privacy}", "received_events_url": "https://api.github.com/users/xxxxxxxxy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1097705545, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQ1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-24T07:06:22Z", "updated_at": "2019-07-01T12:59:57Z", "closed_at": "2019-07-01T12:59:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u53c2\u8003\u4e86\u4f5c\u8005keras_bert_classification_tpu.ipynb\u7684demo\uff0c\u7528\u81ea\u5df1\u7684\u6570\u636e\u8fdb\u884c\u4e86\u8bad\u7ec3\uff0c\u8bad\u7ec3\u96c69000\u6761\u6570\u636e\uff0c\u6d4b\u8bd5\u96c61000\u6761\u6570\u636e\uff0c\u8bad\u7ec3\u7cbe\u5ea699%\uff0c\u6d4b\u8bd5\u7cbe\u5ea679%. \u4e8e\u662f\u901a\u8fc7\u4ee5\u4e0b\u4ee3\u7801\u6dfb\u52a0\u4e860.5\u7684dropout\uff0c\u4f46\u662f\u7ed3\u679c\u4ecd\u65e7\u662f99%\u4e0e79%\u3002\u8bf7\u95ee\u662fdropout\u5bf9\u4e8ebert\u6ca1\u6709\u7528\uff0c\u8fd8\u662f\u8fd9\u79cd\u6dfb\u52a0dropout\u7684\u65b9\u5f0f\u6709\u95ee\u9898\u5462\uff1f\r\n```\r\ndense = model.get_layer('NSP-Dense').output\r\ndense = Dropout(DROPOUT)(dense)\r\noutputs = Dense(units=3, activation='softmax')(dense)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/95", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/95/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/95/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/95/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/95", "id": 459674992, "node_id": "MDU6SXNzdWU0NTk2NzQ5OTI=", "number": 95, "title": "Why does classification demo have 2 units in final Dense layer?", "user": {"login": "tinkermachine", "id": 29440958, "node_id": "MDQ6VXNlcjI5NDQwOTU4", "avatar_url": "https://avatars1.githubusercontent.com/u/29440958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinkermachine", "html_url": "https://github.com/tinkermachine", "followers_url": "https://api.github.com/users/tinkermachine/followers", "following_url": "https://api.github.com/users/tinkermachine/following{/other_user}", "gists_url": "https://api.github.com/users/tinkermachine/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinkermachine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinkermachine/subscriptions", "organizations_url": "https://api.github.com/users/tinkermachine/orgs", "repos_url": "https://api.github.com/users/tinkermachine/repos", "events_url": "https://api.github.com/users/tinkermachine/events{/privacy}", "received_events_url": "https://api.github.com/users/tinkermachine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705543, "node_id": "MDU6TGFiZWwxMDk3NzA1NTQz", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-06-24T03:54:08Z", "updated_at": "2019-08-20T04:39:00Z", "closed_at": "2019-06-24T19:21:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I thought the IMDB data set would simply have one label (a 0 for neg or a 1 for pos sentiment). So why do we have 2 units in the final dense layer? I don't believe we are one-hot encoding the labels...\r\n\r\n`outputs = keras.layers.Dense(units=2, activation='softmax')(dense)`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/94", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/94/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/94/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/94", "id": 459409118, "node_id": "MDU6SXNzdWU0NTk0MDkxMTg=", "number": 94, "title": "ValueError: Unknown initializer: GlorotNormal", "user": {"login": "tinkermachine", "id": 29440958, "node_id": "MDQ6VXNlcjI5NDQwOTU4", "avatar_url": "https://avatars1.githubusercontent.com/u/29440958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinkermachine", "html_url": "https://github.com/tinkermachine", "followers_url": "https://api.github.com/users/tinkermachine/followers", "following_url": "https://api.github.com/users/tinkermachine/following{/other_user}", "gists_url": "https://api.github.com/users/tinkermachine/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinkermachine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinkermachine/subscriptions", "organizations_url": "https://api.github.com/users/tinkermachine/orgs", "repos_url": "https://api.github.com/users/tinkermachine/repos", "events_url": "https://api.github.com/users/tinkermachine/events{/privacy}", "received_events_url": "https://api.github.com/users/tinkermachine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-06-22T00:00:16Z", "updated_at": "2019-06-22T03:32:25Z", "closed_at": "2019-06-22T03:32:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to load an h5 file built with keras-bert but getting this error\r\n\r\n**ValueError: Unknown initializer: GlorotNormal**\r\n\r\nThis is the code:\r\n`keras_model = tf.keras.models.load_model(\".\\h5models\\\\run1.h5\",custom_objects = get_custom_objects())`\r\n\r\nI am on Tensorflow 2.0.0 beta", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/92", "repository_url": "https://api.github.com/repos/CyberZHG/keras-bert", "labels_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/92/comments", "events_url": "https://api.github.com/repos/CyberZHG/keras-bert/issues/92/events", "html_url": "https://github.com/CyberZHG/keras-bert/issues/92", "id": 459107539, "node_id": "MDU6SXNzdWU0NTkxMDc1Mzk=", "number": 92, "title": "\u8fd0\u884cload_and_predict.py", "user": {"login": "a1312963", "id": 15373061, "node_id": "MDQ6VXNlcjE1MzczMDYx", "avatar_url": "https://avatars1.githubusercontent.com/u/15373061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a1312963", "html_url": "https://github.com/a1312963", "followers_url": "https://api.github.com/users/a1312963/followers", "following_url": "https://api.github.com/users/a1312963/following{/other_user}", "gists_url": "https://api.github.com/users/a1312963/gists{/gist_id}", "starred_url": "https://api.github.com/users/a1312963/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a1312963/subscriptions", "organizations_url": "https://api.github.com/users/a1312963/orgs", "repos_url": "https://api.github.com/users/a1312963/repos", "events_url": "https://api.github.com/users/a1312963/events{/privacy}", "received_events_url": "https://api.github.com/users/a1312963/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097705535, "node_id": "MDU6TGFiZWwxMDk3NzA1NTM1", "url": "https://api.github.com/repos/CyberZHG/keras-bert/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CyberZHG", "id": 853842, "node_id": "MDQ6VXNlcjg1Mzg0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/853842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyberZHG", "html_url": "https://github.com/CyberZHG", "followers_url": "https://api.github.com/users/CyberZHG/followers", "following_url": "https://api.github.com/users/CyberZHG/following{/other_user}", "gists_url": "https://api.github.com/users/CyberZHG/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyberZHG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyberZHG/subscriptions", "organizations_url": "https://api.github.com/users/CyberZHG/orgs", "repos_url": "https://api.github.com/users/CyberZHG/repos", "events_url": "https://api.github.com/users/CyberZHG/events{/privacy}", "received_events_url": "https://api.github.com/users/CyberZHG/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-06-21T09:37:16Z", "updated_at": "2019-06-22T03:32:21Z", "closed_at": "2019-06-22T03:32:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}]}