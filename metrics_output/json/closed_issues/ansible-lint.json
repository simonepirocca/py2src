{"total_count": 323, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ansible/ansible-lint/issues/981", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/981/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/981/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/981/events", "html_url": "https://github.com/ansible/ansible-lint/issues/981", "id": 683478322, "node_id": "MDU6SXNzdWU2ODM0NzgzMjI=", "number": 981, "title": "E208 should not trigger on symlinks", "user": {"login": "robinmulder", "id": 120075, "node_id": "MDQ6VXNlcjEyMDA3NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/120075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robinmulder", "html_url": "https://github.com/robinmulder", "followers_url": "https://api.github.com/users/robinmulder/followers", "following_url": "https://api.github.com/users/robinmulder/following{/other_user}", "gists_url": "https://api.github.com/users/robinmulder/gists{/gist_id}", "starred_url": "https://api.github.com/users/robinmulder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robinmulder/subscriptions", "organizations_url": "https://api.github.com/users/robinmulder/orgs", "repos_url": "https://api.github.com/users/robinmulder/repos", "events_url": "https://api.github.com/users/robinmulder/events{/privacy}", "received_events_url": "https://api.github.com/users/robinmulder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-21T10:57:10Z", "updated_at": "2020-08-21T13:49:12Z", "closed_at": "2020-08-21T13:49:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### Summary\r\n\r\nCurrently E208 also triggers on symlinks (`state: link` with the file module). A symlink always has mode 777. If you set a mode in Ansible on a symlink it will set those permissions on the source file, and not on the symlink itself. Also, `mode: preserve` is not possible with a symlink.\r\n\r\nIn my opinion this rule should be skipped when `state: link` is set since this doesn't offer any benefits and only adds confusion. This also doesn't solve any (potential) security issue which was the original reason (as far as I can see) for implementing this rule. In fact, it introduces potential security issues since someone might set mode 777 on the symlink (since that is the default mode for a symlink) due to this rule, not realizing that those permissions will be set on the source file instead of the symlink.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n\r\n```console\r\nansible 2.8.14\r\nansible-lint 4.3.1\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n```\r\n---\r\n- hosts: localhost\r\n\r\n  tasks:\r\n    - name: create file\r\n      file:\r\n        path: test\r\n        state: touch\r\n        mode: 0644\r\n\r\n    - name: symlink file\r\n      file:\r\n        path: test2\r\n        src: test\r\n        state: link\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/975", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/975/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/975/events", "html_url": "https://github.com/ansible/ansible-lint/issues/975", "id": 682137223, "node_id": "MDU6SXNzdWU2ODIxMzcyMjM=", "number": 975, "title": "~ and environment variables are not expanded properly both as cli arguments or as in config files", "user": {"login": "ksmets", "id": 2758297, "node_id": "MDQ6VXNlcjI3NTgyOTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/2758297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ksmets", "html_url": "https://github.com/ksmets", "followers_url": "https://api.github.com/users/ksmets/followers", "following_url": "https://api.github.com/users/ksmets/following{/other_user}", "gists_url": "https://api.github.com/users/ksmets/gists{/gist_id}", "starred_url": "https://api.github.com/users/ksmets/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ksmets/subscriptions", "organizations_url": "https://api.github.com/users/ksmets/orgs", "repos_url": "https://api.github.com/users/ksmets/repos", "events_url": "https://api.github.com/users/ksmets/events{/privacy}", "received_events_url": "https://api.github.com/users/ksmets/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-19T19:54:14Z", "updated_at": "2020-08-20T13:53:20Z", "closed_at": "2020-08-20T13:53:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\n~ and environment variables are not expanded properly when specified as `exclude_paths` or `rulesdir` both as cli arguments when using `-r=...` or  `--exclude=~...` or when used in `.ansible-lint` config file.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.12\r\n\r\nansible-lint --version\r\nansible-lint 4.3.0\r\n```\r\n\r\n- ansible installation method: pip(x)\r\n- ansible-lint installation method: pip(x)\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\nOS independent\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n\r\n<!--- Paste example playbooks or commands between tripple backticks below -->\r\n```console (paste below)\r\nansible-lint -r=~/my-ansible-lint-rules --exclude=~/.ansible/roles -vv\r\n\r\nDEBUG    Logging initialized to level 10\r\nDEBUG    Options: Namespace(colored=True, config_file=None, display_relative_path=True, exclude_paths=[PosixPath('/tmp/~/.ansible/roles')], format='plain', listrules=False, listtags=False, parseable=False, parseable_severity=False, playbook=[], quiet=False, rulesdir=[PosixPath('/tmp/~/my-ansible-lint-rules')], skip_list=[], tags=[], use_default_rules=False, verbosity=2)\r\nDEBUG    Loading rules from /tmp/~/my-ansible-lint-rules\r\nINFO     Discovering files to lint: git ls-files *.yaml *.yml\r\nWARNING  Failed to discover yaml files to lint using git: fatal: not a git repository (or any of the parent directories): .git\r\nINFO     Found roles: \r\nINFO     Found playbooks:\r\n```\r\n\r\n```console (paste below)\r\ncat .ansible-lint\r\nexclude_paths:\r\n- ~/.ansible/roles\r\nrulesdir:\r\n- ~/my-ansible-lint-rules\r\n\r\nansible-lint -vv\r\nDEBUG    Logging initialized to level 10\r\nDEBUG    Options: Namespace(colored=True, config_file=None, display_relative_path=True, exclude_paths=['/tmp/~/.ansible/roles'], format='plain', listrules=False, listtags=False, parseable=False, parseable_severity=False, playbook=[], quiet=False, rulesdir=['/tmp/~/my-ansible-lint-rules'], skip_list=[], tags=[], use_default_rules=False, verbosity=2)\r\nDEBUG    Loading rules from /tmp/~/my-ansible-lint-rules\r\nINFO     Discovering files to lint: git ls-files *.yaml *.yml\r\nWARNING  Failed to discover yaml files to lint using git: fatal: not a git repository (or any of the parent directories): .git\r\nINFO     Found roles: \r\nINFO     Found playbooks: \r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n<!--- Paste verbatim command output between tripple backticks -->\r\n```console (paste below)\r\nansible-lint -vv\r\nDEBUG    Logging initialized to level 10\r\nDEBUG    Options: Namespace(colored=True, config_file=None, display_relative_path=True, exclude_paths=['/home/ksmets/.ansible/roles'], format='plain', listrules=False, listtags=False, parseable=False, parseable_severity=False, playbook=[], quiet=False, rulesdir=['/home/ksmets/my-ansible-lint-rules'], skip_list=[], tags=[], use_default_rules=False, verbosity=2)\r\nDEBUG    Loading rules from /home/ksmets/my-ansible-lint-rules\r\nINFO     Discovering files to lint: git ls-files *.yaml *.yml\r\nWARNING  Failed to discover yaml files to lint using git: fatal: not a git repository (or any of the parent directories): .git\r\nINFO     Unknown file type: test-ansible/requirements.yml\r\nINFO     Found roles: \r\nINFO     Found playbooks\r\n```\r\n\r\n\r\n[minimum complete verifiable example]: http://stackoverflow.com/help/mcve\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/974", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/974/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/974/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/974/events", "html_url": "https://github.com/ansible/ansible-lint/issues/974", "id": 682024158, "node_id": "MDU6SXNzdWU2ODIwMjQxNTg=", "number": 974, "title": "ansible-lint 4.3.0 fails with Homebrew Python 3.8 on macOS", "user": {"login": "sfuerte", "id": 16941995, "node_id": "MDQ6VXNlcjE2OTQxOTk1", "avatar_url": "https://avatars3.githubusercontent.com/u/16941995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfuerte", "html_url": "https://github.com/sfuerte", "followers_url": "https://api.github.com/users/sfuerte/followers", "following_url": "https://api.github.com/users/sfuerte/following{/other_user}", "gists_url": "https://api.github.com/users/sfuerte/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfuerte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfuerte/subscriptions", "organizations_url": "https://api.github.com/users/sfuerte/orgs", "repos_url": "https://api.github.com/users/sfuerte/repos", "events_url": "https://api.github.com/users/sfuerte/events{/privacy}", "received_events_url": "https://api.github.com/users/sfuerte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/19", "html_url": "https://github.com/ansible/ansible-lint/milestone/19", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/19/labels", "id": 5664936, "node_id": "MDk6TWlsZXN0b25lNTY2NDkzNg==", "number": 19, "title": "4.3.1", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2020-07-17T10:33:41Z", "updated_at": "2020-08-22T06:18:55Z", "due_on": null, "closed_at": "2020-08-22T06:18:55Z"}, "comments": 3, "created_at": "2020-08-19T17:45:50Z", "updated_at": "2020-08-20T20:01:24Z", "closed_at": "2020-08-20T20:01:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n##### Summary\r\n\r\nStarted to get the traceback after upgrading to the latest version:\r\n```\r\n+ ansible-lint --nocolor -p --parseable-severity --exclude <home>/.ansible/roles/\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/Cellar/ansible-lint/4.3.0/libexec/lib/python3.8/site-packages/ansiblelint/__main__.py\", line 121, in main\r\n    runner = Runner(rules, playbook, options.tags,\r\n  File \"/usr/local/Cellar/ansible-lint/4.3.0/libexec/lib/python3.8/site-packages/ansiblelint/runner.py\", line 43, in __init__\r\n    self._update_exclude_paths(exclude_paths)\r\n  File \"/usr/local/Cellar/ansible-lint/4.3.0/libexec/lib/python3.8/site-packages/ansiblelint/runner.py\", line 52, in _update_exclude_paths\r\n    paths = ansiblelint.utils.expand_paths_vars(exclude_paths)\r\n  File \"/usr/local/Cellar/ansible-lint/4.3.0/libexec/lib/python3.8/site-packages/ansiblelint/utils.py\", line 783, in expand_paths_vars\r\n    paths = [expand_path_vars(p) for p in paths]\r\n  File \"/usr/local/Cellar/ansible-lint/4.3.0/libexec/lib/python3.8/site-packages/ansiblelint/utils.py\", line 783, in <listcomp>\r\n    paths = [expand_path_vars(p) for p in paths]\r\n  File \"/usr/local/Cellar/ansible-lint/4.3.0/libexec/lib/python3.8/site-packages/ansiblelint/utils.py\", line 775, in expand_path_vars\r\n    path = path.strip()\r\nAttributeError: 'PosixPath' object has no attribute 'strip'\r\n```\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n```console (paste below)\r\n> ansible --version\r\nansible 2.9.11\r\n  config file = <home>/projects/<project_path>/ansible.cfg\r\n  configured module search path = ['<home>/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Jul 21 2020, 10:48:26) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n\r\n> ansible-lint --version\r\nansible-lint 4.3.0\r\n```\r\n\r\n- ansible installation method: Homebrew on macOS\r\n- ansible-lint installation method: Homebrew on macOS\r\n\r\n```\r\n> brew list | grep ansible\r\nansible\r\nansible-lint\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n```\r\n> system_profiler SPSoftwareDataType\r\n\r\n    System Software Overview:\r\n\r\n      System Version: macOS 10.15.6 (19G2021)\r\n      Kernel Version: Darwin 19.6.0\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\nupgraded to the latest version\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/973", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/973/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/973/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/973/events", "html_url": "https://github.com/ansible/ansible-lint/issues/973", "id": 681638578, "node_id": "MDU6SXNzdWU2ODE2Mzg1Nzg=", "number": 973, "title": "E106 on roles with - in the name", "user": {"login": "jzielke84", "id": 13448042, "node_id": "MDQ6VXNlcjEzNDQ4MDQy", "avatar_url": "https://avatars3.githubusercontent.com/u/13448042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jzielke84", "html_url": "https://github.com/jzielke84", "followers_url": "https://api.github.com/users/jzielke84/followers", "following_url": "https://api.github.com/users/jzielke84/following{/other_user}", "gists_url": "https://api.github.com/users/jzielke84/gists{/gist_id}", "starred_url": "https://api.github.com/users/jzielke84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jzielke84/subscriptions", "organizations_url": "https://api.github.com/users/jzielke84/orgs", "repos_url": "https://api.github.com/users/jzielke84/repos", "events_url": "https://api.github.com/users/jzielke84/events{/privacy}", "received_events_url": "https://api.github.com/users/jzielke84/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T08:10:32Z", "updated_at": "2020-08-20T14:28:10Z", "closed_at": "2020-08-20T14:28:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\n\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.11\r\nansible-lint --version\r\nansible-lint 4.3.0\r\n```\r\n\r\n- ansible installation method: homebrew\r\n- ansible-lint installation method: homebrew\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nLatest OSX\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nOn roles with `-` in the name ansible-lint outputs: [106] ansible/roles/my-role/tasks/main.yml:1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/969", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/969/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/969/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/969/events", "html_url": "https://github.com/ansible/ansible-lint/issues/969", "id": 681068476, "node_id": "MDU6SXNzdWU2ODEwNjg0NzY=", "number": 969, "title": "4.3.0: Using -r option raise AttributeError: 'PosixPath' object has no attribute 'strip'", "user": {"login": "michaelimfeld", "id": 10922984, "node_id": "MDQ6VXNlcjEwOTIyOTg0", "avatar_url": "https://avatars0.githubusercontent.com/u/10922984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelimfeld", "html_url": "https://github.com/michaelimfeld", "followers_url": "https://api.github.com/users/michaelimfeld/followers", "following_url": "https://api.github.com/users/michaelimfeld/following{/other_user}", "gists_url": "https://api.github.com/users/michaelimfeld/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelimfeld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelimfeld/subscriptions", "organizations_url": "https://api.github.com/users/michaelimfeld/orgs", "repos_url": "https://api.github.com/users/michaelimfeld/repos", "events_url": "https://api.github.com/users/michaelimfeld/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelimfeld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220380714, "node_id": "MDU6TGFiZWwyMjIwMzgwNzE0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-08-18T14:02:39Z", "updated_at": "2020-08-18T19:45:38Z", "closed_at": "2020-08-18T19:45:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\nOur CI Pipeline stopped working after the 4.3 release. It seems like the `-r` RULESDIR option is broken.\r\n\r\n##### Issue Type\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.12\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.2 (default, Apr 16 2020, 18:25:46) [GCC 8.3.0]\r\nansible-lint --version\r\nansible-lint 4.3.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nDocker version 19.03.12, build 48a66213fe on Debian Buster\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between tripple backticks below -->\r\n```console (paste below)\r\n$ docker run --rm -it python:3 /bin/bash\r\nroot@e9b484a5a08c:/# pip install ansible-lint\r\nroot@e9b484a5a08c:/# ansible-lint -R -r foo playbook.yml\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nAnsible-lint should run like it did with version 4.2.\r\n\r\n##### Actual Behaviour\r\n```\r\nDEBUG    Logging initialized to level 10\r\nDEBUG    Options: Namespace(colored=True, config_file=None, display_relative_path=True, exclude_paths=[], format='plain', listrules=False, listtags=False, parseable=False, parseable_severity=False, playbook=['playbook.yml'], quiet=False, rulesdir=[PosixPath('/lint-rules')], skip_list=[], tags=[], use_default_rules=True, verbosity=3)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/__main__.py\", line 93, in main\r\n    rules = RulesCollection(rulesdirs)\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/rules/__init__.py\", line 186, in __init__\r\n    self.rulesdirs = ansiblelint.utils.expand_paths_vars(rulesdirs)\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/utils.py\", line 783, in expand_paths_vars\r\n    paths = [expand_path_vars(p) for p in paths]\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/utils.py\", line 783, in <listcomp>\r\n    paths = [expand_path_vars(p) for p in paths]\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/utils.py\", line 775, in expand_path_vars\r\n    path = path.strip()\r\nAttributeError: 'PosixPath' object has no attribute 'strip'\r\n```\r\n\r\nI didn't inlclude my playbook in this issue since this doesn't seem to have anything to do with the playbook.\r\n\r\n[minimum complete verifiable example]: http://stackoverflow.com/help/mcve\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/967", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/967/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/967/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/967/events", "html_url": "https://github.com/ansible/ansible-lint/issues/967", "id": 681010305, "node_id": "MDU6SXNzdWU2ODEwMTAzMDU=", "number": 967, "title": "E106: (Role name {} does not match pattern) should permit a . character for namespace", "user": {"login": "nre-ableton", "id": 16208985, "node_id": "MDQ6VXNlcjE2MjA4OTg1", "avatar_url": "https://avatars2.githubusercontent.com/u/16208985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nre-ableton", "html_url": "https://github.com/nre-ableton", "followers_url": "https://api.github.com/users/nre-ableton/followers", "following_url": "https://api.github.com/users/nre-ableton/following{/other_user}", "gists_url": "https://api.github.com/users/nre-ableton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nre-ableton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nre-ableton/subscriptions", "organizations_url": "https://api.github.com/users/nre-ableton/orgs", "repos_url": "https://api.github.com/users/nre-ableton/repos", "events_url": "https://api.github.com/users/nre-ableton/events{/privacy}", "received_events_url": "https://api.github.com/users/nre-ableton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-18T12:41:05Z", "updated_at": "2020-08-20T14:28:32Z", "closed_at": "2020-08-20T14:28:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\n\r\nRule 106 will reject role names which do not meet the regex `^[a-z][a-z0-9_]+$`. Unfortunately, this regex seems to be applied to the role's full name, which also includes the role namespace. For example, `geerlingguy.docker` is a valid role name which ansible-lint 4.3.0 rejects on account of the `.` character.\r\n\r\nAnsible's [documentation for developing collections](https://docs.ansible.com/ansible/devel/dev_guide/developing_collections.html) makes several references to role names which include namespace delimiters.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\nansible 2.9.12\r\nansible-lint 4.3.0\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/960", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/960/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/960/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/960/events", "html_url": "https://github.com/ansible/ansible-lint/issues/960", "id": 680233508, "node_id": "MDU6SXNzdWU2ODAyMzM1MDg=", "number": 960, "title": "Ansible Galaxy Package Installation Fails with Ansible Base 2.10 due to installing Ansible core (from Ansible-lint requirements)", "user": {"login": "jvanderaa", "id": 22228848, "node_id": "MDQ6VXNlcjIyMjI4ODQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/22228848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvanderaa", "html_url": "https://github.com/jvanderaa", "followers_url": "https://api.github.com/users/jvanderaa/followers", "following_url": "https://api.github.com/users/jvanderaa/following{/other_user}", "gists_url": "https://api.github.com/users/jvanderaa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvanderaa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvanderaa/subscriptions", "organizations_url": "https://api.github.com/users/jvanderaa/orgs", "repos_url": "https://api.github.com/users/jvanderaa/repos", "events_url": "https://api.github.com/users/jvanderaa/events{/privacy}", "received_events_url": "https://api.github.com/users/jvanderaa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-17T13:24:27Z", "updated_at": "2020-08-20T19:03:56Z", "closed_at": "2020-08-20T14:30:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\nWith Ansible 2.10 Base out (`pip install ansible-base`), Ansible Lint will now install Ansible full on top of the Ansible-base, causing an error condition when building a container.  \r\n\r\nThis is causing Ansible Galaxy package installations to fail.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n\r\nThis install issue happens with no pinned versions of Ansible or Ansible Lint, getting the latest of Ansible-base and Ansible-Lint.\r\n```console (paste below)\r\nansible --version\r\n2.10\r\n\r\nansible-lint --version\r\nlatest\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\npython:3.7.7-buster, python:3.8.5-buster, python:3.7.7-slim-buster\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n1. Build a fresh container\r\n2. Install Ansible Base - `pip install ansible-base`\r\n3. Install Ansible-Lint - `pip install ansible-lint`\r\n4. List pip packages installed in the container and there is both ansible-base (2.10), and ansible (core - 2.9.12)\r\n\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nI'd expect that ansible-lint would be installed along side only ansible-base, there should not be an install of Ansible core as well.\r\n\r\nPossible security bugs should be reported via email to `security@ansible.com`\r\n\r\n##### Actual Behaviour\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\nList pip packages installed in the container and there is both ansible-base (2.10), and ansible (core - 2.9.12)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/946", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/946/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/946/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/946/events", "html_url": "https://github.com/ansible/ansible-lint/issues/946", "id": 677458760, "node_id": "MDU6SXNzdWU2Nzc0NTg3NjA=", "number": 946, "title": "E402: [hg] rule 402 doesn't detect revision='default'", "user": {"login": "arthurlogilab", "id": 445200, "node_id": "MDQ6VXNlcjQ0NTIwMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/445200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthurlogilab", "html_url": "https://github.com/arthurlogilab", "followers_url": "https://api.github.com/users/arthurlogilab/followers", "following_url": "https://api.github.com/users/arthurlogilab/following{/other_user}", "gists_url": "https://api.github.com/users/arthurlogilab/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthurlogilab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthurlogilab/subscriptions", "organizations_url": "https://api.github.com/users/arthurlogilab/orgs", "repos_url": "https://api.github.com/users/arthurlogilab/repos", "events_url": "https://api.github.com/users/arthurlogilab/events{/privacy}", "received_events_url": "https://api.github.com/users/arthurlogilab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-12T07:20:13Z", "updated_at": "2020-08-21T12:10:06Z", "closed_at": "2020-08-21T12:09:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n```\r\n    - name: name\r\n      hg:\r\n        repo: https://example.org/org/project\r\n        dest: /src/project\r\n        revision: 'default'\r\n        purge: yes\r\n```\r\n\r\ngets detected as \r\n\r\n```\r\n[402] Mercurial checkouts must contain explicit revision\r\nplaybook.yml:88\r\nTask/Handler: name\r\n```\r\n\r\nWhen switching to `stable` instead of `default` the error disappears. \r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/arthur/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n\r\nansible-lint --version\r\n 4.2.0 \r\n```\r\n\r\n- ansible installation method: ubuntu package\r\n- ansible-lint installation method: pip (in tox)\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu focal\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/940", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/940/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/940/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/940/events", "html_url": "https://github.com/ansible/ansible-lint/issues/940", "id": 675248218, "node_id": "MDU6SXNzdWU2NzUyNDgyMTg=", "number": 940, "title": "ansible-lint not testing all files within ansible role structure", "user": {"login": "ansiblejunky", "id": 14311849, "node_id": "MDQ6VXNlcjE0MzExODQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/14311849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ansiblejunky", "html_url": "https://github.com/ansiblejunky", "followers_url": "https://api.github.com/users/ansiblejunky/followers", "following_url": "https://api.github.com/users/ansiblejunky/following{/other_user}", "gists_url": "https://api.github.com/users/ansiblejunky/gists{/gist_id}", "starred_url": "https://api.github.com/users/ansiblejunky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ansiblejunky/subscriptions", "organizations_url": "https://api.github.com/users/ansiblejunky/orgs", "repos_url": "https://api.github.com/users/ansiblejunky/repos", "events_url": "https://api.github.com/users/ansiblejunky/events{/privacy}", "received_events_url": "https://api.github.com/users/ansiblejunky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-07T20:08:47Z", "updated_at": "2020-08-13T16:35:58Z", "closed_at": "2020-08-13T15:56:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\nUsing `ansible-lint .` command to lint the files within my Ansible Role structure I assume it will test all files within that structure. However it only reports issues in my `tasks/main.yml` file and not within any other folder (handlers/main.yml, etc). For example, it reports the error `[502] All tasks should be named` in my `tasks/main.yml` but I have the same problem in the task defined in `handlers/main.yml` but this is not reported as an issue. \r\nIn fact, when I run `ansible-lint handlers/main.yml` it just comes back with nothing reported... silence. \r\nI tried using Python 3.8.x and Python 2.7.x and I am using a fresh pyenv virtualenv with fresh installed ansible-lint 4.2.0. I have also tested against the latest pre-release and same results. \r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.11\r\nansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pyenv and pip virtualenv\r\n- ansible-lint installation method: pyenv and pip virtualenv\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nMacBook Pro laptop\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n```\r\npyenv install 3.8.2\r\npyenv virtualenv 3.8.2 ansible-lint\r\npyenv activate ansible-lint\r\npip install ansible-lint\r\nansible-lint handlers/main.yml\r\n```\r\n\r\nhandlers/main.yml\r\n```console (paste below)\r\n---\r\n# handlers\r\n- debug: var=inventory_hostname\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\nansible-lint should be able to check all errors within all of my yml files in the Ansible Role structure.\r\n\r\n##### Actual Behaviour\r\nansible-lint only tests rules against `tasks/main.yml` and nothing else it seems... not even other tasks files within the `tasks` folder! \r\n\r\n\r\n[minimum complete verifiable example]: http://stackoverflow.com/help/mcve\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/906", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/906/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/906/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/906/events", "html_url": "https://github.com/ansible/ansible-lint/issues/906", "id": 663041226, "node_id": "MDU6SXNzdWU2NjMwNDEyMjY=", "number": 906, "title": "Ansible Lint reports git missing version", "user": {"login": "monorailpilot", "id": 5215784, "node_id": "MDQ6VXNlcjUyMTU3ODQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/5215784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monorailpilot", "html_url": "https://github.com/monorailpilot", "followers_url": "https://api.github.com/users/monorailpilot/followers", "following_url": "https://api.github.com/users/monorailpilot/following{/other_user}", "gists_url": "https://api.github.com/users/monorailpilot/gists{/gist_id}", "starred_url": "https://api.github.com/users/monorailpilot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monorailpilot/subscriptions", "organizations_url": "https://api.github.com/users/monorailpilot/orgs", "repos_url": "https://api.github.com/users/monorailpilot/repos", "events_url": "https://api.github.com/users/monorailpilot/events{/privacy}", "received_events_url": "https://api.github.com/users/monorailpilot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220406938, "node_id": "MDU6TGFiZWwyMjIwNDA2OTM4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/enhancement", "name": "enhancement", "color": "00B0C0", "default": true, "description": ""}, {"id": 52026480, "node_id": "MDU6TGFiZWw1MjAyNjQ4MA==", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/invalid", "name": "status/invalid", "color": "e6e6e6", "default": false, "description": "Not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-21T14:03:55Z", "updated_at": "2020-07-24T12:38:38Z", "closed_at": "2020-07-24T12:38:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n\r\n# Ansible and Ansible Lint details\r\nansible 2.8.2\r\nansible-lint 4.2.0\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nThe git module can be used to simply pull the hash of the code checked out, for example:\r\n```yaml\r\n  - name: \"Get post deploy code release hash\"\r\n    git:\r\n      repo: \".\"\r\n      dest: \".\"\r\n      clone: no\r\n      update: no\r\n    connection: \"local\"\r\n    become: false\r\n    register: git_commit\r\n```\r\nThis should not report an error in ansible-lint\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nansible lint is reporting an error\r\n[401] Git checkouts must contain explicit version\r\n*FILE LOCATION HIDDEN*\r\nTask/Handler: Get post deploy code release hash", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/892", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/892/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/892/events", "html_url": "https://github.com/ansible/ansible-lint/issues/892", "id": 655746560, "node_id": "MDU6SXNzdWU2NTU3NDY1NjA=", "number": 892, "title": "Ansible 2.10 task loaded no longer accepts custom data", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220380714, "node_id": "MDU6TGFiZWwyMjIwMzgwNzE0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-07-13T10:41:16Z", "updated_at": "2020-07-24T12:54:30Z", "closed_at": "2020-07-24T12:54:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Current code-base no longer works with Ansible 2.10 because the new Ansible module argument loader produces \"conflicting action statements\" when it encounters linter internal data in module arguments.\r\n\r\n```\r\nCouldn't parse task at ... (conflicting action statements: debug, __line__\r\n```\r\n\r\nWe need to be sure that we do not pass `__line__` and `__file__` to the loader in order to avoid this issue.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/885", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/885/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/885/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/885/events", "html_url": "https://github.com/ansible/ansible-lint/issues/885", "id": 653515072, "node_id": "MDU6SXNzdWU2NTM1MTUwNzI=", "number": 885, "title": "warn on setting \"when\" fact", "user": {"login": "pikrzysztof", "id": 3964215, "node_id": "MDQ6VXNlcjM5NjQyMTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3964215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pikrzysztof", "html_url": "https://github.com/pikrzysztof", "followers_url": "https://api.github.com/users/pikrzysztof/followers", "following_url": "https://api.github.com/users/pikrzysztof/following{/other_user}", "gists_url": "https://api.github.com/users/pikrzysztof/gists{/gist_id}", "starred_url": "https://api.github.com/users/pikrzysztof/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pikrzysztof/subscriptions", "organizations_url": "https://api.github.com/users/pikrzysztof/orgs", "repos_url": "https://api.github.com/users/pikrzysztof/repos", "events_url": "https://api.github.com/users/pikrzysztof/events{/privacy}", "received_events_url": "https://api.github.com/users/pikrzysztof/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-08T18:42:28Z", "updated_at": "2020-07-24T12:53:10Z", "closed_at": "2020-07-24T12:53:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\n\r\nansible-lint should warn on this:\r\n\r\n```\r\n- set_fact:\r\n    xyz: \"foo\"\r\n    when: \"something\"\r\n```\r\n\r\nas you probably meant\r\n\r\n```\r\n- set_fact:\r\n    xyz: \"foo\"\r\n  when: \"condition\"\r\n```\r\n\r\n##### Issue Type\r\n\r\n- Feature Idea\r\n\r\n##### Additional Information\r\n\r\nI wasted 5 hours trying to figure out why my playbook does something unexpected. Turns out that indenting your YAMLs with two spaces makes this mistake hard to spot.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/850", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/850/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/850/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/850/events", "html_url": "https://github.com/ansible/ansible-lint/issues/850", "id": 642973051, "node_id": "MDU6SXNzdWU2NDI5NzMwNTE=", "number": 850, "title": "ansible-lint give no output and just a python error", "user": {"login": "imranshaik5155", "id": 65723390, "node_id": "MDQ6VXNlcjY1NzIzMzkw", "avatar_url": "https://avatars3.githubusercontent.com/u/65723390?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imranshaik5155", "html_url": "https://github.com/imranshaik5155", "followers_url": "https://api.github.com/users/imranshaik5155/followers", "following_url": "https://api.github.com/users/imranshaik5155/following{/other_user}", "gists_url": "https://api.github.com/users/imranshaik5155/gists{/gist_id}", "starred_url": "https://api.github.com/users/imranshaik5155/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imranshaik5155/subscriptions", "organizations_url": "https://api.github.com/users/imranshaik5155/orgs", "repos_url": "https://api.github.com/users/imranshaik5155/repos", "events_url": "https://api.github.com/users/imranshaik5155/events{/privacy}", "received_events_url": "https://api.github.com/users/imranshaik5155/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340097, "node_id": "MDU6TGFiZWwxMTMzMzQwMDk3", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/high", "name": "priority/high", "color": "ff8800", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/17", "html_url": "https://github.com/ansible/ansible-lint/milestone/17", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/17/labels", "id": 3978716, "node_id": "MDk6TWlsZXN0b25lMzk3ODcxNg==", "number": 17, "title": "4.3.0", "description": "https://github.com/ansible/ansible-lint/blob/master/ROADMAP.rst", "creator": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-01-16T18:36:15Z", "updated_at": "2020-08-18T18:13:58Z", "due_on": null, "closed_at": "2020-08-18T18:13:58Z"}, "comments": 9, "created_at": "2020-06-22T11:02:39Z", "updated_at": "2020-07-19T13:15:43Z", "closed_at": "2020-07-19T13:15:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\nI am running the ansible-lint on all of our ansible code with 500+ roles, and it is showing no output and failing with python error.\r\nHow can I find where it is actually failing and with what reason.\r\n\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible 2.9.9\r\n  config file = None\r\n  configured module search path = ['/Users/imranshaik/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.6 (default, Dec 30 2019, 19:38:26) [Clang 11.0.0 (clang-1100.0.33.16)]\r\n\r\nansible-lint --version\r\nansible-lint 4.2.0\r\n\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\nmac OS\r\n\r\n\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 287, in run\r\n    skip_list=self.skip_list))\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 178, in run\r\n    matches.extend(rule.matchyaml(playbookfile, text))\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 119, in matchyaml\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 596, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 635, in _append_skipped_rules\r\n    if pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'str' object has no attribute 'get'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/843", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/843/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/843/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/843/events", "html_url": "https://github.com/ansible/ansible-lint/issues/843", "id": 642335104, "node_id": "MDU6SXNzdWU2NDIzMzUxMDQ=", "number": 843, "title": "2.10.0a1 introduced breaking changes around parsing", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220380714, "node_id": "MDU6TGFiZWwyMjIwMzgwNzE0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-20T08:24:40Z", "updated_at": "2020-07-28T13:47:09Z", "closed_at": "2020-07-28T13:47:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Yesterday release of 2.10.0a1 introduced breaking changes on behavior of parsing functions we use from Ansible. \r\n\r\nApparently from now, Ansible no longer accepts extra arguments for the task loader and chokes when encountering arguments we need like `skipped_rules`, `__line__` and `__file__`. \r\n\r\nWe need to change our implementation in such way that we no longer send our custom data to the task loader.\r\n\r\nExample failure:\r\n```\r\nCRITICAL Couldn't parse task at Unknown (conflicting action statements: git, skipped_rules\r\n```\r\n\r\nNote: this is not visible with the package build by @abadger but switching to the pypi release uncovers these.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/841", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/841/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/841/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/841/events", "html_url": "https://github.com/ansible/ansible-lint/issues/841", "id": 641869069, "node_id": "MDU6SXNzdWU2NDE4NjkwNjk=", "number": 841, "title": "repair docs publishing process", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220380714, "node_id": "MDU6TGFiZWwyMjIwMzgwNzE0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1133338056, "node_id": "MDU6TGFiZWwxMTMzMzM4MDU2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/documentation", "name": "documentation", "color": "aecaf2", "default": true, "description": ""}, {"id": 2038476560, "node_id": "MDU6TGFiZWwyMDM4NDc2NTYw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/regression", "name": "regression", "color": "ee0000", "default": false, "description": "A feature that worked in earlier versions but now it doesn't"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, {"login": "acozine", "id": 879121, "node_id": "MDQ6VXNlcjg3OTEyMQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/879121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acozine", "html_url": "https://github.com/acozine", "followers_url": "https://api.github.com/users/acozine/followers", "following_url": "https://api.github.com/users/acozine/following{/other_user}", "gists_url": "https://api.github.com/users/acozine/gists{/gist_id}", "starred_url": "https://api.github.com/users/acozine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acozine/subscriptions", "organizations_url": "https://api.github.com/users/acozine/orgs", "repos_url": "https://api.github.com/users/acozine/repos", "events_url": "https://api.github.com/users/acozine/events{/privacy}", "received_events_url": "https://api.github.com/users/acozine/received_events", "type": "User", "site_admin": false}, {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-06-19T10:26:43Z", "updated_at": "2020-08-21T07:47:42Z", "closed_at": "2020-08-21T07:47:42Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "While we would like to use [RTD to build master docs and PRs](https://github.com/ansible/ansible-lint/issues/839) we still need to update official docs from https://docs.ansible.com/ansible-lint/ \r\n\r\nThe Jenkins job that used to publish them disparaged during the last year and these docs are now out of sync with the linter.\r\n\r\nOfficial docs are not even versioned per release (like ansible), so user has no clue if documentation refers to development branch, last release or another one.\r\n\r\nIn order to achieve this we clearly need help from the docs team. Lets use this ticket to track the work that needs to be done.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/839", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/839/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/839/events", "html_url": "https://github.com/ansible/ansible-lint/issues/839", "id": 640619262, "node_id": "MDU6SXNzdWU2NDA2MTkyNjI=", "number": 839, "title": "Fix RTD renderring", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338056, "node_id": "MDU6TGFiZWwxMTMzMzM4MDU2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/documentation", "name": "documentation", "color": "aecaf2", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-06-17T17:29:44Z", "updated_at": "2020-07-17T12:48:48Z", "closed_at": "2020-07-17T12:48:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In order to make the rendering the same across different envs, we need to:\r\n1. ~Get rid of Makefiles~ (https://github.com/ansible/ansible-lint/pull/858)\r\n2. ~Get rid of unnecessary docs nestings~ (https://github.com/ansible/ansible-lint/pull/870)\r\n3. ~Add an RTD config~ (https://github.com/ansible/ansible-lint/pull/858)\r\n4. Maybe adjust some options\r\n5. ~Embed external generators of rst into sphinx via extensions~ (https://github.com/ansible/ansible-lint/pull/877)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/829", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/829/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/829/events", "html_url": "https://github.com/ansible/ansible-lint/issues/829", "id": 638781728, "node_id": "MDU6SXNzdWU2Mzg3ODE3Mjg=", "number": 829, "title": "proposal: use release-drafter to build draft release notes", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-15T11:38:53Z", "updated_at": "2020-07-24T18:07:44Z", "closed_at": "2020-07-24T18:07:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "##### Summary\r\nI would like to propose use of two github apps [release-drafter](https://github.com/marketplace/actions/release-drafter) which can help a lot with maintenance chores.\r\n\r\nPlease note that this is not a request to change the release process, only to enable the tools that help us \"draft\" the release notes, mainly by keeping the next release notes in sync with recent merges, w/o asking for contributors to do anything.\r\n\r\nThere are multiple projects in Ansible using it, notable example https://github.com/ansible-community/molecule/releases -- as seen there the drafter updates the description with information from merged PRs, being able to skip mentioning changes that do not affect the final product, using categories, mentioning contributors.\r\n\r\nWhen the maintainer decides to make a release he can still fine tune the already drafter release notes.\r\n\r\n##### Issue Type\r\n\r\n- Feature Idea\r\n\r\n##### Additional Information\r\n\r\nAn example config which is used in unmodified form by 10+ projects from ansible-community can be seen at https://github.com/ansible-community/molecule/blob/master/.github/release-drafter.yml -- it is simple and effective. The number of categories is kept low to avoid cluttering with major changes listed on top.\r\n\r\nI propose enabling this as experimental without having to update any development/release workflows. Once we have it running for a while we can see if we want to update these (like putting a to github releases pages as a place to read the release notes).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/828", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/828/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/828/events", "html_url": "https://github.com/ansible/ansible-lint/issues/828", "id": 638242459, "node_id": "MDU6SXNzdWU2MzgyNDI0NTk=", "number": 828, "title": "[Feature Idea] order of options in task", "user": {"login": "freeseacher", "id": 289277, "node_id": "MDQ6VXNlcjI4OTI3Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/289277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freeseacher", "html_url": "https://github.com/freeseacher", "followers_url": "https://api.github.com/users/freeseacher/followers", "following_url": "https://api.github.com/users/freeseacher/following{/other_user}", "gists_url": "https://api.github.com/users/freeseacher/gists{/gist_id}", "starred_url": "https://api.github.com/users/freeseacher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freeseacher/subscriptions", "organizations_url": "https://api.github.com/users/freeseacher/orgs", "repos_url": "https://api.github.com/users/freeseacher/repos", "events_url": "https://api.github.com/users/freeseacher/events{/privacy}", "received_events_url": "https://api.github.com/users/freeseacher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-13T22:17:58Z", "updated_at": "2020-06-14T07:46:02Z", "closed_at": "2020-06-14T07:46:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\nAdd lint and probably autofix for order of options in task. \r\nOn several review i've found that people sometimes use name in the middle of task definition. Adding something like \r\n```\r\n- name:\r\n- action:\r\n- other_stuff\r\n- where\r\n```\r\nOr any other order will be appriciated \r\nMaybe similar for play \r\n```\r\n- name: \r\n- hosts:\r\n- some_other_stuff\r\n- tasks_pre:\r\n- roles:\r\n- post_tasks:\r\n```\r\nand so on \r\n\r\n##### Issue Type\r\n\r\n- Feature Idea\r\n\r\n##### Additional Information\r\n<!--- Describe how the feature would be used, why it is needed and what it would solve -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```console\r\n\r\n```\r\n\r\n<!--- HINT: You can also paste gist.github.com links for larger files -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/823", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/823/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/823/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/823/events", "html_url": "https://github.com/ansible/ansible-lint/issues/823", "id": 636441953, "node_id": "MDU6SXNzdWU2MzY0NDE5NTM=", "number": 823, "title": "proposal: reduce number of CI/CD involved with ansible-lint", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-10T17:58:19Z", "updated_at": "2020-06-23T10:34:22Z", "closed_at": "2020-06-23T10:34:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "##### Summary\r\nCurrently ansible-lint project is configured to use not less than 4 major CI/CD systems: travis, azure-pipelines, github-actions and zuul. In addition to these it also have at least one extra bot (LGTM).\r\n\r\n> At one moment in time there were more than 100 checks running on this project, something I never seen on any other github project. Not even big and sensitive projects like libpod or openstack do run so many jobs. And most of them where only instances of the same set of tox environments configured on different CI/CD systems.\r\n\r\n##### Issue Type\r\n\r\n- Feature Idea\r\n\r\n##### Additional Information\r\n\r\nThat is not the first time I raise this question but it seems that I need to do it again as nothing happened.\r\n\r\nThis current concoction of different external systems is causing lots of false failures, mainly related to either issues internal to these CI/CD systems or just networking.\r\n\r\nThe amount of checks running on this projects makes is very confusing for the user, also their errors are far from easy to read.\r\n\r\nAs non core developer is impossible for me to retrigger these jobs without closing and reopening the PR. The only exception is Zuul where a \"recheck\" comment does this, still that one seems not to be the noisy one of of the all 4.\r\n\r\nAs Zuul CI is run and supported by Ansible Networking team with plans to extend it even further to cover more Ansible project, we can rule it out of the \"removal\" list.\r\n\r\nI propose dropping:\r\n- azure-pipelines (seems to be the source of the most failures, leading by far)\r\n- travis (degraded QoS year over year)\r\n\r\nWe need to be sure we still cover: macos, windows and linux. Linux ones are covered for sure by zuul jobs.\r\n\r\nBefore arguing that \"this CI has a feature that I like that is missing from another\", please remember that we cannot make a kitchensink out of ansible-lint project and resilience is more important than features.\r\n\r\nResiliency cannot be obtained by increasing entropy, we need to simplify as much as possible.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/818", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/818/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/818/events", "html_url": "https://github.com/ansible/ansible-lint/issues/818", "id": 634614700, "node_id": "MDU6SXNzdWU2MzQ2MTQ3MDA=", "number": 818, "title": "ansible-lint throws \"701 No 'galaxy_info' found\" error when the dependency is set to local role", "user": {"login": "fartosh", "id": 18469990, "node_id": "MDQ6VXNlcjE4NDY5OTkw", "avatar_url": "https://avatars2.githubusercontent.com/u/18469990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fartosh", "html_url": "https://github.com/fartosh", "followers_url": "https://api.github.com/users/fartosh/followers", "following_url": "https://api.github.com/users/fartosh/following{/other_user}", "gists_url": "https://api.github.com/users/fartosh/gists{/gist_id}", "starred_url": "https://api.github.com/users/fartosh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fartosh/subscriptions", "organizations_url": "https://api.github.com/users/fartosh/orgs", "repos_url": "https://api.github.com/users/fartosh/repos", "events_url": "https://api.github.com/users/fartosh/events{/privacy}", "received_events_url": "https://api.github.com/users/fartosh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-08T13:26:19Z", "updated_at": "2020-07-10T14:48:23Z", "closed_at": "2020-06-09T15:39:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\nRunning ansible-lint against the role that has local role dependency, it throws \"701 No 'galaxy_info' found\". An exception should be made for this kind of dependencies as there will be no galaxy_info for my local roles.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\n---\r\nansible 2.9.9\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n\r\nansible-lint --version\r\n---\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: one of source, pip, OS package\r\npip\r\n- ansible-lint installation method: one of source, pip, OS package\r\npip\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n1. Create the role foo\r\n2. Create the role bar with `meta/main.yml` file:\r\n```\r\ndependencies:\r\n  - foo\r\n```\r\n3. Run ansible-lint\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThere is no \"701 No 'galaxy_info' found\" error in the output\r\n\r\n##### Actual Behaviour\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n```\r\n701 No 'galaxy_info' found\r\n[...]/roles/bar/meta/main.yml:4\r\n{'meta/main.yml': {'skipped_rules': [], '__file__': u'[...]/roles/bar/meta/main.yml', u'dependencies': [{'__file__': u'[...]/roles/bar/meta/main.yml', u'role': u'foo', '__line__': 5}], '__line__': 4}}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/813", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/813/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/813/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/813/events", "html_url": "https://github.com/ansible/ansible-lint/issues/813", "id": 631028855, "node_id": "MDU6SXNzdWU2MzEwMjg4NTU=", "number": 813, "title": "Ansible lint should not crash with an empty config file", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-04T17:47:23Z", "updated_at": "2020-06-08T12:40:23Z", "closed_at": "2020-06-08T12:40:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "##### Summary\r\n```\r\nansible-lint -c /dev/null\r\n```\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nTraceback (most recent call last):\r\nFile \"/Users/ssbarnea/.pyenv/versions/3.8.2/bin/ansible-lint\", line 11, in <module>\r\nload_entry_point('ansible-lint', 'console_scripts', 'ansible-lint')()\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/__main__.py\", line 45, in main\r\noptions = cli.get_config(sys.argv[1:])\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/cli.py\", line 204, in get_config\r\nconfig = load_config(options.config_file)\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/cli.py\", line 78, in load_config\r\nexpand_to_normalized_paths(config, config_dir)\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/cli.py\", line 41, in expand_to_normalized_paths\r\nif paths_var not in config:\r\nTypeError: argument of type 'NoneType' is not iterable\r\n```\r\n\r\nDesired behavior: run the same way as if no config would exist, avoiding a crash.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/812", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/812/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/812/events", "html_url": "https://github.com/ansible/ansible-lint/issues/812", "id": 630772860, "node_id": "MDU6SXNzdWU2MzA3NzI4NjA=", "number": 812, "title": "Refactoring: remove code from package __init__ module", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-04T12:18:33Z", "updated_at": "2020-06-15T15:23:35Z", "closed_at": "2020-06-15T15:23:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "##### Summary\r\n\r\nAdding code to package `__init__` it is a known anti-pattern which has nasty outcomes because it prevents others from using any modules without executing the code tom __init__.\r\n\r\nWhen this code performs extra imports from within or outside the package it can become even harder to reuse the code.\r\n\r\n\r\n##### Additional Information\r\n\r\nDue to the chain of dependencies it is impossible to import parts of AnsibleLint without importing ansible package itself.\r\n\r\nThis design fault prevented us from implementing some features like ability to fake modules.\r\n\r\nAs part of addressing this issue, we should aim to refactor the package layout in such way that we can avoid chain-imports.\r\n\r\nThings that need to be taken out:\r\n- [ ] RulesCollection class\r\n- [ ] Runner class\r\n- [ ] from ansiblelint.* imports, the AnsibleLintRule in particular\r\n- [x] default_rulesdir global variable\r\n\r\n## API Changes required\r\n\r\nFully implementing this refactoring will have a side effect of requiring custom Rule developers to update their code. Mainly changing the imports to something like below should be fine:\r\n\r\n```python\r\ntry:\r\n    from ansiblelint.rules import AnsibleLintRule\r\nexcept ImportError: # backwards compatibility\r\n    from ansiblelint import AnsibleLintRule\r\n```\r\n\r\nBreaking the API (as long we are doing before 4.3.0 is released) should not be a big deal. Linter version is supposed to be pinned anyway.\r\n\r\nI should mention that during the last week I tried various tricks for allowing a way to use deprecation warning for that class import. After lots of tries I realized that there is no clean way to make it happen with all supported versions of python we have. All workarounds where only partial and had nasty side-effects, like breaking something else.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/809", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/809/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/809/events", "html_url": "https://github.com/ansible/ansible-lint/issues/809", "id": 629803240, "node_id": "MDU6SXNzdWU2Mjk4MDMyNDA=", "number": 809, "title": "ansible-lint crashes with command module", "user": {"login": "jorisdobbelsteen", "id": 3708161, "node_id": "MDQ6VXNlcjM3MDgxNjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3708161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisdobbelsteen", "html_url": "https://github.com/jorisdobbelsteen", "followers_url": "https://api.github.com/users/jorisdobbelsteen/followers", "following_url": "https://api.github.com/users/jorisdobbelsteen/following{/other_user}", "gists_url": "https://api.github.com/users/jorisdobbelsteen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisdobbelsteen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisdobbelsteen/subscriptions", "organizations_url": "https://api.github.com/users/jorisdobbelsteen/orgs", "repos_url": "https://api.github.com/users/jorisdobbelsteen/repos", "events_url": "https://api.github.com/users/jorisdobbelsteen/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisdobbelsteen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 52026480, "node_id": "MDU6TGFiZWw1MjAyNjQ4MA==", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/invalid", "name": "status/invalid", "color": "e6e6e6", "default": false, "description": "Not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-03T08:33:00Z", "updated_at": "2020-06-08T12:54:11Z", "closed_at": "2020-06-08T12:54:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nOne step invokes command module using list of arguments passed using argv.\r\nRunning the step with ansible-playbook works correctly. However, using ansible-lint to detect common errors fails for this construction.\r\n\r\nOutput is:\r\n```\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/rules/CommandsInsteadOfArgumentsRule.py\", line 54, in matchtask\r\n    first_cmd_arg = task[\"action\"][\"__ansible_arguments__\"][0]\r\nIndexError: list index out of range\r\n```\r\n\r\n##### ISSUE TYPE\r\nBug Report\r\n\r\n##### COMPONENT NAME\r\nansible_list, specifically rule 304.\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible-lint 3.5.1\r\n\r\nansible 2.9.9\r\n  config file = /home/joris/joris2k/ansible.cfg\r\n  configured module search path = [u'/home/joris/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nANSIBLE_PIPELINING(/home/joris/joris2k/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/joris/joris2k/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=60s\r\nDEFAULT_GATHERING(/home/joris/joris2k/ansible.cfg) = smart\r\nDEFAULT_HOST_LIST(/home/joris/joris2k/ansible.cfg) = [u'/home/joris/joris2k/hosts']\r\nDEFAULT_ROLES_PATH(/home/joris/joris2k/ansible.cfg) = [u'/home/joris/joris2k/roles']\r\nINTERPRETER_PYTHON(/home/joris/joris2k/ansible.cfg) = auto\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nCentOS 7\r\n\r\n##### STEPS TO REPRODUCE\r\nThis requires two files in order to cause the crash.\r\n\r\nCreate file bug.yml\r\n```\r\n---\r\n- name: Invoke mediawiki install\r\n  command:\r\n    argv:\r\n      - \"/usr/bin/echo\"\r\n      - \"{{ mediawiki_code_dir }}/maintenance/install.php\"\r\n```\r\n\r\nCreate file bug2.yml\r\n```\r\n---\r\n- hosts: all\r\n  tasks:\r\n  - import_tasks: bug.yml\r\n```\r\n\r\nNow invoke `ansible-lint bug2.yml`.\r\n\r\n##### EXPECTED RESULTS\r\nNo error. ansible-lint should not find a issue (as this follows example in documentation)\r\n\r\n##### ACTUAL RESULTS\r\nInvoke `ansible-lint -vvvv bug2.yml`\r\n```\r\nExamining bug2.yml of type playbook\r\nExamining /home/joris/joris2k/bug.yml of type tasks\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/ansible-lint\", line 9, in <module>\r\n    load_entry_point('ansible-lint==3.5.1', 'console_scripts', 'ansible-lint')()\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/__main__.py\", line 176, in main\r\n    matches.extend(runner.run())\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/__init__.py\", line 243, in run\r\n    skip_list=self.skip_list))\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/__init__.py\", line 139, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/__init__.py\", line 70, in matchtasks\r\n    result = self.matchtask(file, task)\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/rules/CommandsInsteadOfArgumentsRule.py\", line 54, in matchtask\r\n    first_cmd_arg = task[\"action\"][\"__ansible_arguments__\"][0]\r\nIndexError: list index out of range\r\n```\r\n\r\nInvoke `ansible-lint -vvvv bug.yml` actually passes:\r\n```\r\nExamining bug.yml of type playbook\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/805", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/805/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/805/events", "html_url": "https://github.com/ansible/ansible-lint/issues/805", "id": 627095919, "node_id": "MDU6SXNzdWU2MjcwOTU5MTk=", "number": 805, "title": "'skip_ansible_lint' tag does not work with E204 (over 160 char) rules.", "user": {"login": "cahlchang", "id": 17647044, "node_id": "MDQ6VXNlcjE3NjQ3MDQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/17647044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cahlchang", "html_url": "https://github.com/cahlchang", "followers_url": "https://api.github.com/users/cahlchang/followers", "following_url": "https://api.github.com/users/cahlchang/following{/other_user}", "gists_url": "https://api.github.com/users/cahlchang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cahlchang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cahlchang/subscriptions", "organizations_url": "https://api.github.com/users/cahlchang/orgs", "repos_url": "https://api.github.com/users/cahlchang/repos", "events_url": "https://api.github.com/users/cahlchang/events{/privacy}", "received_events_url": "https://api.github.com/users/cahlchang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-29T08:29:23Z", "updated_at": "2020-05-29T08:42:30Z", "closed_at": "2020-05-29T08:42:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\n'skip_ansible_lint' tag does not work with E204 (over 160 char) rules.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\n\r\n$ ansible --version\r\nansible 2.9.9\r\n  config file = None\r\n  configured module search path = ['/Users/myname/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/myname/.pyenv/versions/3.8.2/lib/python3.8/site-packages/ansible\r\n  executable location = /Users/myname/.pyenv/versions/3.8.2/bin/ansible\r\n  python version = 3.8.2 (default, May 20 2020, 17:00:00) [Clang 10.0.1 (clang-1001.0.46.4)]\r\n\r\n$ ansible-lint --version\r\nansible-lint 4.2.0\r\n\r\n```\r\n\r\n- ansible installation method: one of source, pip, OS package\r\npyenv/pip\r\n- ansible-lint installation method: one of source, pip, OS package\r\npyenv/pip\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nmacOS mojava\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between tripple backticks below -->\r\n\r\nYou can test with this playbook.\r\n```yaml\r\n- name: over 160 char (only this error is not skipped)\r\n  set_fact:\r\n    test: \"randomstringover160char.anmtgxxp7t25mumrrkz9en42zjr3kuhkhut68ddtuya7mktagjwxzn7mts3idz2id3uyubg6ef9wxzy2g5byh2rpmj8uh8nxd949s8nwj5e323cmk5dhbyimi87b4p8k5xpihfnfa6pxj9zassx2gxei2nrextht66esgn4b\"\r\n  tags:\r\n  - skip_ansible_lint\r\n\r\n- set_fact: # This error will be skipped\r\n    test2: \"randomstring\"\r\n  tags:\r\n  - skip_ansible_lint\r\n\r\n- name: skip test\r\n  command: whoami\r\n  tags:\r\n  - skip_ansible_lint\r\n```\r\n\r\n```console\r\n$ ansible-lint -p *.yml\r\nroles/test_role/tasks/main.yml:3: [E204] Lines should be no longer than 160 chars\r\n```\r\n\r\n##### Actual Behaviour\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\nskip_ansible_lint should be available for all rules.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/798", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/798/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/798/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/798/events", "html_url": "https://github.com/ansible/ansible-lint/issues/798", "id": 624633040, "node_id": "MDU6SXNzdWU2MjQ2MzMwNDA=", "number": 798, "title": "Empty roles key crashes ansible-lint", "user": {"login": "maxwell-k", "id": 4786215, "node_id": "MDQ6VXNlcjQ3ODYyMTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4786215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxwell-k", "html_url": "https://github.com/maxwell-k", "followers_url": "https://api.github.com/users/maxwell-k/followers", "following_url": "https://api.github.com/users/maxwell-k/following{/other_user}", "gists_url": "https://api.github.com/users/maxwell-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxwell-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxwell-k/subscriptions", "organizations_url": "https://api.github.com/users/maxwell-k/orgs", "repos_url": "https://api.github.com/users/maxwell-k/repos", "events_url": "https://api.github.com/users/maxwell-k/events{/privacy}", "received_events_url": "https://api.github.com/users/maxwell-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-26T06:31:19Z", "updated_at": "2020-05-27T12:19:54Z", "closed_at": "2020-05-27T12:19:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n\r\nIf a play includes an empty roles key then `ansible-lint` crashes. \r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console\r\n$ ansible --version\r\nansible 2.9.9\r\n  config file = /media/removable/GOLD/configuration/ansible.cfg\r\n  configured module search path = ['/home/chronos/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.3 (default, May 15 2020, 01:53:50) [GCC 9.3.0]\r\n$ ansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: OS package\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\n\r\nReproducible on localhost on Alpine Linux.\r\n\r\n##### STEPS TO REPRODUCE\r\nWith the following as `example.yaml`:\r\n\r\n```yaml\r\n- name: Example play\r\n  hosts: all\r\n  roles:\r\n  tasks:\r\n    - name: Debug message\r\n      debug: { msg: hello world }\r\n```\r\n\r\n`ansible-lint` crashes:\r\n\r\n```python-traceback\r\n$ ansible-lint example.yaml\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__init__.py\", line 286, in run\r\n    matches.extend(self.rules.run(file, tags=set(self.tags),\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__init__.py\", line 178, in run\r\n    matches.extend(rule.matchyaml(playbookfile, text))\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__init__.py\", line 125, in matchyaml\r\n    result = self.matchplay(file, play)\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/rules/NoFormattingInWhenRule.py\", line 27, in matchplay\r\n    for role in play['roles']:\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\n\r\nI expected `ansible-lint` to complete execution.\r\n\r\n##### Actual Behaviour\r\n\r\n```python-traceback\r\n$ ansible-lint -vvv example.yaml\r\nExamining example.yaml of type playbook\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__init__.py\", line 286, in run\r\n    matches.extend(self.rules.run(file, tags=set(self.tags),\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__init__.py\", line 178, in run\r\n    matches.extend(rule.matchyaml(playbookfile, text))\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/__init__.py\", line 125, in matchyaml\r\n    result = self.matchplay(file, play)\r\n  File \"/opt/ansible-lint/lib/python3.8/site-packages/ansiblelint/rules/NoFormattingInWhenRule.py\", line 27, in matchplay\r\n    for role in play['roles']:\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\n\r\n```yaml\r\n$ ansible-playbook --syntax-check example.yaml\r\n\r\nplaybook: example.yaml\r\n```\r\n\r\n\r\n[minimum complete verifiable example]: http://stackoverflow.com/help/mcve\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/797", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/797/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/797/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/797/events", "html_url": "https://github.com/ansible/ansible-lint/issues/797", "id": 623885141, "node_id": "MDU6SXNzdWU2MjM4ODUxNDE=", "number": 797, "title": "DuplicateKeyError traceback while constructing a mapping", "user": {"login": "Decstasy", "id": 13968467, "node_id": "MDQ6VXNlcjEzOTY4NDY3", "avatar_url": "https://avatars1.githubusercontent.com/u/13968467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Decstasy", "html_url": "https://github.com/Decstasy", "followers_url": "https://api.github.com/users/Decstasy/followers", "following_url": "https://api.github.com/users/Decstasy/following{/other_user}", "gists_url": "https://api.github.com/users/Decstasy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Decstasy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Decstasy/subscriptions", "organizations_url": "https://api.github.com/users/Decstasy/orgs", "repos_url": "https://api.github.com/users/Decstasy/repos", "events_url": "https://api.github.com/users/Decstasy/events{/privacy}", "received_events_url": "https://api.github.com/users/Decstasy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-24T15:18:21Z", "updated_at": "2020-07-22T15:46:04Z", "closed_at": "2020-05-28T17:59:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\nIf there are duplicate lines of `when:`, the constructor of ansible-lint dies with a python traceback.\r\nThis kind of syntax error should be cought correctly.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.9\r\n  config file = /home/ansible/playbooks/ansible.cfg\r\n  configured module search path = ['/home/ansible/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ansible/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.9 (default, Apr 18 2020, 01:56:04) [GCC 8.4.0]\r\n\r\nansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pip3\r\n- ansible-lint installation method: pip3\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu 18.04 LTS, virtual Machine (not relevant for this bug)\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n- Create a playbook\r\n- Add a task\r\n- Insert \"when:\"\r\n- Insert 2nd line with \"when:\" and a proper condition\r\n\r\nI'm sure this might cause an uncought error with other duplicates as well. It's a simple copy and paste error and can occur commonly while writing new stuff.\r\n\r\n<!--- Paste example playbooks or commands between tripple backticks below -->\r\n```console (paste below)\r\n---\r\n\r\n- name: Get TS3 Links\r\n  hosts: localhost\r\n  gather_facts: False\r\n  tasks:\r\n    - name: Get info\r\n      uri:\r\n        url: 'https://teamspeak.com/versions/server.json'\r\n        return_content: 'yes'\r\n        method: 'GET'\r\n      register: result\r\n\r\n    - name: Set Variable\r\n      set_fact:\r\n        ts3latest: \"{{ result.json }}\"\r\n\r\n    - name: Debug\r\n      debug:\r\n        var: ts3latest\r\n      when:\r\n      when:\r\n        - 'ts3latest is defined'\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n- Error is cought correctly\r\n\r\n##### Actual Behaviour\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n<!--- Paste verbatim command output between tripple backticks -->\r\n```paste below\r\n\u2714 ~/playbooks [master L|\u271a 3\u202612]\r\n17:12 $ ansible-lint t.yml\r\n[WARNING]: While constructing a mapping from /home/ansible/playbooks/t.yml, line 18, column 7, found a duplicate dict key (when). Using last defined value only.\r\n[WARNING]: While constructing a mapping from <unicode string>, line 18, column 7, found a duplicate dict key (when). Using last defined value only.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 287, in run\r\n    skip_list=self.skip_list))\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 177, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 87, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ansiblelint/utils.py\", line 596, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ansiblelint/utils.py\", line 607, in _append_skipped_rules\r\n    ruamel_data = yaml.load(file_text)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/main.py\", line 343, in load\r\n    return constructor.get_single_data()\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 113, in get_single_data\r\n    return self.construct_document(node)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 123, in construct_document\r\n    for _dummy in generator:\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 1563, in construct_yaml_map\r\n    self.construct_mapping(node, data, deep=True)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 1469, in construct_mapping\r\n    value = self.construct_object(value_node, deep=deep)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 146, in construct_object\r\n    data = self.construct_non_recursive_object(node)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 188, in construct_non_recursive_object\r\n    for _dummy in generator:\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 1555, in construct_yaml_seq\r\n    data.extend(self.construct_rt_sequence(node, data))\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 1317, in construct_rt_sequence\r\n    ret_val.append(self.construct_object(child, deep=deep))\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 146, in construct_object\r\n    data = self.construct_non_recursive_object(node)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 188, in construct_non_recursive_object\r\n    for _dummy in generator:\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 1563, in construct_yaml_map\r\n    self.construct_mapping(node, data, deep=True)\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 1470, in construct_mapping\r\n    if self.check_mapping_key(node, key_node, maptyp, key, value):\r\n  File \"/home/ansible/.local/lib/python3.6/site-packages/ruamel/yaml/constructor.py\", line 295, in check_mapping_key\r\n    raise DuplicateKeyError(*args)\r\nruamel.yaml.constructor.DuplicateKeyError: while constructing a mapping\r\n  in \"<unicode string>\", line 18, column 7:\r\n        - name: Debug\r\n          ^ (line: 18)\r\nfound duplicate key \"when\" with value \"['ts3latest is defined']\" (original value: \"None\")\r\n  in \"<unicode string>\", line 22, column 7:\r\n          when:\r\n          ^ (line: 22)\r\n\r\nTo suppress this check see:\r\n    http://yaml.readthedocs.io/en/latest/api.html#duplicate-keys\r\n\r\nDuplicate keys will become an error in future releases, and are errors\r\nby default when using the new API.\r\n\r\n\u2718-1 ~/playbooks [master L|\u271a 3\u202612]\r\n17:12 $ ansible-playbook --syntax-check t.yml\r\n[WARNING]: While constructing a mapping from /home/ansible/playbooks/t.yml, line 18, column 7, found a duplicate dict key (when). Using last defined value only.\r\n\r\nplaybook: t.yml\r\n```\r\n\r\n\r\n[minimum complete verifiable example]: http://stackoverflow.com/help/mcve\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/780", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/780/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/780/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/780/events", "html_url": "https://github.com/ansible/ansible-lint/issues/780", "id": 615822101, "node_id": "MDU6SXNzdWU2MTU4MjIxMDE=", "number": 780, "title": "RuntimeError: Failed to find required 'name' key in include_role", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-05-11T11:46:32Z", "updated_at": "2020-05-15T16:44:27Z", "closed_at": "2020-05-15T16:44:27Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "##### Summary\r\nBug found on master code, where ansible-lint may produce an exception like:\r\n```python-traceback\r\nRuntimeError: Failed to find required 'name' key in include_role\r\n```\r\n\r\nFeel free to assign but to me.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n- hosts: all\r\n  tasks:\r\n    - name: foo\r\n      include_role:\r\n        role: bar\r\n```\r\n\r\n##### Desired Behaviour\r\n* No exception raised\r\n* If error occurs the filename must be visible, and if possible even line number. At this moment even when running in debug mode we are unable to find the name of the file.\r\n\r\n\r\n##### Actual Behaviour\r\n```python-traceback\r\nTraceback (most recent call last):\r\nFile \"/Users/ssbarnea/.pyenv/versions/3.8.2/bin/ansible-lint\", line 11, in <module>\r\nload_entry_point('ansible-lint', 'console_scripts', 'ansible-lint')()\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/__main__.py\", line 91, in main\r\nmatches.extend(runner.run())\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/__init__.py\", line 278, in run\r\nfor child in ansiblelint.utils.find_children(arg, self.playbook_dir):\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/utils.py\", line 183, in find_children\r\nfor child in play_children(basedir, item, playbook[1], playbook_dir):\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/utils.py\", line 235, in play_children\r\nreturn delegate_map[k](basedir, k, v, parent_type)\r\nFile \"/Users/ssbarnea/c/os/ansible-lint/lib/ansiblelint/utils.py\", line 264, in _taskshandlers_children\r\nraise RuntimeError(\r\nRuntimeError: Failed to find required 'name' key in include_role\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/778", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/778/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/778/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/778/events", "html_url": "https://github.com/ansible/ansible-lint/issues/778", "id": 614598938, "node_id": "MDU6SXNzdWU2MTQ1OTg5Mzg=", "number": 778, "title": "auto-detect modules with collection layouts", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133355680, "node_id": "MDU6TGFiZWwxMTMzMzU1Njgw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/proposal", "name": "proposal", "color": "d4c5f9", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-08T08:38:24Z", "updated_at": "2020-05-29T14:22:24Z", "closed_at": "2020-05-29T14:22:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Ansible-lint ability to just work without any extra tuning can be improved by making it automatically define `ANSIBLE_LIBRARY=plugins/modules` when the variable is not already defined.\r\n\r\nThis would follow the [official collection repository layout](https://docs.ansible.com/ansible/latest/dev_guide/developing_collections.html) and make ansible-lint more likely work without extra configuration.\r\n\r\nThis feature should be enabled only with auto-detection mode because it needs to know what is the repository root location. That is because the tool could be called from any subdirectory and we do expect to give the same kind of results.\r\n\r\nWhen implement this feature should allow people to remove extra code added to files like `tox.ini` or `.pre-commit-config.yaml` that define ANSIBLE_LIBRARY in order to be able perform the linting.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/776", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/776/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/776/events", "html_url": "https://github.com/ansible/ansible-lint/issues/776", "id": 614557879, "node_id": "MDU6SXNzdWU2MTQ1NTc4Nzk=", "number": 776, "title": "Using to_yaml breaks ansible-lint", "user": {"login": "abeluck", "id": 1761767, "node_id": "MDQ6VXNlcjE3NjE3Njc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1761767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abeluck", "html_url": "https://github.com/abeluck", "followers_url": "https://api.github.com/users/abeluck/followers", "following_url": "https://api.github.com/users/abeluck/following{/other_user}", "gists_url": "https://api.github.com/users/abeluck/gists{/gist_id}", "starred_url": "https://api.github.com/users/abeluck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abeluck/subscriptions", "organizations_url": "https://api.github.com/users/abeluck/orgs", "repos_url": "https://api.github.com/users/abeluck/repos", "events_url": "https://api.github.com/users/abeluck/events{/privacy}", "received_events_url": "https://api.github.com/users/abeluck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 717403761, "node_id": "MDU6TGFiZWw3MTc0MDM3NjE=", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/incomplete", "name": "incomplete", "color": "eb6420", "default": false, "description": "Additional work or information is required"}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-08T07:19:24Z", "updated_at": "2020-06-04T17:38:24Z", "closed_at": "2020-06-04T17:38:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\nUsing ansible-lint on a playbook with `to_yaml` fails with the error \"`yaml.representer.RepresenterError: ('cannot represent an object', AnsibleUndefined)`\"\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\n$ ansible --version\r\nansible 2.9.6\r\n  config file = /home/user/ops/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/.local/lib/python3.7/site-packages/ansible\r\n  executable location = /home/user/.local/bin/ansible\r\n  python version = 3.7.3 (default, Dec 20 2019, 18:57:59) [GCC 8.3.0]\r\n\r\n$ ansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\nDebian 10 buster\r\n\r\n##### STEPS TO REPRODUCE\r\n1. Run the ansible-lint on the sample playbook\r\n`ansible-lint playbooks/to-yaml-bug.yml`\r\n\r\n**`to-yaml-bug.yml`:**\r\n```yaml\r\n---\r\n- name: to_yaml bug\r\n  hosts: localhost\r\n  tasks:\r\n    - name: dump - this works with the to from json workaround)\r\n      copy:\r\n        content: |\r\n          {{ vars | to_json | from_json | to_yaml }}\r\n        dest: /tmp/ansible-vars.yml\r\n      changed_when: false\r\n\r\n    - name: dump - fails\r\n      copy:\r\n        content: |\r\n          {{ vars | to_yaml }}\r\n        dest: /tmp/ansible-vars.yml\r\n      changed_when: false\r\n\r\n```\r\n\r\n\r\n\r\n##### Desired Behaviour\r\nansible-lint exits without error.\r\n\r\n##### Actual Behaviour\r\n\r\nansible-lint crashes with:\r\n\r\n```console\r\n$ ansible-lint playbooks/to-yaml-bug.yml\r\nTraceback (most recent call last):\r\n  File \"/home/user/.local/bin/ansible-lint\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 267, in run\r\n    for child in ansiblelint.utils.find_children(arg, self.playbook_dir):\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 163, in find_children\r\n    for child in play_children(basedir, item, playbook[1], playbook_dir):\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 214, in play_children\r\n    fail_on_undefined=False)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 182, in template\r\n    **dict(kwargs, fail_on_undefined=fail_on_undefined))\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 73, in ansible_template\r\n    return templar.template(varname, **kwargs)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/template/__init__.py\", line 611, in template\r\n    ) for v in variable]\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/template/__init__.py\", line 611, in <listcomp>\r\n    ) for v in variable]\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/template/__init__.py\", line 623, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/template/__init__.py\", line 623, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/template/__init__.py\", line 578, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/template/__init__.py\", line 837, in do_template\r\n    res = j2_concat(rf)\r\n  File \"<template>\", line 12, in root\r\n  File \"/home/user/.local/lib/python3.7/site-packages/ansible/plugins/filter/core.py\", line 66, in to_yaml\r\n    transformed = yaml.dump(a, Dumper=AnsibleDumper, allow_unicode=True, default_flow_style=default_flow_style, **kw)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/yaml/__init__.py\", line 290, in dump\r\n    return dump_all([data], stream, Dumper=Dumper, **kwds)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/yaml/__init__.py\", line 278, in dump_all\r\n    dumper.represent(data)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/yaml/representer.py\", line 27, in represent\r\n    node = self.represent_data(data)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/yaml/representer.py\", line 58, in represent_data\r\n    node = self.yaml_representers[None](self, data)\r\n  File \"/home/user/.local/lib/python3.7/site-packages/yaml/representer.py\", line 231, in represent_undefined\r\n    raise RepresenterError(\"cannot represent an object\", data)\r\nyaml.representer.RepresenterError: ('cannot represent an object', AnsibleUndefined)\r\n```\r\n```console\r\n$ ansible-playbook --syntax-check  playbooks/test2.yml \r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\r\n\r\nplaybook: playbooks/test2.yml\r\n```\r\n\r\n##### Related bugs:\r\n\r\n* Closed Nov 1, 2019 https://github.com/ansible/ansible-lint/issues/562\r\n* Closed Jan 19, 2017 https://github.com/ansible/ansible/issues/20253", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/771", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/771/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/771/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/771/events", "html_url": "https://github.com/ansible/ansible-lint/issues/771", "id": 613909357, "node_id": "MDU6SXNzdWU2MTM5MDkzNTc=", "number": 771, "title": "ansible-lint no error and no message", "user": {"login": "arogic", "id": 56870423, "node_id": "MDQ6VXNlcjU2ODcwNDIz", "avatar_url": "https://avatars2.githubusercontent.com/u/56870423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arogic", "html_url": "https://github.com/arogic", "followers_url": "https://api.github.com/users/arogic/followers", "following_url": "https://api.github.com/users/arogic/following{/other_user}", "gists_url": "https://api.github.com/users/arogic/gists{/gist_id}", "starred_url": "https://api.github.com/users/arogic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arogic/subscriptions", "organizations_url": "https://api.github.com/users/arogic/orgs", "repos_url": "https://api.github.com/users/arogic/repos", "events_url": "https://api.github.com/users/arogic/events{/privacy}", "received_events_url": "https://api.github.com/users/arogic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-07T09:28:41Z", "updated_at": "2020-05-07T10:57:19Z", "closed_at": "2020-05-07T10:57:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI installed ansible-lint (version 4.2.0) on my Ubuntu 18.04 and my macOS Catalina 10.15.4, but when I run ansible-lint against a playbook it doesn\u2019t show anything, no error, no message. On my Raspberry Pi I am running ansbile (2.7.7) and ansible-lint (4.2.0) against the same playbook and there it is showing me errors. \r\n\r\nDoes anybody else experience same behaviour?  \r\n\r\nUbuntu 18.04 [not working]:\r\nansible 2.9.6\r\nansible-lint 4.2.0\r\n\r\nmacOS Catalina 10.15.4 [not working]:\r\nansible 2.9.6\r\nansible-lint 4.2.0\r\n\r\nRaspian 10 (Buster) [working]:\r\nansible 2.7.7\r\nansible-lint 4.2.0\r\n\r\nInstalled ansible and ansible-lint with pip3 on Ubuntu and with brew on macOS.\r\n\r\nI even tried ansible-lint version 4.1.0 and with ansible version 2.7.7, but no success. \r\n\r\nThanks for your help\r\n\r\nRegards\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/764", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/764/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/764/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/764/events", "html_url": "https://github.com/ansible/ansible-lint/issues/764", "id": 613172868, "node_id": "MDU6SXNzdWU2MTMxNzI4Njg=", "number": 764, "title": "github workflows need to archive and upload tox logs", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-06T09:20:08Z", "updated_at": "2020-05-06T16:49:34Z", "closed_at": "2020-05-06T16:49:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Sometimes we get CI/CD failures that cannot be debugged with only console output and which do not reproduce locally.\r\n\r\nFor start we should archive `.tox/{envname}/log/` in order to allow use to access the log files. This can be implemented using something similar to:\r\n\r\n```\r\n    - name: Archive logs\r\n      uses: actions/upload-artifact@v1\r\n      with:\r\n        name: logs.zip\r\n        path: .tox/${{ matrix.toxenv }}/log/ # <-- var needs to be defined correctly\r\n```\r\n\r\nA full working implementation can be seen at https://github.com/pycontribs/tendo/blob/master/.github/workflows/tests.yml#L20-L26\r\n\r\nNote that the artifact upload features are very limited in current version, https://github.com/actions/upload-artifact/issues/39 may give us some insights about the future. Apparently they want to make it work without zip files.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/763", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/763/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/763/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/763/events", "html_url": "https://github.com/ansible/ansible-lint/issues/763", "id": 613017795, "node_id": "MDU6SXNzdWU2MTMwMTc3OTU=", "number": 763, "title": "ansible-lint fails if not running in a directory that is a .git repo", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-06T02:59:08Z", "updated_at": "2020-05-07T11:11:34Z", "closed_at": "2020-05-07T11:11:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\n\r\nIt would seem that in https://github.com/ansible/ansible-lint/pull/650, functionality was added that allowed `ansible-lint` to discover YAML files to lint if a git repository was not available.\r\n\r\nHowever, a test playbook I created today didn't work, when I was in a directory that was not part of a git repo.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible 2.9.7\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\n\r\nmacOS Catalina\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nCreate a new directory outside of a git repo:\r\n\r\n    mkdir playbook && cd playbook\r\n\r\nCreate a playbook `main.yml` inside with the contents:\r\n\r\n```yaml\r\n- hosts: localhost\r\n  gather_facts: false\r\n  connection: local\r\n\r\n  tasks:\r\n    - name: Register the output of the 'uptime' command.\r\n      shell: test\r\n      register: system_uptime\r\n```\r\n\r\nRun `ansible-lint` in the same directory as the playbook.\r\n\r\n##### Desired Behaviour\r\n\r\nansible-lint detects yaml files without a .git repo present in the directory heirarchy.\r\n\r\n##### Actual Behaviour\r\n\r\n```\r\n$ ansible-lint   \r\nfatal: not a git repository (or any of the parent directories): .git\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/__main__.py\", line 153, in main\r\n    args = get_playbooks_and_roles(options=options)\r\n  File \"/usr/local/lib/python3.7/site-packages/ansiblelint/utils.py\", line 774, in get_playbooks_and_roles\r\n    universal_newlines=True).split()))\r\n  File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/subprocess.py\", line 411, in check_output\r\n    **kwargs).stdout\r\n  File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/subprocess.py\", line 512, in run\r\n    output=stdout, stderr=stderr)\r\nsubprocess.CalledProcessError: Command '['git', 'ls-files', '*.yaml', '*.yml']' returned non-zero exit status 128.\r\n```\r\n\r\n##### Workarounds\r\n\r\nFor now, the best workaround is to init a git repo in the same directory, and add any playbooks you want `ansible-lint` to discover to it:\r\n\r\n    git init .\r\n    git add -A\r\n    git commit -m \"Added stuff so ansible-lint can pick it up.\"\r\n\r\nAnd then run it again.\r\n\r\nOr, if you don't want to create a repo, you could pass any relevant files directly to the command as arguments to bypass the discovery mechanism, e.g.:\r\n\r\n    ansible-lint main.yml", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/761", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/761/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/761/events", "html_url": "https://github.com/ansible/ansible-lint/issues/761", "id": 612570385, "node_id": "MDU6SXNzdWU2MTI1NzAzODU=", "number": 761, "title": "3rd time's the charm", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-05T12:38:40Z", "updated_at": "2020-05-05T12:44:31Z", "closed_at": "2020-05-05T12:39:08Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "woot?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/760", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/760/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/760/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/760/events", "html_url": "https://github.com/ansible/ansible-lint/issues/760", "id": 612568894, "node_id": "MDU6SXNzdWU2MTI1Njg4OTQ=", "number": 760, "title": "ignore2", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-05T12:36:06Z", "updated_at": "2020-05-05T12:37:35Z", "closed_at": "2020-05-05T12:37:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "testing", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/759", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/759/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/759/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/759/events", "html_url": "https://github.com/ansible/ansible-lint/issues/759", "id": 612563153, "node_id": "MDU6SXNzdWU2MTI1NjMxNTM=", "number": 759, "title": "Ignore", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-05T12:26:07Z", "updated_at": "2020-05-05T12:35:50Z", "closed_at": "2020-05-05T12:35:50Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and master branch are affected too -->\r\n\r\n##### Summary\r\n<!--- Explain the problem briefly below -->\r\n\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\nansible --version\r\n\r\nansible-lint --version\r\n\r\n```\r\n\r\n- ansible installation method: one of source, pip, OS package\r\n- ansible-lint installation method: one of source, pip, OS package\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between tripple backticks below -->\r\n```console (paste below)\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nPossible security bugs should be reported via email to `security@ansible.com`\r\n\r\n##### Actual Behaviour\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example] with:\r\n- playbook\r\n- output of running ansible-lint\r\n- if you're getting a stack trace, output of\r\n  `ansible-playbook --syntax-check playbook`\r\n\r\n\r\n<!--- Paste verbatim command output between tripple backticks -->\r\n```paste below\r\n\r\n```\r\n\r\n\r\n[minimum complete verifiable example]: http://stackoverflow.com/help/mcve\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/753", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/753/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/753/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/753/events", "html_url": "https://github.com/ansible/ansible-lint/issues/753", "id": 610352759, "node_id": "MDU6SXNzdWU2MTAzNTI3NTk=", "number": 753, "title": "pre-commit hook yields false positives", "user": {"login": "goodspark", "id": 29210237, "node_id": "MDQ6VXNlcjI5MjEwMjM3", "avatar_url": "https://avatars3.githubusercontent.com/u/29210237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goodspark", "html_url": "https://github.com/goodspark", "followers_url": "https://api.github.com/users/goodspark/followers", "following_url": "https://api.github.com/users/goodspark/following{/other_user}", "gists_url": "https://api.github.com/users/goodspark/gists{/gist_id}", "starred_url": "https://api.github.com/users/goodspark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goodspark/subscriptions", "organizations_url": "https://api.github.com/users/goodspark/orgs", "repos_url": "https://api.github.com/users/goodspark/repos", "events_url": "https://api.github.com/users/goodspark/events{/privacy}", "received_events_url": "https://api.github.com/users/goodspark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-30T20:07:14Z", "updated_at": "2020-06-19T09:50:28Z", "closed_at": "2020-06-18T08:52:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\n\r\nThe ansible-lint hook always passes.\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n\r\n```console (paste below)\r\nansible --version\r\nansible 2.9.7\r\n  config file = /home/sam/tmp/anslint/ansible.cfg\r\n  configured module search path = ['/home/sam/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/sam/tmp/anslint/venv/lib/python3.8/site-packages/ansible\r\n  executable location = /home/sam/tmp/anslint/venv/bin/ansible\r\n  python version = 3.8.1 (default, Jan 22 2020, 10:59:28) [GCC 7.4.0]\r\n\r\nansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 18.04\r\ngit 2.26.2\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nI've attached a git archive of a repo as a minimal example. Extract, `git init`, add all files and commit, and then run both `ansible-lint` and `pre-commit run -a` to compare.\r\n\r\n[example.tar.gz](https://github.com/ansible/ansible-lint/files/4560913/example.tar.gz)\r\n\r\n##### Desired Behaviour\r\n\r\nI expect failures for the asd role, since it's using the shell command unnecessarily.\r\n\r\nWhen I run ansible-lint directly:\r\n```console\r\nansible-lint -v\r\nFound roles: \r\nFound playbooks: ansible/playbooks/roles/asd/tasks/main.yml ansible/playbooks/thing.yml\r\nExamining ansible/playbooks/roles/asd/tasks/main.yml of type playbook\r\nExamining ansible/playbooks/thing.yml of type playbook\r\nExamining ansible/playbooks/roles/asd/tasks/main.yml of type tasks\r\n[301] Commands should not change things if nothing needs doing\r\nansible/playbooks/roles/asd/tasks/main.yml:2\r\nTask/Handler: asasd\r\n\r\n[305] Use shell only when shell functionality is required\r\nansible/playbooks/roles/asd/tasks/main.yml:2\r\nTask/Handler: asasd\r\n```\r\n\r\n##### Actual Behaviour\r\n\r\n```console\r\npre-commit run -a\r\nAnsible-lint.............................................................Passed\r\n```\r\n\r\nIn addition, if you remove the shell command in the asd role and then add it back in a new commit (simulating a normal run of pre-commit), ansible-lint still yields a false positive.\r\n\r\n```console\r\ngit diff --cached\r\ndiff --git a/ansible/playbooks/roles/asd/tasks/main.yml b/ansible/playbooks/roles/asd/tasks/main.yml\r\nindex ed97d53..fc4cf0c 100644\r\n--- a/ansible/playbooks/roles/asd/tasks/main.yml\r\n+++ b/ansible/playbooks/roles/asd/tasks/main.yml\r\n@@ -1 +1,3 @@\r\n ---\r\n+- name: asasd\r\n+  shell: echo asd\r\n\r\ngit commit -m asd\r\nAnsible-lint.............................................................Passed\r\n[master ed1d4dc] asd\r\n 1 file changed, 2 insertions(+)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/752", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/752/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/752/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/752/events", "html_url": "https://github.com/ansible/ansible-lint/issues/752", "id": 609443090, "node_id": "MDU6SXNzdWU2MDk0NDMwOTA=", "number": 752, "title": "GitHasVersionRule seems incorrect / obsolete", "user": {"login": "AdamWill", "id": 916551, "node_id": "MDQ6VXNlcjkxNjU1MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/916551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdamWill", "html_url": "https://github.com/AdamWill", "followers_url": "https://api.github.com/users/AdamWill/followers", "following_url": "https://api.github.com/users/AdamWill/following{/other_user}", "gists_url": "https://api.github.com/users/AdamWill/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdamWill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdamWill/subscriptions", "organizations_url": "https://api.github.com/users/AdamWill/orgs", "repos_url": "https://api.github.com/users/AdamWill/repos", "events_url": "https://api.github.com/users/AdamWill/events{/privacy}", "received_events_url": "https://api.github.com/users/AdamWill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340724, "node_id": "MDU6TGFiZWwxMTMzMzQwNzI0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/low", "name": "priority/low", "color": "c2e0c6", "default": false, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 52026480, "node_id": "MDU6TGFiZWw1MjAyNjQ4MA==", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/invalid", "name": "status/invalid", "color": "e6e6e6", "default": false, "description": "Not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-29T23:47:33Z", "updated_at": "2020-05-02T21:56:04Z", "closed_at": "2020-05-02T21:55:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### Summary\r\nGitHasVersionRule - rule 401 - is \"Git checkouts must contain explicit version\". But the git module documentation does not give any indication that this is a rule or best practice: rather it documents that [the default value is 'HEAD' and this is a valid value](https://docs.ansible.com/ansible/latest/modules/git_module.html#parameter-version).\r\n\r\n\r\n##### Issue Type\r\n\r\n- Bug Report\r\n\r\n##### Ansible and Ansible Lint details\r\n<!--- Paste verbatim output between tripple backticks -->\r\n```console (paste below)\r\n[adamw@adam ansible-infra (master *%)]$ ansible --version\r\nansible 2.9.7\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/adamw/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 28 2020, 00:00:00) [GCC 10.0.1 20200216 (Red Hat 10.0.1-0.8)]\r\n[adamw@adam ansible-infra (master *%)]$ ansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: OS package\r\n- ansible-lint installation method: OS package\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nFedora 33 (Rawhide).\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nRun ansible-lint on a playbook containing a git directive with no version setting.\r\n\r\n<!--- Paste example playbooks or commands between tripple backticks below -->\r\n```console (paste below)\r\n- name: Check out fedora_openqa (scheduler / reporter tool)\r\n  git:\r\n    repo: https://pagure.io/fedora-qa/fedora_openqa.git\r\n    dest: /root/fedora_openqa\r\n  register: gittools\r\n  when: \"(toolsbranch.stderr.find('Not a git repository') != -1) or (toolsbranch.stdout.find('On branch master') != -1)\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### Desired Behaviour\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nNo error reported.\r\n\r\n##### Actual Behaviour\r\nError reported.\r\n\r\n<!--- Paste verbatim command output between tripple backticks -->\r\n```paste below\r\n[adamw@adam ansible-infra (master *%)]$ ansible-lint roles/openqa/dispatcher/\r\n[401] Git checkouts must contain explicit version\r\nroles/openqa/dispatcher/tasks/main.yml:200\r\nTask/Handler: Check out fedora_openqa (scheduler / reporter tool)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/748", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/748/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/748/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/748/events", "html_url": "https://github.com/ansible/ansible-lint/issues/748", "id": 606865741, "node_id": "MDU6SXNzdWU2MDY4NjU3NDE=", "number": 748, "title": "[HELP WANTED] [SEND PR] Get rid of the `bin/ansible-lint` script", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}, {"id": 1133351166, "node_id": "MDU6TGFiZWwxMTMzMzUxMTY2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/new", "name": "status/new", "color": "95ef7f", "default": false, "description": "Triage required"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-04-25T22:10:50Z", "updated_at": "2020-05-06T13:40:58Z", "closed_at": "2020-05-06T13:38:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "##### Summary\r\n<!--- Explain the problem briefly below -->\r\nIt's not used in runtime. I only saw it in `TestCliRolePaths.py`. It should be pretty trivial to replace its usage with something more straightforward\r\n\r\n##### Issue Type\r\n\r\n- Refactoring suggestion", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/735", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/735/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/735/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/735/events", "html_url": "https://github.com/ansible/ansible-lint/issues/735", "id": 601021818, "node_id": "MDU6SXNzdWU2MDEwMjE4MTg=", "number": 735, "title": "[HELP WANTED] [SEND PR] Missing Git breaks the auto-discovery of YAML files", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-16T12:46:37Z", "updated_at": "2020-04-23T20:47:17Z", "closed_at": "2020-04-23T20:47:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "FTR here's the traceback from that log:\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/__main__.py\", line 153, in main\r\n    args = get_playbooks_and_roles(options=options)\r\n  File \"/usr/local/lib/python3.8/site-packages/ansiblelint/utils.py\", line 772, in get_playbooks_and_roles\r\n    files = OrderedDict.fromkeys(sorted(subprocess.check_output(\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 411, in check_output\r\n    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 489, in run\r\n    with Popen(*popenargs, **kwargs) as process:\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 854, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 1702, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'git'\r\n```\r\n\r\n_Originally posted by @webknjaz in https://github.com/ansible/ansible-lint-action/pull/26#issuecomment-614621653_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/731", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/731/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/731/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/731/events", "html_url": "https://github.com/ansible/ansible-lint/issues/731", "id": 597187475, "node_id": "MDU6SXNzdWU1OTcxODc0NzU=", "number": 731, "title": "[HELP WANTED] [SEND PR] Recover calling `get_playbooks_and_roles`", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 717403761, "node_id": "MDU6TGFiZWw3MTc0MDM3NjE=", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/incomplete", "name": "incomplete", "color": "eb6420", "default": false, "description": "Additional work or information is required"}], "state": "closed", "locked": false, "assignee": {"login": "cans", "id": 582326, "node_id": "MDQ6VXNlcjU4MjMyNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/582326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cans", "html_url": "https://github.com/cans", "followers_url": "https://api.github.com/users/cans/followers", "following_url": "https://api.github.com/users/cans/following{/other_user}", "gists_url": "https://api.github.com/users/cans/gists{/gist_id}", "starred_url": "https://api.github.com/users/cans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cans/subscriptions", "organizations_url": "https://api.github.com/users/cans/orgs", "repos_url": "https://api.github.com/users/cans/repos", "events_url": "https://api.github.com/users/cans/events{/privacy}", "received_events_url": "https://api.github.com/users/cans/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cans", "id": 582326, "node_id": "MDQ6VXNlcjU4MjMyNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/582326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cans", "html_url": "https://github.com/cans", "followers_url": "https://api.github.com/users/cans/followers", "following_url": "https://api.github.com/users/cans/following{/other_user}", "gists_url": "https://api.github.com/users/cans/gists{/gist_id}", "starred_url": "https://api.github.com/users/cans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cans/subscriptions", "organizations_url": "https://api.github.com/users/cans/orgs", "repos_url": "https://api.github.com/users/cans/repos", "events_url": "https://api.github.com/users/cans/events{/privacy}", "received_events_url": "https://api.github.com/users/cans/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-04-09T10:34:48Z", "updated_at": "2020-05-07T11:16:57Z", "closed_at": "2020-05-07T11:16:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# What's up?\r\n\r\nWhile updating #645, I noticed that [the call to `get_playbooks_and_roles()` got removed](https://github.com/ansible/ansible-lint/pull/573/files#diff-e5d3af2dcf25a4d665f0ef298f146a85L154) and it seems like now it's not called from anywhere. It needs to be recovered. I guess it should go to `get_config()` in the `cli` module.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/730", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/730/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/730/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/730/events", "html_url": "https://github.com/ansible/ansible-lint/issues/730", "id": 597113635, "node_id": "MDU6SXNzdWU1OTcxMTM2MzU=", "number": 730, "title": "Replace deprecate optparse with more modern implementation", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-09T08:28:58Z", "updated_at": "2020-04-24T15:32:06Z", "closed_at": "2020-04-24T15:32:06Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I would like to replace the outdated optparse with a more modern library. The official replacement from stdlibis argparse but I would like to use the opportunity to evaluate if it would not make sense to use something even more advanced.\r\n\r\n* `argparse` - stdlib, no extra dependencies, already an existing https://github.com/ansible/ansible-lint/pull/645/files (needs rebase, hopefully author still has interested)\r\n* [click](https://pypi.org/project/click/) (BSD) - very powerful, extensible with plugins, already used by molecule, actively maintained (after a gap in 2019).(9k\u2605)\r\n* [docopt](https://pypi.org/project/docopt/#history) - ruled out, dead.\r\n* [fire](https://pypi.org/project/fire/) - a popular google backed project, but this also makes it a potential liability. (16k\u2605)\r\n\r\nReferences:\r\n* http://xion.io/post/programming/python-dont-use-click.html - seems \"bit\" biased but worth the read \r\n\r\n@awcrosby @webknjaz Any preferences? I was originally aiming to support click but after reading more and considering that we are talking only about a linter, probably argparse would be the best bet.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/727", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/727/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/727/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/727/events", "html_url": "https://github.com/ansible/ansible-lint/issues/727", "id": 596281778, "node_id": "MDU6SXNzdWU1OTYyODE3Nzg=", "number": 727, "title": "Publish official docker image ", "user": {"login": "jamielennox", "id": 416057, "node_id": "MDQ6VXNlcjQxNjA1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/416057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamielennox", "html_url": "https://github.com/jamielennox", "followers_url": "https://api.github.com/users/jamielennox/followers", "following_url": "https://api.github.com/users/jamielennox/following{/other_user}", "gists_url": "https://api.github.com/users/jamielennox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamielennox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamielennox/subscriptions", "organizations_url": "https://api.github.com/users/jamielennox/orgs", "repos_url": "https://api.github.com/users/jamielennox/repos", "events_url": "https://api.github.com/users/jamielennox/events{/privacy}", "received_events_url": "https://api.github.com/users/jamielennox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340724, "node_id": "MDU6TGFiZWwxMTMzMzQwNzI0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/low", "name": "priority/low", "color": "c2e0c6", "default": false, "description": ""}, {"id": 1133355680, "node_id": "MDU6TGFiZWwxMTMzMzU1Njgw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/proposal", "name": "proposal", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-08T03:24:44Z", "updated_at": "2020-05-05T15:07:11Z", "closed_at": "2020-05-05T15:07:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Feature request\r\n\r\nI would expect all of us are using ansible-lint in a CI capacity. Lots of more modern CI systems will only run jobs in a docker container so that the job can't affect the state of the host. \r\n\r\nIt would be great if there was an official ansible-lint image that we could use when running in CI systems rather than build our own. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/718", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/718/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/718/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/718/events", "html_url": "https://github.com/ansible/ansible-lint/issues/718", "id": 593712768, "node_id": "MDU6SXNzdWU1OTM3MTI3Njg=", "number": 718, "title": "[HELP WANTED] Clean up the contributing file", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340724, "node_id": "MDU6TGFiZWwxMTMzMzQwNzI0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/low", "name": "priority/low", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "slsh1o", "id": 33605143, "node_id": "MDQ6VXNlcjMzNjA1MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33605143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slsh1o", "html_url": "https://github.com/slsh1o", "followers_url": "https://api.github.com/users/slsh1o/followers", "following_url": "https://api.github.com/users/slsh1o/following{/other_user}", "gists_url": "https://api.github.com/users/slsh1o/gists{/gist_id}", "starred_url": "https://api.github.com/users/slsh1o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slsh1o/subscriptions", "organizations_url": "https://api.github.com/users/slsh1o/orgs", "repos_url": "https://api.github.com/users/slsh1o/repos", "events_url": "https://api.github.com/users/slsh1o/events{/privacy}", "received_events_url": "https://api.github.com/users/slsh1o/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "slsh1o", "id": 33605143, "node_id": "MDQ6VXNlcjMzNjA1MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33605143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slsh1o", "html_url": "https://github.com/slsh1o", "followers_url": "https://api.github.com/users/slsh1o/followers", "following_url": "https://api.github.com/users/slsh1o/following{/other_user}", "gists_url": "https://api.github.com/users/slsh1o/gists{/gist_id}", "starred_url": "https://api.github.com/users/slsh1o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slsh1o/subscriptions", "organizations_url": "https://api.github.com/users/slsh1o/orgs", "repos_url": "https://api.github.com/users/slsh1o/repos", "events_url": "https://api.github.com/users/slsh1o/events{/privacy}", "received_events_url": "https://api.github.com/users/slsh1o/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-04-04T01:15:05Z", "updated_at": "2020-04-06T20:26:35Z", "closed_at": "2020-04-06T20:26:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We need to clean up the mentions of DCO and signoff from `CONTRIBUTING.md` as it's not enforced anymore.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/716", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/716/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/716/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/716/events", "html_url": "https://github.com/ansible/ansible-lint/issues/716", "id": 593392407, "node_id": "MDU6SXNzdWU1OTMzOTI0MDc=", "number": 716, "title": "proposal: reinstate editable installs on ansible-lint", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1958633923, "node_id": "MDU6TGFiZWwxOTU4NjMzOTIz", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/Polls", "name": "Polls", "color": "ededed", "default": false, "description": null}, {"id": 1133355680, "node_id": "MDU6TGFiZWwxMTMzMzU1Njgw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/proposal", "name": "proposal", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-04-03T13:43:04Z", "updated_at": "2020-04-06T22:27:11Z", "closed_at": "2020-04-06T22:27:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "During the last year the `setup.py` was silently removed from `ansible-lint` project. This had a side-effect that made impossible to perform editable installs of the project, something that works very fine with other ansible projects.\r\n\r\nEditable installs are essential for anyone that does **development and contributions**. Without `-e` mode,  making changes to a python library becomes a serious inconvenience. Developer has to repackage and reinstall the library before running any code again. Even debugging becomes a struggle as you often discover that the code you run is not the one you modified.\r\n\r\nansible-lint is the first python package I encountered that removed `setup.py`. The deprecation of setup.py is planned by PEP-518 but effective removal of the file was a long-term plan.\r\n\r\nAs a **community project**, ansible-lint needs to **ease contributions** from developers, not introducing additional contribution barriers.  I am more than willing to help with the additional maintenance needed for keeping the editable mode working.\r\n\r\nI was told that the original decision was made after an unrecorded discussion made on irc (outside of a meeting). Due to this, I want to reopen the subject and give opportunity to gather feedback from users and developers, especially those that made or wanted to contribute to ansible-lint in the past.\r\n\r\nShould we reinstate editable installs with ansible-lint? **Click on the bar to vote, keep in mind that you cannot undo your vote.**\r\n\r\n[![](https://api.gh-polls.com/poll/01E504FSJ085KQZB408HF2TXYB/yes)](https://api.gh-polls.com/poll/01E504FSJ085KQZB408HF2TXYB/yes/vote)\r\n[![](https://api.gh-polls.com/poll/01E504FSJ085KQZB408HF2TXYB/no)](https://api.gh-polls.com/poll/01E504FSJ085KQZB408HF2TXYB/no/vote)\r\n[![](https://api.gh-polls.com/poll/01E504FSJ085KQZB408HF2TXYB/not%20sure)](https://api.gh-polls.com/poll/01E504FSJ085KQZB408HF2TXYB/not%20sure/vote)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/705", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/705/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/705/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/705/events", "html_url": "https://github.com/ansible/ansible-lint/issues/705", "id": 589194496, "node_id": "MDU6SXNzdWU1ODkxOTQ0OTY=", "number": 705, "title": "become_user inside block does not inherit become applied to block, triggers 501", "user": {"login": "m-a-leclercq", "id": 13354100, "node_id": "MDQ6VXNlcjEzMzU0MTAw", "avatar_url": "https://avatars0.githubusercontent.com/u/13354100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-a-leclercq", "html_url": "https://github.com/m-a-leclercq", "followers_url": "https://api.github.com/users/m-a-leclercq/followers", "following_url": "https://api.github.com/users/m-a-leclercq/following{/other_user}", "gists_url": "https://api.github.com/users/m-a-leclercq/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-a-leclercq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-a-leclercq/subscriptions", "organizations_url": "https://api.github.com/users/m-a-leclercq/orgs", "repos_url": "https://api.github.com/users/m-a-leclercq/repos", "events_url": "https://api.github.com/users/m-a-leclercq/events{/privacy}", "received_events_url": "https://api.github.com/users/m-a-leclercq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220380714, "node_id": "MDU6TGFiZWwyMjIwMzgwNzE0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 717403761, "node_id": "MDU6TGFiZWw3MTc0MDM3NjE=", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/incomplete", "name": "incomplete", "color": "eb6420", "default": false, "description": "Additional work or information is required"}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-27T15:00:38Z", "updated_at": "2020-08-18T10:39:44Z", "closed_at": "2020-08-18T10:39:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version : ansible 2.9.6\r\nansible-lint --version : 4.2.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\nNo error.\r\n\r\n# Actual Behaviour (Bug report only)\r\nRule 501 triggered\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](http://stackoverflow.com/help/mcve)\r\nwith:\r\n\r\n```\r\n- name: create user with group, schedule cron and do a one time run of said cron\r\n  become: true\r\n  block:\r\n    - name: create user and group\r\n      import_tasks: system.yml\r\n\r\n    - name: create .sh file and schedule cron\r\n      import_tasks: config.yml\r\n\r\n    - name: run .sh once\r\n      become_user: my_newly_created_user\r\n      command: \"{{ my_shell_path }}/myshell.sh\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/704", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/704/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/704/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/704/events", "html_url": "https://github.com/ansible/ansible-lint/issues/704", "id": 587010023, "node_id": "MDU6SXNzdWU1ODcwMTAwMjM=", "number": 704, "title": "Rule 301: exclude commands only checking syntax/configuration ", "user": {"login": "simon04", "id": 782446, "node_id": "MDQ6VXNlcjc4MjQ0Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/782446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simon04", "html_url": "https://github.com/simon04", "followers_url": "https://api.github.com/users/simon04/followers", "following_url": "https://api.github.com/users/simon04/following{/other_user}", "gists_url": "https://api.github.com/users/simon04/gists{/gist_id}", "starred_url": "https://api.github.com/users/simon04/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simon04/subscriptions", "organizations_url": "https://api.github.com/users/simon04/orgs", "repos_url": "https://api.github.com/users/simon04/repos", "events_url": "https://api.github.com/users/simon04/events{/privacy}", "received_events_url": "https://api.github.com/users/simon04/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52026480, "node_id": "MDU6TGFiZWw1MjAyNjQ4MA==", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/invalid", "name": "status/invalid", "color": "e6e6e6", "default": false, "description": "Not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-24T14:40:19Z", "updated_at": "2020-03-24T14:50:04Z", "closed_at": "2020-03-24T14:49:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- [x] Bug report\r\n- [x] Feature request\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.9.6\r\n$ ansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\nOS package via Arch Linux\r\n\r\n# Desired Behaviour\r\n\r\nI would like to test the nginx configuration on the server using `nginx -t`. This should not trigger rule 301.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nThe following snippet triggers rule 301:\r\n\r\n```yml\r\n---\r\n- name: Check nginx config\r\n  command: nginx -t -c /etc/nginx/nginx.conf\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/703", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/703/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/703/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/703/events", "html_url": "https://github.com/ansible/ansible-lint/issues/703", "id": 586835623, "node_id": "MDU6SXNzdWU1ODY4MzU2MjM=", "number": 703, "title": "Adjust test to not fail when testing against ansible/ansible@devel", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340097, "node_id": "MDU6TGFiZWwxMTMzMzQwMDk3", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/high", "name": "priority/high", "color": "ff8800", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-24T09:58:54Z", "updated_at": "2020-05-27T12:00:14Z", "closed_at": "2020-05-27T12:00:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```console\r\nansible --version\r\ndevel\r\n```\r\n```console\r\nansible-lint --version\r\ndevel\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nGreen CI\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nIn places where ansible-lint tries to resolve a module name that's been removed, tests fail. Like this:\r\n```console\r\nE               ansible.errors.AnsibleParserError: couldn't resolve module/action 'win_chocolatey'. This often indicates a misspelling, missing collection, or incorrect module path.\r\nE               \r\nE               The error appears to be in '<unicode string>': line 16, column 5, but may\r\nE               be elsewhere in the file depending on the exact syntax problem.\r\nE               \r\nE               (could not open file to display line)\r\n```\r\n\r\nThere's a lot of failure instances in this job: https://travis-ci.com/github/ansible/ansible-lint/jobs/301462230#L485.\r\n\r\nThe solution would be to either (1) install collections that contain those modules or (2) change tests to hit a small subset of core-supported modules.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/702", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/702/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/702/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/702/events", "html_url": "https://github.com/ansible/ansible-lint/issues/702", "id": 586246882, "node_id": "MDU6SXNzdWU1ODYyNDY4ODI=", "number": 702, "title": "Testing fails under macOS-latest @ GitHub Actions CI/CD workflows", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-23T14:21:16Z", "updated_at": "2020-04-25T23:16:45Z", "closed_at": "2020-04-25T23:16:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\nAnsible N/A + ansible-lint devel\r\n\r\n# Desired Behaviour\r\n\r\nGreen CI\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nLooks like the recent PRs didn't cause this (https://github.com/ansible/ansible-lint/pull/701#issuecomment-602625398) so we need to figure out if is some dependency that's changed or GH upgraded their macOS VM.\r\n\r\nThe last success:\r\n\r\n- https://github.com/ansible/ansible-lint/runs/516905047\r\n\r\nCurrent failures:\r\n\r\n- https://github.com/ansible/ansible-lint/runs/527585395\r\n- https://github.com/ansible/ansible-lint/runs/527584238\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/698", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/698/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/698/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/698/events", "html_url": "https://github.com/ansible/ansible-lint/issues/698", "id": 585553165, "node_id": "MDU6SXNzdWU1ODU1NTMxNjU=", "number": 698, "title": "proposal: reduce support matrix to last two versions of ansible", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-21T18:27:51Z", "updated_at": "2020-04-06T20:24:21Z", "closed_at": "2020-04-06T20:24:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "At this moment ansible-lint is tested using 4 versions of ansible: N-2, N-1, N and N+1 (devel) and this puts a serious strain on CI and maintenance.\r\n\r\nFew months back molecule **dropped support for N-2 version of ansible** after we did a survey, explaining users why we are doing it. So far we had no problem with this approach, not even a single complaint.\r\n\r\nThis is why I propose making the same change and document it, so users would not be surprised. \r\nThe goal is to follow Ansible releases as soon we can after a release. \r\n\r\nTesting devel branch has a special nature as these jobs do not perform an exhaustive testing and their failure should not prevent a merge. This allows us to prepare for future changes without being forced to fix bugs after the release, also allows us to give feedback to ansible team about a possible breaking changes before the release is made.\r\n\r\nI raised this ticked based on a discussion I had on #ansible-galaxy channel but I hope to get feedback (thumbs up/down) about it before creating a PR to implement the change.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/690", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/690/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/690/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/690/events", "html_url": "https://github.com/ansible/ansible-lint/issues/690", "id": 578417618, "node_id": "MDU6SXNzdWU1Nzg0MTc2MTg=", "number": 690, "title": "206 false positive. ", "user": {"login": "alex-left", "id": 23310987, "node_id": "MDQ6VXNlcjIzMzEwOTg3", "avatar_url": "https://avatars0.githubusercontent.com/u/23310987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex-left", "html_url": "https://github.com/alex-left", "followers_url": "https://api.github.com/users/alex-left/followers", "following_url": "https://api.github.com/users/alex-left/following{/other_user}", "gists_url": "https://api.github.com/users/alex-left/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex-left/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex-left/subscriptions", "organizations_url": "https://api.github.com/users/alex-left/orgs", "repos_url": "https://api.github.com/users/alex-left/repos", "events_url": "https://api.github.com/users/alex-left/events{/privacy}", "received_events_url": "https://api.github.com/users/alex-left/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-10T08:38:09Z", "updated_at": "2020-07-24T18:10:08Z", "closed_at": "2020-07-24T18:10:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.9.2\r\n\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\nI have a line like:\r\n```\r\n src: \"{{\u00a0prometheus_config |\u00a0default('prometheus.yml.j2') }}\"\r\n```\r\n\r\nAnsible-lint throws an 206 but the line have right syntax an spaces. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/683", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/683/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/683/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/683/events", "html_url": "https://github.com/ansible/ansible-lint/issues/683", "id": 569729836, "node_id": "MDU6SXNzdWU1Njk3Mjk4MzY=", "number": 683, "title": "ImportError: No module named six", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 717403761, "node_id": "MDU6TGFiZWw3MTc0MDM3NjE=", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/incomplete", "name": "incomplete", "color": "eb6420", "default": false, "description": "Additional work or information is required"}, {"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2020-02-24T09:26:39Z", "updated_at": "2020-03-04T19:13:15Z", "closed_at": "2020-03-04T19:13:15Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n4.2.0\r\n```\r\n\r\n# Desired Behaviour\r\n\r\nAnsible-lint must assure it installs six all the time.\r\n\r\n# Actual Behaviour (Bug report only)\r\nFull log https://logserver.rdoproject.org/46/25246/13/check/tox-linters/2a3ccec/job-output.txt\r\n\r\n```\r\n2020-02-24 09:13:28.954259 | rdo-centos-7 |       Installing collected packages: setuptools, setuptools-scm, setuptools-scm-git-archive, wheel, MarkupSafe, jinja2, PyYAML, six, ipaddress, pycparser, cffi, enum34, cryptography, ansible, scandir, pathlib2, ruamel.ordereddict, ruamel.yaml.clib, ruamel.yaml\r\n2020-02-24 09:13:28.954327 | rdo-centos-7 |       ERROR: Exception:\r\n2020-02-24 09:13:28.954395 | rdo-centos-7 |       Traceback (most recent call last):\r\n2020-02-24 09:13:28.954608 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip/_internal/cli/base_command.py\", line 186, in _main\r\n2020-02-24 09:13:28.954701 | rdo-centos-7 |           status = self.run(options, args)\r\n2020-02-24 09:13:28.954867 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip/_internal/commands/install.py\", line 404, in run\r\n2020-02-24 09:13:28.954931 | rdo-centos-7 |           use_user_site=options.use_user_site,\r\n2020-02-24 09:13:28.955078 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip/_internal/req/__init__.py\", line 71, in install_given_reqs\r\n2020-02-24 09:13:28.955125 | rdo-centos-7 |           **kwargs\r\n2020-02-24 09:13:28.955279 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip/_internal/req/req_install.py\", line 787, in install\r\n2020-02-24 09:13:28.955330 | rdo-centos-7 |           prefix=prefix,\r\n2020-02-24 09:13:28.955486 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip/_internal/locations.py\", line 186, in get_scheme\r\n2020-02-24 09:13:28.955628 | rdo-centos-7 |           dist_name, user, home, root, isolated, prefix\r\n2020-02-24 09:13:28.955802 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip/_internal/locations.py\", line 109, in distutils_scheme\r\n2020-02-24 09:13:28.955870 | rdo-centos-7 |           d.parse_config_files()\r\n2020-02-24 09:13:28.956003 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib64/python2.7/site.py\", line 152, in parse_config_files\r\n2020-02-24 09:13:28.956089 | rdo-centos-7 |           result = old_parse_config_files(self, *args, **kwargs)\r\n2020-02-24 09:13:28.956278 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/dist.py\", line 702, in parse_config_files\r\n2020-02-24 09:13:28.956348 | rdo-centos-7 |           ignore_option_errors=ignore_option_errors)\r\n2020-02-24 09:13:28.956540 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/config.py\", line 121, in parse_configuration\r\n2020-02-24 09:13:28.956585 | rdo-centos-7 |           meta.parse()\r\n2020-02-24 09:13:28.956725 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/config.py\", line 426, in parse\r\n2020-02-24 09:13:28.956860 | rdo-centos-7 |           section_parser_method(section_options)\r\n2020-02-24 09:13:28.957014 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/config.py\", line 399, in parse_section\r\n2020-02-24 09:13:28.957075 | rdo-centos-7 |           self[name] = value\r\n2020-02-24 09:13:28.957214 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/config.py\", line 184, in __setitem__\r\n2020-02-24 09:13:28.957256 | rdo-centos-7 |           value = parser(value)\r\n2020-02-24 09:13:28.957407 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/config.py\", line 515, in _parse_version\r\n2020-02-24 09:13:28.957489 | rdo-centos-7 |           version = self._parse_attr(value, self.package_dir)\r\n2020-02-24 09:13:28.957677 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/setuptools/config.py\", line 349, in _parse_attr\r\n2020-02-24 09:13:28.957745 | rdo-centos-7 |           module = import_module(module_name)\r\n2020-02-24 09:13:28.957863 | rdo-centos-7 |         File \"/usr/lib64/python2.7/importlib/__init__.py\", line 37, in import_module\r\n2020-02-24 09:13:28.957919 | rdo-centos-7 |           __import__(name)\r\n2020-02-24 09:13:28.958036 | rdo-centos-7 |         File \"/home/zuul/.cache/pre-commit/reporf1mbW/lib/ansiblelint/__init__.py\", line 27, in <module>\r\n2020-02-24 09:13:28.958097 | rdo-centos-7 |           import six\r\n2020-02-24 09:13:28.958159 | rdo-centos-7 |       ImportError: No module named six\r\n2020-02-24 09:13:28.958225 | rdo-centos-7 |       ----------------------------------------\r\n2020-02-24 09:13:28.959066 | rdo-centos-7 |     ERROR: Command errored out with exit status 2: /home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/bin/python /home/zuul/.cache/pre-commit/reporf1mbW/py_env-python2.7/lib/python2.7/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-neprNd/overlay --no-warn-script-location --no-binary :none: --only-binary :none: -i http://mirror.regionone.rdo-cloud.rdoproject.org/pypi/simple --extra-index-url http://mirror.regionone.rdo-cloud.rdoproject.org/wheel/centos-7.7-x86_64 --trusted-host mirror.regionone.rdo-cloud.rdoproject.org -- 'setuptools >= 41.4.0' 'setuptools_scm >= 1.15.0' 'setuptools_scm_git_archive >= 1.0' wheel ansible 'pathlib2; python_version < '\"'\"'3.2'\"'\"'' ruamel.yaml six Check the logs for full command output.\r\n```\r\n\r\n\r\nMy impression is that this issue is specific to centos-7 where we have old versions of the packaging toolset. \r\n\r\nApparently it affects only installation as a pre-commit hook.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/680", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/680/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/680/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/680/events", "html_url": "https://github.com/ansible/ansible-lint/issues/680", "id": 565830977, "node_id": "MDU6SXNzdWU1NjU4MzA5Nzc=", "number": 680, "title": "ansible-lint is checking for 601 on commented lines while running play", "user": {"login": "bgajjela", "id": 16858434, "node_id": "MDQ6VXNlcjE2ODU4NDM0", "avatar_url": "https://avatars3.githubusercontent.com/u/16858434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgajjela", "html_url": "https://github.com/bgajjela", "followers_url": "https://api.github.com/users/bgajjela/followers", "following_url": "https://api.github.com/users/bgajjela/following{/other_user}", "gists_url": "https://api.github.com/users/bgajjela/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgajjela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgajjela/subscriptions", "organizations_url": "https://api.github.com/users/bgajjela/orgs", "repos_url": "https://api.github.com/users/bgajjela/repos", "events_url": "https://api.github.com/users/bgajjela/events{/privacy}", "received_events_url": "https://api.github.com/users/bgajjela/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-16T00:47:48Z", "updated_at": "2020-02-18T13:57:35Z", "closed_at": "2020-02-18T13:57:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n- Feature request\r\nbug \r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\nansible-lint --version\r\n```\r\nansible-lint==4.1.0\r\n\r\n- ansible installation method: one of source, pip, OS package\r\npip\r\n- ansible-lint installation method: one of source, pip, OS package\r\npip\r\n\r\n# Desired Behaviour\r\n\r\nPlease give some details of the feature being requested\r\nor what should happen if providing a bug report\r\n\r\n\r\nPossible security bugs should be reported via email to `security@ansible.com`\r\n\r\n# Actual Behaviour (Bug report only)\r\nansible-lint is checking for 601 on commented lines while running play with --check option. \r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](http://stackoverflow.com/help/mcve)\r\nwith:\r\n- playbook\r\n- output of running ansible-lint\r\n- if you're getting a stack trace, output of\r\n  `ansible-playbook --syntax-check playbook`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/678", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/678/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/678/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/678/events", "html_url": "https://github.com/ansible/ansible-lint/issues/678", "id": 564707704, "node_id": "MDU6SXNzdWU1NjQ3MDc3MDQ=", "number": 678, "title": "Make it possible to integrate `pytest-xdist`", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220406938, "node_id": "MDU6TGFiZWwyMjIwNDA2OTM4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/enhancement", "name": "enhancement", "color": "00B0C0", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-13T14:09:18Z", "updated_at": "2020-07-29T12:12:15Z", "closed_at": "2020-07-29T12:12:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\ndevel/master\r\n\r\n# Desired Behaviour\r\n\r\nIt should be possible to run tests in parallel within pytest using `-n auto` arg when `pytest-xdist` is installed.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nThere's some percentage of the red tests appearing in the parallel mode. I assume that some of the tests use a shared context that causes race conditions. This is what has to be investigated and fixed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/665", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/665/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/665/events", "html_url": "https://github.com/ansible/ansible-lint/issues/665", "id": 554062432, "node_id": "MDU6SXNzdWU1NTQwNjI0MzI=", "number": 665, "title": "E206 Variable Space: Fix nested JSON object false positive", "user": {"login": "simonkeyd", "id": 35730473, "node_id": "MDQ6VXNlcjM1NzMwNDcz", "avatar_url": "https://avatars1.githubusercontent.com/u/35730473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonkeyd", "html_url": "https://github.com/simonkeyd", "followers_url": "https://api.github.com/users/simonkeyd/followers", "following_url": "https://api.github.com/users/simonkeyd/following{/other_user}", "gists_url": "https://api.github.com/users/simonkeyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonkeyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonkeyd/subscriptions", "organizations_url": "https://api.github.com/users/simonkeyd/orgs", "repos_url": "https://api.github.com/users/simonkeyd/repos", "events_url": "https://api.github.com/users/simonkeyd/events{/privacy}", "received_events_url": "https://api.github.com/users/simonkeyd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-23T10:16:56Z", "updated_at": "2020-05-18T18:44:41Z", "closed_at": "2020-05-18T18:44:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.8.5\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nWhen using compact form nested JSON object within a Jinja2 context as shown in the following example:\r\n```yaml\r\nset_fact:\"{{ {'test': {'subtest': variable}} }}\"\r\n```\r\n'__variable}}__' should not raise a 206 error since we are only closing a JSON object.\r\n\r\n# Actual Behaviour\r\n\r\n`206-false-positive.yml`:\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    variable_example: value\r\n  tasks:\r\n    - name: Set 'test_obj' json object\r\n      set_fact:\r\n        test_obj: {}\r\n\r\n    - name: Append a nested object to 'test_obj'\r\n      set_fact:\r\n        test_obj: \"{{ {'test_nested_obj': {'test': variable_example}} | combine(test_obj) }}\"\r\n```\r\n```sh\r\n$ ansible-lint 206-false-positive.yml\r\n[206] Variables should have spaces before and after: {{ var_name }}\r\n206-false-positive.yml:14\r\n        test_obj: \"{{ {'test_nested_obj': {'test': variable_example}} | combine(test_obj) }}\"\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/659", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/659/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/659/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/659/events", "html_url": "https://github.com/ansible/ansible-lint/issues/659", "id": 551749342, "node_id": "MDU6SXNzdWU1NTE3NDkzNDI=", "number": 659, "title": "Disable sign-off requirements (DCO)", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-18T10:07:15Z", "updated_at": "2020-04-25T22:50:58Z", "closed_at": "2020-04-25T22:50:58Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "@gundalow After the success of https://github.com/ansible/molecule/issues/1548 please lets do the same for ansible-lint so we no longer hinge the incoming pull requests. Thanks\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/658", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/658/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/658/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/658/events", "html_url": "https://github.com/ansible/ansible-lint/issues/658", "id": 551655641, "node_id": "MDU6SXNzdWU1NTE2NTU2NDE=", "number": 658, "title": "pipefail fail", "user": {"login": "utoddl", "id": 3476899, "node_id": "MDQ6VXNlcjM0NzY4OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/3476899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/utoddl", "html_url": "https://github.com/utoddl", "followers_url": "https://api.github.com/users/utoddl/followers", "following_url": "https://api.github.com/users/utoddl/following{/other_user}", "gists_url": "https://api.github.com/users/utoddl/gists{/gist_id}", "starred_url": "https://api.github.com/users/utoddl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/utoddl/subscriptions", "organizations_url": "https://api.github.com/users/utoddl/orgs", "repos_url": "https://api.github.com/users/utoddl/repos", "events_url": "https://api.github.com/users/utoddl/events{/privacy}", "received_events_url": "https://api.github.com/users/utoddl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-17T22:10:19Z", "updated_at": "2020-01-20T23:48:05Z", "closed_at": "2020-01-20T23:48:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\nansible 2.9.2\r\nansible-lint 4.1.1a0\r\n\r\n# Desired Behaviour\r\n\r\nansible-lint should not complain about bash's pipefail option if it's being set. There's only so much debugging of shell scripts a linter can do after all.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nAfter acknowledging 306 'Shells that use pipes should set the pipefail option', examining the shell script and determining that the default behavior is in fact the correct behavior in this case, and adding `set +o pipefile`, ansible-lint still throws a 306. This leads to the absurd solution:\r\n```\r\nset -o pipefail\r\nset +o pipefail\r\n```\r\n\r\nSurely it would be better to give the programmer the benefit of the doubt if she says `set +o pipefail` that perhaps she knows what she's doing.\r\n\r\nI'd recommend ammending the regex from this:\r\n```\r\n_pipefail_re = re.compile(r\"^\\s*set.*-[A-z]*o\\s*pipefail\")\r\n```\r\nto this:\r\n```\r\n_pipefail_re = re.compile(r\"^\\s*set.*[+-][A-z]*o\\s*pipefail\")\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/656", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/656/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/656/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/656/events", "html_url": "https://github.com/ansible/ansible-lint/issues/656", "id": 550744084, "node_id": "MDU6SXNzdWU1NTA3NDQwODQ=", "number": 656, "title": "4.2.0 auto-detect mode is broken, failing to detect task files", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-16T11:21:58Z", "updated_at": "2020-08-18T13:25:52Z", "closed_at": "2020-05-07T13:22:24Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n# Desired Behaviour\r\n\r\nUsing `ansible-lint` in auto-detect mode should give the same kind of results as if you would have already given it all ansible lintable files from current repository.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nAs noted at https://review.opendev.org/#/c/702575/3 there are lots of tasks files which are ignored with `Unknown file type` while they are valid tasks files and running linter with them as arguments would lint them properly.\r\n\r\nPlease assign this bug to me, I will take care of it as I was the one that introduced auto-detection mode. I will also try to add some tests to avoid accidental regression in the future.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/653", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/653/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/653/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/653/events", "html_url": "https://github.com/ansible/ansible-lint/issues/653", "id": 550187438, "node_id": "MDU6SXNzdWU1NTAxODc0Mzg=", "number": 653, "title": "project is not installable in editable mode", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52026480, "node_id": "MDU6TGFiZWw1MjAyNjQ4MA==", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/invalid", "name": "status/invalid", "color": "e6e6e6", "default": false, "description": "Not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-15T13:30:53Z", "updated_at": "2020-04-25T23:04:06Z", "closed_at": "2020-04-25T23:04:06Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "We need to be sure that `pip install -e .` works on this project as that is the first action any new contributor will try for testing a PR or his own change.\r\n\r\n```\r\nERROR: File \"setup.py\" not found. Directory cannot be installed in editable mode: /Users/ssbarnea/c/os/ansible-lint\r\n(A \"pyproject.toml\" file was found, but editable mode currently requires a setup.py based build.)\r\n```\r\nThat is huge problem because installing a package as editable and testing a change made to it is the first thing any contributor would want to do. \r\n\r\nOut of >50 popular python projects I have cloned locally ansible-lint is the only one where installing as editable is broken. I think that the decision to drop the `setup.py` may have being not the best one.\r\n\r\nAFAIK there is no workaround to make editable mode work.\r\n\r\nMainly this bug is a big barrier for project development.\r\n\r\n* https://github.com/pypa/pip/issues/6605 locked by pypa", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/652", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/652/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/652/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/652/events", "html_url": "https://github.com/ansible/ansible-lint/issues/652", "id": 550173959, "node_id": "MDU6SXNzdWU1NTAxNzM5NTk=", "number": 652, "title": "4.2.0: TypeError: join() argument must be str or bytes, not 'NoneType'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-15T13:05:07Z", "updated_at": "2020-03-13T15:18:35Z", "closed_at": "2020-03-13T15:18:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\n\r\nansible-lint --version\r\n4.2.0\r\n```\r\n\r\n- ansible installation method: one of source, pip, OS package\r\n- ansible-lint installation method: one of source, pip, OS package\r\n\r\n# Desired Behaviour\r\n\r\nNot to crash, passing or with meaningful error.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n  File \"/Users/ssbarnea/c/opendev/zuul-jobs/.tox/linters/lib/python3.7/site-packages/ansiblelint/utils.py\", line 299, in _rolepath\r\n    path_dwim(basedir, os.path.join('roles', role)),\r\n  File \"/Users/ssbarnea/c/opendev/zuul-jobs/.tox/linters/lib/python3.7/posixpath.py\", line 94, in join\r\n    genericpath._check_arg_types('join', a, *p)\r\n  File \"/Users/ssbarnea/c/opendev/zuul-jobs/.tox/linters/lib/python3.7/genericpath.py\", line 149, in _check_arg_types\r\n    (funcname, s.__class__.__name__)) from None\r\nTypeError: join() argument must be str or bytes, not 'NoneType'\r\n```\r\n\r\n## Reproducing\r\n\r\nIt seems to be caused by use of `incude_role`:\r\n```\r\n- hosts: all\r\n  tasks:\r\n    - name: foo\r\n      include_role:\r\n        role: run-buildset-registry\r\n```\r\n\r\n# Workaround\r\n\r\nRename `role` key to `name` and the linter will work fine, name is what official documentation mentions, role key is undocumented, probably there as an alias for compatibility.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/651", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/651/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/651/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/651/events", "html_url": "https://github.com/ansible/ansible-lint/issues/651", "id": 544639796, "node_id": "MDU6SXNzdWU1NDQ2Mzk3OTY=", "number": 651, "title": "Crash when trying to lint an invalid file ", "user": {"login": "wedi", "id": 1466269, "node_id": "MDQ6VXNlcjE0NjYyNjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1466269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wedi", "html_url": "https://github.com/wedi", "followers_url": "https://api.github.com/users/wedi/followers", "following_url": "https://api.github.com/users/wedi/following{/other_user}", "gists_url": "https://api.github.com/users/wedi/gists{/gist_id}", "starred_url": "https://api.github.com/users/wedi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wedi/subscriptions", "organizations_url": "https://api.github.com/users/wedi/orgs", "repos_url": "https://api.github.com/users/wedi/repos", "events_url": "https://api.github.com/users/wedi/events{/privacy}", "received_events_url": "https://api.github.com/users/wedi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-02T16:05:23Z", "updated_at": "2020-07-28T13:53:36Z", "closed_at": "2020-07-28T13:53:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "When globbing a role directory with a readme file like this `ansible-lint roles/*`, `ansible-lint` crashes on the readme (or any other plain file):\r\n\r\n```bash\r\nansible-lint roles/*        \r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/Cellar/ansible-lint/4.2.0/libexec/lib/python3.7/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/usr/local/Cellar/ansible-lint/4.2.0/libexec/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 267, in run\r\n    for child in ansiblelint.utils.find_children(arg, self.playbook_dir):\r\n  File \"/usr/local/Cellar/ansible-lint/4.2.0/libexec/lib/python3.7/site-packages/ansiblelint/utils.py\", line 161, in find_children\r\n    items = _playbook_items(playbook_ds)\r\n  File \"/usr/local/Cellar/ansible-lint/4.2.0/libexec/lib/python3.7/site-packages/ansiblelint/utils.py\", line 146, in _playbook_items\r\n    return [item for play in pb_data for item in play.items()]\r\n  File \"/usr/local/Cellar/ansible-lint/4.2.0/libexec/lib/python3.7/site-packages/ansiblelint/utils.py\", line 146, in <listcomp>\r\n    return [item for play in pb_data for item in play.items()]\r\nAttributeError: 'str' object has no attribute 'items'\r\n```\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.9.2\r\n$ ansible-lint --version\r\nansible-lint 4.2.0\r\n```\r\n\r\n- ansible installation method: OS package (homebrew)\r\n- ansible-lint installation method: OS package (homebrew)\r\n\r\n# Desired Behaviour\r\n\r\nOf course this can be avoided by better globbing ~or excluding files~ but `ansible-lint` should not fatally crash when hitting an invalid file.\r\n\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nUgly error message. See above.\r\n\r\n**Edit:** `ansible-lint roles/*` cashes even when adding `'./roles/README.md'` to the `exclude_paths` in `.ansible_lint`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/649", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/649/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/649/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/649/events", "html_url": "https://github.com/ansible/ansible-lint/issues/649", "id": 542019337, "node_id": "MDU6SXNzdWU1NDIwMTkzMzc=", "number": 649, "title": "ansible-lint not working with pre-commit", "user": {"login": "nicolas-g", "id": 2202932, "node_id": "MDQ6VXNlcjIyMDI5MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2202932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicolas-g", "html_url": "https://github.com/nicolas-g", "followers_url": "https://api.github.com/users/nicolas-g/followers", "following_url": "https://api.github.com/users/nicolas-g/following{/other_user}", "gists_url": "https://api.github.com/users/nicolas-g/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicolas-g/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicolas-g/subscriptions", "organizations_url": "https://api.github.com/users/nicolas-g/orgs", "repos_url": "https://api.github.com/users/nicolas-g/repos", "events_url": "https://api.github.com/users/nicolas-g/events{/privacy}", "received_events_url": "https://api.github.com/users/nicolas-g/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "nicolas-g", "id": 2202932, "node_id": "MDQ6VXNlcjIyMDI5MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2202932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicolas-g", "html_url": "https://github.com/nicolas-g", "followers_url": "https://api.github.com/users/nicolas-g/followers", "following_url": "https://api.github.com/users/nicolas-g/following{/other_user}", "gists_url": "https://api.github.com/users/nicolas-g/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicolas-g/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicolas-g/subscriptions", "organizations_url": "https://api.github.com/users/nicolas-g/orgs", "repos_url": "https://api.github.com/users/nicolas-g/repos", "events_url": "https://api.github.com/users/nicolas-g/events{/privacy}", "received_events_url": "https://api.github.com/users/nicolas-g/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-24T07:03:22Z", "updated_at": "2020-07-30T14:47:34Z", "closed_at": "2020-04-03T16:06:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- update the documentation\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version                                                                                                                                                                                                      \r\nansible 2.9.2\r\n  config file = /Users/nicolasg/.ansible.cfg\r\n  configured module search path = ['/Users/nicolasg/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/nicolasg/venv/ansible2.9/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/nicolasg/venv/ansible2.9/bin/ansible\r\n  python version = 3.7.5 (default, Nov  1 2019, 02:16:32) [Clang 11.0.0 (clang-1100.0.33.8)]\r\n\r\nansible-lint --version\r\nansible-lint 4.2.0\r\n\r\n```\r\n\r\n- ansible installation method pip\r\n- ansible-lint installation method:  pip\r\n\r\nI have the bellow playbook which I'm trying to test Trailing whitespace on purpose, if I run ansible-lint manually I do get the right errors but my pre-commit it is showing as **Passed** ...\r\n \r\n### test.yml    : \r\n```                                                                                                                                                                                                        \r\n- hosts: test\r\n  roles:\r\n    - { role : test, tags: [ 'test-role' ] }\r\n\r\n\r\n\r\n```\r\n\r\n# Desired Behaviour\r\n```\r\nansible-lint test.yml -v                                                                                                                                                                                               \r\nExamining test.yml of type playbook\r\n[201] Trailing whitespace\r\ntest.yml:2\r\n  roles:\r\n\r\n[201] Trailing whitespace\r\ntest.yml:3\r\n    - { role : test, tags: [ 'test-role' ] }\r\n\r\n```\r\n\r\n# Actual Behaviour\r\n### .pre-commit-config.yaml \r\n```\r\nrepos:\r\n-   repo: https://github.com/ansible/ansible-lint.git\r\n    rev: v4.2.0\r\n    hooks:\r\n    -   id: ansible-lint\r\n        files: \\.(yaml|yml)$\r\n```\r\n```\r\npre-commit install                            \r\npre-commit installed at .git/hooks/pre-commit\r\n\r\ngit add test.yml \r\n\r\ngit status                                                                                                                                                                                            \r\nOn branch test-pre-commit\r\nChanges to be committed:\r\n  (use \"git restore --staged <file>...\" to unstage)\r\n        new file:   test.yml\r\n\r\ngit commit -m 'test'                                                                                                                                                                                                  \r\nAnsible-lint.............................................................Passed\r\n[ng-test-git-hook a85f31f] test\r\n 1 file changed, 6 insertions(+)\r\n create mode 100644 test.yml\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/643", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/643/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/643/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/643/events", "html_url": "https://github.com/ansible/ansible-lint/issues/643", "id": 534392418, "node_id": "MDU6SXNzdWU1MzQzOTI0MTg=", "number": 643, "title": "Can't install from source: setup.py missing", "user": {"login": "priv-kweihmann", "id": 46938494, "node_id": "MDQ6VXNlcjQ2OTM4NDk0", "avatar_url": "https://avatars1.githubusercontent.com/u/46938494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/priv-kweihmann", "html_url": "https://github.com/priv-kweihmann", "followers_url": "https://api.github.com/users/priv-kweihmann/followers", "following_url": "https://api.github.com/users/priv-kweihmann/following{/other_user}", "gists_url": "https://api.github.com/users/priv-kweihmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/priv-kweihmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/priv-kweihmann/subscriptions", "organizations_url": "https://api.github.com/users/priv-kweihmann/orgs", "repos_url": "https://api.github.com/users/priv-kweihmann/repos", "events_url": "https://api.github.com/users/priv-kweihmann/events{/privacy}", "received_events_url": "https://api.github.com/users/priv-kweihmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338056, "node_id": "MDU6TGFiZWwxMTMzMzM4MDU2", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/documentation", "name": "documentation", "color": "aecaf2", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/17", "html_url": "https://github.com/ansible/ansible-lint/milestone/17", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/17/labels", "id": 3978716, "node_id": "MDk6TWlsZXN0b25lMzk3ODcxNg==", "number": 17, "title": "4.3.0", "description": "https://github.com/ansible/ansible-lint/blob/master/ROADMAP.rst", "creator": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-01-16T18:36:15Z", "updated_at": "2020-08-18T18:13:58Z", "due_on": null, "closed_at": "2020-08-18T18:13:58Z"}, "comments": 16, "created_at": "2019-12-07T11:52:18Z", "updated_at": "2019-12-30T17:11:27Z", "closed_at": "2019-12-30T17:11:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible: n.a. (doesn't matter for this bug)\r\ncurrent master tree (since release 4.2.0)\r\n```\r\n\r\n- ansible installation method: from source\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nThe README states that `pip install git+https://github.com/ansible/ansible-lint.git` installs from source - this should work either with warning that a requirement isn't fulfilled or with successful installation\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n> \r\n>   Cloning https://github.com/ansible/ansible-lint.git to /tmp/pip-aS0W0q-build\r\n>     Complete output from command python setup.py egg_info:\r\n>     Traceback (most recent call last):\r\n>       File \"<string>\", line 1, in <module>\r\n>     IOError: [Errno 2] No such file or directory: '/tmp/pip-aS0W0q-build/setup.py'\r\n>     \r\n>     ----------------------------------------\r\n> Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-aS0W0q-build/\r\n\r\nSame method was working working all the time (at least till newer setuptools was blowing things up, and somehow a working setup.py was completely removed from the source tree).\r\n\r\nCurrently I'm unable to install it - neither from pypi nor from git\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/640", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/640/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/640/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/640/events", "html_url": "https://github.com/ansible/ansible-lint/issues/640", "id": 529398650, "node_id": "MDU6SXNzdWU1MjkzOTg2NTA=", "number": 640, "title": "Incorrect type guessing for an included playbook", "user": {"login": "bvergnaud", "id": 9599845, "node_id": "MDQ6VXNlcjk1OTk4NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/9599845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bvergnaud", "html_url": "https://github.com/bvergnaud", "followers_url": "https://api.github.com/users/bvergnaud/followers", "following_url": "https://api.github.com/users/bvergnaud/following{/other_user}", "gists_url": "https://api.github.com/users/bvergnaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/bvergnaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bvergnaud/subscriptions", "organizations_url": "https://api.github.com/users/bvergnaud/orgs", "repos_url": "https://api.github.com/users/bvergnaud/repos", "events_url": "https://api.github.com/users/bvergnaud/events{/privacy}", "received_events_url": "https://api.github.com/users/bvergnaud/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-27T14:56:57Z", "updated_at": "2019-12-04T09:28:44Z", "closed_at": "2019-12-03T14:12:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n\u279c ansible --version\r\nansible 2.8.7\r\n  config file = /home/bvergnaud/git/gitlab.infra.online.net/platform/ansible-playbooks/ansible.cfg\r\n  configured module search path = ['/home/bvergnaud/git/gitlab.infra.online.net/platform/ansible-playbooks/library', '/home/bvergnaud/git/gitlab.infra.online.net/platform/ansible-playbooks/library/foreman/plugins/modules']\r\n  ansible python module location = /home/bvergnaud/.local/share/virtualenvs/ansible-playbooks-VBzdj4yE/lib/python3.8/site-packages/ansible\r\n  executable location = /home/bvergnaud/.local/share/virtualenvs/ansible-playbooks-VBzdj4yE/bin/ansible\r\n  python version = 3.8.0 (default, Oct 23 2019, 18:51:26) [GCC 9.2.0]\r\n\r\n~/git/gitlab.infra.online.net/platform/ansible-playbooks on \ue0a0 master [$!?] via \ud83d\udc0d v3.8.0 (ansible-playbooks-VBzdj4yE) \r\n\u279c ansible-lint --version\r\nansible-lint 4.2.0rc1\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nWhen importing a playbook from within another playbook, ansible-lint should properly guess that it is a type playbook.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen you include a playbook in the pre-tasks sections (we need that secondary playbook to play before the roles) the linter guess its type as 'pre_tasks', and reports the following error multiple times in my case (I didn't manage to find what the number of error is based on): `Error trying to append skipped rules: RuntimeError('Unexpected file type: pre_tasks')`.\r\n\r\nExample playbook1.yml :\r\n```\r\n---\r\n- name: Do something\r\n  hosts: \"some_host\"\r\n  pre_tasks:\r\n    - name: Do something before the roles\r\n      include: playbook2.yml\r\n\r\n  roles:\r\n    - role1\r\n```\r\n\r\nThe included `playbook2.yml` is another playbook right next to the first one, and could contain anything.\r\nThe error does not cause the return code to change which is lucky in my case as I'm trying to bake it in the pre-commit routine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/636", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/636/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/636/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/636/events", "html_url": "https://github.com/ansible/ansible-lint/issues/636", "id": 528058713, "node_id": "MDU6SXNzdWU1MjgwNTg3MTM=", "number": 636, "title": "Running ansible-lint . doesn't lint", "user": {"login": "Yajo", "id": 973709, "node_id": "MDQ6VXNlcjk3MzcwOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/973709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yajo", "html_url": "https://github.com/Yajo", "followers_url": "https://api.github.com/users/Yajo/followers", "following_url": "https://api.github.com/users/Yajo/following{/other_user}", "gists_url": "https://api.github.com/users/Yajo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yajo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yajo/subscriptions", "organizations_url": "https://api.github.com/users/Yajo/orgs", "repos_url": "https://api.github.com/users/Yajo/repos", "events_url": "https://api.github.com/users/Yajo/events{/privacy}", "received_events_url": "https://api.github.com/users/Yajo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-25T12:36:25Z", "updated_at": "2019-11-27T09:16:44Z", "closed_at": "2019-11-26T17:37:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\nansible 2.9.1\r\n  config file = /home/yajo/Documentos/devel/tecnativa/tecnativa-infrastructure/ansible.cfg\r\n  configured module search path = ['/home/yajo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/yajo/.cache/pre-commit/repomy5j4mvo/py_env-python3/lib/python3.7/site-packages/ansible\r\n  executable location = /home/yajo/.cache/pre-commit/repomy5j4mvo/py_env-python3/bin/ansible\r\n  python version = 3.7.5 (default, Oct 17 2019, 12:16:48) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\n\r\nansible-lint --version\r\nansible-lint 4.1.1a5\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nIt should lint when I run `ansible-lint .`\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nIt doesn't lint. It only lints when I run `ansible-lint *.yml`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/635", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/635/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/635/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/635/events", "html_url": "https://github.com/ansible/ansible-lint/issues/635", "id": 527706898, "node_id": "MDU6SXNzdWU1Mjc3MDY4OTg=", "number": 635, "title": "Feature Request: Replace deprecated libraries", "user": {"login": "mjtrangoni", "id": 261502, "node_id": "MDQ6VXNlcjI2MTUwMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/261502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjtrangoni", "html_url": "https://github.com/mjtrangoni", "followers_url": "https://api.github.com/users/mjtrangoni/followers", "following_url": "https://api.github.com/users/mjtrangoni/following{/other_user}", "gists_url": "https://api.github.com/users/mjtrangoni/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjtrangoni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjtrangoni/subscriptions", "organizations_url": "https://api.github.com/users/mjtrangoni/orgs", "repos_url": "https://api.github.com/users/mjtrangoni/repos", "events_url": "https://api.github.com/users/mjtrangoni/events{/privacy}", "received_events_url": "https://api.github.com/users/mjtrangoni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340724, "node_id": "MDU6TGFiZWwxMTMzMzQwNzI0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/low", "name": "priority/low", "color": "c2e0c6", "default": false, "description": ""}, {"id": 1133355680, "node_id": "MDU6TGFiZWwxMTMzMzU1Njgw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/proposal", "name": "proposal", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-24T14:33:53Z", "updated_at": "2020-04-24T15:32:02Z", "closed_at": "2020-04-24T15:32:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI was trying `pylint-3` on the master branch, and pylint found one deprecated library and one deprecated method. See,\r\n\r\n```bash\r\n$ pylint-3 --disable=missing-docstring,invalid-name $(find . -type f -name \"*.py\") | grep depre\r\nlib/ansiblelint/utils.py:560:31: W1505: Using deprecated method getargspec() (deprecated-method)\r\nlib/ansiblelint/__main__.py:26:0: W0402: Uses of a deprecated module 'optparse' (deprecated-module)\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/632", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/632/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/632/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/632/events", "html_url": "https://github.com/ansible/ansible-lint/issues/632", "id": 523535014, "node_id": "MDU6SXNzdWU1MjM1MzUwMTQ=", "number": 632, "title": "Inconsistent test with pre-commit", "user": {"login": "jedla01", "id": 30858985, "node_id": "MDQ6VXNlcjMwODU4OTg1", "avatar_url": "https://avatars0.githubusercontent.com/u/30858985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedla01", "html_url": "https://github.com/jedla01", "followers_url": "https://api.github.com/users/jedla01/followers", "following_url": "https://api.github.com/users/jedla01/following{/other_user}", "gists_url": "https://api.github.com/users/jedla01/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedla01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedla01/subscriptions", "organizations_url": "https://api.github.com/users/jedla01/orgs", "repos_url": "https://api.github.com/users/jedla01/repos", "events_url": "https://api.github.com/users/jedla01/events{/privacy}", "received_events_url": "https://api.github.com/users/jedla01/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "jedla01", "id": 30858985, "node_id": "MDQ6VXNlcjMwODU4OTg1", "avatar_url": "https://avatars0.githubusercontent.com/u/30858985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedla01", "html_url": "https://github.com/jedla01", "followers_url": "https://api.github.com/users/jedla01/followers", "following_url": "https://api.github.com/users/jedla01/following{/other_user}", "gists_url": "https://api.github.com/users/jedla01/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedla01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedla01/subscriptions", "organizations_url": "https://api.github.com/users/jedla01/orgs", "repos_url": "https://api.github.com/users/jedla01/repos", "events_url": "https://api.github.com/users/jedla01/events{/privacy}", "received_events_url": "https://api.github.com/users/jedla01/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-11-15T15:29:11Z", "updated_at": "2020-04-26T07:59:36Z", "closed_at": "2020-04-26T07:59:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.8.5.post0\r\n  config file = None\r\n  configured module search path = ['/Users/pjedlicka/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/pjedlicka/ansible-dev/ansible/lib/ansible\r\n  executable location = /Users/pjedlicka/ansible-dev/ansible/bin/ansible\r\n  python version = 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 03:03:55) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]\r\n\r\nansible-lint 4.1.1a0\r\n```\r\n\r\n- ansible installation method: source\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nWhile developing an ansible role, where root of repository is the root of a role, having set no ansible-lint rules executions nor custom rules, the output from `ansible-lint .` and `pre-commit run --all-files` should be same or results from from should be at least subset of errors found to the other test. (As running `ansible-lint` is not run against tests folder).\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen running `ansible-lint .` in to role folder I am getting errors in tasks, mostly 305 Use shell only when shell functionality is required. While running `pre-commit run --all-files` or run on the file directly founds no errors at all.\r\nPre-commit config:\r\n```\r\n---\r\nrepos:\r\n  - repo: https://github.com/ansible/ansible-lint.git\r\n    rev: v4.1.1a0\r\n    hooks:\r\n      - id: ansible-lint\r\n        files: \\.(yaml|yml)$\r\n\r\n  - repo: https://github.com/adrienverge/yamllint.git\r\n    rev: v1.17.0\r\n    hooks:\r\n      - id: yamllint\r\n        files: \\.(yaml|yml)$\r\n```\r\n\r\n- Ansible-lint output:\r\n```\r\nroles/abc$ ansible-lint .\r\n[305] Use shell only when shell functionality is required\r\nroles/abc/tasks/main.yml:4\r\n```\r\n- Pre-commit output:\r\npre-commit run --files tasks/main.yml\r\nAnsible-lint.............................................................Passed", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/626", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/626/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/626/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/626/events", "html_url": "https://github.com/ansible/ansible-lint/issues/626", "id": 518748182, "node_id": "MDU6SXNzdWU1MTg3NDgxODI=", "number": 626, "title": "AttributeError: 'AnsibleUnicode' object has no attribute 'get'", "user": {"login": "vlotorev", "id": 5903498, "node_id": "MDQ6VXNlcjU5MDM0OTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/5903498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlotorev", "html_url": "https://github.com/vlotorev", "followers_url": "https://api.github.com/users/vlotorev/followers", "following_url": "https://api.github.com/users/vlotorev/following{/other_user}", "gists_url": "https://api.github.com/users/vlotorev/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlotorev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlotorev/subscriptions", "organizations_url": "https://api.github.com/users/vlotorev/orgs", "repos_url": "https://api.github.com/users/vlotorev/repos", "events_url": "https://api.github.com/users/vlotorev/events{/privacy}", "received_events_url": "https://api.github.com/users/vlotorev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-06T20:50:59Z", "updated_at": "2019-11-06T21:21:28Z", "closed_at": "2019-11-06T21:21:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/home/vlotorev/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = .tox/ansiblelint/lib/python3.6/site-packages/ansible\r\n  executable location = .tox/ansiblelint/bin/ansible\r\n  python version = 3.6.6 (default, Jan 26 2019, 16:53:05) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nansible-lint --version\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\nansible-lint lints playbook without exceptions.\r\n\r\n# Actual Behaviour\r\nConsider a playbook:\r\n```\r\n# playbooks/run.yaml \r\n- hosts: all\r\n  tasks:\r\n    - include_role: name=asdf\r\n```\r\nRun with ansible-lint:\r\n```\r\nansible-lint playbooks/run.yaml\r\nTraceback (most recent call last):\r\n  File \".tox/ansiblelint/bin/ansible-lint\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \".tox/ansiblelint/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \".tox/ansiblelint/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 264, in run\r\n    for child in ansiblelint.utils.find_children(arg, self.playbook_dir):\r\n  File \".tox/ansiblelint/lib/python3.6/site-packages/ansiblelint/utils.py\", line 171, in find_children\r\n    for child in play_children(basedir, item, playbook[1], playbook_dir):\r\n  File \".tox/ansiblelint/lib/python3.6/site-packages/ansiblelint/utils.py\", line 223, in play_children\r\n    return delegate_map[k](basedir, k, v, parent_type)\r\n  File \".tox/ansiblelint/lib/python3.6/site-packages/ansiblelint/utils.py\", line 253, in _taskshandlers_children\r\n    results.extend(_roles_children(basedir, k, [th['include_role'].get('name')],\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\n```\r\n\r\nResult of syntax check ends without errors:\r\n```\r\nansible-playbook --syntax-check playbooks/run.yaml -c local -i 127.0.0.1,\r\n\r\nplaybook: playbooks/run.yaml\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/618", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/618/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/618/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/618/events", "html_url": "https://github.com/ansible/ansible-lint/issues/618", "id": 516659930, "node_id": "MDU6SXNzdWU1MTY2NTk5MzA=", "number": 618, "title": "feature: use logging instead of print", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-02T17:10:55Z", "updated_at": "2020-05-07T13:24:00Z", "closed_at": "2020-05-07T13:24:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Feature request\r\n\r\n# Desired Behaviour\r\n\r\nAnsible-lint should avoid using ``print()`` for anything else than rule matches (which are the main output of the tool). \r\n\r\nAll informative messages (debug, warnings,....) should be handled via the logging module, which  also correctly uses stderr at its default output.\r\n\r\nWhen this is implemented it would be much easier to set logging level based on verbosity level an d allow us to have various verbosity levels.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/613", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/613/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/613/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/613/events", "html_url": "https://github.com/ansible/ansible-lint/issues/613", "id": 516061581, "node_id": "MDU6SXNzdWU1MTYwNjE1ODE=", "number": 613, "title": "ansible-lint needs a recursive discovery mode", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133355680, "node_id": "MDU6TGFiZWwxMTMzMzU1Njgw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/proposal", "name": "proposal", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-01T11:36:45Z", "updated_at": "2019-11-04T21:36:22Z", "closed_at": "2019-11-04T21:36:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Feature request\r\n\r\n# Desired Behaviour\r\n\r\nCurrently ansible-lint cannot safely used like other linters which are able to look recursively inside the repository and lint whatever they find. Attempt to run `ansible-lint .` would result into a false-positive result, likely linting nothing if not playbook is present.\r\n\r\nOnce complex repository example can be seen at https://github.com/rdo-infra/ci-config/ as this exposes several important aspects:\r\n\r\n- not all yaml files are Ansible related\r\n- roles can be stored in multiple subdirectories: `ci-scripts/container-push/roles`,... and several others.\r\n- playbooks can also be scattered around in multiple locations\r\n- using exclude_paths can help but does not fix the inclusion part\r\n- finding all .yaml files and passing them to ansible-lint (like pre-commit does by default) would confuse it because it may not be able to identify the nature of these files and may end-up trying to parse tasks or vars as playbooks.\r\n- playbooks could be found inside `roledir/molecule/*.yml` with one notable exception: `molecule.yml` which is clearly not a playbook. I am not sure if we could just assume that the other files are playbooks or not.\r\n\r\nWhile I do not mind making the assumption that `roles` are to found in folders with `roles` in their name, there is one signifiant exception: single-role repositories. \r\n\r\nBefore doing any work on this, we may need some help from Ansible team regarding on what information can and should be used to determine what is an Ansible playbook or role.\r\n\r\n# Desired outcome\r\n\r\nIf sorted correctly, **newly added playbooks and roles should be linted without having to reconfigure the ansible-linter**. \r\n\r\nThe user should be able to run `ansible-lint` without any arguments to lint the entire repository, just like `flake8` and others are working.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/611", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/611/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/611/events", "html_url": "https://github.com/ansible/ansible-lint/issues/611", "id": 515527027, "node_id": "MDU6SXNzdWU1MTU1MjcwMjc=", "number": 611, "title": "when run as pre-commit hook ansible-lint silently fails to lint", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-31T15:31:07Z", "updated_at": "2019-10-31T17:20:12Z", "closed_at": "2019-10-31T17:02:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I discovered that ansible-lint when run as a pre-commit hook ansible-lint gives false positives, mainly because it fails to identify the files types.\r\n\r\nI will give a censored example:\r\n\r\n```\r\n# outside pre-commit\r\n$ ansible-lint  -v .                                                                                                                                                 \r\nExamining /Users/ssbarnea/rdo/ansible-role-collect-logs/tasks/publish.yml of type tasks\r\n/Users/ssbarnea/rdo/ansible-role-collect-logs/tasks/ara_graphite.yml:2: [E301] Commands should not change things if nothing needs doing\r\n\r\n# with pre-commit (same version)\r\n$ pre-commit run -v -a ansible-lint                                                                                                                                       [ansible-lint] Ansible-lint..............................................Passed\r\nhookid: ansible-lint\r\nExamining /Users/ssbarnea/rdo/ansible-role-collect-logs/tasks/collect.yml of type playbook\r\n```\r\n\r\nBecause pre-commit call ansible-lint for each file, this not only makes the process much slower but worse it prevents ansible lint from discovering the file types correctly. You can see that his guess was a playbook when in fact it was tasks inside roles.\r\n\r\nOne think for sure calling `ansible-lint /Users/ssbarnea/rdo/ansible-role-collect-logs/tasks/ara_graphite.yml` confuses it to think it is a playbook, but allowing it to find files seems to be working.\r\n\r\nOne quick fix for this would be to disable the file parsing support in ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/603", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/603/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/603/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/603/events", "html_url": "https://github.com/ansible/ansible-lint/issues/603", "id": 512073159, "node_id": "MDU6SXNzdWU1MTIwNzMxNTk=", "number": 603, "title": "[HELP WANTED] [SEND PR] Get rid of the deprecated `inspect.getargspec()` function usage", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340097, "node_id": "MDU6TGFiZWwxMTMzMzQwMDk3", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/high", "name": "priority/high", "color": "ff8800", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "slsh1o", "id": 33605143, "node_id": "MDQ6VXNlcjMzNjA1MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33605143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slsh1o", "html_url": "https://github.com/slsh1o", "followers_url": "https://api.github.com/users/slsh1o/followers", "following_url": "https://api.github.com/users/slsh1o/following{/other_user}", "gists_url": "https://api.github.com/users/slsh1o/gists{/gist_id}", "starred_url": "https://api.github.com/users/slsh1o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slsh1o/subscriptions", "organizations_url": "https://api.github.com/users/slsh1o/orgs", "repos_url": "https://api.github.com/users/slsh1o/repos", "events_url": "https://api.github.com/users/slsh1o/events{/privacy}", "received_events_url": "https://api.github.com/users/slsh1o/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "slsh1o", "id": 33605143, "node_id": "MDQ6VXNlcjMzNjA1MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33605143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slsh1o", "html_url": "https://github.com/slsh1o", "followers_url": "https://api.github.com/users/slsh1o/followers", "following_url": "https://api.github.com/users/slsh1o/following{/other_user}", "gists_url": "https://api.github.com/users/slsh1o/gists{/gist_id}", "starred_url": "https://api.github.com/users/slsh1o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slsh1o/subscriptions", "organizations_url": "https://api.github.com/users/slsh1o/orgs", "repos_url": "https://api.github.com/users/slsh1o/repos", "events_url": "https://api.github.com/users/slsh1o/events{/privacy}", "received_events_url": "https://api.github.com/users/slsh1o/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-24T17:13:05Z", "updated_at": "2020-05-23T18:21:53Z", "closed_at": "2020-05-23T18:21:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\nN/A\r\n\r\n- ansible installation method: tox tests\r\n- ansible-lint installation method: tox tests\r\n\r\n# Desired Behaviour\r\n\r\n`pytest` should not fail in the strict warning mode (`filterwarnings = error`)\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n`DeprecationWarning` is raised and pytest errors out. To see and fix this, remove the corresponding ignore lines from `pytest.ini`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/602", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/602/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/602/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/602/events", "html_url": "https://github.com/ansible/ansible-lint/issues/602", "id": 512073151, "node_id": "MDU6SXNzdWU1MTIwNzMxNTE=", "number": 602, "title": "[HELP WANTED] [SEND PR] Get rid of the deprecated `imp` module usage", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133338648, "node_id": "MDU6TGFiZWwxMTMzMzM4NjQ4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}, {"id": 1133340097, "node_id": "MDU6TGFiZWwxMTMzMzQwMDk3", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/high", "name": "priority/high", "color": "ff8800", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "slsh1o", "id": 33605143, "node_id": "MDQ6VXNlcjMzNjA1MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33605143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slsh1o", "html_url": "https://github.com/slsh1o", "followers_url": "https://api.github.com/users/slsh1o/followers", "following_url": "https://api.github.com/users/slsh1o/following{/other_user}", "gists_url": "https://api.github.com/users/slsh1o/gists{/gist_id}", "starred_url": "https://api.github.com/users/slsh1o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slsh1o/subscriptions", "organizations_url": "https://api.github.com/users/slsh1o/orgs", "repos_url": "https://api.github.com/users/slsh1o/repos", "events_url": "https://api.github.com/users/slsh1o/events{/privacy}", "received_events_url": "https://api.github.com/users/slsh1o/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "slsh1o", "id": 33605143, "node_id": "MDQ6VXNlcjMzNjA1MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33605143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slsh1o", "html_url": "https://github.com/slsh1o", "followers_url": "https://api.github.com/users/slsh1o/followers", "following_url": "https://api.github.com/users/slsh1o/following{/other_user}", "gists_url": "https://api.github.com/users/slsh1o/gists{/gist_id}", "starred_url": "https://api.github.com/users/slsh1o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slsh1o/subscriptions", "organizations_url": "https://api.github.com/users/slsh1o/orgs", "repos_url": "https://api.github.com/users/slsh1o/repos", "events_url": "https://api.github.com/users/slsh1o/events{/privacy}", "received_events_url": "https://api.github.com/users/slsh1o/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-24T17:13:04Z", "updated_at": "2020-04-27T19:47:02Z", "closed_at": "2020-04-27T19:47:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\nN/A\r\n\r\n- ansible installation method: tox tests\r\n- ansible-lint installation method: tox tests\r\n\r\n# Desired Behaviour\r\n\r\n`pytest` should not fail in the strict warning mode (`filterwarnings = error`)\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n`DeprecationWarning` is raised and pytest errors out. To see and fix this, remove the corresponding ignore lines from `pytest.ini`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/599", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/599/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/599/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/599/events", "html_url": "https://github.com/ansible/ansible-lint/issues/599", "id": 511481499, "node_id": "MDU6SXNzdWU1MTE0ODE0OTk=", "number": 599, "title": "Drop support for older setuptools for building locally and refactor setup.py", "user": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340097, "node_id": "MDU6TGFiZWwxMTMzMzQwMDk3", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/high", "name": "priority/high", "color": "ff8800", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18", "html_url": "https://github.com/ansible/ansible-lint/milestone/18", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18/labels", "id": 4292583, "node_id": "MDk6TWlsZXN0b25lNDI5MjU4Mw==", "number": 18, "title": "4.2.0", "description": "Minor release", "creator": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2019-05-07T13:27:40Z", "updated_at": "2019-12-04T21:03:03Z", "due_on": "2019-12-04T08:00:00Z", "closed_at": "2019-12-04T21:03:03Z"}, "comments": 0, "created_at": "2019-10-23T17:55:16Z", "updated_at": "2019-10-23T23:53:25Z", "closed_at": "2019-10-23T23:53:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "For building locally, require a more recent setuptools (likely >=34.4) and remove support for older: https://github.com/ansible/ansible-lint/blob/master/setup.py#L27\r\n\r\nAs part of this issue we want to refactor `setup.py` to remove workarounds, doing something like #592. Requiring more recent tooling allows us to do this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/595", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/595/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/595/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/595/events", "html_url": "https://github.com/ansible/ansible-lint/issues/595", "id": 509934996, "node_id": "MDU6SXNzdWU1MDk5MzQ5OTY=", "number": 595, "title": "AttributeError: 'str' object has no attribute 'get'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2220380714, "node_id": "MDU6TGFiZWwyMjIwMzgwNzE0", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-21T12:37:57Z", "updated_at": "2020-07-24T12:56:47Z", "closed_at": "2020-07-24T12:56:47Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\nIt seems that the linter may get confused by the layout of yaml files and choke trying to load a vars file as a tasks one.\r\n\r\n# Desired Behaviour\r\n\r\nEven if the user may have wrongly hosts vars inside `role/tasks/vars/` instead of `role/vars/` the tools should not crash with a confusing error. \r\n\r\nIt should at least give some kind of error or warning and enough information to allow user to remediate the issue.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\nExamining /Users/ssbarnea/rdo/tripleo-quickstart/roles/libvirt/setup/overcloud/tasks/vars/libvirt_nodepool_vars.yml of type tasks\r\nFile \"/Users/ssbarnea/.pyenv/versions/3.7.4/bin/ansible-lint\", line 11, in <module>\r\nload_entry_point('ansible-lint', 'console_scripts', 'ansible-lint')()\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/__main__.py\", line 187, in main\r\nmatches.extend(runner.run())\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/__init__.py\", line 285, in run\r\nskip_list=self.skip_list))\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/__init__.py\", line 178, in run\r\nmatches.extend(rule.matchyaml(playbookfile, text))\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/__init__.py\", line 119, in matchyaml\r\nyaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/utils.py\", line 617, in append_skipped_rules\r\nyaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/utils.py\", line 662, in _append_skipped_rules\r\nraise e\r\nFile \"/Users/ssbarnea/os/ansible-lint/lib/ansiblelint/utils.py\", line 657, in _append_skipped_rules\r\nif pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'str' object has no attribute 'get'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/590", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/590/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/590/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/590/events", "html_url": "https://github.com/ansible/ansible-lint/issues/590", "id": 507828955, "node_id": "MDU6SXNzdWU1MDc4Mjg5NTU=", "number": 590, "title": "ansible-lint fails to install from source: AttributeError: 'SpecifierSet' object has no attribute 'split'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2019-10-16T12:46:28Z", "updated_at": "2020-05-13T14:10:12Z", "closed_at": "2019-10-22T16:28:48Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Due to the complex workarounds collected in `setup.py` over the years ansible-lint may fail to install with something like:\r\n\r\n```\r\npip install .                                                                                                                                                           [13:40:59]\r\nProcessing /Users/ssbarnea/.cache/pre-commit/repo5hdz7os2\r\nERROR: Command errored out with exit status 1:\r\ncommand: /Users/ssbarnea/.cache/pre-commit/repo5hdz7os2/py3/bin/python3.7 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt/setup.py'\"'\"'; __file__='\"'\"'/private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'rn'\"'\"', '\"'\"'n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base /private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt/pip-egg-info\r\ncwd: /private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt/\r\nComplete output (21 lines):\r\n/private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt/.eggs/setuptools_scm-3.3.3-py3.7.egg/setuptools_scm/git.py:68: UserWarning: \"/private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt\" is shallow and may cause errors\r\nwarnings.warn('\"%s\" is shallow and may cause errors' % (wd.path,))\r\nTraceback (most recent call last):\r\nFile \"<string>\", line 1, in <module>\r\nFile \"/private/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/pip-req-build-zpowp0qt/setup.py\", line 150, in <module>\r\n__name__ == '__main__' and setuptools.setup(**setup_params)\r\nFile \"/Users/ssbarnea/.cache/pre-commit/repo5hdz7os2/py3/lib/python3.7/site-packages/setuptools/__init__.py\", line 145, in setup\r\nreturn distutils.core.setup(**attrs)\r\nFile \"/Users/ssbarnea/.pyenv/versions/3.7.4/lib/python3.7/distutils/core.py\", line 108, in setup\r\n_setup_distribution = dist = klass(attrs)\r\nFile \"/Users/ssbarnea/.cache/pre-commit/repo5hdz7os2/py3/lib/python3.7/site-packages/setuptools/dist.py\", line 447, in __init__\r\nk: v for k, v in attrs.items()\r\nFile \"/Users/ssbarnea/.pyenv/versions/3.7.4/lib/python3.7/distutils/dist.py\", line 292, in __init__\r\nself.finalize_options()\r\nFile \"/Users/ssbarnea/.cache/pre-commit/repo5hdz7os2/py3/lib/python3.7/site-packages/setuptools/dist.py\", line 735, in finalize_options\r\nep.load()(self, ep.name, value)\r\nFile \"/Users/ssbarnea/.cache/pre-commit/repo5hdz7os2/py3/lib/python3.7/site-packages/setuptools/dist.py\", line 291, in check_specifier\r\npackaging.specifiers.SpecifierSet(value)\r\nFile \"/Users/ssbarnea/.cache/pre-commit/repo5hdz7os2/py3/lib/python3.7/site-packages/setuptools/_vendor/packaging/specifiers.py\", line 594, in __init__\r\nspecifiers = [s.strip() for s in specifiers.split(\",\") if s.strip()]\r\nAttributeError: 'SpecifierSet' object has no attribute 'split'\r\n----------------------------------------\r\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\r\n```\r\n\r\nIt happens that I already encountered this error with two other packages I maintain and the fix was to obliterate all workarounds from setup.py and go for safe setup.cfg approach.\r\n\r\nReferences:\r\n\r\n* https://github.com/pycontribs/selinux/blob/master/setup.py\r\n* https://github.com/pycontribs/pytest-molecule/blob/master/setup.py\r\n* https://github.com/pypa/setuptools/issues/1869 - same error another project\r\n* https://bugs.launchpad.net/tripleo/+bug/1848512 - OpenStack Jobs broken by this bug\r\n\r\nThis is **not fixed** until:\r\n* a new tag is added as pre-commit requires a tag (any tag)\r\n* a release is made on pypi, so others can use it (even a new pre-release should do)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/588", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/588/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/588/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/588/events", "html_url": "https://github.com/ansible/ansible-lint/issues/588", "id": 504650208, "node_id": "MDU6SXNzdWU1MDQ2NTAyMDg=", "number": 588, "title": "`# noqa` has odd behaviour in blocks", "user": {"login": "peterchoo", "id": 5271469, "node_id": "MDQ6VXNlcjUyNzE0Njk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5271469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterchoo", "html_url": "https://github.com/peterchoo", "followers_url": "https://api.github.com/users/peterchoo/followers", "following_url": "https://api.github.com/users/peterchoo/following{/other_user}", "gists_url": "https://api.github.com/users/peterchoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterchoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterchoo/subscriptions", "organizations_url": "https://api.github.com/users/peterchoo/orgs", "repos_url": "https://api.github.com/users/peterchoo/repos", "events_url": "https://api.github.com/users/peterchoo/events{/privacy}", "received_events_url": "https://api.github.com/users/peterchoo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-09T13:23:57Z", "updated_at": "2020-01-20T12:23:27Z", "closed_at": "2020-01-20T12:23:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.5.5\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\n`# noqa` works as expected in blocks, specifically for rule 305.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nAs per #516, `# noqa` doesn't work as expected in blocks.\r\n\r\nPlaybook:\r\n\r\n```yaml\r\n---\r\n  \r\n- name: Test Playbook\r\n  hosts: all\r\n  tasks:\r\n    - name: Shell Command  # noqa 305\r\n      shell: echo \"test\"\r\n      \r\n    - block:\r\n        - name: Shell Command 2  # noqa 305\r\n          shell: echo \"test 2\"\r\n```\r\n\r\nAnsible Lint output:\r\n\r\n```\r\n$ ansible-lint playbook.yml \r\n[301] Commands should not change things if nothing needs doing\r\nplaybook.yml:6\r\nTask/Handler: Shell Command\r\n\r\n[305] Use shell only when shell functionality is required\r\nplaybook.yml:10\r\n```\r\n\r\nRule 301 was surprisingly not picked up in the block, and 305 wasn't skipped.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/572", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/572/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/572/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/572/events", "html_url": "https://github.com/ansible/ansible-lint/issues/572", "id": 482735199, "node_id": "MDU6SXNzdWU0ODI3MzUxOTk=", "number": 572, "title": "Relative path in config file are not expanded in a deterministic way", "user": {"login": "cans", "id": 582326, "node_id": "MDQ6VXNlcjU4MjMyNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/582326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cans", "html_url": "https://github.com/cans", "followers_url": "https://api.github.com/users/cans/followers", "following_url": "https://api.github.com/users/cans/following{/other_user}", "gists_url": "https://api.github.com/users/cans/gists{/gist_id}", "starred_url": "https://api.github.com/users/cans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cans/subscriptions", "organizations_url": "https://api.github.com/users/cans/orgs", "repos_url": "https://api.github.com/users/cans/repos", "events_url": "https://api.github.com/users/cans/events{/privacy}", "received_events_url": "https://api.github.com/users/cans/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-20T09:03:15Z", "updated_at": "2020-04-02T12:03:16Z", "closed_at": "2020-04-02T12:03:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.8.3\r\n  config file = /home/ncaniart/src/gitco/roles/user-make/ansible.cfg\r\n  configured module search path = ['/home/ncaniart/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ncaniart/.virtualenvs/ansible-roling/lib/python3.7/site-packages/ansible\r\n  executable location = /home/ncaniart/.virtualenvs/ansible-roling/bin/ansible\r\n  python version = 3.7.3 (default, Apr  3 2019, 05:39:12) [GCC 8.3.0]\r\n\r\nansible-lint 4.1.0a1.dev28+g6388f1c.d20190818\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: source (master)\r\n\r\n# Desired Behaviour\r\n\r\nThe path listed in ansible-lint configuration file should be expanded relatively to the configuration file path, not the current working directory. Otherwise linting output depends on the environment.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nUsing the role github.com/cans/user-make.git as an example:\r\n\r\n```\r\ngit clone git@github.com:cans/user-make.git\r\ncd user-make\r\nansible-galaxy install tests/requirements.yml\r\nansible-lint -c ./.ansible-lint tests/local.yml\r\n```\r\nYields a proper output (roles under tests/roles are not linted)\r\n```\r\ncd tests\r\nansible-lint -c ../.ansible-lint local.yml\r\n```\r\nReports warnings about the third party roles, e.g.:\r\n```\r\n[206] Variables should have spaces before and after: {{ var_name }}\r\ntests/roles/chrismeyersfsu.provision_docker/tasks/inc_cloud_iface.yml:10\r\n    tty: \"{{provision_docker_use_docker_connection | bool}}\"\r\n```\r\n\r\n2019-11-03: Fixed commands to reproduce the issue. One needs to lint a specific playbook to make the issue more obvious.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/569", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/569/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/569/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/569/events", "html_url": "https://github.com/ansible/ansible-lint/issues/569", "id": 481015518, "node_id": "MDU6SXNzdWU0ODEwMTU1MTg=", "number": 569, "title": "Include_tasks/import_tasks in subfolders result in wrong paths", "user": {"login": "wilmardo", "id": 8994658, "node_id": "MDQ6VXNlcjg5OTQ2NTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8994658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wilmardo", "html_url": "https://github.com/wilmardo", "followers_url": "https://api.github.com/users/wilmardo/followers", "following_url": "https://api.github.com/users/wilmardo/following{/other_user}", "gists_url": "https://api.github.com/users/wilmardo/gists{/gist_id}", "starred_url": "https://api.github.com/users/wilmardo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wilmardo/subscriptions", "organizations_url": "https://api.github.com/users/wilmardo/orgs", "repos_url": "https://api.github.com/users/wilmardo/repos", "events_url": "https://api.github.com/users/wilmardo/events{/privacy}", "received_events_url": "https://api.github.com/users/wilmardo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-15T06:39:28Z", "updated_at": "2020-02-18T14:05:37Z", "closed_at": "2020-02-18T14:05:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n# ansible --version\r\nansible 2.8.3\r\n  config file = None\r\n  configured module search path = ['/c/Users/wilmaro/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /c/Users/wilmaro/Development/Intermax/ansible-lint/venv/lib/python3.6/site-packages/ansible-2.8.3-py3.6.egg/ansible\r\n  executable location = /c/Users/wilmaro/Development/Intermax/ansible-lint/venv/bin/ansible\r\n  python version = 3.6.8 (default, Jan 14 2019, 11:02:34) [GCC 8.0.1 20180414 (experimental) [trunk revision 259383]]\r\n\r\n# ansible-lint --version\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nThe paths correctly expanded and no warning shown.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n# ansible-lint .\r\nWARNING: Couldn't open /c/Users/wilmaro/Development/Intermax/ansible-lint-issue-demo/tasks/tasks/includes/main.yml - No such file or directory\r\n[502] All tasks should be named\r\n/c/Users/wilmaro/Development/Intermax/ansible-lint-issue-demo/tasks/includes/main.yml:2\r\nTask/Handler: ping\r\n```\r\n\r\n# Steps to reproduce\r\n\r\n```\r\ngit clone https://github.com/wilmardo/ansible-lint-issue-demo.git\r\ncd ansible-lint-issue-demo\r\nansible-lint .\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/565", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/565/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/565/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/565/events", "html_url": "https://github.com/ansible/ansible-lint/issues/565", "id": 478459166, "node_id": "MDU6SXNzdWU0Nzg0NTkxNjY=", "number": 565, "title": "Ansible lint fails to install using pip on 16.04 ", "user": {"login": "martinkennelly", "id": 24497285, "node_id": "MDQ6VXNlcjI0NDk3Mjg1", "avatar_url": "https://avatars1.githubusercontent.com/u/24497285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinkennelly", "html_url": "https://github.com/martinkennelly", "followers_url": "https://api.github.com/users/martinkennelly/followers", "following_url": "https://api.github.com/users/martinkennelly/following{/other_user}", "gists_url": "https://api.github.com/users/martinkennelly/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinkennelly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinkennelly/subscriptions", "organizations_url": "https://api.github.com/users/martinkennelly/orgs", "repos_url": "https://api.github.com/users/martinkennelly/repos", "events_url": "https://api.github.com/users/martinkennelly/events{/privacy}", "received_events_url": "https://api.github.com/users/martinkennelly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52026480, "node_id": "MDU6TGFiZWw1MjAyNjQ4MA==", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/status/invalid", "name": "status/invalid", "color": "e6e6e6", "default": false, "description": "Not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-08-08T13:04:59Z", "updated_at": "2019-08-09T20:28:38Z", "closed_at": "2019-08-08T13:21:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version NA\r\nansible-lint --version 4.1.0\r\npip version: pip 8.1.1 (python 2.7)\r\n```\r\n\r\n- ansible installation method: NA\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\nAnsible-lint installs via pip\r\n\r\n\r\n\r\n# Actual Behaviour (Bug report only)\r\nAttempted to install ansible-lint via pip on Ubuntu 16.04 LTS but failed with error:\r\n```\r\n  Using cached https://files.pythonhosted.org/packages/fd/f4/0a9044336f9ae455749a9e1ce6a7c8d6a47551f7eeddb8e9ea574d25b75c/ruamel.yaml-0.16.1.tar.gz\r\n    Complete output from command python setup.py egg_info:\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"/tmp/pip-build-h_bkjlq3/ruamel.yaml/setup.py\", line 23, in <module>\r\n        from setuptools.namespaces import Installer as NameSpaceInstaller # NOQA\r\n    ImportError: No module named 'setuptools.namespaces'\r\n```\r\n\r\nI corrected this issue by first installing setuptools and then install ansible-lint.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/564", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/564/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/564/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/564/events", "html_url": "https://github.com/ansible/ansible-lint/issues/564", "id": 478383284, "node_id": "MDU6SXNzdWU0NzgzODMyODQ=", "number": 564, "title": "4.1.1a0: Error trying to append skipped rules: RuntimeError('Unexpected file type: block',)", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-08-08T10:26:45Z", "updated_at": "2019-11-04T21:36:22Z", "closed_at": "2019-11-04T21:36:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\n```\r\n\r\n# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.8.1\r\nansible-lint 4.1.1a0\r\n```\r\n\r\n# Desired Behaviour\r\n\r\nNo errors or actionable ones.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nI will give only one example but this happens on multiple files. Content available at https://opendev.org/zuul/zuul-jobs/src/branch/master/roles/push-to-intermediate-registry/tasks/push-image.yaml --- which passed with older versions of Ansible lint.\r\n\r\n```\r\nExamining /Users/ssbarnea/rdo/zuul-jobs/roles/push-to-intermediate-registry/tasks/push-image.yaml of type block\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\nError trying to append skipped rules: RuntimeError('Unexpected file type: block',)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/562", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/562/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/562/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/562/events", "html_url": "https://github.com/ansible/ansible-lint/issues/562", "id": 477349425, "node_id": "MDU6SXNzdWU0NzczNDk0MjU=", "number": 562, "title": "ansible-lint fails after upgrade to 4.1.1", "user": {"login": "g1ps", "id": 5502582, "node_id": "MDQ6VXNlcjU1MDI1ODI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5502582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g1ps", "html_url": "https://github.com/g1ps", "followers_url": "https://api.github.com/users/g1ps/followers", "following_url": "https://api.github.com/users/g1ps/following{/other_user}", "gists_url": "https://api.github.com/users/g1ps/gists{/gist_id}", "starred_url": "https://api.github.com/users/g1ps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g1ps/subscriptions", "organizations_url": "https://api.github.com/users/g1ps/orgs", "repos_url": "https://api.github.com/users/g1ps/repos", "events_url": "https://api.github.com/users/g1ps/events{/privacy}", "received_events_url": "https://api.github.com/users/g1ps/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2019-08-06T12:24:32Z", "updated_at": "2019-11-01T13:50:45Z", "closed_at": "2019-11-01T13:49:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\nAfter upgrading to 4.1.1 I get this error on every run. I tried 4.1.1.a0, and reverting back through 4.1.0 to 4.0.1. No change. I also noted that the upgrade pused ansible to 2.8.3, from my previously installed 2.8.2 so I reverted that as well. Nothing has helped. I suspect something in the dependencies might have broken it but I don't know what they were. My builds are now broken due to failing lint checks and I am so far unable to fix this.\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```console\r\n$ ansible-lint --version\r\nansible-lint 4.0.1\r\n$ ansible --version\r\nansible 2.8.2\r\n  config file = None\r\n  configured module search path = [u'/users/do-auto-user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Jun 11 2019, 12:19:05) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nNo error.\r\n\r\n# Actual Behaviour (Bug report only)\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/ansible-lint\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/__init__.py\", line 264, in run\r\n    for child in ansiblelint.utils.find_children(arg, self.playbook_dir):\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/utils.py\", line 171, in find_children\r\n    for child in play_children(basedir, item, playbook[1], playbook_dir):\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/utils.py\", line 222, in play_children\r\n    fail_on_undefined=False)\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/utils.py\", line 190, in template\r\n    **dict(kwargs, fail_on_undefined=fail_on_undefined))\r\n  File \"/usr/lib/python2.7/site-packages/ansiblelint/utils.py\", line 78, in ansible_template\r\n    return templar.template(varname, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/ansible/template/__init__.py\", line 572, in template\r\n    ) for v in variable]\r\n  File \"/usr/lib/python2.7/site-packages/ansible/template/__init__.py\", line 584, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/usr/lib/python2.7/site-packages/ansible/template/__init__.py\", line 584, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/usr/lib/python2.7/site-packages/ansible/template/__init__.py\", line 539, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/usr/lib/python2.7/site-packages/ansible/template/__init__.py\", line 804, in do_template\r\n    res = j2_concat(rf)\r\n  File \"<template>\", line 13, in root\r\n  File \"/usr/lib/python2.7/site-packages/ansible/plugins/filter/core.py\", line 65, in to_yaml\r\n    transformed = yaml.dump(a, Dumper=AnsibleDumper, allow_unicode=True, default_flow_style=default_flow_style, **kw)\r\n  File \"/usr/lib64/python2.7/site-packages/yaml/__init__.py\", line 293, in dump\r\n    return dump_all([data], stream, Dumper=Dumper, **kwds)\r\n  File \"/usr/lib64/python2.7/site-packages/yaml/__init__.py\", line 281, in dump_all\r\n    dumper.represent(data)\r\n  File \"/usr/lib64/python2.7/site-packages/yaml/representer.py\", line 29, in represent\r\n    node = self.represent_data(data)\r\n  File \"/usr/lib64/python2.7/site-packages/yaml/representer.py\", line 68, in represent_data\r\n    node = self.yaml_representers[None](self, data)\r\n  File \"/usr/lib64/python2.7/site-packages/yaml/representer.py\", line 251, in represent_undefined\r\n    raise RepresenterError(\"cannot represent an object\", data)\r\nyaml.representer.RepresenterError: ('cannot represent an object', AnsibleUndefined)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/560", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/560/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/560/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/560/events", "html_url": "https://github.com/ansible/ansible-lint/issues/560", "id": 476725310, "node_id": "MDU6SXNzdWU0NzY3MjUzMTA=", "number": 560, "title": "Ansible lint does not effectively ensures a file has  already been checked", "user": {"login": "cans", "id": 582326, "node_id": "MDQ6VXNlcjU4MjMyNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/582326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cans", "html_url": "https://github.com/cans", "followers_url": "https://api.github.com/users/cans/followers", "following_url": "https://api.github.com/users/cans/following{/other_user}", "gists_url": "https://api.github.com/users/cans/gists{/gist_id}", "starred_url": "https://api.github.com/users/cans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cans/subscriptions", "organizations_url": "https://api.github.com/users/cans/orgs", "repos_url": "https://api.github.com/users/cans/repos", "events_url": "https://api.github.com/users/cans/events{/privacy}", "received_events_url": "https://api.github.com/users/cans/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-05T08:31:02Z", "updated_at": "2020-07-28T13:48:57Z", "closed_at": "2020-07-28T13:48:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.8.3\r\n  config file = ~/src/gitco/roles/user-make/ansible.cfg\r\n  configured module search path = ['~/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = ~/.virtualenvs/ansible-roling/lib/python3.7/site-packages/ansible\r\n  executable location = ~/.virtualenvs/ansible-roling/bin/ansible\r\n  python version = 3.7.3 (default, Apr  3 2019, 05:39:12) [GCC 8.3.0]\r\n$ ansible-lint --version\r\n  ansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nWhen files are include by others, they should not be recheck. E.g. when checking the role [cans/user-make](https://github.com/cans/user-make), I should get the following output:\r\n\r\n```\r\n$ ansible-lint tests/*.yml  # in there a playbook includes tests/test.yml\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:59\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:97\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:105\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:183\r\n      local_action:\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nInstead file imported are reported several times.\r\n\r\n```\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\n/home/ncaniart/src/gitco/roles/user-make/tests/test.yml:59\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\n/home/ncaniart/src/gitco/roles/user-make/tests/test.yml:97\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\n/home/ncaniart/src/gitco/roles/user-make/tests/test.yml:105\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\n/home/ncaniart/src/gitco/roles/user-make/tests/test.yml:183\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:59\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:97\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:105\r\n      local_action:\r\n\r\n[504] Do not use 'local_action', use 'delegate_to: localhost'\r\ntests/test.yml:183\r\n      local_action:\r\n```\r\nBecause the path are not properly normalized and despite a mechanism being in place in ansible-lint's implementation, the files are indeed checked and reported twice.\r\n\r\nThis issue has already been reported (cf. #335) but disregarded, though being fairly trivial to fix.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/559", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/559/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/559/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/559/events", "html_url": "https://github.com/ansible/ansible-lint/issues/559", "id": 476589073, "node_id": "MDU6SXNzdWU0NzY1ODkwNzM=", "number": 559, "title": "ansible-lint 4.1.1 must be released ASAP ", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-04T20:10:22Z", "updated_at": "2019-08-23T17:16:29Z", "closed_at": "2019-08-23T17:16:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Last release was back in february and while a fix for E206 bugs was merged we cannot consume it because no tag was added.\r\n\r\nThe lack of a release is forcing few OpenStack projects from using 2+ years old version of ansible-lint. Some people even considered dropping the use of the tool because it becames unreliable.\r\n\r\nPS. Even a pre-release like `4.1.1rc1` would enable us to start consuming it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/556", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/556/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/556/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/556/events", "html_url": "https://github.com/ansible/ansible-lint/issues/556", "id": 473619983, "node_id": "MDU6SXNzdWU0NzM2MTk5ODM=", "number": 556, "title": "Error with ruamel.yaml version 0.16.0", "user": {"login": "jfx", "id": 1844342, "node_id": "MDQ6VXNlcjE4NDQzNDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1844342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfx", "html_url": "https://github.com/jfx", "followers_url": "https://api.github.com/users/jfx/followers", "following_url": "https://api.github.com/users/jfx/following{/other_user}", "gists_url": "https://api.github.com/users/jfx/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfx/subscriptions", "organizations_url": "https://api.github.com/users/jfx/orgs", "repos_url": "https://api.github.com/users/jfx/repos", "events_url": "https://api.github.com/users/jfx/events{/privacy}", "received_events_url": "https://api.github.com/users/jfx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-07-27T09:27:18Z", "updated_at": "2020-04-25T22:50:22Z", "closed_at": "2020-04-25T22:50:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```console\r\n$ ansible --version\r\nansible 2.8.1\r\n  config file = None\r\n  configured module search path = ['/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.3 (default, May  3 2019, 11:24:39) [GCC 8.3.0]\r\n\r\n$ ansible-lint --version\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n# Desired Behaviour\r\n\r\nFix ruamel.yaml dependency lower than 0.16.0\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nruamel.yaml 0.16.0 was recently published and with this version\r\n```python-traceback\r\nansible-lint playbook.yml\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/ansible-lint\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python3.7/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/usr/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 282, in run\r\n    skip_list=self.skip_list))\r\n  File \"/usr/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 175, in run\r\n    matches.extend(rule.matchyaml(playbookfile, text))\r\n  File \"/usr/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 116, in matchyaml\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/usr/lib/python3.7/site-packages/ansiblelint/utils.py\", line 603, in append_skipped_rules\r\n    yaml = ruamel.yaml.YAML()\r\nAttributeError: module 'ruamel.yaml' has no attribute 'YAML'\r\n```\r\nThe same command with an installation of ruamel.yaml version 0.15.100 before installation of ansible and ansible-lint works fine.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/553", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/553/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/553/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/553/events", "html_url": "https://github.com/ansible/ansible-lint/issues/553", "id": 472940131, "node_id": "MDU6SXNzdWU0NzI5NDAxMzE=", "number": 553, "title": "Use an API token for uploading to PyPI from Travis CI instead of account creds", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133355680, "node_id": "MDU6TGFiZWwxMTMzMzU1Njgw", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/proposal", "name": "proposal", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/19", "html_url": "https://github.com/ansible/ansible-lint/milestone/19", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/19/labels", "id": 5664936, "node_id": "MDk6TWlsZXN0b25lNTY2NDkzNg==", "number": 19, "title": "4.3.1", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2020-07-17T10:33:41Z", "updated_at": "2020-08-22T06:18:55Z", "due_on": null, "closed_at": "2020-08-22T06:18:55Z"}, "comments": 7, "created_at": "2019-07-25T15:45:16Z", "updated_at": "2020-07-17T11:51:09Z", "closed_at": "2020-07-17T11:51:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Infra improvement\r\n\r\n# Desired Behaviour\r\n\r\nIt is now possible to create an API token at https://pypi.org/manage/account/token/. Travis CI autoreleases should switch to that.\r\n\r\nRef: https://discuss.python.org/t/pypi-security-work-multifactor-auth-progress-help-needed/1042/31\r\n\r\nUse `__token__` for a username and the token itself for a password when using Twine: https://github.com/pypa/warehouse/issues/994#issuecomment-512634222", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/546", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/546/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/546/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/546/events", "html_url": "https://github.com/ansible/ansible-lint/issues/546", "id": 466327365, "node_id": "MDU6SXNzdWU0NjYzMjczNjU=", "number": 546, "title": "Can't use --exclude to exclude files", "user": {"login": "g1ps", "id": 5502582, "node_id": "MDQ6VXNlcjU1MDI1ODI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5502582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g1ps", "html_url": "https://github.com/g1ps", "followers_url": "https://api.github.com/users/g1ps/followers", "following_url": "https://api.github.com/users/g1ps/following{/other_user}", "gists_url": "https://api.github.com/users/g1ps/gists{/gist_id}", "starred_url": "https://api.github.com/users/g1ps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g1ps/subscriptions", "organizations_url": "https://api.github.com/users/g1ps/orgs", "repos_url": "https://api.github.com/users/g1ps/repos", "events_url": "https://api.github.com/users/g1ps/events{/privacy}", "received_events_url": "https://api.github.com/users/g1ps/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-07-10T14:00:35Z", "updated_at": "2019-08-07T09:42:13Z", "closed_at": "2019-08-07T09:40:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\nI'm looking for an example of how to do this from the command line or confirmation that it can't be done, I'm doing things wrong, etc.. I've scoured the net and nothing I try works. I've tried `--exclude=./play.yml`, `--exclude=[./play.yml]`, `--exclude=['./play.yml']` and a dozen other variants, with and without wildcards. It's not clear to me how a list is supposed to be passed to this argument and I can find no single example. Nothing I pass stops ansible-lint from parsing the files I want to exclude. I am using the config file to exclude directories and that works fine. I disabled that config to see whether list merging was causing the problem but I still can't exclude files.\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version 2.8.2\r\nansible-lint --version 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nI would like to be able to exclude specific playbooks in a directory where others are included.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nFiles are still checked i.e. ansible-lint still reports that it's examining them and proceeds to process included roles.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/544", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/544/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/544/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/544/events", "html_url": "https://github.com/ansible/ansible-lint/issues/544", "id": 465208134, "node_id": "MDU6SXNzdWU0NjUyMDgxMzQ=", "number": 544, "title": "ansible-lint erroneously detects pipes in shell when that is template", "user": {"login": "ignatenkobrain", "id": 2866862, "node_id": "MDQ6VXNlcjI4NjY4NjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/2866862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ignatenkobrain", "html_url": "https://github.com/ignatenkobrain", "followers_url": "https://api.github.com/users/ignatenkobrain/followers", "following_url": "https://api.github.com/users/ignatenkobrain/following{/other_user}", "gists_url": "https://api.github.com/users/ignatenkobrain/gists{/gist_id}", "starred_url": "https://api.github.com/users/ignatenkobrain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ignatenkobrain/subscriptions", "organizations_url": "https://api.github.com/users/ignatenkobrain/orgs", "repos_url": "https://api.github.com/users/ignatenkobrain/repos", "events_url": "https://api.github.com/users/ignatenkobrain/events{/privacy}", "received_events_url": "https://api.github.com/users/ignatenkobrain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-07-08T11:39:10Z", "updated_at": "2020-06-24T16:50:45Z", "closed_at": "2020-06-24T16:50:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n\u22ca> ~/P/g/ansible on master \u25e6 ansible --version                                                                                                                              13:30:37\r\nansible 2.8.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/brain/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.4rc2 (default, Jul  3 2019, 01:30:40) [GCC 9.1.1 20190605 (Red Hat 9.1.1-2)]\r\n\u22ca> ~/P/g/ansible on master \u25e6 ansible-lint --version                                                                                                                         13:30:54\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: OS package\r\n- ansible-lint installation method: OS package\r\n\r\n# Desired Behaviour\r\n\r\nansible-lint should not find this false positive\u2026\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```yaml\r\n---\r\n- name: Test\r\n  hosts: localhost\r\n  gather_facts: false\r\n  tasks:\r\n  - name: Test\r\n    shell: echo\r\n      {% for i in range(nameservers | length) %}\r\n      {{ nameservers[i] }}\r\n      {% endfor %}\r\n    changed_when: false\r\n  vars:\r\n    nameservers:\r\n    - 8.8.8.8\r\n    - 4.4.4.4\r\n```\r\n\r\nAnd ansible-lint returns:\r\n\r\n```\r\n[306] Shells that use pipes should set the pipefail option\r\ntest.yml:6\r\nTask/Handler: Test\r\n```\r\n\r\nI did not check code, but I think it just checks whether pipe is present in shell string, but shell is actually jinja2 template, so in this case it is false-positive.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/543", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/543/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/543/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/543/events", "html_url": "https://github.com/ansible/ansible-lint/issues/543", "id": 460194200, "node_id": "MDU6SXNzdWU0NjAxOTQyMDA=", "number": 543, "title": "noqa 303 does not work", "user": {"login": "leonsp", "id": 671090, "node_id": "MDQ6VXNlcjY3MTA5MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/671090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonsp", "html_url": "https://github.com/leonsp", "followers_url": "https://api.github.com/users/leonsp/followers", "following_url": "https://api.github.com/users/leonsp/following{/other_user}", "gists_url": "https://api.github.com/users/leonsp/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonsp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonsp/subscriptions", "organizations_url": "https://api.github.com/users/leonsp/orgs", "repos_url": "https://api.github.com/users/leonsp/repos", "events_url": "https://api.github.com/users/leonsp/events{/privacy}", "received_events_url": "https://api.github.com/users/leonsp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-25T03:48:13Z", "updated_at": "2019-10-12T00:03:21Z", "closed_at": "2019-10-03T15:39:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.7.0\r\n  config file = /Users/username/foo/ansible.cfg\r\n  configured module search path = ['/Users/username/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, Mar 27 2019, 09:23:15) [Clang 10.0.1 (clang-1001.0.46.3)]\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\n`# noqa 303` in a task should prevent the task from reporting a 303 error\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n    - name: copy initial mysql files to second disk  # noqa 303\r\n      # trailing slash (/) in `{{ pxc_default_datadir }}/` to get contents\r\n      command: >\r\n        /usr/bin/rsync --delay-updates -Fza \\\r\n          {{ pxc_default_datadir }}/ {{ pxc_datadir }}\r\n\r\n    - name: copy initial mysql files to second disk\r\n      # trailing slash (/) in `{{ pxc_default_datadir }}/` to get contents\r\n      command: > # noqa 303\r\n        /usr/bin/rsync --delay-updates -Fza \\\r\n          {{ pxc_default_datadir }}/ {{ pxc_datadir }}\r\n\r\n    - name: copy initial mysql files to second disk\r\n      # trailing slash (/) in `{{ pxc_default_datadir }}/` to get contents\r\n      command: >\r\n        /usr/bin/rsync --delay-updates -Fza \\\r\n          {{ pxc_default_datadir }}/ {{ pxc_datadir }} # noqa 303\r\n```\r\n\r\n```\r\n[303] rsync used in place of synchronize module\r\n/Users/username/foo/ansible/roles/pxc-install/tasks/main.yml:56\r\nTask/Handler: copy initial mysql files to second disk\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/541", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/541/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/541/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/541/events", "html_url": "https://github.com/ansible/ansible-lint/issues/541", "id": 457759637, "node_id": "MDU6SXNzdWU0NTc3NTk2Mzc=", "number": 541, "title": "How do you exclude third party roles in requirements.yml", "user": {"login": "dcw329", "id": 12346311, "node_id": "MDQ6VXNlcjEyMzQ2MzEx", "avatar_url": "https://avatars2.githubusercontent.com/u/12346311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcw329", "html_url": "https://github.com/dcw329", "followers_url": "https://api.github.com/users/dcw329/followers", "following_url": "https://api.github.com/users/dcw329/following{/other_user}", "gists_url": "https://api.github.com/users/dcw329/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcw329/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcw329/subscriptions", "organizations_url": "https://api.github.com/users/dcw329/orgs", "repos_url": "https://api.github.com/users/dcw329/repos", "events_url": "https://api.github.com/users/dcw329/events{/privacy}", "received_events_url": "https://api.github.com/users/dcw329/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-19T01:06:19Z", "updated_at": "2020-02-27T17:11:16Z", "closed_at": "2020-02-27T17:11:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "How do you exclude a third party roles, or any role for that matter. I have tried\r\n\r\nI have tried\r\n```exclude_paths:\r\n  - ./roles/nexus\r\n  - requirements.yml\r\n  - compliance-playbook.yml\r\n  - RHEL7-CIS\r\n  - ./roles/RHEL7-CIS\r\n  - ./.ansible/roles/RHEL7-CIS\r\n  - ~/.ansible/roles/RHEL7-CIS\r\n  - hardened-core.yml\r\n  - site.yml\r\n  - meta\r\n  - ./roles/java```\r\n\r\nI just want to exclude RHEL7-CIS and nothing seems to prevent it from running. I have even excluded files referencing it. I am running this as a pre-commit run -a with an exclude: .*RHEL.* even. I can not get RHEL7-CIS to stop being checked. And even some of the roles i have excluded like java continue to have files picked up. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/537", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/537/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/537/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/537/events", "html_url": "https://github.com/ansible/ansible-lint/issues/537", "id": 453484986, "node_id": "MDU6SXNzdWU0NTM0ODQ5ODY=", "number": 537, "title": "TypeError with additional tasks file", "user": {"login": "timo-fc", "id": 42642238, "node_id": "MDQ6VXNlcjQyNjQyMjM4", "avatar_url": "https://avatars2.githubusercontent.com/u/42642238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timo-fc", "html_url": "https://github.com/timo-fc", "followers_url": "https://api.github.com/users/timo-fc/followers", "following_url": "https://api.github.com/users/timo-fc/following{/other_user}", "gists_url": "https://api.github.com/users/timo-fc/gists{/gist_id}", "starred_url": "https://api.github.com/users/timo-fc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timo-fc/subscriptions", "organizations_url": "https://api.github.com/users/timo-fc/orgs", "repos_url": "https://api.github.com/users/timo-fc/repos", "events_url": "https://api.github.com/users/timo-fc/events{/privacy}", "received_events_url": "https://api.github.com/users/timo-fc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-07T12:19:17Z", "updated_at": "2020-08-06T17:19:33Z", "closed_at": "2020-08-06T17:19:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible 2.8.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/-/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/-/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/-/.local/bin/ansible\r\n  python version = 3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0]\r\n\r\nansible-lint 4.1.0a1.dev26+ge73fb6c\r\n\r\n```\r\n- ansible installation method: ppa:ansible/ansible\r\n- ansible-lint installation method: pip3 install git+https://github.com/ansible/ansible-lint.git\r\n\r\n# Desired Behaviour\r\nI expect a output from ansible-lint and not a python error.\r\n\r\n# Actual Behaviour (Bug report only)\r\nSteps to reproduces the error\r\n\r\n- create a new role: ansible-galaxy init test\r\n- create an additional file, with a var in the tasks folder echo \"test: 2\" > test/tasks/test.yml\r\n- crate a playbook which includes the role\r\n- run ansible-lint test.yml\r\n\r\n`\r\nTraceback (most recent call last):\r\n  File \"/home/timo/.local/bin/ansible-lint\", line 11, in <module>\r\n    load_entry_point('ansible-lint==4.1.0a1.dev26+ge73fb6c', 'console_scripts', 'ansible-lint')()\r\n  File \"/home/timo/.local/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/timo/.local/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 285, in run\r\n    skip_list=self.skip_list))\r\n  File \"/home/timo/.local/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 177, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/home/timo/.local/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 87, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/home/timo/.local/lib/python3.6/site-packages/ansiblelint/utils.py\", line 617, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/home/timo/.local/lib/python3.6/site-packages/ansiblelint/utils.py\", line 656, in _append_skipped_rules\r\n    if pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\n`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/534", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/534/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/534/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/534/events", "html_url": "https://github.com/ansible/ansible-lint/issues/534", "id": 452836327, "node_id": "MDU6SXNzdWU0NTI4MzYzMjc=", "number": 534, "title": "How to run noqa on a YAML literal block", "user": {"login": "ianw", "id": 108448, "node_id": "MDQ6VXNlcjEwODQ0OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/108448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianw", "html_url": "https://github.com/ianw", "followers_url": "https://api.github.com/users/ianw/followers", "following_url": "https://api.github.com/users/ianw/following{/other_user}", "gists_url": "https://api.github.com/users/ianw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianw/subscriptions", "organizations_url": "https://api.github.com/users/ianw/orgs", "repos_url": "https://api.github.com/users/ianw/repos", "events_url": "https://api.github.com/users/ianw/events{/privacy}", "received_events_url": "https://api.github.com/users/ianw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-06T05:18:57Z", "updated_at": "2019-10-05T08:40:46Z", "closed_at": "2019-06-07T13:13:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n- Feature request(?)\r\n\r\n# Desired Behaviour\r\n\r\nGiven something like\r\n\r\n```yaml\r\nexim_system_aliases_router: |\r\n  driver = redirect\r\n  allow_fail\r\n  allow_defer\r\n  data = ${lookup{$local_part}lsearch{/etc/aliases}}\r\n  file_transport = address_file\r\n  pipe_transport = address_pipe\r\n```\r\n\r\nThis trips \r\n\r\n```\r\n[206] Variables should have spaces before and after: {{ var_name }}\r\n```\r\n\r\nI'm at a loss how to actually skip this with noqa?  I don't want a ```#noqa XXX``` comment on the end of the line, because it will go into the string.  I tried\r\n\r\n```yaml\r\nexim_system_aliases_router: # noqa 206\r\n |\r\n  driver = redirect\r\n  allow_fail\r\n  allow_defer\r\n  data = ${lookup{$local_part}lsearch{/etc/aliases}}\r\n  file_transport = address_file\r\n  pipe_transport = address_pipe\r\n```\r\n\r\nwhich is ugly ... but also didn't work.\r\n\r\nHappy to update documentation if I can figure it out ...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/532", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/532/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/532/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/532/events", "html_url": "https://github.com/ansible/ansible-lint/issues/532", "id": 451731401, "node_id": "MDU6SXNzdWU0NTE3MzE0MDE=", "number": 532, "title": "How to configure ansible-lint to ignore ROLES checks inside playbook repo?", "user": {"login": "ansiblejunky", "id": 14311849, "node_id": "MDQ6VXNlcjE0MzExODQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/14311849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ansiblejunky", "html_url": "https://github.com/ansiblejunky", "followers_url": "https://api.github.com/users/ansiblejunky/followers", "following_url": "https://api.github.com/users/ansiblejunky/following{/other_user}", "gists_url": "https://api.github.com/users/ansiblejunky/gists{/gist_id}", "starred_url": "https://api.github.com/users/ansiblejunky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ansiblejunky/subscriptions", "organizations_url": "https://api.github.com/users/ansiblejunky/orgs", "repos_url": "https://api.github.com/users/ansiblejunky/repos", "events_url": "https://api.github.com/users/ansiblejunky/events{/privacy}", "received_events_url": "https://api.github.com/users/ansiblejunky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-03T23:25:16Z", "updated_at": "2020-05-16T10:44:33Z", "closed_at": "2020-05-16T10:44:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\n2.7.5\r\nansible-lint --version\r\n4.1.0a0\r\n```\r\n\r\n- ansible installation method: one of source, pip, OS package\r\npip\r\n- ansible-lint installation method: one of source, pip, OS package\r\npip\r\n\r\n# Desired Behaviour\r\nWe are using the best practice repo structure of having a `playbook` repo and then bringing in our roles using `ansible-galaxy` and the `roles` folder. I have configured `.gitignore` to ignore the folders inside `roles/` but not ignore the `roles/requirements.yml` and `roles/app1.yml` which is loaded by `roles/requirements.yml`.  These are used by ansible-galaxy.  So when I make a change to a playbook at the root of my repo, I do not want ansible-lint to follow that code and test all the related roles. I want these tests to occur when I commit code changes to the Ansible Role repo that I have (separate repo). \r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nansible-lint checks the staged file (myplaybook.yml) and checks the syntax, but then detects a task `include_role:` and follows that and starts testing way too much (the entire role code) and produces a ton of problems. This prevents me from checking in the playbook changes which actually have passed all tests. \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/531", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/531/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/531/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/531/events", "html_url": "https://github.com/ansible/ansible-lint/issues/531", "id": 451267744, "node_id": "MDU6SXNzdWU0NTEyNjc3NDQ=", "number": 531, "title": "Yaml anchors / aliases and not supported", "user": {"login": "kuwv", "id": 6035515, "node_id": "MDQ6VXNlcjYwMzU1MTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/6035515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuwv", "html_url": "https://github.com/kuwv", "followers_url": "https://api.github.com/users/kuwv/followers", "following_url": "https://api.github.com/users/kuwv/following{/other_user}", "gists_url": "https://api.github.com/users/kuwv/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuwv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuwv/subscriptions", "organizations_url": "https://api.github.com/users/kuwv/orgs", "repos_url": "https://api.github.com/users/kuwv/repos", "events_url": "https://api.github.com/users/kuwv/events{/privacy}", "received_events_url": "https://api.github.com/users/kuwv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-03T02:24:21Z", "updated_at": "2019-06-03T02:51:24Z", "closed_at": "2019-06-03T02:51:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n\r\n# Ansible and Ansible Lint details\r\n```\r\n $ ansible --version\r\nansible 2.8.0\r\n  config file = /home/vagrant/.ansible.cfg\r\n  configured module search path = [u'/home/vagrant/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr  9 2019, 14:30:50) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\n\r\n$ ansible-lint --version\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: OS package\r\n- ansible-lint installation method: OS package\r\n\r\n# Desired Behaviour\r\n\r\nAnsible lint should support all documented syntax of Ansible.\r\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_advanced_syntax.html#yaml-anchors-and-aliases-sharing-variable-values\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nAnsible lint is instead miss-identifying extensions as duplicate dictionary keys.\r\n```\r\n$ cat >/tmp/test.yml <<EOF \r\n---\r\nvars:\r\n  app1:\r\n    jvm: &jvm_opts\r\n      opts: '-Xms1G -Xmx2G'\r\n      port: 1000\r\n      path: /usr/lib/app1\r\n  app2:\r\n    jvm:\r\n      <<: *jvm_opts\r\n      path: /usr/lib/app2\r\n...\r\nEOF\r\n\r\n$ ansible-lint /tmp/test.yml \r\n [WARNING]: While constructing a mapping from /tmp/test.yml, line 10, column 7, found a duplicate dict key (path). Using last defined value only.\r\n\r\n [WARNING]: While constructing a mapping from <unicode string>, line 10, column 7, found a duplicate dict key (path). Using last defined value only.\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/526", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/526/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/526/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/526/events", "html_url": "https://github.com/ansible/ansible-lint/issues/526", "id": 450497764, "node_id": "MDU6SXNzdWU0NTA0OTc3NjQ=", "number": 526, "title": "[BUG] Race condition when running tox tests in parallel", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133340458, "node_id": "MDU6TGFiZWwxMTMzMzQwNDU4", "url": "https://api.github.com/repos/ansible/ansible-lint/labels/priority/medium", "name": "priority/medium", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-30T20:43:27Z", "updated_at": "2020-04-03T16:01:59Z", "closed_at": "2020-04-03T16:01:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When running tox in parallel mode against multiple toxenvs, 9 tests fail. But they succeed if run subsequently.\r\n\r\n```console\r\ntox --parallel auto\r\n```\r\n\r\n# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\nN/A\r\n\r\n# Desired Behaviour\r\n\r\nall tests are green\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n9 tests fail in each env\r\n\r\n```python-traceback\r\nIL ansible26 in 30.72 seconds\r\n\u2827 [2] ansible27 | ansibledevelERROR: invocation failed (exit code 1), logfile: ~/src/github/ansible/ansible-lint/.tox/ansible27/log/ansible27-0.log\r\n============================================================== log start ===============================================================\r\nansible27 create: ~/src/github/ansible/ansible-lint/.tox/ansible27\r\nansible27 installdeps: ansible>=2.7,<2.8, -rtest-deps.txt\r\nansible27 inst: ~/src/github/ansible/ansible-lint/.tox/.tmp/package/4/ansible-lint-4.1.0a1.dev20+g93017ea.zip\r\nansible27 installed: You are using pip version 10.0.1, however version 19.1.1 is available.,You should consider upgrading via the 'pip install --upgrade pip' command.,ansible==2.7.11,ansible-lint==4.1.0a1.dev20+g93017ea,asn1crypto==0.24.0,bcrypt==3.1.6,cffi==1.12.3,cryptography==2.6.1,entrypoints==0.3,flake8==3.7.7,flake8-polyfill==1.0.2,Jinja2==2.10.1,MarkupSafe==1.1.1,mccabe==0.6.1,nose==1.3.7,paramiko==2.4.2,pep8-naming==0.8.2,pyasn1==0.4.5,pycodestyle==2.5.0,pycparser==2.19,pyflakes==2.1.1,PyNaCl==1.3.0,PyYAML==5.1,ruamel.yaml==0.15.96,six==1.12.0\r\nansible27 run-test-pre: PYTHONHASHSEED='3147045463'\r\nansible27 run-test: commands[0] | nosetests\r\n.............FFFFFFFFF.............[DEPRECATION WARNING]: docker is kept for backwards compatibility but usage is discouraged. The module documentation details page may \r\nexplain more about this rationale.. This feature will be removed in a future release. Deprecation warnings can be disabled by setting \r\ndeprecation_warnings=False in ansible.cfg.\r\n.........................................WARNING: Couldn't open ~/src/github/ansible/ansible-lint/test/doesnotexist.yml - No such file or directory\r\n............................................................\r\n======================================================================\r\nFAIL: test_config_can_be_overridden (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 68, in test_config_can_be_overridden\r\n    no_override = self.run_ansible_lint(args=\"-t bad_tag\")\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_different_config_file (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 77, in test_different_config_file\r\n    diff_config = self.run_ansible_lint(args=\"-c ./subdir/ansible-config.yml\")\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_exclude (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 65, in test_exclude\r\n    self.assert_config_for(\"--exclude ../test/\", dict(exclude_paths=[\"../test/\"]))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_parseable_as_config (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 43, in test_parseable_as_config\r\n    self.assert_config_for(\"-p\", dict(parseable=True))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_quiet_as_config (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 46, in test_quiet_as_config\r\n    self.assert_config_for(\"-q\", dict(quiet=True))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_rulesdir_as_config (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 49, in test_rulesdir_as_config\r\n    self.assert_config_for(\"-r ../test/rules/\", dict(rulesdir=[\"../test/rules/\"]))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_skip_list (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 62, in test_skip_list\r\n    self.assert_config_for(\"-x bad_tag\", dict(skip_list=[\"bad_tag\"]))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_tags (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 56, in test_tags\r\n    self.assert_config_for(\"-t skip_ansible_lint\", dict(tags=[\"skip_ansible_lint\"]))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n======================================================================\r\nFAIL: test_use_default_rules (test.TestCommandLineInvocationSameAsConfig.TestCommandLineInvocationSameAsConfig)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 53, in test_use_default_rules\r\n    use_default_rules=True))\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 37, in assert_config_for\r\n    with_arg = self.run_ansible_lint(args=cli_arg)\r\n  File \"~/src/github/ansible/ansible-lint/test/TestCommandLineInvocationSameAsConfig.py\", line 32, in run_ansible_lint\r\n    self.assertFalse(err, \"Expected no error but was \" + str(err))\r\nAssertionError: b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n' is not false : Expected no error but was b'Traceback (most recent call last):\\n  File \"../bin/ansible-lint\", line 4, in <module>\\n    import ansiblelint.__main__\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/__init__.py\", line 29, in <module>\\n    import ansiblelint.utils\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansiblelint/utils.py\", line 26, in <module>\\n    from ansible import constants\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/constants.py\", line 184, in <module>\\n    config = ConfigManager()\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 234, in __init__\\n    self._config_file = find_ini_config_file(self.WARNINGS)\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/config/manager.py\", line 192, in find_ini_config_file\\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\\n  File \"~/src/github/ansible/ansible-lint/.tox/ansible27/lib/python3.7/site-packages/ansible/utils/path.py\", line 47, in unfrackpath\\n    basedir = os.getcwd()\\nFileNotFoundError: [Errno 2] No such file or directory\\n'\r\n\r\n----------------------------------------------------------------------\r\nRan 136 tests in 16.272s\r\n\r\nFAILED (failures=9)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/522", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/522/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/522/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/522/events", "html_url": "https://github.com/ansible/ansible-lint/issues/522", "id": 449844344, "node_id": "MDU6SXNzdWU0NDk4NDQzNDQ=", "number": 522, "title": "AttributeError on include_role: name=foo in a block", "user": {"login": "mpitt", "id": 690682, "node_id": "MDQ6VXNlcjY5MDY4Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/690682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpitt", "html_url": "https://github.com/mpitt", "followers_url": "https://api.github.com/users/mpitt/followers", "following_url": "https://api.github.com/users/mpitt/following{/other_user}", "gists_url": "https://api.github.com/users/mpitt/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpitt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpitt/subscriptions", "organizations_url": "https://api.github.com/users/mpitt/orgs", "repos_url": "https://api.github.com/users/mpitt/repos", "events_url": "https://api.github.com/users/mpitt/events{/privacy}", "received_events_url": "https://api.github.com/users/mpitt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-29T14:31:11Z", "updated_at": "2020-05-26T10:20:55Z", "closed_at": "2020-05-26T10:20:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\nansible 2.7.9\r\n  config file = /Users/m/.ansible.cfg\r\n  configured module search path = [u'/Users/m/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/m/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.10 (default, Feb 22 2019, 21:55:15) [GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.37.14)]\r\n\r\nansible-lint --version\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nDon't crash on `include_role` short syntax inside a `block`.\r\n\r\n# Actual Behaviour\r\n\r\n[ansible-lint-test.zip](https://github.com/ansible/ansible-lint/files/3232944/ansible-lint-test.zip)\r\n\r\n## Working example\r\n\r\n```\r\n$ ansible-playbook playbook_ok.yml\r\n\r\nPLAY [my play] ***************************************************************************\r\n\r\nTASK [include_role : my_role] ************************************************************\r\n\r\nTASK [my_role : task] ********************************************************************\r\nok: [localhost] => {\r\n    \"msg\": \"task in my role\"\r\n}\r\n\r\nPLAY RECAP *******************************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0\r\n```\r\n\r\n```\r\n$ ansible-lint -v playbook_ok.yml\r\nExamining ansible-lint-test/playbook_ok.yml of type playbook\r\nExamining /Users/m/code/ansible-lint-test/roles/my_role/tasks/main.yml of type tasks\r\n```\r\n\r\n## Bug example\r\n\r\n```\r\n$ ansible-playbook playbook_crash.yml\r\n\r\nPLAY [my play] ***************************************************************************\r\n\r\nTASK [include_role : my_role] ************************************************************\r\n\r\nTASK [my_role : task] ********************************************************************\r\nok: [localhost] => {\r\n    \"msg\": \"task in my role\"\r\n}\r\n\r\nPLAY RECAP *******************************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0\r\n```\r\n\r\n```\r\n$ ansible-lint -v playbook_crash.yml\r\nTraceback (most recent call last):\r\n  File \"/Users/m/.virtualenvs/ansible/bin/ansible-lint\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansiblelint/__init__.py\", line 264, in run\r\n    for child in ansiblelint.utils.find_children(arg, self.playbook_dir):\r\n  File \"/Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansiblelint/utils.py\", line 171, in find_children\r\n    for child in play_children(basedir, item, playbook[1], playbook_dir):\r\n  File \"/Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansiblelint/utils.py\", line 223, in play_children\r\n    return delegate_map[k](basedir, k, v, parent_type)\r\n  File \"/Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansiblelint/utils.py\", line 256, in _taskshandlers_children\r\n    results.extend(_taskshandlers_children(basedir, k, th['block'], parent_type))\r\n  File \"/Users/m/.virtualenvs/ansible/lib/python2.7/site-packages/ansiblelint/utils.py\", line 252, in _taskshandlers_children\r\n    results.extend(_roles_children(basedir, k, [th['include_role'].get('name')],\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\n```\r\n\r\nThe syntax\r\n\r\n```\r\n- include_role: name=my_role\r\n```\r\n\r\nseems to be fine, but not inside a `block`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/516", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/516/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/516/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/516/events", "html_url": "https://github.com/ansible/ansible-lint/issues/516", "id": 446982507, "node_id": "MDU6SXNzdWU0NDY5ODI1MDc=", "number": 516, "title": "#noqa does not work on pre_tasks and post_tasks", "user": {"login": "FanchTheSystem", "id": 882203, "node_id": "MDQ6VXNlcjg4MjIwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/882203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FanchTheSystem", "html_url": "https://github.com/FanchTheSystem", "followers_url": "https://api.github.com/users/FanchTheSystem/followers", "following_url": "https://api.github.com/users/FanchTheSystem/following{/other_user}", "gists_url": "https://api.github.com/users/FanchTheSystem/gists{/gist_id}", "starred_url": "https://api.github.com/users/FanchTheSystem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FanchTheSystem/subscriptions", "organizations_url": "https://api.github.com/users/FanchTheSystem/orgs", "repos_url": "https://api.github.com/users/FanchTheSystem/repos", "events_url": "https://api.github.com/users/FanchTheSystem/events{/privacy}", "received_events_url": "https://api.github.com/users/FanchTheSystem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18", "html_url": "https://github.com/ansible/ansible-lint/milestone/18", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18/labels", "id": 4292583, "node_id": "MDk6TWlsZXN0b25lNDI5MjU4Mw==", "number": 18, "title": "4.2.0", "description": "Minor release", "creator": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2019-05-07T13:27:40Z", "updated_at": "2019-12-04T21:03:03Z", "due_on": "2019-12-04T08:00:00Z", "closed_at": "2019-12-04T21:03:03Z"}, "comments": 0, "created_at": "2019-05-22T07:46:15Z", "updated_at": "2019-05-28T16:23:23Z", "closed_at": "2019-05-28T16:23:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "ansible-lint 4.1.0\r\n\r\nExample playbook.yml:\r\n```\r\n---\r\n- name: hello\r\n  hosts: all\r\n  pre_tasks:\r\n    - name: Get Status # noqa 303 305\r\n      shell: 'systemctl -l status'\r\n      changed_when: false\r\n  tasks:\r\n    - name: Get Status # noqa 303 305\r\n      shell: 'systemctl -l status'\r\n      changed_when: false\r\n  post_tasks:\r\n    - name: Get Status # noqa 303 305\r\n      shell: 'systemctl -l status'\r\n      changed_when: false\r\n```\r\nCurrent output:\r\n```\r\n303] systemctl used in place of systemd module\r\nplaybook.yml:5\r\nTask/Handler: Get Status\r\n\r\n[305] Use shell only when shell functionality is required\r\nplaybook.yml:5\r\nTask/Handler: Get Status\r\n\r\n[303] systemctl used in place of systemd module\r\nplaybook.yml:13\r\nTask/Handler: Get Status\r\n\r\n[305] Use shell only when shell functionality is required\r\nplaybook.yml:13\r\nTask/Handler: Get Status\r\n```\r\n\r\nShould not output anything ...\r\n\r\n\r\nMaybe related to https://github.com/ansible/ansible-lint/issues/484", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/515", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/515/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/515/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/515/events", "html_url": "https://github.com/ansible/ansible-lint/issues/515", "id": 446710271, "node_id": "MDU6SXNzdWU0NDY3MTAyNzE=", "number": 515, "title": "ansible-lint pre-commit hook not using configuration file", "user": {"login": "ansiblejunky", "id": 14311849, "node_id": "MDQ6VXNlcjE0MzExODQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/14311849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ansiblejunky", "html_url": "https://github.com/ansiblejunky", "followers_url": "https://api.github.com/users/ansiblejunky/followers", "following_url": "https://api.github.com/users/ansiblejunky/following{/other_user}", "gists_url": "https://api.github.com/users/ansiblejunky/gists{/gist_id}", "starred_url": "https://api.github.com/users/ansiblejunky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ansiblejunky/subscriptions", "organizations_url": "https://api.github.com/users/ansiblejunky/orgs", "repos_url": "https://api.github.com/users/ansiblejunky/repos", "events_url": "https://api.github.com/users/ansiblejunky/events{/privacy}", "received_events_url": "https://api.github.com/users/ansiblejunky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-21T16:19:29Z", "updated_at": "2019-05-21T22:58:18Z", "closed_at": "2019-05-21T22:58:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\nansible --version\r\n2.7.10\r\nansible-lint --version\r\n4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pre-commit installed from source\r\n\r\n# Desired Behaviour\r\n\r\nRunning pre-commit should result in ansible-lint using my configuration file that defines various settings. \r\n```\r\npre-commit run ansible-lint\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\npre-commit launches ansible-lint but it's clear that ansible-lint is not using my configuration file because it's not applying my custom rules. When I instead run `ansible-lint` explicitly it picks up the configuration file and applies my rules. \r\n```\r\nansible-lint site.yml\r\n```\r\n\r\nBelow is the pre-commit hook definition in the `.pre-commit-config.yaml` file.\r\n```\r\n---\r\n\r\nrepos:\r\n  - repo: https://github.com/ansible/ansible-lint.git\r\n    rev: v4.1.0a0\r\n    hooks:\r\n      - id: ansible-lint\r\n        name: ansible-lint\r\n        files: \\.(yaml|yml)$\r\n        entry: ansible-lint\r\n        language: python\r\n        verbose: true\r\n```\r\n\r\nI tried adding the `args` option to explicitly define the config file but this does not work and is ignored (has no affect)!  Here is my version with the `args` option:\r\n```\r\n---\r\n\r\nrepos:\r\n  - repo: https://github.com/ansible/ansible-lint.git\r\n    rev: v4.1.0a0\r\n    hooks:\r\n      - id: ansible-lint\r\n        name: ansible-lint\r\n        files: \\.(yaml|yml)$\r\n        entry: ansible-lint\r\n        language: python\r\n        args: [-c .ansible-lint]\r\n        verbose: true\r\n```\r\nI have tried different formats for the `args` option and nothing worked. \r\n\r\nCan someone please fix or advise?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/514", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/514/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/514/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/514/events", "html_url": "https://github.com/ansible/ansible-lint/issues/514", "id": 446179697, "node_id": "MDU6SXNzdWU0NDYxNzk2OTc=", "number": 514, "title": "Add type checking to role metadata in rule 701 MetaMainHasInfoRule", "user": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18", "html_url": "https://github.com/ansible/ansible-lint/milestone/18", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18/labels", "id": 4292583, "node_id": "MDk6TWlsZXN0b25lNDI5MjU4Mw==", "number": 18, "title": "4.2.0", "description": "Minor release", "creator": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2019-05-07T13:27:40Z", "updated_at": "2019-12-04T21:03:03Z", "due_on": "2019-12-04T08:00:00Z", "closed_at": "2019-12-04T21:03:03Z"}, "comments": 0, "created_at": "2019-05-20T15:27:20Z", "updated_at": "2019-06-07T02:36:56Z", "closed_at": "2019-06-07T02:36:56Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/512", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/512/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/512/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/512/events", "html_url": "https://github.com/ansible/ansible-lint/issues/512", "id": 442668085, "node_id": "MDU6SXNzdWU0NDI2NjgwODU=", "number": 512, "title": "Improve rule skipping by allowing a leading # noqa xxx", "user": {"login": "stdedos", "id": 133706, "node_id": "MDQ6VXNlcjEzMzcwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/133706?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stdedos", "html_url": "https://github.com/stdedos", "followers_url": "https://api.github.com/users/stdedos/followers", "following_url": "https://api.github.com/users/stdedos/following{/other_user}", "gists_url": "https://api.github.com/users/stdedos/gists{/gist_id}", "starred_url": "https://api.github.com/users/stdedos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stdedos/subscriptions", "organizations_url": "https://api.github.com/users/stdedos/orgs", "repos_url": "https://api.github.com/users/stdedos/repos", "events_url": "https://api.github.com/users/stdedos/events{/privacy}", "received_events_url": "https://api.github.com/users/stdedos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-10T11:20:03Z", "updated_at": "2019-06-03T17:12:55Z", "closed_at": "2019-06-03T17:12:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Feature request\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.7.8\r\n  config file = /root/ansible/ansible.cfg\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /root/ansible/venv-ansible/lib/python3.5/site-packages/ansible\r\n  executable location = /root/ansible/venv-ansible/bin/ansible\r\n  python version = 3.5.2 (default, Nov 12 2018, 13:43:14) [GCC 5.4.0 20160609]\r\n\r\n$ ansible-lint --version\r\nansible-lint 4.1.0\r\n```\r\n\r\n- ansible installation method: pip\r\n- ansible-lint installation method: pip\r\n\r\n# Desired Behaviour\r\nAs mentioned on https://github.com/ansible/ansible-lint/issues/364#issuecomment-426292798, I prefer the shellcheck-method-way (and of many others), that a leading comment directly on top of a function/block/command can silence a warning.\r\n\r\nI think this looks better:\r\n```\r\n[...]\r\n\r\n# noqa 303 # No git log\r\n- name: Magic\r\n  shell: mooooooooar magic\r\n  register: git_log_grep_patch\r\n  failed_when: git_log_grep_patch.rc > 2\r\n  changed_when: False\r\n  args:\r\n    chdir: \"{{ home }}\"\r\n\r\n[...]\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n... than any combination of this:\r\n```\r\n[...]\r\n\r\n# noqa 303 # No git log\r\n- name: Magic\r\n  shell: mooooooooar magic\r\n  register: git_log_grep_patch\r\n  failed_when: git_log_grep_patch.rc > 2\r\n  changed_when: False\r\n  args:\r\n    chdir: \"{{ home }}\" # noqa 303 # No git log\r\n\r\n[...]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-lint/issues/509", "repository_url": "https://api.github.com/repos/ansible/ansible-lint", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/issues/509/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-lint/issues/509/comments", "events_url": "https://api.github.com/repos/ansible/ansible-lint/issues/509/events", "html_url": "https://github.com/ansible/ansible-lint/issues/509", "id": 438724886, "node_id": "MDU6SXNzdWU0Mzg3MjQ4ODY=", "number": 509, "title": "Crash with AttributeError", "user": {"login": "Thulium-Drake", "id": 12935477, "node_id": "MDQ6VXNlcjEyOTM1NDc3", "avatar_url": "https://avatars2.githubusercontent.com/u/12935477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thulium-Drake", "html_url": "https://github.com/Thulium-Drake", "followers_url": "https://api.github.com/users/Thulium-Drake/followers", "following_url": "https://api.github.com/users/Thulium-Drake/following{/other_user}", "gists_url": "https://api.github.com/users/Thulium-Drake/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thulium-Drake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thulium-Drake/subscriptions", "organizations_url": "https://api.github.com/users/Thulium-Drake/orgs", "repos_url": "https://api.github.com/users/Thulium-Drake/repos", "events_url": "https://api.github.com/users/Thulium-Drake/events{/privacy}", "received_events_url": "https://api.github.com/users/Thulium-Drake/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18", "html_url": "https://github.com/ansible/ansible-lint/milestone/18", "labels_url": "https://api.github.com/repos/ansible/ansible-lint/milestones/18/labels", "id": 4292583, "node_id": "MDk6TWlsZXN0b25lNDI5MjU4Mw==", "number": 18, "title": "4.2.0", "description": "Minor release", "creator": {"login": "awcrosby", "id": 4432895, "node_id": "MDQ6VXNlcjQ0MzI4OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4432895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awcrosby", "html_url": "https://github.com/awcrosby", "followers_url": "https://api.github.com/users/awcrosby/followers", "following_url": "https://api.github.com/users/awcrosby/following{/other_user}", "gists_url": "https://api.github.com/users/awcrosby/gists{/gist_id}", "starred_url": "https://api.github.com/users/awcrosby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awcrosby/subscriptions", "organizations_url": "https://api.github.com/users/awcrosby/orgs", "repos_url": "https://api.github.com/users/awcrosby/repos", "events_url": "https://api.github.com/users/awcrosby/events{/privacy}", "received_events_url": "https://api.github.com/users/awcrosby/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2019-05-07T13:27:40Z", "updated_at": "2019-12-04T21:03:03Z", "due_on": "2019-12-04T08:00:00Z", "closed_at": "2019-12-04T21:03:03Z"}, "comments": 2, "created_at": "2019-04-30T11:14:39Z", "updated_at": "2019-06-01T15:29:54Z", "closed_at": "2019-06-01T15:29:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n\r\n# Ansible and Ansible Lint details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.7.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/me/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.13 (default, Sep 26 2018, 18:42:22) [GCC 6.3.0 20170516]\r\n$ ansible-lint --version\r\nansible-lint 4.1.0+dfsg.1\r\n```\r\n\r\n- ansible installation method: OS package (from Ansible repo)\r\n- ansible-lint installation method: OS package (from Debian backports, due to lack of official repo)\r\n\r\n# Desired Behaviour\r\nLint my playbooks.\r\n\r\n# Actual Behaviour\r\nWhen trying to lint any playbook (for example the one I added, which is just toy-around playbook), I receive AttributeErrors from ansible-lint. Even when the playbook itself works fine and gives no errors.\r\n\r\nDid I miss something? :-)\r\n\r\n- playbook\r\n```\r\n---\r\n- hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - pause:\r\n        prompt: \"Is this OK?\"\r\n      register: var\r\n\r\n    - debug:\r\n        msg: \"{{ var.user_input }}\"\r\n\r\n    - pause:\r\n        prompt: \"Stuff?\"\r\n      when: var.user_input == \"yes\"\r\n      register: cond_var\r\n\r\n    - debug:\r\n        msg: \"Stuff is {{ cond_var.user_input }}\"\r\n      when: cond_var.user_input is defined\r\n```\r\n- output of running ansible-lint\r\n```\r\n$ ansible-lint input.yml \r\nTraceback (most recent call last):\r\n  File \"/usr/bin/ansible-lint\", line 11, in <module>\r\n    load_entry_point('ansible-lint==4.1.0+dfsg.1', 'console_scripts', 'ansible-lint')()\r\n  File \"/usr/lib/python2.7/dist-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/usr/lib/python2.7/dist-packages/ansiblelint/__init__.py\", line 282, in run\r\n    skip_list=self.skip_list))\r\n  File \"/usr/lib/python2.7/dist-packages/ansiblelint/__init__.py\", line 174, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/usr/lib/python2.7/dist-packages/ansiblelint/__init__.py\", line 84, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/usr/lib/python2.7/dist-packages/ansiblelint/utils.py\", line 603, in append_skipped_rules\r\n    yaml = ruamel.yaml.YAML()\r\nAttributeError: 'module' object has no attribute 'YAML'\r\n```\r\n-   output `ansible-playbook --syntax-check playbook`\r\n```\r\n$ ansible-playbook --syntax-check input.yml \r\n\r\nplaybook: input.yml\r\n```", "performed_via_github_app": null, "score": 1.0}]}