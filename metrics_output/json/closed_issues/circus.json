{"total_count": 470, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/circus-tent/circus/issues/1140", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1140/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1140/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1140/events", "html_url": "https://github.com/circus-tent/circus/issues/1140", "id": 679720203, "node_id": "MDU6SXNzdWU2Nzk3MjAyMDM=", "number": 1140, "title": "fix tests on MacOS", "user": {"login": "ltalirz", "id": 1053245, "node_id": "MDQ6VXNlcjEwNTMyNDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1053245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltalirz", "html_url": "https://github.com/ltalirz", "followers_url": "https://api.github.com/users/ltalirz/followers", "following_url": "https://api.github.com/users/ltalirz/following{/other_user}", "gists_url": "https://api.github.com/users/ltalirz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltalirz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltalirz/subscriptions", "organizations_url": "https://api.github.com/users/ltalirz/orgs", "repos_url": "https://api.github.com/users/ltalirz/repos", "events_url": "https://api.github.com/users/ltalirz/events{/privacy}", "received_events_url": "https://api.github.com/users/ltalirz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2279305375, "node_id": "MDU6TGFiZWwyMjc5MzA1Mzc1", "url": "https://api.github.com/repos/circus-tent/circus/labels/mac", "name": "mac", "color": "a5ce4e", "default": false, "description": "Issues which are specific to Mac OS"}, {"id": 2279306210, "node_id": "MDU6TGFiZWwyMjc5MzA2MjEw", "url": "https://api.github.com/repos/circus-tent/circus/labels/unit-test-failure", "name": "unit-test-failure", "color": "fc1505", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-16T09:13:28Z", "updated_at": "2020-08-21T13:55:34Z", "closed_at": "2020-08-21T13:55:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is just a ticket to track the two tests that are currently failing on MacOS (see [CI logs](https://github.com/circus-tent/circus/runs/971627339?check_suite_focus=true#step:5:311)):\r\n\r\n```\r\nFAIL: test_resource_watcher_max_mem (circus.tests.test_plugin_resource_watcher.TestResourceWatcher)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/testing.py\", line 98, in __call__\r\n    result = self.orig_method(*args, **kwargs)\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/testing.py\", line 594, in post_coroutine\r\n    return self.io_loop.run_sync(\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/ioloop.py\", line 532, in run_sync\r\n    return future_cell[0].result()\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/gen.py\", line 748, in run\r\n    yielded = self.gen.send(value)\r\n  File \"/Users/runner/work/circus/circus/circus/tests/test_plugin_resource_watcher.py\", line 73, in test_resource_watcher_max_mem\r\n    self._check_statsd(statsd_increments,\r\n  File \"/Users/runner/work/circus/circus/circus/tests/test_plugin_resource_watcher.py\", line 43, in _check_statsd\r\n    self.assertTrue(len(res) > 0)\r\nAssertionError: False is not true\r\n```\r\n\r\nand \r\n```\r\nFAIL: test_resource_watcher_max_mem_abs (circus.tests.test_plugin_resource_watcher.TestResourceWatcher)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/testing.py\", line 98, in __call__\r\n    result = self.orig_method(*args, **kwargs)\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/testing.py\", line 594, in post_coroutine\r\n    return self.io_loop.run_sync(\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/ioloop.py\", line 532, in run_sync\r\n    return future_cell[0].result()\r\n  File \"/Users/runner/work/circus/circus/.tox/py38/lib/python3.8/site-packages/tornado/gen.py\", line 748, in run\r\n    yielded = self.gen.send(value)\r\n  File \"/Users/runner/work/circus/circus/circus/tests/test_plugin_resource_watcher.py\", line 89, in test_resource_watcher_max_mem_abs\r\n    self._check_statsd(statsd_increments,\r\n  File \"/Users/runner/work/circus/circus/circus/tests/test_plugin_resource_watcher.py\", line 43, in _check_statsd\r\n    self.assertTrue(len(res) > 0)\r\nAssertionError: False is not true\r\n```\r\n\r\nIt seems like on MacOS the `statsd_increments`\r\nhttps://github.com/circus-tent/circus/blob/b987b5cd9acd2e80ee654a1cd39294ea27729be0/circus/tests/test_plugin_resource_watcher.py#L69-L72\r\nare empty.\r\n\r\nWould be great if someone familiar with the topic could have a quick look into this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1138", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1138/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1138/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1138/events", "html_url": "https://github.com/circus-tent/circus/issues/1138", "id": 675256640, "node_id": "MDU6SXNzdWU2NzUyNTY2NDA=", "number": 1138, "title": "Update libzmq-dev to libzmq3-dev in the docs", "user": {"login": "Sangarshanan", "id": 21971847, "node_id": "MDQ6VXNlcjIxOTcxODQ3", "avatar_url": "https://avatars3.githubusercontent.com/u/21971847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sangarshanan", "html_url": "https://github.com/Sangarshanan", "followers_url": "https://api.github.com/users/Sangarshanan/followers", "following_url": "https://api.github.com/users/Sangarshanan/following{/other_user}", "gists_url": "https://api.github.com/users/Sangarshanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sangarshanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sangarshanan/subscriptions", "organizations_url": "https://api.github.com/users/Sangarshanan/orgs", "repos_url": "https://api.github.com/users/Sangarshanan/repos", "events_url": "https://api.github.com/users/Sangarshanan/events{/privacy}", "received_events_url": "https://api.github.com/users/Sangarshanan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 8234654, "node_id": "MDU6TGFiZWw4MjM0NjU0", "url": "https://api.github.com/repos/circus-tent/circus/labels/documentation", "name": "documentation", "color": "02d7e1", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/circus-tent/circus/milestones/13", "html_url": "https://github.com/circus-tent/circus/milestone/13", "labels_url": "https://api.github.com/repos/circus-tent/circus/milestones/13/labels", "id": 5740719, "node_id": "MDk6TWlsZXN0b25lNTc0MDcxOQ==", "number": 13, "title": "0.17", "description": "", "creator": {"login": "biozz", "id": 3424811, "node_id": "MDQ6VXNlcjM0MjQ4MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3424811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biozz", "html_url": "https://github.com/biozz", "followers_url": "https://api.github.com/users/biozz/followers", "following_url": "https://api.github.com/users/biozz/following{/other_user}", "gists_url": "https://api.github.com/users/biozz/gists{/gist_id}", "starred_url": "https://api.github.com/users/biozz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biozz/subscriptions", "organizations_url": "https://api.github.com/users/biozz/orgs", "repos_url": "https://api.github.com/users/biozz/repos", "events_url": "https://api.github.com/users/biozz/events{/privacy}", "received_events_url": "https://api.github.com/users/biozz/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 11, "state": "open", "created_at": "2020-08-06T16:56:31Z", "updated_at": "2020-08-10T14:21:53Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2020-08-07T20:28:01Z", "updated_at": "2020-08-10T14:21:52Z", "closed_at": "2020-08-10T14:21:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to follow the step-by-step tutorial, installation of `libzmq`  failed on my machine `Ubuntu 18.04.4 LTS` a quick search revealed that newer Ubuntu versions don't provide this package and I need to use `libzmq3-dev` instead \r\n\r\nThought it would help to either update the name or include a note in the docs if that's ok : )\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1127", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1127/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1127/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1127/events", "html_url": "https://github.com/circus-tent/circus/issues/1127", "id": 589812221, "node_id": "MDU6SXNzdWU1ODk4MTIyMjE=", "number": 1127, "title": "mem_info not reliable", "user": {"login": "maingoh", "id": 8860364, "node_id": "MDQ6VXNlcjg4NjAzNjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8860364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maingoh", "html_url": "https://github.com/maingoh", "followers_url": "https://api.github.com/users/maingoh/followers", "following_url": "https://api.github.com/users/maingoh/following{/other_user}", "gists_url": "https://api.github.com/users/maingoh/gists{/gist_id}", "starred_url": "https://api.github.com/users/maingoh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maingoh/subscriptions", "organizations_url": "https://api.github.com/users/maingoh/orgs", "repos_url": "https://api.github.com/users/maingoh/repos", "events_url": "https://api.github.com/users/maingoh/events{/privacy}", "received_events_url": "https://api.github.com/users/maingoh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-29T15:05:13Z", "updated_at": "2020-04-03T13:29:48Z", "closed_at": "2020-04-03T13:29:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The human friendly representation gives integer representation instead of float which gives unreliable stats.\r\n```\r\n>>> from circus.util import bytes2human\r\n>>> bytes2human(1024 * 1024 * 2047)\r\n'1G'\r\n>>> bytes2human(1024 * 1024 * 2048)\r\n'2G'\r\n```\r\n\r\nThe first example should return `1.99G` ideally. This is not critical when talking about megas but when we start talking about gigas or more it gets problematic.\r\n\r\nAlso why not always give a MiB representation in float (not string) ?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1122", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1122/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1122/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1122/events", "html_url": "https://github.com/circus-tent/circus/issues/1122", "id": 580178153, "node_id": "MDU6SXNzdWU1ODAxNzgxNTM=", "number": 1122, "title": "The documentation on readthedocs is not being updated", "user": {"login": "biozz", "id": 3424811, "node_id": "MDQ6VXNlcjM0MjQ4MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3424811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biozz", "html_url": "https://github.com/biozz", "followers_url": "https://api.github.com/users/biozz/followers", "following_url": "https://api.github.com/users/biozz/following{/other_user}", "gists_url": "https://api.github.com/users/biozz/gists{/gist_id}", "starred_url": "https://api.github.com/users/biozz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biozz/subscriptions", "organizations_url": "https://api.github.com/users/biozz/orgs", "repos_url": "https://api.github.com/users/biozz/repos", "events_url": "https://api.github.com/users/biozz/events{/privacy}", "received_events_url": "https://api.github.com/users/biozz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-12T19:44:42Z", "updated_at": "2020-08-06T08:47:35Z", "closed_at": "2020-08-06T08:47:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I noticed that documentation on https://circus.readthedocs.io/ is not being updated. For example, the latest changelog entry is still 0.15.0 - https://circus.readthedocs.io/en/latest/changelog/\r\n\r\nIs the deployment of the docs automated? I couldn't figure that out.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1114", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1114/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1114/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1114/events", "html_url": "https://github.com/circus-tent/circus/issues/1114", "id": 571174093, "node_id": "MDU6SXNzdWU1NzExNzQwOTM=", "number": 1114, "title": "Is there is a way to interpolate the watcher's name in the configration file", "user": {"login": "tinylambda", "id": 5546016, "node_id": "MDQ6VXNlcjU1NDYwMTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5546016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinylambda", "html_url": "https://github.com/tinylambda", "followers_url": "https://api.github.com/users/tinylambda/followers", "following_url": "https://api.github.com/users/tinylambda/following{/other_user}", "gists_url": "https://api.github.com/users/tinylambda/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinylambda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinylambda/subscriptions", "organizations_url": "https://api.github.com/users/tinylambda/orgs", "repos_url": "https://api.github.com/users/tinylambda/repos", "events_url": "https://api.github.com/users/tinylambda/events{/privacy}", "received_events_url": "https://api.github.com/users/tinylambda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-26T09:02:56Z", "updated_at": "2020-03-03T07:55:26Z", "closed_at": "2020-03-03T07:55:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "In supervisor we can configure the stdout logfile like this\r\n\r\n```\r\n[program:chaos_http]\r\nstdout_logfile = /tmp/log/supervisor/%(program_name)s.log\r\n...\r\n```\r\n\r\nin which we can use  the variable **program_name** as part of the logfile.\r\n\r\nIs there is way to do things like this in circus ?\r\n\r\n```\r\n[watcher:myprogram]\r\ncmd = python -m myapp.server\r\n\r\nstdout_stream.class = TimedRotatingFileStream\r\nstdout_stream.filename = /tmp/%(watcher_name)s.log\r\n....\r\n```\r\n\r\nwhere watcher_name will be replaced by myprogram when get the option;\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1112", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1112/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1112/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1112/events", "html_url": "https://github.com/circus-tent/circus/issues/1112", "id": 538455017, "node_id": "MDU6SXNzdWU1Mzg0NTUwMTc=", "number": 1112, "title": "Make a new release 0.16.0 that is compatible with `pyzmq>=17`", "user": {"login": "sphuber", "id": 6992332, "node_id": "MDQ6VXNlcjY5OTIzMzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/6992332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sphuber", "html_url": "https://github.com/sphuber", "followers_url": "https://api.github.com/users/sphuber/followers", "following_url": "https://api.github.com/users/sphuber/following{/other_user}", "gists_url": "https://api.github.com/users/sphuber/gists{/gist_id}", "starred_url": "https://api.github.com/users/sphuber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sphuber/subscriptions", "organizations_url": "https://api.github.com/users/sphuber/orgs", "repos_url": "https://api.github.com/users/sphuber/repos", "events_url": "https://api.github.com/users/sphuber/events{/privacy}", "received_events_url": "https://api.github.com/users/sphuber/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-16T14:42:33Z", "updated_at": "2019-12-26T23:51:07Z", "closed_at": "2019-12-26T23:51:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This limitation was eliminated in PR #1111 . A new release including the code compatible with `pyzmq>=17` would be much appreciated because it is preventing any project that requires `ipython` or `jupyter` from running.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1107", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1107/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1107/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1107/events", "html_url": "https://github.com/circus-tent/circus/issues/1107", "id": 473059631, "node_id": "MDU6SXNzdWU0NzMwNTk2MzE=", "number": 1107, "title": "Is the Tornado version being updated?", "user": {"login": "jlariza", "id": 16421045, "node_id": "MDQ6VXNlcjE2NDIxMDQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/16421045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlariza", "html_url": "https://github.com/jlariza", "followers_url": "https://api.github.com/users/jlariza/followers", "following_url": "https://api.github.com/users/jlariza/following{/other_user}", "gists_url": "https://api.github.com/users/jlariza/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlariza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlariza/subscriptions", "organizations_url": "https://api.github.com/users/jlariza/orgs", "repos_url": "https://api.github.com/users/jlariza/repos", "events_url": "https://api.github.com/users/jlariza/events{/privacy}", "received_events_url": "https://api.github.com/users/jlariza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-25T20:38:26Z", "updated_at": "2020-08-06T13:20:01Z", "closed_at": "2020-08-06T13:20:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "The next celery flower version will not be compatible with Tornado < 5. I am using circus to start flower process, so I will not be able to keep using this library once flower 1.x is released.\r\n\r\nIs Tornado support being considered?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1106", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1106/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1106/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1106/events", "html_url": "https://github.com/circus-tent/circus/issues/1106", "id": 466782562, "node_id": "MDU6SXNzdWU0NjY3ODI1NjI=", "number": 1106, "title": "watchdog receive bytes but match with regex", "user": {"login": "hulucat", "id": 2210211, "node_id": "MDQ6VXNlcjIyMTAyMTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2210211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hulucat", "html_url": "https://github.com/hulucat", "followers_url": "https://api.github.com/users/hulucat/followers", "following_url": "https://api.github.com/users/hulucat/following{/other_user}", "gists_url": "https://api.github.com/users/hulucat/gists{/gist_id}", "starred_url": "https://api.github.com/users/hulucat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hulucat/subscriptions", "organizations_url": "https://api.github.com/users/hulucat/orgs", "repos_url": "https://api.github.com/users/hulucat/repos", "events_url": "https://api.github.com/users/hulucat/events{/privacy}", "received_events_url": "https://api.github.com/users/hulucat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-11T09:42:23Z", "updated_at": "2020-08-06T18:50:14Z", "closed_at": "2020-08-06T18:50:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "socket.socket.sendto sends bytes to watchdog\r\nbut watchdog match it directly with regex\r\nI copied the source and editted after line 198:\r\n\r\ndata = data.decode()\r\n\r\nand it works", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1105", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1105/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1105/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1105/events", "html_url": "https://github.com/circus-tent/circus/issues/1105", "id": 466782410, "node_id": "MDU6SXNzdWU0NjY3ODI0MTA=", "number": 1105, "title": "watchdog receive bytes but match with regex", "user": {"login": "hulucat", "id": 2210211, "node_id": "MDQ6VXNlcjIyMTAyMTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2210211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hulucat", "html_url": "https://github.com/hulucat", "followers_url": "https://api.github.com/users/hulucat/followers", "following_url": "https://api.github.com/users/hulucat/following{/other_user}", "gists_url": "https://api.github.com/users/hulucat/gists{/gist_id}", "starred_url": "https://api.github.com/users/hulucat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hulucat/subscriptions", "organizations_url": "https://api.github.com/users/hulucat/orgs", "repos_url": "https://api.github.com/users/hulucat/repos", "events_url": "https://api.github.com/users/hulucat/events{/privacy}", "received_events_url": "https://api.github.com/users/hulucat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "biozz", "id": 3424811, "node_id": "MDQ6VXNlcjM0MjQ4MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3424811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biozz", "html_url": "https://github.com/biozz", "followers_url": "https://api.github.com/users/biozz/followers", "following_url": "https://api.github.com/users/biozz/following{/other_user}", "gists_url": "https://api.github.com/users/biozz/gists{/gist_id}", "starred_url": "https://api.github.com/users/biozz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biozz/subscriptions", "organizations_url": "https://api.github.com/users/biozz/orgs", "repos_url": "https://api.github.com/users/biozz/repos", "events_url": "https://api.github.com/users/biozz/events{/privacy}", "received_events_url": "https://api.github.com/users/biozz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "biozz", "id": 3424811, "node_id": "MDQ6VXNlcjM0MjQ4MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3424811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biozz", "html_url": "https://github.com/biozz", "followers_url": "https://api.github.com/users/biozz/followers", "following_url": "https://api.github.com/users/biozz/following{/other_user}", "gists_url": "https://api.github.com/users/biozz/gists{/gist_id}", "starred_url": "https://api.github.com/users/biozz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biozz/subscriptions", "organizations_url": "https://api.github.com/users/biozz/orgs", "repos_url": "https://api.github.com/users/biozz/repos", "events_url": "https://api.github.com/users/biozz/events{/privacy}", "received_events_url": "https://api.github.com/users/biozz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-11T09:42:04Z", "updated_at": "2020-08-10T13:51:34Z", "closed_at": "2020-08-10T13:51:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "socket.socket.sendto sends bytes to watchdog\r\nbut watchdog match it directly with regex\r\nI copied the source and editted after line 198:\r\n\r\ndata = data.decode()\r\n\r\nand it works", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1103", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1103/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1103/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1103/events", "html_url": "https://github.com/circus-tent/circus/issues/1103", "id": 440186969, "node_id": "MDU6SXNzdWU0NDAxODY5Njk=", "number": 1103, "title": "Quit circus when watcher crashes", "user": {"login": "maingoh", "id": 8860364, "node_id": "MDQ6VXNlcjg4NjAzNjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8860364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maingoh", "html_url": "https://github.com/maingoh", "followers_url": "https://api.github.com/users/maingoh/followers", "following_url": "https://api.github.com/users/maingoh/following{/other_user}", "gists_url": "https://api.github.com/users/maingoh/gists{/gist_id}", "starred_url": "https://api.github.com/users/maingoh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maingoh/subscriptions", "organizations_url": "https://api.github.com/users/maingoh/orgs", "repos_url": "https://api.github.com/users/maingoh/repos", "events_url": "https://api.github.com/users/maingoh/events{/privacy}", "received_events_url": "https://api.github.com/users/maingoh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-03T19:24:09Z", "updated_at": "2019-06-12T09:47:20Z", "closed_at": "2019-06-12T09:47:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am using circus to handle multiple processes inside a container, but when used with kubernetes it actually hide the crash to kubernetes and we don't know that the container is failing until we watch the logs.\r\nHow complicated would it be to add an option to circus endpoint or each watcher to quit circus when the watchers crash ? So that we can let kubernetes restarting the pod.\r\n\r\nI would be ready to implement such behavior,\r\nThank you,\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1101", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1101/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1101/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1101/events", "html_url": "https://github.com/circus-tent/circus/issues/1101", "id": 423087630, "node_id": "MDU6SXNzdWU0MjMwODc2MzA=", "number": 1101, "title": "Virtualenv not finding modules", "user": {"login": "jebesen", "id": 3510321, "node_id": "MDQ6VXNlcjM1MTAzMjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3510321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jebesen", "html_url": "https://github.com/jebesen", "followers_url": "https://api.github.com/users/jebesen/followers", "following_url": "https://api.github.com/users/jebesen/following{/other_user}", "gists_url": "https://api.github.com/users/jebesen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jebesen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jebesen/subscriptions", "organizations_url": "https://api.github.com/users/jebesen/orgs", "repos_url": "https://api.github.com/users/jebesen/repos", "events_url": "https://api.github.com/users/jebesen/events{/privacy}", "received_events_url": "https://api.github.com/users/jebesen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-20T06:26:20Z", "updated_at": "2019-03-20T14:21:40Z", "closed_at": "2019-03-20T14:21:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am executing this circus.ini:\r\n\r\n`[circus]\r\n\r\n[watcher:dataservice]\r\ncmd = chaussette --fd $(circus.sockets.dataservice) --backend tornado run.app\r\nuse_sockets = True\r\nnumprocesses = 3\r\nrespawn = False\r\npriority = 1\r\nvirtualenv = env\r\nvirtualenv_py_ver = 3.6\r\nworking_dir = service\r\ncopy_env = True\r\ncopy_path = True\r\n\r\n[socket:dataservice]\r\nhost = 0.0.0.0\r\nport = 8000`\r\n\r\nAnd it gives me this error:\r\n\r\n`Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/chaussette/util.py\", line 124, in import_string\r\n    __import__(modname)\r\n  File \"./app.py\", line 1, in <module>\r\n    from flask import Flask, request, current_app, abort, jsonify\r\nModuleNotFoundError: No module named 'flask'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/chaussette\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/dist-packages/chaussette/server.py\", line 173, in main\r\n    app = import_string(application)\r\n  File \"/usr/local/lib/python3.6/dist-packages/chaussette/util.py\", line 129, in import_string\r\n    sys.exc_info()[2])\r\n  File \"/usr/lib/python3/dist-packages/six.py\", line 692, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/usr/local/lib/python3.6/dist-packages/chaussette/util.py\", line 124, in import_string\r\n    __import__(modname)\r\n  File \"./app.py\", line 1, in <module>\r\n    from flask import Flask, request, current_app, abort, jsonify\r\nchaussette.util.ImportStringError: import_string() failed for 'app.app'. Possible reasons are:\r\n\r\n- missing __init__.py in a package;\r\n- package or module path not included in sys.path;\r\n- duplicated package or module name taking precedence in sys.path;\r\n- missing module, class, function or variable;\r\n\r\nDebugged import:\r\n\r\n- 'app' not found.\r\n\r\nOriginal exception:\r\n\r\nModuleNotFoundError: No module named 'flask'`\r\n\r\nI do not understand since flask is installed in the virtualenv folder.  If I install flask globally in the system, circusd works propperly, but I want it to use the virtualenv installation.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1099", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1099/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1099/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1099/events", "html_url": "https://github.com/circus-tent/circus/issues/1099", "id": 406471878, "node_id": "MDU6SXNzdWU0MDY0NzE4Nzg=", "number": 1099, "title": "Circus forcing PyZMQ <17.0", "user": {"login": "cmcgrath13", "id": 31561246, "node_id": "MDQ6VXNlcjMxNTYxMjQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/31561246?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmcgrath13", "html_url": "https://github.com/cmcgrath13", "followers_url": "https://api.github.com/users/cmcgrath13/followers", "following_url": "https://api.github.com/users/cmcgrath13/following{/other_user}", "gists_url": "https://api.github.com/users/cmcgrath13/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmcgrath13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmcgrath13/subscriptions", "organizations_url": "https://api.github.com/users/cmcgrath13/orgs", "repos_url": "https://api.github.com/users/cmcgrath13/repos", "events_url": "https://api.github.com/users/cmcgrath13/events{/privacy}", "received_events_url": "https://api.github.com/users/cmcgrath13/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-02-04T19:01:07Z", "updated_at": "2019-12-11T22:39:08Z", "closed_at": "2019-12-11T22:39:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are attempting to integrate circus with our product which uses PyZMQ 17.0 and found that circus has the requirement `pyzmq>=13.1.0,<17.0'`. When attempting to run our code with the requirement `pyzmq>=13.1.0,<17.0'` we get issues with the zmq socket handling. \r\n\r\nWe see in #1055 circus has compatibility issues with PyZMQ 17.0 so it would be inadvisable to attempt to force circus onto our required version of PyZMQ. We are working on putting circus inside a venv to circumvent this issue, but feel if circus is going to require an older version of PyZMQ it should be vendoring it to work inline with solutions requiring a newer version of PyZMQ.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1098", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1098/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1098/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1098/events", "html_url": "https://github.com/circus-tent/circus/issues/1098", "id": 400280526, "node_id": "MDU6SXNzdWU0MDAyODA1MjY=", "number": 1098, "title": "Changelog @ readthedocs.io requires an update", "user": {"login": "jeroenhendricksen", "id": 32140294, "node_id": "MDQ6VXNlcjMyMTQwMjk0", "avatar_url": "https://avatars2.githubusercontent.com/u/32140294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeroenhendricksen", "html_url": "https://github.com/jeroenhendricksen", "followers_url": "https://api.github.com/users/jeroenhendricksen/followers", "following_url": "https://api.github.com/users/jeroenhendricksen/following{/other_user}", "gists_url": "https://api.github.com/users/jeroenhendricksen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeroenhendricksen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeroenhendricksen/subscriptions", "organizations_url": "https://api.github.com/users/jeroenhendricksen/orgs", "repos_url": "https://api.github.com/users/jeroenhendricksen/repos", "events_url": "https://api.github.com/users/jeroenhendricksen/events{/privacy}", "received_events_url": "https://api.github.com/users/jeroenhendricksen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-17T13:37:16Z", "updated_at": "2019-01-17T18:10:36Z", "closed_at": "2019-01-17T18:10:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "The 'Changelog History' website at [readthedocs.io](https://circus.readthedocs.io/en/latest/changelog/) states `0.15.0 unreleased`. This should be updated as 0.15.0 is the latest stable release and is no longer 'unreleased'.\r\n\r\nNot sure if circus.readthedocs.io is under your control, so please close this issue if you can't amend the text there.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1097", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1097/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1097/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1097/events", "html_url": "https://github.com/circus-tent/circus/issues/1097", "id": 392768138, "node_id": "MDU6SXNzdWUzOTI3NjgxMzg=", "number": 1097, "title": "backports.configparser.InterpolationSyntaxError: '%' must be followed by '%' or '(', found: '%Y-%m-%d %H:%M:%S:%F %s: %t'", "user": {"login": "bugcy013", "id": 729259, "node_id": "MDQ6VXNlcjcyOTI1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/729259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bugcy013", "html_url": "https://github.com/bugcy013", "followers_url": "https://api.github.com/users/bugcy013/followers", "following_url": "https://api.github.com/users/bugcy013/following{/other_user}", "gists_url": "https://api.github.com/users/bugcy013/gists{/gist_id}", "starred_url": "https://api.github.com/users/bugcy013/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bugcy013/subscriptions", "organizations_url": "https://api.github.com/users/bugcy013/orgs", "repos_url": "https://api.github.com/users/bugcy013/repos", "events_url": "https://api.github.com/users/bugcy013/events{/privacy}", "received_events_url": "https://api.github.com/users/bugcy013/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "biozz", "id": 3424811, "node_id": "MDQ6VXNlcjM0MjQ4MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3424811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biozz", "html_url": "https://github.com/biozz", "followers_url": "https://api.github.com/users/biozz/followers", "following_url": "https://api.github.com/users/biozz/following{/other_user}", "gists_url": "https://api.github.com/users/biozz/gists{/gist_id}", "starred_url": "https://api.github.com/users/biozz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biozz/subscriptions", "organizations_url": "https://api.github.com/users/biozz/orgs", "repos_url": "https://api.github.com/users/biozz/repos", "events_url": "https://api.github.com/users/biozz/events{/privacy}", "received_events_url": "https://api.github.com/users/biozz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "biozz", "id": 3424811, "node_id": "MDQ6VXNlcjM0MjQ4MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3424811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biozz", "html_url": "https://github.com/biozz", "followers_url": "https://api.github.com/users/biozz/followers", "following_url": "https://api.github.com/users/biozz/following{/other_user}", "gists_url": "https://api.github.com/users/biozz/gists{/gist_id}", "starred_url": "https://api.github.com/users/biozz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biozz/subscriptions", "organizations_url": "https://api.github.com/users/biozz/orgs", "repos_url": "https://api.github.com/users/biozz/repos", "events_url": "https://api.github.com/users/biozz/events{/privacy}", "received_events_url": "https://api.github.com/users/biozz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-19T20:37:07Z", "updated_at": "2020-08-10T14:15:28Z", "closed_at": "2020-08-10T14:15:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Guys,\r\n\r\nWhen I try to run circusd in windows server 2008rc2. I am getting this exception. I am using **Python 2.7.15**\r\n\r\n> backports.configparser.InterpolationSyntaxError: '%' must be followed by '%' or '(', found: '%Y-%m-%d %H:%M:%S:%F %s: %t'\r\n\r\n\r\n```\r\nPS C:\\tech\\tech_recorder> circusd.exe tech.cfg\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\runpy.py\", line 174, in _run_module_as_main\r\n    \"__main__\", fname, loader, pkg_name)\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\runpy.py\", line 72, in _run_code\r\n    exec code in run_globals\r\n  File \"C:\\Users\\tau\\Anaconda2\\Scripts\\circusd.exe\\__main__.py\", line 9, in <module>\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\circus\\circusd.py\", line 126, in main\r\n    arbiter = Arbiter.load_from_config(args.config)\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\circus\\arbiter.py\", line 422, in load_from_config\r\n    cfg = get_config(config_file)\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\circus\\config.py\", line 194, in get_config\r\n    section_items = dict(cfg.items(section))\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\circus\\config.py\", line 66, in items\r\n    items = StrictConfigParser.items(self, section)\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\backports\\configparser\\__init__.py\", line 878, in items\r\n    return [(option, value_getter(option)) for option in d.keys()]\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\backports\\configparser\\__init__.py\", line 875, in <lambda>\r\n    section, option, d[option], d)\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\backports\\configparser\\__init__.py\", line 384, in before_get\r\n    self._interpolate_some(parser, option, L, value, section, defaults, 1)\r\n  File \"c:\\users\\tau\\anaconda2\\lib\\site-packages\\backports\\configparser\\__init__.py\", line 434, in _interpolate_some\r\n    \"found: %r\" % (rest,))\r\nbackports.configparser.InterpolationSyntaxError: '%' must be followed by '%' or '(', found: '%Y-%m-%d %H:%M:%S:%F %s: %t'\r\n```\r\ntech.cfg\r\n```\r\n[circus]\r\ncheck_delay = 5\r\nendpoint = tcp://127.0.0.1:5555\r\npubsub_endpoint = tcp://127.0.0.1:5556\r\nstats_endpoint = tcp://127.0.0.1:5557\r\nloglevel = ERROR\r\nlogoutput = C:\\tech\\tech_recorder\\logs\\sysout\\circusd-stdout.txt\r\n\r\n[watcher:techrecorder]\r\ncmd = 'C:\\tech\\tech_recorder\\bin\\techData.exe -cfg C:\\tech\\tech_recorder\\tech.cfg'\r\nuse_sockets = True\r\nnumprocesses = 1\r\ncopy_env = True\r\nworking_dir = C:\\tech\\tech_recorder\\bin\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1093", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1093/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1093/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1093/events", "html_url": "https://github.com/circus-tent/circus/issues/1093", "id": 377671230, "node_id": "MDU6SXNzdWUzNzc2NzEyMzA=", "number": 1093, "title": "Is there a plan to migrate to tornado 5.0+ in this project ?", "user": {"login": "mo3000", "id": 4011149, "node_id": "MDQ6VXNlcjQwMTExNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/4011149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mo3000", "html_url": "https://github.com/mo3000", "followers_url": "https://api.github.com/users/mo3000/followers", "following_url": "https://api.github.com/users/mo3000/following{/other_user}", "gists_url": "https://api.github.com/users/mo3000/gists{/gist_id}", "starred_url": "https://api.github.com/users/mo3000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mo3000/subscriptions", "organizations_url": "https://api.github.com/users/mo3000/orgs", "repos_url": "https://api.github.com/users/mo3000/repos", "events_url": "https://api.github.com/users/mo3000/events{/privacy}", "received_events_url": "https://api.github.com/users/mo3000/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-06T02:52:21Z", "updated_at": "2018-11-06T03:07:31Z", "closed_at": "2018-11-06T03:07:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "since tornado 5.0 use async def/await  instead of tons of yield. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1091", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1091/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1091/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1091/events", "html_url": "https://github.com/circus-tent/circus/issues/1091", "id": 375153491, "node_id": "MDU6SXNzdWUzNzUxNTM0OTE=", "number": 1091, "title": "Process fails to start with on_demand = False option in watcher", "user": {"login": "mercma", "id": 7997058, "node_id": "MDQ6VXNlcjc5OTcwNTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7997058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mercma", "html_url": "https://github.com/mercma", "followers_url": "https://api.github.com/users/mercma/followers", "following_url": "https://api.github.com/users/mercma/following{/other_user}", "gists_url": "https://api.github.com/users/mercma/gists{/gist_id}", "starred_url": "https://api.github.com/users/mercma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mercma/subscriptions", "organizations_url": "https://api.github.com/users/mercma/orgs", "repos_url": "https://api.github.com/users/mercma/repos", "events_url": "https://api.github.com/users/mercma/events{/privacy}", "received_events_url": "https://api.github.com/users/mercma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-29T18:21:01Z", "updated_at": "2020-08-07T12:18:39Z", "closed_at": "2020-08-07T12:18:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the example watcher below,\r\n\r\n```\r\n[watcher:exec]\r\nargs = /root/circus/exec.py\r\ncmd = /usr/bin/python3\r\non_demand = False\r\n```\r\nthe process will not start when on_demand is set as False in the configuration file.\r\n\r\nThis is caused by [watcher.py]:\r\n```\r\n@property\r\ndef pending_socket_event(self):\r\n    return self.on_demand and not self.arbiter.socket_event\r\n```\r\nwhich is called from [watcher.py[\r\n```\r\n@gen.coroutine\r\n@util.debuglog\r\ndef _start(self):\r\n    \"\"\"Start.\r\n    \"\"\"\r\n    if self.pending_socket_event:\r\n        return\r\n\r\n...\r\n```\r\n\r\n\r\nIf the on_demand option is removed from the watcher section, the process will execute as expected, even though the documentation states that False is the default value for on_demand.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1088", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1088/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1088/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1088/events", "html_url": "https://github.com/circus-tent/circus/issues/1088", "id": 374580389, "node_id": "MDU6SXNzdWUzNzQ1ODAzODk=", "number": 1088, "title": "config file options have different types in different files", "user": {"login": "mercma", "id": 7997058, "node_id": "MDQ6VXNlcjc5OTcwNTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7997058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mercma", "html_url": "https://github.com/mercma", "followers_url": "https://api.github.com/users/mercma/followers", "following_url": "https://api.github.com/users/mercma/following{/other_user}", "gists_url": "https://api.github.com/users/mercma/gists{/gist_id}", "starred_url": "https://api.github.com/users/mercma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mercma/subscriptions", "organizations_url": "https://api.github.com/users/mercma/orgs", "repos_url": "https://api.github.com/users/mercma/repos", "events_url": "https://api.github.com/users/mercma/events{/privacy}", "received_events_url": "https://api.github.com/users/mercma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391170305, "node_id": "MDU6TGFiZWwzOTExNzAzMDU=", "url": "https://api.github.com/repos/circus-tent/circus/labels/Waiting%20for%20a%20PR", "name": "Waiting for a PR", "color": "fbca04", "default": false, "description": null}, {"id": 3982513, "node_id": "MDU6TGFiZWwzOTgyNTEz", "url": "https://api.github.com/repos/circus-tent/circus/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-26T23:38:07Z", "updated_at": "2020-03-01T11:00:20Z", "closed_at": "2020-03-01T11:00:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have found the following two options (possibly others) have different types in different files:\r\n\r\nwarmup_delay\r\ngraceful_timeout\r\n\r\nexample:\r\nin config.py line 240, graceful_timeout is read as an int, but:\r\nin watcher.py line 222, graceful_timeout is cast to a float\r\n\r\nIf you attempt to define graceful_timeout as a float in your ini file, circus will not start.\r\nIf they are being used internally as 'float', why can I not define them that way in the config file?  Should they be 'int' or 'float'?  Was this decision part of the design?\r\n\r\nThanks,\r\nMike\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1087", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1087/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1087/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1087/events", "html_url": "https://github.com/circus-tent/circus/issues/1087", "id": 374203298, "node_id": "MDU6SXNzdWUzNzQyMDMyOTg=", "number": 1087, "title": "Allowing plugins to see watcher add/remove events", "user": {"login": "mercma", "id": 7997058, "node_id": "MDQ6VXNlcjc5OTcwNTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7997058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mercma", "html_url": "https://github.com/mercma", "followers_url": "https://api.github.com/users/mercma/followers", "following_url": "https://api.github.com/users/mercma/following{/other_user}", "gists_url": "https://api.github.com/users/mercma/gists{/gist_id}", "starred_url": "https://api.github.com/users/mercma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mercma/subscriptions", "organizations_url": "https://api.github.com/users/mercma/orgs", "repos_url": "https://api.github.com/users/mercma/repos", "events_url": "https://api.github.com/users/mercma/events{/privacy}", "received_events_url": "https://api.github.com/users/mercma/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-26T02:33:50Z", "updated_at": "2018-10-26T10:37:16Z", "closed_at": "2018-10-26T10:37:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't believe this is currently possible?\r\n\r\nI created pull request #1086 to allow plugins to see watcher add/remove (circusctl add/rm) commands.  I added the functionality to the Arbiter class, but not being that familiar with the code I am not sure it is the correct place. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1084", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1084/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1084/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1084/events", "html_url": "https://github.com/circus-tent/circus/issues/1084", "id": 370032902, "node_id": "MDU6SXNzdWUzNzAwMzI5MDI=", "number": 1084, "title": "daphne is not able to access port using '--fd' flag with $(circus.sockets.web)", "user": {"login": "string-minhaj", "id": 41957933, "node_id": "MDQ6VXNlcjQxOTU3OTMz", "avatar_url": "https://avatars2.githubusercontent.com/u/41957933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/string-minhaj", "html_url": "https://github.com/string-minhaj", "followers_url": "https://api.github.com/users/string-minhaj/followers", "following_url": "https://api.github.com/users/string-minhaj/following{/other_user}", "gists_url": "https://api.github.com/users/string-minhaj/gists{/gist_id}", "starred_url": "https://api.github.com/users/string-minhaj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/string-minhaj/subscriptions", "organizations_url": "https://api.github.com/users/string-minhaj/orgs", "repos_url": "https://api.github.com/users/string-minhaj/repos", "events_url": "https://api.github.com/users/string-minhaj/events{/privacy}", "received_events_url": "https://api.github.com/users/string-minhaj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-15T07:30:42Z", "updated_at": "2018-10-15T10:01:21Z", "closed_at": "2018-10-15T10:01:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "(i am on ubuntu 16.04)\r\ni am trying to run Daphne (Django channels asgi server: [https://github.com/django/daphne](url) ) \r\nwith the following config file : \r\n\r\n```\r\n[circus]\r\nendpoint = tcp://127.0.0.1:5555\r\npubsub_endpoint = tcp://127.0.0.1:5556\r\nstats_endpoint = tcp://127.0.0.1:5557\r\ncheck_delay = 5\r\n\r\n[socket: asgi]\r\nport = 8001\r\n\r\n[watcher: Daphne-NG]\r\ncmd = daphne\r\nargs = --fd $(circus.sockets.asgi) myapp.asgi:application\r\nworking_dir = /var/live_code/myapp\r\ncopy_env = True\r\nvirtualenv = /var/live_code/myapp/.venv\r\nnumprocesses = 1\r\nuse_sockets = True\r\nsend_hup = True\r\nstop_signal = QUIT\r\n\r\n```\r\nwith the above given socket django returns an error\r\n```\r\ndaphne: error: argument --fd: invalid int value: '$(circus.sockets.asgi)'\r\n```\r\n\r\nif i run \r\n`daphne --fd 5 myapp.asgi:application`\r\n\r\nthen it works fine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1082", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1082/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1082/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1082/events", "html_url": "https://github.com/circus-tent/circus/issues/1082", "id": 365106105, "node_id": "MDU6SXNzdWUzNjUxMDYxMDU=", "number": 1082, "title": "Circus environment variable reference", "user": {"login": "CarlosEssun", "id": 15261765, "node_id": "MDQ6VXNlcjE1MjYxNzY1", "avatar_url": "https://avatars3.githubusercontent.com/u/15261765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CarlosEssun", "html_url": "https://github.com/CarlosEssun", "followers_url": "https://api.github.com/users/CarlosEssun/followers", "following_url": "https://api.github.com/users/CarlosEssun/following{/other_user}", "gists_url": "https://api.github.com/users/CarlosEssun/gists{/gist_id}", "starred_url": "https://api.github.com/users/CarlosEssun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CarlosEssun/subscriptions", "organizations_url": "https://api.github.com/users/CarlosEssun/orgs", "repos_url": "https://api.github.com/users/CarlosEssun/repos", "events_url": "https://api.github.com/users/CarlosEssun/events{/privacy}", "received_events_url": "https://api.github.com/users/CarlosEssun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-29T07:18:25Z", "updated_at": "2018-10-10T04:05:22Z", "closed_at": "2018-10-10T04:05:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Environment\r\npyenv \r\npython==3.5.2\r\npaho-mqtt==1.3.1 \r\ncircus==1.3.0\r\n# Description\r\nMy own script file, which references paho-mqtt, runs without problems when using the command line.\r\n* command line\r\n```bash\r\ncircusd --log-level debug /etc/circus/conf.d/mqtt.ini \r\n```\r\n* circus.ini\r\n```\r\n[circus]\r\ncheck_delay = 5\r\nendpoint = tcp://127.0.0.1:5555\r\npubsub_endpoint = tcp://127.0.0.1:5556\r\nstatsd = true\r\nlogoutput= /var/log/sengled/circus/circus-stdout.log\r\ninclude = /etc/circus/conf.d/*.ini\r\n#httpd = True\r\n#httpd_host = 0.0.0.0\r\n#httpd_port = 8300\r\n[watcher:webapp]\r\ncmd = /opt/pyenv/shims/chaussette --fd $(circus.sockets.web)\r\nnumprocesses = 3\r\nuse_sockets = True\r\n\r\n[socket:web]\r\nhost = 0.0.0.0\r\nport = 9999\r\n```\r\n* mqtt.ini\r\n```\r\n[watcher:mqtt]\r\nworking_dir = /opt/sengled/reliabilityOps/Firmware/light/firmware\r\ncmd = python\r\nargs = -u mqtt_service.py\r\nnumprocesses = 1\r\n#copy_env = True\r\n#copy_path = True\r\n#virtulenv = /opt/pyenv/versions/firmware\r\nstderr_stream.class = FileStream\r\nstdout_stream.class = FileStream\r\nstdout_stream.filename = /var/log/sengled/mqtt/mqtt-stdout.log\r\nstderr_stream.filename = /var/log/sengled/mqtt/mqtt-stderr.log\r\nstdout_stream.max_bytes = 1073741824\r\n```\r\n but when I use the service reference watcher mqtt, I always find that I can't find it.\r\nTraceback (most recent call last):\r\n  File \"mqtt_service.py\", line 16, in <module>\r\n    import paho.mqtt.client as mqtt\r\nImportError: No module named paho.mqtt.client\r\nbut I don't have this problem on the command line.\r\n```bash\r\n(firmware) [root@ip-172-31-117-206 Firmware]# circusd --log-level debug /etc/circus/conf.d/mqtt.ini\r\n2018-09-29 07:07:53 circus[14449] [INFO] Starting master on pid 14449\r\n2018-09-29 07:07:53 circus[14449] [DEBUG] Initializing watchers\r\n2018-09-29 07:07:53 circus[14449] [DEBUG] cmd: python\r\n2018-09-29 07:07:53 circus[14449] [DEBUG] args: -u mqtt_service.py\r\n2018-09-29 07:07:53 circus[14449] [DEBUG] process args: ['python', '-u', 'mqtt_service.py']\r\n2018-09-29 07:07:53 circus[14449] [DEBUG] running mqtt process [pid 14519]\r\n2018-09-29 07:07:53 circus[14449] [INFO] Arbiter now waiting for commands\r\n2018-09-29 07:07:53 circus[14449] [INFO] mqtt started\r\n```\r\n* mqtt_service.py\r\n\r\n```python\r\nimport sys\r\nimport time\r\nimport os\r\nimport json\r\nimport random\r\nfrom functools import wraps\r\nimport threading\r\nimport requests\r\n#import configparser\r\nimport paho.mqtt.client as mqtt\r\nfrom flogging.log import FirmwareLog\r\nfrom catch.ExceptionHandler import catch_exception\r\nfrom stream.stream import Stream\r\nfrom task_timer import TaskInterval\r\nfrom downlink_channel import FirmwareDownlink\r\nfrom uplink_channel import FirmwareUplink\r\nfrom work_protocol_service import Firmware_Socket_Client\r\n\r\n#cf = configparser.ConfigParser()\r\nsys.path[0] = '/'.join(sys.path[0].split('/')[:-1])\r\nfrom middleware.redis_connect import redisConnect\r\nfrom element.element_build_net import DeviceWithRequest\r\n.....\r\n```\r\nOther configuration file [ini] references have no such problem\r\nI think it may be an environmental path problem, but I did not find a specific solution! \r\nThank you\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1081", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1081/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1081/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1081/events", "html_url": "https://github.com/circus-tent/circus/issues/1081", "id": 365064498, "node_id": "MDU6SXNzdWUzNjUwNjQ0OTg=", "number": 1081, "title": "Can't 'use_papa' programmatically", "user": {"login": "mercma", "id": 7997058, "node_id": "MDQ6VXNlcjc5OTcwNTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7997058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mercma", "html_url": "https://github.com/mercma", "followers_url": "https://api.github.com/users/mercma/followers", "following_url": "https://api.github.com/users/mercma/following{/other_user}", "gists_url": "https://api.github.com/users/mercma/gists{/gist_id}", "starred_url": "https://api.github.com/users/mercma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mercma/subscriptions", "organizations_url": "https://api.github.com/users/mercma/orgs", "repos_url": "https://api.github.com/users/mercma/repos", "events_url": "https://api.github.com/users/mercma/events{/privacy}", "received_events_url": "https://api.github.com/users/mercma/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-28T22:45:58Z", "updated_at": "2018-10-16T14:20:10Z", "closed_at": "2018-10-16T14:20:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am unable to call 'use_papa' programmatically\r\nSimple example:\r\n```python\r\nfrom circus import get_arbiter\r\n\r\nmyprogram = {\"cmd\": \"python3 exec.py\", \"use_papa\": True, \"numprocesses\": 1, \"name\": \"exec.py\"}\r\narbiter = get_arbiter([myprogram])\r\ntry:\r\n    arbiter.start()\r\nfinally:\r\n    arbiter.stop()\r\n```\r\nThe above python will not start the app using papa.  The following fixes the issue.\r\n\r\n    diff --git a/circus/commands/util.py b/circus/commands/util.py\r\n    index 416919d..fcb1b54 100644\r\n    --- a/circus/commands/util.py\r\n    +++ b/circus/commands/util.py\r\n    @@ -59,6 +59,8 @@ def convert_option(key, val):\r\n             return util.to_bool(val)\r\n         elif key == \"close_child_stderr\":\r\n             return util.to_bool(val)\r\n    +    elif key == \"use_papa\":\r\n    +        return util.to_bool(val)\r\n          elif key.startswith('stderr_stream.') or key.startswith('stdout_stream.'):\r\n             subkey = key.split('.', 1)[-1]\r\n             if subkey in ('max_bytes', 'backup_count'):\r\n    @@ -99,7 +101,7 @@ def validate_option(key, val):\r\n                       'max_retry', 'graceful_timeout', 'stdout_stream',\r\n                       'stderr_stream', 'max_age', 'max_age_variance', 'respawn',\r\n                       'singleton', 'hooks', 'close_child_stdin',\r\n    -                  'close_child_stdout', 'close_child_stderr')\r\n    +                  'close_child_stdout', 'close_child_stderr', 'use_papa')\r\n \r\n         valid_prefixes = ('stdout_stream.', 'stderr_stream.', 'hooks.', 'rlimit_')\r\n \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1080", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1080/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1080/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1080/events", "html_url": "https://github.com/circus-tent/circus/issues/1080", "id": 358385695, "node_id": "MDU6SXNzdWUzNTgzODU2OTU=", "number": 1080, "title": "bug: circusd removes pidfile on arbiter restart", "user": {"login": "imaginal", "id": 2058546, "node_id": "MDQ6VXNlcjIwNTg1NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/2058546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imaginal", "html_url": "https://github.com/imaginal", "followers_url": "https://api.github.com/users/imaginal/followers", "following_url": "https://api.github.com/users/imaginal/following{/other_user}", "gists_url": "https://api.github.com/users/imaginal/gists{/gist_id}", "starred_url": "https://api.github.com/users/imaginal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imaginal/subscriptions", "organizations_url": "https://api.github.com/users/imaginal/orgs", "repos_url": "https://api.github.com/users/imaginal/repos", "events_url": "https://api.github.com/users/imaginal/events{/privacy}", "received_events_url": "https://api.github.com/users/imaginal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391170305, "node_id": "MDU6TGFiZWwzOTExNzAzMDU=", "url": "https://api.github.com/repos/circus-tent/circus/labels/Waiting%20for%20a%20PR", "name": "Waiting for a PR", "color": "fbca04", "default": false, "description": null}, {"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}, {"id": 2609416, "node_id": "MDU6TGFiZWwyNjA5NDE2", "url": "https://api.github.com/repos/circus-tent/circus/labels/good%20first%20issue", "name": "good first issue", "color": "1d76db", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-09T15:08:53Z", "updated_at": "2020-03-02T15:20:53Z", "closed_at": "2020-03-02T15:20:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Don't unlink pidfile if restart is true\r\n\r\nhttps://github.com/circus-tent/circus/blob/6ca0d18bd53fc5de0358921f45fbbd609a884f6a/circus/circusd.py#L165", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1074", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1074/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1074/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1074/events", "html_url": "https://github.com/circus-tent/circus/issues/1074", "id": 341642891, "node_id": "MDU6SXNzdWUzNDE2NDI4OTE=", "number": 1074, "title": "running a flask app with gunicorn server using circus keeps on loading.", "user": {"login": "rupav", "id": 20624380, "node_id": "MDQ6VXNlcjIwNjI0Mzgw", "avatar_url": "https://avatars0.githubusercontent.com/u/20624380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rupav", "html_url": "https://github.com/rupav", "followers_url": "https://api.github.com/users/rupav/followers", "following_url": "https://api.github.com/users/rupav/following{/other_user}", "gists_url": "https://api.github.com/users/rupav/gists{/gist_id}", "starred_url": "https://api.github.com/users/rupav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rupav/subscriptions", "organizations_url": "https://api.github.com/users/rupav/orgs", "repos_url": "https://api.github.com/users/rupav/repos", "events_url": "https://api.github.com/users/rupav/events{/privacy}", "received_events_url": "https://api.github.com/users/rupav/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-16T19:14:14Z", "updated_at": "2018-08-03T13:20:02Z", "closed_at": "2018-08-03T13:20:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have set up the following **circus.ini** file.\r\n```\r\n[circus]\r\n statsd = 1\r\n httpdp = 1\r\n \r\n [watcher:candis]\r\n cmd = /home/rupav/opensource/candisEditableVENV/bin/gunicorn  candis.app:app\r\n numprocesses = 3\r\n use_sockets = True\r\n \r\n [socket:web]\r\n host = 127.0.0.1\r\n port = 8000\r\n```\r\nWhile running my app, using - \r\n`circusd --daemon circus.ini --log-output circus.log`, I am getting no error in **circus.log**, output is - \r\n```\r\n 2018-07-17 00:40:15 circus[14794] [INFO] Starting master on pid 14794\r\n 2018-07-17 00:40:15 circus[14794] [INFO] sockets started\r\n 2018-07-17 00:40:15 circus[14794] [INFO] Arbiter now waiting for commands\r\n 2018-07-17 00:40:15 circus[14794] [INFO] candis started\r\n 2018-07-17 00:40:15 circus[14794] [INFO] circusd-stats started\r\n```\r\n\r\nBut now going to localhost:8000, the app just keeps on **loading**, which goes on forever. And nothing is getting updated on circus.log file.\r\n\r\nRunning the same command\r\n`/home/rupav/opensource/candisEditableVENV/bin/gunicorn  candis.app:app` directly on terminal,  works fine.\r\n\r\nPython version using in virtualenv is 3.6.3, on Ubuntu 17.10.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1071", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1071/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1071/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1071/events", "html_url": "https://github.com/circus-tent/circus/issues/1071", "id": 337991667, "node_id": "MDU6SXNzdWUzMzc5OTE2Njc=", "number": 1071, "title": "TypeError: constructor returned NULL ", "user": {"login": "Williamtsanga", "id": 31800643, "node_id": "MDQ6VXNlcjMxODAwNjQz", "avatar_url": "https://avatars0.githubusercontent.com/u/31800643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Williamtsanga", "html_url": "https://github.com/Williamtsanga", "followers_url": "https://api.github.com/users/Williamtsanga/followers", "following_url": "https://api.github.com/users/Williamtsanga/following{/other_user}", "gists_url": "https://api.github.com/users/Williamtsanga/gists{/gist_id}", "starred_url": "https://api.github.com/users/Williamtsanga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Williamtsanga/subscriptions", "organizations_url": "https://api.github.com/users/Williamtsanga/orgs", "repos_url": "https://api.github.com/users/Williamtsanga/repos", "events_url": "https://api.github.com/users/Williamtsanga/events{/privacy}", "received_events_url": "https://api.github.com/users/Williamtsanga/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}, {"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-03T17:31:04Z", "updated_at": "2020-08-11T07:19:15Z", "closed_at": "2020-08-11T07:19:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "from gi.repository import GLib , GObject\r\nfrom multiprocessing import Pipe\r\nparent,child = Pipe(duplex=False)\r\nGObject.io_add_watch(parent.fileno() , GObject.IO_IN , myfonction )\r\n **_Then i get this error_**\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\msys64\\mingw64\\lib\\python3.5\\threading.py\", line 914, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\msys64\\mingw64\\lib\\python3.5\\threading.py\", line 862, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"mnG.py\", line 1091, in <lambda>\r\n    test = Thread(target=(lambda : GObject.io_add_watch(parant.fileno(), GObject.IO_IN, self.up)),name=\"GObject\")\r\n  File \"C:\\msys64\\mingw64\\lib\\python3.5\\site-packages\\gi\\overrides\\GLib.py\", line 749, in io_add_watch\r\n    channel, priority, condition, func, user_data = _io_add_watch_get_args(*args, **kwargs)\r\n  File \"C:\\msys64\\mingw64\\lib\\python3.5\\site-packages\\gi\\overrides\\GLib.py\", line 729, in _io_add_watch_get_args\r\n    real_channel = GLib.IOChannel.unix_new(channel)\r\nTypeError: constructor returned NULL\r\n\r\n\r\n**_but this small code is working correctly on Linux (debian) \r\nWhy ? how to hava a valide file descriptore from parant_**\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1069", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1069/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1069/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1069/events", "html_url": "https://github.com/circus-tent/circus/issues/1069", "id": 336200396, "node_id": "MDU6SXNzdWUzMzYyMDAzOTY=", "number": 1069, "title": "circus is actually unusable :\\", "user": {"login": "idchlife", "id": 4563032, "node_id": "MDQ6VXNlcjQ1NjMwMzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4563032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/idchlife", "html_url": "https://github.com/idchlife", "followers_url": "https://api.github.com/users/idchlife/followers", "following_url": "https://api.github.com/users/idchlife/following{/other_user}", "gists_url": "https://api.github.com/users/idchlife/gists{/gist_id}", "starred_url": "https://api.github.com/users/idchlife/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/idchlife/subscriptions", "organizations_url": "https://api.github.com/users/idchlife/orgs", "repos_url": "https://api.github.com/users/idchlife/repos", "events_url": "https://api.github.com/users/idchlife/events{/privacy}", "received_events_url": "https://api.github.com/users/idchlife/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-06-27T12:04:59Z", "updated_at": "2020-02-21T09:53:38Z", "closed_at": "2020-02-21T09:49:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I started using it on Ubuntu server and stumbled upon same problems I encountered on Mac OS\r\n\r\ncircusctl tells everytime about timeout.\r\ncircus-top shows dash line and that's all\r\ncircusd without --daemon is the only case when it's working but... It's actually more hussle than by hand running gunicorn + other processes, because killing when circusd stopped in terminal session is \"ps ax grep and kill\", since circusctl always gives timeout.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1066", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1066/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1066/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1066/events", "html_url": "https://github.com/circus-tent/circus/issues/1066", "id": 311665253, "node_id": "MDU6SXNzdWUzMTE2NjUyNTM=", "number": 1066, "title": "papa_endpoint ipc socket is ignored, tcp is created", "user": {"login": "meitham", "id": 139598, "node_id": "MDQ6VXNlcjEzOTU5OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/139598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meitham", "html_url": "https://github.com/meitham", "followers_url": "https://api.github.com/users/meitham/followers", "following_url": "https://api.github.com/users/meitham/following{/other_user}", "gists_url": "https://api.github.com/users/meitham/gists{/gist_id}", "starred_url": "https://api.github.com/users/meitham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meitham/subscriptions", "organizations_url": "https://api.github.com/users/meitham/orgs", "repos_url": "https://api.github.com/users/meitham/repos", "events_url": "https://api.github.com/users/meitham/events{/privacy}", "received_events_url": "https://api.github.com/users/meitham/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-04-05T15:44:31Z", "updated_at": "2018-04-06T11:35:28Z", "closed_at": "2018-04-06T11:35:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have three different ipc sockets defined in circus, such as:\r\n\r\npubsub_endpoint = ipc:///path/to//circus/sockets/circus-pubsub.sock\r\nstats_endpoint  = ipc:///path/to//circus/sockets/circus-stats.sock\r\npapa_endpoint   = ipc:///path/to//circus/sockets/circus-papa.sock\r\n\r\nThe pubsub and stats sockets are created correctly, but circus seems to ignore my papa socket and bind itself to the default 20202 socket.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1064", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1064/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1064/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1064/events", "html_url": "https://github.com/circus-tent/circus/issues/1064", "id": 310642996, "node_id": "MDU6SXNzdWUzMTA2NDI5OTY=", "number": 1064, "title": "Incompatible with Tornado v5.0", "user": {"login": "grantjenks", "id": 118304, "node_id": "MDQ6VXNlcjExODMwNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/118304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grantjenks", "html_url": "https://github.com/grantjenks", "followers_url": "https://api.github.com/users/grantjenks/followers", "following_url": "https://api.github.com/users/grantjenks/following{/other_user}", "gists_url": "https://api.github.com/users/grantjenks/gists{/gist_id}", "starred_url": "https://api.github.com/users/grantjenks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grantjenks/subscriptions", "organizations_url": "https://api.github.com/users/grantjenks/orgs", "repos_url": "https://api.github.com/users/grantjenks/repos", "events_url": "https://api.github.com/users/grantjenks/events{/privacy}", "received_events_url": "https://api.github.com/users/grantjenks/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-04-02T23:23:51Z", "updated_at": "2019-11-18T08:54:45Z", "closed_at": "2018-06-15T15:32:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried starting Circus and got the following:\r\n\r\n```\r\n$ circusd --log-level debug circus.ini \r\n2018-04-02 16:11:30 circus[15011] arbiter.py:525 [INFO] Starting master on pid 15011\r\n2018-04-02 16:11:30 circus[15011] sockets.py:229 [DEBUG] Socket bound at 127.0.0.1:9999 - fd: 7\r\n2018-04-02 16:11:30 circus[15011] sockets.py:229 [DEBUG] Socket bound at 127.0.0.1:8080 - fd: 12\r\n2018-04-02 16:11:30 circus[15011] arbiter.py:493 [INFO] sockets started\r\n2018-04-02 16:11:30 circus[15011] util.py:1089 [ERROR] exception __init__() takes 3 positional arguments but 4 were given caught\r\n```\r\n\r\nIn a debug session you can see the problem:\r\n\r\n```\r\n> /Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/circus/util.py(1091)check_future_exception_and_log()\r\n-> if hasattr(future, \"exc_info\"):\r\n(Pdb) l\r\n1086 \t    if isinstance(future, concurrent.Future):\r\n1087 \t        exception = future.exception()\r\n1088 \t        if exception is not None:\r\n1089 \t            logger.error(\"exception %s caught\" % exception)\r\n1090 \t            import pdb;pdb.set_trace()\r\n1091 ->\t            if hasattr(future, \"exc_info\"):\r\n1092 \t                exc_info = future.exc_info()\r\n1093 \t                traceback.print_tb(exc_info[2])\r\n1094 \t            return exception\r\n[EOF]\r\n(Pdb) p traceback.print_tb(exception.__traceback__)\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/tornado/gen.py\", line 315, in wrapper\r\n    yielded = next(result)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/types.py\", line 204, in __next__\r\n    return next(self.__wrapped)\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/circus/arbiter.py\", line 529, in start\r\n    self.ctrl.start()\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/circus/controller.py\", line 116, in start\r\n    self.check_delay, self.loop)\r\n```\r\n\r\nThat shows that constructing the PeriodicCallback in controller.py is causing the problem. Here's the context:\r\n\r\n```\r\n    def start(self):\r\n        self.initialize()\r\n        if self.check_delay > 0:\r\n            # The specific case (check_delay < 0)\r\n            # so with no period callback to manage_watchers\r\n            # is probably \"unit tests only\"\r\n            self.caller = ioloop.PeriodicCallback(self.manage_watchers,\r\n                                                  self.check_delay, self.loop)\r\n            self.caller.start()\r\n        self.started = True\r\n```\r\n\r\nWe can inspect the source for Tornado and see that the signature has changed: http://www.tornadoweb.org/en/stable/_modules/tornado/ioloop.html#PeriodicCallback There's also a comment in the classdoc:\r\n\r\n```\r\n    .. versionchanged:: 5.0\r\n       The ``io_loop`` argument (deprecated since version 4.1) has been removed.\r\n ```\r\n\r\nAnd if you read the \"What's New\" for Tornado v5 at http://www.tornadoweb.org/en/stable/releases/v5.0.0.html you see they removed the argument.\r\n\r\nI tried fixing the problem with:\r\n\r\n```\r\n$ pip uninstall tornado\r\n$ pip install \"tornado<5\"\r\n```\r\n\r\nAnd got further but then saw:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/circusweb/circushttpd.py\", line 25, in <module>\r\n    import tornadio2\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/tornadio2/__init__.py\", line 25, in <module>\r\n    from tornadio2.router import TornadioRouter\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/tornadio2/router.py\", line 27, in <module>\r\n    from tornadio2 import persistent, polling, sessioncontainer, session, proto, preflight, stats\r\n  File \"/Users/grantj/repos/deleteme/env/lib/python3.6/site-packages/tornadio2/persistent.py\", line 143\r\n    except Exception, ex:\r\n```\r\n\r\nSo I amended the example ``circus.ini`` like so:\r\n\r\n```\r\n[circus]\r\nstatsd = 1\r\n# httpd = 1  # <-- Commented out this line. Don't run the web server.\r\n\r\n[watcher:webapp]\r\ncmd = /Users/grantj/repos/deleteme/env/bin/chaussette --fd $(circus.sockets.web)\r\nnumprocesses = 3\r\nuse_sockets = True\r\n\r\n[socket:web]\r\nhost = 127.0.0.1\r\nport = 9999\r\n```\r\n\r\nAnd then it worked!\r\n\r\nSo a few things broken here:\r\n\r\n1. Update requirements to use \"tornado<5\"\r\n2. Eventually fix the io_loop argument issue.\r\n3. The tornadio2 dependency does not support Python 3 and seems abandoned?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1061", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1061/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1061/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1061/events", "html_url": "https://github.com/circus-tent/circus/issues/1061", "id": 308341656, "node_id": "MDU6SXNzdWUzMDgzNDE2NTY=", "number": 1061, "title": "Ubuntu  can't find chaussette", "user": {"login": "imarkzzz", "id": 27805815, "node_id": "MDQ6VXNlcjI3ODA1ODE1", "avatar_url": "https://avatars2.githubusercontent.com/u/27805815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imarkzzz", "html_url": "https://github.com/imarkzzz", "followers_url": "https://api.github.com/users/imarkzzz/followers", "following_url": "https://api.github.com/users/imarkzzz/following{/other_user}", "gists_url": "https://api.github.com/users/imarkzzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/imarkzzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imarkzzz/subscriptions", "organizations_url": "https://api.github.com/users/imarkzzz/orgs", "repos_url": "https://api.github.com/users/imarkzzz/repos", "events_url": "https://api.github.com/users/imarkzzz/events{/privacy}", "received_events_url": "https://api.github.com/users/imarkzzz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-25T11:25:28Z", "updated_at": "2020-08-14T13:14:20Z", "closed_at": "2020-08-14T13:14:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Ubuntu 16.04, anaconda3, python 3.6.3\r\nI follow the demo \r\nhttps://circus.readthedocs.io/en/latest/usecases/#running-a-wsgi-application\r\nwhen I run it, I got\r\n\r\n> circus[16522] [WARNING] error in 'webworker': [Errno 2] No such file or directory: 'chaussette': 'chaussette'\r\n\r\n> but when I run chaussette, it is ok.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1060", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1060/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1060/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1060/events", "html_url": "https://github.com/circus-tent/circus/issues/1060", "id": 308298370, "node_id": "MDU6SXNzdWUzMDgyOTgzNzA=", "number": 1060, "title": "waitress", "user": {"login": "kiorq", "id": 23644557, "node_id": "MDQ6VXNlcjIzNjQ0NTU3", "avatar_url": "https://avatars3.githubusercontent.com/u/23644557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiorq", "html_url": "https://github.com/kiorq", "followers_url": "https://api.github.com/users/kiorq/followers", "following_url": "https://api.github.com/users/kiorq/following{/other_user}", "gists_url": "https://api.github.com/users/kiorq/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiorq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiorq/subscriptions", "organizations_url": "https://api.github.com/users/kiorq/orgs", "repos_url": "https://api.github.com/users/kiorq/repos", "events_url": "https://api.github.com/users/kiorq/events{/privacy}", "received_events_url": "https://api.github.com/users/kiorq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-24T20:58:19Z", "updated_at": "2020-08-14T16:59:33Z", "closed_at": "2020-08-14T16:59:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Question.\r\n\r\nCan i get this to work with waitress? If so how I've been doing research on how to use waitress and circus on a windows 2017 server. (chaussette doesn't work on windows)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1059", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1059/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1059/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1059/events", "html_url": "https://github.com/circus-tent/circus/issues/1059", "id": 305333465, "node_id": "MDU6SXNzdWUzMDUzMzM0NjU=", "number": 1059, "title": "Not compatible with Tornado 5", "user": {"login": "xamix", "id": 9742044, "node_id": "MDQ6VXNlcjk3NDIwNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/9742044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xamix", "html_url": "https://github.com/xamix", "followers_url": "https://api.github.com/users/xamix/followers", "following_url": "https://api.github.com/users/xamix/following{/other_user}", "gists_url": "https://api.github.com/users/xamix/gists{/gist_id}", "starred_url": "https://api.github.com/users/xamix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xamix/subscriptions", "organizations_url": "https://api.github.com/users/xamix/orgs", "repos_url": "https://api.github.com/users/xamix/repos", "events_url": "https://api.github.com/users/xamix/events{/privacy}", "received_events_url": "https://api.github.com/users/xamix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-03-14T21:21:51Z", "updated_at": "2018-06-15T15:00:03Z", "closed_at": "2018-06-15T15:00:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI tried with the last master to launch a small executable like in Step by Step install\r\nHowever I keep getting this error:\r\n\r\n```\r\n2018-03-14 22:17:45 circus[14844] [INFO] Starting master on pid 14844\r\n2018-03-14 22:17:45 circus[14844] [INFO] sockets started\r\n2018-03-14 22:17:45 circus[14844] [ERROR] exception __init__() takes 3 positional arguments but 4 were given caught\r\n```\r\n\r\nMy circus.ini file is below\r\n\r\n```\r\n[circus]\r\nstatsd = 1\r\nhttpd = 1\r\n\r\n[watcher:server]\r\ncmd = \"C:\\server.exe\"\r\n```\r\nThe exception seem to be catched so I cannot say where is the error.\r\nI run on Windows 7 64 bits with python 3.6.3\r\n\r\nDo you have any hint from were the error come from?\r\n\r\nRegards\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1058", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1058/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1058/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1058/events", "html_url": "https://github.com/circus-tent/circus/issues/1058", "id": 303138944, "node_id": "MDU6SXNzdWUzMDMxMzg5NDQ=", "number": 1058, "title": "socket not accessible by Daphne server on Windows (due to Twisted, not Circus)", "user": {"login": "jxrossel", "id": 12891830, "node_id": "MDQ6VXNlcjEyODkxODMw", "avatar_url": "https://avatars2.githubusercontent.com/u/12891830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jxrossel", "html_url": "https://github.com/jxrossel", "followers_url": "https://api.github.com/users/jxrossel/followers", "following_url": "https://api.github.com/users/jxrossel/following{/other_user}", "gists_url": "https://api.github.com/users/jxrossel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jxrossel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jxrossel/subscriptions", "organizations_url": "https://api.github.com/users/jxrossel/orgs", "repos_url": "https://api.github.com/users/jxrossel/repos", "events_url": "https://api.github.com/users/jxrossel/events{/privacy}", "received_events_url": "https://api.github.com/users/jxrossel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-03-07T15:18:26Z", "updated_at": "2018-08-10T14:07:08Z", "closed_at": "2018-08-10T13:04:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm trying to run Daphne (Django channels asgi server: https://github.com/django/daphne) with the following config file:\r\n\r\n```\r\n[circus]\r\ncheck_delay = 5\r\n\r\n[socket:web]\r\nhost = 0.0.0.0\r\nport = 80\r\n\r\n[watcher:daphne]\r\ncmd = daphne\r\nargs = --fd $(circus.sockets.web) MYAPP.asgi:application \r\nuse_sockets = True\r\nnumprocesses = 1\r\n```\r\n\r\nWith the socket defined above, Daphne returns an error message:\r\n```\r\n'NoneType' object has no attribute 'fcntl'\r\n```\r\nwhich looks to me as if the socket object is \"None\". I've got the same message if I just run at the command line:\r\n```\r\ndaphne --fd 5 MYAPP.asgi:application \r\n```\r\nwhere the file descriptor has no meaning (i.e. not associated with anything).\r\n\r\nRemarks:\r\n\r\n* Setting the host and port directly in the watcher args solves the issue, but then I can have only 1 process\r\n* With the socket, Daphne receives a file descriptor number, but it's like if the number isn't associated with anything\r\n* I'm on Windows 7 (that's maybe the issue here...)\r\n\r\nAny help welcome here!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1057", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1057/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1057/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1057/events", "html_url": "https://github.com/circus-tent/circus/issues/1057", "id": 303088698, "node_id": "MDU6SXNzdWUzMDMwODg2OTg=", "number": 1057, "title": "circusd fails with: [ERROR] exception __init__() takes 3 positional arguments but 4 were given caught", "user": {"login": "luopio", "id": 69383, "node_id": "MDQ6VXNlcjY5Mzgz", "avatar_url": "https://avatars3.githubusercontent.com/u/69383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luopio", "html_url": "https://github.com/luopio", "followers_url": "https://api.github.com/users/luopio/followers", "following_url": "https://api.github.com/users/luopio/following{/other_user}", "gists_url": "https://api.github.com/users/luopio/gists{/gist_id}", "starred_url": "https://api.github.com/users/luopio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luopio/subscriptions", "organizations_url": "https://api.github.com/users/luopio/orgs", "repos_url": "https://api.github.com/users/luopio/repos", "events_url": "https://api.github.com/users/luopio/events{/privacy}", "received_events_url": "https://api.github.com/users/luopio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-07T12:59:48Z", "updated_at": "2018-05-24T11:15:44Z", "closed_at": "2018-03-07T13:01:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Our previously working Docker-powered setup started failing yesterday with the above error. At first I thought it was something related to our code, but then I discovered that rebuilding the previously working code with `--no-cache` results in the same error. This is `circusd==0.14`. Perhaps a dependency is broken somewhere?\r\n\r\nHere's a minimal Dockerfile that I was able to reproduce the issue with:\r\n```\r\nFROM python:3.6\r\nENV PYTHONUNBUFFERED 1\r\nRUN pip install circus chaussette\r\nADD circus-test.ini ${work_dir}\r\nCMD [\"circusd\", \"circus-test.ini\"]\r\n```\r\n\r\nWith the `circus-test.ini` from the tutorial:\r\n```\r\n[circus]\r\nstatsd = 1\r\n; httpd = 1\r\n\r\n[watcher:webapp]\r\ncmd = bin/chaussette --fd $(circus.sockets.web)\r\nnumprocesses = 3\r\nuse_sockets = True\r\n\r\n[socket:web]\r\nhost = 127.0.0.1\r\nport = 9999\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1056", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1056/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1056/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1056/events", "html_url": "https://github.com/circus-tent/circus/issues/1056", "id": 302546597, "node_id": "MDU6SXNzdWUzMDI1NDY1OTc=", "number": 1056, "title": "Lock down tornado version", "user": {"login": "swarajban", "id": 384283, "node_id": "MDQ6VXNlcjM4NDI4Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/384283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swarajban", "html_url": "https://github.com/swarajban", "followers_url": "https://api.github.com/users/swarajban/followers", "following_url": "https://api.github.com/users/swarajban/following{/other_user}", "gists_url": "https://api.github.com/users/swarajban/gists{/gist_id}", "starred_url": "https://api.github.com/users/swarajban/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swarajban/subscriptions", "organizations_url": "https://api.github.com/users/swarajban/orgs", "repos_url": "https://api.github.com/users/swarajban/repos", "events_url": "https://api.github.com/users/swarajban/events{/privacy}", "received_events_url": "https://api.github.com/users/swarajban/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-03-06T03:01:44Z", "updated_at": "2020-08-14T17:18:41Z", "closed_at": "2020-08-14T17:18:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[Tornado](https://github.com/tornadoweb/tornado/releases/tag/v5.0.0) just released a new major version (5), and this breaks circus (circus fails to start). We should lock down the tornado version to 4.x.x to prevent this\r\n\r\nCircus error with new `tornado`\r\n```\r\n2018-03-05 18:35:09 circus[65281] [INFO] Starting master on pid 65281\r\n2018-03-05 18:35:09 circus[65281] [ERROR] exception __init__() takes 3 positional arguments but 4 were given caught\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1055", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1055/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1055/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1055/events", "html_url": "https://github.com/circus-tent/circus/issues/1055", "id": 300363833, "node_id": "MDU6SXNzdWUzMDAzNjM4MzM=", "number": 1055, "title": "pyzmq 17.0.0 can cause circus to busy loop on epoll_wait", "user": {"login": "chris-bornmann", "id": 5652438, "node_id": "MDQ6VXNlcjU2NTI0Mzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5652438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-bornmann", "html_url": "https://github.com/chris-bornmann", "followers_url": "https://api.github.com/users/chris-bornmann/followers", "following_url": "https://api.github.com/users/chris-bornmann/following{/other_user}", "gists_url": "https://api.github.com/users/chris-bornmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-bornmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-bornmann/subscriptions", "organizations_url": "https://api.github.com/users/chris-bornmann/orgs", "repos_url": "https://api.github.com/users/chris-bornmann/repos", "events_url": "https://api.github.com/users/chris-bornmann/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-bornmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391170305, "node_id": "MDU6TGFiZWwzOTExNzAzMDU=", "url": "https://api.github.com/repos/circus-tent/circus/labels/Waiting%20for%20a%20PR", "name": "Waiting for a PR", "color": "fbca04", "default": false, "description": null}, {"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-26T19:23:58Z", "updated_at": "2020-01-17T15:20:37Z", "closed_at": "2020-01-17T15:20:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "We run circus in a docker container.  We rebuilt our containers which pulled in a new version of pyzmq.  It went from 16.0.3 to 17.0.0 and it seems like an incompatibility has crept in, as circusd's CPU utilization went to 100%.  strace shows:\r\n```\r\n...\r\n     0.000057 epoll_wait(5<anon_inode:[eventpoll]>, [{EPOLLHUP, {u32=26, u64=21436748710019098}}], 1023, 1750) = 1\r\n     0.000074 clock_gettime(CLOCK_REALTIME, {1519664951, 681411890}) = 0\r\n     0.000056 clock_gettime(CLOCK_REALTIME, {1519664951, 681467241}) = 0\r\n     0.000055 clock_gettime(CLOCK_MONOTONIC, {13571888, 686821970}) = 0\r\n     0.000051 epoll_wait(5<anon_inode:[eventpoll]>, [{EPOLLHUP, {u32=26, u64=21436748710019098}}], 1023, 1749) = 1\r\n     0.000089 clock_gettime(CLOCK_REALTIME, {1519664951, 681662917}) = 0\r\n     0.000042 clock_gettime(CLOCK_REALTIME, {1519664951, 681697351}) = 0\r\n...\r\n```\r\nThe fd for epoll_wait is a pipe:\r\n```\r\nls -lrtah /proc/97/fd/26\r\nlr-x------ 1 root root 64 Feb 26 17:15 /proc/97/fd/26 -> pipe:[1327394133]\r\n```\r\n\r\nIt seems like there are three circusd threads and only one of them is spinning (this is from \"top\"):\r\n```\r\n   97 root      20   0  219164  27908  11364 R 99.9  0.3  56:36.67 circusd\r\n  103 root      20   0  219164  27908  11364 S  0.0  0.3   0:00.00 circusd\r\n  104 root      20   0  219164  27908  11364 S  0.0  0.3   0:00.00 circusd\r\n```\r\n\r\nAnd here's output from lsof:\r\n```\r\nlsof | grep 1327394133\r\nCOMMAND    PID TID USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME\r\ncircusd     97     root   26r     FIFO               0,10      0t0 1327394133 pipe\r\ncircusd     97 103 root   26r     FIFO               0,10      0t0 1327394133 pipe\r\ncircusd     97 104 root   26r     FIFO               0,10      0t0 1327394133 pipe\r\n```\r\n\r\nBacking off to pyzmq 16.0.4 (or 16.0.3) fixes the issue.  However!  We have multiple containers running apps that use circus, and all upgraded to pyzmq 17.0.0 yet only a subset are exhibiting this behavior.  I think pyzmq is involved only because pinning it to an older version makes the problem go away.  I haven't yet figured out what the difference is between a system that works with 17.0.0 and one that doesn't.  The other dependencies of circus (iowait, psutil, tornado) are the same on all systems:\r\n```circus==0.14.0\r\n  - iowait [required: Any, installed: 0.2]\r\n  - psutil [required: Any, installed: 5.4.3]\r\n  - pyzmq [required: >=13.1.0, installed: 17.0.0]\r\n  - tornado [required: >=3.0, installed: 4.5.3]\r\n```\r\nIf there's any additional information I can gather please let me know.  This could absolutely be a pyzmq issue but I'm starting here in case they changed something that requires a change in circusd.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1053", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1053/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1053/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1053/events", "html_url": "https://github.com/circus-tent/circus/issues/1053", "id": 298444397, "node_id": "MDU6SXNzdWUyOTg0NDQzOTc=", "number": 1053, "title": "process states", "user": {"login": "binooetomo", "id": 28727621, "node_id": "MDQ6VXNlcjI4NzI3NjIx", "avatar_url": "https://avatars1.githubusercontent.com/u/28727621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binooetomo", "html_url": "https://github.com/binooetomo", "followers_url": "https://api.github.com/users/binooetomo/followers", "following_url": "https://api.github.com/users/binooetomo/following{/other_user}", "gists_url": "https://api.github.com/users/binooetomo/gists{/gist_id}", "starred_url": "https://api.github.com/users/binooetomo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binooetomo/subscriptions", "organizations_url": "https://api.github.com/users/binooetomo/orgs", "repos_url": "https://api.github.com/users/binooetomo/repos", "events_url": "https://api.github.com/users/binooetomo/events{/privacy}", "received_events_url": "https://api.github.com/users/binooetomo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-20T01:19:25Z", "updated_at": "2020-08-14T17:02:18Z", "closed_at": "2020-08-14T17:02:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\nCurrently I use supervisord.\r\n\r\nIn suppervisord we can get some process states per http://supervisord.org/subprocess.html#process-states\r\nHow to get similar info(s) in circus using CircusClient ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1051", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1051/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1051/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1051/events", "html_url": "https://github.com/circus-tent/circus/issues/1051", "id": 295467401, "node_id": "MDU6SXNzdWUyOTU0Njc0MDE=", "number": 1051, "title": "Upstart script not working", "user": {"login": "jimymodi", "id": 415224, "node_id": "MDQ6VXNlcjQxNTIyNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/415224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimymodi", "html_url": "https://github.com/jimymodi", "followers_url": "https://api.github.com/users/jimymodi/followers", "following_url": "https://api.github.com/users/jimymodi/following{/other_user}", "gists_url": "https://api.github.com/users/jimymodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimymodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimymodi/subscriptions", "organizations_url": "https://api.github.com/users/jimymodi/orgs", "repos_url": "https://api.github.com/users/jimymodi/repos", "events_url": "https://api.github.com/users/jimymodi/events{/privacy}", "received_events_url": "https://api.github.com/users/jimymodi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}, {"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-08T10:55:37Z", "updated_at": "2020-08-14T13:07:30Z", "closed_at": "2020-08-14T13:07:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used the upstart script provided on deployment page here - http://circus.readthedocs.io/en/latest/for-ops/deployment/\r\n\r\nBut it gives error while doing start stop or status\r\n```\r\n[root@ip-172-31-1-119 ec2-user]# service circus status\r\nstart: Unknown job: on\r\nstop: Unknown job: on\r\n/etc/init.d/circus: line 4: respawn: command not found\r\n\r\n```\r\nMy OS is amazon linux.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1049", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1049/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1049/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1049/events", "html_url": "https://github.com/circus-tent/circus/issues/1049", "id": 286611939, "node_id": "MDU6SXNzdWUyODY2MTE5Mzk=", "number": 1049, "title": "Running Circus as a library inside a tornado application", "user": {"login": "Notmarrco", "id": 1902611, "node_id": "MDQ6VXNlcjE5MDI2MTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1902611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Notmarrco", "html_url": "https://github.com/Notmarrco", "followers_url": "https://api.github.com/users/Notmarrco/followers", "following_url": "https://api.github.com/users/Notmarrco/following{/other_user}", "gists_url": "https://api.github.com/users/Notmarrco/gists{/gist_id}", "starred_url": "https://api.github.com/users/Notmarrco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Notmarrco/subscriptions", "organizations_url": "https://api.github.com/users/Notmarrco/orgs", "repos_url": "https://api.github.com/users/Notmarrco/repos", "events_url": "https://api.github.com/users/Notmarrco/events{/privacy}", "received_events_url": "https://api.github.com/users/Notmarrco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-07T23:37:50Z", "updated_at": "2018-01-09T19:04:40Z", "closed_at": "2018-01-09T19:04:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI have a tornado application running, and I would like to spawn scripts from it using circus.\r\nBut I would like to use Circus as a library, because I want to use a custom Stream Handler in my application (this stream handler returns data to frontend using server-sent events).\r\nAnd it seems that tornado in circus is conflicting with tornado in my app, so I can only start() the arbiter OR start() my application. (error is ```RuntimeError: IOLoop is already running```)\r\n\r\nI most surely am misusing this library but I can't find a way to do it another way.\r\nThanks,", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1047", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1047/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1047/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1047/events", "html_url": "https://github.com/circus-tent/circus/issues/1047", "id": 268685300, "node_id": "MDU6SXNzdWUyNjg2ODUzMDA=", "number": 1047, "title": "Python API to a circusd instance", "user": {"login": "stefanocrosta", "id": 772735, "node_id": "MDQ6VXNlcjc3MjczNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/772735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefanocrosta", "html_url": "https://github.com/stefanocrosta", "followers_url": "https://api.github.com/users/stefanocrosta/followers", "following_url": "https://api.github.com/users/stefanocrosta/following{/other_user}", "gists_url": "https://api.github.com/users/stefanocrosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefanocrosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefanocrosta/subscriptions", "organizations_url": "https://api.github.com/users/stefanocrosta/orgs", "repos_url": "https://api.github.com/users/stefanocrosta/repos", "events_url": "https://api.github.com/users/stefanocrosta/events{/privacy}", "received_events_url": "https://api.github.com/users/stefanocrosta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-10-26T09:17:40Z", "updated_at": "2017-10-27T13:17:24Z", "closed_at": "2017-10-27T13:13:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! \r\nFollowing #1046 we have started exploring more in detail using Circus for our needs, and we are now at a big crossroad.\r\n\r\nWe are interested into the Python API approach, even thou in #981 you write:\r\n\r\n> May I ask why you're not using a configuration file and circusd (like all the examples in the doc) ? Circus can be used via the Python API, but it's definitively not the recommended way (and it's badly documented).\r\n\r\nBut the python API /is/ what interests us, because we dynamically create (destroy, re-launch) processes)\r\n\r\nWe have multiple endpoints that might want to spawn a new process. With the current Circus python approach, each endpoint will have to create its own `circusd` via the `arbiter` class.\r\n\r\nWe would prefer, instead, to have a single circusd instance running (and started by initd/systemd) and multiple python endpoint being able to create their watchers on that instance.\r\n\r\nIf I'm not mistaken, this is not currently supported by the existing API.\r\nWe would need some kind of ArbiterProxy that speaks via 0MQ to the circusd default daemon (a bit like circusctl does).\r\nThe biggest obstacle we foresee is how to implement the Hooks in this case (there should be some messaging with a corresponding blocking state - and maybe a timeout - in the daemon).\r\n\r\nIs this something you have been pondering, that you consider doable/interesting for the project?\r\nany feedback would be useful,\r\n\r\nThanks! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1046", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1046/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1046/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1046/events", "html_url": "https://github.com/circus-tent/circus/issues/1046", "id": 254607358, "node_id": "MDU6SXNzdWUyNTQ2MDczNTg=", "number": 1046, "title": "project status", "user": {"login": "stefanocrosta", "id": 772735, "node_id": "MDQ6VXNlcjc3MjczNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/772735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefanocrosta", "html_url": "https://github.com/stefanocrosta", "followers_url": "https://api.github.com/users/stefanocrosta/followers", "following_url": "https://api.github.com/users/stefanocrosta/following{/other_user}", "gists_url": "https://api.github.com/users/stefanocrosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefanocrosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefanocrosta/subscriptions", "organizations_url": "https://api.github.com/users/stefanocrosta/orgs", "repos_url": "https://api.github.com/users/stefanocrosta/repos", "events_url": "https://api.github.com/users/stefanocrosta/events{/privacy}", "received_events_url": "https://api.github.com/users/stefanocrosta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-01T11:00:00Z", "updated_at": "2018-06-27T13:30:39Z", "closed_at": "2017-09-06T09:37:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got interested into Circus after reading some nice blog posts and the project description and philosophy; but looking at the github repo it looks like development has stopped about a year ago, and even pull requests are not actively integrated.\r\n\r\ncould you please share what the project status and future plans are please?\r\n\r\nIs it worth investing into this for use in production - and of course potentially contributing - or not?\r\n\r\nThanks and best,\r\n\r\nPS. I tried sending this message to the mailing list 10 days ago, but the message did not gotten moderation approval yet (nor denial) which is not promising :-(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1043", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1043/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1043/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1043/events", "html_url": "https://github.com/circus-tent/circus/issues/1043", "id": 241976783, "node_id": "MDU6SXNzdWUyNDE5NzY3ODM=", "number": 1043, "title": "Why the session can not be shared in two processes", "user": {"login": "moskiGithub", "id": 18692350, "node_id": "MDQ6VXNlcjE4NjkyMzUw", "avatar_url": "https://avatars1.githubusercontent.com/u/18692350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moskiGithub", "html_url": "https://github.com/moskiGithub", "followers_url": "https://api.github.com/users/moskiGithub/followers", "following_url": "https://api.github.com/users/moskiGithub/following{/other_user}", "gists_url": "https://api.github.com/users/moskiGithub/gists{/gist_id}", "starred_url": "https://api.github.com/users/moskiGithub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moskiGithub/subscriptions", "organizations_url": "https://api.github.com/users/moskiGithub/orgs", "repos_url": "https://api.github.com/users/moskiGithub/repos", "events_url": "https://api.github.com/users/moskiGithub/events{/privacy}", "received_events_url": "https://api.github.com/users/moskiGithub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-11T09:05:50Z", "updated_at": "2020-08-14T17:23:40Z", "closed_at": "2020-08-14T17:23:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use circus create an application,and set numprocesses=2.When startup it,I found the session can not be shared. How to solve it??? \r\nThe serve.ini:\r\n[circus]\r\ncheck_delay =5\r\nendpoint = tcp://127.0.0.1:5555\r\npubsub_enpoint = tcp://127.0.0.1:5556\r\nstats_endpoint = tcp://127.0.0.1:5557\r\n\r\n[watcher:webworker]\r\ncmd = /usr/local/hpcc/env/bin/chaussette --fd $(circus.sockets.webapp) wsgi.application\r\nuse_sockets = True\r\nnumprocesses = 2\r\n\r\n[socket:webapp]\r\nhost = 127.0.0.1\r\nport = 6543", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1040", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1040/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1040/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1040/events", "html_url": "https://github.com/circus-tent/circus/issues/1040", "id": 228567045, "node_id": "MDU6SXNzdWUyMjg1NjcwNDU=", "number": 1040, "title": "Hooks are not passed the same environment as their watcher", "user": {"login": "corydodt", "id": 121705, "node_id": "MDQ6VXNlcjEyMTcwNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/121705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corydodt", "html_url": "https://github.com/corydodt", "followers_url": "https://api.github.com/users/corydodt/followers", "following_url": "https://api.github.com/users/corydodt/following{/other_user}", "gists_url": "https://api.github.com/users/corydodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/corydodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corydodt/subscriptions", "organizations_url": "https://api.github.com/users/corydodt/orgs", "repos_url": "https://api.github.com/users/corydodt/repos", "events_url": "https://api.github.com/users/corydodt/events{/privacy}", "received_events_url": "https://api.github.com/users/corydodt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-14T20:19:17Z", "updated_at": "2017-11-27T18:50:51Z", "closed_at": "2017-11-27T18:50:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Seems simple enough; hooks that need to use the same variables as exist in the watcher's environment cannot do so.\r\n\r\n```\r\n# circus.ini\r\n[watcher:hello]\r\ncmd: true\r\nhooks.before_start: hello.hook\r\n\r\n[env:hello]\r\nhello_env: world\r\n```\r\n```\r\n# hello.py\r\ndef hook(watcher, arbiter, hook_name):\r\n    import os\r\n    print os.environ['hello_env']\r\n```\r\n\r\nAfter running: `circusd circus.ini` I get the following output:\r\n```\r\n% circusd circus.ini\r\n2017-05-14 13:15:56 circus[22707] [INFO] Starting master on pid 22707\r\n2017-05-14 13:15:56 circus[22707] [ERROR] Hook 'before_start' failed\r\nTraceback (most recent call last):\r\n  File \"/home/cory/.virtualenvs/noms/local/lib/python2.7/site-packages/circus/watcher.py\", line 917, in call_hook\r\n    result = self.hooks[hook_name](**hook_kwargs)\r\n  File \"/home/cory/src/Noms/hello.py\", line 3, in hook\r\n    print os.environ['hello_env']\r\n  File \"/home/cory/.virtualenvs/noms/lib/python2.7/UserDict.py\", line 40, in __getitem__\r\n    raise KeyError(key)\r\nKeyError: 'hello_env'\r\n2017-05-14 13:15:56 circus[22707] [INFO] Arbiter now waiting for commands\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1038", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1038/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1038/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1038/events", "html_url": "https://github.com/circus-tent/circus/issues/1038", "id": 225984422, "node_id": "MDU6SXNzdWUyMjU5ODQ0MjI=", "number": 1038, "title": "Sort plugin config string to fix stalled builds and prevent unnecessary worker restarts", "user": {"login": "asterite3", "id": 5569241, "node_id": "MDQ6VXNlcjU1NjkyNDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5569241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asterite3", "html_url": "https://github.com/asterite3", "followers_url": "https://api.github.com/users/asterite3/followers", "following_url": "https://api.github.com/users/asterite3/following{/other_user}", "gists_url": "https://api.github.com/users/asterite3/gists{/gist_id}", "starred_url": "https://api.github.com/users/asterite3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asterite3/subscriptions", "organizations_url": "https://api.github.com/users/asterite3/orgs", "repos_url": "https://api.github.com/users/asterite3/repos", "events_url": "https://api.github.com/users/asterite3/events{/privacy}", "received_events_url": "https://api.github.com/users/asterite3/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-03T13:23:49Z", "updated_at": "2017-05-11T14:07:46Z", "closed_at": "2017-05-11T14:07:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I'm not mistaken, builds get stalled because there is some process spawned by the tests that continues running endlessly after test code finishes. Travis CI probably uses some kind of process grouping that detects that a process created by the tests still exists, so it thinks tests are not finished, and, after 10 minutes it reports that tests failed with a timeout.\r\n\r\nAfter running the tests several times myself, I found that indeed sometimes there is a process left running forever after the tests finished.\r\n```shell\r\n# tox\r\nGLOB sdist-make: /root/circus-own/circus/setup.py\r\n...\r\nBuild finished. The HTML pages are in build/html.\r\nmake: Leaving directory '/root/circus-own/circus/docs'\r\n_________________ summary ______________...\r\n  py26: commands succeeded\r\n  py26-no-gevent: commands succeeded\r\n  py27: commands succeeded\r\n  py27-no-gevent: commands succeeded\r\n  py33: commands succeeded\r\n  py34: commands succeeded\r\n  py35: commands succeeded\r\n  flake8: commands succeeded\r\n  docs: commands succeeded\r\n  congratulations :)\r\n# ps aux|cat\r\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\r\nroot         1  0.0  0.0  18352  3096 ?        Ss+  Apr30   0:00 /bin/bash\r\nroot     16093  0.3  0.2 195472 23832 ?        Ssl  12:22   0:00 /root/circus-own/circus/.tox/py34/bin/python3.4 -c from circus import plugins;plugins.main() --endpoint tcp://127.0.0.1:7555 --pubsub tcp://127.0.0.1:7556 --config watcher:test1:::__name__:plugin:myplugin:::name:plugin:myplugin circus.plugins.resource_watcher.ResourceWatcher\r\n```\r\nThis process with plugin `watcher:test1:::__name__:plugin:myplugin:::name:plugin:myplugin` keeps running forever. I think this is the reason build gets stalled and killed with a timeout. Actually, this can be seen from the logs - during builds that timeouted circus reports that it started a plugin running `circus.tests.test_reloadconfig` (for example, see https://travis-ci.org/circus-tent/circus/jobs/217126760#L392 or https://travis-ci.org/circus-tent/circus/jobs/221154598#L390):\r\n```test_reload_envdictparsed (circus.tests.test_reloadconfig.TestConfig) ... ok\r\ntest_reload_ignorearbiterwatchers (circus.tests.test_reloadconfig.TestConfig) ... ok\r\ntest_reload_numprocesses (circus.tests.test_reloadconfig.TestConfig) ... ok\r\ntest_watcher_names (circus.tests.test_reloadconfig.TestConfig) ... ok\r\ntest_dummy (circus.tests.test_runner.TestRunner) ... 2017-03-31 11:00:55 circus[4831] [INFO] Loading the plugin...\r\n2017-03-31 11:00:55 circus[4831] [INFO] Endpoint: 'tcp://127.0.0.1:7555'\r\n2017-03-31 11:00:55 circus[4831] [INFO] Pub/sub: 'tcp://127.0.0.1:7556'\r\n2017-03-31 11:00:55 circus[4831] [INFO] Starting\r\nok\r\n```\r\nWhile logs for builds that did not fail do not have such record.\r\n\r\nThe reason this plugin is started is that Arbiter thinks this plugin's command is changed when config is reloaded. It happens in a call to `reload_from_config()`, here: https://github.com/circus-tent/circus/blob/master/circus/arbiter.py#L417.\r\n```python\r\n            # ...\r\n            new_watcher_cfg = (self.get_watcher_config(new_cfg, n) or\r\n                               self.get_plugin_config(new_cfg, n))\r\n            old_watcher_cfg = w._cfg.copy()\r\n            # ...\r\n            diff = DictDiffer(new_watcher_cfg, old_watcher_cfg).changed()\r\n            # ...\r\n            if diff == set(['numprocesses']): # diff is a set {'cmd'} here\r\n                # if nothing but the number of processes is\r\n                # changed, just changes this\r\n                w.set_numprocesses(int(new_watcher_cfg['numprocesses']))\r\n                changed = False\r\n            else:\r\n                changed = len(diff) > 0\r\n\r\n            if changed: # changed is True\r\n                # Others things are changed. Just delete and add the watcher.\r\n                changed_wn.add(n)\r\n                deleted_wn.add(n)\r\n                added_wn.add(n)\r\n            # ...\r\n            for n in added_wn:\r\n            # ...\r\n            yield self.start_watcher(w)\r\n            # ...\r\n```\r\n\r\nThe command looks like this: `/root/circus-own/circus/.tox/py34/bin/python3.4 -c from circus import plugins;plugins.main() --endpoint tcp://127.0.0.1:7555 --pubsub tcp://127.0.0.1:7556 --config watcher:test1:::__name__:plugin:myplugin:::name:plugin:myplugin circus.plugins.resource_watcher.ResourceWatcher`. The reason it is considered changed is that `--config <CONFIG>` portion changes. Sometimes `<CONFIG>` looks like this:\r\n```\r\nname:plugin:myplugin:::__name__:plugin:myplugin:::watcher:test1\r\n```\r\nAnd sometimes it can look like this:\r\n```\r\nwatcher:test1:::__name__:plugin:myplugin:::name:plugin:myplugin\r\n```\r\nThese strings correspond to the same config, but the order of key:value pairs is different, so config strings and hence commands are treated unequal.\r\n\r\nPlugin config is converted to string in `plugins/__init__.py`:\r\n```python\r\ndef _cfg2str(cfg):\r\n    return ':::'.join(['%s:%s' % (key, val) for key, val in cfg.items()])\r\n```\r\nIt makes a list of key:value pairs in the dict and joins them. The problem is that dicts are unordered, so the order of elements can be arbitrary and may be different even for dicts with the same set of key:value pairs.\r\nI suggest to sort key:value pairs before joining them to string: https://github.com/asterite3/circus/commit/08d143a4b997c51056c75cdcf96a31a769995c32 (I can make a pull request from that).\r\nThis should fix the tests and also prevent unnesessary restarts of plugins when arbiter's config is reloaded, but plugin's config is not really changed.\r\n\r\nAnother way to fix tests would be to ensure that no processes spawned by a test are left running after the test is done.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1034", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1034/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1034/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1034/events", "html_url": "https://github.com/circus-tent/circus/issues/1034", "id": 217653017, "node_id": "MDU6SXNzdWUyMTc2NTMwMTc=", "number": 1034, "title": "Unicode config variables are not expanded", "user": {"login": "jferguson-gnubio", "id": 5031761, "node_id": "MDQ6VXNlcjUwMzE3NjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5031761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jferguson-gnubio", "html_url": "https://github.com/jferguson-gnubio", "followers_url": "https://api.github.com/users/jferguson-gnubio/followers", "following_url": "https://api.github.com/users/jferguson-gnubio/following{/other_user}", "gists_url": "https://api.github.com/users/jferguson-gnubio/gists{/gist_id}", "starred_url": "https://api.github.com/users/jferguson-gnubio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jferguson-gnubio/subscriptions", "organizations_url": "https://api.github.com/users/jferguson-gnubio/orgs", "repos_url": "https://api.github.com/users/jferguson-gnubio/repos", "events_url": "https://api.github.com/users/jferguson-gnubio/events{/privacy}", "received_events_url": "https://api.github.com/users/jferguson-gnubio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-28T18:35:04Z", "updated_at": "2017-03-31T12:49:01Z", "closed_at": "2017-03-31T10:57:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "If the configuration file variables are unicode, `get_config._expand_vars()` fails to expand them because `isinstance(target[key], str)` evaluates to False.  It seems to work ok with the check `isinstance(target[key], basestring)`, which I think is what the test should be.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1030", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1030/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1030/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1030/events", "html_url": "https://github.com/circus-tent/circus/issues/1030", "id": 215170012, "node_id": "MDU6SXNzdWUyMTUxNzAwMTI=", "number": 1030, "title": "Tornado requirement", "user": {"login": "paulocheque", "id": 94350, "node_id": "MDQ6VXNlcjk0MzUw", "avatar_url": "https://avatars1.githubusercontent.com/u/94350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulocheque", "html_url": "https://github.com/paulocheque", "followers_url": "https://api.github.com/users/paulocheque/followers", "following_url": "https://api.github.com/users/paulocheque/following{/other_user}", "gists_url": "https://api.github.com/users/paulocheque/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulocheque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulocheque/subscriptions", "organizations_url": "https://api.github.com/users/paulocheque/orgs", "repos_url": "https://api.github.com/users/paulocheque/repos", "events_url": "https://api.github.com/users/paulocheque/events{/privacy}", "received_events_url": "https://api.github.com/users/paulocheque/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-18T06:11:57Z", "updated_at": "2018-06-15T15:32:36Z", "closed_at": "2018-06-15T15:32:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am receiving:\r\n\r\n```\r\nFile \"env/lib/python3.4/site-packages/tornado/ioloop.py\", line 48, in <module>\r\nImportError: No module named 'tornado.platform'\r\n```\r\n\r\n- CentOS\r\n- python 3.4\r\n- circus==0.14.0\r\n- tornado==4.4.2\r\n\r\nIs a compatibility issue with Tornado? the `setup.py` of Circus just say **tornardo >= 3.0**.\r\n\r\nThanks in advance", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1029", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1029/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1029/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1029/events", "html_url": "https://github.com/circus-tent/circus/issues/1029", "id": 214896790, "node_id": "MDU6SXNzdWUyMTQ4OTY3OTA=", "number": 1029, "title": "doubt: loglevel per watcher", "user": {"login": "paulocheque", "id": 94350, "node_id": "MDQ6VXNlcjk0MzUw", "avatar_url": "https://avatars1.githubusercontent.com/u/94350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulocheque", "html_url": "https://github.com/paulocheque", "followers_url": "https://api.github.com/users/paulocheque/followers", "following_url": "https://api.github.com/users/paulocheque/following{/other_user}", "gists_url": "https://api.github.com/users/paulocheque/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulocheque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulocheque/subscriptions", "organizations_url": "https://api.github.com/users/paulocheque/orgs", "repos_url": "https://api.github.com/users/paulocheque/repos", "events_url": "https://api.github.com/users/paulocheque/events{/privacy}", "received_events_url": "https://api.github.com/users/paulocheque/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-17T03:15:04Z", "updated_at": "2020-08-20T21:48:10Z", "closed_at": "2020-08-20T21:48:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to configure one `loglevel` **per watcher**. is that possible? I didn't find anything in docs or google.\r\n\r\nThanks in advance", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1026", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1026/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1026/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1026/events", "html_url": "https://github.com/circus-tent/circus/issues/1026", "id": 209748384, "node_id": "MDU6SXNzdWUyMDk3NDgzODQ=", "number": 1026, "title": "Error when starting circus", "user": {"login": "njordr", "id": 4282925, "node_id": "MDQ6VXNlcjQyODI5MjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/4282925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njordr", "html_url": "https://github.com/njordr", "followers_url": "https://api.github.com/users/njordr/followers", "following_url": "https://api.github.com/users/njordr/following{/other_user}", "gists_url": "https://api.github.com/users/njordr/gists{/gist_id}", "starred_url": "https://api.github.com/users/njordr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njordr/subscriptions", "organizations_url": "https://api.github.com/users/njordr/orgs", "repos_url": "https://api.github.com/users/njordr/repos", "events_url": "https://api.github.com/users/njordr/events{/privacy}", "received_events_url": "https://api.github.com/users/njordr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-23T12:30:28Z", "updated_at": "2017-02-23T14:02:59Z", "closed_at": "2017-02-23T14:02:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\n\r\nI follow the tutorial at this page: https://circus.readthedocs.io/en/latest/tutorial/step-by-step/\r\n\r\nWhen I start circus:\r\ncircusd etc/circus.ini\r\n\r\nI've got this exceptions:\r\n2017-02-23 13:25:45 [18854] [INFO] Using <class 'chaussette.backend._wsgiref.ChaussetteServer'> as a backend\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/circusweb/circushttpd.py\", line 25, in <module>\r\n    import tornadio2\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/tornadio2/__init__.py\", line 25, in <module>\r\n    from tornadio2.router import TornadioRouter\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/tornadio2/router.py\", line 27, in <module>\r\n    from tornadio2 import persistent, polling, sessioncontainer, session, proto, preflight, stats\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/tornadio2/persistent.py\", line 143\r\n    except Exception, ex:\r\n                    ^\r\nSyntaxError: invalid syntax\r\n2017-02-23 13:25:45 circus[18856] [INFO] Starting the stats streamer\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/circusweb/circushttpd.py\", line 25, in <module>\r\n    import tornadio2\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/tornadio2/__init__.py\", line 25, in <module>\r\n    from tornadio2.router import TornadioRouter\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/tornadio2/router.py\", line 27, in <module>\r\n    from tornadio2 import persistent, polling, sessioncontainer, session, proto, preflight, stats\r\n  File \"/opt/venv/circus/lib/python3.5/site-packages/tornadio2/persistent.py\", line 143\r\n    except Exception, ex:\r\n                    ^\r\nSyntaxError: invalid syntax\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1025", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1025/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1025/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1025/events", "html_url": "https://github.com/circus-tent/circus/issues/1025", "id": 203892682, "node_id": "MDU6SXNzdWUyMDM4OTI2ODI=", "number": 1025, "title": "ThreadedArbiter invokes Thread._stop() instead of Arbiter._stop()", "user": {"login": "prokher", "id": 399393, "node_id": "MDQ6VXNlcjM5OTM5Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/399393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prokher", "html_url": "https://github.com/prokher", "followers_url": "https://api.github.com/users/prokher/followers", "following_url": "https://api.github.com/users/prokher/following{/other_user}", "gists_url": "https://api.github.com/users/prokher/gists{/gist_id}", "starred_url": "https://api.github.com/users/prokher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prokher/subscriptions", "organizations_url": "https://api.github.com/users/prokher/orgs", "repos_url": "https://api.github.com/users/prokher/repos", "events_url": "https://api.github.com/users/prokher/events{/privacy}", "received_events_url": "https://api.github.com/users/prokher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391170305, "node_id": "MDU6TGFiZWwzOTExNzAzMDU=", "url": "https://api.github.com/repos/circus-tent/circus/labels/Waiting%20for%20a%20PR", "name": "Waiting for a PR", "color": "fbca04", "default": false, "description": null}, {"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-29T20:09:42Z", "updated_at": "2020-03-04T18:09:41Z", "closed_at": "2020-03-04T18:09:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "`ThreadedArbiter` class inherits from both `Thread` and `Arbiter`.\r\nWhen method `ThreadedArbiter.stop()` called it invokes `Arbiter.stop()` which in turn calls `self._stop(True)`. Unfortunately, with such inheritance scheme the latter is the method of `threading.Thread`. And process hangs forever on `self.join()` in `ThreadedArbiter.stop`. It looks like multiple inheritance from both `Arbiter` and `Thread` is not a good idea. Probably it is better to encapsulate the instance of `Thread` to avoid such name clashes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1021", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1021/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1021/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1021/events", "html_url": "https://github.com/circus-tent/circus/issues/1021", "id": 194547400, "node_id": "MDU6SXNzdWUxOTQ1NDc0MDA=", "number": 1021, "title": "Multiple `Circusd`s on the same machine", "user": {"login": "mindojo-victor", "id": 17159503, "node_id": "MDQ6VXNlcjE3MTU5NTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/17159503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mindojo-victor", "html_url": "https://github.com/mindojo-victor", "followers_url": "https://api.github.com/users/mindojo-victor/followers", "following_url": "https://api.github.com/users/mindojo-victor/following{/other_user}", "gists_url": "https://api.github.com/users/mindojo-victor/gists{/gist_id}", "starred_url": "https://api.github.com/users/mindojo-victor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mindojo-victor/subscriptions", "organizations_url": "https://api.github.com/users/mindojo-victor/orgs", "repos_url": "https://api.github.com/users/mindojo-victor/repos", "events_url": "https://api.github.com/users/mindojo-victor/events{/privacy}", "received_events_url": "https://api.github.com/users/mindojo-victor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-12-09T09:17:21Z", "updated_at": "2016-12-10T20:19:33Z", "closed_at": "2016-12-10T20:07:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "My `circus.ini`:\r\n```ini\r\n[circus]\r\nlogoutput = run/circus.log\r\npidfile = run/circus.pid\r\n# use sock files, not TCP ports -- to allow multiple `circusd`s on the same machine\r\nendpoint = ipc://run/circus.sock\r\npubsub_endpoint = ipc://run/circus-pubsub.sock\r\n\r\n...\r\n```\r\nThe application is running, but `circusctl` is not working\r\n```\r\n$ circusctl status\r\nTimed out.\r\nA time out usually happens in one of those cases:\r\n\r\n#1 The Circus daemon could not be reached.\r\n#2 The Circus daemon took too long to perform the operation\r\n\r\nFor #1, make sure you are hitting the right place\r\nby checking your --endpoint option.\r\n\r\nFor #2, if you are not expecting a result to\r\ncome back, increase your timeout option value\r\n(particularly with waiting switches)\r\n```\r\nor\r\n```\r\n$ circusctl --endpoint run/circus.sock status\r\nTraceback (most recent call last):\r\n  File \".../bin/circusctl\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \".../lib/python3.5/site-packages/circus/circusctl.py\", line 400, in main\r\n    ssh_keyfile=globalopts['ssh_keyfile'])\r\n  File \".../lib/python3.5/site-packages/circus/client.py\", line 97, in __init__\r\n    get_connection(self.socket, endpoint, ssh_server, ssh_keyfile)\r\n  File \".../lib/python3.5/site-packages/circus/util.py\", line 841, in get_connection\r\n    socket.connect(endpoint)\r\n  File \"zmq/backend/cython/socket.pyx\", line 528, in zmq.backend.cython.socket.Socket.connect (zmq/backend/cython/socket.c:5971)\r\n  File \"zmq/backend/cython/checkrc.pxd\", line 25, in zmq.backend.cython.checkrc._check_rc (zmq/backend/cython/socket.c:10014)\r\nzmq.error.ZMQError: Invalid argument\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1020", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1020/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1020/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1020/events", "html_url": "https://github.com/circus-tent/circus/issues/1020", "id": 193713372, "node_id": "MDU6SXNzdWUxOTM3MTMzNzI=", "number": 1020, "title": "`numprocesses` dependent on number of CPU cores", "user": {"login": "mindojo-victor", "id": 17159503, "node_id": "MDQ6VXNlcjE3MTU5NTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/17159503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mindojo-victor", "html_url": "https://github.com/mindojo-victor", "followers_url": "https://api.github.com/users/mindojo-victor/followers", "following_url": "https://api.github.com/users/mindojo-victor/following{/other_user}", "gists_url": "https://api.github.com/users/mindojo-victor/gists{/gist_id}", "starred_url": "https://api.github.com/users/mindojo-victor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mindojo-victor/subscriptions", "organizations_url": "https://api.github.com/users/mindojo-victor/orgs", "repos_url": "https://api.github.com/users/mindojo-victor/repos", "events_url": "https://api.github.com/users/mindojo-victor/events{/privacy}", "received_events_url": "https://api.github.com/users/mindojo-victor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-12-06T08:43:08Z", "updated_at": "2016-12-10T21:15:49Z", "closed_at": "2016-12-10T21:15:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have in my `circus.ini`:\r\n```ini\r\n[watcher:appp]\r\ncmd = ...\r\nnumprocesses = 4\r\n```\r\n\r\nHow can a make `numprocesses` equal to number of CPU cores or calculated?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1018", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1018/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1018/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1018/events", "html_url": "https://github.com/circus-tent/circus/issues/1018", "id": 192256040, "node_id": "MDU6SXNzdWUxOTIyNTYwNDA=", "number": 1018, "title": "circus stalls when endpoint is feeded with garbage", "user": {"login": "cgarciaarano", "id": 6098044, "node_id": "MDQ6VXNlcjYwOTgwNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/6098044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarciaarano", "html_url": "https://github.com/cgarciaarano", "followers_url": "https://api.github.com/users/cgarciaarano/followers", "following_url": "https://api.github.com/users/cgarciaarano/following{/other_user}", "gists_url": "https://api.github.com/users/cgarciaarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarciaarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarciaarano/subscriptions", "organizations_url": "https://api.github.com/users/cgarciaarano/orgs", "repos_url": "https://api.github.com/users/cgarciaarano/repos", "events_url": "https://api.github.com/users/cgarciaarano/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarciaarano/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-29T11:25:00Z", "updated_at": "2020-08-21T14:17:38Z", "closed_at": "2020-08-21T14:17:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We've just experienced issues in our circus processes that made the server to stall.\r\n\r\nAfter some investigation we've found that we have published the endpoint to the public network and we were receiving probes. It's obviously a bad idea to publish it, but the circus server shouldn't stall when a packet arrives to the endpoint.\r\n\r\nI'm posting a pull request to fix it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1017", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1017/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1017/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1017/events", "html_url": "https://github.com/circus-tent/circus/issues/1017", "id": 188939503, "node_id": "MDU6SXNzdWUxODg5Mzk1MDM=", "number": 1017, "title": "Travis incorrectly fails tests", "user": {"login": "pconerly", "id": 469808, "node_id": "MDQ6VXNlcjQ2OTgwOA==", "avatar_url": "https://avatars2.githubusercontent.com/u/469808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pconerly", "html_url": "https://github.com/pconerly", "followers_url": "https://api.github.com/users/pconerly/followers", "following_url": "https://api.github.com/users/pconerly/following{/other_user}", "gists_url": "https://api.github.com/users/pconerly/gists{/gist_id}", "starred_url": "https://api.github.com/users/pconerly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pconerly/subscriptions", "organizations_url": "https://api.github.com/users/pconerly/orgs", "repos_url": "https://api.github.com/users/pconerly/repos", "events_url": "https://api.github.com/users/pconerly/events{/privacy}", "received_events_url": "https://api.github.com/users/pconerly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-12T22:49:35Z", "updated_at": "2016-11-16T00:35:42Z", "closed_at": "2016-11-16T00:35:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "so, my last merged PR had all of it's test pass. But when Travis ran the tests for the merge, it got some errors:\r\n\r\nhttps://travis-ci.org/circus-tent/circus/jobs/174923488\r\n\r\nI'm also running into this issue in a new PR, that travis is not recognizing that tests have completed.\r\n\r\nI'm stumped, and I'm not sure how we could test how travis is listening to output and what the problem might be.\r\n\r\n@k4nar thoughts? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1014", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1014/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1014/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1014/events", "html_url": "https://github.com/circus-tent/circus/issues/1014", "id": 188352923, "node_id": "MDU6SXNzdWUxODgzNTI5MjM=", "number": 1014, "title": "Include and override order", "user": {"login": "mindojo-victor", "id": 17159503, "node_id": "MDQ6VXNlcjE3MTU5NTAz", "avatar_url": "https://avatars1.githubusercontent.com/u/17159503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mindojo-victor", "html_url": "https://github.com/mindojo-victor", "followers_url": "https://api.github.com/users/mindojo-victor/followers", "following_url": "https://api.github.com/users/mindojo-victor/following{/other_user}", "gists_url": "https://api.github.com/users/mindojo-victor/gists{/gist_id}", "starred_url": "https://api.github.com/users/mindojo-victor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mindojo-victor/subscriptions", "organizations_url": "https://api.github.com/users/mindojo-victor/orgs", "repos_url": "https://api.github.com/users/mindojo-victor/repos", "events_url": "https://api.github.com/users/mindojo-victor/events{/privacy}", "received_events_url": "https://api.github.com/users/mindojo-victor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-09T21:08:38Z", "updated_at": "2016-12-10T21:16:04Z", "closed_at": "2016-12-10T21:16:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I looking to switch to Circus from Supervisor. I want to have a kind of local settings for circus. Something like:\r\n```ini\r\n[circus]\r\ninclude = circus/app.ini\r\ninclude = circus/local.ini\r\n\r\ncircus/app.ini\r\n[watcher:app]\r\ncmd =  ...\r\nautostart = true\r\nnumprocesses = 4\r\n\r\ncircus/local.ini\r\n[watcher:app]\r\nautostart = false\r\nnumprocesses = 2\r\n```\r\n`circus/local.ini` would contain overridden settings. Several questions:\r\n1. What will happen if `circus/local.ini` is not present? Failure?\r\n2. If I will use `include = circus/*.ini` -- what is the order of inclusion? Sorted by file name? Is this guarantied?\r\n3. How can I ensure that `local.ini` is included last, so it's overridden values are applied? And will this work at all to define same section`[watcher:app]` with some changed settings?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1010", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1010/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1010/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1010/events", "html_url": "https://github.com/circus-tent/circus/issues/1010", "id": 181834033, "node_id": "MDU6SXNzdWUxODE4MzQwMzM=", "number": 1010, "title": "Reaping process on and on?", "user": {"login": "onekiloparsec", "id": 226224, "node_id": "MDQ6VXNlcjIyNjIyNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/226224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onekiloparsec", "html_url": "https://github.com/onekiloparsec", "followers_url": "https://api.github.com/users/onekiloparsec/followers", "following_url": "https://api.github.com/users/onekiloparsec/following{/other_user}", "gists_url": "https://api.github.com/users/onekiloparsec/gists{/gist_id}", "starred_url": "https://api.github.com/users/onekiloparsec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onekiloparsec/subscriptions", "organizations_url": "https://api.github.com/users/onekiloparsec/orgs", "repos_url": "https://api.github.com/users/onekiloparsec/repos", "events_url": "https://api.github.com/users/onekiloparsec/events{/privacy}", "received_events_url": "https://api.github.com/users/onekiloparsec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-10-08T16:09:17Z", "updated_at": "2017-05-08T09:33:59Z", "closed_at": "2016-10-10T11:51:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've struggled with this the whole day. I have two apps made with Django, same circus configuration. One is going fine, the other doesn't and I have no clue.\n\nWhen I run the command `circusd --log-level debug /home/git/conf/circus.ini`, I get\n\n```\n2016-10-08 18:00:30 circus[2125] [INFO] Starting master on pid 2125\n2016-10-08 18:00:30 circus[2125] [DEBUG] Initializing watchers\n2016-10-08 18:00:30 circus[2125] [DEBUG] cmd: gunicorn\n2016-10-08 18:00:30 circus[2125] [DEBUG] args: -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8001 app.wsgi\n2016-10-08 18:00:30 circus[2125] [DEBUG] process args: ['gunicorn', '-w', '3', '-t', '60', '--    pythonpath=.', '-b', '127.0.0.1:8001', 'app.wsgi']\n2016-10-08 18:00:30 circus[2125] [DEBUG] running avatars process [pid 2132]\n2016-10-08 18:00:30 circus[2125] [INFO] Arbiter now waiting for commands\n2016-10-08 18:00:30 circus[2125] [INFO] avatars started\n2016-10-08 18:00:30 circus[2125] [DEBUG] cmd: /usr/bin/python -c 'from circus import stats;     stats.main()' --endpoint tcp://127.0.0.1:5555 --pubsub tcp://127.0.0.1:5556 --statspoint tcp://127.0.0.1:5557\n2016-10-08 18:00:30 circus[2125] [DEBUG] args: None\n2016-10-08 18:00:30 circus[2125] [DEBUG] process args: ['/usr/bin/python', '-c', 'from circus import stats; stats.main()', '--endpoint', 'tcp://127.0.0.1:5555', '--pubsub', 'tcp://127.0.0.1:5556', '--statspoint', 'tcp://127.0.0.1:5557']\n2016-10-08 18:00:30 circus[2125] [DEBUG] running circusd-stats process [pid 2133]\n2016-10-08 18:00:30 circus[2125] [INFO] circusd-stats started\n2016-10-08 18:00:30 circus[2133] [INFO] Starting the stats streamer\n2016-10-08 18:00:30 circus[2125] [DEBUG] got message {\"command\":\"list\",\"properties\":{},\"id\":\"6bcfecd02cad460aa0c7b16d169a2406\"}\n2016-10-08 18:00:30 circus[2125] [DEBUG] got message {\"command\":\"list\",\"properties\":{\"name\":\"avatars\"},\"id\":\"2790b31cce7942aeb6376bbf867c4b53\"}\n2016-10-08 18:00:30 circus[2125] [DEBUG] here is the status of the processes []\n2016-10-08 18:00:30 circus[2125] [DEBUG] got message {\"command\":\"list\",\"properties\":{},\"id\":\"5cf16d4114024f648359d33b167b341f\"}\n2016-10-08 18:00:30 circus[2125] [DEBUG] got message {\"command\":\"dstats\",\"properties\":{},\"id\":\"bb34b81b3b904017b16488c97f4abfc5\"}\n2016-10-08 18:00:30 circus[2125] [DEBUG] got message {\"command\":\"listsockets\",\"properties\":{},\"id\":\"98ee9c4a83e945788d7a9bcce3331083\"}\n2016-10-08 18:00:35 circus[2125] [DEBUG] reaping process 2132 [avatars]\n2016-10-08 18:00:35 circus[2125] [DEBUG] cmd: gunicorn\n2016-10-08 18:00:35 circus[2125] [DEBUG] args: -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8001 app.wsgi\n2016-10-08 18:00:35 circus[2125] [DEBUG] process args: ['gunicorn', '-w', '3', '-t', '60', '--pythonpath=.', '-b', '127.0.0.1:8001', 'app.wsgi']\n2016-10-08 18:00:35 circus[2125] [DEBUG] running avatars process [pid 2138]\n2016-10-08 18:00:40 circus[2125] [DEBUG] reaping process 2138 [avatars]\n2016-10-08 18:00:40 circus[2125] [DEBUG] cmd: gunicorn\n2016-10-08 18:00:40 circus[2125] [DEBUG] args: -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8001 app.wsgi\n2016-10-08 18:00:40 circus[2125] [DEBUG] process args: ['gunicorn', '-w', '3', '-t', '60', '--pythonpath=.', '-b', '127.0.0.1:8001', 'app.wsgi']\n2016-10-08 18:00:40 circus[2125] [DEBUG] running avatars process [pid 2140]\n```\n\nand it says `reaping process` on and on with a new PID every time. When I run `ps -aux | grep gunicorn` every gunicorn process appears to be defunct. But when I start `gunicorn` manually, everything's fine!\n\nMy conf:\n\n```\n[circus]\ncheck_delay = 5\nendpoint = tcp://127.0.0.1:5555\npubsub_endpoint = tcp://127.0.0.1:5556\nstatsd = true\n\n[watcher:avatars]\nworking_dir = /var/www/html\ncmd = gunicorn\nargs = -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8001 app.wsgi\nuid = git\nnumprocesses = 1\nautostart = true\nsend_hup = true\nstdout_stream.class = FileStream\nstdout_stream.filename = /home/git/logs/gunicorn.stdout.log\nstdout_stream.max_bytes = 10485760\nstdout_stream.backup_count = 4\nstderr_stream.class = FileStream\nstderr_stream.filename = /home/git/logs/gunicorn.stderr.log\nstderr_stream.max_bytes = 10485760\nstderr_stream.backup_count = 4\n\n[env:avatars]\nPATH = /home/git/.virtualenvs/avatars/bin:$PATH\nTERM=rxvt-256color\nSHELL=/bin/bash\nUSER=git\nLANG=en_US.UTF-8\nHOME=/home/git\nPYTHONPATH=/home/git/.virtualenvs/avatars/lib/python3.4/site-packages\n```\n\nAny idea? Help or hint would be greatly appreciated! Thanks in advance.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1009", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1009/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1009/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1009/events", "html_url": "https://github.com/circus-tent/circus/issues/1009", "id": 177764493, "node_id": "MDU6SXNzdWUxNzc3NjQ0OTM=", "number": 1009, "title": "Running as unix socket leads throws errors", "user": {"login": "ambasta", "id": 54081, "node_id": "MDQ6VXNlcjU0MDgx", "avatar_url": "https://avatars2.githubusercontent.com/u/54081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ambasta", "html_url": "https://github.com/ambasta", "followers_url": "https://api.github.com/users/ambasta/followers", "following_url": "https://api.github.com/users/ambasta/following{/other_user}", "gists_url": "https://api.github.com/users/ambasta/gists{/gist_id}", "starred_url": "https://api.github.com/users/ambasta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ambasta/subscriptions", "organizations_url": "https://api.github.com/users/ambasta/orgs", "repos_url": "https://api.github.com/users/ambasta/repos", "events_url": "https://api.github.com/users/ambasta/events{/privacy}", "received_events_url": "https://api.github.com/users/ambasta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-09-19T11:49:09Z", "updated_at": "2016-09-22T16:05:26Z", "closed_at": "2016-09-22T16:05:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nThis is my current circus.ini file\n\n```\n[circus]\ncheck_delay = 5\nendpoint = tcp://127.0.0.1:5555\npubsub_endpoint = tcp://127.0.0.1:5556\nstats_endpoint = tcp://127.0.0.1:5557\n\n[watcher:express-watcher]\ncmd = chaussette --fd $(circus.sockets.express) --backend bjoern wsgi:application\nworking_dir = /home/admin/express\nnumprocesses = 5\nuse_sockets = True\ncopy_env = True\nstdout_stream.class = StdoutStream\nstderr_stream.class = StdoutStream\n\n[socket:expresss]\npath = /tmp/bjoern.sock\nfamily = AF_UNIX\n\n```\n\nHowever, on running this via circusd circus.ini I get\n\n```\n2016-09-19 11:47:07 circus[14544] [INFO] Starting master on pid 14544\n2016-09-19 11:47:07 circus[14544] [INFO] sockets started\n2016-09-19 11:47:07 circus[14544] [INFO] Arbiter now waiting for commands\n2016-09-19 11:47:07 circus[14544] [INFO] express-watcher started\n2016-09-19 11:47:07 circus[14544] [INFO] circusd-stats started\n2016-09-19 11:47:07 circus[14554] [INFO] Starting the stats streamer\nusage: chaussette [-h] [--port PORT]\n                  [--address-family {AF_INET,AF_INET6,AF_UNIX}]\n                  [--socket-type {SOCK_DGRAM,SOCK_RAW,SOCK_RDM,SOCK_SEQPACKET,SOCK_STREAM}]\n                  [--host HOST | --fd FD | --backlog BACKLOG]\n                  [--backend {bjoern,tornado,wsgiref}] [--use-reloader]\n                  [--spawn SPAWN] [--graceful-timeout GRACEFUL_TIMEOUT]\n                  [--pre-hook PRE_HOOK] [--post-hook POST_HOOK]\n                  [--python-path PYTHON_PATH]\n                  [--log-level {CRITICAL,DEBUG,ERROR,INFO,WARNING,critical,debug,error,info,warning}]\n                  [--log-output LOGOUTPUT]\n                  [application] [arguments [arguments ...]]\nchaussette: error: argument --fd: invalid int value: '$(circus.sockets.express)'\nusage: chaussette [-h] [--port PORT]\n                  [--address-family {AF_INET,AF_INET6,AF_UNIX}]\n                  [--socket-type {SOCK_DGRAM,SOCK_RAW,SOCK_RDM,SOCK_SEQPACKET,SOCK_STREAM}]\n                  [--host HOST | --fd FD | --backlog BACKLOG]\n                  [--backend {bjoern,tornado,wsgiref}] [--use-reloader]\n                  [--spawn SPAWN] [--graceful-timeout GRACEFUL_TIMEOUT]\n                  [--pre-hook PRE_HOOK] [--post-hook POST_HOOK]\n                  [--python-path PYTHON_PATH]\n                  [--log-level {CRITICAL,DEBUG,ERROR,INFO,WARNING,critical,debug,error,info,warning}]\n                  [--log-output LOGOUTPUT]\n                  [application] [arguments [arguments ...]]\nchaussette: error: argument --fd: invalid int value: '$(circus.sockets.express)'\nusage: chaussette [-h] [--port PORT]\n                  [--address-family {AF_INET,AF_INET6,AF_UNIX}]\n                  [--socket-type {SOCK_DGRAM,SOCK_RAW,SOCK_RDM,SOCK_SEQPACKET,SOCK_STREAM}]\n                  [--host HOST | --fd FD | --backlog BACKLOG]\n                  [--backend {bjoern,tornado,wsgiref}] [--use-reloader]\n                  [--spawn SPAWN] [--graceful-timeout GRACEFUL_TIMEOUT]\n                  [--pre-hook PRE_HOOK] [--post-hook POST_HOOK]\n                  [--python-path PYTHON_PATH]\n                  [--log-level {CRITICAL,DEBUG,ERROR,INFO,WARNING,critical,debug,error,info,warning}]\n                  [--log-output LOGOUTPUT]\n                  [application] [arguments [arguments ...]]\nchaussette: error: argument --fd: invalid int value: '$(circus.sockets.express)'\nusage: chaussette [-h] [--port PORT]\n                  [--address-family {AF_INET,AF_INET6,AF_UNIX}]\n                  [--socket-type {SOCK_DGRAM,SOCK_RAW,SOCK_RDM,SOCK_SEQPACKET,SOCK_STREAM}]\n                  [--host HOST | --fd FD | --backlog BACKLOG]\n                  [--backend {bjoern,tornado,wsgiref}] [--use-reloader]\n                  [--spawn SPAWN] [--graceful-timeout GRACEFUL_TIMEOUT]\n                  [--pre-hook PRE_HOOK] [--post-hook POST_HOOK]\n                  [--python-path PYTHON_PATH]\n                  [--log-level {CRITICAL,DEBUG,ERROR,INFO,WARNING,critical,debug,error,info,warning}]\n                  [--log-output LOGOUTPUT]\n                  [application] [arguments [arguments ...]]\nchaussette: error: argument --fd: invalid int value: '$(circus.sockets.express)'\nusage: chaussette [-h] [--port PORT]\n                  [--address-family {AF_INET,AF_INET6,AF_UNIX}]\n                  [--socket-type {SOCK_DGRAM,SOCK_RAW,SOCK_RDM,SOCK_SEQPACKET,SOCK_STREAM}]\n                  [--host HOST | --fd FD | --backlog BACKLOG]\n                  [--backend {bjoern,tornado,wsgiref}] [--use-reloader]\n                  [--spawn SPAWN] [--graceful-timeout GRACEFUL_TIMEOUT]\n                  [--pre-hook PRE_HOOK] [--post-hook POST_HOOK]\n                  [--python-path PYTHON_PATH]\n                  [--log-level {CRITICAL,DEBUG,ERROR,INFO,WARNING,critical,debug,error,info,warning}]\n                  [--log-output LOGOUTPUT]\n                  [application] [arguments [arguments ...]]\n\n```\n\nHow do I resolve this?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/1001", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/1001/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/1001/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/1001/events", "html_url": "https://github.com/circus-tent/circus/issues/1001", "id": 173287376, "node_id": "MDU6SXNzdWUxNzMyODczNzY=", "number": 1001, "title": "circusctl returns zero exit code when command fails with ConflictError", "user": {"login": "sergiimk", "id": 204914, "node_id": "MDQ6VXNlcjIwNDkxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/204914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sergiimk", "html_url": "https://github.com/sergiimk", "followers_url": "https://api.github.com/users/sergiimk/followers", "following_url": "https://api.github.com/users/sergiimk/following{/other_user}", "gists_url": "https://api.github.com/users/sergiimk/gists{/gist_id}", "starred_url": "https://api.github.com/users/sergiimk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sergiimk/subscriptions", "organizations_url": "https://api.github.com/users/sergiimk/orgs", "repos_url": "https://api.github.com/users/sergiimk/repos", "events_url": "https://api.github.com/users/sergiimk/events{/privacy}", "received_events_url": "https://api.github.com/users/sergiimk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-25T19:21:02Z", "updated_at": "2018-06-15T15:18:04Z", "closed_at": "2018-06-15T15:18:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Scenario:\n- configure two watchers A and B with `numprocesses = 10` and `warmup_delay = 1`\n- run `circusctl reload A --sequential`\n- run `circusctl reload B --sequential`\n\nExpected: Since circus does not support command queueing (something I want to address next) the second command will conflict with first one (`@synchronized`), so circusctl should exit with error.\n\nActual: circusctl prints out the conflict error message, but exit code is zero. This causes a lot of issues when Circus is used with deployment automation tools such as Puppet, because it will assume that reload command executed successfully, so you will end up with an inconsistent state.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/998", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/998/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/998/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/998/events", "html_url": "https://github.com/circus-tent/circus/issues/998", "id": 173275414, "node_id": "MDU6SXNzdWUxNzMyNzU0MTQ=", "number": 998, "title": "Circus shuts down prematurely, leaking some processes", "user": {"login": "sergiimk", "id": 204914, "node_id": "MDQ6VXNlcjIwNDkxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/204914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sergiimk", "html_url": "https://github.com/sergiimk", "followers_url": "https://api.github.com/users/sergiimk/followers", "following_url": "https://api.github.com/users/sergiimk/following{/other_user}", "gists_url": "https://api.github.com/users/sergiimk/gists{/gist_id}", "starred_url": "https://api.github.com/users/sergiimk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sergiimk/subscriptions", "organizations_url": "https://api.github.com/users/sergiimk/orgs", "repos_url": "https://api.github.com/users/sergiimk/repos", "events_url": "https://api.github.com/users/sergiimk/events{/privacy}", "received_events_url": "https://api.github.com/users/sergiimk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-25T18:23:54Z", "updated_at": "2017-06-24T10:17:49Z", "closed_at": "2017-06-24T10:17:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "When sending `SIGTERM` to Circus that manages hundreds of processes we observed that it frequently leaves a lot of its children running.\n\nAlready traced down the root cause of this problem, PR coming soon.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/997", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/997/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/997/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/997/events", "html_url": "https://github.com/circus-tent/circus/issues/997", "id": 173274808, "node_id": "MDU6SXNzdWUxNzMyNzQ4MDg=", "number": 997, "title": "Increasing numprocesses often causes some processes being killed", "user": {"login": "sergiimk", "id": 204914, "node_id": "MDQ6VXNlcjIwNDkxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/204914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sergiimk", "html_url": "https://github.com/sergiimk", "followers_url": "https://api.github.com/users/sergiimk/followers", "following_url": "https://api.github.com/users/sergiimk/following{/other_user}", "gists_url": "https://api.github.com/users/sergiimk/gists{/gist_id}", "starred_url": "https://api.github.com/users/sergiimk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sergiimk/subscriptions", "organizations_url": "https://api.github.com/users/sergiimk/orgs", "repos_url": "https://api.github.com/users/sergiimk/repos", "events_url": "https://api.github.com/users/sergiimk/events{/privacy}", "received_events_url": "https://api.github.com/users/sergiimk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-25T18:20:52Z", "updated_at": "2017-06-24T10:17:11Z", "closed_at": "2017-06-24T10:17:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Scenario:\n- configure a watcher with `numprocesses = 1` and `warmup_delay = 1`\n- start circus\n- change `numprocesses = 5`\n- send `circusctl reloadconfig` command\n\nExpected: circus spawns 4 more processes\n\nActual: 7 more processes spawned, 3 processes killed (sometimes varies)\n\nAlready traced down the root cause of this problem, PR coming soon.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/993", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/993/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/993/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/993/events", "html_url": "https://github.com/circus-tent/circus/issues/993", "id": 170814028, "node_id": "MDU6SXNzdWUxNzA4MTQwMjg=", "number": 993, "title": "run curcis with curcis.ini error tornadio2", "user": {"login": "thanhngvpt", "id": 19367683, "node_id": "MDQ6VXNlcjE5MzY3Njgz", "avatar_url": "https://avatars1.githubusercontent.com/u/19367683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thanhngvpt", "html_url": "https://github.com/thanhngvpt", "followers_url": "https://api.github.com/users/thanhngvpt/followers", "following_url": "https://api.github.com/users/thanhngvpt/following{/other_user}", "gists_url": "https://api.github.com/users/thanhngvpt/gists{/gist_id}", "starred_url": "https://api.github.com/users/thanhngvpt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thanhngvpt/subscriptions", "organizations_url": "https://api.github.com/users/thanhngvpt/orgs", "repos_url": "https://api.github.com/users/thanhngvpt/repos", "events_url": "https://api.github.com/users/thanhngvpt/events{/privacy}", "received_events_url": "https://api.github.com/users/thanhngvpt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-08-12T07:28:35Z", "updated_at": "2016-08-12T09:46:22Z", "closed_at": "2016-08-12T09:46:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Author.\nWhen i run circusd curcis.ini (from here http://circus.readthedocs.io/en/latest/tutorial/step-by-step/#examples) alway occur error \n\nhttps://dpaste.de/qrim\n\nPlease help me how to resolve\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/992", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/992/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/992/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/992/events", "html_url": "https://github.com/circus-tent/circus/issues/992", "id": 167297980, "node_id": "MDU6SXNzdWUxNjcyOTc5ODA=", "number": 992, "title": "circus changes automatically to stop/waiting after starting", "user": {"login": "nidhinpd", "id": 5405552, "node_id": "MDQ6VXNlcjU0MDU1NTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/5405552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nidhinpd", "html_url": "https://github.com/nidhinpd", "followers_url": "https://api.github.com/users/nidhinpd/followers", "following_url": "https://api.github.com/users/nidhinpd/following{/other_user}", "gists_url": "https://api.github.com/users/nidhinpd/gists{/gist_id}", "starred_url": "https://api.github.com/users/nidhinpd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nidhinpd/subscriptions", "organizations_url": "https://api.github.com/users/nidhinpd/orgs", "repos_url": "https://api.github.com/users/nidhinpd/repos", "events_url": "https://api.github.com/users/nidhinpd/events{/privacy}", "received_events_url": "https://api.github.com/users/nidhinpd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-25T07:16:58Z", "updated_at": "2016-07-25T10:58:03Z", "closed_at": "2016-07-25T10:58:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "So when i tried to use circusctl reloadconfig after updating circus.ini i found out that it shows timeout error. Then i checked the status of circus and i noticed that it stop after some seconds it started.\n\n(taiga)taiga@ex-server:~/taiga-back$ sudo service circus start\ncircus start/running, process 4640\n(taiga)taiga@ex-server:~/taiga-back$ sudo service circus status\ncircus start/running, process 4705\n(taiga)taiga@ex-server:~/taiga-back$ sudo service circus status  \ncircus stop/waiting\nWhat could be the reason?\nCircus version 0.13.0\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/991", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/991/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/991/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/991/events", "html_url": "https://github.com/circus-tent/circus/issues/991", "id": 166166952, "node_id": "MDU6SXNzdWUxNjYxNjY5NTI=", "number": 991, "title": "0.14.0 release?", "user": {"login": "billygout", "id": 1704210, "node_id": "MDQ6VXNlcjE3MDQyMTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1704210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billygout", "html_url": "https://github.com/billygout", "followers_url": "https://api.github.com/users/billygout/followers", "following_url": "https://api.github.com/users/billygout/following{/other_user}", "gists_url": "https://api.github.com/users/billygout/gists{/gist_id}", "starred_url": "https://api.github.com/users/billygout/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billygout/subscriptions", "organizations_url": "https://api.github.com/users/billygout/orgs", "repos_url": "https://api.github.com/users/billygout/repos", "events_url": "https://api.github.com/users/billygout/events{/privacy}", "received_events_url": "https://api.github.com/users/billygout/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-07-18T18:58:29Z", "updated_at": "2016-08-12T14:10:52Z", "closed_at": "2016-08-12T14:10:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi @k4nar, I'd like to know whether you have plans to make a 0.14.0 release. Thanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/976", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/976/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/976/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/976/events", "html_url": "https://github.com/circus-tent/circus/issues/976", "id": 151182209, "node_id": "MDU6SXNzdWUxNTExODIyMDk=", "number": 976, "title": "circusctl times out a lot on OsX", "user": {"login": "davidbirdsong", "id": 407603, "node_id": "MDQ6VXNlcjQwNzYwMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/407603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidbirdsong", "html_url": "https://github.com/davidbirdsong", "followers_url": "https://api.github.com/users/davidbirdsong/followers", "following_url": "https://api.github.com/users/davidbirdsong/following{/other_user}", "gists_url": "https://api.github.com/users/davidbirdsong/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidbirdsong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidbirdsong/subscriptions", "organizations_url": "https://api.github.com/users/davidbirdsong/orgs", "repos_url": "https://api.github.com/users/davidbirdsong/repos", "events_url": "https://api.github.com/users/davidbirdsong/events{/privacy}", "received_events_url": "https://api.github.com/users/davidbirdsong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}, {"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-26T16:38:24Z", "updated_at": "2016-06-11T18:38:43Z", "closed_at": "2016-06-11T18:38:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I run into this a lot. It appears as if the process isn't getting notified of reads pending on the socket.\n\nI check w/ lsof and circus is still listening on the unix sockets:\n\n```\nPython  346 imgix   12u    unix 0x6ca3c45a14570131       0t0          ->0x6ca3c45a1456fc81\nPython  346 imgix   13w     REG                1,3     66920  1456706 /data/log/painter/circusd.log\nPython  346 imgix   14u    unix 0x6ca3c45a1456fa29       0t0          ->0x6ca3c45a14037709\nPython  346 imgix   15u    unix 0x6ca3c45a14037709       0t0          ->0x6ca3c45a1456fa29\nPython  346 imgix   16u  KQUEUE                                       count=0, state=0x2\nPython  346 imgix   17u    unix 0x6ca3c45a1456f7d1       0t0          ->0x6ca3c45a1456f709\nPython  346 imgix   18u    unix 0x6ca3c45a1456f709       0t0          ->0x6ca3c45a1456f7d1\nPython  346 imgix   19u  KQUEUE                                       count=0, state=0x2\nPython  346 imgix   20u    unix 0x6ca3c45a1456ffa1       0t0          ->0x6ca3c45a1456fed9\nPython  346 imgix   21u    unix 0x6ca3c45a1456fed9       0t0          ->0x6ca3c45a1456ffa1\nPython  346 imgix   22u    unix 0x6ca3c45a14037bb9       0t0          /data/appdata/painter/.circus.pubsubendpoint.sock\nPython  346 imgix   23u    unix 0x6ca3c45a1456faf1       0t0          ->0x6ca3c45a1456f641\nPython  346 imgix   24u    unix 0x6ca3c45a1456f641       0t0          ->0x6ca3c45a1456faf1\nPython  346 imgix   25u    unix 0x6ca3c45a1456f579       0t0          /data/appdata/painter/.circus.endpoint.sock\nPython  346 imgix   26u    IPv4 0x6ca3c45a1570d691       0t0      UDP *:12027\nPython  346 imgix   27     PIPE 0x6ca3c45a11e7a501     16384          ->0x6ca3c45a11e7a451\nPython  346 imgix   28     PIPE 0x6ca3c45a11e77851     16384          ->0x6ca3c45a40375821\nPython  346 imgix   29     PIPE 0x6ca3c45a11e7a3a1     16384          ->0x6ca3c45a11e7a2f1\nPython  346 imgix   30     PIPE 0x6ca3c45a40376111     16384          ->0x6ca3c45a268355e1\nPython  346 imgix   31     PIPE 0x6ca3c45a403749b1     16384          ->0x6ca3c45a26835061\nPython  346 imgix   33     PIPE 0x6ca3c45a403754b1     16384          ->0x6ca3c45a4039a501\nPython  346 imgix   34u    unix 0x6ca3c45a15b2fdb1       0t0          /data/appdata/painter/.circus.endpoint.sock\nPython  346 imgix   35     PIPE 0x6ca3c45a26835111     16384          ->0x6ca3c45a40374f31\nPython  346 imgix   36u    unix 0x6ca3c45a15b2fa91       0t0          /data/appdata/painter/.circus.pubsubendpoint.sock\nPython  346 imgix   37u    unix 0x6ca3c45a15b2f451       0t0          /data/appdata/painter/.circus.endpoint.sock\nPython  346 imgix   38u    unix 0x6ca3c45a15b2f131       0t0          /data/appdata/painter/.circus.pubsubendpoint.sock\nPython  346 imgix   39     PIPE 0x6ca3c45a26834da1     16384          ->0x6ca3c45a26833641\n```\n\nRunning truss shows it reading the stdout of a few processes that are running. I'm not great at reading truss, but it doesn't appear to react to me running circusctl at all.\n\nI've run w/ `--timeout=60` to no avail.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/975", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/975/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/975/events", "html_url": "https://github.com/circus-tent/circus/issues/975", "id": 150970659, "node_id": "MDU6SXNzdWUxNTA5NzA2NTk=", "number": 975, "title": "Cannot place listening socket at fd=0 (fastcgi support)", "user": {"login": "billygout", "id": 1704210, "node_id": "MDQ6VXNlcjE3MDQyMTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1704210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billygout", "html_url": "https://github.com/billygout", "followers_url": "https://api.github.com/users/billygout/followers", "following_url": "https://api.github.com/users/billygout/following{/other_user}", "gists_url": "https://api.github.com/users/billygout/gists{/gist_id}", "starred_url": "https://api.github.com/users/billygout/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billygout/subscriptions", "organizations_url": "https://api.github.com/users/billygout/orgs", "repos_url": "https://api.github.com/users/billygout/repos", "events_url": "https://api.github.com/users/billygout/events{/privacy}", "received_events_url": "https://api.github.com/users/billygout/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391092812, "node_id": "MDU6TGFiZWwzOTEwOTI4MTI=", "url": "https://api.github.com/repos/circus-tent/circus/labels/In%20progress", "name": "In progress", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-04-25T20:22:33Z", "updated_at": "2016-07-06T14:42:12Z", "closed_at": "2016-07-06T14:42:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "The fastcgi protocol appears to require a single listening socket passed to the application and that this socket is positioned at file descriptor 0. (https://github.com/toshic/libfcgi/blob/master/doc/fcgi-spec.html#L227-L231). One way to specify this would be to create a new configurable property `stdin_socket` for a `watcher`, which provides the name of a socket which should be placed at at fd 0, while creating the `watcher`'s child processes. For example:\n\n```\n[watcher:example-watcher]\ncmd = fcgi-binary-application-expecting-fd-0\nuse_sockets = True\nwarmup_delay = 0\nnumprocesses = 5\nstdin_socket=fastcgi\n\n[socket:fastcgi]\nhost = 0.0.0.0\nport = 8000\nblocking = true\n```\n\nIn the example, `stdin_socket=fastcgi` references the socket named in the section `[socket:fastcgi]`, and tells circus that it should `dup2()` the socket to fd 0, during fork.  \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/972", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/972/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/972/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/972/events", "html_url": "https://github.com/circus-tent/circus/issues/972", "id": 147037781, "node_id": "MDU6SXNzdWUxNDcwMzc3ODE=", "number": 972, "title": "NOT AN ISSUE: But a BIG THANK YOU!", "user": {"login": "aventurella", "id": 75315, "node_id": "MDQ6VXNlcjc1MzE1", "avatar_url": "https://avatars3.githubusercontent.com/u/75315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aventurella", "html_url": "https://github.com/aventurella", "followers_url": "https://api.github.com/users/aventurella/followers", "following_url": "https://api.github.com/users/aventurella/following{/other_user}", "gists_url": "https://api.github.com/users/aventurella/gists{/gist_id}", "starred_url": "https://api.github.com/users/aventurella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aventurella/subscriptions", "organizations_url": "https://api.github.com/users/aventurella/orgs", "repos_url": "https://api.github.com/users/aventurella/repos", "events_url": "https://api.github.com/users/aventurella/events{/privacy}", "received_events_url": "https://api.github.com/users/aventurella/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-08T20:56:04Z", "updated_at": "2016-06-11T14:50:47Z", "closed_at": "2016-06-11T14:50:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, I just wanted to say thank you to everyone who has worked on this project. I ran into an issue with something else and then I recalled that Circus is developer friendly to be included inside other applications and lo! happiness.\n\nAnyway, I looked on IRC but it's dead in that channel, I just wanted to give a big thanks to everyone who worked on this. \n\nI don't think people say thank you enough in OSS.\n\nAnyway, thanks again to all who contributed, you made my day easier! \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/966", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/966/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/966/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/966/events", "html_url": "https://github.com/circus-tent/circus/issues/966", "id": 140161535, "node_id": "MDU6SXNzdWUxNDAxNjE1MzU=", "number": 966, "title": "Using Circus to run tests", "user": {"login": "prokher", "id": 399393, "node_id": "MDQ6VXNlcjM5OTM5Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/399393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prokher", "html_url": "https://github.com/prokher", "followers_url": "https://api.github.com/users/prokher/followers", "following_url": "https://api.github.com/users/prokher/following{/other_user}", "gists_url": "https://api.github.com/users/prokher/gists{/gist_id}", "starred_url": "https://api.github.com/users/prokher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prokher/subscriptions", "organizations_url": "https://api.github.com/users/prokher/orgs", "repos_url": "https://api.github.com/users/prokher/repos", "events_url": "https://api.github.com/users/prokher/events{/privacy}", "received_events_url": "https://api.github.com/users/prokher/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-03-11T11:32:26Z", "updated_at": "2016-06-11T14:57:46Z", "closed_at": "2016-06-11T14:57:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear maintainers,\n\nI am using Circus to run my Django web application and required services, namely Celery and Redis. For e2e tests I also need to run these services. I thought, that I can use Circus to run such tests? It already starts all the services my app needs. So I wrote separate config \"test.ini\" which runs `python manage.py test` instead of regular `python manage.py runserver`. I also used `respawn = False` to avoid restarting of tests. Unfortunately Circus continues running even when tests finish. I understand why - Circus designed to watch and restart processes. So my question is the following. Is there a possibility to stop Circus when one selected watched process ends? It could be very useful for testing purposes I suppose.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/964", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/964/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/964/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/964/events", "html_url": "https://github.com/circus-tent/circus/issues/964", "id": 138619225, "node_id": "MDU6SXNzdWUxMzg2MTkyMjU=", "number": 964, "title": "Unittests hanging with get_arbiter", "user": {"login": "badisa", "id": 5840832, "node_id": "MDQ6VXNlcjU4NDA4MzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5840832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badisa", "html_url": "https://github.com/badisa", "followers_url": "https://api.github.com/users/badisa/followers", "following_url": "https://api.github.com/users/badisa/following{/other_user}", "gists_url": "https://api.github.com/users/badisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/badisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badisa/subscriptions", "organizations_url": "https://api.github.com/users/badisa/orgs", "repos_url": "https://api.github.com/users/badisa/repos", "events_url": "https://api.github.com/users/badisa/events{/privacy}", "received_events_url": "https://api.github.com/users/badisa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-03-04T23:43:53Z", "updated_at": "2016-06-11T15:00:21Z", "closed_at": "2016-06-11T15:00:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to use Circus to start up server and client processes for unit testing, but while it works in python 2.7, when using 3.4 it hangs at the end of the tests. I am using Pytest as my test runner, but even using the unittest module it hangs. Used [this](https://circus.readthedocs.org/en/latest/for-devs/#using-circus-as-a-library) as documentation to do this.\n\n```\narbiter = get_arbiter([], debug=True, background=True)\n\n\ndef setUpModule():\n    arbiter.add_watcher(\n        \"TestServer\",\n        \"python server_script.py\",\n        copy_env=True,\n        respawn=False\n    )\n    arbiter.start()\n\n\ndef tearDownModule():\n    watcher = arbiter.get_watcher(\"TestServer\")\n    watcher.kill_processes()\n    watcher.stop()\n    arbiter.stop()\n```\n\nUnsure if I am using Circus correctly here as I am having to add a watcher to the arbiter to make sure the environment variables get copied. \n\nWhen I did a trace of where it was hanging it looks like it was caused by `controller.py` which repeatedly tried to call `self.loop.add_future()`. It appears to run all of my `tearDownModule()` function besides the `arbiter.stop()`\n\n```\ncontroller.py(101):             self.loop.add_future(self._managing_watchers_future,\ncontroller.py(102):                                  self._manage_watchers_cb)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/961", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/961/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/961/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/961/events", "html_url": "https://github.com/circus-tent/circus/issues/961", "id": 132518086, "node_id": "MDU6SXNzdWUxMzI1MTgwODY=", "number": 961, "title": "How to format Watcher's workers log messages", "user": {"login": "ayashjorden", "id": 4204371, "node_id": "MDQ6VXNlcjQyMDQzNzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/4204371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayashjorden", "html_url": "https://github.com/ayashjorden", "followers_url": "https://api.github.com/users/ayashjorden/followers", "following_url": "https://api.github.com/users/ayashjorden/following{/other_user}", "gists_url": "https://api.github.com/users/ayashjorden/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayashjorden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayashjorden/subscriptions", "organizations_url": "https://api.github.com/users/ayashjorden/orgs", "repos_url": "https://api.github.com/users/ayashjorden/repos", "events_url": "https://api.github.com/users/ayashjorden/events{/privacy}", "received_events_url": "https://api.github.com/users/ayashjorden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-02-09T19:58:57Z", "updated_at": "2016-06-11T19:46:44Z", "closed_at": "2016-06-11T19:46:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\nIf a Watcher runs multiple workers, funnelling their logs to the same file(s), how can I format the log messages to contain at least PID and timestamp?\n\nThank you,\nYarden\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/958", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/958/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/958/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/958/events", "html_url": "https://github.com/circus-tent/circus/issues/958", "id": 129479958, "node_id": "MDU6SXNzdWUxMjk0Nzk5NTg=", "number": 958, "title": "How can i use circus with nodejs", "user": {"login": "Alwerdani", "id": 7599207, "node_id": "MDQ6VXNlcjc1OTkyMDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7599207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alwerdani", "html_url": "https://github.com/Alwerdani", "followers_url": "https://api.github.com/users/Alwerdani/followers", "following_url": "https://api.github.com/users/Alwerdani/following{/other_user}", "gists_url": "https://api.github.com/users/Alwerdani/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alwerdani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alwerdani/subscriptions", "organizations_url": "https://api.github.com/users/Alwerdani/orgs", "repos_url": "https://api.github.com/users/Alwerdani/repos", "events_url": "https://api.github.com/users/Alwerdani/events{/privacy}", "received_events_url": "https://api.github.com/users/Alwerdani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-01-28T15:13:22Z", "updated_at": "2016-06-11T18:55:36Z", "closed_at": "2016-06-11T18:55:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\ncurrently, I am using circus Django project beside nodejs simple app to add some functionality to the django project.\n so, is there any way to manage the two project in the same circus.ini file?   \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/954", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/954/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/954/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/954/events", "html_url": "https://github.com/circus-tent/circus/issues/954", "id": 128968651, "node_id": "MDU6SXNzdWUxMjg5Njg2NTE=", "number": 954, "title": "PyPI Release?", "user": {"login": "mrasband", "id": 2184696, "node_id": "MDQ6VXNlcjIxODQ2OTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2184696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrasband", "html_url": "https://github.com/mrasband", "followers_url": "https://api.github.com/users/mrasband/followers", "following_url": "https://api.github.com/users/mrasband/following{/other_user}", "gists_url": "https://api.github.com/users/mrasband/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrasband/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrasband/subscriptions", "organizations_url": "https://api.github.com/users/mrasband/orgs", "repos_url": "https://api.github.com/users/mrasband/repos", "events_url": "https://api.github.com/users/mrasband/events{/privacy}", "received_events_url": "https://api.github.com/users/mrasband/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-01-26T22:50:06Z", "updated_at": "2016-01-27T14:50:54Z", "closed_at": "2016-01-27T14:05:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "With some of the known issues with python 3.5 compatibility being fixed (namely #939), it would be fantastic if you could cut a new release and publish it to PyPI.  Python 3.5 was released in Sept and the latest circus release is from August.  Thanks!\n\nFor now we are able to use the current commit in edit mode to ensure freeze can get it:\n\n`pip install -e git+https://github.com/circus-tent/circus.git@9b8a1a5cb641a7b910fec2c7a4fb0f637538841a#egg=circus-master`\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/951", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/951/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/951/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/951/events", "html_url": "https://github.com/circus-tent/circus/issues/951", "id": 123491874, "node_id": "MDU6SXNzdWUxMjM0OTE4NzQ=", "number": 951, "title": "Flapping plugin max_retry TypeError", "user": {"login": "mind1m", "id": 979771, "node_id": "MDQ6VXNlcjk3OTc3MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/979771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mind1m", "html_url": "https://github.com/mind1m", "followers_url": "https://api.github.com/users/mind1m/followers", "following_url": "https://api.github.com/users/mind1m/following{/other_user}", "gists_url": "https://api.github.com/users/mind1m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mind1m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mind1m/subscriptions", "organizations_url": "https://api.github.com/users/mind1m/orgs", "repos_url": "https://api.github.com/users/mind1m/repos", "events_url": "https://api.github.com/users/mind1m/events{/privacy}", "received_events_url": "https://api.github.com/users/mind1m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391170305, "node_id": "MDU6TGFiZWwzOTExNzAzMDU=", "url": "https://api.github.com/repos/circus-tent/circus/labels/Waiting%20for%20a%20PR", "name": "Waiting for a PR", "color": "fbca04", "default": false, "description": null}, {"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}, {"id": 2609416, "node_id": "MDU6TGFiZWwyNjA5NDE2", "url": "https://api.github.com/repos/circus-tent/circus/labels/good%20first%20issue", "name": "good first issue", "color": "1d76db", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-12-22T14:38:22Z", "updated_at": "2020-03-04T13:26:21Z", "closed_at": "2020-03-04T13:26:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to change flapping's max_retry option, I receive this exception :\n\n```\n$ circusd config/circus_flap.ini\n2015-12-22 16:25:02 circus[7199] [INFO] Starting master on pid 7199\n2015-12-22 16:25:02 circus[7199] [INFO] Arbiter now waiting for commands\n2015-12-22 16:25:32 tornado.application[6043] [ERROR] Future <tornado.concurrent.Future object at 0x108400eb8> exception was never retrieved: Traceback (most recent call last):\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/gen.py\", line 1014, in run\n    yielded = self.gen.throw(*exc_info)\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/circus/arbiter.py\", line 648, in manage_watchers\n    yield list_to_yield\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/gen.py\", line 1008, in run\n    value = future.result()\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"<string>\", line 3, in raise_exc_info\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/gen.py\", line 789, in callback\n    result_list.append(f.result())\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"<string>\", line 3, in raise_exc_info\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/gen.py\", line 1014, in run\n    yielded = self.gen.throw(*exc_info)\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/types.py\", line 179, in throw\n    return self.__wrapped.throw(tp, *rest)\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/circus/watcher.py\", line 535, in manage_processes\n    yield self.spawn_processes()\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/gen.py\", line 1008, in run\n    value = future.result()\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"<string>\", line 3, in raise_exc_info\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/tornado/gen.py\", line 282, in wrapper\n    yielded = next(result)\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/types.py\", line 199, in __next__\n    return next(self.__wrapped)\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/circus/watcher.py\", line 592, in spawn_processes\n    res = self.spawn_process()\n  File \"/Users/mind/sand/ecgate/env/lib/python3.5/site-packages/circus/watcher.py\", line 629, in spawn_process\n    while nb_tries < self.max_retry or self.max_retry == -1:\nTypeError: unorderable types: int() < str()\n```\n\nThe config file I used is:\n\n```\n[circus]\ncheck_delay = 5\nendpoint = tcp://127.0.0.1:5555\npubsub_endpoint = tcp://127.0.0.1:5556\n\n[plugin:flapping]\nuse = circus.plugins.flapping.Flapping\nmax_retry = 1\n\n[watcher:command]\ncmd = sleep\nargs = 2\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/949", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/949/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/949/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/949/events", "html_url": "https://github.com/circus-tent/circus/issues/949", "id": 122995105, "node_id": "MDU6SXNzdWUxMjI5OTUxMDU=", "number": 949, "title": "Fix Travis build", "user": {"login": "k4nar", "id": 2692721, "node_id": "MDQ6VXNlcjI2OTI3MjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/2692721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k4nar", "html_url": "https://github.com/k4nar", "followers_url": "https://api.github.com/users/k4nar/followers", "following_url": "https://api.github.com/users/k4nar/following{/other_user}", "gists_url": "https://api.github.com/users/k4nar/gists{/gist_id}", "starred_url": "https://api.github.com/users/k4nar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k4nar/subscriptions", "organizations_url": "https://api.github.com/users/k4nar/orgs", "repos_url": "https://api.github.com/users/k4nar/repos", "events_url": "https://api.github.com/users/k4nar/events{/privacy}", "received_events_url": "https://api.github.com/users/k4nar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-12-18T17:46:42Z", "updated_at": "2015-12-19T00:15:04Z", "closed_at": "2015-12-19T00:15:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Apparently something is wrong with our setup. We got this error [on the last builds](https://travis-ci.org/circus-tent/circus/jobs/97714758):\n\n```\n$ source ~/virtualenv/python2.7/bin/activate\n$ python --version\nPython 2.7.9\n$ pip --version\npip 6.0.7 from /home/travis/virtualenv/python2.7.9/lib/python2.7/site-packages (python 2.7)\n$ sudo apt-get install -y libev-dev\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nE: Unable to locate package libev-dev\n\nThe command \"sudo apt-get install -y libev-dev\" failed and exited with 100 during .\n\nYour build has been stopped.\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/947", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/947/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/947/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/947/events", "html_url": "https://github.com/circus-tent/circus/issues/947", "id": 122988815, "node_id": "MDU6SXNzdWUxMjI5ODg4MTU=", "number": 947, "title": "FullStats failts on python 3", "user": {"login": "gbarba", "id": 1067155, "node_id": "MDQ6VXNlcjEwNjcxNTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1067155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbarba", "html_url": "https://github.com/gbarba", "followers_url": "https://api.github.com/users/gbarba/followers", "following_url": "https://api.github.com/users/gbarba/following{/other_user}", "gists_url": "https://api.github.com/users/gbarba/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbarba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbarba/subscriptions", "organizations_url": "https://api.github.com/users/gbarba/orgs", "repos_url": "https://api.github.com/users/gbarba/repos", "events_url": "https://api.github.com/users/gbarba/events{/privacy}", "received_events_url": "https://api.github.com/users/gbarba/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-12-18T17:08:12Z", "updated_at": "2015-12-18T18:03:04Z", "closed_at": "2015-12-18T18:03:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "circus 0.12.1 (from pip)\npython 3.4.3\n\nRunning at local and at Heroku:\n\n2015-12-18 17:05:25 tornado.application[30] [ERROR] Exception in callback <bound method FullStats.look_after of <circus.plugins.statsd.FullStats object at 0x7f5abcf5cf60>>\n Traceback (most recent call last):\n   File \"/app/.heroku/python/lib/python3.4/site-packages/tornado/ioloop.py\", line 1039, in _run\n     return self.callback()\n   File \"/app/.heroku/python/lib/python3.4/site-packages/circus/plugins/statsd.py\", line 128, in look_after\n     self.statsd.gauge(\"_stats.%s.watchers_num\" % name, len(cpus))\n   File \"/app/.heroku/python/lib/python3.4/site-packages/circus/plugins/statsd.py\", line 37, in gauge\n     self.send(bucket, \"%s|g\" % value)\n   File \"/app/.heroku/python/lib/python3.4/site-packages/circus/plugins/statsd.py\", line 26, in send\n     self.socket.sendto(\"%s:%s\" % (bucket, value), (self.host, self.port))\n TypeError: 'str' does not support the buffer interface\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/946", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/946/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/946/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/946/events", "html_url": "https://github.com/circus-tent/circus/issues/946", "id": 122700784, "node_id": "MDU6SXNzdWUxMjI3MDA3ODQ=", "number": 946, "title": "Respawn doesn't work with Papa ", "user": {"login": "cgarciaarano", "id": 6098044, "node_id": "MDQ6VXNlcjYwOTgwNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/6098044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarciaarano", "html_url": "https://github.com/cgarciaarano", "followers_url": "https://api.github.com/users/cgarciaarano/followers", "following_url": "https://api.github.com/users/cgarciaarano/following{/other_user}", "gists_url": "https://api.github.com/users/cgarciaarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarciaarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarciaarano/subscriptions", "organizations_url": "https://api.github.com/users/cgarciaarano/orgs", "repos_url": "https://api.github.com/users/cgarciaarano/repos", "events_url": "https://api.github.com/users/cgarciaarano/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarciaarano/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-12-17T09:57:52Z", "updated_at": "2015-12-27T03:11:20Z", "closed_at": "2015-12-27T03:11:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When `use_papa = True`, processes are not respawning.\n\nwatcher.ini:\n\n``` ini\n[watcher:test_papa_respawn]\nuid = root\ngid = root\ncmd = sleep 5\nnumprocesses = 1\nuse_papa = True\nautostart = True\nrespawn = True\n```\n\nAfter starting the watcher:\n\n```\n(circusctl) stats test_papa_respawn\ntest_papa_respawn:\n8261: 8261  sleep root 0 348K 4M 0.0 0.0 0:00.0\n```\n\nAfter 5 seconds, the process die and it's not respawned:\n\n```\n(circusctl) stats test_papa_respawn\ntest_papa_respawn:\n8261: No such process (stopped?)\n```\n\nIt also happens if the process is killed by an external signal.\n\nThis issue can be a feature request, but I think that it should be warned in documentation. It says that Papa does not restart processes, but someone could understand (as I did) that circus will handle the restarting.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/945", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/945/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/945/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/945/events", "html_url": "https://github.com/circus-tent/circus/issues/945", "id": 121720164, "node_id": "MDU6SXNzdWUxMjE3MjAxNjQ=", "number": 945, "title": "Some issues with watchdog", "user": {"login": "kyudin", "id": 7337318, "node_id": "MDQ6VXNlcjczMzczMTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7337318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyudin", "html_url": "https://github.com/kyudin", "followers_url": "https://api.github.com/users/kyudin/followers", "following_url": "https://api.github.com/users/kyudin/following{/other_user}", "gists_url": "https://api.github.com/users/kyudin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyudin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyudin/subscriptions", "organizations_url": "https://api.github.com/users/kyudin/orgs", "repos_url": "https://api.github.com/users/kyudin/repos", "events_url": "https://api.github.com/users/kyudin/events{/privacy}", "received_events_url": "https://api.github.com/users/kyudin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-12-11T14:42:15Z", "updated_at": "2016-06-11T22:41:47Z", "closed_at": "2016-06-11T22:41:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "There are few issues, that prevent to use watchdog:\n1) max_count variable, readed from config should be casted to integer.\n2) bytes are received from udp socket, but regex is string, so, re.match will throw exception and since bytes are received from socket and regex - hearthbeat['pid'] should be decoded too.\n3) watcdog kills himself.\n[watchdog.txt](https://github.com/circus-tent/circus/files/59482/watchdog.txt)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/941", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/941/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/941/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/941/events", "html_url": "https://github.com/circus-tent/circus/issues/941", "id": 119072695, "node_id": "MDU6SXNzdWUxMTkwNzI2OTU=", "number": 941, "title": "Logging", "user": {"login": "ismail-s", "id": 3778413, "node_id": "MDQ6VXNlcjM3Nzg0MTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3778413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ismail-s", "html_url": "https://github.com/ismail-s", "followers_url": "https://api.github.com/users/ismail-s/followers", "following_url": "https://api.github.com/users/ismail-s/following{/other_user}", "gists_url": "https://api.github.com/users/ismail-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/ismail-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ismail-s/subscriptions", "organizations_url": "https://api.github.com/users/ismail-s/orgs", "repos_url": "https://api.github.com/users/ismail-s/repos", "events_url": "https://api.github.com/users/ismail-s/events{/privacy}", "received_events_url": "https://api.github.com/users/ismail-s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}, {"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-11-26T16:15:00Z", "updated_at": "2016-06-15T11:20:26Z", "closed_at": "2016-06-15T09:10:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am trying to use Circus to manage my [Pyramid app](www.github.com/ismail-s/fireblog). However, I am having trouble configuring logging-it seems like the loglevel and logoutput settings only work for some of the log messages and not others. For instance, all the log messages my app makes get sent straight to STDOUT, and don't seem subject to control from `circus.ini`.\n1. How do I do control the logging of my application\n2. Where is information on configuring the `circus.ini` file? I've been looking around and I can't find a page that says:\n   1. What config options are available for each section\n   2. What each option does\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/939", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/939/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/939/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/939/events", "html_url": "https://github.com/circus-tent/circus/issues/939", "id": 117075726, "node_id": "MDU6SXNzdWUxMTcwNzU3MjY=", "number": 939, "title": "TypeError when launching circusd", "user": {"login": "bbc2", "id": 1645335, "node_id": "MDQ6VXNlcjE2NDUzMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1645335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bbc2", "html_url": "https://github.com/bbc2", "followers_url": "https://api.github.com/users/bbc2/followers", "following_url": "https://api.github.com/users/bbc2/following{/other_user}", "gists_url": "https://api.github.com/users/bbc2/gists{/gist_id}", "starred_url": "https://api.github.com/users/bbc2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bbc2/subscriptions", "organizations_url": "https://api.github.com/users/bbc2/orgs", "repos_url": "https://api.github.com/users/bbc2/repos", "events_url": "https://api.github.com/users/bbc2/events{/privacy}", "received_events_url": "https://api.github.com/users/bbc2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-11-16T08:39:29Z", "updated_at": "2015-12-23T14:52:19Z", "closed_at": "2015-12-23T14:52:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that this version of circus should work with Python 3.4, but not for me:\n\n```\n> circusd app.ini \nTraceback (most recent call last):\n  File \"/home/bertrand/venv/bin/circusd\", line 9, in <module>\n    load_entry_point('circus==0.12.1', 'console_scripts', 'circusd')()\n  File \"/home/bertrand/venv/lib/python3.4/site-packages/circus/circusd.py\", line 126, in main\n    arbiter = Arbiter.load_from_config(args.config)\n  File \"/home/bertrand/venv/lib/python3.4/site-packages/circus/arbiter.py\", line 423, in load_from_config\n    cfg = get_config(config_file)\n  File \"/home/bertrand/venv/lib/python3.4/site-packages/circus/config.py\", line 211, in get_config\n    for opt, val in cfg.items(section, noreplace=True):\n  File \"/home/bertrand/venv/lib/python3.4/site-packages/circus/config.py\", line 64, in items\n    items = StrictConfigParser.items(self, section)\n  File \"/usr/lib/python3.4/configparser.py\", line 835, in items\n    return [(option, value_getter(option)) for option in d.keys()]\n  File \"/usr/lib/python3.4/configparser.py\", line 835, in <listcomp>\n    return [(option, value_getter(option)) for option in d.keys()]\n  File \"/usr/lib/python3.4/configparser.py\", line 832, in <lambda>\n    section, option, d[option], d)\n  File \"/usr/lib/python3.4/configparser.py\", line 371, in before_get\n    self._interpolate_some(parser, option, L, value, section, defaults, 1)\n  File \"/usr/lib/python3.4/configparser.py\", line 384, in _interpolate_some\n    rawval = parser.get(section, option, raw=True, fallback=rest)\nTypeError: get() got an unexpected keyword argument 'raw'\n```\n\nVersions:\n\n```\n> python --version\nPython 3.4.3+\n> circusd --version\n0.12.1\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/937", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/937/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/937/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/937/events", "html_url": "https://github.com/circus-tent/circus/issues/937", "id": 114725017, "node_id": "MDU6SXNzdWUxMTQ3MjUwMTc=", "number": 937, "title": "Circus changes is not persist", "user": {"login": "natsu90", "id": 1425214, "node_id": "MDQ6VXNlcjE0MjUyMTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1425214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/natsu90", "html_url": "https://github.com/natsu90", "followers_url": "https://api.github.com/users/natsu90/followers", "following_url": "https://api.github.com/users/natsu90/following{/other_user}", "gists_url": "https://api.github.com/users/natsu90/gists{/gist_id}", "starred_url": "https://api.github.com/users/natsu90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/natsu90/subscriptions", "organizations_url": "https://api.github.com/users/natsu90/orgs", "repos_url": "https://api.github.com/users/natsu90/repos", "events_url": "https://api.github.com/users/natsu90/events{/privacy}", "received_events_url": "https://api.github.com/users/natsu90/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-11-03T01:45:17Z", "updated_at": "2016-06-11T22:46:38Z", "closed_at": "2016-06-11T22:46:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys, I'm adding new watcher from CLI, all works well. But after did server restart, the added watcher is not running and seems no longer exist in list. How do I add watcher and remain persist after server restart, besides editing the `ini` file? Because I need the watcher can be add and remove on the fly. Thanks.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/936", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/936/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/936/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/936/events", "html_url": "https://github.com/circus-tent/circus/issues/936", "id": 113886162, "node_id": "MDU6SXNzdWUxMTM4ODYxNjI=", "number": 936, "title": "More problems with watchers when mixing upper and lower cases", "user": {"login": "StefanWiechula", "id": 2644373, "node_id": "MDQ6VXNlcjI2NDQzNzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2644373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StefanWiechula", "html_url": "https://github.com/StefanWiechula", "followers_url": "https://api.github.com/users/StefanWiechula/followers", "following_url": "https://api.github.com/users/StefanWiechula/following{/other_user}", "gists_url": "https://api.github.com/users/StefanWiechula/gists{/gist_id}", "starred_url": "https://api.github.com/users/StefanWiechula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StefanWiechula/subscriptions", "organizations_url": "https://api.github.com/users/StefanWiechula/orgs", "repos_url": "https://api.github.com/users/StefanWiechula/repos", "events_url": "https://api.github.com/users/StefanWiechula/events{/privacy}", "received_events_url": "https://api.github.com/users/StefanWiechula/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391170305, "node_id": "MDU6TGFiZWwzOTExNzAzMDU=", "url": "https://api.github.com/repos/circus-tent/circus/labels/Waiting%20for%20a%20PR", "name": "Waiting for a PR", "color": "fbca04", "default": false, "description": null}, {"id": 2609416, "node_id": "MDU6TGFiZWwyNjA5NDE2", "url": "https://api.github.com/repos/circus-tent/circus/labels/good%20first%20issue", "name": "good first issue", "color": "1d76db", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-10-28T18:07:59Z", "updated_at": "2020-03-10T15:56:41Z", "closed_at": "2020-03-10T15:56:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#927 fixed the `restart` command but similar issues exist with other commands.\n\nSee comment here: https://github.com/circus-tent/circus/issues/927#issuecomment-151531715\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/933", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/933/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/933/events", "html_url": "https://github.com/circus-tent/circus/issues/933", "id": 111525766, "node_id": "MDU6SXNzdWUxMTE1MjU3NjY=", "number": 933, "title": "Processes Die due to ValueError: I/O operation on closed file leads to incorrect status", "user": {"login": "jsrawan-mobo", "id": 359483, "node_id": "MDQ6VXNlcjM1OTQ4Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/359483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsrawan-mobo", "html_url": "https://github.com/jsrawan-mobo", "followers_url": "https://api.github.com/users/jsrawan-mobo/followers", "following_url": "https://api.github.com/users/jsrawan-mobo/following{/other_user}", "gists_url": "https://api.github.com/users/jsrawan-mobo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsrawan-mobo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsrawan-mobo/subscriptions", "organizations_url": "https://api.github.com/users/jsrawan-mobo/orgs", "repos_url": "https://api.github.com/users/jsrawan-mobo/repos", "events_url": "https://api.github.com/users/jsrawan-mobo/events{/privacy}", "received_events_url": "https://api.github.com/users/jsrawan-mobo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-10-15T01:15:48Z", "updated_at": "2016-06-12T10:47:25Z", "closed_at": "2016-06-12T10:47:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "In one of circusd workers we see:\n\n```\nValueError: I/O operation on closed file\n2015-10-15 00:56:15 tornado.application[58561] [ERROR] Future exception was never retrieved: Traceback (most recent call last):\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/tornado/gen.py\", line 810, in run\n    yielded = self.gen.throw(*sys.exc_info())\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/circus/watcher.py\", line 535, in manage_processes\n    yield self.spawn_processes()\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/tornado/gen.py\", line 807, in run\n    value = future.result()\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/tornado/concurrent.py\", line 209, in result\n    raise_exc_info(self._exc_info)\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/tornado/gen.py\", line 212, in wrapper\n    yielded = next(result)\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/circus/watcher.py\", line 592, in spawn_processes\n    res = self.spawn_process()\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/circus/watcher.py\", line 627, in spawn_process\n    self.stream_redirector.start()\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/circus/stream/redirector.py\", line 59, in start\n    count += self._start_one(name, process, pipe)\n  File \"/opt/interana/third_party/lib/python2.7/site-packages/circus/stream/redirector.py\", line 48, in _start_one\n    fd = pipe.fileno()\n```\n\nAs a result the status are incorrect, and do not match the stats (which are missing for processes that have died)\n\n```\n$ /opt/interana/third_party/bin/circusctl status\nbackstop_0: active\nbackstop_1: active\nbackstop_2: active\nbackstop_3: active\nbackstop_4: active\n$ /opt/interana/third_party/bin/circusctl stats\nbackstop_4:\nbackstop_2:\nbackstop_3:\nbackstop_0:\n57574: 57574  bash interana 0 2M 9M 0.0 0.0 0:00.20\n   57577  perl interana 0 38M 87M 0.0 0.1 0:00.65\nbackstop_1:\n```\n\nWhen i restart one of the dead processes, stats shows it alive, along with ps\n\n```\n$ /opt/interana/third_party/bin/circusctl restart backstop_4\nok\n$ /opt/interana/third_party/bin/circusctl stats\nbackstop_4:\n59973: 59973  bash interana 0 2M 9M 0.0 0.0 0:00.0\n   59974  perl interana 0 38M 87M 0.0 0.1 0:00.58\nbackstop_2:\nbackstop_3:\nbackstop_0:\n58782: 58782  N/A interana 0 0B 0B 0.0 0.0 0:00.10\nbackstop_1:\n```\n\nConfig file here\n\n```\n[watcher:backstop_0]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 0\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-0.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-0.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_1]\ncmd = /home/[watcher:backstop_0]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 0\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-0.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-0.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_1]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 1\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-1.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-1.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_2]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 2\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-2.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-2.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_3]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 3\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-3.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-3.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_4]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 4\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-4.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-4.log\nstderr_stream.refresh_time = 0.3\nubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 1\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-1.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-1.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_2]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 2\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-2.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-2.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_3]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 3\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-3.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-3.log\nstderr_stream.refresh_time = 0.3\n\n[watcher:backstop_4]\ncmd = /home/ubuntu/pipeline-backstop/ubuntu-WUS-001\nargs = 4\nnumprocesses = 1\ncopy_env = True\npriority = 1\nstop_children = True\nrespawn = True\nstop_signal = SIGKILL\nuid = ubuntu\ngid = ubuntu\nstdout_stream.class = FileStream\nstdout_stream.filename = /var/log/ubuntu/backstop-4.log\nstdout_stream.refresh_time = 0.3\nstderr_stream.class = FileStream\nstderr_stream.filename = /var/log/ubuntu/backstop-4.log\nstderr_stream.refresh_time = 0.3\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/930", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/930/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/930/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/930/events", "html_url": "https://github.com/circus-tent/circus/issues/930", "id": 106826537, "node_id": "MDU6SXNzdWUxMDY4MjY1Mzc=", "number": 930, "title": "Error parsing args when use_papa = True", "user": {"login": "cgarciaarano", "id": 6098044, "node_id": "MDQ6VXNlcjYwOTgwNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/6098044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarciaarano", "html_url": "https://github.com/cgarciaarano", "followers_url": "https://api.github.com/users/cgarciaarano/followers", "following_url": "https://api.github.com/users/cgarciaarano/following{/other_user}", "gists_url": "https://api.github.com/users/cgarciaarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarciaarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarciaarano/subscriptions", "organizations_url": "https://api.github.com/users/cgarciaarano/orgs", "repos_url": "https://api.github.com/users/cgarciaarano/repos", "events_url": "https://api.github.com/users/cgarciaarano/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarciaarano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391092812, "node_id": "MDU6TGFiZWwzOTEwOTI4MTI=", "url": "https://api.github.com/repos/circus-tent/circus/labels/In%20progress", "name": "In progress", "color": "fef2c0", "default": false, "description": null}, {"id": 3982488, "node_id": "MDU6TGFiZWwzOTgyNDg4", "url": "https://api.github.com/repos/circus-tent/circus/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2015-09-16T17:57:23Z", "updated_at": "2016-08-12T14:26:58Z", "closed_at": "2016-08-12T14:10:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, \n\nwe've found that Circus 0.12.2 is not parsing args correctly when `use_papa = True`. With this config file:\n\n``` ini\n[circus]\ncheck_delay = 5\nendpoint = tcp://127.0.0.1:5555\npubsub_endpoint = tcp://127.0.0.1:5556\nstatsd = true\n\n[watcher:app1]\ncmd = ping\nargs = 8.8.8.8\nuse_papa=True\n```\n\nThe debug log shows:\n\n``` log\n2015-09-16 19:35:57 circus[17841] [DEBUG] cmd: ping\n2015-09-16 19:35:57 circus[17841] [DEBUG] args: ['8', '.', '8', '.', '8', '.', '8']\n2015-09-16 19:35:57 circus[17841] [DEBUG] process args: ['ping', '8', '.', '8', '.', '8', '.', '8']\n```\n\nand the process keeps flapping.\n\nCommenting out in `papa_process_proxy.py` the `self.args` assign:\n\n``` python\n    def spawn(self):\n        # noinspection PyUnusedLocal\n        socket_names = set(socket_name.lower()\n                           for socket_name in self.watcher._get_sockets_fds())\n        self.cmd = self._fix_socket_name(self.cmd, socket_names)\n        #self.args = [self._fix_socket_name(arg, socket_names)\n        #             for arg in self.args]\n        args = self.format_args()\n        stdout = _bools_to_papa_out(self.pipe_stdout, self.close_child_stdout)\n        stderr = _bools_to_papa_out(self.pipe_stderr, self.close_child_stderr)\n```\n\nseems to fix this behaviour, because args is being processed as a string, not a list. I'm not really sure what `_fix_socket_name()` is doing. Maybe this fix is enough?\n\n``` python\nself.args = [self._fix_socket_name(arg, socket_names)\n                     for arg in self.args.split(' ')]\n```\n\nRegards\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/927", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/927/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/927/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/927/events", "html_url": "https://github.com/circus-tent/circus/issues/927", "id": 105979682, "node_id": "MDU6SXNzdWUxMDU5Nzk2ODI=", "number": 927, "title": "Problems with watchers when mixing upper and lower cases", "user": {"login": "cgarciaarano", "id": 6098044, "node_id": "MDQ6VXNlcjYwOTgwNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/6098044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarciaarano", "html_url": "https://github.com/cgarciaarano", "followers_url": "https://api.github.com/users/cgarciaarano/followers", "following_url": "https://api.github.com/users/cgarciaarano/following{/other_user}", "gists_url": "https://api.github.com/users/cgarciaarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarciaarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarciaarano/subscriptions", "organizations_url": "https://api.github.com/users/cgarciaarano/orgs", "repos_url": "https://api.github.com/users/cgarciaarano/repos", "events_url": "https://api.github.com/users/cgarciaarano/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarciaarano/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-09-11T09:54:13Z", "updated_at": "2015-10-27T15:19:11Z", "closed_at": "2015-09-16T13:38:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nin circus 0.10 the default behaviour when stopping a watcher via  `circusctl`  was to match the name of the watcher against the name provided in command line using simple string matching. Now in 0.12.1 the default is to match using glob.\n\nThat's a good feature, but now, if you give the _exact name_ of the watcher, the `stop` command (`start` and `restart` too) fails with:\n\n```\nerror: program WATCHER_NAME not found\n```\n\nThat's because the matching is against the lowercase name of the watcher. I would fix it making lowercase both parameters in `circus/commands/restart.py`, changing the existing code:\n\n``` python\n            if match == 'glob':\n                name = re.compile(fnmatch.translate(props['name']))\n            elif match == 'regex':\n                name = re.compile(props['name'])\n```\n\nto \n\n``` python\n            if match == 'glob':\n                name = re.compile(fnmatch.translate(props['name'].lower()))\n            elif match == 'regex':\n                name = re.compile(props['name'].lower())\n```\n\nRegards\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/926", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/926/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/926/events", "html_url": "https://github.com/circus-tent/circus/issues/926", "id": 105564941, "node_id": "MDU6SXNzdWUxMDU1NjQ5NDE=", "number": 926, "title": "multi circus.ini files ", "user": {"login": "Alwerdani", "id": 7599207, "node_id": "MDQ6VXNlcjc1OTkyMDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7599207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alwerdani", "html_url": "https://github.com/Alwerdani", "followers_url": "https://api.github.com/users/Alwerdani/followers", "following_url": "https://api.github.com/users/Alwerdani/following{/other_user}", "gists_url": "https://api.github.com/users/Alwerdani/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alwerdani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alwerdani/subscriptions", "organizations_url": "https://api.github.com/users/Alwerdani/orgs", "repos_url": "https://api.github.com/users/Alwerdani/repos", "events_url": "https://api.github.com/users/Alwerdani/events{/privacy}", "received_events_url": "https://api.github.com/users/Alwerdani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-09-09T10:03:27Z", "updated_at": "2018-08-25T11:21:48Z", "closed_at": "2016-06-12T12:13:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi , \ni am trying to run two django apps with circus on same droplet at digitalocean \nevery app is work alone verygood with seprated circus.ini files but the problem come when make the two apps in same file like this:\n\n**circus.ini**\n[circus]\ncheck_delay = 5\nendpoint = tcp://127.0.0.1:5555\npubsub_endpoint = tcp://127.0.0.1:5556\nstatsd = true\n\n[watcher:app1]\nworking_dir = /home/user1/projects/app1\n\ncmd = gunicorn\nargs = -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8001 app1.wsgi\nuid = user1\ncopy_env = true\nnumprocesses = 1\nautostart = true\nsend_hup = true\nstdout_stream.class = FileStream\nstdout_stream.filename = /home/user1/projects/logs/gunicorn.stdout.log\nstdout_stream.max_bytes = 10485760\nstdout_stream.backup_count = 4\n\n[env:app1]\nPATH = /home/user1/.virtualenvs/app1/bin:$PATH\nTERM=rxvt-256color\nSHELL=/bin/bash\nUSER=user1\nLANG=en_US.UTF-8\nHOME=/home/user1\nPYTHONPATH=/home/user1/.virtualenvs/app1/lib/python3.4/site-packages\n\n[watcher:app2]\nworking_dir = /homeuser2/projects/app2\n\ncmd = gunicorn\nargs = -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8002 app2.wsgi\nuid = user2\ncopy_env = true\nnumprocesses = 1\nautostart = true\nsend_hup = true\nstdout_stream.class = FileStream\nstdout_stream.filename = /home/user2/projects/logs/gunicorn.stdout.log\nstdout_stream.max_bytes = 10485760\nstdout_stream.backup_count = 4\n\n[env:app2]\nPATH = /home/user2/.virtualenvs/app2/bin:$PATH\nTERM=rxvt-256color\nSHELL=/bin/bash\nUSER=user2\nLANG=en_US.UTF-8\nHOME=/home/user2\nPYTHONPATH=/home/user2/.virtualenvs/app2/lib/python3.4/site-packages\n\nbut not work \n\nand trying to make two conf files like this \napp1.conf:\nstart on filesystem and net-device-up IFACE=lo\nstop on runlevel [016]\n\nrespawn\nexec /usr/local/bin/circusd /home/user1/projects/circus.ini\n\n**app1.conf:** \nstart on filesystem and net-device-up IFACE=lo\nstop on runlevel [016]\n\nrespawn\nexec /usr/local/bin/circusd /home/user1/projects/circus.ini\n\n**app2.conf:** \nstart on filesystem and net-device-up IFACE=lo\nstop on runlevel [016]\n\nrespawn\nexec /usr/local/bin/circusd /home/user1/projects/circus.ini\nbut still not work \n\nany other suggestions ? \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/923", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/923/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/923/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/923/events", "html_url": "https://github.com/circus-tent/circus/issues/923", "id": 104327786, "node_id": "MDU6SXNzdWUxMDQzMjc3ODY=", "number": 923, "title": "Circus doesnt seem to send SIGTERM properly", "user": {"login": "evanccnyc", "id": 2079454, "node_id": "MDQ6VXNlcjIwNzk0NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2079454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evanccnyc", "html_url": "https://github.com/evanccnyc", "followers_url": "https://api.github.com/users/evanccnyc/followers", "following_url": "https://api.github.com/users/evanccnyc/following{/other_user}", "gists_url": "https://api.github.com/users/evanccnyc/gists{/gist_id}", "starred_url": "https://api.github.com/users/evanccnyc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evanccnyc/subscriptions", "organizations_url": "https://api.github.com/users/evanccnyc/orgs", "repos_url": "https://api.github.com/users/evanccnyc/repos", "events_url": "https://api.github.com/users/evanccnyc/events{/privacy}", "received_events_url": "https://api.github.com/users/evanccnyc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2015-09-01T18:32:11Z", "updated_at": "2016-04-25T13:20:20Z", "closed_at": "2016-04-25T13:20:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Maybe I am missing something obvious but I cant get circus to send sigterms on stop or restart. I have tested this on multiple applications, (written in python and go) but have created a test case below:\n\nTested with a clean box and circusctl 0.12.1.\n\nBelow is the testcase:\n\ntest.ini\n\n```\n[watcher:test]\ncmd = python test2.py > /var/log/circus/test2.log\nargs =\nworking_dir = /home/vagrant/\nshell=True\nnumprocesses = 1\nuid = vagrant\ngid = users\nrespawn = True\n```\n\ntest2.py\n\n```\nfrom threading import Thread\nimport time, sys, signal\n\nshutdown_flag = False #used for gracefull shutdown\n\ndef main_loop():\n    while not shutdown_flag:\n#        collect_data() # contains some print \"data\" statements\n        time.sleep(5)\n        import threading\n        print threading.enumerate()\n    print \"done (killed)\"\ndef sighandler(signum, frame):\n    print 'signal handler called with signal: %s ' % signum\n    global shutdown_flag\n    shutdown_flag = True\n    sys.exit() # make sure you add this so the main thread exits as well.\n\ndef main(argv=None):\n    signal.signal(signal.SIGTERM, sighandler) # so we can handle kill gracefully\n    signal.signal(signal.SIGINT, sighandler) # so we can handle ctrl-c\n    try:\n        Thread(target=main_loop, args=()).start()\n    except Exception, reason:\n        print reason\n\nif __name__ == '__main__':\n    main(sys.argv)\n    while 1:  # this will force your main thread to live until you terminate it.\n       time.sleep(1)\n```\n\nWhen I send a SIGTERM via kill the command the log shows the following:\n\n```\n[<_MainThread(MainThread, started 139682171225920)>, <Thread(Thread-1, started 139682151667456)>]\n[<_MainThread(MainThread, started 139682171225920)>, <Thread(Thread-1, started 139682151667456)>]\n[<_MainThread(MainThread, started 139682171225920)>, <Thread(Thread-1, started 139682151667456)>]\n[<_MainThread(MainThread, started 139682171225920)>, <Thread(Thread-1, started 139682151667456)>]\nsignal handler called with signal: 15\n[<_MainThread(MainThread, stopped 139682171225920)>, <Thread(Thread-1, started 139682151667456)>]\ndone (killed)\n```\n\nWhen I run \"circusctl restart test\" nothing is printed out in the logs, showing it never received it. Let me know if I a missing something obvious.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/921", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/921/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/921/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/921/events", "html_url": "https://github.com/circus-tent/circus/issues/921", "id": 104293501, "node_id": "MDU6SXNzdWUxMDQyOTM1MDE=", "number": 921, "title": "circusd is not taking back processes from Papa", "user": {"login": "cgarciaarano", "id": 6098044, "node_id": "MDQ6VXNlcjYwOTgwNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/6098044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarciaarano", "html_url": "https://github.com/cgarciaarano", "followers_url": "https://api.github.com/users/cgarciaarano/followers", "following_url": "https://api.github.com/users/cgarciaarano/following{/other_user}", "gists_url": "https://api.github.com/users/cgarciaarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarciaarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarciaarano/subscriptions", "organizations_url": "https://api.github.com/users/cgarciaarano/orgs", "repos_url": "https://api.github.com/users/cgarciaarano/repos", "events_url": "https://api.github.com/users/cgarciaarano/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarciaarano/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-09-01T15:35:27Z", "updated_at": "2015-09-01T21:20:42Z", "closed_at": "2015-09-01T17:51:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nwe're testing Papa process kernel==1.0.5 with circus==0.12.1 in a lab, using a redis server (not daemonized) as watcher. To ensure that the process is not interrupted, we're perfomring a `redis-bechmark -l`.\n\n``` ini\n[watcher:redis]\ncmd = redis-server\nuse_papa = True\nactive = True\nnumprocesses = 1\n```\n\nWhen we stop circus via upstart (`service circus stop`, I'm assuming it's sending `SIGTERM` to circusd), Papa takes as child the redis-server process. This is ok.\n\nWhen we start again circusd, `circusctl status` shows that the watcher is `starting`, and has 0 processes, indefinetely. The logs throw this traceback:\n\n```\n2015-09-01 16:29:29 tornado.application[16683] [ERROR] Future exception was never retrieved: Traceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 876, in run\n    yielded = self.gen.throw(*exc_info)\n  File \"/usr/local/lib/python2.7/dist-packages/circus/arbiter.py\", line 648, in manage_watchers\n    yield list_to_yield\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 870, in run\n    value = future.result()\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 215, in result\n    raise_exc_info(self._exc_info)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 656, in callback\n    result_list.append(f.result())\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 215, in result\n    raise_exc_info(self._exc_info)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 876, in run\n    yielded = self.gen.throw(*exc_info)\n  File \"/usr/local/lib/python2.7/dist-packages/circus/watcher.py\", line 535, in manage_processes\n    yield self.spawn_processes()\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 870, in run\n    value = future.result()\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 215, in result\n    raise_exc_info(self._exc_info)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 230, in wrapper\n    yielded = next(result)\n  File \"/usr/local/lib/python2.7/dist-packages/circus/watcher.py\", line 587, in spawn_processes\n    self.spawn_process(i)\n  File \"/usr/local/lib/python2.7/dist-packages/circus/watcher.py\", line 647, in spawn_process\n    close_child_stderr=self.close_child_stderr)\n  File \"/usr/local/lib/python2.7/dist-packages/circus/papa_process_proxy.py\", line 36, in __init__\n    super(PapaProcessProxy, self).__init__(*args, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/circus/process.py\", line 214, in __init__\n    self.spawn()\n  File \"/usr/local/lib/python2.7/dist-packages/circus/papa_process_proxy.py\", line 84, in spawn\n    self._worker = PapaProcessWorker(self, p['pid'])\n  File \"/usr/local/lib/python2.7/dist-packages/circus/papa_process_proxy.py\", line 24, in __init__\n    self._init(pid, _ignore_nsp=True)\nAttributeError: 'PapaProcessWorker' object has no attribute '_init'\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/919", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/919/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/919/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/919/events", "html_url": "https://github.com/circus-tent/circus/issues/919", "id": 103024750, "node_id": "MDU6SXNzdWUxMDMwMjQ3NTA=", "number": 919, "title": "When circusd is started from an SSH connection, PID file is lost on disconnect", "user": {"login": "cjhenck", "id": 2380566, "node_id": "MDQ6VXNlcjIzODA1NjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/2380566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjhenck", "html_url": "https://github.com/cjhenck", "followers_url": "https://api.github.com/users/cjhenck/followers", "following_url": "https://api.github.com/users/cjhenck/following{/other_user}", "gists_url": "https://api.github.com/users/cjhenck/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjhenck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjhenck/subscriptions", "organizations_url": "https://api.github.com/users/cjhenck/orgs", "repos_url": "https://api.github.com/users/cjhenck/repos", "events_url": "https://api.github.com/users/cjhenck/events{/privacy}", "received_events_url": "https://api.github.com/users/cjhenck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-08-25T13:40:40Z", "updated_at": "2016-08-15T19:45:19Z", "closed_at": "2016-08-15T19:45:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I often restart my circus server via SSH, and when I do so, the PID file is lost.  I will probably create an appropriate script for the init services, but it seems like this is nevertheless an undesirable behavior.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/918", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/918/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/918/events", "html_url": "https://github.com/circus-tent/circus/issues/918", "id": 99727199, "node_id": "MDU6SXNzdWU5OTcyNzE5OQ==", "number": 918, "title": "Feature request: consider adding `disable = (true|false)` to watcher configuration", "user": {"login": "posita", "id": 222581, "node_id": "MDQ6VXNlcjIyMjU4MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/222581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/posita", "html_url": "https://github.com/posita", "followers_url": "https://api.github.com/users/posita/followers", "following_url": "https://api.github.com/users/posita/following{/other_user}", "gists_url": "https://api.github.com/users/posita/gists{/gist_id}", "starred_url": "https://api.github.com/users/posita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/posita/subscriptions", "organizations_url": "https://api.github.com/users/posita/orgs", "repos_url": "https://api.github.com/users/posita/repos", "events_url": "https://api.github.com/users/posita/events{/privacy}", "received_events_url": "https://api.github.com/users/posita/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-08-07T20:42:42Z", "updated_at": "2016-06-12T13:01:20Z", "closed_at": "2016-06-12T13:01:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It might be nice to be able to disable a watcher without commenting out its entire configuration or renaming/moving its file (if it was included). Perhaps a watcher could support a `disable` configuration directive, where, if true, that watcher would be ignored. (Defaults to `false` where omitted, if that wasn't obvious.)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/917", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/917/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/917/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/917/events", "html_url": "https://github.com/circus-tent/circus/issues/917", "id": 99725806, "node_id": "MDU6SXNzdWU5OTcyNTgwNg==", "number": 917, "title": "Feature request: consider adding `stop_cmd` and `stop_args` to Watcher's ini as alternative `stop_signal`", "user": {"login": "posita", "id": 222581, "node_id": "MDQ6VXNlcjIyMjU4MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/222581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/posita", "html_url": "https://github.com/posita", "followers_url": "https://api.github.com/users/posita/followers", "following_url": "https://api.github.com/users/posita/following{/other_user}", "gists_url": "https://api.github.com/users/posita/gists{/gist_id}", "starred_url": "https://api.github.com/users/posita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/posita/subscriptions", "organizations_url": "https://api.github.com/users/posita/orgs", "repos_url": "https://api.github.com/users/posita/repos", "events_url": "https://api.github.com/users/posita/events{/privacy}", "received_events_url": "https://api.github.com/users/posita/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-08-07T20:32:07Z", "updated_at": "2016-06-12T15:29:17Z", "closed_at": "2016-06-12T13:12:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some things do not behave well with signals and much prefer to be told (e.g., by external commands) that it's time to shut down gracefully. Rather than write signal-handling wrappers, it might be nice to allow watchers to exec `[stop_cmd] [stop_args]` in lieu of sending `stop_signal`. It might be considered an error to specify both `stop_cmd` and `stop_signal`. `stop_children` would be meaningless for `stop_cmd`. `graceful_timeout` could work with `stop_cmd` in that `SIGKILL` could be sent if the process has still not halted on its own after calling `stop_cmd`.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/916", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/916/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/916/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/916/events", "html_url": "https://github.com/circus-tent/circus/issues/916", "id": 99611530, "node_id": "MDU6SXNzdWU5OTYxMTUzMA==", "number": 916, "title": "Possibly 'args' not fully passed to process", "user": {"login": "ayashjorden", "id": 4204371, "node_id": "MDQ6VXNlcjQyMDQzNzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/4204371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayashjorden", "html_url": "https://github.com/ayashjorden", "followers_url": "https://api.github.com/users/ayashjorden/followers", "following_url": "https://api.github.com/users/ayashjorden/following{/other_user}", "gists_url": "https://api.github.com/users/ayashjorden/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayashjorden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayashjorden/subscriptions", "organizations_url": "https://api.github.com/users/ayashjorden/orgs", "repos_url": "https://api.github.com/users/ayashjorden/repos", "events_url": "https://api.github.com/users/ayashjorden/events{/privacy}", "received_events_url": "https://api.github.com/users/ayashjorden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-08-07T09:12:01Z", "updated_at": "2016-02-09T19:06:55Z", "closed_at": "2016-02-09T19:06:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\nIn this scenario, I'm configuring a watcher with the following configuration\n\n```\n[watcher:websockets_nginx]\ncmd = /opt/nginx/sbin/nginx\nargs = -p /home/USER/apps/nginx/generated/ -c nginx.conf\nuid = root\ngid = root\nnumprocesses = 1\n```\n\nWhen circusd is started, I see all command args are read correctly:\n\n```\n2015-08-07 11:47:35 circus[3925] [INFO] Starting master on pid 3925\n2015-08-07 11:47:35 circus[3925] [DEBUG] Initializing watchers\n2015-08-07 11:47:35 circus[3925] [DEBUG] cmd: /opt/nginx/sbin/nginx\n2015-08-07 11:47:35 circus[3925] [DEBUG] args: -p /home/USER/apps/nginx/generated/ -c nginx.conf\n2015-08-07 11:47:35 circus[3925] [DEBUG] process args: ['/opt/nginx/sbin/nginx', '-p', '/home/USER/apps/nginx/generated/', '-c', 'nginx.conf']\n2015-08-07 11:47:35 circus[3925] [DEBUG] running websockets_nginx process [pid 3932]\n2015-08-07 11:47:35 circus[3925] [INFO] Arbiter now waiting for commands\n2015-08-07 11:47:35 circus[3925] [INFO] websockets_nginx started\n```\n\nBut when I `cat /proc/3932/cmdline`, I don't see the last arg (nginx.conf this case) in the output:\n\n```\ncat /proc/3932/cmdline \nnginx: master process /opt/nginx/sbin/nginx -p /home/USER/apps/nginx/generated/ -c\n```\n\nWhen I run the process manualy:\n\n```\nsudo /opt/nginx/sbin/nginx -p /home/USER/apps/nginx/generated/ -c nginx.conf\n```\n\nThe cmdline is:\n\n```\n cat /proc/5624/cmdline\nnginx: master process /opt/nginx/sbin/nginx -p /home/USER/apps/nginx/generated/ -c nginx.conf\n```\n\nAny ideas? Am I missing something?\n\nThanks,\nYarden\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/914", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/914/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/914/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/914/events", "html_url": "https://github.com/circus-tent/circus/issues/914", "id": 98942396, "node_id": "MDU6SXNzdWU5ODk0MjM5Ng==", "number": 914, "title": "How to start a watcher for a graphical (X11) program?", "user": {"login": "ViktorNova", "id": 3234333, "node_id": "MDQ6VXNlcjMyMzQzMzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/3234333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ViktorNova", "html_url": "https://github.com/ViktorNova", "followers_url": "https://api.github.com/users/ViktorNova/followers", "following_url": "https://api.github.com/users/ViktorNova/following{/other_user}", "gists_url": "https://api.github.com/users/ViktorNova/gists{/gist_id}", "starred_url": "https://api.github.com/users/ViktorNova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ViktorNova/subscriptions", "organizations_url": "https://api.github.com/users/ViktorNova/orgs", "repos_url": "https://api.github.com/users/ViktorNova/repos", "events_url": "https://api.github.com/users/ViktorNova/events{/privacy}", "received_events_url": "https://api.github.com/users/ViktorNova/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-08-04T10:54:38Z", "updated_at": "2015-08-04T17:13:56Z", "closed_at": "2015-08-04T17:13:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having a hard time getting Circus to start and monitor a program that runs inside X.. I am new to Circus but it is dead simple and I have no problem getting it to run scripts and whatnot, just when I try to run anything graphical, it does not work. The logfile is created but remains 0 bytes, so I am unsure how to debug it\n\nHere's my config for the watcher in question\n\n```\n[watcher:dmx]\ncmd = \"qlcplus --operate --open /home/stagecraft/SYSTEM/GLOBAL/The Secret Light.qxw\"\n# shell = True\nstdout_stream.class = FileStream\nstdout_stream.filename = dmx.log\n\n```\n\n(*have also tried with \"shell = True\" with no difference) Circusd is run as the current user loged into X,\n\nWhat am I missing here? \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/912", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/912/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/912/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/912/events", "html_url": "https://github.com/circus-tent/circus/issues/912", "id": 96592932, "node_id": "MDU6SXNzdWU5NjU5MjkzMg==", "number": 912, "title": "'circusctl stop' followed by 'circusctl start' breaks logging for watcher", "user": {"login": "AndrewKlopper", "id": 8438558, "node_id": "MDQ6VXNlcjg0Mzg1NTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8438558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndrewKlopper", "html_url": "https://github.com/AndrewKlopper", "followers_url": "https://api.github.com/users/AndrewKlopper/followers", "following_url": "https://api.github.com/users/AndrewKlopper/following{/other_user}", "gists_url": "https://api.github.com/users/AndrewKlopper/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndrewKlopper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndrewKlopper/subscriptions", "organizations_url": "https://api.github.com/users/AndrewKlopper/orgs", "repos_url": "https://api.github.com/users/AndrewKlopper/repos", "events_url": "https://api.github.com/users/AndrewKlopper/events{/privacy}", "received_events_url": "https://api.github.com/users/AndrewKlopper/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2015-07-22T15:19:46Z", "updated_at": "2015-08-05T22:35:42Z", "closed_at": "2015-08-05T19:35:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not sure if this issue is related to https://github.com/circus-tent/circus/issues/884 but the symptoms seem slightly different\n\nI have a watcher configured as follows:\n\n```\n[watcher:consul]\ncmd = /usr/bin/consul\nargs = agent -config-dir /etc/consul -data-dir /var/lib/consul\nuid = consul\ngid = consul\n\nstdout_stream.class = FileStream\nstdout_stream.max_bytes = 1048576\nstdout_stream.backup_count = 7\nstdout_stream.filename = /var/log/circus/consul.log\n\nstderr_stream.class = FileStream\nstderr_stream.max_bytes = 1048576\nstderr_stream.backup_count = 7\nstderr_stream.filename = /var/log/circus/consul_err.log\n\n[env:consul]\nGOMAXPROCS=2\n```\n\nLogging to /var/log/circus/consul.log works fine unless I stop and start the watcher:\n\n```\ncircusctl stop consul\ncircusctl start consul\n```\n\nAt this point, nothing is written to /var/log/circus/consul.log, and the following error is logged to the circusd.log file:\n\n```\n2015-07-22 17:07:37 tornado.application[8229] [ERROR] Exception in callback (4, <function null_wrapper at 0x7fce6849e0c8>)\nTraceback (most recent call last):\n  File \"/usr/share/circus/local/lib/python2.7/site-packages/tornado/ioloop.py\", line 866, in start\n    handler_func(fd_obj, events)\n  File \"/usr/share/circus/local/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/usr/share/circus/local/lib/python2.7/site-packages/circus/stream/redirector.py\", line 29, in __call__\n    self.redirector.redirect[self.name](datamap)\n  File \"/usr/share/circus/local/lib/python2.7/site-packages/circus/stream/file_stream.py\", line 105, in __call__\n    if self._should_rollover(data['data']):\n  File \"/usr/share/circus/local/lib/python2.7/site-packages/circus/stream/file_stream.py\", line 143, in _should_rollover\n    self._file.seek(0, 2)  # due to non-posix-compliant Windows feature\nValueError: I/O operation on closed file\n```\n\nThe only way to fix it is to stop and start circusd.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/911", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/911/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/911/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/911/events", "html_url": "https://github.com/circus-tent/circus/issues/911", "id": 95530664, "node_id": "MDU6SXNzdWU5NTUzMDY2NA==", "number": 911, "title": "How to set bash shell", "user": {"login": "amankumarjain", "id": 11255032, "node_id": "MDQ6VXNlcjExMjU1MDMy", "avatar_url": "https://avatars3.githubusercontent.com/u/11255032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amankumarjain", "html_url": "https://github.com/amankumarjain", "followers_url": "https://api.github.com/users/amankumarjain/followers", "following_url": "https://api.github.com/users/amankumarjain/following{/other_user}", "gists_url": "https://api.github.com/users/amankumarjain/gists{/gist_id}", "starred_url": "https://api.github.com/users/amankumarjain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amankumarjain/subscriptions", "organizations_url": "https://api.github.com/users/amankumarjain/orgs", "repos_url": "https://api.github.com/users/amankumarjain/repos", "events_url": "https://api.github.com/users/amankumarjain/events{/privacy}", "received_events_url": "https://api.github.com/users/amankumarjain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}, {"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-07-16T21:11:14Z", "updated_at": "2016-06-12T13:08:36Z", "closed_at": "2016-06-12T13:08:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "[env: program]\n\nSHELL = /bin/bash\n\nThis setting doesnot work, whats the other way around.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/908", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/908/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/908/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/908/events", "html_url": "https://github.com/circus-tent/circus/issues/908", "id": 89758290, "node_id": "MDU6SXNzdWU4OTc1ODI5MA==", "number": 908, "title": "please ask for confirmation when \"quit\" command is issued from circusctl shell", "user": {"login": "dPeS", "id": 4797605, "node_id": "MDQ6VXNlcjQ3OTc2MDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4797605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dPeS", "html_url": "https://github.com/dPeS", "followers_url": "https://api.github.com/users/dPeS/followers", "following_url": "https://api.github.com/users/dPeS/following{/other_user}", "gists_url": "https://api.github.com/users/dPeS/gists{/gist_id}", "starred_url": "https://api.github.com/users/dPeS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dPeS/subscriptions", "organizations_url": "https://api.github.com/users/dPeS/orgs", "repos_url": "https://api.github.com/users/dPeS/repos", "events_url": "https://api.github.com/users/dPeS/events{/privacy}", "received_events_url": "https://api.github.com/users/dPeS/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-06-20T11:39:39Z", "updated_at": "2016-06-12T13:06:46Z", "closed_at": "2016-06-12T13:06:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "for eg: \"are You sure want to DISABLE circus ? type yes to confirm: \" \nthat's a really good idea, believe me :)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/906", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/906/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/906/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/906/events", "html_url": "https://github.com/circus-tent/circus/issues/906", "id": 87379777, "node_id": "MDU6SXNzdWU4NzM3OTc3Nw==", "number": 906, "title": "circusctl reload vs restart for continuous deployment?", "user": {"login": "AdrianLC", "id": 1199046, "node_id": "MDQ6VXNlcjExOTkwNDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1199046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdrianLC", "html_url": "https://github.com/AdrianLC", "followers_url": "https://api.github.com/users/AdrianLC/followers", "following_url": "https://api.github.com/users/AdrianLC/following{/other_user}", "gists_url": "https://api.github.com/users/AdrianLC/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdrianLC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdrianLC/subscriptions", "organizations_url": "https://api.github.com/users/AdrianLC/orgs", "repos_url": "https://api.github.com/users/AdrianLC/repos", "events_url": "https://api.github.com/users/AdrianLC/events{/privacy}", "received_events_url": "https://api.github.com/users/AdrianLC/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-06-11T15:12:37Z", "updated_at": "2015-09-18T07:37:33Z", "closed_at": "2015-09-18T07:37:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nI have been trying to understand the difference between this two commands.\n\nThe man does not say much:\n\n```\nreload: Reload the arbiter or a watcher\nrestart: Restart the arbiter or a watcher\n```\n\n(and then there's some info about the signals under `reload`)\n\nI see in the code that `reload` calls `restart` internally, so I assume that it's a restart with some additional steps.\n\nCould someone explain, please? I would be interested in knowing which of the two should I be calling to restart our worker processes (celery) gracefully. We are having serious trouble with the old processes never stopping and always assumed it to be a bug on celery... but we recently changed the stop signal to KILL and even that will not kill them.\n\nAlso, we have a buildbot restarting the whole circusd instance with ansible. This should restart all the watchers, right?\n\nI tried to avoid creating an issue for questions, but could not find answers anywhere else. Sorry :(\n\nThank you,\nAdri\u00e1n\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/904", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/904/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/904/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/904/events", "html_url": "https://github.com/circus-tent/circus/issues/904", "id": 82327390, "node_id": "MDU6SXNzdWU4MjMyNzM5MA==", "number": 904, "title": "Use API to manage processes dynamically", "user": {"login": "owais", "id": 46186, "node_id": "MDQ6VXNlcjQ2MTg2", "avatar_url": "https://avatars0.githubusercontent.com/u/46186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/owais", "html_url": "https://github.com/owais", "followers_url": "https://api.github.com/users/owais/followers", "following_url": "https://api.github.com/users/owais/following{/other_user}", "gists_url": "https://api.github.com/users/owais/gists{/gist_id}", "starred_url": "https://api.github.com/users/owais/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/owais/subscriptions", "organizations_url": "https://api.github.com/users/owais/orgs", "repos_url": "https://api.github.com/users/owais/repos", "events_url": "https://api.github.com/users/owais/events{/privacy}", "received_events_url": "https://api.github.com/users/owais/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-05-29T08:19:27Z", "updated_at": "2015-06-02T14:17:24Z", "closed_at": "2015-06-02T12:41:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to manage processes dynamically through an API (or CLI or ZMQ) instead of defining in the config file?\n\nI'm imagining an API like this,\n\n``` python\nprocess = circus.spawn_and_manage('/path/to/bin', {'--someParameter': 'someValue'})\n```\n\nThis manages the process as if it was found in the config file. I can use the API to get status of the process or remove it.\n\n``` python\ncircus.kill_and_remove(process)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/900", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/900/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/900/events", "html_url": "https://github.com/circus-tent/circus/issues/900", "id": 78584442, "node_id": "MDU6SXNzdWU3ODU4NDQ0Mg==", "number": 900, "title": "why is synchronized global", "user": {"login": "matleh", "id": 84861, "node_id": "MDQ6VXNlcjg0ODYx", "avatar_url": "https://avatars2.githubusercontent.com/u/84861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matleh", "html_url": "https://github.com/matleh", "followers_url": "https://api.github.com/users/matleh/followers", "following_url": "https://api.github.com/users/matleh/following{/other_user}", "gists_url": "https://api.github.com/users/matleh/gists{/gist_id}", "starred_url": "https://api.github.com/users/matleh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matleh/subscriptions", "organizations_url": "https://api.github.com/users/matleh/orgs", "repos_url": "https://api.github.com/users/matleh/repos", "events_url": "https://api.github.com/users/matleh/events{/privacy}", "received_events_url": "https://api.github.com/users/matleh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-05-20T16:05:00Z", "updated_at": "2016-06-14T12:23:19Z", "closed_at": "2016-06-14T12:23:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Several commands (e.g. `stop`) are `synchronized` which means, that only one of them can run at the same time. This has the effect that if I issue several `stop` commands with `waiting=False`, the latter ones will fail since the first one is still running.\n\nIs it really necessary for `synchronized` to be global or could it be sufficient to work on a per watcher level? This way, I could issue several stop commands with `waiting=False` for different watchers.\n\nMy use case is the following: I use circus as a process manager for an application which consists of several processes (obviously). Over a REST-API, I can stop (and later start) groups of processes - so I want the REST-call to return as quick as possible (`waiting=False`). The client can poll the result later with another REST-call.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/895", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/895/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/895/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/895/events", "html_url": "https://github.com/circus-tent/circus/issues/895", "id": 76083128, "node_id": "MDU6SXNzdWU3NjA4MzEyOA==", "number": 895, "title": "More python 3.4 issues", "user": {"login": "abadger1406", "id": 634924, "node_id": "MDQ6VXNlcjYzNDkyNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/634924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abadger1406", "html_url": "https://github.com/abadger1406", "followers_url": "https://api.github.com/users/abadger1406/followers", "following_url": "https://api.github.com/users/abadger1406/following{/other_user}", "gists_url": "https://api.github.com/users/abadger1406/gists{/gist_id}", "starred_url": "https://api.github.com/users/abadger1406/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abadger1406/subscriptions", "organizations_url": "https://api.github.com/users/abadger1406/orgs", "repos_url": "https://api.github.com/users/abadger1406/repos", "events_url": "https://api.github.com/users/abadger1406/events{/privacy}", "received_events_url": "https://api.github.com/users/abadger1406/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-13T18:42:07Z", "updated_at": "2015-05-15T12:55:15Z", "closed_at": "2015-05-15T12:55:15Z", "author_association": "NONE", "active_lock_reason": null, "body": " import urlparse\nImportError: No module named 'urlparse'\n\nThink this has changed name in python 3.4\n\n'%s\"\\nInitial error: %s' % (reqs, str(e)))\nImportError: You need to install dependencies to run the webui. You can do so by using \"pip install -r /home/dave/ap/lib/python3.4/site-packages/circusweb/web-requirements.txt\"\nInitial error: No module named 'urlparse'\n\nBut the file /home/dave/ap/lib/python3.4/site-packages/circusweb/web-requirements.txt does not exist, and I cannot find it in my git clone....\n\nmust be doing something wrong in trying to get this running with python 3.4 ...\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/894", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/894/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/894/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/894/events", "html_url": "https://github.com/circus-tent/circus/issues/894", "id": 76079380, "node_id": "MDU6SXNzdWU3NjA3OTM4MA==", "number": 894, "title": "except ImportError, e      is not correct syntax for python 3.4", "user": {"login": "abadger1406", "id": 634924, "node_id": "MDQ6VXNlcjYzNDkyNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/634924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abadger1406", "html_url": "https://github.com/abadger1406", "followers_url": "https://api.github.com/users/abadger1406/followers", "following_url": "https://api.github.com/users/abadger1406/following{/other_user}", "gists_url": "https://api.github.com/users/abadger1406/gists{/gist_id}", "starred_url": "https://api.github.com/users/abadger1406/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abadger1406/subscriptions", "organizations_url": "https://api.github.com/users/abadger1406/orgs", "repos_url": "https://api.github.com/users/abadger1406/repos", "events_url": "https://api.github.com/users/abadger1406/events{/privacy}", "received_events_url": "https://api.github.com/users/abadger1406/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-13T18:29:46Z", "updated_at": "2015-05-15T12:54:33Z", "closed_at": "2015-05-15T12:54:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "2015-05-13 19:25:53 circus[2614] [INFO] Starting master on pid 2614\n2015-05-13 19:25:53 circus[2614] [INFO] sockets started\n2015-05-13 19:25:53 circus[2614] [INFO] Arbiter now waiting for commands\n2015-05-13 19:25:53 circus[2614] [INFO] web started\n2015-05-13 19:25:53 circus[2614] [INFO] circusd-stats started\n2015-05-13 19:25:53 circus[2614] [INFO] circushttpd started\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/home/dave/ap/lib/python3.4/site-packages/circusweb/circushttpd.py\", line 27\n    except ImportError, e:\n\nThink the syntax should be like:-\n\nhttp://stackoverflow.com/questions/19142231/cassandra-file-cqlsh-line-95-except-importerror-e\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/891", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/891/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/891/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/891/events", "html_url": "https://github.com/circus-tent/circus/issues/891", "id": 72954650, "node_id": "MDU6SXNzdWU3Mjk1NDY1MA==", "number": 891, "title": "Python 3.4 erro: RuntimeError: dictionary changed size during iteration", "user": {"login": "abadger1406", "id": 634924, "node_id": "MDQ6VXNlcjYzNDkyNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/634924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abadger1406", "html_url": "https://github.com/abadger1406", "followers_url": "https://api.github.com/users/abadger1406/followers", "following_url": "https://api.github.com/users/abadger1406/following{/other_user}", "gists_url": "https://api.github.com/users/abadger1406/gists{/gist_id}", "starred_url": "https://api.github.com/users/abadger1406/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abadger1406/subscriptions", "organizations_url": "https://api.github.com/users/abadger1406/orgs", "repos_url": "https://api.github.com/users/abadger1406/repos", "events_url": "https://api.github.com/users/abadger1406/events{/privacy}", "received_events_url": "https://api.github.com/users/abadger1406/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-04T08:15:00Z", "updated_at": "2015-05-13T11:12:49Z", "closed_at": "2015-05-04T09:03:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Another Python 3 error .... this is using 0.12.0 version of circus on\npython 3.4.....\n\n$ circus-top\nTraceback (most recent call last):\n  File \"/home/dave/ap/bin/circus-top\", line 9, in <module>\n    load_entry_point('circus==0.12.0', 'console_scripts', 'circus-top')()\n  File \"/home/dave/ap/lib/python3.4/site-packages/circus-0.12.0-py3.4.egg/circus/stats/client.py\",\nline 255, in main\n    for pid in filter(valid_pid, watchers[watcher]):\nRuntimeError: dictionary changed size during iteration\n(ap) dave@PenguinWee4:~/ap/ap/src$ circus-top\nTraceback (most recent call last):\n  File \"/home/dave/ap/bin/circus-top\", line 9, in <module>\n    load_entry_point('circus==0.12.0', 'console_scripts', 'circus-top')()\n  File \"/home/dave/ap/lib/python3.4/site-packages/circus-0.12.0-py3.4.egg/circus/stats/client.py\",\nline 255, in main\n    for pid in filter(valid_pid, watchers[watcher]):\nRuntimeError: dictionary changed size during iteration\n(ap) dave@PenguinWee4:~/ap/ap/src$ circus-top\nTraceback (most recent call last):\n  File \"/home/dave/ap/bin/circus-top\", line 9, in <module>\n    load_entry_point('circus==0.12.0', 'console_scripts', 'circus-top')()\n  File \"/home/dave/ap/lib/python3.4/site-packages/circus-0.12.0-py3.4.egg/circus/stats/client.py\",\nline 255, in main\n    for pid in filter(valid_pid, watchers[watcher]):\nRuntimeError: dictionary changed size during iteration\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/889", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/889/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/889/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/889/events", "html_url": "https://github.com/circus-tent/circus/issues/889", "id": 70793591, "node_id": "MDU6SXNzdWU3MDc5MzU5MQ==", "number": 889, "title": "Make a new release", "user": {"login": "josegonzalez", "id": 65675, "node_id": "MDQ6VXNlcjY1Njc1", "avatar_url": "https://avatars2.githubusercontent.com/u/65675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josegonzalez", "html_url": "https://github.com/josegonzalez", "followers_url": "https://api.github.com/users/josegonzalez/followers", "following_url": "https://api.github.com/users/josegonzalez/following{/other_user}", "gists_url": "https://api.github.com/users/josegonzalez/gists{/gist_id}", "starred_url": "https://api.github.com/users/josegonzalez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josegonzalez/subscriptions", "organizations_url": "https://api.github.com/users/josegonzalez/orgs", "repos_url": "https://api.github.com/users/josegonzalez/repos", "events_url": "https://api.github.com/users/josegonzalez/events{/privacy}", "received_events_url": "https://api.github.com/users/josegonzalez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-04-24T21:05:44Z", "updated_at": "2015-06-04T13:24:54Z", "closed_at": "2015-06-04T13:24:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Would be nice to get any enhancements etc. out in a \"stable\" release. Is there a roadmap somewhere where we might be able to see what blockers are around for cutting a release?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/884", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/884/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/884/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/884/events", "html_url": "https://github.com/circus-tent/circus/issues/884", "id": 68205038, "node_id": "MDU6SXNzdWU2ODIwNTAzOA==", "number": 884, "title": "'circusctl stop' does not release log file handles", "user": {"login": "bengecko", "id": 8965038, "node_id": "MDQ6VXNlcjg5NjUwMzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8965038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bengecko", "html_url": "https://github.com/bengecko", "followers_url": "https://api.github.com/users/bengecko/followers", "following_url": "https://api.github.com/users/bengecko/following{/other_user}", "gists_url": "https://api.github.com/users/bengecko/gists{/gist_id}", "starred_url": "https://api.github.com/users/bengecko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bengecko/subscriptions", "organizations_url": "https://api.github.com/users/bengecko/orgs", "repos_url": "https://api.github.com/users/bengecko/repos", "events_url": "https://api.github.com/users/bengecko/events{/privacy}", "received_events_url": "https://api.github.com/users/bengecko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-04-13T22:06:58Z", "updated_at": "2016-06-12T21:24:07Z", "closed_at": "2016-06-12T21:24:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running circusd around a linux process, everything works with logging, options, etc. except when stopping the process using 'circusctl stop' the log file handle is still left open. I had to quit circusd altogether to let the filehandle go. \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/circus-tent/circus/issues/883", "repository_url": "https://api.github.com/repos/circus-tent/circus", "labels_url": "https://api.github.com/repos/circus-tent/circus/issues/883/labels{/name}", "comments_url": "https://api.github.com/repos/circus-tent/circus/issues/883/comments", "events_url": "https://api.github.com/repos/circus-tent/circus/issues/883/events", "html_url": "https://github.com/circus-tent/circus/issues/883", "id": 66140431, "node_id": "MDU6SXNzdWU2NjE0MDQzMQ==", "number": 883, "title": "Watcher performance issue", "user": {"login": "b4stien", "id": 1778107, "node_id": "MDQ6VXNlcjE3NzgxMDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1778107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b4stien", "html_url": "https://github.com/b4stien", "followers_url": "https://api.github.com/users/b4stien/followers", "following_url": "https://api.github.com/users/b4stien/following{/other_user}", "gists_url": "https://api.github.com/users/b4stien/gists{/gist_id}", "starred_url": "https://api.github.com/users/b4stien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b4stien/subscriptions", "organizations_url": "https://api.github.com/users/b4stien/orgs", "repos_url": "https://api.github.com/users/b4stien/repos", "events_url": "https://api.github.com/users/b4stien/events{/privacy}", "received_events_url": "https://api.github.com/users/b4stien/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 391091984, "node_id": "MDU6TGFiZWwzOTEwOTE5ODQ=", "url": "https://api.github.com/repos/circus-tent/circus/labels/need%20more%20info", "name": "need more info", "color": "e99695", "default": false, "description": "Issue requires more information from poster"}, {"id": 391093086, "node_id": "MDU6TGFiZWwzOTEwOTMwODY=", "url": "https://api.github.com/repos/circus-tent/circus/labels/question", "name": "question", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-04-03T12:46:08Z", "updated_at": "2016-06-12T15:17:23Z", "closed_at": "2016-06-12T15:17:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently ran into a really weird performance issue which lead me to write this SO question: http://stackoverflow.com/questions/29379868/celery-important-slowdown-on-subprocess.\n\nAfter investigating a bit it turned out that Celery was taking 3x more time to process my job when launched/managed by Circus than it took when launched \"manually\" (or supervised by Supervisor).\n\nMy config file for this watcher was (as far as I can remember - I didn't keep an exact copy, sorry):\n\n```\n[watcher:foo-celery]\ncmd = /home/admin/.envs/foo/bin/celery -A foo.celery worker --loglevel=info -B\ncopy_env = True\nvirtualenv = /home/admin/.envs/foo/\n\nuid = admin\nworking_dir = /home/admin/foo/\n\nstderr_stream.class = FileStream\nstderr_stream.filename = /home/admin/foo/logs/celery.log\n```\n\nI'm sorry I don't have the time to give you a clean reproducible example.\n\nAnd btw it's not Celery specific: I switched to rq to see if it wasn't coming from there, and the results were the same.\n", "performed_via_github_app": null, "score": 1.0}]}