{"total_count": 47, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/165", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/165/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/165/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/165", "id": 636562298, "node_id": "MDU6SXNzdWU2MzY1NjIyOTg=", "number": 165, "title": "How to send logs to FluentD remotely from GCP?", "user": {"login": "rileyhun", "id": 20649466, "node_id": "MDQ6VXNlcjIwNjQ5NDY2", "avatar_url": "https://avatars1.githubusercontent.com/u/20649466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rileyhun", "html_url": "https://github.com/rileyhun", "followers_url": "https://api.github.com/users/rileyhun/followers", "following_url": "https://api.github.com/users/rileyhun/following{/other_user}", "gists_url": "https://api.github.com/users/rileyhun/gists{/gist_id}", "starred_url": "https://api.github.com/users/rileyhun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rileyhun/subscriptions", "organizations_url": "https://api.github.com/users/rileyhun/orgs", "repos_url": "https://api.github.com/users/rileyhun/repos", "events_url": "https://api.github.com/users/rileyhun/events{/privacy}", "received_events_url": "https://api.github.com/users/rileyhun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-10T21:29:33Z", "updated_at": "2020-06-10T23:20:27Z", "closed_at": "2020-06-10T23:20:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've already deployed FluentD to Kubernetes successfully, but I'm a little confused as to what is the name of the fluentd host to pass into my Flask Application. Is it \"elasticsearch-client.infra.svc.cluster.local\"? Does anyone have any guidance or instruction on this? Pardon my ignorance.\r\n\r\nHere are my example files\r\n\r\n**config map**\r\n\r\n```\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: fluentd-config\r\n  namespace: infra\r\ndata:\r\n  fluent.conf: |\r\n    <match fluent.**>\r\n        # this tells fluentd to not output its log on stdout\r\n        @type null\r\n    </match>\r\n    # here we read the logs from Docker's containers and parse them\r\n    <source>\r\n      @type tail\r\n      path /var/log/containers/*.log\r\n      pos_file /var/log/app.log.pos\r\n      tag kubernetes.*\r\n      read_from_head true\r\n      <parse>\r\n        @type json\r\n        time_format %Y-%m-%dT%H:%M:%S.%NZ\r\n      </parse>\r\n    </source>\r\n    # we use kubernetes metadata plugin to add metadatas to the log\r\n    <filter kubernetes.**>\r\n        @type kubernetes_metadata\r\n    </filter>\r\n\r\n    # takes the messages sent over TCP\r\n    <source>\r\n      @type forward\r\n      port 24224\r\n    </source>\r\n\r\n    <match app.**>\r\n      @type stdout\r\n    </match>\r\n\r\n     # we send the logs to Elasticsearch\r\n    <match **>\r\n       @type elasticsearch_dynamic\r\n       @log_level info\r\n       include_tag_key true\r\n       host \"#{ENV['FLUENT_ELASTICSEARCH_HOST']}\"\r\n       port \"#{ENV['FLUENT_ELASTICSEARCH_PORT']}\"\r\n       user \"#{ENV['FLUENT_ELASTICSEARCH_USER']}\"\r\n       password \"#{ENV['FLUENT_ELASTICSEARCH_PASSWORD']}\"\r\n       scheme \"#{ENV['FLUENT_ELASTICSEARCH_SCHEME'] || 'http'}\"\r\n       ssl_verify \"#{ENV['FLUENT_ELASTICSEARCH_SSL_VERIFY'] || 'true'}\"\r\n       reload_connections true\r\n       logstash_format true\r\n       logstash_prefix logstash\r\n       <buffer>\r\n           @type file\r\n           path /var/log/fluentd-buffers/kubernetes.system.buffer\r\n           flush_mode interval\r\n           retry_type exponential_backoff\r\n           flush_thread_count 2\r\n           flush_interval 5s\r\n           retry_forever true\r\n           retry_max_interval 30\r\n           chunk_limit_size 2M\r\n           queue_limit_length 32\r\n           overflow_action block\r\n       </buffer>\r\n    </match>\r\n```\r\n\r\n**daemon-set file**\r\n\r\n```\r\napiVersion: v1\r\nkind: ServiceAccount\r\nmetadata:\r\n  name: fluentd\r\n  namespace: infra\r\n---\r\napiVersion: rbac.authorization.k8s.io/v1beta1\r\nkind: ClusterRole\r\nmetadata:\r\n  name: fluentd\r\n  namespace: infra\r\nrules:\r\n- apiGroups:\r\n  - \"\"\r\n  resources:\r\n  - pods\r\n  - namespaces\r\n  verbs:\r\n  - get\r\n  - list\r\n  - watch\r\n---\r\nkind: ClusterRoleBinding\r\napiVersion: rbac.authorization.k8s.io/v1beta1\r\nmetadata:\r\n  name: fluentd\r\nroleRef:\r\n  kind: ClusterRole\r\n  name: fluentd\r\n  apiGroup: rbac.authorization.k8s.io\r\nsubjects:\r\n- kind: ServiceAccount\r\n  name: fluentd\r\n  namespace: infra\r\n---\r\napiVersion: extensions/v1beta1\r\nkind: DaemonSet\r\nmetadata:\r\n  name: fluentd\r\n  namespace: infra\r\n  labels:\r\n    k8s-app: fluentd-logging\r\n    version: v1\r\n    kubernetes.io/cluster-service: \"true\"\r\nspec:\r\n  template:\r\n    metadata:\r\n      labels:\r\n        k8s-app: fluentd-logging\r\n        version: v1\r\n        kubernetes.io/cluster-service: \"true\"\r\n    spec:\r\n      serviceAccount: fluentd # if RBAC is enabled\r\n      serviceAccountName: fluentd # if RBAC is enabled\r\n      tolerations:\r\n      - key: node-role.kubernetes.io/master\r\n        effect: NoSchedule\r\n      containers:\r\n      - name: fluentd\r\n        image: fluent/fluentd-kubernetes-daemonset:v1.1-debian-elasticsearch\r\n        env:\r\n        - name:  FLUENT_ELASTICSEARCH_HOST\r\n          value: \"elasticsearch-client.infra.svc.cluster.local\"\r\n        - name:  FLUENT_ELASTICSEARCH_PORT\r\n          value: \"80\"\r\n        - name: FLUENT_ELASTICSEARCH_SCHEME\r\n          value: \"http\"\r\n        - name: FLUENT_ELASTICSEARCH_USER # even if not used they are necessary\r\n          value: \"elastic\"\r\n        - name: FLUENT_ELASTICSEARCH_PASSWORD # even if not used they are necessary\r\n          valueFrom:\r\n            secretKeyRef:\r\n              name: elasticsearch-pw-elastic\r\n              key: password\r\n        resources:\r\n          limits:\r\n            memory: 200Mi\r\n          requests:\r\n            cpu: 100m\r\n            memory: 200Mi\r\n        volumeMounts:\r\n        - name: varlog\r\n          mountPath: /var/log\r\n        - name: varlibdockercontainers\r\n          mountPath: /var/lib/docker/containers\r\n          readOnly: true\r\n        - name: fluentd-config\r\n          mountPath: /fluentd/etc # path of fluentd config file\r\n      terminationGracePeriodSeconds: 30\r\n      volumes:\r\n      - name: varlog\r\n        hostPath:\r\n          path: /var/log\r\n      - name: varlibdockercontainers\r\n        hostPath:\r\n          path: /var/lib/docker/containers\r\n      - name: fluentd-config\r\n        configMap:\r\n          name: fluentd-config # name of the config map we will create\r\n```\r\n\r\n**flask application controller**\r\n\r\n```\r\nfrom flask import request, abort\r\nfrom flask_restplus import Resource\r\nfrom ..util.dto import ModelServiceDto\r\nimport numpy as np\r\nimport pandas as pd\r\nimport mlflow.sklearn\r\nimport os\r\nfrom fluent import sender, event\r\n\r\nTENANT = os.getenv('TENANT', 'local')\r\nFLUENTD_HOST = os.getenv('FLUENTD_HOST')\r\nFLUENTD_PORT = os.getenv('FLUENTD_PORT')\r\n\r\n# load model\r\nmlflow.set_tracking_uri(os.environ['MLFLOW_TRACKING_URI'])\r\nmlflow.set_experiment('clean_customer_data')\r\nruns = mlflow.search_runs()\r\nruns = runs[runs['tags.mlflow.runName'] == 'military_gov_entities']\r\nartifact_uri = runs.loc[runs['start_time'].idxmax()]['artifact_uri']\r\n\r\nmodel = mlflow.sklearn.load_model(artifact_uri + '/model')\r\n\r\napi = ModelServiceDto.api\r\n_entities = ModelServiceDto.entities\r\n\r\n@api.errorhandler(Exception)\r\ndef handle_custom_exception(error):\r\n    \"\"\"Return a custom message and status code\"\"\"\r\n    return {'error': {'entity_name': \"'entity_name' cannot be empty list\"},\r\n            'message': str(error)}, error.code\r\n\r\n@api.route('/predict')\r\nclass PredictiveModel(Resource):\r\n\r\n    @api.expect(_entities, validate=True)\r\n    @api.doc('classify entity as military/government/other')\r\n    def post(self):\r\n        data = request.json['entity_name']\r\n        if not data:\r\n            abort(400)\r\n\r\n        input_data = np.array(data)\r\n        predictions = model.predict(input_data)\r\n        prediction_probs = pd.DataFrame(model.predict_proba(input_data), columns=model.classes_)\r\n        prediction_probs['confidence'] = prediction_probs.max(axis=1)\r\n        res = pd.DataFrame({'entity_name': input_data,\r\n                             'predicted_classification': predictions,\r\n                             'probability score': prediction_probs['confidence'].tolist()}).to_dict(orient='records')\r\n        if FLUENTD_HOST:\r\n            logger = sender.FluentSender(TENANT, host=FLUENTD_HOST, port=int(FLUENTD_PORT))\r\n            for r in res:\r\n                print('logging {}'.format(r))\r\n                if not logger.emit('prediction', r):\r\n                    print(logger.last_error)\r\n                    logger.clear_last_error()\r\n\r\n            logger.close()\r\n        return res\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/161", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/161/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/161/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/161", "id": 578722415, "node_id": "MDU6SXNzdWU1Nzg3MjI0MTU=", "number": 161, "title": "Relax top end of Python version range specifier?", "user": {"login": "seansfkelley", "id": 2101409, "node_id": "MDQ6VXNlcjIxMDE0MDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2101409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seansfkelley", "html_url": "https://github.com/seansfkelley", "followers_url": "https://api.github.com/users/seansfkelley/followers", "following_url": "https://api.github.com/users/seansfkelley/following{/other_user}", "gists_url": "https://api.github.com/users/seansfkelley/gists{/gist_id}", "starred_url": "https://api.github.com/users/seansfkelley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seansfkelley/subscriptions", "organizations_url": "https://api.github.com/users/seansfkelley/orgs", "repos_url": "https://api.github.com/users/seansfkelley/repos", "events_url": "https://api.github.com/users/seansfkelley/events{/privacy}", "received_events_url": "https://api.github.com/users/seansfkelley/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-10T16:51:25Z", "updated_at": "2020-03-10T20:06:00Z", "closed_at": "2020-03-10T20:06:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Would it be possible to relax the Python version specifier\r\n\r\nhttps://github.com/fluent/fluent-logger-python/blob/e00bcdd8ee2bd36e470460770cb7ab8b91fa3f87/setup.py#L40\r\n\r\nto not put a cap on the highest supported version? This is singlehandedly requiring all of the repos in my product to specify the same `<` rules as fluent-logger-python even though we control our Python version and generally support the latest release. \r\n\r\nDoes fluent-logger-python do anything sufficiently weird that you would expect it to break on minor language versions? https://github.com/fluent/fluent-logger-python/issues/148 suggests \"not really\", and I would prefer to not block our language upgrades on fluent-logger-python when the duck types are likely to just work!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/157", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/157/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/157/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/157", "id": 568608252, "node_id": "MDU6SXNzdWU1Njg2MDgyNTI=", "number": 157, "title": "msgpack 1.0.0 changes default string encoding / breaks fluentbit communication", "user": {"login": "ptramsey", "id": 1173282, "node_id": "MDQ6VXNlcjExNzMyODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1173282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptramsey", "html_url": "https://github.com/ptramsey", "followers_url": "https://api.github.com/users/ptramsey/followers", "following_url": "https://api.github.com/users/ptramsey/following{/other_user}", "gists_url": "https://api.github.com/users/ptramsey/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptramsey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptramsey/subscriptions", "organizations_url": "https://api.github.com/users/ptramsey/orgs", "repos_url": "https://api.github.com/users/ptramsey/repos", "events_url": "https://api.github.com/users/ptramsey/events{/privacy}", "received_events_url": "https://api.github.com/users/ptramsey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T22:15:50Z", "updated_at": "2020-02-24T11:11:27Z", "closed_at": "2020-02-24T11:11:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://pypi.org/project/msgpack/1.0.0/ -- see the section, \"Major breaking changes in 1.0\": \r\n\r\n> use_bin_type=True by default. bytes are encoded in bin type in msgpack. If you are still sing Python 2, you must use unicode for all string types. You can use use_bin_type=False to encode into old msgpack format.\r\n\r\nif use_bin_type=False isn't passed to FluentSender in msgpack_kwargs, fluentbit will see that the first element of each received message is not of type MSGPACK_OBJECT_STR, and refuse to enqueue the message.  If you have debug output turned on in fluent-bit, you should see it output a message like,\r\n\r\n```\r\n[2020/02/20 21:19:55] [debug] [in_fw] parser: invalid tag format, skip.\r\n```\r\n\r\nI have verified that this happens in fluent-bit 1.3.5, and while I haven't tried it using 1.3.8, the relevant code in that release appears unchanged.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/155", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/155/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/155/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/155", "id": 531690560, "node_id": "MDU6SXNzdWU1MzE2OTA1NjA=", "number": 155, "title": "allow reading some configuration options from environment variables", "user": {"login": "jshen28", "id": 13613955, "node_id": "MDQ6VXNlcjEzNjEzOTU1", "avatar_url": "https://avatars1.githubusercontent.com/u/13613955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jshen28", "html_url": "https://github.com/jshen28", "followers_url": "https://api.github.com/users/jshen28/followers", "following_url": "https://api.github.com/users/jshen28/following{/other_user}", "gists_url": "https://api.github.com/users/jshen28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jshen28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jshen28/subscriptions", "organizations_url": "https://api.github.com/users/jshen28/orgs", "repos_url": "https://api.github.com/users/jshen28/repos", "events_url": "https://api.github.com/users/jshen28/events{/privacy}", "received_events_url": "https://api.github.com/users/jshen28/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-03T03:29:43Z", "updated_at": "2019-12-06T08:41:14Z", "closed_at": "2019-12-06T08:41:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, do you think it is a good idea to allow some some options, such as `host`, `port`, to be configured from environment variables?\r\n\r\nfor example, here https://github.com/fluent/fluent-logger-python/blob/a37f31362fa89bfe9c3f701c91122fcc0dc8ebaa/fluent/handler.py#L185 , host has to be configured explicitly during object initialization.\r\n\r\nBy using enviroment variables, i think it will be more flexible for applications running in Kubernetes to get different addresses for each specific pod.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/153", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/153/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/153/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/153/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/153", "id": 524163844, "node_id": "MDU6SXNzdWU1MjQxNjM4NDQ=", "number": 153, "title": "oslo.log config", "user": {"login": "xidiandb", "id": 12483608, "node_id": "MDQ6VXNlcjEyNDgzNjA4", "avatar_url": "https://avatars0.githubusercontent.com/u/12483608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xidiandb", "html_url": "https://github.com/xidiandb", "followers_url": "https://api.github.com/users/xidiandb/followers", "following_url": "https://api.github.com/users/xidiandb/following{/other_user}", "gists_url": "https://api.github.com/users/xidiandb/gists{/gist_id}", "starred_url": "https://api.github.com/users/xidiandb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xidiandb/subscriptions", "organizations_url": "https://api.github.com/users/xidiandb/orgs", "repos_url": "https://api.github.com/users/xidiandb/repos", "events_url": "https://api.github.com/users/xidiandb/events{/privacy}", "received_events_url": "https://api.github.com/users/xidiandb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-18T06:32:48Z", "updated_at": "2019-11-18T06:34:17Z", "closed_at": "2019-11-18T06:34:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I encountered one such bug.I use k8s to deploy my application,and send the log to fluentd.However, when fluentd's pod dies, fluentd's service is still normal.At this time, my openstack application will not start up and will keep trying to connect fluentd's service.\r\nIs there anyone who can help me?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/150", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/150/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/150/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/150", "id": 508011713, "node_id": "MDU6SXNzdWU1MDgwMTE3MTM=", "number": 150, "title": "URGENT: Failed to publish to PyPi", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-16T18:06:40Z", "updated_at": "2019-10-16T21:04:18Z", "closed_at": "2019-10-16T21:04:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@repeatedly,\r\nCould you please either verify your PyPI account or grant `arcivanov` owner privileges on PyPi.\r\n\r\n```\r\nUploading fluent_logger-0.9.4-py2.py3-none-any.whl\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 27.9k/27.9k [00:00<00:00, 43.3kB/s]\r\nNOTE: Try --verbose to see response content.\r\nHTTPError: 400 Client Error: User 'repeatedly' does not have a verified primary email address. Please add a verified primary email before attempting to upload to PyPI. See https://pypi.org/help/#verified-email for more information.for more information. for url: https://upload.pypi.org/legacy/\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/148", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/148/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/148/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/148", "id": 507930989, "node_id": "MDU6SXNzdWU1MDc5MzA5ODk=", "number": 148, "title": "Package does not support python 3.8", "user": {"login": "klarose", "id": 23175939, "node_id": "MDQ6VXNlcjIzMTc1OTM5", "avatar_url": "https://avatars1.githubusercontent.com/u/23175939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klarose", "html_url": "https://github.com/klarose", "followers_url": "https://api.github.com/users/klarose/followers", "following_url": "https://api.github.com/users/klarose/following{/other_user}", "gists_url": "https://api.github.com/users/klarose/gists{/gist_id}", "starred_url": "https://api.github.com/users/klarose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klarose/subscriptions", "organizations_url": "https://api.github.com/users/klarose/orgs", "repos_url": "https://api.github.com/users/klarose/repos", "events_url": "https://api.github.com/users/klarose/events{/privacy}", "received_events_url": "https://api.github.com/users/klarose/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-16T15:34:06Z", "updated_at": "2019-10-16T18:51:37Z", "closed_at": "2019-10-16T17:52:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Python 3.8 was recently released. It'd be nice if this package would work with it. Currently it is excluded by setup.py.\r\n\r\nWhen I try to install it in python3.8 it fails:\r\n\r\n```\r\ndocker run --rm -ti --entrypoint=pip3 python:3.8 install 'fluent-logger<0.10.0,>=0.9.3'\r\nUnable to find image 'python:3.8' locally\r\n3.8: Pulling from library/python\r\nDigest: sha256:f2157e214fc01e5cc4a1991728870fef889a7034a117886429bd9ce8edc129ab\r\nStatus: Downloaded newer image for python:3.8\r\nERROR: Could not find a version that satisfies the requirement fluent-logger<0.10.0,>=0.9.3 (from versions: 0.1.0, 0.1.1, 0.2.0, 0.3.0, 0.3.1, 0.3.2, 0.3.3, 0.3.4, 0.3.5, 0.4.0, 0.4.1, 0.4.2, 0.4.3, 0.4.4, 0.4.5, 0.4.6, 0.5.0, 0.5.1, 0.5.2, 0.5.3, 0.6.0, 0.6.1, 0.6.2, 0.7.0)\r\nERROR: No matching distribution found for fluent-logger<0.10.0,>=0.9.3\r\n```\r\n\r\nThis works fine for python 3.7:\r\n\r\n```\r\n docker run --rm -ti --entrypoint=pip3 python:3.7 install 'fluent-logger<0.10.0,>=0.9.3'\r\nCollecting fluent-logger<0.10.0,>=0.9.3\r\n  Downloading https://files.pythonhosted.org/packages/7b/bd/ca035aa263f98d0d5ca3b6ffbaa8289eac5f97e1fd07f04baa7c3e088d5d/fluent_logger-0.9.3-py2.py3-none-any.whl\r\nCollecting msgpack (from fluent-logger<0.10.0,>=0.9.3)\r\n  Downloading https://files.pythonhosted.org/packages/25/f8/6009e73f5b08743718d0660a18ecbc44b013a68980347a3835b63e875cdb/msgpack-0.6.2-cp37-cp37m-manylinux1_x86_64.whl (243kB)\r\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 245kB 3.7MB/s \r\nInstalling collected packages: msgpack, fluent-logger\r\nSuccessfully installed fluent-logger-0.9.3 msgpack-0.6.2\r\nYou are using pip version 19.0.3, however version 19.3 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/147", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/147/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/147/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/147", "id": 496788151, "node_id": "MDU6SXNzdWU0OTY3ODgxNTE=", "number": 147, "title": "Is it possible to use fluent.asynchandler with Kubernetes DaemonSet", "user": {"login": "codeninja55", "id": 24749967, "node_id": "MDQ6VXNlcjI0NzQ5OTY3", "avatar_url": "https://avatars1.githubusercontent.com/u/24749967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codeninja55", "html_url": "https://github.com/codeninja55", "followers_url": "https://api.github.com/users/codeninja55/followers", "following_url": "https://api.github.com/users/codeninja55/following{/other_user}", "gists_url": "https://api.github.com/users/codeninja55/gists{/gist_id}", "starred_url": "https://api.github.com/users/codeninja55/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codeninja55/subscriptions", "organizations_url": "https://api.github.com/users/codeninja55/orgs", "repos_url": "https://api.github.com/users/codeninja55/repos", "events_url": "https://api.github.com/users/codeninja55/events{/privacy}", "received_events_url": "https://api.github.com/users/codeninja55/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-22T14:42:43Z", "updated_at": "2019-09-22T21:08:55Z", "closed_at": "2019-09-22T21:08:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI currently have a deployment with a Kubernetes DaemonSet as per the official docs [here](https://github.com/fluent/fluentd-kubernetes-daemonset).\r\n\r\nIs it possible to send logs from my Flask pod to this daemonset as I cannot find any documentation or examples anywhere. \r\n\r\nAny other suggestions if this is not possible?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/145", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/145/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/145/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/145", "id": 390274272, "node_id": "MDU6SXNzdWUzOTAyNzQyNzI=", "number": 145, "title": "Configuration with fileConfig", "user": {"login": "viskoo", "id": 14157929, "node_id": "MDQ6VXNlcjE0MTU3OTI5", "avatar_url": "https://avatars0.githubusercontent.com/u/14157929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viskoo", "html_url": "https://github.com/viskoo", "followers_url": "https://api.github.com/users/viskoo/followers", "following_url": "https://api.github.com/users/viskoo/following{/other_user}", "gists_url": "https://api.github.com/users/viskoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/viskoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viskoo/subscriptions", "organizations_url": "https://api.github.com/users/viskoo/orgs", "repos_url": "https://api.github.com/users/viskoo/repos", "events_url": "https://api.github.com/users/viskoo/events{/privacy}", "received_events_url": "https://api.github.com/users/viskoo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-12T15:21:34Z", "updated_at": "2018-12-13T09:05:00Z", "closed_at": "2018-12-13T09:05:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have the problem with the python fileConfig parser, here is part of configuration that's causing problem\r\n```\r\n[handler_fluentdHandler]\r\nclass=fluent.handler.FluentHandler\r\nlevel=DEBUG\r\nhost=localhost\r\nport=12345\r\ntag=logging.local\r\nbuffer_overflow_handler=null\r\nformatter=fluentdFormater\r\nargs=(sys.stdout,)\r\n```\r\n\r\nI get the following error: \r\n`TypeError: can't serialize <open file '<stdout>', mode 'w' at 0x7f474dd74150>`\r\nand i can't leave out args because they are mandatory\r\n\r\nI have tried various options but can't seem to get it working", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/142", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/142/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/142/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/142", "id": 343298295, "node_id": "MDU6SXNzdWUzNDMyOTgyOTU=", "number": 142, "title": "Reconnect flow does not check for dead sockets", "user": {"login": "george-unbotify", "id": 39621872, "node_id": "MDQ6VXNlcjM5NjIxODcy", "avatar_url": "https://avatars1.githubusercontent.com/u/39621872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/george-unbotify", "html_url": "https://github.com/george-unbotify", "followers_url": "https://api.github.com/users/george-unbotify/followers", "following_url": "https://api.github.com/users/george-unbotify/following{/other_user}", "gists_url": "https://api.github.com/users/george-unbotify/gists{/gist_id}", "starred_url": "https://api.github.com/users/george-unbotify/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/george-unbotify/subscriptions", "organizations_url": "https://api.github.com/users/george-unbotify/orgs", "repos_url": "https://api.github.com/users/george-unbotify/repos", "events_url": "https://api.github.com/users/george-unbotify/events{/privacy}", "received_events_url": "https://api.github.com/users/george-unbotify/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-21T05:07:26Z", "updated_at": "2018-07-22T07:03:40Z", "closed_at": "2018-07-22T07:03:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that [reconnect()](https://github.com/fluent/fluent-logger-python/blob/master/fluent/sender.py#L199) only checks if socket exists and does not check for disconnected sockets.\r\n\r\nTo reproduce the issue:\r\n1. Run a python fluentd client and a fluentd service \r\n2. Send data from client to fluentd\r\n3. Restart fluentd while keeping client running\r\n4. Try to send data again to fluentd using same client\r\n\r\nStep 4 fails due to a connection reset by peer error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/141", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/141/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/141/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/141", "id": 327853326, "node_id": "MDU6SXNzdWUzMjc4NTMzMjY=", "number": 141, "title": "Question: how are handled IP changes of a hostname?", "user": {"login": "yangmillstheory", "id": 2729079, "node_id": "MDQ6VXNlcjI3MjkwNzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/2729079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yangmillstheory", "html_url": "https://github.com/yangmillstheory", "followers_url": "https://api.github.com/users/yangmillstheory/followers", "following_url": "https://api.github.com/users/yangmillstheory/following{/other_user}", "gists_url": "https://api.github.com/users/yangmillstheory/gists{/gist_id}", "starred_url": "https://api.github.com/users/yangmillstheory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yangmillstheory/subscriptions", "organizations_url": "https://api.github.com/users/yangmillstheory/orgs", "repos_url": "https://api.github.com/users/yangmillstheory/repos", "events_url": "https://api.github.com/users/yangmillstheory/events{/privacy}", "received_events_url": "https://api.github.com/users/yangmillstheory/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-30T18:44:50Z", "updated_at": "2018-05-30T21:22:25Z", "closed_at": "2018-05-30T21:22:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running this in an environment where hostnames point to ephemeral IPs, does the library do anything to resolve a new IP?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/140", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/140/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/140/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/140", "id": 326360066, "node_id": "MDU6SXNzdWUzMjYzNjAwNjY=", "number": 140, "title": "AttributeError: module 'fluent.asynchandler' has no attribute 'FluentRecordFormatter'", "user": {"login": "jiuchongxiao", "id": 13093730, "node_id": "MDQ6VXNlcjEzMDkzNzMw", "avatar_url": "https://avatars2.githubusercontent.com/u/13093730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiuchongxiao", "html_url": "https://github.com/jiuchongxiao", "followers_url": "https://api.github.com/users/jiuchongxiao/followers", "following_url": "https://api.github.com/users/jiuchongxiao/following{/other_user}", "gists_url": "https://api.github.com/users/jiuchongxiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiuchongxiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiuchongxiao/subscriptions", "organizations_url": "https://api.github.com/users/jiuchongxiao/orgs", "repos_url": "https://api.github.com/users/jiuchongxiao/repos", "events_url": "https://api.github.com/users/jiuchongxiao/events{/privacy}", "received_events_url": "https://api.github.com/users/jiuchongxiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 944107864, "node_id": "MDU6TGFiZWw5NDQxMDc4NjQ=", "url": "https://api.github.com/repos/fluent/fluent-logger-python/labels/invalid", "name": "invalid", "color": "d4c5f9", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-25T02:31:30Z", "updated_at": "2018-06-14T16:21:28Z", "closed_at": "2018-05-25T02:38:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "asyn loging has erro\r\nAttributeError: module 'fluent.asynchandler' has no attribute 'FluentRecordFormatter'\r\ndetail:\r\npython:3.6.5\r\npip:10.0.1\r\n![default](https://user-images.githubusercontent.com/13093730/40523111-bb3d9f26-6006-11e8-9c41-d1ef207295a6.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/139", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/139/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/139/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/139", "id": 326359584, "node_id": "MDU6SXNzdWUzMjYzNTk1ODQ=", "number": 139, "title": "AttributeError: 'NoneType' object has no attribute 'emit_with_time'", "user": {"login": "jiuchongxiao", "id": 13093730, "node_id": "MDQ6VXNlcjEzMDkzNzMw", "avatar_url": "https://avatars2.githubusercontent.com/u/13093730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiuchongxiao", "html_url": "https://github.com/jiuchongxiao", "followers_url": "https://api.github.com/users/jiuchongxiao/followers", "following_url": "https://api.github.com/users/jiuchongxiao/following{/other_user}", "gists_url": "https://api.github.com/users/jiuchongxiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiuchongxiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiuchongxiao/subscriptions", "organizations_url": "https://api.github.com/users/jiuchongxiao/orgs", "repos_url": "https://api.github.com/users/jiuchongxiao/repos", "events_url": "https://api.github.com/users/jiuchongxiao/events{/privacy}", "received_events_url": "https://api.github.com/users/jiuchongxiao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-25T02:28:19Z", "updated_at": "2018-05-25T06:10:01Z", "closed_at": "2018-05-25T02:36:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "asyncsender has erro\r\nAttributeError: 'NoneType' object has no attribute 'emit_with_time'\r\ndetail:\r\npython:3.6.5\r\npip:10.0.1 \r\n![default](https://user-images.githubusercontent.com/13093730/40522926-c131a5fe-6005-11e8-805d-3e2bfbec9d60.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/135", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/135/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/135/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/135", "id": 316968083, "node_id": "MDU6SXNzdWUzMTY5NjgwODM=", "number": 135, "title": "Asynchandler sending guarantees", "user": {"login": "yangmillstheory", "id": 2729079, "node_id": "MDQ6VXNlcjI3MjkwNzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/2729079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yangmillstheory", "html_url": "https://github.com/yangmillstheory", "followers_url": "https://api.github.com/users/yangmillstheory/followers", "following_url": "https://api.github.com/users/yangmillstheory/following{/other_user}", "gists_url": "https://api.github.com/users/yangmillstheory/gists{/gist_id}", "starred_url": "https://api.github.com/users/yangmillstheory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yangmillstheory/subscriptions", "organizations_url": "https://api.github.com/users/yangmillstheory/orgs", "repos_url": "https://api.github.com/users/yangmillstheory/repos", "events_url": "https://api.github.com/users/yangmillstheory/events{/privacy}", "received_events_url": "https://api.github.com/users/yangmillstheory/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-23T20:20:09Z", "updated_at": "2019-01-20T04:15:47Z", "closed_at": "2019-01-20T04:15:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "How/when does the async handler decide when to flush its buffers? What's the maximum time it would take for any buffered data to pumped to its outbound TCP socket?\r\n\r\nWe send our logs to a centralized log collector, that then ships (via HTTP) logs to Sumologic for indexing and have seen lag times of up to a few minutes for logs to appear in Sumo searches from the time a logger was invoked; I understand there's unavoidable end-to-end network delay, but would like to get a sense of the local guarantees.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/129", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/129/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/129/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/129", "id": 298652244, "node_id": "MDU6SXNzdWUyOTg2NTIyNDQ=", "number": 129, "title": "Windows bug: 'socket' has no attribute 'MSG_DONTWAIT'", "user": {"login": "Greyvend", "id": 1615315, "node_id": "MDQ6VXNlcjE2MTUzMTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1615315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Greyvend", "html_url": "https://github.com/Greyvend", "followers_url": "https://api.github.com/users/Greyvend/followers", "following_url": "https://api.github.com/users/Greyvend/following{/other_user}", "gists_url": "https://api.github.com/users/Greyvend/gists{/gist_id}", "starred_url": "https://api.github.com/users/Greyvend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Greyvend/subscriptions", "organizations_url": "https://api.github.com/users/Greyvend/orgs", "repos_url": "https://api.github.com/users/Greyvend/repos", "events_url": "https://api.github.com/users/Greyvend/events{/privacy}", "received_events_url": "https://api.github.com/users/Greyvend/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 519717617, "node_id": "MDU6TGFiZWw1MTk3MTc2MTc=", "url": "https://api.github.com/repos/fluent/fluent-logger-python/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}, {"id": 843098381, "node_id": "MDU6TGFiZWw4NDMwOTgzODE=", "url": "https://api.github.com/repos/fluent/fluent-logger-python/labels/windows", "name": "windows", "color": "c5def5", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-02-20T16:09:03Z", "updated_at": "2018-02-21T00:33:08Z", "closed_at": "2018-02-21T00:22:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "The recent versions of the package have the bug that prevents from using it on Windows installations since python's socket.py on Windows doesn't have the MSG_DONTWAIT option. Here's the sample traceback:\r\n\r\n```\r\n  File \"<src_path>\\app.py\", line 43, in main\r\n    logger.info('Account api started')\r\n  File \"<src_path>\\appdata\\local\\programs\\python\\python36\\Lib\\logging\\__init__.py\", line 1306, in info\r\n    self._log(INFO, msg, args, **kwargs)\r\n  File \"<src_path>\\appdata\\local\\programs\\python\\python36\\Lib\\logging\\__init__.py\", line 1442, in _log\r\n    self.handle(record)\r\n  File \"<src_path>\\appdata\\local\\programs\\python\\python36\\Lib\\logging\\__init__.py\", line 1452, in handle\r\n    self.callHandlers(record)\r\n  File \"<src_path>\\appdata\\local\\programs\\python\\python36\\Lib\\logging\\__init__.py\", line 1514, in callHandlers\r\n    hdlr.handle(record)\r\n  File \"<src_path>\\appdata\\local\\programs\\python\\python36\\Lib\\logging\\__init__.py\", line 863, in handle\r\n    self.emit(record)\r\n  File \"<src_path>\\Envs\\pms.account.queryapi\\lib\\site-packages\\fluent\\handler.py\", line 225, in emit\r\n    data)\r\n  File \"<src_path>\\Envs\\pms.account.queryapi\\lib\\site-packages\\fluent\\sender.py\", line 97, in emit_with_time\r\n    return self._send(bytes_)\r\n  File \"<src_path>\\Envs\\pms.account.queryapi\\lib\\site-packages\\fluent\\sender.py\", line 139, in _send\r\n    return self._send_internal(bytes_)\r\n  File \"<src_path>\\Envs\\pms.account.queryapi\\lib\\site-packages\\fluent\\sender.py\", line 148, in _send_internal\r\n    self._send_data(bytes_)\r\n  File \"<src_path>\\Envs\\pms.account.queryapi\\lib\\site-packages\\fluent\\sender.py\", line 190, in _send_data\r\n    self._check_recv_side()\r\n  File \"<src_path>\\Envs\\pms.account.queryapi\\lib\\site-packages\\fluent\\sender.py\", line 173, in _check_recv_side\r\n    recvd = self.socket.recv(4096, socket.MSG_DONTWAIT)\r\nAttributeError: module 'socket' has no attribute 'MSG_DONTWAIT'\r\n```\r\n\r\nI had to switch to version 0.6.0 where there is no `_check_recv_side` method that fails.\r\nHere's the similar problem and solution used in another lib: https://github.com/banjiewen/bernhard/issues/15", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/115", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/115/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/115/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/115", "id": 280790201, "node_id": "MDU6SXNzdWUyODA3OTAyMDE=", "number": 115, "title": "Automate releases", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-10T07:36:01Z", "updated_at": "2017-12-15T02:22:49Z", "closed_at": "2017-12-15T02:22:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently Travis isn't uploading the release. We need to make sure that tagged releases in master get uploaded automatically.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/111", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/111/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/111/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/111", "id": 280720707, "node_id": "MDU6SXNzdWUyODA3MjA3MDc=", "number": 111, "title": "Allow fully customizable formatter", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-09T13:47:03Z", "updated_at": "2017-12-10T05:08:21Z", "closed_at": "2017-12-10T05:08:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently Fluent Logger supports `fmt` as `dict` and exclusion attributes `exclude_attrs`. Sometimes, however, it's necessary to have a dynamic format that is flexible enough to allow dynamic formatting.\r\n\r\nThis change introduces an ability to specify a callable in `fmt` which would accept a `record` as a parameter and return a data dictionary. Additionally that callable object should itself have a callable attribute `usesTime` which returns a `bool` in accordance with `Formatter.usesTime()`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/110", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/110/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/110/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/110", "id": 280575425, "node_id": "MDU6SXNzdWUyODA1NzU0MjU=", "number": 110, "title": "reconnect and send after close method; sender doesn't have a \"closed\" state", "user": {"login": "dehatanes", "id": 17599203, "node_id": "MDQ6VXNlcjE3NTk5MjAz", "avatar_url": "https://avatars1.githubusercontent.com/u/17599203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dehatanes", "html_url": "https://github.com/dehatanes", "followers_url": "https://api.github.com/users/dehatanes/followers", "following_url": "https://api.github.com/users/dehatanes/following{/other_user}", "gists_url": "https://api.github.com/users/dehatanes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dehatanes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dehatanes/subscriptions", "organizations_url": "https://api.github.com/users/dehatanes/orgs", "repos_url": "https://api.github.com/users/dehatanes/repos", "events_url": "https://api.github.com/users/dehatanes/events{/privacy}", "received_events_url": "https://api.github.com/users/dehatanes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 519717617, "node_id": "MDU6TGFiZWw1MTk3MTc2MTc=", "url": "https://api.github.com/repos/fluent/fluent-logger-python/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-12-08T18:21:32Z", "updated_at": "2017-12-15T21:46:13Z", "closed_at": "2017-12-15T02:29:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't shutdown the client with the close() method.\r\nI am using python 2.7 on jupyter notebook and structured the code as your example:\r\n\r\n```\r\nfrom fluent import sender\r\nfrom fluent import event\r\n\r\nhost_name = (my_host_url)\r\nport = 24224\r\nlogger = sender.FluentSender('app', host=host_name, port=port)\r\n\r\nif not logger.emit(\"test\", {'message': 'potato'}):\r\n       print(logger.last_error)\r\n       logger.clear_last_error()\r\n\r\nlogger.close()\r\n\r\nif not logger.emit(\"test\", {'message': 'Oops'}):\r\n       print(logger.last_error)\r\n       logger.clear_last_error()\r\n```\r\n\r\nThe second log with the \"Oops\" message is emitted as nothing happened :(\r\n\r\nI tried with FluentSender Interface and  Event-Based Interface and both did the same thing.\r\nDid I misunderstood the purpose of closing the client (I supposed it would cut the connection with the client and prevent me of emitting more logs) or am I forgetting to do something when I try to close it?\r\n \r\nThanks,\r\nD\u00e9bora.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/108", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/108/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/108/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/108", "id": 280335718, "node_id": "MDU6SXNzdWUyODAzMzU3MTg=", "number": 108, "title": "Stop support for EOL Python versions", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-08T01:12:36Z", "updated_at": "2017-12-15T03:30:39Z", "closed_at": "2017-12-15T03:30:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "2.7 is EOL in 2020 so it should be kept\r\n\r\n3.2 is EOL Februrary 2016\r\n3.3 is EOL September 2017\r\n\r\nWe should stop supporting these versions and clean-up code to remove hacks and workarounds.\r\nAdd python_requires constraint.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/106", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/106/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/106/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/106", "id": 280067503, "node_id": "MDU6SXNzdWUyODAwNjc1MDM=", "number": 106, "title": "Custom format styles never worked", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-07T09:57:39Z", "updated_at": "2017-12-09T11:24:34Z", "closed_at": "2017-12-09T11:24:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/fluent/fluent-logger-python/blob/master/fluent/handler.py#L119\r\n\r\nThe above code never works if format style is not `%(asctime)s`. All tests missed it for reasons described in #105.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/105", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/105/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/105/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/105", "id": 279553981, "node_id": "MDU6SXNzdWUyNzk1NTM5ODE=", "number": 105, "title": "Massive threading and concurrency issues in async", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-05T22:27:09Z", "updated_at": "2017-12-09T11:24:34Z", "closed_at": "2017-12-09T11:24:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While investigating closure issues in async I realized it was suboptimally implemented with several concurrency issues. Firstly, there was about 3 times the amount of code than was necessary. Secondly, the `flush`, `drain` and `queue_timeout` were all added to cover over the fact that the async thread couldn't be stopped reliably.\r\n\r\nThis became a massive rewrite of the entire async handler and sender, which shrunk the code dramatically, removed queue timeout, moved flush to default (observing the expected behavior of the Handler) and removed all possible race conditions on closing and sending.\r\n\r\nFinally virtually all tests have been rewritten and cleaned up as they were reporting failures as successes. Tests now only take a few seconds to complete due to removal of `sleep` that pretended to synchronize several threads.\r\n\r\nOriginal issue description:\r\n```\r\nCurrently async handler will flush but also will discard on close. \r\nThese parameters need to be controlled during handler instantiation to make sure that no logs are lost.\r\n\r\nhttps://github.com/fluent/fluent-logger-python/blob/master/fluent/asyncsender.py#L76\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/103", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/103/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/103/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/103", "id": 279004737, "node_id": "MDU6SXNzdWUyNzkwMDQ3Mzc=", "number": 103, "title": "Transport endpoint is not connected after td-agent restart", "user": {"login": "dkalashnik", "id": 4476901, "node_id": "MDQ6VXNlcjQ0NzY5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/4476901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkalashnik", "html_url": "https://github.com/dkalashnik", "followers_url": "https://api.github.com/users/dkalashnik/followers", "following_url": "https://api.github.com/users/dkalashnik/following{/other_user}", "gists_url": "https://api.github.com/users/dkalashnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkalashnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkalashnik/subscriptions", "organizations_url": "https://api.github.com/users/dkalashnik/orgs", "repos_url": "https://api.github.com/users/dkalashnik/repos", "events_url": "https://api.github.com/users/dkalashnik/events{/privacy}", "received_events_url": "https://api.github.com/users/dkalashnik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-12-04T13:57:52Z", "updated_at": "2017-12-23T04:09:27Z", "closed_at": "2017-12-10T05:10:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "After restarting of td-agent socket can't be closed properly and fails with the trace:\r\nHow to reproduce: Just restart td-agent.\r\n\r\n```2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/logging/__init__.py\", line 1448, in info\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self.logger.info(msg, *args, **kwargs)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/logging/__init__.py\", line 1167, in info\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self._log(INFO, msg, args, **kwargs)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/logging/__init__.py\", line 1286, in _log\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self.handle(record)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/logging/__init__.py\", line 1296, in handle\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self.callHandlers(record)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/logging/__init__.py\", line 1336, in callHandlers\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     hdlr.handle(record)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/logging/__init__.py\", line 759, in handle\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self.emit(record)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/fluent/handler.py\", line 187, in emit\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     data)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/fluent/sender.py\", line 98, in emit_with_time\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     return self._send(bytes_)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/fluent/sender.py\", line 127, in _send\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     return self._send_internal(bytes_)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/fluent/sender.py\", line 149, in _send_internal\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self._close()\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/fluent/sender.py\", line 200, in _close\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     self.socket.shutdown(socket.SHUT_RDWR)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/socket.py\", line 228, in meth\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server     return getattr(self._sock,name)(*args)\r\n2017-12-04 12:11:04,751.751 2165 ERROR oslo_messaging.rpc.server error: [Errno 107] Transport endpoint is not connected```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/100", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/100/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/100/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/100", "id": 278813374, "node_id": "MDU6SXNzdWUyNzg4MTMzNzQ=", "number": 100, "title": "Formatter attribute exclusion set", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-03T19:49:04Z", "updated_at": "2017-12-06T00:12:25Z", "closed_at": "2017-12-06T00:12:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The current logic behind FluentRecordFormatter is to only log the attributes that are specified with keys and values being formatted. This is too limiting as [LoggerAdapter](https://docs.python.org/3/library/logging.html#logging.LoggerAdapter) and extra fields allow the same formatter to be used with different sets of extra fields, all of which need to get transmitted to FluentD. Furthermore this logic requires to create a handler-formatter pair and add each one to distinct logger if different data set types are send from different loggers.\r\n\r\nThere are [standard fields](https://docs.python.org/3/library/logging.html#logrecord-attributes) that will *always* occur on the [LogRecord](https://docs.python.org/3/library/logging.html#logging.LogRecord). All other firelds would be custom user-specified ones, including extra.\r\n\r\nThe solution, to my mind, is simple: provide a mode, where instead of inclusion dictionary and exclusion set is used that will filter out the fields that we don't want to send through formatter. If a exclusion dictionary is `None`, we assume current behavior. If exclusion dictionary is `set()/[]/()` we send everything. In all other cases we exclude the keys from the specified set.\r\n\r\nrelated to #47 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/97", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/97/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/97/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/97", "id": 278732360, "node_id": "MDU6SXNzdWUyNzg3MzIzNjA=", "number": 97, "title": "FluentHandler incorrectly timestamps the records", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-03T00:44:44Z", "updated_at": "2017-12-04T01:49:35Z", "closed_at": "2017-12-04T01:49:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "All log records already have a timestamp when they were created. FluentHandler loses that value completely substituting it for when the message is emitted, which is not terribly appropriate.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/96", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/96/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/96/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/96", "id": 278732245, "node_id": "MDU6SXNzdWUyNzg3MzIyNDU=", "number": 96, "title": "Add option not to parse json message", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-03T00:42:53Z", "updated_at": "2017-12-03T06:34:14Z", "closed_at": "2017-12-03T06:34:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "json.load is quite expensive and in most cases where native logging is used is not needed. It is, however sitting on a critical code path in formatter wasting CPU in 99% of the cases when it's not used.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/93", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/93/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/93/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/93", "id": 259987852, "node_id": "MDU6SXNzdWUyNTk5ODc4NTI=", "number": 93, "title": "AttributeError: 'NoneType' object has no attribute 'emit_with_time'", "user": {"login": "wanghaisheng", "id": 2363295, "node_id": "MDQ6VXNlcjIzNjMyOTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2363295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wanghaisheng", "html_url": "https://github.com/wanghaisheng", "followers_url": "https://api.github.com/users/wanghaisheng/followers", "following_url": "https://api.github.com/users/wanghaisheng/following{/other_user}", "gists_url": "https://api.github.com/users/wanghaisheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/wanghaisheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wanghaisheng/subscriptions", "organizations_url": "https://api.github.com/users/wanghaisheng/orgs", "repos_url": "https://api.github.com/users/wanghaisheng/repos", "events_url": "https://api.github.com/users/wanghaisheng/events{/privacy}", "received_events_url": "https://api.github.com/users/wanghaisheng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-09-23T06:38:28Z", "updated_at": "2018-11-13T00:28:23Z", "closed_at": "2017-12-10T05:11:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n(py3.6) \u279c  ocrla git:(master) \u2717 pip install fluent-logger==0.5.2\r\nCollecting fluent-logger==0.5.2\r\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/76/f6/58fa7355a484b9d9c236d6c6b97e1bb148f1b076e5d252c2bc8570fde079/fluent_logger-0.5.2-py2.py3-none-any.whl\r\nRequirement already satisfied: msgpack-python in /Users/wanghaisheng/anaconda/envs/py3.6/lib/python3.6/site-packages (from fluent-logger==0.5.2)\r\nInstalling collected packages: fluent-logger\r\n  Found existing installation: fluent-logger 0.5.3\r\n    Uninstalling fluent-logger-0.5.3:\r\n      Successfully uninstalled fluent-logger-0.5.3\r\nSuccessfully installed fluent-logger-0.5.2\r\n(py3.6) \u279c  ocrla git:(master) \u2717 python local_image.py -i../../IMG_20170922_142015.jpg \r\nException in thread Thread-4:\r\nTraceback (most recent call last):\r\n  File \"/Users/wanghaisheng/anaconda/envs/py3.6/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/Users/wanghaisheng/workspace/OCR/binarization-experiments/ocrap/ocrla/process.py\", line 61, in run\r\n    log_utils.log_info('Starting thread: %s' % self.method, self.guid)\r\n  File \"/Users/wanghaisheng/workspace/OCR/binarization-experiments/ocrap/ocrla/utils/log_utils.py\", line 41, in log_info\r\n    event.Event('INFO', {'message': message, 'environment': config.environment, 'guid': guid})\r\n  File \"/Users/wanghaisheng/anaconda/envs/py3.6/lib/python3.6/site-packages/fluent/event.py\", line 13, in __init__\r\n    sender_.emit_with_time(label, timestamp, data)\r\nAttributeError: 'NoneType' object has no attribute 'emit_with_time'\r\n\r\nException in thread Thread-2:\r\nTraceback (most recent call last):\r\n  File \"/Users/wanghaisheng/anaconda/envs/py3.6/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/Users/wanghaisheng/workspace/OCR/binarization-experiments/ocrap/ocrla/process.py\", line 61, in run\r\n    log_utils.log_info('Starting thread: %s' % self.method, self.guid)\r\n  File \"/Users/wanghaisheng/workspace/OCR/binarization-experiments/ocrap/ocrla/utils/log_utils.py\", line 41, in log_info\r\n    event.Event('INFO', {'message': message, 'environment': config.environment, 'guid': guid})\r\n  File \"/Users/wanghaisheng/anaconda/envs/py3.6/lib/python3.6/site-packages/fluent/event.py\", line 13, in __init__\r\n    sender_.emit_with_time(label, timestamp, data)\r\nAttributeError: 'NoneType' object has no attribute 'emit_with_time'\r\n\r\nTraceback (most recent call last):\r\n  File \"local_image.py\", line 55, in <module>\r\n    begin_processing_image(image_path, image_key, output_path, guid, None, is_local=True)\r\n  File \"/Users/wanghaisheng/workspace/OCR/binarization-experiments/ocrap/ocrla/process.py\", line 435, in begin_processing_image\r\n    log_utils.log_info('Processing complete. processing_time:%s' % (time_end - time_start), guid)\r\n  File \"/Users/wanghaisheng/workspace/OCR/binarization-experiments/ocrap/ocrla/utils/log_utils.py\", line 41, in log_info\r\n    event.Event('INFO', {'message': message, 'environment': config.environment, 'guid': guid})\r\n  File \"/Users/wanghaisheng/anaconda/envs/py3.6/lib/python3.6/site-packages/fluent/event.py\", line 13, in __init__\r\n    sender_.emit_with_time(label, timestamp, data)\r\nAttributeError: 'NoneType' object has no attribute 'emit_with_time'\r\n(py3.6) \u279c  ocrla git:(master) \u2717 \r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/86", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/86/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/86/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/86", "id": 225637563, "node_id": "MDU6SXNzdWUyMjU2Mzc1NjM=", "number": 86, "title": "how to add buffer_overflow_handler rightly to make the pendings send ok?", "user": {"login": "jiamo", "id": 732751, "node_id": "MDQ6VXNlcjczMjc1MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/732751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiamo", "html_url": "https://github.com/jiamo", "followers_url": "https://api.github.com/users/jiamo/followers", "following_url": "https://api.github.com/users/jiamo/following{/other_user}", "gists_url": "https://api.github.com/users/jiamo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiamo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiamo/subscriptions", "organizations_url": "https://api.github.com/users/jiamo/orgs", "repos_url": "https://api.github.com/users/jiamo/repos", "events_url": "https://api.github.com/users/jiamo/events{/privacy}", "received_events_url": "https://api.github.com/users/jiamo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-02T09:19:39Z", "updated_at": "2017-12-10T05:14:01Z", "closed_at": "2017-12-10T05:14:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "As the title said. The  ` sender.pendings` already `> self.bufmax`. If I what to send this pending, how to do?\r\nIn  `_send_internal` function\r\n\r\n        if self.pendings:\r\n            self.pendings += bytes_\r\n            bytes_ = self.pendings\r\n   \r\nI think we should not directly add these bytes . If it will overflow. How about send the pending first then send the bytes?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/84", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/84/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/84/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/84", "id": 221229495, "node_id": "MDU6SXNzdWUyMjEyMjk0OTU=", "number": 84, "title": "Please provide sample for out_file plugin of v0.14", "user": {"login": "mikeshi80", "id": 1825829, "node_id": "MDQ6VXNlcjE4MjU4Mjk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1825829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikeshi80", "html_url": "https://github.com/mikeshi80", "followers_url": "https://api.github.com/users/mikeshi80/followers", "following_url": "https://api.github.com/users/mikeshi80/following{/other_user}", "gists_url": "https://api.github.com/users/mikeshi80/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikeshi80/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikeshi80/subscriptions", "organizations_url": "https://api.github.com/users/mikeshi80/orgs", "repos_url": "https://api.github.com/users/mikeshi80/repos", "events_url": "https://api.github.com/users/mikeshi80/events{/privacy}", "received_events_url": "https://api.github.com/users/mikeshi80/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-12T11:15:03Z", "updated_at": "2017-04-13T01:30:39Z", "closed_at": "2017-04-13T01:30:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I try to upgrade fluentd from 0.12 to 0.14 for that I can use nanosecond precision, but I found the configuration format has been modified, the old style configuration is unusable under v0.14.\r\n\r\nAnd what is the worse is that I only found the 0.12 manual for out_file plugin.\r\n\r\nSo please provide the manual and sample for 0.14, and especially when `*` is used in path parameter, now it always raises the exception that I use the `*` in path but there is no time_key.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/83", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/83/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/83/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/83", "id": 215804178, "node_id": "MDU6SXNzdWUyMTU4MDQxNzg=", "number": 83, "title": "Why kwargs in FluentSender?", "user": {"login": "luhn", "id": 1570245, "node_id": "MDQ6VXNlcjE1NzAyNDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1570245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luhn", "html_url": "https://github.com/luhn", "followers_url": "https://api.github.com/users/luhn/followers", "following_url": "https://api.github.com/users/luhn/following{/other_user}", "gists_url": "https://api.github.com/users/luhn/gists{/gist_id}", "starred_url": "https://api.github.com/users/luhn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luhn/subscriptions", "organizations_url": "https://api.github.com/users/luhn/orgs", "repos_url": "https://api.github.com/users/luhn/repos", "events_url": "https://api.github.com/users/luhn/events{/privacy}", "received_events_url": "https://api.github.com/users/luhn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-21T16:42:03Z", "updated_at": "2017-12-10T05:11:49Z", "closed_at": "2017-12-10T05:11:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I noticed that `FluentSender` has `**kwargs`, but it's a blackhole\u2014The values are never used.\r\n\r\nIs there a reason for that to be there?  If not, it should be removed.\r\n\r\nThis would be a backwards-incompatible change, so it would need to wait until the next major release.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/78", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/78/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/78/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/78", "id": 211278267, "node_id": "MDU6SXNzdWUyMTEyNzgyNjc=", "number": 78, "title": "Client should support fluentd v0.14 (EventTime)", "user": {"login": "linxuanwei", "id": 10094722, "node_id": "MDQ6VXNlcjEwMDk0NzIy", "avatar_url": "https://avatars3.githubusercontent.com/u/10094722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linxuanwei", "html_url": "https://github.com/linxuanwei", "followers_url": "https://api.github.com/users/linxuanwei/followers", "following_url": "https://api.github.com/users/linxuanwei/following{/other_user}", "gists_url": "https://api.github.com/users/linxuanwei/gists{/gist_id}", "starred_url": "https://api.github.com/users/linxuanwei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linxuanwei/subscriptions", "organizations_url": "https://api.github.com/users/linxuanwei/orgs", "repos_url": "https://api.github.com/users/linxuanwei/repos", "events_url": "https://api.github.com/users/linxuanwei/events{/privacy}", "received_events_url": "https://api.github.com/users/linxuanwei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-02T03:23:21Z", "updated_at": "2017-05-02T13:13:08Z", "closed_at": "2017-05-02T13:13:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can we support Fluentd::EventTime?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/77", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/77/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/77/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/77", "id": 208096607, "node_id": "MDU6SXNzdWUyMDgwOTY2MDc=", "number": 77, "title": "Events not delivered when connection is dropped", "user": {"login": "jcerjak", "id": 191024, "node_id": "MDQ6VXNlcjE5MTAyNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/191024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcerjak", "html_url": "https://github.com/jcerjak", "followers_url": "https://api.github.com/users/jcerjak/followers", "following_url": "https://api.github.com/users/jcerjak/following{/other_user}", "gists_url": "https://api.github.com/users/jcerjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcerjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcerjak/subscriptions", "organizations_url": "https://api.github.com/users/jcerjak/orgs", "repos_url": "https://api.github.com/users/jcerjak/repos", "events_url": "https://api.github.com/users/jcerjak/events{/privacy}", "received_events_url": "https://api.github.com/users/jcerjak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-02-16T11:36:12Z", "updated_at": "2017-12-06T05:39:21Z", "closed_at": "2017-12-06T00:49:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Problem\r\n\r\nWe have a Fluentd instance running behind an Amazon Load Balancer. Load balancer has a [timeout setting](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/config-idle-timeout.html) (defaults to 60s, for purposes of testing I have set it to 5s). As per docs: \"If no data has been sent or received by the time that the idle timeout period elapses, the load balancer closes the connection.\"\r\n\r\nWhen sending data, the FluentSender tries to reuse the connection if possible, and reconnect in case of a `socket.error`. If we keep sending events one after another (time between sends is < timeout) everything works fine. But if we consider the following example:\r\n\r\n* Send event no. 1\r\n* Wait for timeout (e.g. 10s)\r\n* Send event no. 2\r\n\r\nSince the connection has been closed by the load balancer, I would expect to receive a socket error when sending event no.2. But the FluentSender (or specifically, the `socket` object) does not seem to register that the connection was dropped. There is no error when sending event no. 2 (`emit` will return `True`), but the event never reaches the destination.\r\n\r\n## Debugging info\r\n\r\nThis was tested on Python 2.7.6 and Python 3.4.3.\r\n\r\nI have prepared some examples to demonstrate the issue. For simplicity, we are using the `socket` directly, without using the FluentSender.\r\n\r\n### Example 1\r\n\r\nIn this example we send 1 event, then wait for timeout, and send a few more events. There is no socket error, even though the connection was dropped.\r\n\r\nCode:\r\n\r\n```python\r\nimport socket\r\nimport time\r\n\r\nsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\nsock.settimeout(3.0)\r\nsock.connect(('myhost, 24224))\r\n\r\n# send event no. 1\r\nprint('Sending event 1')\r\nsock.sendall('event 1')\r\n\r\n# wait for timeout\r\nprint('Waiting for timeout...')\r\ntime.sleep(10)\r\n\r\n# send more events\r\nfor i in range(2, 10):\r\n    print('Sending event {}'.format(i))\r\n    sock.sendall('event {}'.format(i))\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nSending event 1\r\nWaiting for timeout...\r\nSending event 2\r\nSending event 3\r\nSending event 4\r\nSending event 5\r\nSending event 6\r\nSending event 7\r\nSending event 8\r\nSending event 9\r\nSending event 10\r\n```\r\n\r\n### Example 2\r\n\r\n\r\nThis is a similar example as Example 1, but with a short delay between additional events. In this case we do get a socket error, but only when trying to send the 4th event after the timeout.\r\n\r\nCode:\r\n\r\n```python\r\n# ... snip\r\n\r\n# send more events\r\nfor i in range(2, 10):\r\n    print('Sending event {}'.format(i))\r\n    sock.sendall('event {}'.format(i))\r\n\r\n    # add a short delay before sending the next event\r\n    time.sleep(0.1)\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nSending event 1\r\nWaiting for timeout...\r\nSending event 2\r\nSending event 3\r\nSending event 4\r\nSending event 5\r\nTraceback (most recent call last):\r\n  File \"socktst.py\", line 18, in <module>\r\n    sock.sendall('event {}'.format(i))\r\n  File \"/usr/lib/python2.7/socket.py\", line 224, in meth\r\n    return getattr(self._sock,name)(*args)\r\nsocket.error: [Errno 32] Broken pipe\r\n```\r\n\r\n# Solution?\r\n\r\nOne way of solving this would be to add an option to always reconnect (False by default), instead of reusing the connection. The problem might also be caused with the way the load balancer drops connections, but not sure how to check this. So any help on this is appreciated.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/71", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/71/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/71/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/71", "id": 201066975, "node_id": "MDU6SXNzdWUyMDEwNjY5NzU=", "number": 71, "title": "Fluent logger fails to serialize datetime", "user": {"login": "medox", "id": 6486368, "node_id": "MDQ6VXNlcjY0ODYzNjg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6486368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/medox", "html_url": "https://github.com/medox", "followers_url": "https://api.github.com/users/medox/followers", "following_url": "https://api.github.com/users/medox/following{/other_user}", "gists_url": "https://api.github.com/users/medox/gists{/gist_id}", "starred_url": "https://api.github.com/users/medox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/medox/subscriptions", "organizations_url": "https://api.github.com/users/medox/orgs", "repos_url": "https://api.github.com/users/medox/repos", "events_url": "https://api.github.com/users/medox/events{/privacy}", "received_events_url": "https://api.github.com/users/medox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-16T16:38:25Z", "updated_at": "2017-12-10T05:14:42Z", "closed_at": "2017-12-10T05:14:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "exception :\r\n`TypeError: can't serialize datetime.datetime(2017, 1, 11, 18, 35, 57, 863758)`\r\n\r\nscript to test : \r\n```\r\nlogger = logging.getLogger(\"exampleApp\")\r\n# datetime serialize exception\r\nlogger.info(dict(datetime=datetime.today())\r\n# list, sets and nested dict exception\r\nlogger.info(dict(list=[\"string\", 44.6, datetime.today()],\r\n                     nested_dict=dict(available=True)))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/70", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/70/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/70/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/70", "id": 197202224, "node_id": "MDU6SXNzdWUxOTcyMDIyMjQ=", "number": 70, "title": "FluentRecordFormatter fails, when given a string, which contains only numbers.", "user": {"login": "redlolgeerf", "id": 5073609, "node_id": "MDQ6VXNlcjUwNzM2MDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5073609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redlolgeerf", "html_url": "https://github.com/redlolgeerf", "followers_url": "https://api.github.com/users/redlolgeerf/followers", "following_url": "https://api.github.com/users/redlolgeerf/following{/other_user}", "gists_url": "https://api.github.com/users/redlolgeerf/gists{/gist_id}", "starred_url": "https://api.github.com/users/redlolgeerf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redlolgeerf/subscriptions", "organizations_url": "https://api.github.com/users/redlolgeerf/orgs", "repos_url": "https://api.github.com/users/redlolgeerf/repos", "events_url": "https://api.github.com/users/redlolgeerf/events{/privacy}", "received_events_url": "https://api.github.com/users/redlolgeerf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 519717617, "node_id": "MDU6TGFiZWw1MTk3MTc2MTc=", "url": "https://api.github.com/repos/fluent/fluent-logger-python/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-12-22T15:43:09Z", "updated_at": "2017-01-24T08:46:20Z", "closed_at": "2017-01-24T06:35:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Simple script to illustrate:\r\n```\r\nimport os\r\nimport logging\r\nfrom fluent import handler\r\n\r\n\r\nFLUENT_HOST = os.getenv('FLUENT_HOST', 'fluentd-logger')\r\nFLUENT_PORT = int(os.getenv('FLUENT_PORT', 24224))\r\nFLUENT_TAG = os.getenv('FLUENT_TAG', 'docker.docker-tag')\r\n\r\nif __name__ == \"__main__\":\r\n    logging.basicConfig(level=logging.INFO)\r\n    logger = logging.getLogger('fluent.test')\r\n    h = handler.FluentHandler(FLUENT_TAG, host=FLUENT_HOST, port=FLUENT_PORT, verbose=True)\r\n    formatter = handler.FluentRecordFormatter()\r\n    h.setFormatter(formatter)\r\n    logger.addHandler(h)\r\n\r\n    logger.info('1')\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/69", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/69/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/69/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/69", "id": 194015553, "node_id": "MDU6SXNzdWUxOTQwMTU1NTM=", "number": 69, "title": "Fluent logger fails to serialize exceptions.", "user": {"login": "redlolgeerf", "id": 5073609, "node_id": "MDQ6VXNlcjUwNzM2MDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5073609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redlolgeerf", "html_url": "https://github.com/redlolgeerf", "followers_url": "https://api.github.com/users/redlolgeerf/followers", "following_url": "https://api.github.com/users/redlolgeerf/following{/other_user}", "gists_url": "https://api.github.com/users/redlolgeerf/gists{/gist_id}", "starred_url": "https://api.github.com/users/redlolgeerf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redlolgeerf/subscriptions", "organizations_url": "https://api.github.com/users/redlolgeerf/orgs", "repos_url": "https://api.github.com/users/redlolgeerf/repos", "events_url": "https://api.github.com/users/redlolgeerf/events{/privacy}", "received_events_url": "https://api.github.com/users/redlolgeerf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-12-07T10:44:19Z", "updated_at": "2017-08-23T07:54:12Z", "closed_at": "2017-08-23T07:54:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is a simple script to illustrate the problem:\r\n\r\n```#!/usr/bin/env python\r\n\r\nimport os\r\nimport logging\r\nfrom fluent import handler\r\n\r\n\r\nFLUENT_HOST = os.getenv('FLUENT_HOST', 'fluentd-logger')\r\nFLUENT_PORT = int(os.getenv('FLUENT_PORT', 24224))\r\nFLUENT_TAG = os.getenv('FLUENT_TAG', 'docker.docker-tag')\r\n\r\nif __name__ == \"__main__\":\r\n    logging.basicConfig(level=logging.INFO)\r\n    logger = logging.getLogger('fluent.test')\r\n    h = handler.FluentHandler(FLUENT_TAG, host=FLUENT_HOST, port=FLUENT_PORT, verbose=True)\r\n    formatter = handler.FluentRecordFormatter()\r\n    h.setFormatter(formatter)\r\n    logger.addHandler(h)\r\n\r\n    logger.info(Exception('foo'))\r\n```\r\n\r\nthis produces:\r\n('docker.docker-tag', 1481107415, {'sys_module': 'script', 'message': Exception('foo',), 'sys_name': 'fluent.test', 'sys_host': 'K501LB'})\r\n('docker.docker-tag', 1481107415, {'message': \"Can't output to log\", 'traceback': 'Traceback (most recent call last):\\n  File \"/tmp/fl/.venv/local/lib/python2.7/site-packages/fluent/sender.py\", line 69, in emit_with_time\\n    bytes_ = self._make_packet(label, timestamp, data)\\n  File \"/tmp/fl/.venv/local/lib/python2.7/site-packages/fluent/sender.py\", line 101, in _make_packet\\n    return msgpack.packb(packet)\\n  File \"/tmp/fl/.venv/local/lib/python2.7/site-packages/msgpack/__init__.py\", line 47, in packb\\n    return Packer(**kwargs).pack(o)\\n  File \"msgpack/_packer.pyx\", line 231, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:3661)\\n  File \"msgpack/_packer.pyx\", line 233, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:3503)\\n  File \"msgpack/_packer.pyx\", line 221, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:3230)\\n  File \"msgpack/_packer.pyx\", line 192, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:2657)\\n  File \"msgpack/_packer.pyx\", line 228, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:3382)\\nTypeError: can\\'t serialize Exception(\\'foo\\',)\\n', 'level': 'CRITICAL'})\r\nINFO:fluent.test:foo\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/68", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/68/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/68/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/68", "id": 184321086, "node_id": "MDU6SXNzdWUxODQzMjEwODY=", "number": 68, "title": "StreamHandler format customisation", "user": {"login": "nicolaevladescu", "id": 465824, "node_id": "MDQ6VXNlcjQ2NTgyNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/465824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicolaevladescu", "html_url": "https://github.com/nicolaevladescu", "followers_url": "https://api.github.com/users/nicolaevladescu/followers", "following_url": "https://api.github.com/users/nicolaevladescu/following{/other_user}", "gists_url": "https://api.github.com/users/nicolaevladescu/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicolaevladescu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicolaevladescu/subscriptions", "organizations_url": "https://api.github.com/users/nicolaevladescu/orgs", "repos_url": "https://api.github.com/users/nicolaevladescu/repos", "events_url": "https://api.github.com/users/nicolaevladescu/events{/privacy}", "received_events_url": "https://api.github.com/users/nicolaevladescu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-20T19:37:46Z", "updated_at": "2016-10-21T13:03:47Z", "closed_at": "2016-10-21T13:03:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\n\nI noticed that the logs are also outputted to stdout via a StreamHandler with default format.\n\nHow do i disable this so that i can attach my own StreamHandler and customise it, or how can i change the format of the one that the module attaches? I would like to send a different format to fluentd and another to console.\n\nFrom what i can see on the README, the example using `logging.config.dictConfig` seems to be able to change that, however i am looking for a simpler way.\n\nThank you.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/63", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/63/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/63/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/63", "id": 177996794, "node_id": "MDU6SXNzdWUxNzc5OTY3OTQ=", "number": 63, "title": "FluentRecordFormatter not compatible with Python 3.2+ Formatter", "user": {"login": "jt1", "id": 101519, "node_id": "MDQ6VXNlcjEwMTUxOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/101519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jt1", "html_url": "https://github.com/jt1", "followers_url": "https://api.github.com/users/jt1/followers", "following_url": "https://api.github.com/users/jt1/following{/other_user}", "gists_url": "https://api.github.com/users/jt1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jt1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jt1/subscriptions", "organizations_url": "https://api.github.com/users/jt1/orgs", "repos_url": "https://api.github.com/users/jt1/repos", "events_url": "https://api.github.com/users/jt1/events{/privacy}", "received_events_url": "https://api.github.com/users/jt1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-09-20T08:26:50Z", "updated_at": "2016-09-20T12:32:04Z", "closed_at": "2016-09-20T11:35:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "From Python 3.2 `logging.Formatter` `__init__` method has extra parameter `style`:\n\n``` python\ndef __init__(self, fmt=None, datefmt=None, style='%'):\n```\n\nbut `fluent.handler.FluentRecordFormatter` does not have it:\n\n``` python\ndef __init__(self, fmt=None, datefmt=None):\n```\n\nProblem appears when reading logging configuration from a ConfigParser-format file using\n`logging.fileConfig` (e.g. loading logging configuration from Pyramid ini file). \nWhen `logging.config._create_formatters` runs `f = c(fs, dfs, stl)` following exception is raised:\n`TypeError: __init__() takes from 1 to 3 positional arguments but 4 were given`\n\nI suggest to add `style` parameter to `fluent.handler.FluentRecordFormatter` `__init__` definition.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/55", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/55/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/55/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/55", "id": 158157195, "node_id": "MDU6SXNzdWUxNTgxNTcxOTU=", "number": 55, "title": "FluentSender suppresses too many exceptions", "user": {"login": "miverson", "id": 537909, "node_id": "MDQ6VXNlcjUzNzkwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/537909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miverson", "html_url": "https://github.com/miverson", "followers_url": "https://api.github.com/users/miverson/followers", "following_url": "https://api.github.com/users/miverson/following{/other_user}", "gists_url": "https://api.github.com/users/miverson/gists{/gist_id}", "starred_url": "https://api.github.com/users/miverson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miverson/subscriptions", "organizations_url": "https://api.github.com/users/miverson/orgs", "repos_url": "https://api.github.com/users/miverson/repos", "events_url": "https://api.github.com/users/miverson/events{/privacy}", "received_events_url": "https://api.github.com/users/miverson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-06-02T14:37:09Z", "updated_at": "2017-12-10T05:15:18Z", "closed_at": "2017-12-10T05:15:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "In _send_internal(), all exceptions are captured and suppressed, even if they are the result of a basic configuration error. This results in a total, silent failure of the library. \n\nIn my case, I inadvertently set the port number to a string, rather than an int. Fluentd failed silently.\n\nUltimately, I modified the code to log the exception in _send_internal, and received:\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/site-packages/fluent/sender.py\", line 97, in _send_internal\n    self._reconnect()\n  File \"/usr/local/lib/python3.5/site-packages/fluent/sender.py\", line 124, in _reconnect\n    sock.connect((self.host, self.port))\nTypeError: an integer is required (got type str)\n```\n\nI would suggest:\n1. Add basic type checking to the constructor.\n2. Revise the overly broad exception handling to only catch transient connection errors, allowing other exceptions to be handled appropriately by the calling code. \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/49", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/49/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/49/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/49", "id": 122931981, "node_id": "MDU6SXNzdWUxMjI5MzE5ODE=", "number": 49, "title": "problem with exception logging", "user": {"login": "bozydar", "id": 225232, "node_id": "MDQ6VXNlcjIyNTIzMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/225232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bozydar", "html_url": "https://github.com/bozydar", "followers_url": "https://api.github.com/users/bozydar/followers", "following_url": "https://api.github.com/users/bozydar/following{/other_user}", "gists_url": "https://api.github.com/users/bozydar/gists{/gist_id}", "starred_url": "https://api.github.com/users/bozydar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bozydar/subscriptions", "organizations_url": "https://api.github.com/users/bozydar/orgs", "repos_url": "https://api.github.com/users/bozydar/repos", "events_url": "https://api.github.com/users/bozydar/events{/privacy}", "received_events_url": "https://api.github.com/users/bozydar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-12-18T11:30:48Z", "updated_at": "2016-04-14T07:57:06Z", "closed_at": "2016-04-14T07:57:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Logging exception using `_logger.exception(ex)` causes exception inside the `fluent` package.\n\n```\n  (...)\n    _logger.exception(ex)\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 1198, in exception\n    self.error(msg, *args, **kwargs)\n\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 1191, in error\n    self._log(ERROR, msg, args, **kwargs)\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 1284, in _log\n    self.handle(record)\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 1294, in handle\n    self.callHandlers(record)\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 1334, in callHandlers\n    hdlr.handle(record)\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 757, in handle\n    self.emit(record)\n  File \"/home/bozydar/workspaces/data-mining/venv/lib/python2.7/site-packages/fluent/handler.py\", line 106, in emit\n    self.sender.emit(None, data)\n  File \"/home/bozydar/workspaces/data-mining/venv/lib/python2.7/site-packages/fluent/sender.py\", line 54, in emit\n    self.emit_with_time(label, cur_time, data)\n  File \"/home/bozydar/workspaces/data-mining/venv/lib/python2.7/site-packages/fluent/sender.py\", line 57, in emit_with_time\n    bytes_ = self._make_packet(label, timestamp, data)\n  File \"/home/bozydar/workspaces/data-mining/venv/lib/python2.7/site-packages/fluent/sender.py\", line 68, in _make_packet\n    return msgpack.packb(packet)\n  File \"/home/bozydar/workspaces/data-mining/venv/lib/python2.7/site-packages/msgpack/__init__.py\", line 47, in packb\n    return Packer(**kwargs).pack(o)\n  File \"msgpack/_packer.pyx\", line 223, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:223)\n\n  File \"msgpack/_packer.pyx\", line 225, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:225)\n\n  File \"msgpack/_packer.pyx\", line 213, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:213)\n\n  File \"msgpack/_packer.pyx\", line 184, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:184)\n\n  File \"msgpack/_packer.pyx\", line 220, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:220)\n\nexceptions.TypeError: can't serialize ValueError('No JSON object could be decoded',)\n```\n\nUsed configuration:\n\n``` python\nlogger = logging.getLogger('sentiment')\nlogger.addHandler(logging.StreamHandler(sys.stdout))\nlogger.setLevel('DEBUG')\ncustom_format = {\n            'host': '%(hostname)s',\n            'where': '%(module)s.%(funcName)s',\n            'type': '%(levelname)s',\n            'stack_trace': '%(exc_text)s'\n        }\nh = handler.FluentHandler('sentiment', host='localhost', port=24224)\nformatter = handler.FluentRecordFormatter(custom_format)\nh.setFormatter(formatter)\nlogger.addHandler(h)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/47", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/47/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/47/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/47", "id": 114472094, "node_id": "MDU6SXNzdWUxMTQ0NzIwOTQ=", "number": 47, "title": "extra fields", "user": {"login": "dkavraal", "id": 4558966, "node_id": "MDQ6VXNlcjQ1NTg5NjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/4558966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkavraal", "html_url": "https://github.com/dkavraal", "followers_url": "https://api.github.com/users/dkavraal/followers", "following_url": "https://api.github.com/users/dkavraal/following{/other_user}", "gists_url": "https://api.github.com/users/dkavraal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkavraal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkavraal/subscriptions", "organizations_url": "https://api.github.com/users/dkavraal/orgs", "repos_url": "https://api.github.com/users/dkavraal/repos", "events_url": "https://api.github.com/users/dkavraal/events{/privacy}", "received_events_url": "https://api.github.com/users/dkavraal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2015-11-01T14:26:56Z", "updated_at": "2019-01-23T05:17:10Z", "closed_at": "2019-01-20T04:15:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wasn't able to pass extra fields. Have you tested such:\n\n``` python\nfrom fluent import handler\ncustom_format = {\n  'host': '%(hostname)s',\n  'where': '%(module)s.%(funcName)s',\n  'type': '%(levelname)s',\n  'stack_trace': '%(exc_text)s'\n}\nlog = logging.getLogger('fluent.test')\nlog.setLevel(logging.DEBUG)\nh = handler.FluentHandler('app.python', host='127.0.0.1', port=24224)\nformatter = handler.FluentRecordFormatter(custom_format)\nh.setFormatter(formatter)\nlog.addHandler(h)\n\nlog.debug('python fluent log test', extra={'extraField': 'test'} )\n```\n\non the last line I am expecting fluentd(td-agent) to pass the **extraField** into the collector.\n\nIs there sth I'm missing?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/46", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/46/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/46/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/46", "id": 113279781, "node_id": "MDU6SXNzdWUxMTMyNzk3ODE=", "number": 46, "title": "retry support", "user": {"login": "icy", "id": 75696, "node_id": "MDQ6VXNlcjc1Njk2", "avatar_url": "https://avatars1.githubusercontent.com/u/75696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icy", "html_url": "https://github.com/icy", "followers_url": "https://api.github.com/users/icy/followers", "following_url": "https://api.github.com/users/icy/following{/other_user}", "gists_url": "https://api.github.com/users/icy/gists{/gist_id}", "starred_url": "https://api.github.com/users/icy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icy/subscriptions", "organizations_url": "https://api.github.com/users/icy/orgs", "repos_url": "https://api.github.com/users/icy/repos", "events_url": "https://api.github.com/users/icy/events{/privacy}", "received_events_url": "https://api.github.com/users/icy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-26T03:45:45Z", "updated_at": "2016-04-15T06:54:06Z", "closed_at": "2016-04-15T06:54:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Current version of the module doesn't retry if error occurs during the last connection (connection lost, timeout, ...); So a message is sent, or discarded without notice.\n\nThis is quite different from the behavior of Java, Ruby client. \n\nPlease fix that. Thank you very much.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/35", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/35/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/35/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/35", "id": 70115004, "node_id": "MDU6SXNzdWU3MDExNTAwNA==", "number": 35, "title": "override time", "user": {"login": "pi3ch", "id": 803315, "node_id": "MDQ6VXNlcjgwMzMxNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/803315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pi3ch", "html_url": "https://github.com/pi3ch", "followers_url": "https://api.github.com/users/pi3ch/followers", "following_url": "https://api.github.com/users/pi3ch/following{/other_user}", "gists_url": "https://api.github.com/users/pi3ch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pi3ch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pi3ch/subscriptions", "organizations_url": "https://api.github.com/users/pi3ch/orgs", "repos_url": "https://api.github.com/users/pi3ch/repos", "events_url": "https://api.github.com/users/pi3ch/events{/privacy}", "received_events_url": "https://api.github.com/users/pi3ch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-04-22T12:42:37Z", "updated_at": "2016-04-13T16:17:10Z", "closed_at": "2016-04-13T16:16:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am reading records from a file and time should be set as the recorded time in the file not the time I send the record to fluent receiver (i.e. in_forwarder)\n\nI am trying to override the time by including a time key in the event message. I tried combination of both `time` and `timestamp` with different formatting. It seems like the receiver disregard this key and honour time set by the handler. \n\nIs there anyway to override the event time?\n\nhttps://github.com/fluent/fluent-logger-python/blob/master/fluent/sender.py#L53\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/34", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/34/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/34/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/34", "id": 68478975, "node_id": "MDU6SXNzdWU2ODQ3ODk3NQ==", "number": 34, "title": "logging handler yields 'record' as string instead of map", "user": {"login": "mr-salty", "id": 7683836, "node_id": "MDQ6VXNlcjc2ODM4MzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/7683836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mr-salty", "html_url": "https://github.com/mr-salty", "followers_url": "https://api.github.com/users/mr-salty/followers", "following_url": "https://api.github.com/users/mr-salty/following{/other_user}", "gists_url": "https://api.github.com/users/mr-salty/gists{/gist_id}", "starred_url": "https://api.github.com/users/mr-salty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mr-salty/subscriptions", "organizations_url": "https://api.github.com/users/mr-salty/orgs", "repos_url": "https://api.github.com/users/mr-salty/repos", "events_url": "https://api.github.com/users/mr-salty/events{/privacy}", "received_events_url": "https://api.github.com/users/mr-salty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "repeatedly", "id": 16928, "node_id": "MDQ6VXNlcjE2OTI4", "avatar_url": "https://avatars3.githubusercontent.com/u/16928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/repeatedly", "html_url": "https://github.com/repeatedly", "followers_url": "https://api.github.com/users/repeatedly/followers", "following_url": "https://api.github.com/users/repeatedly/following{/other_user}", "gists_url": "https://api.github.com/users/repeatedly/gists{/gist_id}", "starred_url": "https://api.github.com/users/repeatedly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/repeatedly/subscriptions", "organizations_url": "https://api.github.com/users/repeatedly/orgs", "repos_url": "https://api.github.com/users/repeatedly/repos", "events_url": "https://api.github.com/users/repeatedly/events{/privacy}", "received_events_url": "https://api.github.com/users/repeatedly/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "repeatedly", "id": 16928, "node_id": "MDQ6VXNlcjE2OTI4", "avatar_url": "https://avatars3.githubusercontent.com/u/16928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/repeatedly", "html_url": "https://github.com/repeatedly", "followers_url": "https://api.github.com/users/repeatedly/followers", "following_url": "https://api.github.com/users/repeatedly/following{/other_user}", "gists_url": "https://api.github.com/users/repeatedly/gists{/gist_id}", "starred_url": "https://api.github.com/users/repeatedly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/repeatedly/subscriptions", "organizations_url": "https://api.github.com/users/repeatedly/orgs", "repos_url": "https://api.github.com/users/repeatedly/repos", "events_url": "https://api.github.com/users/repeatedly/events{/privacy}", "received_events_url": "https://api.github.com/users/repeatedly/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2015-04-14T19:43:26Z", "updated_at": "2016-04-13T16:16:31Z", "closed_at": "2016-04-13T16:16:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the logging handler, the emitted record has type string (fixedstr) rather than map.\n\nAccording to the fluent plugin docs at http://docs.fluentd.org/articles/plugin-development 'record' is required to be a Hash object, so I believe the implication is this module should only emit 'map'.\n\nExample code (based on the examples from the docs), followed by some extra logging I added to fluentd's in_forward plugin:\n\nExample using 'handler':\n\n```\nimport logging\nfrom fluent import handler\n\nlogging.basicConfig(level=logging.INFO)\nl = logging.getLogger('fluent.test')\nl.addHandler(handler.FluentHandler('app.follow'))\nl.info({\n  'message': 'test from info',\n})\n\n2015-04-10 22:15:07 +0000 [info]: on_read_msgpack:\n00000000  93 aa 61 70 70 2e 66 6f 6c 6c 6f 77 ce 55 28 4b  |..app.follow.U(K|\n00000010  6b bd 7b 27 6d 65 73 73 61 67 65 27 3a 20 27 74  |k.{'message': 't|\n00000020  65 73 74 20 66 72 6f 6d 20 69 6e 66 6f 27 7d     |est from info'}|\n2015-04-10 22:15:07 +0000 [info]: on_message:  msg=[\"app.follow\", 1428704107, \"{'message': 'test from info'}\"] chunk_size=47 source=\"host: 127.0.0.1, addr: 127.0.0.1, port: 49307\"\n2015-04-10 22:15:07 +0000 [info]: record_class=String\n```\n\nExample using 'event' directly, which works correctly:\n\n```\nfrom fluent import sender\nfrom fluent import event\nsender.setup('app')\nevent.Event('follow', {\n  'message': 'this is a test',\n})\n\n2015-04-10 22:15:07 +0000 [info]: on_read_msgpack:\n00000000  93 aa 61 70 70 2e 66 6f 6c 6c 6f 77 ce 55 28 4b  |..app.follow.U(K|\n00000010  6b 81 a7 6d 65 73 73 61 67 65 ae 74 68 69 73 20  |k..message.this |\n00000020  69 73 20 61 20 74 65 73 74                       |is a test|\n2015-04-10 22:15:07 +0000 [info]: on_message:  msg=[\"app.follow\", 1428704107, {\"message\"=>\"this is a test\"}] chunk_size=41 source=\"host: 127.0.0.1, addr: 127.0.0.1, port: 49306\"\n2015-04-10 22:15:07 +0000 [info]: record_class=Hash\n```\n\nSome output plugins do not care about the type of 'record' so this may appear to work, but there are other plugins that discard the record or have other issues if it is not a hash.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/33", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/33/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/33/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/33", "id": 68325450, "node_id": "MDU6SXNzdWU2ODMyNTQ1MA==", "number": 33, "title": "include tag and time IndexError", "user": {"login": "pi3ch", "id": 803315, "node_id": "MDQ6VXNlcjgwMzMxNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/803315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pi3ch", "html_url": "https://github.com/pi3ch", "followers_url": "https://api.github.com/users/pi3ch/followers", "following_url": "https://api.github.com/users/pi3ch/following{/other_user}", "gists_url": "https://api.github.com/users/pi3ch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pi3ch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pi3ch/subscriptions", "organizations_url": "https://api.github.com/users/pi3ch/orgs", "repos_url": "https://api.github.com/users/pi3ch/repos", "events_url": "https://api.github.com/users/pi3ch/events{/privacy}", "received_events_url": "https://api.github.com/users/pi3ch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-04-14T10:04:01Z", "updated_at": "2015-04-14T10:08:52Z", "closed_at": "2015-04-14T10:08:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've created a handler as per test here (https://github.com/fluent/fluent-logger-python/blob/master/tests/test_handler.py), I have the following fluentd config:\n\n```\n<source>\n  type forward\n  port 24224\n  bind 0.0.0.0\n</source>\n\n<match app.**>\n  type file\n  path /var/log/td-agent/dev.log\n  append true\n  format json\n  include_time_key true\n  time_key time\n  include_tag_key true\n  tag_key tag\n</match>\n```\n\nwithout including tag key there is no issue, including tag key results in the following error:\n\n```\n[error]: forward error error=#<IndexError: string not matched> error_class=IndexError\n[error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.60/lib/fluent/formatter.rb:58:in `[]='\n```\n\nalso the including_tag_key results in the following output:\n\n```\n\"{'foo': 'bar', '2015-01-14T09:54:17+00:00': '2015-01-14 09:54:17'}\"\n```\n\ninstead of\n\n```\n\"{'foo': 'bar', 'time': '2015-01-14 09:54:17'}\"\n```\n\nI am looking to get the following output\n\n```\n\"{'foo': 'bar', 'time': '2015-01-14 09:54:17', '_key': 'app.follow'}\"\n```\n\nAnything I am missing or this a potential bug?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/25", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/25/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/25/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/25", "id": 52632292, "node_id": "MDU6SXNzdWU1MjYzMjI5Mg==", "number": 25, "title": "handling connection error between fluentd", "user": {"login": "yudai09", "id": 541396, "node_id": "MDQ6VXNlcjU0MTM5Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/541396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yudai09", "html_url": "https://github.com/yudai09", "followers_url": "https://api.github.com/users/yudai09/followers", "following_url": "https://api.github.com/users/yudai09/following{/other_user}", "gists_url": "https://api.github.com/users/yudai09/gists{/gist_id}", "starred_url": "https://api.github.com/users/yudai09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yudai09/subscriptions", "organizations_url": "https://api.github.com/users/yudai09/orgs", "repos_url": "https://api.github.com/users/yudai09/repos", "events_url": "https://api.github.com/users/yudai09/events{/privacy}", "received_events_url": "https://api.github.com/users/yudai09/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2014-12-22T09:22:12Z", "updated_at": "2016-07-26T01:59:48Z", "closed_at": "2016-07-26T01:59:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to use this module within a cron script for my project.\nHowever, I can't find the way handling connection error between my script and fluentd.\n\nAs long as I understand, this modules runs as follow way, so cron scripts (not daemon programs) cannot handle the connection problems.\n1. when it can't connect to fluentd, data will be stored in a buffer. \n2. And it does not return any error, nor call error handler function.\n\nAt least, I should know my script have remaining log in the buffer.\nPlease tell me how to handle connection errors between my script and fluentd.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/23", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/23/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/23/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/23", "id": 42627910, "node_id": "MDU6SXNzdWU0MjYyNzkxMA==", "number": 23, "title": "Python3 RecordFormatter is broken (and undocumented)", "user": {"login": "quasipedia", "id": 309045, "node_id": "MDQ6VXNlcjMwOTA0NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/309045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quasipedia", "html_url": "https://github.com/quasipedia", "followers_url": "https://api.github.com/users/quasipedia/followers", "following_url": "https://api.github.com/users/quasipedia/following{/other_user}", "gists_url": "https://api.github.com/users/quasipedia/gists{/gist_id}", "starred_url": "https://api.github.com/users/quasipedia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quasipedia/subscriptions", "organizations_url": "https://api.github.com/users/quasipedia/orgs", "repos_url": "https://api.github.com/users/quasipedia/repos", "events_url": "https://api.github.com/users/quasipedia/events{/privacy}", "received_events_url": "https://api.github.com/users/quasipedia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-09-12T13:18:12Z", "updated_at": "2016-04-13T16:16:20Z", "closed_at": "2016-04-13T16:16:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In order for the plugin to output data that can be correctly parsed by `fluentd` when it will forward it to some storage like for example `elasticsearch`, it is necessary to use the [RecordFormatter](https://github.com/fluent/fluent-logger-python/blob/master/fluent/handler.py#L14) class on the logging handler.\n\nHowever, there are two issues:\n1. The need for this step is undocumented\n2. The code in the plugin is python2-compatible only, as it uses the [`basestring`](https://github.com/fluent/fluent-logger-python/blob/master/fluent/handler.py#L47)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/21", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/21/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/21/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/21", "id": 42032417, "node_id": "MDU6SXNzdWU0MjAzMjQxNw==", "number": 21, "title": "Python3 pip installation is broken", "user": {"login": "quasipedia", "id": 309045, "node_id": "MDQ6VXNlcjMwOTA0NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/309045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quasipedia", "html_url": "https://github.com/quasipedia", "followers_url": "https://api.github.com/users/quasipedia/followers", "following_url": "https://api.github.com/users/quasipedia/following{/other_user}", "gists_url": "https://api.github.com/users/quasipedia/gists{/gist_id}", "starred_url": "https://api.github.com/users/quasipedia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quasipedia/subscriptions", "organizations_url": "https://api.github.com/users/quasipedia/orgs", "repos_url": "https://api.github.com/users/quasipedia/repos", "events_url": "https://api.github.com/users/quasipedia/events{/privacy}", "received_events_url": "https://api.github.com/users/quasipedia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-09-05T10:10:24Z", "updated_at": "2014-11-28T16:03:56Z", "closed_at": "2014-09-08T08:02:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After having created a python3 virtulaenv with the command `pyvenv-3.3 efk` , the pip installation fails with:\n\n```\n(efk) --- efk/fluent \u2039master* ?\u203a \u00bb pip install fluent-logger\nDownloading/unpacking fluent-logger\n  Running setup.py egg_info for package fluent-logger\n\nDownloading/unpacking msgpack-python (from fluent-logger)\n  Running setup.py egg_info for package msgpack-python\n\nInstalling collected packages: fluent-logger, msgpack-python\n  Running setup.py install for fluent-logger\n    error: could not create '/usr/lib/python2.7/site-packages/fluent': Permission denied\n    Complete output from command /usr/bin/python -c \"import setuptools;__file__='/tmp/pip-build-mac/fluent-logger/setup.py';exec(compile(open(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-EAWTAq-record/install-record.txt --single-version-externally-managed:\n    running install\nrunning build\nrunning build_py\nrunning install_lib\ncreating /usr/lib/python2.7/site-packages/fluent\nerror: could not create '/usr/lib/python2.7/site-packages/fluent': Permission denied\n----------------------------------------\nCommand /usr/bin/python -c \"import setuptools;__file__='/tmp/pip-build-mac/fluent-logger/setup.py';exec(compile(open(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-EAWTAq-record/install-record.txt --single-version-externally-managed failed with error code 1 in /tmp/pip-build-mac/fluent-logger\nStoring complete log in /home/mac/.pip/pip.log\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/11", "repository_url": "https://api.github.com/repos/fluent/fluent-logger-python", "labels_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/11/comments", "events_url": "https://api.github.com/repos/fluent/fluent-logger-python/issues/11/events", "html_url": "https://github.com/fluent/fluent-logger-python/issues/11", "id": 18897783, "node_id": "MDU6SXNzdWUxODg5Nzc4Mw==", "number": 11, "title": "Updating version and git tags", "user": {"login": "EvaSDK", "id": 745513, "node_id": "MDQ6VXNlcjc0NTUxMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/745513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EvaSDK", "html_url": "https://github.com/EvaSDK", "followers_url": "https://api.github.com/users/EvaSDK/followers", "following_url": "https://api.github.com/users/EvaSDK/following{/other_user}", "gists_url": "https://api.github.com/users/EvaSDK/gists{/gist_id}", "starred_url": "https://api.github.com/users/EvaSDK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EvaSDK/subscriptions", "organizations_url": "https://api.github.com/users/EvaSDK/orgs", "repos_url": "https://api.github.com/users/EvaSDK/repos", "events_url": "https://api.github.com/users/EvaSDK/events{/privacy}", "received_events_url": "https://api.github.com/users/EvaSDK/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2013-09-03T09:30:03Z", "updated_at": "2015-02-04T13:42:53Z", "closed_at": "2015-02-03T14:55:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\n1/ could you please add tags to the repository ?\n2/ could you please bump version number in setup.py, this would allow people (like me) who need the newer code to use dependency_links and adequate version requirements in setup.py to automatically fetch code from github rather than pypi.\n\nTIA.\n", "performed_via_github_app": null, "score": 1.0}]}