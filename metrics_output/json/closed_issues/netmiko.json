{"total_count": 1088, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1892", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1892/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1892/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1892/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1892", "id": 683023331, "node_id": "MDU6SXNzdWU2ODMwMjMzMzE=", "number": 1892, "title": "Script failing with \"Timed-out reading channel, data not available.\"", "user": {"login": "Millerlw", "id": 69986318, "node_id": "MDQ6VXNlcjY5OTg2MzE4", "avatar_url": "https://avatars1.githubusercontent.com/u/69986318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Millerlw", "html_url": "https://github.com/Millerlw", "followers_url": "https://api.github.com/users/Millerlw/followers", "following_url": "https://api.github.com/users/Millerlw/following{/other_user}", "gists_url": "https://api.github.com/users/Millerlw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Millerlw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Millerlw/subscriptions", "organizations_url": "https://api.github.com/users/Millerlw/orgs", "repos_url": "https://api.github.com/users/Millerlw/repos", "events_url": "https://api.github.com/users/Millerlw/events{/privacy}", "received_events_url": "https://api.github.com/users/Millerlw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-20T18:58:37Z", "updated_at": "2020-08-21T13:53:42Z", "closed_at": "2020-08-21T13:53:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Good afternoon,\r\n\r\nI am a network engineer, new to Python, and have signed up for your upcoming course.  In the meantime I am working on small scripts to automate some of the tasks my teams has to do.  One of them is to connect to a Cisco device(router or switch) and do the following:\r\n- save the config\r\n- copy the start config to flash as base.cfg\r\n- download new config via tftp\r\n- copy new file from flash to startup\r\n- reload the device\r\n\r\nIn the script, it prompts for:\r\n- Confirmation to continue\r\n- IP of device\r\n- Filename\r\n- username\r\n- password\r\n\r\nIf I run each section of the script in their own individual scripts, they work fine, but when I put them together, it fails after the copy from TFTP to flash with \"Timed-out reading channel, data not available.\".  It's almost as if the copy flash to startup command is not being passed.  The section to reload the router has been excluded for now but will be done last, obviously.\r\n\r\nI am attaching the script(new_device.py) as a text file, and including log and output files as well.\r\n\r\nAny help would be appreciated.\r\n\r\nThank you,\r\nLeonard\r\n\r\n[new_device.txt](https://github.com/ktbyers/netmiko/files/5104934/new_device.txt)\r\n[new_device.log](https://github.com/ktbyers/netmiko/files/5104917/new_device.log)\r\n[output.txt](https://github.com/ktbyers/netmiko/files/5104918/output.txt)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1891", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1891/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1891/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1891/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1891", "id": 682294063, "node_id": "MDU6SXNzdWU2ODIyOTQwNjM=", "number": 1891, "title": "Netmiko not installed properly on Windows", "user": {"login": "libaax", "id": 21017561, "node_id": "MDQ6VXNlcjIxMDE3NTYx", "avatar_url": "https://avatars3.githubusercontent.com/u/21017561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/libaax", "html_url": "https://github.com/libaax", "followers_url": "https://api.github.com/users/libaax/followers", "following_url": "https://api.github.com/users/libaax/following{/other_user}", "gists_url": "https://api.github.com/users/libaax/gists{/gist_id}", "starred_url": "https://api.github.com/users/libaax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/libaax/subscriptions", "organizations_url": "https://api.github.com/users/libaax/orgs", "repos_url": "https://api.github.com/users/libaax/repos", "events_url": "https://api.github.com/users/libaax/events{/privacy}", "received_events_url": "https://api.github.com/users/libaax/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-20T02:06:47Z", "updated_at": "2020-08-20T03:22:42Z", "closed_at": "2020-08-20T03:22:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "with only \"inport netmiko\" I get this! amazing!\r\nTraceback (most recent call last):\r\n  File \"C:/Users/libaa/PycharmProjects/NewProject/netmiko_test.py\", line 1, in <module>\r\n    import netmiko\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\__init__.py\", line 7, in <module>\r\n    from netmiko.ssh_dispatcher import ConnectHandler\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 2, in <module>\r\n    from netmiko.a10 import A10SSH\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\a10\\__init__.py\", line 1, in <module>\r\n    from netmiko.a10.a10_ssh import A10SSH\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\a10\\a10_ssh.py\", line 3, in <module>\r\n    from netmiko.cisco_base_connection import CiscoSSHConnection\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 2, in <module>\r\n    from netmiko.base_connection import BaseConnection\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 27, in <module>\r\n    from netmiko.utilities import (\r\n  File \"C:\\Users\\libaa\\PycharmProjects\\NewProject\\venv\\lib\\site-packages\\netmiko\\utilities.py\", line 8, in <module>\r\n    import serial.tools.list_ports\r\nModuleNotFoundError: No module named 'serial.tools'; 'serial' is not a package", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1888", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1888/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1888/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1888/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1888", "id": 680751628, "node_id": "MDU6SXNzdWU2ODA3NTE2Mjg=", "number": 1888, "title": "Netmiko Scripts", "user": {"login": "RichardMichael", "id": 5981761, "node_id": "MDQ6VXNlcjU5ODE3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5981761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RichardMichael", "html_url": "https://github.com/RichardMichael", "followers_url": "https://api.github.com/users/RichardMichael/followers", "following_url": "https://api.github.com/users/RichardMichael/following{/other_user}", "gists_url": "https://api.github.com/users/RichardMichael/gists{/gist_id}", "starred_url": "https://api.github.com/users/RichardMichael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RichardMichael/subscriptions", "organizations_url": "https://api.github.com/users/RichardMichael/orgs", "repos_url": "https://api.github.com/users/RichardMichael/repos", "events_url": "https://api.github.com/users/RichardMichael/events{/privacy}", "received_events_url": "https://api.github.com/users/RichardMichael/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-18T07:05:52Z", "updated_at": "2020-08-18T08:05:44Z", "closed_at": "2020-08-18T08:05:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "i am trying to send the below configs as a set:\r\n\r\nimport netmiko\r\nfrom netmiko import ConnectHandler\r\n\r\ndevice1 = {\r\n    'device_type': 'cisco_nxos',\r\n    'ip': '10.122.188.34',\r\n    'username': 'admin',\r\n    'password': 'cisco!123'\r\n}\r\nwhile True:\r\n    for devices in all_devices:\r\n        net_connect = ConnectHandler(**devices)\r\n        config_commands = [\r\n                        'vrf context tenant-1',     \r\n                        'no ip route 0.0.0.0/0 10.2.102.244',\r\n                        'ip route 0.0.0.0/0 10.2.102.234'   \r\n                        'no vrf context tenant-1' \r\n        ]\r\n        output = net_connect.send_config_set(config_commands)\r\n\r\ni am not sure why in switch i am not able to see the no vrf context cli for nxos for some reason. Do we have to add a different CLI for removal of vrf context? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1887", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1887/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1887/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1887/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1887", "id": 680692526, "node_id": "MDU6SXNzdWU2ODA2OTI1MjY=", "number": 1887, "title": "Connection to Cisco WLC 3504 failed", "user": {"login": "jifox", "id": 8406301, "node_id": "MDQ6VXNlcjg0MDYzMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8406301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jifox", "html_url": "https://github.com/jifox", "followers_url": "https://api.github.com/users/jifox/followers", "following_url": "https://api.github.com/users/jifox/following{/other_user}", "gists_url": "https://api.github.com/users/jifox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jifox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jifox/subscriptions", "organizations_url": "https://api.github.com/users/jifox/orgs", "repos_url": "https://api.github.com/users/jifox/repos", "events_url": "https://api.github.com/users/jifox/events{/privacy}", "received_events_url": "https://api.github.com/users/jifox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-08-18T05:03:34Z", "updated_at": "2020-08-21T05:16:13Z", "closed_at": "2020-08-21T05:16:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThere is a traceback when trying to connect to the Cisco WLC 3504.\r\nManual login is working from the same machine as expected.\r\n\r\n```bash\r\n$ ssh cisco@192.168.0.10\r\n\r\n\r\n(Cisco Controller)\r\nUser: cisco\r\nPassword:*****\r\n(Cisco Controller) show inventory\r\n\r\nBurned-in MAC Address............................ 00:08:00:00:00:01\r\nMaximum number of APs supported.................. 150\r\nNAME: \"Chassis\"    , DESCR: \"Cisco 3500 Series Wireless LAN Controller\"\r\nPID: AIR-CT3504-K9,  VID: V02,  SN: XXXXXXXXXXXX\r\n```\r\n\r\n## Source test.py\r\n\r\n```python\r\nfrom netmiko import ConnectHandler\r\nimport logging\r\nlogging.basicConfig(filename='logg.log', level=logging.DEBUG)\r\nlogger = logging.getLogger(\"netmiko\")\r\n\r\ncisco_wlc_ssh = {\r\n   'device_type': 'cisco_wlc_ssh',\r\n   'host': '192.168.0.10',\r\n   'username': 'cisco',\r\n   'password': 'cisco',\r\n   'banner_timeout': 30,\r\n}\r\n\r\nnet_connect = ConnectHandler(**cisco_wlc_ssh)\r\nnet_connect.find_prompt()\r\n```\r\n\r\n## Program output\r\n\r\n```bash\r\n$ python test.py\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/ansible/.vscode-server/extensions/ms-python.python-2020.7.96456/pythonFiles/lib/python/debugpy/__main__.py\", line 45, in <module>\r\n    cli.main()\r\n  File \"/home/ansible/.vscode-server/extensions/ms-python.python-2020.7.96456/pythonFiles/lib/python/debugpy/../debugpy/server/cli.py\", line 430, in main\r\n    run()\r\n  File \"/home/ansible/.vscode-server/extensions/ms-python.python-2020.7.96456/pythonFiles/lib/python/debugpy/../debugpy/server/cli.py\", line 267, in run_file\r\n    runpy.run_path(options.target, run_name=compat.force_str(\"__main__\"))\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/ansible/devel/develop/nornir/test.py\", line 14, in <module>\r\n    net_connect = ConnectHandler(**cisco_wlc_ssh)\r\n  File \"/home/ansible/devel/develop/nornir/lib/python3.7/site-packages/netmiko/ssh_dispatcher.py\", line 298, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/home/ansible/devel/develop/nornir/lib/python3.7/site-packages/netmiko/base_connection.py\", line 341, in __init__\r\n    self._open()\r\n  File \"/home/ansible/devel/develop/nornir/lib/python3.7/site-packages/netmiko/base_connection.py\", line 346, in _open\r\n    self.establish_connection()\r\n  File \"/home/ansible/devel/develop/nornir/lib/python3.7/site-packages/netmiko/base_connection.py\", line 915, in establish_connection\r\n    self.remote_conn_pre.connect(**ssh_connect_params)\r\n  File \"/home/ansible/devel/develop/nornir/lib/python3.7/site-packages/paramiko/client.py\", line 412, in connect\r\n    server_key = t.get_remote_server_key()\r\n  File \"/home/ansible/devel/develop/nornir/lib/python3.7/site-packages/paramiko/transport.py\", line 834, in get_remote_server_key\r\n    raise SSHException(\"No existing session\")\r\nparamiko.ssh_exception.SSHException: No existing session\r\n\r\n```\r\n\r\n```log\r\nDEBUG:paramiko.transport:starting thread (client mode): 0x3cd2c550\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.7.1\r\nDEBUG:paramiko.transport:Remote version/idstring: SSH-2.0-CISCO_WLC\r\nINFO:paramiko.transport:Connected (version 2.0, client CISCO_WLC)\r\nDEBUG:paramiko.transport:kex algos:['curve25519-sha256@libssh.org', 'ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group14-sha1'] server key:['ssh-rsa', 'rsa-sha2-512', 'rsa-sha2-256', 'ecdsa-sha2-nistp256'] client encrypt:['chacha20-poly1305@openssh.com', 'aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'aes128-gcm@openssh.com', 'aes256-gcm@openssh.com'] server encrypt:['chacha20-poly1305@openssh.com', 'aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'aes128-gcm@openssh.com', 'aes256-gcm@openssh.com'] client mac:['umac-64-etm@openssh.com', 'umac-128-etm@openssh.com', 'hmac-sha2-256-etm@openssh.com', 'hmac-sha2-512-etm@openssh.com', 'hmac-sha1-etm@openssh.com', 'umac-64@openssh.com', 'umac-128@openssh.com', 'hmac-sha2-256', 'hmac-sha2-512', 'hmac-sha1'] server mac:['umac-64-etm@openssh.com', 'umac-128-etm@openssh.com', 'hmac-sha2-256-etm@openssh.com', 'hmac-sha2-512-etm@openssh.com', 'hmac-sha1-etm@openssh.com', 'umac-64@openssh.com', 'umac-128@openssh.com', 'hmac-sha2-256', 'hmac-sha2-512', 'hmac-sha1'] client compress:['none', 'zlib@openssh.com', 'zlib'] server compress:['none', 'zlib@openssh.com', 'zlib'] client lang:[''] server lang:[''] kex follows?False\r\nDEBUG:paramiko.transport:Kex agreed: curve25519-sha256@libssh.org\r\nDEBUG:paramiko.transport:HostKey agreed: ecdsa-sha2-nistp256\r\nDEBUG:paramiko.transport:Cipher agreed: aes128-ctr\r\nDEBUG:paramiko.transport:MAC agreed: hmac-sha2-256\r\nDEBUG:paramiko.transport:Compression agreed: none\r\nDEBUG:paramiko.transport:kex engine KexCurve25519 specified hash_algo <built-in function openssl_sha256>\r\nDEBUG:paramiko.transport:Switch to new keys ...\r\n```\r\n\r\n## Environment Info\r\n\r\n```bash\r\n$ python --version\r\nPython 3.7.4\r\n\r\n $ cat /etc/redhat-release \r\nCentOS Linux release 7.7.1908 (Core)\r\n\r\n$ uname -a\r\nLinux centos.local 3.10.0-1062.18.1.el7.x86_64 #1 SMP Tue Mar 17 23:49:17 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n```bash\r\n$ pip install --upgrade netmiko\r\nRequirement already up-to-date: netmiko in ./lib/python3.7/site-packages (3.2.0)\r\nRequirement already satisfied, skipping upgrade: setuptools>=38.4.0 in ./lib/python3.7/site-packages (from netmiko) (49.2.1)\r\nRequirement already satisfied, skipping upgrade: pyserial in ./lib/python3.7/site-packages (from netmiko) (3.4)\r\nRequirement already satisfied, skipping upgrade: scp>=0.13.2 in ./lib/python3.7/site-packages (from netmiko) (0.13.2)\r\nRequirement already satisfied, skipping upgrade: textfsm in ./lib/python3.7/site-packages (from netmiko) (1.1.0)\r\nRequirement already satisfied, skipping upgrade: paramiko>=2.4.3 in ./lib/python3.7/site-packages (from netmiko) (2.7.1)\r\nRequirement already satisfied, skipping upgrade: future in ./lib/python3.7/site-packages (from textfsm->netmiko) (0.18.2)\r\nRequirement already satisfied, skipping upgrade: six in ./lib/python3.7/site-packages (from textfsm->netmiko) (1.15.0)\r\nRequirement already satisfied, skipping upgrade: pynacl>=1.0.1 in ./lib/python3.7/site-packages (from paramiko>=2.4.3->netmiko) (1.4.0)\r\nRequirement already satisfied, skipping upgrade: cryptography>=2.5 in ./lib/python3.7/site-packages (from paramiko>=2.4.3->netmiko) (3.0)\r\nRequirement already satisfied, skipping upgrade: bcrypt>=3.1.3 in ./lib/python3.7/site-packages (from paramiko>=2.4.3->netmiko) (3.1.7)\r\nRequirement already satisfied, skipping upgrade: cffi>=1.4.1 in ./lib/python3.7/site-packages (from pynacl>=1.0.1->paramiko>=2.4.3->netmiko) (1.14.1)\r\nRequirement already satisfied, skipping upgrade: pycparser in ./lib/python3.7/site-packages (from cffi>=1.4.1->pynacl>=1.0.1->paramiko>=2.4.3->netmiko) (2.20)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1879", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1879/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1879/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1879/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1879", "id": 677075901, "node_id": "MDU6SXNzdWU2NzcwNzU5MDE=", "number": 1879, "title": "Huawei AR same code different behaviour between versions", "user": {"login": "jeanoballe", "id": 62709630, "node_id": "MDQ6VXNlcjYyNzA5NjMw", "avatar_url": "https://avatars3.githubusercontent.com/u/62709630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeanoballe", "html_url": "https://github.com/jeanoballe", "followers_url": "https://api.github.com/users/jeanoballe/followers", "following_url": "https://api.github.com/users/jeanoballe/following{/other_user}", "gists_url": "https://api.github.com/users/jeanoballe/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeanoballe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeanoballe/subscriptions", "organizations_url": "https://api.github.com/users/jeanoballe/orgs", "repos_url": "https://api.github.com/users/jeanoballe/repos", "events_url": "https://api.github.com/users/jeanoballe/events{/privacy}", "received_events_url": "https://api.github.com/users/jeanoballe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T17:54:14Z", "updated_at": "2020-08-18T04:16:41Z", "closed_at": "2020-08-18T04:16:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nWe were using Netmiko version 2.4.1 for Huawei AR model and it was working fine using the \"send_config_set()\" method. We recently made an update and installed version 3.2.0, but with this version I have the \"Timed-out reading channel, data not available\" error when the \"repr\" is \"Warning: This operation may affect online users, are you sure to change the user privilege level ?[Y/N]\", while in the 2.4.1 version the same operation doesnt raise the exception. \r\n\r\nIs there any way to avoid \"Timed-out reading channel, data not available\" exception being raised? (as it was in the previous versions) \r\n\r\nSample Code:\r\n```\r\nmy_device = {\r\n\t'host': params['mgmt_ip'],\r\n\t'username': credentials['username'],\r\n\t'password': credentials['password'],\r\n\t'device_type': 'huawei',\r\n\t'global_delay_factor': 1,\r\n\t'timeout': 120\r\n}\r\n\r\nconfig = render(template_path, params).splitlines()\r\n\r\ntry:\r\n\tnet_connect = ConnectHandler(**my_device)\r\n\tnet_connect.send_config_set(config)\r\n\tnet_connect.disconnect()\r\n\treturn CONFIG_OK\r\nexcept (NetMikoTimeoutException) as e:\r\n\tlogging.error(e)\r\n\treturn CONFIG_TIMEOUT_ERROR\r\nexcept (NetMikoAuthenticationException) as e:\r\n\tlogging.error(e)\r\n\treturn CONFIG_AUTH_ERROR\r\nfinally:\r\n\tlogging.info(\"[Worker - SSH Config] Disconecting from the device.\")\r\n\tnet_connect.disconnect()\r\n```\r\n\r\nLog Netmiko version 2.4.1:\r\n\r\n```\r\n[c-30707327053-35353537-LAB-ESENCIAL]aaa\r\n[c-30707327053-35353537-LAB-ESENCIAL-aaa]local-user um password irreversible-cip \u001b[1Dher %^%#dcL{BVg_/<XFpTF-aOF'T#m@+53#M15Zq|8|n\"CE_!X(R7<!fW.H&TP=MYP-%^%#\r\nInfo: After changing the rights (including the password, access type, FTP directory, bind IP, and level) of a local user, the rights of users already online do not change. The change takes effect to users who go online after the change.\r\n[c-30707327053-35353537-LAB-ESENCIAL-aaa]local-user um privilege level 15\r\nWarning: This operation may affect online users, are you sure to change the user privilege level ?[Y/N]l\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\r\nError: Please choose 'YES' or 'NO' first before pressing 'Enter'. [Y/N]:l\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\r\n...\r\nError: Please choose 'YES' or 'NO' first before pressing 'Enter'. [Y/N]:y\u0007\u0007\r\n[c-30707327053-35353537-LAB-ESENCIAL-aaa]quit\r\n[c-30707327053-35353537-LAB-ESENCIAL]save\r\n Warning: The current configuration will be written to the device. \r\n Are you sure to continue?[Y/N]:y\u0007\u0007return\r\n<c-30707327053-35353537-LAB-ESENCIAL>\r\n[2020-08-11 14:17:09,340: DEBUG/ForkPoolWorker-7] write_channel: b'\\n'\r\n[2020-08-11 14:17:09,441: DEBUG/ForkPoolWorker-7] read_channel: \r\n<c-30707327053-35353537-LAB-ESENCIAL>\r\n[2020-08-11 14:17:09,542: DEBUG/ForkPoolWorker-7] read_channel: \r\n[2020-08-11 14:17:11,545: DEBUG/ForkPoolWorker-7] read_channel: \r\n[2020-08-11 14:17:11,546: DEBUG/ForkPoolWorker-7] exit_config_mode: \r\n[2020-08-11 14:17:11,547: DEBUG/ForkPoolWorker-7] write_channel: b'exit\\n'\r\n[2020-08-11 14:17:11,548: INFO/ForkPoolWorker-7] [Worker - SSH Config] Disconecting from the device.\r\n```\r\nLog Netmiko version 3.2.0:\r\n\r\n```\r\n[2020-08-11 14:25:41,312: DEBUG/ForkPoolWorker-7] write_channel: b'aaa\\n'\r\n[2020-08-11 14:25:41,312: DEBUG/ForkPoolWorker-7] Pattern is: aaa\r\n...\r\n[2020-08-11 14:25:41,905: DEBUG/ForkPoolWorker-7] write_channel: b'local-user um privilege level 15\\n'\r\n[2020-08-11 14:25:41,906: DEBUG/ForkPoolWorker-7] Pattern is: local\\-user\\ um\\ privilege\\ level\\ 15\r\n[2020-08-11 14:25:41,974: DEBUG/ForkPoolWorker-7] Stripping ANSI escape codes\r\n[2020-08-11 14:25:41,975: DEBUG/ForkPoolWorker-7] new_output = l\r\n[2020-08-11 14:25:41,975: DEBUG/ForkPoolWorker-7] repr = 'l'\r\n[2020-08-11 14:25:41,975: DEBUG/ForkPoolWorker-7] _read_channel_expect read_data: l\r\n[2020-08-11 14:25:42,077: DEBUG/ForkPoolWorker-7] Stripping ANSI escape codes\r\n[2020-08-11 14:25:42,078: DEBUG/ForkPoolWorker-7] new_output = ocal-user um privilege level 15\r\n[2020-08-11 14:25:42,078: DEBUG/ForkPoolWorker-7] repr = 'ocal-user um privilege level 15'\r\n[2020-08-11 14:25:42,078: DEBUG/ForkPoolWorker-7] _read_channel_expect read_data: ocal-user um privilege level 15\r\n[2020-08-11 14:25:42,079: DEBUG/ForkPoolWorker-7] Pattern found: local\\-user\\ um\\ privilege\\ level\\ 15 local-user um privilege level 15\r\n[2020-08-11 14:25:42,079: DEBUG/ForkPoolWorker-7] Pattern is: (?:c\\-30707327053\\-35353537\\-LAB\\-ESENCIAL|#)\r\n[2020-08-11 14:25:42,081: DEBUG/ForkPoolWorker-7] Stripping ANSI escape codes\r\n[2020-08-11 14:25:42,081: DEBUG/ForkPoolWorker-7] new_output = \r\nWarning: This operation may affect online users, are you sure to change the user privilege level ?[Y/N]\r\n[2020-08-11 14:25:42,081: DEBUG/ForkPoolWorker-7] repr = '\\r\\nWarning: This operation may affect online users, are you sure to change the user privilege level ?[Y/N]'\r\n[2020-08-11 14:25:42,082: DEBUG/ForkPoolWorker-7] _read_channel_expect read_data: \r\nWarning: This operation may affect online users, are you sure to change the user privilege level ?[Y/N]\r\n[2020-08-11 14:26:02,183: ERROR/ForkPoolWorker-7] Timed-out reading channel, data not available.\r\n[2020-08-11 14:26:02,184: INFO/ForkPoolWorker-7] [Worker - SSH Config] Disconecting from the device.\r\n[2020-08-11 14:26:02,186: DEBUG/ForkPoolWorker-7] write_channel: b'exit\\n'\r\n[2020-08-11 14:26:02,199: INFO/ForkPoolWorker-7] Config task final state: TIMEOUT_ERROR\r\n[2020-08-11 14:26:02,202: DEBUG/ForkPoolWorker-7] EOF in transport thread\r\n```\r\n\r\n[log_netmiko_2_4_1.txt](https://github.com/ktbyers/netmiko/files/5058560/log_netmiko_2_4_1.txt)\r\n[log_netmiko_3_2_0.txt](https://github.com/ktbyers/netmiko/files/5058561/log_netmiko_3_2_0.txt)\r\n\r\nThanks in advance.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1875", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1875/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1875/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1875/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1875", "id": 674042665, "node_id": "MDU6SXNzdWU2NzQwNDI2NjU=", "number": 1875, "title": "Cisco XR suppressing error message on XR device when SSH connected", "user": {"login": "taisasak", "id": 26734999, "node_id": "MDQ6VXNlcjI2NzM0OTk5", "avatar_url": "https://avatars0.githubusercontent.com/u/26734999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taisasak", "html_url": "https://github.com/taisasak", "followers_url": "https://api.github.com/users/taisasak/followers", "following_url": "https://api.github.com/users/taisasak/following{/other_user}", "gists_url": "https://api.github.com/users/taisasak/gists{/gist_id}", "starred_url": "https://api.github.com/users/taisasak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taisasak/subscriptions", "organizations_url": "https://api.github.com/users/taisasak/orgs", "repos_url": "https://api.github.com/users/taisasak/repos", "events_url": "https://api.github.com/users/taisasak/events{/privacy}", "received_events_url": "https://api.github.com/users/taisasak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-06T06:04:19Z", "updated_at": "2020-08-07T02:21:56Z", "closed_at": "2020-08-07T02:21:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "netmiko: 3.2.0\r\nCisco XR: 7.0.2\r\n\r\n__[Problem Description]__\r\n\r\nI can see the below error message on a Cisco XR device every time netmiko is SSH connected to a Cisco XR device.\r\n```\r\nRP/0/RP0/CPU0:Aug  6 13:49:13.303 JST: SSHD_[68767]: %SECURITY-SSHD-3-ERR_ERRNO : Failed to set window size: %s 'tty-infra' detected the 'fatal' condition 'An invalid operation has been requested'\r\n```\r\n```python\r\nfrom netmiko import ConnectHandler\r\n\r\nNCS5504_A = {\r\n    'device_type': 'cisco_xr',\r\n    'host':   '<A.B.C.D>',\r\n    'username': '<username>',\r\n    'password': '<password>',\r\n}\r\n\r\nnetconn = ConnectHandler(**NCS5504_A)\r\n```\r\n\r\nEven though I don't see any functional problems, I'd like to suppress the above error message from Cisco XR device's point of view.\r\n\r\n__[Troubleshoot]__\r\n\r\nAs far as I debugged from Cisco XR device side, Cisco XR device emits the above error message when SSH terminal width/height is out of the below supported ranges.\r\n\r\n- terminal width: <0-512>\r\n- terminal height: <0-512>\r\n\r\nThe current netmiko always sets terminal width=511 and terminal height=1000 by default, and they're not configurable.\r\n```python\r\nclass BaseConnection(object):\r\n    \"\"\"\r\n    Defines vendor independent methods.\r\n    Otherwise method left as a stub method.\r\n    \"\"\"\r\n\r\n    -- snip --\r\n\r\n    def establish_connection(self, width=511, height=1000):\r\n        \"\"\"Establish SSH connection to the network device\r\n        -- snip --\r\n```\r\n\r\n__[Fix]__\r\n\r\nI think there are a couple of ways to fix this issue.\r\n\r\n1. Modify BaseConnection class so that both terminal width/height could be configurable by a netmiko user\r\n1. Modify CiscoXrBase class so that it would overwrite establish_connection() method with allowed terminal width/height by the below patch. (I tried the below patch and confirmed the error message would not be seen anymore on a Cisco XR device)\r\n\r\n```python\r\ndiff --git a/netmiko/cisco/cisco_xr.py b/netmiko/cisco/cisco_xr.py\r\nindex e698609..7559188 100644\r\n--- a/netmiko/cisco/cisco_xr.py\r\n+++ b/netmiko/cisco/cisco_xr.py\r\n@@ -4,6 +4,9 @@ from netmiko.cisco_base_connection import CiscoBaseConnection, CiscoFileTransfer\r\n\r\n\r\n class CiscoXrBase(CiscoBaseConnection):\r\n+    def establish_connection(self):\r\n+        super().establish_connection(width=511, height=511)\r\n+\r\n     def session_preparation(self):\r\n         \"\"\"Prepare the session after the connection has been established.\"\"\"\r\n         self._test_channel_read()\r\n```\r\n\r\nWould you look at this issue and let me know which you think better?\r\n\r\nThanks,\r\nTaisuke\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1874", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1874/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1874/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1874/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1874", "id": 674033974, "node_id": "MDU6SXNzdWU2NzQwMzM5NzQ=", "number": 1874, "title": "Cisco ASA access-list issue", "user": {"login": "vkazimov", "id": 31644960, "node_id": "MDQ6VXNlcjMxNjQ0OTYw", "avatar_url": "https://avatars3.githubusercontent.com/u/31644960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vkazimov", "html_url": "https://github.com/vkazimov", "followers_url": "https://api.github.com/users/vkazimov/followers", "following_url": "https://api.github.com/users/vkazimov/following{/other_user}", "gists_url": "https://api.github.com/users/vkazimov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vkazimov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vkazimov/subscriptions", "organizations_url": "https://api.github.com/users/vkazimov/orgs", "repos_url": "https://api.github.com/users/vkazimov/repos", "events_url": "https://api.github.com/users/vkazimov/events{/privacy}", "received_events_url": "https://api.github.com/users/vkazimov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-06T05:43:19Z", "updated_at": "2020-08-11T22:06:13Z", "closed_at": "2020-08-11T22:06:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\nI want to write access-list to Cisco ASA Firewall with send_config_set command.\r\n\r\n**acl** = [\"access-list inside_access_in line 1 extended permit ip 192.168.1.0 255.255.255.0 host 172.16.1.100\", \"access-list inside_access_in line 2 extended permit ip 192.168.1.0 255.255.255.0 host **172.16.2.100\"]**\r\n\r\noutput = net_connect.send_config_set(acl)\r\nprint(output)\r\n\r\nThe following problem occur when i running script : \r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Python\\lib\\site-packages\\paramiko-2.7.1-py3.8.egg\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Python\\lib\\site-packages\\paramiko-2.7.1-py3.8.egg\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Python\\lib\\site-packages\\netmiko-3.1.0-py3.8.egg\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n  File \"C:\\Python\\lib\\site-packages\\paramiko-2.7.1-py3.8.egg\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"E:/Python/MyScripts/learning/test.py\", line 57, in <module>\r\n    output = net_connect.send_config_set(a)\r\n  File \"C:\\Python\\lib\\site-packages\\netmiko-3.1.0-py3.8.egg\\netmiko\\base_connection.py\", line 1750, in send_config_set\r\n  File \"C:\\Python\\lib\\site-packages\\netmiko-3.1.0-py3.8.egg\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n  File \"C:\\Python\\lib\\site-packages\\netmiko-3.1.0-py3.8.egg\\netmiko\\base_connection.py\", line 560, in _read_channel_expect\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nProcess finished with exit code 1\r\n\r\n-----------------------------------------\r\n\r\nDebug code : \r\n\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'access-list inside_access_in line 1 extended permit ip 192.168.1.0 255.255.255.0 host 172.16.1.100\\n'\r\nDEBUG:netmiko:Pattern is: access\\-list\\ inside_access_in\\ line\\ 1\\ extended\\ permit\\ ip\\ 192\\.168\\.1\\.0\\ 255\\.255\\.255\\.0\\ host\\ 172\\.16\\.1\\.100\r\nDEBUG:netmiko:_read_channel_expect read_data: a\r\nDEBUG:netmiko:_read_channel_expect read_data: ccess-list inside_access_in line 1 extended permit ip 192.1<0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08>$n line 1 extended permit ip 192.16                         <0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08>8.1.0 255.255.255.0 host <0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08>$p 192.168.1.0 255.255.255.0 host 1                         <0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08>72.16.1.100<0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08><0x08>access-list inside_access_in line 1 extended permit ip 192.$<0x08><0x08><0x08><0x08>\r\n\r\n\r\n\r\n\r\nCisco-ASA(config)# \r\nDEBUG:paramiko.transport:EOF in transport thread\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1865", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1865/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1865/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1865/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1865", "id": 669129227, "node_id": "MDU6SXNzdWU2NjkxMjkyMjc=", "number": 1865, "title": "auto_connect not working when passed in ConnectHandler/CiscoBaseConnection", "user": {"login": "rubengm13", "id": 66105177, "node_id": "MDQ6VXNlcjY2MTA1MTc3", "avatar_url": "https://avatars1.githubusercontent.com/u/66105177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rubengm13", "html_url": "https://github.com/rubengm13", "followers_url": "https://api.github.com/users/rubengm13/followers", "following_url": "https://api.github.com/users/rubengm13/following{/other_user}", "gists_url": "https://api.github.com/users/rubengm13/gists{/gist_id}", "starred_url": "https://api.github.com/users/rubengm13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rubengm13/subscriptions", "organizations_url": "https://api.github.com/users/rubengm13/orgs", "repos_url": "https://api.github.com/users/rubengm13/repos", "events_url": "https://api.github.com/users/rubengm13/events{/privacy}", "received_events_url": "https://api.github.com/users/rubengm13/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-30T19:44:28Z", "updated_at": "2020-07-31T18:50:53Z", "closed_at": "2020-07-31T18:50:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Going through the API  documentation I noticed that auto_connect was a feature I wanted to utilize. I didn't want the connection to be established as soon as I created the SSH Class.\r\nhttps://ktbyers.github.io/netmiko/docs/netmiko/cisco_base_connection.html\r\n\r\nI tried it in both ConnectHandler and CiscoBaseConnection, got:\r\n`TypeError: __init__() got an unexpected keyword argument 'auto_connect'`\r\n\r\nI checked the library and found no 'auto_connect' in it.\r\n\r\nRunning netmiko 3.1.1\r\n\r\nIs auto_connect, something that will be added later and somehow made it to the documentation?\r\n\r\nIs there a workaround to prevent the Start of the connection? (similar to what auto_connect =False would do)?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1863", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1863/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1863/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1863/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1863", "id": 668636267, "node_id": "MDU6SXNzdWU2Njg2MzYyNjc=", "number": 1863, "title": "Nokia SR OS/Alcatel AOS - problem with detecting prompt while using save_config after device reboot for software upgrade", "user": {"login": "akei9", "id": 16486151, "node_id": "MDQ6VXNlcjE2NDg2MTUx", "avatar_url": "https://avatars2.githubusercontent.com/u/16486151?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akei9", "html_url": "https://github.com/akei9", "followers_url": "https://api.github.com/users/akei9/followers", "following_url": "https://api.github.com/users/akei9/following{/other_user}", "gists_url": "https://api.github.com/users/akei9/gists{/gist_id}", "starred_url": "https://api.github.com/users/akei9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akei9/subscriptions", "organizations_url": "https://api.github.com/users/akei9/orgs", "repos_url": "https://api.github.com/users/akei9/repos", "events_url": "https://api.github.com/users/akei9/events{/privacy}", "received_events_url": "https://api.github.com/users/akei9/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-30T11:37:39Z", "updated_at": "2020-08-04T16:49:34Z", "closed_at": "2020-08-04T16:49:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I found a problem with PROMPT detecting mechanism in Nokia SR OS/Alcatel-Lucent AOS when we are restarting device using **_admin reboot upgrade_** command. \r\n\r\nWhen we are restarting network device using above command and log on to this device after reboot the prompt is starting from asterisk sign (***X:HOSTNAME#**).  \r\n\r\nProblems starts when we want to use **save_config()** method after reboot. The command hangs and then returns the timeout exception because it cannot find the prompt (_because is looking for the one without a asterisk sign_ - **X:HOSTNAME#**).\r\n\r\nThe solution is to add a condition where we check if the asterisk sign is in the search_pattern variable, and if so, replace it with an empty string:\r\n\r\n```\r\nif '*' in search_pattern:\r\n    search_pattern = search_pattern.replace('*', '')\r\n```\r\n\r\n\r\nThe other solution is to modify **save_config()** method in **nokia_sros_ssh.py[113]** (now it looks like below):\r\n```\r\ndef save_config(self, *args, **kwargs):\r\n    \"\"\"Persist configuration to cflash for Nokia SR OS\"\"\"\r\n    return self.send_command(command_string=\"/admin save\", expect_string=r\"#\")\r\n```\r\n\r\nand change to that (_with added **kwargs to **send_command** method parameter_):\r\n```\r\ndef save_config(self, *args, **kwargs):\r\n    \"\"\"Persist configuration to cflash for Nokia SR OS\"\"\"\r\n    return self.send_command(command_string=\"/admin save\", **kwargs)\r\n```\r\n\r\nthat we can set our own expected string variable (expect_string).\r\n\r\nAnd the last - best (additional) solution is to write a separate function for the admin reboot upgrade operation, including the change of the prompt detection.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1862", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1862/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1862/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1862/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1862", "id": 668603715, "node_id": "MDU6SXNzdWU2Njg2MDM3MTU=", "number": 1862, "title": "hp_comware defaulting an interface using send_config_from_file", "user": {"login": "davidforde1208", "id": 68995317, "node_id": "MDQ6VXNlcjY4OTk1MzE3", "avatar_url": "https://avatars0.githubusercontent.com/u/68995317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidforde1208", "html_url": "https://github.com/davidforde1208", "followers_url": "https://api.github.com/users/davidforde1208/followers", "following_url": "https://api.github.com/users/davidforde1208/following{/other_user}", "gists_url": "https://api.github.com/users/davidforde1208/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidforde1208/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidforde1208/subscriptions", "organizations_url": "https://api.github.com/users/davidforde1208/orgs", "repos_url": "https://api.github.com/users/davidforde1208/repos", "events_url": "https://api.github.com/users/davidforde1208/events{/privacy}", "received_events_url": "https://api.github.com/users/davidforde1208/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-30T10:50:54Z", "updated_at": "2020-08-20T17:12:09Z", "closed_at": "2020-08-20T17:12:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nam a newbee to python, am in a bit of a bind. I have managed to get a script to read commands from file using the send_config_from_file, however when the hp_comware command to default an interface \"default\" is prompted to confirm defaulting the interface requiring a \"y\" and enter (if you were to do it on the CLI of the switch). i am getting a \"Timed-out reading channel, data not available\" error. I also for logging purpsoses have the output going to a file of the changes made to both switches.\r\n\r\nI have added the arguements for the connection handler: \r\n\"global_delay_factor\": 10,\r\n\"blocking_timeout\": 15\r\nto the dictionary that is creating the SSH connection to see if it was a timing issue - but get the same error. have pasted code below with some bits redacted\r\n\r\ncode:\r\nfrom __future__ import absolute_import, division, print_function\r\n\r\nimport json\r\nimport netmiko\r\nimport mytools\r\nimport time\r\n\r\nnetmiko_exceptions = (netmiko.ssh_exception.NetMikoTimeoutException,\r\n                      netmiko.ssh_exception.NetMikoAuthenticationException)\r\n\r\nusername, password = mytools.get_credentials()\r\n\r\nwith open('switches.json') as dev_file:\r\n     devices = json.load(dev_file)\r\n\r\nfor device in devices:\r\n    device['username'] = username\r\n    device['password'] = password\r\n    try:\r\n        print('~' * 79)\r\n        print('Connecting to device:', device['ip'])\r\n        connection = netmiko.ConnectHandler(**device)\r\n        filename = connection.base_prompt + '.txt'\r\n        with open(filename, 'w') as out_file:\r\n            if device['ip'] == '<IPADDRESS>':\r\n                out_file.write('moving to system mode -> ' \r\n                               +connection.enable('system'))\r\n                out_file.write('Sent following command to: ' \r\n                               +connection.find_prompt()+ ' -> ' \r\n                               +connection.send_config_from_file(\r\n                                   'core_commands_1.txt')+ '\\n\\n')\r\n                time.sleep(50)\r\n                out_file.write(connection.send_command('display ospf peer'))\r\n                out_file.write(connection.send_command('save force'))\r\n                print ('disconnecting... ' +connection.disconnect())\r\n            elif device['ip'] != '<IPADDRESS>':\r\n                out_file.write('moving to system mode -> ' +connection.enable(\r\n                    'system'))\r\n                out_file.write('Sent following command to: ' \r\n\t\t\t\t\t\t\t\t+connection.find_prompt()+ ' -> ' \r\n\t\t\t\t\t\t\t\t+connection.send_config_from_file(\r\n                                    'access_switch_commands_1.txt')+ '\\n\\n')\r\n                out_file.write(connection.send_command('save force'))\r\n                print('disconecting... ' +connection.disconnect())\r\n    except netmiko_exceptions as e:\r\n        print('Failed to ', device['ip'], e)\r\n\r\n\r\n\r\n\r\n\r\ncommands in both files to be read where issue occurs:\r\n\r\ninterface Ten-GigabitEthernet2/2/0/27\r\ndefault       <----- this point is where it hangs\r\ny                 <------ this doesn't get sent to the switch\r\n\r\noutput with errors:\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nConnecting to device: <IPADDRESS>\r\nFailed to  <IPADDRESS> Timed-out reading channel, data not available.\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nConnecting to device: <IPADDRESS>\r\nFailed to  <IPADDRESS>Timed-out reading channel, data not available.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1861", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1861/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1861/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1861/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1861", "id": 668093467, "node_id": "MDU6SXNzdWU2NjgwOTM0Njc=", "number": 1861, "title": "Going into enable mode fails", "user": {"login": "tars01", "id": 29687497, "node_id": "MDQ6VXNlcjI5Njg3NDk3", "avatar_url": "https://avatars3.githubusercontent.com/u/29687497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tars01", "html_url": "https://github.com/tars01", "followers_url": "https://api.github.com/users/tars01/followers", "following_url": "https://api.github.com/users/tars01/following{/other_user}", "gists_url": "https://api.github.com/users/tars01/gists{/gist_id}", "starred_url": "https://api.github.com/users/tars01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tars01/subscriptions", "organizations_url": "https://api.github.com/users/tars01/orgs", "repos_url": "https://api.github.com/users/tars01/repos", "events_url": "https://api.github.com/users/tars01/events{/privacy}", "received_events_url": "https://api.github.com/users/tars01/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-29T19:37:50Z", "updated_at": "2020-07-30T11:04:30Z", "closed_at": "2020-07-30T11:04:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Kirk\r\n\r\nI have an issue where on some Cisco devices (routers) where it fails to go into enable mode. They are quite slow going into enable mode because they are on remote connections on slow lines but I have tried setting global_delay to as high as 30 and it still fails so it's some other issue going on here.\r\n\r\nIf I log on to the device it goes into enable mode fine (takes about 10 seconds) \r\n\r\nWhen you go into enable mode the devices go straight to level 15 (no enable password required) It works fine like this on hundreds of routers but on about 5 or 10% of them it just fails and I can't see any reason why. \r\n\r\n**My connection parameters (no enable secret)**\r\n\r\n```\r\n    ios_device = {\r\n        'device_type': 'cisco_ios',\r\n        'ip': ip_address_of_device,\r\n        'username': username,\r\n        'password': password,\r\n        'session_log': 'session_output',\r\n    }\r\n```\r\n\r\n**Debug log**\r\n\r\n```\r\nTest-BA-sr1-lab-ce>\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel:\r\n\r\nDEBUG:netmiko:Pattern is: Test\\-BA\\-sr1\\-lab\\-ce\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\nTest-BA-sr1-lab-ce>\r\nDEBUG:netmiko:Pattern found: Test\\-BA\\-sr1\\-lab\\-ce\r\nTest-BA-sr1-lab-ce>\r\nDEBUG:netmiko:write_channel: enable\r\n\r\nDEBUG:netmiko:Pattern is: (Test\\-BA\\-sr1\\-lab\\-ce|ssword)\r\nDEBUG:netmiko:_read_channel_expect read_data: enable\r\n\r\nDEBUG:paramiko.transport:EOF in transport thread\r\n```\r\n\r\n**Session log**\r\n```\r\nTest-BA-sr1-lab-ce>\r\nTest-BA-sr1-lab-ce>terminal length 0\r\nTest-BA-sr1-lab-ce>terminal width 511\r\nTest-BA-sr1-lab-ce>\r\nTest-BA-sr1-lab-ce>\r\nTest-BA-sr1-lab-ce>\r\nTest-BA-sr1-lab-ce>enable\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1859", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1859/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1859/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1859/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1859", "id": 667971577, "node_id": "MDU6SXNzdWU2Njc5NzE1Nzc=", "number": 1859, "title": "Unable to import netmiko module in Python 3.5", "user": {"login": "kousikbangalore", "id": 30199446, "node_id": "MDQ6VXNlcjMwMTk5NDQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/30199446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kousikbangalore", "html_url": "https://github.com/kousikbangalore", "followers_url": "https://api.github.com/users/kousikbangalore/followers", "following_url": "https://api.github.com/users/kousikbangalore/following{/other_user}", "gists_url": "https://api.github.com/users/kousikbangalore/gists{/gist_id}", "starred_url": "https://api.github.com/users/kousikbangalore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kousikbangalore/subscriptions", "organizations_url": "https://api.github.com/users/kousikbangalore/orgs", "repos_url": "https://api.github.com/users/kousikbangalore/repos", "events_url": "https://api.github.com/users/kousikbangalore/events{/privacy}", "received_events_url": "https://api.github.com/users/kousikbangalore/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-29T16:21:43Z", "updated_at": "2020-07-31T18:19:21Z", "closed_at": "2020-07-31T18:19:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am new in python programming. I am not able to import netmiko & paramiko module in Python 3.5. I am using docker container. Getting the below error. \r\n\r\nPython 3.5.2 (default, Jul 17 2020, 14:04:10)\r\n[GCC 5.4.0 20160609] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import netmiko\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: No module named 'netmiko'\r\n>>> import netmiko\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: No module named 'netmiko'\r\n\r\nThanks,\r\nKousik", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1858", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1858/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1858/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1858/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1858", "id": 667969557, "node_id": "MDU6SXNzdWU2Njc5Njk1NTc=", "number": 1858, "title": "Cisco XR commit comment should not be quoted", "user": {"login": "tdorssers", "id": 39435669, "node_id": "MDQ6VXNlcjM5NDM1NjY5", "avatar_url": "https://avatars0.githubusercontent.com/u/39435669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdorssers", "html_url": "https://github.com/tdorssers", "followers_url": "https://api.github.com/users/tdorssers/followers", "following_url": "https://api.github.com/users/tdorssers/following{/other_user}", "gists_url": "https://api.github.com/users/tdorssers/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdorssers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdorssers/subscriptions", "organizations_url": "https://api.github.com/users/tdorssers/orgs", "repos_url": "https://api.github.com/users/tdorssers/repos", "events_url": "https://api.github.com/users/tdorssers/events{/privacy}", "received_events_url": "https://api.github.com/users/tdorssers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-29T16:18:37Z", "updated_at": "2020-08-11T21:55:56Z", "closed_at": "2020-08-11T21:55:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "The cisco_xr driver is currently quoting a commit comment, which is redundant. This is a day 0 issue since #89. Please have a look at commitId 1000003264, which is configured by netmiko:\r\n\r\n```\r\nRP/0/RSP0/CPU0:XR1(config-if)#commit comment ?\r\n  LINE  Comment for this commit (Max 60 characters)\r\nRP/0/RSP0/CPU0:XR1(config-if)#commit comment no quotes required\r\nWed Jul 29 17:52:59.910 CEST\r\nRP/0/RSP0/CPU0:XR1(config-if)#\r\nRP/0/RSP0/CPU0:XR1#show configuration commit list detail \r\nWed Jul 29 17:53:09.703 CEST\r\n\r\n   1) CommitId: 1000003265                 Label: NONE\r\n      UserId:   admin                      Line:  vty0:node0_RSP0_CPU0\r\n      Client:   CLI                        Time:  Wed Jul 29 17:52:59 2020\r\n      Comment:   no quotes required \r\n\r\n   2) CommitId: 1000003264                 Label: NONE\r\n      UserId:   admin                      Line:  vty1:node0_RSP0_CPU0\r\n      Client:   CLI                        Time:  Wed Jul 29 10:18:12 2020\r\n      Comment:   \"bulk provision\" \r\n\r\n```\r\n\r\nFor your reference, I manually configured the router to demonstrate that quotes are not needed.\r\nI propose to remove the quoting and add a check to limit the comment length to 60 chars.\r\nIf the length exceeds 60, the commit will fail:\r\n\r\n```\r\nRP/0/RSP0/CPU0:XR1(config)#commit comment 0123456789012345678901234567890123456789012345678901234567890123456789\r\n                                                                                                      ^\r\n% Invalid input detected at '^' marker.\r\n\r\n```\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1856", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1856/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1856/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1856/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1856", "id": 664068421, "node_id": "MDU6SXNzdWU2NjQwNjg0MjE=", "number": 1856, "title": "Search pattern never detected in send_command_expect due to dynamic prompt", "user": {"login": "allan-silverstein", "id": 18428970, "node_id": "MDQ6VXNlcjE4NDI4OTcw", "avatar_url": "https://avatars0.githubusercontent.com/u/18428970?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allan-silverstein", "html_url": "https://github.com/allan-silverstein", "followers_url": "https://api.github.com/users/allan-silverstein/followers", "following_url": "https://api.github.com/users/allan-silverstein/following{/other_user}", "gists_url": "https://api.github.com/users/allan-silverstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/allan-silverstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allan-silverstein/subscriptions", "organizations_url": "https://api.github.com/users/allan-silverstein/orgs", "repos_url": "https://api.github.com/users/allan-silverstein/repos", "events_url": "https://api.github.com/users/allan-silverstein/events{/privacy}", "received_events_url": "https://api.github.com/users/allan-silverstein/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-22T21:43:08Z", "updated_at": "2020-08-20T22:04:48Z", "closed_at": "2020-08-20T17:51:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Kirk,\r\nI have vendor that where the prompt seems to dynamically change.  It happens due to the equivalent of a \"set cli timestamp\" type feature.  The timestamp get's embedded in the prompt.  Thus, the exact searching string before entering the command may be different than the prompt after the command is completed... Depending on the amount of time that has elapsed.\r\n\r\nException ERROR: Search pattern never detected in send_command_expect: ^[\\[FHUSTX21CWP\\(22\\-Jul\\-2020\\-21:35:05\\)\\#\r\n\r\nAny suggestions for handling this?\r\nThx\r\nAl Silverstein", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1851", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1851/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1851/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1851/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1851", "id": 658385824, "node_id": "MDU6SXNzdWU2NTgzODU4MjQ=", "number": 1851, "title": "Need netmiko support for IOS-XE SDWAN", "user": {"login": "gururajansrao", "id": 68380325, "node_id": "MDQ6VXNlcjY4MzgwMzI1", "avatar_url": "https://avatars0.githubusercontent.com/u/68380325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gururajansrao", "html_url": "https://github.com/gururajansrao", "followers_url": "https://api.github.com/users/gururajansrao/followers", "following_url": "https://api.github.com/users/gururajansrao/following{/other_user}", "gists_url": "https://api.github.com/users/gururajansrao/gists{/gist_id}", "starred_url": "https://api.github.com/users/gururajansrao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gururajansrao/subscriptions", "organizations_url": "https://api.github.com/users/gururajansrao/orgs", "repos_url": "https://api.github.com/users/gururajansrao/repos", "events_url": "https://api.github.com/users/gururajansrao/events{/privacy}", "received_events_url": "https://api.github.com/users/gururajansrao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-16T17:07:05Z", "updated_at": "2020-07-24T11:20:32Z", "closed_at": "2020-07-24T10:21:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "@ktbyers Netmiko does not seem to be working with Cisco IOS-XE SDWAN routers. I found a reason on why it could be? IOS-XE SDWAN does not support ```config t``` and needs ```config-transaction``` However, need your help to confirm and add support for IOS-XE SDWAN devices.\r\n\r\n***Sample Script to print \"sh ip int br\" & configure a loopback interface***\r\n \r\n```python\r\n\r\nfrom netmiko import ConnectHandler\r\nfrom netmiko.cisco import *\r\nfrom netmiko.cisco_base_connection import *\r\n\r\nimport logging\r\nlogging.basicConfig(filename='cedge_basic.log', level=logging.DEBUG)\r\nlogger = logging.getLogger(\"netmiko\")\r\n\r\niosv_l2 = {\r\n    'device_type': 'cisco_ios',\r\n    'ip': '2.2.1.13',\r\n    'username': 'admin',\r\n    'password': 'admin',\r\n}\r\n\r\nnet_connect = CiscoBaseConnection(**iosv_l2)\r\noutput = net_connect.send_command('show ip int brief')\r\nprint (output)\r\n\r\nnet_connect.enable()\r\ncmd = ['int Loopback 0', 'ip address 1.1.1.1 255.255.255.255']\r\noutput = net_connect.send_config_set(cmd)\r\nprint (output)\r\n``` \r\n\r\n***Debug logs***\r\n\r\n```\r\nroot@Root-CA:~/Guru-Python# cat cedge_basic.log\r\nDEBUG:paramiko.transport:starting thread (client mode): 0x544077b8\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.7.1\r\nDEBUG:paramiko.transport:Remote version/idstring: SSH-1.99-Cisco-1.25\r\nINFO:paramiko.transport:Connected (version 1.99, client Cisco-1.25)\r\nDEBUG:paramiko.transport:kex algos:['diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1'] server key:['ssh-rsa'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr'] client mac:['hmac-sha2-256', 'hmac-sha2-512', 'hmac-sha1', 'hmac-sha1-96'] server mac:['hmac-sha2-256', 'hmac-sha2-512', 'hmac-sha1', 'hmac-sha1-96'] client compress:['none'] server compress:['none'] client lang:[''] server lang:[''] kex follows?False\r\nDEBUG:paramiko.transport:Kex agreed: diffie-hellman-group-exchange-sha1\r\nDEBUG:paramiko.transport:HostKey agreed: ssh-rsa\r\nDEBUG:paramiko.transport:Cipher agreed: aes128-ctr\r\nDEBUG:paramiko.transport:MAC agreed: hmac-sha2-256\r\nDEBUG:paramiko.transport:Compression agreed: none\r\nDEBUG:paramiko.transport:Got server p (2048 bits)\r\nDEBUG:paramiko.transport:kex engine KexGex specified hash_algo <built-in function openssl_sha1>\r\nDEBUG:paramiko.transport:Switch to new keys ...\r\nDEBUG:paramiko.transport:Adding ssh-rsa host key for 2.2.1.13: b'a0bd1ca91de7a7ecaa5083c7b6f9706d'\r\nDEBUG:paramiko.transport:userauth is OK\r\nINFO:paramiko.transport:Authentication (password) successful!\r\nDEBUG:paramiko.transport:[chan 0] Max packet in: 32768 bytes\r\nDEBUG:paramiko.transport:[chan 0] Max packet out: 4096 bytes\r\nDEBUG:paramiko.transport:Secsh channel 0 opened.\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:netmiko:read_channel: \r\n\r\n\r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:In disable_paging\r\nDEBUG:netmiko:Command: terminal length 0\r\n\r\nDEBUG:netmiko:write_channel: b'terminal length 0\\n'\r\nDEBUG:netmiko:Pattern is: BR3\\-cEdge\\-1_Template\r\nDEBUG:netmiko:_read_channel_expect read_data: t\r\nDEBUG:netmiko:_read_channel_expect read_data: erminal length 0\r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:Pattern found: BR3\\-cEdge\\-1_Template terminal length 0\r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:terminal length 0\r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:Exiting disable_paging\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'show ip int brief\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: show ip int brief\r\nInterface              IP-Address      OK? Method Status                Protocol\r\nGigabitEthernet1       172.188.1.3     YES other  up                    up      \r\nGigabitEthernet2       172.199.1.2     YES other  up                    up      \r\nGigabitEthernet3       192.168.30.1    YES other  up                    up      \r\nGigabitEthernet4       192.168.33.1    YES other  up                    up      \r\nGigabitEthernet5       unassigned      YES unset  up                    up      \r\nGigabitEthernet6       10.127.198.28   YES other  up                    up      \r\nGigabitEthernet7       unassigned      YES unset  up                    up      \r\nGigabitEthernet8       unassigned      YES unset  up                    up      \r\nGigabitEthernet9       unassigned      YES unset  up                    up      \r\nGigabitEthernet10      2.2.1.13        YES other  up                    up      \r\nLoopback65528          192.168.1.1     YES other  up                    up      \r\nTunnel1                172.188.1.3     YES TFTP   up                    up      \r\nTunnel2                172.199.1.2     YES TFTP   up                    up      \r\nTunnel6000001          192.0.2.1       YES unset  up                    up      \r\nVirtualPortGroup0      192.168.1.1     YES other  up                    up      \r\nVirtualPortGroup1      192.0.2.1       YES other  up                    up      \r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: BR3\\-cEdge\\-1_Template\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: BR3-cEdge-1_Template#\r\nDEBUG:netmiko:Pattern found: BR3\\-cEdge\\-1_Template \r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'config term\\n'\r\nDEBUG:netmiko:Pattern is: BR3\\-cEdge\\-1_Temp\r\nDEBUG:netmiko:_read_channel_expect read_data: co\r\nDEBUG:netmiko:_read_channel_expect read_data: nfig term\r\nThis command is not supported\r\n\r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:Pattern found: BR3\\-cEdge\\-1_Temp config term\r\nThis command is not supported\r\n\r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nBR3-cEdge-1_Template#\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nroot@Root-CA:~/Guru-Python# \r\n```\r\n\r\n***Since IOS-XE SDWAN does not support ```config t``` and needs ```config-transaction```\r\n\r\n***Traditional IOS-XE***\r\n\r\n```\r\nCSR-Python-1#configure terminal \r\nEnter configuration commands, one per line.  End with CNTL/Z.\r\nCSR-Python-1(config)#\r\n```\r\n\r\n***IOS-XE SDWAN devices***\r\n\r\n```\r\nBR3-cEdge-1_Template#conf t\r\nThis command is not supported\r\n\r\nBR3-cEdge-1_Template#\r\nBR3-cEdge-1_Template#config-transaction\r\nadmin connected from 127.0.0.1 using console on BR3-cEdge-1_Template\r\nBR3-cEdge-1_Template(config)# \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1847", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1847/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1847/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1847/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1847", "id": 657262474, "node_id": "MDU6SXNzdWU2NTcyNjI0NzQ=", "number": 1847, "title": "Netmiko requires Python3.6 or greater", "user": {"login": "forwenx", "id": 60600449, "node_id": "MDQ6VXNlcjYwNjAwNDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/60600449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/forwenx", "html_url": "https://github.com/forwenx", "followers_url": "https://api.github.com/users/forwenx/followers", "following_url": "https://api.github.com/users/forwenx/following{/other_user}", "gists_url": "https://api.github.com/users/forwenx/gists{/gist_id}", "starred_url": "https://api.github.com/users/forwenx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/forwenx/subscriptions", "organizations_url": "https://api.github.com/users/forwenx/orgs", "repos_url": "https://api.github.com/users/forwenx/repos", "events_url": "https://api.github.com/users/forwenx/events{/privacy}", "received_events_url": "https://api.github.com/users/forwenx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-15T11:02:51Z", "updated_at": "2020-07-15T15:13:08Z", "closed_at": "2020-07-15T15:13:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello guys,\r\nfew months ago i did a script in order to connect  in all my alcatel switch and then backup the conf...\r\nSome user noticed me that the script isn't working anymore...\r\nSo I did a script in order to test the lib....\r\nHere is my code:\r\n```\r\nfrom netmiko import *\r\n\r\nnet_connect = ConnectHandler(device_type='alcatel_aos', host='192.168.1.250', username='admin', password='swtest') \r\noutput = net_connect.send_command('show configuration snapshot all')\r\nprint(output)\r\n```\r\n\r\nThen the result:\r\n\r\n`   from netmiko import *\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\__init__.py\", line 7, in <module>\r\n    from netmiko.ssh_dispatcher import ConnectHandler\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 2, in <module>\r\n    from netmiko.a10 import A10SSH\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\a10\\__init__.py\", line 1, in <module>\r\n    from netmiko.a10.a10_ssh import A10SSH\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\a10\\a10_ssh.py\", line 3, in <module>\r\n    from netmiko.cisco_base_connection import CiscoSSHConnection\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 143\r\n    msg = f\"Login failed: {self.host}\"`\r\n\r\nIt seems like the lib is trying to connect with Cisco script to my Alcatel switch ... but i've specified the device type in my device type field ... How can I solve it ?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1843", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1843/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1843/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1843/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1843", "id": 655317832, "node_id": "MDU6SXNzdWU2NTUzMTc4MzI=", "number": 1843, "title": "handling  copy scp://   bootflash  command on a better way (Cisco_ios)", "user": {"login": "PterC-F", "id": 67847775, "node_id": "MDQ6VXNlcjY3ODQ3Nzc1", "avatar_url": "https://avatars0.githubusercontent.com/u/67847775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PterC-F", "html_url": "https://github.com/PterC-F", "followers_url": "https://api.github.com/users/PterC-F/followers", "following_url": "https://api.github.com/users/PterC-F/following{/other_user}", "gists_url": "https://api.github.com/users/PterC-F/gists{/gist_id}", "starred_url": "https://api.github.com/users/PterC-F/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PterC-F/subscriptions", "organizations_url": "https://api.github.com/users/PterC-F/orgs", "repos_url": "https://api.github.com/users/PterC-F/repos", "events_url": "https://api.github.com/users/PterC-F/events{/privacy}", "received_events_url": "https://api.github.com/users/PterC-F/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-12T02:37:22Z", "updated_at": "2020-07-14T01:57:30Z", "closed_at": "2020-07-14T01:57:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\r\n\r\nI'm trying to automate upload new binaries into some devices by using copy SCP command.\r\n\r\nThe file uploads fine, most of the times (sometimes netmiko die because it takes so long to receive the \"#\" in the prompt, basically, a timeout, because uploading a file takes me around 3 hours)\r\n\r\nAlso, I'm trying to add some message, just to know if things are going OK... using a while loop, that is supposed to be looking for the \"#\" in the channel/prompt. But  its never print anything\r\n\r\n\r\nIs there a good way to handle this?\r\nAlso, I've played with the \"send_command_timing\" function, with similar results.\r\n\r\nAn example of what I'mt trying to do\r\n\r\n\r\n**------------------------------------------------------------------------------------------------------------------**\r\n\r\n\r\n```python\r\nscp_command=\"copy scp://A:USERNAME:MYPASSWORD@192.168.0.1//path/to/file.bin  bootflash:file.bin vrf VRF_NAME \\n\"\r\n\r\nscp_transfer = net_connect.send_command(command_string=scp_command, strip_prompt=False,\r\n                                       expect_string=r\"Destination filename\",delay_factor=30)\r\nscp_transfer += net_connect.send_command(command_string=\"\\n\", strip_prompt=False,\r\n                                        strip_command=False,delay_factor=30,expect_string=r\"#\") \r\n\r\n\r\n\r\n**This part never works**\r\n\r\nanimation = \"|/-\\\\\"\r\nidx = 0\r\nwhile True:                        \r\n          print(\"Copying file please wait ...\" end=\"\\r\")\r\n           idx = +1\r\n           sleep(0.5)          \r\n           if \"#\" in  net_connect.find_prompt() or net_connect.readchannel() :\r\n           break                   \r\n\r\n \r\nprint(scp_transfer)\r\n```\r\n\r\n**------------------------------------------------------------------------------------------------------------------** \r\n(I know this is not the best way to upload files into devices but is the only way permitted, I can not enable FTP/SCP server on the router)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1842", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1842/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1842/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1842/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1842", "id": 655109444, "node_id": "MDU6SXNzdWU2NTUxMDk0NDQ=", "number": 1842, "title": "h", "user": {"login": "sdguoshuaiwu", "id": 45942982, "node_id": "MDQ6VXNlcjQ1OTQyOTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/45942982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdguoshuaiwu", "html_url": "https://github.com/sdguoshuaiwu", "followers_url": "https://api.github.com/users/sdguoshuaiwu/followers", "following_url": "https://api.github.com/users/sdguoshuaiwu/following{/other_user}", "gists_url": "https://api.github.com/users/sdguoshuaiwu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdguoshuaiwu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdguoshuaiwu/subscriptions", "organizations_url": "https://api.github.com/users/sdguoshuaiwu/orgs", "repos_url": "https://api.github.com/users/sdguoshuaiwu/repos", "events_url": "https://api.github.com/users/sdguoshuaiwu/events{/privacy}", "received_events_url": "https://api.github.com/users/sdguoshuaiwu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-11T01:36:59Z", "updated_at": "2020-07-11T03:35:36Z", "closed_at": "2020-07-11T03:35:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1841", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1841/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1841/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1841/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1841", "id": 655100072, "node_id": "MDU6SXNzdWU2NTUxMDAwNzI=", "number": 1841, "title": "Need to use SCP for transfer file in Netmiko which uses RSA soft tokens and password keep changing after everyuse.", "user": {"login": "ritesh0313", "id": 33811028, "node_id": "MDQ6VXNlcjMzODExMDI4", "avatar_url": "https://avatars2.githubusercontent.com/u/33811028?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ritesh0313", "html_url": "https://github.com/ritesh0313", "followers_url": "https://api.github.com/users/ritesh0313/followers", "following_url": "https://api.github.com/users/ritesh0313/following{/other_user}", "gists_url": "https://api.github.com/users/ritesh0313/gists{/gist_id}", "starred_url": "https://api.github.com/users/ritesh0313/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ritesh0313/subscriptions", "organizations_url": "https://api.github.com/users/ritesh0313/orgs", "repos_url": "https://api.github.com/users/ritesh0313/repos", "events_url": "https://api.github.com/users/ritesh0313/events{/privacy}", "received_events_url": "https://api.github.com/users/ritesh0313/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-11T00:42:05Z", "updated_at": "2020-07-11T16:52:32Z", "closed_at": "2020-07-11T16:52:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Need to use SCP for transfer file in Netmiko which uses RSA soft tokens and password keep changing after everyuse. Please suggest. \r\n\r\nGetting Authentication Failed error while using SCP netmiko as we need to manually enter password while establishing the connection. Do we have any additional argument to pass along with scp connection for new password.\r\n\r\nPlz suggest.\r\n\r\nimport netmiko\r\nfrom netmiko import SCPConn\r\n\r\n def transfer_file(net_connect,file):\r\n \tnet_connect.config_mode()\r\n \t#Assumes SCP server isn't already enabled\r\n \tnet_connect.send_command('ip scp server enable')\r\n \tscp_conn = SCPConn(net_connect)\r\n \t#Source file\r\n \ts_file = file\r\n \t#Destination file\r\n \td_file = file\r\n \tscp_conn.scp_transfer_file(s_file, d_file)\r\n \t#Takes SCP server back off the device\r\n \tnet_connect.send_command('no ip scp server enable')\r\n \tnet_connect.exit_config_mode()\r\n \r\n net_connect = netmiko.ConnectHandler(device_type='cisco_ios', ip=ip, \r\n                              username=username, password=password) #once this password used in establishing connection cannot be reused for scp conn\r\n \r\n transfer_file(net_connect,\"file_name\")", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1840", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1840/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1840/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1840/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1840", "id": 654966188, "node_id": "MDU6SXNzdWU2NTQ5NjYxODg=", "number": 1840, "title": "Too many open files in .ssh/config", "user": {"login": "keeganb2000", "id": 33033077, "node_id": "MDQ6VXNlcjMzMDMzMDc3", "avatar_url": "https://avatars3.githubusercontent.com/u/33033077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keeganb2000", "html_url": "https://github.com/keeganb2000", "followers_url": "https://api.github.com/users/keeganb2000/followers", "following_url": "https://api.github.com/users/keeganb2000/following{/other_user}", "gists_url": "https://api.github.com/users/keeganb2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/keeganb2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keeganb2000/subscriptions", "organizations_url": "https://api.github.com/users/keeganb2000/orgs", "repos_url": "https://api.github.com/users/keeganb2000/repos", "events_url": "https://api.github.com/users/keeganb2000/events{/privacy}", "received_events_url": "https://api.github.com/users/keeganb2000/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-10T18:37:30Z", "updated_at": "2020-07-11T16:58:29Z", "closed_at": "2020-07-11T16:58:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting facts on 2587 devices(ios) and at a certain point the whole thing just blows up and all queries fail. It looks as if netmiko is opening .ssh/config for every connection it's making and after 1024 the whole thing just bombs out.  I'm guessing it's after 1024 as ulimit -n  show that value as my limit. The stack trace from one device is below, this is the same for all failures. Any help on how I can get around this. I'd rather not have to up the limit of open files on my server if possible.\r\n\r\nI'm getting facts on 2587 devices(ios) and at a certain point the whole thing just blows up and all queries fail. #nornir helped me narrow it down and it looks as if netmiko is opening .ssh/config for every connection it's making and after 1024 the whole thing just bombs out.  I'm guessing it's after 1024 as ulimit -n  show that value as my limit. The stack trace from one device is below, this is the same for all failures. Any help on how I can get around this. I'd rather not have to up the limit of open files on my server if possible.\r\n\r\n>\r\nTraceback (most recent call last):\r\n\r\n  File \"/usr/local/lib/python3.6/dist-packages/nornir/core/task.py\", line 85, in start\r\n    r = self.task(self, **self.params)\r\n  File \"/usr/local/lib/python3.6/dist-packages/nornir/plugins/tasks/networking/napalm_get.py\", line 49, in napalm_get\r\n    device = task.host.get_connection(\"napalm\", task.nornir.config)\r\n  File \"/usr/local/lib/python3.6/dist-packages/nornir/core/inventory.py\", line 302, in get_connection\r\n    extras=conn.extras,\r\n  File \"/usr/local/lib/python3.6/dist-packages/nornir/core/inventory.py\", line 352, in open_connection\r\n    configuration=configuration,\r\n  File \"/usr/local/lib/python3.6/dist-packages/nornir/plugins/connections/napalm.py\", line 51, in open\r\n    connection.open()\r\n  File \"/usr/local/lib/python3.6/dist-packages/napalm/ios/ios.py\", line 169, in open\r\n    device_type, netmiko_optional_args=self.netmiko_optional_args\r\n  File \"/usr/local/lib/python3.6/dist-packages/napalm/base/base.py\", line 96, in _netmiko_open\r\n    **netmiko_optional_args\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/ssh_dispatcher.py\", line 246, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 318, in __init__\r\n    self._open()\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 323, in _open\r\n    self.establish_connection()\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 880, in establish_connection\r\n    ssh_connect_params = self._connect_params_dict()\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 833, in _connect_params_dict\r\n    conn_dict = self._use_ssh_config(conn_dict)\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 779, in _use_ssh_config\r\n    with io.open(full_path, \"rt\", encoding=\"utf-8\") as f:\r\nOSError: [Errno 24] Too many open files: '/home/bkeegan/.ssh/config'\r\n>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1836", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1836/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1836/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1836/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1836", "id": 653835832, "node_id": "MDU6SXNzdWU2NTM4MzU4MzI=", "number": 1836, "title": "Return Telnet test result to Python from a Cisco device", "user": {"login": "neaco1134t", "id": 64463159, "node_id": "MDQ6VXNlcjY0NDYzMTU5", "avatar_url": "https://avatars3.githubusercontent.com/u/64463159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neaco1134t", "html_url": "https://github.com/neaco1134t", "followers_url": "https://api.github.com/users/neaco1134t/followers", "following_url": "https://api.github.com/users/neaco1134t/following{/other_user}", "gists_url": "https://api.github.com/users/neaco1134t/gists{/gist_id}", "starred_url": "https://api.github.com/users/neaco1134t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neaco1134t/subscriptions", "organizations_url": "https://api.github.com/users/neaco1134t/orgs", "repos_url": "https://api.github.com/users/neaco1134t/repos", "events_url": "https://api.github.com/users/neaco1134t/events{/privacy}", "received_events_url": "https://api.github.com/users/neaco1134t/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-09T07:36:23Z", "updated_at": "2020-07-24T11:49:05Z", "closed_at": "2020-07-24T11:49:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Folks! Seeking help from Netmiko experts.\r\n \r\nI'm quite new to Python and Netmiko and I'm encountering an issue. I'm trying to return a telnet result to Python but it's not doing it successfully. Below is the result I'd like to return.\r\n\r\n![image](https://user-images.githubusercontent.com/64463159/87007695-3f37ef00-c1f5-11ea-9f60-e13f2a080519.png)\r\n\r\nI suspect that it's with the termination of the telnet that's not working since it's returning the search pattern detected error. I've tried doing write_channel() with several ASCII combinations but to no avail. Actual termination happens when doing several ```ctrl-c``` and then hitting ```Enter``` once or twice. Script and error are shown below. I already tried following the solutions in #1316 and #1317.\r\nAppreciating all your help on this. Thanks\r\n\r\n``` \r\ndevice = ConnectHandler(device_type=platform, ip=switch-a, username=username, password=password, secret=password)\r\n                        output = device.send_command('terminal length 0')\r\n                        output = device.send_command('enable')\r\n                        sw_telnet_output = device.send_command('telnet ' + ip_add + ' ' + telnet_port + ' ' + '/source-interface vlan ' + row[1], delay_factor=1)\r\n                        device.write_channel('\\x03' + '\\x03' + '\\x03' + '\\x03' + '\\n' + '\\n')\r\n                        # ---- Tried multiple write channels as well. Also tried '\\x1d', '\\x036' etc.\r\n                        device.write_channel('\\x03')\r\n                        device.write_channel('\\x03')\r\n                        device.write_channel('\\x03')\r\n                        device.write_channel('\\x03')\r\n                        device.write_channel('\\n')\r\n                        device.write_channel('\\n')'''\r\n                        time.sleep(0.1)\r\n                        sw_telnet_output = device.read_channel()\r\n                        device.clear_buffer()\r\n                        print(sw_telnet_output) \r\n```\r\n\r\nError message:\r\n````\r\nTraceback (most recent call last):\r\n  File \"tshoot.py\", line 169, in <module>\r\n    sw_telnet_output = device.send_command('telnet ' + ip_add + ' ' + telnet_por\r\nt + ' ' + '/source-interface vlan ' + row[1], delay_factor=1)\r\n  File \"D:\\python\\chatbot\\lib\\site-packages\\netmiko\\base_connection.py\", line 129\r\n5, in send_command\r\n    search_pattern\r\nOSError: Search pattern never detected in send_command_expect: switch\\-a\\#\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1835", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1835/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1835/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1835/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1835", "id": 653804053, "node_id": "MDU6SXNzdWU2NTM4MDQwNTM=", "number": 1835, "title": "Implement enable-mode related stubs in Nokia SR OS driver", "user": {"login": "hellt", "id": 5679861, "node_id": "MDQ6VXNlcjU2Nzk4NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5679861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hellt", "html_url": "https://github.com/hellt", "followers_url": "https://api.github.com/users/hellt/followers", "following_url": "https://api.github.com/users/hellt/following{/other_user}", "gists_url": "https://api.github.com/users/hellt/gists{/gist_id}", "starred_url": "https://api.github.com/users/hellt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hellt/subscriptions", "organizations_url": "https://api.github.com/users/hellt/orgs", "repos_url": "https://api.github.com/users/hellt/repos", "events_url": "https://api.github.com/users/hellt/events{/privacy}", "received_events_url": "https://api.github.com/users/hellt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-09T06:37:18Z", "updated_at": "2020-08-21T03:00:23Z", "closed_at": "2020-08-21T03:00:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Current version of the driver doesn't allow a user to get into `enabled` mode implicitly, the following methods should be created\r\n\r\n* enable\r\n* check_enable_mode\r\n\r\nrelated discussion: https://github.com/ktbyers/netmiko/pull/681#issuecomment-655725636", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1834", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1834/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1834/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1834/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1834", "id": 653677686, "node_id": "MDU6SXNzdWU2NTM2Nzc2ODY=", "number": 1834, "title": "Netmiko requires SSHv2: SSHException: Incompatible version (1.5 instead of 2.0)", "user": {"login": "abnassiri", "id": 38040623, "node_id": "MDQ6VXNlcjM4MDQwNjIz", "avatar_url": "https://avatars0.githubusercontent.com/u/38040623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abnassiri", "html_url": "https://github.com/abnassiri", "followers_url": "https://api.github.com/users/abnassiri/followers", "following_url": "https://api.github.com/users/abnassiri/following{/other_user}", "gists_url": "https://api.github.com/users/abnassiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/abnassiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abnassiri/subscriptions", "organizations_url": "https://api.github.com/users/abnassiri/orgs", "repos_url": "https://api.github.com/users/abnassiri/repos", "events_url": "https://api.github.com/users/abnassiri/events{/privacy}", "received_events_url": "https://api.github.com/users/abnassiri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-09T00:32:06Z", "updated_at": "2020-07-12T21:37:51Z", "closed_at": "2020-07-09T03:56:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear\r\nplase if you can help me to solve this issu\r\nBR", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1823", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1823/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1823/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1823/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1823", "id": 649705258, "node_id": "MDU6SXNzdWU2NDk3MDUyNTg=", "number": 1823, "title": "command \"show authentication sessions method dot1x | count Auth\" prompt", "user": {"login": "wangzengyi-jet", "id": 62871301, "node_id": "MDQ6VXNlcjYyODcxMzAx", "avatar_url": "https://avatars3.githubusercontent.com/u/62871301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangzengyi-jet", "html_url": "https://github.com/wangzengyi-jet", "followers_url": "https://api.github.com/users/wangzengyi-jet/followers", "following_url": "https://api.github.com/users/wangzengyi-jet/following{/other_user}", "gists_url": "https://api.github.com/users/wangzengyi-jet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangzengyi-jet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangzengyi-jet/subscriptions", "organizations_url": "https://api.github.com/users/wangzengyi-jet/orgs", "repos_url": "https://api.github.com/users/wangzengyi-jet/repos", "events_url": "https://api.github.com/users/wangzengyi-jet/events{/privacy}", "received_events_url": "https://api.github.com/users/wangzengyi-jet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-02T07:32:13Z", "updated_at": "2020-07-03T06:26:58Z", "closed_at": "2020-07-03T06:23:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "hello \uff0cI have a question about netmiko\uff0cplease help me solve\uff0cvery thankful.\r\n\r\nthe log:\r\nDEBUG:netmiko:[find_prompt()]: prompt is ACCSW-xx-xx>\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'show authentication sessions method dot1x | count Auth\\n'\r\nDEBUG:netmiko:Pattern is: show\\ authentication\\ sessions\\ method\\ dot1x\\ \\|\\ count\\ Auth\r\nDEBUG:netmiko:_read_channel_expect read_data: s\r\nDEBUG:netmiko:_read_channel_expect read_data: how authentication sessions method dot1x | count Auth\r\n                      ^\r\n% Invalid input detected at '^' marker.\r\n\r\nACCSW-xx-xx>\r\nDEBUG:netmiko:Pattern found: show\\ authentication\\ sessions\\ method\\ dot1x\\ \\|\\ count\\ Auth show authentication sessions method dot1x | count Auth\r\n                      ^\r\n% Invalid input detected at '^' marker.\r\n\r\nACCSW-xx-xx>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1822", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1822/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1822/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1822/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1822", "id": 649675075, "node_id": "MDU6SXNzdWU2NDk2NzUwNzU=", "number": 1822, "title": "Arista check_config_mode fails on hostname change", "user": {"login": "ldacol", "id": 21121946, "node_id": "MDQ6VXNlcjIxMTIxOTQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/21121946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ldacol", "html_url": "https://github.com/ldacol", "followers_url": "https://api.github.com/users/ldacol/followers", "following_url": "https://api.github.com/users/ldacol/following{/other_user}", "gists_url": "https://api.github.com/users/ldacol/gists{/gist_id}", "starred_url": "https://api.github.com/users/ldacol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ldacol/subscriptions", "organizations_url": "https://api.github.com/users/ldacol/orgs", "repos_url": "https://api.github.com/users/ldacol/repos", "events_url": "https://api.github.com/users/ldacol/events{/privacy}", "received_events_url": "https://api.github.com/users/ldacol/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-02T06:34:52Z", "updated_at": "2020-07-02T17:08:32Z", "closed_at": "2020-07-02T17:08:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "This issues seems related to https://github.com/ktbyers/netmiko/issues/1667\r\n\r\nWhen ['hostname test_switch'] is issued with a switch name != to 'test_switch': \r\n\r\nOUTPUT: \r\n`test@test-VirtualBox:~/Development/Netmiko$ python3 netmiko_show_arp.py \r\n{'device_type': 'arista_eos', 'host': '192.168.254.50', 'username': 'admin', 'password': 'test123', 'session_log': 'output.log'}\r\n['hostname testswitch']\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/lib/python3/dist-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/lib/python3/dist-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"netmiko_show_arp.py\", line 50, in <module>\r\n    main()\r\n  File \"netmiko_show_arp.py\", line 41, in main\r\n    output = net_connect.send_config_set (config_commands,cmd_verify=False)\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 1770, in send_config_set\r\n    output += self.exit_config_mode()\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/cisco_base_connection.py\", line 44, in exit_config_mode\r\n    return super().exit_config_mode(exit_config=exit_config, pattern=pattern)\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 1642, in exit_config_mode\r\n    if self.check_config_mode():\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/arista/arista.py\", line 29, in check_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/home/test/.local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 561, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n`\r\n\r\nDEBUG\r\n\r\n`DEBUG:paramiko.transport:starting thread (client mode): 0x91a31550\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.6.0\r\nDEBUG:paramiko.transport:Remote version/idstring: SSH-2.0-OpenSSH_7.8\r\nINFO:paramiko.transport:Connected (version 2.0, client OpenSSH_7.8)\r\nDEBUG:paramiko.transport:kex algos:['curve25519-sha256@libssh.org', 'ecdh-sha2-nistp521', 'ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'diffie-hellman-group14-sha1'] server key:['rsa-sha2-512', 'rsa-sha2-256', 'ssh-rsa', 'ecdsa-sha2-nistp521', 'ssh-ed25519'] client encrypt:['aes256-gcm@openssh.com', 'aes128-gcm@openssh.com', 'aes256-ctr', 'aes192-ctr', 'aes128-ctr'] server encrypt:['aes256-gcm@openssh.com', 'aes128-gcm@openssh.com', 'aes256-ctr', 'aes192-ctr', 'aes128-ctr'] client mac:['hmac-sha2-512-etm@openssh.com', 'hmac-sha2-256-etm@openssh.com', 'hmac-sha1-etm@openssh.com', 'hmac-sha2-512', 'hmac-sha2-256', 'hmac-sha1'] server mac:['hmac-sha2-512-etm@openssh.com', 'hmac-sha2-256-etm@openssh.com', 'hmac-sha1-etm@openssh.com', 'hmac-sha2-512', 'hmac-sha2-256', 'hmac-sha1'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False\r\nDEBUG:paramiko.transport:Kex agreed: curve25519-sha256@libssh.org\r\nDEBUG:paramiko.transport:HostKey agreed: ssh-ed25519\r\nDEBUG:paramiko.transport:Cipher agreed: aes128-ctr\r\nDEBUG:paramiko.transport:MAC agreed: hmac-sha2-256\r\nDEBUG:paramiko.transport:Compression agreed: none\r\nDEBUG:paramiko.transport:kex engine KexCurve25519 specified hash_algo <built-in function openssl_sha256>\r\nDEBUG:paramiko.transport:Switch to new keys ...\r\nDEBUG:paramiko.transport:Adding ssh-ed25519 host key for 192.168.254.50: b'57e9d1cc9f78fce9592bd22d939e5454'\r\nDEBUG:paramiko.transport:userauth is OK\r\nDEBUG:paramiko.transport:Authentication type (password) not permitted.\r\nDEBUG:paramiko.transport:Allowed methods: ['publickey', 'keyboard-interactive']\r\nDEBUG:paramiko.transport:userauth is OK\r\nINFO:paramiko.transport:Authentication (keyboard-interactive) successful!\r\nDEBUG:paramiko.transport:[chan 0] Max packet in: 32768 bytes\r\nDEBUG:paramiko.transport:Received global request \"hostkeys-00@openssh.com\"\r\nDEBUG:paramiko.transport:Rejecting \"hostkeys-00@openssh.com\" global request from server.\r\nDEBUG:paramiko.transport:[chan 0] Max packet out: 32768 bytes\r\nDEBUG:paramiko.transport:Secsh channel 0 opened.\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:netmiko:read_channel: Last login: Thu Jul  2 15:25:03 2020 from 192.168.254.35\r\nqweasdzxc>\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nqweasdzxc>\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:[find_prompt()]: prompt is qweasdzxc>\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:In disable_paging\r\nDEBUG:netmiko:Command: terminal length 0\r\n\r\nDEBUG:netmiko:write_channel: b'terminal length 0\\n'\r\nDEBUG:netmiko:Pattern is: terminal\\ length\\ 0\r\nDEBUG:netmiko:_read_channel_expect read_data: t\r\nDEBUG:netmiko:_read_channel_expect read_data: erminal length 0\r\nPagination disabled.\r\nqweasdzxc>\r\nDEBUG:netmiko:Pattern found: terminal\\ length\\ 0 terminal length 0\r\nPagination disabled.\r\nqweasdzxc>\r\nDEBUG:netmiko:terminal length 0\r\nPagination disabled.\r\nqweasdzxc>\r\nDEBUG:netmiko:Exiting disable_paging\r\nDEBUG:netmiko:write_channel: b'terminal width 511\\n'\r\nDEBUG:netmiko:Pattern is: terminal\\ width\\ 511\r\nDEBUG:netmiko:_read_channel_expect read_data: t\r\nDEBUG:netmiko:_read_channel_expect read_data: erminal width 511\r\nWidth set to 511 columns.\r\nqweasdzxc>\r\nDEBUG:netmiko:Pattern found: terminal\\ width\\ 511 terminal width 511\r\nWidth set to 511 columns.\r\nqweasdzxc>\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: qweasdzxc>\r\nDEBUG:netmiko:Pattern found: qweasdzxc \r\nqweasdzxc>\r\nDEBUG:netmiko:write_channel: b'enable\\n'\r\nDEBUG:netmiko:Pattern is: (qweasdzxc|ssword)\r\nDEBUG:netmiko:_read_channel_expect read_data: e\r\nDEBUG:netmiko:_read_channel_expect read_data: nable\r\nqweasdzxc#\r\nDEBUG:netmiko:Pattern found: (qweasdzxc|ssword) enable\r\nqweasdzxc#\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: qweasdzxc#\r\nDEBUG:netmiko:Pattern found: qweasdzxc \r\nqweasdzxc#\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: qweasdzxc#\r\nDEBUG:netmiko:Pattern found: qweasdzxc \r\nqweasdzxc#\r\nDEBUG:netmiko:pattern: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: qweasdzxc#\r\nDEBUG:netmiko:Pattern found: qweasdzxc \r\nqweasdzxc#\r\nDEBUG:netmiko:check_config_mode: '\\r\\nqweasdzxc#'\r\nDEBUG:netmiko:check_config_mode: '\\r\\nqweasdzxc#'\r\nDEBUG:netmiko:write_channel: b'config term\\n'\r\nDEBUG:netmiko:Pattern is: config\\ term\r\nDEBUG:netmiko:_read_channel_expect read_data: config term\r\n\r\nDEBUG:netmiko:Pattern found: config\\ term config term\r\n\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: qweasdzxc(config)#\r\nDEBUG:netmiko:Pattern found: qweasdzxc qweasdzxc(config)#\r\nDEBUG:netmiko:pattern: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: qweasdzxc(config)#\r\nDEBUG:netmiko:Pattern found: qweasdzxc \r\nqweasdzxc(config)#\r\nDEBUG:netmiko:check_config_mode: '\\r\\nqweasdzxc(config)#'\r\nDEBUG:netmiko:check_config_mode: '\\r\\nqweasdzxc(config)#'\r\nDEBUG:netmiko:write_channel: b'hostname testswitch\\n'\r\nDEBUG:netmiko:read_channel: hostname testswitch\r\ntestswitch(config)#\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:pattern: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is: qweasdzxc\r\nDEBUG:netmiko:_read_channel_expect read_data: \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: testswitch(config)#\r\n`\r\n\r\nWith hostname matching the current one the code executes correctly. Is there any workaround for this issue or bug fix? \r\n\r\nThank you", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1818", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1818/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1818/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1818/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1818", "id": 647569450, "node_id": "MDU6SXNzdWU2NDc1Njk0NTA=", "number": 1818, "title": "Connecting via a terminal server and handling a menu selection", "user": {"login": "MoatazHammouda", "id": 10118814, "node_id": "MDQ6VXNlcjEwMTE4ODE0", "avatar_url": "https://avatars1.githubusercontent.com/u/10118814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MoatazHammouda", "html_url": "https://github.com/MoatazHammouda", "followers_url": "https://api.github.com/users/MoatazHammouda/followers", "following_url": "https://api.github.com/users/MoatazHammouda/following{/other_user}", "gists_url": "https://api.github.com/users/MoatazHammouda/gists{/gist_id}", "starred_url": "https://api.github.com/users/MoatazHammouda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MoatazHammouda/subscriptions", "organizations_url": "https://api.github.com/users/MoatazHammouda/orgs", "repos_url": "https://api.github.com/users/MoatazHammouda/repos", "events_url": "https://api.github.com/users/MoatazHammouda/events{/privacy}", "received_events_url": "https://api.github.com/users/MoatazHammouda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-29T18:12:12Z", "updated_at": "2020-07-10T20:35:01Z", "closed_at": "2020-07-10T20:34:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello everyone, I have seen similar cases in regards to other platforms, but for my cisco device, I am trying to establish a connection to it yet I face the following error:\r\n```\r\nValueError: Router prompt not found: 'Selection:'\r\n```\r\nFor this particular set of devices once I log in I need to insert an 'x' or a number to move to the enable line for that device from the Selection: prompt (there is a menu with options). This is a console server, so I was wondering if there is a way to pass ( during the connection establishment phase ) the desired 'x' or number?\r\n\r\nMy code as it stands right now is as follows:\r\n```python\r\nfrom netmiko import ConnectHandler\r\n\r\ndevice = { \"device_type\":\"cisco_ios\",\"host\":\"host\",\"password\":\"pw\",\"username\":\"user\",\"secret\":\"secret\",\"global_delay_factor\":2}\r\nconnection = ConnectHandler(**device)\r\n#The code does not get past this point\r\nconnection.enable()\r\noutput = connection.send_command('show ip int brief')\r\n```\r\n\r\n---------------------------------------------------------------------------------------------------------\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1815", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1815/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1815/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1815/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1815", "id": 647382951, "node_id": "MDU6SXNzdWU2NDczODI5NTE=", "number": 1815, "title": "Error handling not wrapping Netmiko code that establishes SSH connection", "user": {"login": "igeskog", "id": 67590530, "node_id": "MDQ6VXNlcjY3NTkwNTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/67590530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igeskog", "html_url": "https://github.com/igeskog", "followers_url": "https://api.github.com/users/igeskog/followers", "following_url": "https://api.github.com/users/igeskog/following{/other_user}", "gists_url": "https://api.github.com/users/igeskog/gists{/gist_id}", "starred_url": "https://api.github.com/users/igeskog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igeskog/subscriptions", "organizations_url": "https://api.github.com/users/igeskog/orgs", "repos_url": "https://api.github.com/users/igeskog/repos", "events_url": "https://api.github.com/users/igeskog/events{/privacy}", "received_events_url": "https://api.github.com/users/igeskog/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-29T13:36:06Z", "updated_at": "2020-07-04T15:52:58Z", "closed_at": "2020-07-04T15:52:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have an issue with error handling not being picked up by my script. I keep getting the traceback regardless of my exceptions. \r\n Im not sure if the issue is with netmiko/paramiko or my script. Im trying to make the below traceback errors go away from the outout. Included is the script im working on.\r\n\r\nIm not sure if net_connect.find_prompt() should be able to handle exceptions. I tried to comment that section out\r\n\r\n(.venv) igeskog001@itlinux:~$ python3 find.py --find-by-ip 1.2.3.4\r\nNamespace(find_by_ip='1.2.3.4')\r\nfind.py:39: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\r\n  CFG = yaml.load(ymlfile)\r\nTraceback (most recent call last):\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/netmiko/base_connection.py\", line 901, in establish_connection\r\n    self.remote_conn_pre.connect(**ssh_connect_params)\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/paramiko/client.py\", line 446, in connect\r\n    passphrase,\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/paramiko/client.py\", line 764, in _auth\r\n    raise saved_exception\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/paramiko/client.py\", line 751, in _auth\r\n    self._transport.auth_password(username, password)\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/paramiko/transport.py\", line 1509, in auth_password\r\n    return self.auth_handler.wait_for_response(my_event)\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/paramiko/auth_handler.py\", line 250, in wait_for_response\r\n    raise e\r\nparamiko.ssh_exception.AuthenticationException: Authentication failed.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"find.py\", line 51, in <module>\r\n    device_type=\"cisco_xr\",\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py\", line 259, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/netmiko/base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/netmiko/base_connection.py\", line 332, in _open\r\n    self.establish_connection()\r\n  File \"/home/igeskog001/.venv/lib/python3.6/site-packages/netmiko/base_connection.py\", line 914, in establish_connection\r\n    raise NetmikoAuthenticationException(msg)\r\nnetmiko.ssh_exception.NetmikoAuthenticationException: Authentication failure: unable to connect cisco_xr r1003pye:22\r\nAuthentication failed.\r\n\r\n\r\n\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n\r\n\r\nimport re\r\nimport sys\r\n\r\n\r\n\r\n\r\n\r\nimport logging\r\n\r\nlogging.basicConfig(filename='example.log',level=logging.DEBUG)\r\n\r\nimport yaml\r\nimport argparse\r\nfrom netmiko import Netmiko\r\nfrom paramiko.ssh_exception import SSHException\r\nfrom paramiko.ssh_exception import AuthenticationException\r\nfrom netmiko.ssh_exception import NetMikoTimeoutException\r\nfrom netmiko.ssh_exception import AuthenticationException\r\n\r\nparser = argparse.ArgumentParser(description='Find ip address in RR app')\r\n\r\nparser.add_argument('--find-by-ip', required=True, help='Find if IP address is in RR')\r\n\r\n\r\narguments = parser.parse_args()\r\nprint(parser.parse_args())\r\n\r\n\r\nip = sys.argv[2]\r\n\r\n\r\n# Open and load config file\r\nwith open(\"findrouters.yaml\", 'r') as ymlfile:\r\n    CFG = yaml.load(ymlfile)\r\n\r\n\r\nrouters = CFG.get('group1')\r\nconfig = {}\r\n\r\nfor router in routers:\r\n    net_connect = Netmiko(\r\n    router,\r\n    username=\"sekrit\",\r\n    password='sekrit',\r\n    device_type=\"cisco_xr\",\r\n    )\r\n\r\n\r\n    # Connect to router\r\n    print('Connecting to router: ' + router)\r\n    try:\r\n        net_connect.find_prompt()\r\n    except (AuthenticationException, NetMikoAuthenticationException):\r\n        print ('oops')\r\n        continue\r\n    except Exception as unknown_error:\r\n        print ('Some other error: ')\r\n        continue\r\n    # Get router config\r\n    try:\r\n        print('Getting config')\r\n        config[router] = net_connect.send_command('show run router bgp 65501')\r\n    except (AuthenticationException, NetMikoAuthenticationException):\r\n        print ('oops')\r\n        continue\r\n    except Exception as unknown_error:\r\n        print ('Some other error: ')\r\n        continue\r\n\r\n    # Open output file\r\n    with open(router + '.txt', 'w') as outfile:\r\n        outfile.writelines(config[router])\r\n\r\n        net_connect.disconnect()\r\n\r\n\r\nfor router in routers:\r\n    with open(router + '.txt') as infile:\r\n        data = infile.read()\r\n\r\n        if data.count(ip):\r\n            print(\"\\nJa den finns i: \",router)\r\n        else:\r\n            print(\"Nej den finns inte\")\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1813", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1813/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1813/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1813/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1813", "id": 646393161, "node_id": "MDU6SXNzdWU2NDYzOTMxNjE=", "number": 1813, "title": "set keyboard interactive login strictly for auth method", "user": {"login": "mims1979", "id": 36304989, "node_id": "MDQ6VXNlcjM2MzA0OTg5", "avatar_url": "https://avatars1.githubusercontent.com/u/36304989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mims1979", "html_url": "https://github.com/mims1979", "followers_url": "https://api.github.com/users/mims1979/followers", "following_url": "https://api.github.com/users/mims1979/following{/other_user}", "gists_url": "https://api.github.com/users/mims1979/gists{/gist_id}", "starred_url": "https://api.github.com/users/mims1979/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mims1979/subscriptions", "organizations_url": "https://api.github.com/users/mims1979/orgs", "repos_url": "https://api.github.com/users/mims1979/repos", "events_url": "https://api.github.com/users/mims1979/events{/privacy}", "received_events_url": "https://api.github.com/users/mims1979/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-26T17:01:23Z", "updated_at": "2020-07-13T13:59:20Z", "closed_at": "2020-07-13T13:59:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Recently we've had a few of our servers switch to MFA system.\r\n\r\nThe login process looks similar to this in putty:\r\n\r\nlogin as: **MYUSERNAME**\r\nPre-authentication banner message from server:\r\n|\r\n|                                  WARNING!\r\n|                     MFA Protected system\r\nEnd of banner message from server\r\nKeyboard-interactive authentication prompts from server:\r\n| Unix Login password: **MYPASSWORD**\r\n| MFA two-factor login for username\r\n|\r\n| Enter a passcode or select one of the following options:\r\n|\r\n|  1. MFA Push to Mobile MFA Client\r\n|  2. SMS passcodes to Cell Phone\r\n|\r\n| Passcode or option (1-2):\r\nEnd of keyboard-interactive prompts from server\r\nSuccess. Logging you in...\r\n\r\nAt the passcode or option I select 1, get the MFA push and then I'm logged in\r\n\r\nAny attempts to access this system basically responds with to following debugs:\r\nDEBUG:paramiko.transport:starting thread (client mode): 0x3a10bd0\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.4.2\r\nDEBUG:paramiko.transport:Remote version/idstring: SSH-2.0-OpenSSH_7.4\r\nINFO:paramiko.transport:Connected (version 2.0, client OpenSSH_7.4)\r\nDEBUG:paramiko.transport:kex algos:['curve25519-sha256', 'curve25519-sha256@libssh.org', 'ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group16-sha512', 'diffie-hellman-group18-sha512', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha256', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'rsa-sha2-512', 'rsa-sha2-256'] client encrypt:['chacha20-poly1305@openssh.com', 'aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'aes128-gcm@openssh.com', 'aes256-gcm@openssh.com', 'aes128-cbc', 'aes192-cbc', 'aes256-cbc', 'blowfish-cbc', 'cast128-cbc', '3des-cbc'] server encrypt:['chacha20-poly1305@openssh.com', 'aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'aes128-gcm@openssh.com', 'aes256-gcm@openssh.com', 'aes128-cbc', 'aes192-cbc', 'aes256-cbc', 'blowfish-cbc', 'cast128-cbc', '3des-cbc'] client mac:['umac-64-etm@openssh.com', 'umac-128-etm@openssh.com', 'hmac-sha2-256-etm@openssh.com', 'hmac-sha2-512-etm@openssh.com', 'hmac-sha1-etm@openssh.com', 'umac-64@openssh.com', 'umac-128@openssh.com', 'hmac-sha2-256', 'hmac-sha2-512', 'hmac-sha1'] server mac:['umac-64-etm@openssh.com', 'umac-128-etm@openssh.com', 'hmac-sha2-256-etm@openssh.com', 'hmac-sha2-512-etm@openssh.com', 'hmac-sha1-etm@openssh.com', 'umac-64@openssh.com', 'umac-128@openssh.com', 'hmac-sha2-256', 'hmac-sha2-512', 'hmac-sha1'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False\r\nDEBUG:paramiko.transport:Kex agreed: ecdh-sha2-nistp256\r\nDEBUG:paramiko.transport:HostKey agreed: ssh-rsa\r\nDEBUG:paramiko.transport:Cipher agreed: aes128-ctr\r\nDEBUG:paramiko.transport:MAC agreed: hmac-sha2-256\r\nDEBUG:paramiko.transport:Compression agreed: none\r\nDEBUG:paramiko.transport:kex engine KexNistp256 specified hash_algo <built-in function openssl_sha256>\r\nDEBUG:paramiko.transport:Switch to new keys ...\r\nDEBUG:paramiko.transport:Adding ssh-rsa host key for myhost: b'XXXXXXXXXXXX'\r\nDEBUG:paramiko.transport:userauth is OK\r\nINFO:paramiko.transport:Auth banner: b'\\n                                 WARNING!!.....'\r\n**DEBUG:paramiko.transport:Authentication type (password) not permitted.**\r\nDEBUG:paramiko.transport:Allowed methods: ['gssapi-keyex', 'gssapi-with-mic']\r\nDEBUG:paramiko.transport:EOF in transport thread\r\n\r\nI'm fully aware that auth type password isn't permitted, but only keyboard interactive.  There's no try again, so supposed \"fallback\" methods of paramiko/netmiko will not work here as you aren't allowed to try multiple auth methods, if you do not set keyboard-interactive as the first auth method in putty or other ssh client it will fail.\r\n\r\nSo how to i specify to netmiko that you should use keyboard-interactive then potentially send my password and \"1\" for the MFA push as a part of the login process?\r\n\r\nEven if I can find a way to just start the ssh connection and then use expect statements to respond to them that is fine, but it appears like the initial connection and authentication is all part of the connect statement when I build the conn:\r\n\r\nthis_device = {\r\n    \"host\": host,\r\n    \"username\": user,\r\n    \"password\": pw,\r\n    \"device_type\": \"terminal_server\",\r\n}\r\nconn = Netmiko(**this_device)\r\n\r\nI've also tried changing device_type to linux, autodetect, etc and it doesn't appear to make any changes.\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1812", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1812/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1812/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1812/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1812", "id": 646142980, "node_id": "MDU6SXNzdWU2NDYxNDI5ODA=", "number": 1812, "title": "\" % Invalid input detected at '^' marker\" when \" net_connect.send_command(\"show ip device tracking all\")", "user": {"login": "nsgivanj", "id": 57515369, "node_id": "MDQ6VXNlcjU3NTE1MzY5", "avatar_url": "https://avatars1.githubusercontent.com/u/57515369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsgivanj", "html_url": "https://github.com/nsgivanj", "followers_url": "https://api.github.com/users/nsgivanj/followers", "following_url": "https://api.github.com/users/nsgivanj/following{/other_user}", "gists_url": "https://api.github.com/users/nsgivanj/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsgivanj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsgivanj/subscriptions", "organizations_url": "https://api.github.com/users/nsgivanj/orgs", "repos_url": "https://api.github.com/users/nsgivanj/repos", "events_url": "https://api.github.com/users/nsgivanj/events{/privacy}", "received_events_url": "https://api.github.com/users/nsgivanj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-26T09:43:21Z", "updated_at": "2020-06-26T22:46:27Z", "closed_at": "2020-06-26T21:54:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "IPDT is quite good feature of Cisco IOS to track client information. Especially a big network, in which IPDT are able to track all user's active and inactive information. \r\n\r\nUnfortunately, I got the upper error message when using netmiko ConnectHandler with a Cisco C2960X.\r\n\r\nAny idea?\r\n###config example###\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1806", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1806/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1806/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1806/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1806", "id": 643689101, "node_id": "MDU6SXNzdWU2NDM2ODkxMDE=", "number": 1806, "title": "Permissions issue on Juniper devices \"set cli complete-on-space off\"", "user": {"login": "bgr1980", "id": 67315441, "node_id": "MDQ6VXNlcjY3MzE1NDQx", "avatar_url": "https://avatars2.githubusercontent.com/u/67315441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgr1980", "html_url": "https://github.com/bgr1980", "followers_url": "https://api.github.com/users/bgr1980/followers", "following_url": "https://api.github.com/users/bgr1980/following{/other_user}", "gists_url": "https://api.github.com/users/bgr1980/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgr1980/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgr1980/subscriptions", "organizations_url": "https://api.github.com/users/bgr1980/orgs", "repos_url": "https://api.github.com/users/bgr1980/repos", "events_url": "https://api.github.com/users/bgr1980/events{/privacy}", "received_events_url": "https://api.github.com/users/bgr1980/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-06-23T09:39:59Z", "updated_at": "2020-07-16T13:18:50Z", "closed_at": "2020-07-16T04:21:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have two Juniper SRX550 devices;\r\n\r\nDevice A = Junos 12.1X46-D35.1\r\nDevice B = Junos12.3X48-D75.4\r\n\r\nFrom my device I can directly access both devices via SSH using Putty and execute the \"show version\" command.\r\n\r\nI have a very simple python script to ssh to the devices as follows (changing IP details a s necessary);\r\n\r\n--------- START OF SCRIPT ----------\r\n#!/usr/bin/env python\r\n\r\nimport time\r\nfrom netmiko import ConnectHandler\r\nimport netmiko\r\n\r\n\r\ndevice = ConnectHandler(device_type=\"juniper_junos\", ip=\"192.168.1.1\", username=\"name\", password=\"password\")\r\n\r\noutput = device.send_command(\"show version\")\r\nprint(output)\r\n\r\n--------- END OF SCRIPT ----------\r\n\r\nThe script successfully runs for DeviceA, however I get the following errors when trying to connect to DeviceB;\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\...\\Python\\Python38-32\\personalscripts\\sshtodevice.py\", line 16, in <module>\r\n    device = ConnectHandler(device_type=\"juniper_junos\", ip=\"192.168.1.1\", username=\"name\", password=\"password\")\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 266, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 333, in _open\r\n    self._try_session_preparation()\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 756, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\juniper\\juniper.py\", line 27, in session_preparation\r\n    self.disable_paging(command=\"set cli screen-length 0\")\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1027, in disable_paging\r\n    output = self.read_until_pattern(pattern=re.escape(command.strip()))\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\...\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n>>> \r\n\r\nCan anyone assist? I'm at the end of my limited knowledge and ability to troubleshoot further than I have already!!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1805", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1805/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1805/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1805/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1805", "id": 643304242, "node_id": "MDU6SXNzdWU2NDMzMDQyNDI=", "number": 1805, "title": "Padding of IP address with extra zero causes socket exception", "user": {"login": "wright-james", "id": 34714257, "node_id": "MDQ6VXNlcjM0NzE0MjU3", "avatar_url": "https://avatars0.githubusercontent.com/u/34714257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wright-james", "html_url": "https://github.com/wright-james", "followers_url": "https://api.github.com/users/wright-james/followers", "following_url": "https://api.github.com/users/wright-james/following{/other_user}", "gists_url": "https://api.github.com/users/wright-james/gists{/gist_id}", "starred_url": "https://api.github.com/users/wright-james/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wright-james/subscriptions", "organizations_url": "https://api.github.com/users/wright-james/orgs", "repos_url": "https://api.github.com/users/wright-james/repos", "events_url": "https://api.github.com/users/wright-james/events{/privacy}", "received_events_url": "https://api.github.com/users/wright-james/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-22T19:18:29Z", "updated_at": "2020-06-23T15:01:04Z", "closed_at": "2020-06-23T10:30:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all!  I reinstalled cryptology as above suggested.  Same problem sadly.  The first device I ran into this issue was resolved by forcing aes256-cbt.  I feel like maybe this was an anomoly though because the second is being stubborn.  1st was cisco 3650, second was 9300, which is weird.  It's new and I can connect to it just fine from my box with SSH?\r\n\r\nAlso, other scripts work.  It seems like I get an issue if I do \"show (whatever)\" and the output is blank.  I can workaround but would like to know if anyone can help.\r\n\r\nAny Help Appreciated,\r\n\r\nJim\r\n\r\ncode:\r\n\r\nfrom netmiko import ConnectHandler\r\nfrom sys import argv\r\nimport getpass\r\nimport time\r\n\r\nscript, first, second=argv\r\n\r\np = getpass.getpass(prompt=\"Enter Password: \")\r\n\r\nfor n in range (int(first) , int(second)):\r\n        ip=\"10.0{0}.255.2\".format(n)\r\n\r\n#connect to device\r\n        device = ConnectHandler(device_type='cisco_ios', ip=ip, username='(username)', password=p)\r\n        print(ip)\r\n\r\n        output = device.send_command('sh access-list | i Tele')\r\n        print(output)\r\n\r\n\r\n        device.disconnect()\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1804", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1804/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1804/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1804/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1804", "id": 643200356, "node_id": "MDU6SXNzdWU2NDMyMDAzNTY=", "number": 1804, "title": "unwarrented ANSI strip on NXOS", "user": {"login": "ciscorat", "id": 61419193, "node_id": "MDQ6VXNlcjYxNDE5MTkz", "avatar_url": "https://avatars2.githubusercontent.com/u/61419193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ciscorat", "html_url": "https://github.com/ciscorat", "followers_url": "https://api.github.com/users/ciscorat/followers", "following_url": "https://api.github.com/users/ciscorat/following{/other_user}", "gists_url": "https://api.github.com/users/ciscorat/gists{/gist_id}", "starred_url": "https://api.github.com/users/ciscorat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ciscorat/subscriptions", "organizations_url": "https://api.github.com/users/ciscorat/orgs", "repos_url": "https://api.github.com/users/ciscorat/repos", "events_url": "https://api.github.com/users/ciscorat/events{/privacy}", "received_events_url": "https://api.github.com/users/ciscorat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-06-22T16:15:44Z", "updated_at": "2020-06-22T19:42:18Z", "closed_at": "2020-06-22T19:37:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nSeems like ANSI strip kicks in when is unwarranted:\r\nI'm using the following:\r\n\r\nYDEKEL-M-D6YG:~ ydekel$ python3 -V\r\nPython 3.8.1\r\nYDEKEL-M-D6YG:~ ydekel$ python3\r\nPython 3.8.1 (v3.8.1:1b293b6006, Dec 18 2019, 14:08:53)\r\n[Clang 6.0 (clang-600.0.57)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import netmiko\r\n>>> netmiko.__version__\r\n'3.0.0'\r\n>>>\r\n\r\nWhen sending this specific command, the ANSI strip kicks in for a backspace but I don't understand why.\r\nIt seems unwarranted, is there away to turn it off? i could not find any\r\n\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'show install pkg nxos.CSCvi07117-n9k_ALL-1.0.0-9.3.1.lib32_n9000\\n'\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = 'show install pkg nxos.CSCvi07117-n9k_ALL-1.0.0-9.3. \\x081.lib32_n9000\\r\\r\\n'\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = show install pkg nxos.CSCvi07117-n9k_ALL-1.0.0-9.3.1.lib32_n9000\r\n\r\nDEBUG:netmiko:repr = 'show install pkg nxos.CSCvi07117-n9k_ALL-1.0.0-9.3. \\x081.lib32_n9000\\r\\r\\n'\r\nDEBUG:netmiko:read_channel: show install pkg nxos.CSCvi07117-n9k_ALL-1.0.0-9.3.1.lib32_n9000\r\n\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = ''\r\n\r\nSo eventually the command that is sent is:\r\nshow install pkg nxos.CSCvi07117-n9k_ALL-1.0.0-9.3. 1.lib32_n9000\r\nThat space fails the command\r\n\r\nThanks in advanced", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1801", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1801/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1801/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1801/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1801", "id": 642289321, "node_id": "MDU6SXNzdWU2NDIyODkzMjE=", "number": 1801, "title": "ASA session fails on multiline prompting", "user": {"login": "reuben3010", "id": 39245508, "node_id": "MDQ6VXNlcjM5MjQ1NTA4", "avatar_url": "https://avatars2.githubusercontent.com/u/39245508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reuben3010", "html_url": "https://github.com/reuben3010", "followers_url": "https://api.github.com/users/reuben3010/followers", "following_url": "https://api.github.com/users/reuben3010/following{/other_user}", "gists_url": "https://api.github.com/users/reuben3010/gists{/gist_id}", "starred_url": "https://api.github.com/users/reuben3010/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reuben3010/subscriptions", "organizations_url": "https://api.github.com/users/reuben3010/orgs", "repos_url": "https://api.github.com/users/reuben3010/repos", "events_url": "https://api.github.com/users/reuben3010/events{/privacy}", "received_events_url": "https://api.github.com/users/reuben3010/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-20T02:17:30Z", "updated_at": "2020-06-23T15:03:41Z", "closed_at": "2020-06-23T15:02:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Code:\r\n\r\nfrom netmiko import ConnectHandler\r\nfrom getpass import getpass\r\nimport time\r\nfrom datetime import datetime\r\nstart_time = datetime.now()\r\nstart = time.time()\r\nhost = input('Enter ip address: ')\r\ndevice = {'device_type': 'cisco_asa',\r\n          'host': host,\r\n          'username':'reuben',\r\n          'password':'cisco',\r\n          'port': '22',\r\n          'secret': 'cisco',\r\n          'verbose': True}\r\n\r\nnet_connect = ConnectHandler(**device)\r\ncmd = 'copy disk0:ospf7.txt disk0:ospf12.txt'\r\n#expect_string = (r'Source filename', r'Destination filename')\r\noutput = net_connect.send_command(cmd)\r\nif 'Source filename' in output:\r\n    output += net_connect.send_command('\\n')\r\nif 'Destination filename' in output:\r\n    output += net_connect.send_command('\\n')\r\n\r\n#output += net_connect.send_command('\\n', '\\n', expect_string=r'#', delay_factor=2)\r\nprint(output)\r\n#output = net_connect.send_command('show int ip brie')\r\nprint(output)\r\n\r\n\r\nerror:\r\nC:\\network_automation_2\\venv\\Scripts\\python.exe C:/network_automation_2/testing_commands_netmiko.py\r\nEnter ip address: 10.7.250.54\r\nSSH connection established to 10.7.250.54:22\r\nInteractive SSH session established\r\nTraceback (most recent call last):\r\n  File \"C:/network_automation_2/testing_commands_netmiko.py\", line 19, in <module>\r\n    output = net_connect.send_command(cmd)\r\n  File \"C:\\network_automation_2\\venv\\lib\\site-packages\\netmiko\\cisco\\cisco_asa_ssh.py\", line 61, in send_command\r\n    output = super(CiscoAsaSSH, self).send_command(*args, **kwargs)\r\n  File \"C:\\network_automation_2\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 1337, in send_command\r\n    search_pattern\r\nOSError: Search pattern never detected in send_command_expect: LABASA1\\#\r\n\r\nProcess finished with exit code 1\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1798", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1798/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1798/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1798/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1798", "id": 640775977, "node_id": "MDU6SXNzdWU2NDA3NzU5Nzc=", "number": 1798, "title": "Timed-out reading channel because of \\r inserted in output", "user": {"login": "lazhao123", "id": 30350127, "node_id": "MDQ6VXNlcjMwMzUwMTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/30350127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lazhao123", "html_url": "https://github.com/lazhao123", "followers_url": "https://api.github.com/users/lazhao123/followers", "following_url": "https://api.github.com/users/lazhao123/following{/other_user}", "gists_url": "https://api.github.com/users/lazhao123/gists{/gist_id}", "starred_url": "https://api.github.com/users/lazhao123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lazhao123/subscriptions", "organizations_url": "https://api.github.com/users/lazhao123/orgs", "repos_url": "https://api.github.com/users/lazhao123/repos", "events_url": "https://api.github.com/users/lazhao123/events{/privacy}", "received_events_url": "https://api.github.com/users/lazhao123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-17T22:15:51Z", "updated_at": "2020-06-18T23:42:44Z", "closed_at": "2020-06-18T23:42:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I need to configure brocade switch. The command is:\r\n\r\nR1-G620-A:admin> ipaddrset -ipv4 -add -ethip 192.168.0.57 -ethmask 255.255.255.0 -gwyip 192.168.0.1 -dhcp OFF\r\nR1-G620-A:admin>\r\n\r\nHere is the code, it keeps getting timeout exception when sending command:\r\n\r\nnet_connect = ConnectHandler(device_type='brocade_nos', ip=xxxx, username='admin', password=xxxx)\r\ncommand = 'ipaddrset -ipv4 -add -ethip 192.168.0.57 -ethmask 255.255.255.0 -gwyip 192.168.0.1 -dhcp OFF'\r\noutput = net_connect.send_command(command)\r\nnet_connect.disconnect()\r\n\r\n\r\nIn debug net_connect.send_command(command),\r\nIn[9]: output = net_connect.send_command(command)\r\nread_channel: R1-G620-A:admin> \r\nClear buffer detects data in the channel\r\nread_channel: \r\nwrite_channel: b'\\n'\r\nread_channel: \r\nR1-G620-A:admin> \r\nread_channel: \r\n[find_prompt()]: prompt is R1-G620-A:admin>\r\nread_channel: \r\nwrite_channel: b'ipaddrset -ipv4 -add -ethip 192.168.0.57 -ethmask 255.255.255.0 -gwyip 192.168.0.1 -dhcp OFF\\n'\r\nPattern is: ipaddrset\\ \\-ipv4\\ \\-add\\ \\-ethip\\ 192\\.168\\.0\\.57\\ \\-ethmask\\ 255\\.255\\.255\\.0\\ \\-gwyip\\ 192\\.168\\.0\\.1\\ \\-dhcp\\ OFF\r\n -gwyip 192.168.0.1 -dhcp OFF\r\nR1-G620-A:admin> \r\n\r\nIn debug Netmiko _read_channel_expect(), I found:\r\nIn[ ]: print(new_data)\r\nOut[1]: 'ipaddrset -ipv4 -add -ethip 192.168.0.57 -ethmask 255.255.255.0 \\r -gwyip 192.168.0.1 -dhcp OFF\\r\\nR1-G620-A:admin> '\r\n\r\nNotice there is '\\r' in the middle of new_data, that caused Pattern is not matched with new_data, thus timeout.\r\n\"Timed-out reading channel, data not available.\"\r\n\r\nIf I remove '\\r', they will match and return successfully. I don't know why '\\r' is inserted there.\r\nConfigure on device looks fine.\r\n\r\nCan _read_channel_expect() remove '\\r' before matching? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1789", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1789/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1789/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1789/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1789", "id": 638350884, "node_id": "MDU6SXNzdWU2MzgzNTA4ODQ=", "number": 1789, "title": "bcrypt is not installed or working properly", "user": {"login": "rawatkuldeep23", "id": 65652231, "node_id": "MDQ6VXNlcjY1NjUyMjMx", "avatar_url": "https://avatars0.githubusercontent.com/u/65652231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rawatkuldeep23", "html_url": "https://github.com/rawatkuldeep23", "followers_url": "https://api.github.com/users/rawatkuldeep23/followers", "following_url": "https://api.github.com/users/rawatkuldeep23/following{/other_user}", "gists_url": "https://api.github.com/users/rawatkuldeep23/gists{/gist_id}", "starred_url": "https://api.github.com/users/rawatkuldeep23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rawatkuldeep23/subscriptions", "organizations_url": "https://api.github.com/users/rawatkuldeep23/orgs", "repos_url": "https://api.github.com/users/rawatkuldeep23/repos", "events_url": "https://api.github.com/users/rawatkuldeep23/events{/privacy}", "received_events_url": "https://api.github.com/users/rawatkuldeep23/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-14T13:17:53Z", "updated_at": "2020-06-16T21:15:34Z", "closed_at": "2020-06-16T21:15:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "i ran the script:\r\n\r\nfrom netmiko import Netmiko\r\n\r\nconnection = Netmiko(host='10.223.128.23', port ='23', username = 'admin, password = 'Password@123', device_type = 'cisco_ios')\r\n\r\nand getting below output:\r\n\r\nC:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\Scripts\\python.exe C:/Users/200845/PycharmProjects/My_Project/sonu.py\r\nTraceback (most recent call last):\r\n  File \"C:/Users/200845/PycharmProjects/My_Project/sonu.py\", line 1, in <module>\r\n    from netmiko import Netmiko\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\netmiko\\__init__.py\", line 7, in <module>\r\n    from netmiko.ssh_dispatcher import ConnectHandler\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 2, in <module>\r\n    from netmiko.a10 import A10SSH\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\netmiko\\a10\\__init__.py\", line 1, in <module>\r\n    from netmiko.a10.a10_ssh import A10SSH\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\netmiko\\a10\\a10_ssh.py\", line 3, in <module>\r\n    from netmiko.cisco_base_connection import CiscoSSHConnection\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 2, in <module>\r\n    from netmiko.base_connection import BaseConnection\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 18, in <module>\r\n    import paramiko\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\paramiko\\__init__.py\", line 22, in <module>\r\n    from paramiko.transport import SecurityOptions, Transport\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\paramiko\\transport.py\", line 89, in <module>\r\n    from paramiko.dsskey import DSSKey\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\paramiko\\dsskey.py\", line 37, in <module>\r\n    from paramiko.pkey import PKey\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\paramiko\\pkey.py\", line 31, in <module>\r\n    import bcrypt\r\n  File \"C:\\Users\\200845\\PycharmProjects\\My_Project\\venv\\lib\\site-packages\\bcrypt\\__init__.py\", line 25, in <module>\r\n    from . import _bcrypt\r\nImportError: cannot import name '_bcrypt'\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\nCan @ktbyers please help me to understand the errors and help in fixing these errors.\r\n\r\nThanks..!!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1786", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1786/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1786/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1786/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1786", "id": 637644903, "node_id": "MDU6SXNzdWU2Mzc2NDQ5MDM=", "number": 1786, "title": "prompt is not stripped in config mode with very long hostnames", "user": {"login": "991jo", "id": 1368323, "node_id": "MDQ6VXNlcjEzNjgzMjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1368323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/991jo", "html_url": "https://github.com/991jo", "followers_url": "https://api.github.com/users/991jo/followers", "following_url": "https://api.github.com/users/991jo/following{/other_user}", "gists_url": "https://api.github.com/users/991jo/gists{/gist_id}", "starred_url": "https://api.github.com/users/991jo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/991jo/subscriptions", "organizations_url": "https://api.github.com/users/991jo/orgs", "repos_url": "https://api.github.com/users/991jo/repos", "events_url": "https://api.github.com/users/991jo/events{/privacy}", "received_events_url": "https://api.github.com/users/991jo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-06-12T10:14:41Z", "updated_at": "2020-06-19T14:55:28Z", "closed_at": "2020-06-18T23:44:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an issue where the output sanitization does not work with very long hostnames on Cisco routers. When the hostname is > 20 characters long the prompt is not removed from the output of commands.\r\n\r\nI am running Python 3.8.3 and Netmiko 3.1.1, but the bug also affects netmiko 3.0.0.\r\nI am testing against a Cisco C1111 (IOS-XE 16.12.3) and an ASR920-24SZ-IM (16.9.5f).\r\n\r\nExample code here:\r\n\r\n```\r\nfrom netmiko import Netmiko\r\n\r\nconnection = Netmiko(host=\"A.B.C.D\",\r\n                     username=\"admin\",\r\n                     device_type=\"cisco_ios\",\r\n                     password=\"somepassword\",\r\n                     secret=\"somesecret\")\r\n\r\noutput1 = connection.send_command(\"show run | incl asdfgasdfg\")\r\n\r\nconnection.config_mode()\r\noutput2 = connection.send_command(\"do show run | incl asdfgasdfg\")\r\nconnection.exit_config_mode()\r\n\r\nprint(f\"'{output1}'\")\r\nprint(f\"'{output2}'\")\r\n```\r\n\r\nWhen the router has a short hostname like `short` or any other hostname with <= 20 characters the output is:\r\n```\r\n''\r\n''\r\n```\r\n\r\nWhen I change the hostname to `veryveryverylonghostname` or an other hostname with >20 characters the output is:\r\n```\r\n''\r\n'veryveryverylonghost(config)#'\r\n```\r\n20 characters is the boundary above which cisco cuts of the hostname in config mode but displays it normal in exec mode.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1785", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1785/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1785/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1785/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1785", "id": 636877380, "node_id": "MDU6SXNzdWU2MzY4NzczODA=", "number": 1785, "title": "TELNETDetect like SSHDetect", "user": {"login": "thoms27", "id": 20238377, "node_id": "MDQ6VXNlcjIwMjM4Mzc3", "avatar_url": "https://avatars3.githubusercontent.com/u/20238377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoms27", "html_url": "https://github.com/thoms27", "followers_url": "https://api.github.com/users/thoms27/followers", "following_url": "https://api.github.com/users/thoms27/following{/other_user}", "gists_url": "https://api.github.com/users/thoms27/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoms27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoms27/subscriptions", "organizations_url": "https://api.github.com/users/thoms27/orgs", "repos_url": "https://api.github.com/users/thoms27/repos", "events_url": "https://api.github.com/users/thoms27/events{/privacy}", "received_events_url": "https://api.github.com/users/thoms27/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-11T09:46:58Z", "updated_at": "2020-06-14T19:09:50Z", "closed_at": "2020-06-14T19:09:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nFirstly, thank you for your job. I use every day Netmiko to save my devices (Cisco, Huawei etc).\r\nI use SSHDetect to detect OS, but fews of them have only Telnet :-( \r\nDo you know if something like TELNETDetect or better TELNET-SSHDetect is planned ?\r\n\r\nThank you in advance.\r\n\r\nBest Regards,\r\n\r\nThomas V.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1783", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1783/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1783/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1783/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1783", "id": 635917241, "node_id": "MDU6SXNzdWU2MzU5MTcyNDE=", "number": 1783, "title": "Cannot import bcrypt", "user": {"login": "Jigs01", "id": 66711708, "node_id": "MDQ6VXNlcjY2NzExNzA4", "avatar_url": "https://avatars0.githubusercontent.com/u/66711708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jigs01", "html_url": "https://github.com/Jigs01", "followers_url": "https://api.github.com/users/Jigs01/followers", "following_url": "https://api.github.com/users/Jigs01/following{/other_user}", "gists_url": "https://api.github.com/users/Jigs01/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jigs01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jigs01/subscriptions", "organizations_url": "https://api.github.com/users/Jigs01/orgs", "repos_url": "https://api.github.com/users/Jigs01/repos", "events_url": "https://api.github.com/users/Jigs01/events{/privacy}", "received_events_url": "https://api.github.com/users/Jigs01/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-10T04:26:12Z", "updated_at": "2020-06-18T23:46:34Z", "closed_at": "2020-06-18T23:46:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "ImportError: cannot import name '_bcrypt' from 'bcrypt' (C:\\Users\\username\\AppData\\Roaming\\Python\\Python37\\site-packages\\bcrypt\\__init__.py)\r\n\r\ni am getting this error wile importing netmiko\r\n\r\nis there any solution?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1779", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1779/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1779/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1779/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1779", "id": 634625860, "node_id": "MDU6SXNzdWU2MzQ2MjU4NjA=", "number": 1779, "title": "SSH Auto Detect \"issue\"", "user": {"login": "doug1as", "id": 19331991, "node_id": "MDQ6VXNlcjE5MzMxOTkx", "avatar_url": "https://avatars1.githubusercontent.com/u/19331991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doug1as", "html_url": "https://github.com/doug1as", "followers_url": "https://api.github.com/users/doug1as/followers", "following_url": "https://api.github.com/users/doug1as/following{/other_user}", "gists_url": "https://api.github.com/users/doug1as/gists{/gist_id}", "starred_url": "https://api.github.com/users/doug1as/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doug1as/subscriptions", "organizations_url": "https://api.github.com/users/doug1as/orgs", "repos_url": "https://api.github.com/users/doug1as/repos", "events_url": "https://api.github.com/users/doug1as/events{/privacy}", "received_events_url": "https://api.github.com/users/doug1as/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-08T13:38:03Z", "updated_at": "2020-06-18T23:51:03Z", "closed_at": "2020-06-18T23:51:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'am trying to do a auto discovery process with steps in this link: [https://ktbyers.github.io/netmiko/docs/netmiko/ssh_autodetect.html](url)\r\n\r\nBut i always receiving this return:\r\n\r\n[user@hostname pwd]$ ./ssh_autodetect.py \r\n**None\r\n{}**\r\n\r\nI tried auto detect for Brocade NOS, Cisco IOS XR, HPE Comware, but doesn't work with none.\r\nLogs Attached.\r\n[ssh_autodetect.Brocade_NOS.log](https://github.com/ktbyers/netmiko/files/4746244/ssh_autodetect.Brocade_NOS.log)\r\n[ssh_autodetect.HP_Comware.log](https://github.com/ktbyers/netmiko/files/4746245/ssh_autodetect.HP_Comware.log)\r\n[ssh_autodetect.IOS_XR.log](https://github.com/ktbyers/netmiko/files/4746246/ssh_autodetect.IOS_XR.log)\r\n\r\n\r\nThis is my script:\r\n\r\n#!/usr/bin/env python3\r\n\r\nfrom netmiko.ssh_autodetect import SSHDetect\r\nfrom netmiko.ssh_dispatcher import ConnectHandler\r\nimport logging\r\n\r\n#Generating log file for analysis when needed\r\nlogging.basicConfig(filename='ssh_autodetect.log', level=logging.DEBUG)\r\nlogger = logging.getLogger(\"netmiko\")\r\n\r\nremote_device = {'device_type': 'autodetect',\r\n                 'host': 'HOSTNAME',\r\n                 'username': 'MY_USER',\r\n                 'password': 'MY_PASS',\r\n                 'ssh_config_file': '~/.ssh/config-NAME'}\r\n\r\n\r\nguesser = SSHDetect(**remote_device)\r\nbest_match = guesser.autodetect()\r\n#Name of the best device_type to use further\r\nprint(best_match) \r\n#Dictionary of the whole matching result\r\nprint(guesser.potential_matches) \r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1777", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1777/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1777/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1777/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1777", "id": 631688599, "node_id": "MDU6SXNzdWU2MzE2ODg1OTk=", "number": 1777, "title": "Trouble Running Debug/Packet Captures Commands with Netmiko", "user": {"login": "trevorjackson", "id": 13138535, "node_id": "MDQ6VXNlcjEzMTM4NTM1", "avatar_url": "https://avatars1.githubusercontent.com/u/13138535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trevorjackson", "html_url": "https://github.com/trevorjackson", "followers_url": "https://api.github.com/users/trevorjackson/followers", "following_url": "https://api.github.com/users/trevorjackson/following{/other_user}", "gists_url": "https://api.github.com/users/trevorjackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/trevorjackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trevorjackson/subscriptions", "organizations_url": "https://api.github.com/users/trevorjackson/orgs", "repos_url": "https://api.github.com/users/trevorjackson/repos", "events_url": "https://api.github.com/users/trevorjackson/events{/privacy}", "received_events_url": "https://api.github.com/users/trevorjackson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-05T15:26:37Z", "updated_at": "2020-06-06T19:01:02Z", "closed_at": "2020-06-06T19:01:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running into an issue that I think is similar to the issue that was discussed here:\r\n\r\nhttps://github.com/ktbyers/netmiko/issues/1538\r\n\r\nI am trying to use netmiko to configure and run a packet capture on Palo Alto Firewalls. Here are the commands I am attempting to run:\r\n\r\n                \"debug dataplane packet-diag show setting\",\r\n                \"debug dataplane packet-diag set filter on\",\r\n                \"debug dataplane packet-diag set filter index 1 match destination-port 22\",\r\n                \"debug dataplane packet-diag set filter index 2 match source-port 22\",\r\n                \"debug dataplane packet-diag set capture stage transmit byte-count 10000000 file \" + router + \"-transmit.pcap\",\r\n                \"debug dataplane packet-diag set capture stage drop byte-count 10000000 file \" + firewall + \"-drop.pcap\",\r\n                \"debug dataplane packet-diag set capture stage receive byte-count 10000000 file \" + firewall + \"-receive.pcap\",\r\n                \"debug dataplane packet-diag set capture stage firewall byte-count 10000000 file \" + firewall + \"-firewall.pcap\",\r\n                \"debug dataplane packet-diag set capture on\",\r\n                \"debug dataplane packet-diag show setting\"\r\n\r\nI suspect the issue is related to the fact that the commands after \"debug dataplane packet-diag set filter on\" do not echo anything to the command line at all - the first two commands run without issue, but at the third command (or later if I removed that command) the output hangs for a few seconds and then I get a series of errors:\r\n\r\nfwall debug dataplane packet-diag show setting\r\n\r\n\r\n--------------------------------------------------------------------------------\r\nPacket diagnosis setting:\r\n--------------------------------------------------------------------------------\r\nPacket filter\r\n  Enabled:                   yes\r\n  Match pre-parsed packet:   no            \r\n  Index 1: 0.0.0.0/0[0]->0.0.0.0/0[22], proto 0\r\n           ingress-interface any, egress-interface any, exclude non-IP\r\n--------------------------------------------------------------------------------\r\nLogging\r\n  Enabled:                   no\r\n  Log-throttle:              no\r\n  Sync-log-by-ticks:         yes            \r\n  Features:\r\n  Counters:\r\n--------------------------------------------------------------------------------\r\nPacket capture\r\n  Enabled:                   yes\r\n  Snaplen:                   0\r\n  Username:                              \r\n--------------------------------------------------------------------------------\r\n\r\n\r\n\r\nfwall debug dataplane packet-diag set filter on\r\n\r\n\r\ndebug packet filter: on\r\n\r\n\r\nfwall debug dataplane packet-diag set filter index 1 match destination-port 22\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/user/PycharmProjects/firewall_commands/venv/PA_Packet_Capture.py\", line 99, in <module>\r\n    print(connection.send_command(x) + \"\\n\")\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\netmiko\\paloalto\\paloalto_panos.py\", line 160, in send_command\r\n    return super().send_command(*args, **kwargs)\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\netmiko\\utilities.py\", line 347, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 1389, in send_command\r\n    new_data = self.read_until_pattern(pattern=re.escape(cmd))\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Users\\user\\PycharmProjects\\firewall_commands\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 561, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nProcess finished with exit code 1\r\n\r\n \r\n\r\nHere is the code I am using:\r\n\r\n\r\nconnection = netmiko.ConnectHandler(firewall, device_type=\"paloalto_panos\", username=username, password=password)\r\n\r\n\r\nshow_command = [\"debug dataplane packet-diag show setting\",\r\n                \"debug dataplane packet-diag set filter on\",\r\n                \"debug dataplane packet-diag set filter index 1 match destination-port 5100\",\r\n                \"debug dataplane packet-diag set filter index 2 match source-port 5100\",\r\n                \"debug dataplane packet-diag set capture stage transmit byte-count 10000000 file \" + firewall + \"-transmit.pcap\",\r\n                \"debug dataplane packet-diag set capture stage drop byte-count 10000000 file \" + firewall + \"-drop.pcap\",\r\n                \"debug dataplane packet-diag set capture stage receive byte-count 10000000 file \" + firewall + \"-receive.pcap\",\r\n                \"debug dataplane packet-diag set capture stage firewall byte-count 10000000 file \" + firewall + \"-firewall.pcap\",\r\n                \"debug dataplane packet-diag set capture on\",\r\n                \"debug dataplane packet-diag show setting\"]\r\n\r\nfor x in show_command:\r\n   if x != None and x != \"n\":\r\n        print(firewall + \" \" + x + \"\\n\")\r\n        print(connection.send_command(x) + \"\\n\")\r\n        print(connection.send_command(\"\\n\"))\r\n        \r\nI have attached a netmiko log of the issue occurring. Any help would be greatly appreciated.\r\n\r\n[test.log](https://github.com/ktbyers/netmiko/files/4736950/test.log)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1775", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1775/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1775/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1775/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1775", "id": 631622109, "node_id": "MDU6SXNzdWU2MzE2MjIxMDk=", "number": 1775, "title": "paramiko.ssh_exception.SSHException: No existing session", "user": {"login": "ajwillo", "id": 24481217, "node_id": "MDQ6VXNlcjI0NDgxMjE3", "avatar_url": "https://avatars1.githubusercontent.com/u/24481217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajwillo", "html_url": "https://github.com/ajwillo", "followers_url": "https://api.github.com/users/ajwillo/followers", "following_url": "https://api.github.com/users/ajwillo/following{/other_user}", "gists_url": "https://api.github.com/users/ajwillo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajwillo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajwillo/subscriptions", "organizations_url": "https://api.github.com/users/ajwillo/orgs", "repos_url": "https://api.github.com/users/ajwillo/repos", "events_url": "https://api.github.com/users/ajwillo/events{/privacy}", "received_events_url": "https://api.github.com/users/ajwillo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-05T14:09:29Z", "updated_at": "2020-06-18T23:53:27Z", "closed_at": "2020-06-18T23:53:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI can see multiple closed tickets for this issue, which suggest increasing timeout will resolve, however I have the timeout at 8 seconds and I still get the issue sporadically.\r\n\r\nis it possible to integrate an exception for this?\r\n\r\nI currently use the below, but as the exception is within paramiko not netlike I think this is the reason why my script then fails on this device?\r\n\r\nis it possible to raise an exception that wouldn't cause a script to fail?\r\n\r\n    except NetmikoTimeoutException:\r\n    except NetmikoAuthenticationException:\r\n    except Exception as e:\r\n\r\n`Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/celery/app/trace.py\", line 385, in trace_task\r\n    R = retval = fun(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/celery/app/trace.py\", line 650, in __protected_call__\r\n    return self.run(*args, **kwargs)\r\n  File \"/itapp/itapp/config/tasks.py\", line 512, in config_ise_remedials\r\n    conn = ConnectHandler(**device_details)\r\n  File \"/usr/local/lib/python3.7/site-packages/netmiko/ssh_dispatcher.py\", line 259, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"/usr/local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 332, in _open\r\n    self.establish_connection()\r\n  File \"/usr/local/lib/python3.7/site-packages/netmiko/base_connection.py\", line 901, in establish_connection\r\n    self.remote_conn_pre.connect(**ssh_connect_params)\r\n  File \"/usr/local/lib/python3.7/site-packages/paramiko/client.py\", line 412, in connect\r\n    server_key = t.get_remote_server_key()\r\n  File \"/usr/local/lib/python3.7/site-packages/paramiko/transport.py\", line 834, in get_remote_server_key\r\n    raise SSHException(\"No existing session\")\r\nparamiko.ssh_exception.SSHException: No existing session`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1770", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1770/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1770/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1770/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1770", "id": 628718894, "node_id": "MDU6SXNzdWU2Mjg3MTg4OTQ=", "number": 1770, "title": "netmiko-textfsm returns complete output as string if no match is found using textfsm", "user": {"login": "demakkar", "id": 46468850, "node_id": "MDQ6VXNlcjQ2NDY4ODUw", "avatar_url": "https://avatars1.githubusercontent.com/u/46468850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/demakkar", "html_url": "https://github.com/demakkar", "followers_url": "https://api.github.com/users/demakkar/followers", "following_url": "https://api.github.com/users/demakkar/following{/other_user}", "gists_url": "https://api.github.com/users/demakkar/gists{/gist_id}", "starred_url": "https://api.github.com/users/demakkar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/demakkar/subscriptions", "organizations_url": "https://api.github.com/users/demakkar/orgs", "repos_url": "https://api.github.com/users/demakkar/repos", "events_url": "https://api.github.com/users/demakkar/events{/privacy}", "received_events_url": "https://api.github.com/users/demakkar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-01T20:52:08Z", "updated_at": "2020-06-02T18:17:20Z", "closed_at": "2020-06-02T18:17:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to parse network statment is running config bgp .when textfsm fails to find any network statement it returns complete string of running conifg .when it find corrrect string ,it gives list of dictionaries.\r\n\r\n\r\ncode\r\n\r\n`    net_connect = ConnectHandler(**ceos2)\r\n    runningconfigoutput = net_connect.send_command('show running-config section bgp', use_textfsm=True)\r\n    route_map_configparser(output,runningconfigoutput)`\r\n\r\ntextfsm\r\n\r\n`Value AGGNETWORK (\\d+.\\d+.\\d+.\\d+\\/\\d+)\r\nValue MATCHMAP (\\S+)\r\nValue LOCALNETWORK (\\d+.\\d+.\\d+.\\d+\\/\\d+)\r\nValue ROUTEMAP (\\S+)\r\n\r\nStart \r\n  ^\\s+network\\s${LOCALNETWORK}\\sroute-map\\s${ROUTEMAP} \r\n  ^\\s+aggregate-address\\s${AGGNETWORK}\\smatch-map\\s${MATCHMAP} -> Record\r\n`\r\n\r\n\r\n\r\n`[{'aggnetwork': '20.0.0.0/8',\r\n  'localnetwork': '10.0.0.0/8',\r\n  'matchmap': 'def',\r\n  'routemap': 'abc'},\r\n {'aggnetwork': '20.0.0.0/8',\r\n  'localnetwork': '',\r\n  'matchmap': 'ghi',\r\n  'routemap': ''},\r\n {'aggnetwork': '',\r\n  'localnetwork': '10.224.14.26/31',\r\n  'matchmap': '',\r\n  'routemap': 'qui-hlb-snat'}]\r\n`\r\n\r\n`('router bgp 64840\\n'\r\n '   neighbor azure-msee-all peer-group\\n'\r\n '   neighbor azure-msee-all maximum-routes 12000\\n'\r\n '   !\\n'\r\n '   vrf corp\\n'\r\n '      router-id 1.1.1.1\\n'\r\n '      neighbor 10.116.124.242 peer-group azure-msee-all\\n'\r\n '      neighbor 10.116.124.242 remote-as 12076\\n'\r\n '      neighbor 10.116.124.242 fall-over bfd\\n'\r\n '      neighbor 10.116.124.242 description '\r\n 'e5eb0185-52e7-42a9-a9aa-827fb8e4e918\\n'\r\n '      neighbor 10.116.124.242 soft-reconfiguration inbound\\n'\r\n '      neighbor 10.116.124.242 route-map e5eb0185-52e7-42a9-a9aa-827fb8e4e918 '\r\n 'in\\n'\r\n)`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1769", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1769/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1769/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1769/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1769", "id": 627886041, "node_id": "MDU6SXNzdWU2Mjc4ODYwNDE=", "number": 1769, "title": "Netmiko giving some issues while using send_config_set", "user": {"login": "vishnu9094", "id": 66192427, "node_id": "MDQ6VXNlcjY2MTkyNDI3", "avatar_url": "https://avatars3.githubusercontent.com/u/66192427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vishnu9094", "html_url": "https://github.com/vishnu9094", "followers_url": "https://api.github.com/users/vishnu9094/followers", "following_url": "https://api.github.com/users/vishnu9094/following{/other_user}", "gists_url": "https://api.github.com/users/vishnu9094/gists{/gist_id}", "starred_url": "https://api.github.com/users/vishnu9094/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vishnu9094/subscriptions", "organizations_url": "https://api.github.com/users/vishnu9094/orgs", "repos_url": "https://api.github.com/users/vishnu9094/repos", "events_url": "https://api.github.com/users/vishnu9094/events{/privacy}", "received_events_url": "https://api.github.com/users/vishnu9094/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-31T03:57:32Z", "updated_at": "2020-07-05T02:20:39Z", "closed_at": "2020-07-05T02:20:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am having a simple code of sending a config to the router. \r\n\r\n**Setup :**\r\nNetwork Automation tool ---------------- Router 1\r\n\r\nConfiguration : \r\n\r\n```python\r\nfrom netmiko import ConnectHandler\r\n\r\niosvl2 = {\r\n    'device_type' : 'cisco_ios',\r\n    'ip':'192.168.122.10',\r\n    'username':'network',\r\n    'password':'rhinos',\r\n}\r\n\r\nconnect=ConnectHandler(**iosvl2)\r\noutput=connect.send_command(\"show ip interface brief\")\r\nprint(output)\r\n\r\nconfig_command=['interface lo0','ip address 1.1.1.1 255.255.255.255']\r\noutput=connect.send_config_set(config_command)\r\nprint(output)\r\n```\r\n\r\n\r\n**Below is my output**\r\n`root@NetworkAutomation-1:~# python3 netmiko1.py\r\nInterface                  IP-Address      OK? Method Status                Protocol\r\nFastEthernet0/0            192.168.122.65  YES manual up                    up\r\nFastEthernet0/1            unassigned      YES unset  administratively down down\r\nFastEthernet1/0            unassigned      YES unset  administratively down down\r\nFastEthernet1/1            unassigned      YES unset  administratively down down\r\nFastEthernet2/0            unassigned      YES unset  administratively down down\r\nFastEthernet2/1            unassigned      YES unset  administratively down down\r\nFastEthernet3/0            unassigned      YES unset  administratively down down\r\nFastEthernet3/1            unassigned      YES unset  administratively down down\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"netmiko1.py\", line 16, in <module>\r\n    output=connect.send_config_set(config_command)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 1735, in send_config_set\r\n    output += self.config_mode(*cfg_mode_args)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 1619, in config_mode\r\n    if not self.check_config_mode():\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/cisco/cisco_ios.py\", line 29, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/cisco_base_connection.py\", line 30, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 1606, in check_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\nroot@NetworkAutomation-1:~#\r\n`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1768", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1768/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1768/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1768/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1768", "id": 626996187, "node_id": "MDU6SXNzdWU2MjY5OTYxODc=", "number": 1768, "title": "netmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available", "user": {"login": "diptajeet", "id": 28852898, "node_id": "MDQ6VXNlcjI4ODUyODk4", "avatar_url": "https://avatars2.githubusercontent.com/u/28852898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diptajeet", "html_url": "https://github.com/diptajeet", "followers_url": "https://api.github.com/users/diptajeet/followers", "following_url": "https://api.github.com/users/diptajeet/following{/other_user}", "gists_url": "https://api.github.com/users/diptajeet/gists{/gist_id}", "starred_url": "https://api.github.com/users/diptajeet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diptajeet/subscriptions", "organizations_url": "https://api.github.com/users/diptajeet/orgs", "repos_url": "https://api.github.com/users/diptajeet/repos", "events_url": "https://api.github.com/users/diptajeet/events{/privacy}", "received_events_url": "https://api.github.com/users/diptajeet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-29T04:50:24Z", "updated_at": "2020-06-05T16:34:08Z", "closed_at": "2020-06-05T12:35:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Facing issues with Netmiko v3.1.1, the same piece of code works fine on Netmiko v2.4.2 for Catalyst device using ntc_config_command. Is this something to do with the terminal width setup?\r\n\r\nBelow is the traceback:\r\n\r\n  module_stderr: |-\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/python3.8/site-packages/paramiko/channel.py\", line 699, in recv\r\n        out = self.in_buffer.read(nbytes, self.timeout)\r\n      File \"/usr/lib/python3.8/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n        raise PipeTimeout()\r\n    paramiko.buffered_pipe.PipeTimeout\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/python3.8/site-packages/netmiko/base_connection.py\", line 550, in _read_channel_expect\r\n        new_data = self.remote_conn.recv(MAX_BUFFER)\r\n      File \"/usr/lib/python3.8/site-packages/paramiko/channel.py\", line 701, in recv\r\n        raise socket.timeout()\r\n    socket.timeout\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n      File \"<stdin>\", line 102, in <module>\r\n      File \"<stdin>\", line 94, in _ansiballz_main\r\n      File \"<stdin>\", line 40, in invoke_module\r\n      File \"/usr/lib/python3.8/runpy.py\", line 207, in run_module\r\n        return _run_module_code(code, init_globals, run_name, mod_spec)\r\n      File \"/usr/lib/python3.8/runpy.py\", line 97, in _run_module_code\r\n        _run_code(code, mod_globals, init_globals,\r\n      File \"/usr/lib/python3.8/runpy.py\", line 87, in _run_code\r\n        exec(code, run_globals)\r\n      File \"/tmp/ansible_ntc_config_command_payload_3zpm2o86/ansible_ntc_config_command_payload.zip/ansible/modules/ntc_config_command.py\", line 273, in <module>\r\n      File \"/tmp/ansible_ntc_config_command_payload_3zpm2o86/ansible_ntc_config_command_payload.zip/ansible/modules/ntc_config_command.py\", line 257, in main\r\n      File \"/usr/lib/python3.8/site-packages/netmiko/base_connection.py\", line 1766, in send_config_set\r\n        new_output = self.read_until_pattern(pattern=pattern)\r\n      File \"/usr/lib/python3.8/site-packages/netmiko/base_connection.py\", line 627, in read_until_pattern\r\n        return self._read_channel_expect(*args, **kwargs)\r\n      File \"/usr/lib/python3.8/site-packages/netmiko/base_connection.py\", line 560, in _read_channel_expect\r\n        raise NetmikoTimeoutException(\r\n    netmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n  module_stdout: ''\r\n  msg: |-\r\n    MODULE FAILURE\r\n    See stdout/stderr for the exact error\r\n  rc: 1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1766", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1766/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1766/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1766/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1766", "id": 626768176, "node_id": "MDU6SXNzdWU2MjY3NjgxNzY=", "number": 1766, "title": "Slack invite does not work", "user": {"login": "tictoc2", "id": 9501739, "node_id": "MDQ6VXNlcjk1MDE3Mzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/9501739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tictoc2", "html_url": "https://github.com/tictoc2", "followers_url": "https://api.github.com/users/tictoc2/followers", "following_url": "https://api.github.com/users/tictoc2/following{/other_user}", "gists_url": "https://api.github.com/users/tictoc2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tictoc2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tictoc2/subscriptions", "organizations_url": "https://api.github.com/users/tictoc2/orgs", "repos_url": "https://api.github.com/users/tictoc2/repos", "events_url": "https://api.github.com/users/tictoc2/events{/privacy}", "received_events_url": "https://api.github.com/users/tictoc2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-28T19:45:07Z", "updated_at": "2020-06-02T18:22:42Z", "closed_at": "2020-06-02T18:22:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Could you please update the slack invite?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1765", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1765/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1765/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1765/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1765", "id": 626183029, "node_id": "MDU6SXNzdWU2MjYxODMwMjk=", "number": 1765, "title": "Netmiko Threading ", "user": {"login": "jkartheek999", "id": 60983448, "node_id": "MDQ6VXNlcjYwOTgzNDQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/60983448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkartheek999", "html_url": "https://github.com/jkartheek999", "followers_url": "https://api.github.com/users/jkartheek999/followers", "following_url": "https://api.github.com/users/jkartheek999/following{/other_user}", "gists_url": "https://api.github.com/users/jkartheek999/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkartheek999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkartheek999/subscriptions", "organizations_url": "https://api.github.com/users/jkartheek999/orgs", "repos_url": "https://api.github.com/users/jkartheek999/repos", "events_url": "https://api.github.com/users/jkartheek999/events{/privacy}", "received_events_url": "https://api.github.com/users/jkartheek999/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-28T03:23:24Z", "updated_at": "2020-05-28T14:52:51Z", "closed_at": "2020-05-28T14:39:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to use a script where in the code will login to network devices update in a file whether the authentication is success or failure. The code works fine when python is running sequential. When using threading to login in parallel, the script is skipping line from the ip.txt file. It is skipping all the odd lines and picking only the even line IP address and confirming (success/failure). Not sure what change i need to make for reading all the lines. Attaching the code.\r\n[MultiAut.txt](https://github.com/ktbyers/netmiko/files/4693052/MultiAut.txt)\r\n[newip.txt](https://github.com/ktbyers/netmiko/files/4693057/newip.txt)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1764", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1764/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1764/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1764/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1764", "id": 626040230, "node_id": "MDU6SXNzdWU2MjYwNDAyMzA=", "number": 1764, "title": "Nokia_SROS adding backspace characters to output", "user": {"login": "Enochsoul", "id": 43549250, "node_id": "MDQ6VXNlcjQzNTQ5MjUw", "avatar_url": "https://avatars3.githubusercontent.com/u/43549250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Enochsoul", "html_url": "https://github.com/Enochsoul", "followers_url": "https://api.github.com/users/Enochsoul/followers", "following_url": "https://api.github.com/users/Enochsoul/following{/other_user}", "gists_url": "https://api.github.com/users/Enochsoul/gists{/gist_id}", "starred_url": "https://api.github.com/users/Enochsoul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Enochsoul/subscriptions", "organizations_url": "https://api.github.com/users/Enochsoul/orgs", "repos_url": "https://api.github.com/users/Enochsoul/repos", "events_url": "https://api.github.com/users/Enochsoul/events{/privacy}", "received_events_url": "https://api.github.com/users/Enochsoul/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-05-27T21:22:07Z", "updated_at": "2020-06-02T20:30:50Z", "closed_at": "2020-06-02T20:30:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using the textfsm processing to pull command output tables, and I noticed that on some devices it wasn't returning the expected output but on others it was.  Further examination from the Netmiko debug logs I found that the return seemed to be including backspace control characters that were messing up the output spacing and throwing off the textfsm parse.\r\n\r\nThe code doesn't seem to matter, as I get the same result from an interactive python env as I do in a built script, so here's what I'm doing and the output I'm seeing.\r\n\r\n**Not working:**\r\n```\r\n>>> net_connect = Netmiko(host='10.187.165.188', username='ipmetro-script', password='*******', device_type='nokia_sros')\r\n>>> output = net_connect.send_command('show router ospf neighbor')\r\n>>> print(output)\r\n===============================================================================\r\nRtr Base OSPFv2 Instance 0 Neighbors\r\n===============================================================================\r\nInterface-Name                   Rtr Id          State      Pri  RetxQ   TTL\r\n   Area-Id\r\n-------------------------------------------------------------------------------\r\n  x-ge1/1/25                       10.187.165.155  Full       1    0       39\r\n   0.0.0.0\r\n    ge1/1/20                         10.186.16.2     Full       1    2       38\r\n   0.0.0.0\r\n  -------------------------------------------------------------------------------\r\nNo. of Neighbors: 2\r\n===============================================================================\r\n>>> net_connect.disconnect()\r\n\r\n```\r\nEach of the interface names should be right against the left margin, but they are spaced away.  Here's one that works properly, with the exact same command, though the device is a different type of hardware:\r\n\r\n**Working**\r\n```\r\n>>> net_connect = Netmiko(host='10.187.166.141', username='ipmetro-script', password='*******', device_type='nokia_sros')\r\n>>> output = net_connect.send_command('show router ospf neighbor')\r\n>>> print(output)                                                                                                   \r\n===============================================================================\r\nRtr Base OSPFv2 Instance 0 Neighbors\r\n===============================================================================\r\nInterface-Name                   Rtr Id          State      Pri  RetxQ   TTL\r\n   Area-Id\r\n-------------------------------------------------------------------------------\r\nx-ge1/1/1                        10.187.166.134  Full       1    0       37\r\n   0.0.0.0\r\nx-ge2/1/1                        10.187.166.135  Full       1    0       31\r\n   0.0.0.0\r\nx-ge1/2/1                        10.187.166.191  Full       1    0       35\r\n   0.0.0.0\r\n-------------------------------------------------------------------------------\r\nNo. of Neighbors: 3\r\n===============================================================================\r\n>>> net_connect.disconnect()\r\n```\r\n\r\nAttached the relevant Netmiko logs as well.  I've tried post-processing with the strip_backspace() method, but it doesn't seem to work, and defeats the purpose of doing textfsm inline with the send_command(unless of course I'm using it incorrectly, which I'll admit is as likely as anything else since I'm a network engineer first and reasonably new to this automation journey).\r\n[backspace control logs.txt](https://github.com/ktbyers/netmiko/files/4691904/backspace.control.logs.txt)\r\n\r\nThanks in advance for any insight you can provide.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1762", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1762/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1762/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1762/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1762", "id": 625547464, "node_id": "MDU6SXNzdWU2MjU1NDc0NjQ=", "number": 1762, "title": "i have made a program to get backup of multiple huawei devices but issue is that if one device is down or not responding it ends the progrma and not proceed to other devices.", "user": {"login": "musamakhalid88", "id": 62905426, "node_id": "MDQ6VXNlcjYyOTA1NDI2", "avatar_url": "https://avatars3.githubusercontent.com/u/62905426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/musamakhalid88", "html_url": "https://github.com/musamakhalid88", "followers_url": "https://api.github.com/users/musamakhalid88/followers", "following_url": "https://api.github.com/users/musamakhalid88/following{/other_user}", "gists_url": "https://api.github.com/users/musamakhalid88/gists{/gist_id}", "starred_url": "https://api.github.com/users/musamakhalid88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/musamakhalid88/subscriptions", "organizations_url": "https://api.github.com/users/musamakhalid88/orgs", "repos_url": "https://api.github.com/users/musamakhalid88/repos", "events_url": "https://api.github.com/users/musamakhalid88/events{/privacy}", "received_events_url": "https://api.github.com/users/musamakhalid88/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-27T09:48:45Z", "updated_at": "2020-05-27T13:28:19Z", "closed_at": "2020-05-27T13:28:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "i have made a program to get backup of multiple huawei devices but issue is that if one device is down or not responding it ends the program and not proceed to other devices.\r\n\r\nbelow 192.168.56.5 device is offline or not connected , for 56.2 it shows the output but on 56.5 it gives error and end the program and not go to other device 56.3.\r\n\r\ni have searched for solution but not find any.\r\n\r\nfrom netmiko import ConnectHandler\r\n\r\n\r\nips = [\"192.168.56.2\" , \"192.168.56.5\", \"192.168.56.3\"]\r\n\r\nfor ip in ips:\r\n    devices = {\r\n    'device_type': 'huawei',\r\n    'ip': ip,\r\n    'username': 'admin',\r\n    'password': '1111',\r\n}\r\n    print(\"SSH to \" ,ip)\r\n    net_connect = ConnectHandler(**devices)\r\n    print(net_connect.find_prompt())\r\n    output = net_connect.send_command('disp ip inter bri')\r\n    print(output)\r\n    \r\n\r\nerror :\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 899, in establish_connection\r\n    self.remote_conn_pre.connect(**ssh_connect_params)\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\client.py\", line 349, in connect\r\n    retry_on_signal(lambda: sock.connect(addr))\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\util.py\", line 283, in retry_on_signal\r\n    return function()\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\client.py\", line 349, in <lambda>\r\n    retry_on_signal(lambda: sock.connect(addr))\r\nTimeoutError: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/M.USAMA/Downloads/Compressed/original_5/netmiko_config_backup2.py\", line 14, in <module>\r\n    net_connect = ConnectHandler(**devices)\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 266, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 332, in _open\r\n    self.establish_connection()\r\n  File \"C:\\Users\\M.USAMA\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 905, in establish_connection\r\n    raise NetmikoTimeoutException(msg)\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Connection to device timed-out: huawei 192.168.56.5:22\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1761", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1761/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1761/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1761/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1761", "id": 625425388, "node_id": "MDU6SXNzdWU2MjU0MjUzODg=", "number": 1761, "title": "Netmiko requires Python 3.6 or greater.", "user": {"login": "Newonegit", "id": 42546121, "node_id": "MDQ6VXNlcjQyNTQ2MTIx", "avatar_url": "https://avatars2.githubusercontent.com/u/42546121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Newonegit", "html_url": "https://github.com/Newonegit", "followers_url": "https://api.github.com/users/Newonegit/followers", "following_url": "https://api.github.com/users/Newonegit/following{/other_user}", "gists_url": "https://api.github.com/users/Newonegit/gists{/gist_id}", "starred_url": "https://api.github.com/users/Newonegit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Newonegit/subscriptions", "organizations_url": "https://api.github.com/users/Newonegit/orgs", "repos_url": "https://api.github.com/users/Newonegit/repos", "events_url": "https://api.github.com/users/Newonegit/events{/privacy}", "received_events_url": "https://api.github.com/users/Newonegit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-27T06:45:04Z", "updated_at": "2020-06-02T20:32:41Z", "closed_at": "2020-06-02T20:32:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys, I'm only trying to test netmiko code for ssh connection to an emulated L2 switch on GNS3, but I'm receiving an error, I'm not an expert so I believe you can help me with this.\r\n\r\nThis is the code:\r\n\r\nfrom netmiko import ConnectHandler\r\n\r\niosv_l2 = {\r\n    'device_type': 'cisco_ios',\r\n    'ip': '192.168.122.200',\r\n    'username': 'cisco123',\r\n    'password': 'cisco'\r\n}\r\n\r\nnet_connect = ConnectHandler(**iosv_l2)\r\noutput = net_connect.send_command('show ip int brief')\r\nprint (output)\r\n\r\nconfig_commands = ['int loop 0', 'ip address 1.1.1.1 255.255.255.0']\r\noutput = net_connect.send_config_set(config_commands)\r\nprint (output)\r\n\r\nfor n in range (2,21):\r\n    print (\"Creating VLAN \" + str(n))\r\n    config_commands = ['vlan ' + str(n), 'name Python_VLAN ' + str(n)]\r\n    output = net_connect.send_config_set(config_commands)\r\n    print (output)\r\n\r\n\r\nroot@NetworkAutomation-1:~# python Netm1.py\r\n\r\nTraceback (most recent call last):\r\n  File \"Netm1.py\", line 1, in <module>\r\n    from netmiko import ConnectHandler\r\n  File \"/usr/local/lib/python2.7/dist-packages/netmiko/__init__.py\", line 7, in <module>\r\n    from netmiko.ssh_dispatcher import ConnectHandler\r\n  File \"/usr/local/lib/python2.7/dist-packages/netmiko/ssh_dispatcher.py\", line 2, in <module>\r\n    from netmiko.a10 import A10SSH\r\n  File \"/usr/local/lib/python2.7/dist-packages/netmiko/a10/__init__.py\", line 1, in <module>\r\n    from netmiko.a10.a10_ssh import A10SSH\r\n  File \"/usr/local/lib/python2.7/dist-packages/netmiko/a10/a10_ssh.py\", line 3, in <module>\r\n    from netmiko.cisco_base_connection import CiscoSSHConnection\r\n  File \"/usr/local/lib/python2.7/dist-packages/netmiko/cisco_base_connection.py\", line 143\r\n    msg = f\"Login failed: {self.host}\"\r\n                                     ^\r\nSyntaxError: invalid syntax\r\n\r\nI've got this versions of netmiko and paramiko:\r\nName: netmiko\r\nVersion: 3.1.0\r\n\r\nName: paramiko\r\nVersion: 2.7.1\r\n\r\nPlease give me some advice guys, I'll really appreciate your ideas.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1759", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1759/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1759/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1759/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1759", "id": 625103651, "node_id": "MDU6SXNzdWU2MjUxMDM2NTE=", "number": 1759, "title": "NX-OS device terminating connection in check_config_mode", "user": {"login": "lazhao123", "id": 30350127, "node_id": "MDQ6VXNlcjMwMzUwMTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/30350127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lazhao123", "html_url": "https://github.com/lazhao123", "followers_url": "https://api.github.com/users/lazhao123/followers", "following_url": "https://api.github.com/users/lazhao123/following{/other_user}", "gists_url": "https://api.github.com/users/lazhao123/gists{/gist_id}", "starred_url": "https://api.github.com/users/lazhao123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lazhao123/subscriptions", "organizations_url": "https://api.github.com/users/lazhao123/orgs", "repos_url": "https://api.github.com/users/lazhao123/repos", "events_url": "https://api.github.com/users/lazhao123/events{/privacy}", "received_events_url": "https://api.github.com/users/lazhao123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 41, "created_at": "2020-05-26T18:43:10Z", "updated_at": "2020-07-04T15:57:50Z", "closed_at": "2020-07-04T15:57:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI got connection closed exception when I send many interface commands to cisco nexus device.\r\nOn CLI, device can handle this many commands, but on script, it gives exception.\r\n\r\nIf I give keep_alive, why connection still be closed by remote?\r\n\r\nSocket exception: An existing connection was forcibly closed by the remote host (10054)\r\nTraceback (most recent call last):\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 1739, in send_config_set\r\n    output += self.exit_config_mode()\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 44, in exit_config_mode\r\n    return super().exit_config_mode(exit_config=exit_config, pattern=pattern)\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 1615, in exit_config_mode\r\n    if self.check_config_mode():\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\cisco\\cisco_nxos_ssh.py\", line 27, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 30, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 1582, in check_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 618, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"d:\\.......\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 543, in _read_channel_expect\r\n    raise EOFError(\"Channel stream closed by remote device.\")\r\nEOFError: Channel stream closed by remote device.\r\n\r\n['interface Ethernet1/1',\r\n 'no switchport',\r\n 'no description',\r\n 'no speed auto',\r\n      ... omit ...\r\n 'interface Ethernet1/60',\r\n 'no switchport',\r\n 'no description',\r\n 'no speed auto']\r\n\r\n\r\nnet = ConnectHandler(device_type=self.deviceType, ip=self.host, username=self.username,\r\n                     password=self.password, global_delay_factor=3, keepalive=10)\r\noutput = net.send_config_set(commands, cmd_verify=False)\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1758", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1758/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1758/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1758/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1758", "id": 625040141, "node_id": "MDU6SXNzdWU2MjUwNDAxNDE=", "number": 1758, "title": "send_config_set command not entering commands in configuration mode", "user": {"login": "SusethiraRam", "id": 65942447, "node_id": "MDQ6VXNlcjY1OTQyNDQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/65942447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SusethiraRam", "html_url": "https://github.com/SusethiraRam", "followers_url": "https://api.github.com/users/SusethiraRam/followers", "following_url": "https://api.github.com/users/SusethiraRam/following{/other_user}", "gists_url": "https://api.github.com/users/SusethiraRam/gists{/gist_id}", "starred_url": "https://api.github.com/users/SusethiraRam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SusethiraRam/subscriptions", "organizations_url": "https://api.github.com/users/SusethiraRam/orgs", "repos_url": "https://api.github.com/users/SusethiraRam/repos", "events_url": "https://api.github.com/users/SusethiraRam/events{/privacy}", "received_events_url": "https://api.github.com/users/SusethiraRam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-26T17:03:02Z", "updated_at": "2020-05-27T06:04:16Z", "closed_at": "2020-05-27T06:04:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm facing issue with send_config_set command in nxos device with variant NEXUS7K alone. send-config_set command is executing commands in privilege mode and it is not entering configuration mode. \r\n\r\nHere device is accessed via terminal server. \r\n\r\n**_Device output:_**\r\nswitch#\r\nswitch# hostname SCLLAB-NSO1-CORE01\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# username admin password ***** role network-admin\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# vrf context management\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# ip route 0.0.0.0/0 10.198.15.1\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# interface mgmt0\r\n          ^\r\n% Invalid command at '^' marker.\r\nswitch# vrf member management\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# ip address 10.198.15.19/24\r\n            ^\r\n% Invalid command at '^' marker.\r\nswitch#\r\n\r\n\r\n**_Below are the error snippet._** \r\n\r\nTraceback (most recent call last):\r\n  File \"provision_device.py\", line 413, in <module>\r\n    overall_result = main(inventory_file)\r\n  File \"provision_device.py\", line 378, in main\r\n    configure_nxos_device(console_server_ip, dev_oob_ip, console_port, dev_name, platform)\r\n  File \"provision_device.py\", line 93, in configure_nxos_device\r\n    response = net_connect.send_config_set(config_command, delay_factor=5, cmd_verify=False)\r\n  File \"/usr/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1770, in send_config_set\r\n    output += self.exit_config_mode()\r\n  File \"/usr/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1652, in exit_config_mode\r\n    raise ValueError(\"Failed to exit configuration mode\")\r\nValueError: Failed to exit configuration mode\r\n\r\n**_Python code_** where the issue is experiences is below, \r\n\r\n```python\r\ndef configure_nxos_device(console_server_ip, dev_oob_ip, console_port, dev_name, platform):\r\n    print(f\"Applying basic configuration on {dev_name}\\n\")\r\n    try:\r\n        net_connect = ConnectHandler(device_type=\"terminal_server\",\r\n                                     host=console_server_ip, username=CONSOLE_USER, password=CONSOLE_PASSWORD,\r\n                                     port='30' + str(int(console_port)), global_delay_factor=5)\r\n        config_command = ['hostname ' + dev_name,\r\n                          'username admin password ' + DEVICE_PASSWORD + ' role network-admin',\r\n                          'vrf context management', 'ip route 0.0.0.0/0 10.198.15.1', 'interface mgmt0',\r\n                          'vrf member management', 'ip address ' + dev_oob_ip + '/24']\r\n        net_connect.session_preparation()\r\n        net_connect.write_channel(\"\\r\\n\")\r\n        time.sleep(SLEEP)\r\n        net_connect.write_channel(\"\\r\\n\")\r\n        time.sleep(SLEEP)\r\n        response = net_connect.read_channel()\r\n        time.sleep(SLEEP)\r\n        # Login to router with admin credentials\r\n        if device_ssh(net_connect, console_server_ip, dev_name, dev_oob_ip) is True:\r\n            print(f\"Logged into Device {dev_oob_ip}\\n\")\r\n            net_connect.write_channel(\"\\r\\n\")\r\n            # Dynamically reset the class back to the proper Netmiko class\r\n            if prompt(\"#\", net_connect, response):\r\n                # Erase the device configurations\r\n                net_connect.write_channel(\"\\r\\n\")\r\n                net_connect.send_command('write erase', expect_string=r'y/n')\r\n                net_connect.send_command('y\\r', expect_string=r'#')\r\n                net_connect.send_command(\"reload\", expect_string=r'y/n')\r\n                net_connect.send_command_timing('y\\r')\r\n                response = net_connect.read_channel()\r\n                print(\"Rebooting the device\")\r\n                print(\"*\" * 60)\r\n                print(f\"\\n {response} \\n\")\r\n                print(\"*\" * 60)\r\n                if prompt(\"Abort Power On Auto Provisioning and continue with normal setup\", net_connect,\r\n                          response, max_loops=60):\r\n                    net_connect.send_command('yes', expect_string=r'Do you want to enforce secure password standard')\r\n                    net_connect.send_command('yes', expect_string=r'Enter the password')\r\n                    net_connect.send_command(DEVICE_PASSWORD, expect_string=r'Confirm the password', max_loops=2, delay_factor=5, cmd_verify=False)\r\n                    net_connect.send_command(DEVICE_PASSWORD,\r\n                                             expect_string=r'Do you want to enable admin vdc', max_loops=2,\r\n                                             delay_factor=5, cmd_verify=False)\r\n                    net_connect.send_command('n', expect_string=r'the basic configuration dialog', max_loops=2,\r\n                                             delay_factor=5, cmd_verify=False)\r\n                    net_connect.send_command_timing('no')\r\n                    response = net_connect.read_channel()\r\n                    if device_ssh(net_connect, console_server_ip, dev_name, dev_oob_ip) is True:\r\n                        net_connect.write_channel(\"\\r\")\r\n                        response = net_connect.read_channel()\r\n                        if prompt(\"#\", net_connect, response):\r\n                            logging.info(\"Connected after reboot\\n\")\r\n                            logging.info(\"Configuring device with default \"\r\n                                         \"configurations\\n\")\r\n                            net_connect.write_channel(\"\\r\")\r\n                            response = net_connect.send_config_set(config_command, delay_factor=5, cmd_verify=False)\r\n                            net_connect.send_command_timing('write memory')\r\n                            time.sleep(SLEEP)\r\n                            logging.info(\"#\" * 60)\r\n                            logging.info(\"\\nConfiguration applied:\\n\\n\" + str(response))\r\n                            logging.info(\"#\" * 60)\r\n                            net_connect.disconnect()\r\n                            if net_connect.is_alive() == False:\r\n                                logging.info(f\"Connection to {dev_oob_ip} has closed\\n\")\r\n                            else:\r\n                                logging.info(f\"Connection to {dev_oob_ip} has not closed\\n\")\r\n                        else:\r\n                            logging.error(\"Expected device password prompt not \"\r\n                                          \"received after reboot\")\r\n                            return None\r\n                    else:\r\n                        logging.error(f\"Device not connected after reboot - {response}\")\r\n                        return None\r\n                else:\r\n                    logging.error(f\"Expected Auto Provisioning prompt not received after reboot \"\r\n                                  f\"- {response}\")\r\n                    return None\r\n            else:\r\n                logging.error(f\"Could not connect - {response}\")\r\n                return None\r\n        else:\r\n            print(f\"Unable to login Device - {dev_name}\\n\")\r\n            return False\r\n        return True\r\n    except NetMikoAuthenticationException as net_err:\r\n        logging.error(f\"Issue observed while accessing the provided IP - {str(net_err)}\")\r\n        return None\r\n    except EOFError as eof_err:\r\n        logging.error(\"Hit EOFError while accessing %s(%s) via SSH from %s - %s\"\r\n                      % (hname, ip, socket.getfqdn(), str(eof_err)))\r\n        return \"NOT REACHABLE\"\r\n    except OSError as os_err:\r\n        logging.error(\"Hit OSError while accessing %s(%s) via SSH from %s - %s\"\r\n                      % (hname, ip, socket.getfqdn(), str(os_err)))\r\n        return \"NOT REACHABLE\"\r\n    except NetMikoTimeoutException as timeout_err:\r\n        logging.error(\"Device connection timeout while accessing %s(%s) via SSH from %s - %s\"\r\n                      % (hname, ip, socket.getfqdn(), str(timeout_err)))\r\n        return \"NOT REACHABLE\"\r\n    except ssh_exception.SSHException as ssh_err:\r\n        logging.error(\"Signature verification (ssh-rsa) failed for %s(%s) - %s\" % (hname, ip, str(ssh_err)))\r\n        return \"FAILED\"\r\n```\r\n\r\n**_The below is the netmiko logging details._** \r\n\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:send_command_timing final output:\r\nCisco Nexus Operating System (NX-OS) Software\r\nTAC support: http://www.cisco.com/tac\r\nCopyright (c) 2002-2016, Cisco Systems, Inc. All rights reserved.\r\nThe copyrights to certain works contained in this software are\r\nowned by other third parties and used and distributed under\r\nlicense. Certain components of this software are licensed under\r\nthe GNU General Public License (GPL) version 2.0 or the GNU\r\nLesser General Public License (LGPL) Version 2.1. A copy of each\r\nsuch license is available at\r\nhttp://www.opensource.org/licenses/gpl-2.0.php and\r\nhttp://www.opensource.org/licenses/lgpl-2.1.php\r\n\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'\\r'\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'\\r'\r\nDEBUG:netmiko:read_channel:\r\nswitch#\r\nINFO:root:Connected after reboot\r\n\r\nINFO:root:Configuring device with default configurations\r\n\r\nDEBUG:netmiko:write_channel: b'\\r'\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel:\r\nswitch#\r\nswitch#\r\nswitch#\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'hostname SCLLAB-NSO1-CORE01\\n'\r\nDEBUG:netmiko:write_channel: b'username admin password Wt1g1tHb role network-admin\\n'\r\nDEBUG:netmiko:write_channel: b'vrf context management\\n'\r\nDEBUG:netmiko:write_channel: b'ip route 0.0.0.0/0 10.198.15.1\\n'\r\nDEBUG:netmiko:write_channel: b'interface mgmt0\\n'\r\nDEBUG:netmiko:write_channel: b'vrf member management\\n'\r\nDEBUG:netmiko:write_channel: b'ip address 10.198.15.19/24\\n'\r\nDEBUG:netmiko:read_channel: hostname SCLLAB-NSO1-CORE01\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# username admin password Wt1g1tHb role network-admin\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# vrf context management\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# ip route 0.0.0.0/0 10.198.15.1\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# interface mgmt0\r\n          ^\r\n% Invalid command at '^' marker.\r\nswitch# vrf member management\r\n         ^\r\n% Invalid command at '^' marker.\r\nswitch# ip address 10.198.15.19/24\r\n            ^\r\n% Invalid command at '^' marker.\r\nswitch#\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel:\r\nswitch#\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:Pattern is:\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\n\r\nDEBUG:netmiko:Pattern found:\r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nswitch# tmiko:read_channel:\r\nswitch#\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\n\r\nPlease do needful. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1757", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1757/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1757/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1757/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1757", "id": 624654768, "node_id": "MDU6SXNzdWU2MjQ2NTQ3Njg=", "number": 1757, "title": "import napalm error (No module named 'fcntl' / No module named 'clitable')", "user": {"login": "YMont", "id": 58437649, "node_id": "MDQ6VXNlcjU4NDM3NjQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/58437649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YMont", "html_url": "https://github.com/YMont", "followers_url": "https://api.github.com/users/YMont/followers", "following_url": "https://api.github.com/users/YMont/following{/other_user}", "gists_url": "https://api.github.com/users/YMont/gists{/gist_id}", "starred_url": "https://api.github.com/users/YMont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YMont/subscriptions", "organizations_url": "https://api.github.com/users/YMont/orgs", "repos_url": "https://api.github.com/users/YMont/repos", "events_url": "https://api.github.com/users/YMont/events{/privacy}", "received_events_url": "https://api.github.com/users/YMont/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-26T07:17:51Z", "updated_at": "2020-05-26T20:05:22Z", "closed_at": "2020-05-26T20:05:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi , All\r\n### import napalm\r\nPython 3.8.1 (tags/v3.8.1:1b293b6, Dec 18 2019, 22:39:24) [MSC v.1916 32 bit (Intel)] on win32\r\nType \"help\", \"copyright\", \"credits\" or \"license()\" for more information.\r\n\r\n>>> import napalm\r\n\r\n### Error\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\ntc_templates\\parse.py\", line 5, in <module>\r\n    from textfsm import clitable\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\textfsm\\clitable.py\", line 41, in <module>\r\n    from textfsm import texttable\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\textfsm\\texttable.py\", line 42, in <module>\r\n    from textfsm import terminal\r\n  File \"C:\\Users\\\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\textfsm\\terminal.py\", line 25, in <module>\r\n    import fcntl\r\nModuleNotFoundError: No module named 'fcntl'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<pyshell#0>\", line 1, in <module>\r\n    import napalm\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\napalm\\__init__.py\", line 12, in <module>\r\n    import napalm.junos\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\napalm\\junos\\__init__.py\", line 18, in <module>\r\n    from napalm.junos.junos import JunOSDriver  # noqa\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\napalm\\junos\\junos.py\", line 30, in <module>\r\n    from jnpr.junos import Device\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\jnpr\\junos\\__init__.py\", line 3, in <module>\r\n    from jnpr.junos.factory.to_json import PyEzJSONEncoder\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\jnpr\\junos\\factory\\__init__.py\", line 4, in <module>\r\n    from jnpr.junos.factory.factory_loader import FactoryLoader\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\jnpr\\junos\\factory\\factory_loader.py\", line 14, in <module>\r\n    from jnpr.junos.factory.factory_cls import *\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\jnpr\\junos\\factory\\factory_cls.py\", line 7, in <module>\r\n    from jnpr.junos.factory.cmdtable import CMDTable\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\jnpr\\junos\\factory\\cmdtable.py\", line 18, in <module>\r\n    from ntc_templates import parse as ntc_parse\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\ntc_templates\\parse.py\", line 7, in <module>\r\n    import clitable\r\nModuleNotFoundError: No module named 'clitable'\r\n\r\n### pip list (pip version 20.1.1)\r\nnapalm                3.0.1\r\nnetmiko               3.1.1\r\n\r\nVery thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1755", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1755/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1755/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1755/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1755", "id": 624527250, "node_id": "MDU6SXNzdWU2MjQ1MjcyNTA=", "number": 1755, "title": "Nokia Sros MDCLI only support on Python 3.x (not 2.7)", "user": {"login": "WhistMo", "id": 13138642, "node_id": "MDQ6VXNlcjEzMTM4NjQy", "avatar_url": "https://avatars0.githubusercontent.com/u/13138642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WhistMo", "html_url": "https://github.com/WhistMo", "followers_url": "https://api.github.com/users/WhistMo/followers", "following_url": "https://api.github.com/users/WhistMo/following{/other_user}", "gists_url": "https://api.github.com/users/WhistMo/gists{/gist_id}", "starred_url": "https://api.github.com/users/WhistMo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WhistMo/subscriptions", "organizations_url": "https://api.github.com/users/WhistMo/orgs", "repos_url": "https://api.github.com/users/WhistMo/repos", "events_url": "https://api.github.com/users/WhistMo/events{/privacy}", "received_events_url": "https://api.github.com/users/WhistMo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-26T00:06:54Z", "updated_at": "2020-05-26T02:04:58Z", "closed_at": "2020-05-26T02:04:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Nokia Sros MDCLI only support on Python 3.x (not 2.7)\r\nIn python 2.7, it is not supported. For example, fail to enter configuration mode (as the check pattern is wrong).\r\n\r\nCould you help to support MDCLI on Python 2.7 as well?\r\n\r\nMany thanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1754", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1754/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1754/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1754/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1754", "id": 624527224, "node_id": "MDU6SXNzdWU2MjQ1MjcyMjQ=", "number": 1754, "title": "jump remote server doesnt work with netmiko", "user": {"login": "josht8716", "id": 65928575, "node_id": "MDQ6VXNlcjY1OTI4NTc1", "avatar_url": "https://avatars0.githubusercontent.com/u/65928575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josht8716", "html_url": "https://github.com/josht8716", "followers_url": "https://api.github.com/users/josht8716/followers", "following_url": "https://api.github.com/users/josht8716/following{/other_user}", "gists_url": "https://api.github.com/users/josht8716/gists{/gist_id}", "starred_url": "https://api.github.com/users/josht8716/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josht8716/subscriptions", "organizations_url": "https://api.github.com/users/josht8716/orgs", "repos_url": "https://api.github.com/users/josht8716/repos", "events_url": "https://api.github.com/users/josht8716/events{/privacy}", "received_events_url": "https://api.github.com/users/josht8716/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-26T00:06:44Z", "updated_at": "2020-05-26T00:45:55Z", "closed_at": "2020-05-26T00:45:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi im new in netmiko, im trying to connect to jum server, which is connected to end devices in the office, its a redhat, this is the configuration in python.\r\n\r\nimport netmiko\r\nfrom netmiko import ConnectHandler        \r\n\r\ncisco_ios = {\r\n    'device_type': 'cisco_ios',\r\n    'ip': 'A.B.C.D',\r\n    'username': 'user',\r\n    'password': 'XXXXX',\r\n    'session_log': 'output_server2.txt',\r\n    'ssh_config_file': '~/.ssh/config',\r\n    'global_delay_factor': 4\r\n}\r\nnet_connect = ConnectHandler(**cisco_ios)\r\noutput = net_connect.send_command('show ip interface brief')\r\nprint (output)\r\nnet_connect.disconnect()\r\n\r\n-Previous work: \r\nConfirm that the config works with a local server \r\nConfirm  ssh jump host works with the new remote server (E.F.G.H)\r\n\r\n\r\nhost jumphost                   \r\n  IdentityFile ~/.ssh/id_rsa    \r\n  IdentitiesOnly yes            \r\n  user user\r\n  hostname E.F.G.H\r\n\r\nhost * !jumphost\r\n  ProxyCommand ssh jumphost nc %h %p\r\n\r\n\r\n-error message:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 899, in establish_connection\r\n    self.remote_conn_pre.connect(**ssh_connect_params)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/client.py\", line 368, in connect\r\n    raise NoValidConnectionsError(errors)\r\nparamiko.ssh_exception.NoValidConnectionsError: [Errno None] Unable to connect to port 22 on 10.15.1.1\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"prueba_proxy_cisco_real.py\", line 13, in <module>\r\n    net_connect = ConnectHandler(**cisco_ios)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/ssh_dispatcher.py\", line 266, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 332, in _open\r\n    self.establish_connection()\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 905, in establish_connection\r\n    raise NetmikoTimeoutException(msg)\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Connection to device timed-out: cisco_ios A.B.C.D:22 \r\n\r\n-Versions\r\nPython 3.8.2 (default, Apr 27 2020, 15:53:34) \r\n[GCC 9.3.0] on linux\r\n>>> paramiko.__version__\r\n'2.7.1'\r\n>>> netmiko.__version__\r\n'3.1.1'\r\n\r\nthanks in advance", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1751", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1751/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1751/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1751/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1751", "id": 623676255, "node_id": "MDU6SXNzdWU2MjM2NzYyNTU=", "number": 1751, "title": "Aruba 2530 exception Timed-out reading channel, data not available on send_config_set()", "user": {"login": "GameMaster47", "id": 46648010, "node_id": "MDQ6VXNlcjQ2NjQ4MDEw", "avatar_url": "https://avatars3.githubusercontent.com/u/46648010?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GameMaster47", "html_url": "https://github.com/GameMaster47", "followers_url": "https://api.github.com/users/GameMaster47/followers", "following_url": "https://api.github.com/users/GameMaster47/following{/other_user}", "gists_url": "https://api.github.com/users/GameMaster47/gists{/gist_id}", "starred_url": "https://api.github.com/users/GameMaster47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GameMaster47/subscriptions", "organizations_url": "https://api.github.com/users/GameMaster47/orgs", "repos_url": "https://api.github.com/users/GameMaster47/repos", "events_url": "https://api.github.com/users/GameMaster47/events{/privacy}", "received_events_url": "https://api.github.com/users/GameMaster47/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-23T14:52:25Z", "updated_at": "2020-06-04T08:56:31Z", "closed_at": "2020-06-04T08:56:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Greetings,\r\n\r\nI'm running a script to configure a vlan on a switch based on a list of MACs, and for one of the switches I've been seeing a iregular behavior. Sometimes the script runs without raising exceptions and the configuration is applied, but sometimes it raises an error during the send_config_set().\r\nI have a lab with a HP procurve 2620 and a Aruba 2530, and i'm using 'hp_procurve' as the device type for both. The exception only occurs on the Aruba switch.\r\n\r\nI've tried changing the 'global_delay_factor' to 2 and 4, but have the same behavior.\r\n\r\nPlease find attached the exception trace and the session log of the device.\r\n\r\nThis is the code I'm executing:\r\n```\r\n       sw = {\r\n            'ip':switch['IPAddress'] ,\r\n            'username': USERNAME,\r\n            'password': PASS,\r\n            'device_type': switch['device_type'],\r\n            'global_delay_factor':4,\r\n            'session_log':'session.log'\r\n        }\r\n        conn = ConnectHandler(**sw)\r\n        lldp = conn.send_command_timing(\"show lldp info remote\")\r\n        logger.info(lldp)\r\n        showMac = conn.send_command_timing(\"show mac-address\")\r\n        logger.info(showMac)\r\n        showTrunk = conn.send_command_timing(\"show trunks\")\r\n        logger.info(showTrunk)\r\n        trunkDict = dict(re.findall('(\\d+).*(Trk\\d+)',showTrunk))\r\n        for mac in macs:\r\n            mac_lldp = mac.lower().replace(\"-\", \" \")\r\n            mac_cam = f'{mac.lower().replace(\"-\", \"\")[0:6]}-{mac.lower().replace(\"-\", \"\")[6:12]}'\r\n            if mac_lldp in lldp:\r\n                match = re.findall(f'(\\d+)\\s+\\|\\s+{mac_lldp}', lldp)\r\n                print(f'this MAC was scrapped from LLDP : {mac} | interface(s) {match}')\r\n                [ports.add(trunkDict[port]) if port in trunkDict else ports.add(port) for port in match]\r\n            elif mac_cam in showMac:\r\n                match = re.search(f'{mac_cam}\\s+(\\w*\\d+)?', showMac)\r\n                print(f'this MAC was scrapped from CAM: {mac} | interface(s) {match.group(1)}')\r\n                if match.group(1) in trunkDict:\r\n                    ports.add(trunkDict[match.group(1)])\r\n                else:\r\n                    ports.add(match.group(1))\r\n            else:\r\n                logger.error(\"MAC Not Found on this Device. It might be temporarily down. Please refer to the logs to investigate further\")\r\n        if ports != False:\r\n            print(f\"Configuring vlan {H20_VLANID} on the following interfaces {','.join(ports)}\")\r\n       conn.send_config_set([f\"vlan {H20_VLANID}\", f\"name {H20_VLANNAME}\", f'tagged ethernet {\",\".join(ports)}'])`\r\n\r\n```\r\n[session.log](https://github.com/ktbyers/netmiko/files/4671965/session.log)\r\n[exception.txt](https://github.com/ktbyers/netmiko/files/4671978/exception.txt)\r\n\r\nKind regards,", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1745", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1745/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1745/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1745/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1745", "id": 622836731, "node_id": "MDU6SXNzdWU2MjI4MzY3MzE=", "number": 1745, "title": "netmiko/Cisco IOS Parsing error with textfsm:  textfsm.parser.TextFSMError: State Error raised.", "user": {"login": "rapowell", "id": 58449401, "node_id": "MDQ6VXNlcjU4NDQ5NDAx", "avatar_url": "https://avatars3.githubusercontent.com/u/58449401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rapowell", "html_url": "https://github.com/rapowell", "followers_url": "https://api.github.com/users/rapowell/followers", "following_url": "https://api.github.com/users/rapowell/following{/other_user}", "gists_url": "https://api.github.com/users/rapowell/gists{/gist_id}", "starred_url": "https://api.github.com/users/rapowell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rapowell/subscriptions", "organizations_url": "https://api.github.com/users/rapowell/orgs", "repos_url": "https://api.github.com/users/rapowell/repos", "events_url": "https://api.github.com/users/rapowell/events{/privacy}", "received_events_url": "https://api.github.com/users/rapowell/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-21T22:50:04Z", "updated_at": "2020-05-21T23:01:03Z", "closed_at": "2020-05-21T23:01:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n    I opened up an issue with the ntc-templates group (https://github.com/networktocode/ntc-templates/issues/718) and after some discussion, we believe the error I'm coming across is related to how Netmiko is pulling in the ntc_templates.  Would you be able to shed some light on this and how it might be resolved?  Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1742", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1742/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1742/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1742/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1742", "id": 622648779, "node_id": "MDU6SXNzdWU2MjI2NDg3Nzk=", "number": 1742, "title": "Is it possible to choose a KEX algorithm for a ssh connection?", "user": {"login": "IDQDD", "id": 17175628, "node_id": "MDQ6VXNlcjE3MTc1NjI4", "avatar_url": "https://avatars3.githubusercontent.com/u/17175628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IDQDD", "html_url": "https://github.com/IDQDD", "followers_url": "https://api.github.com/users/IDQDD/followers", "following_url": "https://api.github.com/users/IDQDD/following{/other_user}", "gists_url": "https://api.github.com/users/IDQDD/gists{/gist_id}", "starred_url": "https://api.github.com/users/IDQDD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IDQDD/subscriptions", "organizations_url": "https://api.github.com/users/IDQDD/orgs", "repos_url": "https://api.github.com/users/IDQDD/repos", "events_url": "https://api.github.com/users/IDQDD/events{/privacy}", "received_events_url": "https://api.github.com/users/IDQDD/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-21T17:11:19Z", "updated_at": "2020-06-14T19:08:38Z", "closed_at": "2020-06-14T19:08:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Kirk\r\nPlease can you help me with my task?\r\nI have a banch of _Huawei s5720_ switches \r\nthe default _KeyExchange_ algorithm **diffie-hellman-group-exchange-sha1** takes almost 20 secs to compute a shared key on a switch side\r\n\r\nI have found a workaround - to use another kex: **diffie-hellman-group1-sha1**\r\nwith that kex a connection comes up instantly\r\n\r\nNow I want to make a script to fetch some data from many switches. \r\nIt would be great if I could use that kex in my script\r\n\r\nIs there a way to transfer some kex options to paramiko from netmiko or maybe from napalm?\r\n\r\nI've tried to pass  _ssh_config_file_ as an _optional_args_ but with no success \r\n\r\nthis is what I was trying to do\r\n\r\nmy code:\r\n```\r\nimport napalm\r\nimport logging\r\nlogging.basicConfig(filename='test.log', level=logging.DEBUG)\r\nlogger = logging.getLogger(\"netmiko\")\r\n\r\ndef play_napalm(platform):\r\n    driver = napalm.get_network_driver(platform)\r\n    with driver(host, user, pasw, optional_args={'ssh_config_file': 'ssh_config'}) as device:\r\n        device.open()\r\n```\r\nssh_config:\r\n```\r\nHost 192.168.98.1\r\n    KexAlgorithms diffie-hellman-group1-sha1\r\n    Ciphers +aes128-cbc\r\n```\r\nDebug:\r\n```\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.7.1\r\n  3 DEBUG:paramiko.transport:Remote version/idstring: SSH-2.0--\r\n  4 INFO:paramiko.transport:Connected (version 2.0, client -)\r\n  5 DEBUG:paramiko.transport:kex algos:['diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-dss', 'ssh-rsa'] client encrypt:['aes256-ctr', 'a    es128-ctr', 'aes256-cbc', 'aes128-cbc', '3des-cbc'] server encrypt:['aes256-ctr', 'aes128-ctr', 'aes256-cbc', 'aes128-cbc', '3des-cbc'] client mac:['hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha1', 'hm    ac-sha1-96', 'hmac-md5', 'hmac-md5-96'] server mac:['hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha1', 'hmac-sha1-96', 'hmac-md5', 'hmac-md5-96'] client compress:['none', 'zlib'] server compress:['none'    , 'zlib'] client lang:[''] server lang:[''] kex follows?False\r\n  6 DEBUG:paramiko.transport:Kex agreed: diffie-hellman-group-exchange-sha1\r\n```\r\n\r\nAnother option is to use telnet but the current huawei_vrp driver (0.1.5) uses old netmiko that doesn't support telnet for Huawei\r\n\r\nI was trying to dig the paramiko options myself and I have found that option\r\n_disabled_algorithms={\"kex\": [\"diffie-hellman-group-exchange-sha1\"]}_ that should be passed to the _paramiko.transport.Transport_ Object.\r\n\r\nBut I have no idea how to pass it from within netmiko\r\nAny help would be appreciated\r\n\r\nWith regards,\r\nNikolay Ryzhkov", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1740", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1740/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1740/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1740/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1740", "id": 621957348, "node_id": "MDU6SXNzdWU2MjE5NTczNDg=", "number": 1740, "title": "SR-OS command echo and configuration commands adds quotes around interfaces", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-20T17:36:28Z", "updated_at": "2020-05-21T21:28:15Z", "closed_at": "2020-05-21T16:59:12Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Adding @hellt", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1738", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1738/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1738/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1738/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1738", "id": 621199331, "node_id": "MDU6SXNzdWU2MjExOTkzMzE=", "number": 1738, "title": "Nokia private config mode and prompt pattern - error when using private mode", "user": {"login": "Menotomy", "id": 65615250, "node_id": "MDQ6VXNlcjY1NjE1MjUw", "avatar_url": "https://avatars0.githubusercontent.com/u/65615250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Menotomy", "html_url": "https://github.com/Menotomy", "followers_url": "https://api.github.com/users/Menotomy/followers", "following_url": "https://api.github.com/users/Menotomy/following{/other_user}", "gists_url": "https://api.github.com/users/Menotomy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Menotomy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Menotomy/subscriptions", "organizations_url": "https://api.github.com/users/Menotomy/orgs", "repos_url": "https://api.github.com/users/Menotomy/repos", "events_url": "https://api.github.com/users/Menotomy/events{/privacy}", "received_events_url": "https://api.github.com/users/Menotomy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-19T18:37:58Z", "updated_at": "2020-05-21T20:02:29Z", "closed_at": "2020-05-21T16:58:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently the config_mode() method for Nokia uses \"edit-config exclusive\" then searches for the pattern \"(ex) [\" as that is the prompt when entering that mode (this is when using MD-CLI).\r\n\r\nI'm trying to use edit-config private so I'm not stepping on any other edits. When using the \"edit-config private\" mode in MD-CLI, the prompt is \"(pr) [\". However, even when updating the pattern to use pr, it fails to enter config mode. \r\n\r\nExample prompt:\r\n>[]\r\n> A:user@Nokia# edit-config private\r\n> INFO: CLI #2070: Entering private configuration mode\r\n> INFO: CLI #2061: Uncommitted changes are discarded on configuration mode exit\r\n> \r\n> (pr)[]\r\n> A:user@Nokia#\r\n\r\nThe line that calls it looks like this:\r\n`\r\nconnection.config_mode(config_command='edit-config private', pattern='\\(pr\\)\\[')\r\n`\r\n\r\n_Am I formatting the pattern properly?_ \r\n\r\nThe API doc is a little confusing because it shows the format as `'\\\\(pr\\\\)\\\\['`, which didn't work either. Also in the source code it uses a literal string `r'\\(pr\\)\\['`.\r\n\r\nHere is the error:\r\n\r\n> /usr/local/lib/python3.7/site-packages/netmiko/base_connection.py in config_mode(self=<netmiko.nokia.nokia_sros_ssh.NokiaSrosSSH object>, config_command='edit-config private', pattern=r'\\(pr\\)\\[')\r\n> --\r\n> 1623\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0output\u00a0+=\u00a0self.read_until_pattern(pattern=pattern)\r\n> 1624\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0not\u00a0self.check_config_mode():\r\n> =>\u00a01625\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raise\u00a0ValueError(\"Failed\u00a0to\u00a0enter\u00a0configuration\u00a0mode.\")\r\n> 1626\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0output\r\n> 1627\r\n> builtin ValueError\u00a0= <class 'ValueError'>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1737", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1737/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1737/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1737/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1737", "id": 621175373, "node_id": "MDU6SXNzdWU2MjExNzUzNzM=", "number": 1737, "title": "Dell-OS10 does not properly echo commands sent down SSH channel", "user": {"login": "rainap-ui", "id": 59861448, "node_id": "MDQ6VXNlcjU5ODYxNDQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/59861448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rainap-ui", "html_url": "https://github.com/rainap-ui", "followers_url": "https://api.github.com/users/rainap-ui/followers", "following_url": "https://api.github.com/users/rainap-ui/following{/other_user}", "gists_url": "https://api.github.com/users/rainap-ui/gists{/gist_id}", "starred_url": "https://api.github.com/users/rainap-ui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rainap-ui/subscriptions", "organizations_url": "https://api.github.com/users/rainap-ui/orgs", "repos_url": "https://api.github.com/users/rainap-ui/repos", "events_url": "https://api.github.com/users/rainap-ui/events{/privacy}", "received_events_url": "https://api.github.com/users/rainap-ui/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-19T17:57:55Z", "updated_at": "2020-05-22T13:25:40Z", "closed_at": "2020-05-22T13:25:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi \r\nI'm a newbie at python/netmiko trying to configure a logging server on dell OS10 as below\r\nfrom netmiko import ConnectHandler\r\n\r\ndevice = {\r\n    \"host\": \"100.64.x.x\",\r\n    \"username\": \"praina\",\r\n    \"password\": \"S*****\",\r\n    \"device_type\": \"dell_os10\",\r\n}\r\n\r\nnet_connect = ConnectHandler(**device) \r\nconfig_commands = [\"logging server 100.64.x.x severity log-info\"]\r\noutput = net_connect.send_config_set(config_commands)\r\nprint(output)\r\n\r\n\r\nError :\r\n\r\nC:\\Users\\praina\\Desktop>python\\Python38-32\\python.exe script.py\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 541, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"script.py\", line 24, in <module>\r\n    output = net_connect.send_config_set(config_commands)\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1704, in send_config_set\r\n    output = self.config_mode(*cfg_mode_args)\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1598, in config_mode\r\n    output += self.read_until_pattern(pattern=re.escape(config_command.strip()))\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 618, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Users\\praina\\Desktop\\python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 551, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nC:\\Users\\praina\\Desktop>\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1732", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1732/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1732/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1732/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1732", "id": 620251771, "node_id": "MDU6SXNzdWU2MjAyNTE3NzE=", "number": 1732, "title": "Timed-out reading channel, data not available Error", "user": {"login": "jayspalma", "id": 58615437, "node_id": "MDQ6VXNlcjU4NjE1NDM3", "avatar_url": "https://avatars0.githubusercontent.com/u/58615437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayspalma", "html_url": "https://github.com/jayspalma", "followers_url": "https://api.github.com/users/jayspalma/followers", "following_url": "https://api.github.com/users/jayspalma/following{/other_user}", "gists_url": "https://api.github.com/users/jayspalma/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayspalma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayspalma/subscriptions", "organizations_url": "https://api.github.com/users/jayspalma/orgs", "repos_url": "https://api.github.com/users/jayspalma/repos", "events_url": "https://api.github.com/users/jayspalma/events{/privacy}", "received_events_url": "https://api.github.com/users/jayspalma/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-18T14:22:57Z", "updated_at": "2020-05-18T14:58:01Z", "closed_at": "2020-05-18T14:58:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am experiencing this error,  netmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nHere is my code:\r\nfrom netmiko import ConnectHandler                                                                                                         \r\n\r\ncisco = { \r\n'device_type': 'cisco_ios', \r\n'host': '192.168.1.1', \r\n'username': 'cisco', \r\n'password': '12345678',\r\n'secret': 'cisco' \r\n}\r\n\r\nnet_connect = ConnectHandler(**cisco)\r\nconfigs = ['int loopback 0']\r\noutput = net_connect.send_command(\"show ip int brief\")\r\nprint(output)\r\noutput = net_connect.send_config_set(configs)\r\nprint(output)\r\n\r\n\r\nHere is the output:\r\n\r\nInterface                  IP-Address      OK? Method Status                Protocol\r\nGigabitEthernet0/0         192.168.1.1     YES NVRAM  up                    up\r\nGigabitEthernet0/1         unassigned      YES NVRAM  administratively down down\r\nGigabitEthernet0/2         unassigned      YES NVRAM  administratively down down\r\nGigabitEthernet0/3         unassigned      YES NVRAM  administratively down down\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"netmiko_base.py\", line 15, in <module>\r\n    output = net_connect.send_config_set(configs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 1728, in send_config_set\r\n    output += self.config_mode(*cfg_mode_args)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 1618, in config_mode\r\n    if not self.check_config_mode():\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/cisco/cisco_ios.py\", line 29, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/cisco_base_connection.py\", line 30, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 1605, in check_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/netmiko/base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nAs you can see, the ssh connection to the device is successful because the result of \"show ip int brief\" command was returned.\r\n\r\nThe problem happens in the send_config_set command. I also tried to change the cmd_verify=False, but still the same result?..Can you please help me to sort this out..thanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1726", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1726/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1726/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1726/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1726", "id": 616854208, "node_id": "MDU6SXNzdWU2MTY4NTQyMDg=", "number": 1726, "title": "Getting exception error while executing simple netmiko script", "user": {"login": "vvishnu04", "id": 65247958, "node_id": "MDQ6VXNlcjY1MjQ3OTU4", "avatar_url": "https://avatars3.githubusercontent.com/u/65247958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vvishnu04", "html_url": "https://github.com/vvishnu04", "followers_url": "https://api.github.com/users/vvishnu04/followers", "following_url": "https://api.github.com/users/vvishnu04/following{/other_user}", "gists_url": "https://api.github.com/users/vvishnu04/gists{/gist_id}", "starred_url": "https://api.github.com/users/vvishnu04/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vvishnu04/subscriptions", "organizations_url": "https://api.github.com/users/vvishnu04/orgs", "repos_url": "https://api.github.com/users/vvishnu04/repos", "events_url": "https://api.github.com/users/vvishnu04/events{/privacy}", "received_events_url": "https://api.github.com/users/vvishnu04/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-12T18:06:33Z", "updated_at": "2020-05-14T15:05:55Z", "closed_at": "2020-05-14T15:05:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am in the process of learning netmiko. When trying to run simple script from my jumpserver was getting the below exceptions. I was able to run only 'send_command' properly without any exceptions. However when i run 'send_config_from_file' & 'send_config_set', i am getting the exceptions. Not sure what is the issue. \r\n\r\nfrom netmiko import ConnectHandler\r\n\r\njuniper_device = {\r\n        'device_type': 'juniper',\r\n        'ip': '192.168.1.10',\r\n        'username': 'test',\r\n        'password': 'test',\r\n        'port': 22,\r\n        'verbose':True\r\n        }\r\nconnection = ConnectHandler(**juniper_device)\r\ncommands = ['show route 4.2.2.2', 'ping 4.2.2.2 rapid']\r\noutput = connection.send_config_set(commands)\r\nprint(output)\r\n\r\nconnection.disconnect()\r\n\r\nSSH connection established to 192.168.1.10:22\r\nInteractive SSH session established\r\nRunning commands from file...\r\nTraceback (most recent call last):\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"vish.py\", line 13, in <module>\r\n    output = connection.send_config_from_file('junipercmds.txt')\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 1665, in send_config_from_file\r\n    return self.send_config_set(cfg_file, **kwargs)\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 1750, in send_config_set\r\n    new_output = self.read_until_pattern(pattern=re.escape(cmd.strip()))\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/home/xxxx/python36/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 561, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1723", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1723/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1723/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1723/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1723", "id": 615370030, "node_id": "MDU6SXNzdWU2MTUzNzAwMzA=", "number": 1723, "title": "Juniper disable_paging fails due to cmd_verify", "user": {"login": "lrmrxhp", "id": 65114211, "node_id": "MDQ6VXNlcjY1MTE0MjEx", "avatar_url": "https://avatars1.githubusercontent.com/u/65114211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lrmrxhp", "html_url": "https://github.com/lrmrxhp", "followers_url": "https://api.github.com/users/lrmrxhp/followers", "following_url": "https://api.github.com/users/lrmrxhp/following{/other_user}", "gists_url": "https://api.github.com/users/lrmrxhp/gists{/gist_id}", "starred_url": "https://api.github.com/users/lrmrxhp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lrmrxhp/subscriptions", "organizations_url": "https://api.github.com/users/lrmrxhp/orgs", "repos_url": "https://api.github.com/users/lrmrxhp/repos", "events_url": "https://api.github.com/users/lrmrxhp/events{/privacy}", "received_events_url": "https://api.github.com/users/lrmrxhp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-10T11:19:18Z", "updated_at": "2020-05-20T11:57:34Z", "closed_at": "2020-05-20T11:57:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am new to Netmiko and have been trying to create a script to login into multiple devices in production and execute some show commands from a file using send_command(). I am iterating over the show comamnds in the file and saving the output to a text file using a 'for' loop. I don't have any issues when running the script for Cisco IOS-XR devices but I get the NetmikoTimeoutException when trying to run the script on some Juniper devices (basically it works for some Juniper devices and for some it does not). All the Juniper devices in my network are the same chassis but the ones for which the script is not working have much more config than the others.  I suspect it is the large output that is causing this exception but I am not sure (just getting the running config from these devices takes 3-5 minutes). Please find the output from this exception below. \r\n\r\nThank you in advance.\r\n\r\n\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\threading.py\", line 932, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"D:\\Python\\script\\presnaps_juniper.py\", line 76, in ssh_connection\r\n    session = ConnectHandler(**devices)\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 259, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 333, in _open\r\n    self._try_session_preparation()\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 756, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\juniper\\juniper.py\", line 27, in session_preparation\r\n    self.disable_paging(command=\"set cli screen-length 0\")\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1031, in disable_paging\r\n    output = self.read_until_pattern(pattern=re.escape(command.strip()))\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1722", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1722/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1722/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1722/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1722", "id": 614899784, "node_id": "MDU6SXNzdWU2MTQ4OTk3ODQ=", "number": 1722, "title": "Send_config_set with except_string issue in Hpe comware switch", "user": {"login": "vkazimov", "id": 31644960, "node_id": "MDQ6VXNlcjMxNjQ0OTYw", "avatar_url": "https://avatars3.githubusercontent.com/u/31644960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vkazimov", "html_url": "https://github.com/vkazimov", "followers_url": "https://api.github.com/users/vkazimov/followers", "following_url": "https://api.github.com/users/vkazimov/following{/other_user}", "gists_url": "https://api.github.com/users/vkazimov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vkazimov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vkazimov/subscriptions", "organizations_url": "https://api.github.com/users/vkazimov/orgs", "repos_url": "https://api.github.com/users/vkazimov/repos", "events_url": "https://api.github.com/users/vkazimov/events{/privacy}", "received_events_url": "https://api.github.com/users/vkazimov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-08T18:12:46Z", "updated_at": "2020-05-11T15:48:42Z", "closed_at": "2020-05-11T15:48:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\nHow can use except_string with send_config_set command?\r\ncommand = [\"system-view\", \"interface gigabitethernet1/0/1\", \"default\", \"Y\"]\r\noutput = net_connect.send_config_set(command)\r\nprint(output)\r\n\r\nFor example (in Hpe comware switch)\r\n` <HPE_5130SW>system-view\r\nSystem View: return to User View with Ctrl+Z.\r\n<HPE_5130SW]interface gigabitethernet1/0/6\r\n[HPE_5130SW-GigabitEthernet1/0/1]default\r\n\r\nThis command will restore the default settings. Continue? [Y/N]:  Y`\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1721", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1721/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1721/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1721/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1721", "id": 613822104, "node_id": "MDU6SXNzdWU2MTM4MjIxMDQ=", "number": 1721, "title": "[share]copy running-config tftp:/xxx.xxx.xxx.xxx/filename", "user": {"login": "YMont", "id": 58437649, "node_id": "MDQ6VXNlcjU4NDM3NjQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/58437649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YMont", "html_url": "https://github.com/YMont", "followers_url": "https://api.github.com/users/YMont/followers", "following_url": "https://api.github.com/users/YMont/following{/other_user}", "gists_url": "https://api.github.com/users/YMont/gists{/gist_id}", "starred_url": "https://api.github.com/users/YMont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YMont/subscriptions", "organizations_url": "https://api.github.com/users/YMont/orgs", "repos_url": "https://api.github.com/users/YMont/repos", "events_url": "https://api.github.com/users/YMont/events{/privacy}", "received_events_url": "https://api.github.com/users/YMont/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-07T06:59:21Z", "updated_at": "2020-05-08T00:50:19Z", "closed_at": "2020-05-08T00:50:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Kirk,\r\nI just want to say thank for you and netmiko'hub and share my mistake.\r\n\r\nFirst, I want to use netmiko do \"copy running-config to tftp from router\"\r\nBut, cmd =\"copy running-config tftp:/xxx.xxx.xxx.xxx/filename\" was wrong\r\nI read your article and I realize \"expect_string\" method\r\n(Here : https://pynet.twb-tech.com/blog/automation/netmiko-what-is-done.html)\r\n(Note: If command so long must be divide many small command)\r\n\r\nNow, share my solution.\r\n===========================================================\r\n#!/usr/bin/env python\r\nimport datetime\r\nimport os\r\nimport re\r\nimport netmiko\r\nfrom netmiko import ConnectHandler\r\n\r\nprint(\"Please wait seconds. Connecting ... \\n\")\r\n\r\nmy_device = {\r\n        \"host\": \"xxx.xxx.xxx.xxx\", \r\n        \"username\": \"xxx\",\r\n        \"password\": \"xxx\",\r\n        \"device_type\": \"cisco_ios\",\r\n    }\r\nstarttime = datetime.datetime.now()\r\nnet_connect = ConnectHandler(**my_device)\r\nnet_connect.enable()\r\n\r\nprint(net_connect.find_prompt())\r\ncmd =\"copy running-config tftp:\"\r\nresult = net_connect.send_command(\r\n    cmd,\r\n    expect_string=r\"Address or name of remote host\",\r\n    )\r\nresult+=net_connect.send_command(\"xxx.xxx.xxx.xxx\",expect_string=r\"Destination filename\")\r\nresult+=net_connect.send_command(\"filename\",expect_string=r\"#\")\r\n\r\nprint(result)\r\nendtime = datetime.datetime.now()\r\nprint(\"total time: {}\".format(endtime - starttime))\r\n\r\nnet_connect.disconnect()\r\n===========================================================\r\nResult:\r\nR1#\r\nAddress or name of remote host []? Destination filename [R1_config]? !!\r\n2882 bytes copied in 0.292 secs (9870 bytes/sec)\r\n\r\ntotal time: 0:00:07.257475", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1717", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1717/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1717/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1717/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1717", "id": 611689621, "node_id": "MDU6SXNzdWU2MTE2ODk2MjE=", "number": 1717, "title": "Nokia SR-OS fails with socket timeout", "user": {"login": "suyog-sdn", "id": 60063738, "node_id": "MDQ6VXNlcjYwMDYzNzM4", "avatar_url": "https://avatars0.githubusercontent.com/u/60063738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suyog-sdn", "html_url": "https://github.com/suyog-sdn", "followers_url": "https://api.github.com/users/suyog-sdn/followers", "following_url": "https://api.github.com/users/suyog-sdn/following{/other_user}", "gists_url": "https://api.github.com/users/suyog-sdn/gists{/gist_id}", "starred_url": "https://api.github.com/users/suyog-sdn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suyog-sdn/subscriptions", "organizations_url": "https://api.github.com/users/suyog-sdn/orgs", "repos_url": "https://api.github.com/users/suyog-sdn/repos", "events_url": "https://api.github.com/users/suyog-sdn/events{/privacy}", "received_events_url": "https://api.github.com/users/suyog-sdn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-04T08:21:36Z", "updated_at": "2020-08-21T03:00:56Z", "closed_at": "2020-08-21T03:00:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi All,\r\n\r\nI am trying to configure 'nokia-sros' device, while opening config file. \r\n\r\n```python\r\nfrom netmiko import ConnectHandler\r\nfrom getpass import getpass\r\nimport paramiko\r\nfrom netmiko.ssh_exception import NetMikoTimeoutException\r\nfrom netmiko.ssh_exception import AuthenticationException\r\nwith open('device_list.txt') as ip_list:\r\n\tfor ip in ip_list:\r\n\t\trtr = {\r\n\t\t\t   'device_type':'nokia_sros',\r\n\t\t\t   'username':'xxxx',\r\n\t\t\t   'password':'xxx',\r\n\t\t\t   'ip': ip,\r\n\t\t\t   'global_delay_factor': 4,\r\n\t\t\t   }\r\n\t\t\t  \r\n\t\tprint(\"Connecting to the device \"+ ip.strip() + '####\\n')\r\n\t\tnet_connect = ConnectHandler(**rtr)\r\n\t\t\r\n\t\twith open('config_vsc.txt') as config_lines:\r\n\t\t\tconfig = config_lines.read()\r\n\t\t\r\n\t\toutput = net_connect.send_config_set(config)\r\n\t\tprint(output)\r\n\t\t\r\n\t\toutput = net_connect.send_command(b'show router interface')\r\n\t\tprint(output.decode('ascii'))\r\n\t\t#print(output)\r\n```\t\t\r\n\r\n========================================\r\nHowever, following error triggered:\r\n*Traceback (most recent call last):\r\n  File \"C:\\Users\\Suyog.Varun\\cisco_devnet\\venv\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Users\\Suyog.Varun\\cisco_devnet\\venv\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout*\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n*Traceback (most recent call last):\r\n  File \"C:\\Users\\Suyog.Varun\\cisco_devnet\\venv\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Users\\Suyog.Varun\\cisco_devnet\\venv\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout*\r\n\r\nPlease assist in this.\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1716", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1716/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1716/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1716/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1716", "id": 611654103, "node_id": "MDU6SXNzdWU2MTE2NTQxMDM=", "number": 1716, "title": "Cisco WLC Login using Netmiko Python", "user": {"login": "viskrish", "id": 64015737, "node_id": "MDQ6VXNlcjY0MDE1NzM3", "avatar_url": "https://avatars1.githubusercontent.com/u/64015737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viskrish", "html_url": "https://github.com/viskrish", "followers_url": "https://api.github.com/users/viskrish/followers", "following_url": "https://api.github.com/users/viskrish/following{/other_user}", "gists_url": "https://api.github.com/users/viskrish/gists{/gist_id}", "starred_url": "https://api.github.com/users/viskrish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viskrish/subscriptions", "organizations_url": "https://api.github.com/users/viskrish/orgs", "repos_url": "https://api.github.com/users/viskrish/repos", "events_url": "https://api.github.com/users/viskrish/events{/privacy}", "received_events_url": "https://api.github.com/users/viskrish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-04T07:17:00Z", "updated_at": "2020-05-04T18:29:34Z", "closed_at": "2020-05-04T18:29:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi All,\r\nI am just learning python and trying to code for logging into cisco wlc to take a command output. The below code throws errors after entering username and pwd which i mentioned below. Could someone help me how to fix this? \r\n-----------------------------------------------\r\nfrom netmiko import ConnectHandler\r\nfrom getpass import getpass\r\n\r\nuser1 = input('Enter username: ')\r\npass1 = getpass('Enter Password: ')\r\n\r\nCWLC = {\r\n    'host': 'x.x.x.x',\r\n    'port': 22,\r\n    'username': 'user1',\r\n    'password': 'pass1',\r\n    'device_type': 'cisco_wlc_ssh'\r\n    }\r\n\r\nnet_connect = ConnectHandler(**CWLC)\r\nnet_connect.enable()\r\na = net_connect.send_command(\"show wlan summary\")\r\nprint(a)\r\nnet_connect.disconnect()\r\n-----------------------------------------------\r\n\r\nErrors:\r\n\r\nEnter username: XXXX\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/getpass.py:91: GetPassWarning: Can not control echo on the terminal.\r\n  passwd = fallback_getpass(prompt, stream)\r\nWarning: Password input may be echoed.\r\nEnter Password: XXXX\r\n\r\nTraceback (most recent call last):\r\n  File \"INE Python/venv/lib/python3.7/site-packages/netmiko/cisco/cisco_wlc_ssh.py\", line 103, in session_preparation\r\n    self.set_base_prompt()\r\n  File \"INE Python/venv/lib/python3.7/site-packages/netmiko/base_connection.py\", line 1081, in set_base_prompt\r\n    raise ValueError(f\"Router prompt not found: {repr(prompt)}\")\r\nValueError: Router prompt not found: 'User:'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Try1.py\", line 22, in <module>\r\n    net_connect = ConnectHandler(**CWLC)\r\n  File \"INE Python/venv/lib/python3.7/site-packages/netmiko/ssh_dispatcher.py\", line 259, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"INE Python/venv/lib/python3.7/site-packages/netmiko/base_connection.py\", line 327, in __init__\r\n    self._open()\r\n  File \"INE Python/venv/lib/python3.7/site-packages/netmiko/base_connection.py\", line 333, in _open\r\n    self._try_session_preparation()\r\n  File \"/INE Python/venv/lib/python3.7/site-packages/netmiko/base_connection.py\", line 756, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"INE Python/venv/lib/python3.7/site-packages/netmiko/cisco/cisco_wlc_ssh.py\", line 106, in session_preparation\r\n    raise NetmikoAuthenticationException(msg)\r\nnetmiko.ssh_exception.NetmikoAuthenticationException: Authentication failed: x.x.x.x\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1712", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1712/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1712/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1712/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1712", "id": 610929514, "node_id": "MDU6SXNzdWU2MTA5Mjk1MTQ=", "number": 1712, "title": "textfsm.parser.TextFSMError: State Error raised. Rule Line: 15. Input Line: show ip arp", "user": {"login": "moderatelo", "id": 12847697, "node_id": "MDQ6VXNlcjEyODQ3Njk3", "avatar_url": "https://avatars1.githubusercontent.com/u/12847697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moderatelo", "html_url": "https://github.com/moderatelo", "followers_url": "https://api.github.com/users/moderatelo/followers", "following_url": "https://api.github.com/users/moderatelo/following{/other_user}", "gists_url": "https://api.github.com/users/moderatelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/moderatelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moderatelo/subscriptions", "organizations_url": "https://api.github.com/users/moderatelo/orgs", "repos_url": "https://api.github.com/users/moderatelo/repos", "events_url": "https://api.github.com/users/moderatelo/events{/privacy}", "received_events_url": "https://api.github.com/users/moderatelo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-01T19:36:37Z", "updated_at": "2020-05-01T19:39:57Z", "closed_at": "2020-05-01T19:39:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Kirk\r\nI ran into similar issue here.\r\nwhich appears to be related to \"show ip arp\" template on Cisco IOS platform\r\nWhen I run it with text-FSM enabled i get this error\r\nTraceback (most recent call last):\r\n  File \"./doConfigs.py\", line 200, in <module>\r\n    Run_show_Commands_TextFSM(connectToSW)\r\n  File \"./doConfigs.py\", line 123, in Run_show_Commands_TextFSM\r\n    output = connected_to.send_command('show ip arp', delay_factor=1, max_loops=40, strip_prompt=False, strip_command=False,use_textfsm=True )\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\utilities.py\", line 347, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1447, in send_command\r\n    template=textfsm_template,\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\utilities.py\", line 280, in get_structured_data\r\n    return _textfsm_parse(textfsm_obj, raw_output, attrs)\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\utilities.py\", line 252, in _textfsm_parse\r\n    textfsm_obj.ParseCmd(raw_output, attrs)\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\_textfsm\\_clitable.py\", line 272, in ParseCmd\r\n    self.table = self._ParseCmdItem(self.raw, template_file=template_files[0])\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\_textfsm\\_clitable.py\", line 303, in _ParseCmdItem\r\n    for record in fsm.ParseText(cmd_input):\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\textfsm\\parser.py\", line 895, in ParseText\r\n    self._CheckLine(line)\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\textfsm\\parser.py\", line 944, in _CheckLine\r\n    if self._Operations(rule, line):\r\n  File \"C:\\Users\\skononets\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\textfsm\\parser.py\", line 1025, in _Operations\r\n    % (rule.line_num, line))\r\ntextfsm.parser.TextFSMError: State Error raised. Rule Line: 15. Input Line: show ip arp\r\n\r\nWhen i run it without text-FSM parsing then it works fine.\r\nMy modules are mostly up to date and I dont have those issues with other template commands\r\n\r\nC:\\Users\\xxxxxxxxxx>pip list textfsm\r\nPackage        Version\r\n-------------- -------\r\nasn1crypto     0.24.0\r\nbcrypt         3.1.7\r\ncffi           1.12.3\r\nciscoconfparse 1.5.1\r\ncolorama       0.4.3\r\ncryptography   2.7\r\ndnspython      1.16.0\r\nfuture         0.17.1\r\nnetmiko        3.1.0\r\nntc-templates  1.4.0\r\nparamiko       2.6.0\r\npasslib        1.7.2\r\npip            20.0.2\r\npycparser      2.19\r\nPyNaCl         1.3.0\r\npyserial       3.4\r\nscp            0.13.2\r\nsetuptools     40.8.0\r\nsix            1.12.0\r\nterminal       0.4.0\r\ntextfsm        1.1.0\r\n\r\nany help would be appreciated.\r\n\r\nThank you. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1708", "id": 609784611, "node_id": "MDU6SXNzdWU2MDk3ODQ2MTE=", "number": 1708, "title": "send_config_set not working with IOS XR due to abbreviated \"config term\" command on IOS-XR 7.0 code", "user": {"login": "fadisaqal", "id": 27928938, "node_id": "MDQ6VXNlcjI3OTI4OTM4", "avatar_url": "https://avatars1.githubusercontent.com/u/27928938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fadisaqal", "html_url": "https://github.com/fadisaqal", "followers_url": "https://api.github.com/users/fadisaqal/followers", "following_url": "https://api.github.com/users/fadisaqal/following{/other_user}", "gists_url": "https://api.github.com/users/fadisaqal/gists{/gist_id}", "starred_url": "https://api.github.com/users/fadisaqal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fadisaqal/subscriptions", "organizations_url": "https://api.github.com/users/fadisaqal/orgs", "repos_url": "https://api.github.com/users/fadisaqal/repos", "events_url": "https://api.github.com/users/fadisaqal/events{/privacy}", "received_events_url": "https://api.github.com/users/fadisaqal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 30, "created_at": "2020-04-30T10:08:09Z", "updated_at": "2020-07-10T14:05:17Z", "closed_at": "2020-05-21T17:45:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nsend_config_set is not working when dealing with IOS XR (7.0.1) send_command is working but the send_config_set is timing out.\r\n\r\ndevice_type is set to 'cisco_xr'\r\n\r\noutput: \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"myUserDirectory\\PycharmProjects\\untitled\\NetmikoIOS.py\", line 26, in <module>\r\n    output = net_connect.send_config_set(config_commands)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco\\cisco_xr.py\", line 19, in send_config_set\r\n    return super().send_config_set(\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1728, in send_config_set\r\n    output += self.config_mode(*cfg_mode_args)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1621, in config_mode\r\n    output += self.read_until_pattern(pattern=re.escape(config_command.strip()))\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1704", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1704/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1704/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1704/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1704", "id": 609179110, "node_id": "MDU6SXNzdWU2MDkxNzkxMTA=", "number": 1704, "title": "Pattern not found in output: #", "user": {"login": "m6461", "id": 11737417, "node_id": "MDQ6VXNlcjExNzM3NDE3", "avatar_url": "https://avatars0.githubusercontent.com/u/11737417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m6461", "html_url": "https://github.com/m6461", "followers_url": "https://api.github.com/users/m6461/followers", "following_url": "https://api.github.com/users/m6461/following{/other_user}", "gists_url": "https://api.github.com/users/m6461/gists{/gist_id}", "starred_url": "https://api.github.com/users/m6461/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m6461/subscriptions", "organizations_url": "https://api.github.com/users/m6461/orgs", "repos_url": "https://api.github.com/users/m6461/repos", "events_url": "https://api.github.com/users/m6461/events{/privacy}", "received_events_url": "https://api.github.com/users/m6461/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-29T16:09:43Z", "updated_at": "2020-04-29T20:31:11Z", "closed_at": "2020-04-29T19:45:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI just started on netmiko; thanks to all of you, especially Kirk, for this. \r\n\r\nThe problem I am facing is as below: Here is the exeption I am having for a test config-change in one of the ports:\r\n\r\nTraceback (most recent call last):\r\n  File \"remoteConfigurePort.py\", line 27, in <module>\r\n    device.send_config_set(config_commands)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\base_connection.py\", line 1704, in send_config_set\r\n    output = self.config_mode(*cfg_mode_args)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\base_connection.py\", line 1595, in config_mode\r\n    if not self.check_config_mode():\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\cisco\\cisco_ios.py\", line 29, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 30, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\base_connection.py\", line 1582, in check_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\base_connection.py\", line 618, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Program Files\\Python38\\lib\\site-packages\\netmiko\\base_connection.py\", line 563, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, pattern not found in output: #\r\n\r\nThe source code is given below: \r\n\r\n```python\r\nconfig_commands = ['interface gigabitEthernet 1/0/35','switchport access vlan 20']\r\nstart = time.time()\r\nfor i in ipdb:    \r\n    for cmd in commands:\r\n        device = ConnectHandler(device_type='cisco_ios_telnet', ip=i, username='***', password='***') \r\n        device.send_config_set(config_commands)\r\n        print (\"Done!\")\r\n        device.disconnect()\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1703", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1703/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1703/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1703/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1703", "id": 608903494, "node_id": "MDU6SXNzdWU2MDg5MDM0OTQ=", "number": 1703, "title": "Netmiko Support for Arista EOS Physical Switches ", "user": {"login": "sjsingh02", "id": 51114204, "node_id": "MDQ6VXNlcjUxMTE0MjA0", "avatar_url": "https://avatars2.githubusercontent.com/u/51114204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjsingh02", "html_url": "https://github.com/sjsingh02", "followers_url": "https://api.github.com/users/sjsingh02/followers", "following_url": "https://api.github.com/users/sjsingh02/following{/other_user}", "gists_url": "https://api.github.com/users/sjsingh02/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjsingh02/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjsingh02/subscriptions", "organizations_url": "https://api.github.com/users/sjsingh02/orgs", "repos_url": "https://api.github.com/users/sjsingh02/repos", "events_url": "https://api.github.com/users/sjsingh02/events{/privacy}", "received_events_url": "https://api.github.com/users/sjsingh02/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-29T09:18:58Z", "updated_at": "2020-04-30T14:10:42Z", "closed_at": "2020-04-30T14:10:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have tested below script and works fine with Arista vEOS\r\n\r\n# Python 2.7\r\n# Netmiko 2.4.2\r\n# Paramiko 2.4.1\r\n\r\n```python\r\nfrom netmiko import ConnectHandler\r\n\r\nwith open('commands_file') as f:\r\n    commands_list = f.read().splitlines()\r\n\r\nwith open('devices_file') as f:\r\n    devices_list = f.read().splitlines()\r\n\r\nfor devices in devices_list:\r\n    print 'Connecting to device ' + devices\r\n    ip_address_of_device = devices\r\n    eos_device = {\r\n        'device_type': 'arista_eos',\r\n        'ip': ip_address_of_device,\r\n        'username': 'admin',\r\n        'password': 'Arista'\r\n    }\r\n\r\n    print \"HELLO\"\r\n    net_connect = ConnectHandler(**eos_device)\r\n    enable = net_connect.enable()\r\n    output = net_connect.send_config_set(commands_list)\r\n    result = open(str(devices) + \"_Output\", 'w')\r\n    result.write(output)\r\n    result.close\r\n```\r\n\r\nBut wen the same script is run on a Physical Arista box, it throws the below error\r\n\r\n[root@cvp-intern-1 ~]# python script.py\r\nConnecting to device 10.81.116.154\r\nHELLO\r\n/usr/lib/python2.7/site-packages/paramiko/kex_ecdh_nist.py:39: CryptographyDeprecationWarning: encode_point has been deprecated on EllipticCurvePublicNumbers and will be removed in a future version. Please use EllipticCurvePublicKey.public_bytes to obtain both compressed and uncompressed point encoding.\r\n  m.add_string(self.Q_C.public_numbers().encode_point())\r\n/usr/lib/python2.7/site-packages/paramiko/kex_ecdh_nist.py:96: CryptographyDeprecationWarning: Support for unsafe construction of public numbers from encoded data will be removed in a future version. Please use EllipticCurvePublicKey.from_encoded_point\r\n  self.curve, Q_S_bytes\r\n/usr/lib/python2.7/site-packages/paramiko/kex_ecdh_nist.py:111: CryptographyDeprecationWarning: encode_point has been deprecated on EllipticCurvePublicNumbers and will be removed in a future version. Please use EllipticCurvePublicKey.public_bytes to obtain both compressed and uncompressed point encoding.\r\n  hm.add_string(self.Q_C.public_numbers().encode_point())\r\nTraceback (most recent call last):\r\n  File \"script.py\", line 24, in <module>\r\n    net_connect = ConnectHandler(**eos_device)\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/ssh_dispatcher.py\", line 246, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/base_connection.py\", line 317, in __init__\r\n    self._open()\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/base_connection.py\", line 323, in _open\r\n    self._try_session_preparation()\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/base_connection.py\", line 738, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/arista/arista.py\", line 14, in session_preparation\r\n    self.set_terminal_width(command=\"terminal width 511\")\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/base_connection.py\", line 1039, in set_terminal_width\r\n    output = self.read_until_prompt()\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/base_connection.py\", line 605, in read_until_prompt\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/netmiko/base_connection.py\", line 543, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetMikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\n\r\nAlso tried to use session_log='output.txt' as an argument to ConnectHandler but got the Syntax error.\r\n\r\n[root@cvp-intern-1 ~]# python script.py\r\n  File \"script.py\", line 24\r\n    net_connect = ConnectHandler(**eos_device, session_log='output.txt')\r\n\r\n\r\nAny help would be appreciated, \r\n\r\nRgds\r\nSaran", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1699", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1699/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1699/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1699/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1699", "id": 607367093, "node_id": "MDU6SXNzdWU2MDczNjcwOTM=", "number": 1699, "title": "prompt not stripped on some hp procurve switches", "user": {"login": "sliddjur", "id": 10002057, "node_id": "MDQ6VXNlcjEwMDAyMDU3", "avatar_url": "https://avatars1.githubusercontent.com/u/10002057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sliddjur", "html_url": "https://github.com/sliddjur", "followers_url": "https://api.github.com/users/sliddjur/followers", "following_url": "https://api.github.com/users/sliddjur/following{/other_user}", "gists_url": "https://api.github.com/users/sliddjur/gists{/gist_id}", "starred_url": "https://api.github.com/users/sliddjur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sliddjur/subscriptions", "organizations_url": "https://api.github.com/users/sliddjur/orgs", "repos_url": "https://api.github.com/users/sliddjur/repos", "events_url": "https://api.github.com/users/sliddjur/events{/privacy}", "received_events_url": "https://api.github.com/users/sliddjur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-27T09:00:55Z", "updated_at": "2020-07-05T13:34:03Z", "closed_at": "2020-07-05T13:34:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "For instance, the `show lldp info remote device` does not strip the prompt from the command. This causes some headache when using textfsm.\r\n\r\nHere is log from `lldp = con_procurve.send_command(\"show lldp info remote-device\")`\r\n\r\n```\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = ''\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = \r\nDEBUG:netmiko:repr = ''\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = '\\x1b[1;0H\\x1b[1M\\x1b[24;1H\\x1b[1L\\x1b[24;31H\\x1b[24;1H\\x1b[2K\\x1b[24;1H\\x1b[?25h\\x1b[24;1H\\x1b[1;24r\\x1b[24;1H\\x1b[1;24r\\x1b[24;1H\\x1b[24;1H\\x1b[2K\\x1b[24;1H\\x1b[?25h\\x1b[24;1H\\x1b[24;1H65432p-swi009-warehouse-1etg# \\x1b[24;1H\\x1b[24;31H\\x1b[24;1H\\x1b[?25h\\x1b[24;31H'\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = 65432p-swi009-warehouse-1etg# \r\nDEBUG:netmiko:repr = '65432p-swi009-warehouse-1etg# '\r\nDEBUG:netmiko:read_channel: 65432p-swi009-warehouse-1etg# \r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = ''\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = \r\nDEBUG:netmiko:repr = ''\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:[find_prompt()]: prompt is 65432p-swi009-warehouse-1etg#\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = ''\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = \r\nDEBUG:netmiko:repr = ''\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'show lldp info remote-device\\n'\r\nDEBUG:netmiko:Pattern is: show\\ lldp\\ info\\ remote\\-device\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = '\\x1b[24;31Hshow lldp \\x1b[24;31H\\x1b[?25h\\x1b[24;41H\\x1b[24;41Hinfo remot\\x1b[24;41H\\x1b[?25h\\x1b[24;51H\\x1b[24;51He-device\\x1b[24;51H\\x1b[?25h\\x1b[24;59H\\x1b[1;0H\\x1b[1M\\x1b[24;1H\\x1b[1L\\x1b[24;59H\\x1b[24;1H\\x1b[2K\\x1b[24;1H\\x1b[?25h\\x1b[24;1H\\x1b[1;24r\\x1b[24;1H\\r\\n LLDP Remote Devices Information\\r\\n\\r\\n'\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = show lldp info remote-device\r\n LLDP Remote Devices Information\r\n\r\n\r\nDEBUG:netmiko:repr = 'show lldp info remote-device\\r\\n LLDP Remote Devices Information\\r\\n\\r\\n'\r\nDEBUG:netmiko:_read_channel_expect read_data: show lldp info remote-device\r\n LLDP Remote Devices Information\r\n\r\n\r\nDEBUG:netmiko:Pattern found: show\\ lldp\\ info\\ remote\\-device show lldp info remote-device\r\n LLDP Remote Devices Information\r\n\r\n\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = '  LocalPort | ChassisId          PortId             PortDescr SysName           \\r\\n  --------- + ------------------ ------------------ --------- ------------------\\r\\n  24        | 3821c7-c13940      36                 36        65432p-swi001     \\r\\n \\r\\n\\r\\n\\x1b[1;24r\\x1b[24;1H\\x1b[24;1H\\x1b[2K\\x1b[24;1H\\x1b[?25h\\x1b[24;1H\\x1b[24;1H65432p-swi009-warehouse-1etg# \\x1b[24;1H\\x1b[24;31H\\x1b[24;1H\\x1b[?25h\\x1b[24;31H'\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output =   LocalPort | ChassisId          PortId             PortDescr SysName           \r\n  --------- + ------------------ ------------------ --------- ------------------\r\n  24        | 3821c7-c13940      36                 36        65432p-swi001     \r\n \r\n\r\n65432p-swi009-warehouse-1etg# \r\nDEBUG:netmiko:repr = '  LocalPort | ChassisId          PortId             PortDescr SysName           \\r\\n  --------- + ------------------ ------------------ --------- ------------------\\r\\n  24        | 3821c7-c13940      36                 36        65432p-swi001     \\r\\n \\r\\n\\r\\n65432p-swi009-warehouse-1etg# '\r\nDEBUG:netmiko:read_channel:   LocalPort | ChassisId          PortId             PortDescr SysName           \r\n  --------- + ------------------ ------------------ --------- ------------------\r\n  24        | 3821c7-c13940      36                 36        65432p-swi001     \r\n \r\n\r\n65432p-swi009-warehouse-1etg# \r\n```\r\n\r\nAnd the output:\r\n```\r\npprint(lldp)                                                                                                                                                     \r\n('LLDP Remote Devices Information\\n'\r\n '\\n'\r\n '  LocalPort | ChassisId          PortId             PortDescr '\r\n 'SysName           \\n'\r\n '  --------- + ------------------ ------------------ --------- '\r\n '------------------\\n'\r\n '  20        | b00cd1-c69b02      b0 0c d1 c6 9b '\r\n '02                              \\n'\r\n '  24        | 3821c7-c13940      36                 36        '\r\n '65432-swi001     \\n'\r\n ' \\n')\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1698", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1698/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1698/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1698/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1698", "id": 607129994, "node_id": "MDU6SXNzdWU2MDcxMjk5OTQ=", "number": 1698, "title": "Regex support with \"expect_string=\" ?", "user": {"login": "stvnkem", "id": 61822499, "node_id": "MDQ6VXNlcjYxODIyNDk5", "avatar_url": "https://avatars1.githubusercontent.com/u/61822499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stvnkem", "html_url": "https://github.com/stvnkem", "followers_url": "https://api.github.com/users/stvnkem/followers", "following_url": "https://api.github.com/users/stvnkem/following{/other_user}", "gists_url": "https://api.github.com/users/stvnkem/gists{/gist_id}", "starred_url": "https://api.github.com/users/stvnkem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stvnkem/subscriptions", "organizations_url": "https://api.github.com/users/stvnkem/orgs", "repos_url": "https://api.github.com/users/stvnkem/repos", "events_url": "https://api.github.com/users/stvnkem/events{/privacy}", "received_events_url": "https://api.github.com/users/stvnkem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-26T22:33:58Z", "updated_at": "2020-04-28T16:06:08Z", "closed_at": "2020-04-28T16:06:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am trying to build my own function to search for the returned prompt. Looks like RE is not supported.\r\n\r\nException: Search pattern never detected in send_command_expect: \\[~ipi-\\w+-r-\\w+-\\d+-acl4-advance-IGMP_Report_whitelist_ACL]\r\n\r\nEdit: workaround without regex: '-acl4-advance-IGMP_Report_whitelist_ACL]'\r\n\r\nHow can I do that?\r\n\r\nThanks!\r\nIstvan\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1693", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1693/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1693/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1693/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1693", "id": 606087378, "node_id": "MDU6SXNzdWU2MDYwODczNzg=", "number": 1693, "title": "Unable to run commands after config mode on Huawei OLT", "user": {"login": "jogindergur", "id": 8242942, "node_id": "MDQ6VXNlcjgyNDI5NDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/8242942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jogindergur", "html_url": "https://github.com/jogindergur", "followers_url": "https://api.github.com/users/jogindergur/followers", "following_url": "https://api.github.com/users/jogindergur/following{/other_user}", "gists_url": "https://api.github.com/users/jogindergur/gists{/gist_id}", "starred_url": "https://api.github.com/users/jogindergur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jogindergur/subscriptions", "organizations_url": "https://api.github.com/users/jogindergur/orgs", "repos_url": "https://api.github.com/users/jogindergur/repos", "events_url": "https://api.github.com/users/jogindergur/events{/privacy}", "received_events_url": "https://api.github.com/users/jogindergur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-24T06:57:26Z", "updated_at": "2020-04-24T11:58:35Z", "closed_at": "2020-04-24T11:58:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi There,\r\nI have a SSH connection to my OLT and enabled it. After turning config mode, I'm not able to hit any command to OLT. Either my way is wrong or something wrong with library. Kindly assist me in this matter. \r\n\r\n`print(SSH.send_command('interface gpon 0/0'))`\r\n\r\nError is:\r\n\r\n```\r\nMA5608T(config)#\r\nTraceback (most recent call last):\r\n  File \"f:/Happy/work/python/hello.py\", line 28, in <module>\r\n    print(SSH.send_command('interface gpon 0/0'))\r\n  File \"C:\\Users\\Dell\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\utilities.py\", line 347, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"C:\\Users\\Dell\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1429, in send_command\r\n    raise IOError(\r\nOSError: Search pattern never detected in send_command_expect: MA5608T\\(config\\)\\#\r\n```\r\n\r\nHi @ktbyers and @Fikirsiz am able to fetch temperature of my OLT but when I try to enter in other configuration it shows me OSError. Please help me! I have used expect_string but nothing works for me. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1692", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1692/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1692/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1692/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1692", "id": 606017730, "node_id": "MDU6SXNzdWU2MDYwMTc3MzA=", "number": 1692, "title": "juniper_junos handle prompt on config mode", "user": {"login": "nhandh09", "id": 40233750, "node_id": "MDQ6VXNlcjQwMjMzNzUw", "avatar_url": "https://avatars1.githubusercontent.com/u/40233750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nhandh09", "html_url": "https://github.com/nhandh09", "followers_url": "https://api.github.com/users/nhandh09/followers", "following_url": "https://api.github.com/users/nhandh09/following{/other_user}", "gists_url": "https://api.github.com/users/nhandh09/gists{/gist_id}", "starred_url": "https://api.github.com/users/nhandh09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nhandh09/subscriptions", "organizations_url": "https://api.github.com/users/nhandh09/orgs", "repos_url": "https://api.github.com/users/nhandh09/repos", "events_url": "https://api.github.com/users/nhandh09/events{/privacy}", "received_events_url": "https://api.github.com/users/nhandh09/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-24T03:45:43Z", "updated_at": "2020-05-04T16:03:39Z", "closed_at": "2020-05-04T16:03:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear Ktbyers,\r\n\r\nI also tried to handle prompt on my srx config mode when I create user on that (with plain text password), but still stuck on that. My code posted below for encrypted password and also commit (which worked fine), but is anyway there for me to put password on my script for plain text option?\r\n\r\nnhandinh@SRX1#set system login  user cmc_mtn class super-user authentication plain-text-password\r\nNew password:\r\nRetype new password:\r\n[edit]\r\n\r\n_python code:\r\n                 junos_command = [set system login user cmc_mtn class super-user authentication \r\n                                    encrypted-password   $1$J7pr.Dcr$DPgW75V.R0ahIl5eE9UpZ.]\r\n                output = net_connect.send_config_set(junos_command , exit_config_mode=False)\r\n                output += net_connect.commit(and_quit=True)\r\n                print (output)_\r\n\r\nMany thanks and regards", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1689", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1689/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1689/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1689/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1689", "id": 605607106, "node_id": "MDU6SXNzdWU2MDU2MDcxMDY=", "number": 1689, "title": "Can we use Attributes between cisco statements?", "user": {"login": "Arpanet86", "id": 53537573, "node_id": "MDQ6VXNlcjUzNTM3NTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/53537573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arpanet86", "html_url": "https://github.com/Arpanet86", "followers_url": "https://api.github.com/users/Arpanet86/followers", "following_url": "https://api.github.com/users/Arpanet86/following{/other_user}", "gists_url": "https://api.github.com/users/Arpanet86/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arpanet86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arpanet86/subscriptions", "organizations_url": "https://api.github.com/users/Arpanet86/orgs", "repos_url": "https://api.github.com/users/Arpanet86/repos", "events_url": "https://api.github.com/users/Arpanet86/events{/privacy}", "received_events_url": "https://api.github.com/users/Arpanet86/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-23T14:55:09Z", "updated_at": "2020-06-23T13:15:17Z", "closed_at": "2020-06-23T13:15:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Ktbyers,\r\n\r\nAm trying something out here and doesnt seem to work. Maybe am doing something wrong or its simply not possible. What am trying to do is when a user select a vlan from the \"vlans\" list. That vlan name will be put in the cisco statements:\r\n\r\ncon = net_connect.send_command_expect('show interfaces status | count'**, vlan,** '* connected')\r\n\r\n**vlan** Will be the vlan selected by the user from the list.\r\n\r\n```\r\n`from netmiko import ConnectHandler\r\nfrom getpass import getpass\r\nfrom netmiko.ssh_exception import NetMikoTimeoutException\r\nfrom netmiko.ssh_exception import NetMikoAuthenticationException\r\nfrom netmiko.ssh_exception import SSHException\r\n\r\nvlans = ['CHEESE', 'HAM', 'COOKIE', 'CANDY', 'WATER', 'COLA']\r\nprint(vlans)\r\nnumber = input('Select VLAN [0-6]: ')\r\n\r\nif number =='0':\r\n    vlan = print(vlans[0])\r\nelif vlan =='1':\r\n    vlan = print(vlans[1])\r\nelif vlan =='2':\r\n    vlan = print(vlans[2])\r\nelif vlan =='3':\r\n    vlan = print(vlans[3])\r\nelif vlan =='4':\r\n    vlan = print(vlans[4])\r\nelif vlan =='5':\r\n    vlan = print(vlans[5])\r\nelse:\r\n    print('That option is not available!')\r\n\r\ndef vlan_stats():\r\n    con = net_connect.send_command_expect('show interfaces status | count', vlan, '* connected')\r\n    notcon = net_connect.send_command_expect('show interfaces status | count', vlan, '* notconnect')\r\n    ports = net_connect.send_command_expect('show interfaces status | count ', vlan)\r\n\r\n    print('CON / NOTCON / SIZE:', con.strip(',Number of lines which match regexp =  '), \r\n    notcon.strip(',Number of lines which match regexp = '), \r\n    ports.strip(',Number of lines which match regexp = '))`\r\n\r\n```\r\nHope to hear from you!\r\n\r\nBest regards\r\nArpanet86\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1688", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1688/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1688/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1688/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1688", "id": 605298945, "node_id": "MDU6SXNzdWU2MDUyOTg5NDU=", "number": 1688, "title": "\"send_config_set\" - Handle promt from config mode", "user": {"login": "nhandh09", "id": 40233750, "node_id": "MDQ6VXNlcjQwMjMzNzUw", "avatar_url": "https://avatars1.githubusercontent.com/u/40233750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nhandh09", "html_url": "https://github.com/nhandh09", "followers_url": "https://api.github.com/users/nhandh09/followers", "following_url": "https://api.github.com/users/nhandh09/following{/other_user}", "gists_url": "https://api.github.com/users/nhandh09/gists{/gist_id}", "starred_url": "https://api.github.com/users/nhandh09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nhandh09/subscriptions", "organizations_url": "https://api.github.com/users/nhandh09/orgs", "repos_url": "https://api.github.com/users/nhandh09/repos", "events_url": "https://api.github.com/users/nhandh09/events{/privacy}", "received_events_url": "https://api.github.com/users/nhandh09/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-23T07:17:04Z", "updated_at": "2020-04-24T04:34:16Z", "closed_at": "2020-04-24T04:34:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nI did research and can handle prompt from global mode (python code) below:\r\n\r\n_output = net_connect.send_command_timing(commandGL, strip_command=False, strip_prompt=False)\r\n            if \"confirm\" in output:\r\n                    output += net_connect.send_command_timing(\r\n                        \"\\n\", strip_command=False, strip_prompt=False\r\n                    )\r\n            if \"yes\" in output:\r\n                output += net_connect.send_command_timing(\r\n                    \"y\", strip_command=False, strip_prompt=False\r\n                )\r\n                if \"confirm\" in output:\r\n                    output += net_connect.send_command_timing(\r\n                        \"\\n\", strip_command=False, strip_prompt=False_\r\n\r\n\r\n\r\nBut when I came to config mode (send_config_set), it didn't work, I posted command I want to enter and python code below, could someone help me figure it out:\r\n\r\n_CISCO-ROUTER#sh running-config | inc user\r\nusername cmc_mtn privilege 15 password 7 13061A1106180A787B7678\r\nCISCO-ROUTER#conf t\r\nEnter configuration commands, one per line.  End with CNTL/Z.\r\nCISCO-ROUTER(config)#no user\r\nCISCO-ROUTER(config)#no username cmc_mtn\r\nThis operation will remove all username related configurations with same name.Do you want to continue? [confirm]\r\nCISCO-ROUTER(config)#\r\n\r\nPython code:\r\n                cfg_lines=['no username cmc_mtn']\r\n                net_connect = ConnectHandler(**devices)\r\n                net_connect.enable()\r\n                output = net_connect.send_config_set(cfg_lines)\r\n                print (output)_\r\n\r\nMany thanks for help!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1687", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1687/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1687/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1687/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1687", "id": 604999032, "node_id": "MDU6SXNzdWU2MDQ5OTkwMzI=", "number": 1687, "title": "Abort connection when not Cisco", "user": {"login": "tars01", "id": 29687497, "node_id": "MDQ6VXNlcjI5Njg3NDk3", "avatar_url": "https://avatars3.githubusercontent.com/u/29687497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tars01", "html_url": "https://github.com/tars01", "followers_url": "https://api.github.com/users/tars01/followers", "following_url": "https://api.github.com/users/tars01/following{/other_user}", "gists_url": "https://api.github.com/users/tars01/gists{/gist_id}", "starred_url": "https://api.github.com/users/tars01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tars01/subscriptions", "organizations_url": "https://api.github.com/users/tars01/orgs", "repos_url": "https://api.github.com/users/tars01/repos", "events_url": "https://api.github.com/users/tars01/events{/privacy}", "received_events_url": "https://api.github.com/users/tars01/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-22T19:16:11Z", "updated_at": "2020-04-28T08:37:49Z", "closed_at": "2020-04-28T08:37:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Kirk\r\n\r\nI have an issue with with cisco_ios connect handler. I am running a discovery on lots of Cisco CPE devices on my network. Some of them are MikroTik. I'm trying to have it so that when it detects a MikroTik prompt it just aborts that device. I have written some code to do this but it seems to not detect the prompt correctly because my code doesn't execute. \r\n\r\nPlease see a snippet of the code\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/29687497/80025306-527dcd00-84d8-11ea-82d4-5b5aa1f0fafa.png)\r\n\r\n\r\nHere is what happens though, it just sits at the prompt and doesn't execute my code to ctrl+shift+6+x (I connected manually to the device and it does support breaking out of the session with that combination)\r\n\r\nLogs\r\n\r\nDEBUG:netmiko:write_channel: b'telnet 10.0.10.100\\r\\n'\r\nDEBUG:netmiko:read_channel: telnet 10.0.10.100\r\nTrying 10.0.10.100 ... Open\r\n\r\n\r\nMikroTik v6.45.3 (stable)\r\n\r\n^@Login: Password: \r\nDEBUG:netmiko:write_channel: b'\\x1e'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: Login failed, incorrect username or password\r\n\r\nLogin: Password: \r\nLogin failed, incorrect username or password\r\n\r\nLogin: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:[find_prompt()]: prompt is Login:\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: Password: \r\n\r\n\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:[find_prompt()]: prompt is Password:\r\nDEBUG:netmiko:read_channel: \r\n\r\n\r\n\r\n\r\n\r\nTo be honest I have noticed similar problems related to this where it doesn't always work, e.g. detecting 'tacacs not available' etc in the banner. The expected string I have it search for is always there when I look in the debug though. \r\n\r\nAny help appreciated. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1684", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1684/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1684/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1684/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1684", "id": 604053289, "node_id": "MDU6SXNzdWU2MDQwNTMyODk=", "number": 1684, "title": "NetmikoTimeoutException when trying to connect Huawei OLT", "user": {"login": "jogindergur", "id": 8242942, "node_id": "MDQ6VXNlcjgyNDI5NDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/8242942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jogindergur", "html_url": "https://github.com/jogindergur", "followers_url": "https://api.github.com/users/jogindergur/followers", "following_url": "https://api.github.com/users/jogindergur/following{/other_user}", "gists_url": "https://api.github.com/users/jogindergur/gists{/gist_id}", "starred_url": "https://api.github.com/users/jogindergur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jogindergur/subscriptions", "organizations_url": "https://api.github.com/users/jogindergur/orgs", "repos_url": "https://api.github.com/users/jogindergur/repos", "events_url": "https://api.github.com/users/jogindergur/events{/privacy}", "received_events_url": "https://api.github.com/users/jogindergur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-21T14:41:19Z", "updated_at": "2020-04-22T14:09:59Z", "closed_at": "2020-04-22T14:09:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Everyone,\r\n\r\nI just started working with Netmiko I find it very useful with Cisco devices in GNS3 but when I tried to connect my basic script to Huawei OLT via SSH I got NetmikoTimeoutException. I am able to connect through Putty but with Netmiko I got exception.\r\n\r\n\r\n\r\n```\r\nfrom netmiko import ConnectHandler\r\n\r\ndevice = {\r\n    'device_type': 'huawei',\r\n    'ip': 'XX.XX.XX.XX',\r\n    'port': 'XX',\r\n    'username': 'user',\r\n    'password': 'pass'\r\n}\r\n\r\nSSH = ConnectHandler(**device)\r\n\r\nSSH.send_command('enable')\r\nSSH.send_command('config')\r\noutput = SSH.send_command('display temperature 0/0')\r\n\r\nprint(output)\r\n\r\nSSH.send_command('quit')\r\nSSH.send_command('quit')\r\nSSH.send_command('y')\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1682", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1682/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1682/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1682/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1682", "id": 603588759, "node_id": "MDU6SXNzdWU2MDM1ODg3NTk=", "number": 1682, "title": "PipeTimeout on script while same command works on nexus device", "user": {"login": "lazhao123", "id": 30350127, "node_id": "MDQ6VXNlcjMwMzUwMTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/30350127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lazhao123", "html_url": "https://github.com/lazhao123", "followers_url": "https://api.github.com/users/lazhao123/followers", "following_url": "https://api.github.com/users/lazhao123/following{/other_user}", "gists_url": "https://api.github.com/users/lazhao123/gists{/gist_id}", "starred_url": "https://api.github.com/users/lazhao123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lazhao123/subscriptions", "organizations_url": "https://api.github.com/users/lazhao123/orgs", "repos_url": "https://api.github.com/users/lazhao123/repos", "events_url": "https://api.github.com/users/lazhao123/events{/privacy}", "received_events_url": "https://api.github.com/users/lazhao123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-20T23:02:49Z", "updated_at": "2020-04-27T22:26:48Z", "closed_at": "2020-04-27T22:26:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI need to send the following commands to cisco nexus, using netmiko in python 3.7.4 on windows, I got pipe timeout exception on \"peer-keepalive\" command. I can enter these commands to nexus switch without error. What I should look at?\r\nLogging error included. netmiko code that trigger exception included.\r\n\r\nthanks in advance\r\n\r\n=========== nexus commands:\r\nvpc domain 10\r\npeer-switch\r\nrole priority 10\r\npeer-keepalive destination 192.168.0.51 source 192.168.0.50 vrf management\r\n\r\nR1-93180LC-EX-A(config)# vpc domain 10\r\nR1-93180LC-EX-A(config-vpc-domain)#   peer-switch\r\nR1-93180LC-EX-A(config-vpc-domain)#   role priority 10\r\nNote:\r\n Change will take effect after user has:\r\n   1. Triggered \"vpc role preempt\" (non-disruptive - no traffic loss on STP root switch)\r\nOR 2. Re-initd the vPC peer-link (disruptive)\r\nWarning:\r\n !!:: vPCs will be flapped on current primary vPC switch while attempting option 2 ::!!\r\nR1-93180LC-EX-A(config-vpc-domain)# peer-keepalive destination 192.168.0.51 source 192.168.0.50  <== netmiko fail on this\r\nR1-93180LC-EX-A(config-vpc-domain)#\r\n\r\n\r\n=========== my python code:\r\n                net_connect = ConnectHandler(device_type=self.deviceType, ip=self.host, username=self.username, password=self.password)\r\n                output = net_connect.send_config_set(commands)\r\n\r\n\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 541, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Switch\\WinPython-64bit-3.6.3.0Zero\\scripts\\switches.py\", line 42, in runconfig\r\n    output = net_connect.send_config_set(commands)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 1726, in send_config_set\r\n    new_output = self.read_until_pattern(pattern=re.escape(cmd.strip()))\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 618, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 552, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 1025, in emit\r\n    msg = self.format(record)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 869, in format\r\n    return fmt.format(record)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 608, in format\r\n    record.message = record.getMessage()\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 369, in getMessage\r\n    msg = msg % self.args\r\nValueError: unsupported format character 'O' (0x4f) at index 27\r\nCall stack:\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1758, in <module>\r\n    main()\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1752, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1147, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"C:/Switch/WinPython-64bit-3.6.3.0Zero/scripts/networkconfig.py\", line 829, in <module>\r\n    main()\r\n  File \"C:/Switch/WinPython-64bit-3.6.3.0Zero/scripts/networkconfig.py\", line 816, in main\r\n    UCPCINet.configureVendorPeering()\r\n  File \"C:/Switch/WinPython-64bit-3.6.3.0Zero/scripts/networkconfig.py\", line 561, in configureVendorPeering\r\n    peerlinkportchannel=1, peerlinkinterfaces=interfaces)\r\n  File \"C:\\Switch\\WinPython-64bit-3.6.3.0Zero\\scripts\\cisconexus.py\", line 160, in setVPC\r\n    self.runconfig(config_commands)\r\n  File \"C:\\Switch\\WinPython-64bit-3.6.3.0Zero\\scripts\\switches.py\", line 48, in runconfig\r\n    logger.info(self.host + \"Oops!\", sys.exc_info()[0], \"occured.\")\r\nMessage: 'fe80::a653:eff:fe9d:3fc0%16Oops!'\r\nArguments: (<class 'netmiko.ssh_exception.NetmikoTimeoutException'>, 'occured.')\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 541, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Switch\\WinPython-64bit-3.6.3.0Zero\\scripts\\switches.py\", line 42, in runconfig\r\n    output = net_connect.send_config_set(commands)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 1726, in send_config_set\r\n    new_output = self.read_until_pattern(pattern=re.escape(cmd.strip()))\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 618, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\netmiko\\base_connection.py\", line 552, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 1025, in emit\r\n    msg = self.format(record)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 869, in format\r\n    return fmt.format(record)\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 608, in format\r\n    record.message = record.getMessage()\r\n  File \"C:\\Users\\lzhao\\AppData\\Local\\Programs\\Python\\Python37\\lib\\logging\\__init__.py\", line 369, in getMessage\r\n    msg = msg % self.args\r\nValueError: unsupported format character 'O' (0x4f) at index 27\r\nCall stack:\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1758, in <module>\r\n    main()\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1752, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1147, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"C:\\Users\\lzhao\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"C:/Switch/WinPython-64bit-3.6.3.0Zero/scripts/networkconfig.py\", line 829, in <module>\r\n    main()\r\n  File \"C:/Switch/WinPython-64bit-3.6.3.0Zero/scripts/networkconfig.py\", line 816, in main\r\n    UCPCINet.configureVendorPeering()\r\n  File \"C:/Switch/WinPython-64bit-3.6.3.0Zero/scripts/networkconfig.py\", line 561, in configureVendorPeering\r\n    peerlinkportchannel=1, peerlinkinterfaces=interfaces)\r\n  File \"C:\\Switch\\WinPython-64bit-3.6.3.0Zero\\scripts\\cisconexus.py\", line 160, in setVPC\r\n    self.runconfig(config_commands)\r\n  File \"C:\\Switch\\WinPython-64bit-3.6.3.0Zero\\scripts\\switches.py\", line 48, in runconfig\r\n    logger.info(self.host + \"Oops!\", sys.exc_info()[0], \"occured.\")\r\nMessage: 'fe80::a653:eff:fe9d:3fc0%16Oops!'\r\nArguments: (<class 'netmiko.ssh_exception.NetmikoTimeoutException'>, 'occured.')\r\n\r\n======= netmiko code that trigger exception, paramiko\\buffered_pipe.py\", line 164\r\n    def read(self, nbytes, timeout=None):\r\n        \"\"\"\r\n        Read data from the pipe.  The return value is a string representing\r\n        the data received.  The maximum amount of data to be received at once\r\n        is specified by ``nbytes``.  If a string of length zero is returned,\r\n        the pipe has been closed.\r\n\t........... omit \r\n         \"\"\"\r\n        out = bytes()\r\n        self._lock.acquire()\r\n        try:\r\n            if len(self._buffer) == 0:\r\n                if self._closed:\r\n                    return out\r\n                # should we block?\r\n                if timeout == 0.0:\r\n                    raise PipeTimeout()\r\n                # loop here in case we get woken up but a different thread has\r\n                # grabbed everything in the buffer.\r\n                while (len(self._buffer) == 0) and not self._closed:\r\n                    then = time.time()\r\n                    self._cv.wait(timeout)\r\n                    if timeout is not None:\r\n                        timeout -= time.time() - then\r\n                        if timeout <= 0.0:\r\n                            raise PipeTimeout()       <=== failed here\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1679", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1679/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1679/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1679/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1679", "id": 603257527, "node_id": "MDU6SXNzdWU2MDMyNTc1Mjc=", "number": 1679, "title": "Netmiko, ntc-templates, textfsm: ModuleNotFoundError: No module named 'fcntl'", "user": {"login": "alepodj", "id": 24709042, "node_id": "MDQ6VXNlcjI0NzA5MDQy", "avatar_url": "https://avatars1.githubusercontent.com/u/24709042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alepodj", "html_url": "https://github.com/alepodj", "followers_url": "https://api.github.com/users/alepodj/followers", "following_url": "https://api.github.com/users/alepodj/following{/other_user}", "gists_url": "https://api.github.com/users/alepodj/gists{/gist_id}", "starred_url": "https://api.github.com/users/alepodj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alepodj/subscriptions", "organizations_url": "https://api.github.com/users/alepodj/orgs", "repos_url": "https://api.github.com/users/alepodj/repos", "events_url": "https://api.github.com/users/alepodj/events{/privacy}", "received_events_url": "https://api.github.com/users/alepodj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-20T13:54:20Z", "updated_at": "2020-04-20T15:49:29Z", "closed_at": "2020-04-20T15:49:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi\r\n\r\ni have an issue with the new version of textfsm as follows:\r\n\r\n####OS\r\n\r\n```\r\nWindows 10 \r\n```\r\n\r\n####pip freeze\r\n\r\n```\r\n...\r\nnetmiko==3.1.0\r\nntc-templates==1.4.0\r\ntextfsm==1.1.0\r\n...\r\n```\r\n\r\n####Script\r\n\r\n```\r\nimport os, json\r\nimport ntc_templates\r\nfrom ntc_templates.parse import parse_output\r\nfrom netmiko import Netmiko\r\nfrom netmiko import NetMikoAuthenticationException\r\n\r\nswitch = {'device_type': 'cisco_ios',\r\n            'ip': '192.168.0.20',\r\n            'username': 'cisco',\r\n            'password': 'cisco',\r\n            'secret': 'cisco',\r\n            'timeout': 10000,\r\n            'session_timeout': 10000}\r\n\r\ntry:\r\n    c = Netmiko(**switch)\r\n    c.enable()\r\n    show_ip_arp = c.send_command('show ip arp')\r\n    show_ip_arp_parsed = parse_output(platform=\"cisco_ios\", command=\"show ip arp\", data=show_ip_arp)\r\n    print(show_ip_arp_parsed)\r\nexcept Exception as e:\r\n    print(e)\r\n```\r\n\r\n####Error\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Python37\\lib\\site-packages\\ntc_templates\\parse.py\", line 5, in <module>\r\n    from textfsm import clitable\r\n  File \"C:\\Python37\\lib\\site-packages\\textfsm\\clitable.py\", line 41, in <module>\r\n    from textfsm import texttable\r\n  File \"C:\\Python37\\lib\\site-packages\\textfsm\\texttable.py\", line 42, in <module>\r\n    from textfsm import terminal\r\n  File \"C:\\Python37\\lib\\site-packages\\textfsm\\terminal.py\", line 25, in <module>\r\n    import fcntl\r\nModuleNotFoundError: No module named 'fcntl'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"c:/projects/IT-Tools-Dash/dev/netmiko/netmiko_test.py\", line 3, in <module>\r\n    from ntc_templates.parse import parse_output\r\n  File \"C:\\Python37\\lib\\site-packages\\ntc_templates\\parse.py\", line 7, in <module>\r\n    import clitable\r\nModuleNotFoundError: No module named 'clitable'\r\n```\r\n\r\n...but if i forcefully downgrade textfsm to 0.4.1 then everything just works. I looked around and found other people issues related to `fcntl` not working in windows systems and such.\r\n\r\n_Originally posted by @alepodj in https://github.com/ktbyers/netmiko/issues/1664#issuecomment-614975258_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1677", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1677/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1677/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1677/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1677", "id": 602413585, "node_id": "MDU6SXNzdWU2MDI0MTM1ODU=", "number": 1677, "title": "Missing ConnectHandler and Modules", "user": {"login": "zaraki04", "id": 63898094, "node_id": "MDQ6VXNlcjYzODk4MDk0", "avatar_url": "https://avatars3.githubusercontent.com/u/63898094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaraki04", "html_url": "https://github.com/zaraki04", "followers_url": "https://api.github.com/users/zaraki04/followers", "following_url": "https://api.github.com/users/zaraki04/following{/other_user}", "gists_url": "https://api.github.com/users/zaraki04/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaraki04/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaraki04/subscriptions", "organizations_url": "https://api.github.com/users/zaraki04/orgs", "repos_url": "https://api.github.com/users/zaraki04/repos", "events_url": "https://api.github.com/users/zaraki04/events{/privacy}", "received_events_url": "https://api.github.com/users/zaraki04/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-18T08:54:33Z", "updated_at": "2020-04-19T05:41:46Z", "closed_at": "2020-04-19T05:41:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Team,\r\n\r\nNEed your help, seems connecthandler and other modules are missing. Did I miss something in my installation? or is there a way I can update to have some module. Hoping for assistance. Please see image below\r\n\r\nThank You\r\n\r\n![netmiko31](https://user-images.githubusercontent.com/63898094/79632949-16273580-8195-11ea-8cd2-5cdf48ffb4cd.PNG)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1676", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1676/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1676/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1676/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1676", "id": 602398992, "node_id": "MDU6SXNzdWU2MDIzOTg5OTI=", "number": 1676, "title": "$ python setup.py instal bash: python: command not found", "user": {"login": "zaraki04", "id": 63898094, "node_id": "MDQ6VXNlcjYzODk4MDk0", "avatar_url": "https://avatars3.githubusercontent.com/u/63898094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaraki04", "html_url": "https://github.com/zaraki04", "followers_url": "https://api.github.com/users/zaraki04/followers", "following_url": "https://api.github.com/users/zaraki04/following{/other_user}", "gists_url": "https://api.github.com/users/zaraki04/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaraki04/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaraki04/subscriptions", "organizations_url": "https://api.github.com/users/zaraki04/orgs", "repos_url": "https://api.github.com/users/zaraki04/repos", "events_url": "https://api.github.com/users/zaraki04/events{/privacy}", "received_events_url": "https://api.github.com/users/zaraki04/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-18T07:25:14Z", "updated_at": "2020-04-18T08:38:33Z", "closed_at": "2020-04-18T08:38:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, Having issues installing setup.py. \r\nclearly setup.py is under netmiko directory. But having issue. Any idea how to resolve? hoping for your kind assistnace.\r\n\r\nThank you\r\n\r\n![python1](https://user-images.githubusercontent.com/63898094/79631007-854a5d00-8188-11ea-9658-34dbe96e3199.PNG)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1674", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1674/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1674/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1674/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1674", "id": 602348770, "node_id": "MDU6SXNzdWU2MDIzNDg3NzA=", "number": 1674, "title": "Issue in Multi Backup config to a file using Python Netmiko", "user": {"login": "kingakii", "id": 63726048, "node_id": "MDQ6VXNlcjYzNzI2MDQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/63726048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingakii", "html_url": "https://github.com/kingakii", "followers_url": "https://api.github.com/users/kingakii/followers", "following_url": "https://api.github.com/users/kingakii/following{/other_user}", "gists_url": "https://api.github.com/users/kingakii/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingakii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingakii/subscriptions", "organizations_url": "https://api.github.com/users/kingakii/orgs", "repos_url": "https://api.github.com/users/kingakii/repos", "events_url": "https://api.github.com/users/kingakii/events{/privacy}", "received_events_url": "https://api.github.com/users/kingakii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-18T01:18:49Z", "updated_at": "2020-04-19T06:21:42Z", "closed_at": "2020-04-19T06:20:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,\r\nhere is the code that i was trying to run and every time it gives error\r\n`from netmiko import ConnectHandler\r\nimport time\r\nimport datetime\r\n\r\n\r\n\r\nIP_List = open('net_devices.txt')\r\nfor IP in IP_List:\r\n    SWS = {'device_type': 'cisco_ios',\r\n           'ip': IP,\r\n           'username': 'admin',\r\n           'password': 'cisco',\r\n           'secret': 'cisco',\r\n    }\r\n\r\n    print ('\\n ##### connection to device' + IP.strip() + '##### \\n')\r\n    net_connect = ConnectHandler(**SWS)\r\n    net_connect.enable()\r\n    print('\\n Initiate Configuration Backup \\n')\r\n    output = net_connect.send_command('show run')\r\n    print(output)\r\n    Save_File = open('Switches-' + IP, 'w')\r\n    Save_File.write(output)\r\n    Save_File.close    \r\n    print('\\n Finished Config Backup \\n')\r\n\r\n`\r\nhere is the error\r\n`##### connection to device192.168.100.93##### \r\n\r\n\r\n Initiate Configuration Backup \r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\username\\OneDrive\\Documents\\SSH-to-Multiple-Devices.py\", line 22, in <module>\r\n    Save_File = open('Switches-' + IP, 'w')\r\nOSError: [Errno 22] Invalid argument: 'Switches-192.168.100.93\\n'\r\n>>> `\r\n\r\nactually the file is created by this name \"Switches-192.168.100.93\" and there is a config but by default it is not saving as a txt file, and other devices backup is not there. net_devices.txt has 3 devices IP. \r\nkindly assist me to successfully run this code also if possible kindly guide me to backup config using Hostname (device hostname)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1669", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1669/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1669/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1669/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1669", "id": 601270903, "node_id": "MDU6SXNzdWU2MDEyNzA5MDM=", "number": 1669, "title": "ImportError: No module named 'netmiko'", "user": {"login": "khaledkotp", "id": 63809627, "node_id": "MDQ6VXNlcjYzODA5NjI3", "avatar_url": "https://avatars3.githubusercontent.com/u/63809627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khaledkotp", "html_url": "https://github.com/khaledkotp", "followers_url": "https://api.github.com/users/khaledkotp/followers", "following_url": "https://api.github.com/users/khaledkotp/following{/other_user}", "gists_url": "https://api.github.com/users/khaledkotp/gists{/gist_id}", "starred_url": "https://api.github.com/users/khaledkotp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khaledkotp/subscriptions", "organizations_url": "https://api.github.com/users/khaledkotp/orgs", "repos_url": "https://api.github.com/users/khaledkotp/repos", "events_url": "https://api.github.com/users/khaledkotp/events{/privacy}", "received_events_url": "https://api.github.com/users/khaledkotp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-16T17:35:25Z", "updated_at": "2020-04-21T18:12:32Z", "closed_at": "2020-04-17T16:32:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "when trying to use netmiko with python 3\r\nit is still appear this error \r\nroot@NetworkAutomation-1:~# python3 netmiko1.py\r\nTraceback (most recent call last):\r\n  File \"netmiko1.py\", line 1, in <module>\r\n    from netmiko import ConnectHandler\r\n**ImportError: No module named 'netmiko'**\r\n\r\nafter trying these steps also this issue is the same \r\n\r\napt-get install python3-pip\r\npip3 install -U netmiko\r\n\r\nso can any one suggest where is the problem ???\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1668", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1668/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1668/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1668/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1668", "id": 600595621, "node_id": "MDU6SXNzdWU2MDA1OTU2MjE=", "number": 1668, "title": "3.x appears broken for Linux systems: timeout with very simple usage.", "user": {"login": "Alan-R", "id": 1258659, "node_id": "MDQ6VXNlcjEyNTg2NTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1258659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alan-R", "html_url": "https://github.com/Alan-R", "followers_url": "https://api.github.com/users/Alan-R/followers", "following_url": "https://api.github.com/users/Alan-R/following{/other_user}", "gists_url": "https://api.github.com/users/Alan-R/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alan-R/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alan-R/subscriptions", "organizations_url": "https://api.github.com/users/Alan-R/orgs", "repos_url": "https://api.github.com/users/Alan-R/repos", "events_url": "https://api.github.com/users/Alan-R/events{/privacy}", "received_events_url": "https://api.github.com/users/Alan-R/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-15T21:20:59Z", "updated_at": "2020-04-16T14:49:49Z", "closed_at": "2020-04-16T14:49:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here's my test program with netmiko==3.1.0, paramiko==2.7.1:\r\n\r\n```\r\nimport sys\r\nimport logging\r\nfrom netmiko import ConnectHandler\r\nlogging.getLogger(\"netmiko\").setLevel(logging.DEBUG)\r\nnetmiko = logging.getLogger(\"netmiko\")\r\nnetmiko.setLevel(logging.DEBUG)\r\nnetmiko.handlers.clear()\r\nstream = logging.StreamHandler(stream=sys.stderr)\r\nmessage_format = \"%(asctime)s %(name)s %(levelname)s: %(message)s\"\r\nstream.setFormatter(logging.Formatter(message_format))\r\nnetmiko.addHandler(stream)\r\nlogging.getLogger(\"paramiko\").setLevel(logging.DEBUG)\r\nparamiko = logging.getLogger(\"paramiko\")\r\nparamiko.setLevel(logging.DEBUG)\r\nparamiko.handlers.clear()\r\nstream = logging.StreamHandler(stream=sys.stderr)\r\nmessage_format = \"%(asctime)s %(name)s %(levelname)s: %(message)s\"\r\nstream.setFormatter(logging.Formatter(message_format))\r\nparamiko.addHandler(stream)\r\n\r\nconnection = ConnectHandler(host=\"127.0.0.1\", port=10001, username=\"operator\", password=\"****\", device_type=\"linux\")\r\n\r\nresult = connection.send_command('echo \"cable modem deny 0015.f2fe.ba11\"; echo \"cable modem deny 0015.f2fe.ba12\"; echo \"cable modem deny 0015.f2fe.ba13\"')\r\nprint(result)\r\n````\r\nThis program worked before (on 2.4.2 IIRC), but fails now with a timeout. Will attach log output. For what it's worth, I'm using panubo/sshd:1.0.2 for my test Linux sshd box. It's pretty handy.\r\n`docker run -d -p 10001:22 panubo/sshd:1.0.2`. You'll have to set the password on operator with docker exec before you can ssh into the container.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1666", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1666/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1666/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1666/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1666", "id": 600351445, "node_id": "MDU6SXNzdWU2MDAzNTE0NDU=", "number": 1666, "title": "getting error while sending command to router using netmiko", "user": {"login": "kingakii", "id": 63726048, "node_id": "MDQ6VXNlcjYzNzI2MDQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/63726048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingakii", "html_url": "https://github.com/kingakii", "followers_url": "https://api.github.com/users/kingakii/followers", "following_url": "https://api.github.com/users/kingakii/following{/other_user}", "gists_url": "https://api.github.com/users/kingakii/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingakii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingakii/subscriptions", "organizations_url": "https://api.github.com/users/kingakii/orgs", "repos_url": "https://api.github.com/users/kingakii/repos", "events_url": "https://api.github.com/users/kingakii/events{/privacy}", "received_events_url": "https://api.github.com/users/kingakii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-15T14:42:48Z", "updated_at": "2020-04-15T16:10:14Z", "closed_at": "2020-04-15T16:10:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "here the command i am executing\r\n`from netmiko import ConnectHandler\r\n\r\ncisco_L2S = {\r\n    'device_type': 'cisco_ios',\r\n    'host':   '192.168.100.93',\r\n    'username': 'admin',\r\n    'password': 'cisco',\r\n}\r\nnet_connect = ConnectHandler(**cisco_L2S)\r\noutput = net_connect.send_command('show ip int brief')\r\nprint(output)\r\nconfig_commands = [ 'logging buffered 20000',\r\n                    'logging buffered 20010',\r\n                    'no logging console' ]\r\noutput = net_connect.send_config_set(config_commands)\r\nprint(output)\r\n`\r\nhere is the output i am getting\r\n`======== RESTART: C:\\Users\\king\\OneDrive\\Documents\\network commands.py ========\r\nInterface              IP-Address      OK? Method Status                Protocol\r\nEthernet0/0            192.168.10.2    YES manual up                    up      \r\nEthernet0/1            192.168.100.93  YES DHCP   up                    up      \r\nEthernet0/2            unassigned      YES unset  up                    up      \r\nEthernet0/3            unassigned      YES unset  up                    up      \r\nTraceback (most recent call last):\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\akbar\\OneDrive\\Documents\\network commands.py\", line 15, in <module>\r\n    output = net_connect.send_config_set(config_commands)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1728, in send_config_set\r\n    output += self.config_mode(*cfg_mode_args)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1618, in config_mode\r\n    if not self.check_config_mode():\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco\\cisco_ios.py\", line 29, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 30, in check_config_mode\r\n    return super().check_config_mode(check_string=check_string, pattern=pattern)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1605, in check_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n>>> `", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1665", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1665/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1665/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1665/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1665", "id": 600228259, "node_id": "MDU6SXNzdWU2MDAyMjgyNTk=", "number": 1665, "title": "Unable to ssh nortel 5000 series switches", "user": {"login": "siddeshpawar", "id": 29886469, "node_id": "MDQ6VXNlcjI5ODg2NDY5", "avatar_url": "https://avatars2.githubusercontent.com/u/29886469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siddeshpawar", "html_url": "https://github.com/siddeshpawar", "followers_url": "https://api.github.com/users/siddeshpawar/followers", "following_url": "https://api.github.com/users/siddeshpawar/following{/other_user}", "gists_url": "https://api.github.com/users/siddeshpawar/gists{/gist_id}", "starred_url": "https://api.github.com/users/siddeshpawar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siddeshpawar/subscriptions", "organizations_url": "https://api.github.com/users/siddeshpawar/orgs", "repos_url": "https://api.github.com/users/siddeshpawar/repos", "events_url": "https://api.github.com/users/siddeshpawar/events{/privacy}", "received_events_url": "https://api.github.com/users/siddeshpawar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-15T11:31:02Z", "updated_at": "2020-04-17T15:41:10Z", "closed_at": "2020-04-17T15:41:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "how to make the avaya_ers_ work for the nortel 5000 series switches too, currently i am working with avaya (nortel ) series switches 4548 series. successfully able to ssh the 4000 series switch? how should i script such that it opens a session?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1664", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1664/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1664/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1664/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1664", "id": 599866378, "node_id": "MDU6SXNzdWU1OTk4NjYzNzg=", "number": 1664, "title": "Netmiko and Textfsm Path and Env Issue Windows", "user": {"login": "alepodj", "id": 24709042, "node_id": "MDQ6VXNlcjI0NzA5MDQy", "avatar_url": "https://avatars1.githubusercontent.com/u/24709042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alepodj", "html_url": "https://github.com/alepodj", "followers_url": "https://api.github.com/users/alepodj/followers", "following_url": "https://api.github.com/users/alepodj/following{/other_user}", "gists_url": "https://api.github.com/users/alepodj/gists{/gist_id}", "starred_url": "https://api.github.com/users/alepodj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alepodj/subscriptions", "organizations_url": "https://api.github.com/users/alepodj/orgs", "repos_url": "https://api.github.com/users/alepodj/repos", "events_url": "https://api.github.com/users/alepodj/events{/privacy}", "received_events_url": "https://api.github.com/users/alepodj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-14T21:19:58Z", "updated_at": "2020-04-27T18:46:05Z", "closed_at": "2020-04-16T15:26:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am currently trying to set up a test with Netmiko and Textfsm in Windows 10, but no matter what path I try to setup the textfsm environment variable, it still doesn't pick it up and throws an error:\r\n\r\n> Valid ntc-templates not found, please install https://github.com/networktocode/ntc-templates\r\nand then set the NET_TEXTFSM environment variable to point to the ./ntc-templates/templates\r\ndirectory.\r\n\r\nI tried setting the environment variable manually via system properties --> environment variables, but still get the same message. I tried absolute as well as relative paths and no go. Ideally a relative path as the template folder will alway be alongside the script calling it. It might be something simple but im totally missing it right now.\r\n\r\n**The folder structure:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[1]: https://i.stack.imgur.com/9O686.png\r\n\r\n\r\n**My Code:**\r\n\r\n```\r\nimport os, json\r\nfrom netmiko import Netmiko\r\nfrom netmiko import NetMikoAuthenticationException\r\n\r\ntemplates = os.path.dirname(os.path.abspath(__file__)) + '\\\\ntc-template\\\\templates\\\\'\r\nos.environ['NET_TEXTFSM']= templates\r\nprint(os.environ['NET_TEXTFSM'])\r\n\r\n###############################################################\r\n#Can i set the env var from within the scirpt using python?\r\n#os.system(f'cmd /c \"set NET_TEXTFSM={templates}\"')\r\n###############################################################\r\n\r\nswitch = {'device_type': 'cisco_ios',\r\n            'ip': '192.168.0.20',\r\n            'username': 'cisco',\r\n            'password': 'cisco',\r\n            'secret': 'cisco',\r\n            'timeout': 10000,\r\n            'session_timeout': 10000}\r\n\r\ntry:\r\n    c = Netmiko(**switch)\r\n    c.enable()\r\n    show_ip_arp = c.send_command('show ip arp', use_textfsm=True)\r\n    print(json.dumps(show_ip_arp))\r\nexcept Exception as e:\r\n    print(e)\r\n```\r\n\r\nI was hoping anyone points to what might be wrong or missing. I would love to avoid having to set up any environment variables via cmd unless it can be automated as well. The idea is whoever opens this py file gets all that's needed to use textfsm.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1663", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1663/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1663/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1663/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1663", "id": 599788397, "node_id": "MDU6SXNzdWU1OTk3ODgzOTc=", "number": 1663, "title": "SROS - Commit triggers NetmikoTimeoutException", "user": {"login": "jtishey", "id": 11557848, "node_id": "MDQ6VXNlcjExNTU3ODQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/11557848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtishey", "html_url": "https://github.com/jtishey", "followers_url": "https://api.github.com/users/jtishey/followers", "following_url": "https://api.github.com/users/jtishey/following{/other_user}", "gists_url": "https://api.github.com/users/jtishey/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtishey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtishey/subscriptions", "organizations_url": "https://api.github.com/users/jtishey/orgs", "repos_url": "https://api.github.com/users/jtishey/repos", "events_url": "https://api.github.com/users/jtishey/events{/privacy}", "received_events_url": "https://api.github.com/users/jtishey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-14T18:55:16Z", "updated_at": "2020-04-29T08:44:03Z", "closed_at": "2020-04-17T16:31:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm seeing an issue where I use the Nokia SROS driver to connect to a VM on SROS 16.0R7 in MD-CLI mode.   When I call the commit() method after send_config_set() - the configuration on the router commits, but netmiko raises a timeout: `netmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.`\r\n\r\nPython 3.6.7\r\nnetmiko==3.1.0\r\nTiMOS-C-16.0.R7-1 cpm/x86_64 Nokia 7750 SR\r\nconfiguration-mode model-driven\r\n\r\n@wisotzky - have you seen anything similar working on #1442  ?\r\n\r\nExample:\r\n```\r\n>>> from netmiko import ConnectHandler\r\n>>> d = {\r\n...  'device_type': 'nokia_sros',\r\n...  'ip': 'router1',\r\n...  'username': username,\r\n...  'password': password,\r\n...  'port': 22,\r\n...  'verbose': False\r\n... }\r\n>>> nc = ConnectHandler(**d)\r\n>>> nc.send_config_set([\"configure port 1/1/c10 description test\"])\r\n'edit-config exclusive\\nINFO: CLI #2060: Entering exclusive configuration mode\\nINFO: CLI #2061: Uncommitted changes are discarded on configuration mode exit\\n\\n(ex)[]\\nA:user@router1# configure port 1/1/c10 description test\\n\\n*(ex)[]\\nA:user@router1# '\r\n>>> nc.commit()\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/lib/python3.6/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/netmiko/base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/lib/python3.6/site-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3.6/site-packages/netmiko/nokia/nokia_sros_ssh.py\", line 128, in commit\r\n    output += self.read_until_pattern(r\"@\")\r\n  File \"/usr/lib/python3.6/site-packages/netmiko/base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/usr/lib/python3.6/site-packages/netmiko/base_connection.py\", line 561, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n>>>\r\n```\r\n\r\nThe config does get committed, so either it's just not picking up the return afterwards, or it's taking too long - which I think is unlikely because it commits almost instantly via CLI.\r\n\r\nExample of the same change via CLI\r\n```\r\n\r\n[]\r\nA:user@router1# edit-config exclusive\r\nINFO: CLI #2060: Entering exclusive configuration mode\r\nINFO: CLI #2061: Uncommitted changes are discarded on configuration mode exit\r\n\r\n(ex)[]\r\nA:user@router1# configure port 1/1/c10 description test123\r\n\r\n*(ex)[]\r\nA:user@router1# commit\r\n\r\n(ex)[]\r\nA:user@router1# quit-config\r\nINFO: CLI #2064: Exiting exclusive configuration mode\r\n```\r\n\r\nFrom nokia/nokia_sros_ssh.py\r\n```\r\n    def commit(self, *args, **kwargs):\r\n        \"\"\"Activate changes from private candidate for Nokia SR OS\"\"\"\r\n        output = self._exit_all()\r\n        if \"@\" in self.base_prompt and \"*(ex)[\" in output:\r\n            log.info(\"Apply uncommitted changes!\")\r\n            cmd = \"commit\"\r\n            self.write_channel(self.normalize_cmd(cmd))\r\n            output += self.read_until_pattern(pattern=re.escape(cmd))\r\n            output += self.read_until_pattern(r\"@\")\r\n        return output\r\n```\r\n\r\nAny help is appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1661", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1661/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1661/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1661/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1661", "id": 596780719, "node_id": "MDU6SXNzdWU1OTY3ODA3MTk=", "number": 1661, "title": "send_command for long commands in linux resulted in 'Timed-out reading channel, data not available.' for netmiko >= 3.x", "user": {"login": "kielpi", "id": 46385193, "node_id": "MDQ6VXNlcjQ2Mzg1MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/46385193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kielpi", "html_url": "https://github.com/kielpi", "followers_url": "https://api.github.com/users/kielpi/followers", "following_url": "https://api.github.com/users/kielpi/following{/other_user}", "gists_url": "https://api.github.com/users/kielpi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kielpi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kielpi/subscriptions", "organizations_url": "https://api.github.com/users/kielpi/orgs", "repos_url": "https://api.github.com/users/kielpi/repos", "events_url": "https://api.github.com/users/kielpi/events{/privacy}", "received_events_url": "https://api.github.com/users/kielpi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-08T18:43:09Z", "updated_at": "2020-04-08T18:58:40Z", "closed_at": "2020-04-08T18:58:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following conversation with Centos7 resulted in timeout:\r\n\r\n`\r\nDEBUG:netmiko:write_channel: b'ssh -o ConnectTimeout=5 -o NumberOfPasswordPrompts=1  -o KexAlgorithms=diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-dss  -o ServerAliveInterval=5 admin@192.168.0.1\\n'\r\nDEBUG:netmiko:Pattern is: ssh\\ \\-o\\ ConnectTimeout=5\\ \\-o\\ NumberOfPasswordPrompts=1\\ \\ \\-o\\ KexAlgorithms=diffie\\-hellman\\-group1\\-sha1\\ \\-o\\ HostKeyAlgorithms=\\+ssh\\-dss\\ \\ \\-o\\ ServerAliveInterval=5\\ admin@192\\.168\\.0\\.1\r\nDEBUG:netmiko:In strip_ansi_escape_codes\r\nDEBUG:netmiko:repr = 'ssh -o ConnectTimeout=5 -o NumberOfPasswordPrompts=1  -o KexA \\rlgorithms=diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-dss  -o ServerAli \\rveInterval=5 admin@192.168.0.1\\r\\n'\r\nDEBUG:netmiko:Stripping ANSI escape codes\r\nDEBUG:netmiko:new_output = ssh -o ConnectTimeout=5 -o NumberOfPasswordPrompts=1  -o KexA \r\nlgorithms=diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-dss  -o ServerAli \r\nveInterval=5 admin@192.168.0.1\r\n\r\nDEBUG:netmiko:repr = 'ssh -o ConnectTimeout=5 -o NumberOfPasswordPrompts=1  -o KexA \\rlgorithms=diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-dss  -o ServerAli \\rveInterval=5 admin@192.168.0.1\\r\\n'\r\nDEBUG:netmiko:_read_channel_expect read_data: ssh -o ConnectTimeout=5 -o NumberOfPasswordPrompts=1  -o KexA \r\nlgorithms=diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-dss  -o ServerAli \r\nveInterval=5 admin@192.168.0.1\r\n`\r\n\r\nSynchronization code\" added to send_command in Netmiko 3.x cause timeout as search pattern for long command cannot be matched due to its distortion when terminal length is less than command length. Function returns 0 length string despite attached log. To make matter worse set_terminal_width do not resolve the issue. Also commands on Linux can be much longer then possible console width. \r\n[log.txt](https://github.com/ktbyers/netmiko/files/4452265/log.txt)\r\n\r\nTill 2.4.2 everything was fine.\r\n\r\nThis is new code in base_connection\r\n`        new_data = \"\"\r\n\r\n        cmd = command_string.strip()\r\n        # if cmd is just an \"enter\" skip this section\r\n        if cmd and cmd_verify:\r\n            # Make sure you read until you detect the command echo (avoid getting out of sync)\r\n            new_data = self.read_until_pattern(pattern=re.escape(cmd))\r\n            new_data = self.normalize_linefeeds(new_data)\r\n            # Strip off everything before the command echo (to avoid false positives on the prompt)\r\n            if new_data.count(cmd) == 1:\r\n                new_data = new_data.split(cmd)[1:]\r\n                new_data = self.RESPONSE_RETURN.join(new_data)\r\n                new_data = new_data.lstrip()\r\n                new_data = f\"{cmd}{self.RESPONSE_RETURN}{new_data}\"\r\n`\r\n\r\ncannot cross the line\r\n\r\n`new_data = self.read_until_pattern(pattern=re.escape(cmd))`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1660", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1660/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1660/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1660/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1660", "id": 595301882, "node_id": "MDU6SXNzdWU1OTUzMDE4ODI=", "number": 1660, "title": "Vyatta needs terminal width set", "user": {"login": "achhabr1", "id": 12155063, "node_id": "MDQ6VXNlcjEyMTU1MDYz", "avatar_url": "https://avatars2.githubusercontent.com/u/12155063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achhabr1", "html_url": "https://github.com/achhabr1", "followers_url": "https://api.github.com/users/achhabr1/followers", "following_url": "https://api.github.com/users/achhabr1/following{/other_user}", "gists_url": "https://api.github.com/users/achhabr1/gists{/gist_id}", "starred_url": "https://api.github.com/users/achhabr1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achhabr1/subscriptions", "organizations_url": "https://api.github.com/users/achhabr1/orgs", "repos_url": "https://api.github.com/users/achhabr1/repos", "events_url": "https://api.github.com/users/achhabr1/events{/privacy}", "received_events_url": "https://api.github.com/users/achhabr1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-06T17:41:42Z", "updated_at": "2020-04-17T04:16:36Z", "closed_at": "2020-04-17T04:16:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have vyatta OS box which I am trying to configure via send_config_from_file method. I ran across some errors and while reading up on other issues had to revert it Netmiko 2.XX behavior by setting cmd_verify=False. \r\n\r\nHere is output of my session log. I am not able to identify what might be causing this. \r\n\r\n<----- This is with cmd_verify= False ----->\r\n\r\n********@wb-xsm-1006:~$ exit\r\ntail: output.txt: file truncated\r\nWelcome to AT&T vRouter \r\nVersion:      1908f\r\nDescription:  AT&T vRouter 5600 1908f VNF\r\nLinux wb-xsm-1006 4.19.0-trunk-********-amd64 #1 SMP PREEMPT Debian 4.19.93-0********5+1.3 (2020-01-29) x86_64\r\n********@wb-xsm-1006:~$ \r\n********@wb-xsm-1006:~$ configure\r\n\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# set protocols ospf process 65 area 0 network '10.33.50.0/'\r\n[edit]\r\n********@wb-xsm-1006# set protocols ospf process 65 parameters router-id '10.33.50.\r\n.2'\r\n[edit]\r\n********@wb-xsm-1006# set routing routing-instance sdn_102 protocols ospf process 1\r\n102 area 0 network 10.33.51.0/24\r\nset routing routing-instance sdn_102 protocols ospf process 102 parameters router-id 10.33.51.2\r\n[edit]\r\n********@wb-xsm-1006# set routing routing-instance sdn_102 protocols ospf process 1\r\n102 parameters router-id 10.33.51.2\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# commit\r\n[security vpn ipsec ike-group nmt-ike-group dead-peer-detection timeout 120]\r\nWarning: Keep-alive timeout only applied to IKEv1 connections.\r\n\r\n\r\n\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# exit\r\nexit\r\n********@wb-xsm-1006:~$ \r\n\r\n<------ This is cmd_verify = True ------->\r\n \r\n********@wb-xsm-1006:~$ exit\r\ntail: output.txt: file truncated\r\nWelcome to AT&T vRouter \r\nVersion:      1908f\r\nDescription:  AT&T vRouter 5600 1908f VNF\r\nLinux wb-xsm-1006 4.19.0-trunk-********-amd64 #1 SMP PREEMPT Debian 4.19.93-0********5+1.3 (2020-01-29) x86_64\r\nLast login: Mon Apr  6 17:26:05 2020 from fd:192:168:64::4\r\n********@wb-xsm-1006:~$ \r\n********@wb-xsm-1006:~$ set terminal length 0\r\n********@wb-xsm-1006:~$ \r\n********@wb-xsm-1006:~$ configure\r\n\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# load /config/wb-xsm-1006-base-config.conf\r\nConfiguration loaded from '/config/wb-xsm-1006-base-config.conf' will replace the existing configuration\r\nUse 'compare' to view the changes, or 'commit' to make them active\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# commit\r\n[security vpn ipsec ike-group nmt-ike-group dead-peer-detection timeout 120]\r\nWarning: Keep-alive timeout only applied to IKEv1 connections.\r\n\r\n\r\n\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n********@wb-xsm-1006# exit\r\nexit\r\n********@wb-xsm-1006:~$ \r\n********@wb-xsm-1006:~$ \r\n********@wb-xsm-1006:~$ configure\r\n\r\n[edit]\r\n********@wb-xsm-1006# \r\n[edit]\r\n**********@wb-xsm-1006# set protocols ospf process 65 area 0 network '10.33.50.0/'\r\n[edit]\r\n********@wb-xsm-1006# set protocols ospf process 65 parameters router-id '10.33.50.\r\n.2'\r\n[edit]\r\n********@wb-xsm-1006# exit\r\n^C**\r\n\r\nI could not understand why it didn't read the whole file. \r\n\r\nHere is more python debugger info \r\n\r\nconnect = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\nfile_name = '/home/ac043s/software/python_development/vyatta/automation/tests/config_files/ospf/cfgospf001-1006.txt'\r\n\r\n    def apply_config_from_file(connect, file_name):\r\n    \r\n        apply_config_flag = True\r\n    \r\n        try:\r\n            param = {\r\n                'cmd_verify': True\r\n            }\r\n            output = connect.send_config_from_file(config_file=file_name, **param)\r\n            logging.info(output)\r\n            time.sleep(0.1)\r\n    \r\n            output = connect.commit(delay_factor=5)\r\n            logging.info(output)\r\n    \r\n            output = connect.exit_config_mode()\r\n            logging.info(output)\r\n        except:\r\n            logging.info(\"Error while applying configuration!\")\r\n            apply_config_flag = False\r\n>           sys.exit(0)\r\nE           SystemExit: 0\r\n\r\n../../vyatta_modules.py:25: SystemEx\r\n\r\nvyatta@wb-xsm-1006:~$  (vyatta_modules.py:53)\r\n2020-04-06 13:29:26 [    INFO] Configuring wb-xsm-1006 for test case OSPF001 (test_OSPF001.py:47)\r\n2020-04-06 13:29:51 [    INFO] Error while applying configuration! (vyatta_modules.py:23)\r\n\r\n\r\n\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef test_OSPF_001 \u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\u201a\u00c4\u00ef\r\n\r\nself = <paramiko.Channel 0 (open) window=2096921 -> <paramiko.Transport at 0xa975da0 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>, nbytes = 65535\r\n\r\n    def recv(self, nbytes):\r\n        \"\"\"\r\n        Receive data from the channel.  The return value is a string\r\n        representing the data received.  The maximum amount of data to be\r\n        received at once is specified by ``nbytes``.  If a string of\r\n        length zero is returned, the channel stream has closed.\r\n    \r\n        :param int nbytes: maximum number of bytes to read.\r\n        :return: received data, as a ``str``/``bytes``.\r\n    \r\n        :raises socket.timeout:\r\n            if no data is ready before the timeout set by `settimeout`.\r\n        \"\"\"\r\n        try:\r\n>           out = self.in_buffer.read(nbytes, self.timeout)\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/paramiko/channel.py:699: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <paramiko.buffered_pipe.BufferedPipe object at 0x7fd90a979a90>, nbytes = 65535, timeout = -0.00018215179443359375\r\n\r\n    def read(self, nbytes, timeout=None):\r\n        \"\"\"\r\n        Read data from the pipe.  The return value is a string representing\r\n        the data received.  The maximum amount of data to be received at once\r\n        is specified by ``nbytes``.  If a string of length zero is returned,\r\n        the pipe has been closed.\r\n    \r\n        The optional ``timeout`` argument can be a nonnegative float expressing\r\n        seconds, or ``None`` for no timeout.  If a float is given, a\r\n        `.PipeTimeout` will be raised if the timeout period value has elapsed\r\n        before any data arrives.\r\n    \r\n        :param int nbytes: maximum number of bytes to read\r\n        :param float timeout:\r\n            maximum seconds to wait (or ``None``, the default, to wait forever)\r\n        :return: the read data, as a ``str`` or ``bytes``\r\n    \r\n        :raises:\r\n            `.PipeTimeout` -- if a timeout was specified and no data was ready\r\n            before that timeout\r\n        \"\"\"\r\n        out = bytes()\r\n        self._lock.acquire()\r\n        try:\r\n            if len(self._buffer) == 0:\r\n                if self._closed:\r\n                    return out\r\n                # should we block?\r\n                if timeout == 0.0:\r\n                    raise PipeTimeout()\r\n                # loop here in case we get woken up but a different thread has\r\n                # grabbed everything in the buffer.\r\n                while (len(self._buffer) == 0) and not self._closed:\r\n                    then = time.time()\r\n                    self._cv.wait(timeout)\r\n                    if timeout is not None:\r\n                        timeout -= time.time() - then\r\n                        if timeout <= 0.0:\r\n>                           raise PipeTimeout()\r\nE                           paramiko.buffered_pipe.PipeTimeout\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/paramiko/buffered_pipe.py:164: PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nself = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\npattern = \"set\\\\ protocols\\\\ ospf\\\\ process\\\\ 65\\\\ parameters\\\\ router\\\\-id\\\\ \\\\'10\\\\.33\\\\.50\\\\.2\\\\'\", re_flags = 0, max_loops = 1000\r\n\r\n    def _read_channel_expect(self, pattern=\"\", re_flags=0, max_loops=150):\r\n        \"\"\"Function that reads channel until pattern is detected.\r\n    \r\n        pattern takes a regular expression.\r\n    \r\n        By default pattern will be self.base_prompt\r\n    \r\n        Note: this currently reads beyond pattern. In the case of SSH it reads MAX_BUFFER.\r\n        In the case of telnet it reads all non-blocking data.\r\n    \r\n        There are dependencies here like determining whether in config_mode that are actually\r\n        depending on reading beyond pattern.\r\n    \r\n        :param pattern: Regular expression pattern used to identify the command is done \\\r\n        (defaults to self.base_prompt)\r\n        :type pattern: str (regular expression)\r\n    \r\n        :param re_flags: regex flags used in conjunction with pattern to search for prompt \\\r\n        (defaults to no flags)\r\n        :type re_flags: int\r\n    \r\n        :param max_loops: max number of iterations to read the channel before raising exception.\r\n            Will default to be based upon self.timeout.\r\n        :type max_loops: int\r\n        \"\"\"\r\n        output = \"\"\r\n        if not pattern:\r\n            pattern = re.escape(self.base_prompt)\r\n        log.debug(f\"Pattern is: {pattern}\")\r\n    \r\n        i = 1\r\n        loop_delay = 0.1\r\n        # Default to making loop time be roughly equivalent to self.timeout (support old max_loops\r\n        # argument for backwards compatibility).\r\n        if max_loops == 150:\r\n            max_loops = int(self.timeout / loop_delay)\r\n        while i < max_loops:\r\n            if self.protocol == \"ssh\":\r\n                try:\r\n                    # If no data available will wait timeout seconds trying to read\r\n                    self._lock_netmiko_session()\r\n>                   new_data = self.remote_conn.recv(MAX_BUFFER)\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/netmiko/base_connection.py:550: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <paramiko.Channel 0 (open) window=2096921 -> <paramiko.Transport at 0xa975da0 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>, nbytes = 65535\r\n\r\n    def recv(self, nbytes):\r\n        \"\"\"\r\n        Receive data from the channel.  The return value is a string\r\n        representing the data received.  The maximum amount of data to be\r\n        received at once is specified by ``nbytes``.  If a string of\r\n        length zero is returned, the channel stream has closed.\r\n    \r\n        :param int nbytes: maximum number of bytes to read.\r\n        :return: received data, as a ``str``/``bytes``.\r\n    \r\n        :raises socket.timeout:\r\n            if no data is ready before the timeout set by `settimeout`.\r\n        \"\"\"\r\n        try:\r\n            out = self.in_buffer.read(nbytes, self.timeout)\r\n        except PipeTimeout:\r\n>           raise socket.timeout()\r\nE           socket.timeout\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/paramiko/channel.py:701: timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nconnect = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\nfile_name = '/home/ac043s/software/python_development/vyatta/automation/tests/config_files/ospf/cfgospf001-1006.txt'\r\n\r\n    def apply_config_from_file(connect, file_name):\r\n    \r\n        apply_config_flag = True\r\n    \r\n        try:\r\n            param = {\r\n                'cmd_verify': True\r\n            }\r\n>           output = connect.send_config_from_file(config_file=file_name, **param)\r\n\r\n../../vyatta_modules.py:13: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\nconfig_file = '/home/ac043s/software/python_development/vyatta/automation/tests/config_files/ospf/cfgospf001-1006.txt', kwargs = {'cmd_verify': True}\r\ncfg_file = <_io.TextIOWrapper name='/home/ac043s/software/python_development/vyatta/automation/tests/config_files/ospf/cfgospf001-1006.txt' mode='rt' encoding='utf-8'>\r\n\r\n    def send_config_from_file(self, config_file=None, **kwargs):\r\n        \"\"\"\r\n        Send configuration commands down the SSH channel from a file.\r\n    \r\n        The file is processed line-by-line and each command is sent down the\r\n        SSH channel.\r\n    \r\n        **kwargs are passed to send_config_set method.\r\n    \r\n        :param config_file: Path to configuration file to be sent to the device\r\n        :type config_file: str\r\n    \r\n        :param kwargs: params to be sent to send_config_set method\r\n        :type kwargs: dict\r\n        \"\"\"\r\n        with io.open(config_file, \"rt\", encoding=\"utf-8\") as cfg_file:\r\n>           return self.send_config_set(cfg_file, **kwargs)\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/netmiko/base_connection.py:1665: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\nconfig_commands = <_io.TextIOWrapper name='/home/ac043s/software/python_development/vyatta/automation/tests/config_files/ospf/cfgospf001-1006.txt' mode='rt' encoding='utf-8'>\r\nexit_config_mode = False, kwargs = {'cmd_verify': True}\r\n\r\n    def send_config_set(self, config_commands=None, exit_config_mode=False, **kwargs):\r\n        \"\"\"Remain in configuration mode.\"\"\"\r\n        return super().send_config_set(\r\n>           config_commands=config_commands, exit_config_mode=exit_config_mode, **kwargs\r\n        )\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/netmiko/vyos/vyos_ssh.py:100: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\nconfig_commands = <_io.TextIOWrapper name='/home/ac043s/software/python_development/vyatta/automation/tests/config_files/ospf/cfgospf001-1006.txt' mode='rt' encoding='utf-8'>\r\nexit_config_mode = False, delay_factor = 1, max_loops = 150, strip_prompt = False, strip_command = False, config_mode_command = None, cmd_verify = True\r\nenter_config_mode = True\r\n\r\n    def send_config_set(\r\n        self,\r\n        config_commands=None,\r\n        exit_config_mode=True,\r\n        delay_factor=1,\r\n        max_loops=150,\r\n        strip_prompt=False,\r\n        strip_command=False,\r\n        config_mode_command=None,\r\n        cmd_verify=True,\r\n        enter_config_mode=True,\r\n    ):\r\n        \"\"\"\r\n        Send configuration commands down the SSH channel.\r\n    \r\n        config_commands is an iterable containing all of the configuration commands.\r\n        The commands will be executed one after the other.\r\n    \r\n        Automatically exits/enters configuration mode.\r\n    \r\n        :param config_commands: Multiple configuration commands to be sent to the device\r\n        :type config_commands: list or string\r\n    \r\n        :param exit_config_mode: Determines whether or not to exit config mode after complete\r\n        :type exit_config_mode: bool\r\n    \r\n        :param delay_factor: Factor to adjust delays\r\n        :type delay_factor: int\r\n    \r\n        :param max_loops: Controls wait time in conjunction with delay_factor (default: 150)\r\n        :type max_loops: int\r\n    \r\n        :param strip_prompt: Determines whether or not to strip the prompt\r\n        :type strip_prompt: bool\r\n    \r\n        :param strip_command: Determines whether or not to strip the command\r\n        :type strip_command: bool\r\n    \r\n        :param config_mode_command: The command to enter into config mode\r\n        :type config_mode_command: str\r\n    \r\n        :param cmd_verify: Whether or not to verify command echo for each command in config_set\r\n        :type cmd_verify: bool\r\n    \r\n        :param enter_config_mode: Do you enter config mode before sending config commands\r\n        :type exit_config_mode: bool\r\n    \r\n        \"\"\"\r\n        delay_factor = self.select_delay_factor(delay_factor)\r\n        if config_commands is None:\r\n            return \"\"\r\n        elif isinstance(config_commands, str):\r\n            config_commands = (config_commands,)\r\n    \r\n        if not hasattr(config_commands, \"__iter__\"):\r\n            raise ValueError(\"Invalid argument passed into send_config_set\")\r\n    \r\n        # Send config commands\r\n        output = \"\"\r\n        if enter_config_mode:\r\n            cfg_mode_args = (config_mode_command,) if config_mode_command else tuple()\r\n            output += self.config_mode(*cfg_mode_args)\r\n    \r\n        if self.fast_cli:\r\n            for cmd in config_commands:\r\n                self.write_channel(self.normalize_cmd(cmd))\r\n            # Gather output\r\n            output += self._read_channel_timing(\r\n                delay_factor=delay_factor, max_loops=max_loops\r\n            )\r\n        elif not cmd_verify:\r\n            for cmd in config_commands:\r\n                self.write_channel(self.normalize_cmd(cmd))\r\n                time.sleep(delay_factor * 0.05)\r\n            # Gather output\r\n            output += self._read_channel_timing(\r\n                delay_factor=delay_factor, max_loops=max_loops\r\n            )\r\n        else:\r\n            for cmd in config_commands:\r\n                self.write_channel(self.normalize_cmd(cmd))\r\n    \r\n                # Make sure command is echoed\r\n>               new_output = self.read_until_pattern(pattern=re.escape(cmd.strip()))\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/netmiko/base_connection.py:1750: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>, args = ()\r\nkwargs = {'pattern': \"set\\\\ protocols\\\\ ospf\\\\ process\\\\ 65\\\\ parameters\\\\ router\\\\-id\\\\ \\\\'10\\\\.33\\\\.50\\\\.2\\\\'\"}\r\n\r\n    def read_until_pattern(self, *args, **kwargs):\r\n        \"\"\"Read channel until pattern detected. Return ALL data available.\"\"\"\r\n>       return self._read_channel_expect(*args, **kwargs)\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/netmiko/base_connection.py:627: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <netmiko.vyos.vyos_ssh.VyOSSSH object at 0x7fd90a975c18>\r\npattern = \"set\\\\ protocols\\\\ ospf\\\\ process\\\\ 65\\\\ parameters\\\\ router\\\\-id\\\\ \\\\'10\\\\.33\\\\.50\\\\.2\\\\'\", re_flags = 0, max_loops = 1000\r\n\r\n    def _read_channel_expect(self, pattern=\"\", re_flags=0, max_loops=150):\r\n        \"\"\"Function that reads channel until pattern is detected.\r\n    \r\n        pattern takes a regular expression.\r\n    \r\n        By default pattern will be self.base_prompt\r\n    \r\n        Note: this currently reads beyond pattern. In the case of SSH it reads MAX_BUFFER.\r\n        In the case of telnet it reads all non-blocking data.\r\n    \r\n        There are dependencies here like determining whether in config_mode that are actually\r\n        depending on reading beyond pattern.\r\n    \r\n        :param pattern: Regular expression pattern used to identify the command is done \\\r\n        (defaults to self.base_prompt)\r\n        :type pattern: str (regular expression)\r\n    \r\n        :param re_flags: regex flags used in conjunction with pattern to search for prompt \\\r\n        (defaults to no flags)\r\n        :type re_flags: int\r\n    \r\n        :param max_loops: max number of iterations to read the channel before raising exception.\r\n            Will default to be based upon self.timeout.\r\n        :type max_loops: int\r\n        \"\"\"\r\n        output = \"\"\r\n        if not pattern:\r\n            pattern = re.escape(self.base_prompt)\r\n        log.debug(f\"Pattern is: {pattern}\")\r\n    \r\n        i = 1\r\n        loop_delay = 0.1\r\n        # Default to making loop time be roughly equivalent to self.timeout (support old max_loops\r\n        # argument for backwards compatibility).\r\n        if max_loops == 150:\r\n            max_loops = int(self.timeout / loop_delay)\r\n        while i < max_loops:\r\n            if self.protocol == \"ssh\":\r\n                try:\r\n                    # If no data available will wait timeout seconds trying to read\r\n                    self._lock_netmiko_session()\r\n                    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n                    if len(new_data) == 0:\r\n                        raise EOFError(\"Channel stream closed by remote device.\")\r\n                    new_data = new_data.decode(\"utf-8\", \"ignore\")\r\n                    if self.ansi_escape_codes:\r\n                        new_data = self.strip_ansi_escape_codes(new_data)\r\n                    log.debug(f\"_read_channel_expect read_data: {new_data}\")\r\n                    output += new_data\r\n                    self._write_session_log(new_data)\r\n                except socket.timeout:\r\n                    raise NetmikoTimeoutException(\r\n>                       \"Timed-out reading channel, data not available.\"\r\n                    )\r\nE                   netmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\n/home/ac043s/python3-virtual-environments/python3env/lib64/python3.6/site-packages/netmiko/base_connection.py:561: NetmikoTimeoutException\r\n\r\nDuring handling of the above exception, another exception occurred:", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1656", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1656/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1656/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1656/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1656", "id": 594221261, "node_id": "MDU6SXNzdWU1OTQyMjEyNjE=", "number": 1656, "title": "Nornir/Netmiko - Piped device commands fail after update to Netmiko 3.0", "user": {"login": "friday963", "id": 49578051, "node_id": "MDQ6VXNlcjQ5NTc4MDUx", "avatar_url": "https://avatars1.githubusercontent.com/u/49578051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/friday963", "html_url": "https://github.com/friday963", "followers_url": "https://api.github.com/users/friday963/followers", "following_url": "https://api.github.com/users/friday963/following{/other_user}", "gists_url": "https://api.github.com/users/friday963/gists{/gist_id}", "starred_url": "https://api.github.com/users/friday963/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/friday963/subscriptions", "organizations_url": "https://api.github.com/users/friday963/orgs", "repos_url": "https://api.github.com/users/friday963/repos", "events_url": "https://api.github.com/users/friday963/events{/privacy}", "received_events_url": "https://api.github.com/users/friday963/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-05T02:43:25Z", "updated_at": "2020-04-28T15:42:33Z", "closed_at": "2020-04-28T15:42:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "After updating from netmiko 2.4.2 to netmiko 3.0 (python 3.7.4)  I'm unable to run commands with pipes.  I'm getting netmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.  After seeing some suggestion I added cmd_verify=False but it continued to fail.  I've had this behavior for two vendors Alcatel Lucent, and Juniper.  Here is the function I'm calling and the output.\r\n\r\n`    def getVlansOnIntf(self, intf):\r\n        \"\"\"\r\n\r\n        :param intf: local interface you want to check for vlans present.\r\n        :return: return all vlans as a list if they are present.  If none are present return none.\r\n        \"\"\"\r\n        vlans = self.hosts.run(\r\n            task=netmiko_send_command,\r\n            command_string=f\"\"\"show configuration interface {intf} | display set | match vlan-id\"\"\", cmd_verify=False\r\n        )\r\n        print_result(vlans)\r\n        vlanlist = re.findall(\"vlan-id\\s+(\\d+)\", vlans[self.hostname][0].result)\r\n        if vlanlist:\r\n            return vlanlist\r\n        else:\r\n            return None`\r\n\r\n`netmiko_send_command************************************************************\r\n* PX3-HE-CAR-Automate01 ** changed : False *************************************\r\nvvvv netmiko_send_command ** changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO\r\nshow configuration interface ae1\r\n                                                  ^\r\nsyntax error.\r\n\r\nautoeng@PX3-HE-CAR-Automate01> show configuration interface ae1   |interface ae1 interface ae1dinterface ae1iinterface ae1sinterface ae1pinterface ae1linterface ae1ainterface ae1yinterface ae1 interface ae1sinterface ae1einterface ae1tinterface ae1 interface ae1|interface ae1 interface ae1minterface ae1ainterface ae1tinterface ae1cinterface ae1hinterface ae1 interface ae1vinterface ae1linterface ae1ainterface ae1ninterface ae1-interface ae1iinterface ae1dinterface ae1\r\nerror: syntax error: ae1\r\n\r\n^^^^ END netmiko_send_command ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1652", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1652/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1652/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1652/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1652", "id": 593803495, "node_id": "MDU6SXNzdWU1OTM4MDM0OTU=", "number": 1652, "title": "Fortinet vdom list problem", "user": {"login": "umutsasmaz", "id": 59434590, "node_id": "MDQ6VXNlcjU5NDM0NTkw", "avatar_url": "https://avatars3.githubusercontent.com/u/59434590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umutsasmaz", "html_url": "https://github.com/umutsasmaz", "followers_url": "https://api.github.com/users/umutsasmaz/followers", "following_url": "https://api.github.com/users/umutsasmaz/following{/other_user}", "gists_url": "https://api.github.com/users/umutsasmaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/umutsasmaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umutsasmaz/subscriptions", "organizations_url": "https://api.github.com/users/umutsasmaz/orgs", "repos_url": "https://api.github.com/users/umutsasmaz/repos", "events_url": "https://api.github.com/users/umutsasmaz/events{/privacy}", "received_events_url": "https://api.github.com/users/umutsasmaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-04T11:28:58Z", "updated_at": "2020-04-04T11:48:35Z", "closed_at": "2020-04-04T11:47:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Kirk,\r\nLong time reader first time writer here. I have a problem with Fortinet firewalls. When i try to get vdom list from devices, i need to execute commands with this order:\r\n\"config vdom\"\r\n\"edit ?\"\r\nIf everything goes well i will get a response from device as below:\r\n<vdom>    Virtual Domain Name\r\nroot\r\n\r\nBut it does not work and im thinking that is is because in shell im pressing question mark but not pressing enter key. In python it stuck in edit section and throws an error from device :\r\n\r\nno object in the end\r\nCommand fail. Return code -160\r\n\r\nWhat im trying to achieve after all is connecting a firewall and checking if there are vdoms. If firewall is configured with vdom i will loop through them and get some info from them. But since i couldnt get the vdom list as i am getting with cli im kind of stuck. Im also attaching my script to here since its a basic one.\r\n\r\nI tried both with '?' and char representation as '63' also i tried using backspace with deleting \"edit ?\" section but ran out of ideas. \r\nI also looked for netmiko and Fortigate documentation and couldn't find anything to help me solve this.\r\n\r\n`from netmiko import ConnectHandler\r\nimport logging\r\nimport time\r\n\r\nlogging.basicConfig(level=logging.DEBUG)\r\nlogger = logging.getLogger('global')\r\n\r\nmy_device = {\r\n    \"ip\": \"192.168.1.112\",\r\n    \"username\": \"admin\",\r\n    \"password\": 'admin',\r\n    \"device_type\": \"fortinet\",\r\n}\r\ntry:\r\n    start = time.time()\r\n\r\n    connect = ConnectHandler(**my_device)\r\n    output = connect.send_command_timing('config vdom',delay_factor=4)\r\n    output = connect.send_command_timing('edit {}'.format(chr(63)),delay_factor=4)\r\n    output = output.splitlines()\r\n    test = connect.send_command_timing('\\b\\b\\b\\b\\b',delay_factor=2)\r\n\r\n    print(output)\r\n    connect.disconnect()\r\n    print('\\nAll process took {} seconds '.format(time.time()-start))\r\n\r\nexcept Exception as e:\r\n    print(e)`\r\n[forti_debug.txt](https://github.com/ktbyers/netmiko/files/4431234/forti_debug.txt)\r\n\r\n\r\nI would be more then happy if you help me to solve this or point a way to the light. I am sitting in the dark atm.\r\n\r\nBest Regards,\r\nUmut", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1651", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1651/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1651/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1651/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1651", "id": 593353434, "node_id": "MDU6SXNzdWU1OTMzNTM0MzQ=", "number": 1651, "title": "upgrade from version 2.4.1 to upper version limit send_command() char length", "user": {"login": "lucamotterle", "id": 8514835, "node_id": "MDQ6VXNlcjg1MTQ4MzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8514835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucamotterle", "html_url": "https://github.com/lucamotterle", "followers_url": "https://api.github.com/users/lucamotterle/followers", "following_url": "https://api.github.com/users/lucamotterle/following{/other_user}", "gists_url": "https://api.github.com/users/lucamotterle/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucamotterle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucamotterle/subscriptions", "organizations_url": "https://api.github.com/users/lucamotterle/orgs", "repos_url": "https://api.github.com/users/lucamotterle/repos", "events_url": "https://api.github.com/users/lucamotterle/events{/privacy}", "received_events_url": "https://api.github.com/users/lucamotterle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-03T12:39:29Z", "updated_at": "2020-04-24T15:57:35Z", "closed_at": "2020-04-24T15:57:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "In version 2.4.1 I'm able to send command with a length counting more than 100 chars. After upgrading, I tested 3.0.0 and 3.1, command seems limit to 40 char max.\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1650", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1650/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1650/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1650/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1650", "id": 593192642, "node_id": "MDU6SXNzdWU1OTMxOTI2NDI=", "number": 1650, "title": "Error when sending command for Huawei device", "user": {"login": "vineeth122", "id": 16621229, "node_id": "MDQ6VXNlcjE2NjIxMjI5", "avatar_url": "https://avatars0.githubusercontent.com/u/16621229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vineeth122", "html_url": "https://github.com/vineeth122", "followers_url": "https://api.github.com/users/vineeth122/followers", "following_url": "https://api.github.com/users/vineeth122/following{/other_user}", "gists_url": "https://api.github.com/users/vineeth122/gists{/gist_id}", "starred_url": "https://api.github.com/users/vineeth122/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vineeth122/subscriptions", "organizations_url": "https://api.github.com/users/vineeth122/orgs", "repos_url": "https://api.github.com/users/vineeth122/repos", "events_url": "https://api.github.com/users/vineeth122/events{/privacy}", "received_events_url": "https://api.github.com/users/vineeth122/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-03T07:56:41Z", "updated_at": "2020-04-03T10:05:17Z", "closed_at": "2020-04-03T10:04:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "The script is generating an error when sending the command to the Huawei device through telnet\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/utilities.py\", line 347, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1430, in send_command\r\n    search_pattern\r\nOSError: Search pattern never detected in send_command_expect: \\<TAAEEL\\-MANAGEDNOC_2019021274\\>\r\n\r\n```\r\n\r\n@ktbyers please assist me on this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1647", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1647/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1647/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1647/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1647", "id": 591081702, "node_id": "MDU6SXNzdWU1OTEwODE3MDI=", "number": 1647, "title": "Not able to connect DELL OS 10 switches ", "user": {"login": "kakollu007", "id": 34521259, "node_id": "MDQ6VXNlcjM0NTIxMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/34521259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kakollu007", "html_url": "https://github.com/kakollu007", "followers_url": "https://api.github.com/users/kakollu007/followers", "following_url": "https://api.github.com/users/kakollu007/following{/other_user}", "gists_url": "https://api.github.com/users/kakollu007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kakollu007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kakollu007/subscriptions", "organizations_url": "https://api.github.com/users/kakollu007/orgs", "repos_url": "https://api.github.com/users/kakollu007/repos", "events_url": "https://api.github.com/users/kakollu007/events{/privacy}", "received_events_url": "https://api.github.com/users/kakollu007/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-31T12:49:53Z", "updated_at": "2020-05-07T16:15:20Z", "closed_at": "2020-05-07T15:03:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Error :\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/kkumar/AppData/Local/Programs/Python/Python37-32/test.py\", line 46, in <module>\r\n    net_connect = Netmiko(**my_device)\r\n  File \"C:\\Users\\kkumar\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 218, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"C:\\Users\\kkumar\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 271, in __init__\r\n    self._try_session_preparation()\r\n  File \"C:\\Users\\kkumar\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 650, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"C:\\Users\\kkumar\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 670, in session_preparation\r\n    self.set_base_prompt()\r\n  File \"C:\\Users\\kkumar\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 957, in set_base_prompt\r\n    prompt = self.find_prompt(delay_factor=delay_factor)\r\n  File \"C:\\Users\\kkumar\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 998, in find_prompt\r\n    raise ValueError(\"Unable to find prompt: {}\".format(prompt))\r\nValueError: Unable to find prompt: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1646", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1646/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1646/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1646/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1646", "id": 590622266, "node_id": "MDU6SXNzdWU1OTA2MjIyNjY=", "number": 1646, "title": "syntax error under cisco_base_connection.py, line 143", "user": {"login": "archhorde", "id": 60984654, "node_id": "MDQ6VXNlcjYwOTg0NjU0", "avatar_url": "https://avatars1.githubusercontent.com/u/60984654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/archhorde", "html_url": "https://github.com/archhorde", "followers_url": "https://api.github.com/users/archhorde/followers", "following_url": "https://api.github.com/users/archhorde/following{/other_user}", "gists_url": "https://api.github.com/users/archhorde/gists{/gist_id}", "starred_url": "https://api.github.com/users/archhorde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/archhorde/subscriptions", "organizations_url": "https://api.github.com/users/archhorde/orgs", "repos_url": "https://api.github.com/users/archhorde/repos", "events_url": "https://api.github.com/users/archhorde/events{/privacy}", "received_events_url": "https://api.github.com/users/archhorde/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-30T21:53:33Z", "updated_at": "2020-03-30T22:12:33Z", "closed_at": "2020-03-30T22:12:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to run a script calling this library I get the following traceback.\r\n\r\nTraceback (most recent call last):\r\n  File \"change_main.py\", line 1, in <module>\r\n    from netmiko import ConnectHandler\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\__init__.py\", line 7, in <module>\r\n    from netmiko.ssh_dispatcher import ConnectHandler\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 2, in <module>\r\n    from netmiko.a10 import A10SSH\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\a10\\__init__.py\", line 1, in <module>\r\n    from netmiko.a10.a10_ssh import A10SSH\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\a10\\a10_ssh.py\", line 3, in <module>\r\n    from netmiko.cisco_base_connection import CiscoSSHConnection\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 143\r\n    msg = f\"Login failed: {self.host}\"\r\n                                     ^\r\nSyntaxError: invalid syntax\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1640", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1640/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1640/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1640/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1640", "id": 587095911, "node_id": "MDU6SXNzdWU1ODcwOTU5MTE=", "number": 1640, "title": "SCP EOFError when getting file from Cisco ASA", "user": {"login": "mrkcmo", "id": 32075075, "node_id": "MDQ6VXNlcjMyMDc1MDc1", "avatar_url": "https://avatars0.githubusercontent.com/u/32075075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrkcmo", "html_url": "https://github.com/mrkcmo", "followers_url": "https://api.github.com/users/mrkcmo/followers", "following_url": "https://api.github.com/users/mrkcmo/following{/other_user}", "gists_url": "https://api.github.com/users/mrkcmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrkcmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrkcmo/subscriptions", "organizations_url": "https://api.github.com/users/mrkcmo/orgs", "repos_url": "https://api.github.com/users/mrkcmo/repos", "events_url": "https://api.github.com/users/mrkcmo/events{/privacy}", "received_events_url": "https://api.github.com/users/mrkcmo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-24T16:28:27Z", "updated_at": "2020-03-25T15:12:08Z", "closed_at": "2020-03-25T15:12:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am seeing the following traceback when using the SCPCon module in Netmiko. \r\n\r\n```\r\n            scp_conn = SCPConn(device)\r\n            scp_conn.establish_scp_conn()\r\n            scp_conn.scp_get_file(\"disk0:/%s\" % dut, dest_acl_file)\r\n            scp_conn.close()\r\n```\r\n\r\nI get the following traceback on the scp_get_file operation:\r\n```\r\nTraceback (most recent call last):\r\n  File \"facl_azure_sql.py\", line 269, in <module>\r\n    scp_conn.scp_get_file(\"disk0:/%s\" % dut, dest_acl_file)\r\n  File \"E:\\Python37\\lib\\site-packages\\netmiko\\scp_handler.py\", line 45, in scp_get_file\r\n    self.scp_client.get(source_file, dest_file)\r\n  File \"E:\\Python37\\lib\\site-packages\\scp.py\", line 239, in get\r\n    self.close()\r\n  File \"E:\\Python37\\lib\\site-packages\\scp.py\", line 251, in close\r\n    self.channel.close()\r\n  File \"E:\\Python37\\lib\\site-packages\\paramiko\\channel.py\", line 671, in close\r\n    self.transport._send_user_message(m)\r\n  File \"E:\\Python37\\lib\\site-packages\\paramiko\\transport.py\", line 1863, in _send_user_message\r\n    self._send_message(data)\r\n  File \"E:\\Python37\\lib\\site-packages\\paramiko\\transport.py\", line 1839, in _send_message\r\n    self.packetizer.send_message(data)\r\n  File \"E:\\Python37\\lib\\site-packages\\paramiko\\packet.py\", line 431, in send_message\r\n    self.write_all(out)\r\n  File \"E:\\Python37\\lib\\site-packages\\paramiko\\packet.py\", line 367, in write_all\r\n    raise EOFError()\r\nEOFError\r\n```\r\nThe file gets downloaded and sometimes it will works without the error. But most times I get the error. \r\n\r\nAny thoughts? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1639", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1639/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1639/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1639/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1639", "id": 586806219, "node_id": "MDU6SXNzdWU1ODY4MDYyMTk=", "number": 1639, "title": "How to figure out \"OSError: Socket is closed.\" is about \"send_config_set(config_commands=)\"", "user": {"login": "YMont", "id": 58437649, "node_id": "MDQ6VXNlcjU4NDM3NjQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/58437649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YMont", "html_url": "https://github.com/YMont", "followers_url": "https://api.github.com/users/YMont/followers", "following_url": "https://api.github.com/users/YMont/following{/other_user}", "gists_url": "https://api.github.com/users/YMont/gists{/gist_id}", "starred_url": "https://api.github.com/users/YMont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YMont/subscriptions", "organizations_url": "https://api.github.com/users/YMont/orgs", "repos_url": "https://api.github.com/users/YMont/repos", "events_url": "https://api.github.com/users/YMont/events{/privacy}", "received_events_url": "https://api.github.com/users/YMont/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-24T09:08:59Z", "updated_at": "2020-04-27T17:43:42Z", "closed_at": "2020-04-27T17:43:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Question describe:\r\nI got some problem,it's about \"config_commands\".\r\nI want to change some router's parameter.\r\nI gave two order is \"duplex full\" and \"speed10(before speed 100)\",but just first order work.\r\nAnd when python run the second order,IDLE show \"OSError: Socket is closed\".\r\nBut the first parameter be changed already. (duplex half->full)\r\n\r\nI don't know how fix it\r\n\r\nThanks for your help\r\nappreciate\r\n------------------------------\r\npython code:\r\n#!/usr/bin/env python\r\nfrom __future__ import print_function, unicode_literals\r\n\r\nimport netmiko\r\nfrom netmiko import ConnectHandler\r\n\r\nmy_device = {\r\n    \"host\": \"xxx.xxx.xxx.xxx\",\r\n    \"username\": \"xxx\",\r\n    \"password\": \"xxx\",\r\n    \"device_type\": \"xxx\",\r\n}\r\nnet_connect = ConnectHandler(**my_device)\r\noutput = net_connect.send_config_set(config_commands=[\"interface fastEthernet 0/1\",\r\n                                                      \"duplex full\",\r\n                                                      \"speed 10\"])\r\nprint(output)\r\nnet_connect.disconnect()\r\n------------------------------\r\nError Code:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Desktop\\config_changes_modify_2.py\", line 74, in <module>\r\n    output = net_connect.send_config_set(config_commands=[\"interface fastEthernet 0/1\",\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 959, in send_config_set\r\n    self.write_channel(self.normalize_cmd(cmd))\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 218, in write_channel\r\n    self._write_channel(out_data)\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 207, in _write_channel\r\n    self.remote_conn.sendall(write_bytes(out_data))\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 846, in sendall\r\n    sent = self.send(s)\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 801, in send\r\n    return self._send(s, m)\r\n  File \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 1198, in _send\r\n    raise socket.error(\"Socket is closed\")\r\nOSError: Socket is closed\r\n", "performed_via_github_app": null, "score": 1.0}]}