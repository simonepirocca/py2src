{"total_count": 25985, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ansible/ansible/issues/71392", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71392/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71392/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71392/events", "html_url": "https://github.com/ansible/ansible/issues/71392", "id": 683461141, "node_id": "MDU6SXNzdWU2ODM0NjExNDE=", "number": 71392, "title": "resource shares per vm", "user": {"login": "johnnnnnnnnnnnnnn", "id": 48522360, "node_id": "MDQ6VXNlcjQ4NTIyMzYw", "avatar_url": "https://avatars1.githubusercontent.com/u/48522360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnnnnnnnnnnnnnn", "html_url": "https://github.com/johnnnnnnnnnnnnnn", "followers_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/followers", "following_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/following{/other_user}", "gists_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/subscriptions", "organizations_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/orgs", "repos_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/repos", "events_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/events{/privacy}", "received_events_url": "https://api.github.com/users/johnnnnnnnnnnnnnn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-21T10:25:05Z", "updated_at": "2020-08-21T10:27:06Z", "closed_at": "2020-08-21T10:26:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nBe able to specify resource shares on a per vm basis in the vmware_guest module. Currently one can only specify limits and/or reservations.\r\n\r\n##### ISSUE TYPE\r\nadd new choices to hardware parameter in vmware_guest module.\r\n\r\n`cpu_shares` (string): low, normal, high, custom (DEFAULT: normal)\r\n`memory_shares` (string): low, normal, high, custom, (DEFAULT: normal)\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ADDITIONAL INFORMATION\r\nSometime, especially if you do not make use of resource pools in genereal, you have the need to modify shares settings on a per vm basis.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71386", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71386/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71386/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71386/events", "html_url": "https://github.com/ansible/ansible/issues/71386", "id": 683103235, "node_id": "MDU6SXNzdWU2ODMxMDMyMzU=", "number": 71386, "title": "docker_swarm_service continuously attempts to update Swarm services which use host network", "user": {"login": "pa-yourserveradmin-com", "id": 26867265, "node_id": "MDQ6VXNlcjI2ODY3MjY1", "avatar_url": "https://avatars3.githubusercontent.com/u/26867265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pa-yourserveradmin-com", "html_url": "https://github.com/pa-yourserveradmin-com", "followers_url": "https://api.github.com/users/pa-yourserveradmin-com/followers", "following_url": "https://api.github.com/users/pa-yourserveradmin-com/following{/other_user}", "gists_url": "https://api.github.com/users/pa-yourserveradmin-com/gists{/gist_id}", "starred_url": "https://api.github.com/users/pa-yourserveradmin-com/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pa-yourserveradmin-com/subscriptions", "organizations_url": "https://api.github.com/users/pa-yourserveradmin-com/orgs", "repos_url": "https://api.github.com/users/pa-yourserveradmin-com/repos", "events_url": "https://api.github.com/users/pa-yourserveradmin-com/events{/privacy}", "received_events_url": "https://api.github.com/users/pa-yourserveradmin-com/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-20T21:19:38Z", "updated_at": "2020-08-20T21:22:13Z", "closed_at": "2020-08-20T21:22:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n\r\nThe problem is docker_swarm_service module works incorrectly with Swarm services which use host network(s) and continuously attempts to update such services due to wrong processing of host networks.\r\n\r\nSample patch which also may help to solve the issue can be found in [f43219827dbabf33f43af2114838ee20].\r\n\r\n[f43219827dbabf33f43af2114838ee20]: https://gist.github.com/pa-yourserveradmin-com/f43219827dbabf33f43af2114838ee20\r\n\r\n##### ISSUE TYPE\r\n\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n\r\ndocker_swarm_service\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```paste below\r\nansible 2.9.12\r\n  config file = /home/pa/PycharmProjects/ansible/ansible.cfg\r\n  configured module search path = ['/home/pa/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/pa/PycharmProjects/ansible/venv/lib64/python3.8/site-packages/ansible\r\n  executable location = /home/pa/PycharmProjects/ansible/venv/bin/ansible\r\n  python version = 3.8.5 (default, Aug 12 2020, 00:00:00) [GCC 10.2.1 20200723 (Red Hat 10.2.1-1)]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n```paste below\r\nANSIBLE_PIPELINING(/home/pa/PycharmProjects/ansible/ansible.cfg) = True\r\nDEFAULT_CALLBACK_WHITELIST(/home/pa/PycharmProjects/ansible/ansible.cfg) = ['profile_tasks']\r\nDISPLAY_SKIPPED_HOSTS(env: ANSIBLE_DISPLAY_SKIPPED_HOSTS) = False\r\nHOST_KEY_CHECKING(env: ANSIBLE_HOST_KEY_CHECKING) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n\r\nDocker server and API information:\r\n\r\n```\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.11\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.13.10\r\n  Git commit:       42e35e61f3\r\n  Built:            Mon Jun  1 09:12:26 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\nPython docker module version:\r\n\r\n```\r\nName: docker\r\nVersion: 4.3.0\r\nSummary: A Python library for the Docker Engine API.\r\nHome-page: https://github.com/docker/docker-py\r\nAuthor: None\r\nAuthor-email: None\r\nLicense: Apache License 2.0\r\nLocation: /usr/lib/python3.6/site-packages\r\nRequires: six, websocket-client, requests\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nBefore all you will need Docker Swarm cluster to deploy service using example playbook provided below.\r\n\r\nExample playbook which will deploy Nginx containers to Swarm using host network (please customize it according to local testing environment):\r\n\r\n```yaml\r\n---\r\n- hosts: all\r\n\r\n  tasks:\r\n\r\n    - docker_swarm_service:\r\n        image: nginx:latest\r\n        mode: global\r\n        name: nginx\r\n        networks:\r\n          - host\r\n\r\n```\r\n\r\nOnce playbook is applied - run it once again with `--check --diff` options to see planned changes.\r\n\r\nRun playbook once again and it will report changes in Swarm service configuration while service configuration actually not changed (i.e. no downtime actually happen what significantly reduces impact of this issue).\r\n\r\n##### EXPECTED RESULTS\r\n\r\nNo changes reported in dry-run and run modes when nothing really changed in service configuration.\r\n\r\n##### ACTUAL RESULTS\r\n\r\nEither in dry-run or run mode Ansible updates Swarm service with wrong network ID:\r\n\r\n```diff\r\n--- before\r\n+++ after\r\n@@ -1,7 +1,7 @@\r\n {\r\n     \"networks\": [\r\n         {\r\n-            \"id\": \"exvfwyotuxat3z1bt38s3rork\"\r\n+            \"id\": \"71d4bd2cf80870bf68df480c876e01ea02183d8fc33d292658c49f323e5c795a\"\r\n         }\r\n     ]\r\n }\r\n```\r\n\r\nCorrect network exvfwyotuxat3z1bt38s3rork has swarm scope and inspect returns\r\nthe next information:\r\n\r\n```\r\n$ docker network inspect exvfwyotuxat3z1bt38s3rork\r\n[\r\n    {\r\n        \"Name\": \"host\",\r\n        \"Id\": \"exvfwyotuxat3z1bt38s3rork\",\r\n        \"Created\": \"2020-07-01T17:26:48.708139127Z\",\r\n        \"Scope\": \"swarm\",\r\n        \"Driver\": \"host\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"\",\r\n            \"Options\": null,\r\n            \"Config\": []\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": null,\r\n        \"Options\": null,\r\n        \"Labels\": {\r\n            \"com.docker.swarm.predefined\": \"true\"\r\n        }\r\n    }\r\n]\r\n```\r\n\r\nWrong network 71d4bd2cf80870bf68df480c876e01ea02183d8fc33d292658c49f323e5c795a has local scope and inspect returns the next information:\r\n\r\n```\r\n$ docker network inspect 71d4bd2cf80870bf68df480c876e01ea02183d8fc33d292658c49f323e5c795a\r\n[\r\n    {\r\n        \"Name\": \"host\",\r\n        \"Id\": \"71d4bd2cf80870bf68df480c876e01ea02183d8fc33d292658c49f323e5c795a\",\r\n        \"Created\": \"2020-06-26T14:09:30.161137267Z\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"host\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": []\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {},\r\n        \"Options\": {},\r\n        \"Labels\": {}\r\n    }\r\n]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71381", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71381/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71381/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71381/events", "html_url": "https://github.com/ansible/ansible/issues/71381", "id": 682919159, "node_id": "MDU6SXNzdWU2ODI5MTkxNTk=", "number": 71381, "title": "elb_target_group module fails sporadically (1 in 3 times) when creating new target group", "user": {"login": "benileo", "id": 5097742, "node_id": "MDQ6VXNlcjUwOTc3NDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/5097742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benileo", "html_url": "https://github.com/benileo", "followers_url": "https://api.github.com/users/benileo/followers", "following_url": "https://api.github.com/users/benileo/following{/other_user}", "gists_url": "https://api.github.com/users/benileo/gists{/gist_id}", "starred_url": "https://api.github.com/users/benileo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benileo/subscriptions", "organizations_url": "https://api.github.com/users/benileo/orgs", "repos_url": "https://api.github.com/users/benileo/repos", "events_url": "https://api.github.com/users/benileo/events{/privacy}", "received_events_url": "https://api.github.com/users/benileo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-20T17:04:32Z", "updated_at": "2020-08-20T17:38:51Z", "closed_at": "2020-08-20T17:25:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### SUMMARY\r\nAffects 2.7, 2.8, 2.9+ (I reproduced with 2.7 and 2.9)\r\nWhen creating a new target group this module has started to fail for us. Running a subsequent time it is always successful. I'm fairly certain this is due to some new AWS slowness, as after the target group is created it is immediately fetched. And sometimes it is not returned from the AWS. I was able to hack the module and add a retry in this code:\r\n\r\n```\r\ntry:\r\n    connection.create_target_group(**params)\r\n    changed = True\r\n    new_target_group = True\r\nexcept (botocore.exceptions.ClientError, botocore.exceptions.BotoCoreError) as e:\r\n    module.fail_json_aws(e, msg=\"Couldn't create target group\")\r\n\r\n# THIS RETURN NONETYPE SOMETIMES\r\n# I hacked a fix by retrying this until truthy value returned...\r\ntg = get_target_group(connection, module)\r\n```\r\n\r\nHere is the error output\r\n```\r\n*********************************************************************************************************************************************\r\nUsing module file /home/user/venv/4.6.9/lib/python3.6/site-packages/ansible/modules/cloud/amazon/elb_target_group.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: user\r\n<127.0.0.1> EXEC /bin/sh -c '/home/fulcrum/venv/4.6.9/bin/python3 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 113, in <module>\r\n  File \"<stdin>\", line 105, in _ansiballz_main\r\n  File \"<stdin>\", line 48, in invoke_module\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_elb_target_group_payload_4pmqhg48/__main__.py\", line 734, in <module>\r\n  File \"/tmp/ansible_elb_target_group_payload_4pmqhg48/__main__.py\", line 728, in main\r\n  File \"/tmp/ansible_elb_target_group_payload_4pmqhg48/__main__.py\", line 616, in create_or_update_target_group\r\nTypeError: 'NoneType' object is not subscriptable\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"<stdin>\\\", line 113, in <module>\\n  File \\\"<stdin>\\\", line 105, in _ansiballz_main\\n  File \\\"<stdin>\\\", line 48, in invoke_module\\n  File \\\"/usr/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/tmp/ansible_elb_target_group_payload_4pmqhg48/__main__.py\\\", line 734, in <module>\\n  File \\\"/tmp/ansible_elb_target_group_payload_4pmqhg48/__main__.py\\\", line 728, in main\\n  File \\\"/tmp/ansible_elb_target_group_payload_4pmqhg48/__main__.py\\\", line 616, in create_or_update_target_group\\nTypeError: 'NoneType' object is not subscriptable\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n    \"rc\": 1\r\n}\r\n    to retry, use: --limit @/home/fulcrum/.ansible-retry/provision-all.retry\r\n\r\n```\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nelb_target_group\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n (2.7+)\r\nansible 2.7.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/usr/share/ansible']\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/usr/share/ansible']\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nansible-config dump --only-changed\r\nANSIBLE_PIPELINING(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_FORKS(/etc/ansible/ansible.cfg) = 20\r\nDEFAULT_GATHERING(/etc/ansible/ansible.cfg) = implicit\r\nDEFAULT_LOOKUP_PLUGIN_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/lookup_plugins']\r\nDEFAULT_MODULE_PATH(/etc/ansible/ansible.cfg) = ['/usr/share/ansible']\r\nRETRY_FILES_SAVE_PATH(/etc/ansible/ansible.cfg) = /home/user/.ansible-retry\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nOS: Ubuntu 18.04\r\nKernel: 4.15.0-1065-aws\r\n\r\n##### STEPS TO REPRODUCE\r\nRun the elb_target_group playbook in ca-central-1 AWS region\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71378", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71378/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71378/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71378/events", "html_url": "https://github.com/ansible/ansible/issues/71378", "id": 682831700, "node_id": "MDU6SXNzdWU2ODI4MzE3MDA=", "number": 71378, "title": "Import of nested roles in collections does not work", "user": {"login": "mnecas", "id": 18332586, "node_id": "MDQ6VXNlcjE4MzMyNTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/18332586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mnecas", "html_url": "https://github.com/mnecas", "followers_url": "https://api.github.com/users/mnecas/followers", "following_url": "https://api.github.com/users/mnecas/following{/other_user}", "gists_url": "https://api.github.com/users/mnecas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mnecas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mnecas/subscriptions", "organizations_url": "https://api.github.com/users/mnecas/orgs", "repos_url": "https://api.github.com/users/mnecas/repos", "events_url": "https://api.github.com/users/mnecas/events{/privacy}", "received_events_url": "https://api.github.com/users/mnecas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-20T15:46:50Z", "updated_at": "2020-08-20T19:34:18Z", "closed_at": "2020-08-20T19:34:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nHi,\r\nI was testing collections and found out that the module for including roles does not work for a nested role in the collection.\r\nI have tested it with both `import_role` and `include_role`.\r\n\r\nMaybe I have missed something if so please let me know.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\ninclude_role\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/mnecas/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.6.8 (default, Apr 16 2020, 01:36:27) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\n\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\nCreate **collection** with **roles** structure like this\r\n\r\nroles\r\n\u2514\u2500\u2500 test_role\r\n....\u251c\u2500\u2500 roles\r\n....\u2502.....\u2514\u2500\u2500 test_inside_role\r\n....\u2502........\u2514\u2500\u2500 tasks\r\n....\u2502...............\u2514\u2500\u2500 main.yml\r\n....\u2514\u2500\u2500 tasks\r\n............\u2514\u2500\u2500 main.yml\r\n\r\n\r\n**Playbook:**\r\n```yaml\r\n---\r\n- name: Test\r\n  hosts: localhost\r\n  roles:\r\n    - test_role\r\n  collections:\r\n    - namepsace.name\r\n```\r\n\r\n\r\n**roles/test_role/tasks/main.yml**\r\n```yaml\r\n---\r\n- debug:\r\n    msg: \"test1\"\r\n- include_role:\r\n    name: \"namespace.name.test_inside_role\"\r\n```\r\nI have also tried\r\n```yaml\r\n- include_role:\r\n    name: \"namespace.name.test_inside_role\"\r\n```\r\n**roles/test_role/roles/test_inside_role/tasks/main.yml**\r\n```yaml\r\n---\r\n- debug:\r\n    msg: \"test2\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nERROR! the role 'ovirt.ovirt.test_inside_role' was not found in ovirt.ovirt:ansible.builtin:/home/mnecas/Desktop/Projects/modules/roles:/home/mnecas/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/mnecas/Desktop/Projects/modules\r\n\r\nThe error appears to be in '/home/mnecas/.ansible/collections/ansible_collections/ovirt/ovirt/roles/test_role/tasks/main.yml': line 5, column 11, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71374", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71374/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71374/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71374/events", "html_url": "https://github.com/ansible/ansible/issues/71374", "id": 682638114, "node_id": "MDU6SXNzdWU2ODI2MzgxMTQ=", "number": 71374, "title": "Terraform plan output and changed state not returned when running in check mode", "user": {"login": "ampedandwired", "id": 541054, "node_id": "MDQ6VXNlcjU0MTA1NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/541054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ampedandwired", "html_url": "https://github.com/ampedandwired", "followers_url": "https://api.github.com/users/ampedandwired/followers", "following_url": "https://api.github.com/users/ampedandwired/following{/other_user}", "gists_url": "https://api.github.com/users/ampedandwired/gists{/gist_id}", "starred_url": "https://api.github.com/users/ampedandwired/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ampedandwired/subscriptions", "organizations_url": "https://api.github.com/users/ampedandwired/orgs", "repos_url": "https://api.github.com/users/ampedandwired/repos", "events_url": "https://api.github.com/users/ampedandwired/events{/privacy}", "received_events_url": "https://api.github.com/users/ampedandwired/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-20T11:26:30Z", "updated_at": "2020-08-20T11:34:38Z", "closed_at": "2020-08-20T11:34:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nRunning the terraform module in check mode does not return the terraform plan output and does not correctly report the changed state of the resource to Ansible\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nterraform\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n$ ansible --version\r\nansible 2.9.12\r\n  config file = None\r\n  configured module search path = ['/home/charles/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/charles/tmp/ansible-test/.direnv/python-3.6.9/lib/python3.6/site-packages/ansible\r\n  executable location = /home/charles/tmp/ansible-test/.direnv/python-3.6.9/bin/ansible\r\n  python version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n$ ansible-config dump --only-changed\r\nANSIBLE_NOCOWS(env: ANSIBLE_NOCOWS) = True\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 18.04\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nplaybook.yml:\r\n```yaml\r\n- hosts: localhost\r\n  tasks:\r\n    - terraform:\r\n        project_path: './terraform'\r\n        state: present\r\n```\r\nterraform/main.tf\r\n```terraform\r\nresource \"local_file\" \"foo\" {\r\n  content = \"foo\"\r\n  filename = \"foo.txt\"\r\n}\r\n```\r\n1. Run the playbook\r\n1. Change the \"content\" in main.tf to something else\r\n1. Run the playbook again using in check mode using `--check --verbose`\r\n\r\n##### EXPECTED RESULTS\r\nThe documentation for the terraform module says: \"To just run a terraform plan, use check mode\". So I would expect the steps above to display the change plan from Terraform and the resource to be reported as \"changed\" by Ansible.'\r\n\r\nIn Ansible 2.8.14 the output used to look like this:\r\n\r\n```\r\nTASK [terraform] **************************************************************************************************************************************************************************************************\r\nok: [localhost] => {\"changed\": false, \"command\": \"/opt/bin/terraform apply -no-color -input=false -auto-approve=true -lock=true /tmp/tmpnuqnp2mz.tfplan\", \"outputs\": {}, \"state\": \"present\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"Refreshing Terraform state in-memory prior to plan...\\nThe refreshed state will be used to calculate this plan, but will not be\\npersisted to local or remote state storage.\\n\\nlocal_file.foo: Refreshing state... [id=0beec7b5ea3f0fdbc95d0dd47f3c5bc275da8a33]\\n\\n------------------------------------------------------------------------\\n\\nAn execution plan has been generated and is shown below.\\nResource actions are indicated with the following symbols:\\n-/+ destroy and then create replacement\\n\\nTerraform will perform the following actions:\\n\\n  # local_file.foo must be replaced\\n-/+ resource \\\"local_file\\\" \\\"foo\\\" {\\n      ~ content              = \\\"foo\\\" -> \\\"foo1\\\" # forces replacement\\n        directory_permission = \\\"0777\\\"\\n        file_permission      = \\\"0777\\\"\\n        filename             = \\\"foo.txt\\\"\\n      ~ id                   = \\\"0beec7b5ea3f0fdbc95d0dd47f3c5bc275da8a33\\\" -> (known after apply)\\n    }\\n\\nPlan: 1 to add, 0 to change, 1 to destroy.\\n\\n------------------------------------------------------------------------\\n\\nThis plan was saved to: /tmp/tmpnuqnp2mz.tfplan\\n\\nTo perform exactly these actions, run the following command to apply:\\n    terraform apply \\\"/tmp/tmpnuqnp2mz.tfplan\\\"\\n\\n\", \"stdout_lines\": [\"Refreshing Terraform state in-memory prior to plan...\", \"The refreshed state will be used to calculate this plan, but will not be\", \"persisted to local or remote state storage.\", \"\", \"local_file.foo: Refreshing state... [id=0beec7b5ea3f0fdbc95d0dd47f3c5bc275da8a33]\", \"\", \"------------------------------------------------------------------------\", \"\", \"An execution plan has been generated and is shown below.\", \"Resource actions are indicated with the following symbols:\", \"-/+ destroy and then create replacement\", \"\", \"Terraform will perform the following actions:\", \"\", \"  # local_file.foo must be replaced\", \"-/+ resource \\\"local_file\\\" \\\"foo\\\" {\", \"      ~ content              = \\\"foo\\\" -> \\\"foo1\\\" # forces replacement\", \"        directory_permission = \\\"0777\\\"\", \"        file_permission      = \\\"0777\\\"\", \"        filename             = \\\"foo.txt\\\"\", \"      ~ id                   = \\\"0beec7b5ea3f0fdbc95d0dd47f3c5bc275da8a33\\\" -> (known after apply)\", \"    }\", \"\", \"Plan: 1 to add, 0 to change, 1 to destroy.\", \"\", \"------------------------------------------------------------------------\", \"\", \"This plan was saved to: /tmp/tmpnuqnp2mz.tfplan\", \"\", \"To perform exactly these actions, run the following command to apply:\", \"    terraform apply \\\"/tmp/tmpnuqnp2mz.tfplan\\\"\", \"\"], \"workspace\": \"default\"}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\nThe change plan from Terraform is not shown and Ansible reports the task as \"changed=false\". Actual output is:\r\n```\r\nTASK [terraform] **************************************************************************************************************************************************************************************************\r\nok: [localhost] => {\"changed\": false, \"command\": \"/opt/bin/terraform apply -no-color -input=false -auto-approve=true -lock=true /tmp/tmp2uwl0dkf.tfplan\", \"outputs\": {}, \"state\": \"present\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": [], \"workspace\": \"default\"}\r\n```\r\n\r\nI think [this commit](https://github.com/ansible/ansible/commit/cf623fa62fd78910f86617cfbd7e8c9564feee28#diff-b1fbd5d526878f04f9df313ae0451a2a) may have stopped the plan output from being returned, as it resets `out` to an empty string after the `terraform plan` has been run. Indeed the plan output *is* returned in Ansible 2.8.14.\r\n\r\nI'm not sure if \"changed\" was ever set correctly when run in check mode. It doesn't work in Ansible 2.8.14 either.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71371", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71371/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71371/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71371/events", "html_url": "https://github.com/ansible/ansible/issues/71371", "id": 682573307, "node_id": "MDU6SXNzdWU2ODI1NzMzMDc=", "number": 71371, "title": "connection: local and delegate_to not working together", "user": {"login": "ansible-github", "id": 69963878, "node_id": "MDQ6VXNlcjY5OTYzODc4", "avatar_url": "https://avatars0.githubusercontent.com/u/69963878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ansible-github", "html_url": "https://github.com/ansible-github", "followers_url": "https://api.github.com/users/ansible-github/followers", "following_url": "https://api.github.com/users/ansible-github/following{/other_user}", "gists_url": "https://api.github.com/users/ansible-github/gists{/gist_id}", "starred_url": "https://api.github.com/users/ansible-github/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ansible-github/subscriptions", "organizations_url": "https://api.github.com/users/ansible-github/orgs", "repos_url": "https://api.github.com/users/ansible-github/repos", "events_url": "https://api.github.com/users/ansible-github/events{/privacy}", "received_events_url": "https://api.github.com/users/ansible-github/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-20T09:42:10Z", "updated_at": "2020-08-21T05:50:27Z", "closed_at": "2020-08-20T15:37:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Team,\r\n\r\nI am facing issue while running below playbook from ansible  server and getting error like below.  It seems like unable to use connection: local and delegate_to together in ansible serversion 2.9.10. The delegate_to action performed on local server itself it is not performing on remote server. I gave small part of the playbook. The intention to use connection: local is I like to perform few tasks from ansible server and like to perform few task on remote server. Which task I like to perform on remote server there am using delegate_to action. It was working fine in anisble 2.9.9 version. After updated to ansible to 2.9.10 am facing this issue.  Not sure it is bug in latest version. Could you please help on this issue. Thanks in advance.\r\n\r\nNote: I tested the below playbook in ansible version 2.9.9 there it is working fine without any issues.\r\n\r\nError\r\nTASK [Copy script to remote server] ***********************************************************************************************\r\nfatal: [localhost]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to create temporary directory.In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\", for more error information use -vvv. Failed command was: ( umask 77 && mkdir -p \\\"` echo /home/ansible/.ansible/tmp `\\\"&& mkdir /home/ansible/.ansible/tmp/ansible-tmp-1597756123.06-13139-115650747168755 && echo ansible-tmp-1597756123.06-13139-115650747168755=\\\"` echo /home/ansible/.ansible/tmp/ansible-tmp-1597756123.06-13139-115650747168755 `\\\" ), exited with result 1\", \"unreachable\": true}\r\n\r\n\r\nPlaybook\r\n\r\n---\r\n- name : Playbook test\r\n  hosts: localhost\r\n  connection: local\r\n  become_method: sudo\r\n\r\n  tasks:\r\n    - name: Copy script to remote server\r\n      copy:\r\n       src:  /playbooks/DBRefresh/files/removedisks.sh\r\n       dest: /home/ansible/\r\n      become: yes\r\n      delegate_to: 192.168.1.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71369", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71369/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71369/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71369/events", "html_url": "https://github.com/ansible/ansible/issues/71369", "id": 682490437, "node_id": "MDU6SXNzdWU2ODI0OTA0Mzc=", "number": 71369, "title": "Ease debugging collections/plugins", "user": {"login": "rockaut", "id": 453368, "node_id": "MDQ6VXNlcjQ1MzM2OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/453368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockaut", "html_url": "https://github.com/rockaut", "followers_url": "https://api.github.com/users/rockaut/followers", "following_url": "https://api.github.com/users/rockaut/following{/other_user}", "gists_url": "https://api.github.com/users/rockaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockaut/subscriptions", "organizations_url": "https://api.github.com/users/rockaut/orgs", "repos_url": "https://api.github.com/users/rockaut/repos", "events_url": "https://api.github.com/users/rockaut/events{/privacy}", "received_events_url": "https://api.github.com/users/rockaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-20T07:27:37Z", "updated_at": "2020-08-21T12:09:27Z", "closed_at": "2020-08-20T19:26:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### SUMMARY\r\nCurrently debugging in development is just a pain. Using ANSIBLE_KEEP_REMOTE_FILES and run the failing thing to then exploding the packs to again execute them over the command and on top attaching a python remote debugger *sigh*.\r\nAnd that all doesn't even help with local plugins like with connection/httpapi because no matter what the are dumped.\r\n\r\n##### ISSUE TYPE\r\n- Feature Idea\r\n- Developer-Pain ease\r\n\r\n##### COMPONENT NAME\r\nPlugins\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71368", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71368/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71368/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71368/events", "html_url": "https://github.com/ansible/ansible/issues/71368", "id": 682447684, "node_id": "MDU6SXNzdWU2ODI0NDc2ODQ=", "number": 71368, "title": "Cron file being truncated since 2.9.12", "user": {"login": "silvervest", "id": 132018, "node_id": "MDQ6VXNlcjEzMjAxOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/132018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silvervest", "html_url": "https://github.com/silvervest", "followers_url": "https://api.github.com/users/silvervest/followers", "following_url": "https://api.github.com/users/silvervest/following{/other_user}", "gists_url": "https://api.github.com/users/silvervest/gists{/gist_id}", "starred_url": "https://api.github.com/users/silvervest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silvervest/subscriptions", "organizations_url": "https://api.github.com/users/silvervest/orgs", "repos_url": "https://api.github.com/users/silvervest/repos", "events_url": "https://api.github.com/users/silvervest/events{/privacy}", "received_events_url": "https://api.github.com/users/silvervest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-20T06:18:43Z", "updated_at": "2020-08-21T04:17:49Z", "closed_at": "2020-08-20T07:48:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nSince installing 2.9.12, running multiple `cron:` tasks one after another on the same `cron_file` leads the file to be truncated for every entry, leaving only the final task entry executed\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ncron\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n$ ansible --version\r\nansible 2.9.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/silvestron2c/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu 20.04\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nNew playbook, multiple cron tasks all writing to the same cron_file entry\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\nplaybook:\r\n---\r\n- name: run locally\r\n  hosts: 127.0.0.1\r\n  connection: local\r\n  tasks:\r\n    - cron:\r\n        cron_file: \"/etc/cron.d/test\"\r\n        user: \"ubuntu\"\r\n        name: \"First cron\"\r\n        job: \"echo first\"\r\n    - cron:\r\n        cron_file: \"/etc/cron.d/test\"\r\n        user: \"ubuntu\"\r\n        name: \"Second cron\"\r\n        job: \"echo second\"\r\n```\r\n\r\nrun the palybook:\r\n```\r\n$ sudo ansible-playbook -k -e ansible_connection=local test.yml\r\nSSH password:\r\n\r\nPLAY [run locally] ********************************************\r\n\r\nTASK [Gathering Facts] ******************************************\r\nok: [localhost]\r\n\r\nTASK [cron] ********************************************\r\nchanged: [localhost]\r\n\r\nTASK [cron] ********************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP ********************************************\r\nlocalhost                  : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n```\r\n\r\nafter the playbook is run,\r\n```\r\n$ cat /etc/cron.d/test\r\n#Ansible: Second cron\r\n* * * * * ubuntu echo second\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThe cron file to have multiple job entries.\r\n\r\nDowngrading to 2.9.11 and running the same playbook results in the expected outcome.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71363", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71363/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71363/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71363/events", "html_url": "https://github.com/ansible/ansible/issues/71363", "id": 682223345, "node_id": "MDU6SXNzdWU2ODIyMjMzNDU=", "number": 71363, "title": "Jinja adds trailing spaces in `if/else/for` structure", "user": {"login": "sfuerte", "id": 16941995, "node_id": "MDQ6VXNlcjE2OTQxOTk1", "avatar_url": "https://avatars3.githubusercontent.com/u/16941995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfuerte", "html_url": "https://github.com/sfuerte", "followers_url": "https://api.github.com/users/sfuerte/followers", "following_url": "https://api.github.com/users/sfuerte/following{/other_user}", "gists_url": "https://api.github.com/users/sfuerte/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfuerte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfuerte/subscriptions", "organizations_url": "https://api.github.com/users/sfuerte/orgs", "repos_url": "https://api.github.com/users/sfuerte/repos", "events_url": "https://api.github.com/users/sfuerte/events{/privacy}", "received_events_url": "https://api.github.com/users/sfuerte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": {"login": "Akasurde", "id": 633765, "node_id": "MDQ6VXNlcjYzMzc2NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/633765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akasurde", "html_url": "https://github.com/Akasurde", "followers_url": "https://api.github.com/users/Akasurde/followers", "following_url": "https://api.github.com/users/Akasurde/following{/other_user}", "gists_url": "https://api.github.com/users/Akasurde/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akasurde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akasurde/subscriptions", "organizations_url": "https://api.github.com/users/Akasurde/orgs", "repos_url": "https://api.github.com/users/Akasurde/repos", "events_url": "https://api.github.com/users/Akasurde/events{/privacy}", "received_events_url": "https://api.github.com/users/Akasurde/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Akasurde", "id": 633765, "node_id": "MDQ6VXNlcjYzMzc2NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/633765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akasurde", "html_url": "https://github.com/Akasurde", "followers_url": "https://api.github.com/users/Akasurde/followers", "following_url": "https://api.github.com/users/Akasurde/following{/other_user}", "gists_url": "https://api.github.com/users/Akasurde/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akasurde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akasurde/subscriptions", "organizations_url": "https://api.github.com/users/Akasurde/orgs", "repos_url": "https://api.github.com/users/Akasurde/repos", "events_url": "https://api.github.com/users/Akasurde/events{/privacy}", "received_events_url": "https://api.github.com/users/Akasurde/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-08-19T22:28:49Z", "updated_at": "2020-08-21T04:01:06Z", "closed_at": "2020-08-20T19:20:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n\r\nExample playbooks:\r\n\r\n```yaml\r\nds_primary_hosts: >-\r\n  {% if (ansible_run_tags|length == 0) or (\"all\" in ansible_run_tags) %}\r\n  ds_*_primary\r\n  {% else %}\r\n  {% for tag in ansible_run_tags | select(\"match\", \"ds_\") %}{{ tag }}_primary:{% endfor %}\r\n  {% endif %}\r\nds_secondary_hosts: >-\r\n  {% if (ansible_run_tags|length == 0) or (\"all\" in ansible_run_tags) %}\r\n  ds_*_secondary\r\n  {% else %}{% for tag in ansible_run_tags | select(\"match\", \"ds_\") %}{{ tag }}_secondary:{% endfor %}{% endif %}\r\n```\r\n\r\nNote the difference in `else` / `for` structure between `primary` and `secondary` hosts, i.e. multi vs single line\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nJinja\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.6\r\n  config file = <project dir>/ansible.cfg\r\n  configured module search path = ['/home/test/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nANSIBLE_NOCOLOR(<project dir>/ansible.cfg) = True\r\nDEFAULT_CALLBACK_WHITELIST(<project dir>/ansible.cfg) = ['timer', 'profile_tasks']\r\nDEFAULT_MANAGED_STR(<project dir>/ansible.cfg) = Ansible managed: {file} modified on %Y-%m-%dT%H:%M:%S%Z by {uid} on {host}\r\nDEFAULT_STDOUT_CALLBACK(<project dir>/ansible.cfg) = unixy\r\nDEFAULT_UNDEFINED_VAR_BEHAVIOR(<project dir>/ansible.cfg) = True\r\nDEPRECATION_WARNINGS(<project dir>/ansible.cfg) = True\r\nDISPLAY_SKIPPED_HOSTS(<project dir>/ansible.cfg) = True\r\nINVENTORY_ENABLED(<project dir>/ansible.cfg) = ['ini']\r\nSYSTEM_WARNINGS(<project dir>/ansible.cfg) = True\r\nVARIABLE_PRECEDENCE(<project dir>/ansible.cfg) = ['all_inventory', 'groups_inventory', 'all_plugins_play', 'groups_plugins_play', 'all_plugins_inventory', 'groups_plugins>\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n```\r\n$ lsb_release -d\r\nDescription:\tUbuntu 20.04.1 LTS\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nboth variables shouldn't have any trailing spaces\r\n\r\n##### ACTUAL RESULTS\r\n\r\nnote the trailing spaces in the first case:\r\n```\r\n    ..\r\n    'ds_primary_hosts': ' ds_cts_primary: ', \r\n    'ds_secondary_hosts': 'ds_cts_secondary:',\r\n    ...\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71354", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71354/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71354/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71354/events", "html_url": "https://github.com/ansible/ansible/issues/71354", "id": 682030564, "node_id": "MDU6SXNzdWU2ODIwMzA1NjQ=", "number": 71354, "title": "elb_target_group not applying supplied variables for a couple of parameters", "user": {"login": "jaggaer-zsmith", "id": 33529743, "node_id": "MDQ6VXNlcjMzNTI5NzQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33529743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaggaer-zsmith", "html_url": "https://github.com/jaggaer-zsmith", "followers_url": "https://api.github.com/users/jaggaer-zsmith/followers", "following_url": "https://api.github.com/users/jaggaer-zsmith/following{/other_user}", "gists_url": "https://api.github.com/users/jaggaer-zsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaggaer-zsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaggaer-zsmith/subscriptions", "organizations_url": "https://api.github.com/users/jaggaer-zsmith/orgs", "repos_url": "https://api.github.com/users/jaggaer-zsmith/repos", "events_url": "https://api.github.com/users/jaggaer-zsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/jaggaer-zsmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-19T17:57:24Z", "updated_at": "2020-08-19T18:07:22Z", "closed_at": "2020-08-19T18:07:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nAnsible module elb_target_group is not importing all supplied variables\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nelb_target_group\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.12\r\n  config file = /home/zsmith/sq_ansible/ansible.cfg\r\n  configured module search path = [u'/home/zsmith/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/zsmith/.local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Jan  2 2019, 13:59:16) [GCC 4.4.7 20120313 (Red Hat 4.4.7-23)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nCACHE_PLUGIN(/home/zsmith/sq_ansible/ansible.cfg) = jsonfile\r\nCACHE_PLUGIN_CONNECTION(/home/zsmith/sq_ansible/ansible.cfg) = ~/.ansible/fact_cache\r\nCACHE_PLUGIN_TIMEOUT(/home/zsmith/sq_ansible/ansible.cfg) = 86400\r\nCOMMAND_WARNINGS(/home/zsmith/sq_ansible/ansible.cfg) = False\r\nDEFAULT_FORKS(/home/zsmith/sq_ansible/ansible.cfg) = 20\r\nDEFAULT_GATHERING(/home/zsmith/sq_ansible/ansible.cfg) = smart\r\nDEFAULT_PRIVATE_KEY_FILE(/home/zsmith/sq_ansible/ansible.cfg) = /home/zsmith/.ansible/.ansible_id_rsa\r\nDEFAULT_REMOTE_USER(/home/zsmith/sq_ansible/ansible.cfg) = ansible\r\nDEFAULT_ROLES_PATH(/home/zsmith/sq_ansible/ansible.cfg) = [u'/home/zsmith/sq_ansible/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/zsmith/sq_ansible/ansible.cfg) = debug\r\nDEFAULT_VAULT_PASSWORD_FILE(/home/zsmith/sq_ansible/ansible.cfg) = /home/zsmith/.ansible/.vault_pass\r\nDEPRECATION_WARNINGS(/home/zsmith/sq_ansible/ansible.cfg) = False\r\nHOST_KEY_CHECKING(/home/zsmith/sq_ansible/ansible.cfg) = False\r\nPARAMIKO_HOST_KEY_AUTO_ADD(/home/zsmith/sq_ansible/ansible.cfg) = True\r\nRETRY_FILES_SAVE_PATH(/home/zsmith/sq_ansible/ansible.cfg) = /home/zsmith/.ansible/retry-files\r\nSYSTEM_WARNINGS(/home/zsmith/sq_ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n cat /etc/redhat-release \r\nCentOS release 6.10 (Final)\r\n\r\n python version = 2.7.14\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n- debug:\r\n    var: \"{{ item }}\"\r\n  with_items:\r\n    - tg_health_check_path\r\n    - tg_successful_response_codes\r\n\r\n- name: \"Create Target Groups tg-{{ product }}-{{ env }}-{{ servertype }}-{{ tg_port }}\"\r\n  local_action:\r\n    module: elb_target_group\r\n    aws_secret_key: \"{{ aws_secret_key }}\"\r\n    aws_access_key: \"{{ aws_access_key }}\"\r\n    name: \"tg-{{ product }}-{{ env }}-{{ servertype }}-{{ tg_port }}\"\r\n    tags: env={{ env }} name=tg-{{ product }}-{{ env }}-{{ servertype }}-{{ tg_protocol }}-{{ tg_port }} application={{ product }}\r\n    vpc_id: \"{{ vpc_id }}\"\r\n    region: \"{{ ec2_region }}\"\r\n    health_check_path: \"{{ tg_health_check_path }}\"\r\n    modify_targets: yes\r\n    successful_response_codes: \"{{ tg_successful_response_codes }}\"\r\n    protocol: \"{{ tg_protocol }}\"\r\n    port: \"{{ tg_port }}\"\r\n    targets: \"{{ tg_vars }}\"\r\n    state: present\r\n  register: targetgroup\r\n  when: tg_port is defined\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThe playbook is run to create target groups and associate them with load balancers.\r\n\r\nUpon completion of the playbook, I check the newly created target_groups in AWS and I should see the following\r\n\r\n```Protocol \r\nHTTP\r\nPath \r\n/apps/Router/HealthCheck\r\nPort \r\ntraffic port\r\nHealthy threshold \r\n5\r\nUnhealthy threshold \r\n2\r\nTimeout \r\n5\r\nInterval \r\n30\r\nSuccess codes \r\n200,302\r\n```\r\n\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n<!--- Paste verbatim command output between quotes -->\r\n\r\nUpon completion of the playbook, I check the newly created target_groups in AWS and I see the following\r\n\r\n```\r\nProtocol \r\nHTTP\r\nPath \r\n/\r\nPort \r\ntraffic port\r\nHealthy threshold \r\n5\r\nUnhealthy threshold \r\n2\r\nTimeout \r\n5\r\nInterval \r\n30\r\nSuccess codes \r\n200\r\n```\r\n\r\n\r\nTo further troubleshoot, I added a debug statement prior to the task\r\n\r\n```\r\nTASK [ansible-role-aws-elb : debug] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************\r\nok: [localhost] => (item=tg_health_check_path) => {\r\n    \"ansible_loop_var\": \"item\", \r\n    \"item\": \"tg_health_check_path\", \r\n    \"tg_health_check_path\": \"/apps/Router/HealthCheck\"\r\n}\r\nok: [localhost] => (item=tg_successful_response_codes) => {\r\n    \"ansible_loop_var\": \"item\", \r\n    \"item\": \"tg_successful_response_codes\", \r\n    \"tg_successful_response_codes\": \"200,302\"\r\n}\r\n\r\nTASK [ansible-role-aws-elb : Create Target Groups tg-ji-usb-forwardfacing-80] ***************************************************************************************************************************************************************************************************************************************************************************************************************\r\nok: [localhost]\r\n```\r\n\r\nIt runs, comes back successful but does not change/modify the target, I have also gone as far as removing the created infrastructure and starting from scratch. The variables are defined in a yml file specific to the resource being created", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71353", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71353/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71353/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71353/events", "html_url": "https://github.com/ansible/ansible/issues/71353", "id": 682008189, "node_id": "MDU6SXNzdWU2ODIwMDgxODk=", "number": 71353, "title": "soft limit on netapp na_ontap_quotas we want to know if the soft limit can be added to the module ", "user": {"login": "Diddi474", "id": 69917456, "node_id": "MDQ6VXNlcjY5OTE3NDU2", "avatar_url": "https://avatars1.githubusercontent.com/u/69917456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Diddi474", "html_url": "https://github.com/Diddi474", "followers_url": "https://api.github.com/users/Diddi474/followers", "following_url": "https://api.github.com/users/Diddi474/following{/other_user}", "gists_url": "https://api.github.com/users/Diddi474/gists{/gist_id}", "starred_url": "https://api.github.com/users/Diddi474/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Diddi474/subscriptions", "organizations_url": "https://api.github.com/users/Diddi474/orgs", "repos_url": "https://api.github.com/users/Diddi474/repos", "events_url": "https://api.github.com/users/Diddi474/events{/privacy}", "received_events_url": "https://api.github.com/users/Diddi474/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-19T17:16:59Z", "updated_at": "2020-08-20T19:02:09Z", "closed_at": "2020-08-19T17:29:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\n\r\n##### ISSUE TYPE\r\n- Soft limit is not part of the na_ontap_quotas\r\n\r\n##### COMPONENT NAME\r\n<!--- na_ontap_quotas dont have soft limit variable added we see it there on the api calls but not included in the ansible module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- 2.9 -->\r\n```paste below\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71349", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71349/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71349/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71349/events", "html_url": "https://github.com/ansible/ansible/issues/71349", "id": 681893044, "node_id": "MDU6SXNzdWU2ODE4OTMwNDQ=", "number": 71349, "title": "ServiceNow oAUTH functionality in ansible-playbook modules", "user": {"login": "Aniket-Utekar", "id": 62883298, "node_id": "MDQ6VXNlcjYyODgzMjk4", "avatar_url": "https://avatars2.githubusercontent.com/u/62883298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aniket-Utekar", "html_url": "https://github.com/Aniket-Utekar", "followers_url": "https://api.github.com/users/Aniket-Utekar/followers", "following_url": "https://api.github.com/users/Aniket-Utekar/following{/other_user}", "gists_url": "https://api.github.com/users/Aniket-Utekar/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aniket-Utekar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aniket-Utekar/subscriptions", "organizations_url": "https://api.github.com/users/Aniket-Utekar/orgs", "repos_url": "https://api.github.com/users/Aniket-Utekar/repos", "events_url": "https://api.github.com/users/Aniket-Utekar/events{/privacy}", "received_events_url": "https://api.github.com/users/Aniket-Utekar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-19T14:36:52Z", "updated_at": "2020-08-20T07:57:23Z", "closed_at": "2020-08-19T14:41:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your feature was not already discussed on GitHub -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Describe the new feature/improvement briefly below -->\r\n-Integrating serviceNow with ansible-playbook over oAUTH using snow_record module. we require to enter username and password, which is not helping us to create oAUTh authentication.\r\n\r\n##### ISSUE TYPE\r\n- Feature Idea\r\n-- We need feature where ansible will call servicenow over oAUTH token base, which may only require 1st time authentication with password. once it gets successful we does not require to put password of servicenow again in playbook.\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n- snow_record\r\n##### ADDITIONAL INFORMATION\r\n<!--- Describe how the feature would be used, why it is needed and what it would solve -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can also paste gist.github.com links for larger files -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71338", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71338/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71338/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71338/events", "html_url": "https://github.com/ansible/ansible/issues/71338", "id": 681146303, "node_id": "MDU6SXNzdWU2ODExNDYzMDM=", "number": 71338, "title": "Incorrect json encoding when using omit", "user": {"login": "mshearer76", "id": 42149108, "node_id": "MDQ6VXNlcjQyMTQ5MTA4", "avatar_url": "https://avatars2.githubusercontent.com/u/42149108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mshearer76", "html_url": "https://github.com/mshearer76", "followers_url": "https://api.github.com/users/mshearer76/followers", "following_url": "https://api.github.com/users/mshearer76/following{/other_user}", "gists_url": "https://api.github.com/users/mshearer76/gists{/gist_id}", "starred_url": "https://api.github.com/users/mshearer76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mshearer76/subscriptions", "organizations_url": "https://api.github.com/users/mshearer76/orgs", "repos_url": "https://api.github.com/users/mshearer76/repos", "events_url": "https://api.github.com/users/mshearer76/events{/privacy}", "received_events_url": "https://api.github.com/users/mshearer76/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-18T15:46:22Z", "updated_at": "2020-08-18T18:29:01Z", "closed_at": "2020-08-18T16:46:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nOmit filter is unescaping result of to_json filter.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nCore filter\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n```\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.4 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n\r\n##### STEPS TO REPRODUCE\r\nansible-playbook -i localhost json.yml\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- hosts: localhost\r\n\r\n  tasks:\r\n    - name: Works as expected\r\n      debug:\r\n        msg: \"{{ mymap | default(None) | to_json }}\"\r\n      vars:\r\n        mymap:\r\n          key: \"value\"\r\n\r\n    - name: Broken? Seems to unescape double quotes in json\r\n      debug:\r\n        msg: \"{{ mymap | default(None) | to_json or omit }}\"\r\n      vars:\r\n        mymap:\r\n          key: \"value\"\r\n\r\n    - name: Broken? Encodes null into json rather than failing encoding and omitting the parameter\r\n      debug:\r\n        msg: \"{{ mymap | default(None) | to_json or omit }}\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n1st task expect : ```\"{\\\"key\\\": \\\"value\\\"}```\r\n2nd task expect: ```\"{\\\"key\\\": \\\"value\\\"}```\r\n3rd task expect: omitted value\r\n\r\n##### ACTUAL RESULTS\r\n1st task ran as expected\r\n2nd task has quotes unescaped\r\n3rd task return \"null\"\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nroot@1fa034a0ecf1:/# ANSIBLE_OPTS=\"-vvv\" ansible-playbook -i localhost json.yml \r\n[WARNING]: Unable to parse /localhost as an inventory source\r\n[WARNING]: No inventory was parsed, only implicit localhost is available\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\r\n\r\nPLAY [localhost] ***************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [Works as expected] *******************************************************************************************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"msg\": \"{\\\"key\\\": \\\"value\\\"}\"\r\n}\r\n\r\nTASK [Broken? Seems to unescape double quotes in json] *************************************************************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"msg\": {\r\n        \"key\": \"value\"\r\n    }\r\n}\r\n\r\nTASK [Broken? Encodes null into json rather than failing encoding and omitting the parameter] **********************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"msg\": \"null\"\r\n}\r\n\r\nPLAY RECAP *********************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71333", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71333/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71333/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71333/events", "html_url": "https://github.com/ansible/ansible/issues/71333", "id": 681014624, "node_id": "MDU6SXNzdWU2ODEwMTQ2MjQ=", "number": 71333, "title": "azure_rm_containerinstance \"Volume\" option missing.", "user": {"login": "ash007osh", "id": 1225987, "node_id": "MDQ6VXNlcjEyMjU5ODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1225987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ash007osh", "html_url": "https://github.com/ash007osh", "followers_url": "https://api.github.com/users/ash007osh/followers", "following_url": "https://api.github.com/users/ash007osh/following{/other_user}", "gists_url": "https://api.github.com/users/ash007osh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ash007osh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ash007osh/subscriptions", "organizations_url": "https://api.github.com/users/ash007osh/orgs", "repos_url": "https://api.github.com/users/ash007osh/repos", "events_url": "https://api.github.com/users/ash007osh/events{/privacy}", "received_events_url": "https://api.github.com/users/ash007osh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-18T12:47:49Z", "updated_at": "2020-08-18T12:49:23Z", "closed_at": "2020-08-18T12:49:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "azure_rm_containerinstance doesn't support Volume parameter:\r\n\r\nIn order to mount any File Volume from Azure Files to Container Instance this option is required.   \r\n\r\nISSUE TYPE\r\nFeature Idea\r\nCOMPONENT NAME\r\nazure_rm_containerinstance\r\n\r\nADDITIONAL INFORMATION\r\nWithout support of this parameter we have to use AZ command line, which defeats the purpose of Configuration Management.\r\n\r\n@zikalino", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71331", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71331/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71331/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71331/events", "html_url": "https://github.com/ansible/ansible/issues/71331", "id": 680816334, "node_id": "MDU6SXNzdWU2ODA4MTYzMzQ=", "number": 71331, "title": "Parameter requires_duplicate_detection on azure_rm_servicebusqueue_module has no effect", "user": {"login": "ixevix", "id": 820718, "node_id": "MDQ6VXNlcjgyMDcxOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/820718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ixevix", "html_url": "https://github.com/ixevix", "followers_url": "https://api.github.com/users/ixevix/followers", "following_url": "https://api.github.com/users/ixevix/following{/other_user}", "gists_url": "https://api.github.com/users/ixevix/gists{/gist_id}", "starred_url": "https://api.github.com/users/ixevix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ixevix/subscriptions", "organizations_url": "https://api.github.com/users/ixevix/orgs", "repos_url": "https://api.github.com/users/ixevix/repos", "events_url": "https://api.github.com/users/ixevix/events{/privacy}", "received_events_url": "https://api.github.com/users/ixevix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-18T08:48:24Z", "updated_at": "2020-08-18T08:50:13Z", "closed_at": "2020-08-18T08:50:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nSetting the parameter to true does not affect configuration in Azure for the Service Bus queue\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nazure_rm_servicebusqueue\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Nov  7 2019, 10:07:09) [GCC 7.4.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nRunning from hsldevcom/azure-ansible docker image\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Create service bus\r\n  azure_rm_servicebus:\r\n    name: \"{{ az_service_bus }}\"\r\n    resource_group: \"{{ az_resource_group }}\"\r\n    location: \"{{ az_region }}\"\r\n\r\n- name: Create service bus queue\r\n  azure_rm_servicebusqueue:\r\n    name: operations\r\n    resource_group: \"{{ az_resource_group }}\"\r\n    namespace: \"{{ az_service_bus }}\"\r\n    requires_duplicate_detection: true\r\n    max_size_in_mb: 1024\r\n    default_message_time_to_live_seconds: 1209600\r\n    duplicate_detection_time_in_seconds: 30\r\n    lock_duration_in_seconds: 30\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThe requires_duplicate_detection should enable duplicate detection in the service bus queue in Azure.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nDoes not enable duplicate detection\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nTASK [operations_service : Create service bus] ***************************************************************************************************************\r\n[WARNING]: Azure API profile latest does not define an entry for ServiceBusManagementClient\r\nok: [localhost] => {\"changed\": false, \"created_at\": \"2020-08-18 08:18:43.063000+00:00\", \"id\": \"/subscriptions/840f91d7-f0d8-44ff-852f-6955720c6919/resourceGroups/openmaas-sandboxGroup/providers/Microsoft.ServiceBus/namespaces/openmaas-sandbox-bus\", \"location\": \"West Europe\", \"metric_id\": \"840f91d7-f0d8-44ff-852f-6955720c6919:openmaas-sandbox-bus\", \"name\": \"openmaas-sandbox-bus\", \"provisioning_state\": \"Succeeded\", \"service_bus_endpoint\": \"https://openmaas-sandbox-bus.servicebus.windows.net:443/\", \"sku\": \"standard\", \"type\": \"Microsoft.ServiceBus/Namespaces\", \"updated_at\": \"2020-08-18 08:19:28.153000+00:00\"}\r\n\r\nTASK [operations_service : Create service bus queue] *********************************************************************************************************\r\nok: [localhost] => {\"accessed_at\": \"0001-01-01 00:00:00+00:00\", \"changed\": false, \"count_details\": {\"active_message_count\": 0, \"dead_letter_message_count\": 0, \"scheduled_message_count\": 0, \"transfer_dead_letter_message_count\": 0, \"transfer_message_count\": 0}, \"created_at\": \"2020-08-18 08:28:20.795062+00:00\", \"default_message_time_to_live_seconds\": 1209600, \"duplicate_detection_time_in_seconds\": 30, \"enable_batched_operations\": true, \"id\": \"/subscriptions/840f91d7-f0d8-44ff-852f-6955720c6919/resourceGroups/openmaas-sandboxGroup/providers/Microsoft.ServiceBus/namespaces/openmaas-sandbox-bus/queues/operations\", \"lock_duration_in_seconds\": 30, \"max_delivery_count\": 10, \"max_size_in_mb\": 1024, \"name\": \"operations\", \"status\": \"active\", \"type\": \"Microsoft.ServiceBus/Namespaces/Queues\", \"updated_at\": \"2020-08-18 08:28:20.795062+00:00\"}\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71328", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71328/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71328/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71328/events", "html_url": "https://github.com/ansible/ansible/issues/71328", "id": 680653617, "node_id": "MDU6SXNzdWU2ODA2NTM2MTc=", "number": 71328, "title": "mode is incorrect", "user": {"login": "zhangguanzhang", "id": 18641678, "node_id": "MDQ6VXNlcjE4NjQxNjc4", "avatar_url": "https://avatars0.githubusercontent.com/u/18641678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangguanzhang", "html_url": "https://github.com/zhangguanzhang", "followers_url": "https://api.github.com/users/zhangguanzhang/followers", "following_url": "https://api.github.com/users/zhangguanzhang/following{/other_user}", "gists_url": "https://api.github.com/users/zhangguanzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangguanzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangguanzhang/subscriptions", "organizations_url": "https://api.github.com/users/zhangguanzhang/orgs", "repos_url": "https://api.github.com/users/zhangguanzhang/repos", "events_url": "https://api.github.com/users/zhangguanzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangguanzhang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-18T03:10:01Z", "updated_at": "2020-08-18T03:12:34Z", "closed_at": "2020-08-18T03:12:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nmode not correct\r\n```\r\n[root@k8s-m1 ~]# stat /etc/kubernetes/kube-proxy.conf \r\n  File: \u2018/etc/kubernetes/kube-proxy.conf\u2019\r\n  Size: 897       \tBlocks: 8          IO Block: 4096   regular file\r\nDevice: fd01h/64769d\tInode: 1573562     Links: 1\r\nAccess: (1204/--w----r-T)  Uid: (    0/    root)   Gid: (    0/    root)\r\nAccess: 2020-08-18 10:59:41.550459805 +0800\r\nModify: 2020-08-18 10:59:40.171453887 +0800\r\nChange: 2020-08-18 10:59:40.372454749 +0800\r\n Birth: -\r\n\r\n```\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nmode\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n# ansible --version\r\n/usr/lib64/python2.7/site-packages/cryptography/__init__.py:39: CryptographyDeprecationWarning: Python 2 is no longer supported by the Python core team. Support for it is now deprecated in cryptography, and will be removed in a future release.\r\n  CryptographyDeprecationWarning,\r\nansible 2.9.12\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Oct 30 2018, 23:45:53) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n    - name: \u5206\u53d1kube-proxy\u914d\u7f6e\u6587\u4ef6\r\n    - template: src={{ item.src }} dest={{ item.dest }}/{{ item.src.split('.')[:-1]|join('.') }}\t      template:\r\n        src: \"{{ item.src }}\"\r\n        dest: \"{{ item.dest }}/{{ item.src.split('.')[:-1]|join('.') }}\"\r\n        mode: 644\r\n      with_items:\t      with_items:\r\n        - { src: 'kube-proxy.service.j2', dest: '/usr/lib/systemd/system/' }\t        - { src: 'kube-proxy.service.j2', dest: '/usr/lib/systemd/system/' }\r\n        - { src: 'kube-proxy.conf.j2', dest: '/etc/kubernetes/' }\t        - { src: 'kube-proxy.conf.j2', dest: '/etc/kubernetes/' }\r\n```\r\nfile mode is not 644\r\n```\r\nls -l /etc/kubernetes/kube-proxy.conf \r\n--w----r-T 1 root root 897 Aug 18 10:59 /etc/kubernetes/kube-proxy.conf\r\n```\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71327", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71327/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71327/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71327/events", "html_url": "https://github.com/ansible/ansible/issues/71327", "id": 680550852, "node_id": "MDU6SXNzdWU2ODA1NTA4NTI=", "number": 71327, "title": "Ansible 2.9.12 cron module always reports a change", "user": {"login": "anandb-ripencc", "id": 66947590, "node_id": "MDQ6VXNlcjY2OTQ3NTkw", "avatar_url": "https://avatars3.githubusercontent.com/u/66947590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anandb-ripencc", "html_url": "https://github.com/anandb-ripencc", "followers_url": "https://api.github.com/users/anandb-ripencc/followers", "following_url": "https://api.github.com/users/anandb-ripencc/following{/other_user}", "gists_url": "https://api.github.com/users/anandb-ripencc/gists{/gist_id}", "starred_url": "https://api.github.com/users/anandb-ripencc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anandb-ripencc/subscriptions", "organizations_url": "https://api.github.com/users/anandb-ripencc/orgs", "repos_url": "https://api.github.com/users/anandb-ripencc/repos", "events_url": "https://api.github.com/users/anandb-ripencc/events{/privacy}", "received_events_url": "https://api.github.com/users/anandb-ripencc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-17T22:00:04Z", "updated_at": "2020-08-18T05:00:23Z", "closed_at": "2020-08-18T05:00:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nThe cron module always reports a change for a cron file.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ncron\r\n\r\n##### ANSIBLE VERSION\r\n```paste below\r\nansible 2.9.12\r\n  config file = /Users/anandb/.ansible.cfg\r\n  configured module search path = ['/Users/anandb/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/anandb/.venvs/default/lib/python3.8/site-packages/ansible\r\n  executable location = /Users/anandb/.venvs/default/bin/ansible\r\n  python version = 3.8.5 (default, Jul 21 2020, 10:48:26) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nANSIBLE_PIPELINING(/Users/anandb/.ansible.cfg) = True\r\nANSIBLE_SSH_CONTROL_PATH(/Users/anandb/.ansible.cfg) = /tmp/%%r@%%h:%%p\r\nDEFAULT_GATHERING(/Users/anandb/.ansible.cfg) = explicit\r\nDEFAULT_HASH_BEHAVIOUR(/Users/anandb/.ansible.cfg) = merge\r\nDEFAULT_HOST_LIST(/Users/anandb/.ansible.cfg) = ['/Users/anandb/repo/ripe.net/ansible/hosts']\r\nDEFAULT_LOCAL_TMP(/Users/anandb/.ansible.cfg) = /tmp/ansible-local-44818p4sc4_hw\r\nDEFAULT_STRATEGY(/Users/anandb/.ansible.cfg) = mitogen_linear\r\nDEFAULT_STRATEGY_PLUGIN_PATH(/Users/anandb/.ansible.cfg) = ['/Users/anandb/.venvs/default/lib/python3.8/site-packages/ansible_mitogen/plugins/strategy']\r\nDEFAULT_TIMEOUT(/Users/anandb/.ansible.cfg) = 30\r\nHOST_KEY_CHECKING(/Users/anandb/.ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nThe managed host is a fully up to date CentOS 7 server.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: rsync facts crontab\r\n  cron:\r\n    name: rsync facts\r\n    user: root\r\n    cron_file: rsync-facts\r\n    hour: '10'\r\n    minute: '30'\r\n    job: 'sleep $((RANDOM \\% 600)); rsync -z /var/log/hostinfo /var/log/rpmpkgs giifacts@ansible-master.gii.ripe.net: >/dev/null 2>&1'\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nI expected the task to report no changes after the first run.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nOn every subsequent run, this task is reporting a change.\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nchanged: [ns1.nl-ams.testdns.ripe.net] => {\r\n    \"changed\": true,\r\n    \"cron_file\": \"rsync-facts\",\r\n    \"diff\": {\r\n        \"after\": \"#Ansible: rsync facts\\n30 10 * * * root sleep $((RANDOM \\\\% 600)); rsync -z /var/log/hostinfo /var/log/rpmpkgs giifacts@ansible-master.gii.ripe.net: >/dev/null 2>&1\\n\",\r\n        \"after_header\": \"/etc/cron.d/rsync-facts\",\r\n        \"before\": \"#Ansible: rsync facts\\n30 10 * * * root sleep $((RANDOM \\\\% 600)); rsync -z /var/log/hostinfo /var/log/rpmpkgs giifacts@ansible-master.gii.ripe.net: >/dev/null 2>&1\\n\",\r\n        \"before_header\": \"/etc/cron.d/rsync-facts\"\r\n    },\r\n    \"envs\": [],\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"backup\": false,\r\n            \"cron_file\": \"rsync-facts\",\r\n            \"day\": \"*\",\r\n            \"disabled\": false,\r\n            \"env\": null,\r\n            \"hour\": \"10\",\r\n            \"insertafter\": null,\r\n            \"insertbefore\": null,\r\n            \"job\": \"sleep $((RANDOM \\\\% 600)); rsync -z /var/log/hostinfo /var/log/rpmpkgs giifacts@ansible-master.gii.ripe.net: >/dev/null 2>&1\",\r\n            \"minute\": \"30\",\r\n            \"month\": \"*\",\r\n            \"name\": \"rsync facts\",\r\n            \"reboot\": false,\r\n            \"special_time\": null,\r\n            \"state\": \"present\",\r\n            \"user\": \"root\",\r\n            \"weekday\": \"*\"\r\n        }\r\n    },\r\n    \"jobs\": [\r\n        \"rsync facts\"\r\n    ],\r\n    \"warnings\": []\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71312", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71312/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71312/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71312/events", "html_url": "https://github.com/ansible/ansible/issues/71312", "id": 680342355, "node_id": "MDU6SXNzdWU2ODAzNDIzNTU=", "number": 71312, "title": "Roles with different parameters skipping tasks", "user": {"login": "orginux", "id": 24264965, "node_id": "MDQ6VXNlcjI0MjY0OTY1", "avatar_url": "https://avatars2.githubusercontent.com/u/24264965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/orginux", "html_url": "https://github.com/orginux", "followers_url": "https://api.github.com/users/orginux/followers", "following_url": "https://api.github.com/users/orginux/following{/other_user}", "gists_url": "https://api.github.com/users/orginux/gists{/gist_id}", "starred_url": "https://api.github.com/users/orginux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/orginux/subscriptions", "organizations_url": "https://api.github.com/users/orginux/orgs", "repos_url": "https://api.github.com/users/orginux/repos", "events_url": "https://api.github.com/users/orginux/events{/privacy}", "received_events_url": "https://api.github.com/users/orginux/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-17T15:57:33Z", "updated_at": "2020-08-17T16:06:58Z", "closed_at": "2020-08-17T16:06:58Z", "author_association": "NONE", "active_lock_reason": null, "body": " #### SUMMARY\r\nRoles with different parameters in the playbook skipped when these parameters mutually exclusive as if both parameters were applied simultaneously.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nrole\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nAnsible 2.9.5\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n AWX 10.0.0 and Molecule 2.22\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n[minimal test-case repo](https://github.com/orginux/examle-ansible-error)\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n # playbook\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  roles:\r\n    - role: test-role\r\n      vars:\r\n        var1: \"value 1\"\r\n\r\n    - role: test-role\r\n      vars:\r\n        var2: \"value 2\"\r\n```\r\n\r\n```yaml\r\n# role\r\n---\r\n- name: Debug 1\r\n  debug:\r\n    var: var1\r\n  when: var2 is not defined\r\n\r\n- name: Debug 2\r\n  debug:\r\n    var: var2\r\n  when: var1 is not defined\r\n```\r\n\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n```\r\nTASK [test-role : Debug 1] ***************************************************** \r\nok: [instance] => { \r\n    \"var1\": \"value 1\"\r\n}\r\n\r\nTASK [test-role : Debug 2] *****************************************************\r\nskipping: [instance]\r\n\r\nTASK [test-role : Debug 1] *****************************************************\r\nskipping: [instance]\r\n\r\nTASK [test-role : Debug 2] *****************************************************\r\nok: [instance] => {\r\n    \"var2\": \"value 2\"\r\n}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\n    TASK [test-role : Debug 1] *****************************************************\r\n    skipping: [instance]\r\n    \r\n    TASK [test-role : Debug 2] *****************************************************\r\n    skipping: [instance]\r\n    \r\n    TASK [test-role : Debug 1] *****************************************************\r\n    skipping: [instance]\r\n    \r\n    TASK [test-role : Debug 2] *****************************************************\r\n    skipping: [instance]\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    instance    : ok=1    changed=0    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71308", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71308/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71308/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71308/events", "html_url": "https://github.com/ansible/ansible/issues/71308", "id": 680286159, "node_id": "MDU6SXNzdWU2ODAyODYxNTk=", "number": 71308, "title": "Group and owner permission not change during symlink creation", "user": {"login": "pandithdurai", "id": 36061880, "node_id": "MDQ6VXNlcjM2MDYxODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/36061880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pandithdurai", "html_url": "https://github.com/pandithdurai", "followers_url": "https://api.github.com/users/pandithdurai/followers", "following_url": "https://api.github.com/users/pandithdurai/following{/other_user}", "gists_url": "https://api.github.com/users/pandithdurai/gists{/gist_id}", "starred_url": "https://api.github.com/users/pandithdurai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pandithdurai/subscriptions", "organizations_url": "https://api.github.com/users/pandithdurai/orgs", "repos_url": "https://api.github.com/users/pandithdurai/repos", "events_url": "https://api.github.com/users/pandithdurai/events{/privacy}", "received_events_url": "https://api.github.com/users/pandithdurai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1255973036, "node_id": "MDU6TGFiZWwxMjU1OTczMDM2", "url": "https://api.github.com/repos/ansible/ansible/labels/commands", "name": "commands", "color": "4071a5", "default": false, "description": "Commands category"}, {"id": 1255972080, "node_id": "MDU6TGFiZWwxMjU1OTcyMDgw", "url": "https://api.github.com/repos/ansible/ansible/labels/files", "name": "files", "color": "4071a5", "default": false, "description": "Files category"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 468273802, "node_id": "MDU6TGFiZWw0NjgyNzM4MDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "This PR relates to tests."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-17T14:37:38Z", "updated_at": "2020-08-17T17:05:15Z", "closed_at": "2020-08-17T17:01:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Issue Type : Bug Report\r\n\r\nansible version :  2.9.10\r\n\r\ncomponent name: Ansible File module\r\n\r\nI have recently installed the ansible 2.9.10 in new host and ansible symlink task not works as expected\r\n\r\n```\r\nansible --version\r\nansible 2.9.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Nov 15 2019, 19:24:58) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\nAnsible Module:\r\n```\r\n- name: Create Current symlink\r\n  file:\r\n    src: /var/www/html/dti_project/drupal_site\r\n    dest: \"{{ release_path }}\"\r\n    state: link\r\n    owner: ci_change_master\r\n    group: ci_change_master\r\n```\r\nResults:\r\n\r\nExpected Result:\r\n```\r\nTASK [drupal_core : Create Current symlink] ************************************\r\nchanged: [XXXXXXXXXXXXXXXXXXXX] => {\"changed\": true, \"dest\": \"/var/www/html/dti_project/current\", \"gid\": 511, \"group\": \"ci_change_master\", \"mode\": \"0777\", \"owner\": \"ci_change_master\", \"size\": 37, \"src\": \"/var/www/html/dti_project/drupal_site\", \"state\": \"link\", \"uid\": 509}\r\n```\r\nACTUAL RESULTS : \r\n```\r\nTASK [drupal_core : Create Current symlink] ************************************\r\nchanged: [XXXXXXXXXXXXXXXXXXXX] => {\"changed\": true, \"dest\": \"/var/www/html/dti_project/current\", \"gid\": 0, \"group\": \"root\", \"mode\": \"0777\", \"owner\": \"root\", \"size\": 37, \"src\": \"/var/www/html/dti_project/drupal_site\", \"state\": \"link\", \"uid\": 0}\r\n```\r\n\r\nIn the ACTUAL RESULTS ,  you could see the **owner** and **group** permission does not change to **ci_change_master** and it's work fine in another ansible instance with the version ansible 2.6.20\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71307", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71307/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71307/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71307/events", "html_url": "https://github.com/ansible/ansible/issues/71307", "id": 680273027, "node_id": "MDU6SXNzdWU2ODAyNzMwMjc=", "number": 71307, "title": "toml inventory cannot dump unsafe values", "user": {"login": "freeseacher", "id": 289277, "node_id": "MDQ6VXNlcjI4OTI3Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/289277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freeseacher", "html_url": "https://github.com/freeseacher", "followers_url": "https://api.github.com/users/freeseacher/followers", "following_url": "https://api.github.com/users/freeseacher/following{/other_user}", "gists_url": "https://api.github.com/users/freeseacher/gists{/gist_id}", "starred_url": "https://api.github.com/users/freeseacher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freeseacher/subscriptions", "organizations_url": "https://api.github.com/users/freeseacher/orgs", "repos_url": "https://api.github.com/users/freeseacher/repos", "events_url": "https://api.github.com/users/freeseacher/events{/privacy}", "received_events_url": "https://api.github.com/users/freeseacher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 814251818, "node_id": "MDU6TGFiZWw4MTQyNTE4MTg=", "url": "https://api.github.com/repos/ansible/ansible/labels/has_pr", "name": "has_pr", "color": "1d76db", "default": false, "description": "This issue has an associated PR."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": {"login": "sivel", "id": 39340, "node_id": "MDQ6VXNlcjM5MzQw", "avatar_url": "https://avatars3.githubusercontent.com/u/39340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sivel", "html_url": "https://github.com/sivel", "followers_url": "https://api.github.com/users/sivel/followers", "following_url": "https://api.github.com/users/sivel/following{/other_user}", "gists_url": "https://api.github.com/users/sivel/gists{/gist_id}", "starred_url": "https://api.github.com/users/sivel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sivel/subscriptions", "organizations_url": "https://api.github.com/users/sivel/orgs", "repos_url": "https://api.github.com/users/sivel/repos", "events_url": "https://api.github.com/users/sivel/events{/privacy}", "received_events_url": "https://api.github.com/users/sivel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sivel", "id": 39340, "node_id": "MDQ6VXNlcjM5MzQw", "avatar_url": "https://avatars3.githubusercontent.com/u/39340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sivel", "html_url": "https://github.com/sivel", "followers_url": "https://api.github.com/users/sivel/followers", "following_url": "https://api.github.com/users/sivel/following{/other_user}", "gists_url": "https://api.github.com/users/sivel/gists{/gist_id}", "starred_url": "https://api.github.com/users/sivel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sivel/subscriptions", "organizations_url": "https://api.github.com/users/sivel/orgs", "repos_url": "https://api.github.com/users/sivel/repos", "events_url": "https://api.github.com/users/sivel/events{/privacy}", "received_events_url": "https://api.github.com/users/sivel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-08-17T14:19:22Z", "updated_at": "2020-08-17T18:46:14Z", "closed_at": "2020-08-17T18:46:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### SUMMARY\r\nRendering  string \r\n```\r\nconfig:\r\n      service: !unsafe '{{ SYSLOG_IDENTIFIER }}'\r\n```\r\nwith\r\n```\r\n- name: place config\r\n  copy:\r\n    content: |\r\n      {{ config | to_toml }}\r\n    dest: \"{{ config_file }}\"\r\n```\r\nleads to \r\n```\r\nservice = [ \"{\", \"{\", \" \", \"S\", \"Y\", \"S\", \"L\", \"O\", \"G\", \"_\", \"I\", \"D\", \"E\", \"N\", \"T\", \"I\", \"F\", \"I\", \"E\", \"R\", \" \", \"}\", \"}\",]\r\n```\r\ninstead of \r\n```\r\nservice = \"{{ SYSLOG_IDENTIFIER }}\"\r\n```\r\nI understand that filter to_toml is not part of ansible and get from https://github.com/sivel/toiletwater but in code of it it uses ansible code in import section.\r\nhttps://github.com/sivel/toiletwater/blob/master/plugins/filter/toml.py#L10\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nto_toml\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n % ansible --version\r\nansible 2.9.11\r\n  config file = None\r\n  configured module search path = ['/home/ashirokih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ashirokih/python/lib/python3.8/site-packages/ansible\r\n  executable location = /home/ashirokih/python/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nempty\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nnot relevant\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nRendering  string \r\n```yaml\r\nconfig:\r\n      service: !unsafe '{{ SYSLOG_IDENTIFIER }}'\r\n```\r\nwith\r\n```yaml\r\n- name: place config\r\n  copy:\r\n    content: |\r\n      {{ config | to_toml }}\r\n    dest: \"{{ config_file }}\"\r\n```\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n```\r\nservice = \"{{ SYSLOG_IDENTIFIER }}\"\r\n```\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nservice = [ \"{\", \"{\", \" \", \"S\", \"Y\", \"S\", \"L\", \"O\", \"G\", \"_\", \"I\", \"D\", \"E\", \"N\", \"T\", \"I\", \"F\", \"I\", \"E\", \"R\", \" \", \"}\", \"}\",]\r\n```\r\n\r\nProbably i should ask @sivel ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71302", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71302/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71302/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71302/events", "html_url": "https://github.com/ansible/ansible/issues/71302", "id": 680013967, "node_id": "MDU6SXNzdWU2ODAwMTM5Njc=", "number": 71302, "title": "python 3.8.5 on target-system returns no value for ansible_os_family and ansible_distribution", "user": {"login": "xundeenergie", "id": 5894829, "node_id": "MDQ6VXNlcjU4OTQ4Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5894829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xundeenergie", "html_url": "https://github.com/xundeenergie", "followers_url": "https://api.github.com/users/xundeenergie/followers", "following_url": "https://api.github.com/users/xundeenergie/following{/other_user}", "gists_url": "https://api.github.com/users/xundeenergie/gists{/gist_id}", "starred_url": "https://api.github.com/users/xundeenergie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xundeenergie/subscriptions", "organizations_url": "https://api.github.com/users/xundeenergie/orgs", "repos_url": "https://api.github.com/users/xundeenergie/repos", "events_url": "https://api.github.com/users/xundeenergie/events{/privacy}", "received_events_url": "https://api.github.com/users/xundeenergie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 835286067, "node_id": "MDU6TGFiZWw4MzUyODYwNjc=", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.6", "name": "affects_2.6", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.6"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-17T07:29:28Z", "updated_at": "2020-08-17T14:47:00Z", "closed_at": "2020-08-17T14:42:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\npython 3.8.5 dropped the deprecated values \"dist\" and \"linux_distribution\" in module platform, so i can not get facts \"ansible_distribution\" and \"ansible_os_family\" anymore for hosts with python 3.8.5 (for example fedora 32) and playbooks and roles using this facts are broken now.\r\n\r\n##### ISSUE TYPE\r\nI use ansible_distribution and ansible_os_family to use different sets of package-names for package-manager (apt, dnf, rpm...) to install a default-set of packages on my systems. The names and packages are different on different linux_distributions. Some Binary-pathes for the same binary are also different on different distributions... \"/usr/sbin vs. /sbin for example\"\r\nUsing the now dropped facts from the python3 platform-module gave me the ability to run tasks or load named files for each linux-family (debian, redhat) or linux_distribution (debian, fedora) automatically.\r\nAfter Upgrading my Fedora-Hosts to F32, this tasks in roles are all broken now. \r\n\r\n##### COMPONENT NAME\r\nansible setup\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```paste below\r\nansible 2.6.4\r\n  config file = /home/ansible/.ansible.cfg\r\n  configured module search path = [u'/home/ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.16 (default, Oct 10 2019, 22:02:15) [GCC 8.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDEFAULT_HOST_LIST(/home/ansible/.ansible.cfg) = [u'/home/ansible/ansible/inventory']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nFedora 32, python 3.8.5\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Include distribution-specific variables - defaultrolemain                                                                                                                                                  \r\n  include_vars: \"{{ item }}\"                                                                                                                                                                                       \r\n  with_first_found:                                                                                                                                                                                                \r\n      - \"defaults_{{ ansible_distribution | lower }}.yml\"                                                                                                                                                          \r\n      - \"defaults_{{ ansible_os_family | lower }}.yml\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nFile \"vars/defaults_redhat.yml\" gets loaded.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n$ ansible-playbook --ask-vault-pass  default.yml --limit tag-331 --tags anacron\r\nVault password: \r\n [WARNING]: Ignoring invalid attribute: warn\r\n\r\n\r\nPLAY [servers laptops] ********************************************************************************************************************************************************************************************\r\nERROR! Decryption failed (no vault secrets were found that could decrypt) on /home/ansible/ansible/playbooks/group_vars/all/vault\r\n( 4 \u2717 ) (SCREEN) ansible@vpn (09:27)\r\n~/ansible/playbooks:(master -> origin/master) $ apv default.yml --limit tag-331 --tags anacron\r\nVault password: \r\n [WARNING]: Ignoring invalid attribute: warn\r\n\r\n\r\nPLAY [servers laptops] ********************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ********************************************************************************************************************************************************************************************\r\n [WARNING]: Module invocation had junk after the JSON data: AttributeError(\"module 'platform' has no attribute 'dist'\") KeyError('ansible_os_family')\r\n\r\nok: [tag-331]\r\n\r\nTASK [Include distribution-specific variables - default] **********************************************************************************************************************************************************\r\nfatal: [tag-331]: FAILED! => {\"msg\": \"No file was found when using with_first_found. Use the 'skip: true' option to allow this task to be skipped if no files are found\"}\r\n        to retry, use: --limit @/home/ansible/ansible/playbooks/default.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************\r\ntag-331                    : ok=1    changed=0    unreachable=0    failed=1\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71301", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71301/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71301/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71301/events", "html_url": "https://github.com/ansible/ansible/issues/71301", "id": 680012318, "node_id": "MDU6SXNzdWU2ODAwMTIzMTg=", "number": 71301, "title": "group_vars/all A multi-level variable references are not supported", "user": {"login": "Chenpipi", "id": 9670781, "node_id": "MDQ6VXNlcjk2NzA3ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9670781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chenpipi", "html_url": "https://github.com/Chenpipi", "followers_url": "https://api.github.com/users/Chenpipi/followers", "following_url": "https://api.github.com/users/Chenpipi/following{/other_user}", "gists_url": "https://api.github.com/users/Chenpipi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chenpipi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chenpipi/subscriptions", "organizations_url": "https://api.github.com/users/Chenpipi/orgs", "repos_url": "https://api.github.com/users/Chenpipi/repos", "events_url": "https://api.github.com/users/Chenpipi/events{/privacy}", "received_events_url": "https://api.github.com/users/Chenpipi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-17T07:26:13Z", "updated_at": "2020-08-18T01:45:12Z", "closed_at": "2020-08-17T14:58:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\ngroup_vars/all A multi-level variable references are not supported\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nansible-playbook\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.12 and 2.5.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Apr 15 2020, 17:20:14) [GCC 7.5.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nANSIBLE_SSH_CONTROL_PATH(/etc/ansible/ansible.cfg) = ./ssh_key\r\nDEFAULT_HOST_LIST(/etc/ansible/ansible.cfg) = [u'/etc/ansible/conf/hosts']\r\nDEFAULT_LOG_PATH(/etc/ansible/ansible.cfg) = /var/log/ansible.log\r\nDEFAULT_POLL_INTERVAL(/etc/ansible/ansible.cfg) = 15\r\nDEFAULT_SCP_IF_SSH(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_TIMEOUT(/etc/ansible/ansible.cfg) = 10\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nubuntu 18.04\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\nexample:\r\ngroup_vars/all:\r\ndb:\r\n  user: test\r\n  password: test\r\n  server: 127.0.0.1\r\n\r\ngroup_vars/test:\r\ndb:\r\n  port: 3306\r\n\r\nroles/test/templates/config.properties.j2\r\nmysql://{{ db.server }}:{{ db.port }}/test\r\nmysql.user={{ db.user }}\r\nmysql.password={{ db.password }}\r\n\r\nrun playbook:\r\nansible-playbook  test.yaml\r\n\r\nfail report:\r\nFAILED! => {\"changed\": false, \"msg\": \"AnsibleUndefinedVariable: 'server' is undefined\"}\r\n```\r\nbut, If it is written in the Test group, it can run successfully, or change the parameter name in all to use a single level, or use a single level for variable references.\r\n```\r\nexample:\r\ngroup_vars/all:\r\ndb_user: test\r\ndb_password: test\r\ndb_sever: 127.0.0.1\r\n\r\nroles/test/templates/config.properties.j2\r\nmysql://{{ db_server }}:{{ db.port }}/test\r\nmysql.user={{ db_user }}\r\nmysql.password={{ db_password }}\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71298", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71298/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71298/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71298/events", "html_url": "https://github.com/ansible/ansible/issues/71298", "id": 679744978, "node_id": "MDU6SXNzdWU2Nzk3NDQ5Nzg=", "number": 71298, "title": "Lookup plugin that returns the content of a directory", "user": {"login": "pythops", "id": 57548585, "node_id": "MDQ6VXNlcjU3NTQ4NTg1", "avatar_url": "https://avatars0.githubusercontent.com/u/57548585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythops", "html_url": "https://github.com/pythops", "followers_url": "https://api.github.com/users/pythops/followers", "following_url": "https://api.github.com/users/pythops/following{/other_user}", "gists_url": "https://api.github.com/users/pythops/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythops/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythops/subscriptions", "organizations_url": "https://api.github.com/users/pythops/orgs", "repos_url": "https://api.github.com/users/pythops/repos", "events_url": "https://api.github.com/users/pythops/events{/privacy}", "received_events_url": "https://api.github.com/users/pythops/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-16T12:20:13Z", "updated_at": "2020-08-17T14:47:00Z", "closed_at": "2020-08-16T16:11:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nA lookup plugin that returns the content of a directory as a list of elements . Something like that\r\n```\r\nlookup('directory', '/path/to/directory')\r\n```\r\n\r\n##### ISSUE TYPE\r\n- Feature Idea\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71296", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71296/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71296/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71296/events", "html_url": "https://github.com/ansible/ansible/issues/71296", "id": 679682773, "node_id": "MDU6SXNzdWU2Nzk2ODI3NzM=", "number": 71296, "title": "he following modules failed to execute: setup", "user": {"login": "basictheprogram", "id": 6723257, "node_id": "MDQ6VXNlcjY3MjMyNTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6723257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/basictheprogram", "html_url": "https://github.com/basictheprogram", "followers_url": "https://api.github.com/users/basictheprogram/followers", "following_url": "https://api.github.com/users/basictheprogram/following{/other_user}", "gists_url": "https://api.github.com/users/basictheprogram/gists{/gist_id}", "starred_url": "https://api.github.com/users/basictheprogram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/basictheprogram/subscriptions", "organizations_url": "https://api.github.com/users/basictheprogram/orgs", "repos_url": "https://api.github.com/users/basictheprogram/repos", "events_url": "https://api.github.com/users/basictheprogram/events{/privacy}", "received_events_url": "https://api.github.com/users/basictheprogram/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-16T03:53:34Z", "updated_at": "2020-08-17T15:01:07Z", "closed_at": "2020-08-17T14:51:44Z", "author_association": "NONE", "active_lock_reason": null, "body": ">In saying that it does bring up a flaw that we should fix, I just don't believe it's something >we've recently introduced.\r\n>\r\n>_Originally posted by @jborean93 in >https://github.com/ansible/ansible/issues/69736#issuecomment-635561591_\r\n\r\nI know this issue is several month old but I keep running into it with all the MS Surfaces I maintain. The commend above seemed to say there is a problem and it should be fixed but the issue was closed.\r\n\r\nCould the code be changed to ignore the error if the $win32_bios.ReleaseDate.ToString(\"MM/dd/yyyy\") is not found?\r\n\r\nSet a default value if $win32_bios.ReleaseDate.ToString(\"MM/dd/yyyy\") is not found?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71294", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71294/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71294/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71294/events", "html_url": "https://github.com/ansible/ansible/issues/71294", "id": 679641337, "node_id": "MDU6SXNzdWU2Nzk2NDEzMzc=", "number": 71294, "title": "Password plugin encrypt parameter", "user": {"login": "rovshango", "id": 19223924, "node_id": "MDQ6VXNlcjE5MjIzOTI0", "avatar_url": "https://avatars2.githubusercontent.com/u/19223924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rovshango", "html_url": "https://github.com/rovshango", "followers_url": "https://api.github.com/users/rovshango/followers", "following_url": "https://api.github.com/users/rovshango/following{/other_user}", "gists_url": "https://api.github.com/users/rovshango/gists{/gist_id}", "starred_url": "https://api.github.com/users/rovshango/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rovshango/subscriptions", "organizations_url": "https://api.github.com/users/rovshango/orgs", "repos_url": "https://api.github.com/users/rovshango/repos", "events_url": "https://api.github.com/users/rovshango/events{/privacy}", "received_events_url": "https://api.github.com/users/rovshango/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-15T21:02:22Z", "updated_at": "2020-08-17T14:46:59Z", "closed_at": "2020-08-15T21:27:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nencrypt parameter of password lookup plugin, gives error on any value (yes, sha512 etc.)\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```ansible 2.9.10\r\n  config file = None\r\n  configured module search path = ['/Users/.../.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/.../Library/Python/3.7/lib/python/site-packages/ansible\r\n  executable location = /Users/.../Library/Python/3.7/bin/ansible\r\n  python version = 3.7.3 (default, Apr 24 2020, 18:51:23) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n```\r\n---\r\n- hosts: localhost\r\n  gather_facts: false\r\n  vars:\r\n    var_users:\r\n    - name: sam\r\n    - name: julia\r\n  tasks:\r\n  - name: create six digit password and save them into file, along with salt\r\n    debug:\r\n      msg: \"{{ lookup('password', 'password-' + item.name + ' chars=digits length=6 encrypt=yes') }}\"\r\n    loop: \"{{ var_users }}\"\r\n```\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nIn the working directory will be 2 files, with 6 digit password and used salt\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n```\r\nTASK [create six digit password and save them into file, along with salt] ************************************************************************************\r\ntask path: /Users/.../password.yml:9\r\nfatal: [localhost]: FAILED! => _{_\r\n    \"msg\": \"An unhandled exception occurred while running the lookup plugin 'password'. Error was a <class 'ansible.errors.AnsibleError'>, original message: passlib does not support 'yes' algorithm\"\r\n}\r\n\r\nPLAY RECAP ***************************************************************************************************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   \r\n\r\n```\r\nAnd only first password file is being created, example:\r\n```\r\nbash-3.2$ cat a-password-sam \r\n114027 salt=JcmtPfec\r\n```\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71293", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71293/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71293/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71293/events", "html_url": "https://github.com/ansible/ansible/issues/71293", "id": 679567542, "node_id": "MDU6SXNzdWU2Nzk1Njc1NDI=", "number": 71293, "title": "profile_tasks miscalculates task run time with serial execution", "user": {"login": "timurakhmadeev", "id": 1212301, "node_id": "MDQ6VXNlcjEyMTIzMDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1212301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timurakhmadeev", "html_url": "https://github.com/timurakhmadeev", "followers_url": "https://api.github.com/users/timurakhmadeev/followers", "following_url": "https://api.github.com/users/timurakhmadeev/following{/other_user}", "gists_url": "https://api.github.com/users/timurakhmadeev/gists{/gist_id}", "starred_url": "https://api.github.com/users/timurakhmadeev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timurakhmadeev/subscriptions", "organizations_url": "https://api.github.com/users/timurakhmadeev/orgs", "repos_url": "https://api.github.com/users/timurakhmadeev/repos", "events_url": "https://api.github.com/users/timurakhmadeev/events{/privacy}", "received_events_url": "https://api.github.com/users/timurakhmadeev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-15T13:07:39Z", "updated_at": "2020-08-17T14:46:59Z", "closed_at": "2020-08-15T16:01:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nThe callback plugin shows time of the last task run. When a task is run in bathes via 'serial', it leads to incorrect results.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nprofile_tasks\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```ansible 2.9.12\r\n  config file = /home/tiak/test/ansible.cfg\r\n  configured module search path = [u'/home/tiak/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nDEFAULT_CALLBACK_WHITELIST(/home/tiak/test/ansible.cfg) = [u'profile_tasks']\r\nINTERPRETER_PYTHON(/home/tiak/test/ansible.cfg) = auto_silent\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu 18.04\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n$ cat inv.yml \r\nall:\r\n  hosts:\r\n    host1:\r\n      ansible_host: localhost\r\n    host2:\r\n      ansible_host: localhost\r\n\r\n$ cat test.yml \r\n- hosts: all\r\n  connection: local\r\n  serial: 1\r\n  gather_facts: no\r\n  tasks:\r\n    - name: sleep 3s\r\n      shell: sleep 3\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nTotal time reported by profile_tasks is 6s+\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nTotal time reported by profile_tasks is ~3s\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\n$ time ansible-playbook -i inv.yml test.yml \r\n\r\nPLAY [all] ****************************************************************************************************************************************************\r\n\r\nTASK [sleep 3s] ***********************************************************************************************************************************************\r\nSaturday 15 August 2020  16:05:30 +0300 (0:00:00.035)       0:00:00.035 ******* \r\nchanged: [host2]\r\n\r\nPLAY [all] ****************************************************************************************************************************************************\r\n\r\nTASK [sleep 3s] ***********************************************************************************************************************************************\r\nSaturday 15 August 2020  16:05:34 +0300 (0:00:03.677)       0:00:03.713 ******* \r\nchanged: [host1]\r\n\r\nPLAY RECAP ****************************************************************************************************************************************************\r\nhost1                      : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\nhost2                      : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n\r\nSaturday 15 August 2020  16:05:37 +0300 (0:00:03.446)       0:00:07.159 ******* \r\n=============================================================================== \r\nsleep 3s ----------------------------------------------------------------------------------------------------------------------------------------------- 3.45s\r\n\r\nreal\t0m7.907s\r\nuser\t0m1.664s\r\nsys\t0m0.507s\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71287", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71287/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71287/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71287/events", "html_url": "https://github.com/ansible/ansible/issues/71287", "id": 679462661, "node_id": "MDU6SXNzdWU2Nzk0NjI2NjE=", "number": 71287, "title": "Confirmed commit fails with TypeError in IOS XR netconf plugin for 2.9.9 ", "user": {"login": "kmtenhouse", "id": 40419337, "node_id": "MDQ6VXNlcjQwNDE5MzM3", "avatar_url": "https://avatars2.githubusercontent.com/u/40419337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmtenhouse", "html_url": "https://github.com/kmtenhouse", "followers_url": "https://api.github.com/users/kmtenhouse/followers", "following_url": "https://api.github.com/users/kmtenhouse/following{/other_user}", "gists_url": "https://api.github.com/users/kmtenhouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmtenhouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmtenhouse/subscriptions", "organizations_url": "https://api.github.com/users/kmtenhouse/orgs", "repos_url": "https://api.github.com/users/kmtenhouse/repos", "events_url": "https://api.github.com/users/kmtenhouse/events{/privacy}", "received_events_url": "https://api.github.com/users/kmtenhouse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-15T00:21:58Z", "updated_at": "2020-08-15T00:28:22Z", "closed_at": "2020-08-15T00:28:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nHitting a TypeError when attempting to use the confirmed commit capability with the IOX XR netconf plugin (Ansible 2.9.9). (Ansible module seems to accept type int for the timeout operation; underlying ncclient seems to need bytes or unicode.)\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nNetconf module \r\nNetconf plugin for IOS XR: \r\nansible/plugins/netconf/iosxr.py\r\n\r\nNote: I did see that this code is part of the [stable-2.9 branch](https://github.com/ansible/ansible/blob/stable-2.9/lib/ansible/plugins/netconf/iosxr.py#L185). However, it seems like plugin development may have been moved to [ansible.netcommon](https://github.com/ansible-collections/ansible.netcommon) for >2.9.9?  If that is where I need to move this issue I am happy to do so.\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.9\r\npython version = 2.7.5 \r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\n```\r\n(No output is shown)\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nCisco IOS XR\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nAttempt to perform a task with a confirmed commit, ex: \r\n\r\n```\r\n- name: use lookup filter to provide xml configuration to be applied via netconf\r\nconnection: netconf\r\nnetconf_config:\r\ntarget: \"{{ netconf_target | default('candidate') }}\"\r\nerror_option: \"{{ netconf_error_option | default('rollback-on-error') }}\"\r\ncommit: yes\r\nconfirm: 10\r\ndefault_operation: \"merge\"\r\ncontent: |\r\n<nc:config xmlns=\"urn:ietf:params:xml:ns:netconf:base:1.0\" xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\">\r\n<cdp xmlns=\"http://cisco.com/ns/yang/Cisco-IOS-XR-cdp-cfg\">\r\n<enable>true</enable>\r\n</cdp>\r\n</nc:config>\r\nregister: result\r\nvars:\r\nansible_persistent_log_messages: True\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nExpected not to receive a type error.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nTypeError is received when trying to perform the confirmed commit. The Ansible netconf module [seems to expect an int](https://github.com/ansible/ansible/blob/ea8c2194022f756156979f55debc84ef6a001e16/lib/ansible/modules/network/netconf/netconf_config.py#L277)\r\n\r\nAdditionally, setting confirm='10' does not help, although a team mate was able to do the following with Python:\r\nm.commit(confirmed=True, timeout='40', persist='100') succeeds.\r\nm.commit(confirmed=True, timeout=40, persist='100') fails with the same TypeError.\r\n\r\nExample error message is below:\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\n  File \"/usr/lib/python2.7/site-packages/ansible/utils/jsonrpc.py\", line 45, in handle_request\r\n    result = rpc_method(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/ansible/plugins/netconf/iosxr.py\", line 185, in commit\r\n    resp = self.m.commit(confirmed=confirmed, timeout=timeout, persist=persist)\r\n  File \"/usr/lib/python2.7/site-packages/ncclient/manager.py\", line 231, in execute\r\n    huge_tree=self._huge_tree).request(*args, **kwds)\r\n  File \"/usr/lib/python2.7/site-packages/ncclient/operations/edit.py\", line 158, in request\r\n    sub_ele(node, \"confirm-timeout\").text = timeout\r\n  File \"src/lxml/etree.pyx\", line 1024, in lxml.etree._Element.text.__set__\r\n  File \"src/lxml/apihelpers.pxi\", line 747, in lxml.etree._setNodeText\r\n  File \"src/lxml/apihelpers.pxi\", line 735, in lxml.etree._createTextNode\r\n  File \"src/lxml/apihelpers.pxi\", line 1538, in lxml.etree._utf8\r\nTypeError: Argument must be bytes or unicode, got 'int'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71284", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71284/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71284/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71284/events", "html_url": "https://github.com/ansible/ansible/issues/71284", "id": 679358503, "node_id": "MDU6SXNzdWU2NzkzNTg1MDM=", "number": 71284, "title": "ec2_asg module does not check instance health status", "user": {"login": "ehorning", "id": 44779718, "node_id": "MDQ6VXNlcjQ0Nzc5NzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/44779718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehorning", "html_url": "https://github.com/ehorning", "followers_url": "https://api.github.com/users/ehorning/followers", "following_url": "https://api.github.com/users/ehorning/following{/other_user}", "gists_url": "https://api.github.com/users/ehorning/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehorning/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehorning/subscriptions", "organizations_url": "https://api.github.com/users/ehorning/orgs", "repos_url": "https://api.github.com/users/ehorning/repos", "events_url": "https://api.github.com/users/ehorning/events{/privacy}", "received_events_url": "https://api.github.com/users/ehorning/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-14T19:25:59Z", "updated_at": "2020-08-14T19:50:46Z", "closed_at": "2020-08-14T19:36:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nDue to the ASG grace period, it appears it is possible for an EC2 to report a lifecycle state of \"InService\" on the ASG while still reporting an instance status of \"Unhealthy\" on the ASG. The ec2_asg module proceeds successfully in this scenario even though registering and debugging the result shows the following:\r\n\r\n```\r\n       \"instance_facts\": {\r\n          \"xxx\": {\r\n                \"health_status\": \"Unhealthy\",\r\n                \"launch_config_name\": \"yyy\",\r\n                 \"lifecycle_state\": \"InService\"\r\n             }\r\n         }\r\n```\r\nI believe this is due to the fact that there is no check of the health status [here](https://github.com/ansible/ansible/blob/stable-2.7/lib/ansible/modules/cloud/amazon/ec2_asg.py#L681)\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nec2_asg\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.7.10\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nXenial EC2\r\n\r\n##### STEPS TO REPRODUCE\r\nDeploy a broken AMI via an autoscaling group using the ec2_asg module, a classic load balancer, and ELB health checks on the ASG\r\n\r\n\r\n##### EXPECTED RESULTS\r\nThe module should wait until the instance is healthy and fail if the instance does not become healthy before the timeout\r\n\r\n\r\n##### ACTUAL RESULTS\r\nThe module waited for the instance to enter lifecycle state \"InService\" and then proceeded with the deploy despite the fact that the instance health status was still \"Unhealthy\"\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71283", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71283/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71283/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71283/events", "html_url": "https://github.com/ansible/ansible/issues/71283", "id": 679218765, "node_id": "MDU6SXNzdWU2NzkyMTg3NjU=", "number": 71283, "title": "Installation with molecule on CentOS Docker image fails with UnicodeError", "user": {"login": "markfaine", "id": 949949, "node_id": "MDQ6VXNlcjk0OTk0OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/949949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markfaine", "html_url": "https://github.com/markfaine", "followers_url": "https://api.github.com/users/markfaine/followers", "following_url": "https://api.github.com/users/markfaine/following{/other_user}", "gists_url": "https://api.github.com/users/markfaine/gists{/gist_id}", "starred_url": "https://api.github.com/users/markfaine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markfaine/subscriptions", "organizations_url": "https://api.github.com/users/markfaine/orgs", "repos_url": "https://api.github.com/users/markfaine/repos", "events_url": "https://api.github.com/users/markfaine/events{/privacy}", "received_events_url": "https://api.github.com/users/markfaine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-14T15:03:52Z", "updated_at": "2020-08-14T15:07:50Z", "closed_at": "2020-08-14T15:07:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I could not find any reference to this issue when searching.  I have tried the devel branch with the same results.\r\n\r\n##### SUMMARY\r\nWhen trying to run molecule test against a collection an included ansible module requires ansible to be installed in the docker container (CentOS 7) as a dependency.  Pip installation fails with UnicodeError\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nInstallation\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.9.12\r\n2.9.12 devel\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nCould not install\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nCentOS 7\r\n\r\n##### STEPS TO REPRODUCE\r\n```\r\n- name: \"Install python libraries\"\r\n  pip:\r\n    name: \"{{ item }}\"\r\n    state: latest\r\n    virtualenv: \"{{ ansible_files | default('/var/ansible/files') }}/deploy\"\r\n    virtualenv_site_packages: yes\r\n  loop:\r\n    - pip\r\n    - ansible\r\n    - requests\r\n    - docker\r\n    - pytz\r\n    - python_dateutil\r\n  become: true\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nAnsible installs properly in the docker container and the molecule test continues to run\r\n\r\n\r\n##### ACTUAL RESULTS\r\n```\r\n    TASK [nics.splunk.splunkhf : Install python libraries] *************************\r\n    changed: [instance] => (item=pip)\r\n    failed: [instance] (item=git+https://github.com/ansible/ansible.git@devel) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"cmd\": [\"/var/ansible/files/deploy/bin/pip2\", \"install\", \"-U\", \"git+https://github.com/ansible/ansible.git@devel\"], \"item\": \"git+https://github.com/ansible/ansible.git@devel\", \"msg\": \"stdout: Collecting git+https://github.com/ansible/ansible.git@devel\\n  Cloning https://github.com/ansible/ansible.git (to revision devel) to ./pip-req-build-g1Vg5h\\nCollecting jinja2\\n  Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)\\nCollecting PyYAML\\n  Downloading PyYAML-5.3.1.tar.gz (269 kB)\\nCollecting cryptography\\n  Downloading cryptography-3.0-cp27-cp27mu-manylinux2010_x86_64.whl (2.7 MB)\\nCollecting packaging\\n  Downloading packaging-20.4-py2.py3-none-any.whl (37 kB)\\nCollecting MarkupSafe>=0.23\\n  Downloading MarkupSafe-1.1.1-cp27-cp27mu-manylinux1_x86_64.whl (24 kB)\\nCollecting cffi!=1.11.3,>=1.8\\n  Downloading cffi-1.14.1-cp27-cp27mu-manylinux1_x86_64.whl (388 kB)\\nRequirement already satisfied, skipping upgrade: ipaddress; python_version < \\\"3\\\" in /usr/lib/python2.7/site-packages (from cryptography->ansible-base==2.11.0.dev0) (1.0.16)\\nCollecting six>=1.4.1\\n  Downloading six-1.15.0-py2.py3-none-any.whl (10 kB)\\nCollecting enum34; python_version < \\\"3\\\"\\n  Downloading enum34-1.1.10-py2-none-any.whl (11 kB)\\nCollecting pyparsing>=2.0.2\\n  Downloading pyparsing-2.4.7-py2.py3-none-any.whl (67 kB)\\nCollecting pycparser\\n  Downloading pycparser-2.20-py2.py3-none-any.whl (112 kB)\\nBuilding wheels for collected packages: ansible-base, PyYAML\\n  Building wheel for ansible-base (setup.py): started\\n  Building wheel for ansible-base (setup.py): finished with status 'done'\\n  Created wheel for ansible-base: filename=ansible_base-2.11.0.dev0-py2-none-any.whl size=1856248 sha256=693b7b043d05a283a511ffa4fcf15b149bacb217e5dd042ef3f2142bd842fcc5\\n  Stored in directory: /tmp/pip-ephem-wheel-cache-r_ihjY/wheels/50/a9/0f/4dbf22262a7182b947a7d824306961ddc47cb2dc7ea7e353f2\\n  Building wheel for PyYAML (setup.py): started\\n  Building wheel for PyYAML (setup.py): finished with status 'done'\\n  Created wheel for PyYAML: filename=PyYAML-5.3.1-cp27-cp27mu-linux_x86_64.whl size=46946 sha256=6e9cad9cf245469b3822e85bea56eb36d301619d4195516f3e8681ffaa0b806d\\n  Stored in directory: /root/.cache/pip/wheels/d1/d5/a0/3c27cdc8b0209c5fc1385afeee936cf8a71e13d885388b4be2\\nSuccessfully built ansible-base PyYAML\\nInstalling collected packages: MarkupSafe, jinja2, PyYAML, pycparser, cffi, six, enum34, cryptography, pyparsing, packaging, ansible-base\\nSuccessfully installed MarkupSafe-1.1.1 PyYAML-5.3.1 ansible-base-2.11.0.dev0 cffi-1.14.1 cryptography-3.0 enum34-1.1.10 jinja2-2.11.2 packaging-20.4 pycparser-2.20 pyparsing-2.4.7 six-1.15.0\\n\\n:stderr: DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support\\nTraceback (most recent call last):\\n  File \\\"/var/ansible/files/deploy/bin/pip2\\\", line 11, in <module>\\n    sys.exit(main())\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/cli/main.py\\\", line 75, in main\\n    return command.main(cmd_args)\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/cli/base_command.py\\\", line 121, in main\\n    return self._main(args)\\n  File \\\"/usr/lib64/python2.7/contextlib.py\\\", line 24, in __exit__\\n    self.gen.next()\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/cli/command_context.py\\\", line 28, in main_context\\n    yield\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 479, in __exit__\\n    _reraise_with_existing_context(exc_details)\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 353, in _reraise_with_existing_context\\n    exec(\\\"raise exc_type, exc_value, exc_tb\\\")\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 468, in __exit__\\n    if cb(*exc_details):\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 396, in _exit_wrapper\\n    return cm_exit(cm, *exc_details)\\n  File \\\"/usr/lib64/python2.7/contextlib.py\\\", line 24, in __exit__\\n    self.gen.next()\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/utils/temp_dir.py\\\", line 46, in global_tempdir_manager\\n    _tempdir_manager = old_tempdir_manager\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 479, in __exit__\\n    _reraise_with_existing_context(exc_details)\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 353, in _reraise_with_existing_context\\n    exec(\\\"raise exc_type, exc_value, exc_tb\\\")\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 468, in __exit__\\n    if cb(*exc_details):\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/contextlib2.py\\\", line 396, in _exit_wrapper\\n    return cm_exit(cm, *exc_details)\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/utils/temp_dir.py\\\", line 175, in __exit__\\n    self.cleanup()\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/utils/temp_dir.py\\\", line 199, in cleanup\\n    rmtree(ensure_text(self._path))\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/retrying.py\\\", line 49, in wrapped_f\\n    return Retrying(*dargs, **dkw).call(f, *args, **kw)\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/retrying.py\\\", line 212, in call\\n    raise attempt.get()\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/retrying.py\\\", line 247, in get\\n    six.reraise(self.value[0], self.value[1], self.value[2])\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_vendor/retrying.py\\\", line 200, in call\\n    attempt = Attempt(fn(*args, **kwargs), attempt_number, False)\\n  File \\\"/var/ansible/files/deploy/lib/python2.7/site-packages/pip/_internal/utils/misc.py\\\", line 139, in rmtree\\n    onerror=rmtree_errorhandler)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 247, in rmtree\\n    rmtree(fullname, ignore_errors, onerror)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 247, in rmtree\\n    rmtree(fullname, ignore_errors, onerror)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 247, in rmtree\\n    rmtree(fullname, ignore_errors, onerror)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 247, in rmtree\\n    rmtree(fullname, ignore_errors, onerror)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 247, in rmtree\\n    rmtree(fullname, ignore_errors, onerror)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 241, in rmtree\\n    fullname = os.path.join(path, name)\\n  File \\\"/var/ansible/files/deploy/lib64/python2.7/posixpath.py\\\", line 80, in join\\n    path += '/' + b\\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe3 in position 25: ordinal not in range(128)\\n\"}\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71282", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71282/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71282/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71282/events", "html_url": "https://github.com/ansible/ansible/issues/71282", "id": 679193384, "node_id": "MDU6SXNzdWU2NzkxOTMzODQ=", "number": 71282, "title": "Cron module always changed", "user": {"login": "jkman340", "id": 37850709, "node_id": "MDQ6VXNlcjM3ODUwNzA5", "avatar_url": "https://avatars3.githubusercontent.com/u/37850709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkman340", "html_url": "https://github.com/jkman340", "followers_url": "https://api.github.com/users/jkman340/followers", "following_url": "https://api.github.com/users/jkman340/following{/other_user}", "gists_url": "https://api.github.com/users/jkman340/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkman340/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkman340/subscriptions", "organizations_url": "https://api.github.com/users/jkman340/orgs", "repos_url": "https://api.github.com/users/jkman340/repos", "events_url": "https://api.github.com/users/jkman340/events{/privacy}", "received_events_url": "https://api.github.com/users/jkman340/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-14T14:25:48Z", "updated_at": "2020-08-15T12:45:14Z", "closed_at": "2020-08-15T12:44:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nAfter upgrading from v2.9.10 to v2.9.12, cron tasks are always showing as changed.  Nothing is modified in the cron file (ie no additional entries are added).\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ncron module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/myuser/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu Bionic\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71281", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71281/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71281/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71281/events", "html_url": "https://github.com/ansible/ansible/issues/71281", "id": 679096886, "node_id": "MDU6SXNzdWU2NzkwOTY4ODY=", "number": 71281, "title": "maven_artifact does not check destination files", "user": {"login": "bossi86", "id": 61741929, "node_id": "MDQ6VXNlcjYxNzQxOTI5", "avatar_url": "https://avatars2.githubusercontent.com/u/61741929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bossi86", "html_url": "https://github.com/bossi86", "followers_url": "https://api.github.com/users/bossi86/followers", "following_url": "https://api.github.com/users/bossi86/following{/other_user}", "gists_url": "https://api.github.com/users/bossi86/gists{/gist_id}", "starred_url": "https://api.github.com/users/bossi86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bossi86/subscriptions", "organizations_url": "https://api.github.com/users/bossi86/orgs", "repos_url": "https://api.github.com/users/bossi86/repos", "events_url": "https://api.github.com/users/bossi86/events{/privacy}", "received_events_url": "https://api.github.com/users/bossi86/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-14T11:32:35Z", "updated_at": "2020-08-14T11:44:07Z", "closed_at": "2020-08-14T11:44:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nWhen using the maven_artifact role we facing some issues. If you download a file with a retry loop and run into a \"no more space left on device\" error, an incomplete/currupted file will be given an OK status after the first failed attempt because a file exists without checking for file size, hash, etc.\r\nA second thing we could watch is: If you download a file locally you need twice as much space. In one step the file is downloaded and in the second step, the file is copied to the destination.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nmaven_artifact\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.8.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/local_modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Sep 26 2019, 13:23:47) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nANSIBLE_PIPELINING(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_MODULE_PATH(/etc/ansible/ansible.cfg) = [u'/usr/share/local_modules']\r\nDEFAULT_MODULE_UTILS_PATH(/etc/ansible/ansible.cfg) = [u'/usr/share/local_module_utils']\r\nDEFAULT_TIMEOUT(/etc/ansible/ansible.cfg) = 15\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nRed Hat Enterprise Linux Server release 7.5 (Maipo)\r\nLinux bsul0124 3.10.0-1127.13.1.el7.x86_64 #1 SMP Fri Jun 12 14:34:17 EDT 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n##### STEPS TO REPRODUCE\r\nHave a /tmp space of e.g. 1GB\r\nDownload e.g. a 700MB large artefact locally with a destination in /tmp\r\n\r\n```\r\n- name: \"Download artifact: {{ plt_ad_artifact_file_name }} from repository\"\r\n  local_action: maven_artifact\r\n  run_once: True\r\n  args:\r\n    repository_url: \"{{ plt_ad_artifact_url }}/{{ plt_ad_artifact_repo_name }}\"\r\n    group_id: \"{{ plt_ad_artifact_groupid }}\"\r\n    artifact_id: \"{{ plt_ad_artifact_id }}\"\r\n    version: \"{{ plt_ad_artifact_version }}\"\r\n    extension: \"{{ plt_ad_artifact_extension }}\"\r\n    classifier: \"{{ plt_ad_artifact_classifier| default() }}\"\r\n    dest: \"{{ plt_ad_artifact_local_download_path }}/{{ plt_ad_artifact_file_name }}\"\r\n    state: present\r\n    username: \"{{ plt_ad_artifact_repo_user }}\"\r\n    password: \"{{ plt_ad_artifact_repo_password }}\"\r\n    timeout: 30\r\n  register: plt_ad_download\r\n  until: not plt_ad_download.failed\r\n  delay: 5\r\n  retries: 10\r\n  become: False\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe module should check if the file which is currently present (dest) is the same file like the one from the maven repository (e.g. file size, hash value).\r\nAdditionally it would be a good idea, to just move the file and not copy it. If you have very large artifacts, the mova can cause trouble, because you will need twice as much space.\r\n\r\n\r\n##### ACTUAL RESULTS\r\nWe used the maven_artifact role with a retry loop, because we faced some network issues in our environment sometimes.\r\n\r\nThe first run failed, due to no space left on device. And we had a corrupted copy of the artefact. Then the role started again, saw that the dest file already exists and ended up with OK state.\r\n\r\n```\r\n{\r\n    \"retries\": 11,\r\n    \"exception\": \"Traceback (most recent call last):\\n  File \\\"<stdin>\\\", line 114, in <module>\\n  File \\\"<stdin>\\\", line 106, in _ansiballz_main\\n  File \\\"<stdin>\\\", line 49, in invoke_module\\n  File \\\"/tmp/ansible_maven_artifact_payload_j08fhl/__main__.py\\\", line 573, in <module>\\n  File \\\"/tmp/ansible_maven_artifact_payload_j08fhl/__main__.py\\\", line 554, in main\\n  File \\\"/tmp/ansible_maven_artifact_payload_j08fhl/__main__.py\\\", line 423, in download\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 301, in move\\n    copy2(src, real_dst)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 130, in copy2\\n    copyfile(src, dst)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 84, in copyfile\\n    copyfileobj(fsrc, fdst)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 52, in copyfileobj\\n    fdst.write(buf)\\nIOError: [Errno 28] No space left on device\\n\",\r\n    \"_ansible_no_log\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"<stdin>\\\", line 114, in <module>\\n  File \\\"<stdin>\\\", line 106, in _ansiballz_main\\n  File \\\"<stdin>\\\", line 49, in invoke_module\\n  File \\\"/tmp/ansible_maven_artifact_payload_j08fhl/__main__.py\\\", line 573, in <module>\\n  File \\\"/tmp/ansible_maven_artifact_payload_j08fhl/__main__.py\\\", line 554, in main\\n  File \\\"/tmp/ansible_maven_artifact_payload_j08fhl/__main__.py\\\", line 423, in download\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 301, in move\\n    copy2(src, real_dst)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 130, in copy2\\n    copyfile(src, dst)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 84, in copyfile\\n    copyfileobj(fsrc, fdst)\\n  File \\\"/usr/lib64/python2.7/shutil.py\\\", line 52, in copyfileobj\\n    fdst.write(buf)\\nIOError: [Errno 28] No space left on device\\n\",\r\n    \"changed\": false,\r\n    \"module_stdout\": \"\",\r\n    \"attempts\": 1,\r\n    \"rc\": 1,\r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\"\r\n}\r\n\r\n{\r\n    \"group\": \"awx\",\r\n    \"uid\": 10653,\r\n    \"_ansible_delegated_vars\": {\r\n        \"ansible_host\": \"localhost\"\r\n    },\r\n    \"dest\": \"/tmp/awx_334414_a1t40hai/project/files/sas.tgz\",\r\n    \"changed\": false,\r\n    \"state\": \"file\",\r\n    \"attempts\": 2,\r\n    \"gid\": 10128,\r\n    \"mode\": \"0644\",\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"directory_mode\": null,\r\n            \"force\": null,\r\n            \"backup\": null,\r\n            \"remote_src\": null,\r\n            \"repository_url\": \"https://artifactory.fs01.vwf.vwfs-ad/artifactory/APP_IFRS-17_DE_ICTO-12147\",\r\n            \"owner\": null,\r\n            \"follow\": false,\r\n            \"keep_name\": false,\r\n            \"group\": null,\r\n            \"unsafe_writes\": null,\r\n            \"serole\": null,\r\n            \"content\": null,\r\n            \"state\": \"present\",\r\n            \"version\": \"19w40\",\r\n            \"setype\": null,\r\n            \"username\": \"tower\",\r\n            \"artifact_id\": \"depot\",\r\n            \"dest\": \"/tmp/awx_334414_a1t40hai/project/files/sas.tgz\",\r\n            \"selevel\": null,\r\n            \"regexp\": null,\r\n            \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"src\": null,\r\n            \"extension\": \"tgz\",\r\n            \"verify_checksum\": \"download\",\r\n            \"seuser\": null,\r\n            \"headers\": null,\r\n            \"delimiter\": null,\r\n            \"mode\": null,\r\n            \"timeout\": 30,\r\n            \"attributes\": null,\r\n            \"group_id\": \"com.sas\",\r\n            \"validate_certs\": false,\r\n            \"classifier\": \"\"\r\n        }\r\n    },\r\n    \"owner\": \"awx\",\r\n    \"size\": 20863418368,\r\n    \"_ansible_no_log\": false\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71280", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71280/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71280/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71280/events", "html_url": "https://github.com/ansible/ansible/issues/71280", "id": 679088573, "node_id": "MDU6SXNzdWU2NzkwODg1NzM=", "number": 71280, "title": "postgresql_set forbids empty string as value", "user": {"login": "francoisfreitag", "id": 2758243, "node_id": "MDQ6VXNlcjI3NTgyNDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2758243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/francoisfreitag", "html_url": "https://github.com/francoisfreitag", "followers_url": "https://api.github.com/users/francoisfreitag/followers", "following_url": "https://api.github.com/users/francoisfreitag/following{/other_user}", "gists_url": "https://api.github.com/users/francoisfreitag/gists{/gist_id}", "starred_url": "https://api.github.com/users/francoisfreitag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/francoisfreitag/subscriptions", "organizations_url": "https://api.github.com/users/francoisfreitag/orgs", "repos_url": "https://api.github.com/users/francoisfreitag/repos", "events_url": "https://api.github.com/users/francoisfreitag/events{/privacy}", "received_events_url": "https://api.github.com/users/francoisfreitag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-14T11:17:09Z", "updated_at": "2020-08-14T11:21:09Z", "closed_at": "2020-08-14T11:21:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nThe `postgresql_set` module checks the `value` and `reset` parameters for emptiness. If both are empty, an error is reported https://github.com/ansible/ansible/blob/e507c127e58791755d207b46f6c829dacd7ad55c/test/support/integration/plugins/modules/postgresql_set.py#L308-L309\r\n\r\nPostgreSQL allows an empty string to be passed to configuration option [`listen_addresses`](https://www.postgresql.org/docs/current/runtime-config-connection.html#GUC-LISTEN-ADDRESSES):\r\n\r\n> If the list is empty, the server does not listen on any IP interface at all, in which case only Unix-domain sockets can be used to connect to it.\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\npostgresql_set\r\n\r\n##### ANSIBLE VERSION\r\n```paste below\r\nansible 2.9.11\r\n  config file = /home/freitafr/dev/ansible-server-setup/ansible.cfg\r\n  configured module search path = ['/home/freitafr/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/freitafr/dev/ansible-server-setup/venv/lib/python3.8/site-packages/ansible\r\n  executable location = /home/freitafr/dev/ansible-server-setup/venv/bin/ansible\r\n  python version = 3.8.5 (default, Jul 27 2020, 08:42:51) [GCC 10.1.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDEFAULT_BECOME(/home/freitafr/dev/ansible-server-setup/ansible.cfg) = True\r\nDEFAULT_HOST_LIST(/home/freitafr/dev/ansible-server-setup/ansible.cfg) = ['/home/freitafr/dev/ansible-server-setup/hosts']\r\nDEFAULT_LOG_PATH(/home/freitafr/dev/ansible-server-setup/ansible.cfg) = /home/freitafr/dev/ansible-server-setup/ansible.log\r\nDEFAULT_REMOTE_USER(/home/freitafr/dev/ansible-server-setup/ansible.cfg) = root\r\nDEFAULT_STDOUT_CALLBACK(/home/freitafr/dev/ansible-server-setup/ansible.cfg) = yaml\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nTarget OS: CentOS 7\r\nTarget PostgreSQL version: 11.9\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- hosts: all\r\n  tasks:\r\n    - name: Set listen addresses to UNIX socket\r\n      postgresql_set:\r\n        name: listen_addresses\r\n        value: ''\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n`postgresql.auto.conf` should have an entry:\r\n```\r\nlisten_addresses = ''\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nPYTHONUNBUFFERED=1 ANSIBLE_NOCOLOR=true ANSIBLE_CONFIG='../ansible.cfg' ANSIBLE_HOST_KEY_CHECKING=false ANSIBLE_SSH_ARGS='-o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s' ../venv/bin/ansible-playbook --connection=ssh --timeout=30 --limit=\"all\" --inventory-file=/home/freitafr/dev/ansible-server-setup/tests/.vagrant/provisioners/ansible/inventory -vvvv ../foo.yml\r\nansible-playbook 2.9.11\r\n  config file = /home/freitafr/dev/ansible-server-setup/ansible.cfg\r\n  configured module search path = ['/home/freitafr/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/freitafr/dev/ansible-server-setup/venv/lib/python3.8/site-packages/ansible\r\n  executable location = ../venv/bin/ansible-playbook\r\n  python version = 3.8.5 (default, Jul 27 2020, 08:42:51) [GCC 10.1.0]\r\nUsing /home/freitafr/dev/ansible-server-setup/ansible.cfg as config file\r\nsetting up inventory plugins\r\nhost_list declined parsing /home/freitafr/dev/ansible-server-setup/tests/.vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory as it did not pass its verify_file() method\r\nscript declined parsing /home/freitafr/dev/ansible-server-setup/tests/.vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory as it did not pass its verify_file() method\r\nauto declined parsing /home/freitafr/dev/ansible-server-setup/tests/.vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory as it did not pass its verify_file() method\r\nParsed /home/freitafr/dev/ansible-server-setup/tests/.vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory inventory source with ini plugin\r\nLoading callback plugin yaml of type stdout, v2.0 from /home/freitafr/dev/ansible-server-setup/venv/lib/python3.8/site-packages/ansible/plugins/callback/yaml.py\r\n\r\nPLAYBOOK: foo.yml **************************************************************\r\nPositional arguments: ../foo.yml\r\nverbosity: 4\r\nremote_user: root\r\nconnection: ssh\r\ntimeout: 30\r\nbecome: True\r\nbecome_method: sudo\r\ntags: ('all',)\r\ninventory: ('/home/freitafr/dev/ansible-server-setup/tests/.vagrant/provisioners/ansible/inventory',)\r\nsubset: all\r\nforks: 5\r\n1 plays in ../foo.yml\r\n\r\nPLAY [all] *********************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\ntask path: /home/freitafr/dev/ansible-server-setup/foo.yml:1\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'echo ~vagrant && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'/home/vagrant\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug1: Control socket \"/home/freitafr/.ansible/cp/17d6e21220\" does not exist\\r\\ndebug2: ssh_connect_direct\\r\\ndebug1: Connecting to 127.0.0.1 [127.0.0.1] port 2200.\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug1: fd 3 clearing O_NONBLOCK\\r\\ndebug1: Connection established.\\r\\ndebug3: timeout: 30000 ms remain after connect\\r\\ndebug1: identity file /home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key type -1\\r\\ndebug1: identity file /home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key-cert type -1\\r\\ndebug1: Local version string SSH-2.0-OpenSSH_8.3\\r\\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.4\\r\\ndebug1: match: OpenSSH_7.4 pat OpenSSH_7.0*,OpenSSH_7.1*,OpenSSH_7.2*,OpenSSH_7.3*,OpenSSH_7.4*,OpenSSH_7.5*,OpenSSH_7.6*,OpenSSH_7.7* compat 0x04000002\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug1: Authenticating to 127.0.0.1:2200 as \\'vagrant\\'\\r\\ndebug3: put_host_port: [127.0.0.1]:2200\\r\\ndebug3: hostkeys_foreach: reading file \"/dev/null\"\\r\\ndebug3: send packet: type 20\\r\\ndebug1: SSH2_MSG_KEXINIT sent\\r\\ndebug3: receive packet: type 20\\r\\ndebug1: SSH2_MSG_KEXINIT received\\r\\ndebug2: local client KEXINIT proposal\\r\\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c\\r\\ndebug2: host key algorithms: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,ssh-ed25519-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ecdsa-sha2-nistp256@openssh.com,ssh-ed25519,sk-ssh-ed25519@openssh.com,rsa-sha2-512,rsa-sha2-256,ssh-rsa\\r\\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\\r\\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\\r\\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: compression ctos: none,zlib@openssh.com,zlib\\r\\ndebug2: compression stoc: none,zlib@openssh.com,zlib\\r\\ndebug2: languages ctos: \\r\\ndebug2: languages stoc: \\r\\ndebug2: first_kex_follows 0 \\r\\ndebug2: reserved 0 \\r\\ndebug2: peer server KEXINIT proposal\\r\\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\\r\\ndebug2: host key algorithms: ssh-rsa,rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\\r\\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com,aes128-cbc,aes192-cbc,aes256-cbc,blowfish-cbc,cast128-cbc,3des-cbc\\r\\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com,aes128-cbc,aes192-cbc,aes256-cbc,blowfish-cbc,cast128-cbc,3des-cbc\\r\\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: compression ctos: none,zlib@openssh.com\\r\\ndebug2: compression stoc: none,zlib@openssh.com\\r\\ndebug2: languages ctos: \\r\\ndebug2: languages stoc: \\r\\ndebug2: first_kex_follows 0 \\r\\ndebug2: reserved 0 \\r\\ndebug1: kex: algorithm: curve25519-sha256\\r\\ndebug1: kex: host key algorithm: ecdsa-sha2-nistp256\\r\\ndebug1: kex: server->client cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\\r\\ndebug1: kex: client->server cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\\r\\ndebug3: send packet: type 30\\r\\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\\r\\ndebug3: receive packet: type 31\\r\\ndebug1: Server host key: ecdsa-sha2-nistp256 SHA256:TTCSBbeXXFCUU0GekjrRWRujanFDfLt+MaJbfkkLdlo\\r\\ndebug3: put_host_port: [127.0.0.1]:2200\\r\\ndebug3: put_host_port: [127.0.0.1]:2200\\r\\ndebug3: hostkeys_foreach: reading file \"/dev/null\"\\r\\ndebug1: checking without port identifier\\r\\ndebug3: hostkeys_foreach: reading file \"/dev/null\"\\r\\nWarning: Permanently added \\'[127.0.0.1]:2200\\' (ECDSA) to the list of known hosts.\\r\\ndebug3: send packet: type 21\\r\\ndebug2: set_newkeys: mode 1\\r\\ndebug1: rekey out after 134217728 blocks\\r\\ndebug1: SSH2_MSG_NEWKEYS sent\\r\\ndebug1: expecting SSH2_MSG_NEWKEYS\\r\\ndebug3: receive packet: type 21\\r\\ndebug1: SSH2_MSG_NEWKEYS received\\r\\ndebug2: set_newkeys: mode 0\\r\\ndebug1: rekey in after 134217728 blocks\\r\\ndebug1: Will attempt key: /home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key  explicit\\r\\ndebug2: pubkey_prepare: done\\r\\ndebug3: send packet: type 5\\r\\ndebug3: receive packet: type 7\\r\\ndebug1: SSH2_MSG_EXT_INFO received\\r\\ndebug1: kex_input_ext_info: server-sig-algs=<rsa-sha2-256,rsa-sha2-512>\\r\\ndebug3: receive packet: type 6\\r\\ndebug2: service_accept: ssh-userauth\\r\\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\\r\\ndebug3: send packet: type 50\\r\\ndebug3: receive packet: type 51\\r\\ndebug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic\\r\\ndebug3: start over, passed a different list publickey,gssapi-keyex,gssapi-with-mic\\r\\ndebug3: preferred gssapi-with-mic,gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_lookup gssapi-with-mic\\r\\ndebug3: remaining preferred: gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_lookup gssapi-keyex\\r\\ndebug3: remaining preferred: hostbased,publickey\\r\\ndebug2: Unrecognized authentication method name: gssapi-keyex\\r\\ndebug3: authmethod_lookup publickey\\r\\ndebug3: remaining preferred: ,publickey\\r\\ndebug3: authmethod_is_enabled publickey\\r\\ndebug1: Next authentication method: publickey\\r\\ndebug1: Trying private key: /home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\\r\\ndebug3: sign_and_send_pubkey: RSA SHA256:Wr51Phdp4oRRlDOC+fZnCDz6GU0MgXbkletKxCgYxM0\\r\\ndebug3: sign_and_send_pubkey: signing using rsa-sha2-512 SHA256:Wr51Phdp4oRRlDOC+fZnCDz6GU0MgXbkletKxCgYxM0\\r\\ndebug3: send packet: type 50\\r\\ndebug2: we sent a publickey packet, wait for reply\\r\\ndebug3: receive packet: type 52\\r\\ndebug1: Authentication succeeded (publickey).\\r\\nAuthenticated to 127.0.0.1 ([127.0.0.1]:2200).\\r\\ndebug1: setting up multiplex master socket\\r\\ndebug3: muxserver_listen: temporary control path /home/freitafr/.ansible/cp/17d6e21220.IJyhRXQ0rx4369R6\\r\\ndebug2: fd 4 setting O_NONBLOCK\\r\\ndebug3: fd 4 is O_NONBLOCK\\r\\ndebug3: fd 4 is O_NONBLOCK\\r\\ndebug1: channel 0: new [/home/freitafr/.ansible/cp/17d6e21220]\\r\\ndebug3: muxserver_listen: mux listener channel 0 fd 4\\r\\ndebug2: fd 3 setting TCP_NODELAY\\r\\ndebug3: ssh_packet_set_tos: set IP_TOS 0x20\\r\\ndebug1: control_persist_detach: backgrounding master process\\r\\ndebug2: control_persist_detach: background process is 57672\\r\\ndebug2: fd 4 setting O_NONBLOCK\\r\\ndebug1: forking to background\\r\\ndebug1: Entering interactive session.\\r\\ndebug1: pledge: id\\r\\ndebug2: set_control_persist_exit_time: schedule exit in 60 seconds\\r\\ndebug1: multiplexing control connection\\r\\ndebug2: fd 5 setting O_NONBLOCK\\r\\ndebug3: fd 5 is O_NONBLOCK\\r\\ndebug1: channel 1: new [mux-control]\\r\\ndebug3: channel_post_mux_listener: new mux channel 1 fd 5\\r\\ndebug3: mux_master_read_cb: channel 1: hello sent\\r\\ndebug2: set_control_persist_exit_time: cancel scheduled exit\\r\\ndebug3: mux_master_read_cb: channel 1 packet type 0x00000001 len 4\\r\\ndebug2: mux_master_process_hello: channel 1 slave version 4\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_master_read_cb: channel 1 packet type 0x10000004 len 4\\r\\ndebug2: mux_master_process_alive_check: channel 1: alive check\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug3: mux_master_read_cb: channel 1 packet type 0x10000002 len 79\\r\\ndebug2: mux_master_process_new_session: channel 1: request tty 0, X 0, agent 0, subsys 0, term \"screen\", cmd \"/bin/sh -c \\'echo ~vagrant && sleep 0\\'\", env 0\\r\\ndebug3: mux_master_process_new_session: got fds stdin 6, stdout 7, stderr 8\\r\\ndebug2: fd 7 setting O_NONBLOCK\\r\\ndebug2: fd 8 setting O_NONBLOCK\\r\\ndebug1: channel 2: new [client-session]\\r\\ndebug2: mux_master_process_new_session: channel_new: 2 linked to control channel 1\\r\\ndebug2: channel 2: send open\\r\\ndebug3: send packet: type 90\\r\\ndebug3: receive packet: type 80\\r\\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\\r\\ndebug3: receive packet: type 91\\r\\ndebug2: channel_input_open_confirmation: channel 2: callback start\\r\\ndebug2: client_session2_setup: id 2\\r\\ndebug1: Sending command: /bin/sh -c \\'echo ~vagrant && sleep 0\\'\\r\\ndebug2: channel 2: request exec confirm 1\\r\\ndebug3: send packet: type 98\\r\\ndebug3: mux_session_confirm: sending success reply\\r\\ndebug2: channel_input_open_confirmation: channel 2: callback done\\r\\ndebug2: channel 2: open confirm rwindow 0 rmax 32768\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug2: channel 2: rcvd adjust 2097152\\r\\ndebug3: receive packet: type 99\\r\\ndebug2: channel_input_status_confirm: type 99 id 2\\r\\ndebug2: exec request accepted on channel 2\\r\\ndebug3: receive packet: type 98\\r\\ndebug1: client_input_channel_req: channel 2 rtype exit-status reply 0\\r\\ndebug3: mux_exit_message: channel 2: exit message, exitval 0\\r\\ndebug3: receive packet: type 98\\r\\ndebug1: client_input_channel_req: channel 2 rtype eow@openssh.com reply 0\\r\\ndebug2: channel 2: rcvd eow\\r\\ndebug2: channel 2: chan_shutdown_read (i0 o0 sock -1 wfd 6 efd 8 [write])\\r\\ndebug2: channel 2: input open -> closed\\r\\ndebug3: receive packet: type 96\\r\\ndebug2: channel 2: rcvd eof\\r\\ndebug2: channel 2: output open -> drain\\r\\ndebug2: channel 2: obuf empty\\r\\ndebug2: channel 2: chan_shutdown_write (i3 o1 sock -1 wfd 7 efd 8 [write])\\r\\ndebug2: channel 2: output drain -> closed\\r\\ndebug3: receive packet: type 97\\r\\ndebug2: channel 2: rcvd close\\r\\ndebug3: channel 2: will not send data after close\\r\\ndebug2: channel 2: send close\\r\\ndebug3: send packet: type 97\\r\\ndebug2: channel 2: is dead\\r\\ndebug2: channel 2: gc: notify user\\r\\ndebug3: mux_master_session_cleanup_cb: entering for channel 2\\r\\ndebug2: channel 1: rcvd close\\r\\ndebug2: channel 1: output open -> drain\\r\\ndebug2: channel 1: chan_shutdown_read (i0 o1 sock 5 wfd 5 efd -1 [closed])\\r\\ndebug2: channel 1: input open -> closed\\r\\ndebug2: channel 2: gc: user detached\\r\\ndebug2: channel 2: is dead\\r\\ndebug2: channel 2: garbage collecting\\r\\ndebug1: channel 2: free: client-session, nchannels 3\\r\\ndebug3: channel 2: status: The following connections are open:\\r\\n  #1 mux-control (t16 nr0 i3/0 o1/16 e[closed]/0 fd 5/5/-1 sock 5 cc -1)\\r\\n  #2 client-session (t4 r0 i3/0 o3/0 e[write]/0 fd -1/-1/8 sock -1 cc -1)\\r\\n\\r\\ndebug2: channel 1: obuf empty\\r\\ndebug2: channel 1: chan_shutdown_write (i3 o1 sock 5 wfd 5 efd -1 [closed])\\r\\ndebug2: channel 1: output drain -> closed\\r\\ndebug2: channel 1: is dead (local)\\r\\ndebug2: channel 1: gc: notify user\\r\\ndebug3: mux_master_control_cleanup_cb: entering for channel 1\\r\\ndebug2: channel 1: gc: user detached\\r\\ndebug2: channel 1: is dead (local)\\r\\ndebug2: channel 1: garbage collecting\\r\\ndebug1: channel 1: free: mux-control, nchannels 2\\r\\ndebug3: channel 1: status: The following connections are open:\\r\\n  #1 mux-control (t16 nr0 i3/0 o3/0 e[closed]/0 fd 5/5/-1 sock 5 cc -1)\\r\\n\\r\\ndebug2: set_control_persist_exit_time: schedule exit in 60 seconds\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /home/vagrant/.ansible/tmp `\"&& mkdir /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329 && echo ansible-tmp-1597403788.3134546-57669-2673135172329=\"` echo /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329 `\" ) && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'ansible-tmp-1597403788.3134546-57669-2673135172329=/home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<foo> Attempting python interpreter discovery\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'echo PLATFORM; uname; echo FOUND; command -v '\"'\"'\"'\"'\"'\"'\"'\"'/usr/bin/python'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python3.7'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python3.6'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python3.5'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python2.7'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python2.6'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'/usr/libexec/platform-python'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'/usr/bin/python3'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python'\"'\"'\"'\"'\"'\"'\"'\"'; echo ENDFOUND && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'PLATFORM\\nLinux\\nFOUND\\n/usr/bin/python\\n/usr/bin/python2.7\\n/usr/libexec/platform-python\\n/usr/bin/python\\nENDFOUND\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'/usr/bin/python && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'{\"osrelease_content\": \"NAME=\\\\\"CentOS Linux\\\\\"\\\\nVERSION=\\\\\"7 (Core)\\\\\"\\\\nID=\\\\\"centos\\\\\"\\\\nID_LIKE=\\\\\"rhel fedora\\\\\"\\\\nVERSION_ID=\\\\\"7\\\\\"\\\\nPRETTY_NAME=\\\\\"CentOS Linux 7 (Core)\\\\\"\\\\nANSI_COLOR=\\\\\"0;31\\\\\"\\\\nCPE_NAME=\\\\\"cpe:/o:centos:centos:7\\\\\"\\\\nHOME_URL=\\\\\"https://www.centos.org/\\\\\"\\\\nBUG_REPORT_URL=\\\\\"https://bugs.centos.org/\\\\\"\\\\n\\\\nCENTOS_MANTISBT_PROJECT=\\\\\"CentOS-7\\\\\"\\\\nCENTOS_MANTISBT_PROJECT_VERSION=\\\\\"7\\\\\"\\\\nREDHAT_SUPPORT_PRODUCT=\\\\\"centos\\\\\"\\\\nREDHAT_SUPPORT_PRODUCT_VERSION=\\\\\"7\\\\\"\\\\n\\\\n\", \"platform_dist_result\": [\"centos\", \"7.8.2003\", \"Core\"]}\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nUsing module file /home/freitafr/dev/ansible-server-setup/venv/lib/python3.8/site-packages/ansible/modules/system/setup.py\r\n<127.0.0.1> PUT /home/freitafr/.ansible/tmp/ansible-local-5766500jf9vqw/tmp64amdo3k TO /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/AnsiballZ_setup.py\r\n<127.0.0.1> SSH: EXEC sftp -b - -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 '[127.0.0.1]'\r\n<127.0.0.1> (0, b'sftp> put /home/freitafr/.ansible/tmp/ansible-local-5766500jf9vqw/tmp64amdo3k /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/AnsiballZ_setup.py\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug2: Remote version: 3\\r\\ndebug2: Server supports extension \"posix-rename@openssh.com\" revision 1\\r\\ndebug2: Server supports extension \"statvfs@openssh.com\" revision 2\\r\\ndebug2: Server supports extension \"fstatvfs@openssh.com\" revision 2\\r\\ndebug2: Server supports extension \"hardlink@openssh.com\" revision 1\\r\\ndebug2: Server supports extension \"fsync@openssh.com\" revision 1\\r\\ndebug3: Sent message fd 3 T:16 I:1\\r\\ndebug3: SSH_FXP_REALPATH . -> /home/vagrant size 0\\r\\ndebug3: Looking up /home/freitafr/.ansible/tmp/ansible-local-5766500jf9vqw/tmp64amdo3k\\r\\ndebug3: Sent message fd 3 T:17 I:2\\r\\ndebug3: Received stat reply T:101 I:2\\r\\ndebug1: Couldn\\'t stat remote file: No such file or directory\\r\\ndebug3: Sent message SSH2_FXP_OPEN I:3 P:/home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/AnsiballZ_setup.py\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:4 O:0 S:32768\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 4 32768 bytes at 0\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:5 O:32768 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:6 O:65536 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:7 O:98304 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:8 O:131072 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:9 O:163840 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:10 O:196608 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:11 O:229376 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:12 O:262144 S:2490\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 5 32768 bytes at 32768\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 6 32768 bytes at 65536\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 7 32768 bytes at 98304\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 8 32768 bytes at 131072\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 9 32768 bytes at 163840\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 10 32768 bytes at 196608\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 11 32768 bytes at 229376\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 12 2490 bytes at 262144\\r\\ndebug3: Sent message SSH2_FXP_CLOSE I:4\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'chmod u+x /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/ /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/AnsiballZ_setup.py && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 -tt 127.0.0.1 '/bin/sh -c '\"'\"'sudo -H -S -n  -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-cykbqkxnexfmdgjaftzphauozvywnixy ; /usr/bin/python /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/AnsiballZ_setup.py'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\nEscalation succeeded\r\n<127.0.0.1> (0, b'\\r\\n{\"invocation\": {\"module_args\": {\"filter\": \"*\", \"gather_subset\": [\"all\"], \"fact_path\": \"/etc/ansible/facts.d\", \"gather_timeout\": 10}}, \"ansible_facts\": {\"ansible_fibre_channel_wwn\": [], \"module_setup\": true, \"ansible_distribution_version\": \"7.8\", \"ansible_distribution_file_variety\": \"RedHat\", \"ansible_env\": {\"USERNAME\": \"root\", \"LANG\": \"en_US.UTF-8\", \"TERM\": \"screen\", \"SHELL\": \"/bin/bash\", \"SUDO_COMMAND\": \"/bin/sh -c echo BECOME-SUCCESS-cykbqkxnexfmdgjaftzphauozvywnixy ; /usr/bin/python /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/AnsiballZ_setup.py\", \"SHLVL\": \"1\", \"XDG_SESSION_ID\": \"5\", \"SUDO_UID\": \"1000\", \"SUDO_GID\": \"1000\", \"PWD\": \"/home/vagrant\", \"LOGNAME\": \"root\", \"USER\": \"root\", \"MAIL\": \"/var/mail/vagrant\", \"PATH\": \"/sbin:/bin:/usr/sbin:/usr/bin\", \"SUDO_USER\": \"vagrant\", \"LS_COLORS\": \"rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:\", \"HOME\": \"/root\", \"_\": \"/usr/bin/python\"}, \"ansible_userspace_bits\": \"64\", \"ansible_architecture\": \"x86_64\", \"ansible_default_ipv4\": {\"macaddress\": \"52:54:00:4d:77:d3\", \"network\": \"10.0.2.0\", \"mtu\": 1500, \"broadcast\": \"10.0.2.255\", \"alias\": \"eth0\", \"netmask\": \"255.255.255.0\", \"address\": \"10.0.2.15\", \"interface\": \"eth0\", \"type\": \"ether\", \"gateway\": \"10.0.2.2\"}, \"ansible_swapfree_mb\": 2047, \"ansible_default_ipv6\": {}, \"ansible_cmdline\": {\"no_timer_check\": true, \"LANG\": \"en_US.UTF-8\", \"BOOT_IMAGE\": \"/boot/vmlinuz-3.10.0-1127.el7.x86_64\", \"elevator\": \"noop\", \"net.ifnames\": \"0\", \"biosdevname\": \"0\", \"crashkernel\": \"auto\", \"console\": \"ttyS0,115200n8\", \"ro\": true, \"root\": \"UUID=1c419d6c-5064-4a2b-953c-05b2c67edb15\"}, \"ansible_machine_id\": \"01af50054087a441ba92d09712ed41f0\", \"ansible_userspace_architecture\": \"x86_64\", \"ansible_product_uuid\": \"01AF5005-4087-A441-BA92-D09712ED41F0\", \"ansible_pkg_mgr\": \"yum\", \"ansible_distribution\": \"CentOS\", \"ansible_iscsi_iqn\": \"\", \"ansible_all_ipv6_addresses\": [\"fe80::5054:ff:fe4d:77d3\"], \"ansible_uptime_seconds\": 314, \"ansible_kernel\": \"3.10.0-1127.el7.x86_64\", \"ansible_system_capabilities_enforced\": \"True\", \"ansible_python\": {\"executable\": \"/usr/bin/python\", \"version\": {\"micro\": 5, \"major\": 2, \"releaselevel\": \"final\", \"serial\": 0, \"minor\": 7}, \"type\": \"CPython\", \"has_sslcontext\": true, \"version_info\": [2, 7, 5, \"final\", 0]}, \"ansible_is_chroot\": false, \"ansible_hostnqn\": \"\", \"ansible_user_shell\": \"/bin/bash\", \"ansible_product_serial\": \"0\", \"ansible_form_factor\": \"Other\", \"ansible_distribution_file_parsed\": true, \"ansible_fips\": false, \"ansible_user_id\": \"root\", \"ansible_selinux_python_present\": true, \"ansible_kernel_version\": \"#1 SMP Tue Mar 31 23:36:51 UTC 2020\", \"ansible_local\": {}, \"ansible_processor_vcpus\": 1, \"ansible_processor\": [\"0\", \"GenuineIntel\", \"Intel(R) Core(TM) i7-9700F CPU @ 3.00GHz\"], \"ansible_ssh_host_key_ecdsa_public\": \"AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEBDJDnGilY8yhC0/+/z/nKInAimmZraDQoGVP1sMypkg+jroHSLd6W/bVsOjCjs+22C60li0f0IDjPNoDR1cd8=\", \"ansible_user_gid\": 0, \"ansible_system_vendor\": \"innotek GmbH\", \"ansible_swaptotal_mb\": 2047, \"ansible_distribution_major_version\": \"7\", \"ansible_real_group_id\": 0, \"ansible_lsb\": {}, \"ansible_machine\": \"x86_64\", \"ansible_ssh_host_key_rsa_public\": \"AAAAB3NzaC1yc2EAAAADAQABAAABAQCkq5B1z+VOEwwjKqFyDjKkGKutNsgfUMHo+Oq7i96BM2K6T7EkzF7WkayC9nxVNpXKR36vWgBYS7mIfROjDZy4aXv6JcFgX9+KjqVzkLQjKUHlmIOLcFPUaVtXDjv4zd0WWdjUaJMT90qZ3KifP/RgXpfLkNvhLrwA/AaAuCnoJRdq954Q58geE3A9J+iWZkdNHHsPKY/MPCmqBSbAnx2Rd0XBZry3cGo0yC1Yc4CWLd2WPNyhWubTbdnQO25Xa7Lw1he7Sj+ByTnxarP5zI6xB+w/F6DBSUJeZkIrgXdFyfbALsfW9hzQ51M2NA+QwIsd9/p8vBxp34cYsm4HM0+B\", \"ansible_user_gecos\": \"root\", \"ansible_processor_threads_per_core\": 1, \"ansible_eth0\": {\"macaddress\": \"52:54:00:4d:77:d3\", \"features\": {\"tx_checksum_ipv4\": \"off [fixed]\", \"generic_receive_offload\": \"on\", \"tx_checksum_ipv6\": \"off [fixed]\", \"tx_scatter_gather_fraglist\": \"off [fixed]\", \"rx_all\": \"off\", \"highdma\": \"off [fixed]\", \"rx_fcs\": \"off\", \"tx_lockless\": \"off [fixed]\", \"tx_tcp_ecn_segmentation\": \"off [fixed]\", \"rx_udp_tunnel_port_offload\": \"off [fixed]\", \"tx_tcp6_segmentation\": \"off [fixed]\", \"tx_gso_robust\": \"off [fixed]\", \"tx_ipip_segmentation\": \"off [fixed]\", \"tx_tcp_mangleid_segmentation\": \"off\", \"tx_checksumming\": \"on\", \"vlan_challenged\": \"off [fixed]\", \"loopback\": \"off [fixed]\", \"fcoe_mtu\": \"off [fixed]\", \"scatter_gather\": \"on\", \"tx_checksum_sctp\": \"off [fixed]\", \"tx_vlan_stag_hw_insert\": \"off [fixed]\", \"rx_vlan_stag_hw_parse\": \"off [fixed]\", \"tx_gso_partial\": \"off [fixed]\", \"rx_gro_hw\": \"off [fixed]\", \"rx_vlan_stag_filter\": \"off [fixed]\", \"large_receive_offload\": \"off [fixed]\", \"tx_scatter_gather\": \"on\", \"rx_checksumming\": \"off\", \"tx_tcp_segmentation\": \"on\", \"netns_local\": \"off [fixed]\", \"busy_poll\": \"off [fixed]\", \"generic_segmentation_offload\": \"on\", \"tx_udp_tnl_segmentation\": \"off [fixed]\", \"tcp_segmentation_offload\": \"on\", \"l2_fwd_offload\": \"off [fixed]\", \"rx_vlan_offload\": \"on\", \"ntuple_filters\": \"off [fixed]\", \"tx_gre_csum_segmentation\": \"off [fixed]\", \"tx_nocache_copy\": \"off\", \"tx_udp_tnl_csum_segmentation\": \"off [fixed]\", \"udp_fragmentation_offload\": \"off [fixed]\", \"tx_sctp_segmentation\": \"off [fixed]\", \"tx_sit_segmentation\": \"off [fixed]\", \"tx_checksum_fcoe_crc\": \"off [fixed]\", \"hw_tc_offload\": \"off [fixed]\", \"tx_checksum_ip_generic\": \"on\", \"tx_fcoe_segmentation\": \"off [fixed]\", \"rx_vlan_filter\": \"on [fixed]\", \"tx_vlan_offload\": \"on [fixed]\", \"receive_hashing\": \"off [fixed]\", \"tx_gre_segmentation\": \"off [fixed]\"}, \"type\": \"ether\", \"pciid\": \"0000:00:03.0\", \"module\": \"e1000\", \"mtu\": 1500, \"device\": \"eth0\", \"promisc\": false, \"timestamping\": [\"tx_software\", \"rx_software\", \"software\"], \"ipv4\": {\"broadcast\": \"10.0.2.255\", \"netmask\": \"255.255.255.0\", \"network\": \"10.0.2.0\", \"address\": \"10.0.2.15\"}, \"ipv6\": [{\"scope\": \"link\", \"prefix\": \"64\", \"address\": \"fe80::5054:ff:fe4d:77d3\"}], \"active\": true, \"speed\": 1000, \"hw_timestamp_filters\": []}, \"ansible_product_name\": \"VirtualBox\", \"ansible_all_ipv4_addresses\": [\"10.0.2.15\"], \"ansible_python_version\": \"2.7.5\", \"ansible_product_version\": \"1.2\", \"ansible_service_mgr\": \"systemd\", \"ansible_memory_mb\": {\"real\": {\"total\": 486, \"used\": 206, \"free\": 280}, \"swap\": {\"cached\": 0, \"total\": 2047, \"free\": 2047, \"used\": 0}, \"nocache\": {\"used\": 107, \"free\": 379}}, \"ansible_user_dir\": \"/root\", \"gather_subset\": [\"all\"], \"ansible_real_user_id\": 0, \"ansible_virtualization_role\": \"guest\", \"ansible_dns\": {\"nameservers\": [\"10.0.2.3\"]}, \"ansible_effective_group_id\": 0, \"ansible_lo\": {\"features\": {\"tx_checksum_ipv4\": \"off [fixed]\", \"generic_receive_offload\": \"on\", \"tx_checksum_ipv6\": \"off [fixed]\", \"tx_scatter_gather_fraglist\": \"on [fixed]\", \"rx_all\": \"off [fixed]\", \"highdma\": \"on [fixed]\", \"rx_fcs\": \"off [fixed]\", \"tx_lockless\": \"on [fixed]\", \"tx_tcp_ecn_segmentation\": \"on\", \"rx_udp_tunnel_port_offload\": \"off [fixed]\", \"tx_tcp6_segmentation\": \"on\", \"tx_gso_robust\": \"off [fixed]\", \"tx_ipip_segmentation\": \"off [fixed]\", \"tx_tcp_mangleid_segmentation\": \"on\", \"tx_checksumming\": \"on\", \"vlan_challenged\": \"on [fixed]\", \"loopback\": \"on [fixed]\", \"fcoe_mtu\": \"off [fixed]\", \"scatter_gather\": \"on\", \"tx_checksum_sctp\": \"on [fixed]\", \"tx_vlan_stag_hw_insert\": \"off [fixed]\", \"rx_vlan_stag_hw_parse\": \"off [fixed]\", \"tx_gso_partial\": \"off [fixed]\", \"rx_gro_hw\": \"off [fixed]\", \"rx_vlan_stag_filter\": \"off [fixed]\", \"large_receive_offload\": \"off [fixed]\", \"tx_scatter_gather\": \"on [fixed]\", \"rx_checksumming\": \"on [fixed]\", \"tx_tcp_segmentation\": \"on\", \"netns_local\": \"on [fixed]\", \"busy_poll\": \"off [fixed]\", \"generic_segmentation_offload\": \"on\", \"tx_udp_tnl_segmentation\": \"off [fixed]\", \"tcp_segmentation_offload\": \"on\", \"l2_fwd_offload\": \"off [fixed]\", \"rx_vlan_offload\": \"off [fixed]\", \"ntuple_filters\": \"off [fixed]\", \"tx_gre_csum_segmentation\": \"off [fixed]\", \"tx_nocache_copy\": \"off [fixed]\", \"tx_udp_tnl_csum_segmentation\": \"off [fixed]\", \"udp_fragmentation_offload\": \"on\", \"tx_sctp_segmentation\": \"on\", \"tx_sit_segmentation\": \"off [fixed]\", \"tx_checksum_fcoe_crc\": \"off [fixed]\", \"hw_tc_offload\": \"off [fixed]\", \"tx_checksum_ip_generic\": \"on [fixed]\", \"tx_fcoe_segmentation\": \"off [fixed]\", \"rx_vlan_filter\": \"off [fixed]\", \"tx_vlan_offload\": \"off [fixed]\", \"receive_hashing\": \"off [fixed]\", \"tx_gre_segmentation\": \"off [fixed]\"}, \"hw_timestamp_filters\": [], \"mtu\": 65536, \"device\": \"lo\", \"promisc\": false, \"timestamping\": [\"rx_software\", \"software\"], \"ipv4\": {\"broadcast\": \"host\", \"netmask\": \"255.0.0.0\", \"network\": \"127.0.0.0\", \"address\": \"127.0.0.1\"}, \"ipv6\": [{\"scope\": \"host\", \"prefix\": \"128\", \"address\": \"::1\"}], \"active\": true, \"type\": \"loopback\"}, \"ansible_memtotal_mb\": 486, \"ansible_device_links\": {\"masters\": {}, \"labels\": {}, \"ids\": {\"sda\": [\"ata-VBOX_HARDDISK_VB0ed07753-759b76b5\"], \"sda1\": [\"ata-VBOX_HARDDISK_VB0ed07753-759b76b5-part1\"]}, \"uuids\": {\"sda1\": [\"1c419d6c-5064-4a2b-953c-05b2c67edb15\"]}}, \"ansible_apparmor\": {\"status\": \"disabled\"}, \"ansible_proc_cmdline\": {\"no_timer_check\": true, \"LANG\": \"en_US.UTF-8\", \"BOOT_IMAGE\": \"/boot/vmlinuz-3.10.0-1127.el7.x86_64\", \"elevator\": \"noop\", \"net.ifnames\": \"0\", \"biosdevname\": \"0\", \"crashkernel\": \"auto\", \"console\": [\"tty0\", \"ttyS0,115200n8\"], \"ro\": true, \"root\": \"UUID=1c419d6c-5064-4a2b-953c-05b2c67edb15\"}, \"ansible_memfree_mb\": 280, \"ansible_processor_count\": 1, \"ansible_hostname\": \"localhost\", \"ansible_interfaces\": [\"lo\", \"eth0\"], \"ansible_selinux\": {\"status\": \"enabled\", \"policyvers\": 31, \"type\": \"targeted\", \"mode\": \"enforcing\", \"config_mode\": \"enforcing\"}, \"ansible_fqdn\": \"localhost.localdomain\", \"ansible_mounts\": [{\"block_used\": 778198, \"uuid\": \"1c419d6c-5064-4a2b-953c-05b2c67edb15\", \"size_total\": 42927656960, \"block_total\": 10480385, \"mount\": \"/\", \"block_available\": 9702187, \"size_available\": 39740157952, \"fstype\": \"xfs\", \"inode_total\": 20971008, \"options\": \"rw,seclabel,relatime,attr2,inode64,noquota\", \"device\": \"/dev/sda1\", \"inode_used\": 27693, \"block_size\": 4096, \"inode_available\": 20943315}], \"ansible_nodename\": \"localhost.localdomain\", \"ansible_domain\": \"localdomain\", \"ansible_distribution_file_path\": \"/etc/redhat-release\", \"ansible_virtualization_type\": \"virtualbox\", \"ansible_ssh_host_key_ed25519_public\": \"AAAAC3NzaC1lZDI1NTE5AAAAIMd1K8VmYSCRZFRZCUMxAGrDHzgRP8/PSFScCinjwx0i\", \"ansible_processor_cores\": 1, \"ansible_bios_version\": \"VirtualBox\", \"ansible_date_time\": {\"weekday_number\": \"5\", \"iso8601_basic_short\": \"20200814T111628\", \"tz\": \"UTC\", \"weeknumber\": \"32\", \"hour\": \"11\", \"year\": \"2020\", \"minute\": \"16\", \"tz_offset\": \"+0000\", \"month\": \"08\", \"epoch\": \"1597403788\", \"iso8601_micro\": \"2020-08-14T11:16:28.886980Z\", \"weekday\": \"Friday\", \"time\": \"11:16:28\", \"date\": \"2020-08-14\", \"iso8601\": \"2020-08-14T11:16:28Z\", \"day\": \"14\", \"iso8601_basic\": \"20200814T111628886919\", \"second\": \"28\"}, \"ansible_distribution_release\": \"Core\", \"ansible_os_family\": \"RedHat\", \"ansible_effective_user_id\": 0, \"ansible_system\": \"Linux\", \"ansible_devices\": {\"sda\": {\"scheduler_mode\": \"noop\", \"rotational\": \"1\", \"vendor\": \"ATA\", \"sectors\": \"83886080\", \"links\": {\"masters\": [], \"labels\": [], \"ids\": [\"ata-VBOX_HARDDISK_VB0ed07753-759b76b5\"], \"uuids\": []}, \"sas_device_handle\": null, \"sas_address\": null, \"virtual\": 1, \"host\": \"IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01)\", \"sectorsize\": \"512\", \"removable\": \"0\", \"support_discard\": \"0\", \"holders\": [], \"partitions\": {\"sda1\": {\"sectorsize\": 512, \"uuid\": \"1c419d6c-5064-4a2b-953c-05b2c67edb15\", \"links\": {\"masters\": [], \"labels\": [], \"ids\": [\"ata-VBOX_HARDDISK_VB0ed07753-759b76b5-part1\"], \"uuids\": [\"1c419d6c-5064-4a2b-953c-05b2c67edb15\"]}, \"sectors\": \"83884032\", \"start\": \"2048\", \"holders\": [], \"size\": \"40.00 GB\"}}, \"model\": \"VBOX HARDDISK\", \"serial\": \"VB0ed07753\", \"size\": \"40.00 GB\"}}, \"ansible_user_uid\": 0, \"ansible_bios_date\": \"12/01/2006\", \"ansible_system_capabilities\": [\"cap_chown\", \"cap_dac_override\", \"cap_dac_read_search\", \"cap_fowner\", \"cap_fsetid\", \"cap_kill\", \"cap_setgid\", \"cap_setuid\", \"cap_setpcap\", \"cap_linux_immutable\", \"cap_net_bind_service\", \"cap_net_broadcast\", \"cap_net_admin\", \"cap_net_raw\", \"cap_ipc_lock\", \"cap_ipc_owner\", \"cap_sys_module\", \"cap_sys_rawio\", \"cap_sys_chroot\", \"cap_sys_ptrace\", \"cap_sys_pacct\", \"cap_sys_admin\", \"cap_sys_boot\", \"cap_sys_nice\", \"cap_sys_resource\", \"cap_sys_time\", \"cap_sys_tty_config\", \"cap_mknod\", \"cap_lease\", \"cap_audit_write\", \"cap_audit_control\", \"cap_setfcap\", \"cap_mac_override\", \"cap_mac_admin\", \"cap_syslog\", \"35\", \"36+ep\"]}}\\r\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\nShared connection to 127.0.0.1 closed.\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'rm -f -r /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.3134546-57669-2673135172329/ > /dev/null 2>&1 && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nok: [foo]\r\nMETA: ran handlers\r\n\r\nTASK [Set listen addresses to UNIX socket] *************************************\r\ntask path: /home/freitafr/dev/ansible-server-setup/foo.yml:3\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'echo ~vagrant && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'/home/vagrant\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /home/vagrant/.ansible/tmp `\"&& mkdir /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879 && echo ansible-tmp-1597403788.9471662-57687-11270615797879=\"` echo /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879 `\" ) && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'ansible-tmp-1597403788.9471662-57687-11270615797879=/home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nUsing module file /home/freitafr/dev/ansible-server-setup/venv/lib/python3.8/site-packages/ansible/modules/database/postgresql/postgresql_set.py\r\n<127.0.0.1> PUT /home/freitafr/.ansible/tmp/ansible-local-5766500jf9vqw/tmpp0hl7dd_ TO /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/AnsiballZ_postgresql_set.py\r\n<127.0.0.1> SSH: EXEC sftp -b - -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 '[127.0.0.1]'\r\n<127.0.0.1> (0, b'sftp> put /home/freitafr/.ansible/tmp/ansible-local-5766500jf9vqw/tmpp0hl7dd_ /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/AnsiballZ_postgresql_set.py\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug2: Remote version: 3\\r\\ndebug2: Server supports extension \"posix-rename@openssh.com\" revision 1\\r\\ndebug2: Server supports extension \"statvfs@openssh.com\" revision 2\\r\\ndebug2: Server supports extension \"fstatvfs@openssh.com\" revision 2\\r\\ndebug2: Server supports extension \"hardlink@openssh.com\" revision 1\\r\\ndebug2: Server supports extension \"fsync@openssh.com\" revision 1\\r\\ndebug3: Sent message fd 3 T:16 I:1\\r\\ndebug3: SSH_FXP_REALPATH . -> /home/vagrant size 0\\r\\ndebug3: Looking up /home/freitafr/.ansible/tmp/ansible-local-5766500jf9vqw/tmpp0hl7dd_\\r\\ndebug3: Sent message fd 3 T:17 I:2\\r\\ndebug3: Received stat reply T:101 I:2\\r\\ndebug1: Couldn\\'t stat remote file: No such file or directory\\r\\ndebug3: Sent message SSH2_FXP_OPEN I:3 P:/home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/AnsiballZ_postgresql_set.py\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:4 O:0 S:32768\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 4 32768 bytes at 0\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:5 O:32768 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:6 O:65536 S:32768\\r\\ndebug3: Sent message SSH2_FXP_WRITE I:7 O:98304 S:23835\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 5 32768 bytes at 32768\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 6 32768 bytes at 65536\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: In write loop, ack for 7 23835 bytes at 98304\\r\\ndebug3: Sent message SSH2_FXP_CLOSE I:4\\r\\ndebug3: SSH2_FXP_STATUS 0\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'chmod u+x /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/ /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/AnsiballZ_postgresql_set.py && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 -tt 127.0.0.1 '/bin/sh -c '\"'\"'sudo -H -S -n  -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-alzahynalltdlnlmnjaoonnscvcdzxrj ; /usr/bin/python /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/AnsiballZ_postgresql_set.py'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\nEscalation succeeded\r\n<127.0.0.1> (1, b'\\r\\n{\"msg\": \"listen_addresses: at least one of value or reset param must be specified\", \"failed\": true, \"exception\": \"WARNING: The below traceback may *not* be related to the actual failure.\\\\n  File \\\\\"/tmp/ansible_postgresql_set_payload_ssqMLm/ansible_postgresql_set_payload.zip/ansible/modules/database/postgresql/postgresql_set.py\\\\\", line 160, in <module>\\\\n\", \"invocation\": {\"module_args\": {\"reset\": null, \"ssl_mode\": \"prefer\", \"name\": \"listen_addresses\", \"ca_cert\": null, \"login_user\": \"postgres\", \"login_host\": \"\", \"session_role\": null, \"db\": null, \"value\": \"\", \"login_unix_socket\": \"\", \"login_password\": \"\", \"port\": 5432}}}\\r\\n', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 1\\r\\nShared connection to 127.0.0.1 closed.\\r\\n')\r\n<127.0.0.1> Failed to connect to the host via ssh: OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\r\ndebug1: Reading configuration data /home/freitafr/.ssh/config\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\r\ndebug1: auto-mux: Trying existing master\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 57674\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet: read header failed: Broken pipe\r\ndebug2: Received exit status from master 1\r\nShared connection to 127.0.0.1 closed.\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2200 -o 'IdentityFile=\"/home/freitafr/dev/ansible-server-setup/tests/.vagrant/machines/foo/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"vagrant\"' -o ConnectTimeout=30 -o ControlPath=/home/freitafr/.ansible/cp/17d6e21220 127.0.0.1 '/bin/sh -c '\"'\"'rm -f -r /home/vagrant/.ansible/tmp/ansible-tmp-1597403788.9471662-57687-11270615797879/ > /dev/null 2>&1 && sleep 0'\"'\"''\r\n<127.0.0.1> (0, b'', b'OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020\\r\\ndebug1: Reading configuration data /home/freitafr/.ssh/config\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug2: resolve_canonicalize: hostname 127.0.0.1 is address\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 57674\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nThe full traceback is:\r\nWARNING: The below traceback may *not* be related to the actual failure.\r\n  File \"/tmp/ansible_postgresql_set_payload_ssqMLm/ansible_postgresql_set_payload.zip/ansible/modules/database/postgresql/postgresql_set.py\", line 160, in <module>\r\nfatal: [foo]: FAILED! => changed=false \r\n  invocation:\r\n    module_args:\r\n      ca_cert: null\r\n      db: null\r\n      login_host: ''\r\n      login_password: ''\r\n      login_unix_socket: ''\r\n      login_user: postgres\r\n      name: listen_addresses\r\n      port: 5432\r\n      reset: null\r\n      session_role: null\r\n      ssl_mode: prefer\r\n      value: ''\r\n  msg: 'listen_addresses: at least one of value or reset param must be specified'\r\n\r\nPLAY RECAP *********************************************************************\r\nfoo                        : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71274", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71274/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71274/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71274/events", "html_url": "https://github.com/ansible/ansible/issues/71274", "id": 678823682, "node_id": "MDU6SXNzdWU2Nzg4MjM2ODI=", "number": 71274, "title": "Order Conditionals are Provided Results in Inconsistent Playbook Parsing Errors", "user": {"login": "jamesmarshall24", "id": 21084979, "node_id": "MDQ6VXNlcjIxMDg0OTc5", "avatar_url": "https://avatars3.githubusercontent.com/u/21084979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesmarshall24", "html_url": "https://github.com/jamesmarshall24", "followers_url": "https://api.github.com/users/jamesmarshall24/followers", "following_url": "https://api.github.com/users/jamesmarshall24/following{/other_user}", "gists_url": "https://api.github.com/users/jamesmarshall24/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesmarshall24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesmarshall24/subscriptions", "organizations_url": "https://api.github.com/users/jamesmarshall24/orgs", "repos_url": "https://api.github.com/users/jamesmarshall24/repos", "events_url": "https://api.github.com/users/jamesmarshall24/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesmarshall24/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-14T00:52:50Z", "updated_at": "2020-08-17T14:46:58Z", "closed_at": "2020-08-14T01:02:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nUsing the same conditionals in different orders results in different behavior. If they're the same conditional statements, list order shouldn't matter when parsing in Ansible.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.9\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Sep 26 2019, 13:23:47) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\nConsider the following two tasks:\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  gather_facts: yes\r\n  vars:\r\n    reboot_hint7:\r\n      rc: \"1\"\r\n  tasks:\r\n    - debug:\r\n        msg: 'test 1: success'\r\n      when: \r\n        - reboot_hint7.rc == \"1\" or \"dev\" in group_names\r\n    - debug:\r\n        msg: 'test 2: fail'\r\n      when: \r\n        - \"dev\" in group_names or reboot_hint7.rc == \"1\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nBoth tasks parse correctly when running the playbook.\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:\r\nJSON: Expecting value: line 1 column 1 (char 0)\r\n\r\nSyntax Error while loading YAML.\r\n  expected <block end>, but found '<scalar>'\r\n\r\nThe error appears to be in '/path/to/test.yml': line 17, column 17, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n      when:\r\n        - \"dev\" in group_names or reboot_hint7.rc == \"1\"\r\n                ^ here\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71273", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71273/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71273/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71273/events", "html_url": "https://github.com/ansible/ansible/issues/71273", "id": 678791514, "node_id": "MDU6SXNzdWU2Nzg3OTE1MTQ=", "number": 71273, "title": "cron module overwrites file", "user": {"login": "arthur-EL", "id": 32311444, "node_id": "MDQ6VXNlcjMyMzExNDQ0", "avatar_url": "https://avatars2.githubusercontent.com/u/32311444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthur-EL", "html_url": "https://github.com/arthur-EL", "followers_url": "https://api.github.com/users/arthur-EL/followers", "following_url": "https://api.github.com/users/arthur-EL/following{/other_user}", "gists_url": "https://api.github.com/users/arthur-EL/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthur-EL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthur-EL/subscriptions", "organizations_url": "https://api.github.com/users/arthur-EL/orgs", "repos_url": "https://api.github.com/users/arthur-EL/repos", "events_url": "https://api.github.com/users/arthur-EL/events{/privacy}", "received_events_url": "https://api.github.com/users/arthur-EL/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-13T23:27:50Z", "updated_at": "2020-08-17T14:46:57Z", "closed_at": "2020-08-14T00:59:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nAdding cron task with a `cron_file` specified removes other cron jobs in that file when using `2.9.12`. Version `2.9.11` works as expected.\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ncron\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.12\r\npython version = 2.7.12 (default, Jul 21 2020, 15:19:50) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nANSIBLE_PIPELINING(/home/arthur/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/arthur/ansible/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=60s\r\nDEFAULT_ASK_VAULT_PASS(/home/arthur/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME(/home/arthur/ansible/ansible.cfg) = True\r\nDEFAULT_MODULE_PATH(/home/arthur/ansible/ansible.cfg) = [u'/home/arthur/ansible/modules', u'/usr/share/ansible']\r\nDEFAULT_ROLES_PATH(/home/arthur/ansible/ansible.cfg) = [u'/home/arthur/ansible/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/arthur/ansible/ansible.cfg) = yaml\r\nINTERPRETER_PYTHON(/home/arthur/ansible/ansible.cfg) = auto\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nLocal ubuntu 16.04\r\nTarget ubuntu 18.04\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nCreating a role that has the following cron tasks will overwrite the cron_file when adding the job\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n- name: test 1\r\n  cron:\r\n    name: \"one\"\r\n    cron_file: /etc/crontab\r\n    user: \"test_user\"\r\n    minute: \"*/2\"\r\n    job: echo \"one\" >> /tmp/test\r\n\r\n- name: test 2\r\n  cron:\r\n    name: \"two\"\r\n    cron_file: /etc/crontab\r\n    user: \"test_user\"\r\n    minute: \"*/2\"\r\n    job: echo \"two\" >> /tmp/test\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n```\r\n$cat /etc/crontab\r\n#Old cron jobs\r\n \r\n#Ansible: one\r\n*/2 * * * * test_user /bin/echo \"one\" >> /tmp/test\r\n\r\n#Ansible: two\r\n*/2 * * * * test_user /bin/echo \"two\" >> /tmp/test\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\n$cat /etc/crontab\r\n#Ansible: two\r\n*/2 * * * * echo \"two\" >> /tmp/test\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71271", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71271/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71271/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71271/events", "html_url": "https://github.com/ansible/ansible/issues/71271", "id": 678741269, "node_id": "MDU6SXNzdWU2Nzg3NDEyNjk=", "number": 71271, "title": "Ansible Azure + Molecule + PIP 2020 Resolver", "user": {"login": "dmlb2000", "id": 1504962, "node_id": "MDQ6VXNlcjE1MDQ5NjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1504962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmlb2000", "html_url": "https://github.com/dmlb2000", "followers_url": "https://api.github.com/users/dmlb2000/followers", "following_url": "https://api.github.com/users/dmlb2000/following{/other_user}", "gists_url": "https://api.github.com/users/dmlb2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmlb2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmlb2000/subscriptions", "organizations_url": "https://api.github.com/users/dmlb2000/orgs", "repos_url": "https://api.github.com/users/dmlb2000/repos", "events_url": "https://api.github.com/users/dmlb2000/events{/privacy}", "received_events_url": "https://api.github.com/users/dmlb2000/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-13T21:21:02Z", "updated_at": "2020-08-13T21:45:17Z", "closed_at": "2020-08-13T21:24:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n##### SUMMARY\r\nI'm trying to install Ansible with the Azure extras along with Molecule for testing using the new PIP 2020 resolver.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nDependencies for Azure extras is likely the culprit.\r\n\r\n##### ANSIBLE VERSION\r\n```paste below\r\npip --version\r\npip 20.2.2 from /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages/pip (python 3.6)\r\n```\r\n\r\n##### CONFIGURATION\r\nNot applicable, I can't even get it installed.\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nI'm running this in WSL2 on Windows 10 but I've seen this on Linux and Mac as well.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n`pip install --use-feature=2020-resolver molecule 'ansible[azure]'`\r\n\r\nAfter a lot of output of packages the following is the end of the output seems pip is looping slowly decrementing the ansible package looking for resolvable dependencies.\r\n```yaml\r\n...\r\nRequirement already satisfied: azure-common==1.1.11 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (1.1.11)\r\nRequirement already satisfied: msrest==0.6.1 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (0.6.1)\r\nRequirement already satisfied: msrestazure==0.5.0 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (0.5.0)\r\nRequirement already satisfied: pip in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from azure-cli-core==2.0.35->ansible[azure]) (20.2.2)\r\nRequirement already satisfied: pygments in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from azure-cli-core==2.0.35->ansible[azure]) (2.6.1)\r\nCollecting ansible[azure]\r\n  Using cached ansible-2.9.8.tar.gz (14.2 MB)\r\nRequirement already satisfied: Jinja2>=2.10.1 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from molecule) (2.11.2)\r\nRequirement already satisfied: PyYAML<6,>=5.1 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from molecule) (5.3.1)\r\n...\r\nRequirement already satisfied: azure-common==1.1.11 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (1.1.11)\r\nRequirement already satisfied: msrest==0.6.1 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (0.6.1)\r\nRequirement already satisfied: msrestazure==0.5.0 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (0.5.0)\r\nRequirement already satisfied: azure-nspkg==2.0.0 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (2.0.0)\r\nRequirement already satisfied: azure-common==1.1.11 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (1.1.11)\r\nRequirement already satisfied: msrest==0.6.1 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (0.6.1)\r\nRequirement already satisfied: msrestazure==0.5.0 in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from ansible[azure]) (0.5.0)\r\nRequirement already satisfied: pip in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from azure-cli-core==2.0.35->ansible[azure]) (20.2.2)\r\nRequirement already satisfied: pygments in /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages (from azure-cli-core==2.0.35->ansible[azure]) (2.6.1)\r\nCollecting ansible[azure]\r\n  Using cached ansible-2.9.3.tar.gz (14.2 MB)\r\n...\r\n```\r\n\r\nIf I install without the new resolver it does spit out some warnings about dependencies between molecule and ansible.\r\n```\r\nERROR: After October 2020 you may experience errors when installing or updating packages. This is because pip will change the way that it resolves dependency conflicts.\r\n\r\nWe recommend you use --use-feature=2020-resolver to test your packages with the new resolver before it becomes the default.\r\n\r\nazure-cli-core 2.0.35 requires tabulate<=0.8.2,>=0.7.7, but you'll have tabulate 0.8.7 which is incompatible.\r\nSuccessfully installed Jinja2-2.11.2 MarkupSafe-1.1.1 PyJWT-1.7.1 PyYAML-5.3.1 adal-1.2.4 ansible-2.9.12 applicationinsights-0.11.9 argcomplete-1.12.0 arrow-0.15.8 azure-cli-core-2.0.35 azure-cli-nspkg-3.0.2 azure-common-1.1.11 azure-graphrbac-0.40.0 azure-keyvault-1.0.0a1 azure-mgmt-authorization-0.51.1 azure-mgmt-automation-0.1.1 azure-mgmt-batch-5.0.1 azure-mgmt-cdn-3.0.0 azure-mgmt-compute-4.4.0 azure-mgmt-containerinstance-1.4.0 azure-mgmt-containerregistry-2.0.0 azure-mgmt-containerservice-4.4.0 azure-mgmt-cosmosdb-0.5.2 azure-mgmt-devtestlabs-3.0.0 azure-mgmt-dns-2.1.0 azure-mgmt-hdinsight-0.1.0 azure-mgmt-iothub-0.7.0 azure-mgmt-keyvault-1.1.0 azure-mgmt-loganalytics-0.2.0 azure-mgmt-marketplaceordering-0.1.0 azure-mgmt-monitor-0.5.2 azure-mgmt-network-2.3.0 azure-mgmt-nspkg-2.0.0 azure-mgmt-rdbms-1.4.1 azure-mgmt-redis-5.0.0 azure-mgmt-resource-2.1.0 azure-mgmt-servicebus-0.5.3 azure-mgmt-sql-0.10.0 azure-mgmt-storage-3.1.0 azure-mgmt-trafficmanager-0.50.0 azure-mgmt-web-0.41.0 azure-nspkg-2.0.0 azure-storage-0.35.1 bcrypt-3.1.7 binaryornot-0.4.4 cerberus-1.3.2 certifi-2020.6.20 cffi-1.14.1 chardet-3.0.4 click-7.1.2 click-completion-0.5.2 click-help-colors-0.8 colorama-0.4.3 cookiecutter-1.7.2 cryptography-3.0 distro-1.5.0 fasteners-0.15 humanfriendly-8.2 idna-2.10 importlib-metadata-1.7.0 isodate-0.6.0 jinja2-time-0.2.0 jmespath-0.10.0 knack-0.3.3 molecule-3.0.6 monotonic-1.5 msrest-0.6.1 msrestazure-0.5.0 oauthlib-3.1.0 packaging-20.4 paramiko-2.7.1 pathspec-0.8.0 pexpect-4.8.0 pluggy-0.13.1 poyo-0.5.0 ptyprocess-0.6.0 pyOpenSSL-19.1.0 pycparser-2.20 pygments-2.6.1 pynacl-1.4.0 pyparsing-2.4.7 python-dateutil-2.8.1 python-gilt-1.2.3 python-slugify-4.0.1 requests-2.24.0 requests-oauthlib-1.3.0 selinux-0.2.1 sh-1.13.1 shellingham-1.3.2 six-1.15.0 tabulate-0.8.7 text-unidecode-1.3 tree-format-0.1.2 urllib3-1.25.10 xmltodict-0.12.0 yamllint-1.24.2 zipp-3.1.0\r\n```\r\n\r\nThe tabulate package seems to be the issue?\r\n\r\n##### EXPECTED RESULTS\r\nI should be able to install ansible with azure and molecule in the same virtualenv\r\n\r\n##### ACTUAL RESULTS\r\nWith the new pip resolver it doesn't install. Pip just spins on installing lesser versions of ansible over and over again.\r\n```paste below\r\nSee text in steps to reproduce.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71269", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71269/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71269/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71269/events", "html_url": "https://github.com/ansible/ansible/issues/71269", "id": 678727413, "node_id": "MDU6SXNzdWU2Nzg3Mjc0MTM=", "number": 71269, "title": "ansible_distribution detects wrong distro", "user": {"login": "mboman", "id": 731170, "node_id": "MDQ6VXNlcjczMTE3MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/731170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mboman", "html_url": "https://github.com/mboman", "followers_url": "https://api.github.com/users/mboman/followers", "following_url": "https://api.github.com/users/mboman/following{/other_user}", "gists_url": "https://api.github.com/users/mboman/gists{/gist_id}", "starred_url": "https://api.github.com/users/mboman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mboman/subscriptions", "organizations_url": "https://api.github.com/users/mboman/orgs", "repos_url": "https://api.github.com/users/mboman/repos", "events_url": "https://api.github.com/users/mboman/events{/privacy}", "received_events_url": "https://api.github.com/users/mboman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-13T20:53:08Z", "updated_at": "2020-08-17T14:46:57Z", "closed_at": "2020-08-13T21:28:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nAnsible detects wrong distribution of server\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nansible facts (?)\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/mboman/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nDEFAULT_SCP_IF_SSH(/etc/ansible/ansible.cfg) = true\r\nDEFAULT_SSH_TRANSFER_METHOD(/etc/ansible/ansible.cfg) = scp\r\nINVENTORY_ENABLED(/etc/ansible/ansible.cfg) = ['host_list', 'script', 'auto', 'yaml', 'ini', 'toml', 'vmware_vm_inventory']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nAnsible host:\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 18.04.5 LTS\r\nRelease:        18.04\r\nCodename:       bionic\r\n\r\nAnsible target:\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 18.04.5 LTS\r\nRelease:        18.04\r\nCodename:       bionic\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\ntasks.yml:\r\n\r\n- command: lsb_release -a\r\n    register: lsb_release\r\n\r\n  - debug:\r\n      msg: ansible_distribution == {{ ansible_distribution }}\r\n\r\n  - debug:\r\n      msg: lsb_release == {{ lsb_release.stdout }}\r\n\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nansible_distribution == Ubuntu\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nansible-playbook 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/myuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible-playbook\r\n  python version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nsetting up inventory plugins\r\nhost_list declined parsing /home/myuser/ansible/hosts.txt as it did not pass its verify_file() method\r\nscript declined parsing /home/myuser/ansible/hosts.txt as it did not pass its verify_file() method\r\nauto declined parsing /home/myuser/ansible/hosts.txt as it did not pass its verify_file() method\r\nyaml declined parsing /home/myuser/ansible/hosts.txt as it did not pass its verify_file() method\r\nNot replacing invalid character(s) \"{'-'}\" in group name (zimbra-smtp)\r\n[DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be removed in version 2.10. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n[WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details\r\nNot replacing invalid character(s) \"{'-'}\" in group name (zimbra-smtp)\r\nNot replacing invalid character(s) \"{'-'}\" in group name (wazuh-server)\r\nNot replacing invalid character(s) \"{'-'}\" in group name (wazuh-server)\r\nParsed /home/myuser/ansible/hosts.txt inventory source with ini plugin\r\nLoading callback plugin default of type stdout, v2.0 from /usr/local/lib/python3.6/dist-packages/ansible/plugins/callback/default.py\r\n\r\nPLAYBOOK: myrole.yml ******************************************************************************************************************************************************************************************************************************************************************\r\nPositional arguments: myrole.yml\r\nverbosity: 4\r\nconnection: smart\r\ntimeout: 10\r\nbecome_method: sudo\r\ntags: ('all',)\r\ninventory: ('/home/myuser/ansible/hosts.txt',)\r\nforks: 5\r\n1 plays in myrole.yml\r\n\r\nPLAY [myrole] *************************************************************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] *****************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/myuser/ansible/myrole.yml:4\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'echo ~root && sleep 0'\"'\"''\r\n<myserver> (0, b'/root\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269 `\" && echo ansible-tmp-1597351792.6860337-81456588859269=\"` echo /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269 `\" ) && sleep 0'\"'\"''\r\n<myserver> (0, b'ansible-tmp-1597351792.6860337-81456588859269=/root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> Attempting python interpreter discovery\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'echo PLATFORM; uname; echo FOUND; command -v '\"'\"'\"'\"'\"'\"'\"'\"'/usr/bin/python'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python3.7'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python3.6'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python3.5'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python2.7'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python2.6'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'/usr/libexec/platform-python'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'/usr/bin/python3'\"'\"'\"'\"'\"'\"'\"'\"'; command -v '\"'\"'\"'\"'\"'\"'\"'\"'python'\"'\"'\"'\"'\"'\"'\"'\"'; echo ENDFOUND && sleep 0'\"'\"''\r\n<myserver> (0, b'PLATFORM\\nLinux\\nFOUND\\n/usr/bin/python\\n/usr/bin/python3.6\\n/usr/bin/python2.7\\n/usr/libexec/platform-python\\n/usr/bin/python3\\n/usr/bin/python\\nENDFOUND\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'/usr/bin/python && sleep 0'\"'\"''\r\n<myserver> (0, b'{\"osrelease_content\": \"NAME=\\\\\"CentOS Linux\\\\\"\\\\nVERSION=\\\\\"7 (Core)\\\\\"\\\\nID=\\\\\"centos\\\\\"\\\\nID_LIKE=\\\\\"rhel fedora\\\\\"\\\\nVERSION_ID=\\\\\"7\\\\\"\\\\nPRETTY_NAME=\\\\\"CentOS Linux 7 (Core)\\\\\"\\\\nANSI_COLOR=\\\\\"0;31\\\\\"\\\\nCPE_NAME=\\\\\"cpe:/o:centos:centos:7\\\\\"\\\\nHOME_URL=\\\\\"https://www.centos.org/\\\\\"\\\\nBUG_REPORT_URL=\\\\\"https://bugs.centos.org/\\\\\"\\\\n\\\\nCENTOS_MANTISBT_PROJECT=\\\\\"CentOS-7\\\\\"\\\\nCENTOS_MANTISBT_PROJECT_VERSION=\\\\\"7\\\\\"\\\\nREDHAT_SUPPORT_PRODUCT=\\\\\"centos\\\\\"\\\\nREDHAT_SUPPORT_PRODUCT_VERSION=\\\\\"7\\\\\"\\\\n\\\\n\", \"platform_dist_result\": [\"centos\", \"7.8.2003\", \"Core\"]}\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nUsing module file /usr/local/lib/python3.6/dist-packages/ansible/modules/system/setup.py\r\n<myserver> PUT /home/myuser/.ansible/tmp/ansible-local-199760_lam932/tmpcfc0dxq5 TO /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/AnsiballZ_setup.py\r\n<myserver> SSH: EXEC scp -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 /home/myuser/.ansible/tmp/ansible-local-199760_lam932/tmpcfc0dxq5 '[myserver]:/root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/AnsiballZ_setup.py'\r\n<myserver> (0, b'', b'Executing: program /usr/bin/ssh host myserver, user (unspecified), command scp -v -t /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/AnsiballZ_setup.py\\nOpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\nSending file modes: C0600 255188 tmpcfc0dxq5\\nSink: C0600 255188 tmpcfc0dxq5\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'chmod u+x /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/ /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/AnsiballZ_setup.py && sleep 0'\"'\"''\r\n<myserver> (0, b'', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 -tt myserver '/bin/sh -c '\"'\"'/usr/bin/python /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/AnsiballZ_setup.py && sleep 0'\"'\"''\r\n<myserver> (0, b'\\r\\n{\"invocation\": {\"module_args\": {\"filter\": \"*\", \"gather_subset\": [\"all\"], \"fact_path\": \"/etc/ansible/facts.d\", \"gather_timeout\": 10}}, \"ansible_facts\": {\"ansible_fibre_channel_wwn\": [], \"module_setup\": true, \"ansible_distribution_version\": \"7.8\", \"ansible_distribution_file_variety\": \"RedHat\", \"ansible_env\": {\"LC_NUMERIC\": \"C\", \"PERL_MM_OPT\": \"INSTALL_BASE=/root/perl5\", \"LESSOPEN\": \"||/usr/bin/lesspipe.sh %s\", \"PERL_LOCAL_LIB_ROOT\": \"/root/perl5\", \"SSH_CLIENT\": \"94.254.88.18 44588 22\", \"LOGNAME\": \"root\", \"USER\": \"root\", \"PATH\": \"/root/perl5/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin\", \"LC_PAPER\": \"sv_SE.UTF-8\", \"HOME\": \"/root\", \"LANG\": \"C\", \"TERM\": \"screen.xterm-256color\", \"SHELL\": \"/bin/bash\", \"LC_MEASUREMENT\": \"sv_SE.UTF-8\", \"XDG_RUNTIME_DIR\": \"/run/user/0\", \"LC_IDENTIFICATION\": \"sv_SE.UTF-8\", \"LC_ADDRESS\": \"sv_SE.UTF-8\", \"SHLVL\": \"2\", \"LC_ALL\": \"C\", \"XDG_SESSION_ID\": \"7095\", \"_\": \"/usr/bin/python\", \"PERL5LIB\": \"/root/perl5/lib/perl5\", \"SSH_CONNECTION\": \"94.254.88.18 44588 213.136.82.73 22\", \"SSH_TTY\": \"/dev/pts/1\", \"LC_TELEPHONE\": \"sv_SE.UTF-8\", \"LC_MONETARY\": \"sv_SE.UTF-8\", \"PWD\": \"/root\", \"PERL_MB_OPT\": \"--install_base \\\\\"/root/perl5\\\\\"\", \"LC_NAME\": \"sv_SE.UTF-8\", \"MAIL\": \"/var/mail/root\", \"LC_TIME\": \"sv_SE.UTF-8\", \"LS_COLORS\": \"\"}, \"ansible_userspace_bits\": \"64\", \"ansible_architecture\": \"x86_64\", \"ansible_default_ipv4\": {\"macaddress\": \"00:50:56:3c:93:97\", \"network\": \"213.136.82.0\", \"mtu\": 1500, \"broadcast\": \"213.136.82.255\", \"alias\": \"eth0\", \"netmask\": \"255.255.255.0\", \"address\": \"213.136.82.73\", \"interface\": \"eth0\", \"type\": \"ether\", \"gateway\": \"213.136.82.1\"}, \"ansible_swapfree_mb\": 0, \"ansible_default_ipv6\": {}, \"ansible_cmdline\": {\"LANG\": \"en_US.UTF-8\", \"BOOT_IMAGE\": \"/vmlinuz-3.10.0-1127.18.2.el7.x86_64\", \"quiet\": true, \"net.ifnames\": \"0\", \"rhgb\": true, \"biosdevname\": \"0\", \"crashkernel\": \"auto\", \"ro\": true, \"root\": \"UUID=05ea2f91-93dc-49d9-9f44-aa106d86e64f\"}, \"ansible_machine_id\": \"57fcadf8c0ef4bb9baeaab87f699592f\", \"ansible_userspace_architecture\": \"x86_64\", \"ansible_product_uuid\": \"57FCADF8-C0EF-4BB9-BAEA-AB87F699592F\", \"ansible_pkg_mgr\": \"yum\", \"ansible_distribution\": \"CentOS\", \"ansible_iscsi_iqn\": \"\", \"ansible_all_ipv6_addresses\": [], \"ansible_uptime_seconds\": 477904, \"ansible_kernel\": \"3.10.0-1127.18.2.el7.x86_64\", \"ansible_system_capabilities_enforced\": \"True\", \"ansible_python\": {\"executable\": \"/usr/bin/python\", \"version\": {\"micro\": 5, \"major\": 2, \"releaselevel\": \"final\", \"serial\": 0, \"minor\": 7}, \"type\": \"CPython\", \"has_sslcontext\": true, \"version_info\": [2, 7, 5, \"final\", 0]}, \"ansible_is_chroot\": false, \"ansible_hostnqn\": \"\", \"ansible_user_shell\": \"/bin/bash\", \"ansible_product_serial\": \"NA\", \"ansible_form_factor\": \"Other\", \"ansible_distribution_file_parsed\": true, \"ansible_fips\": false, \"ansible_user_id\": \"root\", \"ansible_selinux_python_present\": true, \"ansible_kernel_version\": \"#1 SMP Sun Jul 26 15:27:06 UTC 2020\", \"ansible_local\": {}, \"ansible_processor_vcpus\": 4, \"ansible_processor\": [\"0\", \"GenuineIntel\", \"Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz\", \"1\", \"GenuineIntel\", \"Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz\", \"2\", \"GenuineIntel\", \"Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz\", \"3\", \"GenuineIntel\", \"Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz\"], \"ansible_ssh_host_key_ecdsa_public\": \"AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBAQ/ArjyVlQZb2eqHv5AMGuoE25ka1JLmuyU9lMJ0oi8jjUVbCgAAOUJLERiR5KqvyAxKx440Iz40+KgGXKcO1I=\", \"ansible_user_gid\": 0, \"ansible_system_vendor\": \"QEMU\", \"ansible_swaptotal_mb\": 0, \"ansible_distribution_major_version\": \"7\", \"ansible_real_group_id\": 0, \"ansible_lsb\": {\"release\": \"7.8.2003\", \"major_release\": \"7\", \"codename\": \"Core\", \"id\": \"CentOS\", \"description\": \"CentOS Linux release 7.8.2003 (Core)\"}, \"ansible_machine\": \"x86_64\", \"ansible_ssh_host_key_rsa_public\": \"AAAAB3NzaC1yc2EAAAADAQABAAABAQCxO/LY5DOh53osJS4CnZKXum/b2YaKKjQohC1qxPjI/7I54K7qu/uYPBKyxEw6UFlbu2xgt8ftI63m8jN39P0L+AP/7KgzfqOWxkUdu1aXChvGA9OiXyavkLswUBiiFdDVaOAjXu/h/JH8WfDAtgkOKldCJ94AhfW376u3HuAbqHSj6+8E8zWVF5Ol66tTUKlCfjAleuHkmUUp95+w17u5W/estnhAQ/o0Q61Nw/MXGvZ796HIbnxnvVN2O1yd6UhdBjl9VuiRU/lMSLvD3zmlQU+ogfwRmCLNdYM4wGyqBeBe166ROsPfieYl/vJ1zgoYBFWveXAmEHlkdSc1fu+x\", \"ansible_user_gecos\": \"root\", \"ansible_processor_threads_per_core\": 1, \"ansible_eth0\": {\"macaddress\": \"00:50:56:3c:93:97\", \"features\": {\"tx_checksum_ipv4\": \"off [fixed]\", \"generic_receive_offload\": \"on\", \"tx_checksum_ipv6\": \"off [fixed]\", \"tx_scatter_gather_fraglist\": \"off [fixed]\", \"rx_all\": \"off [fixed]\", \"highdma\": \"on [fixed]\", \"rx_fcs\": \"off [fixed]\", \"tx_lockless\": \"off [fixed]\", \"tx_tcp_ecn_segmentation\": \"on\", \"rx_udp_tunnel_port_offload\": \"off [fixed]\", \"tx_tcp6_segmentation\": \"on\", \"tx_gso_robust\": \"off [fixed]\", \"tx_ipip_segmentation\": \"off [fixed]\", \"tx_tcp_mangleid_segmentation\": \"off\", \"tx_checksumming\": \"on\", \"vlan_challenged\": \"off [fixed]\", \"loopback\": \"off [fixed]\", \"fcoe_mtu\": \"off [fixed]\", \"scatter_gather\": \"on\", \"tx_checksum_sctp\": \"off [fixed]\", \"tx_vlan_stag_hw_insert\": \"off [fixed]\", \"rx_vlan_stag_hw_parse\": \"off [fixed]\", \"tx_gso_partial\": \"off [fixed]\", \"rx_gro_hw\": \"off [fixed]\", \"rx_vlan_stag_filter\": \"off [fixed]\", \"large_receive_offload\": \"off [fixed]\", \"tx_scatter_gather\": \"on\", \"rx_checksumming\": \"on [fixed]\", \"tx_tcp_segmentation\": \"on\", \"netns_local\": \"off [fixed]\", \"busy_poll\": \"off [fixed]\", \"generic_segmentation_offload\": \"on\", \"tx_udp_tnl_segmentation\": \"off [fixed]\", \"tcp_segmentation_offload\": \"on\", \"l2_fwd_offload\": \"off [fixed]\", \"rx_vlan_offload\": \"off [fixed]\", \"ntuple_filters\": \"off [fixed]\", \"tx_gre_csum_segmentation\": \"off [fixed]\", \"tx_nocache_copy\": \"off\", \"tx_udp_tnl_csum_segmentation\": \"off [fixed]\", \"udp_fragmentation_offload\": \"on\", \"tx_sctp_segmentation\": \"off [fixed]\", \"tx_sit_segmentation\": \"off [fixed]\", \"tx_checksum_fcoe_crc\": \"off [fixed]\", \"hw_tc_offload\": \"off [fixed]\", \"tx_checksum_ip_generic\": \"on\", \"tx_fcoe_segmentation\": \"off [fixed]\", \"rx_vlan_filter\": \"on [fixed]\", \"tx_vlan_offload\": \"off [fixed]\", \"receive_hashing\": \"off [fixed]\", \"tx_gre_segmentation\": \"off [fixed]\"}, \"pciid\": \"virtio2\", \"module\": \"virtio_net\", \"mtu\": 1500, \"device\": \"eth0\", \"promisc\": false, \"timestamping\": [\"rx_software\", \"software\"], \"ipv4\": {\"broadcast\": \"213.136.82.255\", \"netmask\": \"255.255.255.0\", \"network\": \"213.136.82.0\", \"address\": \"213.136.82.73\"}, \"active\": true, \"type\": \"ether\", \"hw_timestamp_filters\": []}, \"ansible_product_name\": \"Standard PC (i440FX + PIIX, 1996)\", \"ansible_all_ipv4_addresses\": [\"213.136.82.73\"], \"ansible_python_version\": \"2.7.5\", \"ansible_product_version\": \"pc-i440fx-2.11\", \"ansible_service_mgr\": \"systemd\", \"ansible_memory_mb\": {\"real\": {\"total\": 13868, \"used\": 7938, \"free\": 5930}, \"swap\": {\"cached\": 0, \"total\": 0, \"free\": 0, \"used\": 0}, \"nocache\": {\"used\": 6798, \"free\": 7070}}, \"ansible_user_dir\": \"/root\", \"gather_subset\": [\"all\"], \"ansible_real_user_id\": 0, \"ansible_virtualization_role\": \"guest\", \"ansible_dns\": {\"nameservers\": [\"127.0.0.1\", \"213.136.95.11\", \"213.136.95.10\"], \"search\": [\"invalid\"]}, \"ansible_effective_group_id\": 0, \"ansible_lo\": {\"features\": {\"tx_checksum_ipv4\": \"off [fixed]\", \"generic_receive_offload\": \"on\", \"tx_checksum_ipv6\": \"off [fixed]\", \"tx_scatter_gather_fraglist\": \"on [fixed]\", \"rx_all\": \"off [fixed]\", \"highdma\": \"on [fixed]\", \"rx_fcs\": \"off [fixed]\", \"tx_lockless\": \"on [fixed]\", \"tx_tcp_ecn_segmentation\": \"on\", \"rx_udp_tunnel_port_offload\": \"off [fixed]\", \"tx_tcp6_segmentation\": \"on\", \"tx_gso_robust\": \"off [fixed]\", \"tx_ipip_segmentation\": \"off [fixed]\", \"tx_tcp_mangleid_segmentation\": \"on\", \"tx_checksumming\": \"on\", \"vlan_challenged\": \"on [fixed]\", \"loopback\": \"on [fixed]\", \"fcoe_mtu\": \"off [fixed]\", \"scatter_gather\": \"on\", \"tx_checksum_sctp\": \"on [fixed]\", \"tx_vlan_stag_hw_insert\": \"off [fixed]\", \"rx_vlan_stag_hw_parse\": \"off [fixed]\", \"tx_gso_partial\": \"off [fixed]\", \"rx_gro_hw\": \"off [fixed]\", \"rx_vlan_stag_filter\": \"off [fixed]\", \"large_receive_offload\": \"off [fixed]\", \"tx_scatter_gather\": \"on [fixed]\", \"rx_checksumming\": \"on [fixed]\", \"tx_tcp_segmentation\": \"on\", \"netns_local\": \"on [fixed]\", \"busy_poll\": \"off [fixed]\", \"generic_segmentation_offload\": \"on\", \"tx_udp_tnl_segmentation\": \"off [fixed]\", \"tcp_segmentation_offload\": \"on\", \"l2_fwd_offload\": \"off [fixed]\", \"rx_vlan_offload\": \"off [fixed]\", \"ntuple_filters\": \"off [fixed]\", \"tx_gre_csum_segmentation\": \"off [fixed]\", \"tx_nocache_copy\": \"off [fixed]\", \"tx_udp_tnl_csum_segmentation\": \"off [fixed]\", \"udp_fragmentation_offload\": \"on\", \"tx_sctp_segmentation\": \"on\", \"tx_sit_segmentation\": \"off [fixed]\", \"tx_checksum_fcoe_crc\": \"off [fixed]\", \"hw_tc_offload\": \"off [fixed]\", \"tx_checksum_ip_generic\": \"on [fixed]\", \"tx_fcoe_segmentation\": \"off [fixed]\", \"rx_vlan_filter\": \"off [fixed]\", \"tx_vlan_offload\": \"off [fixed]\", \"receive_hashing\": \"off [fixed]\", \"tx_gre_segmentation\": \"off [fixed]\"}, \"hw_timestamp_filters\": [], \"mtu\": 65536, \"device\": \"lo\", \"promisc\": false, \"timestamping\": [\"rx_software\", \"software\"], \"ipv4\": {\"broadcast\": \"host\", \"netmask\": \"255.0.0.0\", \"network\": \"127.0.0.0\", \"address\": \"127.0.0.1\"}, \"ipv6\": [{\"scope\": \"host\", \"prefix\": \"128\", \"address\": \"::1\"}], \"active\": true, \"type\": \"loopback\"}, \"ansible_memtotal_mb\": 13868, \"ansible_device_links\": {\"masters\": {}, \"labels\": {}, \"ids\": {}, \"uuids\": {\"vda1\": [\"eceb3c32-0e44-461a-b07f-950c4dd1a80e\"], \"vda2\": [\"05ea2f91-93dc-49d9-9f44-aa106d86e64f\"]}}, \"ansible_apparmor\": {\"status\": \"disabled\"}, \"ansible_proc_cmdline\": {\"LANG\": \"en_US.UTF-8\", \"BOOT_IMAGE\": \"/vmlinuz-3.10.0-1127.18.2.el7.x86_64\", \"quiet\": true, \"net.ifnames\": \"0\", \"rhgb\": true, \"biosdevname\": \"0\", \"crashkernel\": \"auto\", \"ro\": true, \"root\": \"UUID=05ea2f91-93dc-49d9-9f44-aa106d86e64f\"}, \"ansible_memfree_mb\": 5930, \"ansible_processor_count\": 1, \"ansible_hostname\": \"vps1\", \"ansible_interfaces\": [\"lo\", \"eth0\"], \"ansible_selinux\": {\"status\": \"disabled\"}, \"ansible_fqdn\": \"vps1.vindspelet11.net\", \"ansible_mounts\": [{\"block_used\": 83937, \"uuid\": \"eceb3c32-0e44-461a-b07f-950c4dd1a80e\", \"size_total\": 1015308288, \"block_total\": 247878, \"mount\": \"/boot\", \"block_available\": 163941, \"size_available\": 671502336, \"fstype\": \"ext4\", \"inode_total\": 64000, \"options\": \"rw,noatime,data=ordered\", \"device\": \"/dev/vda1\", \"inode_used\": 363, \"block_size\": 4096, \"inode_available\": 63637}, {\"block_used\": 19637477, \"uuid\": \"05ea2f91-93dc-49d9-9f44-aa106d86e64f\", \"size_total\": 1055720161280, \"block_total\": 257744180, \"mount\": \"/\", \"block_available\": 238106703, \"size_available\": 975285055488, \"fstype\": \"ext4\", \"inode_total\": 65478656, \"options\": \"rw,noatime,data=ordered\", \"device\": \"/dev/vda2\", \"inode_used\": 539798, \"block_size\": 4096, \"inode_available\": 64938858}], \"ansible_nodename\": \"vps1.vindspelet11.net\", \"ansible_domain\": \"vindspelet11.net\", \"ansible_distribution_file_path\": \"/etc/redhat-release\", \"ansible_virtualization_type\": \"kvm\", \"ansible_ssh_host_key_ed25519_public\": \"AAAAC3NzaC1lZDI1NTE5AAAAIIhq4JuNvep4/wsRttextlL0iKt5DdDzb8iWXbKU9Yhd\", \"ansible_processor_cores\": 4, \"ansible_bios_version\": \"rel-1.11.0-0-g63451fca13-prebuilt.qemu-project.org\", \"ansible_date_time\": {\"weekday_number\": \"4\", \"iso8601_basic_short\": \"20200813T224954\", \"tz\": \"CEST\", \"weeknumber\": \"32\", \"hour\": \"22\", \"year\": \"2020\", \"minute\": \"49\", \"tz_offset\": \"+0200\", \"month\": \"08\", \"epoch\": \"1597351794\", \"iso8601_micro\": \"2020-08-13T20:49:54.810070Z\", \"weekday\": \"torsdag\", \"time\": \"22:49:54\", \"date\": \"2020-08-13\", \"iso8601\": \"2020-08-13T20:49:54Z\", \"day\": \"13\", \"iso8601_basic\": \"20200813T224954809822\", \"second\": \"54\"}, \"ansible_distribution_release\": \"Core\", \"ansible_os_family\": \"RedHat\", \"ansible_effective_user_id\": 0, \"ansible_system\": \"Linux\", \"ansible_devices\": {\"vda\": {\"scheduler_mode\": \"mq-deadline\", \"rotational\": \"1\", \"vendor\": \"0x1af4\", \"sectors\": \"2097152000\", \"links\": {\"masters\": [], \"labels\": [], \"ids\": [], \"uuids\": []}, \"sas_device_handle\": null, \"sas_address\": null, \"virtual\": 1, \"host\": \"\", \"sectorsize\": \"512\", \"removable\": \"0\", \"support_discard\": \"0\", \"model\": null, \"partitions\": {\"vda1\": {\"sectorsize\": 512, \"uuid\": \"eceb3c32-0e44-461a-b07f-950c4dd1a80e\", \"links\": {\"masters\": [], \"labels\": [], \"ids\": [], \"uuids\": [\"eceb3c32-0e44-461a-b07f-950c4dd1a80e\"]}, \"sectors\": \"2048000\", \"start\": \"2048\", \"holders\": [], \"size\": \"1000.00 MB\"}, \"vda2\": {\"sectorsize\": 512, \"uuid\": \"05ea2f91-93dc-49d9-9f44-aa106d86e64f\", \"links\": {\"masters\": [], \"labels\": [], \"ids\": [], \"uuids\": [\"05ea2f91-93dc-49d9-9f44-aa106d86e64f\"]}, \"sectors\": \"2095101952\", \"start\": \"2050048\", \"holders\": [], \"size\": \"999.02 GB\"}}, \"holders\": [], \"size\": \"1000.00 GB\"}}, \"ansible_user_uid\": 0, \"ansible_bios_date\": \"04/01/2014\", \"ansible_system_capabilities\": [\"cap_chown\", \"cap_dac_override\", \"cap_dac_read_search\", \"cap_fowner\", \"cap_fsetid\", \"cap_kill\", \"cap_setgid\", \"cap_setuid\", \"cap_setpcap\", \"cap_linux_immutable\", \"cap_net_bind_service\", \"cap_net_broadcast\", \"cap_net_admin\", \"cap_net_raw\", \"cap_ipc_lock\", \"cap_ipc_owner\", \"cap_sys_module\", \"cap_sys_rawio\", \"cap_sys_chroot\", \"cap_sys_ptrace\", \"cap_sys_pacct\", \"cap_sys_admin\", \"cap_sys_boot\", \"cap_sys_nice\", \"cap_sys_resource\", \"cap_sys_time\", \"cap_sys_tty_config\", \"cap_mknod\", \"cap_lease\", \"cap_audit_write\", \"cap_audit_control\", \"cap_setfcap\", \"cap_mac_override\", \"cap_mac_admin\", \"cap_syslog\", \"35\", \"36+ep\"]}}\\r\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\nShared connection to myserver closed.\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'rm -f -r /root/.ansible/tmp/ansible-tmp-1597351792.6860337-81456588859269/ > /dev/null 2>&1 && sleep 0'\"'\"''\r\n<myserver> (0, b'', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nok: [myserver]\r\nMETA: ran handlers\r\n\r\nTASK [myrole : command] ***************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/myuser/vagrant/myrole/roles/myrole/tasks/main.yml:3\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'echo ~root && sleep 0'\"'\"''\r\n<myserver> (0, b'/root\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124 `\" && echo ansible-tmp-1597351795.0357206-126053930701124=\"` echo /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124 `\" ) && sleep 0'\"'\"''\r\n<myserver> (0, b'ansible-tmp-1597351795.0357206-126053930701124=/root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nUsing module file /usr/local/lib/python3.6/dist-packages/ansible/modules/commands/command.py\r\n<myserver> PUT /home/myuser/.ansible/tmp/ansible-local-199760_lam932/tmpp1o4qze3 TO /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/AnsiballZ_command.py\r\n<myserver> SSH: EXEC scp -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 /home/myuser/.ansible/tmp/ansible-local-199760_lam932/tmpp1o4qze3 '[myserver]:/root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/AnsiballZ_command.py'\r\n<myserver> (0, b'', b'Executing: program /usr/bin/ssh host myserver, user (unspecified), command scp -v -t /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/AnsiballZ_command.py\\nOpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\nSending file modes: C0600 108054 tmpp1o4qze3\\nSink: C0600 108054 tmpp1o4qze3\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'chmod u+x /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/ /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/AnsiballZ_command.py && sleep 0'\"'\"''\r\n<myserver> (0, b'', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 -tt myserver '/bin/sh -c '\"'\"'/usr/bin/python /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/AnsiballZ_command.py && sleep 0'\"'\"''\r\n<myserver> (0, b'\\r\\n{\"changed\": true, \"end\": \"2020-08-13 22:49:56.216500\", \"stdout\": \"LSB Version:\\\\t:core-4.1-amd64:core-4.1-noarch\\\\nDistributor ID:\\\\tCentOS\\\\nDescription:\\\\tCentOS Linux release 7.8.2003 (Core)\\\\nRelease:\\\\t7.8.2003\\\\nCodename:\\\\tCore\", \"cmd\": [\"lsb_release\", \"-a\"], \"rc\": 0, \"start\": \"2020-08-13 22:49:56.183678\", \"stderr\": \"\", \"delta\": \"0:00:00.032822\", \"invocation\": {\"module_args\": {\"creates\": null, \"executable\": null, \"_uses_shell\": false, \"strip_empty_ends\": true, \"_raw_params\": \"lsb_release -a\", \"removes\": null, \"argv\": null, \"warn\": true, \"chdir\": null, \"stdin_add_newline\": true, \"stdin\": null}}}\\r\\n', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\nShared connection to myserver closed.\\r\\n')\r\n<myserver> ESTABLISH SSH CONNECTION FOR USER: root\r\n<myserver> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"root\"' -o ConnectTimeout=10 -o ControlPath=/home/myuser/.ansible/cp/872e8acca5 myserver '/bin/sh -c '\"'\"'rm -f -r /root/.ansible/tmp/ansible-tmp-1597351795.0357206-126053930701124/ > /dev/null 2>&1 && sleep 0'\"'\"''\r\n<myserver> (0, b'', b'OpenSSH_7.6p1 Ubuntu-4ubuntu0.3, OpenSSL 1.0.2n  7 Dec 2017\\r\\ndebug1: Reading configuration data /home/myuser/.ssh/config\\r\\ndebug1: /home/myuser/.ssh/config line 1: Applying options for *\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 19885\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 0\\r\\n')\r\nchanged: [myserver] => {\r\n    \"changed\": true,\r\n    \"cmd\": [\r\n        \"lsb_release\",\r\n        \"-a\"\r\n    ],\r\n    \"delta\": \"0:00:00.032822\",\r\n    \"end\": \"2020-08-13 22:49:56.216500\",\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"_raw_params\": \"lsb_release -a\",\r\n            \"_uses_shell\": false,\r\n            \"argv\": null,\r\n            \"chdir\": null,\r\n            \"creates\": null,\r\n            \"executable\": null,\r\n            \"removes\": null,\r\n            \"stdin\": null,\r\n            \"stdin_add_newline\": true,\r\n            \"strip_empty_ends\": true,\r\n            \"warn\": true\r\n        }\r\n    },\r\n    \"rc\": 0,\r\n    \"start\": \"2020-08-13 22:49:56.183678\",\r\n    \"stderr\": \"\",\r\n    \"stderr_lines\": [],\r\n    \"stdout\": \"LSB Version:\\t:core-4.1-amd64:core-4.1-noarch\\nDistributor ID:\\tCentOS\\nDescription:\\tCentOS Linux release 7.8.2003 (Core)\\nRelease:\\t7.8.2003\\nCodename:\\tCore\",\r\n    \"stdout_lines\": [\r\n        \"LSB Version:\\t:core-4.1-amd64:core-4.1-noarch\",\r\n        \"Distributor ID:\\tCentOS\",\r\n        \"Description:\\tCentOS Linux release 7.8.2003 (Core)\",\r\n        \"Release:\\t7.8.2003\",\r\n        \"Codename:\\tCore\"\r\n    ]\r\n}\r\n\r\nTASK [myrole : debug] *****************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/myuser/vagrant/myrole/roles/myrole/tasks/main.yml:6\r\nok: [myserver] => {\r\n    \"msg\": \"ansible_distribution == CentOS\"\r\n}\r\n\r\nTASK [myrole : debug] *****************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/myuser/vagrant/myrole/roles/myrole/tasks/main.yml:9\r\nok: [myserver] => {\r\n    \"msg\": \"lsb_release == LSB Version:\\t:core-4.1-amd64:core-4.1-noarch\\nDistributor ID:\\tCentOS\\nDescription:\\tCentOS Linux release 7.8.2003 (Core)\\nRelease:\\t7.8.2003\\nCodename:\\tCore\"\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY RECAP *****************************************************************************************************************************************************************************************************************************************************************************\r\nmyserver : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71259", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71259/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71259/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71259/events", "html_url": "https://github.com/ansible/ansible/issues/71259", "id": 678345918, "node_id": "MDU6SXNzdWU2NzgzNDU5MTg=", "number": 71259, "title": "Warn when dependent role dir is empty", "user": {"login": "Lin-Buo-Ren", "id": 13408130, "node_id": "MDQ6VXNlcjEzNDA4MTMw", "avatar_url": "https://avatars3.githubusercontent.com/u/13408130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lin-Buo-Ren", "html_url": "https://github.com/Lin-Buo-Ren", "followers_url": "https://api.github.com/users/Lin-Buo-Ren/followers", "following_url": "https://api.github.com/users/Lin-Buo-Ren/following{/other_user}", "gists_url": "https://api.github.com/users/Lin-Buo-Ren/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lin-Buo-Ren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lin-Buo-Ren/subscriptions", "organizations_url": "https://api.github.com/users/Lin-Buo-Ren/orgs", "repos_url": "https://api.github.com/users/Lin-Buo-Ren/repos", "events_url": "https://api.github.com/users/Lin-Buo-Ren/events{/privacy}", "received_events_url": "https://api.github.com/users/Lin-Buo-Ren/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-13T10:56:10Z", "updated_at": "2020-08-18T15:24:46Z", "closed_at": "2020-08-18T15:24:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\n\r\nIn the case where:\r\n\r\n* Role A depends on Role B(dependency specified in Role A's meta/main.yml)\r\n* Role B is a Git submodule checked out in the Role A's source tree/playbook/roles/role_b.\r\n\r\nWhen the Role B submodule isn't checked out (thus Role A's source tree/playbook/roles/role_b is an empty directory) Role A's play runs swiftly instead of giving any warnings/errors regarding the useless/problematic role dependency, which hides the problem.\r\n\r\nIMO Ansible should at least give a warning when such cases occur.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nunsure\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.9\r\n  config file = /home/brlin/__REDACTED__/ansible.cfg\r\n  configured module search path = ['/home/brlin/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/brlin/.local/pipx/venvs/ansible/lib/python3.8/site-packages/ansible\r\n  executable location = /home/brlin/.local/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nANSIBLE_PIPELINING(/home/brlin/__REDACTED__/ansible.cfg) = False\r\nANSIBLE_SSH_ARGS(/home/brlin/__REDACTED__/ansible.cfg) = -C -o ControlMaster=auto -o ControlPersist=1d\r\nANSIBLE_SSH_CONTROL_PATH(/home/brlin/__REDACTED__/ansible.cfg) = %(directory)s/ansible-ssh-%%h-%%p-%%r\r\nANSIBLE_SSH_RETRIES(/home/brlin/__REDACTED__/ansible.cfg) = 3\r\nCACHE_PLUGIN(/home/brlin/__REDACTED__/ansible.cfg) = jsonfile\r\nCACHE_PLUGIN_CONNECTION(/home/brlin/__REDACTED__/ansible.cfg) = ./.cache/ansible-facts\r\nCACHE_PLUGIN_TIMEOUT(/home/brlin/__REDACTED__/ansible.cfg) = 86400\r\nDEFAULT_FORKS(/home/brlin/__REDACTED__/ansible.cfg) = 10\r\nDEFAULT_HOST_LIST(/home/brlin/__REDACTED__/ansible.cfg) = ['/home/brlin/__REDACTED__/inventory/remotehost']\r\nHOST_KEY_CHECKING(/home/brlin/__REDACTED__/ansible.cfg) = False\r\nINTERPRETER_PYTHON(/home/brlin/__REDACTED__/ansible.cfg) = auto\r\n\u00a0\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nOS: Ubuntu 20.04 amd64\r\nLocale: zh_TW.UTF-8\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n1. Create Role A in a Git repository\r\n1. Create Role B in another Git repository with the following task list:\r\n\r\n    ```yaml\r\n    # role_b/tasks/main.yml\r\n    - name:\r\n      debug:\r\n        msg: 'Role B is called'\r\n    ```\r\n\r\n1. Add Role B repository as Role A's submodule at Role A's source tree/playbooks/roles/role_b\r\n1. Add Role B as Role_A's dependency using:\r\n\r\n    <!--- Paste example playbooks or commands between quotes below -->\r\n    ```yaml\r\n    # role_a/meta/main.yml\r\n    dependencies:\r\n      - role: role_b\r\n    ```\r\n\r\n1. Clone Role A's repository to another directory, without cloning/checking out the Role B submodule\r\n1. Run playbook\r\n\r\n    ```yaml\r\n    # role_a/playbooks/reproduce.yml\r\n    - name: Reproduce bug\r\n      hosts: localhost\r\n      roles:\r\n        role: '{{ playbook_dir }}/..'\r\n    ```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nAnsible errors/warns because of suspicious empty role Role B\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\nAnsible runs playbook without errors/warnings.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71258", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71258/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71258/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71258/events", "html_url": "https://github.com/ansible/ansible/issues/71258", "id": 678345817, "node_id": "MDU6SXNzdWU2NzgzNDU4MTc=", "number": 71258, "title": "'get_uri' lacks 'creates'", "user": {"login": "hrw", "id": 185508, "node_id": "MDQ6VXNlcjE4NTUwOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/185508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hrw", "html_url": "https://github.com/hrw", "followers_url": "https://api.github.com/users/hrw/followers", "following_url": "https://api.github.com/users/hrw/following{/other_user}", "gists_url": "https://api.github.com/users/hrw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hrw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hrw/subscriptions", "organizations_url": "https://api.github.com/users/hrw/orgs", "repos_url": "https://api.github.com/users/hrw/repos", "events_url": "https://api.github.com/users/hrw/events{/privacy}", "received_events_url": "https://api.github.com/users/hrw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 593252542, "node_id": "MDU6TGFiZWw1OTMyNTI1NDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/net_tools", "name": "net_tools", "color": "4071a5", "default": false, "description": "Net-tools category"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-13T10:55:59Z", "updated_at": "2020-08-17T14:46:54Z", "closed_at": "2020-08-13T21:42:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n\r\nThere is 'get_uri' module to fetch files. But it fetch file every time. 'shell' module has 'creates' option to not be run again once it does it's job.\r\n\r\nSo maybe add 'creates' to 'get_uri' so it will be run once?\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nget_uri\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/hrw/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.3 (default, Jul 25 2020, 13:03:44) [GCC 8.3.0]\r\n\r\nansible 2.9.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/hrw/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.6.8 (default, Apr 16 2020, 01:42:12) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\n```\r\n2.9.6 on control host, 2.9.12 on target\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\ncontrol host: Debian 10 'buster'\r\ntarget host: CentOS 8\r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n    - name: fetch bazel 0.24.1 source\r\n      get_url:\r\n        url: \"https://github.com/bazelbuild/bazel/releases/download/0.24.1/bazel-0.24.1-dist.zip\"\r\n        dest: \"~\" \r\n        # creates: \"~/bazel-0.24.1-dist.zip\"\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n\r\nFile is fetched once and then not even tried.\r\n\r\n\r\n##### ACTUAL RESULTS\r\n\r\ntask is run on each playbook run", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71257", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71257/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71257/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71257/events", "html_url": "https://github.com/ansible/ansible/issues/71257", "id": 678325984, "node_id": "MDU6SXNzdWU2NzgzMjU5ODQ=", "number": 71257, "title": "`strftime` filter doesn't handle epoch as float", "user": {"login": "xenlo", "id": 4190073, "node_id": "MDQ6VXNlcjQxOTAwNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4190073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xenlo", "html_url": "https://github.com/xenlo", "followers_url": "https://api.github.com/users/xenlo/followers", "following_url": "https://api.github.com/users/xenlo/following{/other_user}", "gists_url": "https://api.github.com/users/xenlo/gists{/gist_id}", "starred_url": "https://api.github.com/users/xenlo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xenlo/subscriptions", "organizations_url": "https://api.github.com/users/xenlo/orgs", "repos_url": "https://api.github.com/users/xenlo/repos", "events_url": "https://api.github.com/users/xenlo/events{/privacy}", "received_events_url": "https://api.github.com/users/xenlo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-13T10:21:14Z", "updated_at": "2020-08-18T10:17:19Z", "closed_at": "2020-08-17T18:46:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### SUMMARY\r\n`strftime` filter through an error when it receive a float epoch as input value.\r\n```\r\nmsg: Invalid value for epoch value (1597253655.92744)\r\n```\r\n\r\nIt seems quite common to represent epoch with nano/milli seconds as float. It's even the what we found in the ansible fact `ansible_date_time.epoch` from a windows machine.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n- Plugin > filter > core > `strftime`\r\n  File: `ansible/plugins/filter/core.py`\r\n\r\n##### ANSIBLE VERSION\r\n```paste below\r\nansible 2.9.12\r\n  config file = /home/xenlo/Projects/438/etc/ansible.cfg\r\n  configured module search path = ['/home/xenlo/Projects/438/library']\r\n  ansible python module location = /home/xenlo/.virtualenvs/438/lib/python3.8/site-packages/ansible\r\n  executable location = /home/xenlo/.virtualenvs/438/bin/ansible\r\n  python version = 3.8.5 (default, Jul 31 2020, 00:00:00) [GCC 10.2.1 20200723 (Red Hat 10.2.1-1)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```paste below\r\nANSIBLE_SSH_ARGS(/home/xenlo/Projects/438/etc/ansible.cfg) = -C -o ControlMaster=auto -o ControlPersist=60s -o ServerAliveInterval=60\r\nCACHE_PLUGIN(/home/xenlo/Projects/438/etc/ansible.cfg) = jsonfile\r\nCACHE_PLUGIN_CONNECTION(/home/xenlo/Projects/438/etc/ansible.cfg) = $HOME/.ansible/facts/\r\nCACHE_PLUGIN_TIMEOUT(/home/xenlo/Projects/438/etc/ansible.cfg) = 3600\r\nCOLLECTIONS_PATHS(/home/xenlo/Projects/438/etc/ansible.cfg) = ['/home/xenlo/.ansible/collections', '/home/xenlo/Projects/438/collections']\r\nDEFAULT_ACTION_PLUGIN_PATH(env: ANSIBLE_ACTION_PLUGINS) = ['/home/xenlo/.virtualenvs/438/lib/python3.8/site-packages/ara/plugins/action']\r\nDEFAULT_CALLBACK_PLUGIN_PATH(env: ANSIBLE_CALLBACK_PLUGINS) = ['/home/xenlo/.virtualenvs/438/lib/python3.8/site-packages/ara/plugins/callback']\r\nDEFAULT_CALLBACK_WHITELIST(/home/xenlo/Projects/438/etc/ansible.cfg) = ['profile_tasks']\r\nDEFAULT_FILTER_PLUGIN_PATH(env: ANSIBLE_FILTER_PLUGINS) = ['/home/xenlo/Projects/438/plugins/filter']\r\nDEFAULT_GATHERING(/home/xenlo/Projects/438/etc/ansible.cfg) = smart\r\nDEFAULT_HOST_LIST(/home/xenlo/Projects/438/etc/ansible.cfg) = ['/home/xenlo/Projects/438/inventories/Z10', '/home/xenlo/Projects/438/inventories/setupenv']\r\nDEFAULT_LOG_PATH(/home/xenlo/Projects/438/etc/ansible.cfg) = /home/xenlo/.ansible/log/ansible.log\r\nDEFAULT_MODULE_PATH(env: ANSIBLE_LIBRARY) = ['/home/xenlo/Projects/438/library']\r\nDEFAULT_ROLES_PATH(env: ANSIBLE_ROLES_PATH) = ['/home/xenlo/Projects/438/roles.galaxy', '/home/xenlo/Projects/438/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/xenlo/Projects/438/etc/ansible.cfg) = yaml\r\nGALAXY_ROLE_SKELETON(env: ANSIBLE_GALAXY_ROLE_SKELETON) = /home/xenlo/Projects/438/etc/skel/default\r\nHOST_KEY_CHECKING(/home/xenlo/Projects/438/etc/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nIt can be simply reproduced by calling `strftime` with a float.\r\n```yaml\r\n- name: Print the nice date from epoch float\r\n  debug:\r\n    msg: \"Nice Date: {{ '%b %d %Y %H:%M:%S %Z' | strftime('1597253655.92744') }}\"\r\n```\r\nActually, in my use case, I use `ansible_date_time.epoch` fact from a Windows which returns a float with 5 decimal places.\r\n\r\n##### EXPECTED RESULTS\r\nHaving the `strftime` filter accpting a float and interpreting the decimals as seconds fractions.\r\n```\r\nTASK [pts-info-pdp : Print the nice date] *********************************************** \r\nok: [linux-srv-1] => \r\n  msg: 'Nice Date: Aug 12 2020 04:56:57 CEST'\r\n```\r\n\r\n##### ACTUAL RESULTS\r\nGetting a fatal result:\r\n```\r\nTASK [Print the nice date from Epoch] ***********************************************\r\nfatal: [winserv1]: FAILED! => \r\n  msg: Invalid value for epoch value (1597245276.66182)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71253", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71253/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71253/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71253/events", "html_url": "https://github.com/ansible/ansible/issues/71253", "id": 678283222, "node_id": "MDU6SXNzdWU2NzgyODMyMjI=", "number": 71253, "title": "aws_s3 module error: UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 10", "user": {"login": "4smirnovsn", "id": 58071994, "node_id": "MDQ6VXNlcjU4MDcxOTk0", "avatar_url": "https://avatars1.githubusercontent.com/u/58071994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/4smirnovsn", "html_url": "https://github.com/4smirnovsn", "followers_url": "https://api.github.com/users/4smirnovsn/followers", "following_url": "https://api.github.com/users/4smirnovsn/following{/other_user}", "gists_url": "https://api.github.com/users/4smirnovsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/4smirnovsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/4smirnovsn/subscriptions", "organizations_url": "https://api.github.com/users/4smirnovsn/orgs", "repos_url": "https://api.github.com/users/4smirnovsn/repos", "events_url": "https://api.github.com/users/4smirnovsn/events{/privacy}", "received_events_url": "https://api.github.com/users/4smirnovsn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-13T09:12:48Z", "updated_at": "2020-08-13T09:16:45Z", "closed_at": "2020-08-13T09:16:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nCan't to donwload file from s3 bucket using aws_s3 module\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\naws_s3 module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.2\r\n  config file = None\r\n  configured module search path = [u'/home/smirnov-sn/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/smirnov-sn/.local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/smirnov-sn/.local/bin/ansible\r\n  python version = 2.7.16 (default, Oct 10 2019, 22:02:15) [GCC 8.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nNo Configuration changes.\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nLinux smirnov-sn-m 4.19.0-10-amd64 #1 SMP Debian 4.19.132-1 (2020-07-24) x86_64 GNU/Linux\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n```\r\n- name: Download files from S3\r\n  aws_s3:\r\n    mode: get\r\n    aws_access_key: \"{{ AWS_ACCESS_KEY }}\"\r\n    aws_secret_key: \"{{ AWS_SECRET_KEY }}\"\r\n    bucket: \"{{ bucketName }}\"\r\n    object: \"mt_config/{{CONFIGURATION}}/cfgs.7z\"\r\n    dest: \"config/cfgs.7z\"\r\n  delegate_to: 127.0.0.1\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\ncfgs.7z file downloaded to config/cfgs.7z\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/home/smirnov-sn/.ansible/tmp/ansible-tmp-1597309108.07-17473107662010/AnsiballZ_aws_s3.py\", line 102, in <module>\r\n    _ansiballz_main()\r\n  File \"/home/smirnov-sn/.ansible/tmp/ansible-tmp-1597309108.07-17473107662010/AnsiballZ_aws_s3.py\", line 94, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/home/smirnov-sn/.ansible/tmp/ansible-tmp-1597309108.07-17473107662010/AnsiballZ_aws_s3.py\", line 40, in invoke_module\r\n    runpy.run_module(mod_name='ansible.modules.cloud.amazon.aws_s3', init_globals=None, run_name='__main__', alter_sys=True)\r\n  File \"/usr/lib/python2.7/runpy.py\", line 188, in run_module\r\n    fname, loader, pkg_name)\r\n  File \"/usr/lib/python2.7/runpy.py\", line 82, in _run_module_code\r\n    mod_name, mod_fname, mod_loader, pkg_name)\r\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\r\n    exec code in run_globals\r\n  File \"/tmp/ansible_aws_s3_payload_cIWdPD/ansible_aws_s3_payload.zip/ansible/modules/cloud/amazon/aws_s3.py\", line 915, in <module>\r\n  File \"/tmp/ansible_aws_s3_payload_cIWdPD/ansible_aws_s3_payload.zip/ansible/modules/cloud/amazon/aws_s3.py\", line 792, in main\r\n  File \"/tmp/ansible_aws_s3_payload_cIWdPD/ansible_aws_s3_payload.zip/ansible/modules/cloud/amazon/aws_s3.py\", line 571, in download_s3file\r\n  File \"/home/smirnov-sn/.local/lib/python2.7/site-packages/boto3/s3/inject.py\", line 172, in download_file\r\n    extra_args=ExtraArgs, callback=Callback)\r\n  File \"/home/smirnov-sn/.local/lib/python2.7/site-packages/boto3/s3/transfer.py\", line 325, in __exit__\r\n    self._manager.__exit__(*args)\r\n  File \"/home/smirnov-sn/.local/lib/python2.7/site-packages/s3transfer/manager.py\", line 532, in __exit__\r\n    cancel_msg = six.text_type(exc_value)\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 10: ordinal not in range(128)\r\n\r\nfatal: [172.24.17.105 -> 127.0.0.1]: FAILED! => {\r\n    \"changed\": false, \r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/home/smirnov-sn/.ansible/tmp/ansible-tmp-1597309108.07-17473107662010/AnsiballZ_aws_s3.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/home/smirnov-sn/.ansible/tmp/ansible-tmp-1597309108.07-17473107662010/AnsiballZ_aws_s3.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/home/smirnov-sn/.ansible/tmp/ansible-tmp-1597309108.07-17473107662010/AnsiballZ_aws_s3.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.cloud.amazon.aws_s3', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/lib/python2.7/runpy.py\\\", line 188, in run_module\\n    fname, loader, pkg_name)\\n  File \\\"/usr/lib/python2.7/runpy.py\\\", line 82, in _run_module_code\\n    mod_name, mod_fname, mod_loader, pkg_name)\\n  File \\\"/usr/lib/python2.7/runpy.py\\\", line 72, in _run_code\\n    exec code in run_globals\\n  File \\\"/tmp/ansible_aws_s3_payload_cIWdPD/ansible_aws_s3_payload.zip/ansible/modules/cloud/amazon/aws_s3.py\\\", line 915, in <module>\\n  File \\\"/tmp/ansible_aws_s3_payload_cIWdPD/ansible_aws_s3_payload.zip/ansible/modules/cloud/amazon/aws_s3.py\\\", line 792, in main\\n  File \\\"/tmp/ansible_aws_s3_payload_cIWdPD/ansible_aws_s3_payload.zip/ansible/modules/cloud/amazon/aws_s3.py\\\", line 571, in download_s3file\\n  File \\\"/home/smirnov-sn/.local/lib/python2.7/site-packages/boto3/s3/inject.py\\\", line 172, in download_file\\n    extra_args=ExtraArgs, callback=Callback)\\n  File \\\"/home/smirnov-sn/.local/lib/python2.7/site-packages/boto3/s3/transfer.py\\\", line 325, in __exit__\\n    self._manager.__exit__(*args)\\n  File \\\"/home/smirnov-sn/.local/lib/python2.7/site-packages/s3transfer/manager.py\\\", line 532, in __exit__\\n    cancel_msg = six.text_type(exc_value)\\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 10: ordinal not in range(128)\\n\", \r\n    \"module_stdout\": \"\", \r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \r\n    \"rc\": 1\r\n}\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71249", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71249/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71249/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71249/events", "html_url": "https://github.com/ansible/ansible/issues/71249", "id": 678234953, "node_id": "MDU6SXNzdWU2NzgyMzQ5NTM=", "number": 71249, "title": "Problem with virtual gorups and play_hosts", "user": {"login": "inf0rmix", "id": 4335210, "node_id": "MDQ6VXNlcjQzMzUyMTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4335210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inf0rmix", "html_url": "https://github.com/inf0rmix", "followers_url": "https://api.github.com/users/inf0rmix/followers", "following_url": "https://api.github.com/users/inf0rmix/following{/other_user}", "gists_url": "https://api.github.com/users/inf0rmix/gists{/gist_id}", "starred_url": "https://api.github.com/users/inf0rmix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inf0rmix/subscriptions", "organizations_url": "https://api.github.com/users/inf0rmix/orgs", "repos_url": "https://api.github.com/users/inf0rmix/repos", "events_url": "https://api.github.com/users/inf0rmix/events{/privacy}", "received_events_url": "https://api.github.com/users/inf0rmix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 835286067, "node_id": "MDU6TGFiZWw4MzUyODYwNjc=", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.6", "name": "affects_2.6", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.6"}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-13T07:57:59Z", "updated_at": "2020-08-18T15:20:13Z", "closed_at": "2020-08-18T15:20:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear ansible group,\r\n\r\nI have a specific problem with virtual groups and I cannot find any example why this is not a bug:\r\n\r\nassume we have a playbook which create a virtual group called Apache when a server is in a dedicated group in ansible_hosts:\r\n\r\n##playbook yml part: ###\r\n```\r\n- name: \"Groups: add host to Apache group, because host is in a specific group\"\r\n  add_host:\r\n    name: \"{{ item }}\"\r\n    groups: \"Apache\"\r\n  when: \"'webserverxy' in group_names or 'webserverzz' in group_names\"\r\n  changed_when: False\r\n  with_items: \"{{ play_hosts }}\"\r\n  tags:\r\n    - groups\r\n    - apache\r\n    - always\r\n```\r\n###\r\n\r\nnow I have a group called webserverxy which has server1:\r\n```\r\n[webserverxy]\r\nserver1\r\n```\r\nand I run this playbook with two hosts, one of them is not in this group (server2), both hosts get added to this virtual group:\r\n```\r\nTASK [groups : Groups: add host to Apache group, because host is in  as specific group] *******\r\nok: [server1 => (item=server2)\r\nok: [server1 => (item=server1)\r\n```\r\nhow to cope with this situation ?\r\n\r\nin my current scenario, I get our haproxy server added to the apache virtual group , when I run the playbook for one webserver and the haproxy host like:\r\n```\r\nansible-playbook wb_staging_all.yml --vault-password-file=/home/mfenner/vaultpw --limit metrics2.x.x,haproxy2.x.x  --tags groups,debug\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71248", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71248/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71248/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71248/events", "html_url": "https://github.com/ansible/ansible/issues/71248", "id": 678193395, "node_id": "MDU6SXNzdWU2NzgxOTMzOTU=", "number": 71248, "title": "custom connection plugin fail on windows setup task(collect facts) ", "user": {"login": "lihlcnkr", "id": 5908778, "node_id": "MDQ6VXNlcjU5MDg3Nzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5908778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lihlcnkr", "html_url": "https://github.com/lihlcnkr", "followers_url": "https://api.github.com/users/lihlcnkr/followers", "following_url": "https://api.github.com/users/lihlcnkr/following{/other_user}", "gists_url": "https://api.github.com/users/lihlcnkr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lihlcnkr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lihlcnkr/subscriptions", "organizations_url": "https://api.github.com/users/lihlcnkr/orgs", "repos_url": "https://api.github.com/users/lihlcnkr/repos", "events_url": "https://api.github.com/users/lihlcnkr/events{/privacy}", "received_events_url": "https://api.github.com/users/lihlcnkr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-13T06:39:50Z", "updated_at": "2020-08-17T18:45:12Z", "closed_at": "2020-08-17T17:12:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n##### SUMMARY\r\ncustom connection plugin fail on windows setup module(collect ansible facts) where windows node PowerShell version is 4.0. \r\nIt's OK with using winrm connection Or after upgrade PowerShell version to 5.1 using custom connection.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nwindows setup module\r\n\r\n##### ANSIBLE VERSION\r\n```2.9.9\r\n```\r\n\r\n##### CONFIGURATION\r\n```ANSIBLE_SSH_ARGS(/etc/ansible/ansible.cfg) = -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o IdentitiesOnly=yes\r\nDEFAULT_CONNECTION_PLUGIN_PATH(/etc/ansible/ansible.cfg) = ['/gampkgs/data/repository/ansible_connection']\r\nDEFAULT_MODULE_PATH(/etc/ansible/ansible.cfg) = ['/gampkgs/data/repository/ansible_module']\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = ['/gampkgs/data/repository/template']\r\nDEFAULT_STRATEGY(/etc/ansible/ansible.cfg) = free\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nWindows 8.1 / PowerShell version 4.0\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n```- hosts: all\r\n  tasks:\r\n  - name: setup\r\n    setup:\r\n```\r\n\r\n##### EXPECTED RESULTS\r\ncollect ansible fact OK.\r\n\r\n\r\n##### ACTUAL RESULTS\r\n```ansible-playbook 2.9.9                                                                                                                                                                                                                         config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/gampkgs/data/repository/ansible_module']\r\n  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible-playbook\r\n  python version = 3.6.8 (default, Dec 25 2018, 00:00:00) [GCC 4.8.4]\r\nUsing /etc/ansible/ansible.cfg as config file                                                                                                                                                                                                setting up inventory plugins\r\nhost_list declined parsing /tmp/inventory_8638 as it did not pass its verify_file() method\r\nscript declined parsing /tmp/inventory_8638 as it did not pass its verify_file() method\r\nauto declined parsing /tmp/inventory_8638 as it did not pass its verify_file() method\r\nParsed /tmp/inventory_8638 inventory source with ini plugin\r\nLoading callback plugin default of type stdout, v2.0 from /usr/local/lib/python3.6/dist-packages/ansible/plugins/callback/default.py\r\n\r\nPLAYBOOK: playbook_7629.yml *****************************************************************************************************************************************************************************************************************Positional arguments: /tmp/playbook_7629.yml\r\nverbosity: 5\r\nconnection: smart\r\nconnection: smart\r\ntimeout: 10\r\nbecome_method: sudo\r\ntags: ('all',)\r\ninventory: ('/tmp/inventory_8638',)                                                                                                                                                                                                          forks: 5\r\n1 plays in /tmp/playbook_7629.yml\r\n\r\nPLAY [all] *******************************************************************************************************************************************************************************************************\r\n\r\nMETA: ran handlers\r\n<10.110.110.121> ESTABLISH LOCAL CONNECTION FOR USER: admin\r\nin gam_agent.exec_command()\r\ndone with gam_agent.exec_command()\r\nUsing module file /usr/local/lib/python3.6/dist-packages/ansible/modules/windows/setup.ps1\r\n<10.110.110.121> PUT /root/.ansible/tmp/ansible-local-55664bou091i/tmpfy5f9j4n TO C:\\Windows\\TEMP\\ansible-tmp-1597279453.932639-5575-55013725061314\\AnsiballZ_setup.ps1\r\nin gam_agent.exec_command()\r\ndone with gam_agent.exec_command()\r\nin gam_agent.exec_command()\r\ndone with gam_agent.exec_command()\r\n\r\nTASK [setup] ********************************************************************************************************************************************************************************************************************************task path: /tmp/playbook_7629.yml:5\r\nfatal: [10.110.110.121]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"{\\\"changed\\\":false,\\\"ansible_facts\\\":{\\\"ansible_ip_addresses\\\":[\\\"100.110.110.121\\\",\\\"fe80::4c24:55cf:7173:abfe\\\",\\\"fd17:917c:5412::121\\\",\\\"10.110.110.121\\\",\\\"fe80::38b1:4980:eb42:2171\\\",\\\"fd55:7067:3cf8:0:b07b:fd11:2dac:29f2\\\",\\\"fd55:7067:3cf8:0:38b1:4980:eb42:2171\\\",\\\"fd55:7067:3cf8::121\\\",\\\"10.120.110.121\\\",\\\"fe80::c141:eaa1:c725:319a\\\",\\\"fd4c:6363:b4db:0:687d:6383:f6db:85e8\\\",\\\"fdc4:2083:c94a::121\\\",\\\"fd4c:6363:b4db:0:c141:eaa1:c725:319a\\\",\\\"200.110.110.121\\\",\\\"fe80::14ec:e9ef:50f3:1a1d\\\",\\\"fd2c:90e2:c852::121\\\"],\\\"ansible_windows_domain_role\\\":\\\"Stand-alone workstation\\\",\\\"ansible_user_gecos\\\":\\\"\\\",\\\"ansible_distribution_major_version\\\":\\\"6\\\",\\\"ansible_os_name\\\":\\\"Microsoft Windows 8.1 Enterprise KN\\\",\\\"ansible_system_description\\\":\\\"\\\",\\\"ansible_machine_id\\\":\\\"S-1-5-21-2857793023-2786916522-3719903234\\\",\\\"ansible_product_serial\\\":\\\"VMware-42 39 49 52 2d 87 05 2e-17 24 47 e0 19 44 0b b1\\\",\\\"ansible_system_vendor\\\":\\\"VMware, Inc.\\\",\\\"ansible_owner_contact\\\":\\\"\\\",\\\"ansible_user_id\\\":\\\"MDRMMW13$\\\",\\\"ansible_date_time\\\":{\\\"time\\\":\\\"09:45:42\\\",\\\"date\\\":\\\"2020-08-13\\\",\\\"second\\\":\\\"42\\\",\\\"tz\\\":\\\"Korea Standard Time\\\",\\\"iso8601_micro\\\":\\\"2020-08-13T00:45:42.358189Z\\\",\\\"iso8601_basic_short\\\":\\\"20200813T094542\\\",\\\"minute\\\":\\\"45\\\",\\\"day\\\":\\\"13\\\",\\\"weekday\\\":\\\"Thursday\\\",\\\"iso8601\\\":\\\"2020-08-13T00:45:42Z\\\",\\\"tz_offset\\\":\\\"+09:00\\\",\\\"iso8601_basic\\\":\\\"20200813T094542358189\\\",\\\"epoch\\\":\\\"1597311942.35819\\\",\\\"weekday_number\\\":\\\"4\\\",\\\"hour\\\":\\\"09\\\",\\\"year\\\":\\\"2020\\\",\\\"month\\\":\\\"08\\\",\\\"weeknumber\\\":\\\"32\\\"},\\\"ansible_user_sid\\\":\\\"S-1-5-18\\\",\\\"ansible_powershell_version\\\":4,\\\"ansible_processor\\\":[\\\"GenuineIntel\\\",\\\"Intel(R) Xeon(R) CPU E7- 4860  @ 2.27GHz\\\",\\\"GenuineIntel\\\",\\\"Intel(R) Xeon(R) CPU E7- 4860  @ 2.27GHz\\\",\\\"GenuineIntel\\\",\\\"Intel(R) Xeon(R) CPU E7- 4860  @ 2.27GHz\\\",\\\"GenuineIntel\\\",\\\"Intel(R) Xeon(R) CPU E7- 4860  @ 2.27GHz\\\"],\\\"ansible_domain\\\":\\\"\\\",\\\"ansible_uptime_seconds\\\":55703306,\\\"ansible_architecture\\\":\\\"32\ube44\ud2b8\\\",\\\"ansible_distribution_version\\\":\\\"6.3.9600.0\\\",\\\"ansible_windows_domain_member\\\":false,\\\"ansible_swaptotal_mb\\\":0,\\\"ansible_hostname\\\":\\\"MDRMMW13\\\",\\\"ansible_os_family\\\":\\\"Windows\\\",\\\"ansible_virtualization_role\\\":\\\"guest\\\",\\\"ansible_netbios_name\\\":\\\"MDRMMW13\\\",\\\"ansible_processor_count\\\":2,\\\"ansible_os_product_type\\\":\\\"workstation\\\",\\\"ansible_user_dir\\\":\\\"C:\\\\\\\\Windows\\\\\\\\system32\\\\\\\\config\\\\\\\\systemprofile\\\",\\\"ansible_bios_version\\\":\\\"6.00\\\",\\\"ansible_virtualization_type\\\":\\\"VMware\\\",\\\"ansible_lastboot\\\":\\\"2018-11-07 16:37:19Z\\\",\\\"ansible_distribution\\\":\\\"Microsoft Windows 8.1 Enterprise KN\\\",\\\"ansible_bios_date\\\":\\\"04-05-2016\\\",\\\"ansible_processor_cores\\\":2,\\\"ansible_product_name\\\":\\\"VMware Virtual Platform\\\",\\\"ansible_interfaces\\\":[{\\\"connection_name\\\":\\\"HB-100.110.110.121\\\",\\\"interface_name\\\":\\\"vmxnet3 Ethernet Adapter\\\",\\\"macaddress\\\":\\\"00:50:56:B9:86:10\\\",\\\"default_gateway\\\":null,\\\"interface_index\\\":3,\\\"dns_domain\\\":null},{\\\"connection_name\\\":\\\"Public-10.110.110.121\\\",\\\"interface_name\\\":\\\"vmxnet3 Ethernet Adapter #2\\\",\\\"macaddress\\\":\\\"00:50:56:B9:B4:5D\\\",\\\"default_gateway\\\":\\\"10.110.0.1\\\",\\\"interface_index\\\":4,\\\"dns_domain\\\":null},{\\\"connection_name\\\":\\\"Public-10.120.110.121\\\",\\\"interface_name\\\":\\\"vmxnet3 Ethernet Adapter #3\\\",\\\"macaddress\\\":\\\"00:50:56:B9:99:9A\\\",\\\"default_gateway\\\":\\\"10.120.0.1\\\",\\\"interface_index\\\":5,\\\"dns_domain\\\":null},{\\\"connection_name\\\":\\\"MR-200.110.110.121\\\",\\\"interface_name\\\":\\\"vmxnet3 Ethernet Adapter #4\\\",\\\"macaddress\\\":\\\"00:50:56:B9:07:F9\\\",\\\"default_gateway\\\":null,\\\"interface_index\\\":6,\\\"dns_domain\\\":null}],\\\"ansible_processor_threads_per_core\\\":1,\\\"ansible_memtotal_mb\\\":3072,\\\"ansible_processor_vcpus\\\":4,\\\"module_setup\\\":true,\\\"ansible_nodename\\\":\\\"MDRMMW13\\\",\\\"ansible_fqdn\\\":\\\"MDRMMW13\\\",\\\"gather_subset\\\":[\\\"all\\\"],\\\"ansible_kernel\\\":\\\"6.3.9600.0\\\",\\\"ansible_env\\\":{\\\"PROCESSOR_IDENTIFIER\\\":\\\"x86 Family 6 Model 47 Stepping 2, GenuineIntel\\\",\\\"ComSpec\\\":\\\"C:\\\\\\\\Windows\\\\\\\\system32\\\\\\\\cmd.exe\\\",\\\"USERNAME\\\":\\\"MDRMMW13$\\\",\\\"LOCALAPPDATA\\\":\\\"C:\\\\\\\\Windows\\\\\\\\system32\\\\\\\\config\\\\\\\\systemprofile\\\\\\\\AppData\\\\\\\\Local\\\",\\\"Path\\\":\\\"c:\\\\\\\\Program Files\\\\\\\\gam_agent\\\\\\\\jre\\\\\\\\bin;C:\\\\\\\\Windows\\\\\\\\system32;C:\\\\\\\\Windows;C:\\\\\\\\Windows\\\\\\\\System32\\\\\\\\Wbem;C:\\\\\\\\Windows\\\\\\\\System32\\\\\\\\WindowsPowerShell\\\\\\\\v1.0\\\\\\\\;C:\\\\\\\\opscode\\\\\\\\chef\\\\\\\\bin\\\\\\\\;C:/opscode/chef/embedded/bin;C:/opscode/chef/embedded/bin;C:\\\\\\\\Program Files\\\\\\\\gam_agent\\\\\\\\lib;\\\",\\\"SystemRoot\\\":\\\"C:\\\\\\\\Windows\\\",\\\"ALLUSERSPROFILE\\\":\\\"C:\\\\\\\\ProgramData\\\",\\\"USERDOMAIN\\\":\\\"WORKGROUP\\\",\\\"FP_NO_HOST_CHECK\\\":\\\"NO\\\",\\\"USERPROFILE\\\":\\\"C:\\\\\\\\Windows\\\\\\\\system32\\\\\\\\config\\\\\\\\systemprofile\\\",\\\"OS\\\":\\\"Windows_NT\\\",\\\"PSModulePath\\\":\\\"WindowsPowerShell\\\\\\\\Modules;C:\\\\\\\\Program Files\\\\\\\\WindowsPowerShell\\\\\\\\Modules;C:\\\\\\\\Windows\\\\\\\\system32\\\\\\\\WindowsPowerShell\\\\\\\\v1.0\\\\\\\\Modules\\\",\\\"PROMPT\\\":\\\"$P$G\\\",\\\"PSExecutionPolicyPreference\\\":\\\"Unrestricted\\\",\\\"SystemDrive\\\":\\\"C:\\\",\\\"TMP\\\":\\\"C:\\\\\\\\Windows\\\\\\\\TEMP\\\",\\\"ProgramFiles\\\":\\\"C:\\\\\\\\Program Files\\\",\\\"PROCESSOR_LEVEL\\\":\\\"6\\\",\\\"COMPUTERNAME\\\":\\\"MDRMMW13\\\",\\\"NUMBER_OF_PROCESSORS\\\":\\\"4\\\",\\\"PUBLIC\\\":\\\"C:\\\\\\\\Users\\\\\\\\Public\\\",\\\"CommonProgramFiles\\\":\\\"C:\\\\\\\\Program Files\\\\\\\\Common Files\\\",\\\"PROCESSOR_REVISION\\\":\\\"2f02\\\",\\\"APPDATA\\\":\\\"C:\\\\\\\\Windows\\\\\\\\system32\\\\\\\\config\\\\\\\\systemprofile\\\\\\\\AppData\\\\\\\\Roaming\\\",\\\"ProgramData\\\":\\\"C:\\\\\\\\ProgramData\\\",\\\"PROCESSOR_ARCHITECTURE\\\":\\\"x86\\\",\\\"windir\\\":\\\"C:\\\\\\\\Windows\\\",\\\"PATHEXT\\\":\\\".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL\\\",\\\"TEMP\\\":\\\"C:\\\\\\\\Windows\\\\\\\\TEMP\\\"},\\\"ansible_windows_domain\\\":\\\"WORKGROUP\\\",\\\"ansible_reboot_pending\\\":true,\\\"ansible_system\\\":\\\"Win32NT\\\",\\\"ansible_owner_name\\\":\\\"Windows User\\\"}}\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n    \"rc\": 1\r\n}\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************10.110.110.121             : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n```\r\n\r\nthe following error occurred after run command \"AnsiballZ_setup.ps1\" script manually:\r\n\r\n```\r\nThe Win32 internal error \"A device attached to the system is not functioning\" 0x1F occurred when writing console output buffer at current cursor position. Contact Microsoft Support Services.\r\n    + CategoryInfo          : WriteError: (:) [out-lineoutput], HostException\r\n    + FullyQualifiedErrorId : WriteConsole,Microsoft.PowerShell.Commands.OutLineOutputCommand\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71237", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71237/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71237/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71237/events", "html_url": "https://github.com/ansible/ansible/issues/71237", "id": 677913992, "node_id": "MDU6SXNzdWU2Nzc5MTM5OTI=", "number": 71237, "title": "Unable to delete files using ansible shell module", "user": {"login": "rohit-devops-test", "id": 50293202, "node_id": "MDQ6VXNlcjUwMjkzMjAy", "avatar_url": "https://avatars0.githubusercontent.com/u/50293202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohit-devops-test", "html_url": "https://github.com/rohit-devops-test", "followers_url": "https://api.github.com/users/rohit-devops-test/followers", "following_url": "https://api.github.com/users/rohit-devops-test/following{/other_user}", "gists_url": "https://api.github.com/users/rohit-devops-test/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohit-devops-test/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohit-devops-test/subscriptions", "organizations_url": "https://api.github.com/users/rohit-devops-test/orgs", "repos_url": "https://api.github.com/users/rohit-devops-test/repos", "events_url": "https://api.github.com/users/rohit-devops-test/events{/privacy}", "received_events_url": "https://api.github.com/users/rohit-devops-test/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-12T19:09:43Z", "updated_at": "2020-08-12T19:11:12Z", "closed_at": "2020-08-12T19:11:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nI am unable to delete the files using ansible shell module. If I run the command(rm -rf) directly on linux server then it is deleting the files but the same is not working from shell module.\r\nMy palybook is not throwing any error and task is shown completed successfully but in actual files are not getting deleted.\r\n\r\nHere is my playbook:- \r\n`\r\n- hosts: myhost\r\n  become: yes\r\n  gather_facts: no\r\n  user: ansible\r\n  vars:\r\n   ansible_become_password: 'lk121'\r\n  tasks:\r\n   - set_fact:\r\n      var_01: /home/guj/bang\r\n   - shell: rm -rf \"{{ item }}\"\r\n     with_items:\r\n      - \"{{var_01}}/servers/*/logs/access*log*\"\r\n      - \"{{var_01}}/servers/*/logs/*log*\"\r\n      - \"{{var_01}}/servers/*/tmp\"\r\n      - \"{{var_01}}/servers/*/cache\"\r\n     register: del_var_01_files\r\n     delegate_to: guj01_machine\r\n\r\n`\r\n\r\nPlease help me on this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71234", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71234/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71234/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71234/events", "html_url": "https://github.com/ansible/ansible/issues/71234", "id": 677809323, "node_id": "MDU6SXNzdWU2Nzc4MDkzMjM=", "number": 71234, "title": "lookup plugin ignores 'when' condition", "user": {"login": "kidmis", "id": 10752184, "node_id": "MDQ6VXNlcjEwNzUyMTg0", "avatar_url": "https://avatars1.githubusercontent.com/u/10752184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kidmis", "html_url": "https://github.com/kidmis", "followers_url": "https://api.github.com/users/kidmis/followers", "following_url": "https://api.github.com/users/kidmis/following{/other_user}", "gists_url": "https://api.github.com/users/kidmis/gists{/gist_id}", "starred_url": "https://api.github.com/users/kidmis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kidmis/subscriptions", "organizations_url": "https://api.github.com/users/kidmis/orgs", "repos_url": "https://api.github.com/users/kidmis/repos", "events_url": "https://api.github.com/users/kidmis/events{/privacy}", "received_events_url": "https://api.github.com/users/kidmis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-12T16:04:45Z", "updated_at": "2020-08-13T07:27:18Z", "closed_at": "2020-08-12T16:27:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nTask with any lookup plugin (query/lookup/with_dict) executes even if it must be ignored due to when condition, which cause the whole playbook failure\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nlookup plugin\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.12\r\n  config file = /home/kidmis/Projects/PBN/git/ansible/ansible.cfg\r\n  configured module search path = ['/home/kidmis/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/kidmis/Projects/PBN/git/ansible/lib/python3.8/site-packages/ansible\r\n  executable location = /home/kidmis/Projects/PBN/git/ansible/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDEFAULT_BECOME(/home/kidmis/Projects/PBN/git/ansible/ansible.cfg) = True\r\nDEFAULT_FORKS(/home/kidmis/Projects/PBN/git/ansible/ansible.cfg) = 1\r\nDEFAULT_PRIVATE_KEY_FILE(/home/kidmis/Projects/PBN/git/ansible/ansible.cfg) = /home/kidmis/.ssh/aws_id\r\nHOST_KEY_CHECKING(/home/kidmis/Projects/PBN/git/ansible/ansible.cfg) = False\r\nINTERPRETER_PYTHON(/home/kidmis/Projects/PBN/git/ansible/ansible.cfg) = /usr/bin/python3\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nLinux kislitsyn-pc 5.4.0-42-generic #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\nDistribution: Ubuntu 20.04.1 LTS\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nTo reproduce the issue:\r\n1) save example code into test.yml file\r\n2) run the following command: **_ansible-playbook -i '127.0.0.1,' test.yml_**\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: \"lookup test\"\r\n  hosts: all\r\n  gather_facts: False\r\n  tasks:\r\n    - name: \"define string object\"\r\n      set_fact:\r\n        obj: '{\"json\": {\"host\": [], \"status\": \"SUCCESS\", \"total_hosts\": 0}}'\r\n        # obj: '{\"json\": {\"host\": [{\"1\":\"host1\",\"2\":\"host2\"}], \"status\": \"SUCCESS\", \"total_hosts\": 2}}'\r\n\r\n    - name: \"convert string to json\"\r\n      set_fact:\r\n        js_obj: \"{{obj|from_json}}\"\r\n\r\n    - name: \"show json\"\r\n      debug:\r\n        msg: \"{{js_obj.json}}\"\r\n\r\n    - name: \"print dictionary values if exist\"\r\n      block:\r\n      - name: \"check if block executes\"\r\n        debug:\r\n          msg: \"{{js_obj.json.host.0}}\"\r\n\r\n      - name: \"list values\"\r\n        debug:\r\n          msg: '{{item.value}}'\r\n        loop: \"{{ q('dict', js_obj.json.host.0)}}\"\r\n      when: js_obj.json.total_hosts > 0\r\n      become: no\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nPLAY [lookup test] *************************************************************************************************************************************************\r\n\r\nTASK [define string object] ****************************************************************************************************************************************\r\nok: [127.0.0.1]\r\n\r\nTASK [convert string to json] **************************************************************************************************************************************\r\nok: [127.0.0.1]\r\n\r\nTASK [show json] ***************************************************************************************************************************************************\r\nok: [127.0.0.1] => {\r\n    \"msg\": {\r\n        \"host\": [],\r\n        \"status\": \"SUCCESS\",\r\n        \"total_hosts\": 0\r\n    }\r\n}\r\n\r\nTASK [check if block skip] *****************************************************************************************************************************************\r\nskipping: [127.0.0.1]\r\n\r\nTASK [list values] *************************************************************************************************************************************************\r\nskipping: [127.0.0.1]                                                                                                                         \r\n\r\nPLAY RECAP *********************************************************************************************************************************************************\r\n127.0.0.1                  : ok=3    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nansible-playbook 2.9.12\r\n  config file = /home/kidmis/Projects/PBN/git/ansible/ansible.cfg\r\n  configured module search path = ['/home/kidmis/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/kidmis/Projects/PBN/git/ansible/lib/python3.8/site-packages/ansible\r\n  executable location = /home/kidmis/Projects/PBN/git/ansible/bin/ansible-playbook\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\nUsing /home/kidmis/Projects/PBN/git/ansible/ansible.cfg as config file\r\nsetting up inventory plugins\r\nSet default localhost to 127.0.0.1\r\nParsed 127.0.0.1, inventory source with host_list plugin\r\nLoading callback plugin default of type stdout, v2.0 from /home/kidmis/Projects/PBN/git/ansible/lib/python3.8/site-packages/ansible/plugins/callback/default.py\r\n\r\nPLAYBOOK: Untitled.yml *********************************************************************************************************************************************************************************************************************\r\nPositional arguments: /home/kidmis/Desktop/Untitled.yml\r\nverbosity: 4\r\nprivate_key_file: /home/kidmis/Dropbox/worksync/.ssh/aws_id\r\nconnection: smart\r\ntimeout: 10\r\nbecome: True\r\nbecome_method: sudo\r\ntags: ('all',)\r\ninventory: ('127.0.0.1,',)\r\nforks: 1\r\n1 plays in /home/kidmis/Desktop/Untitled.yml\r\n\r\nPLAY [lookup test] *************************************************************************************************************************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [define string object] ****************************************************************************************************************************************************************************************************************\r\ntask path: /home/kidmis/Desktop/Untitled.yml:6\r\nok: [127.0.0.1] => {\r\n    \"ansible_facts\": {\r\n        \"obj\": \"{\\\"json\\\": {\\\"host\\\": [], \\\"status\\\": \\\"SUCCESS\\\", \\\"total_hosts\\\": 0}}\"\r\n    },\r\n    \"changed\": false\r\n}\r\n\r\nTASK [convert string to json] **************************************************************************************************************************************\r\ntask path: /home/kidmis/Desktop/Untitled.yml:11\r\nok: [127.0.0.1] => {\r\n    \"ansible_facts\": {\r\n        \"js_obj\": {\r\n            \"json\": {\r\n                \"host\": [],\r\n                \"status\": \"SUCCESS\",\r\n                \"total_hosts\": 0\r\n            }\r\n        }\r\n    },\r\n    \"changed\": false\r\n}\r\n\r\nTASK [show json] ***************************************************************************************************************************************************\r\ntask path: /home/kidmis/Desktop/Untitled.yml:15\r\nok: [127.0.0.1] => {\r\n    \"msg\": {\r\n        \"host\": [],\r\n        \"status\": \"SUCCESS\",\r\n        \"total_hosts\": 0\r\n    }\r\n}\r\n\r\nTASK [check if block skip] *****************************************************************************************************************************************\r\ntask path: /home/kidmis/Desktop/Untitled.yml:21\r\nskipping: [127.0.0.1] => {}\r\n\r\nTASK [list values] *************************************************************************************************************************************************\r\ntask path: /home/kidmis/Desktop/Untitled.yml:25\r\nfatal: [127.0.0.1]: FAILED! => {\r\n    \"msg\": \"An unhandled exception occurred while running the lookup plugin 'dict'. Error was a <class 'ansible.errors.AnsibleError'>, original message: with_dict e\r\n}\r\n\r\nPLAY RECAP *********************************************************************************************************************************************************\r\n127.0.0.1                  : ok=3    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nansible-playbook  -vvvv -i '127.0.0.1,' test.yml\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71228", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71228/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71228/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71228/events", "html_url": "https://github.com/ansible/ansible/issues/71228", "id": 677729909, "node_id": "MDU6SXNzdWU2Nzc3Mjk5MDk=", "number": 71228, "title": "async status returns false evenif job is finished", "user": {"login": "KrishnaG-MSFT", "id": 45988031, "node_id": "MDQ6VXNlcjQ1OTg4MDMx", "avatar_url": "https://avatars0.githubusercontent.com/u/45988031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KrishnaG-MSFT", "html_url": "https://github.com/KrishnaG-MSFT", "followers_url": "https://api.github.com/users/KrishnaG-MSFT/followers", "following_url": "https://api.github.com/users/KrishnaG-MSFT/following{/other_user}", "gists_url": "https://api.github.com/users/KrishnaG-MSFT/gists{/gist_id}", "starred_url": "https://api.github.com/users/KrishnaG-MSFT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KrishnaG-MSFT/subscriptions", "organizations_url": "https://api.github.com/users/KrishnaG-MSFT/orgs", "repos_url": "https://api.github.com/users/KrishnaG-MSFT/repos", "events_url": "https://api.github.com/users/KrishnaG-MSFT/events{/privacy}", "received_events_url": "https://api.github.com/users/KrishnaG-MSFT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-12T14:17:27Z", "updated_at": "2020-08-12T16:31:03Z", "closed_at": "2020-08-12T14:44:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an ansible code written to execute vm extensions(powershell code) in an async fashion.I was able to execute the block,but async status is always returning not finished status even though vm extensions are installed successfully.Is there any thing am doing wrong here about polling the async job or Do i need to return anything from the powershell code which vm extension is executing?  Note- ansible version is 2.9, powershell v5.1 . Sample input-> var_vmArray: [vmname1,vmname2] and  var_jumpboxVmCount: 2\r\n```\r\n  - name: Configure VM block \r\n    block:\r\n    - name: Create VM Extension\r\n      azure_rm_virtualmachineextension:\r\n       name: \"{{ var_extensionName | default('Extension') }}\"\r\n       location: \"{{ var_location  }}\"\r\n       resource_group: \"{{ var_ResourceGroup }}\"\r\n       virtual_machine_name: \"{{ item }}\"\r\n       publisher: Microsoft.Compute\r\n       state: present\r\n       virtual_machine_extension_type: CustomScriptExtension\r\n       type_handler_version: \"1.9\"\r\n       auto_upgrade_minor_version: true\r\n       settings: '{\"fileUris\": [\"{{ VM_TEMPLATEREPOURL+var_scriptFileName+VM_TEMPLATESASTOKEN }}\"]}'\r\n       protected_settings: \r\n        commandToExecute: \"powershell -ExecutionPolicy Unrestricted -File {{ var_scriptFileName }} \"      \r\n      loop: \"{{ var_vmArray|default(var_vmNameList.split(',')) }}\"\r\n      register: extension  \r\n      async: 3600\r\n      poll: 0\r\n    - name: Wait for asynchronous jobs to end\r\n      async_status:\r\n        jid: '{{ extension.results[item|int-1].ansible_job_id }}'\r\n      register: job_result\r\n      until: job_result.finished\r\n      delay: 120\r\n      retries: 90\r\n      with_sequence: start=1 end={{ var_jumpboxVmCount|default(1) }}\r\n    rescue:\r\n    - name: rescue block\r\n      debug: \r\n       msg: extension failed to install !\r\n    always:\r\n    - debug:\r\n         msg: \"Executing extension cleanup tasks\"\r\n    - name: Delete VM Extension\r\n      azure_rm_virtualmachineextension:\r\n        name: \"Extension\"\r\n        location: \"{{ var_location }}\"\r\n        resource_group: \"{{ var_ResourceGroup }}\"\r\n        virtual_machine_name: \"{{ item }}\"\r\n        state: absent  \r\n      loop: \"{{ var_vmArray|default(var_vmNameList.strip(',').split(',')) }}\"  \r\n```\r\n\r\nError\r\n\r\n\"ansible_job_id\": \"653009376139.1262\", \"ansible_loop_var\": \"item\", \"attempts\": 90, \"changed\": false, \"finished\": 0, \"item\": \"2\", \"started\": 1\r\n\r\n##### ISSUE TYPE\r\npolling the async job - async status is always returning not finished status even though vm extensions are installed successfully\r\n\r\n##### COMPONENT NAME\r\nazure_rm_virtualmachineextension\r\n\r\n##### ANSIBLE VERSION\r\n2.9", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71226", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71226/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71226/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71226/events", "html_url": "https://github.com/ansible/ansible/issues/71226", "id": 677629041, "node_id": "MDU6SXNzdWU2Nzc2MjkwNDE=", "number": 71226, "title": "cron: task does not correctly add env vars anymore", "user": {"login": "stroeder", "id": 9304079, "node_id": "MDQ6VXNlcjkzMDQwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/9304079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stroeder", "html_url": "https://github.com/stroeder", "followers_url": "https://api.github.com/users/stroeder/followers", "following_url": "https://api.github.com/users/stroeder/following{/other_user}", "gists_url": "https://api.github.com/users/stroeder/gists{/gist_id}", "starred_url": "https://api.github.com/users/stroeder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stroeder/subscriptions", "organizations_url": "https://api.github.com/users/stroeder/orgs", "repos_url": "https://api.github.com/users/stroeder/repos", "events_url": "https://api.github.com/users/stroeder/events{/privacy}", "received_events_url": "https://api.github.com/users/stroeder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 814251818, "node_id": "MDU6TGFiZWw4MTQyNTE4MTg=", "url": "https://api.github.com/repos/ansible/ansible/labels/has_pr", "name": "has_pr", "color": "1d76db", "default": false, "description": "This issue has an associated PR."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-12T11:57:12Z", "updated_at": "2020-08-17T14:48:48Z", "closed_at": "2020-08-12T19:41:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\ncron: task does not correctly add env vars anymore\r\n\r\n##### ISSUE TYPE\r\n- Bug Report (regression in 2.9.12)\r\n\r\n##### COMPONENT NAME\r\nansible core\r\n\r\n##### ANSIBLE VERSION\r\n2.9.12\r\n\r\n##### STEPS TO REPRODUCE\r\nTry to add a CRON entry with argument env:\r\n\r\nExample: https://gitlab.com/ae-dir/ansible-ae-dir-server/-/blob/master/tasks/cron.yml#L4\r\n\r\n##### EXPECTED RESULTS\r\nEnv vars are added to crontab entry (like in ansible 2.9.11).\r\n\r\n##### ACTUAL RESULTS\r\nEnv vars are missing in crontab entry.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71225", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71225/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71225/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71225/events", "html_url": "https://github.com/ansible/ansible/issues/71225", "id": 677626822, "node_id": "MDU6SXNzdWU2Nzc2MjY4MjI=", "number": 71225, "title": "run_once for third-party role affect include_once in dependency role, skipping plain tasks", "user": {"login": "vlasov-y", "id": 11431149, "node_id": "MDQ6VXNlcjExNDMxMTQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/11431149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlasov-y", "html_url": "https://github.com/vlasov-y", "followers_url": "https://api.github.com/users/vlasov-y/followers", "following_url": "https://api.github.com/users/vlasov-y/following{/other_user}", "gists_url": "https://api.github.com/users/vlasov-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlasov-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlasov-y/subscriptions", "organizations_url": "https://api.github.com/users/vlasov-y/orgs", "repos_url": "https://api.github.com/users/vlasov-y/repos", "events_url": "https://api.github.com/users/vlasov-y/events{/privacy}", "received_events_url": "https://api.github.com/users/vlasov-y/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-12T11:53:06Z", "updated_at": "2020-08-17T14:48:48Z", "closed_at": "2020-08-12T21:35:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nDeclare two roles, create some role which both of them will depend on, set one of child roles as **run_once** and use _include\\_role_ in second child role. After that, run second role by tag. While it was not declared as run_once, child role1 affect on tasks from role they both depends.\r\nNow. Step by step:\r\n\r\n###### Playbook\r\nThere we declare two main roles: something that we do not care and role named **run** which we will run by tag.\r\nRole _something_ is declared with _run\\_once: yes_.\r\n\r\n```yaml\r\n- hosts: all\r\n  gather_facts: no\r\n  any_errors_fatal: yes\r\n  roles:\r\n    - role: something\r\n      run_once: yes\r\n    - role: run\r\n      tags:\r\n        - run\r\n```\r\n\r\n###### Artifacts role\r\nWe have some artifacts role which, lets imagine, download needed artifacts: _roles/artifacts/tasks/main.yml_\r\n```yaml\r\n- include_role:\r\n    name: included_role\r\n  vars:\r\n    a: this is affected by run_once\r\n\r\n- debug:\r\n    msg: this is not affected by run_once\r\n```\r\n\r\n###### Included role\r\nSimple debug task: _roles/included_role/tasks/main.yml_\r\n```yaml\r\n- debug: var=a\r\n```\r\n\r\n###### Run role\r\nThere are no tasks, only dependency: _roles/run/meta/main.yml_\r\n```yaml\r\n---\r\ndependencies:\r\n  - role: artifacts\r\n```\r\n###### Something role\r\nThere are no tasks too , only dependency: _roles/something/meta/main.yml_\r\n```yaml\r\n---\r\ndependencies:\r\n  - role: artifacts\r\n```\r\n\r\n###### Result file tree\r\n```\r\n.\r\n\u251c\u2500\u2500 all.yml\r\n\u251c\u2500\u2500 inventory.yml\r\n\u2514\u2500\u2500 roles\r\n    \u251c\u2500\u2500 artifacts\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 tasks\r\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 included_role\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 tasks\r\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 run\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 meta\r\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 main.yml\r\n    \u2514\u2500\u2500 something\r\n        \u2514\u2500\u2500 meta\r\n            \u2514\u2500\u2500 main.yml\r\n```\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nrun_once connected with include_role inside of dependent roles\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.12\r\n  config file = /data/work/local/photobutler/kiosk-platform/ansible/ansible.cfg\r\n  configured module search path = ['/home/bzm/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/bzm/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/bzm/.local/bin/ansible\r\n  python version = 3.8.3 (default, May 17 2020, 18:15:42) [GCC 10.1.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n<Empty>\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n```\r\nLinux manjaro 5.4.52-1-MANJARO #1 SMP PREEMPT Thu Jul 16 16:07:11 UTC 2020 x86_64 GNU/Linux\r\nNAME=\"Manjaro Linux\"\r\nID=manjaro\r\nID_LIKE=arch\r\nBUILD_ID=rolling\r\nPRETTY_NAME=\"Manjaro Linux\"\r\nANSI_COLOR=\"32;2;24;144;200\"\r\nHOME_URL=\"https://manjaro.org/\"\r\nDOCUMENTATION_URL=\"https://wiki.manjaro.org/\"\r\nSUPPORT_URL=\"https://manjaro.org/\"\r\nBUG_REPORT_URL=\"https://bugs.manjaro.org/\"\r\nLOGO=manjarolinux\r\n\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nDownload sources: [example-ansible-bug.zip](https://github.com/ansible/ansible/files/5062462/example-ansible-bug.zip)\r\n```yaml\r\nansible-playbook all.yml -i inventory.yml -t run\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n```\r\nPLAY [all] ********************************************************************************************************\r\n\r\nTASK [include_role : included_role] *******************************************************************************\r\n\r\nTASK [included_role : debug] **************************************************************************************\r\nok: [l1] => {\r\n    \"a\": \"this is affected by run_once\"\r\n}\r\nok: [l2] => {\r\n    \"a\": \"this is affected by run_once\"\r\n}\r\nok: [l3] => {\r\n    \"a\": \"this is affected by run_once\"\r\n}\r\n\r\nTASK [artifacts : debug] ******************************************************************************************\r\nok: [l1] => {\r\n    \"msg\": \"this is not affected by run_once\"\r\n}\r\nok: [l2] => {\r\n    \"msg\": \"this is not affected by run_once\"\r\n}\r\nok: [l3] => {\r\n    \"msg\": \"this is not affected by run_once\"\r\n}\r\n\r\nPLAY RECAP ********************************************************************************************************\r\nl1                         : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\nl2                         : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\nl3                         : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\nPLAY [all] ********************************************************************************************************\r\n\r\nTASK [include_role : included_role] *******************************************************************************\r\n\r\nTASK [included_role : debug] **************************************************************************************\r\nok: [l1] => {\r\n    \"a\": \"this is affected by run_once\"\r\n}\r\n\r\nTASK [artifacts : debug] ******************************************************************************************\r\nok: [l1] => {\r\n    \"msg\": \"this is not affected by run_once\"\r\n}\r\nok: [l2] => {\r\n    \"msg\": \"this is not affected by run_once\"\r\n}\r\nok: [l3] => {\r\n    \"msg\": \"this is not affected by run_once\"\r\n}\r\n\r\nPLAY RECAP ********************************************************************************************************\r\nl1                         : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\nl2                         : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\nl3                         : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71220", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71220/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71220/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71220/events", "html_url": "https://github.com/ansible/ansible/issues/71220", "id": 677242578, "node_id": "MDU6SXNzdWU2NzcyNDI1Nzg=", "number": 71220, "title": "synchronize not working with executable=/ban/bash", "user": {"login": "PhracturedBlue", "id": 3126449, "node_id": "MDQ6VXNlcjMxMjY0NDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/3126449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PhracturedBlue", "html_url": "https://github.com/PhracturedBlue", "followers_url": "https://api.github.com/users/PhracturedBlue/followers", "following_url": "https://api.github.com/users/PhracturedBlue/following{/other_user}", "gists_url": "https://api.github.com/users/PhracturedBlue/gists{/gist_id}", "starred_url": "https://api.github.com/users/PhracturedBlue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PhracturedBlue/subscriptions", "organizations_url": "https://api.github.com/users/PhracturedBlue/orgs", "repos_url": "https://api.github.com/users/PhracturedBlue/repos", "events_url": "https://api.github.com/users/PhracturedBlue/events{/privacy}", "received_events_url": "https://api.github.com/users/PhracturedBlue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 2270557328, "node_id": "MDU6TGFiZWwyMjcwNTU3MzI4", "url": "https://api.github.com/repos/ansible/ansible/labels/bot_closed", "name": "bot_closed", "color": "ededed", "default": false, "description": null}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991397378, "node_id": "MDU6TGFiZWwxOTkxMzk3Mzc4", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:ansible.posix", "name": "collection:ansible.posix", "color": "ededed", "default": false, "description": null}, {"id": 1255972080, "node_id": "MDU6TGFiZWwxMjU1OTcyMDgw", "url": "https://api.github.com/repos/ansible/ansible/labels/files", "name": "files", "color": "4071a5", "default": false, "description": "Files category"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T22:34:49Z", "updated_at": "2020-08-12T16:31:02Z", "closed_at": "2020-08-12T07:16:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nIn our environment, for most systems, /bin/sh is linked to /bin/bash, but on some hosts it is /bin/dash.\r\nWe use 'set -eo pipefail' in our shell rules, so we need to always use /bin/bash.\r\nTo simplify having to set this in every task, we set executable=/bin/bash in ansible.cfg\r\nDoing so causes an error using the synchronize module:\r\n\r\nsynchronize works fine without this setting.\r\nOn the controller, /bin/sh is symlinked to /bin/dash\r\nOn the inventory_host, /bin/sh is symlinked to /bin/bash\r\n/bin/bash is available on both hosts\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nsynchronize\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.9.10\r\n  config file = /home/user/ansible/ansible.cfg\r\n  configured module search path = [u'/home/user/ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/share/ansible/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Dec  4 2017, 14:50:18) [GCC 5.4.0 20160609]\r\n\r\n##### CONFIGURATION\r\nANSIBLE_PIPELINING(/home/user/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/user/ansible/ansible.cfg) = -C -o ControlMaster=auto -o ControlPersist=60s -o HostKeyAlgorithms=+ssh-dss\r\nDEFAULT_BECOME_METHOD(/home/user/ansible/ansible.cfg) = su\r\nDEFAULT_EXECUTABLE(/home/user/ansible/ansible.cfg) = /bin/bash\r\nDEFAULT_GATHER_TIMEOUT(/home/user/ansible/ansible.cfg) = 30\r\nDEFAULT_REMOTE_PORT(/home/user/ansible/ansible.cfg) = 22222\r\nDEFAULT_TIMEOUT(//hme/user/ansible/ansible.cfg) = 30\r\nDEFAULT_VAULT_PASSWORD_FILE(/home/user/ansible/ansible.cfg) = /home/user/ansible/scripts/passwordgen.sh\r\nHOST_KEY_CHECKING(/home/user/ansible/ansible.cfg) = False\r\nINTERPRETER_PYTHON(/home/user/ansible/ansible.cfg) = /usr/local/bin/python3.6.3a\r\n\r\n##### OS / ENVIRONMENT\r\nController OS: Ubuntu 16.04\r\nIventory host OS: SLES11SP4\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nplaybook:\r\n```\r\n- hosts:\r\n    inventory_hostname\r\n- tasks:\r\n  - name: broken\r\n     synchronize:\r\n     src: localdir/\r\n     dest: /remotedir/\r\n     owner: no\r\n     group: no\r\n     perms: no\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nsynchornize should succeed\r\n\r\n##### ACTUAL RESULTS\r\nResults:\r\n```\r\nTASK [broken] *******************************************************************************************************************************************************************\r\nfatal: [hostname]: FAILED! => {\"msg\": \"Could not find the shell plugin required (bash).\"}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71217", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71217/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71217/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71217/events", "html_url": "https://github.com/ansible/ansible/issues/71217", "id": 677195067, "node_id": "MDU6SXNzdWU2NzcxOTUwNjc=", "number": 71217, "title": "cron module in 2.9.12 fails Idempotence.", "user": {"login": "hylaride", "id": 17935338, "node_id": "MDQ6VXNlcjE3OTM1MzM4", "avatar_url": "https://avatars1.githubusercontent.com/u/17935338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hylaride", "html_url": "https://github.com/hylaride", "followers_url": "https://api.github.com/users/hylaride/followers", "following_url": "https://api.github.com/users/hylaride/following{/other_user}", "gists_url": "https://api.github.com/users/hylaride/gists{/gist_id}", "starred_url": "https://api.github.com/users/hylaride/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hylaride/subscriptions", "organizations_url": "https://api.github.com/users/hylaride/orgs", "repos_url": "https://api.github.com/users/hylaride/repos", "events_url": "https://api.github.com/users/hylaride/events{/privacy}", "received_events_url": "https://api.github.com/users/hylaride/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-11T21:02:16Z", "updated_at": "2020-08-12T16:31:02Z", "closed_at": "2020-08-11T21:44:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nAfter upgrading to ansible 2.9.12, idepodence for the cron module fails.  It now returns 'changed` every time it's run, and updates the files.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n  ```YAML\r\ncron:\r\n    name: foo\r\n    minute: \"*/30\"\r\n    user: foo\r\n    job: /usr/local/bin/foo\r\n    cron_file: cron-foo\r\n```\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n2.9.12\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nHOST_KEY_CHECKING(env: ANSIBLE_HOST_KEY_CHECKING) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nMacOS\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nrun Ansible-playbook twice.  2nd time any cron commands execute again, despite no changes.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\ncron:\r\n    name: foo\r\n    minute: \"*/30\"\r\n    user: foo\r\n    job: /usr/local/bin/foo\r\n    cron_file: cron-foo\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThe cron module should be Idempodent.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n    TASK [ansible-consul : Run foo every half-hour via cron] *************\r\n    changed: [ubuntu-2004]\r\n```\r\n\u261d\ufe0f that happens if I run it multiple times.  all other non-cron tasks are fine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71216", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71216/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71216/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71216/events", "html_url": "https://github.com/ansible/ansible/issues/71216", "id": 677181409, "node_id": "MDU6SXNzdWU2NzcxODE0MDk=", "number": 71216, "title": "cron module removes all jobs for each task", "user": {"login": "cwalkatron", "id": 223279, "node_id": "MDQ6VXNlcjIyMzI3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/223279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cwalkatron", "html_url": "https://github.com/cwalkatron", "followers_url": "https://api.github.com/users/cwalkatron/followers", "following_url": "https://api.github.com/users/cwalkatron/following{/other_user}", "gists_url": "https://api.github.com/users/cwalkatron/gists{/gist_id}", "starred_url": "https://api.github.com/users/cwalkatron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cwalkatron/subscriptions", "organizations_url": "https://api.github.com/users/cwalkatron/orgs", "repos_url": "https://api.github.com/users/cwalkatron/repos", "events_url": "https://api.github.com/users/cwalkatron/events{/privacy}", "received_events_url": "https://api.github.com/users/cwalkatron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T20:38:14Z", "updated_at": "2020-08-12T16:31:01Z", "closed_at": "2020-08-12T00:03:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nAdding multiple `cron` tasks results in only the last one remaining in the `cron_file`. This problem doesn't seems to exist in 2.9.12, but not 2.9.11.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n`cron`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible-playbook 2.9.12\r\n  config file = /home/cwalker/.ansible.cfg\r\n  configured module search path = ['/home/cwalker/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /tmp/pyenv/lib64/python3.6/site-packages/ansible\r\n  executable location = /tmp/pyenv/bin/ansible-playbook\r\n  python version = 3.6.8 (default, Sep 26 2019, 11:57:09) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDEFAULT_FORKS(/home/cwalker/.ansible.cfg) = 60\r\nDEFAULT_HOST_LIST(/home/cwalker/.ansible.cfg) = ['/home/cwalker/hosts']\r\nDEFAULT_REMOTE_USER(/home/cwalker/.ansible.cfg) = root\r\nDEFAULT_ROLES_PATH(/home/cwalker/.ansible.cfg) = ['/home/cwalker/required-roles', '/home/cwalker/roles', '/etc/ansible/roles']\r\nHOST_KEY_CHECKING(/home/cwalker/.ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nRHEL Linux 7.8\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nUsing the below playbook.\r\n\r\n```ansible-playbook -K -i localhost,  -c local /tmp/test.yml```\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: all\r\n  become: true\r\n\r\n  tasks:\r\n\r\n  # Cron Change\r\n    - cron:\r\n        name: \"First Entry\"\r\n        user: \"root\"\r\n        minute: \"30\"\r\n        hour: \"6\"\r\n        cron_file: testing\r\n        job: \"/bin/true\"\r\n\r\n    - cron:\r\n        name: \"Second Entry\"\r\n        user: \"root\"\r\n        minute: \"40\"\r\n        hour: \"5\"\r\n        cron_file: testing\r\n        job: \"/bin/false\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nI would expect both the `First Entry` and `Second Entry` crons to be in `/etc/cron.d/testing`.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nOnly the last entry was there.\r\n\r\n```% cat /etc/cron.d/testing\r\n#Ansible: Second Entry\r\n40 5 * * * root /bin/false\r\n```\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nBECOME password:\r\n\r\nPLAY [all] ********************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ********************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [cron] *******************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nTASK [cron] *******************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP ********************************************************************************************************************\r\nlocalhost                  : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71215", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71215/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71215/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71215/events", "html_url": "https://github.com/ansible/ansible/issues/71215", "id": 677174363, "node_id": "MDU6SXNzdWU2NzcxNzQzNjM=", "number": 71215, "title": "ansible-galaxy install from requirements file will not follow branch HEAD", "user": {"login": "timblaktu", "id": 12355715, "node_id": "MDQ6VXNlcjEyMzU1NzE1", "avatar_url": "https://avatars1.githubusercontent.com/u/12355715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timblaktu", "html_url": "https://github.com/timblaktu", "followers_url": "https://api.github.com/users/timblaktu/followers", "following_url": "https://api.github.com/users/timblaktu/following{/other_user}", "gists_url": "https://api.github.com/users/timblaktu/gists{/gist_id}", "starred_url": "https://api.github.com/users/timblaktu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timblaktu/subscriptions", "organizations_url": "https://api.github.com/users/timblaktu/orgs", "repos_url": "https://api.github.com/users/timblaktu/repos", "events_url": "https://api.github.com/users/timblaktu/events{/privacy}", "received_events_url": "https://api.github.com/users/timblaktu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T20:26:07Z", "updated_at": "2020-08-18T15:07:13Z", "closed_at": "2020-08-18T15:07:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n`ansible-galaxy role install -r requirements.yml` will not \"follow\" the HEAD of the branch specified as a role version:\r\n\r\nrequirements.yml:\r\n```\r\n- name: wcm_io_devops.jenkins_pipeline_library\r\n  src: https://github.com/timblaktu/ansible-jenkins-pipeline-library\r\n  version: feature/customize_jenkins_pkg_url\r\n```\r\n\r\nWhen the role isn't installed, the above command will properly install it from the HEAD of the specified branch, however, after changes are committed to that branch, subsequent invocations of the install command _will not update the installed role_.\r\n\r\nThe workaround is to always `remove` such roles before attempting to upgrade them.\r\n \r\n##### ISSUE TYPE\r\n- Bug Report\r\n(similar to https://github.com/ansible/ansible/issues/65984)\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nansible-galaxy\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n2.9.10\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nALLOW_WORLD_READABLE_TMPFILES(/home/tblack/src/cm/ansible/ansible.cfg) = True\r\nANSIBLE_PIPELINING(/home/tblack/src/cm/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/tblack/src/cm/ansible/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no\r\nDEFAULT_FORKS(/home/tblack/src/cm/ansible/ansible.cfg) = 20\r\nDEFAULT_HOST_LIST(/home/tblack/src/cm/ansible/ansible.cfg) = ['/home/tblack/src/cm/ansible/inventory']\r\nDEFAULT_LOG_PATH(/home/tblack/src/cm/ansible/ansible.cfg) = /home/tblack/src/cm/ansible/ansible.log\r\nDEFAULT_MANAGED_STR(/home/tblack/src/cm/ansible/ansible.cfg) = #Ansible managed by user {uid} on {host} from template file:\r\n\r\nDEFAULT_POLL_INTERVAL(/home/tblack/src/cm/ansible/ansible.cfg) = 5\r\nDEFAULT_ROLES_PATH(/home/tblack/src/cm/ansible/ansible.cfg) = ['/etc/ansible/roles', '/home/tblack/.ansible/collections/ansible_collections/pulp/pulp_installer/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/tblack/src/cm/ansible/ansible.cfg) = yaml\r\nHOST_KEY_CHECKING(/home/tblack/src/cm/ansible/ansible.cfg) = False\r\nINTERPRETER_PYTHON(/home/tblack/src/cm/ansible/ansible.cfg) = auto\r\nRETRY_FILES_ENABLED(/home/tblack/src/cm/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nDebian Buster\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n`ansible-galaxy role install -r requirements.yml` will not \"follow\" the HEAD of the branch specified as a role version:\r\n\r\nrequirements.yml:\r\n```\r\n- name: wcm_io_devops.jenkins_pipeline_library\r\n  src: https://github.com/timblaktu/ansible-jenkins-pipeline-library\r\n  version: feature/customize_jenkins_pkg_url\r\n```\r\n\r\nWhen the role isn't installed, the above command will properly install it from the HEAD of the specified branch, however, after changes are committed to that branch, subsequent invocations of the install command _will not update the installed role_.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nSubsequent calls to `ansible-galaxy role install -r requirements.yml` should update installed role to HEAD of specified branch.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nSubsequent invocations of `ansible-galaxy role install -r requirements.yml` command _will not update the installed role_.\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71213", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71213/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71213/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71213/events", "html_url": "https://github.com/ansible/ansible/issues/71213", "id": 677128498, "node_id": "MDU6SXNzdWU2NzcxMjg0OTg=", "number": 71213, "title": "Cron module in ansible 2.9.12 removes all old content (regression)", "user": {"login": "kevinvalk", "id": 3524694, "node_id": "MDQ6VXNlcjM1MjQ2OTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/3524694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevinvalk", "html_url": "https://github.com/kevinvalk", "followers_url": "https://api.github.com/users/kevinvalk/followers", "following_url": "https://api.github.com/users/kevinvalk/following{/other_user}", "gists_url": "https://api.github.com/users/kevinvalk/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevinvalk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevinvalk/subscriptions", "organizations_url": "https://api.github.com/users/kevinvalk/orgs", "repos_url": "https://api.github.com/users/kevinvalk/repos", "events_url": "https://api.github.com/users/kevinvalk/events{/privacy}", "received_events_url": "https://api.github.com/users/kevinvalk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T19:12:46Z", "updated_at": "2020-08-12T16:31:00Z", "closed_at": "2020-08-11T19:23:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nThe cron module in ansible 2.9.12 removes all previous content from the crontab (or cron file). It is highly likely that the problem was originally introduced in: https://github.com/ansible/ansible/commit/5ce47646add41077872b9cd9e0e8a24874995aae#r41381859.\r\n\r\nPull request https://github.com/ansible/ansible/pull/71207 fixes this issue and to adds a test case to prevent this from happening again.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ncron\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.12\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- cron:\r\n    user: root\r\n    cron_file: 'test'\r\n    state: 'present'\r\n    name: 'one'\r\n    job: 'echo one'\r\n- cron:\r\n    user: root\r\n    cron_file: 'test'\r\n    state: 'present'\r\n    name: 'two'\r\n    job: 'echo two'\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nTwo cronjobs\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nOnly the last cronjob is added\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71210", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71210/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71210/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71210/events", "html_url": "https://github.com/ansible/ansible/issues/71210", "id": 677008740, "node_id": "MDU6SXNzdWU2NzcwMDg3NDA=", "number": 71210, "title": "ovirt_disk: Unable to configure (FC) Direct LUN", "user": {"login": "mattpoel", "id": 15014728, "node_id": "MDQ6VXNlcjE1MDE0NzI4", "avatar_url": "https://avatars0.githubusercontent.com/u/15014728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattpoel", "html_url": "https://github.com/mattpoel", "followers_url": "https://api.github.com/users/mattpoel/followers", "following_url": "https://api.github.com/users/mattpoel/following{/other_user}", "gists_url": "https://api.github.com/users/mattpoel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattpoel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattpoel/subscriptions", "organizations_url": "https://api.github.com/users/mattpoel/orgs", "repos_url": "https://api.github.com/users/mattpoel/repos", "events_url": "https://api.github.com/users/mattpoel/events{/privacy}", "received_events_url": "https://api.github.com/users/mattpoel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 61528803, "node_id": "MDU6TGFiZWw2MTUyODgwMw==", "url": "https://api.github.com/repos/ansible/ansible/labels/cloud", "name": "cloud", "color": "4071a5", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 1241328996, "node_id": "MDU6TGFiZWwxMjQxMzI4OTk2", "url": "https://api.github.com/repos/ansible/ansible/labels/ovirt", "name": "ovirt", "color": "c5def5", "default": false, "description": "oVirt and RHV community"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 942378949, "node_id": "MDU6TGFiZWw5NDIzNzg5NDk=", "url": "https://api.github.com/repos/ansible/ansible/labels/traceback", "name": "traceback", "color": "ededed", "default": false, "description": "This issue/PR includes a traceback."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T16:13:28Z", "updated_at": "2020-08-12T16:30:59Z", "closed_at": "2020-08-11T16:23:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n##### SUMMARY\r\novirt_disk provides the functionality to configure (FC) direct LUNs. We tried to configure FC direct LUNs, but ran into multiple issues.\r\n\r\n* Problem 1: If we try to create the direct LUN according to documentation, we will receive \"[Cannot add Virtual Disk. The provided LUN is not visible by the specified host, please check storage server connectivity.]\"\r\n* Problem 2: If you remove the host in the task, the direct LUN will be created, but incorrectly and not attached to the VM.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\novirt_disk\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['//home/ansible/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ansible\r\n  executable location = /app/ansible/ovirt/tools/Python-3.8.5/bin/ansible\r\n  python version = 3.8.5 (default, Jul 28 2020, 12:35:17) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nNo output\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\novirt / OLVM version: 4.3.6.6-1.0.9\r\n\r\n##### STEPS TO REPRODUCE\r\nTry to configure a FC direct LUN for a VM. \r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n  - name: VM -> Add Direct LUNs\r\n    ovirt_disk:\r\n      auth:\r\n        username: \"{{ ovirt_username }}\"\r\n        password: \"{{ ovirt_password }}\"\r\n        insecure: yes\r\n        url: \"{{ ovirt_url }}\"\r\n      \r\n      name: \"dluntest_TEST01\"\r\n      host: \"kvm01\"\r\n      vm_name: \"dluntest\"\r\n      logical_unit:\r\n        id: \"36000144xxxxxxxx1d38\"\r\n        storage_type: fcp\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nFC Direct LUN is created and attached to VM.\r\n\r\n\r\n##### ACTUAL RESULTS\r\nWhen we are running the playbook we will receive the following error:\r\n\r\n```\r\nTASK [VM -> Add Direct LUNs] *****************************************************************************************************************************************\r\ntask path: /app/ansible/ovirt/DBCLUSTER_dlun.yml:35\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: ansible\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ansible && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/ansible/.ansible/tmp `\"&& mkdir /home/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735 && echo ansible-tmp-1597136428.0939364-24094-36864609799735=\"` echo /home/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735 `\" ) && sleep 0'\r\nUsing module file /app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ansible/modules/cloud/ovirt/ovirt_disk.py\r\n<127.0.0.1> PUT /app/homes/ansible/.ansible/tmp/ansible-local-23909nslz0cij/tmptw32qp39 TO /app/homes/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735/AnsiballZ_ovirt_disk.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735/ /home/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735/AnsiballZ_ovirt_disk.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/app/ansible/ovirt/tools/Python-3.8.5/bin/python3.8 /home/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735/AnsiballZ_ovirt_disk.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/ansible/.ansible/tmp/ansible-tmp-1597136428.0939364-24094-36864609799735/ > /dev/null 2>&1 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_ovirt_disk_payload_e2ur8e_i/ansible_ovirt_disk_payload.zip/ansible/modules/cloud/ovirt/ovirt_disk.py\", line 737, in main\r\n  File \"/tmp/ansible_ovirt_disk_payload_e2ur8e_i/ansible_ovirt_disk_payload.zip/ansible/module_utils/ovirt.py\", line 621, in create\r\n    entity = self._service.add(\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/services.py\", line 7697, in add\r\n    return self._internal_add(disk, headers, query, wait)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 232, in _internal_add\r\n    return future.wait() if wait else future\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 55, in wait\r\n    return self._code(response)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 229, in callback\r\n    self._check_fault(response)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 132, in _check_fault\r\n    self._raise_error(response, body)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 118, in _raise_error\r\n    raise error\r\novirtsdk4.Error: Fault reason is \"Operation Failed\". Fault detail is \"[Cannot add Virtual Disk. The provided LUN is not visible by the specified host, please check storage server connectivity.]\". HTTP response code is 400.\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"activate\": true,\r\n            \"auth\": {\r\n                \"insecure\": true,\r\n                \"password\": \"userpassword\",\r\n                \"url\": \"https://olvm.mydomain/ovirt-engine/api\",\r\n                \"username\": \"ansible@internal\"\r\n            },\r\n            \"bootable\": null,\r\n            \"content_type\": \"data\",\r\n            \"description\": null,\r\n            \"download_image_path\": null,\r\n            \"fetch_nested\": false,\r\n            \"force\": false,\r\n            \"format\": \"cow\",\r\n            \"host\": \"kvm01\",\r\n            \"id\": null,\r\n            \"image_provider\": null,\r\n            \"interface\": null,\r\n            \"logical_unit\": {\r\n                \"id\": \"36000144xxxxxxxx1d38\",\r\n                \"storage_type\": \"fcp\"\r\n            },\r\n            \"name\": \"dlun_TEST01\",\r\n            \"nested_attributes\": [],\r\n            \"openstack_volume_type\": null,\r\n            \"poll_interval\": 3,\r\n            \"profile\": null,\r\n            \"quota_id\": null,\r\n            \"shareable\": null,\r\n            \"size\": null,\r\n            \"sparse\": null,\r\n            \"sparsify\": null,\r\n            \"state\": \"present\",\r\n            \"storage_domain\": null,\r\n            \"storage_domains\": null,\r\n            \"timeout\": 180,\r\n            \"upload_image_path\": null,\r\n            \"vm_id\": null,\r\n            \"vm_name\": \"dlun\",\r\n            \"wait\": true,\r\n            \"wipe_after_delete\": null\r\n        }\r\n    },\r\n    \"msg\": \"Fault reason is \\\"Operation Failed\\\". Fault detail is \\\"[Cannot add Virtual Disk. The provided LUN is not visible by the specified host, please check storage server connectivity.]\\\". HTTP response code is 400.\"\r\n```\r\n\r\nAlthough we can add the LUN via this host in UI:\r\n\r\n![UI_DirectLUN_List](https://user-images.githubusercontent.com/15014728/89921561-2c527900-dbfe-11ea-9ba5-f0b4f15130b4.png)\r\n\r\nIf we remove the KVM host from the task, the direct LUN will be created but we receive the following error:\r\n\r\n```\r\nTASK [VM -> Add Direct LUNs] ****************************************************************************************************************************************\r\ntask path: /app/ansible/ovirt/DBCLUSTER_dlun.yml:35\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: ansible\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ansible && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/ansible/.ansible/tmp `\"&& mkdir /home/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820 && echo ansible-tmp-1597161047.3235068-7178-41153481182820=\"` echo /home/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820 `\" ) && sleep 0'\r\nUsing module file /app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ansible/modules/cloud/ovirt/ovirt_disk.py\r\n<127.0.0.1> PUT /app/homes/ansible/.ansible/tmp/ansible-local-6988q6ur1ftc/tmp1pq4_ccj TO /app/homes/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820/AnsiballZ_ovirt_disk.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820/ /home/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820/AnsiballZ_ovirt_disk.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/app/ansible/ovirt/tools/Python-3.8.5/bin/python3.8 /home/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820/AnsiballZ_ovirt_disk.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/ansible/.ansible/tmp/ansible-tmp-1597161047.3235068-7178-41153481182820/ > /dev/null 2>&1 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_ovirt_disk_payload_ksta8q1c/ansible_ovirt_disk_payload.zip/ansible/modules/cloud/ovirt/ovirt_disk.py\", line 737, in main\r\n  File \"/tmp/ansible_ovirt_disk_payload_ksta8q1c/ansible_ovirt_disk_payload.zip/ansible/module_utils/ovirt.py\", line 621, in create\r\n    entity = self._service.add(\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/services.py\", line 7697, in add\r\n    return self._internal_add(disk, headers, query, wait)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 232, in _internal_add\r\n    return future.wait() if wait else future\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 55, in wait\r\n    return self._code(response)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 229, in callback\r\n    self._check_fault(response)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 132, in _check_fault\r\n    self._raise_error(response, body)\r\n  File \"/app/ansible/ovirt/tools/Python-3.8.5/lib/python3.8/site-packages/ovirtsdk4/service.py\", line 118, in _raise_error\r\n    raise error\r\novirtsdk4.NotFoundError: Fault reason is \"Operation Failed\". Fault detail is \"Entity not found: b2db373a-5cb3-41e7-a2c2-3428e74add19\". HTTP response code is 404.\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"activate\": true,\r\n            \"auth\": {\r\n                \"insecure\": true,\r\n                \"password\": \"userpassword\",\r\n                \"url\": \"https://olvm.mydomain/ovirt-engine/api\",\r\n                \"username\": \"ansible@internal\"\r\n            },\r\n            \"bootable\": null,\r\n            \"content_type\": \"data\",\r\n            \"description\": null,\r\n            \"download_image_path\": null,\r\n            \"fetch_nested\": false,\r\n            \"force\": false,\r\n            \"format\": \"cow\",\r\n            \"host\": null,\r\n            \"id\": null,\r\n            \"image_provider\": null,\r\n            \"interface\": null,\r\n            \"logical_unit\": {\r\n                \"id\": \"36000144xxxxxxxx1d38\",\r\n                \"storage_type\": \"fcp\"\r\n            },\r\n            \"name\": \"dlun_TEST01\",\r\n            \"nested_attributes\": [],\r\n            \"openstack_volume_type\": null,\r\n            \"poll_interval\": 3,\r\n            \"profile\": null,\r\n            \"quota_id\": null,\r\n            \"shareable\": null,\r\n            \"size\": null,\r\n            \"sparse\": null,\r\n            \"sparsify\": null,\r\n            \"state\": \"present\",\r\n            \"storage_domain\": null,\r\n            \"storage_domains\": null,\r\n            \"timeout\": 180,\r\n            \"upload_image_path\": null,\r\n            \"vm_id\": null,\r\n            \"vm_name\": \"dlun\",\r\n            \"wait\": true,\r\n            \"wipe_after_delete\": null\r\n        }\r\n    },\r\n    \"msg\": \"Fault reason is \\\"Operation Failed\\\". Fault detail is \\\"Entity not found: b2db373a-5cb3-41e7-a2c2-3428e74add19\\\". HTTP response code is 404.\"\r\n\r\n```\r\n\r\nThere is actually a direct LUN with the mentioned ID, but it doesn't look correct in terms of size <1GiB instead of 16GiB and it is not attached to the VM.\r\n\r\n![Incorrect_DirectLUN](https://user-images.githubusercontent.com/15014728/89921459-062cd900-dbfe-11ea-9ec3-56dba2470e50.png)\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71208", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71208/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71208/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71208/events", "html_url": "https://github.com/ansible/ansible/issues/71208", "id": 676842255, "node_id": "MDU6SXNzdWU2NzY4NDIyNTU=", "number": 71208, "title": "uri headers are missing after first loop iteration", "user": {"login": "ccecile9", "id": 57135252, "node_id": "MDQ6VXNlcjU3MTM1MjUy", "avatar_url": "https://avatars2.githubusercontent.com/u/57135252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccecile9", "html_url": "https://github.com/ccecile9", "followers_url": "https://api.github.com/users/ccecile9/followers", "following_url": "https://api.github.com/users/ccecile9/following{/other_user}", "gists_url": "https://api.github.com/users/ccecile9/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccecile9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccecile9/subscriptions", "organizations_url": "https://api.github.com/users/ccecile9/orgs", "repos_url": "https://api.github.com/users/ccecile9/repos", "events_url": "https://api.github.com/users/ccecile9/events{/privacy}", "received_events_url": "https://api.github.com/users/ccecile9/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 593252542, "node_id": "MDU6TGFiZWw1OTMyNTI1NDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/net_tools", "name": "net_tools", "color": "4071a5", "default": false, "description": "Net-tools category"}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-11T12:37:03Z", "updated_at": "2020-08-12T07:26:56Z", "closed_at": "2020-08-12T07:25:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nuri module with loop does not send the headers after first occurrence return 201 html code.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nuri\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.11\r\npython version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\n```\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/roles']\r\nINTERPRETER_PYTHON(/etc/ansible/ansible.cfg) = auto_silent\r\n\r\n```\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nubuntu 19.1\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nusers.yml:\r\n```\r\none:\r\n  email: \"one.one@users.eu\"\r\n  first_name: \"one\"\r\n  last_name: \"one\"\r\n  password: \"onepassword\"\r\ntwo:\r\n  email: \"two.two@users.eu\"\r\n  first_name: \"two\"\r\n  last_name: \"two\"\r\n  password: \"twopassword\"\r\n```\r\nplaybook:\r\n```\r\ntasks:\r\n    - name: get cookie\r\n      uri: \r\n        url: http://127.0.0.1:81/api/\r\n        method: GET\r\n      register: site\r\n\r\n    - name: get session id\r\n      uri:\r\n        url: http://127.0.0.1:81/api/login/\r\n        method: POST\r\n        body_format: form-urlencoded\r\n        return_content: yes\r\n        body:\r\n          username: admin\r\n          password: password\r\n          next: /api/\r\n        headers:\r\n          X-CSRFToken: \"{{ site.set_cookie | regex_replace('^.*csrftoken=([a-zA-Z0-9]*);.*$', '\\\\1') }}\"\r\n          Cookie: \"{{ site.set_cookie }}\"\r\n        status_code: 302\r\n      register: session\r\n\r\n    - name:  include dict\r\n      include_vars:\r\n        dir: files/\r\n        extensions:\r\n        - yml\r\n        name: users\r\n        ignore_unknown_extensions: yes\r\n    - name: create users\r\n      uri:\r\n        url: http://127.0.0.1/api/v2/users/\r\n        method: POST\r\n        body_format: json\r\n        body: \"{{ item.value | combine({'username':  item.key }) }}\"\r\n        headers:\r\n          Content-Type: \"application/json\"\r\n          X-CSRFToken: \"{{ site.set_cookie | regex_replace('^.*csrftoken=([a-zA-Z0-9]*);.*$', '\\\\1') }}\"\r\n          Cookie: \r\n            \"{{ session.set_cookie }};{{ site.set_cookie }}\"\r\n        status_code:\r\n        - 201\r\n        - 400\r\n      loop: \"{{ q('dict', users) }}\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nit should post the dict with cookie for user one, and the same for user two\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nuser two is not created because headers are empty,  website send a 401 response code for user not authenticated.\r\nIf you run the playbook a second time, it will work for user two as user one has already been created => response code is different tho.\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71204", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71204/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71204/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71204/events", "html_url": "https://github.com/ansible/ansible/issues/71204", "id": 676797054, "node_id": "MDU6SXNzdWU2NzY3OTcwNTQ=", "number": 71204, "title": "aws_ec2 does not fallback to env var when boto_profile is not found", "user": {"login": "kalumkalac", "id": 16705147, "node_id": "MDQ6VXNlcjE2NzA1MTQ3", "avatar_url": "https://avatars3.githubusercontent.com/u/16705147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kalumkalac", "html_url": "https://github.com/kalumkalac", "followers_url": "https://api.github.com/users/kalumkalac/followers", "following_url": "https://api.github.com/users/kalumkalac/following{/other_user}", "gists_url": "https://api.github.com/users/kalumkalac/gists{/gist_id}", "starred_url": "https://api.github.com/users/kalumkalac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kalumkalac/subscriptions", "organizations_url": "https://api.github.com/users/kalumkalac/orgs", "repos_url": "https://api.github.com/users/kalumkalac/repos", "events_url": "https://api.github.com/users/kalumkalac/events{/privacy}", "received_events_url": "https://api.github.com/users/kalumkalac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-11T11:23:07Z", "updated_at": "2020-08-11T11:26:14Z", "closed_at": "2020-08-11T11:26:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nI wanted to setup AWX with my project. In my aws_ec2 inventory plugin, I specified a boto_profile var since I have multiple ones configured locally.\r\n\r\nProblem is, AWX does not provide a way to specify what boto profile to feed. Instead, it [feeds only the env var](https://docs.ansible.com/ansible-tower/latest/html/userguide/credentials.html#amazon-web-services):\r\n\r\n```\r\nAWS_ACCESS_KEY_ID\r\nAWS_SECRET_ACCESS_KEY\r\nAWS_SECURITY_TOKEN\r\n```\r\n\r\nConsequently, the plugin crashes since it does not use the provided env var but wants to read the boto profile.\r\n\r\nHonestly I don't know which product has to change its behaviour:\r\n\r\n- Does aws_ec2 must use the env vars provided even if the boto profile is not found (it was the behaviour of the deprecated ec2.py, when I used it, I got no errors) ?\r\n- Does AWX has to figure out how to provide the boto profile (adding a AWS_PROFILE env var) ?\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\naws_ec2\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.11\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nALLOW_WORLD_READABLE_TMPFILES(/home/damien/git/ansible/ansible.cfg) = True\r\nANSIBLE_PIPELINING(/home/damien/git/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/damien/git/ansible/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=1800s\r\nANSIBLE_SSH_RETRIES(/home/damien/git/ansible/ansible.cfg) = 2\r\nCACHE_PLUGIN(/home/damien/git/ansible/ansible.cfg) = jsonfile\r\nCACHE_PLUGIN_CONNECTION(/home/damien/git/ansible/ansible.cfg) = /tmp/facts_cache\r\nCACHE_PLUGIN_TIMEOUT(/home/damien/git/ansible/ansible.cfg) = 86400\r\nDEFAULT_BECOME(/home/damien/git/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_ASK_PASS(/home/damien/git/ansible/ansible.cfg) = False\r\nDEFAULT_BECOME_METHOD(/home/damien/git/ansible/ansible.cfg) = sudo\r\nDEFAULT_BECOME_USER(/home/damien/git/ansible/ansible.cfg) = root\r\nDEFAULT_CALLBACK_WHITELIST(/home/damien/git/ansible/ansible.cfg) = ['profile_tasks']\r\nDEFAULT_FORKS(/home/damien/git/ansible/ansible.cfg) = 500\r\nDEFAULT_GATHERING(/home/damien/git/ansible/ansible.cfg) = smart\r\nDEFAULT_HOST_LIST(/home/damien/git/ansible/ansible.cfg) = ['/home/damien/git/ansible/inventory']\r\nDEFAULT_LOG_PATH(/home/damien/git/ansible/ansible.cfg) = /var/log/ansible.log\r\nDEFAULT_REMOTE_USER(/home/damien/git/ansible/ansible.cfg) = admin\r\nDEFAULT_ROLES_PATH(/home/damien/git/ansible/ansible.cfg) = ['/home/damien/git/ansible/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/damien/git/ansible/ansible.cfg) = debug\r\nDEFAULT_VAULT_IDENTITY_LIST(env: ANSIBLE_VAULT_IDENTITY_LIST) = ['@/home/damien/.ansible/default_vault_password', 'standalone@/home/damien/.ansible/standalone_vault_passwHOST_KEY_CHECKING(/home/damien/git/ansible/ansible.cfg) = False\r\nINTERPRETER_PYTHON(/home/damien/git/ansible/ansible.cfg) = auto_silent\r\nRETRY_FILES_ENABLED(/home/damien/git/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\npython3 / debian buster\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\naws_ec2 can use the credentials env var even if the boto profile is missing\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nThe inventory can't be parsed\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\n    2.372 ERROR    [WARNING]:  * Failed to parse\r\n    2.372 ERROR    /tmp/awx_347_pau03o08/project/inventory/aws_ec2.yml with auto plugin:\r\n    2.372 ERROR    Insufficient credentials found: The config profile (ansible-inventory) could\r\n    2.372 ERROR    not be found\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71203", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71203/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71203/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71203/events", "html_url": "https://github.com/ansible/ansible/issues/71203", "id": 676794297, "node_id": "MDU6SXNzdWU2NzY3OTQyOTc=", "number": 71203, "title": "Recently merged packet fix is broken", "user": {"login": "thebsdbox", "id": 1658918, "node_id": "MDQ6VXNlcjE2NTg5MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1658918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thebsdbox", "html_url": "https://github.com/thebsdbox", "followers_url": "https://api.github.com/users/thebsdbox/followers", "following_url": "https://api.github.com/users/thebsdbox/following{/other_user}", "gists_url": "https://api.github.com/users/thebsdbox/gists{/gist_id}", "starred_url": "https://api.github.com/users/thebsdbox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thebsdbox/subscriptions", "organizations_url": "https://api.github.com/users/thebsdbox/orgs", "repos_url": "https://api.github.com/users/thebsdbox/repos", "events_url": "https://api.github.com/users/thebsdbox/events{/privacy}", "received_events_url": "https://api.github.com/users/thebsdbox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 849212023, "node_id": "MDU6TGFiZWw4NDkyMTIwMjM=", "url": "https://api.github.com/repos/ansible/ansible/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": "This issue/PR relates to or includes documentation."}, {"id": 814251818, "node_id": "MDU6TGFiZWw4MTQyNTE4MTg=", "url": "https://api.github.com/repos/ansible/ansible/labels/has_pr", "name": "has_pr", "color": "1d76db", "default": false, "description": "This issue has an associated PR."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-11T11:18:38Z", "updated_at": "2020-08-17T22:05:23Z", "closed_at": "2020-08-17T22:05:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your improvement is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below, add suggestions to wording or structure -->\r\nA fix to broken URLs within the @packethost documentation was fixed, however this appears to be broken due to some URL re-writes in the `devel` branch? \r\n\r\n[https://github.com/ansible/ansible/pull/71115](https://github.com/ansible/ansible/pull/71115)\r\n\r\nExample: \r\n\r\n`https://raw.githubusercontent.com/ansible-collections/community.general/master/scripts/inventory/packet_net.ini`\r\n\r\nhas been re-written to \r\n\r\n`https://github.com/ansible/ansible/blob/devel/contrib/inventory/packet_net.ini`\r\n\r\nThe documentation works fine in [https://docs.ansible.com/ansible/devel/scenario_guides/guide_packet.html](https://docs.ansible.com/ansible/devel/scenario_guides/guide_packet.html) but not latest.\r\n\r\n<!--- HINT: Did you know the documentation has an \"Edit on GitHub\" link on every page ? -->\r\n\r\n##### ISSUE TYPE\r\n- Documentation Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the rst file, module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. OS version, browser, etc. -->\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!--- Describe how this improves the documentation, e.g. before/after situation or screenshots -->\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71202", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71202/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71202/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71202/events", "html_url": "https://github.com/ansible/ansible/issues/71202", "id": 676781204, "node_id": "MDU6SXNzdWU2NzY3ODEyMDQ=", "number": 71202, "title": "unable  to install applications after downloading in VM using ansible ", "user": {"login": "maaloom", "id": 67511570, "node_id": "MDQ6VXNlcjY3NTExNTcw", "avatar_url": "https://avatars1.githubusercontent.com/u/67511570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maaloom", "html_url": "https://github.com/maaloom", "followers_url": "https://api.github.com/users/maaloom/followers", "following_url": "https://api.github.com/users/maaloom/following{/other_user}", "gists_url": "https://api.github.com/users/maaloom/gists{/gist_id}", "starred_url": "https://api.github.com/users/maaloom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maaloom/subscriptions", "organizations_url": "https://api.github.com/users/maaloom/orgs", "repos_url": "https://api.github.com/users/maaloom/repos", "events_url": "https://api.github.com/users/maaloom/events{/privacy}", "received_events_url": "https://api.github.com/users/maaloom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 420038402, "node_id": "MDU6TGFiZWw0MjAwMzg0MDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/performance", "name": "performance", "color": "555555", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-11T10:56:54Z", "updated_at": "2020-08-11T12:54:53Z", "closed_at": "2020-08-11T11:08:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Gents\r\n\r\nI am having an issue in installing an application using ansible automation. I tried to deploy an application from ansible server to the windows virtual machine in the same vnet. I tried to install git.exe and notepad++.exe files into the windows virtual machine using ansibleplaybooks.when i run the command \" ansible-playbook -i /home/ansibleuser01/ansibleplaybooks/inventory/inventory.yml       /home/ansibleuser01/ansibleplaybooks/noteapp.yml. \r\nIt creates a VM, It creates a folder named software, downloads the .exe zip file into the folder. It unzips the file and the below screen appears and it stops(as shown in the attachment). The code is as shared below.\r\n\r\n- name: Installing .NET Framework 4.8\r\n  win_package:\r\n    path: \"https://go.microsoft.com/fwlink/?LinkId=2085155\"\r\n    product_id: none\r\n    state: present\r\n    arguments: /q\r\n- pause: seconds=150\r\n- name: Installing IIS features\r\n  win_optional_feature:\r\n    name:\r\n    - IIS-WebServerRole\r\n    - IIS-WebServer\r\n    - IIS-CommonHttpFeatures\r\n    - IIS-DefaultDocument\r\n    - IIS-DirectoryBrowsing\r\n    - IIS-HttpErrors\r\n    - IIS-StaticContent\r\n    - IIS-HealthAndDiagnostics\r\n    - IIS-HttpLogging\r\n    - IIS-Performance\r\n    - IIS-HttpCompressionStatic\r\n    - IIS-Security\r\n    - IIS-RequestFiltering\r\n    - IIS-ApplicationDevelopment\r\n    - IIS-WebSockets\r\n    - IIS-WebServerManagementTools\r\n    - IIS-ManagementConsole\r\n    state: present\r\n- name: Craeting a Folder to Download the applications\r\n  win_shell: mkdir C:\\softwares\r\n  args:\r\n      executable: cmd.exe\r\n- name: Downloading Git-2.28.0-64-bit.zip file\r\n  win_get_url:\r\n    url: \"https://hilmah001.blob.core.windows.net/myapps/Git-2.28.0-64-bit.zip\"\r\n    dest: 'C:\\softwares\\Git-2.28.0-64-bit.zip'\r\n- name: Unzip Git-2.28.0-64-bit.zip file\r\n  win_shell: tar -xvf Git-2.28.0-64-bit.zip\r\n  args:\r\n    executable: cmd.exe\r\n    chdir: C:\\softwares\r\n- name: grant the ansible user the SeTcbPrivilege right\r\n  win_user_right:\r\n    name: SeTcbPrivilege\r\n    users: ansibleadmin\r\n    action: add\r\n- name: Install Git\r\n  win_package:\r\n    path: C:\\softwares\\Git-2.28.0-64-bit.exe\r\n    product_id: none\r\n    arguments:\r\n    - /install\r\n    - /passive\r\n    - /norestart\r\n- name: Downloading Installer.zip file\r\n  win_get_url:\r\n    url: \"https://hilmah001.blob.core.windows.net/myapps/Installer.zip\"\r\n    dest: 'C:\\softwares\\Installer.zip'\r\n- name: Unzip Installer.zip file\r\n  win_shell: tar -xvf Installer.zip\r\n  args:\r\n    executable: cmd.exe\r\n    chdir: C:\\softwares\r\n- name: Install Notepad++ \r\n  win_package:\r\n    path: C:\\softwares\\npp.7.7.1.Installer.x64.exe\r\n    product_id: none\r\n    arguments:\r\n    - /install\r\n    - /passive\r\n    - /norestart\r\n- name: Installing .NET Hosting 3.1.2 Bundle\r\n  win_package:\r\n    path: \"https://download.visualstudio.microsoft.com/download/pr/dd119832-dc46-4ccf-bc12-69e7bfa61b18/990843c6e0cbd97f9df68c94f6de6bb6/dotnet-hosting-3.1.2-win.exe\"\r\n    product_id: none\r\n    state: present\r\n    arguments: /q /norestart\r\n- name: Stop Windows themes services, if started\r\n  win_service:\r\n    name: Themes\r\n    state: stopped\r\n- name: Disable Windows themes services\r\n  win_command: powershell.exe -\r\n  args:\r\n    stdin: Set-Service -Name Themes -StartupType Disabled\r\n- name: Stop Windows Update services, if started\r\n  win_service:\r\n    name: wuauserv\r\n    state: stopped\r\n- name: Disable Windows Update services\r\n  win_command: powershell.exe -\r\n  args:\r\n    stdin: Set-Service -Name wuauserv -StartupType Disabled\r\n\r\n\r\n![error](https://user-images.githubusercontent.com/67511570/89888936-6ddb2800-dbee-11ea-895e-44920ef585c4.PNG)\r\n\r\nI think it needs some admin rights to install the application. Please advice what to do. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71200", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71200/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71200/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71200/events", "html_url": "https://github.com/ansible/ansible/issues/71200", "id": 676769055, "node_id": "MDU6SXNzdWU2NzY3NjkwNTU=", "number": 71200, "title": "Breaking change in the \"stable\" releases", "user": {"login": "yoctozepto", "id": 3455956, "node_id": "MDQ6VXNlcjM0NTU5NTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/3455956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoctozepto", "html_url": "https://github.com/yoctozepto", "followers_url": "https://api.github.com/users/yoctozepto/followers", "following_url": "https://api.github.com/users/yoctozepto/following{/other_user}", "gists_url": "https://api.github.com/users/yoctozepto/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoctozepto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoctozepto/subscriptions", "organizations_url": "https://api.github.com/users/yoctozepto/orgs", "repos_url": "https://api.github.com/users/yoctozepto/repos", "events_url": "https://api.github.com/users/yoctozepto/events{/privacy}", "received_events_url": "https://api.github.com/users/yoctozepto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 814251818, "node_id": "MDU6TGFiZWw4MTQyNTE4MTg=", "url": "https://api.github.com/repos/ansible/ansible/labels/has_pr", "name": "has_pr", "color": "1d76db", "default": false, "description": "This issue has an associated PR."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-08-11T10:37:21Z", "updated_at": "2020-08-12T17:29:04Z", "closed_at": "2020-08-12T17:29:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nhttps://github.com/ansible/ansible/pull/70221, having been backported to stable branches (2.9: https://github.com/ansible/ansible/pull/70825, 2.8: https://github.com/ansible/ansible/pull/70827), killed my beloved kitties.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n- General rant about stability of \"stable\"\r\n\r\n##### COMPONENT NAME\r\n\r\n\r\n##### ANSIBLE VERSION\r\n```paste below\r\nansible 2.9.12\r\n```\r\n\r\n```paste below\r\nansible 2.8.14\r\n```\r\n\r\n##### CONFIGURATION\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nPOSIX platforms\r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n- name: Template out my beloved kitty\r\n  template:\r\n    src: \"kitty.j2\"\r\n    dest: \"/my_kitty\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nI expected my kitty to be readable by all users as it was before (before 2.9.12, 2.8.14; mode=0644).\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nOther users cannot read my kitty (mode=0600).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71199", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71199/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71199/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71199/events", "html_url": "https://github.com/ansible/ansible/issues/71199", "id": 676755132, "node_id": "MDU6SXNzdWU2NzY3NTUxMzI=", "number": 71199, "title": "Can't use \" and ' in the extra_vars dictionary", "user": {"login": "marius-lupu", "id": 68319392, "node_id": "MDQ6VXNlcjY4MzE5Mzky", "avatar_url": "https://avatars3.githubusercontent.com/u/68319392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marius-lupu", "html_url": "https://github.com/marius-lupu", "followers_url": "https://api.github.com/users/marius-lupu/followers", "following_url": "https://api.github.com/users/marius-lupu/following{/other_user}", "gists_url": "https://api.github.com/users/marius-lupu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marius-lupu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marius-lupu/subscriptions", "organizations_url": "https://api.github.com/users/marius-lupu/orgs", "repos_url": "https://api.github.com/users/marius-lupu/repos", "events_url": "https://api.github.com/users/marius-lupu/events{/privacy}", "received_events_url": "https://api.github.com/users/marius-lupu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 942378949, "node_id": "MDU6TGFiZWw5NDIzNzg5NDk=", "url": "https://api.github.com/repos/ansible/ansible/labels/traceback", "name": "traceback", "color": "ededed", "default": false, "description": "This issue/PR includes a traceback."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T10:16:14Z", "updated_at": "2020-08-11T13:14:02Z", "closed_at": "2020-08-11T13:13:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nCan't use the `\"` and the `'` characters in the extra_vars dictionary. The `VariableManager()` function is complaining about a missing `,` or `}`. The issue is with the Python module, not with the binary.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nfrom ansible.vars.manager import VariableManager\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible --version\r\nansible 2.9.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/centos/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n\r\npython3 -m pip list | grep ansible\r\nansible (2.9.12)\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n<Nothing>\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nCentOS Linux release 7.8.2003 (Core)\r\nPython 3.6.8\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nI have a playbook that will take the content from the users input and writes it latter on in a file.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- name: \"Playbook Example\"\r\n  hosts: localhost\r\n  gather_facts: True\r\n  tasks:\r\n    - copy:\r\n        content: '{{content}}'\r\n        dest: script.sh\r\n```\r\n\r\nThis is an example for the Python code:\r\n\r\n```python\r\n#!/usr/bin/env python\r\n\r\nfrom ansible import context\r\nfrom ansible.cli import CLI\r\nfrom ansible.module_utils.common.collections import ImmutableDict\r\nfrom ansible.executor.playbook_executor import PlaybookExecutor\r\nfrom ansible.parsing.dataloader import DataLoader\r\nfrom ansible.inventory.manager import InventoryManager\r\nfrom ansible.vars.manager import VariableManager\r\n\r\nloader = DataLoader()\r\n\r\nextra_vars = {\"content\": \"#!/bin/bash\\nvariable=123\\necho \\\"$variable\\\" # prints 123\\necho '$variable' # prints $variable\"}\r\n\r\ncontext.CLIARGS = ImmutableDict(\r\n    extra_vars=[extra_vars],\r\n    tags={},\r\n    listtags=False,\r\n    listtasks=False,\r\n    listhosts=False,\r\n    syntax=False,\r\n    connection='ssh',\r\n    module_path=None,\r\n    forks=100,\r\n    remote_user=None,\r\n    private_key_file=None,\r\n    ssh_common_args=None,\r\n    ssh_extra_args=None,\r\n    sftp_extra_args=None,\r\n    scp_extra_args=None,\r\n    become=None,\r\n    become_method='sudo',\r\n    become_user='root',\r\n    verbosity=True,\r\n    check=False,\r\n    start_at_task=None)\r\n\r\ninventory = InventoryManager(loader=loader, sources=('hosts',))\r\n\r\nvariable_manager = VariableManager(loader=loader, inventory=inventory, version_info=CLI.version_info(gitinfo=False))\r\n\r\npbex = PlaybookExecutor(\r\n    playbooks=['playbook.yml'],\r\n    inventory=inventory,\r\n    variable_manager=variable_manager,\r\n    loader=loader,\r\n    passwords={})\r\n\r\nresults = pbex.run()\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nI expected to have the `script.sh` file created with the following lines in it:\r\n\r\n```bash\r\n#!/bin/bash\r\nvariable=123\r\necho \"$variable\" # prints 123\r\necho '$variable' # prints $variable\r\n```\r\n\r\nThis is the equivalent command using the ansible binary (that works):\r\n\r\n```bash\r\nansible-playbook playbook.yml --extra-vars 'content=\"#!/bin/bash\\nvariable=123\\necho \\\"$variable\\\" # prints 123\\necho '\\''$variable'\\'' # prints $variable\"'\r\n```\r\n\r\nIn Python I tried different method of escaping the `'`. It does not work. Only thing that works if you convert the `'` into `\"`.\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n[WARNING]: Unable to parse /home/centos/test/hosts as an inventory source\r\n[WARNING]: No inventory was parsed, only implicit localhost is available\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/parsing/utils/yaml.py\", line 71, in from_yaml\r\n    new_data = json.loads(data, cls=AnsibleJSONDecoder)\r\n  File \"/usr/lib64/python3.6/json/__init__.py\", line 367, in loads\r\n    return cls(**kw).decode(s)\r\n  File \"/usr/lib64/python3.6/json/decoder.py\", line 339, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/usr/lib64/python3.6/json/decoder.py\", line 355, in raw_decode\r\n    obj, end = self.scan_once(s, idx)\r\njson.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/parsing/utils/yaml.py\", line 79, in from_yaml\r\n    new_data = _safe_load(data, file_name=file_name, vault_secrets=vault_secrets)\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/parsing/utils/yaml.py\", line 50, in _safe_load\r\n    return loader.get_single_data()\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/constructor.py\", line 49, in get_single_data\r\n    node = self.get_single_node()\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/composer.py\", line 36, in get_single_node\r\n    document = self.compose_document()\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/composer.py\", line 55, in compose_document\r\n    node = self.compose_node(None, None)\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/composer.py\", line 127, in compose_mapping_node\r\n    while not self.check_event(MappingEndEvent):\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/parser.py\", line 98, in check_event\r\n    self.current_event = self.state()\r\n  File \"/usr/local/lib64/python3.6/site-packages/yaml/parser.py\", line 550, in parse_flow_mapping_key\r\n    \"expected ',' or '}', but got %r\" % token.id, token.start_mark)\r\nyaml.parser.ParserError: while parsing a flow mapping\r\n  in \"<unicode string>\", line 1, column 1:\r\n    {'content': '#!/bin/bash\\nvariab ... \r\n    ^\r\nexpected ',' or '}', but got '<scalar>'\r\n  in \"<unicode string>\", line 1, column 78:\r\n     ... \"$variable\" # prints 12\\necho \\'$variable\\' # prints $variable'}\r\n                                         ^\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"execute_playbook.py\", line 40, in <module>\r\n    variable_manager = VariableManager(loader=loader, inventory=inventory, version_info=CLI.version_info(gitinfo=False))\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/vars/manager.py\", line 98, in __init__\r\n    self._extra_vars = load_extra_vars(loader=self._loader)\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/utils/vars.py\", line 133, in load_extra_vars\r\n    data = loader.load(extra_vars_opt)\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/parsing/dataloader.py\", line 80, in load\r\n    return from_yaml(data, file_name, show_content, self._vault.secrets, json_only=json_only)\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/parsing/utils/yaml.py\", line 81, in from_yaml\r\n    _handle_error(json_exc, yaml_exc, file_name, show_content)\r\n  File \"/usr/local/lib/python3.6/site-packages/ansible/parsing/utils/yaml.py\", line 42, in _handle_error\r\n    raise AnsibleParserError(to_native(err_msg), obj=err_obj, show_content=show_content, orig_exc=yaml_exc)\r\nansible.errors.AnsibleParserError: We were unable to read either as JSON nor YAML, these are the errors we got from each:\r\nJSON: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)\r\n\r\nSyntax Error while loading YAML.\r\n  expected ',' or '}', but got '<scalar>'\r\n\r\nThe error appears to be in '<string>': line 1, column 78, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71198", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71198/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71198/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71198/events", "html_url": "https://github.com/ansible/ansible/issues/71198", "id": 676743441, "node_id": "MDU6SXNzdWU2NzY3NDM0NDE=", "number": 71198, "title": "delegate_to is broken if ansible_host relies on inventory_hostname", "user": {"login": "plastikat", "id": 13761875, "node_id": "MDQ6VXNlcjEzNzYxODc1", "avatar_url": "https://avatars0.githubusercontent.com/u/13761875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/plastikat", "html_url": "https://github.com/plastikat", "followers_url": "https://api.github.com/users/plastikat/followers", "following_url": "https://api.github.com/users/plastikat/following{/other_user}", "gists_url": "https://api.github.com/users/plastikat/gists{/gist_id}", "starred_url": "https://api.github.com/users/plastikat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/plastikat/subscriptions", "organizations_url": "https://api.github.com/users/plastikat/orgs", "repos_url": "https://api.github.com/users/plastikat/repos", "events_url": "https://api.github.com/users/plastikat/events{/privacy}", "received_events_url": "https://api.github.com/users/plastikat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-08-11T09:58:43Z", "updated_at": "2020-08-18T14:17:03Z", "closed_at": "2020-08-17T15:55:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nWhen `ansible_host` is customized (i.e. overridden/redefined) for all hosts (e.g. in 'group_vars/all'), the task with a `delegate_to` tries to connect to localhost over SSH (thus ignoring the implicit `ansible_connection: local`) *prior* to establishing an SSH connection to a delegation target host.\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDefault\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nDescription:    Ubuntu 18.04.4 LTS\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nThe prerequisites to reproduce the issue are the following:\r\n* The 'localhost' entry is *not* defined in inventory.\r\n* The 'delegation_target' entry *is* defined in inventory (and is expected to be reached over SSH, as per default).\r\n* The following is defined in 'group_vars/all' of a given inventory:\r\n```yaml\r\nansible_host: \"{{ inventory_hostname }}.example.org\"\r\n```\r\n* The following is a test playbook:\r\n```yaml\r\n- name: Test\r\n  hosts: localhost\r\n  gather_facts: no\r\n  become: no\r\n\r\n  vars:\r\n    my_delegation_host: delegation_target.example.org\r\n\r\n  tasks:\r\n\r\n    - debug:\r\n        var: ansible_host\r\n    - debug:\r\n        var: ansible_connection\r\n\r\n    - shell: hostname\r\n      register: hostname_data\r\n      delegate_to: \"{{ my_delegation_host }}\"\r\n\r\n    - debug:\r\n        var: hostname_data\r\n```\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nWith the following Ansible version:\r\n```paste below\r\nansible 2.8.13\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n```\r\nthe result is the following:\r\n```\r\n\r\nPLAY [Test] *********************************************************************************************************************\r\n\r\nTASK [debug] ********************************************************************************************************************\r\nok: [localhost] => {\r\n    \"ansible_host\": \"localhost.example.org\"\r\n}\r\n\r\nTASK [debug] ********************************************************************************************************************\r\nok: [localhost] => {\r\n    \"ansible_connection\": \"local\"\r\n}\r\n\r\nTASK [shell] ********************************************************************************************************************\r\nchanged: [localhost -> delegation_target.example.org]\r\n\r\nTASK [debug] ********************************************************************************************************************\r\nok: [localhost] => {\r\n    \"hostname_data\": {\r\n        \"ansible_facts\": {\r\n            \"discovered_interpreter_python\": \"/usr/bin/python\"\r\n        }, \r\n        \"changed\": true, \r\n        \"cmd\": \"hostname\", \r\n        \"delta\": \"0:00:00.001931\", \r\n        \"deprecations\": [\r\n            {\r\n                \"msg\": \"Distribution Ubuntu 18.04 on host localhost should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.8/reference_appendices/interpreter_discovery.html for more information\", \r\n                \"version\": \"2.12\"\r\n            }\r\n        ], \r\n        \"end\": \"2020-08-11 08:54:44.884152\", \r\n        \"failed\": false, \r\n        \"rc\": 0, \r\n        \"start\": \"2020-08-11 08:54:44.882221\", \r\n        \"stderr\": \"\", \r\n        \"stderr_lines\": [], \r\n        \"stdout\": \"delegation_target\", \r\n        \"stdout_lines\": [\r\n            \"delegation_target\"\r\n        ]\r\n    }\r\n}\r\n\r\nPLAY RECAP **********************************************************************************************************************\r\nlocalhost                  : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n```\r\n\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nBut with the topic Ansible version, the result is:\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\nPLAY [Test] *********************************************************************************************************************\r\n\r\nTASK [debug] ********************************************************************************************************************\r\nok: [localhost] => {\r\n    \"ansible_host\": \"localhost.example.org\"\r\n}\r\n\r\nTASK [debug] ********************************************************************************************************************\r\nok: [localhost] => {\r\n    \"ansible_connection\": \"local\"\r\n}\r\n\r\nTASK [shell] ********************************************************************************************************************\r\nfatal: [localhost]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname localhost.example.org: Name or service not known\", \"unreachable\": true}\r\n\r\nPLAY RECAP **********************************************************************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71196", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71196/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71196/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71196/events", "html_url": "https://github.com/ansible/ansible/issues/71196", "id": 676563108, "node_id": "MDU6SXNzdWU2NzY1NjMxMDg=", "number": 71196, "title": "win_file: Any option to exclude some files from delete in windows using ansible", "user": {"login": "dhikrahashim", "id": 43034730, "node_id": "MDQ6VXNlcjQzMDM0NzMw", "avatar_url": "https://avatars1.githubusercontent.com/u/43034730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhikrahashim", "html_url": "https://github.com/dhikrahashim", "followers_url": "https://api.github.com/users/dhikrahashim/followers", "following_url": "https://api.github.com/users/dhikrahashim/following{/other_user}", "gists_url": "https://api.github.com/users/dhikrahashim/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhikrahashim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhikrahashim/subscriptions", "organizations_url": "https://api.github.com/users/dhikrahashim/orgs", "repos_url": "https://api.github.com/users/dhikrahashim/repos", "events_url": "https://api.github.com/users/dhikrahashim/events{/privacy}", "received_events_url": "https://api.github.com/users/dhikrahashim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-11T04:06:05Z", "updated_at": "2020-08-11T07:37:37Z", "closed_at": "2020-08-11T05:13:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your improvement is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below, add suggestions to wording or structure -->\r\n\r\n<!--- HINT: Did you know the documentation has an \"Edit on GitHub\" link on every page ? -->\r\n\r\n##### ISSUE TYPE\r\n- \r\n\r\nI want to exclude some files from deleting in windows using win_file module.\r\nUnfortunately exclude option is there only for Linux module file, I believe.\r\n\r\nI am getting updated application code from developer. I need to keep some files without any change in the windows application like \"web.config\". In that case I only need to exclude one or two files and I can replace all other files.\r\n\r\nOther option I have is, I need to copy original \"web.config\" in my src folder and idempotent will work.\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the rst file, module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nLatest\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\n- win_find:\r\npaths: \"c:/Users/xxxx/Desktop/Newfolder/test/\"\r\nfile_type: file\r\nexcludes:\r\n - \"Global.asax\"\r\nregister: found_files\r\n\r\n- win_file:\r\npath: \"{{ item.path }}\"\r\nstate: absent\r\nwith_items: \"{{ found_files.files }}\"\r\n================================\r\n\r\n- win_find:\r\npaths: \"c:/Users/farmoh/Desktop/Newfolder/test-farooq/\"\r\nfile_type: file\r\nregister: found_files\r\n\r\n- win_file:\r\npath: \"{{ item.path }}\"\r\nstate: absent\r\nwith_items: \"{{ found_files.files }}\"\r\nwhen: 'Global.asax not in item.path'\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. OS version, browser, etc. -->\r\nWindows\r\n##### ADDITIONAL INFORMATION\r\n<!--- Describe how this improves the documentation, e.g. before/after situation or screenshots -->\r\nTried all two types plays, nothing works\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71185", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71185/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71185/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71185/events", "html_url": "https://github.com/ansible/ansible/issues/71185", "id": 676236300, "node_id": "MDU6SXNzdWU2NzYyMzYzMDA=", "number": 71185, "title": "cli_config rollback doesn't work for rollback_id 0", "user": {"login": "pszulczewski", "id": 58683518, "node_id": "MDQ6VXNlcjU4NjgzNTE4", "avatar_url": "https://avatars2.githubusercontent.com/u/58683518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pszulczewski", "html_url": "https://github.com/pszulczewski", "followers_url": "https://api.github.com/users/pszulczewski/followers", "following_url": "https://api.github.com/users/pszulczewski/following{/other_user}", "gists_url": "https://api.github.com/users/pszulczewski/gists{/gist_id}", "starred_url": "https://api.github.com/users/pszulczewski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pszulczewski/subscriptions", "organizations_url": "https://api.github.com/users/pszulczewski/orgs", "repos_url": "https://api.github.com/users/pszulczewski/repos", "events_url": "https://api.github.com/users/pszulczewski/events{/privacy}", "received_events_url": "https://api.github.com/users/pszulczewski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991512380, "node_id": "MDU6TGFiZWwxOTkxNTEyMzgw", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:ansible.netcommon", "name": "collection:ansible.netcommon", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 339653091, "node_id": "MDU6TGFiZWwzMzk2NTMwOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/networking", "name": "networking", "color": "4071a5", "default": false, "description": "Network category"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-10T15:46:19Z", "updated_at": "2020-08-12T16:30:56Z", "closed_at": "2020-08-10T16:17:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\ncli_config module doesn't work when rollback_id 0 is given.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nnetwork module cli_config\r\n\r\n##### ANSIBLE VERSION\r\n2.9.11\r\n\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n---\r\n- hosts: R1\r\n  gather_facts: false\r\n  connection: network_cli\r\n\r\n  tasks:\r\n    - name: Rollback to default\r\n      cli_config:\r\n        rollback: 0\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n```R1            : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0```\r\n\r\n##### ACTUAL RESULTS\r\n```R1            : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0```\r\n\r\nThere is no change on target host as rollback is not executed due to a bug in the following module/line:\r\nmodules/network/cli/cli_config.py line: 390\r\n`    if candidate or rollback_id or module.params['replace']:\r\n`\r\nIf rollback_id is set to 0 then `if rollback_id` evaluates to False.\r\nChange the line to:\r\n`    if candidate or rollback_id is not None or module.params['replace']:\r\n`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71183", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71183/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71183/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71183/events", "html_url": "https://github.com/ansible/ansible/issues/71183", "id": 676150797, "node_id": "MDU6SXNzdWU2NzYxNTA3OTc=", "number": 71183, "title": "collections paths in ansible.cfg ignored", "user": {"login": "nORKy54", "id": 3739340, "node_id": "MDQ6VXNlcjM3MzkzNDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3739340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nORKy54", "html_url": "https://github.com/nORKy54", "followers_url": "https://api.github.com/users/nORKy54/followers", "following_url": "https://api.github.com/users/nORKy54/following{/other_user}", "gists_url": "https://api.github.com/users/nORKy54/gists{/gist_id}", "starred_url": "https://api.github.com/users/nORKy54/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nORKy54/subscriptions", "organizations_url": "https://api.github.com/users/nORKy54/orgs", "repos_url": "https://api.github.com/users/nORKy54/repos", "events_url": "https://api.github.com/users/nORKy54/events{/privacy}", "received_events_url": "https://api.github.com/users/nORKy54/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575790, "node_id": "MDU6TGFiZWwxMjMxNTc1Nzkw", "url": "https://api.github.com/repos/ansible/ansible/labels/utilities", "name": "utilities", "color": "4071a5", "default": false, "description": "Utilities category"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-10T13:47:46Z", "updated_at": "2020-08-11T07:37:36Z", "closed_at": "2020-08-10T13:54:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nI have a projet with some collections and many playbooks.  I configured directories in ansible.cfg\r\nWhen I run ansible-playbook, I have an error \"ERROR! the role 'mycoll.ceph.common_vars' was not found\".\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n```\r\nimport_role:\r\n  name: mycoll.ceph.common_vars\r\n```\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.10\r\n  config file = /home/XXX/ansible/poc_ceph/ansible.cfg\r\n  configured module search path = ['/home/XXX/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, Dec 20 2019, 18:57:59) [GCC 8.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nDEFAULT_GATHERING(/home/XXX/ansible/poc_ceph/ansible.cfg) = explicit\r\nDEFAULT_HOST_LIST(/home/XXX/ansible/poc_ceph/ansible.cfg) = ['/home/XXX/ansible/poc_ceph/env']\r\nDEFAULT_ROLES_PATH(/home/XXX/ansible/poc_ceph/ansible.cfg) = ['/home/XXX/ansible/poc_ceph/roles']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nLinux Debian 10\r\n\r\n##### STEPS TO REPRODUCE\r\nDirectory structure\r\n```\r\nmyprojet/\r\n|--ansible.cfg\r\n|--collections/\r\n|----ansible_collections/\r\n|------mycoll/\r\n|--------ceph/\r\n|----------roles/\r\n|------------common_variables/   [...]\r\n|--env/\r\n|--play/\r\n|----init\r\n|------test.yml\r\n```\r\ndefaults/main.yml  of common_variables roles:\r\n\r\n```\r\n---\r\n# defaults file for common_variables\r\nceph_relase_name: octopus\r\n```\r\n\r\nansible.cfg in current projet dir\r\n```\r\n[defaults]\r\ninventory = env/\r\ngathering = explicit\r\nroles_path = ./roles\r\ncollections_path = ./collections\r\n```\r\n\r\nplay/init/test.yml\r\n\r\n```yaml\r\n- hosts: localhost\r\n  tasks: \r\n  - import_role:\r\n      name: mycoll.ceph.common_variables\r\n  - debug:\r\n      msg: \"{{ ceph_release_name }}\"\r\n```\r\n\r\nCommand:\r\n\r\n`ansible-plabook play/init/test.yml`\r\n\r\n##### EXPECTED RESULTS\r\nno error\r\n\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nERROR! the role 'mycoll.ceph.common_variables' was not found in /home/XXX/ansible/poc_ceph/play/init/roles:/home/XXX/ansible/poc_ceph/roles:/home/XXX/ansible/poc_ceph/play/init\r\n\r\nThe error appears to be in '/home/XXX/ansible/poc_ceph/play/init/test.yml': line 4, column 13, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n  - import_role:\r\n      name: mycoll.ceph.common_variables\r\n            ^ here\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71182", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71182/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71182/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71182/events", "html_url": "https://github.com/ansible/ansible/issues/71182", "id": 676149759, "node_id": "MDU6SXNzdWU2NzYxNDk3NTk=", "number": 71182, "title": "grafana_dashboard not creating", "user": {"login": "ccathal", "id": 38156633, "node_id": "MDQ6VXNlcjM4MTU2NjMz", "avatar_url": "https://avatars3.githubusercontent.com/u/38156633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccathal", "html_url": "https://github.com/ccathal", "followers_url": "https://api.github.com/users/ccathal/followers", "following_url": "https://api.github.com/users/ccathal/following{/other_user}", "gists_url": "https://api.github.com/users/ccathal/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccathal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccathal/subscriptions", "organizations_url": "https://api.github.com/users/ccathal/orgs", "repos_url": "https://api.github.com/users/ccathal/repos", "events_url": "https://api.github.com/users/ccathal/events{/privacy}", "received_events_url": "https://api.github.com/users/ccathal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-10T13:46:23Z", "updated_at": "2020-08-10T13:48:37Z", "closed_at": "2020-08-10T13:48:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\ngrafana_dashboard not creating. Potential issue with message parameter. Tried variations of message parameter such as commit_message and notification_message. I believe it could be a similar issue to [#60051](https://github.com/ansible/ansible/pull/60051).\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ngrafana_dashboard\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.1\r\n  config file = /home/cathal/Documents/cathal/ansible/ansible.cfg\r\n  configured module search path = ['/home/cathal/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/cathal/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/cathal/.local/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n- name: 'Import Grafana dashboard'\r\n  grafana_dashboard:\r\n    grafana_url: 'http://localhost:3000'\r\n    grafana_user: 'admin'\r\n    grafana_password: 'admin'\r\n    path: 'files/dashboards/grafana.json'\r\n    notification_message: 'Update by Ansible'\r\n    state: present\r\n    overwrite: true\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 20.04\r\nUsing grafana version 7.1.3\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nFull ansible script located here @ https://gitlab.com/surfprace/cathal/-/tree/ansible_deployment_2/ansible\r\n\r\nRun the below playbook.yml of the grafana role with 'ansible-playbook -K playbook.yml --tags grafana'\r\n```\r\n- hosts: 127.0.0.1\r\n  connection: local\r\n  become: true\r\n  roles:\r\n  - role: grafana\r\n    tags: grafana          \r\n\r\n```\r\n\r\n##### EXPECTED RESULTS\r\ndashboard created\r\n\r\n\r\n##### ACTUAL RESULTS\r\nRunning with message parameter\r\n```\r\nTASK [grafana : Import Grafana dashboard] *****************************************************************************************************************************************************************\r\ntask path: /home/cathal/Documents/cathal/ansible/roles/grafana/tasks/main.yml:34\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: cathal\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~cathal && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/cathal/.ansible/tmp `\"&& mkdir /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887 && echo ansible-tmp-1597066239.9266064-20361-170759125121887=\"` echo /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887 `\" ) && sleep 0'\r\nUsing module file /home/cathal/.local/lib/python3.8/site-packages/ansible/modules/monitoring/grafana_dashboard.py\r\n<127.0.0.1> PUT /home/cathal/.ansible/tmp/ansible-local-19994mfjg0pmx/tmp3_gs80tc TO /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/ /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'sudo -H -S  -p \"[sudo via ansible, key=rvswrwbovrvqlffdiopbfxysqmdjclhs] password:\" -u root /bin/sh -c '\"'\"'echo BECOME-SUCCESS-rvswrwbovrvqlffdiopbfxysqmdjclhs ; /usr/bin/python3 /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py'\"'\"' && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/ > /dev/null 2>&1 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\", line 102, in <module>\r\n    _ansiballz_main()\r\n  File \"/home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\", line 94, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\", line 40, in invoke_module\r\n    runpy.run_module(mod_name='ansible.modules.monitoring.grafana_dashboard', init_globals=None, run_name='__main__', alter_sys=True)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 206, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 96, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"/usr/lib/python3.8/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/modules/monitoring/grafana_dashboard.py\", line 450, in <module>\r\n  File \"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/modules/monitoring/grafana_dashboard.py\", line 403, in main\r\n  File \"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/module_utils/basic.py\", line 696, in __init__\r\n  File \"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/module_utils/basic.py\", line 1970, in _log_invocation\r\n  File \"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/module_utils/basic.py\", line 1927, in log\r\nTypeError: send() got multiple values for keyword argument 'MESSAGE'\r\nfatal: [127.0.0.1]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/home/cathal/.ansible/tmp/ansible-tmp-1597066239.9266064-20361-170759125121887/AnsiballZ_grafana_dashboard.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.monitoring.grafana_dashboard', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/lib/python3.8/runpy.py\\\", line 206, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/lib/python3.8/runpy.py\\\", line 96, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/lib/python3.8/runpy.py\\\", line 86, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/modules/monitoring/grafana_dashboard.py\\\", line 450, in <module>\\n  File \\\"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/modules/monitoring/grafana_dashboard.py\\\", line 403, in main\\n  File \\\"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/module_utils/basic.py\\\", line 696, in __init__\\n  File \\\"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/module_utils/basic.py\\\", line 1970, in _log_invocation\\n  File \\\"/tmp/ansible_grafana_dashboard_payload_8i5iehpr/ansible_grafana_dashboard_payload.zip/ansible/module_utils/basic.py\\\", line 1927, in log\\nTypeError: send() got multiple values for keyword argument 'MESSAGE'\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n    \"rc\": 1\r\n}\r\n\r\nPLAY RECAP ************************************************************************************************************************************************************************************************\r\n127.0.0.1                  : ok=6    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0  \r\n\r\n```\r\n\r\nRunning with commit_message parameter\r\n```\r\nASK [grafana : Import Grafana dashboard] *****************************************************************************************************************************************************************\r\ntask path: /home/cathal/Documents/cathal/ansible/roles/grafana/tasks/main.yml:34\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: cathal\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~cathal && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/cathal/.ansible/tmp `\"&& mkdir /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330 && echo ansible-tmp-1597066529.3230932-20786-239862316296330=\"` echo /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330 `\" ) && sleep 0'\r\nUsing module file /home/cathal/.local/lib/python3.8/site-packages/ansible/modules/monitoring/grafana_dashboard.py\r\n<127.0.0.1> PUT /home/cathal/.ansible/tmp/ansible-local-20482rprkes19/tmp6_givsuh TO /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330/AnsiballZ_grafana_dashboard.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330/ /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330/AnsiballZ_grafana_dashboard.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'sudo -H -S  -p \"[sudo via ansible, key=dzkjcrukiewoohpnpcpuxskjeyoukxcd] password:\" -u root /bin/sh -c '\"'\"'echo BECOME-SUCCESS-dzkjcrukiewoohpnpcpuxskjeyoukxcd ; /usr/bin/python3 /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330/AnsiballZ_grafana_dashboard.py'\"'\"' && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/cathal/.ansible/tmp/ansible-tmp-1597066529.3230932-20786-239862316296330/ > /dev/null 2>&1 && sleep 0'\r\nfatal: [127.0.0.1]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"commit_message\": \"Update by Ansible\",\r\n            \"grafana_password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"grafana_url\": \"http://localhost:3000\",\r\n            \"grafana_user\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"overwrite\": true,\r\n            \"path\": \"files/dashboards/grafana.json\",\r\n            \"state\": \"present\",\r\n            \"url\": \"http://localhost:3000\",\r\n            \"url_password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"url_username\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\"\r\n        }\r\n    },\r\n    \"msg\": \"Unsupported parameters for (grafana_dashboard) module: commit_message Supported parameters include: client_cert, client_key, grafana_api_key, message, org_id, overwrite, path, slug, state, uid, url, url_password, url_username, use_proxy, validate_certs\"\r\n}\r\n\r\nPLAY RECAP ************************************************************************************************************************************************************************************************\r\n127.0.0.1                  : ok=6    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71181", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71181/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71181/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71181/events", "html_url": "https://github.com/ansible/ansible/issues/71181", "id": 676149574, "node_id": "MDU6SXNzdWU2NzYxNDk1NzQ=", "number": 71181, "title": "Ubuntu 20.04 - WSL on Win10: Unable to run playbook using localhost ", "user": {"login": "dpkshetty", "id": 6286819, "node_id": "MDQ6VXNlcjYyODY4MTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6286819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dpkshetty", "html_url": "https://github.com/dpkshetty", "followers_url": "https://api.github.com/users/dpkshetty/followers", "following_url": "https://api.github.com/users/dpkshetty/following{/other_user}", "gists_url": "https://api.github.com/users/dpkshetty/gists{/gist_id}", "starred_url": "https://api.github.com/users/dpkshetty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dpkshetty/subscriptions", "organizations_url": "https://api.github.com/users/dpkshetty/orgs", "repos_url": "https://api.github.com/users/dpkshetty/repos", "events_url": "https://api.github.com/users/dpkshetty/events{/privacy}", "received_events_url": "https://api.github.com/users/dpkshetty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-10T13:46:10Z", "updated_at": "2020-08-11T07:37:36Z", "closed_at": "2020-08-10T13:59:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nUnable to run playbook on ubuntu 20.04, gives auth/perm error\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nkubernetes module, but should re-create with any module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/dpkshetty/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Apr 27 2020, 15:53:34) [GCC 9.3.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\ndpkshetty@DESKTOP-L94HV3O:~/ansible-2004/ocp$ ansible-config dump --only-changed\r\ndpkshetty@DESKTOP-L94HV3O:~/ansible-2004/ocp$ \r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 20.04 on WSL (windows subsystem for linux) on Win10\r\n```\r\nuname -a\r\nLinux DESKTOP-L94HV3O 4.4.0-18362-Microsoft #836-Microsoft Mon May 05 16:04:00 PST 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nPlease see the ansible playbook yml below\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\ncat ./k8s-info-list-pods.yml\r\n---\r\n- hosts: localhost\r\n  gather_facts: false\r\n\r\n  collections:\r\n    - community.kubernetes\r\n\r\n  tasks:\r\n    - name: Get a list of all pods from any namespace\r\n      k8s_info:\r\n              host: <<redacted>>\r\n              api_key: <<redacted>>\r\n              validate_certs: no\r\n              namespace: test\r\n              kind: Pod\r\n      register: podlist\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nI should be able to list all the Pods of my openshift cluster for the given namespace\r\n\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nansible-playbook ./k8s-info-list-pods.yml\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\r\nPLAY [localhost] ***********************************************************************************************************************************************************\r\nTASK [Get a list of all pods from any namespace] ***************************************************************************************************************************\r\nfatal: [localhost]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo /tmp/ansible/ansible-tmp-1597055373.258955-159832533067188 `\\\" && echo ansible-tmp-1597055373.258955-159832533067188=\\\"` echo /tmp/ansible/ansible-tmp-1597055373.258955-159832533067188 `\\\" ), exited with result 1, stdout output: ansible-tmp-1597055373.258955-159832533067188=/tmp/ansible/ansible-tmp-1597055373.258955-159832533067188\\n\", \"unreachable\": true}\r\nPLAY RECAP *****************************************************************************************************************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\n```\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71171", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71171/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71171/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71171/events", "html_url": "https://github.com/ansible/ansible/issues/71171", "id": 675441878, "node_id": "MDU6SXNzdWU2NzU0NDE4Nzg=", "number": 71171, "title": "Add arg for env var in shell task", "user": {"login": "mdavis-xyz", "id": 7035647, "node_id": "MDQ6VXNlcjcwMzU2NDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7035647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdavis-xyz", "html_url": "https://github.com/mdavis-xyz", "followers_url": "https://api.github.com/users/mdavis-xyz/followers", "following_url": "https://api.github.com/users/mdavis-xyz/following{/other_user}", "gists_url": "https://api.github.com/users/mdavis-xyz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdavis-xyz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdavis-xyz/subscriptions", "organizations_url": "https://api.github.com/users/mdavis-xyz/orgs", "repos_url": "https://api.github.com/users/mdavis-xyz/repos", "events_url": "https://api.github.com/users/mdavis-xyz/events{/privacy}", "received_events_url": "https://api.github.com/users/mdavis-xyz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 1255973036, "node_id": "MDU6TGFiZWwxMjU1OTczMDM2", "url": "https://api.github.com/repos/ansible/ansible/labels/commands", "name": "commands", "color": "4071a5", "default": false, "description": "Commands category"}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-08T06:26:56Z", "updated_at": "2020-08-11T07:37:35Z", "closed_at": "2020-08-08T06:50:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your feature was not already discussed on GitHub -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n\r\nI would like a field to add to the `args` of the `shell` command to specify environment variables.\r\n\r\n##### ISSUE TYPE\r\n- Feature Idea\r\n\r\n##### COMPONENT NAME\r\nshell\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nCurrently you can do this:\r\n\r\n```\r\n- name: shell command\r\n  shell: SOME_VAR=SOME_VALUE my-command myarg\r\n  args:\r\n    stdin: something\r\n    chdir: /path/to/somewhere\r\n```\r\n\r\nI think it would be nice and neat to move out the env var, like:\r\n\r\n```\r\n- name: shell command\r\n  shell: my-command myarg\r\n  args:\r\n    env:\r\n      some_var: some_value\r\n    stdin: something\r\n    chdir: /path/to/somewhere\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71169", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71169/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71169/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71169/events", "html_url": "https://github.com/ansible/ansible/issues/71169", "id": 675400079, "node_id": "MDU6SXNzdWU2NzU0MDAwNzk=", "number": 71169, "title": "Refresh_Inventory Inconsistent Behavior (# FIXME: flush inventory cache) ", "user": {"login": "olivereri", "id": 31904439, "node_id": "MDQ6VXNlcjMxOTA0NDM5", "avatar_url": "https://avatars0.githubusercontent.com/u/31904439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olivereri", "html_url": "https://github.com/olivereri", "followers_url": "https://api.github.com/users/olivereri/followers", "following_url": "https://api.github.com/users/olivereri/following{/other_user}", "gists_url": "https://api.github.com/users/olivereri/gists{/gist_id}", "starred_url": "https://api.github.com/users/olivereri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olivereri/subscriptions", "organizations_url": "https://api.github.com/users/olivereri/orgs", "repos_url": "https://api.github.com/users/olivereri/repos", "events_url": "https://api.github.com/users/olivereri/events{/privacy}", "received_events_url": "https://api.github.com/users/olivereri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-08-08T02:06:31Z", "updated_at": "2020-08-13T00:59:53Z", "closed_at": "2020-08-11T15:06:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nrefresh_inventory appears to not work consistently. Others with this issue discussed here:\r\nhttps://stackoverflow.com/questions/29003420/reload-ansibles-dynamic-inventory/39380217#39380217\r\n\r\nhttps://github.com/ansible/ansible/blob/3a5bd5be1828703bbaedcda80bf745d1c665f259/lib/ansible/inventory/manager.py#L318-L322\r\n\r\nLooking for context from @bcoca on what is behind the \"Fixme\" comment. Interested in understanding this because I'm looking at working on it for a project.  Do you remember anything about this? \r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nmeta\r\nmanager.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.11\r\n  config file = None\r\n  configured module search path = [u'/home/eoliver/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/eoliver/Projects/agile6/va.gov/ansible/lib/ansible\r\n  executable location = /home/eoliver/Projects/agile6/va.gov/ansible/bin/ansible\r\n  python version = 2.7.18 (default, Aug  6 2020, 15:46:40) [GCC 9.3.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nANSIBLE_FORCE_COLOR(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = True\r\nANSIBLE_PIPELINING(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = -C -o ControlMaster=auto -o ServerAliveInterval=60\r\nANSIBLE_SSH_CONTROL_PATH(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = /tmp/%%h-%%p-%%r\r\nANSIBLE_SSH_RETRIES(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = 2\r\nDEFAULT_CALLBACK_WHITELIST(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = [u'profile_tasks']\r\nDEFAULT_FILTER_PLUGIN_PATH(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = [u'/home/eoliver/Projects/agile6/va.gov/devops/ansible/filter_plugins']\r\nDEFAULT_HOST_LIST(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = [u'/home/eoliver/Projects/agile6/va.gov/devops/ansible/inventory']\r\nDEFAULT_MODULE_PATH(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = [u'/home/eoliver/Projects/agile6/va.gov/devops/ansible/library']\r\nDEFAULT_REMOTE_USER(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = dsva\r\nDEFAULT_ROLES_PATH(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = [u'/home/eoliver/Projects/agile6/va.gov/devops/ansible', u'/home/eoliver/Projects/agile6/va.gov/devops/ansible/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = yaml\r\nHOST_KEY_CHECKING(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = False\r\nRETRY_FILES_ENABLED(/home/eoliver/Projects/agile6/va.gov/devops/ansible/ansible.cfg) = False\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nStill working on a test cases.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nStill working on a test cases.\r\n\r\n\r\n##### ACTUAL RESULTS\r\nStill working on a test cases.\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71163", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71163/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71163/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71163/events", "html_url": "https://github.com/ansible/ansible/issues/71163", "id": 675301262, "node_id": "MDU6SXNzdWU2NzUzMDEyNjI=", "number": 71163, "title": "Buiild reverse dictionary with duplicate values in the original dictionary", "user": {"login": "papiveron", "id": 5762296, "node_id": "MDQ6VXNlcjU3NjIyOTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5762296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/papiveron", "html_url": "https://github.com/papiveron", "followers_url": "https://api.github.com/users/papiveron/followers", "following_url": "https://api.github.com/users/papiveron/following{/other_user}", "gists_url": "https://api.github.com/users/papiveron/gists{/gist_id}", "starred_url": "https://api.github.com/users/papiveron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/papiveron/subscriptions", "organizations_url": "https://api.github.com/users/papiveron/orgs", "repos_url": "https://api.github.com/users/papiveron/repos", "events_url": "https://api.github.com/users/papiveron/events{/privacy}", "received_events_url": "https://api.github.com/users/papiveron/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-07T21:31:56Z", "updated_at": "2020-08-07T21:50:50Z", "closed_at": "2020-08-07T21:50:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have a `ansible` dictionary fact `vm_templates` looking like this :\r\n\r\n     {\r\n            \"HostedEngine\": \"00000000-0000-0000-0000-000000000000\", \r\n            \"cpu-node0\": \"2d826ed8-1dbe-4b10-93a1-5ac9734462cb\", \r\n            \"cpu-node1\": \"2d826ed8-1dbe-4b10-93a1-5ac9734462cb\", \r\n            \"cpu-node2\": \"2d826ed8-1dbe-4b10-93a1-5ac9734462cb\", \r\n            \"cpu-node3\": \"2d826ed8-1dbe-4b10-93a1-5ac9734462cb\", \r\n            \"fp_gpu-node0\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node1\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node10\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node11\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node2\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node3\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node4\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node5\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node6\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node7\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node8\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"fp_gpu-node9\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node0\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node1\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node2\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node3\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node4\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node5\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node6\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"hp_gpu-node7\": \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\", \r\n            \"infra-vm\": \"00000000-0000-0000-0000-000000000000\"\r\n        }\r\n\r\nI would like to build a flipping dictionary from the above one, taking into account keys with duplicate values. \r\nSo I would like to associate each value from the first dictionary with its keys in a list, and keys having duplicate values in the old dictionary will be in the same list value.\r\n\r\nHere is the result I'm trying to get, using `ansible` :\r\n\r\n     {\r\n            \"00000000-0000-0000-0000-000000000000\": [\"HostedEngine\", \"infra-vm\"], \r\n            \"2d826ed8-1dbe-4b10-93a1-5ac9734462cb\": [\"cpu-node0\", \"cpu-node1\", \"cpu-node2\", \"cpu-node3\"], \r\n           \"a08901c0-50a5-4e2f-b6d7-b11b69a32613\": [\"fp_gpu-node0\", \"fp_gpu-node1\", \"fp_gpu-node10\", \"fp_gpu-node11\", \"fp_gpu-node2\", \"fp_gpu-node3\", \"fp_gpu-node4\", \"fp_gpu-node5\", \"fp_gpu-node6\", \"fp_gpu-node7\", \"fp_gpu-node8\", \"fp_gpu-node9\", \"hp_gpu-node0\", \"hp_gpu-node1\", \"hp_gpu-node2\", \"hp_gpu-node3\", \"hp_gpu-node4\", \"hp_gpu-node5\", \"hp_gpu-node6\", \"hp_gpu-node7\"]\r\n     }\r\n\r\nIn python I would have written something like :\r\n\r\n\r\n    reverse_templates = {} \r\n  \r\n\r\n    for key, value in vm_template.items(): \r\n        if value not in reverse_templates: \r\n            reverse_templates[value] = [key] \r\n        else: \r\n            reverse_templates[value].append(key)\r\n\r\n \r\n  Here is what I tried in `ansible`, which doesn't work : \r\n\r\n    - name: \"Associate each template with related VMs list\"\r\n      set_fact:\r\n        reverse_templates: \"{{reverse_templates|default({})|combine({item.value:{% if item.value not in reverse_teplates %}value[item.key]{% else %}reverse_templates[item.value] + [item.key]{% endif %}})}}\"\r\n      loop: \"{{lookup('dict', vm_templates)}}\"\r\n\r\nHere is the error :\r\n```\r\nTASK [Associate each template with related VMs list] *******************************************************************************************************************************************************\r\nfatal: [localhost]: FAILED! => {\"msg\": \"template error while templating string: unexpected '%'. String: {{reverse_templates|default({})|combine({item.value:{% if item.value not in reverse_teplates %}value[item.key]{% else %}reverse_templates[item.value] + [item.key]{% endif %}})}}\"}\r\n```\r\n\r\nPlease any good approach to get there using `ansible`?\r\n\r\nRegards", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71154", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71154/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71154/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71154/events", "html_url": "https://github.com/ansible/ansible/issues/71154", "id": 675110077, "node_id": "MDU6SXNzdWU2NzUxMTAwNzc=", "number": 71154, "title": "\u201cUnable to connect to vCenter or ESXi API at 192.11.11.111 on TCP/443: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:618)\u201d", "user": {"login": "kaizenlpi", "id": 5349167, "node_id": "MDQ6VXNlcjUzNDkxNjc=", "avatar_url": "https://avatars0.githubusercontent.com/u/5349167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaizenlpi", "html_url": "https://github.com/kaizenlpi", "followers_url": "https://api.github.com/users/kaizenlpi/followers", "following_url": "https://api.github.com/users/kaizenlpi/following{/other_user}", "gists_url": "https://api.github.com/users/kaizenlpi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaizenlpi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaizenlpi/subscriptions", "organizations_url": "https://api.github.com/users/kaizenlpi/orgs", "repos_url": "https://api.github.com/users/kaizenlpi/repos", "events_url": "https://api.github.com/users/kaizenlpi/events{/privacy}", "received_events_url": "https://api.github.com/users/kaizenlpi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 61528803, "node_id": "MDU6TGFiZWw2MTUyODgwMw==", "url": "https://api.github.com/repos/ansible/ansible/labels/cloud", "name": "cloud", "color": "4071a5", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991469279, "node_id": "MDU6TGFiZWwxOTkxNDY5Mjc5", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.vmware", "name": "collection:community.vmware", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 427121291, "node_id": "MDU6TGFiZWw0MjcxMjEyOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/vmware", "name": "vmware", "color": "c5def5", "default": false, "description": "VMware community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-07T16:01:03Z", "updated_at": "2020-08-12T16:30:51Z", "closed_at": "2020-08-07T16:09:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### SUMMARY\r\nI'm running a playbook against a host and getting this error: ` \"msg\": \"Unable to connect to vCenter or ESXi API at 192.11.11.111 on TCP/443: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:618)\"\r\n\r\nWe are using vcenter 6.5. I have a playbook that should let ansible controller talk to the vsphere vcenter. I exported the trusted root SSL certificates from the vsphere home page. Copied over to my ansible controller and installed with:\r\n\r\n`sudo mv 9dab0099.0.crt 9dab0099.r0.crl 11ec582d.0.crt /etc/pki/ca-trust/source/anchors\r\n \r\nsudo update-ca-trust force -enable\r\n \r\nsudo update-ca-trust extract`\r\n\r\n- able to telnet to the host on 443\r\n- able to ping host continously\r\n- tried changing validate_certs to: no\r\n- tried changing validate_certs to: yes\r\n- tried changing validate_certs to: false\r\n- tried with python 2.7.5 and 3.6.8\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nvmware_guest module\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\n2.9.10\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n```\r\nAnsible \u201cmsg\u201d: \u201cUnable to connect to vCenter or ESXi API at IP on TCP/443: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:618)\u201d\r\n\r\n\"stats\": { \r\n192.1.11.111\": {\r\n\"changed\": 0,\r\n\"failures\": 1, \r\n\"ignored\": 0, \r\nok: 1, \r\n\"rescued\":0,\r\n\"skipped\": 0,\r\n\"unreachable\": 0\r\n    }\r\n}\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nRhel 7 \r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nRun playbook with extra vars\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n``\r\n- name: Add an additional cpu to virtual machine server\r\n  hosts: '{{ target }}' \r\n  \r\n  tasks: \r\n    - name: Login into vCenter and get cookies\r\n      vmware_guest: \r\n        hostname: \"{{ vcenter_hostname }}\"\r\n        username: \"{{ vcenter_username }}\"\r\n        password: \"{{ vcenter_password }}\"\r\n        folder: \"{{ vm_folder }}\"   \r\n        cluster: \"{{ vcenter_cluster }}\"\r\n        datacenter: \"{{ vcenter_datacenter }}\"\r\n        name: \"{{ vm_name }}\"\r\n    - name:\r\n      uri:\r\n        url: https://{{ vcenter_hostname }} #/rest/com/vmware/cis/session\r\n        force_basic_auth: yes\r\n        validate_certs: no\r\n        method: POST\r\n        hostname: \"{{ vcenter_hostname }}\"\r\n        username: \"{{ vcenter_username }}\"\r\n        password: \"{{ vcenter_password }}\"\r\n        folder: \"{{ vm_folder }}\"   \r\n        cluster: \"{{ vcenter_cluster }}\"\r\n        datacenter: \"{{ vcenter_datacenter }}\"\r\n        name: \"{{ vm_name }}\"\r\n      #register: login\r\n  \r\n    - name: Stop virtual machine\r\n      vmware_guest:\r\n        hostname: \"{{ vcenter_hostname }}\"\r\n        username: \"{{ vcenter_username }}\"\r\n        password: \"{{ vcenter_password }}\"\r\n        validate_certs: no\r\n        folder: \"{{ vm_folder }}\"   \r\n        cluster: \"{{ vcenter_cluster }}\"\r\n        datacenter: \"{{ vcenter_datacenter }}\"\r\n        name: \"{{ vm_name }}\"\r\n        state: \"poweredoff\"\r\n\r\n    - name: reconfigure CPU and RAM of VM\r\n      vmware_guest:\r\n        hostname: \"{{ vcenter_hostname }}\"\r\n        username: \"{{ vcenter_username }}\"\r\n        password: \"{{ vcenter_password }}\"\r\n        cluster: \"{{ vcenter_cluster }}\"\r\n        datacenter: \"{{ vcenter_datacenter }}\"\r\n        name: \"{{ vm_name }}\"\r\n        state: \"present\"\r\n        validate_certs: \"false\"\r\n        folder: \"{{ vm_folder }}\"\r\n        hardware:\r\n          memory_gb: \"{{ memory }}\"\r\n          num_cpus: \"{{ cpu }}\"\r\n        scsi: \"lsilogic\"\r\nansible-playbook add_vmcpu_lin.yml --extra-vars \"target=168.11.111.111 vcenter_hostname=192.1.11.111 vcenter_username=myusername vcenter_password=mypassword vm_folder=myfolder vcenter_cluster=myclutster vcenter_datacenter=mydc vm_name=myvm memory=5 cpu=3\" \r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nExpecting ansible controller to make connection with vsphere. \r\n\r\n\r\n##### ACTUAL RESULTS\r\nI get the SSL error above. \r\n\r\nCommand \r\n\r\n\r\nError:  \r\n\"msg\": \"Unable to connect to vCenter or ESXi API at 192.1.11.11.111 on TCP/443: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:618)\" \r\n\r\n                        } \r\n\r\n                    }, \r\n\r\n                    \"task\": { \r\n\r\n                        \"duration\": { \r\n\r\n                            \"end\": \"2020-08-07T15:57:22.076038Z\", \r\n\r\n                            \"start\": \"2020-08-07T15:57:21.249414Z\" \r\n\r\n                        }, \r\n\r\n                        \"id\": \"005056b9-997e-3683-1d66-00000000000e\", \r\n\r\n                        \"name\": \"Login into vCenter and get cookies\" \r\n\r\n                    } \r\n\r\n                } \r\n\r\n            ] \r\n\r\n        } \r\n\r\n    ], \r\n\r\n    \"stats\": { \r\n\r\n        \"168.11.11.111\": { \r\n\r\n            \"changed\": 0, \r\n\r\n            \"failures\": 1, \r\n\r\n            \"ignored\": 0, \r\n\r\n            \"ok\": 1, \r\n\r\n            \"rescued\": 0, \r\n\r\n            \"skipped\": 0, \r\n\r\n            \"unreachable\": 0 \r\n\r\n        } \r\n\r\n    } \r\n\r\n} \r\n\r\n \r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71150", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71150/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71150/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71150/events", "html_url": "https://github.com/ansible/ansible/issues/71150", "id": 675023927, "node_id": "MDU6SXNzdWU2NzUwMjM5Mjc=", "number": 71150, "title": "Nsupdate failed to determine right zone if tsig used", "user": {"login": "AKorezin", "id": 5399964, "node_id": "MDQ6VXNlcjUzOTk5NjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/5399964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AKorezin", "html_url": "https://github.com/AKorezin", "followers_url": "https://api.github.com/users/AKorezin/followers", "following_url": "https://api.github.com/users/AKorezin/following{/other_user}", "gists_url": "https://api.github.com/users/AKorezin/gists{/gist_id}", "starred_url": "https://api.github.com/users/AKorezin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AKorezin/subscriptions", "organizations_url": "https://api.github.com/users/AKorezin/orgs", "repos_url": "https://api.github.com/users/AKorezin/repos", "events_url": "https://api.github.com/users/AKorezin/events{/privacy}", "received_events_url": "https://api.github.com/users/AKorezin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1932404776, "node_id": "MDU6TGFiZWwxOTMyNDA0Nzc2", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.general", "name": "collection:community.general", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 593252542, "node_id": "MDU6TGFiZWw1OTMyNTI1NDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/net_tools", "name": "net_tools", "color": "4071a5", "default": false, "description": "Net-tools category"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-07T13:40:39Z", "updated_at": "2020-08-12T16:30:48Z", "closed_at": "2020-08-07T13:48:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nNsupdate failed to determine right zone if tsig key used and dns server uses split view based on key.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nnsupdate\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.11\r\n  config file = /tmp/test/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.5 (default, Jul 27 2020, 08:42:51) [GCC 10.1.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```paste below\r\nANSIBLE_PIPELINING(/tmp/test/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/tmp/test/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=60s\r\nDEFAULT_HOST_LIST(/tmp/test/ansible.cfg) = ['/tmp/test/hosts']\r\nDEFAULT_PRIVATE_KEY_FILE(/tmp/test/ansible.cfg) = /tmp/test/files/keys/ansible.key\r\nDEFAULT_REMOTE_USER(/tmp/test/ansible.cfg) = ansible\r\nINTERPRETER_PYTHON(/tmp/test/ansible.cfg) = auto_silent\r\nRETRY_FILES_ENABLED(/tmp/test/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nRunner: `archlinux` with `python 3.8.5`.\r\nDns server: `bind9 9.11` with split view configured based on tsig key and source ip.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n`./hosts`\r\n```\r\nlocalhost ansible_connection=local\r\n```\r\n`./group_vars/all/dns.yml`\r\n```yaml\r\ndns_hosts:\r\n  - 192.168.0.1\r\ndomains:\r\n  - domain: example.personaldomain\r\n    challenges:\r\n      - 0123456789abcdef\r\n```\r\n`./roles/nsupdate/tasks/main.yml`\r\n```yaml\r\n---\r\n- name: Execute nsupdate\r\n  nsupdate:\r\n    server: \"{{ item.0 }}\"\r\n    record: \"_acme-challenge.{{ item.1.domain }}.\"\r\n    type: \"TXT\"\r\n    value: \"{{ item.1.challenges }}\"\r\n    state: \"{{ state }}\"\r\n    key_algorithm: \"hmac-sha512\"\r\n    key_name: \"{{ key_name }}\"\r\n    key_secret: \"{{ key_value }}\"\r\n  loop: \"{{ dns_hosts | product(domains) | list }}\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nDns zone update executed\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nLocal result:\r\n```\r\nfailed: [localhost] (item=['192.168.0.1', {'domain': 'example.personaldomain', 'challenges': ['0123456789abcdef']}]) => {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python3\"}, \"ansible_loop_var\": \"item\", \"changed\": false, \"dns_rc\": 9, \"dns_rc_str\": \"NOTAUTH\", \"item\": [\"192.168.0.1\", {\"challenges\": [\"0123456789abcdef\"], \"domain\": \"example.personaldomain\"}], \"msg\": \"Failed to create DNS record (rc: 9)\"}\r\n```\r\nDns log:\r\n```\r\nclient @0x7fc000000000 192.168.0.2#42666/key samplekey: view test1: updating zone 'personaldomain/IN': update failed: not authoritative for update zone (NOTAUTH)\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n`nsupdate.py`\r\n```python\r\n...\r\nself.zone = dns.resolver.zone_for_name(self.module.params['record']).to_text()\r\n...\r\n```\r\nThis part of file executed without keyring like in #63174. So it produce incorrect result, because it will pass to view where zone `example.presonaldomain` exists and set `self.zone` to incorrect value `example.personaldomain`.\r\n\r\nIf it will use keyring then it would pass to another view where zone is configured in other way so `self.zone` will be `personaldomain`. Zone `example.personaldomain` is not defined in this view at all.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71149", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71149/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71149/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71149/events", "html_url": "https://github.com/ansible/ansible/issues/71149", "id": 675018472, "node_id": "MDU6SXNzdWU2NzUwMTg0NzI=", "number": 71149, "title": "vmware_guest module provision from template NIC start_connected reporting FALSE", "user": {"login": "jameshixon", "id": 8656990, "node_id": "MDQ6VXNlcjg2NTY5OTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/8656990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jameshixon", "html_url": "https://github.com/jameshixon", "followers_url": "https://api.github.com/users/jameshixon/followers", "following_url": "https://api.github.com/users/jameshixon/following{/other_user}", "gists_url": "https://api.github.com/users/jameshixon/gists{/gist_id}", "starred_url": "https://api.github.com/users/jameshixon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jameshixon/subscriptions", "organizations_url": "https://api.github.com/users/jameshixon/orgs", "repos_url": "https://api.github.com/users/jameshixon/repos", "events_url": "https://api.github.com/users/jameshixon/events{/privacy}", "received_events_url": "https://api.github.com/users/jameshixon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 61528803, "node_id": "MDU6TGFiZWw2MTUyODgwMw==", "url": "https://api.github.com/repos/ansible/ansible/labels/cloud", "name": "cloud", "color": "4071a5", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991469279, "node_id": "MDU6TGFiZWwxOTkxNDY5Mjc5", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.vmware", "name": "collection:community.vmware", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 427121291, "node_id": "MDU6TGFiZWw0MjcxMjEyOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/vmware", "name": "vmware", "color": "c5def5", "default": false, "description": "VMware community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-07T13:31:33Z", "updated_at": "2020-08-12T16:30:47Z", "closed_at": "2020-08-07T13:39:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nProvisioning VM from Windows Server 2008r2 template in vSphere Client version 7.0.0.10400 with start_connected set as TRUE in vmware_guest module actually provisions server with start_connected set as FALSE.\r\nCloning from same template manually in vSphere, the network adapter starts in connected state.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nvmware_guest \r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.9\r\n  config file = /home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg\r\n  configured module search path = [u'/home/jameshixonsa@oscn.net/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDEFAULT_CALLBACK_WHITELIST(/home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg) = [u'timer', u'profile_tasks']\r\nDEFAULT_HOST_LIST(/home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg) = [u'/home/jameshixonsa@oscn.net/ansible_devops_james/environments/dev2223/hosts']\r\nDEFAULT_ROLES_PATH(/home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg) = [u'/home/jameshixonsa@oscn.net/ansible_devops_james/roles']\r\nDEFAULT_STDOUT_CALLBACK(/home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg) = debug\r\nDEFAULT_VAULT_IDENTITY_LIST(/home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg) = [u'devqa@/ansvaulted/.vault-pass.devqa', u'prod@/ansvaulted/.vault-pass.prod']\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nVMware vSphere Client version 7.0.0.10400\r\nHypervisor VMMware ESXi, 6.5.0, 15256549\r\nNetwork Adapter vmxnet3\r\nGuest OS: Microsoft Windows Server 2008 R2 (64-bit)\r\nCompatibility:\tESXi 6.5 and later (VM version 13)\r\nVMware Tools:\tRunning, version:11265 (Current)\r\nPowerShell 5.1\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nCreate Windows 2008r2 VMWare template in vSphere, run vmware_guest playbook from Ansible controller.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Create VM from template\r\n  vmware_guest:\r\n    validate_certs: False\r\n    hostname: \"{{ vcenter_hostname }}\"\r\n    username: \"{{ vcenter_username }}\"\r\n    password: \"{{ vault_vmware_password }}\"\r\n    annotation: \"{{ guest_notes }}\"\r\n    datacenter: OSCN\r\n    datastore: \"{{ guest_datastore }}\"\r\n    cluster: \"{{ guest_custom_cluster }}\"\r\n    folder: \"{{ custom_vm_folder }}\"\r\n    state: present\r\n    force: yes\r\n    name: \"{{ inventory_hostname }}\"\r\n    template: \"{{ custom_template }}\"\r\n    networks:\r\n    - name: \"{{ custom_VLAN }}\"\r\n      state: present\r\n      type: static\r\n      ip: \"{{ guest_custom_ip }}\"\r\n      netmask: 255.255.255.0\r\n      gateway: \"{{ guest_custom_gateway }}\"\r\n      domain: \"{{ guest_custom_domain }}\"\r\n      dns_servers:\r\n      - \"{{ guest_custom_dns }}\"\r\n      start_connected: true\r\n      allow_guest_control: true\r\n    wait_for_ip_address: True\r\n    customization:\r\n      autologon: yes\r\n      domain: \"{{ guest_custom_domain }}\"\r\n      joindomain: \"{{ guest_custom_domain }}\"\r\n      domainadmin: oscn\\svcautomation\r\n      domainadminpassword: \"{{ vault_domainadminpassword }}\"\r\n      fullname: svc_automation_local\r\n      password: \"{{ local_password }}\"\r\n      productid: \"{{ guest_productid }}\"\r\n      timezone: '020'\r\n    wait_for_customization: True\r\n  delegate_to: localhost\r\n  register: provision_vm\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nExpected result would be provisioned VM from template with network adapter in connected stated based upon vmware_guest module with start_connected as TRUE allowing further config and playbook to finish run.\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nAfter verifying that the Windows 2008r2 SP1 template's vmx file contains no reference to ethernet0.startConnected = \"FALSE\", after the server is provisioned with vmware_guest module with start_connected as true, the new server's vmx file contains a line with ethernet0.startConnected = \"FALSE\". This prevents further configuration of new server with vmware_guest module and Ansible Controller due to ethernet adapter in disconnected state and playbook run hangs.\r\n\r\nLine 674 2020-08-07T13:16:19.625Z| vmx| I125: DICT  ethernet0.startConnected = \"FALSE\" in attached vmware logs\r\n[vmware.log](https://github.com/ansible/ansible/files/5041593/vmware.log)\r\n\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\njameshixonsa@oscn.net@l1e5dvopf1501:~/ansible_devops_james$ ansible-playbook -i environments/systest192 -l OCISL1WEB19201 win_iis_server_ocisprovision.yml -vvvv\r\nansible-playbook 2.9.9\r\n  config file = /home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg\r\n  configured module search path = [u'/home/jameshixonsa@oscn.net/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\nUsing /home/jameshixonsa@oscn.net/ansible_devops_james/ansible.cfg as config file\r\nsetting up inventory plugins\r\nhost_list declined parsing /home/jameshixonsa@oscn.net/ansible_devops_james/environments/systest192/hosts as it did not pass its verify_file() method\r\nscript declined parsing /home/jameshixonsa@oscn.net/ansible_devops_james/environments/systest192/hosts as it did not pass its verify_file() method\r\nauto declined parsing /home/jameshixonsa@oscn.net/ansible_devops_james/environments/systest192/hosts as it did not pass its verify_file() method\r\nParsed /home/jameshixonsa@oscn.net/ansible_devops_james/environments/systest192/hosts inventory source with ini plugin\r\nLoading callback plugin debug of type stdout, v2.0 from /usr/lib/python2.7/dist-packages/ansible/plugins/callback/debug.pyc\r\nLoading callback plugin profile_tasks of type aggregate, v2.0 from /usr/lib/python2.7/dist-packages/ansible/plugins/callback/profile_tasks.pyc\r\nLoading callback plugin timer of type aggregate, v2.0 from /usr/lib/python2.7/dist-packages/ansible/plugins/callback/timer.pyc\r\n\r\nPLAYBOOK: win_iis_server_ocisprovision.yml *************************************************************************************************************************************\r\nPositional arguments: win_iis_server_ocisprovision.yml\r\nsubset: OCISL1WEB19201\r\nbecome_method: sudo\r\ninventory: (u'/home/jameshixonsa@oscn.net/ansible_devops_james/environments/systest192',)\r\nforks: 5\r\ntags: (u'all',)\r\nverbosity: 4\r\nconnection: smart\r\ntimeout: 10\r\n1 plays in win_iis_server_ocisprovision.yml\r\n\r\nPLAY [all] *********************************************************************************************************************************************************************\r\nMETA: ran handlers\r\nTrying secret FileVaultSecret(filename='/ansvaulted/.vault-pass.devqa') for vault_id=devqa\r\n\r\nTASK [Provision Server in VMWare] **********************************************************************************************************************************************\r\ntask path: /home/jameshixonsa@oscn.net/ansible_devops_james/win_iis_server_ocisprovision.yml:5\r\nFriday 07 August 2020  08:07:58 -0500 (0:00:00.164)       0:00:00.164 ********* \r\n\r\nTASK [vmware : Create VM from template] ****************************************************************************************************************************************\r\ntask path: /home/jameshixonsa@oscn.net/ansible_devops_james/roles/vmware/tasks/2008r2provision.yml:1\r\nFriday 07 August 2020  08:07:58 -0500 (0:00:00.358)       0:00:00.523 ********* \r\n<localhost> ESTABLISH LOCAL CONNECTION FOR USER: jameshixonsa@oscn.net\r\n<localhost> EXEC /bin/sh -c 'echo '\"'\"'~jameshixonsa@oscn.net'\"'\"' && sleep 0'\r\n<localhost> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /var/tmp `\"&& mkdir /var/tmp/ansible-tmp-1596805678.71-65763-70078216645104 && echo ansible-tmp-1596805678.71-65763-70078216645104=\"` echo /var/tmp/ansible-tmp-1596805678.71-65763-70078216645104 `\" ) && sleep 0'\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/cloud/vmware/vmware_guest.py\r\n<localhost> PUT /home/jameshixonsa@oscn.net/.ansible/tmp/ansible-local-65755t8g1bq/tmpxWug_D TO /var/tmp/ansible-tmp-1596805678.71-65763-70078216645104/AnsiballZ_vmware_guest.py\r\n<localhost> EXEC /bin/sh -c 'setfacl -m '\"'\"'u:OSCN\\SVCAutomation:r-x'\"'\"' /var/tmp/ansible-tmp-1596805678.71-65763-70078216645104/ /var/tmp/ansible-tmp-1596805678.71-65763-70078216645104/AnsiballZ_vmware_guest.py && sleep 0'\r\n<localhost> EXEC /bin/sh -c '/usr/bin/python2 /var/tmp/ansible-tmp-1596805678.71-65763-70078216645104/AnsiballZ_vmware_guest.py && sleep 0'\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71148", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71148/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71148/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71148/events", "html_url": "https://github.com/ansible/ansible/issues/71148", "id": 675014330, "node_id": "MDU6SXNzdWU2NzUwMTQzMzA=", "number": 71148, "title": "nios_host_record error when trying to change ip of host record", "user": {"login": "martinberg", "id": 9891659, "node_id": "MDQ6VXNlcjk4OTE2NTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/9891659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinberg", "html_url": "https://github.com/martinberg", "followers_url": "https://api.github.com/users/martinberg/followers", "following_url": "https://api.github.com/users/martinberg/following{/other_user}", "gists_url": "https://api.github.com/users/martinberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinberg/subscriptions", "organizations_url": "https://api.github.com/users/martinberg/orgs", "repos_url": "https://api.github.com/users/martinberg/repos", "events_url": "https://api.github.com/users/martinberg/events{/privacy}", "received_events_url": "https://api.github.com/users/martinberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1932404776, "node_id": "MDU6TGFiZWwxOTMyNDA0Nzc2", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.general", "name": "collection:community.general", "color": "ededed", "default": false, "description": null}, {"id": 913847981, "node_id": "MDU6TGFiZWw5MTM4NDc5ODE=", "url": "https://api.github.com/repos/ansible/ansible/labels/infoblox", "name": "infoblox", "color": "c5def5", "default": false, "description": "Infoblox NIOS"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 593252542, "node_id": "MDU6TGFiZWw1OTMyNTI1NDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/net_tools", "name": "net_tools", "color": "4071a5", "default": false, "description": "Net-tools category"}, {"id": 339653091, "node_id": "MDU6TGFiZWwzMzk2NTMwOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/networking", "name": "networking", "color": "4071a5", "default": false, "description": "Network category"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-07T13:24:46Z", "updated_at": "2020-08-12T16:30:46Z", "closed_at": "2020-08-07T13:32:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nIt doesn't seem to be possible to change the ip of a host record with nios_host_record. Ansible returns an error that \"The record 'test.example.com' already exists\"\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nnios_host_record\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.11\r\n  config file = /home/user/temp/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/user/.local/bin/ansible\r\n  python version = 3.6.8 (default, Jun 11 2019, 15:15:01) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nDEFAULT_HOST_LIST(/home/user/temp/ansible/ansible.cfg) = ['/home/user/temp/ansible/hosts']\r\nHOST_KEY_CHECKING(/home/user/temp/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nlocalhost: RHEL 7.7\r\nInfoblox: 8.2.4\r\n\r\n##### STEPS TO REPRODUCE\r\nThere is an existing host record in the \"EXTERN\" DNS view called 'testdomain.x.com' with IP-adress '1.1.1.99'\r\n\r\n```\r\n- name: DNS change host ip\r\n  hosts: localhost\r\n  connection: local\r\n  vars:\r\n    nios_provider:\r\n      host: infoblox-host\r\n      username: user\r\n      password: passwd\r\n\r\n    dns_revert_list:\r\n      - {hostname: \"testdomain.x.com\", ip: \"1.1.1.100\", dnsview: \"EXTERN\"}\r\n\r\n  tasks:\r\n  - name: Change host record IP\r\n    nios_host_record:\r\n      name: \"{{ item.hostname }}\"\r\n      ipv4:\r\n        - address: \"{{ item.ip }}\"\r\n      view: \"{{ item.dnsview }}\"\r\n      state: present\r\n      provider: \"{{ nios_provider }}\"\r\n    with_items: \"{{ dns_revert_list }}\"\r\n    tags:\r\n    - site2ip\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nIP of host record to be changed\r\n\r\n\r\n##### ACTUAL RESULTS\r\nError saying the record already exists. No change was made in the Infoblox environment.\r\n\r\n```\r\nfailed: [localhost] (item={'hostname': 'testdomain.x.com', 'ip': '1.1.1.100', 'dnsview': 'EXTERN'}) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"code\": \"Client.Ibap.Data.Conflict\", \"item\": {\"dnsview\": \"EXTERN\", \"hostname\": \"testdomain.x.com\", \"ip\": \"1.1.1.100\"}, \"msg\": \"The record 'testdomain.x.com' already exists.\", \"operation\": \"create_object\", \"type\": \"AdmConDataError\"}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71147", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71147/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71147/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71147/events", "html_url": "https://github.com/ansible/ansible/issues/71147", "id": 675008431, "node_id": "MDU6SXNzdWU2NzUwMDg0MzE=", "number": 71147, "title": "I want to use ansible register nested output into another playbook", "user": {"login": "karthikvemula", "id": 44648255, "node_id": "MDQ6VXNlcjQ0NjQ4MjU1", "avatar_url": "https://avatars1.githubusercontent.com/u/44648255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karthikvemula", "html_url": "https://github.com/karthikvemula", "followers_url": "https://api.github.com/users/karthikvemula/followers", "following_url": "https://api.github.com/users/karthikvemula/following{/other_user}", "gists_url": "https://api.github.com/users/karthikvemula/gists{/gist_id}", "starred_url": "https://api.github.com/users/karthikvemula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karthikvemula/subscriptions", "organizations_url": "https://api.github.com/users/karthikvemula/orgs", "repos_url": "https://api.github.com/users/karthikvemula/repos", "events_url": "https://api.github.com/users/karthikvemula/events{/privacy}", "received_events_url": "https://api.github.com/users/karthikvemula/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-07T13:14:57Z", "updated_at": "2020-08-11T07:37:35Z", "closed_at": "2020-08-07T13:31:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "register: testserver.openstack.public_v4 , I will get public ip using this but I want to pass public to loadbalancer playbook input,so please tell me how can I pass...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71146", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71146/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71146/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71146/events", "html_url": "https://github.com/ansible/ansible/issues/71146", "id": 674992058, "node_id": "MDU6SXNzdWU2NzQ5OTIwNTg=", "number": 71146, "title": "Ansible Expect module fails on second run", "user": {"login": "at-byte", "id": 55209032, "node_id": "MDQ6VXNlcjU1MjA5MDMy", "avatar_url": "https://avatars2.githubusercontent.com/u/55209032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/at-byte", "html_url": "https://github.com/at-byte", "followers_url": "https://api.github.com/users/at-byte/followers", "following_url": "https://api.github.com/users/at-byte/following{/other_user}", "gists_url": "https://api.github.com/users/at-byte/gists{/gist_id}", "starred_url": "https://api.github.com/users/at-byte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/at-byte/subscriptions", "organizations_url": "https://api.github.com/users/at-byte/orgs", "repos_url": "https://api.github.com/users/at-byte/repos", "events_url": "https://api.github.com/users/at-byte/events{/privacy}", "received_events_url": "https://api.github.com/users/at-byte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 942378949, "node_id": "MDU6TGFiZWw5NDIzNzg5NDk=", "url": "https://api.github.com/repos/ansible/ansible/labels/traceback", "name": "traceback", "color": "ededed", "default": false, "description": "This issue/PR includes a traceback."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-07T12:46:04Z", "updated_at": "2020-08-11T07:37:35Z", "closed_at": "2020-08-11T02:12:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n##### SUMMARY\r\nI am using Expect module to invoke a shell and enter the responses. It works doe the first time and in the next runs it fails giving the following stack:\r\n\r\n\r\n```\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/ /var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/usr/local/Cellar/ansible/2.9.11/libexec/bin/python3.8 /var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/ > /dev/null 2>&1 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py\", line 102, in <module>\r\n    _ansiballz_main()\r\n  File \"/var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py\", line 94, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py\", line 40, in invoke_module\r\n    runpy.run_module(mod_name='ansible.modules.commands.expect', init_globals=None, run_name='__main__', alter_sys=True)\r\n  File \"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\", line 207, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\", line 97, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/tmp/ansible_expect_payload_bgxn7xob/ansible_expect_payload.zip/ansible/modules/commands/expect.py\", line 246, in <module>\r\n  File \"/tmp/ansible_expect_payload_bgxn7xob/ansible_expect_payload.zip/ansible/modules/commands/expect.py\", line 203, in main\r\n  File \"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/run.py\", line 99, in run\r\n    child = spawn(command, timeout=timeout, maxread=2000, logfile=logfile,\r\n  File \"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/pty_spawn.py\", line 205, in __init__\r\n    self._spawn(command, args, preexec_fn, dimensions)\r\n  File \"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/pty_spawn.py\", line 303, in _spawn\r\n    self.ptyproc = self._spawnpty(self.args, env=self.env,\r\n  File \"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/pty_spawn.py\", line 315, in _spawnpty\r\n    return ptyprocess.PtyProcess.spawn(args, **kwargs)\r\n  File \"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/ptyprocess/ptyprocess.py\", line 330, in spawn\r\n    raise exception\r\nOSError: [Errno 8] Exec format error\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/var/root/.ansible/tmp/ansible-tmp-1596803320.70067-26735-140331233845975/AnsiballZ_expect.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.commands.expect', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\\\", line 207, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\\\", line 97, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\\\", line 87, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/tmp/ansible_expect_payload_bgxn7xob/ansible_expect_payload.zip/ansible/modules/commands/expect.py\\\", line 246, in <module>\\n  File \\\"/tmp/ansible_expect_payload_bgxn7xob/ansible_expect_payload.zip/ansible/modules/commands/expect.py\\\", line 203, in main\\n  File \\\"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/run.py\\\", line 99, in run\\n    child = spawn(command, timeout=timeout, maxread=2000, logfile=logfile,\\n  File \\\"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/pty_spawn.py\\\", line 205, in __init__\\n    self._spawn(command, args, preexec_fn, dimensions)\\n  File \\\"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/pty_spawn.py\\\", line 303, in _spawn\\n    self.ptyproc = self._spawnpty(self.args, env=self.env,\\n  File \\\"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/pexpect/pty_spawn.py\\\", line 315, in _spawnpty\\n    return ptyprocess.PtyProcess.spawn(args, **kwargs)\\n  File \\\"/usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/ptyprocess/ptyprocess.py\\\", line 330, in spawn\\n    raise exception\\nOSError: [Errno 8] Exec format error\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n    \"rc\": 1\r\n}\r\n```\r\n\r\nI tried with both root & non-root user but none work for the second time.\r\n\r\n`sudo ansible-playbook execute-script.yml --ask-vault-pass -vvv`\r\n` ansible-playbook execute-script.yml --ask-vault-pass -vvv`\r\n\r\nThe only way to get around is to wait for some time(couple of minutes-15-30 minutes) before the second run.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\n ansible --version\r\nansible 2.9.11\r\n  config file = None\r\n  configured module search path = ['/Users/test/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Jul 21 2020, 10:48:26) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\n# empty\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nMAC OS Catalina:\r\n10.15.2\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n1.  Place this file somewhere in your local system as `test.sh`\r\n```sh\r\nfunction install_product(){\r\n\r\n\r\n    # For Product install\r\n    printf \"\\x1B[1mDo you want to install product (Yes/No, default: No): \\x1B[0m\"\r\n      #  ans=\"Yes\"\r\n        read -rp \"\" ans\r\n        echo pressed: $ans> step8.txt\r\n\r\n}\r\n\r\ninstall_product\r\n\r\n2. Call the playbook (execute-script.yml)  given below by invoking any of these commands:\r\n\r\n- sudo ansible-playbook execute-script.yml --ask-vault-pass -vvv\r\n- ansible-playbook execute-script.yml --ask-vault-pass -vvv\r\n\r\n```\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- name: Execute User Script\r\n  hosts: localhost\r\n  vars:\r\n    - destdir: ~/tmp\r\n    - random_number: \"{{ 5 | random }}\"\r\n\r\n  tasks:\r\n    # You can use shell to run other executables to perform actions inline\r\n    - name: Execute the script\r\n      no_log: false\r\n      expect:\r\n        timeout: 60\r\n        echo: yes\r\n        chdir: \"{{ destdir }}\"\r\n        command: \"./test.sh\"\r\n        responses:\r\n          (.*)Do you want to install product(.*): 'Yes'\r\n      register: prompt\r\n    - debug:\r\n        var: prompt.stdout_lines\r\n\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71145", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71145/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71145/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71145/events", "html_url": "https://github.com/ansible/ansible/issues/71145", "id": 674962777, "node_id": "MDU6SXNzdWU2NzQ5NjI3Nzc=", "number": 71145, "title": "Lists broken with python 3.8", "user": {"login": "julialongtin", "id": 16826370, "node_id": "MDQ6VXNlcjE2ODI2Mzcw", "avatar_url": "https://avatars0.githubusercontent.com/u/16826370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/julialongtin", "html_url": "https://github.com/julialongtin", "followers_url": "https://api.github.com/users/julialongtin/followers", "following_url": "https://api.github.com/users/julialongtin/following{/other_user}", "gists_url": "https://api.github.com/users/julialongtin/gists{/gist_id}", "starred_url": "https://api.github.com/users/julialongtin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/julialongtin/subscriptions", "organizations_url": "https://api.github.com/users/julialongtin/orgs", "repos_url": "https://api.github.com/users/julialongtin/repos", "events_url": "https://api.github.com/users/julialongtin/events{/privacy}", "received_events_url": "https://api.github.com/users/julialongtin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 947190508, "node_id": "MDU6TGFiZWw5NDcxOTA1MDg=", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.7", "name": "affects_2.7", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.7"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-07T11:49:20Z", "updated_at": "2020-08-07T12:18:44Z", "closed_at": "2020-08-07T12:18:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\n\r\nWhen using ansible 2.8.18 with python 3.8, lists are being interpreted as strings.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nansible-playbook\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.7.18\r\n  config file = /home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg\r\n  configured module search path = ['/home/demo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/demo/zinfra/cailleach/third_party/.poetry/venvs/third-party-jL9HBFdt-py3.8/lib/python3.8/site-packages/ansible\r\n  executable location = /home/demo/zinfra/cailleach/third_party/.poetry/venvs/third-party-jL9HBFdt-py3.8/bin/ansible\r\n  python version = 3.8.4 (default, Jul 13 2020, 21:16:07) [GCC 9.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nANSIBLE_PIPELINING(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = True\r\nANSIBLE_SSH_CONTROL_PATH(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = /tmp/ansible-%%r@%%h:%%p\r\nDEFAULT_BECOME(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = True\r\nDEFAULT_BECOME_USER(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = root\r\nDEFAULT_GATHERING(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = smart\r\nDEFAULT_LOOKUP_PLUGIN_PATH(env: ANSIBLE_LOOKUP_PLUGINS) = ['/home/demo/zinfra/cailleach/ansible/lookup_plugins']\r\nDEFAULT_PRIVATE_KEY_FILE(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = /home/demo/zinfra/cailleach/environments/avs-test/ansible/ssh.key.dec\r\nDEFAULT_REMOTE_USER(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = root\r\nDEFAULT_ROLES_PATH(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = ['/home/demo/zinfra/cailleach/environments/avs-test/ansible/.galaxy']\r\nHOST_KEY_CHECKING(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = False\r\nRETRY_FILES_ENABLED(/home/demo/zinfra/cailleach/environments/avs-test/ansible.cfg) = False\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nDebian unstable\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nrun this playbook. note that these steps are the block referenced in https://github.com/cloudalchemy/ansible-node-exporter/issues/174 , which is what we were using when this issue was discovered.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n- hosts: localhost\r\n  gather_facts: false\r\n  become: false\r\n  vars:\r\n    go_arch: 'armv6'\r\n\r\n    node_exporter_version: 1.0.1\r\n  tasks:\r\n    - block:\r\n        - name: Get checksum list from github\r\n          set_fact:\r\n            _checksums: \"{{ lookup('url', 'https://github.com/prometheus/node_exporter/releases/download/v' + node_exporter_version + '/sha256sums.txt', wantlist=True) | list }}\"\r\n          run_once: true\r\n\r\n        - debug:\r\n            var: _checksums\r\n\r\n        - name: \"Get checksum for {{ go_arch }} architecture\"\r\n          set_fact:\r\n            node_exporter_checksum: \"{{ item.split(' ')[0] }}\"\r\n          with_items: \"{{ _checksums }}\"\r\n          when:\r\n            - \"('linux-' + go_arch + '.tar.gz') in item\"\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n```\r\nLAY [localhost] *****************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************\r\nok: [localhost]\r\n\r\nTASK [Get checksum list from github] *********************************************************\r\nok: [localhost]\r\n\r\nTASK [debug] *********************************************************************************\r\nok: [localhost] => {\r\n    \"_checksums\": [\r\n        \"eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791  node_exporter-1.0.1.darwin-386.tar.gz\",\r\n        \"e51d39ef14f5c6accee158e94b5e324fa6eb647444234a4be3491fbc3983df47  node_exporter-1.0.1.darwin-amd64.tar.gz\",\r\n        \"734e036a849152b185da2080eb8656c36cde862095a464cb17705ca723ea3929  node_exporter-1.0.1.linux-386.tar.gz\",\r\n        \"3369b76cd2b0ba678b6d618deab320e565c3d93ccb5c2a0d5db51a53857768ae  node_exporter-1.0.1.linux-amd64.tar.gz\",\r\n        \"017514906922fcc4b7d727655690787faed0562bc7a17aa9f72b0651cb1b47fb  node_exporter-1.0.1.linux-arm64.tar.gz\",\r\n        \"38413100bfb935c59aea088a0af792134b75972eb90ab2bc6cf1c09ad3b08aea  node_exporter-1.0.1.linux-armv5.tar.gz\",\r\n        \"c1d7affbc7762c478c169830c43b4c6177a761bf1d2dd715dbffa55ca772655a  node_exporter-1.0.1.linux-armv6.tar.gz\",\r\n        \"e7f4427a25f1870103588e4968c7dc8c1426c00a0c029d0183a9a7afdd61357b  node_exporter-1.0.1.linux-armv7.tar.gz\",\r\n        \"43335ccab5728b3c61ea7a0977143719c392ce13a90fa0d14169b5c10e8babd0  node_exporter-1.0.1.linux-mips.tar.gz\",\r\n        \"c0109f2f76628d2e25ea78e39d4b95100079ee859863be1471519b5e85a2fe78  node_exporter-1.0.1.linux-mips64.tar.gz\",\r\n        \"bcba02058b9ce171b5c3b077f78f371eb7685239f113200d15787c55fb204857  node_exporter-1.0.1.linux-mips64le.tar.gz\",\r\n        \"85f0a24c07c5d8237caf36a5c68a63958280dab802b5056ff36d75563d5e5241  node_exporter-1.0.1.linux-mipsle.tar.gz\",\r\n        \"43aa5e72f5068d16eb8d33f6b729186bf558d40ec0c734746b40a16902864808  node_exporter-1.0.1.linux-ppc64.tar.gz\",\r\n        \"5ae6c772108c877038cd66a761e4ad93edcc8c446120478499412b24e7953146  node_exporter-1.0.1.linux-ppc64le.tar.gz\",\r\n        \"2f22d1ce18969017fb32dbd285a264adf3da6252eec05f03f105cf638ec0bb06  node_exporter-1.0.1.linux-s390x.tar.gz\",\r\n        \"7766d78638c2f84d1084a79d8cb5d8f036b7ce375390870d5e709673118d1260  node_exporter-1.0.1.netbsd-386.tar.gz\",\r\n        \"41cc54f77f860ed19a7b74f132269f810e3c01fbac5320c3fa2e244fa2247d56  node_exporter-1.0.1.netbsd-amd64.tar.gz\"\r\n    ]\r\n}\r\n\r\nTASK [Get checksum for armv6 architecture] ***************************************************\r\nskipping: [localhost] => (item=eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791  node_exporter-1.0.1.darwin-386.tar.gz) \r\nskipping: [localhost] => (item=e51d39ef14f5c6accee158e94b5e324fa6eb647444234a4be3491fbc3983df47  node_exporter-1.0.1.darwin-amd64.tar.gz) \r\nskipping: [localhost] => (item=734e036a849152b185da2080eb8656c36cde862095a464cb17705ca723ea3929  node_exporter-1.0.1.linux-386.tar.gz) \r\nskipping: [localhost] => (item=3369b76cd2b0ba678b6d618deab320e565c3d93ccb5c2a0d5db51a53857768ae  node_exporter-1.0.1.linux-amd64.tar.gz) \r\nskipping: [localhost] => (item=017514906922fcc4b7d727655690787faed0562bc7a17aa9f72b0651cb1b47fb  node_exporter-1.0.1.linux-arm64.tar.gz) \r\nskipping: [localhost] => (item=38413100bfb935c59aea088a0af792134b75972eb90ab2bc6cf1c09ad3b08aea  node_exporter-1.0.1.linux-armv5.tar.gz) \r\nok: [localhost] => (item=c1d7affbc7762c478c169830c43b4c6177a761bf1d2dd715dbffa55ca772655a  node_exporter-1.0.1.linux-armv6.tar.gz)\r\nskipping: [localhost] => (item=e7f4427a25f1870103588e4968c7dc8c1426c00a0c029d0183a9a7afdd61357b  node_exporter-1.0.1.linux-armv7.tar.gz) \r\nskipping: [localhost] => (item=43335ccab5728b3c61ea7a0977143719c392ce13a90fa0d14169b5c10e8babd0  node_exporter-1.0.1.linux-mips.tar.gz) \r\nskipping: [localhost] => (item=c0109f2f76628d2e25ea78e39d4b95100079ee859863be1471519b5e85a2fe78  node_exporter-1.0.1.linux-mips64.tar.gz) \r\nskipping: [localhost] => (item=bcba02058b9ce171b5c3b077f78f371eb7685239f113200d15787c55fb204857  node_exporter-1.0.1.linux-mips64le.tar.gz) \r\nskipping: [localhost] => (item=85f0a24c07c5d8237caf36a5c68a63958280dab802b5056ff36d75563d5e5241  node_exporter-1.0.1.linux-mipsle.tar.gz) \r\nskipping: [localhost] => (item=43aa5e72f5068d16eb8d33f6b729186bf558d40ec0c734746b40a16902864808  node_exporter-1.0.1.linux-ppc64.tar.gz) \r\nskipping: [localhost] => (item=5ae6c772108c877038cd66a761e4ad93edcc8c446120478499412b24e7953146  node_exporter-1.0.1.linux-ppc64le.tar.gz) \r\nskipping: [localhost] => (item=2f22d1ce18969017fb32dbd285a264adf3da6252eec05f03f105cf638ec0bb06  node_exporter-1.0.1.linux-s390x.tar.gz) \r\nskipping: [localhost] => (item=7766d78638c2f84d1084a79d8cb5d8f036b7ce375390870d5e709673118d1260  node_exporter-1.0.1.netbsd-386.tar.gz) \r\nskipping: [localhost] => (item=41cc54f77f860ed19a7b74f132269f810e3c01fbac5320c3fa2e244fa2247d56  node_exporter-1.0.1.netbsd-amd64.tar.gz) \r\n\r\nPLAY RECAP ***********************************************************************************\r\nlocalhost                  : ok=4    changed=0    unreachable=0    failed=0   \r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nPLAY [localhost] **************************************************************************************************************************************************************************************************************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [Get checksum list from github] ******************************************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/demo/zinfra/cailleach/environments/avs-test/ansible/sft/playbooks/bootstrap.yaml:12\r\nok: [localhost] => {\r\n    \"ansible_facts\": {\r\n        \"_checksums\": \"['eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791  node_exporter-1.0.1.darwin-386.tar.gz', 'e51d39ef14f5c6accee158e94b5e324fa6eb647444234a4be3491fbc3983df47  node_exporter-1.0.1.darwin-amd64.tar.gz', '734e036a849152b185da2080eb8656c36cde862095a464cb17705ca723ea3929  node_exporter-1.0.1.linux-386.tar.gz', '3369b76cd2b0ba678b6d618deab320e565c3d93ccb5c2a0d5db51a53857768ae  node_exporter-1.0.1.linux-amd64.tar.gz', '017514906922fcc4b7d727655690787faed0562bc7a17aa9f72b0651cb1b47fb  node_exporter-1.0.1.linux-arm64.tar.gz', '38413100bfb935c59aea088a0af792134b75972eb90ab2bc6cf1c09ad3b08aea  node_exporter-1.0.1.linux-armv5.tar.gz', 'c1d7affbc7762c478c169830c43b4c6177a761bf1d2dd715dbffa55ca772655a  node_exporter-1.0.1.linux-armv6.tar.gz', 'e7f4427a25f1870103588e4968c7dc8c1426c00a0c029d0183a9a7afdd61357b  node_exporter-1.0.1.linux-armv7.tar.gz', '43335ccab5728b3c61ea7a0977143719c392ce13a90fa0d14169b5c10e8babd0  node_exporter-1.0.1.linux-mips.tar.gz', 'c0109f2f76628d2e25ea78e39d4b95100079ee859863be1471519b5e85a2fe78  node_exporter-1.0.1.linux-mips64.tar.gz', 'bcba02058b9ce171b5c3b077f78f371eb7685239f113200d15787c55fb204857  node_exporter-1.0.1.linux-mips64le.tar.gz', '85f0a24c07c5d8237caf36a5c68a63958280dab802b5056ff36d75563d5e5241  node_exporter-1.0.1.linux-mipsle.tar.gz', '43aa5e72f5068d16eb8d33f6b729186bf558d40ec0c734746b40a16902864808  node_exporter-1.0.1.linux-ppc64.tar.gz', '5ae6c772108c877038cd66a761e4ad93edcc8c446120478499412b24e7953146  node_exporter-1.0.1.linux-ppc64le.tar.gz', '2f22d1ce18969017fb32dbd285a264adf3da6252eec05f03f105cf638ec0bb06  node_exporter-1.0.1.linux-s390x.tar.gz', '7766d78638c2f84d1084a79d8cb5d8f036b7ce375390870d5e709673118d1260  node_exporter-1.0.1.netbsd-386.tar.gz', '41cc54f77f860ed19a7b74f132269f810e3c01fbac5320c3fa2e244fa2247d56  node_exporter-1.0.1.netbsd-amd64.tar.gz']\"\r\n    },\r\n    \"changed\": false\r\n}\r\n\r\nTASK [debug] ******************************************************************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/demo/zinfra/cailleach/environments/avs-test/ansible/sft/playbooks/bootstrap.yaml:17\r\nok: [localhost] => {\r\n    \"_checksums\": \"['eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791  node_exporter-1.0.1.darwin-386.tar.gz', 'e51d39ef14f5c6accee158e94b5e324fa6eb647444234a4be3491fbc3983df47  node_exporter-1.0.1.darwin-amd64.tar.gz', '734e036a849152b185da2080eb8656c36cde862095a464cb17705ca723ea3929  node_exporter-1.0.1.linux-386.tar.gz', '3369b76cd2b0ba678b6d618deab320e565c3d93ccb5c2a0d5db51a53857768ae  node_exporter-1.0.1.linux-amd64.tar.gz', '017514906922fcc4b7d727655690787faed0562bc7a17aa9f72b0651cb1b47fb  node_exporter-1.0.1.linux-arm64.tar.gz', '38413100bfb935c59aea088a0af792134b75972eb90ab2bc6cf1c09ad3b08aea  node_exporter-1.0.1.linux-armv5.tar.gz', 'c1d7affbc7762c478c169830c43b4c6177a761bf1d2dd715dbffa55ca772655a  node_exporter-1.0.1.linux-armv6.tar.gz', 'e7f4427a25f1870103588e4968c7dc8c1426c00a0c029d0183a9a7afdd61357b  node_exporter-1.0.1.linux-armv7.tar.gz', '43335ccab5728b3c61ea7a0977143719c392ce13a90fa0d14169b5c10e8babd0  node_exporter-1.0.1.linux-mips.tar.gz', 'c0109f2f76628d2e25ea78e39d4b95100079ee859863be1471519b5e85a2fe78  node_exporter-1.0.1.linux-mips64.tar.gz', 'bcba02058b9ce171b5c3b077f78f371eb7685239f113200d15787c55fb204857  node_exporter-1.0.1.linux-mips64le.tar.gz', '85f0a24c07c5d8237caf36a5c68a63958280dab802b5056ff36d75563d5e5241  node_exporter-1.0.1.linux-mipsle.tar.gz', '43aa5e72f5068d16eb8d33f6b729186bf558d40ec0c734746b40a16902864808  node_exporter-1.0.1.linux-ppc64.tar.gz', '5ae6c772108c877038cd66a761e4ad93edcc8c446120478499412b24e7953146  node_exporter-1.0.1.linux-ppc64le.tar.gz', '2f22d1ce18969017fb32dbd285a264adf3da6252eec05f03f105cf638ec0bb06  node_exporter-1.0.1.linux-s390x.tar.gz', '7766d78638c2f84d1084a79d8cb5d8f036b7ce375390870d5e709673118d1260  node_exporter-1.0.1.netbsd-386.tar.gz', '41cc54f77f860ed19a7b74f132269f810e3c01fbac5320c3fa2e244fa2247d56  node_exporter-1.0.1.netbsd-amd64.tar.gz']\"\r\n}\r\n\r\nTASK [Get checksum for armv6 architecture] ************************************************************************************************************************************************************************************************************************************************************************************\r\ntask path: /home/demo/zinfra/cailleach/environments/avs-test/ansible/sft/playbooks/bootstrap.yaml:20\r\nok: [localhost] => (item=['eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791  node_exporter-1.0.1.darwin-386.tar.gz', 'e51d39ef14f5c6accee158e94b5e324fa6eb647444234a4be3491fbc3983df47  node_exporter-1.0.1.darwin-amd64.tar.gz', '734e036a849152b185da2080eb8656c36cde862095a464cb17705ca723ea3929  node_exporter-1.0.1.linux-386.tar.gz', '3369b76cd2b0ba678b6d618deab320e565c3d93ccb5c2a0d5db51a53857768ae  node_exporter-1.0.1.linux-amd64.tar.gz', '017514906922fcc4b7d727655690787faed0562bc7a17aa9f72b0651cb1b47fb  node_exporter-1.0.1.linux-arm64.tar.gz', '38413100bfb935c59aea088a0af792134b75972eb90ab2bc6cf1c09ad3b08aea  node_exporter-1.0.1.linux-armv5.tar.gz', 'c1d7affbc7762c478c169830c43b4c6177a761bf1d2dd715dbffa55ca772655a  node_exporter-1.0.1.linux-armv6.tar.gz', 'e7f4427a25f1870103588e4968c7dc8c1426c00a0c029d0183a9a7afdd61357b  node_exporter-1.0.1.linux-armv7.tar.gz', '43335ccab5728b3c61ea7a0977143719c392ce13a90fa0d14169b5c10e8babd0  node_exporter-1.0.1.linux-mips.tar.gz', 'c0109f2f76628d2e25ea78e39d4b95100079ee859863be1471519b5e85a2fe78  node_exporter-1.0.1.linux-mips64.tar.gz', 'bcba02058b9ce171b5c3b077f78f371eb7685239f113200d15787c55fb204857  node_exporter-1.0.1.linux-mips64le.tar.gz', '85f0a24c07c5d8237caf36a5c68a63958280dab802b5056ff36d75563d5e5241  node_exporter-1.0.1.linux-mipsle.tar.gz', '43aa5e72f5068d16eb8d33f6b729186bf558d40ec0c734746b40a16902864808  node_exporter-1.0.1.linux-ppc64.tar.gz', '5ae6c772108c877038cd66a761e4ad93edcc8c446120478499412b24e7953146  node_exporter-1.0.1.linux-ppc64le.tar.gz', '2f22d1ce18969017fb32dbd285a264adf3da6252eec05f03f105cf638ec0bb06  node_exporter-1.0.1.linux-s390x.tar.gz', '7766d78638c2f84d1084a79d8cb5d8f036b7ce375390870d5e709673118d1260  node_exporter-1.0.1.netbsd-386.tar.gz', '41cc54f77f860ed19a7b74f132269f810e3c01fbac5320c3fa2e244fa2247d56  node_exporter-1.0.1.netbsd-amd64.tar.gz']) => {\r\n    \"ansible_facts\": {\r\n        \"node_exporter_checksum\": \"['eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791\"\r\n    },\r\n    \"changed\": false,\r\n    \"item\": \"['eb7feb537a96d518644879f617eaef2c28e9af5878c671c0ba0af11d2c27c791  node_exporter-1.0.1.darwin-386.tar.gz', 'e51d39ef14f5c6accee158e94b5e324fa6eb647444234a4be3491fbc3983df47  node_exporter-1.0.1.darwin-amd64.tar.gz', '734e036a849152b185da2080eb8656c36cde862095a464cb17705ca723ea3929  node_exporter-1.0.1.linux-386.tar.gz', '3369b76cd2b0ba678b6d618deab320e565c3d93ccb5c2a0d5db51a53857768ae  node_exporter-1.0.1.linux-amd64.tar.gz', '017514906922fcc4b7d727655690787faed0562bc7a17aa9f72b0651cb1b47fb  node_exporter-1.0.1.linux-arm64.tar.gz', '38413100bfb935c59aea088a0af792134b75972eb90ab2bc6cf1c09ad3b08aea  node_exporter-1.0.1.linux-armv5.tar.gz', 'c1d7affbc7762c478c169830c43b4c6177a761bf1d2dd715dbffa55ca772655a  node_exporter-1.0.1.linux-armv6.tar.gz', 'e7f4427a25f1870103588e4968c7dc8c1426c00a0c029d0183a9a7afdd61357b  node_exporter-1.0.1.linux-armv7.tar.gz', '43335ccab5728b3c61ea7a0977143719c392ce13a90fa0d14169b5c10e8babd0  node_exporter-1.0.1.linux-mips.tar.gz', 'c0109f2f76628d2e25ea78e39d4b95100079ee859863be1471519b5e85a2fe78  node_exporter-1.0.1.linux-mips64.tar.gz', 'bcba02058b9ce171b5c3b077f78f371eb7685239f113200d15787c55fb204857  node_exporter-1.0.1.linux-mips64le.tar.gz', '85f0a24c07c5d8237caf36a5c68a63958280dab802b5056ff36d75563d5e5241  node_exporter-1.0.1.linux-mipsle.tar.gz', '43aa5e72f5068d16eb8d33f6b729186bf558d40ec0c734746b40a16902864808  node_exporter-1.0.1.linux-ppc64.tar.gz', '5ae6c772108c877038cd66a761e4ad93edcc8c446120478499412b24e7953146  node_exporter-1.0.1.linux-ppc64le.tar.gz', '2f22d1ce18969017fb32dbd285a264adf3da6252eec05f03f105cf638ec0bb06  node_exporter-1.0.1.linux-s390x.tar.gz', '7766d78638c2f84d1084a79d8cb5d8f036b7ce375390870d5e709673118d1260  node_exporter-1.0.1.netbsd-386.tar.gz', '41cc54f77f860ed19a7b74f132269f810e3c01fbac5320c3fa2e244fa2247d56  node_exporter-1.0.1.netbsd-amd64.tar.gz']\"\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0   \r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71143", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71143/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71143/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71143/events", "html_url": "https://github.com/ansible/ansible/issues/71143", "id": 674915338, "node_id": "MDU6SXNzdWU2NzQ5MTUzMzg=", "number": 71143, "title": "failed to find folder issue for vmware_content_deploy_template ansible module", "user": {"login": "Shweta217", "id": 38592487, "node_id": "MDQ6VXNlcjM4NTkyNDg3", "avatar_url": "https://avatars1.githubusercontent.com/u/38592487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shweta217", "html_url": "https://github.com/Shweta217", "followers_url": "https://api.github.com/users/Shweta217/followers", "following_url": "https://api.github.com/users/Shweta217/following{/other_user}", "gists_url": "https://api.github.com/users/Shweta217/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shweta217/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shweta217/subscriptions", "organizations_url": "https://api.github.com/users/Shweta217/orgs", "repos_url": "https://api.github.com/users/Shweta217/repos", "events_url": "https://api.github.com/users/Shweta217/events{/privacy}", "received_events_url": "https://api.github.com/users/Shweta217/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 61528803, "node_id": "MDU6TGFiZWw2MTUyODgwMw==", "url": "https://api.github.com/repos/ansible/ansible/labels/cloud", "name": "cloud", "color": "4071a5", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991469279, "node_id": "MDU6TGFiZWwxOTkxNDY5Mjc5", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.vmware", "name": "collection:community.vmware", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 427121291, "node_id": "MDU6TGFiZWw0MjcxMjEyOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/vmware", "name": "vmware", "color": "c5def5", "default": false, "description": "VMware community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-07T10:15:40Z", "updated_at": "2020-08-12T16:30:46Z", "closed_at": "2020-08-07T11:01:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nFailed to find folder for vmware_content_deploy_template module when trying to provision new server from template using content library.\r\nI am using correct folder path which I have double checked using vmware_guest_find module as well to get the folder path for other existing vm's.\r\n\r\nNote:\r\nI have installed vsphere-automation-sdk-python.git, using pip install --upgrade git+https://github.com/vmware/vsphere-automation-sdk-python.git .\r\nAlso, provisioning with vmware_guest at the same folder path was not giving issue.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\nfolder parameter is constantly giving failed to find folder despite of giving root(\"/\") as value to it as well.\r\nVCenter creds used is having admin privilege.\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nvmware_content_deploy_template module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.4\r\n  config file = /etc/ansible/ansible.cfg\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.17 (default, Jul 20 2020, 15:37:01) [GCC 7.5.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nvsphere client version: Version 6.7.0\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Deploy Virtual Machine from template in content library\r\n  vmware_content_deploy_template:\r\n    hostname: 'xxx.xxx.xxx.xxx'\r\n    username: '{{ vcenter_username }}'\r\n    password: '{{ vcenter_password }}'\r\n    template: \"test_template\"\r\n    datastore: \"xxxx\"\r\n    #folder: \"{{ folder_name['folders'] }}\"\r\n    folder: \"/DC91/vm/ATMOS/Windows\"\r\n    datacenter: \"DC91\"\r\n    name: \"vmProvWintTest18\"\r\n    #resource_pool: \"\"\r\n    cluster: \"Cluster-01\"\r\n    host: \"xxxx.xxx.xxx\"\r\n    validate_certs: False\r\n    state: present\r\n  delegate_to: localhost  \r\n  tags: VMClone\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nProvision new vm using template from the content library\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nTASK [vmProvisionTasks : Deploy Virtual Machine from template in content library] ***\r\n task path: /home/gitlab-runner/builds/pbYfs3456/0/devops-automation-team/ansible/windows_vm_provision/playbooks/roles/vmProvisionTasks/tasks/vmProvision.yml:224\r\n <localhost> ESTABLISH LOCAL CONNECTION FOR USER: gitlab-runner\r\n <localhost> EXEC /bin/sh -c 'echo ~gitlab-runner && sleep 0'\r\n <localhost> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422 `\" && echo ansible-tmp-1596793546.56-105211564441422=\"` echo /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422 `\" ) && sleep 0'\r\n Using module file /usr/lib/python2.7/dist-packages/ansible/modules/cloud/vmware/vmware_content_deploy_template.py\r\n <localhost> PUT /home/gitlab-runner/.ansible/tmp/ansible-local-80410lXr9r/tmpxZ00Sn TO /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422/AnsiballZ_vmware_content_deploy_template.py\r\n <localhost> EXEC /bin/sh -c 'chmod u+x /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422/ /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422/AnsiballZ_vmware_content_deploy_template.py && sleep 0'\r\n <localhost> EXEC /bin/sh -c '/usr/bin/python2 /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422/AnsiballZ_vmware_content_deploy_template.py && sleep 0'\r\n <localhost> EXEC /bin/sh -c 'rm -f -r /home/gitlab-runner/.ansible/tmp/ansible-tmp-1596793546.56-105211564441422/ > /dev/null 2>&1 && sleep 0'\r\n fatal: [localhost -> localhost]: FAILED! => {\r\n     \"changed\": false, \r\n     \"invocation\": {\r\n         \"module_args\": {\r\n             \"cluster\": \"Cluster-01\", \r\n             \"datacenter\": \"DC91\", \r\n             \"datastore\": \"xxxx\", \r\n             \"folder\": \"/DC91/vm/ATMOS/Windows\", \r\n             \"host\": \"xxxx.xxx.xxx\" \r\n             \"hostname\": \"xxx.xxx.xxx.xxx\", \r\n             \"name\": \"vmProvWinTest18\", \r\n             \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",  \r\n             \"resource_pool\": null, \r\n             \"state\": \"present\", \r\n             \"template\": \"test_template\", \r\n             \"username\": \"xxxx\", \r\n             \"validate_certs\": false\r\n         }\r\n     }, \r\n     \"msg\": \"Failed to find the folder /DC91/vm/ATMOS/Windows\"\r\n }\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71140", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71140/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71140/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71140/events", "html_url": "https://github.com/ansible/ansible/issues/71140", "id": 674774164, "node_id": "MDU6SXNzdWU2NzQ3NzQxNjQ=", "number": 71140, "title": "service_facts on Ubuntu: Malformed output discovered from systemd list-unit-files: apt-daily-upgrade.service", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 1231575407, "node_id": "MDU6TGFiZWwxMjMxNTc1NDA3", "url": "https://api.github.com/repos/ansible/ansible/labels/system", "name": "system", "color": "4071a5", "default": false, "description": "System category"}], "state": "closed", "locked": false, "assignee": {"login": "Akasurde", "id": 633765, "node_id": "MDQ6VXNlcjYzMzc2NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/633765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akasurde", "html_url": "https://github.com/Akasurde", "followers_url": "https://api.github.com/users/Akasurde/followers", "following_url": "https://api.github.com/users/Akasurde/following{/other_user}", "gists_url": "https://api.github.com/users/Akasurde/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akasurde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akasurde/subscriptions", "organizations_url": "https://api.github.com/users/Akasurde/orgs", "repos_url": "https://api.github.com/users/Akasurde/repos", "events_url": "https://api.github.com/users/Akasurde/events{/privacy}", "received_events_url": "https://api.github.com/users/Akasurde/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Akasurde", "id": 633765, "node_id": "MDQ6VXNlcjYzMzc2NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/633765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akasurde", "html_url": "https://github.com/Akasurde", "followers_url": "https://api.github.com/users/Akasurde/followers", "following_url": "https://api.github.com/users/Akasurde/following{/other_user}", "gists_url": "https://api.github.com/users/Akasurde/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akasurde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akasurde/subscriptions", "organizations_url": "https://api.github.com/users/Akasurde/orgs", "repos_url": "https://api.github.com/users/Akasurde/repos", "events_url": "https://api.github.com/users/Akasurde/events{/privacy}", "received_events_url": "https://api.github.com/users/Akasurde/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-08-07T05:42:23Z", "updated_at": "2020-08-11T07:37:34Z", "closed_at": "2020-08-10T04:50:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### SUMMARY\r\nOn Ubuntu the `service_facts` module returns:\r\n\r\n```\r\nmsg: 'Malformed output discovered from systemd list-unit-files: apt-daily-upgrade.service              static          enabled      '\r\n```\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nservice_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.11\r\n  config file = None\r\n  configured module search path = ['/home/robertdb/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.3 (default, May 29 2020, 00:00:00) [GCC 10.1.1 20200507 (Red Hat 10.1.1-1)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n# empty\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nController: Fedora 32\r\nManaged node: Ubuntu Focal (2004)\r\n\r\n##### STEPS TO REPRODUCE\r\nRun [this](https://github.com/robertdebock/ansible-role-cis/blob/master/tasks/main.yml#L5) code:\r\n\r\n```yaml\r\n- name: populate service facts\r\n  service_facts:\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe service_facts should have been populated.\r\n\r\n##### ACTUAL RESULTS\r\nGot [this](https://github.com/robertdebock/ansible-role-cis/runs/956916019#step:6:237) result:\r\n\r\n```\r\n    TASK [ansible-role-cis : populate service facts] *******************************\r\nfatal: [cis-ubuntu-latestpy38-ansible-previous]: FAILED! => changed=false \r\n  msg: 'Malformed output discovered from systemd list-unit-files: apt-daily-upgrade.service              static          enabled      '\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71139", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71139/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71139/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71139/events", "html_url": "https://github.com/ansible/ansible/issues/71139", "id": 674741055, "node_id": "MDU6SXNzdWU2NzQ3NDEwNTU=", "number": 71139, "title": "grafana_datasource does not configure password correctly", "user": {"login": "onefourfive", "id": 17737360, "node_id": "MDQ6VXNlcjE3NzM3MzYw", "avatar_url": "https://avatars1.githubusercontent.com/u/17737360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onefourfive", "html_url": "https://github.com/onefourfive", "followers_url": "https://api.github.com/users/onefourfive/followers", "following_url": "https://api.github.com/users/onefourfive/following{/other_user}", "gists_url": "https://api.github.com/users/onefourfive/gists{/gist_id}", "starred_url": "https://api.github.com/users/onefourfive/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onefourfive/subscriptions", "organizations_url": "https://api.github.com/users/onefourfive/orgs", "repos_url": "https://api.github.com/users/onefourfive/repos", "events_url": "https://api.github.com/users/onefourfive/events{/privacy}", "received_events_url": "https://api.github.com/users/onefourfive/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991397595, "node_id": "MDU6TGFiZWwxOTkxMzk3NTk1", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.grafana", "name": "collection:community.grafana", "color": "ededed", "default": false, "description": null}, {"id": 1224148535, "node_id": "MDU6TGFiZWwxMjI0MTQ4NTM1", "url": "https://api.github.com/repos/ansible/ansible/labels/grafana", "name": "grafana", "color": "c5def5", "default": false, "description": "Grafana community"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1231573881, "node_id": "MDU6TGFiZWwxMjMxNTczODgx", "url": "https://api.github.com/repos/ansible/ansible/labels/monitoring", "name": "monitoring", "color": "4071a5", "default": false, "description": "Monitoring category"}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-07T04:06:23Z", "updated_at": "2020-08-12T16:30:45Z", "closed_at": "2020-08-07T08:23:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nThe `grafana_datasource` module does not configure the datasource password correctly. When used, the 'password' parameter is not used in the specified datasource. This might be due to the password being specified outside of the 'secureJsonData' parameter in the Grafana API request. See [Grafana API docs on Creating a Datasource.](https://grafana.com/docs/grafana/latest/http_api/data_source/#create-a-data-source)\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\ngrafana_datasource\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.9\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/derek/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/derek/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/derek/.local/bin/ansible\r\n  python version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n(no output)\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu 18.04 LTS\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nUse `grafana_datasource` to create a MySQL datasource with MySQL username and password specified using the `user` and `password` parameters.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n  - name: provisioning datasources\r\n    grafana_datasource:\r\n      name: \"{{ item.name }}\"\r\n      database: \"{{ item.database}}\"\r\n      url: dsurl:port\r\n      grafana_url: \"{{ hostvars[inventory_hostname].grafurl }}\"\r\n      validate_certs: no\r\n      grafana_api_key: \"{{ hostvars[inventory_hostname].grafapikey }}\"\r\n      ds_type: mysql\r\n      # any of the following reproduces the issue:\r\n      user: testuser\r\n      password: test123\r\n      # \r\n      basic_auth_user: testuser\r\n      basic_auth_password: test123\r\n      # \r\n      basic_auth_user: testuser\r\n      password: test123\r\n      # \r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThe password is set and the datasource can be tested from the Grafana UI. The password field appears as 'configured' in a grayed out box. This matches behavior when the password is set through the UI.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nThe username is set however the password field remains blank in the UI and the datasource cannot be tested or used. The password must be set manually through the UI.\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nansible@host:~/$ ansible host1.net -m grafana_datasource -a \"name=authtest url=https://authtest:3306 access=proxy state=present grafana_url=https://host1.net validate_certs=no grafana_api_key=loTsOfLettErS ds_type=mysql database=testdb basic_auth_password=test123 basic_auth_user=testuser\" -K -vvv\r\nansible 2.9.9\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/ansible/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ansible/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/ansible/.local/bin/ansible\r\n  python version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nBECOME password:\r\nhost_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method\r\nscript declined parsing /etc/ansible/hosts as it did not pass its verify_file() method\r\nauto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\nMETA: ran handlers\r\n<host1.net> ESTABLISH SSH CONNECTION FOR USER: None\r\n<host1.net> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/9ec4a2bc8e host1.net '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<host1.net> (0, b'/home/ansible\\n', b'')\r\n<host1.net> ESTABLISH SSH CONNECTION FOR USER: None\r\n<host1.net> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/9ec4a2bc8e host1.net '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /home/ansible/.ansible/tmp `\"&& mkdir /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576 && echo ansible-tmp-1596772708.4799106-4131-56466493012576=\"` echo /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576 `\" ) && sleep 0'\"'\"''\r\n<host1.net> (0, b'ansible-tmp-1596772708.4799106-4131-56466493012576=/home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576\\n', b'')\r\nUsing module file /home/ansible/.local/lib/python3.6/site-packages/ansible/modules/monitoring/grafana_datasource.py\r\n<host1.net> PUT /home/ansible/.ansible/tmp/ansible-local-4126tv0mzdhb/tmp50x_scxa TO /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576/AnsiballZ_grafana_datasource.py\r\n<host1.net> SSH: EXEC sftp -b - -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/9ec4a2bc8e '[host1.net]'\r\n<host1.net> (0, b'sftp> put /home/ansible/.ansible/tmp/ansible-local-4126tv0mzdhb/tmp50x_scxa /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576/AnsiballZ_grafana_datasource.py\\n', b'')\r\n<host1.net> ESTABLISH SSH CONNECTION FOR USER: None\r\n<host1.net> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/9ec4a2bc8e host1.net '/bin/sh -c '\"'\"'chmod u+x /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576/ /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576/AnsiballZ_grafana_datasource.py && sleep 0'\"'\"''\r\n<host1.net> (0, b'', b'')\r\n<host1.net> ESTABLISH SSH CONNECTION FOR USER: None\r\n<host1.net> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/9ec4a2bc8e -tt host1.net '/bin/sh -c '\"'\"'sudo -H -S  -p \"[sudo via ansible, key=ikkampdiahqechocotwsyoktdaldlfcz] password:\" -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-ikkampdiahqechocotwsyoktdaldlfcz ; /usr/bin/python3 /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576/AnsiballZ_grafana_datasource.py'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\nEscalation succeeded\r\n<host1.net> (0, b'\\r\\n\\r\\n{\"failed\": false, \"msg\": \"Datasource authtest created : Datasource added\", \"changed\": true, \"name\": \"authtest\", \"id\": 45, \"invocation\": {\"module_args\": {\"user\": \"testuser\", \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\", \"name\": \"authtest\", \"url\": \"https://authtest:3306\", \"access\": \"proxy\", \"state\": \"present\", \"grafana_url\": \"https://host1.net\", \"validate_certs\": false, \"grafana_api_key\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\", \"ds_type\": \"mysql\", \"database\": \"testdb\", \"basic_auth_password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\", \"basic_auth_user\": \"testuser\", \"use_proxy\": true, \"url_username\": \"admin\", \"url_password\": \"admin\", \"with_credentials\": false, \"tls_skip_verify\": false, \"is_default\": false, \"org_id\": 1, \"es_version\": 5, \"max_concurrent_shard_requests\": 256, \"time_field\": \"@timestamp\", \"interval\": \"\", \"tsdb_version\": 1, \"tsdb_resolution\": \"second\", \"sslmode\": \"disable\", \"trends\": false, \"aws_auth_type\": \"keys\", \"aws_default_region\": \"us-east-1\", \"aws_access_key\": \"\", \"aws_secret_key\": \"\", \"aws_credentials_profile\": \"\", \"aws_assume_role_arn\": \"\", \"client_cert\": null, \"client_key\": null, \"tls_client_cert\": null, \"tls_client_key\": null, \"tls_ca_cert\": null, \"time_interval\": null, \"aws_custom_metrics_namespaces\": null}}}\\r\\n', b'Shared connection to host1.net closed.\\r\\n')\r\n<host1.net> ESTABLISH SSH CONNECTION FOR USER: None\r\n<host1.net> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/9ec4a2bc8e host1.net '/bin/sh -c '\"'\"'rm -f -r /home/ansible/.ansible/tmp/ansible-tmp-1596772708.4799106-4131-56466493012576/ > /dev/null 2>&1 && sleep 0'\"'\"''\r\n<host1.net> (0, b'', b'')\r\nhost1.net | CHANGED => {\r\n    \"changed\": true,\r\n    \"id\": 45,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"access\": \"proxy\",\r\n            \"aws_access_key\": \"\",\r\n            \"aws_assume_role_arn\": \"\",\r\n            \"aws_auth_type\": \"keys\",\r\n            \"aws_credentials_profile\": \"\",\r\n            \"aws_custom_metrics_namespaces\": null,\r\n            \"aws_default_region\": \"us-east-1\",\r\n            \"aws_secret_key\": \"\",\r\n            \"basic_auth_password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"basic_auth_user\": \"testuser\",\r\n            \"client_cert\": null,\r\n            \"client_key\": null,\r\n            \"database\": \"testdb\",\r\n            \"ds_type\": \"mysql\",\r\n            \"es_version\": 5,\r\n            \"grafana_api_key\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"grafana_url\": \"https://host1.net\",\r\n            \"interval\": \"\",\r\n            \"is_default\": false,\r\n            \"max_concurrent_shard_requests\": 256,\r\n            \"name\": \"authtest\",\r\n            \"org_id\": 1,\r\n            \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"sslmode\": \"disable\",\r\n            \"state\": \"present\",\r\n            \"time_field\": \"@timestamp\",\r\n            \"time_interval\": null,\r\n            \"tls_ca_cert\": null,\r\n            \"tls_client_cert\": null,\r\n            \"tls_client_key\": null,\r\n            \"tls_skip_verify\": false,\r\n            \"trends\": false,\r\n            \"tsdb_resolution\": \"second\",\r\n            \"tsdb_version\": 1,\r\n            \"url\": \"https://authtest:3306\",\r\n            \"url_password\": \"admin\",\r\n            \"url_username\": \"admin\",\r\n            \"use_proxy\": true,\r\n            \"user\": \"testuser\",\r\n            \"validate_certs\": false,\r\n            \"with_credentials\": false\r\n        }\r\n    },\r\n    \"msg\": \"Datasource authtest created : Datasource added\",\r\n    \"name\": \"authtest\"\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71138", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71138/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71138/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71138/events", "html_url": "https://github.com/ansible/ansible/issues/71138", "id": 674733200, "node_id": "MDU6SXNzdWU2NzQ3MzMyMDA=", "number": 71138, "title": ".", "user": {"login": "derpherder", "id": 4161892, "node_id": "MDQ6VXNlcjQxNjE4OTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/4161892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derpherder", "html_url": "https://github.com/derpherder", "followers_url": "https://api.github.com/users/derpherder/followers", "following_url": "https://api.github.com/users/derpherder/following{/other_user}", "gists_url": "https://api.github.com/users/derpherder/gists{/gist_id}", "starred_url": "https://api.github.com/users/derpherder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derpherder/subscriptions", "organizations_url": "https://api.github.com/users/derpherder/orgs", "repos_url": "https://api.github.com/users/derpherder/repos", "events_url": "https://api.github.com/users/derpherder/events{/privacy}", "received_events_url": "https://api.github.com/users/derpherder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-07T03:39:16Z", "updated_at": "2020-08-11T07:37:33Z", "closed_at": "2020-08-07T03:50:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Close\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71125", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71125/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71125/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71125/events", "html_url": "https://github.com/ansible/ansible/issues/71125", "id": 674532038, "node_id": "MDU6SXNzdWU2NzQ1MzIwMzg=", "number": 71125, "title": "Difference filter removing token unexpectedly from list", "user": {"login": "TJEvans", "id": 4670393, "node_id": "MDQ6VXNlcjQ2NzAzOTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/4670393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TJEvans", "html_url": "https://github.com/TJEvans", "followers_url": "https://api.github.com/users/TJEvans/followers", "following_url": "https://api.github.com/users/TJEvans/following{/other_user}", "gists_url": "https://api.github.com/users/TJEvans/gists{/gist_id}", "starred_url": "https://api.github.com/users/TJEvans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TJEvans/subscriptions", "organizations_url": "https://api.github.com/users/TJEvans/orgs", "repos_url": "https://api.github.com/users/TJEvans/repos", "events_url": "https://api.github.com/users/TJEvans/events{/privacy}", "received_events_url": "https://api.github.com/users/TJEvans/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-06T18:55:29Z", "updated_at": "2020-08-06T20:39:37Z", "closed_at": "2020-08-06T19:26:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nApplying the difference filter to a list removed an unexpected value.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\ndifference filter\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/tevans/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nCentOS7\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n```\r\n---\r\n- name: Test weird behavior with difference\r\n  hosts: localhost\r\n  connection: local\r\n  tasks:  \r\n    - set_fact:  \r\n        test_list:\r\n          - foo-bar\r\n          - foo-bar-zed\r\n          - foo-bar-baz\r\n    - set_fact:  \r\n        working_difference: \"{{ test_list | difference('foo-bar') }}\"\r\n        failing_difference_zed: \"{{ test_list | difference('foo-bar-zed') }}\"\r\n        failing_difference_baz: \"{{ test_list | difference('foo-bar-baz') }}\"\r\n    - name: My Expectations\r\n      assert:\r\n        that:\r\n          - \"'foo-bar-zed' in working_difference and 'foo-bar-baz' in working_difference\"\r\n          - \"'foo-bar-zed' in failing_differnce_baz and 'foo-bar' in failing_differnce_baz\"\r\n          - \"'foo-bar-baz' in failing_differnce_zed and 'foo-bar' in failing_differnce_baz\"\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nIn the two failing_difference facts I expect them to contain the value foo-bar\r\n\r\n\r\n##### ACTUAL RESULTS\r\n```\r\n020-08-06T18:52:36.1111607Z ========================== Starting Command Output ===========================\r\n2020-08-06T18:52:36.1121428Z ##[debug]which 'bash'\r\n2020-08-06T18:52:36.1141249Z ##[debug]found: '/bin/bash'\r\n2020-08-06T18:52:36.1146870Z ##[debug]which '/bin/bash'\r\n2020-08-06T18:52:36.1149743Z ##[debug]found: '/bin/bash'\r\n2020-08-06T18:52:36.1160717Z ##[debug]/bin/bash arg: --noprofile\r\n2020-08-06T18:52:36.1163449Z ##[debug]/bin/bash arg: --norc\r\n2020-08-06T18:52:36.1166140Z ##[debug]/bin/bash arg: /data/ansiadmin/agent/_work/_temp/847b85d5-68ec-441d-9ebe-4dfc432a6bb5.sh\r\n2020-08-06T18:52:36.1181481Z ##[debug]exec tool: /bin/bash\r\n2020-08-06T18:52:36.1183224Z ##[debug]arguments:\r\n2020-08-06T18:52:36.1185372Z ##[debug]   --noprofile\r\n2020-08-06T18:52:36.1187805Z ##[debug]   --norc\r\n2020-08-06T18:52:36.1190327Z ##[debug]   /data/ansiadmin/agent/_work/_temp/847b85d5-68ec-441d-9ebe-4dfc432a6bb5.sh\r\n2020-08-06T18:52:36.1201245Z [command]/bin/bash --noprofile --norc /data/ansiadmin/agent/_work/_temp/847b85d5-68ec-441d-9ebe-4dfc432a6bb5.sh\r\n2020-08-06T18:52:37.1770946Z ansible-playbook 2.9.10\r\n2020-08-06T18:52:37.1772879Z   config file = /data/ansiadmin/agent/_work/r1/a/_ansible-linux/ansible.cfg\r\n2020-08-06T18:52:37.1774878Z   configured module search path = [u'/home/ansiadmin/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n2020-08-06T18:52:37.1776758Z   ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n2020-08-06T18:52:37.1779605Z   executable location = /bin/ansible-playbook\r\n2020-08-06T18:52:37.1781516Z   python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n2020-08-06T18:52:37.1783416Z Using /data/ansiadmin/agent/_work/r1/a/_ansible-linux/ansible.cfg as config file\r\n2020-08-06T18:52:37.1787017Z setting up inventory plugins\r\n2020-08-06T18:52:37.1959053Z auto declined parsing /data/ansiadmin/agent/_work/r1/a/_ansible-linux/inventory/aperture_portal as it did not pass its verify_file() method\r\n2020-08-06T18:52:37.2020416Z Parsed /data/ansiadmin/agent/_work/r1/a/_ansible-linux/inventory/aperture_portal inventory source with ini plugin\r\n2020-08-06T18:52:37.2022306Z setting up inventory plugins\r\n........ noise\r\n2020-08-06T18:52:38.4333556Z \r\n2020-08-06T18:52:38.4341061Z PLAYBOOK: foobar.yml ***********************************************************\r\n2020-08-06T18:52:38.4344704Z Positional arguments: playbooks/foobar.yml\r\n2020-08-06T18:52:38.4347672Z become_method: sudo\r\n2020-08-06T18:52:38.4352858Z inventory: (u'/data/ansiadmin/agent/_work/r1/a/_ansible-linux/inventory',)\r\n2020-08-06T18:52:38.4358335Z vault_password_files: (u'/data/ansiadmin/agent/_work/_temp/.vault_pass.txt',)\r\n2020-08-06T18:52:38.4362331Z forks: 20\r\n2020-08-06T18:52:38.4366174Z tags: (u'all',)\r\n2020-08-06T18:52:38.4369659Z verbosity: 4\r\n2020-08-06T18:52:38.4371551Z connection: smart\r\n2020-08-06T18:52:38.4373035Z timeout: 10\r\n2020-08-06T18:52:38.4374696Z 1 plays in playbooks/foobar.yml\r\n2020-08-06T18:52:38.4580412Z \r\n2020-08-06T18:52:38.4584397Z PLAY [Test weird behavior with difference] *************************************\r\n2020-08-06T18:52:38.5310484Z \r\n2020-08-06T18:52:38.5314037Z TASK [Gathering Facts] *********************************************************\r\n2020-08-06T18:52:38.5320194Z task path: /data/ansiadmin/agent/_work/r1/a/_ansible-linux/playbooks/foobar.yml:3\r\n2020-08-06T18:52:38.6083598Z <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: ansiadmin\r\n2020-08-06T18:52:38.6092251Z <127.0.0.1> EXEC /bin/sh -c 'echo ~ansiadmin && sleep 0'\r\n2020-08-06T18:52:38.6412089Z <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/ansiadmin/.ansible/tmp `\"&& mkdir /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400 && echo ansible-tmp-1596739958.64-14588-97244020514400=\"` echo /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400 `\" ) && sleep 0'\r\n2020-08-06T18:52:40.8371077Z Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py\r\n2020-08-06T18:52:40.8391231Z <127.0.0.1> PUT /home/ansiadmin/.ansible/tmp/ansible-local-14573Mj5Dhh/tmpFz_oN8 TO /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400/AnsiballZ_setup.py\r\n2020-08-06T18:52:40.8433371Z <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400/ /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400/AnsiballZ_setup.py && sleep 0'\r\n2020-08-06T18:52:40.8771280Z <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400/AnsiballZ_setup.py && sleep 0'\r\n2020-08-06T18:52:41.6130317Z <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/ansiadmin/.ansible/tmp/ansible-tmp-1596739958.64-14588-97244020514400/ > /dev/null 2>&1 && sleep 0'\r\n2020-08-06T18:52:41.7683995Z ok: [localhost]\r\n2020-08-06T18:52:41.7695493Z META: ran handlers\r\n2020-08-06T18:52:41.8388493Z \r\n2020-08-06T18:52:41.8396629Z TASK [set_fact] ****************************************************************\r\n2020-08-06T18:52:41.8401293Z task path: /data/ansiadmin/agent/_work/r1/a/_ansible-linux/playbooks/foobar.yml:7\r\n2020-08-06T18:52:41.8961323Z ok: [localhost] => {\r\n2020-08-06T18:52:41.8963526Z     \"ansible_facts\": {\r\n2020-08-06T18:52:41.8965961Z         \"test_list\": [\r\n2020-08-06T18:52:41.8969372Z             \"foo-bar\", \r\n2020-08-06T18:52:41.8971948Z             \"foo-bar-zed\", \r\n2020-08-06T18:52:41.8974718Z             \"foo-bar-baz\"\r\n2020-08-06T18:52:41.8976471Z         ]\r\n2020-08-06T18:52:41.8979393Z     }, \r\n2020-08-06T18:52:41.8981238Z     \"changed\": false\r\n2020-08-06T18:52:41.8983308Z }\r\n2020-08-06T18:52:41.9652641Z \r\n2020-08-06T18:52:41.9656463Z TASK [set_fact] ****************************************************************\r\n2020-08-06T18:52:41.9661214Z task path: /data/ansiadmin/agent/_work/r1/a/_ansible-linux/playbooks/foobar.yml:12\r\n2020-08-06T18:52:42.2878751Z ok: [localhost] => {\r\n2020-08-06T18:52:42.2881326Z     \"ansible_facts\": {\r\n2020-08-06T18:52:42.2882657Z         \"failing_difference_baz\": [\r\n2020-08-06T18:52:42.2886591Z             \"foo-bar-zed\"\r\n2020-08-06T18:52:42.2888924Z         ], \r\n2020-08-06T18:52:42.2889915Z         \"failing_difference_zed\": [\r\n2020-08-06T18:52:42.2891681Z             \"foo-bar-baz\"\r\n2020-08-06T18:52:42.2892563Z         ], \r\n2020-08-06T18:52:42.2893485Z         \"working_difference\": [\r\n2020-08-06T18:52:42.2895011Z             \"foo-bar-zed\", \r\n2020-08-06T18:52:42.2896456Z             \"foo-bar-baz\"\r\n2020-08-06T18:52:42.2897712Z         ]\r\n2020-08-06T18:52:42.2898474Z     }, \r\n2020-08-06T18:52:42.2899317Z     \"changed\": false\r\n2020-08-06T18:52:42.2900076Z }\r\n2020-08-06T18:52:42.3670986Z \r\n2020-08-06T18:52:42.3674027Z TASK [My Expectations] *********************************************************\r\n2020-08-06T18:52:42.3678056Z task path: /data/ansiadmin/agent/_work/r1/a/_ansible-linux/playbooks/foobar.yml:16\r\n2020-08-06T18:52:42.7300176Z fatal: [localhost]: FAILED! => {\r\n2020-08-06T18:52:42.7315164Z     \"msg\": \"The conditional check ''foo-bar-zed' in failing_differnce_baz and 'foo-bar' in failing_differnce_baz' failed. The error was: error while evaluating conditional ('foo-bar-zed' in failing_differnce_baz and 'foo-bar' in failing_differnce_baz): Unable to look up a name or access an attribute in template string ({% if 'foo-bar-zed' in failing_differnce_baz and 'foo-bar' in failing_differnce_baz %} True {% else %} False {% endif %}).\\nMake sure your variable name does not contain invalid characters like '-': argument of type 'AnsibleUndefined' is not iterable\"\r\n2020-08-06T18:52:42.7326844Z }\r\n2020-08-06T18:52:42.7339748Z \r\n2020-08-06T18:52:42.7342418Z PLAY RECAP *********************************************************************\r\n2020-08-06T18:52:42.7364023Z localhost                  : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71123", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71123/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71123/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71123/events", "html_url": "https://github.com/ansible/ansible/issues/71123", "id": 674505301, "node_id": "MDU6SXNzdWU2NzQ1MDUzMDE=", "number": 71123, "title": "Improve readability of long stdout ansible tasks in jenkins console", "user": {"login": "bandiparimala", "id": 25062668, "node_id": "MDQ6VXNlcjI1MDYyNjY4", "avatar_url": "https://avatars0.githubusercontent.com/u/25062668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bandiparimala", "html_url": "https://github.com/bandiparimala", "followers_url": "https://api.github.com/users/bandiparimala/followers", "following_url": "https://api.github.com/users/bandiparimala/following{/other_user}", "gists_url": "https://api.github.com/users/bandiparimala/gists{/gist_id}", "starred_url": "https://api.github.com/users/bandiparimala/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bandiparimala/subscriptions", "organizations_url": "https://api.github.com/users/bandiparimala/orgs", "repos_url": "https://api.github.com/users/bandiparimala/repos", "events_url": "https://api.github.com/users/bandiparimala/events{/privacy}", "received_events_url": "https://api.github.com/users/bandiparimala/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-06T18:09:10Z", "updated_at": "2020-08-06T20:39:35Z", "closed_at": "2020-08-06T20:38:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nCurrently some tasks (mainly command/shell) print a huge text without line breaks which makes it super hard to read in console\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\nI have tried callback plugins like stdout_callback and verbose_to_stderr and it works only when I run playbook locally but it is not working on jenkins console\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.11\r\n  config file = /home/local/osd-ansible-client/ansible.cfg\r\n  configured module search path = [u'/home/local/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Jul 21 2020, 15:19:50) [GCC 5.4.0 20160609]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nOSD: Ubuntu\r\nEnvironment: Jenkins ansible integration\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nWould be better if we would have nice line breaks everywhere to increase readability\r\n\r\n For example, the following command will show the nice stdout / stderr in readable format\r\nansible-playbook -vvv service.yml\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71121", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71121/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71121/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71121/events", "html_url": "https://github.com/ansible/ansible/issues/71121", "id": 674493941, "node_id": "MDU6SXNzdWU2NzQ0OTM5NDE=", "number": 71121, "title": "vmware_host_facts - \"ESXi 'host' not found", "user": {"login": "automateyournetwork", "id": 44117002, "node_id": "MDQ6VXNlcjQ0MTE3MDAy", "avatar_url": "https://avatars1.githubusercontent.com/u/44117002?v=4", "gravatar_id": "", "url": "https://api.github.com/users/automateyournetwork", "html_url": "https://github.com/automateyournetwork", "followers_url": "https://api.github.com/users/automateyournetwork/followers", "following_url": "https://api.github.com/users/automateyournetwork/following{/other_user}", "gists_url": "https://api.github.com/users/automateyournetwork/gists{/gist_id}", "starred_url": "https://api.github.com/users/automateyournetwork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/automateyournetwork/subscriptions", "organizations_url": "https://api.github.com/users/automateyournetwork/orgs", "repos_url": "https://api.github.com/users/automateyournetwork/repos", "events_url": "https://api.github.com/users/automateyournetwork/events{/privacy}", "received_events_url": "https://api.github.com/users/automateyournetwork/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 61528803, "node_id": "MDU6TGFiZWw2MTUyODgwMw==", "url": "https://api.github.com/repos/ansible/ansible/labels/cloud", "name": "cloud", "color": "4071a5", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991469279, "node_id": "MDU6TGFiZWwxOTkxNDY5Mjc5", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.vmware", "name": "collection:community.vmware", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 427121291, "node_id": "MDU6TGFiZWw0MjcxMjEyOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/vmware", "name": "vmware", "color": "c5def5", "default": false, "description": "VMware community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-06T17:48:45Z", "updated_at": "2020-08-06T20:38:41Z", "closed_at": "2020-08-06T20:38:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nI am trying to connect and use the vmware_host_facts module based on the documentation but get an error that the ESXi host is not found \r\n\r\nI can see the vCenter authenticate my user / python request in the logs but I am not able to get the host facts because it never finds the hosts. \r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nvmware_host_facts\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\nansible 2.9.1\r\n  config file = /home/capobj/Lab-Infrastructure/playbooks/ansible.cfg\r\n  configured module search path = ['/home/capobj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\nDEFAULT_FILTER_PLUGIN_PATH(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = ['/home/capobj/Lab-Infr\r\nDEFAULT_GATHERING(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = explicit\r\nDEFAULT_HOST_LIST(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = ['/home/capobj/Lab-Infrastructur\r\nDEFAULT_ROLES_PATH(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = ['/home/capobj/Lab-Infrastructu\r\nDEFAULT_TRANSPORT(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = local\r\nHOST_KEY_CHECKING(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = False\r\nPERSISTENT_COMMAND_TIMEOUT(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = 320\r\nPERSISTENT_CONNECT_TIMEOUT(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = 380\r\nRETRY_FILES_ENABLED(/home/capobj/Lab-Infrastructure/playbooks/ansible.cfg) = False\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nCentOS\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n# Gather VMWare Host Facts\r\n    - name: Gather vmware host facts\r\n      vmware_host_facts:\r\n        hostname: \"{{ vmware_hostname }}\"\r\n        username: \"{{ vmware_user }}\"\r\n        password: \"{{ vmware_password }}\"\r\n        esxi_hostname: \"{{ inventory_hostname }}\"\r\n        validate_certs: no\r\n      register: host_facts\r\n      delegate_to: localhost\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n\r\n# Gather VMWare Host Facts\r\n    - name: Gather vmware host facts\r\n      vmware_host_facts:\r\n        hostname: \"{{ vmware_hostname }}\"\r\n        username: \"{{ vmware_user }}\"\r\n        password: \"{{ vmware_password }}\"\r\n        esxi_hostname: \"{{ inventory_hostname }}\"\r\n        validate_certs: no\r\n      register: host_facts\r\n      delegate_to: localhost\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nThe facts from the esxi_hosts targeted \r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n\r\nTASK [Gather vmware host facts] ***************************************************************************\r\nfatal: [vhost01 -> localhost]: FAILED! => {\"changed\": false, \"msg\": \"ESXi 'vhost01' not found\"}\r\n\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```\r\nansible-playbook VMWareFacts.yml\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71117", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71117/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71117/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71117/events", "html_url": "https://github.com/ansible/ansible/issues/71117", "id": 674341526, "node_id": "MDU6SXNzdWU2NzQzNDE1MjY=", "number": 71117, "title": "win_user / modify existing user in Administrator group failed", "user": {"login": "nesies", "id": 107966, "node_id": "MDQ6VXNlcjEwNzk2Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/107966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nesies", "html_url": "https://github.com/nesies", "followers_url": "https://api.github.com/users/nesies/followers", "following_url": "https://api.github.com/users/nesies/following{/other_user}", "gists_url": "https://api.github.com/users/nesies/gists{/gist_id}", "starred_url": "https://api.github.com/users/nesies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nesies/subscriptions", "organizations_url": "https://api.github.com/users/nesies/orgs", "repos_url": "https://api.github.com/users/nesies/repos", "events_url": "https://api.github.com/users/nesies/events{/privacy}", "received_events_url": "https://api.github.com/users/nesies/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991397414, "node_id": "MDU6TGFiZWwxOTkxMzk3NDE0", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:ansible.windows", "name": "collection:ansible.windows", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 108461331, "node_id": "MDU6TGFiZWwxMDg0NjEzMzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/windows", "name": "windows", "color": "AAAAAA", "default": false, "description": "Windows community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-06T14:05:55Z", "updated_at": "2020-08-06T14:20:30Z", "closed_at": "2020-08-06T14:16:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nwin_user is not idempotent with the user is in Administrator group.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/windows/win_user.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible-playbook 2.9.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/cody/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible-playbook\r\n  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nCentOS Linux release 7.8.2003 (Core)\r\nAnsible installed from epel-7\r\n\r\n##### STEPS TO REPRODUCE\r\nexecute the follow task two times\r\n\r\n```yaml\r\n  win_user:\r\n    name: useradm\r\n    account_disabled: no\r\n    account_locked: no\r\n    description: \"admin account\"\r\n    groups: Administrators\r\n    groups_action: add\r\n    password: \"{{ password }}\"\r\n    password_expired: no\r\n    password_never_expires: yes\r\n    update_password: always\r\n    user_cannot_change_password: yes\r\n    state: present\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nwin_user is supposed to be idempotent.\r\nThe first first create the user\r\nThe second run update the user (password)\r\n\r\n##### ACTUAL RESULTS\r\nThe second run fails with:\r\n```\r\n fatal: [172.22.100.83]: FAILED! => {\r\n   \"changed\": true,\r\n   \"msg\": \"Exception calling \\\"SetInfo\\\" with \\\"0\\\" argument(s): \\\"This operation is disallowed as it could result in an administration account being disabled, deleted or unable to logon.\\r\\n\\\"\"\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71110", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71110/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71110/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71110/events", "html_url": "https://github.com/ansible/ansible/issues/71110", "id": 673731947, "node_id": "MDU6SXNzdWU2NzM3MzE5NDc=", "number": 71110, "title": "ipa module utils can not handle HA FreeIPA with Python3", "user": {"login": "marthydavid", "id": 11924023, "node_id": "MDQ6VXNlcjExOTI0MDIz", "avatar_url": "https://avatars2.githubusercontent.com/u/11924023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marthydavid", "html_url": "https://github.com/marthydavid", "followers_url": "https://api.github.com/users/marthydavid/followers", "following_url": "https://api.github.com/users/marthydavid/following{/other_user}", "gists_url": "https://api.github.com/users/marthydavid/gists{/gist_id}", "starred_url": "https://api.github.com/users/marthydavid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marthydavid/subscriptions", "organizations_url": "https://api.github.com/users/marthydavid/orgs", "repos_url": "https://api.github.com/users/marthydavid/repos", "events_url": "https://api.github.com/users/marthydavid/events{/privacy}", "received_events_url": "https://api.github.com/users/marthydavid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1932404776, "node_id": "MDU6TGFiZWwxOTMyNDA0Nzc2", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.general", "name": "collection:community.general", "color": "ededed", "default": false, "description": null}, {"id": 814251818, "node_id": "MDU6TGFiZWw4MTQyNTE4MTg=", "url": "https://api.github.com/repos/ansible/ansible/labels/has_pr", "name": "has_pr", "color": "1d76db", "default": false, "description": "This issue has an associated PR."}, {"id": 1231572998, "node_id": "MDU6TGFiZWwxMjMxNTcyOTk4", "url": "https://api.github.com/repos/ansible/ansible/labels/identity", "name": "identity", "color": "4071a5", "default": false, "description": "Identity category"}, {"id": 1225095513, "node_id": "MDU6TGFiZWwxMjI1MDk1NTEz", "url": "https://api.github.com/repos/ansible/ansible/labels/ipa", "name": "ipa", "color": "c5def5", "default": false, "description": "IPA community"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-05T17:50:19Z", "updated_at": "2020-08-12T16:31:24Z", "closed_at": "2020-08-07T20:38:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nmodule_utils/ipa.py does not handle multiple cookie objects in http request if ansible is used with Python3.6 and \r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nipa_hostgroup \r\nidentity/ipa*\r\n\r\n##### ANSIBLE VERSION\r\n```bash\r\nansible 2.9.9\r\n  config file = /home/OWNUSER/ansible/ansible.cfg\r\n  configured module search path = ['/home/OWNUSER/ansible/OWNFOLDER/module']\r\n  ansible python module location = /var/lib/ansible-py/lib64/python3.6/site-packages/ansible\r\n  executable location = /var/lib/ansible-py/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\nUsing /home/OWNUSER/ansible/ansible.cfg as config file\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```bash\r\nANSIBLE_PIPELINING(/home/OWNUSER/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_RETRIES(/home/OWNUSER/ansible/ansible.cfg) = 3\r\nCOLLECTIONS_PATHS(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/galaxy_collections']\r\nDEFAULT_ACTION_PLUGIN_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/erfiansible/action']\r\nDEFAULT_BECOME(/home/OWNUSER/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_METHOD(/home/OWNUSER/ansible/ansible.cfg) = sudo\r\nDEFAULT_BECOME_USER(/home/OWNUSER/ansible/ansible.cfg) = root\r\nDEFAULT_CALLBACK_PLUGIN_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/erfiansible/callback']\r\nDEFAULT_CALLBACK_WHITELIST(/home/OWNUSER/ansible/ansible.cfg) = ['timer', 'profile_tasks', 'rocketchat']\r\nDEFAULT_FORCE_HANDLERS(/home/OWNUSER/ansible/ansible.cfg) = True\r\nDEFAULT_FORKS(/home/OWNUSER/ansible/ansible.cfg) = 100\r\nDEFAULT_GATHERING(/home/OWNUSER/ansible/ansible.cfg) = explicit\r\nDEFAULT_HOST_LIST(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/inventories/erfi.yml']\r\nDEFAULT_INVENTORY_PLUGIN_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/erfiansible/inventory']\r\nDEFAULT_LOOKUP_PLUGIN_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/erfiansible/lookup']\r\nDEFAULT_MODULE_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/erfiansible/module']\r\nDEFAULT_MODULE_UTILS_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/erfiansible/module_utils']\r\nDEFAULT_PRIVATE_KEY_FILE(/home/OWNUSER/ansible/ansible.cfg) = /Users/otp00234228/.ssh/ansible_rsa\r\nDEFAULT_REMOTE_USER(/home/OWNUSER/ansible/ansible.cfg) = ansible\r\nDEFAULT_ROLES_PATH(/home/OWNUSER/ansible/ansible.cfg) = ['/home/OWNUSER/ansible/galaxy_roles', '/home/OWNUSER/ansible/roles', '/home/OWNUSER/ansible/roles/kubernetes']\r\nDEFAULT_STRATEGY(/home/OWNUSER/ansible/ansible.cfg) = linear\r\nDEFAULT_TIMEOUT(/home/OWNUSER/ansible/ansible.cfg) = 40\r\nDEFAULT_VERBOSITY(/home/OWNUSER/ansible/ansible.cfg) = 3\r\nHOST_KEY_CHECKING(/home/OWNUSER/ansible/ansible.cfg) = False\r\nINVENTORY_ENABLED(/home/OWNUSER/ansible/ansible.cfg) = ['erfi', 'script']\r\nINVENTORY_UNPARSED_IS_FAILED(/home/OWNUSER/ansible/ansible.cfg) = True\r\nSHOW_CUSTOM_STATS(/home/OWNUSER/ansible/ansible.cfg) = True\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nSetup multi node freeipa with a Load balancer in front of them.\r\nExample config snippet for HAProxy:\r\n```\r\nfrontend https\r\nbind   10.0.0.100:443  tfo  ssl  crt /etc/pki/tls/certs/haproxy/example.com.pem\r\nmode                       http\r\noption                     forwardfor except 127.0.0.0/8\r\noption                     http-keep-alive\r\ntimeout http-request       10s\r\ntimeout http-keep-alive    10s\r\nhttp-response set-header   Strict-Transport-Security max-age=1576800\r\nhttp-response set-header   X-Frame-Options sameorigin\r\nhttp-response set-header   X-Forwarded-Proto https\r\nhttp-response set-header   Cache-Control no-cache,\\ max-age=600\r\nhttp-response set-header   X-XSS-Protection 1\r\nhttp-response set-header   X-Content-Type-Options nosniff\r\ncapture request header     x-request-id len 128\r\ncapture request header     x-transaction-id len 64\r\ncapture response header    x-request-id len 128\r\ncapture response header    x-transaction-id len 64\r\noption  httplog\r\nacl is_root path -i /\r\nacl host_ipa hdr_dom(host) -i ipa\r\nredirect code 301 location https://ipa.example.com/ipa/ui if is_root host_ipa\r\nuse_backend ipa_https if host_ipa\r\n\r\n\r\nbackend ipa_https\r\nmode   http\r\nbalance  roundrobin\r\ncookie   SERVERID  insert  indirect  nocache  secure  httponly\r\nhttp-request set-header SERVERID %{+Q}[req.cook(SERVERID)]\r\nhttp-request add-header  X-Forwarded-Proto https\r\noption  http-keep-alive\r\nhttp-reuse  always\r\ntimeout  http-request 10s\r\ntimeout  http-keep-alive 10s\r\nredirect  scheme https   if !{ ssl_fc }\r\ncookie SERVERID insert indirect nocache httponly secure\r\nacl hdr_ipa01 req.cook(SERVERID) -m sub 10.0.0.101\r\nacl hdr_ipa02 req.cook(SERVERID) -m sub 10.0.0.102\r\nhttp-request replace-header Referer ^https://.*\\.example\\.com(.*)$ https://ipa01\\.\\example\\.com\\1 if hdr_ipa01\r\nhttp-request replace-header Referer ^https://.*\\.example\\.com(.*)$ https://ipa02\\.example\\.com\\1 if hdr_ipa02\r\nacl hdr_set_cookie_dom_ipa01 res.hdr(Set-cookie) -m sub Domain=ipa01.example.com\r\nhttp-response replace-header Set-Cookie Domain=ipa01.example.com(.*) Domain=ipa.example.com\\1 if hdr_set_cookie_dom_ipa02\r\nacl hdr_set_cookie_dom_ipa02 res.hdr(Set-cookie) -m sub Domain=ipa02.example.com\r\nhttp-response replace-header Set-Cookie Domain=ipa01.example.com(.*) Domain=ipa.example.com\\1 if hdr_set_cookie_dom_ipa02\r\nserver   10.0.0.101  10.0.0.101:443  check  cookie 10.0.0.101  ssl  check  verify none\r\nserver   10.0.0.102  10.0.0.102:443  check  cookie 10.0.0.102  ssl  check  verify none\r\n```\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n- name: Manage IPA Hostgroup\r\n  hosts: all\r\n  tasks:\r\n  - name: Add hostgroup\r\n    become: no\r\n    run_once: true\r\n    ipa_hostgroup:\r\n      name: \"{{ hostgroup }}\"\r\n      ipa_host: \"{{ ipa_server }}\"\r\n      ipa_pass: \"{{ ipa_password }}\"\r\n      ipa_user: \"{{ ipa_username }}\"\r\n      state: present\r\n    delegate_to: localhost\r\n\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nSuccess\r\n\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nfatal: [localhost -> localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"cn\": \"test\",\r\n            \"description\": null,\r\n            \"host\": null,\r\n            \"hostgroup\": null,\r\n            \"ipa_host\": \"ipa.example.com\",\r\n            \"ipa_pass\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"ipa_port\": 443,\r\n            \"ipa_prot\": \"https\",\r\n            \"ipa_timeout\": 10,\r\n            \"ipa_user\": \"user\",\r\n            \"name\": \"test\",\r\n            \"state\": \"present\",\r\n            \"validate_certs\": true\r\n        }\r\n    },\r\n    \"msg\": \"hostgroup_find: HTTP Error 401: Unauthorized\"\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71108", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71108/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71108/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71108/events", "html_url": "https://github.com/ansible/ansible/issues/71108", "id": 673706229, "node_id": "MDU6SXNzdWU2NzM3MDYyMjk=", "number": 71108, "title": "Bug with win_chocolatey", "user": {"login": "DanRod1", "id": 69258328, "node_id": "MDQ6VXNlcjY5MjU4MzI4", "avatar_url": "https://avatars1.githubusercontent.com/u/69258328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanRod1", "html_url": "https://github.com/DanRod1", "followers_url": "https://api.github.com/users/DanRod1/followers", "following_url": "https://api.github.com/users/DanRod1/following{/other_user}", "gists_url": "https://api.github.com/users/DanRod1/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanRod1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanRod1/subscriptions", "organizations_url": "https://api.github.com/users/DanRod1/orgs", "repos_url": "https://api.github.com/users/DanRod1/repos", "events_url": "https://api.github.com/users/DanRod1/events{/privacy}", "received_events_url": "https://api.github.com/users/DanRod1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}, {"id": 108461331, "node_id": "MDU6TGFiZWwxMDg0NjEzMzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/windows", "name": "windows", "color": "AAAAAA", "default": false, "description": "Windows community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-05T17:02:59Z", "updated_at": "2020-08-06T20:39:33Z", "closed_at": "2020-08-05T19:58:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nWhen i add version to win_chocolatey with the state absent ansible concatenate several time the version to the name of the package\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nwin_chocolatey\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\nansible 2.9.7\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/etc/ansible/custom_modules/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.6.8 (default, Nov 21 2019, 19:31:34) [GCC 8.3.1 20190507 (Red Hat 8.3.1-4)]\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\nANSIBLE_PIPELINING(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/etc/ansible/ansible.cfg) = -C -o ControlMaster=auto -o ControlPersist=600s\r\nDEFAULT_ACTION_PLUGIN_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/action_plugins']\r\nDEFAULT_CALLBACK_WHITELIST(/etc/ansible/ansible.cfg) = ['foreman']\r\nDEFAULT_HOST_LIST(/etc/ansible/ansible.cfg) = ['/etc/ansible/custom_modules/tests/inventory/hosts']\r\nDEFAULT_MODULE_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/custom_modules/plugins/modules']\r\nDEFAULT_MODULE_UTILS_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/custom_modules/plugins/module_utils']\r\nDEFAULT_STRATEGY(/etc/ansible/ansible.cfg) = mitogen_linear\r\nDEFAULT_STRATEGY_PLUGIN_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/mitogen-0.2.9/ansible_mitogen/plugins/strategy']\r\nDEFAULT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\nDISPLAY_SKIPPED_HOSTS(/etc/ansible/ansible.cfg) = False\r\nDOC_FRAGMENT_PLUGIN_PATH(/etc/ansible/ansible.cfg) = ['/etc/ansible/custom_modules/plugins/doc_fragments']\r\nRETRY_FILES_ENABLED(/etc/ansible/ansible.cfg) = False\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\ncentos 8\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nBelow the task used to produce the problem\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n  - name: Get version Installed\r\n    set_fact:\r\n      installedVersion: \"{{ ansible_chocolatey | json_query(query) | join(' ')  }}\"\r\n    vars:\r\n      query: \"packages[?package=='netbackup'].version\"\r\n\r\n  - block :\r\n    - name: \"uninstall version {{ installedVersion }}\"\r\n      win_chocolatey:\r\n        name: netbackup\r\n        version: \"{{ installedVersion }}\"\r\n        state: absent\r\n\r\n    - name: \"install version {{ netbackup_version }}\"\r\n      win_chocolatey:\r\n        name: netbackup\r\n        version: \"{{ netbackup_version }}\"\r\n        params: \"/netbackup_server:{{ netbackup_server }} /netbackup_home:{{ netbackup_ms_home }}\"\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n{\r\n    \"changed\": true,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"ignore_checksums\": false,\r\n            \"source_username\": null,\r\n            \"architecture\": \"default\",\r\n            \"allow_prerelease\": false,\r\n            \"install_args\": null,\r\n            \"allow_multiple\": false,\r\n            \"source_password\": null,\r\n            \"source\": null,\r\n            \"version\": null,\r\n            \"state\": \"absent\",\r\n            \"ignore_dependencies\": false,\r\n            \"proxy_username\": null,\r\n            \"pinned\": null,\r\n            \"force\": false,\r\n            \"skip_scripts\": false,\r\n            \"allow_empty_checksums\": false,\r\n            \"timeout\": 2700,\r\n            \"proxy_password\": null,\r\n            \"proxy_url\": null,\r\n            \"package_params\": null,\r\n            \"validate_certs\": true,\r\n            \"name\": [\r\n                \"netbackup\"\r\n            ]\r\n        }\r\n    },\r\n    \"rc\": 0,\r\n    \"_ansible_no_log\": false\r\n}\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nAs you can see on the output the version is added to th package name several times\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n{\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"ignore_checksums\": false,\r\n            \"source_username\": null,\r\n            \"architecture\": \"default\",\r\n            \"allow_prerelease\": false,\r\n            \"install_args\": null,\r\n            \"allow_multiple\": false,\r\n            \"source_password\": null,\r\n            \"source\": null,\r\n            \"version\": \"8.0.0\",\r\n            \"state\": \"absent\",\r\n            \"ignore_dependencies\": false,\r\n            \"proxy_username\": null,\r\n            \"pinned\": null,\r\n            \"force\": false,\r\n            \"skip_scripts\": false,\r\n            \"allow_empty_checksums\": false,\r\n            \"timeout\": 2700,\r\n            \"proxy_password\": null,\r\n            \"proxy_url\": null,\r\n            \"package_params\": null,\r\n            \"validate_certs\": true,\r\n            \"name\": [\r\n                \"netbackup\"\r\n            ]\r\n        }\r\n    },\r\n    \"rc\": 1,\r\n    \"command\": \"C:\\\\ProgramData\\\\chocolatey\\\\bin\\\\choco.exe uninstall netbackup --yes --no-progress --limit-output --timeout 2700 --allow-multiple --version 8.0.0\",\r\n    \"stdout\": \"Uninstalling the following packages:\\r\\nnetbackup\\r\\n\\r\\nnetbackup v8.0.0\\r\\nDirectory 'C:\\\\ProgramData\\\\chocolatey\\\\lib\\\\netbackup.8.0.0.8.0.0' does not exist.\\r\\nnetbackup uninstall not successful.\\r\\nPackage install not found:'C:\\\\ProgramData\\\\chocolatey\\\\lib\\\\netbackup.8.0.0.8.0.0'\\r\\nnetbackup not uninstalled. An error occurred during uninstall:\\r\\n netbackup uninstall not successful.\\r\\n\\r\\nChocolatey uninstalled 0/1 packages. 1 packages failed.\\r\\n See the log for details (C:\\\\ProgramData\\\\chocolatey\\\\logs\\\\chocolatey.log).\\r\\n\\r\\nFailures\\r\\n - netbackup (exited 1) - Package install not found:'C:\\\\ProgramData\\\\chocolatey\\\\lib\\\\netbackup.8.0.0.8.0.0'\\r\\n\\r\\nIf a package uninstall is failing and/or you've already uninstalled the\\r\\n software outside of Chocolatey, you can attempt to run the command \\r\\n with `-n` to skip running a chocolateyUninstall script, additionally\\r\\n adding `--skip-autouninstaller` to skip an attempt to automatically \\r\\n remove system-installed software. This will only remove the packaging \\r\\n files and not things like software installed to Programs and Features.\\r\\n\\r\\nIf a package is failing because it is a dependency of another package\\r\\n or packages, then you may first need to consider if it needs removed\\r\\n as it is typically installed as a dependency for a reason. If you \\r\\n decide that you still want to remove it, head into \\r\\n `$env:ChocolateyInstall\\\\lib` and find the package folder you want \\r\\n removed. Then delete the folder for the package. This option should\\r\\n only be used as a last resort.\\r\\n \\r\\n\",\r\n    \"stderr\": \"\",\r\n    \"msg\": \"Error uninstalling package(s) 'netbackup'\",\r\n    \"stdout_lines\": [\r\n        \"Uninstalling the following packages:\",\r\n        \"netbackup\",\r\n        \"\",\r\n        \"netbackup v8.0.0\",\r\n        \"Directory 'C:\\\\ProgramData\\\\chocolatey\\\\lib\\\\netbackup.8.0.0.8.0.0' does not exist.\",\r\n        \"netbackup uninstall not successful.\",\r\n        \"Package install not found:'C:\\\\ProgramData\\\\chocolatey\\\\lib\\\\netbackup.8.0.0.8.0.0'\",\r\n        \"netbackup not uninstalled. An error occurred during uninstall:\",\r\n        \" netbackup uninstall not successful.\",\r\n        \"\",\r\n        \"Chocolatey uninstalled 0/1 packages. 1 packages failed.\",\r\n        \" See the log for details (C:\\\\ProgramData\\\\chocolatey\\\\logs\\\\chocolatey.log).\",\r\n        \"\",\r\n        \"Failures\",\r\n        \" - netbackup (exited 1) - Package install not found:'C:\\\\ProgramData\\\\chocolatey\\\\lib\\\\netbackup.8.0.0.8.0.0'\",\r\n        \"\",\r\n        \"If a package uninstall is failing and/or you've already uninstalled the\",\r\n        \" software outside of Chocolatey, you can attempt to run the command \",\r\n        \" with `-n` to skip running a chocolateyUninstall script, additionally\",\r\n        \" adding `--skip-autouninstaller` to skip an attempt to automatically \",\r\n        \" remove system-installed software. This will only remove the packaging \",\r\n        \" files and not things like software installed to Programs and Features.\",\r\n        \"\",\r\n        \"If a package is failing because it is a dependency of another package\",\r\n        \" or packages, then you may first need to consider if it needs removed\",\r\n        \" as it is typically installed as a dependency for a reason. If you \",\r\n        \" decide that you still want to remove it, head into \",\r\n        \" `$env:ChocolateyInstall\\\\lib` and find the package folder you want \",\r\n        \" removed. Then delete the folder for the package. This option should\",\r\n        \" only be used as a last resort.\",\r\n        \" \"\r\n    ],\r\n    \"stderr_lines\": [],\r\n    \"_ansible_no_log\": false\r\n}\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71106", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71106/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71106/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71106/events", "html_url": "https://github.com/ansible/ansible/issues/71106", "id": 673699669, "node_id": "MDU6SXNzdWU2NzM2OTk2Njk=", "number": 71106, "title": "module ios_l2_interfaces not merging vlan allowed", "user": {"login": "pierremahot", "id": 23644243, "node_id": "MDQ6VXNlcjIzNjQ0MjQz", "avatar_url": "https://avatars0.githubusercontent.com/u/23644243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierremahot", "html_url": "https://github.com/pierremahot", "followers_url": "https://api.github.com/users/pierremahot/followers", "following_url": "https://api.github.com/users/pierremahot/following{/other_user}", "gists_url": "https://api.github.com/users/pierremahot/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierremahot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierremahot/subscriptions", "organizations_url": "https://api.github.com/users/pierremahot/orgs", "repos_url": "https://api.github.com/users/pierremahot/repos", "events_url": "https://api.github.com/users/pierremahot/events{/privacy}", "received_events_url": "https://api.github.com/users/pierremahot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1243667141, "node_id": "MDU6TGFiZWwxMjQzNjY3MTQx", "url": "https://api.github.com/repos/ansible/ansible/labels/cisco", "name": "cisco", "color": "873ee0", "default": false, "description": "Cisco technologies"}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991400259, "node_id": "MDU6TGFiZWwxOTkxNDAwMjU5", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:cisco.ios", "name": "collection:cisco.ios", "color": "ededed", "default": false, "description": null}, {"id": 1243609533, "node_id": "MDU6TGFiZWwxMjQzNjA5NTMz", "url": "https://api.github.com/repos/ansible/ansible/labels/ios", "name": "ios", "color": "c5def5", "default": false, "description": "Cisco IOS community"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 339653091, "node_id": "MDU6TGFiZWwzMzk2NTMwOTE=", "url": "https://api.github.com/repos/ansible/ansible/labels/networking", "name": "networking", "color": "4071a5", "default": false, "description": "Network category"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-05T16:51:37Z", "updated_at": "2020-08-06T20:39:33Z", "closed_at": "2020-08-05T17:43:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### SUMMARY\r\nThe new ios_l2_interfaces that replace ios_l2_interface is not merging allowed vlan when merge is selected\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nios_l2_interfaces\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.11\r\n  config file = None\r\n  configured module search path = ['/home/pierre/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/pierre/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/pierre/.local/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n\r\n##### OS / ENVIRONMENT\r\nfor ansible :\r\nUbuntu 20.04\r\nfor the switch :\r\ncisco C2960 ios 15.02\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n```yaml\r\nios_l2_interfaces:\r\n    config:\r\n      - name: GigabitEthernet0/2\r\n        trunk:\r\n          allowed_vlan: 10-20, 40\r\n\r\nios_l2_interfaces:\r\n    config:\r\n      - name: GigabitEthernet0/2\r\n        trunk:\r\n          allowed_vlan: 11\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n\r\n# interface GigabitEthernet0/2\r\n#  switchport trunk allowed vlan 10-20,40\r\n\r\n##### ACTUAL RESULTS\r\nThe allowed vlans are just replace instead of merge\r\n\r\n```paste below\r\n# interface GigabitEthernet0/2\r\n#  switchport trunk allowed vlan 11\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71103", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71103/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71103/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71103/events", "html_url": "https://github.com/ansible/ansible/issues/71103", "id": 673305001, "node_id": "MDU6SXNzdWU2NzMzMDUwMDE=", "number": 71103, "title": "winrm Kerberos automatic ticket management doesn't work", "user": {"login": "samalv", "id": 68048469, "node_id": "MDQ6VXNlcjY4MDQ4NDY5", "avatar_url": "https://avatars3.githubusercontent.com/u/68048469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samalv", "html_url": "https://github.com/samalv", "followers_url": "https://api.github.com/users/samalv/followers", "following_url": "https://api.github.com/users/samalv/following{/other_user}", "gists_url": "https://api.github.com/users/samalv/gists{/gist_id}", "starred_url": "https://api.github.com/users/samalv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samalv/subscriptions", "organizations_url": "https://api.github.com/users/samalv/orgs", "repos_url": "https://api.github.com/users/samalv/repos", "events_url": "https://api.github.com/users/samalv/events{/privacy}", "received_events_url": "https://api.github.com/users/samalv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1932404776, "node_id": "MDU6TGFiZWwxOTMyNDA0Nzc2", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.general", "name": "collection:community.general", "color": "ededed", "default": false, "description": null}, {"id": 814251818, "node_id": "MDU6TGFiZWw4MTQyNTE4MTg=", "url": "https://api.github.com/repos/ansible/ansible/labels/has_pr", "name": "has_pr", "color": "1d76db", "default": false, "description": "This issue has an associated PR."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2020-08-05T07:01:45Z", "updated_at": "2020-08-12T16:31:24Z", "closed_at": "2020-08-07T23:06:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nWinRM kerberos tickets are not getting generated for the playbook tasks, the issue fails in 2.9.10 and 2.9.11 version, while it works with no code change in 2.9.9\r\n\r\nIn affected Ansible version (2.9.10 and 2.9.11), if I generate a Kerberos ticket (via kinit) in awx_task docker before running the playm the play works, in Ansible 2.9.9 the play will run with no manual ticket creation.\r\n\r\nBeside realms configuration (which I am sure they are right as the code works for Ansible 2.9.9), below are other krb5 configuration and I had always default_ccache_name disabled.\r\n\r\n```\r\nbash-4.4# cat /etc/krb5.conf\r\n[logging]\r\n default = FILE:/var/log/krb5libs.log\r\n kdc = FILE:/var/log/krb5kdc.log\r\n admin_server = FILE:/var/log/kadmind.log\r\n\r\n[libdefaults]\r\n default_realm = <DOMAIN NAME>\r\n dns_lookup_realm = false\r\n dns_lookup_kdc = false\r\n ticket_lifetime = 24h\r\n renew_lifetime = 7d\r\n forwardable = true\r\n rdns = false\r\n# default_ccache_name = KEYRING:persistent:%{uid}\r\n```\r\n\r\nAlthough if fails in AWX, in awx_docker command line, below works:\r\n\r\n```\r\nbash-4.4# cat sam_inven\r\n[windows]\r\n<HOST FQDN>\r\n\r\n[windows:vars]\r\nansible_user=<AD ACCOUNT>@<DOMAIN NAME>\r\nansible_password=<AD ACCOUNT Password>\r\nansible_connection=winrm\r\nansible_port=5986\r\nansible_winrm_transport=kerberos\r\nansible_winrm_server_cert_validation=ignore\r\nansible_winrm_kerberos_delegation=true\r\nbecome_method=runas\r\n```\r\n\r\n```\r\nbash-4.4# cat test-play.yml\r\n---\r\n- name: PROXY TEST\r\n  hosts: <HOST FQDN>\r\n  gather_facts: no\r\n  collections:\r\n    - community.vmware\r\n\r\n  tasks:\r\n    - name: Wait for system connection via WinRM\r\n      wait_for_connection:\r\n        timeout: 20\r\n      register: result_wait\r\n\r\n    - name: Show WinRM result\r\n      debug:\r\n        var: result_wait\r\n```\r\n\r\n\r\n```\r\nbash-4.4# ansible-playbook -i sam_inven test-play.yml\r\n\r\nPLAY [PROXY TEST] **************************************************************************************************************************************************\r\n\r\n\r\nTASK [Wait for system connection via WinRM] ************************************************************************************************************************\r\n\r\nok: [<HOST FQDN>]\r\n\r\nTASK [Show WinRM result] *******************************************************************************************************************************************\r\n\r\nok: [<HOST FQDN>] => {\r\n    \"result_wait\": {\r\n        \"changed\": false,\r\n        \"elapsed\": 1,\r\n        \"failed\": false\r\n    }\r\n}\r\n\r\nPLAY RECAP *********************************************************************************************************************************************************\r\n\r\n<HOST FQDN> : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nbash-4.4#\r\n```\r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nWINRM Kerberos\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/var/lib/awx/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Nov 21 2019, 19:31:34) [GCC 8.3.1 20190507 (Red Hat 8.3.1-4)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\nbash-4.4# ansible-config dump --only-changed\r\nbash-4.4#\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nAnsible running as AWX docker images (official) based on CentOS Linux release 8.1.1911 (Core)\r\nTarget hosts are Windows machines running Windows Server 2016\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nIn AWX inventory host var:\r\n\r\nansible_connection: winrm\r\nansible_winrm_transport: kerberos\r\nansible_winrm_server_cert_validation: ignore \r\nansible_winrm_kerberos_delegation: true\r\nbecome_method: runas\r\nansible_port: 5986\r\n\r\n```yaml\r\n---\r\n- name: TEST\r\n  hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - name: Wait for system connection via WinRM\r\n      wait_for_connection:\r\n        timeout: 60\r\n      register: result_wait\r\n      delegate_to: <host FQDN>\r\n      ignore_errors: yes\r\n    \r\n    - name: Show WinRM result\r\n      debug:\r\n        var: result_wait\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\n```\r\n{\r\n    \"elapsed\": 1,\r\n    \"_ansible_no_log\": false,\r\n    \"changed\": false,\r\n    \"_ansible_delegated_vars\": {\r\n        \"ansible_host\": \"<HOST FQDN>\"\r\n    }\r\n}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n{\r\n    \"msg\": \"timed out waiting for ping module test success: kerberos: authGSSClientInit() failed: (('Unspecified GSS failure.  Minor code may provide more information', 851968), (\\\"Can't find client principal <ACCOUNT NAME>@<DOMAIN NAME> in cache collection\\\", -1765328243))\",\r\n    \"elapsed\": 60,\r\n    \"_ansible_no_log\": false,\r\n    \"changed\": false,\r\n    \"_ansible_delegated_vars\": {\r\n        \"ansible_host\": \"<HOST FQDN>\",\r\n        \"ansible_port\": 5986,\r\n        \"ansible_user\": \"<acount name>@<DOMAIN NAME>\"\r\n    }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71101", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71101/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71101/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71101/events", "html_url": "https://github.com/ansible/ansible/issues/71101", "id": 673141440, "node_id": "MDU6SXNzdWU2NzMxNDE0NDA=", "number": 71101, "title": "Add Template Tags support to ec2_launch_template (only supports Resource Tags)", "user": {"login": "ElijahLynn", "id": 1504756, "node_id": "MDQ6VXNlcjE1MDQ3NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1504756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ElijahLynn", "html_url": "https://github.com/ElijahLynn", "followers_url": "https://api.github.com/users/ElijahLynn/followers", "following_url": "https://api.github.com/users/ElijahLynn/following{/other_user}", "gists_url": "https://api.github.com/users/ElijahLynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/ElijahLynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ElijahLynn/subscriptions", "organizations_url": "https://api.github.com/users/ElijahLynn/orgs", "repos_url": "https://api.github.com/users/ElijahLynn/repos", "events_url": "https://api.github.com/users/ElijahLynn/events{/privacy}", "received_events_url": "https://api.github.com/users/ElijahLynn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 379680333, "node_id": "MDU6TGFiZWwzNzk2ODAzMzM=", "url": "https://api.github.com/repos/ansible/ansible/labels/aws", "name": "aws", "color": "c5def5", "default": false, "description": null}, {"id": 61528803, "node_id": "MDU6TGFiZWw2MTUyODgwMw==", "url": "https://api.github.com/repos/ansible/ansible/labels/cloud", "name": "cloud", "color": "4071a5", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1991468860, "node_id": "MDU6TGFiZWwxOTkxNDY4ODYw", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.aws", "name": "collection:community.aws", "color": "ededed", "default": false, "description": null}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-04T23:16:28Z", "updated_at": "2020-08-06T20:39:31Z", "closed_at": "2020-08-05T04:45:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your feature was not already discussed on GitHub -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Describe the new feature/improvement briefly below -->\r\nThe https://docs.ansible.com/ansible/latest/modules/ec2_launch_template_module.html only supports \"Tags\" which are actually Resource Tags. The module should also support Template Tags. The key name will probably have to change and docs updated. \r\n\r\n##### ISSUE TYPE\r\n- Feature Idea\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nec2_launch_template\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!--- Describe how the feature would be used, why it is needed and what it would solve -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- HINT: You can also paste gist.github.com links for larger files -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71087", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71087/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71087/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71087/events", "html_url": "https://github.com/ansible/ansible/issues/71087", "id": 672786531, "node_id": "MDU6SXNzdWU2NzI3ODY1MzE=", "number": 71087, "title": "Ansible not picking up collections", "user": {"login": "alexgeek", "id": 606552, "node_id": "MDQ6VXNlcjYwNjU1Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/606552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexgeek", "html_url": "https://github.com/alexgeek", "followers_url": "https://api.github.com/users/alexgeek/followers", "following_url": "https://api.github.com/users/alexgeek/following{/other_user}", "gists_url": "https://api.github.com/users/alexgeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexgeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexgeek/subscriptions", "organizations_url": "https://api.github.com/users/alexgeek/orgs", "repos_url": "https://api.github.com/users/alexgeek/repos", "events_url": "https://api.github.com/users/alexgeek/events{/privacy}", "received_events_url": "https://api.github.com/users/alexgeek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-04T13:18:09Z", "updated_at": "2020-08-05T15:13:17Z", "closed_at": "2020-08-04T13:42:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nI'm trying to use the [community.kubernetes](https://github.com/ansible-collections/community.kubernetes) and [community.sops](https://github.com/ansible-collections/community.sops) (add-vars-plugin branch) collections locally (as in I have them in ./collections) but it seems ansible is not finding them.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\ncollections\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/alex/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/alex/gcloud/ansible-test/.venv/lib/python3.6/site-packages/ansible\r\n  executable location = /home/alex/gcloud/ansible-test/.venv/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nCOLLECTIONS_PATHS(/home/alex/gcloud/ansible-test/ansible.cfg) = ['/home/alex/gcloud/ansible-test/collections']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nUbuntu 18.04 on WSL\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\nmkdir ansible-test\r\ncd ansible-test/\r\npython3 -m virtualenv .venv\r\n. .venv/bin/activate\r\npip install ansible openshift\r\necho \"[defaults]\" >> ansible.cfg\r\necho \"collections_paths = ./collections\" >> ansible.cfg\r\nmkdir -p collections/ansible_collections/community\r\ngit clone https://github.com/ansible-collections/community.kubernetes collections/ansible_collections/community/kubernetes\r\ngit clone https://github.com/ansible-collections/community.sops --single-branch --branch add-vars-plugin collections/ansible_collections/community/sops\r\nansible-doc -t lookup sops\r\nansible-doc -t lookup k8s\r\n```\r\n\r\nFor good measure there's a lot of confusion over the collection directory hierarchies so here's a tree command:\r\n\r\n```\r\ntree -L 5\r\n.\r\n\u251c\u2500\u2500 ansible.cfg\r\n\u2514\u2500\u2500 collections\r\n    \u2514\u2500\u2500 ansible_collections\r\n        \u2514\u2500\u2500 community\r\n            \u251c\u2500\u2500 kubernetes\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 CHANGELOG.rst\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 LICENSE\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 README.md\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 changelogs\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 codecov.yml\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 galaxy.yml\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 molecule\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 plugins\r\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 setup.cfg\r\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 tests\r\n            \u2514\u2500\u2500 sops\r\n                \u251c\u2500\u2500 CONTRIBUTING.md\r\n                \u251c\u2500\u2500 COPYING\r\n                \u251c\u2500\u2500 README.md\r\n                \u251c\u2500\u2500 changelogs\r\n                \u251c\u2500\u2500 galaxy.yml\r\n                \u251c\u2500\u2500 plugins\r\n                \u2514\u2500\u2500 tests\r\n```\r\n\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nI expected the ansible-doc command to find the sops lookup plugin and to find the local version of k8s lookup plugin.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nI'm trying to check if the collections are being found. For sops it just straight up doesn't find it:\r\n\r\n```\r\nansible-doc -t lookup sops\r\n[WARNING]: lookup sops not found in: /home/alex/.ansible/plugins/lookup:/usr/share/ansible/plugins/lookup:/home/alex/gcloud/ansible-test/.venv/lib/python3.6/site-packages/ansible/plugins/lookup\r\n```\r\n\r\nFor k8s it seems to just pick it up from site-packages instead:\r\n\r\n```\r\nansible-doc -t lookup k8s\r\n> K8S    (/home/alex/gcloud/ansible-test/.venv/lib/python3.6/site-packages/ansible/plugins/lookup/k8s.py)\r\n...\r\n```\r\n\r\nI don't know if that is the best method to check collections are being loaded but I haven't found another way to do it.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71085", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71085/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71085/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71085/events", "html_url": "https://github.com/ansible/ansible/issues/71085", "id": 672771042, "node_id": "MDU6SXNzdWU2NzI3NzEwNDI=", "number": 71085, "title": "Can't slice list produced by regex_findall", "user": {"login": "AquaL1te", "id": 6113099, "node_id": "MDQ6VXNlcjYxMTMwOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/6113099?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AquaL1te", "html_url": "https://github.com/AquaL1te", "followers_url": "https://api.github.com/users/AquaL1te/followers", "following_url": "https://api.github.com/users/AquaL1te/following{/other_user}", "gists_url": "https://api.github.com/users/AquaL1te/gists{/gist_id}", "starred_url": "https://api.github.com/users/AquaL1te/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AquaL1te/subscriptions", "organizations_url": "https://api.github.com/users/AquaL1te/orgs", "repos_url": "https://api.github.com/users/AquaL1te/repos", "events_url": "https://api.github.com/users/AquaL1te/events{/privacy}", "received_events_url": "https://api.github.com/users/AquaL1te/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-04T12:55:23Z", "updated_at": "2020-08-04T15:08:30Z", "closed_at": "2020-08-04T14:25:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nWhen I run the following, `debug -a \"msg={{ '172.10.1.1' | regex_findall('(\\d+)(?:\\.?)') }}\"`, I get a list returned. However, there seems no way to slice this list as in [1] or [:2]. The goal is to split up the IP address and then slice out certain elements. This is needed for instance when [templating reverse DNS paths](https://www.digitalocean.com/community/tutorials/how-to-use-nsd-an-authoritative-only-dns-server-on-ubuntu-14-04#configure-the-secondary-nsd-server). There is a [revdns](https://docs.ansible.com/ansible/latest/user_guide/playbooks_filters_ipaddr.html#ip-address-conversion) filter, but does not allow slicing the output.\r\n\r\nSlicing it like `debug -a \"msg={{ '172.10.1.1' | regex_findall('(\\d+)(?:\\.?)')[2] }}\"` returns an error \"template error while templating string: expected token 'end of print statement', got '['\". Is there a way to do slicing with the `regex_findall` filter?\r\n\r\nPossible solutions:\r\n* Allow slicing somehow with `regex_findall`\r\n* Add an option to slice IPs natively with the `ipaddr(revdns)` filter\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nregex_findall\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.10\r\n  config file = /home/user/git/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.5 (default, Jul 20 2020, 00:00:00) [GCC 10.1.1 20200507 (Red Hat 10.1.1-1)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nANSIBLE_PIPELINING(/home/user/git/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/user/git/ansible/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=60s -o PreferredAuthentications=publickey\r\nDEFAULT_BECOME(/home/user/git/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_ASK_PASS(/home/user/git/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_METHOD(/home/user/git/ansible/ansible.cfg) = sudo\r\nDEFAULT_BECOME_USER(/home/user/git/ansible/ansible.cfg) = root\r\nDEFAULT_CALLBACK_WHITELIST(/home/user/git/ansible/ansible.cfg) = ['profile_roles']\r\nDEFAULT_FORKS(/home/user/git/ansible/ansible.cfg) = 16\r\nDEFAULT_HOST_LIST(/home/user/git/ansible/ansible.cfg) = ['/home/user/git/ansible/hosts.cfg']\r\nDEFAULT_JINJA2_EXTENSIONS(/home/user/git/ansible/ansible.cfg) = jinja2.ext.loopcontrols\r\nDEFAULT_MANAGED_STR(/home/user/git/ansible/ansible.cfg) = Ansible managed: {file} modified on %Y-%m-%d %H:%M:%S %z by {uid} on {host}\r\nDEFAULT_REMOTE_PORT(/home/user/git/ansible/ansible.cfg) = 900\r\nDEFAULT_VAULT_PASSWORD_FILE(/home/user/git/ansible/ansible.cfg) = /home/user/git/ansible/vault-pass\r\nDIFF_ALWAYS(/home/user/git/ansible/ansible.cfg) = True\r\nDIFF_CONTEXT(/home/user/git/ansible/ansible.cfg) = 3\r\nRETRY_FILES_ENABLED(/home/user/git/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nFedora 32, using ansible-2.9.10-1.fc32.noarch\r\n\r\n##### STEPS TO REPRODUCE\r\nDescribed in the summary \r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nDescribed in the summary \r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nDescribed in the summary \r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71066", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71066/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71066/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71066/events", "html_url": "https://github.com/ansible/ansible/issues/71066", "id": 672160219, "node_id": "MDU6SXNzdWU2NzIxNjAyMTk=", "number": 71066, "title": "syslog_facility parameter does not respond on RHEL system", "user": {"login": "Tclemento", "id": 34621233, "node_id": "MDQ6VXNlcjM0NjIxMjMz", "avatar_url": "https://avatars2.githubusercontent.com/u/34621233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tclemento", "html_url": "https://github.com/Tclemento", "followers_url": "https://api.github.com/users/Tclemento/followers", "following_url": "https://api.github.com/users/Tclemento/following{/other_user}", "gists_url": "https://api.github.com/users/Tclemento/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tclemento/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tclemento/subscriptions", "organizations_url": "https://api.github.com/users/Tclemento/orgs", "repos_url": "https://api.github.com/users/Tclemento/repos", "events_url": "https://api.github.com/users/Tclemento/events{/privacy}", "received_events_url": "https://api.github.com/users/Tclemento/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-03T15:31:32Z", "updated_at": "2020-08-04T15:54:32Z", "closed_at": "2020-08-04T15:54:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n`syslog_facility` does not effect on target host. Logs are always redirected to `/var/log/messages`\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n- ansible.cfg\r\n- ansible/module_utils/basic.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.6\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nDEFAULT_SYSLOG_FACILITY(/********/ansible.cfg) = LOG_AUTHPRIV\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n\r\nRed Hat Enterprise Linux Server release 7.4\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n```yaml\r\nansible -vvv -i inventory/dev.yml all -m ping\r\n```\r\n\r\nLog containing `Invoked with data=pong`   is in /var/log/messages and not in secure.\r\n\r\n##### EXPECTED RESULTS\r\nLogs must be sent to /var/log/secure according to value of parameter (LOG_AUTHPRIV)\r\n\r\n\r\n##### ACTUAL RESULTS\r\nEach time I launch playbook or ad-hoc, logs are always redirected to /var/log/messages on RHEL systems.\r\n\r\nBut it works when I run on Debian systems\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71062", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71062/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71062/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71062/events", "html_url": "https://github.com/ansible/ansible/issues/71062", "id": 672102726, "node_id": "MDU6SXNzdWU2NzIxMDI3MjY=", "number": 71062, "title": "Cannot display output to screen console ", "user": {"login": "gefela", "id": 30554569, "node_id": "MDQ6VXNlcjMwNTU0NTY5", "avatar_url": "https://avatars2.githubusercontent.com/u/30554569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gefela", "html_url": "https://github.com/gefela", "followers_url": "https://api.github.com/users/gefela/followers", "following_url": "https://api.github.com/users/gefela/following{/other_user}", "gists_url": "https://api.github.com/users/gefela/gists{/gist_id}", "starred_url": "https://api.github.com/users/gefela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gefela/subscriptions", "organizations_url": "https://api.github.com/users/gefela/orgs", "repos_url": "https://api.github.com/users/gefela/repos", "events_url": "https://api.github.com/users/gefela/events{/privacy}", "received_events_url": "https://api.github.com/users/gefela/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 1255973036, "node_id": "MDU6TGFiZWwxMjU1OTczMDM2", "url": "https://api.github.com/repos/ansible/ansible/labels/commands", "name": "commands", "color": "4071a5", "default": false, "description": "Commands category"}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-03T14:07:53Z", "updated_at": "2020-08-04T15:08:29Z", "closed_at": "2020-08-03T15:02:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\nPlaybook not displaying to screen correctly .. \r\n\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nshell\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.9.11\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/lib/python3.6/site-packages/ansible\r\nexecutable location = /usr/bin/ansible\r\npython version = 3.6.8 (default, Dec 5 2019, 15:45:45) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\n```\r\n##### CONFIGURATION\r\n```\r\n[root@localhost ~]# ansible-config dump --only-changed\r\nDEFAULT_STDOUT_CALLBACK(/etc/ansible/ansible.cfg) = yaml\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\n[root@localhost ~]# ansible-config dump\r\nACTION_WARNINGS(default) = True\r\nAGNOSTIC_BECOME_PROMPT(default) = True\r\nALLOW_WORLD_READABLE_TMPFILES(default) = False\r\nANSIBLE_CONNECTION_PATH(default) = None\r\nANSIBLE_COW_PATH(default) = None\r\nANSIBLE_COW_SELECTION(default) = default\r\nANSIBLE_COW_WHITELIST(default) = ['bud-frogs', 'bunny', 'cheese', 'daemon', 'de>\r\nANSIBLE_FORCE_COLOR(default) = False\r\nANSIBLE_NOCOLOR(default) = False\r\nANSIBLE_NOCOWS(default) = False\r\nANSIBLE_PIPELINING(default) = False\r\nANSIBLE_SSH_ARGS(default) = -C -o ControlMaster=auto -o ControlPersist=60s\r\nANSIBLE_SSH_CONTROL_PATH(default) = None\r\nANSIBLE_SSH_CONTROL_PATH_DIR(default) = ~/.ansible/cp\r\nANSIBLE_SSH_EXECUTABLE(default) = ssh\r\nANSIBLE_SSH_RETRIES(default) = 0\r\nANY_ERRORS_FATAL(default) = False\r\nBECOME_ALLOW_SAME_USER(default) = False\r\nBECOME_PLUGIN_PATH(default) = ['/root/.ansible/plugins/become', '/usr/share/ans>\r\nCACHE_PLUGIN(default) = memory\r\nCACHE_PLUGIN_CONNECTION(default) = None\r\nCACHE_PLUGIN_PREFIX(default) = ansible_facts\r\nCACHE_PLUGIN_TIMEOUT(default) = 86400\r\nCOLLECTIONS_PATHS(default) = ['/root/.ansible/collections', '/usr/share/ansible>\r\nCOLOR_CHANGED(default) = yellow\r\nCOLOR_CONSOLE_PROMPT(default) = white\r\nCOLOR_DEBUG(default) = dark gray\r\nCOLOR_DEPRECATE(default) = purple\r\nCOLOR_DIFF_ADD(default) = green\r\nCOLOR_DIFF_LINES(default) = cyan\r\nCOLOR_DIFF_REMOVE(default) = red\r\nCOLOR_ERROR(default) = red\r\nCOLOR_HIGHLIGHT(default) = white\r\nCOLOR_OK(default) = green\r\nCOLOR_SKIP(default) = cyan\r\nCOLOR_UNREACHABLE(default) = bright red\r\nCOLOR_VERBOSE(default) = blue\r\nCOLOR_WARN(default) = bright purple\r\nCOMMAND_WARNINGS(default) = True\r\nCONDITIONAL_BARE_VARS(default) = True\r\nCONNECTION_FACTS_MODULES(default) = {'asa': 'asa_facts', 'cisco.asa.asa': 'cisc>\r\nCOVERAGE_REMOTE_OUTPUT(default) = None\r\nCOVERAGE_REMOTE_WHITELIST(default) = *\r\nDEFAULT_ACTION_PLUGIN_PATH(default) = ['/root/.ansible/plugins/action', '/usr/s>\r\nDEFAULT_ALLOW_UNSAFE_LOOKUPS(default) = False\r\nDEFAULT_ASK_PASS(default) = False\r\nDEFAULT_ASK_VAULT_PASS(default) = False\r\nDEFAULT_BECOME(default) = False\r\nDEFAULT_BECOME_ASK_PASS(default) = False\r\nDEFAULT_BECOME_EXE(default) = None\r\nDEFAULT_BECOME_FLAGS(default) =\r\nDEFAULT_BECOME_METHOD(default) = sudo\r\nDEFAULT_BECOME_USER(default) = root\r\nDEFAULT_CACHE_PLUGIN_PATH(default) = ['/root/.ansible/plugins/cache', '/usr/sha>\r\nDEFAULT_CALLABLE_WHITELIST(default) = []\r\nDEFAULT_CALLBACK_PLUGIN_PATH(default) = ['/root/.ansible/plugins/callback', '/u>\r\nDEFAULT_CALLBACK_WHITELIST(default) = []\r\nDEFAULT_CLICONF_PLUGIN_PATH(default) = ['/root/.ansible/plugins/cliconf', '/usr>\r\nDEFAULT_CONNECTION_PLUGIN_PATH(default) = ['/root/.ansible/plugins/connection',>\r\nDEFAULT_DEBUG(default) = False\r\nDEFAULT_EXECUTABLE(default) = /bin/sh\r\nDEFAULT_FACT_PATH(default) = None\r\nDEFAULT_FILTER_PLUGIN_PATH(default) = ['/root/.ansible/plugins/filter', '/usr/s>\r\nDEFAULT_FORCE_HANDLERS(default) = False\r\nDEFAULT_FORKS(default) = 5\r\nDEFAULT_GATHERING(default) = implicit\r\nDEFAULT_GATHER_SUBSET(default) = ['all']\r\nDEFAULT_GATHER_TIMEOUT(default) = 10\r\nDEFAULT_HANDLER_INCLUDES_STATIC(default) = False\r\nDEFAULT_HASH_BEHAVIOUR(default) = replace\r\nDEFAULT_HOST_LIST(default) = ['/etc/ansible/hosts']\r\nDEFAULT_HTTPAPI_PLUGIN_PATH(default) = ['/root/.ansible/plugins/httpapi', '/usr>\r\nDEFAULT_INTERNAL_POLL_INTERVAL(default) = 0.001\r\nDEFAULT_INVENTORY_PLUGIN_PATH(default) = ['/root/.ansible/plugins/inventory', '>\r\nDEFAULT_JINJA2_EXTENSIONS(default) = []\r\nDEFAULT_JINJA2_NATIVE(default) = False\r\nDEFAULT_KEEP_REMOTE_FILES(default) = False\r\nDEFAULT_LIBVIRT_LXC_NOSECLABEL(default) = False\r\nDEFAULT_LOAD_CALLBACK_PLUGINS(default) = False\r\nDEFAULT_LOCAL_TMP(default) = /root/.ansible/tmp/ansible-local-386927yy8k8f9\r\nDEFAULT_LOG_FILTER(default) = []\r\nDEFAULT_LOG_PATH(default) = None\r\nDEFAULT_LOOKUP_PLUGIN_PATH(default) = ['/root/.ansible/plugins/lookup', '/usr/s>\r\nDEFAULT_MANAGED_STR(default) = Ansible managed\r\nDEFAULT_MODULE_ARGS(default) =\r\nDEFAULT_MODULE_COMPRESSION(default) = ZIP_DEFLATED\r\nDEFAULT_MODULE_NAME(default) = command\r\nDEFAULT_MODULE_PATH(default) = ['/root/.ansible/plugins/modules', '/usr/share/a>\r\nDEFAULT_MODULE_UTILS_PATH(default) = ['/root/.ansible/plugins/module_utils', '/>\r\nDEFAULT_NETCONF_PLUGIN_PATH(default) = ['/root/.ansible/plugins/netconf', '/usr>\r\nDEFAULT_NO_LOG(default) = False\r\nDEFAULT_NO_TARGET_SYSLOG(default) = False\r\nDEFAULT_NULL_REPRESENTATION(default) = None\r\nDEFAULT_POLL_INTERVAL(default) = 15\r\nDEFAULT_PRIVATE_KEY_FILE(default) = None\r\nDEFAULT_PRIVATE_ROLE_VARS(default) = False\r\nDEFAULT_REMOTE_PORT(default) = None\r\nDEFAULT_REMOTE_USER(default) = None\r\nDEFAULT_ROLES_PATH(default) = ['/root/.ansible/roles', '/usr/share/ansible/role>\r\nDEFAULT_SCP_IF_SSH(default) = smart\r\nDEFAULT_SELINUX_SPECIAL_FS(default) = ['fuse', 'nfs', 'vboxsf', 'ramfs', '9p', >\r\nDEFAULT_SFTP_BATCH_MODE(default) = True\r\nDEFAULT_SQUASH_ACTIONS(default) = ['apk', 'apt', 'dnf', 'homebrew', 'openbsd_pk>\r\nDEFAULT_SSH_TRANSFER_METHOD(default) = None\r\nDEFAULT_STDOUT_CALLBACK(/etc/ansible/ansible.cfg) = yaml\r\nDEFAULT_STRATEGY(default) = linear\r\nDEFAULT_STRATEGY_PLUGIN_PATH(default) = ['/root/.ansible/plugins/strategy', '/u>\r\nDEFAULT_SU(default) = False\r\nDEFAULT_SYSLOG_FACILITY(default) = LOG_USER\r\nDEFAULT_TASK_INCLUDES_STATIC(default) = False\r\nDEFAULT_TERMINAL_PLUGIN_PATH(default) = ['/root/.ansible/plugins/terminal', '/u>\r\nDEFAULT_TEST_PLUGIN_PATH(default) = ['/root/.ansible/plugins/test', '/usr/share>\r\nDEFAULT_TIMEOUT(default) = 10\r\nDEFAULT_TRANSPORT(default) = smart\r\nDEFAULT_UNDEFINED_VAR_BEHAVIOR(default) = True\r\nDEFAULT_VARS_PLUGIN_PATH(default) = ['/root/.ansible/plugins/vars', '/usr/share>\r\nDEFAULT_VAULT_ENCRYPT_IDENTITY(default) = None\r\nDEFAULT_VAULT_IDENTITY(default) = default\r\nDEFAULT_VAULT_IDENTITY_LIST(default) = []\r\nDEFAULT_VAULT_ID_MATCH(default) = False\r\nDEFAULT_VAULT_PASSWORD_FILE(default) = None\r\nDEFAULT_VERBOSITY(default) = 0\r\nDEPRECATION_WARNINGS(default) = True\r\nDIFF_ALWAYS(default) = False\r\nDIFF_CONTEXT(default) = 3\r\nDISPLAY_ARGS_TO_STDOUT(default) = False\r\nDISPLAY_SKIPPED_HOSTS(default) = True\r\nDOCSITE_ROOT_URL(default) = https://docs.ansible.com/ansible/\r\nDOC_FRAGMENT_PLUGIN_PATH(default) = ['/root/.ansible/plugins/doc_fragments', '/>\r\nDUPLICATE_YAML_DICT_KEY(default) = warn\r\nENABLE_TASK_DEBUGGER(default) = False\r\nERROR_ON_MISSING_HANDLER(default) = True\r\nFACTS_MODULES(default) = ['smart']\r\nGALAXY_IGNORE_CERTS(default) = False\r\nGALAXY_ROLE_SKELETON(default) = None\r\nGALAXY_ROLE_SKELETON_IGNORE(default) = ['^.git$', '^.*/.git_keep$']\r\nGALAXY_SERVER(default) = https://galaxy.ansible.com\r\nGALAXY_SERVER_LIST(default) = None\r\nGALAXY_TOKEN(default) = None\r\nGALAXY_TOKEN_PATH(default) = /root/.ansible/galaxy_token\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\nHOST_PATTERN_MISMATCH(default) = warning\r\nINJECT_FACTS_AS_VARS(default) = True\r\nINTERPRETER_PYTHON(default) = auto_legacy\r\nINTERPRETER_PYTHON_DISTRO_MAP(default) = {'centos': {'6': '/usr/bin/python', '8>\r\nINTERPRETER_PYTHON_FALLBACK(default) = ['/usr/bin/python', 'python3.7', 'python>\r\nINVALID_TASK_ATTRIBUTE_FAILED(default) = True\r\nINVENTORY_ANY_UNPARSED_IS_FAILED(default) = False\r\nINVENTORY_CACHE_ENABLED(default) = False\r\nINVENTORY_CACHE_PLUGIN(default) = None\r\nINVENTORY_CACHE_PLUGIN_CONNECTION(default) = None\r\nINVENTORY_CACHE_PLUGIN_PREFIX(default) = ansible_facts\r\nINVENTORY_CACHE_TIMEOUT(default) = 3600\r\nINVENTORY_ENABLED(default) = ['host_list', 'script', 'auto', 'yaml', 'ini', 'to>\r\nINVENTORY_EXPORT(default) = False\r\nINVENTORY_IGNORE_EXTS(default) = {{(BLACKLIST_EXTS + ( '.orig', '.ini', '.cfg',>\r\nINVENTORY_IGNORE_PATTERNS(default) = []\r\nINVENTORY_UNPARSED_IS_FAILED(default) = False\r\nLOCALHOST_WARNING(default) = True\r\nMAX_FILE_SIZE_FOR_DIFF(default) = 104448\r\nNETCONF_SSH_CONFIG(default) = None\r\nNETWORK_GROUP_MODULES(default) = ['eos', 'nxos', 'ios', 'iosxr', 'junos', 'enos>\r\nOLD_PLUGIN_CACHE_CLEARING(default) = False\r\nPARAMIKO_HOST_KEY_AUTO_ADD(default) = False\r\nPARAMIKO_LOOK_FOR_KEYS(default) = True\r\nPERSISTENT_COMMAND_TIMEOUT(default) = 30\r\nPERSISTENT_CONNECT_RETRY_TIMEOUT(default) = 15\r\nPERSISTENT_CONNECT_TIMEOUT(default) = 30\r\nPERSISTENT_CONTROL_PATH_DIR(default) = /root/.ansible/pc\r\nPLAYBOOK_DIR(default) = None\r\nPLAYBOOK_VARS_ROOT(default) = top\r\nPLUGIN_FILTERS_CFG(default) = None\r\nPYTHON_MODULE_RLIMIT_NOFILE(default) = 0\r\nRETRY_FILES_ENABLED(default) = False\r\nRETRY_FILES_SAVE_PATH(default) = None\r\nSHOW_CUSTOM_STATS(default) = False\r\nSTRING_CONVERSION_ACTION(default) = warn\r\nSTRING_TYPE_FILTERS(default) = ['string', 'to_json', 'to_nice_json', 'to_yaml',>\r\nSYSTEM_WARNINGS(default) = True\r\nTAGS_RUN(default) = []\r\nTAGS_SKIP(default) = []\r\nTASK_DEBUGGER_IGNORE_ERRORS(default) = True\r\nTRANSFORM_INVALID_GROUP_CHARS(default) = never\r\nUSE_PERSISTENT_CONNECTIONS(default) = False\r\nVARIABLE_PRECEDENCE(default) = ['all_inventory', 'groups_inventory', 'all_plugi>\r\nVERBOSE_TO_STDERR(default) = False\r\nYAML_FILENAME_EXTENSIONS(default) = ['.yml', '.yaml', '.json']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nOS = Redhat v 8.1\r\n\r\nTarget OS =\r\n```\r\nHostname: dmz-firewall\r\nModel: vSRX\r\nJunos: 19.2R1-S2.2\r\nJUNOS OS Kernel 64-bit XEN [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS libs [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS runtime [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS time zone information [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS libs compat32 [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS 32-bit compatibility [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS py extensions [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS py base [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS OS vmguest [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS support utilities [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS OS crypto [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS network stack and utilities [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS libs [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS libs compat32 [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS runtime [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS na telemetry [19.2R1-S2.2]\r\nJUNOS Web Management Platform Package [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS vsrx modules [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS srx libs compat32 [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS srx runtime [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS srx platform support [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS common platform support [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS vsrx runtime [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS pppoe [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS Openconfig [19.2R1-S2.2]\r\nJUNOS mtx network modules [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS modules [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS srx libs [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS srx Data Plane Crypto Support [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS daemons [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS srx daemons [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS SRX TVP AppQos Daemon [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS Extension Toolkit [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS Juniper Malware Removal Tool (JMRT) [1.0.0+20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS J-Insight [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS Online Documentation [20191121.175308_builder_junos_192_r1_s2]\r\nJUNOS jail runtime [20191120.0ebd4bf_builder_stable_11]\r\nJUNOS FIPS mode utilities [20191121.175308_builder_junos_192_r1_s2]\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n```\r\n[juniper]\r\n172.16.203.121\r\n\r\n[juniper:vars]\r\nansible_user=****************\r\nansible_network_os=junipernetworks.junos.junos\r\nansible_connection=local\r\nansible_password=*************\r\n```\r\n```\r\n---\r\n- name: Juniper SRX Compliance checks\r\n  hosts: juniper\r\n  gather_facts: false\r\n  tasks:\r\n  - name: Syslog server check\r\n    junos_config:\r\n       src: /home/gefelas/ansible_junos/files/syslog_config.txt\r\n    register: junos_output\r\n    diff: true\r\n    vars:\r\n      cr: '{{ \"\\n\" }}'\r\n  - debug:\r\n      msg: Syslog server check - This check has failed with the following output({{ junos_output.diff.prepared }})\r\n  - shell: echo ' {{ junos_output.diff.prepared | join(cr) }} ' > /dev/tty\r\n    when: junos_output.changed and ansible_verbosity > 0 \r\n  - debug:\r\n      msg: Syslog server check - This check has passed with the following output({{ junos_output.diff.prepared }})\r\n  - shell: \"echo  { junos_output.diff.prepared | join(cr) }}  > /dev/tty\"\r\n    when: not junos_output.changed and ansible_verbosity > 0\r\n```\r\n##### EXPECTED RESULTS\r\nThe results should be as a result of comparing the src directory against the configuration of juniper vsrx ... The src files are similar to these\r\nhttps://github.com/gefela/ansible_junos/tree/master/files\r\n\r\n\r\n##### ACTUAL RESULTS\r\nWhen I run this command .\r\n```\r\nansible-playbook -i inventory syslog_v2.yml --check -vvv\r\n```\r\nI get the following error message .\r\n```\r\nroot@localhost ansible_junos]# ansible-playbook -i inventory syslog_v2.yml -vv --check\r\nansible-playbook 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 3.6.8 (default, Dec  5 2019, 15:45:45) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\nUsing /etc/ansible/ansible.cfg as config file\r\n\r\nPLAYBOOK: syslog_v2.yml ************************************************************************************************************************************\r\n1 plays in syslog_v2.yml\r\n\r\nPLAY [Juniper SRX Compliance checks] ***********************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [Syslog server check] *********************************************************************************************************************************\r\ntask path: /home/gefelas/ansible_junos/syslog_v2.yml:6\r\n[edit system syslog host 192.168.100.70]\r\n+     interactive-commands any;\r\n[edit system syslog host 192.168.100.70]\r\n+    facility-override local1;\r\n+    log-prefix firewall;\r\n+    source-address 172.16.203.121;\r\n+    explicit-priority;\r\n[edit system syslog]\r\n+    file messages {\r\n+        any critical;\r\n+        authorization info;\r\n+    }\r\n+    file default-log-messages {\r\n+        structured-data;\r\n+    }\r\n+    file sessions {\r\n+        user info;\r\n+    }\r\n+    file interactive-commands {\r\n+        interactive-commands error;\r\n+    }\r\nchanged: [172.16.203.121] => changed=true \r\n  ansible_facts:\r\n    discovered_interpreter_python: /usr/libexec/platform-python\r\n\r\nTASK [debug] ***********************************************************************************************************************************************\r\ntask path: /home/gefelas/ansible_junos/syslog_v2.yml:13\r\nok: [172.16.203.121] => \r\n  msg: |-\r\n    Syslog server check - This check has failed with the following output([edit system syslog host 192.168.100.70]\r\n    +     interactive-commands any;\r\n    [edit system syslog host 192.168.100.70]\r\n    +    facility-override local1;\r\n    +    log-prefix firewall;\r\n    +    source-address 172.16.203.121;\r\n    +    explicit-priority;\r\n    [edit system syslog]\r\n    +    file messages {\r\n    +        any critical;\r\n    +        authorization info;\r\n    +    }\r\n    +    file default-log-messages {\r\n    +        structured-data;\r\n    +    }\r\n    +    file sessions {\r\n    +        user info;\r\n    +    }\r\n    +    file interactive-commands {\r\n    +        interactive-commands error;\r\n    +    })\r\n\r\nTASK [shell] ***********************************************************************************************************************************************\r\ntask path: /home/gefelas/ansible_junos/syslog_v2.yml:15\r\nfatal: [172.16.203.121]: FAILED! => \r\n  msg: |-\r\n    The task includes an option with an undefined variable. The error was: 'cr' is undefined\r\n  \r\n    The error appears to be in '/home/gefelas/ansible_junos/syslog_v2.yml': line 15, column 5, but may\r\n    be elsewhere in the file depending on the exact syntax problem.\r\n  \r\n    The offending line appears to be:\r\n  \r\n          msg: Syslog server check - This check has failed with the following output({{ junos_output.diff.prepared }})\r\n      - shell: echo ' {{ junos_output.diff.prepared | join(cr) }} ' > /dev/tty\r\n        ^ here\r\n    We could be wrong, but this one looks like it might be an issue with\r\n    missing quotes. Always quote template expression brackets when they\r\n    start a value. For instance:\r\n  \r\n        with_items:\r\n          - {{ foo }}\r\n  \r\n    Should be written as:\r\n  \r\n        with_items:\r\n          - \"{{ foo }}\"\r\n\r\nPLAY RECAP *************************************************************************************************************************************************\r\n172.16.203.121             : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71061", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71061/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71061/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71061/events", "html_url": "https://github.com/ansible/ansible/issues/71061", "id": 672100292, "node_id": "MDU6SXNzdWU2NzIxMDAyOTI=", "number": 71061, "title": "Yum list crashes if repoquery prints errors in stdout", "user": {"login": "sklirg", "id": 5422571, "node_id": "MDQ6VXNlcjU0MjI1NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5422571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sklirg", "html_url": "https://github.com/sklirg", "followers_url": "https://api.github.com/users/sklirg/followers", "following_url": "https://api.github.com/users/sklirg/following{/other_user}", "gists_url": "https://api.github.com/users/sklirg/gists{/gist_id}", "starred_url": "https://api.github.com/users/sklirg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sklirg/subscriptions", "organizations_url": "https://api.github.com/users/sklirg/orgs", "repos_url": "https://api.github.com/users/sklirg/repos", "events_url": "https://api.github.com/users/sklirg/events{/privacy}", "received_events_url": "https://api.github.com/users/sklirg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1126594180, "node_id": "MDU6TGFiZWwxMTI2NTk0MTgw", "url": "https://api.github.com/repos/ansible/ansible/labels/P3", "name": "P3", "color": "e3ed5e", "default": false, "description": "Priority 3 - Approved, No Time Limitation"}, {"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1130170305, "node_id": "MDU6TGFiZWwxMTMwMTcwMzA1", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_verified", "name": "needs_verified", "color": "d93f0b", "default": false, "description": "This issue needs to be verified/reproduced by maintainer"}, {"id": 1231572400, "node_id": "MDU6TGFiZWwxMjMxNTcyNDAw", "url": "https://api.github.com/repos/ansible/ansible/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "Packaging category"}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 942378949, "node_id": "MDU6TGFiZWw5NDIzNzg5NDk=", "url": "https://api.github.com/repos/ansible/ansible/labels/traceback", "name": "traceback", "color": "ededed", "default": false, "description": "This issue/PR includes a traceback."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-03T14:04:09Z", "updated_at": "2020-08-05T08:11:11Z", "closed_at": "2020-08-05T08:11:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\n\r\nA task such as the following\r\n```yaml\r\n- name: Find python package in Yum\r\n  yum:\r\n    list: \"python\"\r\n```\r\n\r\nmight crash with `ValueError: need more than 1 value to unpack` if there is other text than package info in the output.\r\n\r\nThe above task executes the following command during the `is_available` step of YumModule:\r\n\r\n`['/usr/bin/repoquery', '--show-duplicates', '--plugins', '--quiet', '--disablerepo', '', '--enablerepo', '', '--qf', '%{name}|%{epoch}|%{version}|%{release}|%{arch}|%{repoid}', 'telegraf']`\r\n\r\nRunning this on a server I get this output\r\n\r\n```\r\n$ /usr/bin/repoquery --show-duplicates --plugins --quiet --disablerepo=''  --enablerepo=''  --qf '%{name}|%{epoch}|%{version}|%{release}|%{arch}|%{repoid}' python\r\nCould not get metalink https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=x86_64 error was\r\n14: problem making ssl connection\r\npython|0|2.6.6|66.el6_8|x86_64|base\r\npython|0|2.6.6|68.el6_10|x86_64|updates\r\n$ echo $?\r\n0\r\n```\r\n\r\nWhich crashes with the aforementioned error.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\nYum\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.11\r\n  config file = /Users/sklirg/Documents/git/project/ansible.cfg\r\n  configured module search path = ['/Users/sklirg/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.9.11/libexec/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Jul 21 2020, 10:48:26) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nDEFAULT_GATHERING(/Users/sklirg/Documents/git/project/ansible.cfg) = smart\r\nDEFAULT_MANAGED_STR(/Users/sklirg/Documents/git/project/ansible.cfg) = Managed by Ansible and Company <system@example.org> - Do not modify manually.\r\nDEFAULT_SCP_IF_SSH(/Users/sklirg/Documents/git/project/ansible.cfg) = True\r\nDEFAULT_TRANSPORT(/Users/sklirg/Documents/git/project/ansible.cfg) = ssh\r\nDEFAULT_VAULT_PASSWORD_FILE(/Users/sklirg/Documents/git/project/ansible.cfg) = /Users/sklirg/Documents/git/project/ansible.cfg/.vault-pass.txt\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\nTarget host runs CentOS 6.7. Verified on other CentOS 6.7 hosts too, as well as a CentOS 6.6 host. I haven't seen this  problem on our CentOS 7.x hosts.\r\n\r\nThe repoquery version on the 6.6 host is\r\n```\r\n$ yum list yum-utils\r\n1.1.30-30.el6\r\n```\r\n6.7\r\n```\r\n$ yum list yum-utils\r\n1.1.30-30.el6\r\n```\r\n\r\n7.7\r\n```\r\n$ yum list yum-utils\r\n1.1.31-52.el7\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Find python package in Yum\r\n  yum:\r\n    list: \"python\"\r\n```\r\n\r\nThe problem might disappear if the `repoquery` command is run manually on the host in question as seen here:\r\n\r\n```\r\n$ repoquery python\r\nCould not get metalink https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=x86_64 error was\r\n14: problem making ssl connection\r\npython-0:2.6.6-68.el6_10.x86_64\r\n\r\n$ repoquery python\r\npython-0:2.6.6-68.el6_10.x86_64\r\n\r\n$ /usr/bin/repoquery --show-duplicates --plugins --quiet --disablerepo=''  --enablerepo=''  --qf '%{name}|%{epoch}|%{version}|%{release}|%{arch}|%{repoid}' python\r\npython|0|2.6.6|66.el6_8|x86_64|base\r\npython|0|2.6.6|68.el6_10|x86_64|updates\r\n```\r\n\r\nI'm not sure exactly what _triggers_ the problem, and as such I cannot reliably reproduce it on a new host, but if the `repoquery` command has not been run \"manually\" as in the case in the above codeblock, it'll continue posting the error message in stdout.\r\n\r\nThe original command will _always_ contain the error message in stdout as long as the repoquery command is not run \"manually\". \r\n\r\nNote: As suggested in [this forum post](https://forums.centos.org/viewtopic.php?t=70527) the root problem might be that the system is out of date. While that migth be the case, I think ansible should keep working to the best of its capability even though \"best practice ops\" is not practiced.\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nI'd expect the module to find the requested package and not crash.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible-tmp-1596449383.593808-36376-49909252057716/AnsiballZ_yum.py\", line 102, in <module>\r\n    _ansiballz_main()\r\n  File \"/tmp/ansible-tmp-1596449383.593808-36376-49909252057716/AnsiballZ_yum.py\", line 94, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/tmp/ansible-tmp-1596449383.593808-36376-49909252057716/AnsiballZ_yum.py\", line 40, in invoke_module\r\n    runpy.run_module(mod_name='ansible.modules.packaging.os.yum', init_globals=None, run_name='__main__', alter_sys=True)\r\n  File \"/usr/lib64/python2.6/runpy.py\", line 136, in run_module\r\n    fname, loader, pkg_name)\r\n  File \"/usr/lib64/python2.6/runpy.py\", line 54, in _run_module_code\r\n    mod_loader, pkg_name)\r\n  File \"/usr/lib64/python2.6/runpy.py\", line 34, in _run_code\r\n    exec code in run_globals\r\n  File \"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\", line 1661, in <module>\r\n  File \"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\", line 1657, in main\r\n  File \"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\", line 1593, in run\r\n  File \"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\", line 872, in list_stuff\r\n  File \"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\", line 813, in pkg_to_dict\r\nValueError: need more than 1 value to unpack\r\nfatal: [host]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Shared connection to host closed.\\r\\n\",\r\n    \"module_stdout\": \"Traceback (most recent call last):\\r\\n  File \\\"/tmp/ansible-tmp-1596449383.593808-36376-49909252057716/AnsiballZ_yum.py\\\", line 102, in <module>\\r\\n    _ansiballz_main()\\r\\n  File \\\"/tmp/ansible-tmp-1596449383.593808-36376-49909252057716/AnsiballZ_yum.py\\\", line 94, in _ansiballz_main\\r\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\r\\n  File \\\"/tmp/ansible-tmp-1596449383.593808-36376-49909252057716/AnsiballZ_yum.py\\\", line 40, in invoke_module\\r\\n    runpy.run_module(mod_name='ansible.modules.packaging.os.yum', init_globals=None, run_name='__main__', alter_sys=True)\\r\\n  File \\\"/usr/lib64/python2.6/runpy.py\\\", line 136, in run_module\\r\\n    fname, loader, pkg_name)\\r\\n  File \\\"/usr/lib64/python2.6/runpy.py\\\", line 54, in _run_module_code\\r\\n    mod_loader, pkg_name)\\r\\n  File \\\"/usr/lib64/python2.6/runpy.py\\\", line 34, in _run_code\\r\\n    exec code in run_globals\\r\\n  File \\\"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\\\", line 1661, in <module>\\r\\n  File \\\"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\\\", line 1657, in main\\r\\n  File \\\"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\\\", line 1593, in run\\r\\n  File \\\"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\\\", line 872, in list_stuff\\r\\n  File \\\"/tmp/ansible_yum_payload_sWFIrV/ansible_yum_payload.zip/ansible/modules/packaging/os/yum.py\\\", line 813, in pkg_to_dict\\r\\nValueError: need more than 1 value to unpack\\r\\n\",\r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n    \"rc\": 1\r\n}\r\n```\r\n\r\nBy adding some more debugging myself I am able to see that the string sent to `YumModule.pkg_to_dict()` contains\r\n```\r\n14: problem making ssl connection\\r\\n\r\n```\r\nand that stderr is empty (`\\r\\n`)\r\nall the while the return code is 0.\r\n\r\nI can also see that the \"is_installed()\" function returns a list of the packages installed, while \"is_available()\" crashes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71060", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71060/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71060/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71060/events", "html_url": "https://github.com/ansible/ansible/issues/71060", "id": 672082068, "node_id": "MDU6SXNzdWU2NzIwODIwNjg=", "number": 71060, "title": "package module exclude parameter", "user": {"login": "walterrowe", "id": 7131288, "node_id": "MDQ6VXNlcjcxMzEyODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/7131288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walterrowe", "html_url": "https://github.com/walterrowe", "followers_url": "https://api.github.com/users/walterrowe/followers", "following_url": "https://api.github.com/users/walterrowe/following{/other_user}", "gists_url": "https://api.github.com/users/walterrowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/walterrowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walterrowe/subscriptions", "organizations_url": "https://api.github.com/users/walterrowe/orgs", "repos_url": "https://api.github.com/users/walterrowe/repos", "events_url": "https://api.github.com/users/walterrowe/events{/privacy}", "received_events_url": "https://api.github.com/users/walterrowe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 849212023, "node_id": "MDU6TGFiZWw4NDkyMTIwMjM=", "url": "https://api.github.com/repos/ansible/ansible/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": "This issue/PR relates to or includes documentation."}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1231572400, "node_id": "MDU6TGFiZWwxMjMxNTcyNDAw", "url": "https://api.github.com/repos/ansible/ansible/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "Packaging category"}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-08-03T13:37:00Z", "updated_at": "2020-08-04T15:52:33Z", "closed_at": "2020-08-04T15:52:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n\r\nThe `yum` module provides an exclude parameter to exclude specific package name patterns. Add this to the package module.\r\n\r\n##### ISSUE TYPE\r\n\r\nfeature request - add `exclude` parameter to package module\r\n\r\n##### COMPONENT NAME\r\n\r\npackage\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nWe use a common playbook to update packages on all our Linux systems - Debian, Ubuntu, CentOS, Red Hat. The playbook uses the package module rather than having separate `yum` and `apt` tasks based on `ansible_distribution` fact.\r\n\r\nCurrent yum behavior:\r\n\r\n```yaml\r\n   - name: Perform a yum update\r\n     yum:\r\n       name: '*'\r\n       state: latest\r\n       update_cache: yes\r\n       exclude: pkgname1 pkgname*\r\n```\r\n\r\nWould prefer to use package:\r\n\r\n```yaml\r\n  tasks:\r\n   - name: Perform a yum update\r\n     package:\r\n       name: '*'\r\n       state: latest\r\n       update_cache: yes\r\n       exclude: pkgname1 pkgname*\r\n```\r\n\r\n<!--- HINT: You can also paste gist.github.com links for larger files -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71059", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71059/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71059/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71059/events", "html_url": "https://github.com/ansible/ansible/issues/71059", "id": 672038056, "node_id": "MDU6SXNzdWU2NzIwMzgwNTY=", "number": 71059, "title": "ovirt_vm: cloud_init_persist leads to changed always being True", "user": {"login": "jake2184", "id": 11707842, "node_id": "MDQ6VXNlcjExNzA3ODQy", "avatar_url": "https://avatars2.githubusercontent.com/u/11707842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jake2184", "html_url": "https://github.com/jake2184", "followers_url": "https://api.github.com/users/jake2184/followers", "following_url": "https://api.github.com/users/jake2184/following{/other_user}", "gists_url": "https://api.github.com/users/jake2184/gists{/gist_id}", "starred_url": "https://api.github.com/users/jake2184/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jake2184/subscriptions", "organizations_url": "https://api.github.com/users/jake2184/orgs", "repos_url": "https://api.github.com/users/jake2184/repos", "events_url": "https://api.github.com/users/jake2184/events{/privacy}", "received_events_url": "https://api.github.com/users/jake2184/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-03T12:22:25Z", "updated_at": "2020-08-04T15:08:29Z", "closed_at": "2020-08-03T12:29:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\n\r\nMultiple runs of ovirt_vm returns \"changed: True\", even when no changes (should) have been made, when cloud_init_persist is defined. \r\n\r\nThis is due to to line 1579 in ovirt_vm.py, in the boolean logic for the return value of _update_check:\r\n```\r\nnot self.param('cloud_init_persist') and\r\n```\r\n\r\n_update_check will always return false if this param is defined. This means that `self.changed = True` is always met on line 617 of ovirt.py.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.10\r\n  config file = /home/jake2184/ansible.cfg\r\n  configured module search path = ['/home/jake2184/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.6.8 (default, Apr 16 2020, 01:36:27) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\nANSIBLE_PIPELINING(/home/jake2184/ansible.cfg) = True\r\nDEFAULT_FORKS(/home/jake2184/ansible.cfg) = 25\r\nDEFAULT_REMOTE_USER(/home/jake2184/ansible.cfg) = root\r\nDEFAULT_STDOUT_CALLBACK(/home/jake2184/ansible.cfg) = debug\r\nHOST_KEY_CHECKING(/home/jake2184/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\nCentos 8.2\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nRunning the below always results in \"changed: True\"\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Deploy from template\r\n  ovirt_vm:\r\n    auth: \"{{ ovirt_auth }}\"\r\n    template: Centos8\r\n    cluster: mgmt1\r\n    name: myhostname\r\n    clone: True\r\n    #state: present\r\n    cloud_init_persist: True\r\n    cloud_init:\r\n      nic_boot_protocol: static\r\n      nic_ip_address: 10.136.6.10\r\n      nic_netmask: 255.255.255.0\r\n      nic_gateway: 10.136.6.254\r\n      nic_on_boot: true\r\n      nic_name: enp1s0\r\n      host_name: myhostname\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\nThe module to return changed:True only when a change occurs\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\nThe module returns changed:True  with every iteration. \r\n\r\nWhen running with -vvv to see the diff, the diffs can be compared and are equal\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71056", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71056/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71056/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71056/events", "html_url": "https://github.com/ansible/ansible/issues/71056", "id": 671962440, "node_id": "MDU6SXNzdWU2NzE5NjI0NDA=", "number": 71056, "title": "Provide support for dummy interfaces in nmcli", "user": {"login": "vanditboy", "id": 15987438, "node_id": "MDQ6VXNlcjE1OTg3NDM4", "avatar_url": "https://avatars2.githubusercontent.com/u/15987438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vanditboy", "html_url": "https://github.com/vanditboy", "followers_url": "https://api.github.com/users/vanditboy/followers", "following_url": "https://api.github.com/users/vanditboy/following{/other_user}", "gists_url": "https://api.github.com/users/vanditboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/vanditboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vanditboy/subscriptions", "organizations_url": "https://api.github.com/users/vanditboy/orgs", "repos_url": "https://api.github.com/users/vanditboy/repos", "events_url": "https://api.github.com/users/vanditboy/events{/privacy}", "received_events_url": "https://api.github.com/users/vanditboy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 1285191701, "node_id": "MDU6TGFiZWwxMjg1MTkxNzAx", "url": "https://api.github.com/repos/ansible/ansible/labels/collection", "name": "collection", "color": "b60205", "default": false, "description": "Related to Ansible Collections work"}, {"id": 1932404776, "node_id": "MDU6TGFiZWwxOTMyNDA0Nzc2", "url": "https://api.github.com/repos/ansible/ansible/labels/collection:community.general", "name": "collection:community.general", "color": "ededed", "default": false, "description": null}, {"id": 496359346, "node_id": "MDU6TGFiZWw0OTYzNTkzNDY=", "url": "https://api.github.com/repos/ansible/ansible/labels/module", "name": "module", "color": "1d76db", "default": false, "description": "This issue/PR relates to a module."}, {"id": 1985827050, "node_id": "MDU6TGFiZWwxOTg1ODI3MDUw", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_collection_redirect", "name": "needs_collection_redirect", "color": "f90971", "default": false, "description": "https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md"}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 593252542, "node_id": "MDU6TGFiZWw1OTMyNTI1NDI=", "url": "https://api.github.com/repos/ansible/ansible/labels/net_tools", "name": "net_tools", "color": "4071a5", "default": false, "description": "Net-tools category"}, {"id": 636327968, "node_id": "MDU6TGFiZWw2MzYzMjc5Njg=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:community", "name": "support:community", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible community."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-03T10:07:45Z", "updated_at": "2020-08-06T20:39:24Z", "closed_at": "2020-08-03T10:20:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\nDummy interface support for nmcli module would be a great option.\r\nI see that it was already proposed 2 years ago inside this commit but it was closed: https://github.com/ansible/ansible/pull/38489/files \r\n`\r\n##### ISSUE TYPE\r\nAnsible could support type 'dummy' inside the nmcli module as the old way of configuring interfaces via network scripts is going away in RHEL/CentOS 8/Fedora 3x\r\n\r\n##### COMPONENT NAME\r\nnmcli module: https://docs.ansible.com/ansible/latest/modules/nmcli_module.html\r\n\r\n##### ADDITIONAL INFORMATION\r\nhttps://github.com/ansible/ansible/pull/38489/files", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71053", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71053/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71053/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71053/events", "html_url": "https://github.com/ansible/ansible/issues/71053", "id": 671848077, "node_id": "MDU6SXNzdWU2NzE4NDgwNzc=", "number": 71053, "title": "Failed to build singlehtmldocs ", "user": {"login": "Akasurde", "id": 633765, "node_id": "MDQ6VXNlcjYzMzc2NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/633765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akasurde", "html_url": "https://github.com/Akasurde", "followers_url": "https://api.github.com/users/Akasurde/followers", "following_url": "https://api.github.com/users/Akasurde/following{/other_user}", "gists_url": "https://api.github.com/users/Akasurde/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akasurde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akasurde/subscriptions", "organizations_url": "https://api.github.com/users/Akasurde/orgs", "repos_url": "https://api.github.com/users/Akasurde/repos", "events_url": "https://api.github.com/users/Akasurde/events{/privacy}", "received_events_url": "https://api.github.com/users/Akasurde/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 849212023, "node_id": "MDU6TGFiZWw4NDkyMTIwMjM=", "url": "https://api.github.com/repos/ansible/ansible/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": "This issue/PR relates to or includes documentation."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 942378949, "node_id": "MDU6TGFiZWw5NDIzNzg5NDk=", "url": "https://api.github.com/repos/ansible/ansible/labels/traceback", "name": "traceback", "color": "ededed", "default": false, "description": "This issue/PR includes a traceback."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-08-03T07:03:57Z", "updated_at": "2020-08-14T20:02:08Z", "closed_at": "2020-08-14T20:02:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--- Verify first that your improvement is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n```\r\nrst=scenario_guides/vmware_scenarios/vmware_inventory_hostnames.rst make singlehtmldocs\r\n```\r\nProduces below stack trace\r\n\r\n```\r\nrst=scenario_guides/vmware_scenarios/vmware_inventory_hostnames.rst make singlehtmldocs\r\n../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml\r\n../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml\r\nmkdir -p rst/cli\r\n../../hacking/build-ansible.py generate-man --template-file=../templates/cli_rst.j2 --output-dir=rst/cli/ --output-format rst ../../lib/ansible/cli/*.py\r\n[WARNING]: You are running the development version of Ansible. You should only run Ansible\r\nfrom \"devel\" if you are modifying the Ansible engine, or trying out features under\r\ndevelopment. This is a rapidly changing source of code and can become unstable at any point.\r\n../../hacking/build-ansible.py document-keywords --template-dir=../templates --output-dir=rst/reference_appendices/ ./keyword_desc.yml\r\nif expr \"2.11.0.dev0\" : '.*[.]dev[0-9]\\+$' &> /dev/null; then \\\r\n\t\t../../hacking/build-ansible.py docs-build base -o rst ;\\\r\n\telse \\\r\n\t\t../../hacking/build-ansible.py docs-build full -o rst ;\\\r\n\tfi\r\nTraceback (most recent call last):\r\n  File \"../../hacking/build-ansible.py\", line 103, in <module>\r\n    main()\r\n  File \"../../hacking/build-ansible.py\", line 92, in main\r\n    retval = command.main(args)\r\n  File \"/Volumes/data/src/ansible/hacking/build_library/build_ansible/command_plugins/docs_build.py\", line 157, in main\r\n    return generate_full_docs(args)\r\n  File \"/Volumes/data/src/ansible/hacking/build_library/build_ansible/command_plugins/docs_build.py\", line 83, in generate_full_docs\r\n    raise Exception('No deps files exist for version {0}'.format(ansible_base_major_ver))\r\nException: No deps files exist for version 2.11\r\nmake: *** [plugins] Error 1\r\n```\r\n\r\n##### ISSUE TYPE\r\n- Documentation Report\r\n\r\n##### COMPONENT NAME\r\nhacking/build-ansible.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\ndevel\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\nNothing specific\r\n\r\n##### OS / ENVIRONMENT\r\nmacOS\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71051", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71051/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71051/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71051/events", "html_url": "https://github.com/ansible/ansible/issues/71051", "id": 671751700, "node_id": "MDU6SXNzdWU2NzE3NTE3MDA=", "number": 71051, "title": "Variable is not defined", "user": {"login": "mrdevops12", "id": 67409507, "node_id": "MDQ6VXNlcjY3NDA5NTA3", "avatar_url": "https://avatars1.githubusercontent.com/u/67409507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrdevops12", "html_url": "https://github.com/mrdevops12", "followers_url": "https://api.github.com/users/mrdevops12/followers", "following_url": "https://api.github.com/users/mrdevops12/following{/other_user}", "gists_url": "https://api.github.com/users/mrdevops12/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrdevops12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrdevops12/subscriptions", "organizations_url": "https://api.github.com/users/mrdevops12/orgs", "repos_url": "https://api.github.com/users/mrdevops12/repos", "events_url": "https://api.github.com/users/mrdevops12/events{/privacy}", "received_events_url": "https://api.github.com/users/mrdevops12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1742671738, "node_id": "MDU6TGFiZWwxNzQyNjcxNzM4", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.11", "name": "affects_2.11", "color": "5319e7", "default": false, "description": ""}, {"id": 852590921, "node_id": "MDU6TGFiZWw4NTI1OTA5MjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": "This issue/PR relates to a feature request."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 572345061, "node_id": "MDU6TGFiZWw1NzIzNDUwNjE=", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_template", "name": "needs_template", "color": "f9d0c4", "default": false, "description": "This issue/PR has an incomplete description. Please fill in the proposed template correctly."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-03T02:33:32Z", "updated_at": "2020-08-04T15:08:28Z", "closed_at": "2020-08-03T08:09:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using Ansible 2.9 version. \r\nI have written below code \r\n\r\n---\r\n- name: Create a VPC in aws \r\n  ec2_vpc_net:\r\n     name: ansible_vpc\r\n     cidr_block: 10.0.0.0/16\r\n     region: us-east-1\r\n     tags:\r\n        Name: vpc_from_ansible\r\n        Env:  dev_vpc\r\n     tenancy: dedicated\r\n  register: vpc_create\r\n\r\n- name: Print the vpc creating process using debug and var \r\n  debug:\r\n    var: vpc_create\r\n    verbosity: 0\r\n\r\n- name: Print the vpc cidr block\r\n  debug:\r\n    var: vpc_create.vpc.cidr_block\r\n\r\n- name: print the vpc association_id\r\n  debug:\r\n    var: vpc_create.vpc.cidr_block_association_set.association_id\r\n\r\n\r\n\r\nOutput is coming as I have expected till last debug But I am facing the issue \r\n\r\n\r\nJson: \r\n\r\nok: [localhost] => {\r\n    \"vpc_create\": {\r\n        \"changed\": false,\r\n        \"failed\": false,\r\n        \"vpc\": {\r\n            \"cidr_block\": \"10.0.0.0/16\",\r\n            \"cidr_block_association_set\": [\r\n                {\r\n                    \"association_id\": \"vpc-cidr-assoc-02ad1e9c7529f0ce6\",\r\n                    \"cidr_block\": \"10.0.0.0/16\",\r\n                    \"cidr_block_state\": {\r\n                        \"state\": \"associated\"\r\n                    }\r\n                }\r\n            ],\r\n            \"classic_link_enabled\": false,\r\n            \"dhcp_options_id\": \"dopt-4fff8034\",\r\n            \"id\": \"vpc-023e9fd884f05c328\",\r\n            \"instance_tenancy\": \"dedicated\",\r\n            \"is_default\": false,\r\n            \"owner_id\": \"758538164434\",\r\n            \"state\": \"available\",\r\n            \"tags\": {\r\n                \"Env\": \"dev_vpc\",\r\n                \"Name\": \"ansible_vpc\"\r\n            }\r\n        }\r\n    }\r\n}. \r\n\r\n\r\n- name: print the vpc association_id\r\n  debug:\r\n    var: vpc_create.vpc.cidr_block_association_set.association_id\r\n\r\nHere its trying to say, Variable is not defined. I have observed, This is Nested Json Dictionary, even I have tried to filter like JmesPath , JSQUERY, even though out is not coming as I have expected\r\n\r\nvpc\": {\r\n            \"cidr_block\": \"10.0.0.0/16\",\r\n            \"cidr_block_association_set\": [\r\n                {\r\n                    \"association_id\": \"vpc-cidr-assoc-02ad1e9c7529f0ce6\",\r\n                    \"cidr_block\": \"10.0.0.0/16\",\r\n                    \"cidr_block_state\": {\r\n                        \"state\": \"associated\"\r\n                    }\r\n\r\n Here I am trying to get  \"association_id\" id like  \"vpc_create.vpc.cidr_block_association_set.association_id\r\n\r\n\r\nCan you please help me how can I get dictionary variables ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71050", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71050/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71050/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71050/events", "html_url": "https://github.com/ansible/ansible/issues/71050", "id": 671720899, "node_id": "MDU6SXNzdWU2NzE3MjA4OTk=", "number": 71050, "title": "Python API breaking change to Variable Manager between versions 2.9.9 and 2.9.0", "user": {"login": "akhilgopu72", "id": 20913186, "node_id": "MDQ6VXNlcjIwOTEzMTg2", "avatar_url": "https://avatars0.githubusercontent.com/u/20913186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akhilgopu72", "html_url": "https://github.com/akhilgopu72", "followers_url": "https://api.github.com/users/akhilgopu72/followers", "following_url": "https://api.github.com/users/akhilgopu72/following{/other_user}", "gists_url": "https://api.github.com/users/akhilgopu72/gists{/gist_id}", "starred_url": "https://api.github.com/users/akhilgopu72/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akhilgopu72/subscriptions", "organizations_url": "https://api.github.com/users/akhilgopu72/orgs", "repos_url": "https://api.github.com/users/akhilgopu72/repos", "events_url": "https://api.github.com/users/akhilgopu72/events{/privacy}", "received_events_url": "https://api.github.com/users/akhilgopu72/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 54811101, "node_id": "MDU6TGFiZWw1NDgxMTEwMQ==", "url": "https://api.github.com/repos/ansible/ansible/labels/needs_info", "name": "needs_info", "color": "eb6420", "default": false, "description": "This issue requires further information. Please answer any outstanding questions."}, {"id": 383076471, "node_id": "MDU6TGFiZWwzODMwNzY0NzE=", "url": "https://api.github.com/repos/ansible/ansible/labels/python3", "name": "python3", "color": "fbca04", "default": false, "description": null}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-03T00:26:24Z", "updated_at": "2020-08-04T15:41:47Z", "closed_at": "2020-08-04T15:41:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nPython API - Variable Manager\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```paste below\r\nansible 2.9.0\r\n  config file = /home/vagrant/danser/ansible.cfg\r\n  configured module search path = ['/home/vagrant/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n\r\nansible 2.9.9\r\n  config file = /home/vagrant/danser/ansible.cfg\r\n  configured module search path = ['/home/vagrant/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```paste below\r\n\r\nDEFAULT_CALLBACK_WHITELIST(/home/vagrant/danser/ansible.cfg) = ['profile_tasks']\r\nDISPLAY_SKIPPED_HOSTS(/home/vagrant/danser/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!--- Provide all relevant information below, e.g. target OS versions, network device firmware, etc. -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\n\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\nloader = DataLoader()\r\nself.inventory = InventoryManager(loader=loader, sources=self.INVENTORY_PATH)\r\nself.vm = VariableManager(loader=loader, inventory=self.inventory)\r\nsystem_vars = self.vm.get_vars(host=<example_host>)\r\n```\r\nIn 2.9.9, self.vm.get_vars() will only return information found in the inventory file and will not find any other group vars\r\n\r\nThis works fine in 2.9.0\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- Describe what you expected to happen when running the steps above -->\r\n\r\nI expect to see all the variables defined across all of the group vars files\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\nOnly information found in the inventory file was found when running the 2.9.9 version.\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible/issues/71048", "repository_url": "https://api.github.com/repos/ansible/ansible", "labels_url": "https://api.github.com/repos/ansible/ansible/issues/71048/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible/issues/71048/comments", "events_url": "https://api.github.com/repos/ansible/ansible/issues/71048/events", "html_url": "https://github.com/ansible/ansible/issues/71048", "id": 671690995, "node_id": "MDU6SXNzdWU2NzE2OTA5OTU=", "number": 71048, "title": "Ansible won't run with any command on CLI", "user": {"login": "codekandis", "id": 31327217, "node_id": "MDQ6VXNlcjMxMzI3MjE3", "avatar_url": "https://avatars0.githubusercontent.com/u/31327217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codekandis", "html_url": "https://github.com/codekandis", "followers_url": "https://api.github.com/users/codekandis/followers", "following_url": "https://api.github.com/users/codekandis/following{/other_user}", "gists_url": "https://api.github.com/users/codekandis/gists{/gist_id}", "starred_url": "https://api.github.com/users/codekandis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codekandis/subscriptions", "organizations_url": "https://api.github.com/users/codekandis/orgs", "repos_url": "https://api.github.com/users/codekandis/repos", "events_url": "https://api.github.com/users/codekandis/events{/privacy}", "received_events_url": "https://api.github.com/users/codekandis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1316917295, "node_id": "MDU6TGFiZWwxMzE2OTE3Mjk1", "url": "https://api.github.com/repos/ansible/ansible/labels/affects_2.9", "name": "affects_2.9", "color": "5319e7", "default": false, "description": "This issue/PR affects Ansible v2.9"}, {"id": 785271699, "node_id": "MDU6TGFiZWw3ODUyNzE2OTk=", "url": "https://api.github.com/repos/ansible/ansible/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": "This issue/PR relates to a bug."}, {"id": 636352796, "node_id": "MDU6TGFiZWw2MzYzNTI3OTY=", "url": "https://api.github.com/repos/ansible/ansible/labels/support:core", "name": "support:core", "color": "ededed", "default": false, "description": "This issue/PR relates to code supported by the Ansible Engineering Team."}, {"id": 942378949, "node_id": "MDU6TGFiZWw5NDIzNzg5NDk=", "url": "https://api.github.com/repos/ansible/ansible/labels/traceback", "name": "traceback", "color": "ededed", "default": false, "description": "This issue/PR includes a traceback."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-02T21:14:17Z", "updated_at": "2020-08-04T15:08:27Z", "closed_at": "2020-08-03T11:20:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "##### SUMMARY\r\n\r\nI'm running the latest ansible on the latest Debian Buster provided through the official Ansible PPA. Today I discovered that Ansible won't execute properly and throws an error stacktrace.\r\n\r\n##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible/trusty,trusty,now 2.9.11-1ppa~trusty all\r\n```\r\n\r\n##### COMPONENT NAME\r\n\r\n!component\r\n\r\n##### CONFIGURATION\r\n\r\n```\r\nNot possible to acquire.\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n\r\n```\r\nOS:  Linux dl5490 4.19.0-9-amd64 #1 SMP Debian 4.19.118-2+deb10u1 (2020-06-07) x86_64 GNU/Linux\r\nPPA: deb http://ppa.launchpad.net/ansible/ansible/ubuntu trusty main\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nRun any ansible command on CLI.\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/ansible-config\", line 62, in <module>\r\n    import ansible.constants as C\r\n  File \"/usr/lib/python2.7/dist-packages/ansible/constants.py\", line 174, in <module>\r\n    config = ConfigManager()\r\n  File \"/usr/lib/python2.7/dist-packages/ansible/config/manager.py\", line 283, in __init__\r\n    self._config_file = find_ini_config_file(self.WARNINGS)\r\n  File \"/usr/lib/python2.7/dist-packages/ansible/config/manager.py\", line 240, in find_ini_config_file\r\n    potential_paths.append(unfrackpath(\"~/.ansible.cfg\", follow=False))\r\n  File \"/usr/lib/python2.7/dist-packages/ansible/utils/path.py\", line 55, in unfrackpath\r\n    b_basedir = to_bytes(os.getcwd(), errors='surrogate_or_strict')\r\nOSError: [Errno 2] No such file or directory\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}]}