{"total_count": 135, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ansible/ansible-runner/issues/491", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/491/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/491/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/491/events", "html_url": "https://github.com/ansible/ansible-runner/issues/491", "id": 676140013, "node_id": "MDU6SXNzdWU2NzYxNDAwMTM=", "number": 491, "title": "extravars  / dict / list are passed as string ", "user": {"login": "nesies", "id": 107966, "node_id": "MDQ6VXNlcjEwNzk2Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/107966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nesies", "html_url": "https://github.com/nesies", "followers_url": "https://api.github.com/users/nesies/followers", "following_url": "https://api.github.com/users/nesies/following{/other_user}", "gists_url": "https://api.github.com/users/nesies/gists{/gist_id}", "starred_url": "https://api.github.com/users/nesies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nesies/subscriptions", "organizations_url": "https://api.github.com/users/nesies/orgs", "repos_url": "https://api.github.com/users/nesies/repos", "events_url": "https://api.github.com/users/nesies/events{/privacy}", "received_events_url": "https://api.github.com/users/nesies/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-10T13:32:52Z", "updated_at": "2020-08-10T13:47:22Z", "closed_at": "2020-08-10T13:47:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Variables from extravars are passed as String to ansible, instead of list/mapping\r\n\r\n```\r\nimport ansible_runner\r\n\r\nextravars = {\r\n            \"var_str\": \"v1\",\r\n            \"var_list\": [],\r\n            \"var_dict\": {\r\n                \"key1\": \"val1\"\r\n            }\r\n        }\r\nrc = ansible_runner.RunnerConfig(\r\n    private_data_dir=\".\",\r\n    playbook=\"playbook_toto.yml\",\r\n    host_pattern=\"localhost\",\r\n    fact_cache=\"/tmp/\",\r\n    fact_cache_type=\"jsonfile\",\r\n    extravars=extravars\r\n)\r\nrc.prepare()\r\nprint(\"'{}'\".format(\r\n        \"' '\".join(rc.generate_ansible_command())))\r\nr = ansible_runner.Runner(\r\n    rc\r\n)\r\nr.run()\r\n```\r\n\r\noutput:\r\n``\r\n'ansible-playbook' '-e' 'var_str=\"v1\" **var_list=\"[]\" var_dict=\"{'key1': 'val1'}**\"' 'playbook_toto.yml'\r\n\r\n```\r\n\r\n=> var_list and var_dict are passed as String\r\n\r\n\r\nThe correct -e arugment might be:\r\n\r\n'ansible-playbook' \\\r\n '-e' 'var_str=\"v1\"' \\\r\n  **-e {\"var_list\": []}\" \\\r\n  -e {\"var_dict\": {\"key1\": \"val1\"} \\**\r\n  'playbook_toto.yml'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/476", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/476/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/476/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/476/events", "html_url": "https://github.com/ansible/ansible-runner/issues/476", "id": 652612193, "node_id": "MDU6SXNzdWU2NTI2MTIxOTM=", "number": 476, "title": "test w/ multiple versions of ansible", "user": {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-07-07T20:22:17Z", "updated_at": "2020-08-07T16:30:20Z", "closed_at": "2020-08-07T16:30:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "1.4.6 was a one-issue release because ansible-runner broke using ansible 2.8 and prior, let's get tox running against multiple versions of ansible, I'd say 2.7+\r\n\r\nhttps://github.com/ansible/ansible-runner/blob/devel/CHANGES.rst#146-2020-03-26\r\n\r\ncc: @matburt @shanemcd @jladdjr ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/468", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/468/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/468/events", "html_url": "https://github.com/ansible/ansible-runner/issues/468", "id": 645023406, "node_id": "MDU6SXNzdWU2NDUwMjM0MDY=", "number": 468, "title": "Need stable 1.4.x branch and convert devel into future 2.0", "user": {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-06-24T22:42:30Z", "updated_at": "2020-07-06T17:18:55Z", "closed_at": "2020-07-06T17:18:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The 1.4.z line has been out for a while and plenty of people use it.\r\nThere is allready a stable-1.3 branch https://github.com/ansible/ansible-runner/tree/stable/1.3.x\r\n\r\nWe should have  a stable branch for releasing bug fix release versions of 1.4.z\r\n\r\nThen we should make devel version read as 2.0.0\r\n\r\n@maxamillion @matburt @shanemcd any objection.\r\n\r\nI would do it but not 100% sure where to branch off stable-1.4. Guess I could just go back to when it was released", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/460", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/460/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/460/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/460/events", "html_url": "https://github.com/ansible/ansible-runner/issues/460", "id": 630154955, "node_id": "MDU6SXNzdWU2MzAxNTQ5NTU=", "number": 460, "title": "Ansible Runner in Docker container can't process mounted password file", "user": {"login": "mous2890", "id": 26714548, "node_id": "MDQ6VXNlcjI2NzE0NTQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/26714548?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mous2890", "html_url": "https://github.com/mous2890", "followers_url": "https://api.github.com/users/mous2890/followers", "following_url": "https://api.github.com/users/mous2890/following{/other_user}", "gists_url": "https://api.github.com/users/mous2890/gists{/gist_id}", "starred_url": "https://api.github.com/users/mous2890/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mous2890/subscriptions", "organizations_url": "https://api.github.com/users/mous2890/orgs", "repos_url": "https://api.github.com/users/mous2890/repos", "events_url": "https://api.github.com/users/mous2890/events{/privacy}", "received_events_url": "https://api.github.com/users/mous2890/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-03T16:44:34Z", "updated_at": "2020-06-08T13:28:41Z", "closed_at": "2020-06-08T13:28:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm currently using the ansible-runner docker image to run a container which will mount a directory, use ansible-vault to encrypt some files then terminate the container. Inside the volume mount is the ansible-vault password file.\r\n\r\nDocker compose file:\r\n`version: \"3.3\"\r\nservices:\r\n  ansible:\r\n    image: ansible/ansible-runner:1.4.6\r\n    container_name: ansible\r\n    restart: \"no\"\r\n    volumes:\r\n      - ../.:/runner/app/\r\n    working_dir: /runner/app/`\r\n\r\nDocker command:\r\n`docker-compose -f docker/ansible/docker-compose.ansible.yaml run --rm ansible bash -c \"ansible-vault encrypt --vault-password-file PATH_TO_PASSWORD FILENAME\"`\r\n\r\nWhen i run the above command to encrypt a file, the error i get is:\r\n`Processing dev/env.dev...\r\n[WARNING]: Error in vault password file loading (default): Problem running vault password script /runner/app/ansible/ansible-vault-password.txt ([Errno 8] Exec format error: '/runner/app/ansible/ansible-vault-password.txt'). If this is not a script, remove the executable bit from the file.       \r\nERROR! Problem running vault password script /runner/app/ansible/ansible-vault-password.txt ([Errno 8] Exec format error: '/runner/app/ansible/ansible-vault-password.txt'). If this is not a script, remove the executable bit from the file.`\r\n\r\nAnsible Vault Password File Details:\r\n`-rwxr-xr-x 1 root root 20 Jun  3 16:38 /runner/app/ansible/ansible-vault-password.txt`\r\n\r\nI tried changing the file to no longer being executable but it just wouldn't change. I used chmod 600 FILENAME.\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/458", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/458/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/458/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/458/events", "html_url": "https://github.com/ansible/ansible-runner/issues/458", "id": 626174158, "node_id": "MDU6SXNzdWU2MjYxNzQxNTg=", "number": 458, "title": "run() no \"passwords\" param.", "user": {"login": "leechor", "id": 2387215, "node_id": "MDQ6VXNlcjIzODcyMTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2387215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leechor", "html_url": "https://github.com/leechor", "followers_url": "https://api.github.com/users/leechor/followers", "following_url": "https://api.github.com/users/leechor/following{/other_user}", "gists_url": "https://api.github.com/users/leechor/gists{/gist_id}", "starred_url": "https://api.github.com/users/leechor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leechor/subscriptions", "organizations_url": "https://api.github.com/users/leechor/orgs", "repos_url": "https://api.github.com/users/leechor/repos", "events_url": "https://api.github.com/users/leechor/events{/privacy}", "received_events_url": "https://api.github.com/users/leechor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-28T02:56:27Z", "updated_at": "2020-05-30T22:58:02Z", "closed_at": "2020-05-30T22:58:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "`\r\n:param passwords: A dictionary containing password prompt patterns and response values used when processing output from\r\n                      Ansible. Passwords will also be read from ``env/passwords`` in ``private_data_dir``.\r\n`\r\nthis param not work.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/457", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/457/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/457/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/457/events", "html_url": "https://github.com/ansible/ansible-runner/issues/457", "id": 620981064, "node_id": "MDU6SXNzdWU2MjA5ODEwNjQ=", "number": 457, "title": "Add support for running jobs in containers", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "jladdjr", "id": 4440360, "node_id": "MDQ6VXNlcjQ0NDAzNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4440360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jladdjr", "html_url": "https://github.com/jladdjr", "followers_url": "https://api.github.com/users/jladdjr/followers", "following_url": "https://api.github.com/users/jladdjr/following{/other_user}", "gists_url": "https://api.github.com/users/jladdjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jladdjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jladdjr/subscriptions", "organizations_url": "https://api.github.com/users/jladdjr/orgs", "repos_url": "https://api.github.com/users/jladdjr/repos", "events_url": "https://api.github.com/users/jladdjr/events{/privacy}", "received_events_url": "https://api.github.com/users/jladdjr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jladdjr", "id": 4440360, "node_id": "MDQ6VXNlcjQ0NDAzNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4440360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jladdjr", "html_url": "https://github.com/jladdjr", "followers_url": "https://api.github.com/users/jladdjr/followers", "following_url": "https://api.github.com/users/jladdjr/following{/other_user}", "gists_url": "https://api.github.com/users/jladdjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jladdjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jladdjr/subscriptions", "organizations_url": "https://api.github.com/users/jladdjr/orgs", "repos_url": "https://api.github.com/users/jladdjr/repos", "events_url": "https://api.github.com/users/jladdjr/events{/privacy}", "received_events_url": "https://api.github.com/users/jladdjr/received_events", "type": "User", "site_admin": false}, {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-05-19T13:32:56Z", "updated_at": "2020-08-10T15:05:50Z", "closed_at": "2020-08-10T15:05:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is a subtask of a larger enhancement/initiative surrounding execution environments: https://github.com/ansible/awx/issues/5157\r\n\r\nAdd support to runner for executing playbooks inside a container via podman or docker.\r\n\r\nsee WIP PR: ~https://github.com/ansible/ansible-runner/pull/446~ https://github.com/ansible/ansible-runner/pull/470", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/454", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/454/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/454/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/454/events", "html_url": "https://github.com/ansible/ansible-runner/issues/454", "id": 616358052, "node_id": "MDU6SXNzdWU2MTYzNTgwNTI=", "number": 454, "title": "runner.stats not update results", "user": {"login": "baonq243", "id": 5095778, "node_id": "MDQ6VXNlcjUwOTU3Nzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5095778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/baonq243", "html_url": "https://github.com/baonq243", "followers_url": "https://api.github.com/users/baonq243/followers", "following_url": "https://api.github.com/users/baonq243/following{/other_user}", "gists_url": "https://api.github.com/users/baonq243/gists{/gist_id}", "starred_url": "https://api.github.com/users/baonq243/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/baonq243/subscriptions", "organizations_url": "https://api.github.com/users/baonq243/orgs", "repos_url": "https://api.github.com/users/baonq243/repos", "events_url": "https://api.github.com/users/baonq243/events{/privacy}", "received_events_url": "https://api.github.com/users/baonq243/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-12T04:54:46Z", "updated_at": "2020-06-20T03:58:47Z", "closed_at": "2020-06-20T03:58:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "When i run in python\r\n\r\nfirst: OK\r\n\r\n```\r\ninventory = ['192.168.111.11', '192.168.111.12']\r\nr = ansible_runner.run(private_data_dir='.', playbook=playbook_file, inventory=list_host...\r\nprint(r.stats)\r\n{'skipped': {}, 'ok': {'192.168.111.12': 1, '192.168.111.11': 1}, 'dark': {}, 'failures': {}, 'processed': {'192.168.111.12': 1, '192.168.111.11': 1}, 'changed': {}}\r\n```\r\n\r\nsecond: OK\r\n\r\n```\r\ninventory = ['192.168.111.11']\r\nr = ansible_runner.run(private_data_dir='.', playbook=playbook_file, inventory=list_host...\r\nprint(r.stats)\r\n{'skipped': {}, 'ok': {'192.168.111.11': 1}, 'dark': {}, 'failures': {}, 'processed': {'192.168.111.11': 1}, 'changed': {}}\r\n```\r\n\r\n3th: stats incorect, stats not update\r\n```\r\ninventory = ['192.168.111.11', '192.168.111.12']\r\nr = ansible_runner.run(private_data_dir='.', playbook=playbook_file, inventory=list_host...\r\nprint(r.stats)\r\n{'skipped': {}, 'ok': {'192.168.111.11': 1}, 'dark': {}, 'failures': {}, 'processed': {'192.168.111.11': 1}, 'changed': {}}\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/451", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/451/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/451/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/451/events", "html_url": "https://github.com/ansible/ansible-runner/issues/451", "id": 614598897, "node_id": "MDU6SXNzdWU2MTQ1OTg4OTc=", "number": 451, "title": "Multiple host to inventory via ansible_runner python", "user": {"login": "baonq243", "id": 5095778, "node_id": "MDQ6VXNlcjUwOTU3Nzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5095778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/baonq243", "html_url": "https://github.com/baonq243", "followers_url": "https://api.github.com/users/baonq243/followers", "following_url": "https://api.github.com/users/baonq243/following{/other_user}", "gists_url": "https://api.github.com/users/baonq243/gists{/gist_id}", "starred_url": "https://api.github.com/users/baonq243/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/baonq243/subscriptions", "organizations_url": "https://api.github.com/users/baonq243/orgs", "repos_url": "https://api.github.com/users/baonq243/repos", "events_url": "https://api.github.com/users/baonq243/events{/privacy}", "received_events_url": "https://api.github.com/users/baonq243/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-08T08:38:21Z", "updated_at": "2020-05-08T09:09:34Z", "closed_at": "2020-05-08T09:09:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can i use a list to assign inventory like that?\r\n\r\n```\r\nimport ansible_runner\r\ninventory = ['192.168.111.11', '192.168.111.12']\r\nr = ansible_runner.run(private_data_dir='.', playbook='test.yml', inventory=inventory,\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/450", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/450/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/450/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/450/events", "html_url": "https://github.com/ansible/ansible-runner/issues/450", "id": 612541333, "node_id": "MDU6SXNzdWU2MTI1NDEzMzM=", "number": 450, "title": "Fix use of jsonfile cache with Ansible 2.10", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006544, "node_id": "MDU6TGFiZWw4MjUwMDY1NDQ=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-05T11:47:44Z", "updated_at": "2020-05-11T15:07:07Z", "closed_at": "2020-05-11T15:07:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ansible-runner has some special abilities with jsonfile, and will apply the setting for it in its own code:\r\n\r\nhttps://github.com/ansible/ansible-runner/blob/f73705bf9b09424c9e5353d7f5119147e844eaa5/ansible_runner/runner_config.py#L241\r\n\r\nThe plugin has been moved out of ansible-base and is now in `community.general`. But even if a user has installed that collection, the above line would have to be `community.general.jsonfile`, instead of just `jsonfile`. Thus, the current state of ansible-runner is not compatible with Ansible 2.10 for this feature.\r\n\r\nThis is hit by the tests, giving these warnings:\r\n\r\n> [WARNING]: Unable to load the facts cache plugin (jsonfile).\r\n\r\n----\r\n\r\nSince it's such an absurdly simple plugin, it's possible that ansible-runner can vendor it on its own, similar to the callback plugin. Otherwise, users will need some sort of additional instructions on how to use it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/449", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/449/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/449/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/449/events", "html_url": "https://github.com/ansible/ansible-runner/issues/449", "id": 612417674, "node_id": "MDU6SXNzdWU2MTI0MTc2NzQ=", "number": 449, "title": "Please update the release on Docker Hub", "user": {"login": "svenstaro", "id": 1664, "node_id": "MDQ6VXNlcjE2NjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svenstaro", "html_url": "https://github.com/svenstaro", "followers_url": "https://api.github.com/users/svenstaro/followers", "following_url": "https://api.github.com/users/svenstaro/following{/other_user}", "gists_url": "https://api.github.com/users/svenstaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/svenstaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svenstaro/subscriptions", "organizations_url": "https://api.github.com/users/svenstaro/orgs", "repos_url": "https://api.github.com/users/svenstaro/repos", "events_url": "https://api.github.com/users/svenstaro/events{/privacy}", "received_events_url": "https://api.github.com/users/svenstaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-05T08:07:05Z", "updated_at": "2020-06-02T11:48:38Z", "closed_at": "2020-06-02T11:48:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, the current release on Docker Hub is still based on CentOS 7 which uses Python 2 and is therefore EOL. A CentOS 8 based build would be nice since it uses Python 3. Current master would do nicely.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/442", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/442/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/442/events", "html_url": "https://github.com/ansible/ansible-runner/issues/442", "id": 597269295, "node_id": "MDU6SXNzdWU1OTcyNjkyOTU=", "number": 442, "title": "Ansible-runner + ansible-runner-http ", "user": {"login": "dcasasok", "id": 56881343, "node_id": "MDQ6VXNlcjU2ODgxMzQz", "avatar_url": "https://avatars2.githubusercontent.com/u/56881343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcasasok", "html_url": "https://github.com/dcasasok", "followers_url": "https://api.github.com/users/dcasasok/followers", "following_url": "https://api.github.com/users/dcasasok/following{/other_user}", "gists_url": "https://api.github.com/users/dcasasok/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcasasok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcasasok/subscriptions", "organizations_url": "https://api.github.com/users/dcasasok/orgs", "repos_url": "https://api.github.com/users/dcasasok/repos", "events_url": "https://api.github.com/users/dcasasok/events{/privacy}", "received_events_url": "https://api.github.com/users/dcasasok/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-09T13:07:56Z", "updated_at": "2020-04-09T19:16:51Z", "closed_at": "2020-04-09T13:22:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, i'm trying integrate both ansible-runner and ansible-runner-http plugin.\r\n\r\nFirst of all,  In my main code i use the event_handler function because i want to get all events data. This works only using ansible-runner without plugin configure.\r\n\r\nThen i downloaded ansible-runner-http plugin to send events data to a URL with post requests. But when i configure it (on the env/settings) and test it, ansible-runner only send the post request and in the event handler i can't see/use that event. In fact, when ansible-runner execute the test playbook it creates the identifier directory of the invocation, but that file is empty. \r\n\r\nThe URL isn't an endpoint, it doesn't respond any requests.\r\n\r\nSo, what's happening with the events data? Should i use another URL? \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/435", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/435/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/435/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/435/events", "html_url": "https://github.com/ansible/ansible-runner/issues/435", "id": 588496805, "node_id": "MDU6SXNzdWU1ODg0OTY4MDU=", "number": 435, "title": "callback plugin broken for older versions of anisble", "user": {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-26T15:12:32Z", "updated_at": "2020-03-26T18:35:29Z", "closed_at": "2020-03-26T18:35:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### SUMMARY\r\n<!-- Briefly describe the problem. -->\r\nRunning jobs w/ virtual environments in awx using older ansible versions is broken.\r\nSymptom that tests are picking up is no `runner_on_*` events.\r\n\r\nIf you look at the stdout of the jobs run in environments using ansible 2.7.15, 2.6.1, 2.5.6, 2.4.6, or 2.3.3 (probably others), you see\r\n\r\n```\r\n[WARNING]: Failure using method (v2_runner_on_ok) in callback plugin\r\n(<ansible.plugins.callback.awx_display.CallbackModule \r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/29239279/77662115-d6807b80-6f51-11ea-9d84-bc91f5891175.png)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/431", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/431/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/431/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/431/events", "html_url": "https://github.com/ansible/ansible-runner/issues/431", "id": 583954183, "node_id": "MDU6SXNzdWU1ODM5NTQxODM=", "number": 431, "title": "Cannot access variable of playbook defined with set_fact", "user": {"login": "sylock", "id": 2362405, "node_id": "MDQ6VXNlcjIzNjI0MDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2362405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sylock", "html_url": "https://github.com/sylock", "followers_url": "https://api.github.com/users/sylock/followers", "following_url": "https://api.github.com/users/sylock/following{/other_user}", "gists_url": "https://api.github.com/users/sylock/gists{/gist_id}", "starred_url": "https://api.github.com/users/sylock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sylock/subscriptions", "organizations_url": "https://api.github.com/users/sylock/orgs", "repos_url": "https://api.github.com/users/sylock/repos", "events_url": "https://api.github.com/users/sylock/events{/privacy}", "received_events_url": "https://api.github.com/users/sylock/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-18T19:28:39Z", "updated_at": "2020-04-07T15:02:14Z", "closed_at": "2020-04-07T15:02:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Explanation**\r\nDuring the execution of a playbook, I define a new fact with set_fact. After the playbook execution, in the python script that called it, I want to retrieve that variable content. When using get_fact_cache on the runner object, I don't find that value.\r\n\r\nFor me this is a showstopper for ansible-runner since my core need is to be able to retrieve facts, including the ones defined with set_fact from the python script for further processing and usage.\r\n\r\n**Code sample**\r\n\r\nThe minimal python script that calls the minimal ansible script, and try to print a fact set by set_fact\r\n```python\r\nimport ansible_runner\r\nr = ansible_runner.run(private_data_dir='/tmp', playbook='test.yml')\r\nprint(r.get_fact_cache('localhost'))\r\n```\r\nThe minimal ansible script\r\n\r\n```yaml\r\n---\r\n#located in /tmp/project/test.yml\r\n- hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - debug:\r\n        msg: this is a test\r\n    - set_fact:\r\n        my_var: test_var\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/427", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/427/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/427/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/427/events", "html_url": "https://github.com/ansible/ansible-runner/issues/427", "id": 580414105, "node_id": "MDU6SXNzdWU1ODA0MTQxMDU=", "number": 427, "title": "Install python-netaddr in docker", "user": {"login": "jamielennox", "id": 416057, "node_id": "MDQ6VXNlcjQxNjA1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/416057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamielennox", "html_url": "https://github.com/jamielennox", "followers_url": "https://api.github.com/users/jamielennox/followers", "following_url": "https://api.github.com/users/jamielennox/following{/other_user}", "gists_url": "https://api.github.com/users/jamielennox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamielennox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamielennox/subscriptions", "organizations_url": "https://api.github.com/users/jamielennox/orgs", "repos_url": "https://api.github.com/users/jamielennox/repos", "events_url": "https://api.github.com/users/jamielennox/events{/privacy}", "received_events_url": "https://api.github.com/users/jamielennox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-13T07:11:49Z", "updated_at": "2020-03-16T17:51:12Z", "closed_at": "2020-03-16T17:51:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI know there's a neverending list of dependencies for different modules out there, however it'd be good to ship a few basic dependencies for common modules, particularly that are required for core modules. \r\n\r\nIn my case I need netaddr for any of the IP manipulation filters, but there are probably others i haven't hit yet. \r\n\r\nAn easy fix, but i'll leave it as a ticket for now as i'm not sure what you want in yum vs pip. \r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/414", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/414/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/414/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/414/events", "html_url": "https://github.com/ansible/ansible-runner/issues/414", "id": 567556286, "node_id": "MDU6SXNzdWU1Njc1NTYyODY=", "number": 414, "title": "Debian buster release", "user": {"login": "ezr-ondrej", "id": 2884324, "node_id": "MDQ6VXNlcjI4ODQzMjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/2884324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezr-ondrej", "html_url": "https://github.com/ezr-ondrej", "followers_url": "https://api.github.com/users/ezr-ondrej/followers", "following_url": "https://api.github.com/users/ezr-ondrej/following{/other_user}", "gists_url": "https://api.github.com/users/ezr-ondrej/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezr-ondrej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezr-ondrej/subscriptions", "organizations_url": "https://api.github.com/users/ezr-ondrej/orgs", "repos_url": "https://api.github.com/users/ezr-ondrej/repos", "events_url": "https://api.github.com/users/ezr-ondrej/events{/privacy}", "received_events_url": "https://api.github.com/users/ezr-ondrej/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-19T13:05:16Z", "updated_at": "2020-03-02T19:16:17Z", "closed_at": "2020-03-02T19:16:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Would it be possible to release the runner for Debian `buster`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/398", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/398/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/398/events", "html_url": "https://github.com/ansible/ansible-runner/issues/398", "id": 533600830, "node_id": "MDU6SXNzdWU1MzM2MDA4MzA=", "number": 398, "title": "How to supply an ansible.cfg to ansible runner?", "user": {"login": "mjcramer", "id": 3793335, "node_id": "MDQ6VXNlcjM3OTMzMzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3793335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjcramer", "html_url": "https://github.com/mjcramer", "followers_url": "https://api.github.com/users/mjcramer/followers", "following_url": "https://api.github.com/users/mjcramer/following{/other_user}", "gists_url": "https://api.github.com/users/mjcramer/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjcramer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjcramer/subscriptions", "organizations_url": "https://api.github.com/users/mjcramer/orgs", "repos_url": "https://api.github.com/users/mjcramer/repos", "events_url": "https://api.github.com/users/mjcramer/events{/privacy}", "received_events_url": "https://api.github.com/users/mjcramer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-05T21:10:01Z", "updated_at": "2019-12-11T19:30:45Z", "closed_at": "2019-12-11T19:30:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to control some things like stdout plugins and other ansible playbook configurations but the documentation does not mention any way to provide an ansible.cfg to the invoked process. It definitely does not pick up the one I have in the <private_data_dir> and when I add \r\n```\r\nANSIBLE_CONFIG=./ansible.cfg\r\n``` \r\nto `<private_data_dir>/env/envvars` it has no effect. Is there a documented way to do this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/397", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/397/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/397/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/397/events", "html_url": "https://github.com/ansible/ansible-runner/issues/397", "id": 533599497, "node_id": "MDU6SXNzdWU1MzM1OTk0OTc=", "number": 397, "title": "Unable to supply vault password via python interface", "user": {"login": "mjcramer", "id": 3793335, "node_id": "MDQ6VXNlcjM3OTMzMzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3793335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjcramer", "html_url": "https://github.com/mjcramer", "followers_url": "https://api.github.com/users/mjcramer/followers", "following_url": "https://api.github.com/users/mjcramer/following{/other_user}", "gists_url": "https://api.github.com/users/mjcramer/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjcramer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjcramer/subscriptions", "organizations_url": "https://api.github.com/users/mjcramer/orgs", "repos_url": "https://api.github.com/users/mjcramer/repos", "events_url": "https://api.github.com/users/mjcramer/events{/privacy}", "received_events_url": "https://api.github.com/users/mjcramer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-05T21:07:09Z", "updated_at": "2019-12-11T19:35:24Z", "closed_at": "2019-12-11T19:32:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am writing a wrapper script to simplify ansible playbook execution for developers who need to do quick deployments. I thought I would use ansible-runner as it purports to be stable interface to ansible execution, however, I'm having some difficulties with some seemingly very simple things. First off, I have retrofitted my project to conform to the [Runner Input Directory Hierarchy](https://ansible-runner.readthedocs.io/en/latest/intro.html#inputdir). The location of this directory is what I pass as the `private_data_dir` to ansible runner and am trying to run a playbook that would normally look like this:\r\n\r\n```bash\r\nansible-playbook project/monkify.yml -e '{\"environment\":\"dev\"}' --ask-vault-pass -i inventory/hosts\r\n```\r\n\r\nThis invocation works; it prompts me for my vault password (included from said playbook) and happily executes its tasks. Now, when I programmatically invoke this from my Python wrapper, which looks like this:\r\n\r\n```python\r\nmy_vars = {\r\n  'environment': args.environment             ### args.environment = dev ###\r\n}\r\nr = ansible_runner.run(\r\n        private_data_dir=f\"{dirname(__file__)}\", \r\n        playbook=f\"{args.playbook}.yml\",      ### args.playbook = monkify.yml\r\n        extravars=my_vars\r\n    )\r\n```\r\n\r\nand in my <private_data_dir>/env/cmdline I have\r\n```\r\n--ask-vault-pass\r\n```\r\n\r\nThe process just hangs, presumably waiting for input. Nothing I type has any effect I have to ctl-c myself outta there. Any insight?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/395", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/395/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/395/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/395/events", "html_url": "https://github.com/ansible/ansible-runner/issues/395", "id": 531021378, "node_id": "MDU6SXNzdWU1MzEwMjEzNzg=", "number": 395, "title": "Would it be possible to have this repo default to devel branch ?", "user": {"login": "Spredzy", "id": 1191411, "node_id": "MDQ6VXNlcjExOTE0MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1191411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Spredzy", "html_url": "https://github.com/Spredzy", "followers_url": "https://api.github.com/users/Spredzy/followers", "following_url": "https://api.github.com/users/Spredzy/following{/other_user}", "gists_url": "https://api.github.com/users/Spredzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Spredzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Spredzy/subscriptions", "organizations_url": "https://api.github.com/users/Spredzy/orgs", "repos_url": "https://api.github.com/users/Spredzy/repos", "events_url": "https://api.github.com/users/Spredzy/events{/privacy}", "received_events_url": "https://api.github.com/users/Spredzy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-02T10:07:41Z", "updated_at": "2020-02-04T16:02:23Z", "closed_at": "2020-02-04T16:02:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Many Ansible's upstream projects have their development happening against the `devel` branch.\r\n\r\nNamely:\r\n\r\n  * `ansible/ansible`\r\n  * `ansible/awx`\r\n  * `ansible/galaxy`\r\n\r\nWould it be possible for `ansible/ansible-runner` to do the same thing so we are consistent across all the upstream projects ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/393", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/393/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/393/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/393/events", "html_url": "https://github.com/ansible/ansible-runner/issues/393", "id": 529252148, "node_id": "MDU6SXNzdWU1MjkyNTIxNDg=", "number": 393, "title": "Debian signing key?", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-27T10:23:01Z", "updated_at": "2019-12-11T21:02:59Z", "closed_at": "2019-12-11T19:34:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "From `#ansible-runner`\r\n> is the repo for debian based distribs at releases.ansible.com/ansible-runner is still valid ? the public key is not verified on my part\r\n> ive tried with the keys from releases.ansible.com/keys but that did not work either\r\n\r\nDoesn't appear to be mentioned on https://ansible-runner.readthedocs.io/en/latest/install.html either", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/390", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/390/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/390/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/390/events", "html_url": "https://github.com/ansible/ansible-runner/issues/390", "id": 521405929, "node_id": "MDU6SXNzdWU1MjE0MDU5Mjk=", "number": 390, "title": "sshpass is missing from Docker image", "user": {"login": "drubitsa", "id": 33630175, "node_id": "MDQ6VXNlcjMzNjMwMTc1", "avatar_url": "https://avatars3.githubusercontent.com/u/33630175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drubitsa", "html_url": "https://github.com/drubitsa", "followers_url": "https://api.github.com/users/drubitsa/followers", "following_url": "https://api.github.com/users/drubitsa/following{/other_user}", "gists_url": "https://api.github.com/users/drubitsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/drubitsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drubitsa/subscriptions", "organizations_url": "https://api.github.com/users/drubitsa/orgs", "repos_url": "https://api.github.com/users/drubitsa/repos", "events_url": "https://api.github.com/users/drubitsa/events{/privacy}", "received_events_url": "https://api.github.com/users/drubitsa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-12T08:42:24Z", "updated_at": "2019-11-18T14:25:46Z", "closed_at": "2019-11-18T14:25:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since version 1.4, sshpass is missing from the ansible-runner Docker image.\r\nIt would be helpful to include it by default.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/374", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/374/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/374/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/374/events", "html_url": "https://github.com/ansible/ansible-runner/issues/374", "id": 510156228, "node_id": "MDU6SXNzdWU1MTAxNTYyMjg=", "number": 374, "title": "ansible_runner cleaning up missing file... Device busy error continuously.", "user": {"login": "6sossomons", "id": 20480468, "node_id": "MDQ6VXNlcjIwNDgwNDY4", "avatar_url": "https://avatars2.githubusercontent.com/u/20480468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/6sossomons", "html_url": "https://github.com/6sossomons", "followers_url": "https://api.github.com/users/6sossomons/followers", "following_url": "https://api.github.com/users/6sossomons/following{/other_user}", "gists_url": "https://api.github.com/users/6sossomons/gists{/gist_id}", "starred_url": "https://api.github.com/users/6sossomons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/6sossomons/subscriptions", "organizations_url": "https://api.github.com/users/6sossomons/orgs", "repos_url": "https://api.github.com/users/6sossomons/repos", "events_url": "https://api.github.com/users/6sossomons/events{/privacy}", "received_events_url": "https://api.github.com/users/6sossomons/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-10-21T17:46:13Z", "updated_at": "2019-10-25T16:06:43Z", "closed_at": "2019-10-25T16:06:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I run the AWX-RPM version and when we upgraded to the newest code, which includes this newest release of ansible_runner/runner.py, we are continuing to see workflows that DID run without issue, to fail at the first playbook run (inventory syncs work, scm syncs work), but something about the playbook runs fail straight out.\r\n\r\nThe code starts at 253, which is the new section for cleaning up temp directories.  I've tweaked time-outs, retries, everything except code rolling...\r\n\r\nAll failed.\r\n\r\nMost of the time, I have seen that directory as being missing at the error point, so not sure if it is deleting or can't figure out that it needs to delete it AFTER it has gotten back out of it (as AWX runs inside the /tmp/* folder while running) and as such gives itself the Device busy error.\r\n\r\nI rolled my code back to https://github.com/ansible/ansible-runner/blob/68d09d87b7941a4c5cd6efd03b344b1a916afa9a/ansible_runner/runner.py which is the commit prior to the clean-up code add, which is allowing us to work again.\r\n\r\nAny thoughts/input on something else I could have been missing with the newest code?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/372", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/372/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/372/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/372/events", "html_url": "https://github.com/ansible/ansible-runner/issues/372", "id": 510075010, "node_id": "MDU6SXNzdWU1MTAwNzUwMTA=", "number": 372, "title": "'ssh_key' invalid argument for ansible_runner.interface.run()", "user": {"login": "amerck", "id": 37349674, "node_id": "MDQ6VXNlcjM3MzQ5Njc0", "avatar_url": "https://avatars1.githubusercontent.com/u/37349674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amerck", "html_url": "https://github.com/amerck", "followers_url": "https://api.github.com/users/amerck/followers", "following_url": "https://api.github.com/users/amerck/following{/other_user}", "gists_url": "https://api.github.com/users/amerck/gists{/gist_id}", "starred_url": "https://api.github.com/users/amerck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amerck/subscriptions", "organizations_url": "https://api.github.com/users/amerck/orgs", "repos_url": "https://api.github.com/users/amerck/repos", "events_url": "https://api.github.com/users/amerck/events{/privacy}", "received_events_url": "https://api.github.com/users/amerck/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-21T15:56:54Z", "updated_at": "2019-10-22T17:05:58Z", "closed_at": "2019-10-22T17:05:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When attempting to run ansible_runner.interface.run() with the ssh_key parameter as described below using ansible-runner version 1.4.2: \r\n\r\nhttps://github.com/ansible/ansible-runner/blob/5410dcec30a8a49547f6307b3e1142156c9dbbd2/ansible_runner/interface.py#L103\r\n\r\nI get the following error message:\r\n\r\n```\r\n    File \"/usr/local/lib/python2.7/dist-packages/ansible_runner/interface.py\", line 64, in init_runner\r\n      rc = RunnerConfig(**kwargs)\r\n TypeError: __init__() got an unexpected keyword argument 'ssh_key'\r\n```\r\n\r\nThis parameter is also defined in the ansible-runner documentation here:\r\n\r\nhttps://ansible-runner.readthedocs.io/en/latest/source/ansible_runner.html#ansible_runner.interface.run\r\n\r\nAfter digging into the RunnerConfig class, it looks like ssh_key is not a valid argument.\r\n\r\nhttps://github.com/ansible/ansible-runner/blob/5410dcec30a8a49547f6307b3e1142156c9dbbd2/ansible_runner/runner_config.py#L74-L86\r\n\r\nIt would be great to be able to programmatically assign SSH keys via this parameter. Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/370", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/370/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/370/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/370/events", "html_url": "https://github.com/ansible/ansible-runner/issues/370", "id": 507021968, "node_id": "MDU6SXNzdWU1MDcwMjE5Njg=", "number": 370, "title": "dockerhub not updated with latest release", "user": {"login": "resmo", "id": 23809, "node_id": "MDQ6VXNlcjIzODA5", "avatar_url": "https://avatars1.githubusercontent.com/u/23809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/resmo", "html_url": "https://github.com/resmo", "followers_url": "https://api.github.com/users/resmo/followers", "following_url": "https://api.github.com/users/resmo/following{/other_user}", "gists_url": "https://api.github.com/users/resmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/resmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/resmo/subscriptions", "organizations_url": "https://api.github.com/users/resmo/orgs", "repos_url": "https://api.github.com/users/resmo/repos", "events_url": "https://api.github.com/users/resmo/events{/privacy}", "received_events_url": "https://api.github.com/users/resmo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-15T05:53:48Z", "updated_at": "2019-10-17T18:05:35Z", "closed_at": "2019-10-17T18:05:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Dockerhub https://hub.docker.com/r/ansible/ansible-runner/tags is still showing the latest release to be 1.4.0 but Github has 1.4.1, 1.4.2. It seems the build chain is not working anymore.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/369", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/369/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/369/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/369/events", "html_url": "https://github.com/ansible/ansible-runner/issues/369", "id": 506987920, "node_id": "MDU6SXNzdWU1MDY5ODc5MjA=", "number": 369, "title": "Does ansible_runner's playbook support string type?", "user": {"login": "yanyixing", "id": 12455492, "node_id": "MDQ6VXNlcjEyNDU1NDky", "avatar_url": "https://avatars0.githubusercontent.com/u/12455492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yanyixing", "html_url": "https://github.com/yanyixing", "followers_url": "https://api.github.com/users/yanyixing/followers", "following_url": "https://api.github.com/users/yanyixing/following{/other_user}", "gists_url": "https://api.github.com/users/yanyixing/gists{/gist_id}", "starred_url": "https://api.github.com/users/yanyixing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yanyixing/subscriptions", "organizations_url": "https://api.github.com/users/yanyixing/orgs", "repos_url": "https://api.github.com/users/yanyixing/repos", "events_url": "https://api.github.com/users/yanyixing/events{/privacy}", "received_events_url": "https://api.github.com/users/yanyixing/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-15T03:51:37Z", "updated_at": "2020-07-22T07:00:49Z", "closed_at": "2019-10-15T15:33:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n_inventory = \"\"\"\r\n[hello]\r\nroot@172.16.143.181\r\n\"\"\"\r\n\r\n\r\n_playbook = \"\"\"\r\n---\r\n- hosts: hello\r\n  gather_facts: false\r\n  tasks:\r\n  - name: \"hello world\"\r\n    command: \"echo 'hello world!'\"\r\n\"\"\"\r\n\r\nr = ansible_runner.run(inventory=_inventory, playbook=_playbook)\r\n```\r\n\r\nDose playbook support string type and playbook's content like above code\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/367", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/367/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/367/events", "html_url": "https://github.com/ansible/ansible-runner/issues/367", "id": 505833331, "node_id": "MDU6SXNzdWU1MDU4MzMzMzE=", "number": 367, "title": "Runner fails to load env/cmdline that includes Unicode characters in Python2", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "jbradberry", "id": 685957, "node_id": "MDQ6VXNlcjY4NTk1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/685957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbradberry", "html_url": "https://github.com/jbradberry", "followers_url": "https://api.github.com/users/jbradberry/followers", "following_url": "https://api.github.com/users/jbradberry/following{/other_user}", "gists_url": "https://api.github.com/users/jbradberry/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbradberry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbradberry/subscriptions", "organizations_url": "https://api.github.com/users/jbradberry/orgs", "repos_url": "https://api.github.com/users/jbradberry/repos", "events_url": "https://api.github.com/users/jbradberry/events{/privacy}", "received_events_url": "https://api.github.com/users/jbradberry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jbradberry", "id": 685957, "node_id": "MDQ6VXNlcjY4NTk1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/685957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbradberry", "html_url": "https://github.com/jbradberry", "followers_url": "https://api.github.com/users/jbradberry/followers", "following_url": "https://api.github.com/users/jbradberry/following{/other_user}", "gists_url": "https://api.github.com/users/jbradberry/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbradberry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbradberry/subscriptions", "organizations_url": "https://api.github.com/users/jbradberry/orgs", "repos_url": "https://api.github.com/users/jbradberry/repos", "events_url": "https://api.github.com/users/jbradberry/events{/privacy}", "received_events_url": "https://api.github.com/users/jbradberry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-11T12:49:51Z", "updated_at": "2019-10-14T18:14:04Z", "closed_at": "2019-10-14T18:14:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Clone the default demo project and edit `env/cmdline`:\r\n\r\n```shell\r\n~/dev/ansible-runner/demo cat env/cmdline\r\n--limit I\u00f1t\u00ebrn\u00e2ti\u00f4n\u00e0liz\u00e6ti\u00f8n\r\n~/dev/ansible-runner/demo ansible-runner run . -m shell -a 'pwd' --hosts localhost\r\nTraceback (most recent call last):\r\n  File \"/home/ryanpetrello/dev/ansible-runner/ansible_runner/__main__.py\", line 594, in main\r\n    res = run(**run_options)\r\n  File \"/home/ryanpetrello/dev/ansible-runner/ansible_runner/interface.py\", line 177, in run\r\n    r = init_runner(**kwargs)\r\n  File \"/home/ryanpetrello/dev/ansible-runner/ansible_runner/interface.py\", line 65, in init_runner\r\n    rc.prepare()\r\n  File \"/home/ryanpetrello/dev/ansible-runner/ansible_runner/runner_config.py\", line 173, in prepare\r\n    self.prepare_command()\r\n  File \"/home/ryanpetrello/dev/ansible-runner/ansible_runner/runner_config.py\", line 342, in prepare_command\r\n    self.command = self.generate_ansible_command()\r\n  File \"/home/ryanpetrello/dev/ansible-runner/ansible_runner/runner_config.py\", line 367, in generate_ansible_command\r\n    args = shlex.split(cmdline_args)\r\n  File \"/usr/lib64/python2.7/shlex.py\", line 275, in split\r\n    lex = shlex(s, posix=posix)\r\n  File \"/usr/lib64/python2.7/shlex.py\", line 25, in __init__\r\n    instream = StringIO(instream)\r\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xf1' in position 9: ordinal not in range(128)\r\n```\r\n\r\nThis only happens in Python2, not Python3.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/366", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/366/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/366/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/366/events", "html_url": "https://github.com/ansible/ansible-runner/issues/366", "id": 505225030, "node_id": "MDU6SXNzdWU1MDUyMjUwMzA=", "number": 366, "title": "Configurable Timeout?", "user": {"login": "MrMEEE", "id": 768031, "node_id": "MDQ6VXNlcjc2ODAzMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/768031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MrMEEE", "html_url": "https://github.com/MrMEEE", "followers_url": "https://api.github.com/users/MrMEEE/followers", "following_url": "https://api.github.com/users/MrMEEE/following{/other_user}", "gists_url": "https://api.github.com/users/MrMEEE/gists{/gist_id}", "starred_url": "https://api.github.com/users/MrMEEE/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MrMEEE/subscriptions", "organizations_url": "https://api.github.com/users/MrMEEE/orgs", "repos_url": "https://api.github.com/users/MrMEEE/repos", "events_url": "https://api.github.com/users/MrMEEE/events{/privacy}", "received_events_url": "https://api.github.com/users/MrMEEE/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-10T12:03:24Z", "updated_at": "2019-10-22T17:00:19Z", "closed_at": "2019-10-22T17:00:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI'm the maintainer of the AWX-RPM project, and we are seeing issues where the cleanup of ansible_runner doesn't work.. \r\n\r\nAs a user mentions here: https://github.com/MrMEEE/awx-build/issues/163, this can be fixed by extending the wait in the _delete function..\r\n\r\nIs this something that we could change to a configurable option?\r\n\r\nRegards\r\n\r\nMartin", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/356", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/356/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/356/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/356/events", "html_url": "https://github.com/ansible/ansible-runner/issues/356", "id": 496342785, "node_id": "MDU6SXNzdWU0OTYzNDI3ODU=", "number": 356, "title": "Supporting resource profiling (perf stats) w/ ad hoc commands", "user": {"login": "jladdjr", "id": 4440360, "node_id": "MDQ6VXNlcjQ0NDAzNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4440360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jladdjr", "html_url": "https://github.com/jladdjr", "followers_url": "https://api.github.com/users/jladdjr/followers", "following_url": "https://api.github.com/users/jladdjr/following{/other_user}", "gists_url": "https://api.github.com/users/jladdjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jladdjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jladdjr/subscriptions", "organizations_url": "https://api.github.com/users/jladdjr/orgs", "repos_url": "https://api.github.com/users/jladdjr/repos", "events_url": "https://api.github.com/users/jladdjr/events{/privacy}", "received_events_url": "https://api.github.com/users/jladdjr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-20T13:07:31Z", "updated_at": "2019-10-17T18:06:49Z", "closed_at": "2019-10-17T18:06:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Requested here:\r\nhttps://github.com/ansible/ansible-runner/pull/346#discussion_r326607874", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/354", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/354/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/354/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/354/events", "html_url": "https://github.com/ansible/ansible-runner/issues/354", "id": 495826521, "node_id": "MDU6SXNzdWU0OTU4MjY1MjE=", "number": 354, "title": "Executing A Playbook That Calls The Vaulted Variable File Shows The Value Of Encrypted String In Job Output", "user": {"login": "Ompragash", "id": 21008429, "node_id": "MDQ6VXNlcjIxMDA4NDI5", "avatar_url": "https://avatars3.githubusercontent.com/u/21008429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ompragash", "html_url": "https://github.com/Ompragash", "followers_url": "https://api.github.com/users/Ompragash/followers", "following_url": "https://api.github.com/users/Ompragash/following{/other_user}", "gists_url": "https://api.github.com/users/Ompragash/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ompragash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ompragash/subscriptions", "organizations_url": "https://api.github.com/users/Ompragash/orgs", "repos_url": "https://api.github.com/users/Ompragash/repos", "events_url": "https://api.github.com/users/Ompragash/events{/privacy}", "received_events_url": "https://api.github.com/users/Ompragash/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-19T14:13:03Z", "updated_at": "2019-09-19T18:06:56Z", "closed_at": "2019-09-19T18:06:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Summary:\r\n\r\nExecuting a playbook that calls the vaulted variable file shows the value of encrypted string in the Job output.\r\n\r\n## Enviroment:\r\n\r\nAnsible Tower: v3.5.2\r\nAnsible Engine: v2.8.4\r\n\r\n## Steps to Reproduce\r\n\r\n1. Encrypt the value `bar` and store it in a variable file.\r\n**Note**: Vault password is **ansible**\r\n\r\n~~~\r\ncat string.yml \r\n---\r\nfoo: !vault |\r\n          $ANSIBLE_VAULT;1.1;AES256\r\n          31316130633062343736316132653837386161353765663836656635626333303133356432363262\r\n          3463663261316238336136313030653439353138636236310a346366313637653063326237626239\r\n          36646461323330363137363530383234393737383065343364623333363337333132633464373463\r\n          3564613266623630360a656166353333343934653136343234636264356366623334383736653639\r\n          3564\r\n~~~\r\n\r\n2. Call the above string.yml file inside the playbook by using `include_vars` module\r\n\r\n~~~\r\ncat example.yml \r\n---\r\n- hosts: all \r\n  tasks:\r\n  - include_vars: string.yml\r\n\r\n  - debug:\r\n      msg: \"{{ foo }}\"\r\n~~~\r\n\r\n3. Create a Credential with type vault and store the vault password and then create a Job Template in Tower that calls the above example.yml playbook.\r\n\r\n## Expected Result:\r\n\r\nJob executes successfully without showing the encrypted value\r\n\r\n## Actual Result:\r\n\r\nJob executes successfully but shows the encrypted value\r\n\r\n~~~\r\nTASK [include_vars] ************************************************************\r\ntask path: /var/lib/awx/projects/_39__ansibletower/example.yml:5\r\nTrying secret <ansible.parsing.vault.PromptVaultSecret object at 0x7fb5cb96b790> for vault_id=default\r\n\r\nTrying secret <ansible.parsing.vault.PromptVaultSecret object at 0x7fb5cb96b790> for vault_id=default\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin\r\n(<ansible.plugins.callback.awx_display.CallbackModule object at\r\n0x7fb5cd9afed0>): u'bar' is not JSON serializable\r\n\r\nCallback Exception: \r\n  File \"/usr/lib/python2.7/site-packages/ansible/executor/task_queue_manager.py\", line 333, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/var/lib/awx/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/module.py\", line 362, in v2_runner_on_ok\r\n    with self.capture_event_data('runner_on_ok', **event_data):\r\n   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n   File \"/var/lib/awx/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/module.py\", line 94, in capture_event_data\r\n    event_context.dump_begin(sys.stdout)\r\n   File \"/var/lib/awx/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/events.py\", line 171, in dump_begin\r\n    self.cache.set(\":1:ev-{}\".format(begin_dict['uuid']), begin_dict)\r\n   File \"/var/lib/awx/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/events.py\", line 51, in set\r\n    partial_data = json.dumps(value)\r\n   File \"/usr/lib64/python2.7/json/__init__.py\", line 243, in dumps\r\n    return _default_encoder.encode(obj)\r\n   File \"/usr/lib64/python2.7/json/encoder.py\", line 207, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n   File \"/usr/lib64/python2.7/json/encoder.py\", line 270, in iterencode\r\n    return _iterencode(o, 0)\r\n   File \"/usr/lib64/python2.7/json/encoder.py\", line 184, in default\r\n    raise TypeError(repr(o) + \" is not JSON serializable\")\r\n~~~\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/350", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/350/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/350/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/350/events", "html_url": "https://github.com/ansible/ansible-runner/issues/350", "id": 490317354, "node_id": "MDU6SXNzdWU0OTAzMTczNTQ=", "number": 350, "title": "r.stats is always None and r.events is always empty", "user": {"login": "jlariza", "id": 16421045, "node_id": "MDQ6VXNlcjE2NDIxMDQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/16421045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlariza", "html_url": "https://github.com/jlariza", "followers_url": "https://api.github.com/users/jlariza/followers", "following_url": "https://api.github.com/users/jlariza/following{/other_user}", "gists_url": "https://api.github.com/users/jlariza/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlariza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlariza/subscriptions", "organizations_url": "https://api.github.com/users/jlariza/orgs", "repos_url": "https://api.github.com/users/jlariza/repos", "events_url": "https://api.github.com/users/jlariza/events{/privacy}", "received_events_url": "https://api.github.com/users/jlariza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-06T13:06:12Z", "updated_at": "2019-09-06T14:19:11Z", "closed_at": "2019-09-06T14:19:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Good day,\r\n\r\nI am using ansible runner to run an ansible playbook. It works fine. However, once it finishes I try to obtain the `Play Recap` information but I have not been able to do so. What am I missing? How may I obtain the status of the task once it has finish?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/338", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/338/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/338/events", "html_url": "https://github.com/ansible/ansible-runner/issues/338", "id": 484571807, "node_id": "MDU6SXNzdWU0ODQ1NzE4MDc=", "number": 338, "title": "Publish ansible/ansible-runner image v1.3.5", "user": {"login": "drubitsa", "id": 33630175, "node_id": "MDQ6VXNlcjMzNjMwMTc1", "avatar_url": "https://avatars3.githubusercontent.com/u/33630175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drubitsa", "html_url": "https://github.com/drubitsa", "followers_url": "https://api.github.com/users/drubitsa/followers", "following_url": "https://api.github.com/users/drubitsa/following{/other_user}", "gists_url": "https://api.github.com/users/drubitsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/drubitsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drubitsa/subscriptions", "organizations_url": "https://api.github.com/users/drubitsa/orgs", "repos_url": "https://api.github.com/users/drubitsa/repos", "events_url": "https://api.github.com/users/drubitsa/events{/privacy}", "received_events_url": "https://api.github.com/users/drubitsa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-23T14:52:33Z", "updated_at": "2019-09-04T21:16:29Z", "closed_at": "2019-08-23T17:06:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't find related Docker image tag for version 1.3.5 on hub.docker.com.\r\nIt would be useful, with Ansible 2.8.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/332", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/332/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/332/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/332/events", "html_url": "https://github.com/ansible/ansible-runner/issues/332", "id": 480972924, "node_id": "MDU6SXNzdWU0ODA5NzI5MjQ=", "number": 332, "title": "Errors thrown serializing datetime data", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-15T03:00:25Z", "updated_at": "2019-08-22T14:00:36Z", "closed_at": "2019-08-22T14:00:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Similar to #330 and influences its solution. Errors from callback module in playbooks. Playbook:\r\n\r\nhttps://github.com/AlanCoding/utility-playbooks/blob/master/set_datetime_var.yml\r\n\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  gather_facts: no\r\n  connection: local\r\n  tasks:\r\n  - set_fact:\r\n      testdata: 2017-03-07T10:20:49Z\r\n\r\n  - debug: msg=\"My password value is {{ testdata }}\"\r\n```\r\n\r\noutput\r\n\r\n```\r\nansible-playbook 2.9.0.dev0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/var/lib/awx/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 2.7.5 (default, Jun 20 2019, 20:27:34) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nVault password: \r\nsetting up inventory plugins\r\nhost_list declined parsing /tmp/awx_343_3tbtis_r/tmpp4k945xo as it did not pass its verify_file() method\r\nSet default localhost to localhost\r\nParsed /tmp/awx_343_3tbtis_r/tmpp4k945xo inventory source with script plugin\r\nLoading callback plugin awx_display of type stdout, v2.0 from /venv/awx/lib/python3.6/site-packages/ansible_runner/callbacks/awx_display.py\r\n\r\nPLAYBOOK: set_datetime_var.yml *************************************************\r\nPositional arguments: set_datetime_var.yml\r\nremote_user: root\r\nbecome_method: sudo\r\ninventory: (u'/tmp/awx_343_3tbtis_r/tmpp4k945xo',)\r\nforks: 5\r\ntags: (u'all',)\r\nextra_vars: (u'@/tmp/awx_343_3tbtis_r/env/extravars',)\r\nverbosity: 5\r\nconnection: smart\r\nask_vault_pass: True\r\ntimeout: 10\r\n1 plays in set_datetime_var.yml\r\n\r\nPLAY [localhost] ***************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [set_fact] ****************************************************************\r\ntask path: /tmp/awx_343_3tbtis_r/project/set_datetime_var.yml:6\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin\r\n(<ansible.plugins.callback.awx_display.CallbackModule object at\r\n0x7f539548f710>): datetime.datetime(2017, 3, 7, 10, 20, 49) is not JSON\r\nserializable\r\n\r\nCallback Exception: \r\n  File \"/usr/lib/python2.7/site-packages/ansible/executor/task_queue_manager.py\", line 323, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/module.py\", line 362, in v2_runner_on_ok\r\n    with self.capture_event_data('runner_on_ok', **event_data):\r\n   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n   File \"/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/module.py\", line 94, in capture_event_data\r\n    event_context.dump_begin(sys.stdout)\r\n   File \"/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/events.py\", line 171, in dump_begin\r\n    self.cache.set(\":1:ev-{}\".format(begin_dict['uuid']), begin_dict)\r\n   File \"/venv/awx/lib/python3.6/site-packages/ansible_runner/display_callback/events.py\", line 51, in set\r\n    partial_data = json.dumps(value)\r\n   File \"/usr/lib64/python2.7/json/__init__.py\", line 243, in dumps\r\n    return _default_encoder.encode(obj)\r\n   File \"/usr/lib64/python2.7/json/encoder.py\", line 207, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n   File \"/usr/lib64/python2.7/json/encoder.py\", line 270, in iterencode\r\n    return _iterencode(o, 0)\r\n   File \"/usr/lib64/python2.7/json/encoder.py\", line 184, in default\r\n    raise TypeError(repr(o) + \" is not JSON serializable\")\r\n\r\n\r\nTASK [debug] *******************************************************************\r\ntask path: /tmp/awx_343_3tbtis_r/project/set_datetime_var.yml:9\r\nok: [localhost] => {\r\n    \"msg\": \"My password value is 2017-03-07 10:20:49\"\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0  \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/330", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/330/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/330/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/330/events", "html_url": "https://github.com/ansible/ansible-runner/issues/330", "id": 480687043, "node_id": "MDU6SXNzdWU0ODA2ODcwNDM=", "number": 330, "title": "Errors thrown serializing vault data", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-14T13:43:00Z", "updated_at": "2019-08-22T14:00:27Z", "closed_at": "2019-08-22T14:00:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://github.com/ansible/awx/issues/4478\r\n\r\nreproduced locally with runner\r\n\r\n```\r\ntree alan/\r\nalan/\r\n\u251c\u2500\u2500 env\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cmdline\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 extravars\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 passwords\r\n\u251c\u2500\u2500 inventory\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hosts\r\n\u2514\u2500\u2500 project\r\n    \u2514\u2500\u2500 test.yml\r\n\r\n3 directories, 5 files\r\n```\r\n\r\n```\r\n(runner) arominge-OSX:ansible-runner alancoding$ cat alan/env/cmdline \r\n--ask-vault-pass\r\n(runner) arominge-OSX:ansible-runner alancoding$ cat alan/env/passwords \r\n---\r\n\"password:\\\\s*?$\": \"password\"\r\n(runner) arominge-OSX:ansible-runner alancoding$ cat alan/project/test.yml \r\n# this secret was produced by the command\r\n# ansible-vault encrypt_string --ask-vault-pass \"hell workld111\"\r\n# given password is \"password\"\r\n# there is no id for this vault secret\r\n#\r\n# run this locally:\r\n# ansible-playbook -i localhost, set_vault_var.yml --ask-vault-pass --connection=local\r\n- hosts: localhost\r\n  gather_facts: no\r\n  connection: local\r\n  tasks:\r\n  - set_fact:\r\n      password: !vault |\r\n          $ANSIBLE_VAULT;1.1;AES256\r\n          34623238666437386233333863363534313333363763376335343464373337376665626433376662\r\n          6431326264333965383565386132656461663131373261630a666538323133656564306634653137\r\n          30616365366466353332313238626634646235376231326538346635646437306638396162613762\r\n          3638336436633037330a393332306632646236626231316134366431343239303762376631653837\r\n          3362\r\n\r\n  - debug: msg=\"My password value is {{ password }}\"\r\n```\r\n\r\n```\r\nansible-runner --playbook test.yml run alan\r\nVault password: \r\n\r\nPLAY [localhost] ***************************************************************\r\n\r\nTASK [set_fact] ****************************************************************\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin\r\n(<ansible.plugins.callback.awx_display.CallbackModule object at 0x1093890b8>):\r\nObject of type 'AnsibleVaultEncryptedUnicode' is not JSON serializable\r\n\r\n\r\nTASK [debug] *******************************************************************\r\nok: [localhost] => {\r\n    \"msg\": \"My password value is hell workld111\"\r\n}\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/329", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/329/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/329/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/329/events", "html_url": "https://github.com/ansible/ansible-runner/issues/329", "id": 478296777, "node_id": "MDU6SXNzdWU0NzgyOTY3Nzc=", "number": 329, "title": "Importing yaml files in ansible-playbook", "user": {"login": "pranavbarve125", "id": 35389767, "node_id": "MDQ6VXNlcjM1Mzg5NzY3", "avatar_url": "https://avatars1.githubusercontent.com/u/35389767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pranavbarve125", "html_url": "https://github.com/pranavbarve125", "followers_url": "https://api.github.com/users/pranavbarve125/followers", "following_url": "https://api.github.com/users/pranavbarve125/following{/other_user}", "gists_url": "https://api.github.com/users/pranavbarve125/gists{/gist_id}", "starred_url": "https://api.github.com/users/pranavbarve125/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pranavbarve125/subscriptions", "organizations_url": "https://api.github.com/users/pranavbarve125/orgs", "repos_url": "https://api.github.com/users/pranavbarve125/repos", "events_url": "https://api.github.com/users/pranavbarve125/events{/privacy}", "received_events_url": "https://api.github.com/users/pranavbarve125/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-08T07:23:21Z", "updated_at": "2019-08-19T13:18:17Z", "closed_at": "2019-08-19T13:18:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running ansilbe-playbooks using the ansible-runner in python.\r\n\r\nI have a configuration yaml file. I want my playbooks to import that configuration file in order to use the variables from that file.\r\n\r\nI am using jinja2 templating to use the variables for that yaml files.\r\n\r\nIs there any way in the ansible_runner module to import a yaml config file?\r\n\r\nIs there any way I can do this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/326", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/326/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/326/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/326/events", "html_url": "https://github.com/ansible/ansible-runner/issues/326", "id": 466009849, "node_id": "MDU6SXNzdWU0NjYwMDk4NDk=", "number": 326, "title": "MAX_EVENT_RES environment variable truncating event['res'] return data", "user": {"login": "rtproven", "id": 45498738, "node_id": "MDQ6VXNlcjQ1NDk4NzM4", "avatar_url": "https://avatars0.githubusercontent.com/u/45498738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rtproven", "html_url": "https://github.com/rtproven", "followers_url": "https://api.github.com/users/rtproven/followers", "following_url": "https://api.github.com/users/rtproven/following{/other_user}", "gists_url": "https://api.github.com/users/rtproven/gists{/gist_id}", "starred_url": "https://api.github.com/users/rtproven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rtproven/subscriptions", "organizations_url": "https://api.github.com/users/rtproven/orgs", "repos_url": "https://api.github.com/users/rtproven/repos", "events_url": "https://api.github.com/users/rtproven/events{/privacy}", "received_events_url": "https://api.github.com/users/rtproven/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-09T22:19:51Z", "updated_at": "2019-07-10T16:20:08Z", "closed_at": "2019-07-10T02:24:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\n\r\nI was wondering if someone could explain the need for the environment variable **MAX_EVENT_RES** environment variable found in the _display_callback/events.py_ module and possibly offer any guidance to setting it beyond the default value of 700,000 bytes?\r\n\r\nThanks,\r\nRoland Provencher", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/325", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/325/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/325/events", "html_url": "https://github.com/ansible/ansible-runner/issues/325", "id": 464750806, "node_id": "MDU6SXNzdWU0NjQ3NTA4MDY=", "number": 325, "title": "--hosts command line parameter doesn't do anything", "user": {"login": "carbonin", "id": 12697904, "node_id": "MDQ6VXNlcjEyNjk3OTA0", "avatar_url": "https://avatars0.githubusercontent.com/u/12697904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carbonin", "html_url": "https://github.com/carbonin", "followers_url": "https://api.github.com/users/carbonin/followers", "following_url": "https://api.github.com/users/carbonin/following{/other_user}", "gists_url": "https://api.github.com/users/carbonin/gists{/gist_id}", "starred_url": "https://api.github.com/users/carbonin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carbonin/subscriptions", "organizations_url": "https://api.github.com/users/carbonin/orgs", "repos_url": "https://api.github.com/users/carbonin/repos", "events_url": "https://api.github.com/users/carbonin/events{/privacy}", "received_events_url": "https://api.github.com/users/carbonin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006547, "node_id": "MDU6TGFiZWw4MjUwMDY1NDc=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-05T19:21:50Z", "updated_at": "2019-08-19T11:52:26Z", "closed_at": "2019-08-19T11:52:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The [documentation](https://ansible-runner.readthedocs.io/en/latest/intro.html#inventory) states that the target inventory \"can be further limited or overridden on the command line\". And `ansible-runner --help` shows me that the `--hosts` option should \"Define the set of hosts to execute against\".\r\n\r\n### Command used:\r\n`ansible-runner --hosts 192.168.122.134 --playbook /home/ncarboni/Documents/scratch/ansible-runner-test/print_output.yaml --cmdline='-u root' run test-remote-host`\r\n\r\nDirectory `test-remote-host` is empty.\r\n\r\n### Test playbook:\r\n```yaml\r\n---\r\n- hosts: all\r\n  tasks:\r\n    - name: print command output\r\n      command: ls /\r\n      register: out\r\n\r\n    - debug: var=out.stdout_lines\r\n```\r\n\r\n### Expected output:\r\n```\r\n\r\nPLAY [all] *********************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [192.168.122.134]\r\n\r\nTASK [print command output] ****************************************************\r\nchanged: [192.168.122.134]\r\n\r\nTASK [debug] *******************************************************************\r\nok: [192.168.122.134] => {\r\n    \"out.stdout_lines\": [\r\n        \"bin\",\r\n        \"boot\",\r\n        \"dev\",\r\n        \"etc\",\r\n        \"home\",\r\n        \"lib\",\r\n        \"lib64\",\r\n        \"media\",\r\n        \"mnt\",\r\n        \"opt\",\r\n        \"proc\",\r\n        \"root\",\r\n        \"run\",\r\n        \"sbin\",\r\n        \"srv\",\r\n        \"sys\",\r\n        \"test\",\r\n        \"tmp\",\r\n        \"usr\",\r\n        \"var\"\r\n    ]\r\n}\r\n\r\nPLAY RECAP *********************************************************************\r\n192.168.122.134            : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n\r\n```\r\n\r\n### Observed output:\r\n\r\n```\r\n [WARNING]: Unable to parse /home/ncarboni/Documents/scratch/ansible-runner-\r\ntest/test-remote-host/inventory as an inventory source\r\n\r\n [WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available. Note\r\nthat the implicit localhost does not match 'all'\r\n\r\n\r\n\r\n\r\nPLAY [all] *********************************************************************\r\nskipping: no hosts matched\r\n\r\nPLAY RECAP *********************************************************************\r\n```\r\n\r\n------------------------------------------------\r\n\r\nAlso as an additional data point I ran the same test with a `inventory/hosts` file with some other host in it:\r\n\r\n```\r\n$ cat test-remote-host/inventory/hosts\r\n192.168.122.123\r\n$ ansible-runner --hosts 192.168.122.134 --playbook /home/ncarboni/Documents/scratch/ansible-runner-test/print_output.yaml --cmdline='-u root' run test-remote-host\r\n\r\nPLAY [all] *********************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [192.168.122.123]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: connect to host 192.168.122.123 port 22: No route to host\", \"unreachable\": true}\r\n\r\nPLAY RECAP *********************************************************************\r\n192.168.122.123            : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   \r\n```\r\n\r\nWith the correct target IP in the hosts file I get the desired result with or without the command line option.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/323", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/323/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/323/events", "html_url": "https://github.com/ansible/ansible-runner/issues/323", "id": 463809941, "node_id": "MDU6SXNzdWU0NjM4MDk5NDE=", "number": 323, "title": "extravars needs to be unicode aware", "user": {"login": "mscherfling", "id": 19229692, "node_id": "MDQ6VXNlcjE5MjI5Njky", "avatar_url": "https://avatars0.githubusercontent.com/u/19229692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscherfling", "html_url": "https://github.com/mscherfling", "followers_url": "https://api.github.com/users/mscherfling/followers", "following_url": "https://api.github.com/users/mscherfling/following{/other_user}", "gists_url": "https://api.github.com/users/mscherfling/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscherfling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscherfling/subscriptions", "organizations_url": "https://api.github.com/users/mscherfling/orgs", "repos_url": "https://api.github.com/users/mscherfling/repos", "events_url": "https://api.github.com/users/mscherfling/events{/privacy}", "received_events_url": "https://api.github.com/users/mscherfling/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-03T15:12:22Z", "updated_at": "2019-08-27T13:15:44Z", "closed_at": "2019-08-27T13:15:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "for python 2.7, if extravars contain unicode characters, the jinja2 data merge process fails with the stacktrace:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/markscherfling/.pyenv/versions/2.7.15/lib/python2.7/site-packages/circuits/core/manager.py\", line 856, in processTask\r\n    raise value.extract()\r\nFunctionException_: Traceback (most recent call last):\r\n  File \"/Users/markscherfling/.pyenv/versions/2.7.15/lib/python2.7/site-packages/fn_ansible/components/function_ansible.py\", line 78, in _fn_ansible_function\r\n    playbook_args=extra_vars\r\n  File \"/Users/markscherfling/.pyenv/versions/2.7.15/lib/python2.7/site-packages/fn_ansible/lib/ansible_api.py\", line 80, in run_playbook\r\n    raise ValueError(original_exception)\r\nValueError: 'ascii' codec can't encode characters in position 0-7: ordinal not in range(128)\r\n\r\nenvironment is:\r\nansible==2.8.1\r\nansible-runner==1.3.4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/317", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/317/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/317/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/317/events", "html_url": "https://github.com/ansible/ansible-runner/issues/317", "id": 460422596, "node_id": "MDU6SXNzdWU0NjA0MjI1OTY=", "number": 317, "title": "Error on vars_prompt callback", "user": {"login": "bkmeneguello", "id": 1322552, "node_id": "MDQ6VXNlcjEzMjI1NTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1322552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkmeneguello", "html_url": "https://github.com/bkmeneguello", "followers_url": "https://api.github.com/users/bkmeneguello/followers", "following_url": "https://api.github.com/users/bkmeneguello/following{/other_user}", "gists_url": "https://api.github.com/users/bkmeneguello/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkmeneguello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkmeneguello/subscriptions", "organizations_url": "https://api.github.com/users/bkmeneguello/orgs", "repos_url": "https://api.github.com/users/bkmeneguello/repos", "events_url": "https://api.github.com/users/bkmeneguello/events{/privacy}", "received_events_url": "https://api.github.com/users/bkmeneguello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-25T13:24:19Z", "updated_at": "2019-06-28T15:38:42Z", "closed_at": "2019-06-28T15:38:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since ansible/ansible#49219 the v2_playbook_on_vars_prompt callback [has changed](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/callback/__init__.py#L394) and wasn't updated [here](https://github.com/ansible/ansible-runner/blob/master/ansible_runner/display_callback/module.py#L170). This is causing the following error:\r\n```\r\n [WARNING]: Failure using method (v2_playbook_on_vars_prompt) in callback plugin (<ansible.plugins.callback.awx_display.CallbackModule object at 0x7f36fb852250>): v2_playbook_on_vars_prompt() takes at most 9 arguments (10 given)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/314", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/314/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/314/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/314/events", "html_url": "https://github.com/ansible/ansible-runner/issues/314", "id": 454587694, "node_id": "MDU6SXNzdWU0NTQ1ODc2OTQ=", "number": 314, "title": "Unicode in environment variables break ansible-runner ", "user": {"login": "rmetzler", "id": 58824, "node_id": "MDQ6VXNlcjU4ODI0", "avatar_url": "https://avatars0.githubusercontent.com/u/58824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmetzler", "html_url": "https://github.com/rmetzler", "followers_url": "https://api.github.com/users/rmetzler/followers", "following_url": "https://api.github.com/users/rmetzler/following{/other_user}", "gists_url": "https://api.github.com/users/rmetzler/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmetzler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmetzler/subscriptions", "organizations_url": "https://api.github.com/users/rmetzler/orgs", "repos_url": "https://api.github.com/users/rmetzler/repos", "events_url": "https://api.github.com/users/rmetzler/events{/privacy}", "received_events_url": "https://api.github.com/users/rmetzler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-11T09:45:06Z", "updated_at": "2020-01-17T22:58:54Z", "closed_at": "2019-08-05T17:48:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "We run ansible-runner in Docker containers in Gitlab CI.\r\nansible-runner breaks when a user with Umlauts in his name starts the runner, as the user's name (eg. `M\u00fcller`) is saved as environment variable.\r\n\r\n```console\r\n[root@af4df578c2e7 /]# unset test\r\n[root@af4df578c2e7 /]# ansible-runner -p test.yml run .\r\nERROR! the playbook: test.yml could not be found\r\n[root@af4df578c2e7 /]# export test=M\u00fcller\r\n[root@af4df578c2e7 /]# ansible-runner -p test.yml run .\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/__main__.py\", line 329, in main\r\n    res = run(**run_options)\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/interface.py\", line 162, in run\r\n    r.run()\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/runner.py\", line 112, in run\r\n    'env': self.config.env}, f, ensure_ascii=False\r\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 190, in dump\r\n    fp.write(chunk)\r\n  File \"/usr/lib64/python2.7/codecs.py\", line 691, in write\r\n    return self.writer.write(data)\r\n  File \"/usr/lib64/python2.7/codecs.py\", line 351, in write\r\n    data, consumed = self.encode(object, self.errors)\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 2: ordinal not in range(128)\r\n[root@af4df578c2e7 /]# ansible-runner --version\r\n1.3.4\r\n```\r\n\r\n\r\n## related issues\r\n\r\nsimilar to #234\r\n\r\n## link to breaking source\r\n\r\nhttps://github.com/ansible/ansible-runner/blob/1696ec2075f96b57bc9099cf018ed8d0d574aed6/ansible_runner/runner.py#L109-L113", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/310", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/310/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/310/events", "html_url": "https://github.com/ansible/ansible-runner/issues/310", "id": 452668457, "node_id": "MDU6SXNzdWU0NTI2Njg0NTc=", "number": 310, "title": "atexit()-based directory cleanup insufficient when runner is called via library interface", "user": {"login": "wenottingham", "id": 5208768, "node_id": "MDQ6VXNlcjUyMDg3Njg=", "avatar_url": "https://avatars3.githubusercontent.com/u/5208768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wenottingham", "html_url": "https://github.com/wenottingham", "followers_url": "https://api.github.com/users/wenottingham/followers", "following_url": "https://api.github.com/users/wenottingham/following{/other_user}", "gists_url": "https://api.github.com/users/wenottingham/gists{/gist_id}", "starred_url": "https://api.github.com/users/wenottingham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wenottingham/subscriptions", "organizations_url": "https://api.github.com/users/wenottingham/orgs", "repos_url": "https://api.github.com/users/wenottingham/repos", "events_url": "https://api.github.com/users/wenottingham/events{/privacy}", "received_events_url": "https://api.github.com/users/wenottingham/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "chrismeyersfsu", "id": 722880, "node_id": "MDQ6VXNlcjcyMjg4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/722880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismeyersfsu", "html_url": "https://github.com/chrismeyersfsu", "followers_url": "https://api.github.com/users/chrismeyersfsu/followers", "following_url": "https://api.github.com/users/chrismeyersfsu/following{/other_user}", "gists_url": "https://api.github.com/users/chrismeyersfsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismeyersfsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismeyersfsu/subscriptions", "organizations_url": "https://api.github.com/users/chrismeyersfsu/orgs", "repos_url": "https://api.github.com/users/chrismeyersfsu/repos", "events_url": "https://api.github.com/users/chrismeyersfsu/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismeyersfsu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chrismeyersfsu", "id": 722880, "node_id": "MDQ6VXNlcjcyMjg4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/722880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismeyersfsu", "html_url": "https://github.com/chrismeyersfsu", "followers_url": "https://api.github.com/users/chrismeyersfsu/followers", "following_url": "https://api.github.com/users/chrismeyersfsu/following{/other_user}", "gists_url": "https://api.github.com/users/chrismeyersfsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismeyersfsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismeyersfsu/subscriptions", "organizations_url": "https://api.github.com/users/chrismeyersfsu/orgs", "repos_url": "https://api.github.com/users/chrismeyersfsu/repos", "events_url": "https://api.github.com/users/chrismeyersfsu/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismeyersfsu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-06-05T19:08:38Z", "updated_at": "2019-08-27T13:14:50Z", "closed_at": "2019-08-27T13:14:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Related to https://github.com/ansible/awx/issues/4010 - when runner is called as a python library, atexit() won't necessarily run at a point that it should.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/305", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/305/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/305/events", "html_url": "https://github.com/ansible/ansible-runner/issues/305", "id": 449108903, "node_id": "MDU6SXNzdWU0NDkxMDg5MDM=", "number": 305, "title": "--ask-pass is not handled", "user": {"login": "pguermo", "id": 6735320, "node_id": "MDQ6VXNlcjY3MzUzMjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6735320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pguermo", "html_url": "https://github.com/pguermo", "followers_url": "https://api.github.com/users/pguermo/followers", "following_url": "https://api.github.com/users/pguermo/following{/other_user}", "gists_url": "https://api.github.com/users/pguermo/gists{/gist_id}", "starred_url": "https://api.github.com/users/pguermo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pguermo/subscriptions", "organizations_url": "https://api.github.com/users/pguermo/orgs", "repos_url": "https://api.github.com/users/pguermo/repos", "events_url": "https://api.github.com/users/pguermo/events{/privacy}", "received_events_url": "https://api.github.com/users/pguermo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-28T07:36:42Z", "updated_at": "2019-07-24T14:14:49Z", "closed_at": "2019-07-24T14:14:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "ansible-runner --help shows that --ask-pass should be an option, but it is not supported by RunnerConfig", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/303", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/303/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/303/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/303/events", "html_url": "https://github.com/ansible/ansible-runner/issues/303", "id": 448738334, "node_id": "MDU6SXNzdWU0NDg3MzgzMzQ=", "number": 303, "title": "allow extravars to be file", "user": {"login": "hudecof", "id": 4510160, "node_id": "MDQ6VXNlcjQ1MTAxNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4510160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hudecof", "html_url": "https://github.com/hudecof", "followers_url": "https://api.github.com/users/hudecof/followers", "following_url": "https://api.github.com/users/hudecof/following{/other_user}", "gists_url": "https://api.github.com/users/hudecof/gists{/gist_id}", "starred_url": "https://api.github.com/users/hudecof/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hudecof/subscriptions", "organizations_url": "https://api.github.com/users/hudecof/orgs", "repos_url": "https://api.github.com/users/hudecof/repos", "events_url": "https://api.github.com/users/hudecof/events{/privacy}", "received_events_url": "https://api.github.com/users/hudecof/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-27T08:47:56Z", "updated_at": "2019-06-06T14:20:24Z", "closed_at": "2019-06-06T14:20:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In runner config is code\r\n\r\n```\r\n        if self.loader.isfile('env/extravars'):\r\n            exec_list.extend(['-e', '@{}'.format(self.loader.abspath('env/extravars'))])\r\n        if isinstance(self.extra_vars, dict) and self.extra_vars:\r\n            exec_list.extend(\r\n                [\r\n                    '-e',\r\n                    '%s' % ' '.join(\r\n                        [\"{}=\\\"{}\\\"\".format(k, self.extra_vars[k]) for k in self.extra_vars]\r\n                    )\r\n                ]\r\n            )\r\n```\r\n\r\nIt would be nice to add option, where `extra_vars` points to file.\r\n\r\n```\r\n        if self.loader.isfile('env/extravars'):\r\n            exec_list.extend(['-e', '@{}'.format(self.loader.abspath('env/extravars'))])\r\n        if   self.extra_vars:\r\n            if  self.loader.isfile(self.extra_vars):\r\n                exec_list.extend(['-e', '@{}'.format(self.loader.abspath(self.extra_vars))])\r\n\r\n            if isinstance(self.extra_vars, dict) and self.extra_vars:\r\n                exec_list.extend(\r\n                    [\r\n                        '-e',\r\n                        '%s' % ' '.join(\r\n                            [\"{}=\\\"{}\\\"\".format(k, self.extra_vars[k]) for k in self.extra_vars]\r\n                        )\r\n                    ]\r\n                )\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/300", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/300/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/300/events", "html_url": "https://github.com/ansible/ansible-runner/issues/300", "id": 445434715, "node_id": "MDU6SXNzdWU0NDU0MzQ3MTU=", "number": 300, "title": "Inventory ignored !!!", "user": {"login": "NahaliY", "id": 25417617, "node_id": "MDQ6VXNlcjI1NDE3NjE3", "avatar_url": "https://avatars2.githubusercontent.com/u/25417617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NahaliY", "html_url": "https://github.com/NahaliY", "followers_url": "https://api.github.com/users/NahaliY/followers", "following_url": "https://api.github.com/users/NahaliY/following{/other_user}", "gists_url": "https://api.github.com/users/NahaliY/gists{/gist_id}", "starred_url": "https://api.github.com/users/NahaliY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NahaliY/subscriptions", "organizations_url": "https://api.github.com/users/NahaliY/orgs", "repos_url": "https://api.github.com/users/NahaliY/repos", "events_url": "https://api.github.com/users/NahaliY/events{/privacy}", "received_events_url": "https://api.github.com/users/NahaliY/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-17T13:10:06Z", "updated_at": "2019-05-17T14:13:34Z", "closed_at": "2019-05-17T14:13:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an issue with ansible-runner, inventory is always ignored. The task is started on only localhost.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/299", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/299/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/299/events", "html_url": "https://github.com/ansible/ansible-runner/issues/299", "id": 444337042, "node_id": "MDU6SXNzdWU0NDQzMzcwNDI=", "number": 299, "title": "Ansible-playbook runs correcrtly, but no changes made in slaves hosts", "user": {"login": "NahaliY", "id": 25417617, "node_id": "MDQ6VXNlcjI1NDE3NjE3", "avatar_url": "https://avatars2.githubusercontent.com/u/25417617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NahaliY", "html_url": "https://github.com/NahaliY", "followers_url": "https://api.github.com/users/NahaliY/followers", "following_url": "https://api.github.com/users/NahaliY/following{/other_user}", "gists_url": "https://api.github.com/users/NahaliY/gists{/gist_id}", "starred_url": "https://api.github.com/users/NahaliY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NahaliY/subscriptions", "organizations_url": "https://api.github.com/users/NahaliY/orgs", "repos_url": "https://api.github.com/users/NahaliY/repos", "events_url": "https://api.github.com/users/NahaliY/events{/privacy}", "received_events_url": "https://api.github.com/users/NahaliY/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-15T09:40:33Z", "updated_at": "2019-05-20T13:47:20Z", "closed_at": "2019-05-16T01:10:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an issue with ansible-runner, I'm using docker-compose to run the ansible-runner, configured SSH for nodes access. When running the docker-compose, the output shown is correct. But when accessing slaves, there is no changes made.\r\nAnyone have an idea about this ?\r\nPS: the log don't show any error\r\n\r\n`root@master:~/Docker-compose# docker-compose up\r\nStarting docker-compose_ansible-deployment_1 ... done\r\nAttaching to docker-compose_ansible-deployment_1\r\nansible-deployment_1  |\r\nansible-deployment_1  | PLAY [all] *********************************************************************\r\nansible-deployment_1  |\r\nansible-deployment_1  | TASK [Gathering Facts] *********************************************************\r\nansible-deployment_1  | ok: [Slave]\r\nansible-deployment_1  | ok: [Local]\r\nansible-deployment_1  |\r\nansible-deployment_1  | TASK [Ansible create file if it doesn't exist example] *************************\r\nansible-deployment_1  | changed: [Slave]\r\nansible-deployment_1  | changed: [Local]\r\nansible-deployment_1  |\r\nansible-deployment_1  | PLAY RECAP *********************************************************************\r\nansible-deployment_1  | Local                      : ok=2    changed=1    unreachable=0    failed=0\r\nansible-deployment_1  | Slave                      : ok=2    changed=1    unreachable=0    failed=0\r\nansible-deployment_1  |\r\ndocker-compose_ansible-deployment_1 exited with code 0\r\n`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/296", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/296/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/296/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/296/events", "html_url": "https://github.com/ansible/ansible-runner/issues/296", "id": 442202661, "node_id": "MDU6SXNzdWU0NDIyMDI2NjE=", "number": 296, "title": "ansible-runner doesn't support multiple inventories in the way that all other ansible commands do", "user": {"login": "willthames", "id": 391807, "node_id": "MDQ6VXNlcjM5MTgwNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/391807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willthames", "html_url": "https://github.com/willthames", "followers_url": "https://api.github.com/users/willthames/followers", "following_url": "https://api.github.com/users/willthames/following{/other_user}", "gists_url": "https://api.github.com/users/willthames/gists{/gist_id}", "starred_url": "https://api.github.com/users/willthames/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willthames/subscriptions", "organizations_url": "https://api.github.com/users/willthames/orgs", "repos_url": "https://api.github.com/users/willthames/repos", "events_url": "https://api.github.com/users/willthames/events{/privacy}", "received_events_url": "https://api.github.com/users/willthames/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-09T12:07:53Z", "updated_at": "2019-06-01T20:55:30Z", "closed_at": "2019-06-01T20:55:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "ansible-runner doesn't seem to cope with ANSIBLE_INVENTORY or inventory being set in ansible.cfg\r\n\r\nWhile the `--inventory` flag is nice, it relies on the calling code having to parse inventory arguments rather than just inheriting it from the environment\r\n\r\nIn an ideal world, if `ansible-inventory --list` works with no additional arguments, then so should `ansible-runner -p playbook.yml run /working_dir` ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/295", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/295/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/295/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/295/events", "html_url": "https://github.com/ansible/ansible-runner/issues/295", "id": 442201417, "node_id": "MDU6SXNzdWU0NDIyMDE0MTc=", "number": 295, "title": "--cmdline is not handled", "user": {"login": "willthames", "id": 391807, "node_id": "MDQ6VXNlcjM5MTgwNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/391807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willthames", "html_url": "https://github.com/willthames", "followers_url": "https://api.github.com/users/willthames/followers", "following_url": "https://api.github.com/users/willthames/following{/other_user}", "gists_url": "https://api.github.com/users/willthames/gists{/gist_id}", "starred_url": "https://api.github.com/users/willthames/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willthames/subscriptions", "organizations_url": "https://api.github.com/users/willthames/orgs", "repos_url": "https://api.github.com/users/willthames/repos", "events_url": "https://api.github.com/users/willthames/events{/privacy}", "received_events_url": "https://api.github.com/users/willthames/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-09T12:04:29Z", "updated_at": "2019-05-29T11:10:49Z", "closed_at": "2019-05-28T16:47:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "`ansible-runner --help` shows that `--cmdline` should be an option, but it is not supported by `RunnerConfig`\r\n\r\n```\r\n$ ansible-runner -p ../ansible-demo-operator/deploy.yml --cmdline \"-e application=docker-debug -e env=test\" run /tmp/ansible-operator\r\nTraceback (most recent call last):\r\n  File \"/Users/will/src/ansible-runner/ansible_runner/__main__.py\", line 329, in main\r\n    res = run(**run_options)\r\n  File \"/Users/will/src/ansible-runner/ansible_runner/interface.py\", line 161, in run\r\n    r = init_runner(**kwargs)\r\n  File \"/Users/will/src/ansible-runner/ansible_runner/interface.py\", line 64, in init_runner\r\n    rc = RunnerConfig(**kwargs)\r\nTypeError: __init__() got an unexpected keyword argument 'cmdline'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/288", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/288/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/288/events", "html_url": "https://github.com/ansible/ansible-runner/issues/288", "id": 436957263, "node_id": "MDU6SXNzdWU0MzY5NTcyNjM=", "number": 288, "title": "No CLI pattern to run adhoc command with custom inventory", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-25T00:11:38Z", "updated_at": "2019-04-25T14:06:32Z", "closed_at": "2019-04-25T14:06:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Say I want to run the ping module on all the hosts in an inventory file.\r\n\r\n```\r\nansible-runner -m ping --inventory test/integration/inventories/localhost run test/integration/\r\n```\r\n\r\nfails with Ansible error\r\n\r\n> ansible: error: the following arguments are required: pattern\r\n\r\nbut\r\n\r\n```\r\nansible-runner -m ping --inventory test/integration/inventories/localhost run test/integration/ all\r\n```\r\n\r\nFails with ansible-runner error (it does not take this additional argument \"all\")\r\n\r\nProviding the pattern via limit does not work.\r\n\r\n```\r\nansible-runner -m ping --inventory test/integration/inventories/localhost run test/integration/ --limit all\r\n```\r\n\r\nSo it seems like for the adhoc CLI to work, there needs to be a way to provide the adhoc pattern? `host_pattern` is a parameter in the interface, but unlike limit, it seems that no CLI argument corresponds to it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/279", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/279/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/279/events", "html_url": "https://github.com/ansible/ansible-runner/issues/279", "id": 436291433, "node_id": "MDU6SXNzdWU0MzYyOTE0MzM=", "number": 279, "title": "New Ansible 2.9 traceback: show_per_host_start", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-23T16:54:37Z", "updated_at": "2019-04-23T19:57:28Z", "closed_at": "2019-04-23T19:57:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n$ ansible-runner run -p test_include_role.yml foo/\r\n [WARNING]: Unable to parse /Users/alancoding/Documents/repos/ansible-\r\nrunner/foo/inventory as an inventory source\r\n\r\n [WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available. Note\r\nthat the implicit localhost does not match 'all'\r\n\r\n __________________ \r\n< PLAY [localhost] >\r\n ------------------ \r\n        \\   ^__^\r\n         \\  (oo)\\_______\r\n            (__)\\       )\\/\\\r\n                ||----w |\r\n                ||     ||\r\n\r\n _____________________________________ \r\n< TASK [include_role : test_tag_role] >\r\n ------------------------------------- \r\n        \\   ^__^\r\n         \\  (oo)\\_______\r\n            (__)\\       )\\/\\\r\n                ||----w |\r\n                ||     ||\r\n\r\n [WARNING]: Failure using method (v2_runner_on_start) in callback plugin\r\n(<display_callback.module.AWXDefaultCallbackModule object at 0x110b72f98>):\r\n'show_per_host_start'\r\n\r\n ______________________________ \r\n< TASK [test_tag_role : debug] >\r\n ------------------------------ \r\n        \\   ^__^\r\n         \\  (oo)\\_______\r\n            (__)\\       )\\/\\\r\n                ||----w |\r\n                ||     ||\r\n\r\nok: [localhost] => {\r\n    \"msg\": \"\"\r\n}\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n ____________ \r\n< PLAY RECAP >\r\n ------------ \r\n        \\   ^__^\r\n         \\  (oo)\\_______\r\n            (__)\\       )\\/\\\r\n                ||----w |\r\n                ||     ||\r\n\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n\r\n```\r\n\r\n```\r\n$ tree foo/\r\nfoo/\r\n\u2514\u2500\u2500 project\r\n    \u251c\u2500\u2500 roles\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_tag_role\r\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 tasks\r\n    \u2502\u00a0\u00a0         \u2514\u2500\u2500 main.yml\r\n    \u2514\u2500\u2500 test_include_role.yml\r\n\r\n4 directories, 2 files\r\n```\r\n\r\n```\r\n$ cat foo/project/test_include_role.yml \r\n---\r\n- hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n  - include_role:\r\n      name: test_tag_role \r\n$ cat foo/project/roles/test_tag_role/tasks/main.yml \r\n---\r\n- debug: msg=\"{{ test_tag_role_msg | default('')}}\"\r\n```\r\n\r\nfrom https://github.com/ansible/test-playbooks/\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/273", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/273/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/273/events", "html_url": "https://github.com/ansible/ansible-runner/issues/273", "id": 434382474, "node_id": "MDU6SXNzdWU0MzQzODI0NzQ=", "number": 273, "title": "Runner does not emit job events on a mismatched --limit", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-17T16:44:02Z", "updated_at": "2019-04-17T18:23:14Z", "closed_at": "2019-04-17T18:23:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reproduced in runner 1.3.2:\r\n\r\n```shell\r\n$ cat ./example/inventory ./example/env/cmdline\r\nlocalhost ansible_connection=local\r\n--limit foo\r\n$ ansible-runner run ./example -p `pwd`/example/any-valid-playbook.yml -i test\r\n [WARNING]: Could not match supplied host pattern, ignoring: foo\r\n\r\nERROR! Specified hosts and/or --limit does not match any hosts\r\n$ ls ./example/artifacts/test/job_events\r\nls: cannot access './example/artifacts/test/job_events': No such file or directory\r\n$ cat ./example/artifacts/test/stdout\r\n [WARNING]: Could not match supplied host pattern, ignoring: foo\r\n\r\nERROR! Specified hosts and/or --limit does not match any hosts\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/263", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/263/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/263/events", "html_url": "https://github.com/ansible/ansible-runner/issues/263", "id": 432662294, "node_id": "MDU6SXNzdWU0MzI2NjIyOTQ=", "number": 263, "title": "Add back old integration tests", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-12T17:08:38Z", "updated_at": "2019-04-12T17:23:48Z", "closed_at": "2019-04-12T17:23:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This issue is to port these tests into this repo:\r\n\r\nhttps://github.com/ansible/awx/pull/3481", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/250", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/250/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/250/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/250/events", "html_url": "https://github.com/ansible/ansible-runner/issues/250", "id": 429547503, "node_id": "MDU6SXNzdWU0Mjk1NDc1MDM=", "number": 250, "title": "Runner exits without artifacts if `cmdline` is not on the path", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-05T01:29:13Z", "updated_at": "2019-04-05T04:35:52Z", "closed_at": "2019-04-05T04:35:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When `ansible-playbook` (or `bwrap`, is using process isolation) isn't on the `PATH`, runner doesn't provide any clues in its artifacts (and some critical ones are missing).\r\n\r\n```shell\r\n~ which ansible-playbook\r\n/usr/bin/which: no ansible-playbook in ...\r\n~/dev/ansible-runner ansible-runner start ./tmpdir -p `pwd`/hello_world.yml  -i testing123\r\nwc ./tmpdir/artifacts/testing123/stdout\r\n0 0 0 ./tmpdir/artifacts/testing123/stdout\r\n```\r\n\r\nNotice that there are no `rc`, `status`, or `job_events` artifacts _at all_:\r\n```\r\nls ./tmpdir/artifacts/testing123\r\ncommand  stdout\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/245", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/245/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/245/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/245/events", "html_url": "https://github.com/ansible/ansible-runner/issues/245", "id": 428828334, "node_id": "MDU6SXNzdWU0Mjg4MjgzMzQ=", "number": 245, "title": "Allow use of Inventory defined in ansible.cfg", "user": {"login": "bpereto", "id": 1131885, "node_id": "MDQ6VXNlcjExMzE4ODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1131885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpereto", "html_url": "https://github.com/bpereto", "followers_url": "https://api.github.com/users/bpereto/followers", "following_url": "https://api.github.com/users/bpereto/following{/other_user}", "gists_url": "https://api.github.com/users/bpereto/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpereto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpereto/subscriptions", "organizations_url": "https://api.github.com/users/bpereto/orgs", "repos_url": "https://api.github.com/users/bpereto/repos", "events_url": "https://api.github.com/users/bpereto/events{/privacy}", "received_events_url": "https://api.github.com/users/bpereto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-03T15:18:28Z", "updated_at": "2019-06-01T15:23:13Z", "closed_at": "2019-06-01T15:23:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "If `inventory` is not given to the runner, the configuration defaults to `private_data_dir/inventory`.\r\nhttps://github.com/ansible/ansible-runner/blob/31b4174663e3562af30e85175e833bf047e3df14/ansible_runner/runner_config.py#L200-L201\r\n\r\nSo with this, its always defined an `-i` option to the ansible playbook. I want to run playbooks in a git repository, which provides own inventories from the repository.\r\n\r\nI think of defaulting to no `-i` given if no inventory is specified, this leads in use of the inventory defined in `ansible.cfg` and its precedence.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/242", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/242/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/242/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/242/events", "html_url": "https://github.com/ansible/ansible-runner/issues/242", "id": 427717010, "node_id": "MDU6SXNzdWU0Mjc3MTcwMTA=", "number": 242, "title": "Multi-line verbose events", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-01T13:50:29Z", "updated_at": "2019-04-02T12:54:08Z", "closed_at": "2019-04-02T12:54:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Moving https://github.com/ansible/awx/issues/2129 to here\r\n\r\n> Ansible events can be multi-line, but any verbose events (which are not Ansible events) can be only 1 line each\r\n\r\n> It would be more performant to save multiple lines to a single event, when write is called to the standard out buffer in that way.\r\n\r\nThis applies for both playbook and verbose events.\r\n\r\nDoing this may also require enforcing some maximum event size threshold within the standard out wrapper class.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/239", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/239/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/239/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/239/events", "html_url": "https://github.com/ansible/ansible-runner/issues/239", "id": 425971054, "node_id": "MDU6SXNzdWU0MjU5NzEwNTQ=", "number": 239, "title": "Improve callback plugin testing", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-03-27T13:48:43Z", "updated_at": "2019-04-23T14:33:00Z", "closed_at": "2019-04-23T14:33:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The callback plugin could use more tests.  These tests existed in AWX for some time, and it would be great to port them over:\r\n\r\nhttps://github.com/ansible/awx/blob/e6abd77c963fe7325ef1aaa45d50f51246e871f6/awx/lib/tests/test_display_callback.py", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/234", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/234/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/234/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/234/events", "html_url": "https://github.com/ansible/ansible-runner/issues/234", "id": 425203581, "node_id": "MDU6SXNzdWU0MjUyMDM1ODE=", "number": 234, "title": "ansible-runner exits unexpectedly with certain playbooks that contain unicode", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, {"login": "chrismeyersfsu", "id": 722880, "node_id": "MDQ6VXNlcjcyMjg4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/722880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismeyersfsu", "html_url": "https://github.com/chrismeyersfsu", "followers_url": "https://api.github.com/users/chrismeyersfsu/followers", "following_url": "https://api.github.com/users/chrismeyersfsu/following{/other_user}", "gists_url": "https://api.github.com/users/chrismeyersfsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismeyersfsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismeyersfsu/subscriptions", "organizations_url": "https://api.github.com/users/chrismeyersfsu/orgs", "repos_url": "https://api.github.com/users/chrismeyersfsu/repos", "events_url": "https://api.github.com/users/chrismeyersfsu/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismeyersfsu/received_events", "type": "User", "site_admin": false}, {"login": "Spredzy", "id": 1191411, "node_id": "MDQ6VXNlcjExOTE0MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1191411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Spredzy", "html_url": "https://github.com/Spredzy", "followers_url": "https://api.github.com/users/Spredzy/followers", "following_url": "https://api.github.com/users/Spredzy/following{/other_user}", "gists_url": "https://api.github.com/users/Spredzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Spredzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Spredzy/subscriptions", "organizations_url": "https://api.github.com/users/Spredzy/orgs", "repos_url": "https://api.github.com/users/Spredzy/repos", "events_url": "https://api.github.com/users/Spredzy/events{/privacy}", "received_events_url": "https://api.github.com/users/Spredzy/received_events", "type": "User", "site_admin": false}, {"login": "kdelee", "id": 29239279, "node_id": "MDQ6VXNlcjI5MjM5Mjc5", "avatar_url": "https://avatars1.githubusercontent.com/u/29239279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdelee", "html_url": "https://github.com/kdelee", "followers_url": "https://api.github.com/users/kdelee/followers", "following_url": "https://api.github.com/users/kdelee/following{/other_user}", "gists_url": "https://api.github.com/users/kdelee/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdelee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdelee/subscriptions", "organizations_url": "https://api.github.com/users/kdelee/orgs", "repos_url": "https://api.github.com/users/kdelee/repos", "events_url": "https://api.github.com/users/kdelee/events{/privacy}", "received_events_url": "https://api.github.com/users/kdelee/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-03-26T02:59:16Z", "updated_at": "2019-05-03T16:44:56Z", "closed_at": "2019-05-03T16:44:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```shell\r\ncat /tmp/unicode/test.yml\r\n---\r\n- name: 'A play with unicode: \u00a2 \u00a3 \u00a4 \u00a5'\r\n  hosts: all\r\n  gather_facts: false\r\n  vars:\r\n    test_var: '\u012a \u012b \u012c \u012d \u012e \u012f \u0130 \u0131 \u0132 \u0133 \u0134 \u0135 \u0136 \u0137 \u0138 \u0139 \u013a \u013b \u013c \u013d \u013e \u013f \u0140 \u0141 \u0142 \u0143 \u0144 \u0145 \u0146 \u0147 \u0148 \u0149 \u014a \u014b \u014c \u014d \u014e \u014f \u0150 \u0151 \u0152'\r\n    num_hosts: 5\r\n    hostnames:\r\n        - 'host-#\u03ec\u03ed\u03ee\u03ef\u03f0'\r\n        - 'host-\u0370\u0371\u0372\u0373\u02b9\u0375'\r\n        - 'host-\u0399\u039a\u039b\u039c\u039d\u039e'\r\n        - 'host-\u03c3\u03c4\u03c5\u03c6\u03c7\u03c8'\r\n        - 'host-\u03ec\u03ed\u03ee\u03ef\u03f0\u03f1'\r\n\r\n  tasks:\r\n    - name: 'A task name with unicode: \u00e8 \u00e9 \u00ea \u00eb'\r\n      debug: msg='hi there'\r\n\r\n    - name: 'A task with unicode parameters'\r\n      debug: var=test_var\r\n\r\n      # \u20ac \u201a \u0192 \u201e \u2026 \u2020 \u2021 \u02c6 \u2030 \u0160 \u2039 \u0152 \u017d \u2018 \u2019 \u201c \u201d \u2022 \u2013 \u2014 \u02dc \u2122 \u0161 \u203a \u0153 \u017e \u0178 \u00a1 \u00a2 \u00a3 \u00a4 \u00a5 \u00a6 \u00a7 \u00a8 \u00a9 \u00aa \u00ab \u00ac \u00ad \u00ae'\r\n\r\n    - name: 'A task using with_items containing unicode'\r\n      debug: msg='{{item}}'\r\n      with_items:\r\n        - '\u00af \u00b0 \u00b1 \u00b2 \u00b3 \u00b4 \u00b5 \u00b6 \u00b7 \u00b8 \u00b9 \u00ba \u00bb \u00bc \u00bd \u00be \u00bf \u00c0 \u00c1 \u00c2 \u00c3 \u00c4 \u00c5 \u00c6 \u00c7 \u00c8 \u00c9 \u00ca \u00cb \u00cc \u00cd \u00ce \u00cf \u00d0 \u00d1 \u00d2 \u00d3 \u00d4 \u00d5 \u00d6 \u00d7'\r\n        - '\u00d8 \u00d9 \u00da \u00db \u00dc \u00dd \u00de \u00df \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5 \u00e6 \u00e7 \u00e8 \u00e9 \u00ea \u00eb \u00ec \u00ed \u00ee \u00ef \u00f0 \u00f1 \u00f2 \u00f3 \u00f4 \u00f5 \u00f6 \u00f7 \u00f8 \u00f9 \u00fa \u00fb \u00fc \u00fd \u00fe \u00ff \u0100'\r\n        - '\u0101 \u0102 \u0103 \u0104 \u0105 \u0106 \u0107 \u0108 \u0109 \u010a \u010b \u010c \u010d \u010e \u010f \u0110 \u0111 \u0112 \u0113 \u0114 \u0115 \u0116 \u0117 \u0118 \u0119 \u011a \u011b \u011c \u011d \u011e \u011f \u0120 \u0121 \u0122 \u0123 \u0124 \u0125 \u0126 \u0127 \u0128 \u0129'\r\n\r\n    - add_host:\r\n        name: '{{hostnames}}.{{item}}'\r\n        groups: '\u012a\u012b\u012c\u012d'\r\n        ansible_connection: local\r\n        host_id: '{{item}}'\r\n      with_sequence: start=1 end={{num_hosts}} format=%d\r\n\r\n- name: 'A play for hosts in group: \u012a\u012b\u012c\u012d'\r\n  hosts: '\u012a\u012b\u012c\u012d'\r\n  gather_facts: false\r\n  tasks:\r\n    - debug: msg='Unicode is a good thing \u2122'\r\n```\r\n\r\nRunning this playbook and piping its output in python2 causes a traceback:\r\n\r\n```\r\n~ ansible-runner run /tmp/unicode/ -p /tmp/unicode/test.yml -i crash | tee\r\n [WARNING]: Unable to parse /tmp/unicode/inventory as an inventory source\r\n\r\n [WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available. Note\r\nthat the implicit localhost does not match 'all'\r\n\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/ansible-runner\", line 9, in <module>\r\n    load_entry_point('ansible-runner==1.3.0', 'console_scripts', 'ansible-runner')()\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/__main__.py\", line 325, in main\r\n    res = run(**run_options)\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/interface.py\", line 159, in run\r\n    r.run()\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/runner.py\", line 141, in run\r\n    searchwindowsize=100)\r\n  File \"/usr/lib/python2.7/site-packages/pexpect/spawnbase.py\", line 341, in expect\r\n    timeout, searchwindowsize, async_)\r\n  File \"/usr/lib/python2.7/site-packages/pexpect/spawnbase.py\", line 369, in expect_list\r\n    return exp.expect_loop(timeout)\r\n  File \"/usr/lib/python2.7/site-packages/pexpect/expect.py\", line 111, in expect_loop\r\n    incoming = spawn.read_nonblocking(spawn.maxread, timeout)\r\n  File \"/usr/lib/python2.7/site-packages/pexpect/pty_spawn.py\", line 485, in read_nonblocking\r\n    return super(spawn, self).read_nonblocking(size)\r\n  File \"/usr/lib/python2.7/site-packages/pexpect/spawnbase.py\", line 179, in read_nonblocking\r\n    self._log(s, 'read')\r\n  File \"/usr/lib/python2.7/site-packages/pexpect/spawnbase.py\", line 130, in _log\r\n    second_log.write(s)\r\n  File \"/usr/lib/python2.7/site-packages/ansible_runner/utils.py\", line 265, in write\r\n    sys.stdout.write(stdout_actual + \"\\n\")\r\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xa2' in position 29: ordinal not in range(128)\r\n```\r\n\r\nNotice that in this scenario, the artifact directory doesn't contain a `status` or `rc` file:\r\n\r\n```\r\n~ ls /tmp/unicode/artifacts/crash/\r\nfact_cache  job_events  stdout\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/232", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/232/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/232/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/232/events", "html_url": "https://github.com/ansible/ansible-runner/issues/232", "id": 425125239, "node_id": "MDU6SXNzdWU0MjUxMjUyMzk=", "number": 232, "title": "git package missing from docker Image", "user": {"login": "cloudbree", "id": 37555329, "node_id": "MDQ6VXNlcjM3NTU1MzI5", "avatar_url": "https://avatars3.githubusercontent.com/u/37555329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudbree", "html_url": "https://github.com/cloudbree", "followers_url": "https://api.github.com/users/cloudbree/followers", "following_url": "https://api.github.com/users/cloudbree/following{/other_user}", "gists_url": "https://api.github.com/users/cloudbree/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudbree/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudbree/subscriptions", "organizations_url": "https://api.github.com/users/cloudbree/orgs", "repos_url": "https://api.github.com/users/cloudbree/repos", "events_url": "https://api.github.com/users/cloudbree/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudbree/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-25T21:31:48Z", "updated_at": "2019-03-26T13:09:20Z", "closed_at": "2019-03-26T13:09:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Even though the runner image contains the ansible-galaxy script, it seems to be missing the git binary, which would might be required to install role dependencies from a git repository. Is that intended behaviour ? I think in a cloud-native scenario, that could be a very useful addition to the image. What do you think ? Is that something that we could include within this image ?\r\n\r\nP.S.: If it would not be a problem, we can open a PR.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/219", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/219/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/219/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/219/events", "html_url": "https://github.com/ansible/ansible-runner/issues/219", "id": 417073503, "node_id": "MDU6SXNzdWU0MTcwNzM1MDM=", "number": 219, "title": "set ANSIBLE_CALLBACK_PLUGINS in envvars is not working.", "user": {"login": "tuxknight", "id": 2828183, "node_id": "MDQ6VXNlcjI4MjgxODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2828183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuxknight", "html_url": "https://github.com/tuxknight", "followers_url": "https://api.github.com/users/tuxknight/followers", "following_url": "https://api.github.com/users/tuxknight/following{/other_user}", "gists_url": "https://api.github.com/users/tuxknight/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuxknight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuxknight/subscriptions", "organizations_url": "https://api.github.com/users/tuxknight/orgs", "repos_url": "https://api.github.com/users/tuxknight/repos", "events_url": "https://api.github.com/users/tuxknight/events{/privacy}", "received_events_url": "https://api.github.com/users/tuxknight/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-05T01:40:39Z", "updated_at": "2019-08-28T15:24:34Z", "closed_at": "2019-08-28T15:24:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to set callback plugins in env/envvars using `ANSIBLE_CALLBACK_PLUGINS`, but found out that ansible-runner changed `ANSIBLE_CALLBACK_PLUGINS` to its own plugin path.\r\nIt would be more convenient to integrate with current work flow if runner supports customed plugins.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/217", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/217/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/217/events", "html_url": "https://github.com/ansible/ansible-runner/issues/217", "id": 416800750, "node_id": "MDU6SXNzdWU0MTY4MDA3NTA=", "number": 217, "title": "--limit arg doesn't exists in cli", "user": {"login": "victorock", "id": 10787731, "node_id": "MDQ6VXNlcjEwNzg3NzMx", "avatar_url": "https://avatars3.githubusercontent.com/u/10787731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorock", "html_url": "https://github.com/victorock", "followers_url": "https://api.github.com/users/victorock/followers", "following_url": "https://api.github.com/users/victorock/following{/other_user}", "gists_url": "https://api.github.com/users/victorock/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorock/subscriptions", "organizations_url": "https://api.github.com/users/victorock/orgs", "repos_url": "https://api.github.com/users/victorock/repos", "events_url": "https://api.github.com/users/victorock/events{/privacy}", "received_events_url": "https://api.github.com/users/victorock/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-04T13:26:35Z", "updated_at": "2019-03-04T17:53:30Z", "closed_at": "2019-03-04T17:53:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The arg --limit is not implemented in ansible-runner cli.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/213", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/213/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/213/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/213/events", "html_url": "https://github.com/ansible/ansible-runner/issues/213", "id": 413132400, "node_id": "MDU6SXNzdWU0MTMxMzI0MDA=", "number": 213, "title": "--project_dir not respected", "user": {"login": "chrismeyersfsu", "id": 722880, "node_id": "MDQ6VXNlcjcyMjg4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/722880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismeyersfsu", "html_url": "https://github.com/chrismeyersfsu", "followers_url": "https://api.github.com/users/chrismeyersfsu/followers", "following_url": "https://api.github.com/users/chrismeyersfsu/following{/other_user}", "gists_url": "https://api.github.com/users/chrismeyersfsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismeyersfsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismeyersfsu/subscriptions", "organizations_url": "https://api.github.com/users/chrismeyersfsu/orgs", "repos_url": "https://api.github.com/users/chrismeyersfsu/repos", "events_url": "https://api.github.com/users/chrismeyersfsu/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismeyersfsu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-02-21T21:30:05Z", "updated_at": "2019-02-22T15:51:56Z", "closed_at": "2019-02-22T15:51:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\ntree /tmp/my/\r\n/tmp/my/\r\n\u251c\u2500\u2500 isolated_dir\r\n\u251c\u2500\u2500 private_data_dir\r\n\u2514\u2500\u2500 project_dir\r\n    \u251c\u2500\u2500 main.yml\r\n    \u2514\u2500\u2500 tree.yml\r\n```\r\n\r\n```\r\n#!/usr/bin/env python\r\nimport ansible_runner\r\n\r\nkwargs = {\r\n    'private_data_dir': '/tmp/my/private_data_dir/',\r\n    'project_dir': '/tmp/my/project/',\r\n    'playbook': 'main.yml',\r\n}\r\n\r\nansible_runner.interface.run(**kwargs)\r\n```\r\n\r\nResults in:\r\n```\r\n./run.py\r\nERROR! the playbook: main.yml could not be found\r\n```\r\n\r\nNote: `ansible-runner --project-dir /tmp/my/project_dir -p tree.yml run /tmp/my/private_data_dir` <--  works via command-line", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/212", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/212/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/212/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/212/events", "html_url": "https://github.com/ansible/ansible-runner/issues/212", "id": 412314409, "node_id": "MDU6SXNzdWU0MTIzMTQ0MDk=", "number": 212, "title": "Document how to use the yaml stdout_callback plugin", "user": {"login": "varac", "id": 488213, "node_id": "MDQ6VXNlcjQ4ODIxMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/488213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varac", "html_url": "https://github.com/varac", "followers_url": "https://api.github.com/users/varac/followers", "following_url": "https://api.github.com/users/varac/following{/other_user}", "gists_url": "https://api.github.com/users/varac/gists{/gist_id}", "starred_url": "https://api.github.com/users/varac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varac/subscriptions", "organizations_url": "https://api.github.com/users/varac/orgs", "repos_url": "https://api.github.com/users/varac/repos", "events_url": "https://api.github.com/users/varac/events{/privacy}", "received_events_url": "https://api.github.com/users/varac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-20T09:00:40Z", "updated_at": "2019-02-20T14:06:14Z", "closed_at": "2019-02-20T14:06:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "The main issue I have with ansible-runner is that it is using the default ansible stdout_callback, which is horrible to parse (as human) when it comes to multi-line failures like:\r\n\r\n```\r\nFeb 14 13:15:51     \"installTiller.stdout\": \"serviceaccount/tiller created\\nclusterrolebinding.rbac.authorization.k8s.io/tiller-clusterrolebinding created\\n$HELM_HOME has been configured at /root/.helm.\\n\\nTiller (the Helm server-side component) has been installed into your Kubernetes Cluster.\\n\\nPlease note: by default, Tiller is deployed with an insecure 'allow unauthenticated users' policy.\\nTo prevent this, run `helm init` with the --tiller-tls-verify flag.\\nFor more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation\\nHappy Helming!\\nWaiting for deployment \\\"tiller-deploy\\\" rollout to finish: 0 of 1 updated replicas are available...\\ndeployment \\\"tiller-deploy\\\" successfully rolled out\"\r\n```\r\n\r\nWith ansible-playbook, using `stdout_callback = yaml` gives a much cleaner output. But I can't find a way of using this callback plugin in ansible-runner. Is there a way ?\r\nSame question goes for `callback_whitelist = profile_tasks, timer` which are the other callbacks we'd like to use.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/211", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/211/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/211/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/211/events", "html_url": "https://github.com/ansible/ansible-runner/issues/211", "id": 412115906, "node_id": "MDU6SXNzdWU0MTIxMTU5MDY=", "number": 211, "title": "command line --artifact-dir is not respected", "user": {"login": "chrismeyersfsu", "id": 722880, "node_id": "MDQ6VXNlcjcyMjg4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/722880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismeyersfsu", "html_url": "https://github.com/chrismeyersfsu", "followers_url": "https://api.github.com/users/chrismeyersfsu/followers", "following_url": "https://api.github.com/users/chrismeyersfsu/following{/other_user}", "gists_url": "https://api.github.com/users/chrismeyersfsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismeyersfsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismeyersfsu/subscriptions", "organizations_url": "https://api.github.com/users/chrismeyersfsu/orgs", "repos_url": "https://api.github.com/users/chrismeyersfsu/repos", "events_url": "https://api.github.com/users/chrismeyersfsu/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismeyersfsu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-19T20:44:26Z", "updated_at": "2019-03-04T14:28:20Z", "closed_at": "2019-03-04T14:28:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Command-line `--artifact-dir` is not respected.\r\n\r\n```\r\nansible-runner -p main.yml --artifact-dir /tmp/cmeyers/artifact_explicit run /tmp/cmeyers\r\n\r\ntree /tmp/cmeyers\r\n/tmp/cmeyers\r\n\u251c\u2500\u2500 artifacts\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 ec31e227-4fbc-4416-8d6e-9a2e3fce9fc3\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 fact_cache\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 localhost\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 job_events\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 10-d4258b44-f17e-e8dc-bd11-00000000000c.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 11-be066cd4-510c-4c0b-8561-6ee6cab14721.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 12-d4258b44-f17e-e8dc-bd11-000000000007.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 13-8a4b2998-d61d-4229-b946-6134c500b395.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 14-c5c85115-97f6-4c16-a4f1-2215d68db0b6.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 1-d273fba1-e913-4d1d-a802-ff2ff283194c.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 2-9387cdf7-3aeb-48f3-9394-820136ece101.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 3-b4ad7bb8-4831-43fb-8f86-d15c2eb9d51b.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 4-c266d8fa-a4c1-45db-80fc-ca60822088f0.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 5-ae280e1f-ddd1-41e7-8090-330a9f048052.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 6-198828d1-fff8-4fea-893e-74b97df17510.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 7-0b94b77e-e8e0-4c92-ba26-d71973a90296.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 8-ee0d193c-bb2a-41e5-a188-bcd7dcbbe2b7.json\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 9-d4258b44-f17e-e8dc-bd11-000000000005.json\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 rc\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 status\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 stdout\r\n\u2514\u2500\u2500 main.yml\r\n```\r\n\r\nAlso, when it is working, you can observe it working in the lower-level .run() interface, a sub-directory called `artifacts` is created in the directory specified by `--artifacts-dir`.\r\n\r\n### Expected\r\n* For the artifacts to be contained in `/tmp/cmeyers/artifact_explicit`\r\n\r\n### Actual\r\n* Artifacts are contained in `/tmp/cmeyers/artifacts`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/208", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/208/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/208/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/208/events", "html_url": "https://github.com/ansible/ansible-runner/issues/208", "id": 411256140, "node_id": "MDU6SXNzdWU0MTEyNTYxNDA=", "number": 208, "title": "missing reference in Dockerfile", "user": {"login": "magick93", "id": 2173213, "node_id": "MDQ6VXNlcjIxNzMyMTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2173213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magick93", "html_url": "https://github.com/magick93", "followers_url": "https://api.github.com/users/magick93/followers", "following_url": "https://api.github.com/users/magick93/following{/other_user}", "gists_url": "https://api.github.com/users/magick93/gists{/gist_id}", "starred_url": "https://api.github.com/users/magick93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magick93/subscriptions", "organizations_url": "https://api.github.com/users/magick93/orgs", "repos_url": "https://api.github.com/users/magick93/repos", "events_url": "https://api.github.com/users/magick93/events{/privacy}", "received_events_url": "https://api.github.com/users/magick93/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-18T00:22:19Z", "updated_at": "2019-02-18T13:56:52Z", "closed_at": "2019-02-18T13:56:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\r\n\r\nI'm trying to build the Dockerfile, using `docker build`, but am unable to as it is referencing a local directory that doesnt exist in this repo.\r\n\r\nSpecifically, https://github.com/ansible/ansible-runner/blob/master/Dockerfile#L29 - there is no `dist` directory in this repo. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/206", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/206/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/206/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/206/events", "html_url": "https://github.com/ansible/ansible-runner/issues/206", "id": 410399164, "node_id": "MDU6SXNzdWU0MTAzOTkxNjQ=", "number": 206, "title": "Fact cache doesn't respect artifact_dir param", "user": {"login": "chrismeyersfsu", "id": 722880, "node_id": "MDQ6VXNlcjcyMjg4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/722880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismeyersfsu", "html_url": "https://github.com/chrismeyersfsu", "followers_url": "https://api.github.com/users/chrismeyersfsu/followers", "following_url": "https://api.github.com/users/chrismeyersfsu/following{/other_user}", "gists_url": "https://api.github.com/users/chrismeyersfsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismeyersfsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismeyersfsu/subscriptions", "organizations_url": "https://api.github.com/users/chrismeyersfsu/orgs", "repos_url": "https://api.github.com/users/chrismeyersfsu/repos", "events_url": "https://api.github.com/users/chrismeyersfsu/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismeyersfsu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-02-14T17:01:16Z", "updated_at": "2019-02-20T15:44:22Z", "closed_at": "2019-02-20T15:44:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "using the interface `ansible_runner.interface.run(artifact_dir='artifacts_explicit', ident=253)`\r\n```bash-4.2# tree\r\n.\r\n\u251c\u2500\u2500 artifacts\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 253\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 fact_cache\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 HostChainLengthlhz\r\n\u251c\u2500\u2500 artifacts_explicit\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 artifacts\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 253\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 fact_cache\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 HostChainLengthlhz\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 job_events\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 10-0242ac12-0005-ec2d-b714-000000000009.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 11-0a954587-d622-4108-b246-f861ce0a5001.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 12-0242ac12-0005-ec2d-b714-00000000000a.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 1-2b097bfb-fd8d-406d-9bcd-7cea8629ecd5.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 13-7b3b2e92-2937-42fb-855a-76678357133c.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 14-0242ac12-0005-ec2d-b714-00000000000b.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 15-211d4b09-6d8b-4cfa-a2bf-5505f8c84f04.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 16-0242ac12-0005-ec2d-b714-00000000000c.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 17-fb9b8e7d-d01e-4068-9e11-49d34ada56c5.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 18-0242ac12-0005-ec2d-b714-00000000000d.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 19-c5ad45cf-cf24-4d80-9966-ce234b079089.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 20-0242ac12-0005-ec2d-b714-00000000000e.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 21-7f6bcdbf-09bb-4513-80de-db735184929e.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 22-503ef002-2112-45ba-bb6d-e9953162f025.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 2-b3aa520b-6078-45e3-93cf-a619d885cc18.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 3-0bc550aa-bb52-488f-a3b5-341e8c64ace2.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 4-841cbc64-5dc9-4878-a9f2-b682ced8be03.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 5-0242ac12-0005-ec2d-b714-000000000006.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 6-0242ac12-0005-ec2d-b714-000000000012.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 7-280d22ab-2b75-43ec-a1f8-f3d6cbb75c07.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 8-0242ac12-0005-ec2d-b714-000000000008.json\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 9-56ea5525-4f99-43ca-a6b3-406816296c45.json\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 rc\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 status\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 stdout\r\n\u251c\u2500\u2500 cp\r\n\u251c\u2500\u2500 env\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cmdline\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 envvars\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 extravars\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 passwords\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 ssh_key\r\n\u251c\u2500\u2500 project\r\n\u2514\u2500\u2500 tmp9_nj_hhl\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/201", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/201/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/201/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/201/events", "html_url": "https://github.com/ansible/ansible-runner/issues/201", "id": 408834131, "node_id": "MDU6SXNzdWU0MDg4MzQxMzE=", "number": 201, "title": "sharing project between runners.", "user": {"login": "tuxknight", "id": 2828183, "node_id": "MDQ6VXNlcjI4MjgxODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2828183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuxknight", "html_url": "https://github.com/tuxknight", "followers_url": "https://api.github.com/users/tuxknight/followers", "following_url": "https://api.github.com/users/tuxknight/following{/other_user}", "gists_url": "https://api.github.com/users/tuxknight/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuxknight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuxknight/subscriptions", "organizations_url": "https://api.github.com/users/tuxknight/orgs", "repos_url": "https://api.github.com/users/tuxknight/repos", "events_url": "https://api.github.com/users/tuxknight/events{/privacy}", "received_events_url": "https://api.github.com/users/tuxknight/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-11T15:25:20Z", "updated_at": "2019-02-11T16:17:14Z", "closed_at": "2019-02-11T16:17:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "It may be a common pattern that organizing many playbooks/roles in one repo.  Three roles and playbooks [tomcat/nginx/zabbix] for example are in project folder. Each playbook needs different env/extravars env/envvars .\r\n\r\nOne solution is that every runner keep its independent private_data_dir but using soft link to share on common project directory.\r\n\r\nThe other solution is making runner running with options of [env_dir, inventory_dir, project_dir] other than private_data_dir.\r\n\r\nSo, any suggestions or discussions on this ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/200", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/200/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/200/events", "html_url": "https://github.com/ansible/ansible-runner/issues/200", "id": 405731575, "node_id": "MDU6SXNzdWU0MDU3MzE1NzU=", "number": 200, "title": "molecule + testinfra environment breaks event collection", "user": {"login": "jctanner", "id": 1869705, "node_id": "MDQ6VXNlcjE4Njk3MDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1869705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jctanner", "html_url": "https://github.com/jctanner", "followers_url": "https://api.github.com/users/jctanner/followers", "following_url": "https://api.github.com/users/jctanner/following{/other_user}", "gists_url": "https://api.github.com/users/jctanner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jctanner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jctanner/subscriptions", "organizations_url": "https://api.github.com/users/jctanner/orgs", "repos_url": "https://api.github.com/users/jctanner/repos", "events_url": "https://api.github.com/users/jctanner/events{/privacy}", "received_events_url": "https://api.github.com/users/jctanner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-02-01T14:46:48Z", "updated_at": "2019-03-21T16:04:43Z", "closed_at": "2019-03-04T16:52:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "##### summary\r\n\r\nAnsible-runner inside the molecule environment isn't able to store job events in the results object. The events are written to disk and can be read manually. They do have a \"partial\" suffix in the filename, but are otherwise complete/valid json.\r\n\r\nhttp://tannerjc.net/ansible/tmp/jobdata.tar.gz\r\n\r\n##### ansible-runner version\r\n\r\nReproduced with HEAD and 1.2.0\r\n\r\n##### steps to reproduce\r\n\r\n1. create a venv\r\n2. pip install ansible\r\n3. pip install molecule\r\n4. pip uninstall testinfra\r\n5. git clone https://github.com/philpep/testinfra\r\n6. overwrite testinfra/utils/ansible_runner.py with https://gist.github.com/jctanner/512ec07171d95e61a5b7fd5f9103a301\r\n7. pip install -e testinfra\r\n8. mkdir roles ; cd roles; molecule init foobar; cd foobar\r\n9. molecule converge (creates a docker container)\r\n10. molecule verify (invokes py.test -> testinfra -> ansible_runner.py)\r\n\r\n##### actual result\r\n\r\nMolecule raises a NotImplemented exception, which really means that a fact wasn't in the return data (because no events) and the distro algorithm in their code couldn't find a match for null.\r\n \r\n```\r\n(venv) [jtanner@jtw530 role.2]$ molecule verify\r\n--> Validating schema /data/workspace.issues/AP-MOLECULE_COLLECTION_INIT/collections/role.2/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 verify\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'verify'\r\n--> Executing Testinfra tests found in /data/workspace.issues/AP-MOLECULE_COLLECTION_INIT/collections/role.2/molecule/default/tests/...\r\n    ============================= test session starts ==============================\r\n    platform linux -- Python 3.7.2, pytest-3.0.7, py-1.7.0, pluggy-0.4.0\r\n    rootdir: /data/workspace.issues/AP-MOLECULE_COLLECTION_INIT/collections/role.2/molecule/default, inifile:\r\n    plugins: verbose-parametrize-1.4.0, mock-1.10.0, helpers-namespace-2019.1.8, cov-2.6.0, testinfra-1.19.1.dev1+ge82a685.d20190130\r\ncollected 1 itemss\r\n\r\n    tests/test_default.py F\r\n\r\n    =================================== FAILURES ===================================\r\n    _____________________ test_hosts_file[ansible://instance] ______________________\r\n\r\n    host = <testinfra.host.Host object at 0x7f54a11e9da0>\r\n\r\n        def test_hosts_file(host):\r\n    >       f = host.file('/etc/hosts')\r\n\r\n    tests/test_default.py:10:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    ../../../../testinfra.jctanner/testinfra/host.py:107: in __getattr__\r\n        obj = module_class.get_module(self)\r\n    ../../../../testinfra.jctanner/testinfra/modules/base.py:22: in get_module\r\n        klass = cls.get_module_class(_host)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\n    cls = <class 'testinfra.modules.file.File'>\r\n    host = <testinfra.host.Host object at 0x7f54a11e9da0>\r\n\r\n        @classmethod\r\n        def get_module_class(cls, host):\r\n            if host.system_info.type == \"linux\":\r\n                return GNUFile\r\n            elif host.system_info.type == \"netbsd\":\r\n                return NetBSDFile\r\n            elif host.system_info.type.endswith(\"bsd\"):\r\n                return BSDFile\r\n            elif host.system_info.type == \"darwin\":\r\n                return DarwinFile\r\n            else:\r\n    >           raise NotImplementedError\r\n    E           NotImplementedError\r\n\r\n    ../../../../testinfra.jctanner/testinfra/modules/file.py:196: NotImplementedError\r\n    ----------------------------- Captured stdout call -----------------------------\r\n\r\n\r\n    =========================== 1 failed in 5.26 seconds ===========================\r\n```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/199", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/199/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/199/events", "html_url": "https://github.com/ansible/ansible-runner/issues/199", "id": 404612115, "node_id": "MDU6SXNzdWU0MDQ2MTIxMTU=", "number": 199, "title": "fatal: [db01]: FAILED! => {\"changed\": false, \"module_stderr\": \"Shared connection to db01 closed.\\r\\n\", \"module_stdout\"", "user": {"login": "hwali", "id": 47160114, "node_id": "MDQ6VXNlcjQ3MTYwMTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/47160114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hwali", "html_url": "https://github.com/hwali", "followers_url": "https://api.github.com/users/hwali/followers", "following_url": "https://api.github.com/users/hwali/following{/other_user}", "gists_url": "https://api.github.com/users/hwali/gists{/gist_id}", "starred_url": "https://api.github.com/users/hwali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hwali/subscriptions", "organizations_url": "https://api.github.com/users/hwali/orgs", "repos_url": "https://api.github.com/users/hwali/repos", "events_url": "https://api.github.com/users/hwali/events{/privacy}", "received_events_url": "https://api.github.com/users/hwali/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-30T05:46:27Z", "updated_at": "2019-02-11T16:24:31Z", "closed_at": "2019-02-11T16:24:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Also test if the latest release and devel branch are affected too -->\r\n<!--- Complete *all* sections as described, this form is processed automatically -->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly below -->\r\nI have an issue creating user over Ansible using python connecting DB,Please if someone cant support over this .yml,.py &,wsgi code pasted below\r\nGot below error\r\nTASK [create demo user] **********************************************************************************************************\r\nfatal: [db01]: FAILED! => {\"changed\": false, \"module_stderr\": \"Shared connection to db01 closed.\\r\\n\", \"module_stdout\": \"Traceback (most recent call last):\\r\\n  File \\\"/tmp/ansible_BpAAVO/ansible_module_mysql_user.py\\\", line 218, in <module>\\r\\n    from ansible.module_utils.basic import AnsibleModule\\r\\nzlib.error: Error -2 while preparing to decompress data: inconsistent stream state\\r\\n\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n##### COMPONENT NAME\r\n<!--- Write the short name of the module, plugin, task or feature below, use your best guess if unsure -->\r\nmysql_user, create demo user in mysql\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes -->\r\n```\r\n[root@osboxes9 ~]# ansible --version\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Oct 30 2018, 23:45:53) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!--- Paste verbatim output from \"ansible-config dump --only-changed\" between quotes -->\r\n```\r\n[defaults]\r\ninventory = ./dev\r\n++++\r\ndev file config as below\r\n[loadbalancer]\r\nlb01\r\n\r\n[database]\r\ndb01\r\n\r\n[webserver]\r\nosboxes1\r\nosboxes2\r\n\r\n[control]\r\ncontrol1 ansible_connection=local\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n[root@osboxes9 ~]# cat /etc/redhat-release\r\nCentOS Linux release 7.6.1810 (Core) \r\n[root@osboxes9 ~]# \r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Describe exactly how to reproduce the problem, using a minimal test-case -->\r\nController as Ansible >>>loadbalancer as front end>>>2x1 Web-servers & 1x1 Database as back  end\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: db01\r\n  tasks:\r\n    - name: install dependencies tool\r\n      yum: name={{item}} state=latest update_cache=yes\r\n      with_items:\r\n          - MySQL-python\r\n          -  mysql-devel\r\n          -  python-devel\r\n\r\n    - name: install mysql-server\r\n      yum: name=mysql-server state=installed update_cache=yes\r\n\r\n    - name: ensure mysql started\r\n      service: name=mysql state=started enabled=yes\r\n\r\n    - name: ensure mysql listening on all ports\r\n      lineinfile: dest=/etc/my.cnf regexp=^bind-address line=\"bind-address = 0.0.0.0\"\r\n      notify: restart mysql\r\n\r\n    - name: create demo database\r\n      mysql_db: name=demo state=present\r\n\r\n    - name: create demo user\r\n      mysql_user: name=demo password=demo priv=demo.*:ALL host='%' state=present\r\n\r\n  handlers:\r\n    - name: restart mysql\r\n      service: name=mysql state=restarted\r\n\r\n```\r\n\r\n<!--- HINT: You can paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n$curl osboxes1/db\r\nDatabase Connected from osboxes1!\r\n$curl osboxes2/db\r\nDatabase Connected from osboxes2!\r\n$curl lb01/db\r\nDatabase Connected from osboxes1!\r\n$curl lb01/db\r\nDatabase Connected from osboxes2!\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Describe what actually happened. If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes -->\r\n```paste below\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/197", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/197/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/197/events", "html_url": "https://github.com/ansible/ansible-runner/issues/197", "id": 404015087, "node_id": "MDU6SXNzdWU0MDQwMTUwODc=", "number": 197, "title": "Collections import of ABCs from collections rather than collections.abc is deprecated", "user": {"login": "kkirsche", "id": 947110, "node_id": "MDQ6VXNlcjk0NzExMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/947110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkirsche", "html_url": "https://github.com/kkirsche", "followers_url": "https://api.github.com/users/kkirsche/followers", "following_url": "https://api.github.com/users/kkirsche/following{/other_user}", "gists_url": "https://api.github.com/users/kkirsche/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkirsche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkirsche/subscriptions", "organizations_url": "https://api.github.com/users/kkirsche/orgs", "repos_url": "https://api.github.com/users/kkirsche/repos", "events_url": "https://api.github.com/users/kkirsche/events{/privacy}", "received_events_url": "https://api.github.com/users/kkirsche/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-28T21:28:50Z", "updated_at": "2019-02-11T19:22:00Z", "closed_at": "2019-02-11T19:22:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running pytest on a project with ansible-runner, the following warning is given:\r\n\r\n```\r\n============================================================================================= warnings summary =============================================================================================\r\n/Users/kkirsche/.local/share/virtualenvs/redacted-ofo9OoK8/lib/python3.7/site-packages/ansible_runner/runner_config.py:30\r\n  /Users/kkirsche/.local/share/virtualenvs/redacted-ofo9OoK8/lib/python3.7/site-packages/ansible_runner/runner_config.py:30: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n    from collections import Mapping\r\n\r\n/Users/kkirsche/.local/share/virtualenvs/redacted-ofo9OoK8/lib/python3.7/site-packages/ansible_runner/utils.py:14\r\n  /Users/kkirsche/.local/share/virtualenvs/redacted-ofo9OoK8/lib/python3.7/site-packages/ansible_runner/utils.py:14: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n    from collections import Iterable, Mapping\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n```\r\n\r\nThis is using the command:\r\n\r\n```\r\n$ pytest -vv --strict\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/191", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/191/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/191/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/191/events", "html_url": "https://github.com/ansible/ansible-runner/issues/191", "id": 402660361, "node_id": "MDU6SXNzdWU0MDI2NjAzNjE=", "number": 191, "title": "Sensitive information sometimes is writen to artifacts, sometimes not. ", "user": {"login": "sarasonparas", "id": 13333466, "node_id": "MDQ6VXNlcjEzMzMzNDY2", "avatar_url": "https://avatars1.githubusercontent.com/u/13333466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarasonparas", "html_url": "https://github.com/sarasonparas", "followers_url": "https://api.github.com/users/sarasonparas/followers", "following_url": "https://api.github.com/users/sarasonparas/following{/other_user}", "gists_url": "https://api.github.com/users/sarasonparas/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarasonparas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarasonparas/subscriptions", "organizations_url": "https://api.github.com/users/sarasonparas/orgs", "repos_url": "https://api.github.com/users/sarasonparas/repos", "events_url": "https://api.github.com/users/sarasonparas/events{/privacy}", "received_events_url": "https://api.github.com/users/sarasonparas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-24T11:20:34Z", "updated_at": "2019-02-11T16:21:18Z", "closed_at": "2019-02-11T16:21:18Z", "author_association": "NONE", "active_lock_reason": null, "body": " I run a very simple playbook via `ansible_runner.interface.run` : \r\n\r\n     - name: Manage new IAM groups\r\n     iam_group:  \r\n        aws_access_key: \"{{ aws_access_key | replace('\\n', '')}}\"\r\n        aws_secret_key: \"{{ aws_secret_key | replace('\\n', '')}}\"\r\n        region: \"eu-west-2\" \r\n        name: \"{{ item.name }}\"\r\n        state: \"{{ item.state }}\"\r\n     loop: \"{{ iam_groups }}\"\r\n\r\nMy aws_secret_key (which is encrypted in the vault) is replaced by \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\" in some  of files in artifacts/job_events/:  \r\n\r\n`{ ... \"module_args\": {\"aws_access_key\": \"A....\", \"aws_secret_key\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\", \"region\": \"eu-west-2\", \"name\": \"blah_test\", \"state\": \"absent\", \"validate_certs\": true, \"managed_policy\": [], \"users\": [], \"purge_users\": false, \"purge_policy\": false, \"ec2_url\": null, \"security_token\": null, \"profile\": null}}, \"_ansible_parsed\": true, \"_ansible_no_log\": false, \"item\": {\"name\": \"blah__test\", \"state\": \"absent\"}, \"_ansible_item_result\": true, \"_ansible_ignore_errors\": null, \"_ansible_item_label\": {\"name\": \"blah_test\", \"state\": \"absent\"}}, \"pid\": 38314}, \"pid\": 38314, \"created\": \"2019-01-22T23:36:13.199740\"}` (the expected result)\r\n\r\nBut it some files  the aws_secret key is displayed in clear text:\r\n\r\n`{\"uuid\": \"238b74a7-d567-418c-8b5b-27470bdca61b\", \"counter\": 4, \"stdout\": \"ok: [localhost] => (item={'name': 'blah_test', 'state': 'absent'})\", \"start_line\": 4, \"end_line\": 5, \"runner_ident\": \"2af585c5-95c8-4cdb-8da6-fed353ebb7be\", \"event\": \"runner_item_on_ok\", \"event_data\": {\"playbook\": \"ansible_iam/iam_users.yaml\", \"playbook_uuid\": \"23116bc0-0dc7-40cd-a335-7540f26af3a0\", \"play\": \"local\", \"play_uuid\": \"3c15c2cb-0d08-f12c-24d6-000000000006\", \"play_pattern\": \"local\", \"task\": \"Manage new IAM groups\", \"task_uuid\": \"3c15c2cb-0d08-f12c-24d6-00000000000b\", \"task_action\": \"iam_group\", \"task_path\": \"ansible_iam/roles/iam_groups_new/tasks/main.yml:4\", \"task_args\": \"aws_access_key=A...., aws_secret_key=***** (THE SECRET KEY IN CLEAR TEXT) ... }`.  (The unexpected result)\r\n\r\nThe `job_events` dir is in my `private_data_dir`- does it mean that it's supposed to keep sensitive information? \r\n\r\nIs there any way to get the full output into the log files, but keep the `aws_secret_key` hidden? Ansible's `no_log` at the task level hiddes everything - not a good option for debug.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/180", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/180/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/180/events", "html_url": "https://github.com/ansible/ansible-runner/issues/180", "id": 396561258, "node_id": "MDU6SXNzdWUzOTY1NjEyNTg=", "number": 180, "title": "Add --tags and --skip-tags support to runner_config.py", "user": {"login": "mtucker502", "id": 5040678, "node_id": "MDQ6VXNlcjUwNDA2Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/5040678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mtucker502", "html_url": "https://github.com/mtucker502", "followers_url": "https://api.github.com/users/mtucker502/followers", "following_url": "https://api.github.com/users/mtucker502/following{/other_user}", "gists_url": "https://api.github.com/users/mtucker502/gists{/gist_id}", "starred_url": "https://api.github.com/users/mtucker502/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mtucker502/subscriptions", "organizations_url": "https://api.github.com/users/mtucker502/orgs", "repos_url": "https://api.github.com/users/mtucker502/repos", "events_url": "https://api.github.com/users/mtucker502/events{/privacy}", "received_events_url": "https://api.github.com/users/mtucker502/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-07T16:41:21Z", "updated_at": "2019-01-14T19:03:03Z", "closed_at": "2019-01-14T19:03:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Add --tags and --skip-tags support to runner_config.py.\r\n\r\nCurrently this can be done only via injecting env/cmdline. This is not preferrable to systematically running specific tasks in a playbook since env/cmdline will have to be updated for each run instead of supplying as variable to ansible_runner.RunnerConfig().", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/179", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/179/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/179/events", "html_url": "https://github.com/ansible/ansible-runner/issues/179", "id": 395677223, "node_id": "MDU6SXNzdWUzOTU2NzcyMjM=", "number": 179, "title": "No option to use multiple inventory files (and thus constructed inventories)", "user": {"login": "AlanCoding", "id": 1385596, "node_id": "MDQ6VXNlcjEzODU1OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1385596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanCoding", "html_url": "https://github.com/AlanCoding", "followers_url": "https://api.github.com/users/AlanCoding/followers", "following_url": "https://api.github.com/users/AlanCoding/following{/other_user}", "gists_url": "https://api.github.com/users/AlanCoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanCoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanCoding/subscriptions", "organizations_url": "https://api.github.com/users/AlanCoding/orgs", "repos_url": "https://api.github.com/users/AlanCoding/repos", "events_url": "https://api.github.com/users/AlanCoding/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanCoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-01-03T18:25:58Z", "updated_at": "2019-02-13T14:33:48Z", "closed_at": "2019-02-13T14:33:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": " a singular parameter:\r\n\r\nhttps://github.com/ansible/ansible-runner/blob/94f58c7c3667102dbafbf3b2349322c594deeccc/ansible_runner/runner_config.py#L249-L250\r\n\r\nTo be consistent with how Ansible core has operated since 2.4, it needs some way to process a list of inventory sources. The use case of constructed inventories need multiple `-i` flags in order to be usable. See the full documentation here:\r\n\r\nhttps://docs.ansible.com/ansible/latest/plugins/inventory.html\r\n\r\nA faster example here:\r\n\r\nhttps://gist.github.com/halberom/e7791aa22c7dd1ef3f1ece3c815b4af8\r\n\r\n```\r\nansible host5 -i hosts -i dynamic.config -m debug -a 'var=groups'\r\n```\r\n\r\nAny software that integrates Ansible via runner will be blocked from using any of these features unless runner changes its API to take multiple inventories somehow.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/177", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/177/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/177/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/177/events", "html_url": "https://github.com/ansible/ansible-runner/issues/177", "id": 386359894, "node_id": "MDU6SXNzdWUzODYzNTk4OTQ=", "number": 177, "title": "Ansible Runner dump_artifacts() orphans \".artifact_write_lock' file descriptor", "user": {"login": "rtproven", "id": 45498738, "node_id": "MDQ6VXNlcjQ1NDk4NzM4", "avatar_url": "https://avatars0.githubusercontent.com/u/45498738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rtproven", "html_url": "https://github.com/rtproven", "followers_url": "https://api.github.com/users/rtproven/followers", "following_url": "https://api.github.com/users/rtproven/following{/other_user}", "gists_url": "https://api.github.com/users/rtproven/gists{/gist_id}", "starred_url": "https://api.github.com/users/rtproven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rtproven/subscriptions", "organizations_url": "https://api.github.com/users/rtproven/orgs", "repos_url": "https://api.github.com/users/rtproven/repos", "events_url": "https://api.github.com/users/rtproven/events{/privacy}", "received_events_url": "https://api.github.com/users/rtproven/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-30T21:38:56Z", "updated_at": "2019-01-07T14:51:16Z", "closed_at": "2019-01-07T14:51:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The dump_artifacts() in the module ansible_runner/utils.py orphans the \".artifact_write_lock' file descriptor.  Depending on the Ansible module, role, or playbook being run, multiple lock file descriptors may be orphaned per execution. When using Ansible Runner as a python module interface to Ansible within a server/daemon, the server process will eventually hit its open file descriptor limit and get an exception.  The server will then be unable to execute any modules, roles, or playbooks until it is manually restarted.\r\n\r\nBelow is a snippet of the code in question that includes a one-line modification that has been tested and shown to fix the problem.\r\n\r\nif not os.path.exists(fn) or p_sha1.hexdigest() != c_sha1.hexdigest():\r\n        lock_fp = os.path.join(path, '.artifact_write_lock')\r\n        lock_fd = os.open(lock_fp, os.O_RDWR | os.O_CREAT, stat.S_IRUSR | stat.S_IWUSR)\r\n        fcntl.lockf(lock_fd, fcntl.LOCK_EX)\r\n\r\n        try:\r\n            with open(fn, 'w') as f:\r\n                f.write(str(obj))\r\n        finally:\r\n            fcntl.lockf(lock_fd, fcntl.LOCK_UN)\r\n            # Close file descriptor before removing file to avoid orphaning descriptor.\r\n            os.close(lock_fd)     <===== Add this line to close descriptor\r\n            os.remove(lock_fp)\r\n\r\n    return fn\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/176", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/176/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/176/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/176/events", "html_url": "https://github.com/ansible/ansible-runner/issues/176", "id": 383171931, "node_id": "MDU6SXNzdWUzODMxNzE5MzE=", "number": 176, "title": "extravars parameter is supplied even if not present", "user": {"login": "mtucker502", "id": 5040678, "node_id": "MDQ6VXNlcjUwNDA2Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/5040678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mtucker502", "html_url": "https://github.com/mtucker502", "followers_url": "https://api.github.com/users/mtucker502/followers", "following_url": "https://api.github.com/users/mtucker502/following{/other_user}", "gists_url": "https://api.github.com/users/mtucker502/gists{/gist_id}", "starred_url": "https://api.github.com/users/mtucker502/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mtucker502/subscriptions", "organizations_url": "https://api.github.com/users/mtucker502/orgs", "repos_url": "https://api.github.com/users/mtucker502/repos", "events_url": "https://api.github.com/users/mtucker502/events{/privacy}", "received_events_url": "https://api.github.com/users/mtucker502/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-21T15:31:47Z", "updated_at": "2019-01-07T16:25:22Z", "closed_at": "2019-01-07T16:25:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Extravars is added by RunnerConfig.prepare() even if the folder isn't present. Here is the sample code:\r\n```python\r\ndata_dir = \"/home/jovyan/sdg-nz-upgrade-automation\"\r\nmyhosts = \",host1\"\r\nmyplaybook = \"SDG-NEO-11-UPGRADE-CONSUMER-JUNOS-16-1R3-S9.3-v2.yml\"\r\n\r\nrc = ansible_runner.RunnerConfig(private_data_dir=data_dir, playbook=myplaybook, inventory=myhosts)\r\nprint(rc.generate_ansible_command())\r\nrc.prepare()\r\nprint(rc.generate_ansible_command())\r\nr = ansible_runner.Runner(config=rc)\r\nr.run()\r\n```\r\n\r\nHere is the output:\r\n```bash\r\n['ansible-playbook', '-i', ',host1', 'SDG-NEO-11-UPGRADE-CONSUMER-JUNOS-16-1R3-S9.3-v2.yml']\r\n['ansible-playbook', '-i', ',host1', '-e', '@/home/jovyan/sdg-nz-upgrade-automation/env/extravars', 'SDG-NEO-11-UPGRADE-CONSUMER-JUNOS-16-1R3-S9.3-v2.yml']\r\nUsage: ansible-playbook [options] playbook.yml [playbook2 ...]\r\n\r\nRuns Ansible playbooks, executing the defined tasks on the targeted hosts.\r\n\r\nOptions:\r\n  --ask-vault-pass      ask for vault password\r\n  -C, --check           don't make any changes; instead, try to predict some\r\n                        of the changes that may occur\r\n############### HELP OUTPUT OMMITTED ###############\r\n    -K, --ask-become-pass\r\n                        ask for privilege escalation password\r\nERROR! Invalid extra vars data supplied. '@/home/jovyan/sdg-nz-upgrade-automation/env/extravars' could not be made into a dictionary\r\n```\r\n\r\nIf I do not call prepare() then Runner.run() complains of expect_passwors. Here is sample code:\r\n```python\r\ndata_dir = \"/home/jovyan/sdg-nz-upgrade-automation\"\r\nmyhosts = \",host1\"\r\nmyplaybook = \"SDG-NEO-11-UPGRADE-CONSUMER-JUNOS-16-1R3-S9.3-v2.yml\"\r\n\r\nrc = ansible_runner.RunnerConfig(private_data_dir=data_dir, playbook=myplaybook, inventory=myhosts)\r\nprint(rc.generate_ansible_command())\r\nr = ansible_runner.Runner(config=rc)\r\nr.run()\r\n```\r\n\r\nOutput:\r\n```bash\r\n['ansible-playbook', '-i', ',host1', 'SDG-NEO-11-UPGRADE-CONSUMER-JUNOS-16-1R3-S9.3-v2.yml']\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-8-17f44c04fd9d> in <module>()\r\n      9 #print(rc.generate_ansible_command())\r\n     10 r = ansible_runner.Runner(config=rc)\r\n---> 11 r.run()\r\n\r\n~/ansible_runner/runner.py in run(self)\r\n    101         stdout_handle = OutputEventFilter(stdout_handle, self.event_callback, self.config.suppress_ansible_output, output_json=self.config.json_mode)\r\n    102 \r\n--> 103         if not isinstance(self.config.expect_passwords, collections.OrderedDict):\r\n    104             # We iterate over `expect_passwords.keys()` and\r\n    105             # `expect_passwords.values()` separately to map matched inputs to\r\n\r\nAttributeError: 'RunnerConfig' object has no attribute 'expect_passwords'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/173", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/173/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/173/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/173/events", "html_url": "https://github.com/ansible/ansible-runner/issues/173", "id": 382755180, "node_id": "MDU6SXNzdWUzODI3NTUxODA=", "number": 173, "title": "RunnerConfig missing suppress_ansible_output", "user": {"login": "mtucker502", "id": 5040678, "node_id": "MDQ6VXNlcjUwNDA2Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/5040678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mtucker502", "html_url": "https://github.com/mtucker502", "followers_url": "https://api.github.com/users/mtucker502/followers", "following_url": "https://api.github.com/users/mtucker502/following{/other_user}", "gists_url": "https://api.github.com/users/mtucker502/gists{/gist_id}", "starred_url": "https://api.github.com/users/mtucker502/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mtucker502/subscriptions", "organizations_url": "https://api.github.com/users/mtucker502/orgs", "repos_url": "https://api.github.com/users/mtucker502/repos", "events_url": "https://api.github.com/users/mtucker502/events{/privacy}", "received_events_url": "https://api.github.com/users/mtucker502/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-20T16:49:54Z", "updated_at": "2019-01-09T17:43:15Z", "closed_at": "2019-01-09T17:43:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Given this code:\r\n```python\r\nimport ansible_runner\r\ndata_dir = \"/home/jovyan/playbooks\"\r\nmyhosts = \",host1\"\r\nrc = ansible_runner.RunnerConfig(private_data_dir=data_dir, playbook='example.yml', inventory=myhosts)\r\nr = ansible_runner.Runner(config=rc)\r\nr.run()\r\n```\r\n\r\nI receive this error:\r\n```bash\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-42-0430adee86a6> in <module>()\r\n      1 r = ansible_runner.Runner(config=rc)\r\n----> 2 r.run()\r\n\r\n/opt/conda/lib/python3.6/site-packages/ansible_runner/runner.py in run(self)\r\n    100 \r\n    101         stdout_handle = codecs.open(stdout_filename, 'w', encoding='utf-8')\r\n--> 102         stdout_handle = OutputEventFilter(stdout_handle, self.event_callback, self.config.suppress_ansible_output, output_json=self.config.json_mode)\r\n    103 \r\n    104         if not isinstance(self.config.expect_passwords, collections.OrderedDict):\r\n\r\nAttributeError: 'RunnerConfig' object has no attribute 'suppress_ansible_output'\r\n```\r\n\r\nIt appears that RunnerConfig object is missing a variable called \"suppress_ansible_output\".", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/172", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/172/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/172/events", "html_url": "https://github.com/ansible/ansible-runner/issues/172", "id": 379315611, "node_id": "MDU6SXNzdWUzNzkzMTU2MTE=", "number": 172, "title": "then env/extravars are overwritten", "user": {"login": "hudecof", "id": 4510160, "node_id": "MDQ6VXNlcjQ1MTAxNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4510160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hudecof", "html_url": "https://github.com/hudecof", "followers_url": "https://api.github.com/users/hudecof/followers", "following_url": "https://api.github.com/users/hudecof/following{/other_user}", "gists_url": "https://api.github.com/users/hudecof/gists{/gist_id}", "starred_url": "https://api.github.com/users/hudecof/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hudecof/subscriptions", "organizations_url": "https://api.github.com/users/hudecof/orgs", "repos_url": "https://api.github.com/users/hudecof/repos", "events_url": "https://api.github.com/users/hudecof/events{/privacy}", "received_events_url": "https://api.github.com/users/hudecof/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-11-09T20:45:37Z", "updated_at": "2019-02-12T16:02:53Z", "closed_at": "2019-02-12T15:52:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Take code from the  docs and add extraverts variable\r\n\r\n```\r\nimport ansible_runner\r\nextravars = {\r\n    'ansible_connection': 'local',\r\n    'test': 'extra'\r\n}\r\n\r\nr = ansible_runner.run(private_data_dir='/tmp/demo', playbook='test.yml', extravars=extravars)\r\nprint(\"{}: {}\".format(r.status, r.rc))\r\n# successful: 0\r\nfor each_host_event in r.events:\r\n    print(each_host_event['event'])\r\nprint(\"Final status:\")\r\nprint(r.stats)\r\n```\r\n\r\ntake the demo directory from the repository, where `env/extravars` is\r\n\r\n```\r\n---\r\nansible_connection: local\r\ntest: val\r\n```\r\n\r\nrun the ansible runner and check the `env/extravars`\r\n\r\n```\r\n{\"test\": \"extra\", \"ansible_connection\": \"local\"}\r\n```\r\n\r\n\r\nAccording the docs in the code **https://ansible-runner.readthedocs.io/en/latest/_modules/ansible_runner/interface.html#run**\r\n\r\n```\r\n :param extravars: Extra variables to be passed to Ansible at runtime using ``-e``. Extra vars will also be\r\n                      read from ``env/extravars`` in ``private_data_dir``.\r\n```\r\n\r\nThis not true, they are not read at all and are overwritten.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/168", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/168/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/168/events", "html_url": "https://github.com/ansible/ansible-runner/issues/168", "id": 376386629, "node_id": "MDU6SXNzdWUzNzYzODY2Mjk=", "number": 168, "title": "Callback plugin `set_local()` is not thread-safe", "user": {"login": "ryanpetrello", "id": 214912, "node_id": "MDQ6VXNlcjIxNDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/214912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanpetrello", "html_url": "https://github.com/ryanpetrello", "followers_url": "https://api.github.com/users/ryanpetrello/followers", "following_url": "https://api.github.com/users/ryanpetrello/following{/other_user}", "gists_url": "https://api.github.com/users/ryanpetrello/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanpetrello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanpetrello/subscriptions", "organizations_url": "https://api.github.com/users/ryanpetrello/orgs", "repos_url": "https://api.github.com/users/ryanpetrello/repos", "events_url": "https://api.github.com/users/ryanpetrello/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanpetrello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wwitzel3", "id": 27317, "node_id": "MDQ6VXNlcjI3MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/27317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwitzel3", "html_url": "https://github.com/wwitzel3", "followers_url": "https://api.github.com/users/wwitzel3/followers", "following_url": "https://api.github.com/users/wwitzel3/following{/other_user}", "gists_url": "https://api.github.com/users/wwitzel3/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwitzel3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwitzel3/subscriptions", "organizations_url": "https://api.github.com/users/wwitzel3/orgs", "repos_url": "https://api.github.com/users/wwitzel3/repos", "events_url": "https://api.github.com/users/wwitzel3/events{/privacy}", "received_events_url": "https://api.github.com/users/wwitzel3/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wwitzel3", "id": 27317, "node_id": "MDQ6VXNlcjI3MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/27317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwitzel3", "html_url": "https://github.com/wwitzel3", "followers_url": "https://api.github.com/users/wwitzel3/followers", "following_url": "https://api.github.com/users/wwitzel3/following{/other_user}", "gists_url": "https://api.github.com/users/wwitzel3/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwitzel3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwitzel3/subscriptions", "organizations_url": "https://api.github.com/users/wwitzel3/orgs", "repos_url": "https://api.github.com/users/wwitzel3/repos", "events_url": "https://api.github.com/users/wwitzel3/events{/privacy}", "received_events_url": "https://api.github.com/users/wwitzel3/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-01T13:13:01Z", "updated_at": "2018-11-02T15:12:08Z", "closed_at": "2018-11-02T15:12:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "##### SUMMARY\r\n\r\nA mitogen user noticed a thread safety issue in our usage of `threading.local()` in the callback plugin.\r\n\r\nSee: https://github.com/ansible/awx/pull/2565\r\nSee: https://github.com/dw/mitogen/issues/400", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/167", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/167/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/167/events", "html_url": "https://github.com/ansible/ansible-runner/issues/167", "id": 375892385, "node_id": "MDU6SXNzdWUzNzU4OTIzODU=", "number": 167, "title": "passing in extravars python dict to runner should not require round-tripping via filesystem", "user": {"login": "dch", "id": 284368, "node_id": "MDQ6VXNlcjI4NDM2OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/284368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dch", "html_url": "https://github.com/dch", "followers_url": "https://api.github.com/users/dch/followers", "following_url": "https://api.github.com/users/dch/following{/other_user}", "gists_url": "https://api.github.com/users/dch/gists{/gist_id}", "starred_url": "https://api.github.com/users/dch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dch/subscriptions", "organizations_url": "https://api.github.com/users/dch/orgs", "repos_url": "https://api.github.com/users/dch/repos", "events_url": "https://api.github.com/users/dch/events{/privacy}", "received_events_url": "https://api.github.com/users/dch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-31T10:23:47Z", "updated_at": "2019-02-18T17:39:56Z", "closed_at": "2019-02-18T17:39:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using `ansible_runner.run()` as a function, the supplied dict should not need to be written out to the filesystem as `/extravars` but should be passed through cleanly and safely to  the runner.\r\n\r\n```py\r\ndef exec_ansible_runner(project, play, vars):\r\n    # vars must be namespaced within ansible\r\n    r = ansible_runner.run(\r\n        private_data_dir= project,\r\n        playbook= play,\r\n        extravars={'very_secret':vars})\r\n```\r\n\r\nI can't follow through https://github.com/ansible/ansible-runner/blob/master/ansible_runner/runner_config.py#L173-L175 where the self object's `extra_vars` dict ends up getting written back out to disk but it presumably is avoidable. Where does this happen?\r\n\r\nMy read of the docs is that direct inputs to the function would not require the Runner Input Directory Hierarchy (viz \"or\"):\r\n\r\n```\r\nrun() helper function\r\n\r\nansible_runner.interface.run()\r\n\r\nWhen called, this function will take the inputs (either provided as direct inputs to the function or from the Runner Input Directory Hierarchy), and execute Ansible. It will run in the foreground and return the Runner object when finished.\r\n```\r\n\r\nThis was discussed in https://github.com/ansible/ansible-runner/issues/46 and agreed to raise separately.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/166", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/166/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/166/events", "html_url": "https://github.com/ansible/ansible-runner/issues/166", "id": 375825869, "node_id": "MDU6SXNzdWUzNzU4MjU4Njk=", "number": 166, "title": "Event Handler does not work in Docker", "user": {"login": "bpereto", "id": 1131885, "node_id": "MDQ6VXNlcjExMzE4ODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1131885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpereto", "html_url": "https://github.com/bpereto", "followers_url": "https://api.github.com/users/bpereto/followers", "following_url": "https://api.github.com/users/bpereto/following{/other_user}", "gists_url": "https://api.github.com/users/bpereto/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpereto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpereto/subscriptions", "organizations_url": "https://api.github.com/users/bpereto/orgs", "repos_url": "https://api.github.com/users/bpereto/repos", "events_url": "https://api.github.com/users/bpereto/events{/privacy}", "received_events_url": "https://api.github.com/users/bpereto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-31T07:05:05Z", "updated_at": "2018-12-13T16:00:35Z", "closed_at": "2018-12-13T16:00:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nAwesome work.\r\n\r\n### Problem:\r\nAnsible Playbook in a docker container executes, but does not call the event handler.\r\n\r\n### Description:\r\nI want the ansible runner to execute ansible in a docker container.  For that I define a custom binary to execute:\r\n\r\n`docker-ansible-playbook`\r\n```\r\n#!/bin/bash\r\n\r\ndocker run -t  -v $(pwd):/ansible/playbooks  ansible-2.6 -vv $@\r\n```\r\n\r\nExample script of ansible-runner usage:\r\n```\r\nimport ansible_runner\r\nimport os\r\n\r\ndef cancel_callback():\r\n    print('** cancel_callback **')\r\n    return False\r\n\r\ndef status_handler(status):\r\n    print('** status_handler **')\r\n    print(status)\r\n\r\ndef event_handler(event):\r\n    print('** event_handler **')\r\n    print(event)\r\n\r\nbinary = './docker-ansible-playbook'\r\n#binary = 'ansible-playbook'\r\nr = ansible_runner.run(private_data_dir='./',\r\n                       playbook='test.yml',\r\n                       status_handler=status_handler,\r\n                       event_handler=event_handler,\r\n                       cancel_callback=cancel_callback,\r\n                       binary=binary)\r\n\r\nprint(\"{}: {}\".format(r.status, r.rc))\r\nprint(r.stats)\r\noutput = r.stdout.read()\r\n```\r\n\r\n### Actual Result:\r\n* no event data is printed / event-handler is not executed\r\n* Ansible Runner raises an Exception \"no event data found\"\r\n\r\n### Fazit\r\nAs far I can tell the issue is that the regex pattern for event handling does not match:\r\nhttps://github.com/ansible/ansible-runner/blob/master/ansible_runner/utils.py#L188\r\n\r\nEvent Bytes with `ansible-playbook`:\r\n`\\x1b[KeyJ1dWlkIjogImU0Y2EwMWExLWRjMDMtNDczOC05ZWU0LTNlYjgzY2FmZThhNSJ9\\x1b[64D\\x1b[K\\x1b[Ke30=\\x1b[4D\\x1b[K ...`\r\n\r\nEvent Bytes with `docker-ansible-playbook`:\r\n`\\x1b[0m\\r\\n\\x1b[0;32m  ... `\r\n\r\nDocker seems to not give back the ansi clear line code, so the base64 encoded event uuid is missing.\r\n\r\nAny idea?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/163", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/163/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/163/events", "html_url": "https://github.com/ansible/ansible-runner/issues/163", "id": 374521407, "node_id": "MDU6SXNzdWUzNzQ1MjE0MDc=", "number": 163, "title": "Add support for v2_runner_on_start callback", "user": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-26T19:40:03Z", "updated_at": "2018-11-02T15:03:17Z", "closed_at": "2018-11-02T15:03:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Ref: https://github.com/ansible/ansible/pull/47684\r\n\r\nRef: https://github.com/ansible/awx/issues/2539\r\n\r\nThis is targeted at Ansible 2.8 so we'll need to add this in asap.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/154", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/154/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/154/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/154/events", "html_url": "https://github.com/ansible/ansible-runner/issues/154", "id": 369568339, "node_id": "MDU6SXNzdWUzNjk1NjgzMzk=", "number": 154, "title": "ansible-runner is buffering output", "user": {"login": "jmontleon", "id": 1850500, "node_id": "MDQ6VXNlcjE4NTA1MDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1850500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmontleon", "html_url": "https://github.com/jmontleon", "followers_url": "https://api.github.com/users/jmontleon/followers", "following_url": "https://api.github.com/users/jmontleon/following{/other_user}", "gists_url": "https://api.github.com/users/jmontleon/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmontleon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmontleon/subscriptions", "organizations_url": "https://api.github.com/users/jmontleon/orgs", "repos_url": "https://api.github.com/users/jmontleon/repos", "events_url": "https://api.github.com/users/jmontleon/events{/privacy}", "received_events_url": "https://api.github.com/users/jmontleon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-10-12T14:10:04Z", "updated_at": "2018-10-16T17:56:26Z", "closed_at": "2018-10-16T17:55:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "ansible-runner is buffering output. Inside containers I see task output coming in huge chunks, rather than as they occur. Often they never return and the container just hangs forever.\r\n\r\nPreceding the ansible-runner command with  `export PYTHONUNBUFFERED=True` causes output to come normally.\r\n\r\nWe can obviously workaround this in our entrypoint script, but thought it might be beneficial to bring it up so that it can maybe be dealt with inside ansible-runner.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/152", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/152/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/152/events", "html_url": "https://github.com/ansible/ansible-runner/issues/152", "id": 368861001, "node_id": "MDU6SXNzdWUzNjg4NjEwMDE=", "number": 152, "title": "Ansible Runner doesn't respect `--roles-path` arg", "user": {"login": "dymurray", "id": 16140195, "node_id": "MDQ6VXNlcjE2MTQwMTk1", "avatar_url": "https://avatars2.githubusercontent.com/u/16140195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dymurray", "html_url": "https://github.com/dymurray", "followers_url": "https://api.github.com/users/dymurray/followers", "following_url": "https://api.github.com/users/dymurray/following{/other_user}", "gists_url": "https://api.github.com/users/dymurray/gists{/gist_id}", "starred_url": "https://api.github.com/users/dymurray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dymurray/subscriptions", "organizations_url": "https://api.github.com/users/dymurray/orgs", "repos_url": "https://api.github.com/users/dymurray/repos", "events_url": "https://api.github.com/users/dymurray/events{/privacy}", "received_events_url": "https://api.github.com/users/dymurray/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-10-10T21:24:17Z", "updated_at": "2018-10-16T19:51:59Z", "closed_at": "2018-10-16T19:51:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Version\r\n```\r\nansible-runner (1.1.1)\r\nansible-runner-http (1.0.0)\r\n```\r\nRunning ansible-runner with `--roles-path` set seems to do nothing:\r\n\r\n```\r\n[dymurray@pups bitcoin-sv-operator]$ ansible-runner -vv --role Bitd --roles-path /home/dymurray/go/src/github.com/dymurray/opsdk/bitcoin-sv-operator/roles/ --hosts localhost run demo        \r\nansible-playbook 2.6.5                                                                                                                                                                        \r\n  config file = /etc/ansible/ansible.cfg                                                                                                                                                      \r\n  configured module search path = [u'/home/dymurray/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']                                                                         \r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible                                                                                                                   \r\n  executable location = /usr/bin/ansible-playbook                                                                                                                                             \r\n  python version = 2.7.15 (default, May 16 2018, 17:50:09) [GCC 8.1.1 20180502 (Red Hat 8.1.1-1)]                                                                                             \r\nUsing /etc/ansible/ansible.cfg as config file                                                                                                                                                 \r\n                                                                                                                                                                                              \r\n [WARNING]: Unable to parse /home/dymurray/go/src/github.com/dymurray/opsdk                                                                                                                   \r\n/bitcoin-sv-operator/demo/inventory as an inventory source                                                                                                                                    \r\n                                                                                                                                                                                              \r\n                                                                                                                                                                                              \r\n [WARNING]: No inventory was parsed, only implicit localhost is available                                                                                                                     \r\n                                                                                                                                                                                              \r\n                                                                                                                                                                                              \r\n [WARNING]: provided hosts list is empty, only localhost is available. Note                                                                                                                   \r\nthat the implicit localhost does not match 'all'                                                                                                                                              \r\n                                                                              \r\n                                                       \r\nERROR! the role 'Bitd' was not found in /home/dymurray/go/src/github.com/dymurray/opsdk/bitcoin-sv-operator/demo/project/roles:/home/dymurray/.ansible/roles:/usr/share/ansible/roles:/etc/an$\r\nible/roles:/home/dymurray/go/src/github.com/dymurray/opsdk/bitcoin-sv-operator/demo/project\r\n```\r\n\r\nWhen I run it with `ANSIBLE_ROLES_PATH` set to the same path everything works:\r\n```\r\n[dymurray@pups bitcoin-sv-operator]$ ANSIBLE_ROLES_PATH=/home/dymurray/go/src/github.com/dymurray/opsdk/bitcoin-sv-operator/roles/ ansible-runner -vv --role Bitd --roles-path /home/[27/1434]\r\ngo/src/github.com/dymurray/opsdk/bitcoin-sv-operator/roles/ --hosts localhost run demo                                                                                                        \r\nansible-playbook 2.6.5                                                                                                                                                                        \r\n  config file = /etc/ansible/ansible.cfg                                                                                                                                                      \r\n  configured module search path = [u'/home/dymurray/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']                                                                         \r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 2.7.15 (default, May 16 2018, 17:50:09) [GCC 8.1.1 20180502 (Red Hat 8.1.1-1)]                                                                                            \r\nUsing /etc/ansible/ansible.cfg as config file\r\n\r\n [WARNING]: Unable to parse /home/dymurray/go/src/github.com/dymurray/opsdk                                                                                                                  \r\n/bitcoin-sv-operator/demo/inventory as an inventory source                                                                                                                                   \r\n                                                                                                                                                                                             \r\n                                                                                                                                                                                             \r\n [WARNING]: No inventory was parsed, only implicit localhost is available                                                                                                                    \r\n                                                                                                                                                                                             \r\n                                                                                                                                                                                             \r\n [WARNING]: provided hosts list is empty, only localhost is available. Note                                                                                                                  \r\nthat the implicit localhost does not match 'all'                                                                                                                                             \r\n                                                                                                                                                                                             \r\n\r\n\r\n\r\nPLAYBOOK: 42130f2e83d649b18e21e8df7e2b9141 *************************************\r\n1 plays in /home/dymurray/go/src/github.com/dymurray/opsdk/bitcoin-sv-operator/demo/project/42130f2e83d649b18e21e8df7e2b9141\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/150", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/150/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/150/events", "html_url": "https://github.com/ansible/ansible-runner/issues/150", "id": 366785955, "node_id": "MDU6SXNzdWUzNjY3ODU5NTU=", "number": 150, "title": "Vault with ansible_runner.interface.run : Attempting to decrypt but no vault secrets found", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-04T13:19:01Z", "updated_at": "2018-10-04T13:32:10Z", "closed_at": "2018-10-04T13:32:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "## The Problem\r\n\r\nI am writing a wrapper tool to run my playbooks and have the following code:\r\n\r\n```python\r\n    run(\r\n        playbook=config.playbook_path(env),\r\n        inventory=config.inventory_path,\r\n        roles_path=config.role_paths,\r\n    )\r\n```\r\nThe arguments being passed in look like:\r\n\r\n```bash\r\n(Pdb) from pprint import pprint\r\n(Pdb) pprint(runner_kwargs)\r\n{'inventory': '/home/foobar/.ansible/foobar-play/inventories/inventory',\r\n 'playbook': '/home/foobar/.ansible/foobar-play/playbooks/stage/deploy.yml',\r\n 'roles_path': ['/home/foobar/.ansible/foobar-play/external-roles']}\r\n```\r\n\r\nNow, in the play, I have a vault encrypted value:\r\n\r\n```yaml\r\n---\r\n\r\n- hosts: foobar.org\r\n  tasks:\r\n    - name: Deploy Django.\r\n      vars:\r\n        # cut ... the rest of the vars ...\r\n        django_database_password: !vault |\r\n          $ANSIBLE_VAULT;1.1;AES256\r\n          65363564633836666137626534386434616463303136353535613231333431336631623566623334\r\n          3763356136353064323038343231303766633232393932370a303834356134626266343261613061\r\n          63663865363939643631633364313764333333356164656463623265633565626565323365373862\r\n          6236613838373330300a346636653535626538623239643638383038323563333966353534656530\r\n          35636634663433316636666137656166323664336239376366313338316438306661303465376435\r\n          38653262316361396166353061386662653039623930376332643434353566343435373165666666\r\n          666234643335333465643833353836663933\r\n      import_role:\r\n        name: django-deploy\r\n```\r\n\r\nNow, when I run the play via the runner, I see that:\r\n\r\n```bash\r\n\r\nTASK [django-deploy : Create the project database.] ***********************\r\nfatal: [foobar.org]: FAILED! => {\"msg\": \"Attempting to decrypt but no vault secrets found\"}\r\n```\r\n\r\nIn my `/home/foobar/.ansible/foobar-play/inventories/inventory`, I have a line:\r\n\r\n```ini\r\n[defaults]\r\nvault_password_file=bin/open-vault\r\n```\r\n\r\nAnd in this script, I do a `pass show my-cool-password`.\r\n\r\n---\r\n\r\n## Notes\r\n\r\nI'm still a bit confused by this. Is it that my runner can't pick up the vault password or it doesn't know actually where the role variables are? Is there some configuration that I should be passing into the runner? I can't much mention of the vault being used in the code base besides the `env/passwords` prompts.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/148", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/148/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/148/events", "html_url": "https://github.com/ansible/ansible-runner/issues/148", "id": 364627794, "node_id": "MDU6SXNzdWUzNjQ2Mjc3OTQ=", "number": 148, "title": "Ansible Runner Image Vulnerabilities ", "user": {"login": "shawn-hurley", "id": 1891063, "node_id": "MDQ6VXNlcjE4OTEwNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1891063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shawn-hurley", "html_url": "https://github.com/shawn-hurley", "followers_url": "https://api.github.com/users/shawn-hurley/followers", "following_url": "https://api.github.com/users/shawn-hurley/following{/other_user}", "gists_url": "https://api.github.com/users/shawn-hurley/gists{/gist_id}", "starred_url": "https://api.github.com/users/shawn-hurley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shawn-hurley/subscriptions", "organizations_url": "https://api.github.com/users/shawn-hurley/orgs", "repos_url": "https://api.github.com/users/shawn-hurley/repos", "events_url": "https://api.github.com/users/shawn-hurley/events{/privacy}", "received_events_url": "https://api.github.com/users/shawn-hurley/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-09-27T19:48:59Z", "updated_at": "2018-10-10T16:52:38Z", "closed_at": "2018-10-10T14:12:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://quay.io/repository/water-hole/ansible-operator/manifest/sha256:dc695d41c91495fac944657ce51c0449b8aa56e274514e9e59476f00e168b281?tab=vulnerabilities\r\n\r\nYou can see that all of them come from the line:\r\n> file:6340c690b08865d7eb84a36050a0ab0e8effc2b010a4ccb20b810153a97a9228 in /", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/145", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/145/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/145/events", "html_url": "https://github.com/ansible/ansible-runner/issues/145", "id": 364041183, "node_id": "MDU6SXNzdWUzNjQwNDExODM=", "number": 145, "title": "SSH Issue connecting", "user": {"login": "drdouglasghd", "id": 101195, "node_id": "MDQ6VXNlcjEwMTE5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/101195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drdouglasghd", "html_url": "https://github.com/drdouglasghd", "followers_url": "https://api.github.com/users/drdouglasghd/followers", "following_url": "https://api.github.com/users/drdouglasghd/following{/other_user}", "gists_url": "https://api.github.com/users/drdouglasghd/gists{/gist_id}", "starred_url": "https://api.github.com/users/drdouglasghd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drdouglasghd/subscriptions", "organizations_url": "https://api.github.com/users/drdouglasghd/orgs", "repos_url": "https://api.github.com/users/drdouglasghd/repos", "events_url": "https://api.github.com/users/drdouglasghd/events{/privacy}", "received_events_url": "https://api.github.com/users/drdouglasghd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-26T13:51:44Z", "updated_at": "2018-09-29T04:33:52Z", "closed_at": "2018-09-28T13:45:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to test the runner locally, and I can't seem to get it to work. \r\n\r\nbind: File name too long\r\nunix_listener: cannot bind to path: /projects/projectx/artifacts/e55fccad-d16d-4738-906f-f6bcc51b49e1/ssh_auth.sock\r\n\r\nThis looks a lot like https://github.com/ansible/ansible/issues/11536\r\nBut my changes to the ansible.cfg don't seem to helping or taking. \r\n\r\nAnyone else had this issue?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/142", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/142/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/142/events", "html_url": "https://github.com/ansible/ansible-runner/issues/142", "id": 363247230, "node_id": "MDU6SXNzdWUzNjMyNDcyMzA=", "number": 142, "title": "role-vars needs to accept data types other than string", "user": {"login": "trozet", "id": 10548525, "node_id": "MDQ6VXNlcjEwNTQ4NTI1", "avatar_url": "https://avatars2.githubusercontent.com/u/10548525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trozet", "html_url": "https://github.com/trozet", "followers_url": "https://api.github.com/users/trozet/followers", "following_url": "https://api.github.com/users/trozet/following{/other_user}", "gists_url": "https://api.github.com/users/trozet/gists{/gist_id}", "starred_url": "https://api.github.com/users/trozet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trozet/subscriptions", "organizations_url": "https://api.github.com/users/trozet/orgs", "repos_url": "https://api.github.com/users/trozet/repos", "events_url": "https://api.github.com/users/trozet/events{/privacy}", "received_events_url": "https://api.github.com/users/trozet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-24T17:33:56Z", "updated_at": "2018-09-28T14:19:07Z", "closed_at": "2018-09-28T14:19:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently role-vars are parsed as a bunch of key=value pairs where value is always interpreted to be a string. This doesn't work when a user wants to provide role-vars which have more complex data types like a list, dictionary, boolean, etc. The role-vars argument should also be able to take in these kinds of data types and set them the same way as role-vars would be read from a yaml vars file.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/141", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/141/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/141/events", "html_url": "https://github.com/ansible/ansible-runner/issues/141", "id": 363200634, "node_id": "MDU6SXNzdWUzNjMyMDA2MzQ=", "number": 141, "title": "Different data passed to status_handler plugin vs kwargs", "user": {"login": "elmarx", "id": 250877, "node_id": "MDQ6VXNlcjI1MDg3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/250877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elmarx", "html_url": "https://github.com/elmarx", "followers_url": "https://api.github.com/users/elmarx/followers", "following_url": "https://api.github.com/users/elmarx/following{/other_user}", "gists_url": "https://api.github.com/users/elmarx/gists{/gist_id}", "starred_url": "https://api.github.com/users/elmarx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elmarx/subscriptions", "organizations_url": "https://api.github.com/users/elmarx/orgs", "repos_url": "https://api.github.com/users/elmarx/repos", "events_url": "https://api.github.com/users/elmarx/events{/privacy}", "received_events_url": "https://api.github.com/users/elmarx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-24T15:33:31Z", "updated_at": "2018-10-22T19:59:57Z", "closed_at": "2018-10-22T19:59:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nAs you can see from my PR, I'm using `ansible.runner.run(status_handler=my_handler)`. I noticed that [Runner.status_callback](https://github.com/ansible/ansible-runner/blob/ce3c90f97fc7c7e7bdc6a53494503b9a907875c0/ansible_runner/runner.py#L76) passes different \"data\" to `status_handler` defined via **kwargs** vs `status_handler` defined in **plugins**.\r\nBasically, plugins get a dict with *status* and *runner_ident*, opposed to the \"kwargs-status_handler\" that only gets the status.\r\nIs there any reasoning behind? For me this looks odd, I'd like to get the runner-ident, too. \r\n\r\nIf you agree to change this, I could create another PR if you like.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/136", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/136/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/136/events", "html_url": "https://github.com/ansible/ansible-runner/issues/136", "id": 358146463, "node_id": "MDU6SXNzdWUzNTgxNDY0NjM=", "number": 136, "title": "unix listener too long for Unix domain socket", "user": {"login": "Daniel-Pivonka", "id": 22037319, "node_id": "MDQ6VXNlcjIyMDM3MzE5", "avatar_url": "https://avatars3.githubusercontent.com/u/22037319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Daniel-Pivonka", "html_url": "https://github.com/Daniel-Pivonka", "followers_url": "https://api.github.com/users/Daniel-Pivonka/followers", "following_url": "https://api.github.com/users/Daniel-Pivonka/following{/other_user}", "gists_url": "https://api.github.com/users/Daniel-Pivonka/gists{/gist_id}", "starred_url": "https://api.github.com/users/Daniel-Pivonka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Daniel-Pivonka/subscriptions", "organizations_url": "https://api.github.com/users/Daniel-Pivonka/orgs", "repos_url": "https://api.github.com/users/Daniel-Pivonka/repos", "events_url": "https://api.github.com/users/Daniel-Pivonka/events{/privacy}", "received_events_url": "https://api.github.com/users/Daniel-Pivonka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-07T17:14:58Z", "updated_at": "2018-09-18T13:15:33Z", "closed_at": "2018-09-18T13:15:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "when running a playbook and the path of environment is too long the playbook will fail to run resulting in the error below placed in the stdout of the run\r\n\r\n`unix_listener: path \"/home/dpivonka/Documents/paul/ansible-runner-service/samples/artifacts/78a310a2-b118-11e8-975a-54e1ada8887a/ssh_auth.sock\" too long for Unix domain socket`\r\n\r\nmoving the environment to a shorter path resolves the issue.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/132", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/132/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/132/events", "html_url": "https://github.com/ansible/ansible-runner/issues/132", "id": 354948412, "node_id": "MDU6SXNzdWUzNTQ5NDg0MTI=", "number": 132, "title": "Incorrect PYTHONPATH set", "user": {"login": "mattclay", "id": 806360, "node_id": "MDQ6VXNlcjgwNjM2MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/806360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattclay", "html_url": "https://github.com/mattclay", "followers_url": "https://api.github.com/users/mattclay/followers", "following_url": "https://api.github.com/users/mattclay/following{/other_user}", "gists_url": "https://api.github.com/users/mattclay/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattclay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattclay/subscriptions", "organizations_url": "https://api.github.com/users/mattclay/orgs", "repos_url": "https://api.github.com/users/mattclay/repos", "events_url": "https://api.github.com/users/mattclay/events{/privacy}", "received_events_url": "https://api.github.com/users/mattclay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-29T00:11:23Z", "updated_at": "2018-09-06T21:18:52Z", "closed_at": "2018-09-06T21:18:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The `PYTHONPATH` environment variable is set incorrectly:\r\n\r\nhttps://github.com/ansible/ansible-runner/blob/7fa71c4f9615a632513829a1c1345ba14e978667/ansible_runner/runner_config.py#L131\r\n\r\nIf we have the following values:\r\n\r\n- `PYTHONPATH` = `/some/dir`\r\n- `callback_dir` = `/another/dir`\r\n\r\nThis will result in a `PYTHONPATH` of `/some/dir/another/dir:`\r\n\r\nThe code should probably be something like this instead:\r\n\r\n```python\r\n        python_path = self.env.get('PYTHONPATH', '')\r\n        if python_path:\r\n            python_path += ':'\r\n        python_path += callback_dir + ':'\r\n```\r\n\r\nThe presence of the trailing `:` may also be incorrect, as that includes the current working directory. Hopefully someone who knows ansible-runner better will know if that is needed or not.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/131", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/131/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/131/events", "html_url": "https://github.com/ansible/ansible-runner/issues/131", "id": 354901319, "node_id": "MDU6SXNzdWUzNTQ5MDEzMTk=", "number": 131, "title": "event handler callback isn't passed the runner object", "user": {"login": "pcuzner", "id": 3703087, "node_id": "MDQ6VXNlcjM3MDMwODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3703087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcuzner", "html_url": "https://github.com/pcuzner", "followers_url": "https://api.github.com/users/pcuzner/followers", "following_url": "https://api.github.com/users/pcuzner/following{/other_user}", "gists_url": "https://api.github.com/users/pcuzner/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcuzner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcuzner/subscriptions", "organizations_url": "https://api.github.com/users/pcuzner/orgs", "repos_url": "https://api.github.com/users/pcuzner/repos", "events_url": "https://api.github.com/users/pcuzner/events{/privacy}", "received_events_url": "https://api.github.com/users/pcuzner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-08-28T20:58:12Z", "updated_at": "2019-06-07T12:52:11Z", "closed_at": "2018-09-06T21:19:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "In my project I enable the dev to query events for a playbook - but this query currently stems from a listdir against the artifacts directory - which could be 'expensive'. \r\n\r\nI'd like to use the event_handler callback to populate a cache, so the cache of recent events could satisfy these queries. The problem is that the callback only passes the event data not the runner object's \"ident\".\r\n\r\nDoes it make sense to pass 'self' to the event_handler callback, so the callback function can get access to runner.config.ident? If so, I'm happy to raise a PR", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/128", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/128/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/128/events", "html_url": "https://github.com/ansible/ansible-runner/issues/128", "id": 352532856, "node_id": "MDU6SXNzdWUzNTI1MzI4NTY=", "number": 128, "title": "--inventory option is ignored", "user": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-08-21T13:14:35Z", "updated_at": "2018-09-17T13:49:19Z", "closed_at": "2018-09-17T13:49:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It seems that the inventory option is not used.  After looking into the unit tests it seems they were using the default inventory with localhost and not testing the inventory option.\r\n\r\nHere are the failing tests:\r\n\r\nhttps://travis-ci.org/benthomasson/ansible-runner-1/builds/418494338", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/122", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/122/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/122/events", "html_url": "https://github.com/ansible/ansible-runner/issues/122", "id": 350877730, "node_id": "MDU6SXNzdWUzNTA4Nzc3MzA=", "number": 122, "title": "stdout isn't available for background jobs until the job is finished", "user": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wwitzel3", "id": 27317, "node_id": "MDQ6VXNlcjI3MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/27317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwitzel3", "html_url": "https://github.com/wwitzel3", "followers_url": "https://api.github.com/users/wwitzel3/followers", "following_url": "https://api.github.com/users/wwitzel3/following{/other_user}", "gists_url": "https://api.github.com/users/wwitzel3/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwitzel3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwitzel3/subscriptions", "organizations_url": "https://api.github.com/users/wwitzel3/orgs", "repos_url": "https://api.github.com/users/wwitzel3/repos", "events_url": "https://api.github.com/users/wwitzel3/events{/privacy}", "received_events_url": "https://api.github.com/users/wwitzel3/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wwitzel3", "id": 27317, "node_id": "MDQ6VXNlcjI3MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/27317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwitzel3", "html_url": "https://github.com/wwitzel3", "followers_url": "https://api.github.com/users/wwitzel3/followers", "following_url": "https://api.github.com/users/wwitzel3/following{/other_user}", "gists_url": "https://api.github.com/users/wwitzel3/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwitzel3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwitzel3/subscriptions", "organizations_url": "https://api.github.com/users/wwitzel3/orgs", "repos_url": "https://api.github.com/users/wwitzel3/repos", "events_url": "https://api.github.com/users/wwitzel3/events{/privacy}", "received_events_url": "https://api.github.com/users/wwitzel3/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-08-15T16:32:52Z", "updated_at": "2018-10-16T17:56:47Z", "closed_at": "2018-10-16T17:56:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Also... if a job is cancelled then the stdout will never be available.\r\n\r\nJob events are available however.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/121", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/121/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/121/events", "html_url": "https://github.com/ansible/ansible-runner/issues/121", "id": 350876897, "node_id": "MDU6SXNzdWUzNTA4NzY4OTc=", "number": 121, "title": "cancelling a job via stop will leave the pid behind", "user": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-15T16:30:23Z", "updated_at": "2020-06-09T20:05:44Z", "closed_at": "2020-06-09T20:05:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This prevents another job from being started", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/117", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/117/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/117/events", "html_url": "https://github.com/ansible/ansible-runner/issues/117", "id": 349130744, "node_id": "MDU6SXNzdWUzNDkxMzA3NDQ=", "number": 117, "title": "Implement bubblewrap for process isolation", "user": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wwitzel3", "id": 27317, "node_id": "MDQ6VXNlcjI3MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/27317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwitzel3", "html_url": "https://github.com/wwitzel3", "followers_url": "https://api.github.com/users/wwitzel3/followers", "following_url": "https://api.github.com/users/wwitzel3/following{/other_user}", "gists_url": "https://api.github.com/users/wwitzel3/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwitzel3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwitzel3/subscriptions", "organizations_url": "https://api.github.com/users/wwitzel3/orgs", "repos_url": "https://api.github.com/users/wwitzel3/repos", "events_url": "https://api.github.com/users/wwitzel3/events{/privacy}", "received_events_url": "https://api.github.com/users/wwitzel3/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wwitzel3", "id": 27317, "node_id": "MDQ6VXNlcjI3MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/27317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwitzel3", "html_url": "https://github.com/wwitzel3", "followers_url": "https://api.github.com/users/wwitzel3/followers", "following_url": "https://api.github.com/users/wwitzel3/following{/other_user}", "gists_url": "https://api.github.com/users/wwitzel3/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwitzel3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwitzel3/subscriptions", "organizations_url": "https://api.github.com/users/wwitzel3/orgs", "repos_url": "https://api.github.com/users/wwitzel3/repos", "events_url": "https://api.github.com/users/wwitzel3/events{/privacy}", "received_events_url": "https://api.github.com/users/wwitzel3/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-09T13:36:09Z", "updated_at": "2018-12-03T19:53:47Z", "closed_at": "2018-12-03T19:53:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The original AWX/Tower isolated execution code supported prefixing the command to run under bubblewrap. This was removed when `Runner` was created but this should go back in.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/112", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/112/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/112/events", "html_url": "https://github.com/ansible/ansible-runner/issues/112", "id": 348765485, "node_id": "MDU6SXNzdWUzNDg3NjU0ODU=", "number": 112, "title": "implement project directory execution isolation", "user": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-08-08T15:00:53Z", "updated_at": "2019-02-21T19:20:33Z", "closed_at": "2019-02-21T19:20:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The idea behind this is that when Runner starts execution it will copy the project directory and execute the runner invocation in that.\r\n\r\nThe issue that leads to this arises when multiple invocations of Runner are sharing the project directory... if they are managing the directory (such as checking out galaxy roles, etc) then they can end up stepping on each other's toes", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/111", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/111/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/111/events", "html_url": "https://github.com/ansible/ansible-runner/issues/111", "id": 348757755, "node_id": "MDU6SXNzdWUzNDg3NTc3NTU=", "number": 111, "title": "process termination sometimes leaves zombie processes", "user": {"login": "matburt", "id": 89544, "node_id": "MDQ6VXNlcjg5NTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/89544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matburt", "html_url": "https://github.com/matburt", "followers_url": "https://api.github.com/users/matburt/followers", "following_url": "https://api.github.com/users/matburt/following{/other_user}", "gists_url": "https://api.github.com/users/matburt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matburt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matburt/subscriptions", "organizations_url": "https://api.github.com/users/matburt/orgs", "repos_url": "https://api.github.com/users/matburt/repos", "events_url": "https://api.github.com/users/matburt/events{/privacy}", "received_events_url": "https://api.github.com/users/matburt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-08T14:43:22Z", "updated_at": "2018-08-10T18:00:58Z", "closed_at": "2018-08-10T18:00:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/109", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/109/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/109/events", "html_url": "https://github.com/ansible/ansible-runner/issues/109", "id": 348445024, "node_id": "MDU6SXNzdWUzNDg0NDUwMjQ=", "number": 109, "title": "Standard events no longer received on event_handler (1.0.5)", "user": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-07T18:53:26Z", "updated_at": "2018-08-08T14:39:04Z", "closed_at": "2018-08-08T14:39:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This commit a00919733b4bbbae248746a2118a7e4a0c0d7e00 causes the reconstructed events on the event_handler to be lost.  Only partial events are available. \r\n\r\nBefore this commit I received events like this:\r\n\r\n```\r\n{'counter': 23,\r\n u'created': u'2018-08-06T20:02:58.849839',\r\n 'end_line': 31,\r\n u'event': u'playbook_on_task_start',\r\n u'event_data': {u'is_conditional': False,\r\n                 u'name': u'pause_for_kernel',\r\n                 u'pid': 77031,\r\n                 u'play': u'localhost',\r\n                 u'play_pattern': u'localhost',\r\n                 u'play_uuid': u'9801a79a-dd33-c9e6-7a97-000000000006',\r\n                 u'playbook': u'playbook.yml',\r\n                 u'playbook_uuid': u'44730e6f-e077-4ad0-bd00-a819c7fcaaf8',\r\n                 u'role': u'hello',\r\n                 u'task': u'pause_for_kernel',\r\n                 u'task_action': u'pause_for_kernel',\r\n                 u'task_args': u'task_num=1, host=127.0.0.1, port=50675',\r\n                 u'task_path': u'/private/var/folders/p8/mttm7w913kq_v0wyfl9khlpc0000gn/T/ansible_kernel_playbookXmz9Pj/project/next_task1.yml:4',\r\n                 u'task_uuid': u'9801a79a-dd33-c9e6-7a97-00000000002c'},\r\n```\r\n\r\nAfter this commit I receive events like this:\r\n```\r\n{'counter': 15,\r\n 'end_line': 16,\r\n 'start_line': 15,\r\n 'stdout': u'\\x1b[0;32mok: [localhost]\\x1b[0m',\r\n u'uuid': u'6365cd14-fca4-4515-b32a-2bd3b118491c'}\r\n{'counter': 16,\r\n 'end_line': 18,\r\n 'start_line': 16,\r\n 'stdout': u'\\r\\nTASK [include_tasks] ***********************************************************',\r\n u'uuid': u'9801a79a-dd33-7cb8-160d-00000000000c'}\r\n{'counter': 17,\r\n 'end_line': 18,\r\n 'start_line': 18,\r\n 'stdout': '',\r\n u'uuid': u'9cca7d64-ad6b-4138-a66b-2b7c941d831a'}\r\n{'counter': 18,\r\n 'end_line': 19,\r\n 'start_line': 18,\r\n 'stdout': u'\\x1b[0;36mincluded: /private/var/folders/p8/mttm7w913kq_v0wyfl9khlpc0000gn/T/ansible_kernel_playbookAuybIf/project/next_task0.yml for localhost\\x1b[0m',\r\n u'uuid': u'047735ba-01dd-41bc-a471-70c3b8ae3bf1'}\r\n{'counter': 19,\r\n 'end_line': 21,\r\n 'start_line': 19,\r\n 'stdout': u'\\r\\nTASK [debug] *******************************************************************',\r\n u'uuid': u'9801a79a-dd33-7cb8-160d-000000000020'}\r\n{'counter': 20,\r\n 'end_line': 24,\r\n 'start_line': 21,\r\n 'stdout': u'\\x1b[0;32mok: [localhost] => {\\x1b[0m\\r\\n\\x1b[0;32m    \"msg\": \"hi\"\\x1b[0m\\r\\n\\x1b[0;32m}\\x1b[0m',\r\n u'uuid': u'd9530564-e8f8-4104-a0ab-55cecb3f82e2'}\r\n{'counter': 21,\r\n 'end_line': 26,\r\n 'start_line': 24,\r\n 'stdout': u'\\r\\nTASK [pause_for_kernel] ********************************************************',\r\n u'uuid': u'9801a79a-dd33-7cb8-160d-000000000021'}\r\n```\r\n\r\nThis appears to be the problem from ansble_runner/runner.py:\r\n\r\n```\r\n@@ -37,6 +37,11 @@ class Runner(object):\r\n         later use\r\n         '''\r\n         if 'uuid' in event_data:\r\n+            should_write = True\r\n+            if self.event_handler is not None:\r\n+                should_write = self.event_handler(event_data)\r\n+            if not should_write:\r\n+                return\r\n             filename = '{}-partial.json'.format(event_data['uuid'])\r\n             partial_filename = os.path.join(self.config.artifact_dir,\r\n                                             'job_events',\r\n@@ -53,8 +58,6 @@ class Runner(object):\r\n                     json.dump(event_data, write_file)\r\n                 if self.remove_partials:\r\n                     os.remove(partial_filename)\r\n-                if self.event_handler is not None:\r\n-                    self.event_handler(event_data)\r\n             except IOError as e:\r\n                 debug(\"Failed writing event data: {}\".format(e))\r\n \r\n\r\n```\r\n\r\nEvent handler is called too early.   The additional data for the event is not being copied into the event data structure.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/107", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/107/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/107/events", "html_url": "https://github.com/ansible/ansible-runner/issues/107", "id": 348346687, "node_id": "MDU6SXNzdWUzNDgzNDY2ODc=", "number": 107, "title": "Role name is included in playbook tasks after a role.", "user": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-07T14:28:31Z", "updated_at": "2018-08-08T14:41:43Z", "closed_at": "2018-08-08T14:41:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the message data the role name is included for tasks after a role for roles in a play or include_role.\r\n\r\nThe `pause_for_kernel` task is not part of the `hello` role.  It was run after the hello role. \r\n\r\nRole was still set to `hello`:\r\n```\r\n                 u'role': u'hello',\r\n```\r\n\r\nPlaybook:\r\n```\r\n- gather_facts: false\r\n  hosts: localhost\r\n  roles:\r\n  - ansible_kernel_helpers\r\n  - hello\r\n  tasks:\r\n  - pause_for_kernel:\r\n      host: 127.0.0.1\r\n      port: 50675\r\n      task_num: 0\r\n  - include_tasks: next_task1.yml\r\n```\r\n\r\nMessage:\r\n\r\n```\r\n{'counter': 23,\r\n u'created': u'2018-08-06T20:02:58.849839',\r\n 'end_line': 31,\r\n u'event': u'playbook_on_task_start',\r\n u'event_data': {u'is_conditional': False,\r\n                 u'name': u'pause_for_kernel',\r\n                 u'pid': 77031,\r\n                 u'play': u'localhost',\r\n                 u'play_pattern': u'localhost',\r\n                 u'play_uuid': u'9801a79a-dd33-c9e6-7a97-000000000006',\r\n                 u'playbook': u'playbook.yml',\r\n                 u'playbook_uuid': u'44730e6f-e077-4ad0-bd00-a819c7fcaaf8',\r\n                 u'role': u'hello',\r\n                 u'task': u'pause_for_kernel',\r\n                 u'task_action': u'pause_for_kernel',\r\n                 u'task_args': u'task_num=1, host=127.0.0.1, port=50675',\r\n                 u'task_path': u'/private/var/folders/p8/mttm7w913kq_v0wyfl9khlpc0000gn/T/ansible_kernel_playbookXmz9Pj/project/next_task1.yml:4',\r\n                 u'task_uuid': u'9801a79a-dd33-c9e6-7a97-00000000002c'},\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/106", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/106/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/106/events", "html_url": "https://github.com/ansible/ansible-runner/issues/106", "id": 348343520, "node_id": "MDU6SXNzdWUzNDgzNDM1MjA=", "number": 106, "title": "Roles included in a play send three identical runner_on_ok messages to callback", "user": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825006542, "node_id": "MDU6TGFiZWw4MjUwMDY1NDI=", "url": "https://api.github.com/repos/ansible/ansible-runner/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-07T14:21:33Z", "updated_at": "2018-08-08T14:03:58Z", "closed_at": "2018-08-07T15:33:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This play:\r\n\r\n```\r\nhosts: localhost\r\ngather_facts: false\r\nroles:\r\n    - hello\r\n```\r\n\r\n\r\nCreated three copies of this message:\r\n\r\n```\r\n{u'counter': 4,\r\n u'created': u'2018-08-06T20:02:55.605063',\r\n u'end_line': 7,\r\n u'event': u'runner_on_ok',\r\n u'event_data': {u'event_loop': None,\r\n                 u'host': u'localhost',\r\n                 u'pid': 77031,\r\n                 u'play': u'localhost',\r\n                 u'play_pattern': u'localhost',\r\n                 u'play_uuid': u'9801a79a-dd33-c9e6-7a97-000000000006',\r\n                 u'playbook': u'playbook.yml',\r\n                 u'playbook_uuid': u'44730e6f-e077-4ad0-bd00-a819c7fcaaf8',\r\n                 u'remote_addr': u'localhost',\r\n                 u'res': {u'_ansible_no_log': False,\r\n                          u'_ansible_verbose_always': True,\r\n                          u'changed': False,\r\n                          u'msg': u'Hello world!'},\r\n                 u'role': u'hello',\r\n                 u'task': u'debug',\r\n                 u'task_action': u'debug',\r\n                 u'task_args': u'',\r\n                 u'task_path': u'/Users/bthomass/git/ansible_kernel_prototype/notebooks/roles/hello/tasks/main.yml:2',\r\n                 u'task_uuid': u'9801a79a-dd33-c9e6-7a97-00000000000e'},\r\n u'pid': 77031,\r\n u'start_line': 4,\r\n u'stdout': u'\\x1b[0;32mok: [localhost] => {\\x1b[0m\\r\\n\\x1b[0;32m    \"msg\": \"Hello world!\"\\x1b[0m\\r\\n\\x1b[0;32m}\\x1b[0m',\r\n u'uuid': u'b411e04b-1d14-4dde-ab52-c18af7de2326'}\r\n```\r\n\r\n\r\nThis does not happen for include_role.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/104", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/104/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/104/events", "html_url": "https://github.com/ansible/ansible-runner/issues/104", "id": 346560179, "node_id": "MDU6SXNzdWUzNDY1NjAxNzk=", "number": 104, "title": "Doc example isn't working as is.", "user": {"login": "swbsf", "id": 22593912, "node_id": "MDQ6VXNlcjIyNTkzOTEy", "avatar_url": "https://avatars0.githubusercontent.com/u/22593912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swbsf", "html_url": "https://github.com/swbsf", "followers_url": "https://api.github.com/users/swbsf/followers", "following_url": "https://api.github.com/users/swbsf/following{/other_user}", "gists_url": "https://api.github.com/users/swbsf/gists{/gist_id}", "starred_url": "https://api.github.com/users/swbsf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swbsf/subscriptions", "organizations_url": "https://api.github.com/users/swbsf/orgs", "repos_url": "https://api.github.com/users/swbsf/repos", "events_url": "https://api.github.com/users/swbsf/events{/privacy}", "received_events_url": "https://api.github.com/users/swbsf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-01T11:29:33Z", "updated_at": "2018-08-13T20:01:20Z", "closed_at": "2018-08-13T20:01:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nMaybe I'm missing something, but here are the steps to reproduce : \r\n\r\n- python 3.6.5\r\n- ansible-runner 1.0.5\r\n\r\n- test.yml : \r\n```\r\n$ cat test.yml \r\n---\r\n- hosts: localhost\r\n  tasks:\r\n    - shell: ping -c 1 localhost\r\n```\r\n- code : \r\n```\r\nimport ansible_runner\r\nr = ansible_runner.run(private_data_dir='/tmp/demo', playbook='test.yml')\r\nprint(r.stats)\r\n```\r\n\r\n- Gives TypeError : \r\n\r\n>Traceback (most recent call last):\r\n>  File \"<stdin>\", line 1, in <module>\r\n>  File \"/home/steven/PycharmProjects/ansible-API/venv/lib/python3.6/site-packages/ansible_runner/runner.py\", line 245, in stats\r\n>    last_event = last_event[0]['event_data']\r\n> TypeError: 'filter' object is not subscriptable\r\n\r\n- Replacing print(r.stats) with : \r\n```\r\nfor each_host_event in r.events:\r\n     print(each_host_event.event)\r\n```\r\n- Throws : \r\n\r\n> AttributeError: 'dict' object has no attribute 'event'\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/102", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/102/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/102/events", "html_url": "https://github.com/ansible/ansible-runner/issues/102", "id": 345662539, "node_id": "MDU6SXNzdWUzNDU2NjI1Mzk=", "number": 102, "title": "-q option doesn't work well", "user": {"login": "firemeteor", "id": 6677733, "node_id": "MDQ6VXNlcjY2Nzc3MzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6677733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/firemeteor", "html_url": "https://github.com/firemeteor", "followers_url": "https://api.github.com/users/firemeteor/followers", "following_url": "https://api.github.com/users/firemeteor/following{/other_user}", "gists_url": "https://api.github.com/users/firemeteor/gists{/gist_id}", "starred_url": "https://api.github.com/users/firemeteor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/firemeteor/subscriptions", "organizations_url": "https://api.github.com/users/firemeteor/orgs", "repos_url": "https://api.github.com/users/firemeteor/repos", "events_url": "https://api.github.com/users/firemeteor/events{/privacy}", "received_events_url": "https://api.github.com/users/firemeteor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-07-30T08:38:08Z", "updated_at": "2018-08-09T13:29:20Z", "closed_at": "2018-08-09T13:29:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use the ansible-runner(1.0.5) command with -q option, there will still be output\u3002\r\nThe output is as follows:\r\n\r\n\r\nTASK [config xxx] *****************************************************\r\n\r\n\r\nTASK [create xxx] ******************************************************\r\n\r\n\r\nTASK [remove xxx] **********************************************\r\n\r\n\r\nTASK [unarchive xxx] ************************************************\r\n\r\n192.168.6.246              : ok=29   changed=15   unreachable=0    failed=0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/100", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/100/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/100/events", "html_url": "https://github.com/ansible/ansible-runner/issues/100", "id": 345200362, "node_id": "MDU6SXNzdWUzNDUyMDAzNjI=", "number": 100, "title": "Using --role ROLE and start runs the job in the foreground instead of background", "user": {"login": "Ladas", "id": 1737058, "node_id": "MDQ6VXNlcjE3MzcwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1737058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ladas", "html_url": "https://github.com/Ladas", "followers_url": "https://api.github.com/users/Ladas/followers", "following_url": "https://api.github.com/users/Ladas/following{/other_user}", "gists_url": "https://api.github.com/users/Ladas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ladas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ladas/subscriptions", "organizations_url": "https://api.github.com/users/Ladas/orgs", "repos_url": "https://api.github.com/users/Ladas/repos", "events_url": "https://api.github.com/users/Ladas/events{/privacy}", "received_events_url": "https://api.github.com/users/Ladas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benthomasson", "id": 44381, "node_id": "MDQ6VXNlcjQ0Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benthomasson", "html_url": "https://github.com/benthomasson", "followers_url": "https://api.github.com/users/benthomasson/followers", "following_url": "https://api.github.com/users/benthomasson/following{/other_user}", "gists_url": "https://api.github.com/users/benthomasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/benthomasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benthomasson/subscriptions", "organizations_url": "https://api.github.com/users/benthomasson/orgs", "repos_url": "https://api.github.com/users/benthomasson/repos", "events_url": "https://api.github.com/users/benthomasson/events{/privacy}", "received_events_url": "https://api.github.com/users/benthomasson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-07-27T12:01:56Z", "updated_at": "2018-09-17T13:50:25Z", "closed_at": "2018-09-17T13:50:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using ```--role ROLE``` and ```start``` runs the job in the foreground instead of background.\r\n\r\nUsing ```--playbook PLAYBOOK``` and ```start``` runs the job in the background, as expected.\r\n\r\nLooks like these might be different code paths?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible/ansible-runner/issues/99", "repository_url": "https://api.github.com/repos/ansible/ansible-runner", "labels_url": "https://api.github.com/repos/ansible/ansible-runner/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/ansible/ansible-runner/issues/99/comments", "events_url": "https://api.github.com/repos/ansible/ansible-runner/issues/99/events", "html_url": "https://github.com/ansible/ansible-runner/issues/99", "id": 344756305, "node_id": "MDU6SXNzdWUzNDQ3NTYzMDU=", "number": 99, "title": "Executing runner in the background doesn't work properly", "user": {"login": "Ladas", "id": 1737058, "node_id": "MDQ6VXNlcjE3MzcwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1737058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ladas", "html_url": "https://github.com/Ladas", "followers_url": "https://api.github.com/users/Ladas/followers", "following_url": "https://api.github.com/users/Ladas/following{/other_user}", "gists_url": "https://api.github.com/users/Ladas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ladas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ladas/subscriptions", "organizations_url": "https://api.github.com/users/Ladas/orgs", "repos_url": "https://api.github.com/users/Ladas/repos", "events_url": "https://api.github.com/users/Ladas/events{/privacy}", "received_events_url": "https://api.github.com/users/Ladas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-07-26T09:03:02Z", "updated_at": "2018-07-27T13:50:08Z", "closed_at": "2018-07-27T13:50:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am trying:\r\nhttps://ansible-runner.readthedocs.io/en/latest/standalone.html#executing-runner-in-the-background\r\n\r\nI have just a simple testing role:\r\n```\r\n---\r\n- name: simulate long running op (120 sec), wait for up to 400 sec, poll every 5 sec\r\n  command: /bin/sleep 120\r\n  async: 400\r\n  poll: 5\r\n```\r\n\r\nSo running this as ```ansible-runner start /tmp/ansible-runner20180726-13642-1i9ck95 --json -i result --hosts localhost ...```\r\n\r\nI can see the python processes running this but:\r\n\r\n1. ```ansible-runner is-alive /tmp/ansible-runner20180726-13642-1i9ck95 -i result``` doesn't do anything, returns blank string\r\n2. ```ansible-runner stop /tmp/ansible-runner20180726-13642-1i9ck95 -i result``` doesn't stop the work, I still see the processes running\r\n3. Unclear status. It fails for a reason I can't find (last event is running this play, then nothing). And it gives inconsistent result. ```status``` file has ```failed``` in it, but ```rc``` file has ```None```", "performed_via_github_app": null, "score": 1.0}]}