{"total_count": 48, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/cole/aiosmtplib/issues/159", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/159/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/159/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/159/events", "html_url": "https://github.com/cole/aiosmtplib/issues/159", "id": 666951680, "node_id": "MDU6SXNzdWU2NjY5NTE2ODA=", "number": 159, "title": "1.1.x: broken multiple recipients in To header when using compat32 API", "user": {"login": "gjcarneiro", "id": 2197096, "node_id": "MDQ6VXNlcjIxOTcwOTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/2197096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gjcarneiro", "html_url": "https://github.com/gjcarneiro", "followers_url": "https://api.github.com/users/gjcarneiro/followers", "following_url": "https://api.github.com/users/gjcarneiro/following{/other_user}", "gists_url": "https://api.github.com/users/gjcarneiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/gjcarneiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gjcarneiro/subscriptions", "organizations_url": "https://api.github.com/users/gjcarneiro/orgs", "repos_url": "https://api.github.com/users/gjcarneiro/repos", "events_url": "https://api.github.com/users/gjcarneiro/events{/privacy}", "received_events_url": "https://api.github.com/users/gjcarneiro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-28T10:10:04Z", "updated_at": "2020-07-29T19:21:20Z", "closed_at": "2020-07-29T19:21:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I upgraded aiosmtplib from 1.0.x to 1.1.x and now whenever there are multiple addresses in the `To:` header, only the first address is taken as a recipient.\r\n\r\nI was able to fix it in my testing environment with this change.  Funnily enough, wasn't able to reproduce it from unit tests.\r\n\r\n```diff\r\ndiff --git a/aiosmtplib/email.py b/aiosmtplib/email.py\r\nindex 15b61ec..9159519 100644\r\n--- a/aiosmtplib/email.py\r\n+++ b/aiosmtplib/email.py\r\n@@ -119,7 +119,7 @@ def extract_addresses(\r\n                 charset = \"ascii\"\r\n             addresses.append(parse_address(str(address_bytes, encoding=charset)))\r\n     else:\r\n-        addresses.append(parse_address(header))\r\n+        addresses.extend(addr[1] for addr in email.utils.getaddresses([header]))\r\n \r\n     return addresses\r\n \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/123", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/123/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/123/events", "html_url": "https://github.com/cole/aiosmtplib/issues/123", "id": 568820514, "node_id": "MDU6SXNzdWU1Njg4MjA1MTQ=", "number": 123, "title": "New release", "user": {"login": "ikrivosheev", "id": 6786239, "node_id": "MDQ6VXNlcjY3ODYyMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/6786239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ikrivosheev", "html_url": "https://github.com/ikrivosheev", "followers_url": "https://api.github.com/users/ikrivosheev/followers", "following_url": "https://api.github.com/users/ikrivosheev/following{/other_user}", "gists_url": "https://api.github.com/users/ikrivosheev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ikrivosheev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ikrivosheev/subscriptions", "organizations_url": "https://api.github.com/users/ikrivosheev/orgs", "repos_url": "https://api.github.com/users/ikrivosheev/repos", "events_url": "https://api.github.com/users/ikrivosheev/events{/privacy}", "received_events_url": "https://api.github.com/users/ikrivosheev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-21T08:55:47Z", "updated_at": "2020-03-02T01:03:31Z", "closed_at": "2020-03-02T01:03:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Can you make release **1.1.3**? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/122", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/122/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/122/events", "html_url": "https://github.com/cole/aiosmtplib/issues/122", "id": 567774869, "node_id": "MDU6SXNzdWU1Njc3NzQ4Njk=", "number": 122, "title": "SMTP AUTH extension not supported by server", "user": {"login": "coodblooded", "id": 42345658, "node_id": "MDQ6VXNlcjQyMzQ1NjU4", "avatar_url": "https://avatars1.githubusercontent.com/u/42345658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coodblooded", "html_url": "https://github.com/coodblooded", "followers_url": "https://api.github.com/users/coodblooded/followers", "following_url": "https://api.github.com/users/coodblooded/following{/other_user}", "gists_url": "https://api.github.com/users/coodblooded/gists{/gist_id}", "starred_url": "https://api.github.com/users/coodblooded/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coodblooded/subscriptions", "organizations_url": "https://api.github.com/users/coodblooded/orgs", "repos_url": "https://api.github.com/users/coodblooded/repos", "events_url": "https://api.github.com/users/coodblooded/events{/privacy}", "received_events_url": "https://api.github.com/users/coodblooded/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-19T18:57:58Z", "updated_at": "2020-02-20T04:29:21Z", "closed_at": "2020-02-20T04:29:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "async def send_hello_world():\r\n    message = EmailMessage()\r\n    client = SMTP(hostname=\"smtp.gmail.com\", port=587,username='xyz@gmail.com',password='************', use_tls=False)\r\n    print(\"sandeep patel\")\r\n    message[\"From\"] = \"xyz@gmail.com\"\r\n    message[\"To\"] = \"pqr@gmail.com\"\r\n    message[\"Subject\"] = \"Hello World!\"\r\n    message.set_content(\"Sent via aiosmtplib\")\r\n    async with client:\r\n        await client.smtp_client(message)\r\n\r\nGetting Error\r\n        '    raise SMTPException(\"SMTP AUTH extension not supported by server.\")\\n'\r\n        'aiosmtplib.errors.SMTPException: SMTP AUTH extension not supported by server.\\n'\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/120", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/120/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/120/events", "html_url": "https://github.com/cole/aiosmtplib/issues/120", "id": 557073788, "node_id": "MDU6SXNzdWU1NTcwNzM3ODg=", "number": 120, "title": "Unicode support in address lines", "user": {"login": "ChristianHopper", "id": 59440121, "node_id": "MDQ6VXNlcjU5NDQwMTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/59440121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristianHopper", "html_url": "https://github.com/ChristianHopper", "followers_url": "https://api.github.com/users/ChristianHopper/followers", "following_url": "https://api.github.com/users/ChristianHopper/following{/other_user}", "gists_url": "https://api.github.com/users/ChristianHopper/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristianHopper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristianHopper/subscriptions", "organizations_url": "https://api.github.com/users/ChristianHopper/orgs", "repos_url": "https://api.github.com/users/ChristianHopper/repos", "events_url": "https://api.github.com/users/ChristianHopper/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristianHopper/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-29T19:39:31Z", "updated_at": "2020-02-20T04:04:33Z", "closed_at": "2020-02-20T04:04:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've looked around in the tests for examples on how to properly send mails with non-ascii characters in address lines. I cannot get the following to work:\r\n\r\n```\r\nimport asyncio\r\nfrom email.message import EmailMessage\r\nfrom aiosmtplib.email import formataddr\r\n\r\nimport aiosmtplib\r\n\r\nPASSWORD = 'password'\r\nUSER = 'user@example.com'\r\n\r\n\r\nasync def send_hello_world():\r\n    message = EmailMessage()\r\n    message[\"From\"] = \"user@example.com\"\r\n    message[\"To\"] = formataddr((\"\u00e6\u00f8\u00e5\", \"someotheruser@example.com\"))\r\n    message[\"Subject\"] = \"Hello World!\"\r\n    message.set_content(\"Sent via aiosmtplib\")\r\n\r\n    send = await aiosmtplib.send(message,\r\n                          hostname=\"smtp.office365.com\",\r\n                          port=587,\r\n                        start_tls=True,\r\n                          password=PASSWORD,\r\n                          username=USER)\r\n    return send\r\n\r\nevent_loop = asyncio.get_event_loop()\r\nevent_loop.run_until_complete(send_hello_world())\r\n```\r\nThe interesting line is this: `message[\"To\"] = formataddr((\"\u00e6\u00f8\u00e5\", \"someotheruser@example.com\"))`. The`\u00e6\u00f8\u00e5` breaks the email somehow.\r\n\r\nI do receive an email - however, there is no subject and the email body is the EmailMessage sort of converted to a string. I could succesfully send the email with smtplib with no issues. What do I nee", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/119", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/119/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/119/events", "html_url": "https://github.com/cole/aiosmtplib/issues/119", "id": 555497294, "node_id": "MDU6SXNzdWU1NTU0OTcyOTQ=", "number": 119, "title": "Not recognizing auth types for exchange server", "user": {"login": "ChristianHopper", "id": 59440121, "node_id": "MDQ6VXNlcjU5NDQwMTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/59440121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristianHopper", "html_url": "https://github.com/ChristianHopper", "followers_url": "https://api.github.com/users/ChristianHopper/followers", "following_url": "https://api.github.com/users/ChristianHopper/following{/other_user}", "gists_url": "https://api.github.com/users/ChristianHopper/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristianHopper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristianHopper/subscriptions", "organizations_url": "https://api.github.com/users/ChristianHopper/orgs", "repos_url": "https://api.github.com/users/ChristianHopper/repos", "events_url": "https://api.github.com/users/ChristianHopper/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristianHopper/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-27T10:55:49Z", "updated_at": "2020-01-29T19:09:59Z", "closed_at": "2020-01-29T19:09:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am unable to send emails from a Microsoft Exchange account hosted on Office365. My credentials are valid and I have succesfully tested sending emails with smtplib. For some reason `SMTPAuth.server_auth_methods` ends up being an empty list and then sending an email fails with \r\n\r\n> SMTP AUTH extension not supported by server.\r\n\r\nYou can see a minimal working example below (I have not tried to reproduce the error without an Office 365 account).\r\n\r\n```\r\nimport asyncio\r\nfrom email.message import EmailMessage\r\n\r\nimport aiosmtplib\r\n\r\nPASSWORD = 'password'\r\nUSER = 'user@mydomain.com'\r\n\r\nasync def send_hello_world():\r\n    message = EmailMessage()\r\n    message[\"From\"] = 'user@mydomain.com'\r\n    message[\"To\"] = \"somebody@example.com\"\r\n    message[\"Subject\"] = \"Hello World!\"\r\n    message.set_content(\"Sent via aiosmtplib\")\r\n\r\n    send = await aiosmtplib.send(message,\r\n                          hostname=\"smtp.office365.com\",\r\n                          port=587,\r\n                          password=PASSWORD,\r\n                          username=USER)\r\n    return send\r\n\r\nevent_loop = asyncio.get_event_loop()\r\nevent_loop.run_until_complete(send_hello_world())\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/118", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/118/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/118/events", "html_url": "https://github.com/cole/aiosmtplib/issues/118", "id": 548101127, "node_id": "MDU6SXNzdWU1NDgxMDExMjc=", "number": 118, "title": "Support specifying email domain other than hostname by automatically resolving MX record", "user": {"login": "Gowee", "id": 8171899, "node_id": "MDQ6VXNlcjgxNzE4OTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/8171899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gowee", "html_url": "https://github.com/Gowee", "followers_url": "https://api.github.com/users/Gowee/followers", "following_url": "https://api.github.com/users/Gowee/following{/other_user}", "gists_url": "https://api.github.com/users/Gowee/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gowee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gowee/subscriptions", "organizations_url": "https://api.github.com/users/Gowee/orgs", "repos_url": "https://api.github.com/users/Gowee/repos", "events_url": "https://api.github.com/users/Gowee/events{/privacy}", "received_events_url": "https://api.github.com/users/Gowee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-10T14:11:51Z", "updated_at": "2020-01-12T16:20:45Z", "closed_at": "2020-01-12T16:20:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\n\r\nSometimes it may be desirable to send emails directly to remote mail servers instead of `localhost`. In my case, I want to [push books](https://www.amazon.com/gp/sendtokindle) to Kindle devices by sending emails to `@kindle.com`.\r\n\r\nAfter roughly looking through the source code, I suppose there is no way so far to specify an email domain (e.g. `kindle.com` in my case) instead of `hostname`. I think it would be great if this can be supported by aiosmtplib as it is such a common use scenario. It does take much effort to figure out how to properly resolve and maintain cache/TTL of MX records with asyncio. \r\n\r\nThanks for the project.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/116", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/116/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/116/events", "html_url": "https://github.com/cole/aiosmtplib/issues/116", "id": 524211256, "node_id": "MDU6SXNzdWU1MjQyMTEyNTY=", "number": 116, "title": "How can i port from existing smtp", "user": {"login": "dduraipandian", "id": 44367425, "node_id": "MDQ6VXNlcjQ0MzY3NDI1", "avatar_url": "https://avatars1.githubusercontent.com/u/44367425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduraipandian", "html_url": "https://github.com/dduraipandian", "followers_url": "https://api.github.com/users/dduraipandian/followers", "following_url": "https://api.github.com/users/dduraipandian/following{/other_user}", "gists_url": "https://api.github.com/users/dduraipandian/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduraipandian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduraipandian/subscriptions", "organizations_url": "https://api.github.com/users/dduraipandian/orgs", "repos_url": "https://api.github.com/users/dduraipandian/repos", "events_url": "https://api.github.com/users/dduraipandian/events{/privacy}", "received_events_url": "https://api.github.com/users/dduraipandian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-18T08:30:49Z", "updated_at": "2020-01-12T16:06:04Z", "closed_at": "2020-01-12T16:06:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is not the issue. I have email script in traditional smtp. How I can port to aiosmtplib? Is there any steps can you please help me with that?\r\n\r\nhttps://github.com/cole/aiosmtplib/issues/112\r\n\r\nIf I try something similar to the issue: 112, will it work?\r\n\r\nThanks..", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/115", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/115/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/115/events", "html_url": "https://github.com/cole/aiosmtplib/issues/115", "id": 522406718, "node_id": "MDU6SXNzdWU1MjI0MDY3MTg=", "number": 115, "title": "aiosmtplib doesn't work, smtplib does", "user": {"login": "thijstriemstra", "id": 305679, "node_id": "MDQ6VXNlcjMwNTY3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/305679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thijstriemstra", "html_url": "https://github.com/thijstriemstra", "followers_url": "https://api.github.com/users/thijstriemstra/followers", "following_url": "https://api.github.com/users/thijstriemstra/following{/other_user}", "gists_url": "https://api.github.com/users/thijstriemstra/gists{/gist_id}", "starred_url": "https://api.github.com/users/thijstriemstra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thijstriemstra/subscriptions", "organizations_url": "https://api.github.com/users/thijstriemstra/orgs", "repos_url": "https://api.github.com/users/thijstriemstra/repos", "events_url": "https://api.github.com/users/thijstriemstra/events{/privacy}", "received_events_url": "https://api.github.com/users/thijstriemstra/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-13T18:51:14Z", "updated_at": "2019-11-13T19:20:05Z", "closed_at": "2019-11-13T19:19:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This script that sends using yahoo smtp works:\r\n\r\n```python\r\nimport smtplib\r\nfrom email.mime.text import MIMEText\r\nSMTP_SERVER = \"smtp.mail.yahoo.com\"\r\nSMTP_PORT = 587\r\nSMTP_USERNAME = \"foo\" # without @yahoo.com\r\nSMTP_PASSWORD = \"bar\"\r\nEMAIL_FROM = \"foo@yahoo.com\"\r\nEMAIL_TO = \"him@example.com\"\r\nEMAIL_SUBJECT = \"hi from smtplib\"\r\nco_msg = \"\"\"\r\nHello world!\r\n\"\"\"\r\ndef send_email():\r\n    msg = MIMEText(co_msg)\r\n    msg['Subject'] = EMAIL_SUBJECT\r\n    msg['From'] = EMAIL_FROM \r\n    msg['To'] = EMAIL_TO\r\n    debuglevel = True\r\n    mail = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)\r\n    mail.set_debuglevel(debuglevel)\r\n    mail.starttls()\r\n    mail.login(SMTP_USERNAME, SMTP_PASSWORD)\r\n    mail.sendmail(EMAIL_FROM, EMAIL_TO, msg.as_string())\r\n    mail.quit()\r\n\r\nif __name__=='__main__':\r\n    send_email()\r\n```\r\n\r\nBut using aiosmtplib it always fails with:\r\n\r\n```\r\n  File \"/home/thijs/.virtualenvs/foo/lib/python3.7/site-packages/aiosmtplib/api.py\", line 397, in send\r\n    message, sender=sender, recipients=recipients\r\n  File \"/home/thijs/.virtualenvs/foo/lib/python3.7/site-packages/aiosmtplib/smtp.py\", line 299, in send_message\r\n    timeout=timeout,\r\n  File \"/home/thijs/.virtualenvs/foo/lib/python3.7/site-packages/aiosmtplib/smtp.py\", line 179, in sendmail\r\n    raise exc\r\n  File \"/home/thijs/.virtualenvs/foo/lib/python3.7/site-packages/aiosmtplib/smtp.py\", line 170, in sendmail\r\n    response = await self.data(message, timeout=timeout)\r\n  File \"/home/thijs/.virtualenvs/foo/lib/python3.7/site-packages/aiosmtplib/esmtp.py\", line 332, in data\r\n    return await self.protocol.execute_data_command(message, timeout=timeout)\r\n  File \"/home/thijs/.virtualenvs/foo/lib/python3.7/site-packages/aiosmtplib/protocol.py\", line 252, in execute_data_command\r\n    raise SMTPDataError(response.code, response.message)\r\naiosmtplib.errors.SMTPDataError: (550, 'Request failed; Mailbox unavailable')\r\n```\r\n\r\n```yaml\r\nmail:\r\n  host: smtp.mail.yahoo.com\r\n  port: 587\r\n  tls: True\r\n  timeout: 300\r\n  username: foo\r\n  password: foo\r\n  sender: foo@yahoo.com\r\n  recipient: bar@yahoo.com\r\n  validate_certs: False\r\n```\r\n\r\n```python\r\nawait aiosmtplib.send(\r\n            message=msg,\r\n            hostname=mail_cfg.get('host'),\r\n            port=mail_cfg.get('port'),\r\n            username=mail_cfg.get('username'),\r\n            password=mail_cfg.get('password'),\r\n            start_tls=mail_cfg.get('tls'),\r\n            timeout=mail_cfg.get('timeout'),\r\n            validate_certs=mail_cfg.get('validate_certs')\r\n```\r\nAny idea? Is there any DEBUG flag I can enable, like `mail.set_debuglevel(debuglevel)` in example above?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/114", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/114/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/114/events", "html_url": "https://github.com/cole/aiosmtplib/issues/114", "id": 520948223, "node_id": "MDU6SXNzdWU1MjA5NDgyMjM=", "number": 114, "title": "Installed docs", "user": {"login": "decaz", "id": 31096, "node_id": "MDQ6VXNlcjMxMDk2", "avatar_url": "https://avatars1.githubusercontent.com/u/31096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decaz", "html_url": "https://github.com/decaz", "followers_url": "https://api.github.com/users/decaz/followers", "following_url": "https://api.github.com/users/decaz/following{/other_user}", "gists_url": "https://api.github.com/users/decaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/decaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decaz/subscriptions", "organizations_url": "https://api.github.com/users/decaz/orgs", "repos_url": "https://api.github.com/users/decaz/repos", "events_url": "https://api.github.com/users/decaz/events{/privacy}", "received_events_url": "https://api.github.com/users/decaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-11T12:58:10Z", "updated_at": "2019-11-16T21:44:48Z", "closed_at": "2019-11-16T21:44:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "When `aiosmtplib` installed besides `.../site-packages/aiosmtplib` directory there is also `.../site-packages/docs` directory created with its docs.\r\n\r\nCan this confusing behavior be changed?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/94", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/94/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/94/events", "html_url": "https://github.com/cole/aiosmtplib/issues/94", "id": 505888879, "node_id": "MDU6SXNzdWU1MDU4ODg4Nzk=", "number": 94, "title": "Unicode sender", "user": {"login": "decaz", "id": 31096, "node_id": "MDQ6VXNlcjMxMDk2", "avatar_url": "https://avatars1.githubusercontent.com/u/31096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decaz", "html_url": "https://github.com/decaz", "followers_url": "https://api.github.com/users/decaz/followers", "following_url": "https://api.github.com/users/decaz/following{/other_user}", "gists_url": "https://api.github.com/users/decaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/decaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decaz/subscriptions", "organizations_url": "https://api.github.com/users/decaz/orgs", "repos_url": "https://api.github.com/users/decaz/repos", "events_url": "https://api.github.com/users/decaz/events{/privacy}", "received_events_url": "https://api.github.com/users/decaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-11T14:32:44Z", "updated_at": "2019-11-08T19:19:05Z", "closed_at": "2019-11-08T19:19:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm specifying \"From\" header at `Message` object but it's not enough, - `aiosmtplib.errors.SMTPNotSupported: An address containing non-ASCII characters was provided, but SMTPUTF8 is not supported by this server` is raised.\r\n\r\nThe code is as follows:\r\n```python\r\nimport asyncio\r\nfrom email.header import Header\r\nfrom email.message import EmailMessage\r\n\r\nimport aiosmtplib\r\n\r\nasync def main():\r\n    message = EmailMessage()\r\n    message['Subject'] = 'Subject'\r\n    sender = Header('Pep\u00e9', 'utf-8').encode()\r\n    message['From'] = sender\r\n    message['To'] = ('me@example.com',)\r\n    message.set_content('Body')\r\n    # Working\r\n    await aiosmtplib.send(message, sender, hostname='smtp.host')\r\n    # Not working\r\n    await aiosmtplib.send(message, hostname='smtp.host')\r\n\r\nasyncio.run(main())\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/87", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/87/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/87/events", "html_url": "https://github.com/cole/aiosmtplib/issues/87", "id": 503050883, "node_id": "MDU6SXNzdWU1MDMwNTA4ODM=", "number": 87, "title": "`send_message` raise `AttributeError`", "user": {"login": "DeoLeung", "id": 3764720, "node_id": "MDQ6VXNlcjM3NjQ3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3764720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeoLeung", "html_url": "https://github.com/DeoLeung", "followers_url": "https://api.github.com/users/DeoLeung/followers", "following_url": "https://api.github.com/users/DeoLeung/following{/other_user}", "gists_url": "https://api.github.com/users/DeoLeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeoLeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeoLeung/subscriptions", "organizations_url": "https://api.github.com/users/DeoLeung/orgs", "repos_url": "https://api.github.com/users/DeoLeung/repos", "events_url": "https://api.github.com/users/DeoLeung/events{/privacy}", "received_events_url": "https://api.github.com/users/DeoLeung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-06T04:34:39Z", "updated_at": "2019-11-07T03:23:23Z", "closed_at": "2019-11-07T03:23:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "`send_message` raise `AttributeError`\r\n\r\nit works on `1.0.6`, failing on `1.1.0`\r\n\r\nusing official docker image `python:3.7.4`\r\n\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/faust/agents/agent.py\", line 632, in _execute_task\r\n    await coro\r\n  File \"/usr/local/lib/python3.7/site-packages/faust/agents/agent.py\", line 649, in _slurp\r\n    async for value in it:\r\n  File \"/tmp/streams/email/__init__.py\", line 120, in process_message\r\n    await smtp.send_message(msg, recipients=message['recipients'])\r\n  File \"/usr/local/lib/python3.7/site-packages/aiosmtplib/smtp.py\", line 291, in send_message\r\n    flat_message = flatten_message(message, utf8=utf8_required, cte_type=cte_type)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiosmtplib/email.py\", line 84, in flatten_message\r\n    generator.flatten(message_copy)\r\n  File \"/usr/local/lib/python3.7/email/generator.py\", line 116, in flatten\r\n    self._write(msg)\r\n  File \"/usr/local/lib/python3.7/email/generator.py\", line 195, in _write\r\n    self._write_headers(msg)\r\n  File \"/usr/local/lib/python3.7/email/generator.py\", line 418, in _write_headers\r\n    self._fp.write(self.policy.fold_binary(h, v))\r\n  File \"/usr/local/lib/python3.7/email/policy.py\", line 200, in fold_binary\r\n    folded = self._fold(name, value, refold_binary=self.cte_type=='7bit')\r\n  File \"/usr/local/lib/python3.7/email/policy.py\", line 208, in _fold\r\n    lines = value.splitlines()\r\nAttributeError: 'Header' object has no attribute 'splitlines'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/79", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/79/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/79/events", "html_url": "https://github.com/cole/aiosmtplib/issues/79", "id": 494357590, "node_id": "MDU6SXNzdWU0OTQzNTc1OTA=", "number": 79, "title": "openSUSE i586 failure in test_send_message_smtputf8_sender", "user": {"login": "jayvdb", "id": 15092, "node_id": "MDQ6VXNlcjE1MDky", "avatar_url": "https://avatars1.githubusercontent.com/u/15092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayvdb", "html_url": "https://github.com/jayvdb", "followers_url": "https://api.github.com/users/jayvdb/followers", "following_url": "https://api.github.com/users/jayvdb/following{/other_user}", "gists_url": "https://api.github.com/users/jayvdb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayvdb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayvdb/subscriptions", "organizations_url": "https://api.github.com/users/jayvdb/orgs", "repos_url": "https://api.github.com/users/jayvdb/repos", "events_url": "https://api.github.com/users/jayvdb/events{/privacy}", "received_events_url": "https://api.github.com/users/jayvdb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-17T01:49:22Z", "updated_at": "2020-01-12T16:21:15Z", "closed_at": "2020-01-12T16:21:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "test_send_message_smtputf8_sender is failing only on i586\r\n\r\nhttps://build.opensuse.org/package/live_build_log/devel:languages:python/python-aiosmtplib/openSUSE_Tumbleweed/i586\r\n\r\nDoes it look like it is a aiosmtplib issue, or the test runner aiosmtpd, or ...?\r\n\r\n```console\r\n[  110s] ______________________ test_send_message_smtputf8_sender _______________________\r\n[  110s] \r\n[  110s] smtp_client = <aiosmtplib.smtp.SMTP object at 0xb485426c>\r\n[  110s] smtpd_server_smtputf8 = <Server sockets=[<socket.socket fd=15, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 52703)>]>\r\n[  110s] message = <email.mime.multipart.MIMEMultipart object at 0xb4ac66cc>\r\n[  110s] received_commands = [('EHLO', 'lamb56'), ('MAIL', 's\u00e9nd\u00ebr@ex\u00e5mple.com', ['SIZE=345', 'SMTPUTF8', 'BODY=8BITMIME']), ('RCPT', 'recipient@example.com', []), ('DATA',), ('QUIT',)]\r\n[  110s] received_messages = [<email.message.Message object at 0xb64846cc>]\r\n[  110s] \r\n[  110s]     async def test_send_message_smtputf8_sender(\r\n[  110s]         smtp_client, smtpd_server_smtputf8, message, received_commands, received_messages\r\n[  110s]     ):\r\n[  110s]         del message[\"From\"]\r\n[  110s]         message[\"From\"] = \"s\u00e9nd\u00ebr@ex\u00e5mple.com\"\r\n[  110s]     \r\n[  110s]         async with smtp_client:\r\n[  110s]             errors, response = await smtp_client.send_message(message)\r\n[  110s]     \r\n[  110s]         assert not errors\r\n[  110s]         assert response != \"\"\r\n[  110s]     \r\n[  110s]         assert received_commands[1][0] == \"MAIL\"\r\n[  110s]         assert received_commands[1][1] == message[\"From\"]\r\n[  110s] >       assert received_commands[1][2] == [\"SIZE=372\", \"SMTPUTF8\", \"BODY=8BITMIME\"]\r\n[  110s] E       AssertionError: assert ['SIZE=345', ...ODY=8BITMIME'] == ['SIZE=372', '...ODY=8BITMIME']\r\n[  110s] E         At index 0 diff: 'SIZE=345' != 'SIZE=372'\r\n[  110s] E         Full diff:\r\n[  110s] E         - ['SIZE=345', 'SMTPUTF8', 'BODY=8BITMIME']\r\n[  110s] E         ?         ^^\r\n[  110s] E         + ['SIZE=372', 'SMTPUTF8', 'BODY=8BITMIME']\r\n[  110s] E         ?         ^^\r\n[  110s] \r\n[  110s] tests/test_sendmail.py:288: AssertionError\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/53", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/53/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/53/events", "html_url": "https://github.com/cole/aiosmtplib/issues/53", "id": 461468375, "node_id": "MDU6SXNzdWU0NjE0NjgzNzU=", "number": 53, "title": "InvalidStateError", "user": {"login": "decaz", "id": 31096, "node_id": "MDQ6VXNlcjMxMDk2", "avatar_url": "https://avatars1.githubusercontent.com/u/31096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decaz", "html_url": "https://github.com/decaz", "followers_url": "https://api.github.com/users/decaz/followers", "following_url": "https://api.github.com/users/decaz/following{/other_user}", "gists_url": "https://api.github.com/users/decaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/decaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decaz/subscriptions", "organizations_url": "https://api.github.com/users/decaz/orgs", "repos_url": "https://api.github.com/users/decaz/repos", "events_url": "https://api.github.com/users/decaz/events{/privacy}", "received_events_url": "https://api.github.com/users/decaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-06-27T11:13:24Z", "updated_at": "2019-09-04T10:47:37Z", "closed_at": "2019-09-04T10:47:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using the last revision (`f5ce158`) of the `master` branch and getting the following exception:\r\n```\r\nInvalidStateError: invalid state\r\n  File \"asyncio/events.py\", line 88, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"asyncio/selector_events.py\", line 913, in _call_connection_lost\r\n    super()._call_connection_lost(exc)\r\n  File \"asyncio/selector_events.py\", line 687, in _call_connection_lost\r\n    self._protocol.connection_lost(exc)\r\n  File \"aiosmtplib/protocol.py\", line 79, in connection_lost\r\n    self._connection_lost_waiter.set_result(None)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/50", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/50/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/50/events", "html_url": "https://github.com/cole/aiosmtplib/issues/50", "id": 453568096, "node_id": "MDU6SXNzdWU0NTM1NjgwOTY=", "number": 50, "title": "Default connect timeout doesn't work", "user": {"login": "Lenka42", "id": 11856139, "node_id": "MDQ6VXNlcjExODU2MTM5", "avatar_url": "https://avatars0.githubusercontent.com/u/11856139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lenka42", "html_url": "https://github.com/Lenka42", "followers_url": "https://api.github.com/users/Lenka42/followers", "following_url": "https://api.github.com/users/Lenka42/following{/other_user}", "gists_url": "https://api.github.com/users/Lenka42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lenka42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lenka42/subscriptions", "organizations_url": "https://api.github.com/users/Lenka42/orgs", "repos_url": "https://api.github.com/users/Lenka42/repos", "events_url": "https://api.github.com/users/Lenka42/events{/privacy}", "received_events_url": "https://api.github.com/users/Lenka42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-07T15:20:52Z", "updated_at": "2019-06-17T03:59:13Z", "closed_at": "2019-06-17T03:59:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a problem with connect operation not terminating after timeout. For example you can try to connect to wrong port:\r\n```\r\nimport asyncio\r\nimport aiosmtplib\r\nloop = asyncio.get_event_loop()\r\nsmtp = aiosmtplib.SMTP('smtp-mail.outlook.com', 5871, use_tls=True)\r\nasync def connect_and_print(smtp):\r\n    await smtp.connect()\r\n    print('connected')\r\nloop.run_until_complete(connect_and_print(smtp))\r\n```\r\nThis code hangs for a long-long time. I also tried to wrap connect into `asyncio.wait_for` but it also doesn't work. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/48", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/48/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/48/events", "html_url": "https://github.com/cole/aiosmtplib/issues/48", "id": 444078520, "node_id": "MDU6SXNzdWU0NDQwNzg1MjA=", "number": 48, "title": "sendmail on timed-out connection raises SMTPSenderRefused", "user": {"login": "gustavodagostin", "id": 18328444, "node_id": "MDQ6VXNlcjE4MzI4NDQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/18328444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gustavodagostin", "html_url": "https://github.com/gustavodagostin", "followers_url": "https://api.github.com/users/gustavodagostin/followers", "following_url": "https://api.github.com/users/gustavodagostin/following{/other_user}", "gists_url": "https://api.github.com/users/gustavodagostin/gists{/gist_id}", "starred_url": "https://api.github.com/users/gustavodagostin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gustavodagostin/subscriptions", "organizations_url": "https://api.github.com/users/gustavodagostin/orgs", "repos_url": "https://api.github.com/users/gustavodagostin/repos", "events_url": "https://api.github.com/users/gustavodagostin/events{/privacy}", "received_events_url": "https://api.github.com/users/gustavodagostin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-14T19:11:10Z", "updated_at": "2019-06-10T15:31:50Z", "closed_at": "2019-06-10T15:31:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "When calling the sendmail method after the open connection timed-out, the exception raised is SMTPSenderRefused, with the message \"<destination hostname> Error: timeout exceeded\".\r\n\r\nProbably, the exception shoud be SMTPServerDisconnected.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/45", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/45/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/45/events", "html_url": "https://github.com/cole/aiosmtplib/issues/45", "id": 436115048, "node_id": "MDU6SXNzdWU0MzYxMTUwNDg=", "number": 45, "title": "aiohttp", "user": {"login": "kodkuce", "id": 24373114, "node_id": "MDQ6VXNlcjI0MzczMTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/24373114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kodkuce", "html_url": "https://github.com/kodkuce", "followers_url": "https://api.github.com/users/kodkuce/followers", "following_url": "https://api.github.com/users/kodkuce/following{/other_user}", "gists_url": "https://api.github.com/users/kodkuce/gists{/gist_id}", "starred_url": "https://api.github.com/users/kodkuce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kodkuce/subscriptions", "organizations_url": "https://api.github.com/users/kodkuce/orgs", "repos_url": "https://api.github.com/users/kodkuce/repos", "events_url": "https://api.github.com/users/kodkuce/events{/privacy}", "received_events_url": "https://api.github.com/users/kodkuce/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-23T10:30:42Z", "updated_at": "2019-04-23T14:49:51Z", "closed_at": "2019-04-23T14:49:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "How to implement this with aiohttp server, example for postgres asyncpg i can create a pool but here duno how at all :(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/44", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/44/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/44/events", "html_url": "https://github.com/cole/aiosmtplib/issues/44", "id": 433426434, "node_id": "MDU6SXNzdWU0MzM0MjY0MzQ=", "number": 44, "title": "Upload new release to PyPI", "user": {"login": "montag451", "id": 249317, "node_id": "MDQ6VXNlcjI0OTMxNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/249317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/montag451", "html_url": "https://github.com/montag451", "followers_url": "https://api.github.com/users/montag451/followers", "following_url": "https://api.github.com/users/montag451/following{/other_user}", "gists_url": "https://api.github.com/users/montag451/gists{/gist_id}", "starred_url": "https://api.github.com/users/montag451/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/montag451/subscriptions", "organizations_url": "https://api.github.com/users/montag451/orgs", "repos_url": "https://api.github.com/users/montag451/repos", "events_url": "https://api.github.com/users/montag451/events{/privacy}", "received_events_url": "https://api.github.com/users/montag451/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-15T18:46:56Z", "updated_at": "2019-04-22T08:08:45Z", "closed_at": "2019-04-16T04:26:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Following the resolution of #42, is it possible to upload a new release to PyPI? I'm asking this because at my work place we rely on PyPI to deploy our softwares.\r\n\r\nPS : I'm sorry to use the issue tracker to ask you that but I don't know a better way :(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/42", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/42/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/42/events", "html_url": "https://github.com/cole/aiosmtplib/issues/42", "id": 433308551, "node_id": "MDU6SXNzdWU0MzMzMDg1NTE=", "number": 42, "title": "Connection not closed when errors occurs", "user": {"login": "montag451", "id": 249317, "node_id": "MDQ6VXNlcjI0OTMxNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/249317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/montag451", "html_url": "https://github.com/montag451", "followers_url": "https://api.github.com/users/montag451/followers", "following_url": "https://api.github.com/users/montag451/following{/other_user}", "gists_url": "https://api.github.com/users/montag451/gists{/gist_id}", "starred_url": "https://api.github.com/users/montag451/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/montag451/subscriptions", "organizations_url": "https://api.github.com/users/montag451/orgs", "repos_url": "https://api.github.com/users/montag451/repos", "events_url": "https://api.github.com/users/montag451/events{/privacy}", "received_events_url": "https://api.github.com/users/montag451/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-15T14:18:43Z", "updated_at": "2019-04-15T16:22:34Z", "closed_at": "2019-04-15T16:05:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the connect() method, if an error occurs ([here](https://github.com/cole/aiosmtplib/blob/master/src/aiosmtplib/connection.py#L261) or [here](https://github.com/cole/aiosmtplib/blob/master/src/aiosmtplib/connection.py#L265)) the connection is not closed since the transport attribute is only set at the end of the method ([here](https://github.com/cole/aiosmtplib/blob/master/src/aiosmtplib/connection.py#L270)). I think that as soon as the connection to the server is made, the transport attribute should be set otherwise the close() method does nothing.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/41", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/41/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/41/events", "html_url": "https://github.com/cole/aiosmtplib/issues/41", "id": 388932561, "node_id": "MDU6SXNzdWUzODg5MzI1NjE=", "number": 41, "title": "Support Unicode response message", "user": {"login": "doanguyen", "id": 6127272, "node_id": "MDQ6VXNlcjYxMjcyNzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/6127272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doanguyen", "html_url": "https://github.com/doanguyen", "followers_url": "https://api.github.com/users/doanguyen/followers", "following_url": "https://api.github.com/users/doanguyen/following{/other_user}", "gists_url": "https://api.github.com/users/doanguyen/gists{/gist_id}", "starred_url": "https://api.github.com/users/doanguyen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doanguyen/subscriptions", "organizations_url": "https://api.github.com/users/doanguyen/orgs", "repos_url": "https://api.github.com/users/doanguyen/repos", "events_url": "https://api.github.com/users/doanguyen/events{/privacy}", "received_events_url": "https://api.github.com/users/doanguyen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-12-08T15:41:47Z", "updated_at": "2019-01-14T18:00:48Z", "closed_at": "2019-01-14T18:00:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Cole,\r\n\r\nI was reading the test and see the test_live.py::test_qq_login has been marked because of utf-8 unsupported. As far as I investigated, the reason is that qq smtp service return non-ascii (and even non utf-8 chars):\r\n\r\n`535 Error: \\xc7\\xeb\\xca\\xb9\\xd3\\xc3\\xca\\xda\\xc8\\xa8\\xc2\\xeb\\xb5\\xc7\\xc2\\xbc\\xa1\\xa3\\xcf\\xea\\xc7\\xe9\\xc7\\xeb\\xbf\\xb4: http://service.mail.qq.com/cgi-bin/help?subtype=1&&id=28&&no=1001256\\r\\n`\r\n\r\nI was thinking of 2 posibility to solve this problem:\r\n1. Using [chardet](https://chardet.readthedocs.io/en/latest/faq.html) to guess the response message encoding.\r\n2. Using `re` to eliminate non-utf8 (ascii) chars since it is the message, we still have response code\r\n\r\nWhat do you think?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/40", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/40/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/40/events", "html_url": "https://github.com/cole/aiosmtplib/issues/40", "id": 376032556, "node_id": "MDU6SXNzdWUzNzYwMzI1NTY=", "number": 40, "title": "Usage as an asynchronous context manager", "user": {"login": "mivade", "id": 2805515, "node_id": "MDQ6VXNlcjI4MDU1MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2805515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mivade", "html_url": "https://github.com/mivade", "followers_url": "https://api.github.com/users/mivade/followers", "following_url": "https://api.github.com/users/mivade/following{/other_user}", "gists_url": "https://api.github.com/users/mivade/gists{/gist_id}", "starred_url": "https://api.github.com/users/mivade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mivade/subscriptions", "organizations_url": "https://api.github.com/users/mivade/orgs", "repos_url": "https://api.github.com/users/mivade/repos", "events_url": "https://api.github.com/users/mivade/events{/privacy}", "received_events_url": "https://api.github.com/users/mivade/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-31T15:50:27Z", "updated_at": "2018-11-20T19:26:25Z", "closed_at": "2018-11-20T19:26:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "It would be nice if the `SMTP` class could be used as an async context manager. From digging around, it looks like it might be possible, but it isn't documented.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/39", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/39/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/39/events", "html_url": "https://github.com/cole/aiosmtplib/issues/39", "id": 366083159, "node_id": "MDU6SXNzdWUzNjYwODMxNTk=", "number": 39, "title": "Please publish a new version that includes \"Cleanup connection when an exception occurs.\"", "user": {"login": "1sarojkandel", "id": 12952693, "node_id": "MDQ6VXNlcjEyOTUyNjkz", "avatar_url": "https://avatars0.githubusercontent.com/u/12952693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1sarojkandel", "html_url": "https://github.com/1sarojkandel", "followers_url": "https://api.github.com/users/1sarojkandel/followers", "following_url": "https://api.github.com/users/1sarojkandel/following{/other_user}", "gists_url": "https://api.github.com/users/1sarojkandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/1sarojkandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1sarojkandel/subscriptions", "organizations_url": "https://api.github.com/users/1sarojkandel/orgs", "repos_url": "https://api.github.com/users/1sarojkandel/repos", "events_url": "https://api.github.com/users/1sarojkandel/events{/privacy}", "received_events_url": "https://api.github.com/users/1sarojkandel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-02T21:15:47Z", "updated_at": "2018-10-03T03:01:54Z", "closed_at": "2018-10-03T03:01:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was about to send you guys a PR but looks like the issue of cleaning up the connection when exception occurs has been fixed but has not been published yet. I am waiting on this new version to get unblocked in one of my projects. Could you publish a new version that includes this commit?\r\n\r\nhttps://github.com/cole/aiosmtplib/commit/321fc858a61da5792e5be52a5526869d320541ad\r\n\r\nMany thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/38", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/38/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/38/events", "html_url": "https://github.com/cole/aiosmtplib/issues/38", "id": 347730671, "node_id": "MDU6SXNzdWUzNDc3MzA2NzE=", "number": 38, "title": "Reconnecting after a failed connect seems to hang indefinitely", "user": {"login": "lufte", "id": 7890579, "node_id": "MDQ6VXNlcjc4OTA1Nzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/7890579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lufte", "html_url": "https://github.com/lufte", "followers_url": "https://api.github.com/users/lufte/followers", "following_url": "https://api.github.com/users/lufte/following{/other_user}", "gists_url": "https://api.github.com/users/lufte/gists{/gist_id}", "starred_url": "https://api.github.com/users/lufte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lufte/subscriptions", "organizations_url": "https://api.github.com/users/lufte/orgs", "repos_url": "https://api.github.com/users/lufte/repos", "events_url": "https://api.github.com/users/lufte/events{/privacy}", "received_events_url": "https://api.github.com/users/lufte/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-05T21:00:38Z", "updated_at": "2018-08-17T22:50:06Z", "closed_at": "2018-08-17T22:50:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Try the following snippet:\r\n```python\r\nimport aiosmtplib, asyncio\r\n\r\nasync def c():\r\n    s = aiosmtplib.SMTP('asd.asd.com')\r\n    try:\r\n        await s.connect()\r\n    except:\r\n        print('error raised for the first time')\r\n        try:\r\n            await s.connect()\r\n        except:\r\n            print('error raised for the first time, exiting')\r\n            return\r\n\r\nasyncio.get_event_loop().run_until_complete(c())\r\n```\r\nI would expect for the same error to be raised twice, but the obtained result was that an error is raised only for the first connection and the second one hangs indefinitely.\r\n\r\nI'm running aiosmtplib 1.0.2 under python 3.6.6.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/37", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/37/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/37/events", "html_url": "https://github.com/cole/aiosmtplib/issues/37", "id": 336940589, "node_id": "MDU6SXNzdWUzMzY5NDA1ODk=", "number": 37, "title": "AttributeError: 'NoneType' object has no attribute 'readuntil'", "user": {"login": "Taslim42", "id": 16733862, "node_id": "MDQ6VXNlcjE2NzMzODYy", "avatar_url": "https://avatars1.githubusercontent.com/u/16733862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Taslim42", "html_url": "https://github.com/Taslim42", "followers_url": "https://api.github.com/users/Taslim42/followers", "following_url": "https://api.github.com/users/Taslim42/following{/other_user}", "gists_url": "https://api.github.com/users/Taslim42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Taslim42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Taslim42/subscriptions", "organizations_url": "https://api.github.com/users/Taslim42/orgs", "repos_url": "https://api.github.com/users/Taslim42/repos", "events_url": "https://api.github.com/users/Taslim42/events{/privacy}", "received_events_url": "https://api.github.com/users/Taslim42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-06-29T10:05:24Z", "updated_at": "2019-01-14T17:16:26Z", "closed_at": "2019-01-14T17:16:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm having trouble sending several emails in a loop. When I do so, I've got an error apparently spawning randomly. Do you have any ideas of what the issue is?\r\n\r\nPlease read the code below.\r\n\r\n```\r\nfrom time import sleep\r\nimport email\r\nimport asyncio\r\nimport aiosmtplib\r\n\r\nloop = asyncio.get_event_loop()\r\nfor i in range(20):\r\n    smtp = aiosmtplib.SMTP(hostname='gmail-smtp-in.l.google.com', port=25, loop=loop, use_tls=False)\r\n    msg = email.message_from_string(my_eml)\r\n    loop.run_until_complete(smtp.connect())\r\n    loop.run_until_complete(smtp.starttls())\r\n    loop.run_until_complete(smtp.send_message(msg))\r\n    sleep(0.5)\r\n    smtp.close()\r\nloop.close()\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 33, in <module>\r\n    loop.run_until_complete(smtp.send_message(msg))\r\n  File \"/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 468, in run_until_complete\r\n    return future.result()\r\n  File \"/Users/myuser/.local/share/virtualenvs/proxy-D8_I7f06/lib/python3.6/site-packages/aiosmtplib/smtp.py\", line 229, in send_message\r\n    sender, recipients, flat_message, timeout=timeout)\r\n  File \"/Users/myuser/.local/share/virtualenvs/proxy-D8_I7f06/lib/python3.6/site-packages/aiosmtplib/smtp.py\", line 155, in sendmail\r\n    response = await self.data(message, timeout=timeout)\r\n  File \"/Users/myuser/.local/share/virtualenvs/proxy-D8_I7f06/lib/python3.6/site-packages/aiosmtplib/esmtp.py\", line 278, in data\r\n    timeout=timeout)\r\n  File \"/Users/myuser/.local/share/virtualenvs/proxy-D8_I7f06/lib/python3.6/site-packages/aiosmtplib/protocol.py\", line 120, in read_response\r\n    line = await self._readline(timeout=timeout)\r\n  File \"/Users/myuser/.local/share/virtualenvs/proxy-D8_I7f06/lib/python3.6/site-packages/aiosmtplib/protocol.py\", line 227, in _readline\r\n    self._stream_reader.readuntil(separator=b'\\n'), loop=self._loop)\r\nAttributeError: 'NoneType' object has no attribute 'readuntil'\r\n```\r\n\r\nPython 3.6.5\r\naiosmtplib 1.0.2\r\n\r\nCheers,\r\nTaslim42.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/36", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/36/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/36/events", "html_url": "https://github.com/cole/aiosmtplib/issues/36", "id": 329900496, "node_id": "MDU6SXNzdWUzMjk5MDA0OTY=", "number": 36, "title": "Unix socket support", "user": {"login": "ikrivosheev", "id": 6786239, "node_id": "MDQ6VXNlcjY3ODYyMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/6786239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ikrivosheev", "html_url": "https://github.com/ikrivosheev", "followers_url": "https://api.github.com/users/ikrivosheev/followers", "following_url": "https://api.github.com/users/ikrivosheev/following{/other_user}", "gists_url": "https://api.github.com/users/ikrivosheev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ikrivosheev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ikrivosheev/subscriptions", "organizations_url": "https://api.github.com/users/ikrivosheev/orgs", "repos_url": "https://api.github.com/users/ikrivosheev/repos", "events_url": "https://api.github.com/users/ikrivosheev/events{/privacy}", "received_events_url": "https://api.github.com/users/ikrivosheev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 127553648, "node_id": "MDU6TGFiZWwxMjc1NTM2NDg=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-06T14:45:29Z", "updated_at": "2019-08-05T21:14:39Z", "closed_at": "2019-08-05T21:14:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Can I connect to smtp server using unix socket? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/35", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/35/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/35/events", "html_url": "https://github.com/cole/aiosmtplib/issues/35", "id": 328761186, "node_id": "MDU6SXNzdWUzMjg3NjExODY=", "number": 35, "title": "RuntimeError: This event loop is already running", "user": {"login": "araa47", "id": 22760261, "node_id": "MDQ6VXNlcjIyNzYwMjYx", "avatar_url": "https://avatars1.githubusercontent.com/u/22760261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/araa47", "html_url": "https://github.com/araa47", "followers_url": "https://api.github.com/users/araa47/followers", "following_url": "https://api.github.com/users/araa47/following{/other_user}", "gists_url": "https://api.github.com/users/araa47/gists{/gist_id}", "starred_url": "https://api.github.com/users/araa47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/araa47/subscriptions", "organizations_url": "https://api.github.com/users/araa47/orgs", "repos_url": "https://api.github.com/users/araa47/repos", "events_url": "https://api.github.com/users/araa47/events{/privacy}", "received_events_url": "https://api.github.com/users/araa47/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-02T17:21:05Z", "updated_at": "2018-06-03T15:09:09Z", "closed_at": "2018-06-03T15:09:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, I'm trying to run some code to send some emails, however, I am already using the event loop for another task. When I try running the line ```loop.run_until_complete(smtp.connect()) ```\r\nI get the following error \" RuntimeError: This event loop is already running \". ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/34", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/34/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/34/events", "html_url": "https://github.com/cole/aiosmtplib/issues/34", "id": 321198231, "node_id": "MDU6SXNzdWUzMjExOTgyMzE=", "number": 34, "title": "Am I using auth correctly?", "user": {"login": "jamesstidard", "id": 1797906, "node_id": "MDQ6VXNlcjE3OTc5MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1797906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesstidard", "html_url": "https://github.com/jamesstidard", "followers_url": "https://api.github.com/users/jamesstidard/followers", "following_url": "https://api.github.com/users/jamesstidard/following{/other_user}", "gists_url": "https://api.github.com/users/jamesstidard/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesstidard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesstidard/subscriptions", "organizations_url": "https://api.github.com/users/jamesstidard/orgs", "repos_url": "https://api.github.com/users/jamesstidard/repos", "events_url": "https://api.github.com/users/jamesstidard/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesstidard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-08T13:58:16Z", "updated_at": "2018-05-09T10:26:57Z", "closed_at": "2018-05-09T10:26:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use a remote SMTP server that requires a email and password. Though the SMTP class doesn't appear to take a username and password as it arguments. I did find the `SMTP.auth_login` function in the documentation.\r\n\r\nI've managed to establish what I think is a secure connection, though I'm unsure if I'm using the API correctly. Here's what I have:\r\n\r\n```python\r\nsmtp = aiosmtplib.SMTP(\r\n    hostname=SMTP_HOSTNAME,\r\n    port=SMTP_PORT,\r\n    use_tls=False)\r\n_ = await smtp.connect()\r\n_ = await smtp.ehlo()\r\n_ = await smtp.starttls()\r\n_ = await smtp.ehlo()\r\n_ = await smtp.auth_login(SMTP_USERNAME, SMTP_PASSWORD)\r\n```\r\nI feel like I may be calling internal API stuff or, if I'm meant to, I may be doing it incorrectly. My knowleage of SMTP servers/protocols is between zero and none.\r\n\r\nThanks for the library.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/33", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/33/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/33/events", "html_url": "https://github.com/cole/aiosmtplib/issues/33", "id": 313570333, "node_id": "MDU6SXNzdWUzMTM1NzAzMzM=", "number": 33, "title": "Package license file", "user": {"login": "jakirkham", "id": 3019665, "node_id": "MDQ6VXNlcjMwMTk2NjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3019665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakirkham", "html_url": "https://github.com/jakirkham", "followers_url": "https://api.github.com/users/jakirkham/followers", "following_url": "https://api.github.com/users/jakirkham/following{/other_user}", "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions", "organizations_url": "https://api.github.com/users/jakirkham/orgs", "repos_url": "https://api.github.com/users/jakirkham/repos", "events_url": "https://api.github.com/users/jakirkham/events{/privacy}", "received_events_url": "https://api.github.com/users/jakirkham/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-04-12T04:09:45Z", "updated_at": "2018-04-13T13:42:47Z", "closed_at": "2018-04-13T13:42:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Could you please add the license file to `MANIFEST.in` and `setup.cfg` so that it will be included in `sdist`s, `whl`s, and other packages?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/32", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/32/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/32/events", "html_url": "https://github.com/cole/aiosmtplib/issues/32", "id": 290778132, "node_id": "MDU6SXNzdWUyOTA3NzgxMzI=", "number": 32, "title": "regarding the concurrency benenchmark", "user": {"login": "zh0uquan", "id": 9401319, "node_id": "MDQ6VXNlcjk0MDEzMTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/9401319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh0uquan", "html_url": "https://github.com/zh0uquan", "followers_url": "https://api.github.com/users/zh0uquan/followers", "following_url": "https://api.github.com/users/zh0uquan/following{/other_user}", "gists_url": "https://api.github.com/users/zh0uquan/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh0uquan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh0uquan/subscriptions", "organizations_url": "https://api.github.com/users/zh0uquan/orgs", "repos_url": "https://api.github.com/users/zh0uquan/repos", "events_url": "https://api.github.com/users/zh0uquan/events{/privacy}", "received_events_url": "https://api.github.com/users/zh0uquan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-23T10:08:56Z", "updated_at": "2018-02-06T13:21:00Z", "closed_at": "2018-02-06T13:20:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@cole Hello cole, thanks for the good library, learned a lot from this cool asyncio library.\r\n\r\n As you said in the [parallel execution](https://aiosmtplib.readthedocs.io/en/latest/overview.html#parallel-execution), we can't gain a lot from asynchronous communication since SMTP is sequential protocol, thus even with async, we can only send email one by one, thus we can't solve I/O bound issue except creating a new SMTP client. \r\nso this means we either have lots of emails to send to one smtp server, or emails belongs to different smtp server, thus we gain benefits? and have you done some benchmark some comparing to sync smtp client in threads?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/30", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/30/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/30/events", "html_url": "https://github.com/cole/aiosmtplib/issues/30", "id": 282962192, "node_id": "MDU6SXNzdWUyODI5NjIxOTI=", "number": 30, "title": "Assertion error when calling send_message on a closed connection", "user": {"login": "russss", "id": 45057, "node_id": "MDQ6VXNlcjQ1MDU3", "avatar_url": "https://avatars1.githubusercontent.com/u/45057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russss", "html_url": "https://github.com/russss", "followers_url": "https://api.github.com/users/russss/followers", "following_url": "https://api.github.com/users/russss/following{/other_user}", "gists_url": "https://api.github.com/users/russss/gists{/gist_id}", "starred_url": "https://api.github.com/users/russss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russss/subscriptions", "organizations_url": "https://api.github.com/users/russss/orgs", "repos_url": "https://api.github.com/users/russss/repos", "events_url": "https://api.github.com/users/russss/events{/privacy}", "received_events_url": "https://api.github.com/users/russss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-18T17:37:20Z", "updated_at": "2018-04-09T17:11:46Z", "closed_at": "2018-04-09T17:11:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "When calling `send_message` on an aiosmtplib connection where the remote end has closed, I'd expect to get a `SMTPServerDisconnected` exception. \r\n\r\nInstead, I get an assertion error, which is not the most ideal thing to handle:\r\n\r\n```\r\n  File \"aiosmtplib/smtp.py\", line 229, in send_message\r\n    sender, recipients, flat_message, timeout=timeout)\r\n  File \"aiosmtplib/smtp.py\", line 152, in sendmail\r\n    await self.mail(sender, options=mail_options, timeout=timeout)\r\n  File \"aiosmtplib/esmtp.py\", line 217, in mail\r\n    b'MAIL', from_string, *options_bytes, timeout=timeout)\r\n  File \"aiosmtplib/connection.py\", line 270, in execute_command\r\n    *args, timeout=timeout)\r\n  File \"aiosmtplib/protocol.py\", line 178, in execute_command\r\n    await self.write_and_drain(command, timeout=timeout)\r\n  File \"aiosmtplib/protocol.py\", line 146, in write_and_drain\r\n    assert self._stream_writer is not None, 'Client not connected'\r\nAssertionError: Client not connected\r\n```\r\n\r\nPython 3.5, aiosmtplib 1.0.2.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/29", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/29/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/29/events", "html_url": "https://github.com/cole/aiosmtplib/issues/29", "id": 242899984, "node_id": "MDU6SXNzdWUyNDI4OTk5ODQ=", "number": 29, "title": "Add examples in documentation for various TLS server setups", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770922, "node_id": "MDU6TGFiZWw2NDY3NzA5MjI=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/documentation", "name": "documentation", "color": "fbca04", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:20:43Z", "updated_at": "2018-04-09T17:10:08Z", "closed_at": "2018-04-09T17:10:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/28", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/28/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/28/events", "html_url": "https://github.com/cole/aiosmtplib/issues/28", "id": 242899704, "node_id": "MDU6SXNzdWUyNDI4OTk3MDQ=", "number": 28, "title": "Add documentation for email.Message basics", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770922, "node_id": "MDU6TGFiZWw2NDY3NzA5MjI=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/documentation", "name": "documentation", "color": "fbca04", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:18:23Z", "updated_at": "2018-01-20T18:41:02Z", "closed_at": "2018-01-20T18:41:02Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Especially multipart messages", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/27", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/27/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/27/events", "html_url": "https://github.com/cole/aiosmtplib/issues/27", "id": 242899617, "node_id": "MDU6SXNzdWUyNDI4OTk2MTc=", "number": 27, "title": "Add tests for locking failures", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770837, "node_id": "MDU6TGFiZWw2NDY3NzA4Mzc=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/unit%20tests", "name": "unit tests", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:17:34Z", "updated_at": "2018-04-09T21:24:32Z", "closed_at": "2018-04-09T21:24:32Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/26", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/26/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/26/events", "html_url": "https://github.com/cole/aiosmtplib/issues/26", "id": 242899573, "node_id": "MDU6SXNzdWUyNDI4OTk1NzM=", "number": 26, "title": "Add tests for EmailMessage with resent headers", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770837, "node_id": "MDU6TGFiZWw2NDY3NzA4Mzc=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/unit%20tests", "name": "unit tests", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-14T05:17:11Z", "updated_at": "2018-04-09T21:20:53Z", "closed_at": "2018-04-09T21:20:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/25", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/25/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/25/events", "html_url": "https://github.com/cole/aiosmtplib/issues/25", "id": 242899481, "node_id": "MDU6SXNzdWUyNDI4OTk0ODE=", "number": 25, "title": "Add tests for config argument precedence (init/connect/starttls)", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770837, "node_id": "MDU6TGFiZWw2NDY3NzA4Mzc=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/unit%20tests", "name": "unit tests", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:16:10Z", "updated_at": "2019-01-16T04:49:15Z", "closed_at": "2019-01-16T04:49:15Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/24", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/24/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/24/events", "html_url": "https://github.com/cole/aiosmtplib/issues/24", "id": 242899443, "node_id": "MDU6SXNzdWUyNDI4OTk0NDM=", "number": 24, "title": "Add tests for all sendmail errors", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770837, "node_id": "MDU6TGFiZWw2NDY3NzA4Mzc=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/unit%20tests", "name": "unit tests", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:15:54Z", "updated_at": "2018-04-09T21:24:13Z", "closed_at": "2018-04-09T21:24:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/23", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/23/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/23/events", "html_url": "https://github.com/cole/aiosmtplib/issues/23", "id": 242899407, "node_id": "MDU6SXNzdWUyNDI4OTk0MDc=", "number": 23, "title": "Add tests for invalid cert in SSL/STARTTLS connections", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770837, "node_id": "MDU6TGFiZWw2NDY3NzA4Mzc=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/unit%20tests", "name": "unit tests", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:15:30Z", "updated_at": "2018-04-13T05:13:06Z", "closed_at": "2018-04-13T05:13:06Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/22", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/22/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/22/events", "html_url": "https://github.com/cole/aiosmtplib/issues/22", "id": 242899350, "node_id": "MDU6SXNzdWUyNDI4OTkzNTA=", "number": 22, "title": "Switch from smtpd to aiosmtpd in tests", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 646770837, "node_id": "MDU6TGFiZWw2NDY3NzA4Mzc=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/unit%20tests", "name": "unit tests", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-14T05:15:01Z", "updated_at": "2018-09-21T04:31:19Z", "closed_at": "2018-09-21T04:31:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/21", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/21/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/21/events", "html_url": "https://github.com/cole/aiosmtplib/issues/21", "id": 242899206, "node_id": "MDU6SXNzdWUyNDI4OTkyMDY=", "number": 21, "title": "Add authentication options to init & connect methods", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 127553648, "node_id": "MDU6TGFiZWwxMjc1NTM2NDg=", "url": "https://api.github.com/repos/cole/aiosmtplib/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-14T05:13:41Z", "updated_at": "2019-08-05T21:13:18Z", "closed_at": "2019-08-05T21:13:18Z", "author_association": "OWNER", "active_lock_reason": null, "body": "If provided, automatically call login on connect.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/18", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/18/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/18/events", "html_url": "https://github.com/cole/aiosmtplib/issues/18", "id": 217036629, "node_id": "MDU6SXNzdWUyMTcwMzY2Mjk=", "number": 18, "title": "incompatible with uvloop because of access to private attribute _protocol", "user": {"login": "nihlaeth", "id": 2404332, "node_id": "MDQ6VXNlcjI0MDQzMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/2404332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nihlaeth", "html_url": "https://github.com/nihlaeth", "followers_url": "https://api.github.com/users/nihlaeth/followers", "following_url": "https://api.github.com/users/nihlaeth/following{/other_user}", "gists_url": "https://api.github.com/users/nihlaeth/gists{/gist_id}", "starred_url": "https://api.github.com/users/nihlaeth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nihlaeth/subscriptions", "organizations_url": "https://api.github.com/users/nihlaeth/orgs", "repos_url": "https://api.github.com/users/nihlaeth/repos", "events_url": "https://api.github.com/users/nihlaeth/events{/privacy}", "received_events_url": "https://api.github.com/users/nihlaeth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-26T08:27:59Z", "updated_at": "2017-04-07T09:52:42Z", "closed_at": "2017-04-07T03:19:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using [uvloop](https://github.com/MagicStack/uvloop) because of the significant speed up that it provides. However this seems to be incompatible with using the starttls method.\r\n\r\nminimal example (put in actual connection information before running):\r\n```python\r\nimport asyncio\r\nimport uvloop\r\nasyncio.set_event_loop_policy(uvloop.EventLoopPolicy())\r\n\r\nimport aiosmtplib\r\n\r\nasync def connect(loop):\r\n    smtp = aiosmtplib.SMTP(\r\n        loop=loop,\r\n        hostname=localhost,\r\n        port=port,\r\n        use_tls=True)\r\n    await smtp.connect(use_tls=False, port=port)\r\n    await smtp.starttls(validate_certs=False)\r\n\r\nif __name__ == \"__main__\":\r\n    loop = asyncio.get_event_loop()\r\n    loop.run_until_complete(connect(loop))\r\n```\r\n\r\nresult\r\n```\r\nTraceback (most recent call last):\r\n  File \"minimal_example.py\", line 19, in <module>\r\n    loop.run_until_complete(connect(loop))\r\n  File \"uvloop/loop.pyx\", line 1203, in uvloop.loop.Loop.run_until_complete (uvloop/loop.c:25632)\r\n  File \"minimal_example.py\", line 15, in connect\r\n    await smtp.starttls(validate_certs=False)\r\n  File \"/git/dnd/lib64/python3.6/site-packages/aiosmtplib/esmtp.py\", line 193, in starttls\r\n    tls_context, server_hostname=server_hostname, timeout=timeout)\r\n  File \"/git/dnd/lib64/python3.6/site-packages/aiosmtplib/protocol.py\", line 209, in starttls\r\n    tls_context, server_hostname=server_hostname, waiter=waiter)\r\n  File \"/git/dnd/lib64/python3.6/site-packages/aiosmtplib/protocol.py\", line 82, in upgrade_transport\r\n    self.reader._transport._protocol = tls_protocol  # type: ignore\r\nAttributeError: 'uvloop.loop.TCPTransport' object has no attribute '_protocol'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/17", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/17/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/17/events", "html_url": "https://github.com/cole/aiosmtplib/issues/17", "id": 211067644, "node_id": "MDU6SXNzdWUyMTEwNjc2NDQ=", "number": 17, "title": "does it support cc and bcc?", "user": {"login": "lixxu", "id": 264487, "node_id": "MDQ6VXNlcjI2NDQ4Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/264487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lixxu", "html_url": "https://github.com/lixxu", "followers_url": "https://api.github.com/users/lixxu/followers", "following_url": "https://api.github.com/users/lixxu/following{/other_user}", "gists_url": "https://api.github.com/users/lixxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/lixxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lixxu/subscriptions", "organizations_url": "https://api.github.com/users/lixxu/orgs", "repos_url": "https://api.github.com/users/lixxu/repos", "events_url": "https://api.github.com/users/lixxu/events{/privacy}", "received_events_url": "https://api.github.com/users/lixxu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-01T12:30:59Z", "updated_at": "2017-03-04T13:41:12Z", "closed_at": "2017-03-04T13:41:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not sure if it supports `cc` and `bcc` as I check the code and not found these options.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/16", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/16/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/16/events", "html_url": "https://github.com/cole/aiosmtplib/issues/16", "id": 203756240, "node_id": "MDU6SXNzdWUyMDM3NTYyNDA=", "number": 16, "title": "When connecting to port 25 or 587 and using TLS, SMTP.connect() has to be plain text before issuing starttls.", "user": {"login": "nihlaeth", "id": 2404332, "node_id": "MDQ6VXNlcjI0MDQzMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/2404332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nihlaeth", "html_url": "https://github.com/nihlaeth", "followers_url": "https://api.github.com/users/nihlaeth/followers", "following_url": "https://api.github.com/users/nihlaeth/following{/other_user}", "gists_url": "https://api.github.com/users/nihlaeth/gists{/gist_id}", "starred_url": "https://api.github.com/users/nihlaeth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nihlaeth/subscriptions", "organizations_url": "https://api.github.com/users/nihlaeth/orgs", "repos_url": "https://api.github.com/users/nihlaeth/repos", "events_url": "https://api.github.com/users/nihlaeth/events{/privacy}", "received_events_url": "https://api.github.com/users/nihlaeth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-27T22:28:03Z", "updated_at": "2017-01-29T22:52:45Z", "closed_at": "2017-01-29T22:52:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "When connecting to port 25 or 587 and using TLS, SMTP.connect() has to initiate a plaintext connection before issuing starttls.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/git/dnd/lib64/python3.6/site-packages/aiosmtplib/connection.py\", line 46, in create_connection\r\n    connect_future, timeout=timeout, loop=loop)\r\n  File \"/usr/lib64/python3.6/asyncio/tasks.py\", line 352, in wait_for\r\n    return fut.result()\r\n  File \"/usr/lib64/python3.6/asyncio/base_events.py\", line 802, in create_connection\r\n    sock, protocol_factory, ssl, server_hostname)\r\n  File \"/usr/lib64/python3.6/asyncio/base_events.py\", line 828, in _create_connection_transport\r\n    yield from waiter\r\n  File \"/usr/lib64/python3.6/asyncio/sslproto.py\", line 503, in data_received\r\n    ssldata, appdata = self._sslpipe.feed_ssldata(data)\r\n  File \"/usr/lib64/python3.6/asyncio/sslproto.py\", line 201, in feed_ssldata\r\n    self._sslobj.do_handshake()\r\n  File \"/usr/lib64/python3.6/ssl.py\", line 683, in do_handshake\r\n    self._sslobj.do_handshake()\r\nssl.SSLError: [SSL: UNKNOWN_PROTOCOL] unknown protocol (_ssl.c:749)\r\n```\r\n\r\n```python\r\nasync with aiosmtplib.SMTP(\r\n        loop=cfg.APP.loop,\r\n        hostname=cfg.SMTP_HOST,\r\n        port=cfg.SMTP_PORT,\r\n        use_tls=cfg.SMTP_TLS,\r\n        ) as smtp:\r\n    if cfg.SMTP_TLS:\r\n        await smtp.starttls(validate_certs=False)\r\n    if cfg.SMTP_USERNAME:\r\n        await smtp.login(cfg.SMTP_USERNAME, cfg.SMTP_PASSWORD)\r\n    msg = MIMEText(body, 'html')\r\n    msg['Subject'] = subject\r\n    msg['From'] = cfg.SMTP_SENDER\r\n    msg['To'] = recipient\r\n    await smtp.send_message(msg)\r\n```\r\nTo be clear, cfg.SMTP_PORT was set to 587, and cfg.SMTP_TLS to True in this case.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/15", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/15/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/15/events", "html_url": "https://github.com/cole/aiosmtplib/issues/15", "id": 197317140, "node_id": "MDU6SXNzdWUxOTczMTcxNDA=", "number": 15, "title": "concurrency problem", "user": {"login": "DeoLeung", "id": 3764720, "node_id": "MDQ6VXNlcjM3NjQ3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3764720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeoLeung", "html_url": "https://github.com/DeoLeung", "followers_url": "https://api.github.com/users/DeoLeung/followers", "following_url": "https://api.github.com/users/DeoLeung/following{/other_user}", "gists_url": "https://api.github.com/users/DeoLeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeoLeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeoLeung/subscriptions", "organizations_url": "https://api.github.com/users/DeoLeung/orgs", "repos_url": "https://api.github.com/users/DeoLeung/repos", "events_url": "https://api.github.com/users/DeoLeung/events{/privacy}", "received_events_url": "https://api.github.com/users/DeoLeung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-12-23T06:00:45Z", "updated_at": "2017-05-22T06:43:46Z", "closed_at": "2017-05-22T06:43:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I created a client\r\n```python\r\nsmtp = SMTP(...)\r\n```\r\nand the code of sending email\r\n```python\r\nasync def send_mails(smtp):\r\n  async with smtp:\r\n    await smtp.ehlo()\r\n    await smtp.login()\r\n    await smtp.send_message()\r\n```\r\nif it's called concurrently I will get errors:\r\n```sh\r\naiosmtplib.errors.SMTPResponseException: (250, 'PIPELINING\\nSTARTTLS\\nAUTH=LOGIN\\n8BITMIME')\r\naiosmtplib.errors.SMTPHeloError: (221, 'smtp.qq.com\\nSIZE 73400320\\nAUTH LOGIN PLAIN\\nMAILCOMPRESS\\nBye')\r\naiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response: ')\r\n```\r\nIs there some form of locking implemented in a single instance?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/14", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/14/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/14/events", "html_url": "https://github.com/cole/aiosmtplib/issues/14", "id": 197316140, "node_id": "MDU6SXNzdWUxOTczMTYxNDA=", "number": 14, "title": "smtp context shall check the connect status", "user": {"login": "DeoLeung", "id": 3764720, "node_id": "MDQ6VXNlcjM3NjQ3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3764720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeoLeung", "html_url": "https://github.com/DeoLeung", "followers_url": "https://api.github.com/users/DeoLeung/followers", "following_url": "https://api.github.com/users/DeoLeung/following{/other_user}", "gists_url": "https://api.github.com/users/DeoLeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeoLeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeoLeung/subscriptions", "organizations_url": "https://api.github.com/users/DeoLeung/orgs", "repos_url": "https://api.github.com/users/DeoLeung/repos", "events_url": "https://api.github.com/users/DeoLeung/events{/privacy}", "received_events_url": "https://api.github.com/users/DeoLeung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-23T05:46:13Z", "updated_at": "2016-12-23T07:21:36Z", "closed_at": "2016-12-23T07:21:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/cole/aiosmtplib/blob/master/aiosmtplib/smtp.py#L56\r\n\r\nI think the return response code shall be checked, if it's not 220(or store it in attribute so it can be checked later)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/13", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/13/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/13/events", "html_url": "https://github.com/cole/aiosmtplib/issues/13", "id": 197315814, "node_id": "MDU6SXNzdWUxOTczMTU4MTQ=", "number": 13, "title": "login needs elho every time", "user": {"login": "DeoLeung", "id": 3764720, "node_id": "MDQ6VXNlcjM3NjQ3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3764720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeoLeung", "html_url": "https://github.com/DeoLeung", "followers_url": "https://api.github.com/users/DeoLeung/followers", "following_url": "https://api.github.com/users/DeoLeung/following{/other_user}", "gists_url": "https://api.github.com/users/DeoLeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeoLeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeoLeung/subscriptions", "organizations_url": "https://api.github.com/users/DeoLeung/orgs", "repos_url": "https://api.github.com/users/DeoLeung/repos", "events_url": "https://api.github.com/users/DeoLeung/events{/privacy}", "received_events_url": "https://api.github.com/users/DeoLeung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-23T05:41:33Z", "updated_at": "2017-03-27T03:54:00Z", "closed_at": "2017-03-27T03:54:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nthanks for the great lib, now I use it couple with tornado to send email async.\r\n\r\nthere is a problem with the check here\r\nhttps://github.com/cole/aiosmtplib/blob/master/aiosmtplib/smtp.py#L464\r\nit does nothing\r\n\r\nI still need to do ehlo() every time to make it work, otherwise I will get 503\r\n```python\r\nasync with smtp:\r\n  await smtp.ehlo()\r\n  await smtp.login(...)\r\n  ...\r\n  await smtp.send_message()\r\n```\r\nI'm not very familiar with smtp protocol, also I wonder whether there's a plan to simplify the process to be like\r\n```python\r\nsmtp = SMTP(host, port, user, pwd)\r\nasync with smtp:\r\n  ...\r\n  await smtp.send_message(...)\r\n```\r\nso I don't need to worry about the login each time\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/12", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/12/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/12/events", "html_url": "https://github.com/cole/aiosmtplib/issues/12", "id": 196931355, "node_id": "MDU6SXNzdWUxOTY5MzEzNTU=", "number": 12, "title": "message issue", "user": {"login": "wsbmilk", "id": 12369552, "node_id": "MDQ6VXNlcjEyMzY5NTUy", "avatar_url": "https://avatars0.githubusercontent.com/u/12369552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wsbmilk", "html_url": "https://github.com/wsbmilk", "followers_url": "https://api.github.com/users/wsbmilk/followers", "following_url": "https://api.github.com/users/wsbmilk/following{/other_user}", "gists_url": "https://api.github.com/users/wsbmilk/gists{/gist_id}", "starred_url": "https://api.github.com/users/wsbmilk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wsbmilk/subscriptions", "organizations_url": "https://api.github.com/users/wsbmilk/orgs", "repos_url": "https://api.github.com/users/wsbmilk/repos", "events_url": "https://api.github.com/users/wsbmilk/events{/privacy}", "received_events_url": "https://api.github.com/users/wsbmilk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-12-21T13:21:35Z", "updated_at": "2016-12-22T00:38:49Z", "closed_at": "2016-12-22T00:38:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "from wikipedia: https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol\r\n\r\nmessage should be:\r\nFrom: a@a.com\r\nTo: b@b.com\r\nSubject: Testing\r\n\r\ncontent", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/11", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/11/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/11/events", "html_url": "https://github.com/cole/aiosmtplib/issues/11", "id": 196928596, "node_id": "MDU6SXNzdWUxOTY5Mjg1OTY=", "number": 11, "title": "why not split message to from, subject and body vars?", "user": {"login": "wsbmilk", "id": 12369552, "node_id": "MDQ6VXNlcjEyMzY5NTUy", "avatar_url": "https://avatars0.githubusercontent.com/u/12369552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wsbmilk", "html_url": "https://github.com/wsbmilk", "followers_url": "https://api.github.com/users/wsbmilk/followers", "following_url": "https://api.github.com/users/wsbmilk/following{/other_user}", "gists_url": "https://api.github.com/users/wsbmilk/gists{/gist_id}", "starred_url": "https://api.github.com/users/wsbmilk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wsbmilk/subscriptions", "organizations_url": "https://api.github.com/users/wsbmilk/orgs", "repos_url": "https://api.github.com/users/wsbmilk/repos", "events_url": "https://api.github.com/users/wsbmilk/events{/privacy}", "received_events_url": "https://api.github.com/users/wsbmilk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-21T13:07:23Z", "updated_at": "2016-12-22T00:38:18Z", "closed_at": "2016-12-22T00:38:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "rt", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/8", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/8/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/8/events", "html_url": "https://github.com/cole/aiosmtplib/issues/8", "id": 191822773, "node_id": "MDU6SXNzdWUxOTE4MjI3NzM=", "number": 8, "title": "Timeout support", "user": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/cole/aiosmtplib/milestones/1", "html_url": "https://github.com/cole/aiosmtplib/milestone/1", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/milestones/1/labels", "id": 2158809, "node_id": "MDk6TWlsZXN0b25lMjE1ODgwOQ==", "number": 1, "title": "1.0.0", "description": null, "creator": {"login": "cole", "id": 134694, "node_id": "MDQ6VXNlcjEzNDY5NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/134694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole", "html_url": "https://github.com/cole", "followers_url": "https://api.github.com/users/cole/followers", "following_url": "https://api.github.com/users/cole/following{/other_user}", "gists_url": "https://api.github.com/users/cole/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole/subscriptions", "organizations_url": "https://api.github.com/users/cole/orgs", "repos_url": "https://api.github.com/users/cole/repos", "events_url": "https://api.github.com/users/cole/events{/privacy}", "received_events_url": "https://api.github.com/users/cole/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2016-11-26T19:37:53Z", "updated_at": "2017-01-28T18:23:13Z", "due_on": null, "closed_at": "2017-01-28T18:23:13Z"}, "comments": 0, "created_at": "2016-11-26T19:38:34Z", "updated_at": "2016-12-05T02:11:13Z", "closed_at": "2016-12-05T02:11:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "We should be able to pass a timeout to connect or __init__.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cole/aiosmtplib/issues/1", "repository_url": "https://api.github.com/repos/cole/aiosmtplib", "labels_url": "https://api.github.com/repos/cole/aiosmtplib/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/cole/aiosmtplib/issues/1/comments", "events_url": "https://api.github.com/repos/cole/aiosmtplib/issues/1/events", "html_url": "https://github.com/cole/aiosmtplib/issues/1", "id": 67076141, "node_id": "MDU6SXNzdWU2NzA3NjE0MQ==", "number": 1, "title": "Support for authentication and TLS", "user": {"login": "dannyclark", "id": 441920, "node_id": "MDQ6VXNlcjQ0MTkyMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/441920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dannyclark", "html_url": "https://github.com/dannyclark", "followers_url": "https://api.github.com/users/dannyclark/followers", "following_url": "https://api.github.com/users/dannyclark/following{/other_user}", "gists_url": "https://api.github.com/users/dannyclark/gists{/gist_id}", "starred_url": "https://api.github.com/users/dannyclark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dannyclark/subscriptions", "organizations_url": "https://api.github.com/users/dannyclark/orgs", "repos_url": "https://api.github.com/users/dannyclark/repos", "events_url": "https://api.github.com/users/dannyclark/events{/privacy}", "received_events_url": "https://api.github.com/users/dannyclark/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2015-04-08T08:24:03Z", "updated_at": "2016-11-26T19:55:07Z", "closed_at": "2016-11-26T19:55:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'd like to use this with email services (e.g. mandrill, sendgrid, Amazon SES) and as a pre-requisite it would need to support authentication.\n\nIdeally it should support TLS for security, which may be a pre-requisite of some email services.\n", "performed_via_github_app": null, "score": 1.0}]}