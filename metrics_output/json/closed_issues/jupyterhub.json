{"total_count": 1425, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3152", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3152/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3152/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3152/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3152", "id": 681838002, "node_id": "MDU6SXNzdWU2ODE4MzgwMDI=", "number": 3152, "title": "Jupyterhub in docker container not working with nginx reverse proxy", "user": {"login": "abashkinas", "id": 49237188, "node_id": "MDQ6VXNlcjQ5MjM3MTg4", "avatar_url": "https://avatars3.githubusercontent.com/u/49237188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abashkinas", "html_url": "https://github.com/abashkinas", "followers_url": "https://api.github.com/users/abashkinas/followers", "following_url": "https://api.github.com/users/abashkinas/following{/other_user}", "gists_url": "https://api.github.com/users/abashkinas/gists{/gist_id}", "starred_url": "https://api.github.com/users/abashkinas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abashkinas/subscriptions", "organizations_url": "https://api.github.com/users/abashkinas/orgs", "repos_url": "https://api.github.com/users/abashkinas/repos", "events_url": "https://api.github.com/users/abashkinas/events{/privacy}", "received_events_url": "https://api.github.com/users/abashkinas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-19T13:24:29Z", "updated_at": "2020-08-19T13:39:21Z", "closed_at": "2020-08-19T13:39:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\n\r\n**Hello, I have started jupyterhub as a service in dockerswarm. Without nginx reverse proxy, it works without problems. When I configure nginx reverse proxy with the following configuration:**\r\n\r\nserver {\r\n\r\nlisten 80;\r\n\r\nserver_name jupyter.ifora.hse.ru;\r\n\r\n\r\nindex index.html index.htm;\r\n\r\naccess_log /var/log/nginx/jupyter.ifora.hse.ru-access.log ;\r\nerror_log /var/log/nginx/jupyter.ifora.hse.ru-error.log error;\r\n\r\n\r\n\r\nlocation / {\r\n  proxy_pass http://172.18.207.29:8000;\r\n  proxy_set_header X-Real-IP $remote_addr;\r\n  proxy_set_header Host $host;\r\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n  proxy_set_header Upgrade $http_upgrade;\r\n  proxy_set_header Connection $connection_upgrade;\r\n}\r\n}\r\n\r\n**The following messages begin to appear in the jupyterhub logs:**\r\n\r\nupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:35.840 JupyterHub log:181] 200 POST /hub/api/users/admin/activity (admin@10.1.13.6) 17.07ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:40.132 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.28ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:40.136 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.63ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:40.263 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 37.34ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:55.101 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 0.97ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:55.106 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.66ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:25:55.134 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 24.86ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:10.103 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.43ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:10.126 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 1.28ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:10.170 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 38.67ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:25.102 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.14ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:25.107 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.89ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:25.147 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 35.87ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:40.126 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.22ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:40.130 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.92ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:40.162 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 27.79ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:55.103 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.56ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:55.108 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.86ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:26:55.141 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 27.69ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:10.103 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.84ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:10.111 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.74ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:10.145 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 30.30ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:25.129 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.23ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:25.133 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.77ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:25.253 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 27.17ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:40.101 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.09ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:40.106 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.69ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:40.143 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 32.72ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:55.101 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.08ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:55.105 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.81ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:27:55.136 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 27.47ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:10.228 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.71ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:10.234 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 1.13ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:10.267 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 28.57ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:25.101 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.28ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:25.106 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.97ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:25.140 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 30.08ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:40.101 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.76ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:40.108 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 1.94ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:40.145 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 32.96ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:55.100 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 0.88ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:55.109 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 0.92ms\r\njupyter_hub.1.vkcroo6bu1zt@swarm_manager | [I 2020-08-18 12:28:55.150 JupyterHub log:181] 200 GET /hub/login (@172.18.207.29) 36.64ms\r\n\r\n**After a few hours jupyterhub stops working and has the following error in its logs:**\r\n\r\n[E 2020-08-19 11:03:55.159 JupyterHub log:181] 500 GET /hub/login (@172.18.207.29) 50.32ms\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [I 2020-08-19 11:04:10.102 JupyterHub log:181] 302 GET / -> /hub/ (@172.18.207.29) 1.46ms\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [I 2020-08-19 11:04:10.127 JupyterHub log:181] 302 GET /hub/ -> /hub/login (@172.18.207.29) 1.47ms\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [E 2020-08-19 11:04:10.136 JupyterHub web:1792] Uncaught exception GET /hub/login (172.18.207.29)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | HTTPServerRequest(protocol='http', host='jupyter.ifora.hse.ru', method='GET', uri='/hub/login', version='HTTP/1.1', remote_ip='172.18.207.29')\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | Traceback (most recent call last):\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/tornado/web.py\", line 1703, in _execute\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | result = await result\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/handlers/login.py\", line 135, in get\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | self.finish(self._render(username=username))\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/nativeauthenticator/handlers.py\", line 151, in _render\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | {'next': self.get_argument('next', '')},\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/handlers/base.py\", line 1160, in render_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | template = self.get_template(name)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/handlers/base.py\", line 1154, in get_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return self.settings['jinja2_env'].get_template(name)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 883, in get_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return self._load_template(name, self.make_globals(globals))\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 857, in _load_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | template = self.loader.load(self, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 426, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return loader.load(environment, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 426, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return loader.load(environment, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 426, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return loader.load(environment, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [Previous line repeated 958 more times]\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 127, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | code = environment.compile(source, name, filename)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 628, in compile\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | source = self._parse(source, name, filename)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 539, in parse\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return Parser(self, source, name, encode_filename(filename)).parse()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 937, in parse\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | result = nodes.Template(self.subparse(), lineno=1)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 919, in subparse\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | rv = self.parse_statement()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 141, in parse_statement\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return getattr(self, \"parse\" + self.stream.current.value)()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 279, in parse_extends\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | node.template = self.parse_expression()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 448, in parse_expression\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return self.parse_condexpr()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 453, in parse_condexpr\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | expr1 = self.parse_or()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 466, in parse_or\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | left = self.parse_and()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 475, in parse_and\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | left = self.parse_not()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 486, in parse_not\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return self.parse_compare()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 490, in parse_compare\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | expr = self.parse_math1()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 513, in parse_math1\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | left = self.parse_concat()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 524, in parse_concat\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | args = [self.parse_math2()]\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 534, in parse_math2\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | left = self.parse_pow()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 545, in parse_pow\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | left = self.parse_unary()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 563, in parse_unary\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | node = self.parse_primary()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 580, in parse_primary\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | next(self.stream)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/lexer.py\", line 387, in next\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | self.current = next(self._iter)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/lexer.py\", line 660, in wrap\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | yield Token(lineno, token, value)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | RecursionError: maximum recursion depth exceeded\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager |\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [E 2020-08-19 11:04:10.175 JupyterHub web:1220] Uncaught exception in write_error\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | Traceback (most recent call last):\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/tornado/web.py\", line 1218, in send_error\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | self.write_error(status_code, **kwargs)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/handlers/base.py\", line 1244, in write_error\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | html = self.render_template('error.html', **ns)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/handlers/base.py\", line 1160, in render_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | template = self.get_template(name)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/handlers/base.py\", line 1154, in get_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return self.settings['jinja2_env'].get_template(name)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 883, in get_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return self._load_template(name, self.make_globals(globals))\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 857, in _load_template\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | template = self.loader.load(self, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 426, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return loader.load(environment, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 426, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return loader.load(environment, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 426, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return loader.load(environment, name, globals)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [Previous line repeated 959 more times]\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/loaders.py\", line 127, in load\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | code = environment.compile(source, name, filename)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 628, in compile\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | source = self._parse(source, name, filename)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 539, in _parse\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return Parser(self, source, name, encode_filename(filename)).parse()\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/parser.py\", line 45, in init\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | self.stream = environment._tokenize(source, name, filename, state)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/environment.py\", line 573, in _tokenize\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | stream = self.lexer.tokenize(source, name, filename, state)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/lexer.py\", line 616, in tokenize\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | return TokenStream(self.wrap(stream, name, filename), name, filename)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/lexer.py\", line 334, in init\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | next(self)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/lexer.py\", line 387, in next\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | self.current = next(self._iter)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | File \"/usr/local/lib/python3.6/dist-packages/jinja2/lexer.py\", line 660, in wrap\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | yield Token(lineno, token, value)\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | RecursionError: maximum recursion depth exceeded\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager |\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [E 2020-08-19 11:04:10.193 JupyterHub log:173] {\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"X-Forwarded-Host\": \"jupyter.ifora.hse.ru\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"X-Forwarded-Proto\": \"http\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"X-Forwarded-Port\": \"80\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"Referer\": \"http://172.18.207.37/hub/\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"User-Agent\": \"Go-http-client/1.1\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"Connection\": \"close\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"X-Forwarded-For\": \"172.18.207.29,::ffff:10.255.0.2\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"Host\": \"jupyter.ifora.hse.ru\",\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | \"X-Real-Ip\": \"172.18.207.29\"\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | }\r\njupyter_hub.1.ry6cazaavyrc@swarm_manager | [E 2020-08-19 11:04:10.193 JupyterHub log:181] 500 GET /hub/login (@172.18.207.29) 61.07ms\r\n\r\n**Please help me solve the problem.**\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n**Dockerfile jupyterhub:**\r\n\r\nFROM jupyterhub/jupyterhub:1.2\r\n\r\nUSER root\r\n\r\nRUN pip install notebook\r\nRUN pip install --no-cache dockerspawner\r\nRUN pip3 install psycopg2-binary\r\nRUN pip install --no-cache jupyterhub-nativeauthenticator\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n**jupyterhub_config.py:**\r\n\r\nimport os\r\n\r\n#\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 JPY_DB_PASSWORD \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 jupyter \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 pg_cluster_01\r\n#f = open(\"/var/run/secrets/jupyterhub_postgres_pass\", \"r\")\r\n#os.environ['JPY_DB_PASSWORD'] = (f.read())\r\n\r\n#\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435\r\nnotebook_dir = '/home/jovyan'\r\nc.SwarmSpawner.notebook_dir = notebook_dir\r\n\r\n#\u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0438 \u0441 \u0445\u043e\u0441\u0442\u0430 \u0432 \u043f\u0430\u043f\u043a\u0443 home \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\r\ndef create_dir_hook(spawner):\r\nusername = spawner.user.name # get the username\r\nvolume_path = os.path.join('/home/data/jupyterhub_data/', username)\r\nif not os.path.exists(volume_path):\r\nos.makedirs(volume_path)\r\nos.chmod(volume_path, 0o777)\r\nmounts_user = [\r\n{'type': 'bind',\r\n'source': '/home/data/jupyterhub_data/' + username,\r\n'target': '/home/jovyan', }\r\n]\r\nspawner.extra_container_spec = {\r\n'mounts': mounts_user\r\n}\r\n\r\nc.Spawner.pre_spawn_hook = create_dir_hook\r\n\r\n#\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f admin\r\nc.Authenticator.admin_users = {'admin'}\r\n\r\n#\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043f\u043e\u0441\u043b\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f jupyterhub\r\nc.LocalAuthenticator.create_system_users = True\r\n\r\n#\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 postgresql\r\n\r\nc.JupyterHub.db_url = \"postgresql://{}@{}:{}/{}\".format(\r\nos.environ['JPY_DB_USER'],\r\nos.environ['POSTGRES_PORT_5432_TCP_ADDR'],\r\nos.environ['POSTGRES_PORT_5432_TCP_PORT'],\r\nos.environ['JPY_DB_NAME']\r\n)\r\n\r\n#\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u0443\u044e \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e jupiterhub\r\nc.JupyterHub.authenticator_class = 'nativeauthenticator.NativeAuthenticator'\r\n\r\n#\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 jupyterlab \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\r\nc.SwarmSpawner.default_url = '/lab'\r\n\r\n#\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0439 docker \u043e\u0431\u0440\u0430\u0437 \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439\r\nc.SwarmSpawner.image = 'abashkin/jupyterhub_singleuser:1.2'\r\n\r\nc.ConfigurableHTTPProxy.should_start = True\r\n#c.Spawner.default_url = '/lab'\r\nc.JupyterHub.spawner_class = 'dockerspawner.SwarmSpawner'\r\nc.SwarmSpawner.network_name = \"jupyter_jupyterhub-net\"\r\nc.SwarmSpawner.extra_host_config = { 'network_mode': \"jupyter_jupyterhub-net\" }\r\n#c.SwarmSpawner.extra_create_kwargs.update({ 'volume_driver': 'local' })\r\nc.SwarmSpawner.remove_containers = True\r\nc.SwarmSpawner.debug = True\r\nc.JupyterHub.hub_ip = '0.0.0.0'\r\nc.JupyterHub.hub_port = 8081\r\nc.SwarmSpawner.host_ip = \"0.0.0.0\"\r\nc.SwarmSpawner.extra_placement_spec = {\r\n'constraints': ['node.hostname == cruncher_01'],\r\n}\r\n\r\nc.JupyterHub.port = 8000\r\n#c.JupyterHub.ssl_key = os.environ['SSL_KEY']\r\n#c.JupyterHub.ssl_cert = os.environ['SSL_CERT']\r\n\r\nc.SwarmSpawner.http_timeout = 300\r\nc.SwarmSpawner.start_timeout = 300\r\n\r\n\r\n\r\n\r\n\r\n**config docker swarm service:**\r\n\r\nversion: '3.7'\r\n\r\nnetworks:\r\n  jupyterhub-net:\r\n    driver: overlay\r\n\r\nconfigs:\r\n  jupyterhub_config:\r\n    file: ./config/jupyterhub_config.py\r\n\r\nservices:\r\n  hub:\r\n    image: registry.ifora.hse.ru/jupyterhub:1.2\r\n    volumes:\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n    environment:\r\n      JPY_DB_USER: jupyter\r\n      POSTGRES_PORT_5432_TCP_ADDR: 172.18.207.27\r\n      POSTGRES_PORT_5432_TCP_PORT: 5432\r\n      JPY_DB_NAME: jupyter\r\n    configs:\r\n      - source:  jupyterhub_config\r\n        target: /srv/jupyterhub/jupyterhub_config.py\r\n    deploy:\r\n      replicas: 1\r\n      restart_policy:\r\n        condition: any\r\n      placement:\r\n        constraints: [node.hostname == swarm_manager]\r\n    networks:\r\n      - jupyterhub-net\r\n    ports:\r\n      - 8000:8000\r\n    logging:\r\n      driver: gelf\r\n      options:\r\n        gelf-address: \"udp://172.18.207.46:12201\"\r\n        tag: \"jupyter_hub\"\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\nCorrect work with nginx reverse proxy\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\nJupyterhub stops working\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\n <!-- [e.g. linux, OSX] -->\r\n - Version: jupyterhub:1.2\r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration:\r\n <!-- Be careful not to share any sensitive information. --->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3148", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3148/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3148/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3148/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3148", "id": 680294361, "node_id": "MDU6SXNzdWU2ODAyOTQzNjE=", "number": 3148, "title": "Vulnerability report - directed to security@ipython.org", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-17T14:48:51Z", "updated_at": "2020-08-20T10:37:41Z", "closed_at": "2020-08-19T14:53:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Original post deleted\r\nThank you @dchirikov for reporting this vulnerability! Since it is a vulnerability report, I've deleted this public report of it. Do you want to submit it yourself like [described here](https://jupyterhub.readthedocs.io/en/stable/reference/websecurity.html#vulnerability-reporting) or would you like me to do it? I have saved a copy of your text etc. / @consideRatio", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3145", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3145/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3145/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3145/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3145", "id": 679760283, "node_id": "MDU6SXNzdWU2Nzk3NjAyODM=", "number": 3145, "title": "Error while starting Jupyterhub v1.1.0 in conda environment jupyter_telemetry ModuleNotFoundError: No module named 'ruamel'", "user": {"login": "sangramga", "id": 9406431, "node_id": "MDQ6VXNlcjk0MDY0MzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9406431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sangramga", "html_url": "https://github.com/sangramga", "followers_url": "https://api.github.com/users/sangramga/followers", "following_url": "https://api.github.com/users/sangramga/following{/other_user}", "gists_url": "https://api.github.com/users/sangramga/gists{/gist_id}", "starred_url": "https://api.github.com/users/sangramga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sangramga/subscriptions", "organizations_url": "https://api.github.com/users/sangramga/orgs", "repos_url": "https://api.github.com/users/sangramga/repos", "events_url": "https://api.github.com/users/sangramga/events{/privacy}", "received_events_url": "https://api.github.com/users/sangramga/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-16T14:04:07Z", "updated_at": "2020-08-20T14:56:15Z", "closed_at": "2020-08-20T14:56:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\nWhen using conda environment to and installing jupyterhub (v1.1.0), by following instructions `pip install jupyterhub==1.1.0`. Following Error is created.\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/testpy38/bin/jupyterhub\", line 5, in <module>\r\n    from jupyterhub.app import main\r\n  File \"/opt/conda/envs/testpy38/lib/python3.8/site-packages/jupyterhub/app.py\", line 64, in <module>\r\n    from jupyter_telemetry.eventlog import EventLog\r\n  File \"/opt/conda/envs/testpy38/lib/python3.8/site-packages/jupyter_telemetry/__init__.py\", line 6, in <module>\r\n    from .eventlog import EventLog  # noqa\r\n  File \"/opt/conda/envs/testpy38/lib/python3.8/site-packages/jupyter_telemetry/eventlog.py\", line 10, in <module>\r\n    from ruamel.yaml import YAML\r\nModuleNotFoundError: No module named 'ruamel'\r\n```\r\n\r\nIssue with `jupyter_telemetry` library, unable to import `ruamel.yaml` - (which is also a dependency of `conda` package) This leads to `ModuleNotFoundError` in jupyter_telemetry.\r\n\r\n#### Expected behaviour\r\njupyterhub running successfully at 127.0.0.1:8000/\r\n\r\n<!-- Tell us what you thought would happen. -->\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n1. Create a `testpy38` conda environment \r\n`conda create -n testpy38 -c conda-forge python=3.8.5 conda=4.8.4`\r\n2. Install jupyterhub v1.1.0 \r\n`pip install jupyterhub==1.1.0`\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS: Linux\r\n <!-- [e.g. linux, OSX] -->\r\n - Version: 1.1.0\r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration: Conda and pip package  version information\r\n <!-- Be careful not to share any sensitive information. --->\r\n`conda list`\r\n\r\n_libgcc_mutex=0.1=conda_forge\r\n_openmp_mutex=4.5=1_gnu\r\nalembic=1.4.2=pypi_0\r\nasync-generator=1.10=pypi_0\r\nattrs=19.3.0=pypi_0\r\nbrotlipy=0.7.0=py38h1e0a361_1000\r\nca-certificates=2020.6.20=hecda079_0\r\ncertifi=2020.6.20=py38h32f6830_0\r\ncertipy=0.1.3=pypi_0\r\ncffi=1.14.1=py38h5bae8af_0\r\nchardet=3.0.4=py38h32f6830_1006\r\nconda=4.8.4=py38h32f6830_2\r\nconda-package-handling=1.7.0=py38h1e0a361_4\r\ncryptography=3.0=py38h766eaa4_0\r\ndecorator=4.4.2=pypi_0\r\nentrypoints=0.3=pypi_0\r\nidna=2.10=pyh9f0ad1d_0\r\nipython-genutils=0.2.0=pypi_0\r\njinja2=2.11.2=pypi_0\r\njsonschema=3.2.0=pypi_0\r\njupyter-telemetry=0.1.0=pypi_0\r\njupyterhub=1.1.0=pypi_0\r\nld_impl_linux-64=2.34=hc38a660_9\r\nlibffi=3.2.1=he1b5a44_1007\r\nlibgcc-ng=9.3.0=h24d8f2e_15\r\nlibgomp=9.3.0=h24d8f2e_15\r\nlibstdcxx-ng=9.3.0=hdf63c60_15\r\nmako=1.1.3=pypi_0\r\nmarkupsafe=1.1.1=pypi_0\r\nncurses=6.2=he1b5a44_1\r\noauthlib=3.1.0=pypi_0\r\nopenssl=1.1.1g=h516909a_1\r\npamela=1.0.0=pypi_0\r\npip=20.2.2=py_0\r\nprometheus-client=0.8.0=pypi_0\r\npycosat=0.6.3=py38h1e0a361_1004\r\npycparser=2.20=pyh9f0ad1d_2\r\npyopenssl=19.1.0=py_1\r\npyrsistent=0.16.0=pypi_0\r\npysocks=1.7.1=py38h32f6830_1\r\npython=3.8.5=h4d41432_2_cpython\r\npython-dateutil=2.8.1=pypi_0\r\npython-editor=1.0.4=pypi_0\r\npython-json-logger=0.1.11=pypi_0\r\npython_abi=3.8=1_cp38\r\nreadline=8.0=he28a2e2_2\r\nrequests=2.24.0=pyh9f0ad1d_0\r\nruamel_yaml=0.15.80=py38h1e0a361_1001\r\nsetuptools=49.6.0=py38h32f6830_0\r\nsix=1.15.0=pyh9f0ad1d_0\r\nsqlalchemy=1.3.18=pypi_0\r\nsqlite=3.32.3=h4cf870e_1\r\ntk=8.6.10=hed695b0_0\r\ntornado=6.0.4=pypi_0\r\ntqdm=4.48.2=pyh9f0ad1d_0\r\ntraitlets=4.3.3=pypi_0\r\nurllib3=1.25.10=py_0\r\nwheel=0.35.1=pyh9f0ad1d_0\r\nxz=5.2.5=h516909a_1\r\nyaml=0.2.5=h516909a_0\r\nzlib=1.2.11=h516909a_1007", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3139", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3139/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3139/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3139/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3139", "id": 675735135, "node_id": "MDU6SXNzdWU2NzU3MzUxMzU=", "number": 3139, "title": "Redirect loop detected after spawning notebook", "user": {"login": "L0ric0", "id": 22472023, "node_id": "MDQ6VXNlcjIyNDcyMDIz", "avatar_url": "https://avatars3.githubusercontent.com/u/22472023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/L0ric0", "html_url": "https://github.com/L0ric0", "followers_url": "https://api.github.com/users/L0ric0/followers", "following_url": "https://api.github.com/users/L0ric0/following{/other_user}", "gists_url": "https://api.github.com/users/L0ric0/gists{/gist_id}", "starred_url": "https://api.github.com/users/L0ric0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/L0ric0/subscriptions", "organizations_url": "https://api.github.com/users/L0ric0/orgs", "repos_url": "https://api.github.com/users/L0ric0/repos", "events_url": "https://api.github.com/users/L0ric0/events{/privacy}", "received_events_url": "https://api.github.com/users/L0ric0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-09T17:04:51Z", "updated_at": "2020-08-19T13:43:53Z", "closed_at": "2020-08-19T13:43:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\nAfter login to the jupyterhub instance and the server spawning the notebook a redirection loop is entered. This redirection loop goes from `/jupyter/hub/user/<username>/` to `/jupyter/user/<username>/` without any indication in the jupyterhub or spawner logs for what caused this.\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\n\r\n#### Expected behaviour\r\nNo redirection loop and access to the spawned notebook or in case of a misconfiguration a hint to what went wrong.\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\nA `500 : Internal Server Error Redirect loop detected.` is given to the user and the server logs show 4 redirects\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\njupyterhub config:\r\n1. Login \r\n1. start server\r\n1. see `500 : Internal Server Error Redirect loop detected.`\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n * OS: Linux <redacted> 4.19.0-10-amd64 #1 SMP Debian 4.19.132-1 (2020-07-24) x86_64 GNU/Linux\r\n * Version:\r\n    * jupyterhub                                   1.1.0\r\n    * jupyterhub-systemdspawner        0.14\r\n    * jhub-remote-user-authenticator   0.1.0\r\n * Configuration:\r\n```\r\nc.JupyterHub.authenticator_class = (\"jhub_remote_user_authenticator.remote_user_auth.RemoteUserAuthenticator\")\r\nc.JupyterHub.bind_url = \"http://127.0.0.1:8000/jupyter\"\r\nc.JupyterHub.cookie_secret = bytes.fromhex(<redacted>)\r\nc.JupyterHub.spawner_class = \"systemdspawner.SystemdSpawner\"\r\nc.SystemdSpawner.dynamic_users = True\r\nc.SystemdSpawner.isolate_devices = True\r\nc.SystemdSpawner.isolate_tmp = True\r\nc.SystemdSpawner.debug = True\r\nc.SystemdSpawner.cpu_limit = 2\r\nc.SystemdSpawner.mem_limit = '2G'\r\n```\r\nNginx conf:\r\n```\r\nmap $http_upgrade $connection_upgrade {\r\n    default upgrade;\r\n    '' close;              \r\n}\r\nserver {\r\n    listen [::]:443 ssl ipv6only=on;\r\n    listen 443 ssl;\r\n    ssl_certificate /etc/letsencrypt/live/<hostname>/fullchain.pem;\r\n    ssl_certificate_key /etc/letsencrypt/live/<hostname>/privkey.pem;\r\n    include /etc/letsencrypt/options-ssl-nginx.conf;\r\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;\r\n\r\n    server_name <hostname>;\r\n\r\n    location /jupyter {\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n        proxy_set_header Host $host;\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n        proxy_set_header REMOTE_USER $remote_user;\r\n        proxy_set_header X-Forwarded-Proto $scheme;\r\n        proxy_set_header X-Forwarded-Port $remote_port;\r\n\r\n        proxy_set_header Upgrade $http_upgrade;\r\n        proxy_set_header Connection $connection_upgrade;\r\n\r\n        auth_gss on;\r\n        auth_gss_keytab /etc/jupyterhub/HTTP.keytab;\r\n\r\n        proxy_pass http://localhost:8000/jupyter/;\r\n    }\r\n}\r\n```\r\n * Logs:\r\n```\r\n[D 2020-08-09 18:43:09.711 JupyterHub application:556] Looking for /etc/jupyterhub/jupyterhub_config in /root                                                                                                                                                                                                                 \r\n[D 2020-08-09 18:43:09.712 JupyterHub application:578] Loaded config file: /etc/jupyterhub/jupyterhub_config.py    \r\n[I 2020-08-09 18:43:09.727 JupyterHub app:2240] Running JupyterHub version 1.1.0                                                                                                                                                                                                                                              \r\n[I 2020-08-09 18:43:09.728 JupyterHub app:2271] Using Authenticator: jhub_remote_user_authenticator.remote_user_auth.RemoteUserAuthenticator                                                                                                                                                                                  \r\n[I 2020-08-09 18:43:09.728 JupyterHub app:2271] Using Spawner: systemdspawner.systemdspawner.SystemdSpawner        \r\n[I 2020-08-09 18:43:09.728 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0                                                                                                                                                                                                                     \r\n[D 2020-08-09 18:43:09.734 JupyterHub app:1516] Connecting to db: sqlite:///jupyterhub.sqlite                                                                                                                                                                                                                                 \r\n[D 2020-08-09 18:43:09.744 JupyterHub orm:749] database schema version found: 4dc2d5a8c53c                         \r\n[I 2020-08-09 18:43:09.747 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN                                                                                                                                                                                                                                        \r\n[W 2020-08-09 18:43:09.747 JupyterHub app:1624] No admin users, admin interface will be unavailable.                                                                                                                                                                                                                          \r\n[W 2020-08-09 18:43:09.747 JupyterHub app:1626] Add any administrative users to `c.Authenticator.admin_users` in config.                           \r\n[I 2020-08-09 18:43:09.748 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10                                              \r\n[D 2020-08-09 18:43:09.772 JupyterHub app:1914] Initializing spawners\r\n[D 2020-08-09 18:43:09.774 JupyterHub app:2011] Loading state for <username> from db\r\n[D 2020-08-09 18:43:09.775 JupyterHub app:2038] Loaded users:\r\n    <username>                                                                                                       \r\n[I 2020-08-09 18:43:09.775 JupyterHub app:2311] Initialized 0 spawners in 0.003 seconds\r\n[W 2020-08-09 18:43:09.777 JupyterHub proxy:643] Running JupyterHub without SSL.  I hope there is SSL termination happening somewhere else...\r\n[I 2020-08-09 18:43:09.777 JupyterHub proxy:646] Starting proxy @ http://127.0.0.1:8000/jupyter\r\n[D 2020-08-09 18:43:09.777 JupyterHub proxy:647] Proxy cmd: ['configurable-http-proxy', '--ip', '127.0.0.1', '--port', '8000', '--api-ip', '127.0.0.1', '--api-port', '8001', '--error-target', 'http://127.0.0.1:8081/jupyter/hub/error']\r\n[D 2020-08-09 18:43:09.781 JupyterHub proxy:562] Writing proxy pid file: jupyterhub-proxy.pid\r\n18:43:10.318 [ConfigProxy] info: Proxying http://127.0.0.1:8000 to (no default)              \r\n18:43:10.321 [ConfigProxy] info: Proxy API at http://127.0.0.1:8001/api/routes             \r\n[D 2020-08-09 18:43:10.741 JupyterHub proxy:682] Proxy started and appears to be up\r\n[D 2020-08-09 18:43:10.743 JupyterHub proxy:766] Proxy: Fetching GET http://127.0.0.1:8001/api/routes\r\n18:43:10.754 [ConfigProxy] info: 200 GET /api/routes\r\n[I 2020-08-09 18:43:10.755 JupyterHub app:2556] Hub API listening on http://127.0.0.1:8081/jupyter/hub/\r\n[D 2020-08-09 18:43:10.755 JupyterHub proxy:315] Fetching routes to check\r\n[D 2020-08-09 18:43:10.755 JupyterHub proxy:766] Proxy: Fetching GET http://127.0.0.1:8001/api/routes\r\n18:43:10.756 [ConfigProxy] info: 200 GET /api/routes\r\n[I 2020-08-09 18:43:10.757 JupyterHub proxy:320] Checking routes\r\n[I 2020-08-09 18:43:10.757 JupyterHub proxy:400] Adding default route for Hub: /jupyter/ => http://127.0.0.1:8081                          \r\n[D 2020-08-09 18:43:10.757 JupyterHub proxy:766] Proxy: Fetching POST http://127.0.0.1:8001/api/routes/jupyter                                                                                                                                                                                                                \r\n18:43:10.759 [ConfigProxy] info: Adding route /jupyter -> http://127.0.0.1:8081                                                                                                                                                                                                                                               \r\n18:43:10.760 [ConfigProxy] info: Route added /jupyter -> http://127.0.0.1:8081                                                                                                                                                                                                                                                \r\n18:43:10.760 [ConfigProxy] info: 201 POST /api/routes/jupyter                                             \r\n[I 2020-08-09 18:43:10.761 JupyterHub app:2631] JupyterHub is now running at http://127.0.0.1:8000/jupyter\r\n[D 2020-08-09 18:43:10.761 JupyterHub app:2233] It took 1.052 seconds for the Hub to start                                                \r\n[D 2020-08-09 18:43:14.706 JupyterHub base:330] Refreshing auth for <username>                                                                                                  \r\n[D 2020-08-09 18:43:14.707 JupyterHub user:242] Creating <class 'systemdspawner.systemdspawner.SystemdSpawner'> for <username>:                                                               \r\n[D 2020-08-09 18:43:14.711 JupyterHub systemdspawner:155] user:<username> Initialized spawner with unit jupyter-<username>-singleuser                                                 \r\n[E 2020-08-09 18:43:14.730 JupyterHub log:174] 503 GET /jupyter/hub/user/<username/ (<username>@<ip>) 31.28ms\r\n[D 2020-08-09 18:43:14.934 JupyterHub log:174] 304 GET /jupyter/hub/static/components/requirejs/require.js?v=f0cc8bbb2fcef87fc194fecbb632fcfa (@<ip>) 1.74ms                                                                                                                                               \r\n[D 2020-08-09 18:43:15.006 JupyterHub log:174] 304 GET /jupyter/hub/static/components/bootstrap/dist/js/bootstrap.min.js?v=2f34b630ffe30ba2ff2b91e3f3c322a1 (@<ip>) 1.69ms                                                                                                                                 \r\n[D 2020-08-09 18:43:15.007 JupyterHub log:174] 304 GET /jupyter/hub/static/components/jquery/dist/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae (@<ip>) 2.23ms                                                                                                                                          \r\n[D 2020-08-09 18:43:15.118 JupyterHub log:174] 200 GET /jupyter/hub/logo (@<ip>) 1.96ms\r\n[D 2020-08-09 18:43:15.119 JupyterHub log:174] 200 GET /jupyter/hub/static/components/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0 (@<ip>) 2.84ms                                                                                                                                                  \r\n[D 2020-08-09 18:43:17.827 JupyterHub pages:195] Triggering spawn with default options for <username>                                                  \r\n[D 2020-08-09 18:43:17.828 JupyterHub base:825] Initiating spawn for <username>                                                 \r\n[D 2020-08-09 18:43:17.828 JupyterHub base:832] 0/100 concurrent spawns                              \r\n[D 2020-08-09 18:43:17.828 JupyterHub base:837] 0 active servers\r\n[D 2020-08-09 18:43:17.847 JupyterHub user:556] Calling Spawner.start for <username>\r\n[D 2020-08-09 18:43:17.847 JupyterHub systemdspawner:201] user:<username> Using port 37981 to start spawning user server\r\nRunning as unit: jupyter-<username>-singleuser.service                                                                                                              \r\n[D 2020-08-09 18:43:17.901 JupyterHub spawner:1113] Polling subprocess every 30s                                                                      \r\n[I 2020-08-09 18:43:18.829 JupyterHub log:174] 302 GET /jupyter/hub/spawn/<username>?next=%2Fjupyter%2Fhub%2Fuser%2F<username>%2F -> /jupyter/hub/spawn-pending/<username>?next=%2Fjupyter%2Fhub%2Fuser%2F<username>%2F (<username>@<ip>) 1005.64ms                                                             \r\n[I 2020-08-09 18:43:18.917 JupyterHub log:174] 200 GET /jupyter/hub/api (@127.0.0.1) 0.95ms     \r\n[I 2020-08-09 18:43:18.922 JupyterHub pages:347] <username> is pending spawn\r\n[I 2020-08-09 18:43:18.926 JupyterHub log:174] 200 GET /jupyter/hub/spawn-pending/<username>?next=%2Fjupyter%2Fhub%2Fuser%2F<username%2F (<username>@<ip>) 7.13ms                                                                                                                                            \r\n[D 2020-08-09 18:43:18.928 JupyterHub base:285] Recording first activity for <APIToken('5e50...', user='<username>')>                                                                                                               \r\n[D 2020-08-09 18:43:18.932 JupyterHub users:711] Activity for user <username>: 2020-08-09T16:43:18.732317Z                                                                                                                          \r\n[D 2020-08-09 18:43:18.932 JupyterHub users:732] Activity on server <username>/: 2020-08-09T16:43:18.732317Z                                                                                   \r\n[I 2020-08-09 18:43:18.934 JupyterHub log:174] 200 POST /jupyter/hub/api/users/<username>/activity (<username>@127.0.0.1) 7.40ms                                                                                   \r\n[D 2020-08-09 18:43:19.064 JupyterHub utils:218] Server at http://127.0.0.1:37981/jupyter/user/<username>/ responded with 302\r\n[D 2020-08-09 18:43:19.064 JupyterHub _version:60] jupyterhub and jupyterhub-singleuser both on version 1.1.0\r\n[I 2020-08-09 18:43:19.065 JupyterHub base:855] User <username> took 1.237 seconds to start\r\n[I 2020-08-09 18:43:19.065 JupyterHub proxy:262] Adding user <username> to proxy /jupyter/user/<username>/ => http://127.0.0.1:37981\r\n[D 2020-08-09 18:43:19.065 JupyterHub proxy:766] Proxy: Fetching POST http://127.0.0.1:8001/api/routes/jupyter/user/<username>\r\n18:43:19.067 [ConfigProxy] info: Adding route /jupyter/user/<username> -> http://127.0.0.1:37981\r\n18:43:19.068 [ConfigProxy] info: Route added /jupyter/user/<username> -> http://127.0.0.1:37981 \r\n18:43:19.069 [ConfigProxy] info: 201 POST /api/routes/jupyter/user/<username>\r\n[I 2020-08-09 18:43:19.215 JupyterHub users:571] Server <username> is already started\r\n[I 2020-08-09 18:43:19.216 JupyterHub log:174] 200 GET /jupyter/hub/api/users/<username>/server/progress (<username>@<ip>) 8.59ms                                                                                                                                                                             \r\n[I 2020-08-09 18:43:19.289 JupyterHub log:174] 302 GET /jupyter/hub/spawn-pending/<username>?next=%2Fjupyter%2Fhub%2Fuser%2F<username>%2F -> /jupyter/hub/user/<username>/ (<username>@<ip>) 3.09ms                                                                                                            \r\n[I 2020-08-09 18:43:19.352 JupyterHub log:174] 302 GET /jupyter/hub/user/<username>/ -> /jupyter/user/<username>/?redirects=1 (<username>@<ip>) 3.93ms                                                                                                                                                        \r\n[I 2020-08-09 18:43:19.419 JupyterHub log:174] 302 GET /jupyter/user/<username>/?redirects=1 -> /jupyter/hub/user/<username>/?redirects=1 (@<ip>) 1.19ms                                                                                                                                                     \r\n[W 2020-08-09 18:43:19.506 JupyterHub base:1487] Redirect loop detected on /jupyter/hub/user/<username>/?redirects=1\r\n[I 2020-08-09 18:43:21.509 JupyterHub log:174] 302 GET /jupyter/hub/user/<username>/?redirects=1 -> /jupyter/user/<username>/?redirects=2 (<username>@<ip>) 2006.63ms                                                                                                                                         \r\n[I 2020-08-09 18:43:21.693 JupyterHub log:174] 302 GET /jupyter/user/<username>/?redirects=2 -> /jupyter/hub/user/<username>/?redirects=2 (@<ip>) 1.36ms                                                                                                                                                     \r\n[W 2020-08-09 18:43:21.767 JupyterHub base:1487] Redirect loop detected on /jupyter/hub/user/<username>/?redirects=2\r\n[I 2020-08-09 18:43:25.770 JupyterHub log:174] 302 GET /jupyter/hub/user/<username>/?redirects=2 -> /jupyter/user/<username>/?redirects=3 (<username>@<ip>) 4004.47ms                                                                                                                                         \r\n[I 2020-08-09 18:43:25.889 JupyterHub log:174] 302 GET /jupyter/user/<username>/?redirects=3 -> /jupyter/hub/user/<username>/?redirects=3 (@<ip>) 1.28ms                                                                                                                                                     \r\n[W 2020-08-09 18:43:25.956 JupyterHub base:1487] Redirect loop detected on /jupyter/hub/user/<username>/?redirects=3\r\n[I 2020-08-09 18:43:33.958 JupyterHub log:174] 302 GET /jupyter/hub/user/<username>/?redirects=3 -> /jupyter/user/<username>/?redirects=4 (<username>@<ip>) 8005.29ms                                                                                                                                         \r\n[I 2020-08-09 18:43:34.043 JupyterHub log:174] 302 GET /jupyter/user/<username>/?redirects=4 -> /jupyter/hub/user/<username>/?redirects=4 (@<ip>) 1.23ms                                                                                                                                                     \r\n[W 2020-08-09 18:43:34.126 JupyterHub web:1786] 500 GET /jupyter/hub/user/<username>/?redirects=4 (<ip>): Redirect loop detected.\r\n[D 2020-08-09 18:43:34.127 JupyterHub base:1197] No template for 500                                        \r\n[E 2020-08-09 18:43:34.137 JupyterHub log:166] {\r\n      \"X-Forwarded-Host\": \"<hostname>\",               \r\n      \"Cache-Control\": \"max-age=0\",                                                \r\n      \"Upgrade-Insecure-Requests\": \"1\",                      \r\n      \"Cookie\": \"jupyterhub-hub-login=[secret]; csrftoken=[secret]; jupyterhub-session-id=[secret]; _xsrf=[secret]\",\r\n      \"Authorization\": \"Basic bHN0ZWluZXJ0OmJvZ3VzX2F1dGhfZ3NzX3Bhc3N3ZA==\",           \r\n      \"Dnt\": \"1\",                                                                                                                            \r\n      \"Referer\": \"https://<hostname>/jupyter/hub/user/<username>/\",              \r\n      \"Accept-Encoding\": \"gzip, deflate, br\",                                                                                                                                                                                             \r\n      \"Accept-Language\": \"en-US,en;q=0.5\",                                                   \r\n      \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\r\n      \"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64; rv:79.0) Gecko/20100101 Firefox/79.0\",\r\n      \"Connection\": \"close\",                                                       \r\n      \"X-Forwarded-Port\": \"35634,80\",                                                                \r\n      \"X-Forwarded-Proto\": \"https,http\",            \r\n      \"Remote_user\": \"<username>\",                                                                      \r\n      \"X-Forwarded-For\": \"<ip>,127.0.0.1\",            \r\n      \"Host\": \"<hostname>\",                                                           \r\n      \"X-Real-Ip\": \"<ip>\"        \r\n    }                                                           \r\n[E 2020-08-09 18:43:34.137 JupyterHub log:174] 500 GET /jupyter/hub/user/<username>/?redirects=4 (<username>@<ip>) 14.04ms\r\n[D 2020-08-09 18:43:34.342 JupyterHub log:174] 304 GET /jupyter/hub/static/components/requirejs/require.js?v=f0cc8bbb2fcef87fc194fecbb632fcfa (@<ip>) 1.61ms                                                                                                                                               \r\n[D 2020-08-09 18:43:34.343 JupyterHub log:174] 304 GET /jupyter/hub/static/components/jquery/dist/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae (@<ip>) 2.13ms                                                                                                                                          \r\n[D 2020-08-09 18:43:34.386 JupyterHub log:174] 304 GET /jupyter/hub/static/components/bootstrap/dist/js/bootstrap.min.js?v=2f34b630ffe30ba2ff2b91e3f3c322a1 (@<ip>) 1.04ms                                                                                                                                 \r\n[D 2020-08-09 18:43:34.459 JupyterHub log:174] 200 GET /jupyter/hub/logo (@<ip>) 1.32ms\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3138", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3138/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3138/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3138/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3138", "id": 675633029, "node_id": "MDU6SXNzdWU2NzU2MzMwMjk=", "number": 3138, "title": "TypeError: argument of type 'NoneType' is not iterable", "user": {"login": "srichakradhar", "id": 1732922, "node_id": "MDQ6VXNlcjE3MzI5MjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1732922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srichakradhar", "html_url": "https://github.com/srichakradhar", "followers_url": "https://api.github.com/users/srichakradhar/followers", "following_url": "https://api.github.com/users/srichakradhar/following{/other_user}", "gists_url": "https://api.github.com/users/srichakradhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/srichakradhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srichakradhar/subscriptions", "organizations_url": "https://api.github.com/users/srichakradhar/orgs", "repos_url": "https://api.github.com/users/srichakradhar/repos", "events_url": "https://api.github.com/users/srichakradhar/events{/privacy}", "received_events_url": "https://api.github.com/users/srichakradhar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-09T04:16:57Z", "updated_at": "2020-08-19T14:04:58Z", "closed_at": "2020-08-19T14:04:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\nI'm not able to run JupyterHub on Windows after installing with pip. \r\n\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\njupyterhub should run the first time setup and allow connecting to server on http://localhost:8000\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\nwhen run using `python -m jupyterhub`, I get\r\n```sh\r\n[I 2020-08-09 00:05:13.702 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-08-09 00:05:13.702 JupyterHub app:2270] Using Authenticator: jupyterhub.auth.PAMAuthenticator-1.1.0\r\n[I 2020-08-09 00:05:13.703 JupyterHub app:2270] Using Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\n[I 2020-08-09 00:05:13.703 JupyterHub app:2270] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-08-09 00:05:13.710 JupyterHub app:1394] Writing cookie_secret to C:\\Users\\Sri\\jupyterhub_cookie_secret\r\n[I 2020-08-09 00:05:13.776 alembic.runtime.migration migration:155] Context impl SQLiteImpl.\r\n[I 2020-08-09 00:05:13.777 alembic.runtime.migration migration:158] Will assume non-transactional DDL.\r\n[I 2020-08-09 00:05:13.809 alembic.runtime.migration migration:515] Running stamp_revision  -> 4dc2d5a8c53c\r\n[I 2020-08-09 00:05:14.266 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\n[E 2020-08-09 00:05:14.268 JupyterHub app:2718]\r\n    Traceback (most recent call last):\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\jupyterhub\\app.py\", line 2715, in launch_instance_async\r\n        await self.initialize(argv)\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\jupyterhub\\app.py\", line 2286, in initialize\r\n        await self.init_users()\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\jupyterhub\\app.py\", line 1597, in init_users\r\n        if self.authenticator.enable_auth_state:\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\traitlets\\traitlets.py\", line 556, in __get__\r\n        return self.get(obj, cls)\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\traitlets\\traitlets.py\", line 535, in get\r\n        value = self._validate(obj, dynamic_default())\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\jupyterhub\\app.py\", line 918, in _authenticator_default\r\n        return self.authenticator_class(parent=self, db=self.db)\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\jupyterhub\\auth.py\", line 863, in __init__\r\n        raise _pamela_error from None\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\jupyterhub\\auth.py\", line 16, in <module>\r\n        import pamela\r\n      File \"C:\\Users\\Sri\\AppData\\Roaming\\Python\\Python38\\site-packages\\pamela.py\", line 49, in <module>\r\n        LIBPAM = CDLL(find_library(\"pam\"))\r\n      File \"C:\\Program Files\\Python38\\lib\\ctypes\\__init__.py\", line 363, in __init__\r\n        if '/' in name or '\\\\' in name:\r\n    TypeError: argument of type 'NoneType' is not iterable\r\n```\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n1. `pip install jupyterhub`\r\n2. `python -m jupyterhub`\r\n3. See error\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\n <!-- [e.g. linux, OSX] -->\r\nWindows 10\r\n - Version:\r\n <!-- e.g. jupyterhub --version. --->\r\nPython 3.8.2\r\n - Configuration:\r\n <!-- Be careful not to share any sensitive information. --->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3130", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3130/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3130/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3130/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3130", "id": 671858946, "node_id": "MDU6SXNzdWU2NzE4NTg5NDY=", "number": 3130, "title": "got unknow blob error when pulling jupyterhub/singleuser:latest, may I seek any help or advice? Thanks", "user": {"login": "haohonglee", "id": 11506227, "node_id": "MDQ6VXNlcjExNTA2MjI3", "avatar_url": "https://avatars2.githubusercontent.com/u/11506227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haohonglee", "html_url": "https://github.com/haohonglee", "followers_url": "https://api.github.com/users/haohonglee/followers", "following_url": "https://api.github.com/users/haohonglee/following{/other_user}", "gists_url": "https://api.github.com/users/haohonglee/gists{/gist_id}", "starred_url": "https://api.github.com/users/haohonglee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haohonglee/subscriptions", "organizations_url": "https://api.github.com/users/haohonglee/orgs", "repos_url": "https://api.github.com/users/haohonglee/repos", "events_url": "https://api.github.com/users/haohonglee/events{/privacy}", "received_events_url": "https://api.github.com/users/haohonglee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-03T07:19:57Z", "updated_at": "2020-08-19T14:09:56Z", "closed_at": "2020-08-19T14:09:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\n\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\n <!-- [e.g. linux, OSX] -->\r\n - Version:\r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration:\r\n <!-- Be careful not to share any sensitive information. --->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3126", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3126/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3126/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3126/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3126", "id": 664707254, "node_id": "MDU6SXNzdWU2NjQ3MDcyNTQ=", "number": 3126, "title": "slow_spawn_timeout warning when timeout is disabled (0)", "user": {"login": "mriedem", "id": 3237936, "node_id": "MDQ6VXNlcjMyMzc5MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3237936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mriedem", "html_url": "https://github.com/mriedem", "followers_url": "https://api.github.com/users/mriedem/followers", "following_url": "https://api.github.com/users/mriedem/following{/other_user}", "gists_url": "https://api.github.com/users/mriedem/gists{/gist_id}", "starred_url": "https://api.github.com/users/mriedem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mriedem/subscriptions", "organizations_url": "https://api.github.com/users/mriedem/orgs", "repos_url": "https://api.github.com/users/mriedem/repos", "events_url": "https://api.github.com/users/mriedem/events{/privacy}", "received_events_url": "https://api.github.com/users/mriedem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589225, "node_id": "MDU6TGFiZWwxMDY1ODkyMjU=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 748209730, "node_id": "MDU6TGFiZWw3NDgyMDk3MzA=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/good%20first%20issue", "name": "good first issue", "color": "5319e7", "default": true, "description": null}, {"id": 106589226, "node_id": "MDU6TGFiZWwxMDY1ODkyMjY=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/help%20wanted", "name": "help wanted", "color": "0e8a16", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-23T19:14:42Z", "updated_at": "2020-07-31T10:07:39Z", "closed_at": "2020-07-31T10:07:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n### Bug description\r\n\r\nWe're using zero-to-jupyterhub-k8s which sets `slow_spawn_timeout` to 0 [1] and that results in a warning in the hub logs, e.g.:\r\n\r\n>Jul 23 14:09:36 hub-55d978d7cb-75lwl hub WARNING WARNING 2020-07-23T19:09:36.897Z [JupyterHub base:950] User hub-stress-test-123 is slow to start (timeout=0) \r\n\r\nIf the `slow_spawn_timeout` is disabled we should not log a warning for that situation since we're not waiting at all.\r\n\r\nRelated to #1222 \r\n\r\n[1] https://github.com/jupyterhub/zero-to-jupyterhub-k8s/commit/b4738edc5dd5a3b7ecc117ca34c556afbf8981e6\r\n\r\n#### Expected behaviour\r\nWe shouldn't log a warning for an expected situation where we're not waiting.\r\n\r\n#### Actual behaviour\r\nDon't log a warning when `slow_spawn_timeout` is 0 and we don't wait for the server to start.\r\n\r\n### How to reproduce\r\nConfigure `slow_spawn_timeout: 0` in `c.JupyterHub.tornado_settings`, create a user and start their server then check the hub logs for the warning.\r\n\r\n### Your personal set up\r\n\r\n - OS: linux\r\n - Version: commit 8a3790b01ff944c453ffcc0486149e2a58ffabea\r\n - Configuration: zero-to-jupyterhub-k8s default configuration for `slow_spawn_timeout` (0 in this case)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3125", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3125/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3125/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3125/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3125", "id": 664324819, "node_id": "MDU6SXNzdWU2NjQzMjQ4MTk=", "number": 3125, "title": "Using Notebook REST API from JupyterHub REST API", "user": {"login": "Alhajras", "id": 36598060, "node_id": "MDQ6VXNlcjM2NTk4MDYw", "avatar_url": "https://avatars0.githubusercontent.com/u/36598060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alhajras", "html_url": "https://github.com/Alhajras", "followers_url": "https://api.github.com/users/Alhajras/followers", "following_url": "https://api.github.com/users/Alhajras/following{/other_user}", "gists_url": "https://api.github.com/users/Alhajras/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alhajras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alhajras/subscriptions", "organizations_url": "https://api.github.com/users/Alhajras/orgs", "repos_url": "https://api.github.com/users/Alhajras/repos", "events_url": "https://api.github.com/users/Alhajras/events{/privacy}", "received_events_url": "https://api.github.com/users/Alhajras/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-23T09:24:06Z", "updated_at": "2020-07-23T09:44:53Z", "closed_at": "2020-07-23T09:44:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML comments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\n\r\nAm not sure if this is a bug or this feature does not exist in JupyterHub.\r\nI have my website and I am among to connect it to JupyterHub, when the user clicks on a button called \"create notebook\", this will direct the user to his Jupyterhub home directory and creates his new notebook with name like \"new_notebook.ipynb\". \r\n\r\nAs far as I understood the JupyterHub API is running on 8081 by default also in my case it does run on 8081, I can do different commands POST, GET, this works fine, however, to create new Notebook I have to use the Notebook API, not the JupyterHub, and I don't know which is the right port for the Notebook! I understand that each user has his own port for the API and I find it a difficult or bad idea to try to fetch t users API port to create his own notebook if I just can have on a global port to use to create different notebooks for different users as an admin.\r\n\r\nAlso, I understood from the documentation that if I am using the Jupyterhub API port to access the Notebook API this will be done automatically from the JupyterHub, it will redirect me to the Notebook API correct? \r\n\r\nSo for testing, I am just running this code: \r\n\r\n`import requests`\r\n`r = requests.get('http://localhost:8081/user/jupyterhub/api' + '/sessions',`\r\n  `  headers={`\r\n  `           'Authorization': 'token %s' % token,`\r\n `           }`\r\n  `  )`\r\n\r\n`r.raise_for_status()`\r\n`users = r.json()`\r\n\r\nAm getting this output: \r\n\r\n`HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:8081/hub/user/jupyterhub/api/sessions?redirects=4\r\n`\r\n#### Expected behavior\r\n<!-- Tell us what you thought would happen. -->\r\nThis should redirect me to the Notebook API and fetch the sessions and return a result.\r\n \r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\n`HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:8081/hub/user/jupyterhub/api/sessions?redirects=4\r\n`\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n`import requests`\r\n`r = requests.get('http://localhost:8081/user/jupyterhub/api' + '/sessions',`\r\n  `  headers={`\r\n  `           'Authorization': 'token %s' % token,`\r\n `           }`\r\n  `  )`\r\n\r\n`r.raise_for_status()`\r\n`users = r.json()`\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS: Debian GNU/Linux 10 (buster)\r\n <!-- [e.g. linux, OSX] -->\r\n - Version: 10 \r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration:\r\n`c.Authenticator.admin_users = {'jupyterhub'}`\r\n`c.JupyterHub.api_tokens = {\r\n    'token': 'jupyterhub',\r\n}\r\n`\r\n <!-- Be careful not to share any sensitive information. --->\r\n\r\n\r\nSo, this idea as I said I just want to create a new notebook for the logged-in user inside my system inside Jupyterhub by using the JupyterHub, and I don't know-how. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3122", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3122/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3122/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3122/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3122", "id": 664005936, "node_id": "MDU6SXNzdWU2NjQwMDU5MzY=", "number": 3122, "title": "[500 : Internal Server Error] Permission failure checking authorization, I may need a new token", "user": {"login": "TuSKan", "id": 10839799, "node_id": "MDQ6VXNlcjEwODM5Nzk5", "avatar_url": "https://avatars2.githubusercontent.com/u/10839799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TuSKan", "html_url": "https://github.com/TuSKan", "followers_url": "https://api.github.com/users/TuSKan/followers", "following_url": "https://api.github.com/users/TuSKan/following{/other_user}", "gists_url": "https://api.github.com/users/TuSKan/gists{/gist_id}", "starred_url": "https://api.github.com/users/TuSKan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TuSKan/subscriptions", "organizations_url": "https://api.github.com/users/TuSKan/orgs", "repos_url": "https://api.github.com/users/TuSKan/repos", "events_url": "https://api.github.com/users/TuSKan/events{/privacy}", "received_events_url": "https://api.github.com/users/TuSKan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-22T19:44:29Z", "updated_at": "2020-07-23T09:47:12Z", "closed_at": "2020-07-23T09:47:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n[500 : Internal Server Error] Permission failure checking authorization, I may need a new token\r\n\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\n\r\n### How to reproduce\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\nCentos8\r\n - Version:\r\n jupyter 1.1.0\r\n - Configuration:\r\n DockerSpawner.SystemSpawner\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3115", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3115/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3115/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3115/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3115", "id": 656789655, "node_id": "MDU6SXNzdWU2NTY3ODk2NTU=", "number": 3115, "title": "Jupyterhub is giving site can\u2019t be reached and connection refused error when it is on idle/inactive state for few hours", "user": {"login": "Shashideep83", "id": 39345969, "node_id": "MDQ6VXNlcjM5MzQ1OTY5", "avatar_url": "https://avatars1.githubusercontent.com/u/39345969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shashideep83", "html_url": "https://github.com/Shashideep83", "followers_url": "https://api.github.com/users/Shashideep83/followers", "following_url": "https://api.github.com/users/Shashideep83/following{/other_user}", "gists_url": "https://api.github.com/users/Shashideep83/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shashideep83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shashideep83/subscriptions", "organizations_url": "https://api.github.com/users/Shashideep83/orgs", "repos_url": "https://api.github.com/users/Shashideep83/repos", "events_url": "https://api.github.com/users/Shashideep83/events{/privacy}", "received_events_url": "https://api.github.com/users/Shashideep83/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-07-14T17:49:47Z", "updated_at": "2020-07-19T17:46:17Z", "closed_at": "2020-07-16T16:13:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug description\r\nJupyterhub is giving site can\u2019t be reached and connection refused error when it is on idle/inactive state.\r\n\r\nChecked for these variables if they are enabled by default. But they are commented/not there\r\n\r\n```\r\ncull_idle_timeout\r\nshutdown_no_activity_timeout\r\n```\r\n\r\n#### Expected behaviour\r\n\r\nJupyterhub should be running without being timed-out. \r\n\r\n#### Actual behaviour\r\n\r\nWhen left out at idle or inactive for a few hours it is throwing connection refused error.\r\n\r\n### How to reproduce\r\n\r\ninstalled jupyterhub using this docs: https://jupyterhub.readthedocs.io/en/stable/quickstart.html#installation\r\n\r\nLeaving out jupyterhub in idle/inactive state on AWS Ec2 instance for a few hours after launching with command `jupyterhub &`\r\n\r\n### Your personal set up\r\n\r\nServer Setup : \r\n\r\n - OS:\r\n ubuntu 18 (aws ec2)\r\n - Version:\r\n 1.1.0\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3106", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3106/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3106/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3106/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3106", "id": 650608135, "node_id": "MDU6SXNzdWU2NTA2MDgxMzU=", "number": 3106, "title": "PAM Auth using SSSD not creating home directories upon login for new users", "user": {"login": "whositwhatnow", "id": 22056604, "node_id": "MDQ6VXNlcjIyMDU2NjA0", "avatar_url": "https://avatars0.githubusercontent.com/u/22056604?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whositwhatnow", "html_url": "https://github.com/whositwhatnow", "followers_url": "https://api.github.com/users/whositwhatnow/followers", "following_url": "https://api.github.com/users/whositwhatnow/following{/other_user}", "gists_url": "https://api.github.com/users/whositwhatnow/gists{/gist_id}", "starred_url": "https://api.github.com/users/whositwhatnow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whositwhatnow/subscriptions", "organizations_url": "https://api.github.com/users/whositwhatnow/orgs", "repos_url": "https://api.github.com/users/whositwhatnow/repos", "events_url": "https://api.github.com/users/whositwhatnow/events{/privacy}", "received_events_url": "https://api.github.com/users/whositwhatnow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-03T13:46:17Z", "updated_at": "2020-07-15T13:47:40Z", "closed_at": "2020-07-15T13:47:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug description\r\nNew users home directories are not being created on user login\r\n\r\n#### Expected behaviour\r\nNew users login and home directories get automatically created once the spawning occurs\r\n\r\n#### Actual behaviour\r\nUsers authentication works but home directories are not created.  Get error below.  If the home directory is created prior to login then it works.\r\n\r\nJul  3 09:37:22 jupyterhub jupyterhub: [I 2020-07-03 09:37:22.647 JupyterHub base:707] User logged in: newuser\r\nJul  3 09:37:22 jupyterhub jupyterhub: [I 2020-07-03 09:37:22.652 JupyterHub log:174] 302 POST /hub/login?next= -> /hub/spawn (newuser@1.1.1.1) 363.10ms\r\nJul  3 09:37:22 jupyterhub jupyterhub: [I 2020-07-03 09:37:22.734 JupyterHub systemdspawner:217] user:newuser Unit jupyter-newuser-singleuser in a failed state. Resetting state.\r\nJul  3 09:37:22 jupyterhub jupyterhub: Running as unit jupyter-newuser-singleuser.service.\r\nJul  3 09:37:22 jupyterhub systemd: Started /bin/bash -c cd /home/newuser && exec jupyterhub-singleuser --port=42734.\r\nJul  3 09:37:22 jupyterhub bash: /bin/bash: line 0: cd: /home/newuser: No such file or directory\r\nJul  3 09:37:22 jupyterhub systemd: jupyter-newuser-singleuser.service: main process exited, code=exited, status=1/FAILURE\r\nJul  3 09:37:22 jupyterhub systemd: Unit jupyter-newuser-singleuser.service entered failed state.\r\nJul  3 09:37:22 jupyterhub systemd: jupyter-newuser-singleuser.service failed.\r\n\r\n- OS: CentOS Linux release 7.8.2003 (Core)\r\n- Jupyterhub Version: 1.1.0\r\n- SystemdSpawner\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3105", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3105/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3105/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3105/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3105", "id": 649308066, "node_id": "MDU6SXNzdWU2NDkzMDgwNjY=", "number": 3105, "title": "TLJH: reload command loops forever, caused by a Python 'hook' script in .../jupyterhub_config.d/", "user": {"login": "nmvega", "id": 4001382, "node_id": "MDQ6VXNlcjQwMDEzODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmvega", "html_url": "https://github.com/nmvega", "followers_url": "https://api.github.com/users/nmvega/followers", "following_url": "https://api.github.com/users/nmvega/following{/other_user}", "gists_url": "https://api.github.com/users/nmvega/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmvega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmvega/subscriptions", "organizations_url": "https://api.github.com/users/nmvega/orgs", "repos_url": "https://api.github.com/users/nmvega/repos", "events_url": "https://api.github.com/users/nmvega/events{/privacy}", "received_events_url": "https://api.github.com/users/nmvega/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-01T20:44:44Z", "updated_at": "2020-07-01T21:05:59Z", "closed_at": "2020-07-01T21:05:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Friends:\r\n\r\nThis `tljh-config reload` command loops forever, caused by the `Python` script `02-preSpawn-hook.py` pasted further below (which is a `hook` script).\r\n\r\n```\r\nroot@rndbox# /opt/tljh/hub/bin/tljh-config reload\r\n  active\r\n  /opt/tljh/hub/lib/python3.6/site-packages/urllib3/connectionpool.py:986:\r\n  InsecureRequestWarning: Unverified HTTPS request is being made to host '127.0.0.1'.\r\n  Adding certificate verification is strongly advised.\r\n  See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings\r\n  InsecureRequestWarning,\r\n[ ... the above repeats forever ... ]\r\n```\r\n\r\nHere is the setup:\r\n\r\n```\r\nroot@rndbox# pwd\r\n/opt/tljh/config\r\n\r\nroot@rndbox# ls -la\r\ntotal 24\r\ndrwx------ 5 root root 4096 Jul  1 19:52 .\r\ndrwxr-xr-x 6 root root 4096 Jun 27 04:18 ..\r\n-r-------- 1 root root  878 Jun 27 04:18 config.yaml\r\ndrwx------ 3 root root 4096 Jul  1 20:18 jupyterhub_config.d/ <--- Hooks directory.\r\ndrwx------ 2 root root 4096 Jun 27 04:00 ssl.d/\r\ndrwx------ 2 root root 4096 Jun 27 04:21 traefik_config.d/\r\n\r\nroot@rndbox# ls -la ./jupyterhub_config.d/\r\ntotal 32\r\ndrwx------ 3 root root 4096 Jul  1 20:18 .\r\ndrwx------ 5 root root 4096 Jul  1 19:52 ..\r\n-r-x------ 1 root root  135 Jun 27 04:00 00-set-JupyterHub-defaults.py\r\n-r-x------ 1 root root  532 Jun 27 04:00 01-set-GitLab-env.py\r\n-r-x------ 1 root root 3059 Jul  1 20:18 02-preSpawn-hook.py  <-- When removed, reload succeeds.\r\n```\r\n\r\nAnd the offending script (below), which when removed allows `reload` to succeed. When I comment out `c.Spawner.pre_spawn_hook = preSpawn_hook` to test the script manually, it works perfectly (after which I remove the comment, of course).\r\n\r\nSo some check that `reload` performs doesn't accept this script:\r\n\r\n```\r\nimport yaml, os, shutil, uuid\r\n\r\ndef start_vsCode(unix_username):\r\n    \"\"\" Creates ~/.config/code-server/config.yaml file for unix_username. \"\"\"\r\n    # ==================================================================\r\n    # Search /etc/passwd for UNIX user in sys.argv[1]. If user doesn't\r\n    # exist, a VScode-IDE daemon won't launch, but a JupyterHub-IDE\r\n    # session will still launch normally.\r\n    # ==================================================================\r\n    (user, x, uid, gid, gecos, homedir, shell) = (None,)*7\r\n    with open('/etc/passwd', 'r') as f:\r\n        for line in f:\r\n            if not line.startswith(unix_username + ':'): continue\r\n            (user, x, uid, gid, gecos, homedir, shell) = line.split(':')\r\n            break\r\n        if not user:\r\n            print('WARN: VScode daemon not started. Unix user does not exist: %s' % unix_username)\r\n            return\r\n    # ==================================================================\r\n\r\n    # ==================================================================\r\n    # If `~/.config/code-server/config.yaml` doesn't exist; -OR- it\r\n    # exists has a key(s) missing; or has a value(s) of None (null);\r\n    # the create a fully working file ...\r\n    # ==================================================================\r\n    skel_config_file = '/etc/skel/.config/code-server/config.yaml'\r\n    config_file_dir = homedir + '/.config/code-server/'\r\n    config_file = config_file_dir + '/config.yaml'\r\n    #\r\n    if not os.path.exists(config_file): # No file. Seed w/ 'skel'.\r\n        shutil.copy2(skel_config_file, config_file_dir)\r\n        os.chown(config_file, int(uid), int(gid))\r\n        os.chmod(config_file, 0o640)\r\n\r\n    with open(skel_config_file, 'r') as f: # Get expected keys from 'skel'.\r\n        skel_keys = yaml.load(f, Loader=yaml.FullLoader).keys() # dict_keys([])\r\n        skel_keys = set(skel_keys)\r\n\r\n    with open(config_file, 'r') as f: # File existed or now has 'skel' version.\r\n        doc = yaml.load(f, Loader=yaml.FullLoader) # A dict()\r\n        doc_keys = set(doc.keys())\r\n        doc_values = doc.values()\r\n\r\n    if skel_keys.difference(doc_keys) or None in doc_values:\r\n        doc['password'] = str(uuid.uuid4()).replace('-','')\r\n        doc['bind-addr'] = '0.0.0.0:' + str(uid)\r\n        doc['proxy-domain'] = str(uid) + '.vscode.rndbox.io'\r\n        with open(config_file, 'w') as f:\r\n            yaml.dump(doc, f, sort_keys=True)\r\n    return\r\n# ===============================================================\r\n\r\n\r\n# ===============================================================\r\n# SEE: https://github.com/jupyterhub/systemdspawner\r\n# ===============================================================\r\ndef preSpawn_hook(spawner):\r\n    username = spawner.user.name           # JupyterHub username.\r\n    unix_username = 'jupyter-' + username  # UNIX username created by JupyterHub systemdSpawner.\r\n    start_vsCode(unix_username)\r\n# ===============================================================\r\nc.Spawner.pre_spawn_hook = preSpawn_hook\r\n# ===============================================================\r\n```\r\n\r\nAny ideas?\r\n\r\nThank you in advance! =:)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3096", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3096/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3096/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3096/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3096", "id": 641441540, "node_id": "MDU6SXNzdWU2NDE0NDE1NDA=", "number": 3096, "title": "Access the Jupyter Notebook by passing the credentials in URL", "user": {"login": "sharmaanku", "id": 49897503, "node_id": "MDQ6VXNlcjQ5ODk3NTAz", "avatar_url": "https://avatars3.githubusercontent.com/u/49897503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sharmaanku", "html_url": "https://github.com/sharmaanku", "followers_url": "https://api.github.com/users/sharmaanku/followers", "following_url": "https://api.github.com/users/sharmaanku/following{/other_user}", "gists_url": "https://api.github.com/users/sharmaanku/gists{/gist_id}", "starred_url": "https://api.github.com/users/sharmaanku/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sharmaanku/subscriptions", "organizations_url": "https://api.github.com/users/sharmaanku/orgs", "repos_url": "https://api.github.com/users/sharmaanku/repos", "events_url": "https://api.github.com/users/sharmaanku/events{/privacy}", "received_events_url": "https://api.github.com/users/sharmaanku/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-18T17:52:17Z", "updated_at": "2020-06-18T19:07:40Z", "closed_at": "2020-06-18T19:07:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi ,\r\n\r\n I am trying to access the Jupyter Notebook with password less feature or to pass the credentials in url of Jupyter so that user will directly redirected to the notebook page instead of first hit the URL and then manually enter the Credentials .\r\n\r\nFor e.g. I have jupyter notebook available on my machine and currently it is accessible with url \r\n\r\n    https://localhost:8999\r\n\r\nand after hit of URL it landing on to the credential page on which I need to manually enter the required credentials \r\nBut what I was trying to hit the URL    `https://localhost:8999` and it will land to the home screen which containing all the notebooks \r\nWhat i was trying to do with the help of this link `https://stackoverflow.com/questions/41159797/how-to-disable-password-request-for-a-jupyter-notebook-session\r\n\r\nBut this not so much helpful because URL is not accessible and it is alywas generating the new token which tedious to manage \r\n\r\nIs there any simpler way to make the Jupyter notebook accessible directly without entering any manual credentials\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3095", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3095/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3095/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3095/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3095", "id": 640932379, "node_id": "MDU6SXNzdWU2NDA5MzIzNzk=", "number": 3095, "title": "node_selector ignored after failed spawn", "user": {"login": "romanzac", "id": 28704247, "node_id": "MDQ6VXNlcjI4NzA0MjQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/28704247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romanzac", "html_url": "https://github.com/romanzac", "followers_url": "https://api.github.com/users/romanzac/followers", "following_url": "https://api.github.com/users/romanzac/following{/other_user}", "gists_url": "https://api.github.com/users/romanzac/gists{/gist_id}", "starred_url": "https://api.github.com/users/romanzac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romanzac/subscriptions", "organizations_url": "https://api.github.com/users/romanzac/orgs", "repos_url": "https://api.github.com/users/romanzac/repos", "events_url": "https://api.github.com/users/romanzac/events{/privacy}", "received_events_url": "https://api.github.com/users/romanzac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-18T05:59:13Z", "updated_at": "2020-06-18T19:14:46Z", "closed_at": "2020-06-18T19:14:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug description\r\nHello, I have a problem with behavior related to node_selector. \r\n\r\n1) When I first request a server with GPU and GPU resource is not available, spawn process will timeout/fail. This is expected.\r\n2) When I try again to select profile without GPU requirement, my spawn process fails again even thou there are servers with resources available. \r\n\r\n-----\r\nYour server is starting up.\r\n\r\nYou will be redirected automatically when it's ready for you.\r\n\r\n100% Complete\r\nSpawn failed: pod/jupyter-arc did not start in 30 seconds!\r\n\r\nEvent log\r\nServer requested\r\n2020-06-18 05:43:14+00:00 [Warning] 0/9 nodes are available: 4 Insufficient nvidia.com/gpu, 5 node(s) didn't match node selector.\r\nSpawn failed: pod/jupyter-arc did not start in 30 seconds!\r\n----\r\n\r\n \r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\nI wish user who cannot spawn server due to resource constraints could still spawn another server (to do something else) and wait till resource would be released.\r\n\r\n\r\n### Your personal set up\r\nKubernetes: 1.16.6\r\ndeployed\tjupyterhub-0.9.0  version          \t1.1.0\r\n\r\n - Configuration:\r\nprofileList:\r\n    - display_name: \"Bioinformatics Environment\"\r\n      description: \"Sample Jupyter notebooks and necessary tools for bioinformatics.\"\r\n      default: true\r\n      kubespawner_override:\r\n        image: registry:8443/bioinf-jupyter-k8s:1.0.17\r\n        node_selector:\r\n          podGroup: \"cpu-compute\"\r\n            \r\n    - display_name: \"Bioinformatics Environment 1x GPU\"\r\n      description: \"Sample Jupyter notebooks and necessary tools for bioinformatics - GPU support.\"\r\n      kubespawner_override:\r\n        image: registry:8443/bioinf-jupyter-k8s-gpu:1.0.1\r\n        node_selector:\r\n          qpodGroup: \"gpu-compute\"\r\n        extra_resource_limits:\r\n          nvidia.com/gpu: \"1\"\r\n \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3094", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3094/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3094/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3094/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3094", "id": 640924959, "node_id": "MDU6SXNzdWU2NDA5MjQ5NTk=", "number": 3094, "title": "Jupyterhub spawn fails - tornado.web.HTTPError: HTTP 500: Internal Server Error", "user": {"login": "mvignesh1990", "id": 13062624, "node_id": "MDQ6VXNlcjEzMDYyNjI0", "avatar_url": "https://avatars0.githubusercontent.com/u/13062624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mvignesh1990", "html_url": "https://github.com/mvignesh1990", "followers_url": "https://api.github.com/users/mvignesh1990/followers", "following_url": "https://api.github.com/users/mvignesh1990/following{/other_user}", "gists_url": "https://api.github.com/users/mvignesh1990/gists{/gist_id}", "starred_url": "https://api.github.com/users/mvignesh1990/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mvignesh1990/subscriptions", "organizations_url": "https://api.github.com/users/mvignesh1990/orgs", "repos_url": "https://api.github.com/users/mvignesh1990/repos", "events_url": "https://api.github.com/users/mvignesh1990/events{/privacy}", "received_events_url": "https://api.github.com/users/mvignesh1990/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-18T05:42:58Z", "updated_at": "2020-06-18T19:15:59Z", "closed_at": "2020-06-18T19:15:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\nI have installed jupyter hub development install using the following documentation:\r\nhttps://jupyterhub.readthedocs.io/en/stable/contributing/setup.html\r\n\r\nThe python3 installed is a python alt install and not a virtual env via conda. When I start the hub in a conda environment, i am able to login, do a notebook server spawn and perform python operations.\r\nIn the python3 alt install env, when i start the hub, the spawn fails with the following error:\r\nERROR:asyncio:Task exception was never retrieved\r\nfuture: <Task finished coro=<BaseHandler.spawn_single_user() done, defined at /home/myuser/jupyterhub/jupyterhub/handlers/base.py:741> exception=HTTPError()>\r\nTraceback (most recent call last):\r\n  File \"/home/myuser/jupyterhub/jupyterhub/handlers/base.py\", line 939, in spawn_single_user\r\n    timedelta(seconds=self.slow_spawn_timeout), finish_spawn_future\r\ntornado.util.TimeoutError: Timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/myuser/jupyterhub/jupyterhub/handlers/base.py\", line 972, in spawn_single_user\r\n    % (status, spawner._log_name),\r\ntornado.web.HTTPError: HTTP 500: Internal Server Error (Spawner failed to start [status=1]. The logs for admin may contain details.)\r\n^C[C 2020-06-17 19:12:32.290 JupyterHub app:2739] Received signal SIGINT, initiating shutdown...\r\n[E 2020-06-17 19:12:32.292 JupyterHub user:706] Unhandled error waiting for admin's server to show up at http://127.0.0.1:60014/user/admin/:\r\n[E 2020-06-17 19:12:32.330 JupyterHub web:1792] Uncaught exception GET /hub/api/users/admin/server/progress (10.61.51.140)\r\n    HTTPServerRequest(protocol='http', host='10.64.17.14:8080', method='GET', uri='/hub/api/users/admin/server/progress', version='HTTP/1.1', remote_ip='10.61.51.140')\r\n    Traceback (most recent call last):\r\n      File \"/home/myuser/.local/lib/python3.6/site-packages/tornado/web.py\", line 1703, in _execute\r\n        result = await result\r\n      File \"/home/myuser/jupyterhub/jupyterhub/apihandlers/users.py\", line 604, in get\r\n        await asyncio.wait([spawn_future])\r\n      File \"/usr/lib64/python3.6/asyncio/tasks.py\", line 313, in wait\r\n        return (yield from _wait(fs, timeout, return_when, loop))\r\n      File \"/usr/lib64/python3.6/asyncio/tasks.py\", line 396, in _wait\r\n        yield from waiter\r\n    concurrent.futures._base.CancelledError\r\n\r\n\r\n#### Expected behaviour\r\nJupyterhub should be able to spawn the single-user servers.\r\n\r\n#### Actual behaviour\r\nSpawn fails with the above error.\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\nInstall jupyterhub on python3 alt install env.\r\nStart jupyterhub as: jupyterhub --ip <ip> --port <port> -f jupyterhub_config.py\r\nLogin using a dummy user and start the server.\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS: RHEL\r\n - Version: 1.2.0dev\r\n - Configuration: 8 core, 64gb\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3093", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3093/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3093/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3093/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3093", "id": 639477404, "node_id": "MDU6SXNzdWU2Mzk0Nzc0MDQ=", "number": 3093, "title": "delete_to_trash cannot re-enabled by jupyter_notebook_config.py", "user": {"login": "yuandongfang", "id": 22285176, "node_id": "MDQ6VXNlcjIyMjg1MTc2", "avatar_url": "https://avatars3.githubusercontent.com/u/22285176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuandongfang", "html_url": "https://github.com/yuandongfang", "followers_url": "https://api.github.com/users/yuandongfang/followers", "following_url": "https://api.github.com/users/yuandongfang/following{/other_user}", "gists_url": "https://api.github.com/users/yuandongfang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuandongfang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuandongfang/subscriptions", "organizations_url": "https://api.github.com/users/yuandongfang/orgs", "repos_url": "https://api.github.com/users/yuandongfang/repos", "events_url": "https://api.github.com/users/yuandongfang/events{/privacy}", "received_events_url": "https://api.github.com/users/yuandongfang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-16T08:32:10Z", "updated_at": "2020-06-16T08:51:36Z", "closed_at": "2020-06-16T08:51:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "when call initialize in notebook, enforce cl-opts override configfile opts will https://github.com/jupyter/jupyter_core/blob/ac712354ec2c9377a290acca03a91712f991c889/jupyter_core/application.py#L248\r\n\r\nso https://github.com/jupyterhub/jupyterhub/blob/b5defabf495c49a73747dadfbfa9b95abe0be0d6/jupyterhub/singleuser.py#L557  cannot be set with hard code", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3092", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3092/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3092/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3092/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3092", "id": 639406644, "node_id": "MDU6SXNzdWU2Mzk0MDY2NDQ=", "number": 3092, "title": "Error in Authenticator.pre_spawn_start: PermissionError [Errno 13] Permission denied", "user": {"login": "somir", "id": 26133382, "node_id": "MDQ6VXNlcjI2MTMzMzgy", "avatar_url": "https://avatars0.githubusercontent.com/u/26133382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somir", "html_url": "https://github.com/somir", "followers_url": "https://api.github.com/users/somir/followers", "following_url": "https://api.github.com/users/somir/following{/other_user}", "gists_url": "https://api.github.com/users/somir/gists{/gist_id}", "starred_url": "https://api.github.com/users/somir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somir/subscriptions", "organizations_url": "https://api.github.com/users/somir/orgs", "repos_url": "https://api.github.com/users/somir/repos", "events_url": "https://api.github.com/users/somir/events{/privacy}", "received_events_url": "https://api.github.com/users/somir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-16T06:29:42Z", "updated_at": "2020-06-16T07:10:19Z", "closed_at": "2020-06-16T07:10:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "500 : Internal Server Error\r\nError in Authenticator.pre_spawn_start: PermissionError [Errno 13] Permission denied: '/root/anaconda3/bin/jupyterhub-singleuser'\r\n\r\nYou can try restarting your server from the home page.\r\n\r\n>>> How to fix it???\r\n\r\n\r\nOS: Ubuntu18.04\r\nJupyterhub Version: 1.1.0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3091", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3091/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3091/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3091/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3091", "id": 638872189, "node_id": "MDU6SXNzdWU2Mzg4NzIxODk=", "number": 3091, "title": "The kernel for <notebook>.ipynb appears to have died. It will restart automatically", "user": {"login": "millerh1", "id": 44813811, "node_id": "MDQ6VXNlcjQ0ODEzODEx", "avatar_url": "https://avatars3.githubusercontent.com/u/44813811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/millerh1", "html_url": "https://github.com/millerh1", "followers_url": "https://api.github.com/users/millerh1/followers", "following_url": "https://api.github.com/users/millerh1/following{/other_user}", "gists_url": "https://api.github.com/users/millerh1/gists{/gist_id}", "starred_url": "https://api.github.com/users/millerh1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/millerh1/subscriptions", "organizations_url": "https://api.github.com/users/millerh1/orgs", "repos_url": "https://api.github.com/users/millerh1/repos", "events_url": "https://api.github.com/users/millerh1/events{/privacy}", "received_events_url": "https://api.github.com/users/millerh1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-15T13:52:16Z", "updated_at": "2020-06-15T15:17:44Z", "closed_at": "2020-06-15T15:17:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\nI am running JupyterHub on an AWS EC2 with Ubuntu 18.04. I have followed the steps outlined in the [docs](https://jupyterhub.readthedocs.io/en/stable/installation-guide-hard.html) before the NGINX part to set up JupyterHub with Conda. Then, I added a few extra steps to set up R. The exact process I went through is documented [here](https://github.com/millerh1/jupyter-workshop/blob/master/README_admin.md). \r\nWhen I log in using any account and attempt to use R in a notebook, the command hangs and I get this error: \r\n```\r\nThe kernel for Untitled3.ipynb appears to have died. It will restart automatically.\r\n```\r\nAttempting to use R in the jupyter terminal, any command just hangs for a few seconds and then the whole R session restarts without any message. \r\n\r\n*Edit:* I should add that R works as expected from the ssh command line. \r\n\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\nR should be working correctly in the notebook and in the terminal.\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what actually happens. -->\r\nThe R session hangs in both cases.\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\nFollow the instructions I outline [here](https://github.com/millerh1/jupyter-workshop/blob/master/README_admin.md)\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS: Ubuntu 18.04\r\n <!-- [e.g. linux, OSX] -->\r\n - Version: \r\n```\r\njupyterhub    :1.1.0\r\njupyter core     : 4.6.3\r\njupyter-notebook : 6.0.3\r\nqtconsole        : not installed\r\nipython          : 7.15.0\r\nipykernel        : 5.3.0\r\njupyter client   : 6.1.3\r\njupyter lab      : 2.1.4\r\nnbconvert        : 5.6.1\r\nipywidgets       : 7.5.1\r\nnbformat         : 5.0.7\r\ntraitlets        : 4.3.3\r\n```\r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration:\r\nThe only non-standard config options are:\r\n```\r\nc.Spawner.default_url = '/lab'\r\nc.JupyterHub.ip = '0.0.0.0'\r\nc.JupyterHub.port = 80\r\nc.PAMAuthenticator.open_sessions = False\r\nc.Authenticator.admin_users = {'jupyter-admin'}\r\nc.LocalAuthenticator.create_system_users=True\r\n```\r\n <!-- Be careful not to share any sensitive information. --->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3088", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3088/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3088/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3088/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3088", "id": 638318484, "node_id": "MDU6SXNzdWU2MzgzMTg0ODQ=", "number": 3088, "title": "jupyterhub cannot connect to kernel", "user": {"login": "HooliBox", "id": 39609927, "node_id": "MDQ6VXNlcjM5NjA5OTI3", "avatar_url": "https://avatars1.githubusercontent.com/u/39609927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HooliBox", "html_url": "https://github.com/HooliBox", "followers_url": "https://api.github.com/users/HooliBox/followers", "following_url": "https://api.github.com/users/HooliBox/following{/other_user}", "gists_url": "https://api.github.com/users/HooliBox/gists{/gist_id}", "starred_url": "https://api.github.com/users/HooliBox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HooliBox/subscriptions", "organizations_url": "https://api.github.com/users/HooliBox/orgs", "repos_url": "https://api.github.com/users/HooliBox/repos", "events_url": "https://api.github.com/users/HooliBox/events{/privacy}", "received_events_url": "https://api.github.com/users/HooliBox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-14T09:41:43Z", "updated_at": "2020-06-15T04:25:27Z", "closed_at": "2020-06-14T15:37:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug description\r\nI followed the steps on the office website and installed the jupyterhub using conda on CentOS.\r\nWhen I start the jupyterhub, I could not connect to the kernel. It stuck at the `kernel starting, please wait...` for minutes and eventually pop out a window says `A connection to the notebook server could not be established. The notebook will continue trying to reconnect. Check your network connection or notebook server configuration.`.\r\n\r\nHere is the console output in debug model:\r\n```\r\n(py) [root@host ~]# jupyterhub -f /etc/jupyterhub/jupyterhub_config.py  --debug\r\n[D 2020-06-14 17:35:15.233 JupyterHub application:556] Looking for /etc/jupyterhub/jupyterhub_config in /root\r\n[D 2020-06-14 17:35:15.233 JupyterHub application:578] Loaded config file: /etc/jupyterhub/jupyterhub_config.py\r\n[I 2020-06-14 17:35:15.235 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-06-14 17:35:15.235 JupyterHub app:2271] Using Authenticator: jupyterhub.auth.PAMAuthenticator-1.1.0\r\n[I 2020-06-14 17:35:15.235 JupyterHub app:2271] Using Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\n[I 2020-06-14 17:35:15.235 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-06-14 17:35:15.239 JupyterHub app:1349] Loading cookie_secret from /root/jupyterhub_cookie_secret\r\n[D 2020-06-14 17:35:15.239 JupyterHub app:1516] Connecting to db: sqlite:///jupyterhub.sqlite\r\n[D 2020-06-14 17:35:15.253 JupyterHub orm:749] database schema version found: 4dc2d5a8c53c\r\n[I 2020-06-14 17:35:15.257 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\n[I 2020-06-14 17:35:15.280 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10\r\n[D 2020-06-14 17:35:15.293 JupyterHub app:1914] Initializing spawners\r\n[D 2020-06-14 17:35:15.297 JupyterHub app:2011] Loading state for wzh from db\r\n[D 2020-06-14 17:35:15.297 JupyterHub app:2038] Loaded users:\r\n         wzh admin\r\n[I 2020-06-14 17:35:15.297 JupyterHub app:2311] Initialized 0 spawners in 0.004 seconds\r\n[W 2020-06-14 17:35:15.300 JupyterHub proxy:643] Running JupyterHub without SSL.  I hope there is SSL termination happening somewhere else...\r\n[I 2020-06-14 17:35:15.300 JupyterHub proxy:646] Starting proxy @ http://*:8000/\r\n[D 2020-06-14 17:35:15.300 JupyterHub proxy:647] Proxy cmd: ['configurable-http-proxy', '--ip', '*', '--port', '8000', '--api-ip', '127.0.0.1', '--api-port', '8001', '--error-target', 'http://127.0.0.1:8081/hub/error']\r\n[D 2020-06-14 17:35:15.302 JupyterHub proxy:562] Writing proxy pid file: jupyterhub-proxy.pid\r\n17:35:15.858 [ConfigProxy] warn: Interpreting ip='*' as all-interfaces. Preferred usage is 0.0.0.0 for all IPv4 or '' for all-interfaces.\r\n17:35:15.865 [ConfigProxy] info: Proxying http://*:8000 to (no default)\r\n17:35:15.865 [ConfigProxy] info: Proxy API at http://127.0.0.1:8001/api/routes\r\n[D 2020-06-14 17:35:15.966 JupyterHub proxy:682] Proxy started and appears to be up\r\n[D 2020-06-14 17:35:15.967 JupyterHub proxy:766] Proxy: Fetching GET http://127.0.0.1:8001/api/routes\r\n17:35:15.975 [ConfigProxy] info: 200 GET /api/routes \r\n[I 2020-06-14 17:35:15.976 JupyterHub app:2556] Hub API listening on http://127.0.0.1:8081/hub/\r\n[D 2020-06-14 17:35:15.976 JupyterHub proxy:315] Fetching routes to check\r\n[D 2020-06-14 17:35:15.976 JupyterHub proxy:766] Proxy: Fetching GET http://127.0.0.1:8001/api/routes\r\n17:35:15.977 [ConfigProxy] info: 200 GET /api/routes \r\n[I 2020-06-14 17:35:15.977 JupyterHub proxy:320] Checking routes\r\n[I 2020-06-14 17:35:15.977 JupyterHub proxy:400] Adding default route for Hub: / => http://127.0.0.1:8081\r\n[D 2020-06-14 17:35:15.977 JupyterHub proxy:766] Proxy: Fetching POST http://127.0.0.1:8001/api/routes/\r\n17:35:15.979 [ConfigProxy] info: Adding route / -> http://127.0.0.1:8081\r\n17:35:15.979 [ConfigProxy] info: Route added / -> http://127.0.0.1:8081\r\n17:35:15.980 [ConfigProxy] info: 201 POST /api/routes/ \r\n[I 2020-06-14 17:35:15.980 JupyterHub app:2631] JupyterHub is now running at http://*:8000/\r\n[D 2020-06-14 17:35:15.980 JupyterHub app:2233] It took 0.750 seconds for the Hub to start\r\n[I 2020-06-14 17:35:23.019 JupyterHub log:174] 302 GET / -> /hub/ (@::ffff:192.168.10.161) 1.09ms\r\n[D 2020-06-14 17:35:23.035 JupyterHub base:330] Refreshing auth for wzh\r\n[D 2020-06-14 17:35:23.035 JupyterHub user:242] Creating <class 'jupyterhub.spawner.LocalProcessSpawner'> for wzh:\r\n[I 2020-06-14 17:35:23.037 JupyterHub log:174] 302 GET /hub/ -> /hub/spawn (wzh@::ffff:192.168.10.161) 7.62ms\r\n[D 2020-06-14 17:35:23.048 JupyterHub pages:195] Triggering spawn with default options for wzh\r\n[D 2020-06-14 17:35:23.048 JupyterHub base:825] Initiating spawn for wzh\r\n[D 2020-06-14 17:35:23.048 JupyterHub base:832] 0/100 concurrent spawns\r\n[D 2020-06-14 17:35:23.048 JupyterHub base:837] 0 active servers\r\n[W 2020-06-14 17:35:23.287 JupyterHub auth:956] Failed to open PAM session for wzh: [PAM Error 14] Cannot make/remove an entry for the specified session\r\n[W 2020-06-14 17:35:23.287 JupyterHub auth:957] Disabling PAM sessions from now on.\r\n[D 2020-06-14 17:35:23.290 JupyterHub user:556] Calling Spawner.start for wzh\r\n[I 2020-06-14 17:35:23.291 JupyterHub spawner:1417] Spawning jupyterhub-singleuser --port=37932 --allow-root\r\n[D 2020-06-14 17:35:23.299 JupyterHub spawner:1113] Polling subprocess every 30s\r\n[I 2020-06-14 17:35:23.931 SingleUserNotebookApp singleuser:561] Starting jupyterhub-singleuser server version 1.1.0\r\n[I 2020-06-14 17:35:23.936 JupyterHub log:174] 200 GET /hub/api (@127.0.0.1) 1.29ms\r\n[I 2020-06-14 17:35:23.937 SingleUserNotebookApp notebookapp:1924] Serving notebooks from local directory: /home/wzh\r\n[I 2020-06-14 17:35:23.937 SingleUserNotebookApp notebookapp:1924] The Jupyter Notebook is running at:\r\n[I 2020-06-14 17:35:23.937 SingleUserNotebookApp notebookapp:1924] http://127.0.0.1:37932/user/wzh/\r\n[I 2020-06-14 17:35:23.937 SingleUserNotebookApp notebookapp:1925] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\r\n[I 2020-06-14 17:35:23.941 SingleUserNotebookApp singleuser:542] Updating Hub with activity every 300 seconds\r\n[D 2020-06-14 17:35:23.947 JupyterHub base:285] Recording first activity for <APIToken('b8ed...', user='wzh')>\r\n[D 2020-06-14 17:35:23.952 JupyterHub users:711] Activity for user wzh: 2020-06-14T09:35:23.695444Z\r\n[D 2020-06-14 17:35:23.952 JupyterHub users:732] Activity on server wzh/: 2020-06-14T09:35:23.695444Z\r\n[I 2020-06-14 17:35:23.955 JupyterHub log:174] 200 POST /hub/api/users/wzh/activity (wzh@127.0.0.1) 11.27ms\r\n[I 2020-06-14 17:35:24.049 JupyterHub log:174] 302 GET /hub/spawn -> /hub/spawn-pending/wzh (wzh@::ffff:192.168.10.161) 1003.31ms\r\n[I 2020-06-14 17:35:24.060 JupyterHub pages:347] wzh is pending spawn\r\n[I 2020-06-14 17:35:24.085 JupyterHub log:174] 200 GET /hub/spawn-pending/wzh (wzh@::ffff:192.168.10.161) 27.43ms\r\n[I 2020-06-14 17:35:24.705 SingleUserNotebookApp log:174] 302 GET /user/wzh/ -> /user/wzh/tree? (@127.0.0.1) 0.43ms\r\n[D 2020-06-14 17:35:24.706 JupyterHub utils:218] Server at http://127.0.0.1:37932/user/wzh/ responded with 302\r\n[D 2020-06-14 17:35:24.706 JupyterHub _version:60] jupyterhub and jupyterhub-singleuser both on version 1.1.0\r\n[I 2020-06-14 17:35:24.706 JupyterHub base:855] User wzh took 1.658 seconds to start\r\n[I 2020-06-14 17:35:24.706 JupyterHub proxy:262] Adding user wzh to proxy /user/wzh/ => http://127.0.0.1:37932\r\n[D 2020-06-14 17:35:24.706 JupyterHub proxy:766] Proxy: Fetching POST http://127.0.0.1:8001/api/routes/user/wzh\r\n17:35:24.707 [ConfigProxy] info: Adding route /user/wzh -> http://127.0.0.1:37932\r\n17:35:24.707 [ConfigProxy] info: Route added /user/wzh -> http://127.0.0.1:37932\r\n17:35:24.707 [ConfigProxy] info: 201 POST /api/routes/user/wzh \r\n[I 2020-06-14 17:35:24.708 JupyterHub users:609] Server wzh is ready\r\n[I 2020-06-14 17:35:24.708 JupyterHub log:174] 200 GET /hub/api/users/wzh/server/progress (wzh@::ffff:192.168.10.161) 457.51ms\r\n[I 2020-06-14 17:35:24.768 JupyterHub log:174] 302 GET /hub/spawn-pending/wzh -> /user/wzh/ (wzh@::ffff:192.168.10.161) 1.78ms\r\n[I 2020-06-14 17:35:24.776 SingleUserNotebookApp log:174] 302 GET /user/wzh/ -> /user/wzh/tree? (@::ffff:192.168.10.161) 0.43ms\r\n[I 2020-06-14 17:35:24.784 SingleUserNotebookApp log:174] 302 GET /user/wzh/tree? -> /hub/api/oauth2/authorize?client_id=jupyterhub-user-wzh&redirect_uri=%2Fuser%2Fwzh%2Foauth_callback&response_type=code&state=[secret] (@::ffff:192.168.10.161) 1.68ms\r\n[D 2020-06-14 17:35:24.793 JupyterHub provider:414] Validating client id jupyterhub-user-wzh\r\n[D 2020-06-14 17:35:24.794 JupyterHub provider:492] validate_redirect_uri: client_id=jupyterhub-user-wzh, redirect_uri=/user/wzh/oauth_callback\r\n[D 2020-06-14 17:35:24.796 JupyterHub auth:247] Skipping oauth confirmation for <User(wzh 1/1 running)> accessing Server at /user/wzh/\r\n[D 2020-06-14 17:35:24.796 JupyterHub provider:414] Validating client id jupyterhub-user-wzh\r\n[D 2020-06-14 17:35:24.797 JupyterHub provider:492] validate_redirect_uri: client_id=jupyterhub-user-wzh, redirect_uri=/user/wzh/oauth_callback\r\n[D 2020-06-14 17:35:24.798 JupyterHub provider:241] Saving authorization code jupyterhub-user-wzh, mTT..., (), {}\r\n[I 2020-06-14 17:35:24.802 JupyterHub log:174] 302 GET /hub/api/oauth2/authorize?client_id=jupyterhub-user-wzh&redirect_uri=%2Fuser%2Fwzh%2Foauth_callback&response_type=code&state=[secret] -> /user/wzh/oauth_callback?code=[secret]&state=[secret] (wzh@::ffff:192.168.10.161) 11.47ms\r\n[D 2020-06-14 17:35:24.819 JupyterHub provider:60] authenticate_client <oauthlib.Request url=\"/hub/api/oauth2/token\", http_method=\"POST\", headers=\"{'Host': '127.0.0.1:8081', 'User-Agent': 'python-requests/2.23.0', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Type': 'application/x-www-form-urlencoded', 'Authorization': '<SANITIZED>', 'Content-Length': '186'}\", body=\"client_id=jupyterhub-user-wzh&client_secret=b8ed85e5f1184e67a95bf4be923fabb9&grant_type=authorization_code&code=mTTpDCv6ZU6eFWKvzkc8b20hnLsl1U&redirect_uri=%2Fuser%2Fwzh%2Foauth_callback\">\r\n[D 2020-06-14 17:35:24.826 JupyterHub provider:119] confirm_redirect_uri: client_id=jupyterhub-user-wzh, redirect_uri=/user/wzh/oauth_callback\r\n[D 2020-06-14 17:35:24.826 JupyterHub provider:339] Saving bearer token {'access_token': 'REDACTED', 'expires_in': 3600, 'token_type': 'Bearer', 'scope': 'identify', 'refresh_token': 'REDACTED'}\r\n[D 2020-06-14 17:35:24.830 JupyterHub provider:194] Deleting oauth code mTT... for jupyterhub-user-wzh\r\n[I 2020-06-14 17:35:24.834 JupyterHub log:174] 200 POST /hub/api/oauth2/token (wzh@127.0.0.1) 17.64ms\r\n[I 2020-06-14 17:35:24.845 JupyterHub log:174] 200 GET /hub/api/authorizations/token/[secret] (wzh@127.0.0.1) 9.11ms\r\n[I 2020-06-14 17:35:24.846 SingleUserNotebookApp auth:981] Logged-in user {'kind': 'user', 'name': 'wzh', 'admin': True, 'groups': [], 'server': '/user/wzh/', 'pending': None, 'created': '2020-06-14T05:37:24.166772Z', 'last_activity': '2020-06-14T09:35:24.842288Z', 'servers': None}\r\n[I 2020-06-14 17:35:24.846 SingleUserNotebookApp log:174] 302 GET /user/wzh/oauth_callback?code=[secret]&state=[secret] -> /user/wzh/tree? (@::ffff:192.168.10.161) 33.42ms\r\n[I 2020-06-14 17:35:24.911 SingleUserNotebookApp log:174] 200 GET /user/wzh/tree? (wzh@::ffff:192.168.10.161) 54.89ms\r\n[I 2020-06-14 17:35:25.041 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/config/tree?_=1592127325001 (wzh@::ffff:192.168.10.161) 2.45ms\r\n[I 2020-06-14 17:35:25.044 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/config/common?_=1592127325002 (wzh@::ffff:192.168.10.161) 2.29ms\r\n[I 2020-06-14 17:35:25.045 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/terminals?_=1592127325003 (wzh@::ffff:192.168.10.161) 0.71ms\r\n[I 2020-06-14 17:35:25.050 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/sessions?_=1592127325004 (wzh@::ffff:192.168.10.161) 1.26ms\r\n[I 2020-06-14 17:35:25.052 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/terminals?_=1592127325005 (wzh@::ffff:192.168.10.161) 0.71ms\r\n[I 2020-06-14 17:35:25.073 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/contents?type=directory&_=1592127325006 (wzh@::ffff:192.168.10.161) 1.96ms\r\n[I 2020-06-14 17:35:27.948 SingleUserNotebookApp handlers:153] Creating new notebook in \r\n[I 2020-06-14 17:35:27.954 SingleUserNotebookApp log:174] 201 POST /user/wzh/api/contents (wzh@::ffff:192.168.10.161) 6.79ms\r\n[I 2020-06-14 17:35:28.242 SingleUserNotebookApp log:174] 200 GET /user/wzh/notebooks/Untitled.ipynb?kernel_name=python3 (wzh@::ffff:192.168.10.161) 267.92ms\r\n[I 2020-06-14 17:35:28.543 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/config/notebook?_=1592127328465 (wzh@::ffff:192.168.10.161) 2.23ms\r\n[I 2020-06-14 17:35:28.546 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/config/common?_=1592127328466 (wzh@::ffff:192.168.10.161) 2.18ms\r\n[I 2020-06-14 17:35:28.595 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/contents/Untitled.ipynb?type=notebook&_=1592127328467 (wzh@::ffff:192.168.10.161) 2.12ms\r\n[I 2020-06-14 17:35:28.698 SingleUserNotebookApp kernelmanager:172] Kernel started: 2b15855d-c4ca-428b-856b-6ec26b3d808c\r\n[I 2020-06-14 17:35:28.699 SingleUserNotebookApp log:174] 201 POST /user/wzh/api/sessions (wzh@::ffff:192.168.10.161) 22.14ms\r\n[I 2020-06-14 17:35:28.701 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/contents/Untitled.ipynb/checkpoints?_=1592127328468 (wzh@::ffff:192.168.10.161) 1.28ms\r\n[W 2020-06-14 17:35:28.710 SingleUserNotebookApp log:174] 404 GET /user/wzh/nbextensions/widgets/notebook/js/extension.js?v=20200614173523 (wzh@::ffff:192.168.10.161) 7.90ms\r\n[I 2020-06-14 17:35:35.015 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/terminals?_=1592124556936 (wzh@::ffff:192.168.10.161) 0.98ms\r\n[I 2020-06-14 17:35:35.016 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/sessions?_=1592124556935 (wzh@::ffff:192.168.10.161) 0.98ms\r\n[I 2020-06-14 17:35:35.025 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/contents?type=directory&_=1592124556937 (wzh@::ffff:192.168.10.161) 1.39ms\r\n[I 2020-06-14 17:37:28.697 SingleUserNotebookApp log:174] 200 GET /user/wzh/api/contents/Untitled.ipynb?content=0&_=1592127328469 (wzh@::ffff:192.168.10.161) 1.03ms\r\n[I 2020-06-14 17:37:28.708 SingleUserNotebookApp handlers:164] Saving file at /Untitled.ipynb\r\n[I 2020-06-14 17:37:28.713 SingleUserNotebookApp log:174] 200 PUT /user/wzh/api/contents/Untitled.ipynb (wzh@::ffff:192.168.10.161) 6.16ms\r\n^[[1;2D\r\n```\r\n\r\n### personal set up\r\nEsxi 6.5\r\nCentOS 7\r\nconda 4.8.2\r\njupyterhub 1.1.0\r\n\r\n### approach attempted:\r\nI searched online about this and I had attempted following approaches and none of them worked:\r\n1. change browser\r\n2. clear catch\r\n3. downgrade tornado to 5.1.1\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3085", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3085/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3085/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3085/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3085", "id": 638109352, "node_id": "MDU6SXNzdWU2MzgxMDkzNTI=", "number": 3085, "title": "how to set password for default admin user in jupyter HUB", "user": {"login": "amarnath-jena", "id": 54077804, "node_id": "MDQ6VXNlcjU0MDc3ODA0", "avatar_url": "https://avatars1.githubusercontent.com/u/54077804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarnath-jena", "html_url": "https://github.com/amarnath-jena", "followers_url": "https://api.github.com/users/amarnath-jena/followers", "following_url": "https://api.github.com/users/amarnath-jena/following{/other_user}", "gists_url": "https://api.github.com/users/amarnath-jena/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarnath-jena/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarnath-jena/subscriptions", "organizations_url": "https://api.github.com/users/amarnath-jena/orgs", "repos_url": "https://api.github.com/users/amarnath-jena/repos", "events_url": "https://api.github.com/users/amarnath-jena/events{/privacy}", "received_events_url": "https://api.github.com/users/amarnath-jena/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-13T06:49:10Z", "updated_at": "2020-06-13T08:09:55Z", "closed_at": "2020-06-13T08:09:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "how to set password for default admin user in jupyter HUB?\r\nAs when i log in to jupyterHUB using web browser it directly get login without password as well as i create a admin user same thing happen it gets login without password. kindly help me to set the password.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3073", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3073/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3073/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3073/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3073", "id": 630742810, "node_id": "MDU6SXNzdWU2MzA3NDI4MTA=", "number": 3073, "title": "Tailoring the user environment manually from interface jupyterHub ", "user": {"login": "Ahmed-Cheibani", "id": 53706758, "node_id": "MDQ6VXNlcjUzNzA2NzU4", "avatar_url": "https://avatars3.githubusercontent.com/u/53706758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ahmed-Cheibani", "html_url": "https://github.com/Ahmed-Cheibani", "followers_url": "https://api.github.com/users/Ahmed-Cheibani/followers", "following_url": "https://api.github.com/users/Ahmed-Cheibani/following{/other_user}", "gists_url": "https://api.github.com/users/Ahmed-Cheibani/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ahmed-Cheibani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ahmed-Cheibani/subscriptions", "organizations_url": "https://api.github.com/users/Ahmed-Cheibani/orgs", "repos_url": "https://api.github.com/users/Ahmed-Cheibani/repos", "events_url": "https://api.github.com/users/Ahmed-Cheibani/events{/privacy}", "received_events_url": "https://api.github.com/users/Ahmed-Cheibani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-04T11:31:47Z", "updated_at": "2020-06-04T11:38:14Z", "closed_at": "2020-06-04T11:38:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Hello community**\r\n\r\nI come back for you to give or made use a guide config to make platform jupyterhub that each user connects  (single-user) with it choose and configure its environment manually in a cabinet or some other.for  example, it defines its docker images of the environment and the characteristics of computing as CPU, memory... etc.\r\nI'm waiting for your responses,thank you.\r\nBest regards", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3069", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3069/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3069/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3069/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3069", "id": 630040340, "node_id": "MDU6SXNzdWU2MzAwNDAzNDA=", "number": 3069, "title": "Can anyone tell me how to get a token without /hub/api/authorizations/token?", "user": {"login": "qindisky", "id": 3345514, "node_id": "MDQ6VXNlcjMzNDU1MTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3345514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qindisky", "html_url": "https://github.com/qindisky", "followers_url": "https://api.github.com/users/qindisky/followers", "following_url": "https://api.github.com/users/qindisky/following{/other_user}", "gists_url": "https://api.github.com/users/qindisky/gists{/gist_id}", "starred_url": "https://api.github.com/users/qindisky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qindisky/subscriptions", "organizations_url": "https://api.github.com/users/qindisky/orgs", "repos_url": "https://api.github.com/users/qindisky/repos", "events_url": "https://api.github.com/users/qindisky/events{/privacy}", "received_events_url": "https://api.github.com/users/qindisky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-03T14:23:27Z", "updated_at": "2020-06-03T15:02:17Z", "closed_at": "2020-06-03T15:02:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\nWhen use /hub/api/authorizations/token to get a apiToken\uff0c\r\nit show warning as follow \"Using deprecated token creation endpoint /hub/api/authorizations/token. Use /hub/api/users/:user/tokens instead.\" \r\n\r\nSo I use /hub/api/users/:user/tokens instead.\r\nbut this api must contains a \"Authorization: token XXXX\" in the head.\r\notherwise it returns 403 forbidden.\r\n\r\nso I have to put request to /hub/api/authorizations/token to get a token.\r\n\r\n#### Expected behaviour\r\nI'm confused.\r\nCan anyone tell me who to get a token without /hub/api/authorizations/token.\r\nbecause /hub/api/authorizations/token is deprecated.\r\n\r\n### Your personal set up\r\nversion: jupyterhub 1.1.0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3068", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3068/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3068/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3068/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3068", "id": 629578511, "node_id": "MDU6SXNzdWU2Mjk1Nzg1MTE=", "number": 3068, "title": "Jupyterhub on Centos7: ruamel.yaml error (Jupyter Notebook works)", "user": {"login": "opoloko", "id": 1588338, "node_id": "MDQ6VXNlcjE1ODgzMzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1588338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/opoloko", "html_url": "https://github.com/opoloko", "followers_url": "https://api.github.com/users/opoloko/followers", "following_url": "https://api.github.com/users/opoloko/following{/other_user}", "gists_url": "https://api.github.com/users/opoloko/gists{/gist_id}", "starred_url": "https://api.github.com/users/opoloko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/opoloko/subscriptions", "organizations_url": "https://api.github.com/users/opoloko/orgs", "repos_url": "https://api.github.com/users/opoloko/repos", "events_url": "https://api.github.com/users/opoloko/events{/privacy}", "received_events_url": "https://api.github.com/users/opoloko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-02T23:24:57Z", "updated_at": "2020-06-02T23:28:01Z", "closed_at": "2020-06-02T23:28:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n\r\nAfter installing JupyterHub via pip, I get this error:\r\n\r\n(base) root@host [~/.jupyter]# jupyterhub -hTraceback (most recent call last):  File \"/usr/local/bin/jupyterhub\", line 5, in <module>\r\n    from jupyterhub.app import main\r\n  File \"/usr/local/lib/python3.6/site-packages/jupyterhub/app.py\", line 64, in <module>\r\n    from jupyter_telemetry.eventlog import EventLog\r\n  File \"/usr/local/lib/python3.6/site-packages/jupyter_telemetry/__init__.py\", line 6, in <module>\r\n    from .eventlog import EventLog  # noqa\r\n  File \"/usr/local/lib/python3.6/site-packages/jupyter_telemetry/eventlog.py\", line 10, in <module>\r\n    from ruamel.yaml import YAML\r\nImportError: cannot import name 'YAML'\r\n\r\nI do have ruamel.yaml installed in /usr/lib64/python3.6/site-packages (version 0.13.14), and this system works perfectly with a Notebook server. Why is hub not going and/or not seeing/searching installed modules properly?\r\n\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\n\r\n#### Expected behaviour\r\njupyterhub -h to work\r\n<!-- Tell us what you thought would happen. -->\r\n\r\n#### Actual behaviour\r\nerror\r\n-hTraceback (most recent call last):  File \"/usr/local/bin/jupyterhub\", line 5, in <module>\r\n    from jupyterhub.app import main\r\n  File \"/usr/local/lib/python3.6/site-packages/jupyterhub/app.py\", line 64, in <module>\r\n    from jupyter_telemetry.eventlog import EventLog\r\n  File \"/usr/local/lib/python3.6/site-packages/jupyter_telemetry/__init__.py\", line 6, in <module>\r\n    from .eventlog import EventLog  # noqa\r\n  File \"/usr/local/lib/python3.6/site-packages/jupyter_telemetry/eventlog.py\", line 10, in <module>\r\n    from ruamel.yaml import YAML\r\nImportError: cannot import name 'YAML'\r\n<!-- Tell us what actually happens. -->\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS: centos7\r\n <!-- [e.g. linux, OSX] -->\r\n - Version:\r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration: python 3.6\r\n <!-- Be careful not to share any sensitive information. --->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3065", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3065/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3065/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3065/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3065", "id": 627996344, "node_id": "MDU6SXNzdWU2Mjc5OTYzNDQ=", "number": 3065, "title": "JupyterHub notebook persistence on AWS S3 bucket ", "user": {"login": "vagarwal77", "id": 46463536, "node_id": "MDQ6VXNlcjQ2NDYzNTM2", "avatar_url": "https://avatars2.githubusercontent.com/u/46463536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vagarwal77", "html_url": "https://github.com/vagarwal77", "followers_url": "https://api.github.com/users/vagarwal77/followers", "following_url": "https://api.github.com/users/vagarwal77/following{/other_user}", "gists_url": "https://api.github.com/users/vagarwal77/gists{/gist_id}", "starred_url": "https://api.github.com/users/vagarwal77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vagarwal77/subscriptions", "organizations_url": "https://api.github.com/users/vagarwal77/orgs", "repos_url": "https://api.github.com/users/vagarwal77/repos", "events_url": "https://api.github.com/users/vagarwal77/events{/privacy}", "received_events_url": "https://api.github.com/users/vagarwal77/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-31T16:25:32Z", "updated_at": "2020-05-31T16:38:33Z", "closed_at": "2020-05-31T16:38:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Deployed latest JupyterHub on AWS EC2 instance with Amazon Linux  (with no container and all)\r\nI would like to configure JupyterHub notebook persistence on AWS S3 bucket instead of using local diskdrive..Please suggest if there are any - \r\n1. Recommended PyPi library which can go this magic? \r\n2. Or jupyterhub_config.py can be modified to achieve it? \r\n3. Any other way? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3064", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3064/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3064/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3064/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3064", "id": 627995677, "node_id": "MDU6SXNzdWU2Mjc5OTU2Nzc=", "number": 3064, "title": "Share JupyterHub notebooks across users and team", "user": {"login": "vagarwal77", "id": 46463536, "node_id": "MDQ6VXNlcjQ2NDYzNTM2", "avatar_url": "https://avatars2.githubusercontent.com/u/46463536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vagarwal77", "html_url": "https://github.com/vagarwal77", "followers_url": "https://api.github.com/users/vagarwal77/followers", "following_url": "https://api.github.com/users/vagarwal77/following{/other_user}", "gists_url": "https://api.github.com/users/vagarwal77/gists{/gist_id}", "starred_url": "https://api.github.com/users/vagarwal77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vagarwal77/subscriptions", "organizations_url": "https://api.github.com/users/vagarwal77/orgs", "repos_url": "https://api.github.com/users/vagarwal77/repos", "events_url": "https://api.github.com/users/vagarwal77/events{/privacy}", "received_events_url": "https://api.github.com/users/vagarwal77/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-31T16:22:12Z", "updated_at": "2020-05-31T16:39:16Z", "closed_at": "2020-05-31T16:39:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Deployed latest JupyterHub on AWS EC2 instance (with no container and all)\r\nNow, 10 users have access to JupyterHub and they want to share individual notebooks across users or team.. please suggest how this can be achieved with config steps.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3063", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3063/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3063/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3063/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3063", "id": 627701240, "node_id": "MDU6SXNzdWU2Mjc3MDEyNDA=", "number": 3063, "title": "ValueError: Cannot run multiple SparkContexts at once ", "user": {"login": "Arezoo-Moradi", "id": 66164434, "node_id": "MDQ6VXNlcjY2MTY0NDM0", "avatar_url": "https://avatars0.githubusercontent.com/u/66164434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arezoo-Moradi", "html_url": "https://github.com/Arezoo-Moradi", "followers_url": "https://api.github.com/users/Arezoo-Moradi/followers", "following_url": "https://api.github.com/users/Arezoo-Moradi/following{/other_user}", "gists_url": "https://api.github.com/users/Arezoo-Moradi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arezoo-Moradi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arezoo-Moradi/subscriptions", "organizations_url": "https://api.github.com/users/Arezoo-Moradi/orgs", "repos_url": "https://api.github.com/users/Arezoo-Moradi/repos", "events_url": "https://api.github.com/users/Arezoo-Moradi/events{/privacy}", "received_events_url": "https://api.github.com/users/Arezoo-Moradi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-30T10:38:10Z", "updated_at": "2020-06-02T08:33:19Z", "closed_at": "2020-06-02T08:33:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am a newbie in spark  when I ran the following  code get this error,\r\nValueError: Cannot run multiple SparkContexts at once; existing SparkContext(app=Simple App, master=local) created by __init__ at <ipython-input-46-a3be282b5cc3>:7 \r\ncould you please anyone help me?\r\n\r\nimport os\r\nimport sys\r\nimport math\r\nimport itertools\r\nimport multiprocessing\r\nimport pandas\r\nimport numpy as np\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\nimport seaborn as sns\r\nfrom time import time\r\nfrom collections import OrderedDict\r\n#%matplotlib inline\r\ngt0 = time()\r\n\r\n# Sys.setenv('SPARKR_SUBMIT_ARGS'='\"--packages\" \"com.databricks:spark-csv_2.10:1.0.3\" \"sparkr-shell\"') for R\r\n### MANNN restart spart using ipython notebook --profile=pyspark --packages com.databricks:spark-csv_2.10:1.0.3  \r\nos.environ['SPARK_HOME']=\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6\"\r\n\r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/bin\") \r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python\") \r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/pyspark/\") \r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/pyspark/sql\")\r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/pyspark/mllib\")\r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/lib\") \r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/lib/pyspark.zip\")\r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/lib/py4j-0.8.2.1-src.zip\") \r\nsys.path.append(\"C:/Program Files/spark/spark-2.4.5-bin-hadoop2.6/python/lib/pyspark.zip\")\r\n\r\nfrom pyspark import SparkConf, SparkContext\r\nfrom pyspark.sql import SQLContext, Row \r\n\r\n##sc.stop() # IF you wish to stop the context\r\nsc = SparkContext(\"local\", \"Simple App\")\r\n\r\nconf = SparkConf()\\\r\n    .setMaster(f\"local[{multiprocessing.cpu_count()}]\")\\\r\n    .setAppName(\"PySpark NSL-KDD\")\\\r\n    .setAll([(\"spark.driver.memory\", \"8g\"), (\"spark.default.parallelism\", f\"{multiprocessing.cpu_count()}\")])\r\n\r\n# Creating local SparkContext with specified SparkConf and creating SQLContext based on it\r\nsc = SparkContext.getOrCreate(conf=conf)\r\nsc.setLogLevel('INFO')\r\nsqlContext = SQLContext(sc)\r\n\r\n\r\nfrom pyspark.sql.types import *\r\nfrom pyspark.sql.functions import udf, split, col\r\nimport pyspark.sql.functions as sql\r\n\r\ntrain20_nsl_kdd_dataset_path = os.path.join(\"G:/RUN_PYTHON/New folder\", \"KDDTrain+_20Percent.txt\")\r\ntrain_nsl_kdd_dataset_path = os.path.join(\"G:/RUN_PYTHON/New folder\", \"KDDTrain+.txt\")\r\ntest_nsl_kdd_dataset_path = os.path.join(\"G:/RUN_PYTHON/New folder\", \"KDDTest+.txt\")\r\n\r\ncol_names = np.array([\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\r\n    \"dst_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\r\n    \"logged_in\",\"num_compromised\",\"root_shell\",\"su_attempted\",\"num_root\",\r\n    \"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\r\n    \"is_host_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\r\n    \"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\r\n    \"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\r\n    \"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\r\n    \"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\r\n    \"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"labels\"])\r\n\r\nnominal_inx = [1, 2, 3]\r\nbinary_inx = [6, 11, 13, 14, 20, 21]\r\nnumeric_inx = list(set(range(41)).difference(nominal_inx).difference(binary_inx))\r\n\r\nnominal_cols = col_names[nominal_inx].tolist()\r\nbinary_cols = col_names[binary_inx].tolist()\r\nnumeric_cols = col_names[numeric_inx].tolist()\r\n\r\n# Function to load dataset and divide it into 8 partitions\r\ndef load_dataset(path):\r\n    dataset_rdd = sc.textFile(path, 8).map(lambda line: line.split(','))\r\n    dataset_df = (dataset_rdd.toDF(col_names.tolist()).select(\r\n                    col('duration').cast(DoubleType()),\r\n                    col('protocol_type').cast(StringType()),\r\n                    col('service').cast(StringType()),\r\n                    col('flag').cast(StringType()),\r\n                    col('src_bytes').cast(DoubleType()),\r\n                    col('dst_bytes').cast(DoubleType()),\r\n                    col('land').cast(DoubleType()),\r\n                    col('wrong_fragment').cast(DoubleType()),\r\n                    col('urgent').cast(DoubleType()),\r\n                    col('hot').cast(DoubleType()),\r\n                    col('num_failed_logins').cast(DoubleType()),\r\n                    col('logged_in').cast(DoubleType()),\r\n                    col('num_compromised').cast(DoubleType()),\r\n                    col('root_shell').cast(DoubleType()),\r\n                    col('su_attempted').cast(DoubleType()),\r\n                    col('num_root').cast(DoubleType()),\r\n                    col('num_file_creations').cast(DoubleType()),\r\n                    col('num_shells').cast(DoubleType()),\r\n                    col('num_access_files').cast(DoubleType()),\r\n                    col('num_outbound_cmds').cast(DoubleType()),\r\n                    col('is_host_login').cast(DoubleType()),\r\n                    col('is_guest_login').cast(DoubleType()),\r\n                    col('count').cast(DoubleType()),\r\n                    col('srv_count').cast(DoubleType()),\r\n                    col('serror_rate').cast(DoubleType()),\r\n                    col('srv_serror_rate').cast(DoubleType()),\r\n                    col('rerror_rate').cast(DoubleType()),\r\n                    col('srv_rerror_rate').cast(DoubleType()),\r\n                    col('same_srv_rate').cast(DoubleType()),\r\n                    col('diff_srv_rate').cast(DoubleType()),\r\n                    col('srv_diff_host_rate').cast(DoubleType()),\r\n                    col('dst_host_count').cast(DoubleType()),\r\n                    col('dst_host_srv_count').cast(DoubleType()),\r\n                    col('dst_host_same_srv_rate').cast(DoubleType()),\r\n                    col('dst_host_diff_srv_rate').cast(DoubleType()),\r\n                    col('dst_host_same_src_port_rate').cast(DoubleType()),\r\n                    col('dst_host_srv_diff_host_rate').cast(DoubleType()),\r\n                    col('dst_host_serror_rate').cast(DoubleType()),\r\n                    col('dst_host_srv_serror_rate').cast(DoubleType()),\r\n                    col('dst_host_rerror_rate').cast(DoubleType()),\r\n                    col('dst_host_srv_rerror_rate').cast(DoubleType()),\r\n                    col('labels').cast(StringType())))\r\n\r\n    return dataset_df\r\n\r\nfrom pyspark.ml import Pipeline, Transformer\r\nfrom pyspark.ml.feature import StringIndexer\r\nfrom pyspark import keyword_only\r\nfrom pyspark.ml.param.shared import HasInputCol, HasOutputCol, Param\r\n\r\n# Dictionary that contains mapping of various attacks to the four main categories\r\nattack_dict = {\r\n    'normal': 'normal',\r\n    \r\n    'back': 'DoS',\r\n    'land': 'DoS',\r\n    'neptune': 'DoS',\r\n    'pod': 'DoS',\r\n    'smurf': 'DoS',\r\n    'teardrop': 'DoS',\r\n    'mailbomb': 'DoS',\r\n    'apache2': 'DoS',\r\n    'processtable': 'DoS',\r\n    'udpstorm': 'DoS',\r\n    \r\n    'ipsweep': 'Probe',\r\n    'nmap': 'Probe',\r\n    'portsweep': 'Probe',\r\n    'satan': 'Probe',\r\n    'mscan': 'Probe',\r\n    'saint': 'Probe',\r\n\r\n    'ftp_write': 'R2L',\r\n    'guess_passwd': 'R2L',\r\n    'imap': 'R2L',\r\n    'multihop': 'R2L',\r\n    'phf': 'R2L',\r\n    'spy': 'R2L',\r\n    'warezclient': 'R2L',\r\n    'warezmaster': 'R2L',\r\n    'sendmail': 'R2L',\r\n    'named': 'R2L',\r\n    'snmpgetattack': 'R2L',\r\n    'snmpguess': 'R2L',\r\n    'xlock': 'R2L',\r\n    'xsnoop': 'R2L',\r\n    'worm': 'R2L',\r\n    \r\n    'buffer_overflow': 'U2R',\r\n    'loadmodule': 'U2R',\r\n    'perl': 'U2R',\r\n    'rootkit': 'U2R',\r\n    'httptunnel': 'U2R',\r\n    'ps': 'U2R',    \r\n    'sqlattack': 'U2R',\r\n    'xterm': 'U2R'\r\n}\r\n\r\nattack_mapping_udf = udf(lambda v: attack_dict[v])\r\n\r\nclass Labels2Converter(Transformer):\r\n\r\n    @keyword_only\r\n    def __init__(self):\r\n        super(Labels2Converter, self).__init__()\r\n\r\n    def _transform(self, dataset):\r\n        return dataset.withColumn('labels2', sql.regexp_replace(col('labels'), '^(?!normal).*$', 'attack'))\r\n     \r\nclass Labels5Converter(Transformer):\r\n    \r\n    @keyword_only\r\n    def __init__(self):\r\n        super(Labels5Converter, self).__init__()\r\n\r\n    def _transform(self, dataset):\r\n        return dataset.withColumn('labels5', attack_mapping_udf(col('labels')))\r\n    \r\nlabels2_indexer = StringIndexer(inputCol=\"labels2\", outputCol=\"labels2_index\")\r\nlabels5_indexer = StringIndexer(inputCol=\"labels5\", outputCol=\"labels5_index\")\r\n\r\nlabels_mapping_pipeline = Pipeline(stages=[Labels2Converter(), Labels5Converter(), labels2_indexer, labels5_indexer])\r\n\r\nlabels2 = ['normal', 'attack']\r\nlabels5 = ['normal', 'DoS', 'Probe', 'R2L', 'U2R']\r\nlabels_col = 'labels2_index'\r\n\r\n# Loading train data\r\nt0 = time()\r\ntrain_df = load_dataset(train_nsl_kdd_dataset_path)\r\n\r\n# Fitting preparation pipeline\r\nlabels_mapping_model = labels_mapping_pipeline.fit(train_df)\r\n\r\n# Transforming labels column and adding id column\r\ntrain_df = labels_mapping_model.transform(train_df).withColumn('id', sql.monotonically_increasing_id())\r\n\r\ntrain_df = train_df.cache()\r\nprint(f\"Number of examples in train set: {train_df.count()}\")\r\nprint(f\"Time: {time() - t0:.2f}s\")\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3061", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3061/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3061/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3061/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3061", "id": 627019733, "node_id": "MDU6SXNzdWU2MjcwMTk3MzM=", "number": 3061, "title": "query parameters dropped when redirecting from hub to login page", "user": {"login": "scivm", "id": 5593597, "node_id": "MDQ6VXNlcjU1OTM1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5593597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scivm", "html_url": "https://github.com/scivm", "followers_url": "https://api.github.com/users/scivm/followers", "following_url": "https://api.github.com/users/scivm/following{/other_user}", "gists_url": "https://api.github.com/users/scivm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scivm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scivm/subscriptions", "organizations_url": "https://api.github.com/users/scivm/orgs", "repos_url": "https://api.github.com/users/scivm/repos", "events_url": "https://api.github.com/users/scivm/events{/privacy}", "received_events_url": "https://api.github.com/users/scivm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-29T05:59:37Z", "updated_at": "2020-06-25T09:08:18Z", "closed_at": "2020-06-25T09:08:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\nquery parameters are dropped when redirecting from hub to login page.   Documentation which I list below says query parameters should be preserved.\r\n\r\nFrom hub log you can see the parameters are dropped on redirect:\r\n[I 2020-05-29 05:55:28.094 JupyterHub log:174] 302 GET /hub/?frog=water -> /hub/login (@10.0.1.5) 1.01ms\r\n[I 2020-05-29 05:55:28.147 JupyterHub log:174] 302 GET /hub/login -> /hub/oauth_login (@10.0.1.5) 0.91ms\r\n\r\nDocumentation states:\r\nhttps://jupyterhub.readthedocs.io/en/stable/reference/urls.html\r\nAll authenticated handlers redirect to /hub/login to login users prior to being redirected back to the originating page. The returned request should preserve all query parameters.\r\n\r\n\r\n#### Expected behaviour\r\nquery parameters would be preserved on redirects\r\n\r\n#### Actual behaviour\r\nquery parameters are dropped\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n1. Go to /hub?x=y\r\n2. It will redirect to /login and your url parameters will be gone\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\nlinux\r\n - Version:\r\nJupyterHub version 1.1.0\r\n - Configuration:\r\n <!-- Be careful not to share any sensitive information. --->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3060", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3060/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3060/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3060/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3060", "id": 626915616, "node_id": "MDU6SXNzdWU2MjY5MTU2MTY=", "number": 3060, "title": "User's default server is deleted when any named server cannot be added to the proxy.", "user": {"login": "jeevb", "id": 10869815, "node_id": "MDQ6VXNlcjEwODY5ODE1", "avatar_url": "https://avatars0.githubusercontent.com/u/10869815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeevb", "html_url": "https://github.com/jeevb", "followers_url": "https://api.github.com/users/jeevb/followers", "following_url": "https://api.github.com/users/jeevb/following{/other_user}", "gists_url": "https://api.github.com/users/jeevb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeevb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeevb/subscriptions", "organizations_url": "https://api.github.com/users/jeevb/orgs", "repos_url": "https://api.github.com/users/jeevb/repos", "events_url": "https://api.github.com/users/jeevb/events{/privacy}", "received_events_url": "https://api.github.com/users/jeevb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1675086527, "node_id": "MDU6TGFiZWwxNjc1MDg2NTI3", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-29T00:26:10Z", "updated_at": "2020-07-07T12:43:10Z", "closed_at": "2020-07-07T12:43:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\nWe noticed a problem where failure to add a named server to the proxy wrongly caused the default server to be deleted instead. In the following example, `doublegpu7` failed to be added to the proxy, but instead of deleting `doublegpu7`, the default server `jupyter-michaeldzamba` was deleted instead.\r\n```\r\n[E 2020-05-28 22:02:11.206 JupyterHub base:876] Failed to add michaeldzamba:doublegpu7 to proxy!\r\n    Traceback (most recent call last):\r\n      File \"/fn/lib/python3.7/site-packages/jupyterhub/handlers/base.py\", line 869, in finish_user_spawn\r\n        await self.proxy.add_user(user, server_name)\r\n      File \"/fn/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 274, in add_user\r\n        {'user': user.name, 'server_name': server_name},\r\n      File \"/fn/lib/python3.7/site-packages/jupyterhub_traefik_proxy/kv_proxy.py\", line 289, in add_route\r\n        await self._wait_for_route(routespec, provider=self.kv_name)\r\n      File \"/fn/lib/python3.7/site-packages/jupyterhub_traefik_proxy/proxy.py\", line 147, in _wait_for_route\r\n        timeout=self.check_route_timeout,\r\n      File \"/fn/lib/python3.7/site-packages/jupyterhub/utils.py\", line 177, in exponential_backoff\r\n        raise TimeoutError(fail_message)\r\n    TimeoutError: Traefik route for /user/michaeldzamba/doublegpu7/ configuration not available\r\n[E 2020-05-28 22:02:11.207 JupyterHub base:878] Stopping michaeldzamba:doublegpu7 to avoid inconsistent state\r\n[I 2020-05-28 22:02:11.208 JupyterHub spawner:1866] Deleting pod jupyter-michaeldzamba\r\n```\r\n\r\n#### Expected behaviour\r\nWhen a named or default server cannot be added to a proxy, that named or default server should be deleted.\r\n\r\n#### Actual behaviour\r\nWhen a named or default server cannot be added to a proxy, the user's default server is deleted.\r\n\r\n### Your personal set up\r\nWe are currently running Jupyterhub with the traefik proxy and Kubespawner on Debian buster (versions below):\r\n```\r\njupyterhub-kubespawner==0.11.1 \\\r\n    --hash=sha256:ba3efd98db31f157c8db6371d88d86260025a253ab826d7fa404af9764a482e1 \\\r\n    --hash=sha256:d33c771a058ec3c5931b5793813498502601a9fe6e7f315750e6e5df518af0e1 \\\r\njupyterhub-traefik-proxy==0.1.4 \\\r\n    --hash=sha256:4e3b3190988e8e79aba96992ca52b9e1adca60f3addb8b85f2fc60e2f7934660 \\\r\n    --hash=sha256:f1d677e297c1c5912df4ffab9733c934c610398df4ac397990c476962cdfaac7 \\\r\njupyterhub==1.1.0 \\\r\n    --hash=sha256:852a70225a03abd631b36a207f3ffdf69326a0db4cef539825fde39ec1b713d7 \\\r\n    --hash=sha256:a515a22fe1e66e1a08d2e4ecb9b5fe47ed024cddfbc657ad15f448ac3bf409ca \\\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3058", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3058/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3058/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3058/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3058", "id": 626382797, "node_id": "MDU6SXNzdWU2MjYzODI3OTc=", "number": 3058, "title": "Jupyter Lab Server getting disconnected", "user": {"login": "vickycoder", "id": 4564069, "node_id": "MDQ6VXNlcjQ1NjQwNjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4564069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vickycoder", "html_url": "https://github.com/vickycoder", "followers_url": "https://api.github.com/users/vickycoder/followers", "following_url": "https://api.github.com/users/vickycoder/following{/other_user}", "gists_url": "https://api.github.com/users/vickycoder/gists{/gist_id}", "starred_url": "https://api.github.com/users/vickycoder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vickycoder/subscriptions", "organizations_url": "https://api.github.com/users/vickycoder/orgs", "repos_url": "https://api.github.com/users/vickycoder/repos", "events_url": "https://api.github.com/users/vickycoder/events{/privacy}", "received_events_url": "https://api.github.com/users/vickycoder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-28T10:03:20Z", "updated_at": "2020-05-28T11:20:27Z", "closed_at": "2020-05-28T11:20:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThe jupyter lab server is getting disconnected for users and their lab servers gets killed and users get this prompt on the screen:\r\n<img width=\"187\" alt=\"Screenshot 2020-05-28 at 3 24 15 PM\" src=\"https://user-images.githubusercontent.com/4564069/83127123-6a5bf880-a0f7-11ea-9388-e87f985e2ba2.png\">\r\nThe users have to refresh the page and manually select their kernel again.\r\n\r\nJupyter lab version: **1.2.0**\r\nJupyterhub version: **1.1.0**\r\n\r\nThe hub is running on a remote machine.\r\nThis is the error log that is see from hub:\r\n\r\n> 04:12:51.168 - error: [ConfigProxy] Proxy error:  Error: connect ECONNREFUSED 127.0.0.1:44809\r\n    at Object.exports._errnoException (util.js:1018:11)\r\n    at exports._exceptionWithHostPort (util.js:1041:20)\r\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1090:14)\r\n04:12:51.168 - error: [ConfigProxy] 503 GET //user/ragar64/api/kernels/88bbcea2-6539-4141-9a68-92322326baa0/channels?session_id=28495ebc-a9d3-48bd-aa11-48debaf6b725&token=797bc68385d941208a26491ea36c7d05\r\n2020-04-14 04:12:51 - root.mlsi.hub - DEBUG - No template for 503\r\n04:12:51.172 - error: [ConfigProxy] Uncaught Exception TypeError: res.setHeader is not a function\r\n    at /opt/python/python35/lib/node_modules/configurable-http-proxy/lib/configproxy.js:358:21\r\n    at Array.map (native)\r\n    at ClientRequest.<anonymous> (/opt/python/python35/lib/node_modules/configurable-http-proxy/lib/configproxy.js:356:50)\r\n    at ClientRequest.g (events.js:291:16)\r\n    at emitOne (events.js:96:13)\r\n    at ClientRequest.emit (events.js:188:7)\r\n    at HTTPParser.parserOnIncomingClient [as onIncoming] (_http_client.js:473:21)\r\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:99:23)\r\n    at Socket.socketOnData (_http_client.js:362:20)\r\n    at emitOne (events.js:96:13)\r\n    at Socket.emit (events.js:188:7)\r\n04:12:51.375 - error: [ConfigProxy] Proxy error:  Error: connect ECONNREFUSED 127.0.0.1:33422\r\n    at Object.exports._errnoException (util.js:1018:11)\r\n    at exports._exceptionWithHostPort (util.js:1041:20)\r\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1090:14)\r\n04:12:51.375 - error: [ConfigProxy] 503 GET //user/rkash8/api/kernels/4f95b8d6-836d-45fe-b755-d121ebeda46b/channels?session_id=26aba3f9-0999-4a1a-a18b-45a884c2f8a8&token=6ec561e7b7c3472e8ba0556988f72bb3\r\n2020-04-14 04:12:51 - root.mlsi.hub - DEBUG - No template for 503\r\n04:12:51.378 - error: [ConfigProxy] Uncaught Exception TypeError: res.setHeader is not a function\r\n    at /opt/python/python35/lib/node_modules/configurable-http-proxy/lib/configproxy.js:358:21\r\n    at Array.map (native)\r\n    at ClientRequest.<anonymous> (/opt/python/python35/lib/node_modules/configurable-http-proxy/lib/configproxy.js:356:50)\r\n    at ClientRequest.g (events.js:291:16)\r\n    at emitOne (events.js:96:13)\r\n    at ClientRequest.emit (events.js:188:7)\r\n    at HTTPParser.parserOnIncomingClient [as onIncoming] (_http_client.js:473:21)\r\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:99:23)\r\n    at Socket.socketOnData (_http_client.js:362:20)\r\n    at emitOne (events.js:96:13)\r\n    at Socket.emit (events.js:188:7)\r\n2020-04-14 04:12:51 - root.mlsi.hub - WARNING - User ragar64 server stopped, with exit code: 0\r\n2020-04-14 04:12:51 - root.mlsi.hub - INFO - Removing user ragar64 from proxy (/user/ragar64/)\r\n2020-04-14 04:12:51 - root.mlsi.hub - DEBUG - Proxy: Fetching DELETE http://127.0.0.1:8001/api/routes/user/ragar64\r\n04:12:52.897 - error: [ConfigProxy] Proxy error:  Error: connect ECONNREFUSED 127.0.0.1:33422\r\n    at Object.exports._errnoException (util.js:1018:11)\r\n    at exports._exceptionWithHostPort (util.js:1041:20)\r\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1090:14)\r\n\r\nCan someone help resolve this issue?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3052", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3052/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3052/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3052/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3052", "id": 623269244, "node_id": "MDU6SXNzdWU2MjMyNjkyNDQ=", "number": 3052, "title": "Use idle culler from jupyterhub-idle-culler package ", "user": {"login": "GeorgianaElena", "id": 7579677, "node_id": "MDQ6VXNlcjc1Nzk2Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7579677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GeorgianaElena", "html_url": "https://github.com/GeorgianaElena", "followers_url": "https://api.github.com/users/GeorgianaElena/followers", "following_url": "https://api.github.com/users/GeorgianaElena/following{/other_user}", "gists_url": "https://api.github.com/users/GeorgianaElena/gists{/gist_id}", "starred_url": "https://api.github.com/users/GeorgianaElena/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GeorgianaElena/subscriptions", "organizations_url": "https://api.github.com/users/GeorgianaElena/orgs", "repos_url": "https://api.github.com/users/GeorgianaElena/repos", "events_url": "https://api.github.com/users/GeorgianaElena/events{/privacy}", "received_events_url": "https://api.github.com/users/GeorgianaElena/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589225, "node_id": "MDU6TGFiZWwxMDY1ODkyMjU=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 748209730, "node_id": "MDU6TGFiZWw3NDgyMDk3MzA=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/good%20first%20issue", "name": "good first issue", "color": "5319e7", "default": true, "description": null}, {"id": 106589226, "node_id": "MDU6TGFiZWwxMDY1ODkyMjY=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/help%20wanted", "name": "help wanted", "color": "0e8a16", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-22T15:00:42Z", "updated_at": "2020-07-15T12:00:03Z", "closed_at": "2020-07-15T12:00:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Proposed change\r\n<!-- Use this section to describe the feature you'd like to be added. -->\r\nNow that the idle culler is a [standalone package](https://github.com/jupyterhub/jupyterhub-idle-culler), we shouldn't maintain a copy of it in JupyterHub, instead use the package directly :sparkles: \r\n\r\n### Alternative options\r\n<!-- Use this section to describe alternative options and why you've decided on the proposed feature above. -->\r\nKeep it as it is. This means we'll loose all the great features and fixes from https://github.com/jupyterhub/jupyterhub-idle-culler.\r\n\r\n### Who would use this feature?\r\n<!-- Describe the audience for this feature. This information will affect who chooses to work on the feature with you. -->\r\nMaintainers and contributors alike as it will be easier to change and improve it for every project that uses it instead of having it split across multiple repos.\r\n\r\n### How much effort will adding it take?\r\n<!-- Try to estimate how much work adding this feature will require. This information will affect who chooses to work on the feature with you. -->\r\n@yuvipanda's PRs in [Z2JH](https://github.com/jupyterhub/zero-to-jupyterhub-k8s/pull/1648) and [TLJH](https://github.com/jupyterhub/the-littlest-jupyterhub/pull/559) are be a great place to start and look for guidance.\r\n\r\n### Who can do this work?\r\n<!-- What skills are needed? Who can be recruited to add this feature? This information will affect who chooses to work on the feature with you. -->\r\nI believe this would be a great place to start for people wanting to make their first contribution to JupyterHub and of great help for the community :heart: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3051", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3051/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3051/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3051/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3051", "id": 622373480, "node_id": "MDU6SXNzdWU2MjIzNzM0ODA=", "number": 3051, "title": "Use case for c.JupyterHub.api_tokens - service that identifies as a user", "user": {"login": "TeriForey", "id": 8916421, "node_id": "MDQ6VXNlcjg5MTY0MjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/8916421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeriForey", "html_url": "https://github.com/TeriForey", "followers_url": "https://api.github.com/users/TeriForey/followers", "following_url": "https://api.github.com/users/TeriForey/following{/other_user}", "gists_url": "https://api.github.com/users/TeriForey/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeriForey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeriForey/subscriptions", "organizations_url": "https://api.github.com/users/TeriForey/orgs", "repos_url": "https://api.github.com/users/TeriForey/repos", "events_url": "https://api.github.com/users/TeriForey/events{/privacy}", "received_events_url": "https://api.github.com/users/TeriForey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-21T09:29:04Z", "updated_at": "2020-06-11T08:43:24Z", "closed_at": "2020-06-11T08:43:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Proposed change\r\n<!-- Use this section to describe the feature you'd like to be added. -->\r\n\r\nI have a use case for keeping api_tokens, and as recommended wanted to let you know. I'm building a service that embeds jupyter notebook within an iframe, and I'm using jupyterhub with dockerspawner to manage the creation of notebook servers per user. All authentication occurs within my own service and I don't wish to duplicate this within jupyterhub, not least because it means connecting to a database running on a different host that I wish to keep as secure as possible. I'm therefore creating a token for each user when they want to open a notebook file, and using that within the iframe to authenticate their request. Currently only an admin user can create tokens via the API, a service isn't able to do this. I've therefore set my service up as an admin user within JupyterHub, and my service therefore has all the permissions needed to create new users and their respective tokens. \r\n\r\nThis functionality works really well within my context, and I wouldn't wish it to be deprecated. \r\n\r\n### Alternative options\r\n<!-- Use this section to describe alternative options and why you've decided on the proposed feature above. -->\r\n\r\nThe alternative would be to allow external services the permissions to create users, and tokens via the API. \r\n\r\n### Who would use this feature?\r\n<!-- Describe the audience for this feature. This information will affect who chooses to work on the feature with you. -->\r\n\r\nI'm not sure how many services are embedding Jupyter in this way so not sure how many others this would affect/apply to.\r\n\r\n\r\n### How much effort will adding it take?\r\n<!-- Try to estimate how much work adding this feature will require. This information will affect who chooses to work on the feature with you. -->\r\n\r\nLittle effort, as it just requires not deprecating api_tokens.\r\n\r\n\r\n### Who can do this work?\r\n<!-- What skills are needed? Who can be recruited to add this feature? This information will affect who chooses to work on the feature with you. -->\r\n\r\nAnyone should be able to do this. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3050", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3050/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3050/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3050/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3050", "id": 621664959, "node_id": "MDU6SXNzdWU2MjE2NjQ5NTk=", "number": 3050, "title": "I failed to install jupyterhub on an arm machine", "user": {"login": "huyunhaode", "id": 42060415, "node_id": "MDQ6VXNlcjQyMDYwNDE1", "avatar_url": "https://avatars2.githubusercontent.com/u/42060415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huyunhaode", "html_url": "https://github.com/huyunhaode", "followers_url": "https://api.github.com/users/huyunhaode/followers", "following_url": "https://api.github.com/users/huyunhaode/following{/other_user}", "gists_url": "https://api.github.com/users/huyunhaode/gists{/gist_id}", "starred_url": "https://api.github.com/users/huyunhaode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huyunhaode/subscriptions", "organizations_url": "https://api.github.com/users/huyunhaode/orgs", "repos_url": "https://api.github.com/users/huyunhaode/repos", "events_url": "https://api.github.com/users/huyunhaode/events{/privacy}", "received_events_url": "https://api.github.com/users/huyunhaode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-20T10:53:35Z", "updated_at": "2020-05-21T12:58:45Z", "closed_at": "2020-05-21T12:58:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I install the archiconda on my arm machine,I execute the commannd\"conda install -c conda-forge jupyterhub\"\uff0cbut it prompt \r\nFileNotFoundError(2, \"No such file or directory: '/home/archiconda3/bin/python3.7'\")\r\nExecuting transaction: failed\r\nERROR conda.core.link:_execute(507): An error occurred while installing package 'conda-forge::async_generator-1.10-py_0'.\r\nIs it caused by the archiconda3,I have already install the archiconda3 in the /home/archiconda3\uff0cI can install the jupyterhub in my x64 machine by using anaconda3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3049", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3049/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3049/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3049/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3049", "id": 619484818, "node_id": "MDU6SXNzdWU2MTk0ODQ4MTg=", "number": 3049, "title": "Invalid username or password", "user": {"login": "LiuChiennan", "id": 26686108, "node_id": "MDQ6VXNlcjI2Njg2MTA4", "avatar_url": "https://avatars1.githubusercontent.com/u/26686108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LiuChiennan", "html_url": "https://github.com/LiuChiennan", "followers_url": "https://api.github.com/users/LiuChiennan/followers", "following_url": "https://api.github.com/users/LiuChiennan/following{/other_user}", "gists_url": "https://api.github.com/users/LiuChiennan/gists{/gist_id}", "starred_url": "https://api.github.com/users/LiuChiennan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LiuChiennan/subscriptions", "organizations_url": "https://api.github.com/users/LiuChiennan/orgs", "repos_url": "https://api.github.com/users/LiuChiennan/repos", "events_url": "https://api.github.com/users/LiuChiennan/events{/privacy}", "received_events_url": "https://api.github.com/users/LiuChiennan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-16T14:14:07Z", "updated_at": "2020-05-16T14:24:23Z", "closed_at": "2020-05-16T14:24:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I installed jupyterhub step by step following the instructions in https://jupyterhub.readthedocs.io/en/stable/installation-guide-hard.html\r\nAnd after I finish the part 1, I open the link myurl:8000, it works,\r\n![image](https://user-images.githubusercontent.com/26686108/82121689-7e336080-97c1-11ea-9fd7-9484472eaccf.png)\r\nHowever, if I want to login, it always says invalid username or password, as follows, \r\n![image](https://user-images.githubusercontent.com/26686108/82121741-dd917080-97c1-11ea-8e93-acdc389ad636.png)\r\nI have tried all the system users and I think my username and password are valid. I strictly follow the instructions of that link, and the Authenticator is the default PAM. \r\n\r\nFor my system, it is centos 7.6 , anyone knows why\r\n\r\nBy the way, I login the system as root, so I execute all the instructions as root ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3044", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3044/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3044/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3044/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3044", "id": 616747649, "node_id": "MDU6SXNzdWU2MTY3NDc2NDk=", "number": 3044, "title": "Cull-idle doesn't seem to work", "user": {"login": "eosantigen", "id": 11250505, "node_id": "MDQ6VXNlcjExMjUwNTA1", "avatar_url": "https://avatars2.githubusercontent.com/u/11250505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eosantigen", "html_url": "https://github.com/eosantigen", "followers_url": "https://api.github.com/users/eosantigen/followers", "following_url": "https://api.github.com/users/eosantigen/following{/other_user}", "gists_url": "https://api.github.com/users/eosantigen/gists{/gist_id}", "starred_url": "https://api.github.com/users/eosantigen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eosantigen/subscriptions", "organizations_url": "https://api.github.com/users/eosantigen/orgs", "repos_url": "https://api.github.com/users/eosantigen/repos", "events_url": "https://api.github.com/users/eosantigen/events{/privacy}", "received_events_url": "https://api.github.com/users/eosantigen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-12T15:25:28Z", "updated_at": "2020-05-13T06:44:26Z", "closed_at": "2020-05-13T06:44:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug description\r\nI have followed exactly the steps [here](https://github.com/jupyterhub/jupyterhub/tree/master/examples/cull-idle) .\r\n\r\n#### Expected behaviour\r\nWhen the relevant seconds pass as defined in the jupyterhub_config.py , the cull-idle service should stop the idle server of each user. So that when going to navigate the page, no terminals should be able to be started, no notebooks etc, unless the user explicitly presses Start server . _(am I wrong?)_\r\n\r\n#### Actual behaviour\r\nWhen the relevant seconds pass, all that happens is this output in the log:\r\n`200 GET /hub/api/users (cull-idle@127.0.0.1) 10.47ms`\r\nAnd with this the server continues running normally, meaning I can start a terminal, make files etc.\r\n\r\n### Your personal set up\r\n - Version: \r\n```\r\nJupyterHub version 1.1.0\r\noauthenticator.generic.GenericOAuthenticator-0.11.0\r\nUsing Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\nUsing Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n```\r\n - Configuration:\r\n\r\n```\r\nimport sys\r\nc.JupyterHub.last_activity_interval = 300\r\nc.GenericOAuthenticator.auth_refresh_age = 800\r\nc.JupyterHub.shutdown_on_logout = True\r\nfrom oauthenticator.generic import GenericOAuthenticator\r\nc.JupyterHub.authenticator_class = GenericOAuthenticator\r\nc.Authenticator.enable_auth_state = True\r\nc.LocalGenericOAuthenticator.refresh_pre_spawn = True\r\nc.LocalGenericOAuthenticator.pre_spawn_start\r\n\r\nc.JupyterHub.services = [{\r\n    'name': 'cull-idle',\r\n    'admin': True,\r\n    'command': [sys.executable, '/home/elena/cull_idle_servers.py', '--timeout=600'],\r\n    }\r\n]\r\n```\r\n_Running as root ._\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3038", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3038/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3038/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3038/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3038", "id": 613136746, "node_id": "MDU6SXNzdWU2MTMxMzY3NDY=", "number": 3038, "title": "503 Service Unavailable for JupyterHub.  JupyterHub app:2517] Failed to start proxy", "user": {"login": "PRONAY24", "id": 9361911, "node_id": "MDQ6VXNlcjkzNjE5MTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9361911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PRONAY24", "html_url": "https://github.com/PRONAY24", "followers_url": "https://api.github.com/users/PRONAY24/followers", "following_url": "https://api.github.com/users/PRONAY24/following{/other_user}", "gists_url": "https://api.github.com/users/PRONAY24/gists{/gist_id}", "starred_url": "https://api.github.com/users/PRONAY24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PRONAY24/subscriptions", "organizations_url": "https://api.github.com/users/PRONAY24/orgs", "repos_url": "https://api.github.com/users/PRONAY24/repos", "events_url": "https://api.github.com/users/PRONAY24/events{/privacy}", "received_events_url": "https://api.github.com/users/PRONAY24/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-06T08:21:28Z", "updated_at": "2020-05-06T09:17:55Z", "closed_at": "2020-05-06T09:17:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nNot able to access Jupteryhub - I am using Docker Container for Jupyter.\r\n\r\nAfter executing command - `jupyterhub --debug` getting below errors - \r\n\r\n> JupyterHub app:1677] Error adding user [username] already in db\r\n>     Traceback (most recent call last):\r\n>       File \"/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py\", line 1675, in init_users\r\n>         await maybe_future(self.authenticator.add_user(user))\r\n>       File \"/anaconda3/lib/python3.7/site-packages/jupyterhub/auth.py\", line 726, in add_user\r\n>         user.name\r\n>     KeyError: 'User sschecte does not exist on the system. Set LocalAuthenticator.create_system_users=True to automatically create system users from jupyterhub users.'\r\n\r\nfor all users\r\n\r\nand \r\n\r\n\r\n> I 2020-05-06 08:03:38.419 JupyterHub app:2311] Initialized 0 spawners in 0.038 seconds\r\n> [W 2020-05-06 08:03:38.421 JupyterHub proxy:517] Found proxy pid file: /jupyterhub-proxy.pid\r\n> [W 2020-05-06 08:03:38.421 JupyterHub proxy:534] Proxy still running at pid=142\r\n> [C 2020-05-06 08:03:41.424 JupyterHub app:2517] Failed to start proxy\r\n>     Traceback (most recent call last):\r\n>       File \"/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py\", line 2515, in start\r\n>         await self.proxy.start()\r\n>       File \"/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 580, in start\r\n>         self._check_previous_process()\r\n>       File \"/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 558, in _check_previous_process\r\n>         raise RuntimeError(\"Failed to stop proxy at pid=%s\", pid)\r\n>     RuntimeError: ('Failed to stop proxy at pid=%s', 142)\r\n\r\n\r\nChecked all processes, nothing is there with id - 142.\r\n\r\nExecuted command - `configurable-http-proxy`  getting below error\r\n\r\n> `08:14:21.072 - warn: [ConfigProxy] REST API is not authenticated.\r\n> 08:14:21.087 - info: [ConfigProxy] Proxying http://*:8000 to (no default)\r\n> 08:14:21.088 - info: [ConfigProxy] Proxy API at http://localhost:8001/api/routes\r\n> 08:14:21.091 - error: [ConfigProxy] Uncaught Exception Error: listen EADDRINUSE :::8000\r\n>     at Object.exports._errnoException (util.js:870:11)\r\n>     at exports._exceptionWithHostPort (util.js:893:20)\r\n>     at Server._listen2 (net.js:1237:14)\r\n>     at listen (net.js:1273:10)\r\n>     at Server.listen (net.js:1369:5)\r\n>     at Object.<anonymous> (/usr/local/lib/node_modules/configurable-http-proxy/bin/configurable-http-proxy:253:19)\r\n>     at Module._compile (module.js:410:26)\r\n>     at Object.Module._extensions..js (module.js:417:10)\r\n>     at Module.load (module.js:344:32)\r\n>     at Function.Module._load (module.js:301:12)\r\n> 08:14:21.092 - error: [ConfigProxy] Uncaught Exception Error: listen EADDRINUSE 127.0.0.1:8001\r\n>     at Object.exports._errnoException (util.js:870:11)\r\n>     at exports._exceptionWithHostPort (util.js:893:20)\r\n>     at Server._listen2 (net.js:1237:14)\r\n>     at listen (net.js:1273:10)\r\n>     at net.js:1382:9\r\n>     at GetAddrInfoReqWrap.asyncCallback [as callback] (dns.js:63:16)\r\n>     at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:82:10)`\r\n\r\n\r\nTried with c.JupyterHub.port by assigning different port. Also tried with stopping all process  with \"configurable-http-proxy\", but any of them didn't work for me.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3032", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3032/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3032/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3032/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3032", "id": 607857405, "node_id": "MDU6SXNzdWU2MDc4NTc0MDU=", "number": 3032, "title": "Login redirect loop for Jupyterhub on Kubernetes", "user": {"login": "OneRaynyDay", "id": 7191678, "node_id": "MDQ6VXNlcjcxOTE2Nzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/7191678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OneRaynyDay", "html_url": "https://github.com/OneRaynyDay", "followers_url": "https://api.github.com/users/OneRaynyDay/followers", "following_url": "https://api.github.com/users/OneRaynyDay/following{/other_user}", "gists_url": "https://api.github.com/users/OneRaynyDay/gists{/gist_id}", "starred_url": "https://api.github.com/users/OneRaynyDay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OneRaynyDay/subscriptions", "organizations_url": "https://api.github.com/users/OneRaynyDay/orgs", "repos_url": "https://api.github.com/users/OneRaynyDay/repos", "events_url": "https://api.github.com/users/OneRaynyDay/events{/privacy}", "received_events_url": "https://api.github.com/users/OneRaynyDay/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-27T21:13:44Z", "updated_at": "2020-06-20T02:15:12Z", "closed_at": "2020-06-17T15:27:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug description\r\nI'm trying to deploy jupyterhub on k8's according to this guide here: https://zero-to-jupyterhub.readthedocs.io/en/latest/. After logging in via DummyAuthenticator, I get redirected back to the login screen.\r\n\r\n#### Expected behaviour\r\nThe expected behavior:\r\n1. Write any username, any password, press login on this page:\r\n![image](https://user-images.githubusercontent.com/7191678/80419817-a862c400-888e-11ea-83f9-af247a27feab.png)\r\n\r\n2. Go to the control panel page where I can select to spawn an instance of jupyterhub-singleuser.\r\n\r\n#### Actual behaviour\r\n1. Same as above\r\n2. Get routed to the control panel page\r\n3. Get routed back to login page with redirect to control panel\r\n\r\nProof of step 1,2,3 happening in the logs:\r\n\r\nFinding the hub pod:\r\n```\r\n\u276f kubectl get pods --namespace jhub\r\nNAME                              READY   STATUS    RESTARTS   AGE\r\n...\r\nhub-7b449fdf8f-qb4xq              1/1     Running   0          13m\r\nproxy-56465b84df-snmmh            1/1     Running   0          13m\r\n...\r\n```\r\n\r\nReading the logs from hub pod:\r\n```\r\n\u276f kubectl --namespace jhub log hub-7b449fdf8f-qb4xq\r\n...\r\n[I 2020-04-27 20:57:08.600 JupyterHub base:707] User logged in: asdf\r\n[I 2020-04-27 20:57:08.601 JupyterHub log:174] 302 POST /hub/login?next=%2Fhub%2Fspawn -> /hub/spawn (asdf@172.18.148.232) 5.60ms\r\n[I 2020-04-27 20:57:08.701 JupyterHub log:174] 302 GET /hub/spawn -> /hub/login?next=%2Fhub%2Fspawn (@172.18.148.232) 0.68ms\r\n[I 2020-04-27 20:57:08.795 JupyterHub log:174] 200 GET /hub/login?next=%2Fhub%2Fspawn (@172.18.148.232) 1.09ms\r\n```\r\nAs you can see, `asdf` logged in, and redirects to `/hub/spawn`. Then, `/hub/spawn` redirects back to `/hub/login` with the next redirect back to `/hub/spawn`.\r\n\r\n### How to reproduce\r\nI'm using the following helm chart:  https://github.com/jupyterhub/helm-chart/blob/gh-pages/jupyterhub-0.9.0.tgz\r\n\r\nDeploy jupyterhub on my k8 cluster. The only thing I overwrote in the config was:\u00a0\r\n\r\n```\r\nproxy:\r\n  secretToken: <some token>\r\n```\r\n\r\nwhich is the minimal installation according to the guide. **Because there are vpc issues with my kubernetes cluster(company specific)**, the load balancer has trouble finding external IP (stuck in `<pending>` state):\r\n\r\n```\r\n\u276f kubectl get svc --namespace jhub\r\nNAME           TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE\r\nhub            ClusterIP      100.68.75.57     <none>        8081/TCP                     18m\r\nproxy-api      ClusterIP      100.68.41.34     <none>        8001/TCP                     18m\r\nproxy-public   LoadBalancer   100.68.224.171   <pending>     443:31018/TCP,80:30481/TCP   18m\r\n```\r\n\r\nTo circumvent this issue for now, I use the kube proxy:\r\n\r\n```\r\n\u276f kubectl proxy\r\nStarting to serve on 127.0.0.1:8001\r\n```\r\n\r\nand then we access the app on: http://127.0.0.1:8001/api/v1/namespaces/jhub/services/hub/proxy/.\r\n\r\n### What I've tried\r\n\r\nI've seen an existing ticket that says my browser doesn't support 3rd party cookies. I enabled it and it still doesn't work:\r\n\r\n![image](https://user-images.githubusercontent.com/7191678/80421366-35a71800-8891-11ea-88ed-1e2fc882de4f.png)\r\n\r\n### Your personal set up\r\n\r\n- OS: Mac OSX v10.15.4\r\n- Jhub version 1.1.0 \r\n- Chrome version: Version 81.0.4044.122 (Official Build) (64-bit)\r\n\r\n### Logdump (redundant healthcheck parts removed)\r\n\r\n```\r\nLoading /etc/jupyterhub/config/values.yaml\r\nLoading /etc/jupyterhub/secret/values.yaml\r\n[I 2020-04-27 20:42:56.411 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-04-27 20:42:56.412 JupyterHub app:2271] Using Authenticator: dummyauthenticator.dummyauthenticator.DummyAuthenticator\r\n[I 2020-04-27 20:42:56.412 JupyterHub app:2271] Using Spawner: kubespawner.spawner.KubeSpawner\r\n[I 2020-04-27 20:42:56.412 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-04-27 20:42:56.413 JupyterHub app:1394] Writing cookie_secret to /srv/jupyterhub/jupyterhub_cookie_secret\r\n[I 2020-04-27 20:42:56.424 alembic.runtime.migration migration:154] Context impl SQLiteImpl.\r\n[I 2020-04-27 20:42:56.425 alembic.runtime.migration migration:161] Will assume non-transactional DDL.\r\n[I 2020-04-27 20:42:56.432 alembic.runtime.migration migration:513] Running stamp_revision  -> 4dc2d5a8c53c\r\n[I 2020-04-27 20:42:56.441 alembic.runtime.migration migration:154] Context impl SQLiteImpl.\r\n[I 2020-04-27 20:42:56.441 alembic.runtime.migration migration:161] Will assume non-transactional DDL.\r\n[W 2020-04-27 20:42:56.505 JupyterHub app:1579] JupyterHub.hub_connect_port is deprecated as of 0.9. Use JupyterHub.hub_connect_url to fully specify the URL for connecting to the Hub.\r\n[W 2020-04-27 20:42:56.506 JupyterHub app:1624] No admin users, admin interface will be unavailable.\r\n[W 2020-04-27 20:42:56.506 JupyterHub app:1626] Add any administrative users to `c.Authenticator.admin_users` in config.\r\n[I 2020-04-27 20:42:56.506 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10\r\n[I 2020-04-27 20:42:56.547 JupyterHub app:2311] Initialized 0 spawners in 0.001 seconds\r\n[I 2020-04-27 20:42:56.548 JupyterHub app:2520] Not starting proxy\r\n[I 2020-04-27 20:42:56.551 JupyterHub app:2556] Hub API listening on http://0.0.0.0:8081/hub/\r\n[I 2020-04-27 20:42:56.551 JupyterHub app:2558] Private Hub API connect url http://100.68.75.57:8081/hub/\r\n[I 2020-04-27 20:42:56.552 JupyterHub app:2571] Starting managed service cull-idle\r\n[I 2020-04-27 20:42:56.552 JupyterHub service:335] Starting service 'cull-idle': ['python3', '/etc/jupyterhub/cull_idle_servers.py', '--url=http://127.0.0.1:8081/hub/api', '--timeout=3600', '--cull-every=600', '--concurrency=10']\r\n[I 2020-04-27 20:42:56.553 JupyterHub service:121] Spawning python3 /etc/jupyterhub/cull_idle_servers.py --url=http://127.0.0.1:8081/hub/api --timeout=3600 --cull-every=600 --concurrency=10\r\n[I 2020-04-27 20:42:56.558 JupyterHub proxy:320] Checking routes\r\n[I 2020-04-27 20:42:56.558 JupyterHub proxy:400] Adding default route for Hub: / => http://100.68.75.57:8081\r\n[I 2020-04-27 20:42:56.560 JupyterHub app:2631] JupyterHub is now running at http://100.68.224.171:443/\r\n[I 2020-04-27 20:42:56.671 JupyterHub log:174] 200 GET /hub/api/users (cull-idle@127.0.0.1) 10.36ms\r\n[I 2020-04-27 20:43:05.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.73ms\r\n[I 2020-04-27 20:43:15.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.61ms\r\n[I 2020-04-27 20:43:17.992 JupyterHub log:174] 302 GET / -> /hub/ (@172.18.148.232) 0.75ms\r\n[I 2020-04-27 20:43:18.086 JupyterHub log:174] 302 GET /hub/ -> /hub/login (@172.18.148.232) 0.60ms\r\n[I 2020-04-27 20:43:18.200 JupyterHub log:174] 200 GET /hub/login (@172.18.148.232) 19.27ms\r\n[I 2020-04-27 20:43:25.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.60ms\r\n[I 2020-04-27 20:43:26.598 JupyterHub base:707] User logged in: asdf\r\n[I 2020-04-27 20:43:26.617 JupyterHub reflector:199] watching for pods with label selector='component=singleuser-server' in namespace jhub\r\n[I 2020-04-27 20:43:26.807 JupyterHub reflector:199] watching for events with field selector='involvedObject.kind=Pod' in namespace jhub\r\n[I 2020-04-27 20:43:26.808 JupyterHub log:174] 302 POST /hub/login?next= -> /hub/spawn (asdf@172.18.148.232) 231.11ms\r\n[I 2020-04-27 20:43:26.917 JupyterHub log:174] 302 GET /hub/spawn -> /hub/login?next=%2Fhub%2Fspawn (@172.18.148.232) 5.75ms\r\n[I 2020-04-27 20:43:27.014 JupyterHub log:174] 200 GET /hub/login?next=%2Fhub%2Fspawn (@172.18.148.232) 1.55ms\r\n[I 2020-04-27 20:43:35.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.72ms\r\n[I 2020-04-27 20:43:45.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.60ms\r\n[I 2020-04-27 20:43:55.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.59ms\r\n...\r\n[I 2020-04-27 20:56:35.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.69ms\r\n[I 2020-04-27 20:56:45.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.67ms\r\n[I 2020-04-27 20:56:55.530 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.69ms\r\n[I 2020-04-27 20:56:56.563 JupyterHub proxy:320] Checking routes\r\n[I 2020-04-27 20:57:05.531 JupyterHub log:174] 200 GET /hub/health (@172.21.155.62) 0.69ms\r\n[I 2020-04-27 20:57:08.600 JupyterHub base:707] User logged in: asdf\r\n[I 2020-04-27 20:57:08.601 JupyterHub log:174] 302 POST /hub/login?next=%2Fhub%2Fspawn -> /hub/spawn (asdf@172.18.148.232) 5.60ms\r\n[I 2020-04-27 20:57:08.701 JupyterHub log:174] 302 GET /hub/spawn -> /hub/login?next=%2Fhub%2Fspawn (@172.18.148.232) 0.68ms\r\n[I 2020-04-27 20:57:08.795 JupyterHub log:174] 200 GET /hub/login?next=%2Fhub%2Fspawn (@172.18.148.232) 1.09ms\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3031", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3031/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3031/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3031/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3031", "id": 604587489, "node_id": "MDU6SXNzdWU2MDQ1ODc0ODk=", "number": 3031, "title": "Logout button without effect when editing a text file", "user": {"login": "z3ky", "id": 15694117, "node_id": "MDQ6VXNlcjE1Njk0MTE3", "avatar_url": "https://avatars2.githubusercontent.com/u/15694117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/z3ky", "html_url": "https://github.com/z3ky", "followers_url": "https://api.github.com/users/z3ky/followers", "following_url": "https://api.github.com/users/z3ky/following{/other_user}", "gists_url": "https://api.github.com/users/z3ky/gists{/gist_id}", "starred_url": "https://api.github.com/users/z3ky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/z3ky/subscriptions", "organizations_url": "https://api.github.com/users/z3ky/orgs", "repos_url": "https://api.github.com/users/z3ky/repos", "events_url": "https://api.github.com/users/z3ky/events{/privacy}", "received_events_url": "https://api.github.com/users/z3ky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-22T09:06:17Z", "updated_at": "2020-04-25T07:38:22Z", "closed_at": "2020-04-25T07:38:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug description\r\nThe logout button shows no effect, when a text file is open.\r\n\r\n#### Expected behaviour\r\nUser should be logged out.\r\n\r\n#### Actual behaviour\r\nPressing the logout button shows no effect.\r\n\r\n### How to reproduce\r\n1. Log in\r\n2. Go to New->Text File\r\n3. Push logout button\r\n### Your personal set up\r\nClean installation of JupyterHup 1.1.0 on Ubuntu 18.\r\nTested with Safari, Firefox and Chrome", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3024", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3024/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3024/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3024/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3024", "id": 601381932, "node_id": "MDU6SXNzdWU2MDEzODE5MzI=", "number": 3024, "title": "Rest API to create notebook under specific user?", "user": {"login": "bitcot", "id": 10070049, "node_id": "MDQ6VXNlcjEwMDcwMDQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/10070049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitcot", "html_url": "https://github.com/bitcot", "followers_url": "https://api.github.com/users/bitcot/followers", "following_url": "https://api.github.com/users/bitcot/following{/other_user}", "gists_url": "https://api.github.com/users/bitcot/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitcot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitcot/subscriptions", "organizations_url": "https://api.github.com/users/bitcot/orgs", "repos_url": "https://api.github.com/users/bitcot/repos", "events_url": "https://api.github.com/users/bitcot/events{/privacy}", "received_events_url": "https://api.github.com/users/bitcot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-16T19:35:28Z", "updated_at": "2020-04-16T19:47:12Z", "closed_at": "2020-04-16T19:47:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a JupyterHub REST API to create a notebook.ipynb file under specific user. Please advise.\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3023", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3023/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3023/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3023/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3023", "id": 601336923, "node_id": "MDU6SXNzdWU2MDEzMzY5MjM=", "number": 3023, "title": "Not able to embed the littlest JupyterHub in iframe on webapp?", "user": {"login": "bitcot", "id": 10070049, "node_id": "MDQ6VXNlcjEwMDcwMDQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/10070049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitcot", "html_url": "https://github.com/bitcot", "followers_url": "https://api.github.com/users/bitcot/followers", "following_url": "https://api.github.com/users/bitcot/following{/other_user}", "gists_url": "https://api.github.com/users/bitcot/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitcot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitcot/subscriptions", "organizations_url": "https://api.github.com/users/bitcot/orgs", "repos_url": "https://api.github.com/users/bitcot/repos", "events_url": "https://api.github.com/users/bitcot/events{/privacy}", "received_events_url": "https://api.github.com/users/bitcot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-16T18:50:05Z", "updated_at": "2020-04-16T19:21:12Z", "closed_at": "2020-04-16T19:21:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed the ltjh jupyterhub on AWS ec2 from the [link here](https://the-littlest-jupyterhub.readthedocs.io/en/latest/install/amazon.html), trying to embed on the iframe of the web app running on localhost:3000. Have updated the config jupyterhub_config.py \r\nwith the following settings:\r\n\r\n> c.JupyterHub.tornado_settings = { 'headers': {'Content-Security-Policy': \"frame-ancestors http://localhost:3000\"}}\r\n\r\n> c.NotebookApp.tornado_settings = { 'headers': { 'Content-Security-Policy': \"frame-ancestors  http://localhost:3000\"}}\r\n\r\n\r\n<!-- Tell us what you thought would happen. -->\r\nExpecting it to work on the iframe but it only opens the login page and opening the notebook url throws the following error \r\n\r\n> in a frame because an ancestor violates the following Content Security Policy directive: \"frame-ancestors 'self'\".\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3018", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3018/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3018/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3018/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3018", "id": 599177828, "node_id": "MDU6SXNzdWU1OTkxNzc4Mjg=", "number": 3018, "title": "[FATAL tini (6)] exec start-singleuser.sh --SingleUserNotebookApp.default_url=/lab failed: No such file or directory ...", "user": {"login": "nmvega", "id": 4001382, "node_id": "MDQ6VXNlcjQwMDEzODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmvega", "html_url": "https://github.com/nmvega", "followers_url": "https://api.github.com/users/nmvega/followers", "following_url": "https://api.github.com/users/nmvega/following{/other_user}", "gists_url": "https://api.github.com/users/nmvega/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmvega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmvega/subscriptions", "organizations_url": "https://api.github.com/users/nmvega/orgs", "repos_url": "https://api.github.com/users/nmvega/repos", "events_url": "https://api.github.com/users/nmvega/events{/privacy}", "received_events_url": "https://api.github.com/users/nmvega/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-13T22:39:57Z", "updated_at": "2020-06-02T22:15:46Z", "closed_at": "2020-06-02T22:15:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Friends:\r\n\r\nStarting with [jupyterhub-deploy-docker](https://github.com/jupyterhub/jupyterhub-deploy-docker) and with [docker-stacks](https://github.com/jupyter/docker-stacks), I created a `JupyterHub` and `JupyterLab Notebook` docker image for each, respectively. Two (qty. 2) separate images. Nothing exotic: I updated binary and libary versions, removed deprecated `config file` directives and used `Alpine` for the `Hub` and `Fedora-minimal` for the `Notebook`.\r\n\r\nIndependently, they both start and operate fine. The issue I'm facing is the immediate exit of the `JupyterLab Notebook` when spawned (DockerSpawned) by JupyterHub; though I think it's more of an `environment variable` and/or format issue with `ENTRYPOINT` and `CMD` more than anything else.\r\n\r\nAnyway, here's the exception:\r\n```\r\n# Line-break added for readability ... \r\n[FATAL tini (6)] exec start-singleuser.sh \\\r\n--SingleUserNotebookApp.default_url=/lab failed: No such file or directory\r\n```\r\nAnd even with a `fully qualified` path:\r\n```\r\n# Line-break added for readability ... \r\n[FATAL tini (6)] exec /usr/local/bin/start-singleuser.sh \\\r\n--SingleUserNotebookApp.default_url=/lab failed: No such file or directory\r\n```\r\n\r\nThe relevant `JupterHub` `.../jupyterhub_config.py` parameters are set as follows, keeping in mind again that I tried both `start-singleuser.sh` and it's FQ variant, `/usr/local/bin/start-singleuser.sh`\r\n```\r\nspawn_cmd = \"start-singleuser.sh --SingleUserNotebookApp.default_url=/lab\"\r\nspawn_cmd = os.environ.get('DOCKER_SPAWN_CMD', spawn_cmd)\r\nc.DockerSpawner.extra_create_kwargs.update({ 'command': spawn_cmd })\r\n\r\n# Set within the JupyterHub docker-compose.yml .env file ...\r\n# DOCKER_SPAWN_CMD=\"start-singleuser.sh --SingleUserNotebookApp.default_url=/lab\"\r\n# DOCKER_SPAWN_CMD=\"/usr/local/bin/start-singleuser.sh --SingleUserNotebookApp.default_url=/lab\"\r\n```\r\nAnd  for the `JupyterLab` / `Notebook` image, the `Dockerfile` `ENTRYPOINT` and `CMD` are these :\r\n```\r\nENTRYPOINT [\"tini\", \"-g\", \"--\"]\r\nCMD [\"start-singleuser.sh\", \"--SingleUserNotebookApp.default_url=/lab\"]\r\n```\r\nThe value for `CMD` is overridden by `JupyterHub` at **spawn-time**, but with the same value, so no change, really.\r\n\r\nDoes any know why the path cannot be found? Does it have to do with `tini` somehow?\r\nRemember that, when run manually, the `Notebook` does not experience this issue. Thank you in advance!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3017", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3017/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3017/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3017/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3017", "id": 596972716, "node_id": "MDU6SXNzdWU1OTY5NzI3MTY=", "number": 3017, "title": "running into socket hang up issues behind a proxy", "user": {"login": "kavemun", "id": 24541650, "node_id": "MDQ6VXNlcjI0NTQxNjUw", "avatar_url": "https://avatars2.githubusercontent.com/u/24541650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kavemun", "html_url": "https://github.com/kavemun", "followers_url": "https://api.github.com/users/kavemun/followers", "following_url": "https://api.github.com/users/kavemun/following{/other_user}", "gists_url": "https://api.github.com/users/kavemun/gists{/gist_id}", "starred_url": "https://api.github.com/users/kavemun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kavemun/subscriptions", "organizations_url": "https://api.github.com/users/kavemun/orgs", "repos_url": "https://api.github.com/users/kavemun/repos", "events_url": "https://api.github.com/users/kavemun/events{/privacy}", "received_events_url": "https://api.github.com/users/kavemun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-09T02:15:09Z", "updated_at": "2020-04-09T04:36:13Z", "closed_at": "2020-04-09T04:35:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\n\r\nI have been getting socket hang up errors when trying to conenct to a kernel.\r\nI am running jupyterhub within a container behind an nginx reverse proxy. \r\nIf i go through localhost, I am able to create a new notebook and connect to the kernel.\r\nbut if i go through the proxy, I get timed out and socket hang up error, while connecting to the kernel.\r\n\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\nUser should be able to open a notebook and connect to a kernel successfully\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what it actually happens. Tip: running JupyterHub in `--debug` mode (`jupyterhub --debug`) can also be helpful for troubleshooting. -->\r\n\r\nfrom the logs :-\r\n```\r\n[I 2020-04-09 01:55:02.732 JupyterHub log:174] 200 GET /hub/api/authorizations/token/[secret] (bob@127.0.0.1) 56.16ms\r\n[W 2020-04-09 01:55:02.735 SingleUserNotebookApp handlers:252] Replacing stale connection: a47a11d4-61c5-42bb-8292-c03b0c53b689:c6df03bf6ca74a8d80d41b7d2ae6881c\r\n01:56:02.668 [ConfigProxy] error: 503 GET /user/bob/api/kernels/a47a11d4-61c5-42bb-8292-c03b0c53b689/channels?session_id=c6df03bf6ca74a8d80d41b7d2ae6881c socket hang up\r\n[D 2020-04-09 01:56:02.673 JupyterHub pages:581] No template for 503\r\n\r\n```\r\n\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n1. Login to Jupyterhub\r\n2. Click on New Kernel, select any kernel\r\n3. Observed that the status says \"Connecting to Kernel\"\r\n4. After awhile it pop up appeared \"A connection to the notebook server could not be established. The notebook will continue trying to reconnect. Check your network connection or notebook server configuration.\"\r\n5. Check the logs and \"socket hang up\" \r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\nCentOS 7 \r\n <!-- [e.g. linux, OSX] -->\r\n - Version: jupyterhub 1.1.0\r\n <!-- e.g. jupyterhub --version. --->\r\n - Configuration:\r\n <!-- Be careful not to share any sensible information. --->\r\njupyterhub running within a docker container behind an nginx proxy. \r\ncommand : jupyterhub --port=8000 --debug", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3016", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3016/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3016/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3016/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3016", "id": 596709504, "node_id": "MDU6SXNzdWU1OTY3MDk1MDQ=", "number": 3016, "title": "Issue while installing anaconda 3.7 on Windows 10", "user": {"login": "sindv234", "id": 63362266, "node_id": "MDQ6VXNlcjYzMzYyMjY2", "avatar_url": "https://avatars1.githubusercontent.com/u/63362266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sindv234", "html_url": "https://github.com/sindv234", "followers_url": "https://api.github.com/users/sindv234/followers", "following_url": "https://api.github.com/users/sindv234/following{/other_user}", "gists_url": "https://api.github.com/users/sindv234/gists{/gist_id}", "starred_url": "https://api.github.com/users/sindv234/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sindv234/subscriptions", "organizations_url": "https://api.github.com/users/sindv234/orgs", "repos_url": "https://api.github.com/users/sindv234/repos", "events_url": "https://api.github.com/users/sindv234/events{/privacy}", "received_events_url": "https://api.github.com/users/sindv234/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-08T16:34:44Z", "updated_at": "2020-04-16T06:33:27Z", "closed_at": "2020-04-16T06:33:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I installed anaconda 3.7 on my windows 10 machine (64 - bit) downloading from https://anaconda.org/ but after installing am getting error while launching jupyter notebook.\r\nPS. I did run normally and Run as admisnistrator. I checked the path variable box and did without it also. \r\n\r\nTraceback (most recent call last):\r\nFile \"C:\\Users\\sindhuve\\Anaconda31\\lib\\site-packages\\notebook\\services\\sessions\\sessionmanager.py\", line 9, in \r\nimport sqlite3\r\nFile \"C:\\Users\\sindhuve\\Anaconda31\\lib\\sqlite3\\__init__.py\", line 23, in \r\nfrom sqlite3.dbapi2 import *\r\nFile \"C:\\Users\\sindhuve\\Anaconda31\\lib\\sqlite3\\dbapi2.py\", line 27, in \r\nfrom _sqlite3 import *\r\nImportError: DLL load failed: The specified procedure could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\nFile \"C:\\Users\\sindhuve\\Anaconda31\\Scripts\\jupyter-notebook-script.py\", line 6, in \r\nfrom notebook.notebookapp import main\r\nFile \"C:\\Users\\sindhuve\\Anaconda31\\lib\\site-packages\\notebook\\notebookapp.py\", line 83, in \r\nfrom .services.sessions.sessionmanager import SessionManager\r\nFile \"C:\\Users\\sindhuve\\Anaconda31\\lib\\site-packages\\notebook\\services\\sessions\\sessionmanager.py\", line 12, in \r\nfrom pysqlite2 import dbapi2 as sqlite3\r\nModuleNotFoundError: No module named 'pysqlite2'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3012", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3012/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3012/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3012/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3012", "id": 595250761, "node_id": "MDU6SXNzdWU1OTUyNTA3NjE=", "number": 3012, "title": "helm charts and k8s images not up-to-date?", "user": {"login": "adriendelsalle", "id": 27348745, "node_id": "MDQ6VXNlcjI3MzQ4NzQ1", "avatar_url": "https://avatars2.githubusercontent.com/u/27348745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adriendelsalle", "html_url": "https://github.com/adriendelsalle", "followers_url": "https://api.github.com/users/adriendelsalle/followers", "following_url": "https://api.github.com/users/adriendelsalle/following{/other_user}", "gists_url": "https://api.github.com/users/adriendelsalle/gists{/gist_id}", "starred_url": "https://api.github.com/users/adriendelsalle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adriendelsalle/subscriptions", "organizations_url": "https://api.github.com/users/adriendelsalle/orgs", "repos_url": "https://api.github.com/users/adriendelsalle/repos", "events_url": "https://api.github.com/users/adriendelsalle/events{/privacy}", "received_events_url": "https://api.github.com/users/adriendelsalle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-06T16:22:11Z", "updated_at": "2020-04-20T08:57:49Z", "closed_at": "2020-04-06T16:49:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks a lot for JupyterHub, you're doing a great job!\r\nIt's maybe more a question rather than a bug.\r\n\r\n### Description\r\nI'm expecting to get the latest version of JupyterHub using k8s and it seems that the latest stable version available is 0.8.2. I followed the zero-to-kubernetes tutorial using helm chart available [here](https://jupyterhub.github.io/helm-chart/).\r\n\r\n#### Helm charts\r\nDevelopment releases are up to 0.9.0-beta.4, consistent with images hosted on dockerhub such as [k8s-hub](jupyterhub/k8s-hub:0.9.0-beta.4) but **not** up-to-date.\r\n\r\n#### Dockerhub\r\nIn the same time, the jupyterhub/jupyterhub 1.2 tag is available.\r\n\r\nI can't figure out how it's possible since there is no tag on github and no trace of the build in the `build` tab of the [dockerhub page](https://hub.docker.com/r/jupyterhub/jupyterhub/builds).\r\n\r\n#### Conda/Pypi\r\npypi and conda repo seem consistent with github latest tag/release = v1.1.0\r\n\r\n### Expected\r\nConsistency between all the artefacts.\r\n\r\n---\r\nThank you for your advice!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3009", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3009/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3009/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3009/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3009", "id": 591331639, "node_id": "MDU6SXNzdWU1OTEzMzE2Mzk=", "number": 3009, "title": "login does not work all the time", "user": {"login": "rohitsanj", "id": 39169550, "node_id": "MDQ6VXNlcjM5MTY5NTUw", "avatar_url": "https://avatars2.githubusercontent.com/u/39169550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohitsanj", "html_url": "https://github.com/rohitsanj", "followers_url": "https://api.github.com/users/rohitsanj/followers", "following_url": "https://api.github.com/users/rohitsanj/following{/other_user}", "gists_url": "https://api.github.com/users/rohitsanj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohitsanj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohitsanj/subscriptions", "organizations_url": "https://api.github.com/users/rohitsanj/orgs", "repos_url": "https://api.github.com/users/rohitsanj/repos", "events_url": "https://api.github.com/users/rohitsanj/events{/privacy}", "received_events_url": "https://api.github.com/users/rohitsanj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-31T18:37:49Z", "updated_at": "2020-04-09T13:12:21Z", "closed_at": "2020-04-09T13:12:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for contributing. These HTML commments will not render in the issue, but you can delete them once you've read them if you prefer! -->\r\n\r\n### Bug description\r\n<!-- Use this section to clearly and concisely describe the bug. -->\r\nLogin (admin user) does not work all the time, I keep having to restart the service by running\r\n`sudo systemctl restart jupyterhub.service`\r\n\r\nand then magically it starts working again.\r\n#### Expected behaviour\r\n<!-- Tell us what you thought would happen. -->\r\nLogin working properly all the time\r\n\r\n#### Actual behaviour\r\n<!-- Tell us what it actually happens. Tip: running JupyterHub in `--debug` mode (`jupyterhub --debug`) can also be helpful for troubleshooting. -->\r\nWhen I login with accurate credentials (don't doubt me on this), it says, \"Invalid username or password\"\r\n\r\n### How to reproduce\r\n<!-- Use this section to describe the steps that a user would take to experience this bug. -->\r\n\r\n\r\n### Your personal set up\r\n<!-- Tell us a little about the system you're using. -->\r\n\r\n - OS:\r\nCentOS 7\r\n - Version:\r\n1.1.0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3008", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3008/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3008/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3008/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3008", "id": 591282153, "node_id": "MDU6SXNzdWU1OTEyODIxNTM=", "number": 3008, "title": "cull_idle_servers.py not working properly in Jupyterhub 0.8.1", "user": {"login": "srams2018", "id": 37077755, "node_id": "MDQ6VXNlcjM3MDc3NzU1", "avatar_url": "https://avatars2.githubusercontent.com/u/37077755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srams2018", "html_url": "https://github.com/srams2018", "followers_url": "https://api.github.com/users/srams2018/followers", "following_url": "https://api.github.com/users/srams2018/following{/other_user}", "gists_url": "https://api.github.com/users/srams2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/srams2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srams2018/subscriptions", "organizations_url": "https://api.github.com/users/srams2018/orgs", "repos_url": "https://api.github.com/users/srams2018/repos", "events_url": "https://api.github.com/users/srams2018/events{/privacy}", "received_events_url": "https://api.github.com/users/srams2018/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-31T17:21:46Z", "updated_at": "2020-04-01T15:21:12Z", "closed_at": "2020-04-01T15:21:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi All,\r\ncull_idle_servers.py(latest ) is not culling the idle pods which are running beyond 600s or even idle for more than 12 hours(which is idle).\r\nIam using Jupyterhub 0.8.1 so tried the cull script that comes with 0.8.1 but no luck. and see some weird behavior in culling the pods...like it shutdowns the pods but no consistency.so i tried the latest cull script but same issue.\r\nAlso could someone explain on inactivity here means..\r\nAs per the def.. i understood that no activity within jupyterhub is considered as inactivity.so to test idle i opened terminal(jupyterlab) inside the jupyterhub and listed the file system. after that i minimized the browser to maintain the idle state. with this test , i couldn't able to cull my pod after timeout. so correct me if anything misunderstood here.\r\n\r\nHere is my code in jupyterhub_config.py\r\n```python\r\n   c.JupyterHub.services = [\r\n        {\r\n            'name': 'cull-idle',\r\n            'admin': True,\r\n            'command': [sys.executable, 'cull_idle_servers.py', '--timeout=600'],\r\n        }\r\n    ]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3006", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3006/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3006/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3006/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3006", "id": 590974225, "node_id": "MDU6SXNzdWU1OTA5NzQyMjU=", "number": 3006, "title": "Jupyterhub dockerspawner traitles", "user": {"login": "chrlunden", "id": 43402174, "node_id": "MDQ6VXNlcjQzNDAyMTc0", "avatar_url": "https://avatars1.githubusercontent.com/u/43402174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrlunden", "html_url": "https://github.com/chrlunden", "followers_url": "https://api.github.com/users/chrlunden/followers", "following_url": "https://api.github.com/users/chrlunden/following{/other_user}", "gists_url": "https://api.github.com/users/chrlunden/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrlunden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrlunden/subscriptions", "organizations_url": "https://api.github.com/users/chrlunden/orgs", "repos_url": "https://api.github.com/users/chrlunden/repos", "events_url": "https://api.github.com/users/chrlunden/events{/privacy}", "received_events_url": "https://api.github.com/users/chrlunden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-31T10:12:43Z", "updated_at": "2020-04-16T07:13:39Z", "closed_at": "2020-04-16T07:13:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have a docker-compose setup with the following setup:\r\n\r\n./\r\n+-- .env\r\n+-- docker-compose.yml\r\n+-- jupyterhub/\r\n|   +-- Dockerfile\r\n|   +-- jupyter-config.py\r\n+-- jupyterlab/\r\n|   +-- Dockerfile\r\n+-- reverse-proxy/\r\n    +-- traefik.toml\r\n\r\nI follow the recipe from opendreamkit.org and manage to get the system up and running. However, when I run the command docker-compose down and up again I get the following error:\r\n\r\njupyterhub_hub   | [E 2020-03-31 08:28:38.108 JupyterHub user:477] Unhandled error starting tester1's server: The 'ip' trait of a Server instance must be a unicode string, but a value of None <class 'NoneType'> was specified.\r\n\r\nI suspect it has something to do with the following Message I get when I build the system: \r\n\r\nWARNING: The DOCKER_NETWORK_NAME variable is not set. Defaulting to a blank string.\r\n\r\nBut I was wondering if anyone could provide with me a workaround or explanation to why this error occur? \r\n\r\nThanks in advance for any help in the matter(during these Corona times)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3004", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3004/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3004/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3004/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3004", "id": 589383628, "node_id": "MDU6SXNzdWU1ODkzODM2Mjg=", "number": 3004, "title": "allow specifying location for jupyter-proxy.pid", "user": {"login": "atpage", "id": 4260357, "node_id": "MDQ6VXNlcjQyNjAzNTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/4260357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atpage", "html_url": "https://github.com/atpage", "followers_url": "https://api.github.com/users/atpage/followers", "following_url": "https://api.github.com/users/atpage/following{/other_user}", "gists_url": "https://api.github.com/users/atpage/gists{/gist_id}", "starred_url": "https://api.github.com/users/atpage/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atpage/subscriptions", "organizations_url": "https://api.github.com/users/atpage/orgs", "repos_url": "https://api.github.com/users/atpage/repos", "events_url": "https://api.github.com/users/atpage/events{/privacy}", "received_events_url": "https://api.github.com/users/atpage/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-27T20:00:31Z", "updated_at": "2020-04-16T07:24:40Z", "closed_at": "2020-04-16T07:24:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Proposed change\r\n\r\n`jupyterhub_config.py` currently supports specifying a PID file location for the `jupyterhub` binary, using the `c.JupyterHub.pid_file` setting.\r\n\r\nHowever, there is no option to give a PID file location for the `configurable-http-proxy`, which writes its PID to `/jupyterhub-proxy.pid`.\r\n\r\nI propose adding a setting such as `c.JupyterHub.proxy_pid_file`, which would be passed to the proxy on instantiation.\r\n\r\nThis idea is based on [this bug report](https://github.com/jupyterhub/jupyterhub/issues/2859), which was actually caused by a misunderstanding of the existing setting (which works correctly as far as I can tell).\r\n\r\n### How much effort will adding it take?\r\n\r\nI think this would be a trivial addition for someone who knows the codebase.  It looks like the proxy already has a parameter for PID file location.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3003", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3003/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3003/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3003/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3003", "id": 589087253, "node_id": "MDU6SXNzdWU1ODkwODcyNTM=", "number": 3003, "title": "No services dropdown on the admin page", "user": {"login": "jtpio", "id": 591645, "node_id": "MDQ6VXNlcjU5MTY0NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/591645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtpio", "html_url": "https://github.com/jtpio", "followers_url": "https://api.github.com/users/jtpio/followers", "following_url": "https://api.github.com/users/jtpio/following{/other_user}", "gists_url": "https://api.github.com/users/jtpio/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtpio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtpio/subscriptions", "organizations_url": "https://api.github.com/users/jtpio/orgs", "repos_url": "https://api.github.com/users/jtpio/repos", "events_url": "https://api.github.com/users/jtpio/events{/privacy}", "received_events_url": "https://api.github.com/users/jtpio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589223, "node_id": "MDU6TGFiZWwxMDY1ODkyMjM=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "ff9999", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-27T12:04:58Z", "updated_at": "2020-08-06T21:13:37Z", "closed_at": "2020-08-06T21:13:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Bug description\r\n\r\n#### Expected behaviour\r\n\r\nOn the admin page, clicking on `Services` in the nav bar should show the list of services.\r\n\r\n#### Actual behaviour\r\n\r\n![services-admin-page](https://user-images.githubusercontent.com/591645/77754009-d0120280-702a-11ea-958d-59fb399ae651.gif)\r\n\r\nIt might be because the click event on the `Services` item in the navigation bar is being intercepted.\r\n\r\n### How to reproduce\r\n\r\n- Have one JupyterHub managed service running\r\n- Go to the `Admin` page\r\n- Click on `Services`\r\n\r\n### Your personal set up\r\n\r\n- OS: Ubuntu 19.10\r\n- Version: JupyterHub 1.1.0\r\n- Browser: Latest Firefox and Chromium \r\n- Configuration: Hub running with one managed service locally", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3002", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3002/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3002/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3002/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3002", "id": 588826946, "node_id": "MDU6SXNzdWU1ODg4MjY5NDY=", "number": 3002, "title": "Can't see Admin option when logged in as an admin user. JupyterHub configured to use /ab and OAuth via GitLab ...", "user": {"login": "nmvega", "id": 4001382, "node_id": "MDQ6VXNlcjQwMDEzODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmvega", "html_url": "https://github.com/nmvega", "followers_url": "https://api.github.com/users/nmvega/followers", "following_url": "https://api.github.com/users/nmvega/following{/other_user}", "gists_url": "https://api.github.com/users/nmvega/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmvega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmvega/subscriptions", "organizations_url": "https://api.github.com/users/nmvega/orgs", "repos_url": "https://api.github.com/users/nmvega/repos", "events_url": "https://api.github.com/users/nmvega/events{/privacy}", "received_events_url": "https://api.github.com/users/nmvega/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-27T01:34:46Z", "updated_at": "2020-04-16T07:27:15Z", "closed_at": "2020-04-16T07:27:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Friends\r\n- I set up `jupyterhub` to authenticate via my personal `GitLab`. That works well.\r\n- I also set it up to launch `JupyterLab -- /lab` versus the default of `JupyterHub -- /hub`.\r\n- And finally, I allow user `jdoe` to be an Administrator via `c.Authenticator.admin_users = set('jdoe',)`.\r\n\r\nSo when I log in, I'm directed to: `https://example.com:8443/user/jdoe/lab/`, which works for the `Notebook`.\r\n\r\nI tried modifying the above URL to use variations with `/hub/admin` in it (which is the `admin` URL scheme), but I can't get it right.\r\n\r\nI also tried `https://example.com:8443/user/jdoe/tree`, where I can see `Logout` and `Control Panel` options, but not an `Admin` option.\r\n\r\nWhat is the correct URL, because I have to manually enter it, then bookmark it? Somehow I don't think it's available anywhere because of my setup.\r\n\r\nP.S.: Note that I tried this URL while logged in as `jdoe` but it yields `403 Forbidden`: `https://example.com:8443/hub/admin`. I've tried other variations, too. Some come up as `Not Found`. I'm unsure how to get there, or if using either `/lab` and/or `OAuth` is preventing something from working (which is why I mentioned both above).\r\n\r\nThank you in advance! =:)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3000", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3000/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3000/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/3000/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/3000", "id": 588080894, "node_id": "MDU6SXNzdWU1ODgwODA4OTQ=", "number": 3000, "title": "Deploying Jupyterhub on AWS EKS", "user": {"login": "vagarwal77", "id": 46463536, "node_id": "MDQ6VXNlcjQ2NDYzNTM2", "avatar_url": "https://avatars2.githubusercontent.com/u/46463536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vagarwal77", "html_url": "https://github.com/vagarwal77", "followers_url": "https://api.github.com/users/vagarwal77/followers", "following_url": "https://api.github.com/users/vagarwal77/following{/other_user}", "gists_url": "https://api.github.com/users/vagarwal77/gists{/gist_id}", "starred_url": "https://api.github.com/users/vagarwal77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vagarwal77/subscriptions", "organizations_url": "https://api.github.com/users/vagarwal77/orgs", "repos_url": "https://api.github.com/users/vagarwal77/repos", "events_url": "https://api.github.com/users/vagarwal77/events{/privacy}", "received_events_url": "https://api.github.com/users/vagarwal77/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-26T00:57:42Z", "updated_at": "2020-03-27T12:42:47Z", "closed_at": "2020-03-27T12:42:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have spend around a week to deploy JupyterHub on AWS EKS Kubernetes and we are getting one form or another issue. \r\nI have tried to deployed exact below Docker file and also various combination of pip install of jupyterhub and all without much success. \r\nhttps://github.com/jupyterhub/jupyterhub/blob/master/Dockerfile\r\n\r\nI think i am missing some thing very basic which lots of folks many have already acheived... \r\n\r\nPlease suggest the steps to deploy JupyterHob on AWS EKS using Docker file with step by step process... I would really appreciate it!!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2999", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2999/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2999/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2999/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2999", "id": 587983865, "node_id": "MDU6SXNzdWU1ODc5ODM4NjU=", "number": 2999, "title": "IAM role not working for S3 storage of notebook code", "user": {"login": "nsshah1288", "id": 61845317, "node_id": "MDQ6VXNlcjYxODQ1MzE3", "avatar_url": "https://avatars0.githubusercontent.com/u/61845317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsshah1288", "html_url": "https://github.com/nsshah1288", "followers_url": "https://api.github.com/users/nsshah1288/followers", "following_url": "https://api.github.com/users/nsshah1288/following{/other_user}", "gists_url": "https://api.github.com/users/nsshah1288/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsshah1288/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsshah1288/subscriptions", "organizations_url": "https://api.github.com/users/nsshah1288/orgs", "repos_url": "https://api.github.com/users/nsshah1288/repos", "events_url": "https://api.github.com/users/nsshah1288/events{/privacy}", "received_events_url": "https://api.github.com/users/nsshah1288/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-25T20:52:32Z", "updated_at": "2020-04-06T15:30:51Z", "closed_at": "2020-03-27T12:55:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nIn documentation for https://github.com/danielfrg/s3contents/ it says:\r\n_It is also possible to use IAM Role-based access to the S3 bucket from an Amazon EC2 instance; to do that, just leave access_key_id and secret_access_key set to their default values (None), and ensure that the EC2 instance has an IAM role which provides sufficient permissions for the bucket and the operations necessary._\r\n\r\nI have done this successfully once by setting values like this in jupyter_notebook_config.py:\r\n```\r\nfrom s3contents import S3ContentsManager\r\nimport os\r\nc = get_config()\r\n \r\n# Tell Jupyter to use S3ContentsManager for all storage.\r\nc.NotebookApp.contents_manager_class = S3ContentsManager\r\nc.NotebookApp.ip = '*'\r\n# use S3 Contents Manager to store files\r\nc.S3ContentsManager.access_key_id = None\r\nc.S3ContentsManager.secret_access_key = None\r\nc.S3ContentsManager.bucket = \"somebucket\"\r\n```\r\nAnd then I deployed the jupyter notebook in EKS, and for the IAM role attached to the worker EC2 nodes, I attached the 'S3FullAccess' policy. Everything worked good.\r\n\r\nNow, I am trying to deploy JupyterHub using this: https://zero-to-jupyterhub.readthedocs.io/en/stable/\r\n\r\nI did a similar thing, where I had another jupyter_notebook_config.py, and I included the same info as above (access key and secret key set to 'None'). I built the docker image and pushed it to ECR.\r\n\r\nI then ran a command like this:\r\n`helm upgrade $RELEASE jupyterhub/jupyterhub --namespace $NAMESPACE --version=0.8.2 --values config.yaml --debug`\r\nWhere the config.yaml looks like this:\r\n```\r\nproxy:\r\n  secretToken: \"297df077562a5116d995d5bbaebbb91bb042f5f339022462d5acc5d0d5e5dda1\"\r\nsingleuser:\r\n  image:\r\n    name: 102184001161.dkr.ecr.us-east-1.amazonaws.com/bulk_jupyter\r\n    pullPolicy: \"Always\"\r\n    tag: basenotebooknothing\r\n```\r\n\r\n(The basenotebooknothing image is what I had built and pushed to ECR, with the access key and secret key set to 'None')\r\nThe new notebook image cannot be spawned and I get an error like this:\r\n\r\nFile \"/opt/conda/bin/jupyterhub-singleuser\", line 10, in\r\nsys.exit(main())\r\nFile \"/opt/conda/lib/python3.7/site-packages/jupyterhub/singleuser.py\", line 660, in main\r\nreturn SingleUserNotebookApp.launch_instance(argv)\r\nFile \"/opt/conda/lib/python3.7/site-packages/jupyter_core/application.py\", line 270, in launch_instance\r\nreturn super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/traitlets/config/application.py\", line 663, in launch_instance\r\napp.initialize(argv)\r\nFile \"/opt/conda/lib/python3.7/site-packages/jupyterhub/singleuser.py\", line 558, in initialize\r\nreturn super().initialize(argv)\r\nFile \"\", line 2, in initialize\r\nFile \"/opt/conda/lib/python3.7/site-packages/traitlets/config/application.py\", line 87, in catch_config_error\r\nreturn method(app, *args, **kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/notebook/notebookapp.py\", line 1766, in initialize\r\nself.init_configurables()\r\nFile \"/opt/conda/lib/python3.7/site-packages/notebook/notebookapp.py\", line 1385, in init_configurables\r\nlog=self.log,\r\nFile \"/opt/conda/lib/python3.7/site-packages/s3contents/s3manager.py\", line 61, in init\r\nboto3_session=self.boto3_session)\r\nFile \"/opt/conda/lib/python3.7/site-packages/s3contents/s3_fs.py\", line 94, in init\r\nself.init()\r\nFile \"/opt/conda/lib/python3.7/site-packages/s3contents/s3_fs.py\", line 98, in init\r\nself.mkdir(\"\")\r\nFile \"/opt/conda/lib/python3.7/site-packages/s3contents/s3_fs.py\", line 166, in mkdir\r\nself.fs.touch(path_)\r\nFile \"/opt/conda/lib/python3.7/site-packages/s3fs/core.py\", line 448, in touch\r\nself._call_s3(self.s3.put_object, kwargs, Bucket=bucket, Key=key)\r\nFile \"/opt/conda/lib/python3.7/site-packages/s3fs/core.py\", line 184, in _call_s3\r\nreturn method(**additional_kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/client.py\", line 316, in _api_call\r\nreturn self._make_api_call(operation_name, kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/client.py\", line 613, in _make_api_call\r\noperation_model, request_dict, request_context)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/client.py\", line 632, in _make_request\r\nreturn self._endpoint.make_request(operation_model, request_dict)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/endpoint.py\", line 102, in make_request\r\nreturn self._send_request(request_dict, operation_model)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/endpoint.py\", line 132, in _send_request\r\nrequest = self.create_request(request_dict, operation_model)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/endpoint.py\", line 116, in create_request\r\noperation_name=operation_model.name)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/hooks.py\", line 356, in emit\r\nreturn self._emitter.emit(aliased_event_name, **kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/hooks.py\", line 228, in emit\r\nreturn self._emit(event_name, kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/hooks.py\", line 211, in _emit\r\nresponse = handler(**kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/signers.py\", line 90, in handler\r\nreturn self.sign(operation_name, request)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/signers.py\", line 160, in sign\r\nauth.add_auth(request)\r\nFile \"/opt/conda/lib/python3.7/site-packages/botocore/auth.py\", line 357, in add_auth\r\nraise NoCredentialsError\r\nbotocore.exceptions.NoCredentialsError: Unable to locate credentials\r\n\r\nI have S3FullAccess policy attached to the IAM role that is attached to my worker EC2 instance. Do you know why I am getting the above error? Thanks\r\n\r\nI should mention that when I hardcode in the access key, secret key, and session token in my jupyter_notebook_config.py, the s3 storage works. I don't want to do this however -- I want to use an IAM role.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2998", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2998/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2998/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2998/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2998", "id": 586849474, "node_id": "MDU6SXNzdWU1ODY4NDk0NzQ=", "number": 2998, "title": "JupyterHub connect to existing [voila] server", "user": {"login": "sntgluca", "id": 10941257, "node_id": "MDQ6VXNlcjEwOTQxMjU3", "avatar_url": "https://avatars1.githubusercontent.com/u/10941257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sntgluca", "html_url": "https://github.com/sntgluca", "followers_url": "https://api.github.com/users/sntgluca/followers", "following_url": "https://api.github.com/users/sntgluca/following{/other_user}", "gists_url": "https://api.github.com/users/sntgluca/gists{/gist_id}", "starred_url": "https://api.github.com/users/sntgluca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sntgluca/subscriptions", "organizations_url": "https://api.github.com/users/sntgluca/orgs", "repos_url": "https://api.github.com/users/sntgluca/repos", "events_url": "https://api.github.com/users/sntgluca/events{/privacy}", "received_events_url": "https://api.github.com/users/sntgluca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-24T10:21:39Z", "updated_at": "2020-05-31T07:46:53Z", "closed_at": "2020-05-31T07:46:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\n\r\nI am exploring the various possibilities to authenticate/authorise connections to a voila dashboard.\r\nOne scenario is having a dashboard up and running, on a separate process, with specified user privileges, and allow a selection of users to connect to it.\r\n\r\nI am looking for the simplest configuration to make JupyterHub act only as a proxy, without starting a new server, and upon authentication connect directly to the dashboard server. Any suggestion?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2996", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2996/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2996/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2996/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2996", "id": 586316708, "node_id": "MDU6SXNzdWU1ODYzMTY3MDg=", "number": 2996, "title": "Update Issue Template for Technical Support", "user": {"login": "willingc", "id": 2680980, "node_id": "MDQ6VXNlcjI2ODA5ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2680980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willingc", "html_url": "https://github.com/willingc", "followers_url": "https://api.github.com/users/willingc/followers", "following_url": "https://api.github.com/users/willingc/following{/other_user}", "gists_url": "https://api.github.com/users/willingc/gists{/gist_id}", "starred_url": "https://api.github.com/users/willingc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willingc/subscriptions", "organizations_url": "https://api.github.com/users/willingc/orgs", "repos_url": "https://api.github.com/users/willingc/repos", "events_url": "https://api.github.com/users/willingc/events{/privacy}", "received_events_url": "https://api.github.com/users/willingc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}, {"id": 373221162, "node_id": "MDU6TGFiZWwzNzMyMjExNjI=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/user%20experience", "name": "user experience", "color": "ff9933", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-03-23T15:56:04Z", "updated_at": "2020-04-08T15:08:21Z", "closed_at": "2020-04-08T07:46:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When triaging issues this weekend, I was thinking that we may want to start encouraging those seeking tech support (installation help; configuration troubleshooting) to post on Discourse. This increases the likelihood that the user gets greater visibility of their question by other JupyterHub users.\r\n\r\nThis is our existing template: \r\nhttps://github.com/jupyterhub/jupyterhub/blob/master/.github/ISSUE_TEMPLATE/installation-and-configuration-issues.md\r\n\r\nI used @betatim's suggested text to respond to a few issues this weekend.\r\n\r\ncc/ @GeorgianaElena @choldgraf @betatim  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2994", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2994/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2994/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2994/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2994", "id": 586204304, "node_id": "MDU6SXNzdWU1ODYyMDQzMDQ=", "number": 2994, "title": "can the jupyterhub run correctly if I don't use foreign key in mysql DB", "user": {"login": "pokerc", "id": 12361959, "node_id": "MDQ6VXNlcjEyMzYxOTU5", "avatar_url": "https://avatars0.githubusercontent.com/u/12361959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pokerc", "html_url": "https://github.com/pokerc", "followers_url": "https://api.github.com/users/pokerc/followers", "following_url": "https://api.github.com/users/pokerc/following{/other_user}", "gists_url": "https://api.github.com/users/pokerc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pokerc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pokerc/subscriptions", "organizations_url": "https://api.github.com/users/pokerc/orgs", "repos_url": "https://api.github.com/users/pokerc/repos", "events_url": "https://api.github.com/users/pokerc/events{/privacy}", "received_events_url": "https://api.github.com/users/pokerc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-23T13:22:07Z", "updated_at": "2020-04-16T20:09:59Z", "closed_at": "2020-04-16T20:09:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!---\r\nIf you are reading this message, you have probably already searched the existing\r\nGitHub issues for JupyterHub. If you haven't tried a search, we encourage you to do so.\r\n\r\nIf you are unsure where to ask your question (Jupyter, JupyterHub, JupyterLab, etc.),\r\nplease ask on our [Discourse Q&A channel](https://discourse.jupyter.org/c/questions).\r\n\r\nIf you have a quick question about JupyterHub installation or configuratation, you\r\nmay ask on the [JupyterHub gitter channel](https://gitter.im/jupyterhub/jupyterhub).\r\n\r\n:sunny: Please be patient. We are volunteers and will address your question when we are able. :sunny:\r\n\r\nIf after trying the above steps, you still have an in-depth installation or\r\nconfiguration question, such as a possible bug, please file an issue below and include\r\nany relevant details.\r\n--->\r\n\r\nHi, here is my problem, the mysql server that i use don't allow me to add foreign key in any table \r\nin the database. So, I wonder if my jupyterhub app can run sustainablly on the condition that i create the tables without foreign key constraint ? In an other word, is there any function or code\r\nthat ensure the constraint of the data even without the foreign key in the DB ? \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2993", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2993/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2993/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2993/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2993", "id": 585755841, "node_id": "MDU6SXNzdWU1ODU3NTU4NDE=", "number": 2993, "title": "Failed build of docs in CI", "user": {"login": "willingc", "id": 2680980, "node_id": "MDQ6VXNlcjI2ODA5ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2680980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willingc", "html_url": "https://github.com/willingc", "followers_url": "https://api.github.com/users/willingc/followers", "following_url": "https://api.github.com/users/willingc/following{/other_user}", "gists_url": "https://api.github.com/users/willingc/gists{/gist_id}", "starred_url": "https://api.github.com/users/willingc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willingc/subscriptions", "organizations_url": "https://api.github.com/users/willingc/orgs", "repos_url": "https://api.github.com/users/willingc/repos", "events_url": "https://api.github.com/users/willingc/events{/privacy}", "received_events_url": "https://api.github.com/users/willingc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589223, "node_id": "MDU6TGFiZWwxMDY1ODkyMjM=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "ff9999", "default": true, "description": null}, {"id": 356551766, "node_id": "MDU6TGFiZWwzNTY1NTE3NjY=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/documentation", "name": "documentation", "color": "fef2c0", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-22T16:22:13Z", "updated_at": "2020-03-23T15:49:26Z", "closed_at": "2020-03-23T15:49:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n#!/bin/bash -eo pipefail\r\ncd docs\r\nmake html\r\nnpm install && touch node_modules\r\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\r\nnpm notice created a lockfile as package-lock.json. You should commit this file.\r\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.1.2 (node_modules/chokidar/node_modules/fsevents):\r\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\r\nnpm WARN jupyterhub-docs-build@0.8.0 No repository field.\r\n\r\nadded 216 packages from 514 contributors and audited 325 packages in 4.188s\r\n\r\n14 packages are looking for funding\r\n  run `npm fund` for details\r\n\r\nfound 2 low severity vulnerabilities\r\n  run `npm audit fix` to fix them, or `npm audit` for details\r\nnpm run rest-api\r\n\r\n> jupyterhub-docs-build@0.8.0 rest-api /home/circleci/project/docs\r\n> bootprint openapi ./rest-api.yml source/_static/rest-api\r\n\r\n[\r\n  'source/_static/rest-api/index.html',\r\n  'source/_static/rest-api/main.css',\r\n  'source/_static/rest-api/main.css.map'\r\n]\r\nsphinx-build -b html -d build/doctrees  \"-W\" source build/html\r\nRunning Sphinx v2.4.4\r\nAdding copy buttons to code blocks...\r\nmaking output directory... done\r\n/home/circleci/.local/lib/python3.6/site-packages/sphinx/util/compat.py:32: RemovedInSphinx30Warning: The config variable \"source_parsers\" is deprecated. Please update your extension for the parser and remove the setting.\r\n  RemovedInSphinx30Warning)\r\n/home/circleci/.local/lib/python3.6/site-packages/sphinx/util/compat.py:36: RemovedInSphinx30Warning: app.add_source_parser() does not support suffix argument. Use app.add_source_suffix() instead.\r\n  app.add_source_parser(suffix, parser)\r\n\r\nTheme error:\r\nno theme named 'pandas_sphinx_theme' found (missing theme.conf?)\r\nMakefile:64: recipe for target 'html' failed\r\nmake: *** [html] Error 2\r\n```\r\n\r\nFYI @choldgraf @betatim", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2992", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2992/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2992/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2992/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2992", "id": 585362432, "node_id": "MDU6SXNzdWU1ODUzNjI0MzI=", "number": 2992, "title": "Specifying custom location for npm packages to jupyterhub ...", "user": {"login": "nmvega", "id": 4001382, "node_id": "MDQ6VXNlcjQwMDEzODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmvega", "html_url": "https://github.com/nmvega", "followers_url": "https://api.github.com/users/nmvega/followers", "following_url": "https://api.github.com/users/nmvega/following{/other_user}", "gists_url": "https://api.github.com/users/nmvega/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmvega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmvega/subscriptions", "organizations_url": "https://api.github.com/users/nmvega/orgs", "repos_url": "https://api.github.com/users/nmvega/repos", "events_url": "https://api.github.com/users/nmvega/events{/privacy}", "received_events_url": "https://api.github.com/users/nmvega/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-20T22:39:55Z", "updated_at": "2020-04-16T07:44:23Z", "closed_at": "2020-04-16T07:44:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Friends:\r\n\r\nI'm trying to install and configure `jupyterhub` and it's `python` and `npm` dependencies in one wholly-contained directory -- `/opt/jupyterhub.d/` -- like this:\r\n\r\n```\r\n(pyvenv.d) root# pwd\r\n/opt/jupyterhub.d/\r\n\r\n(pyvenv.d) root# ls -la\r\ndrwxr-xr-x  4 root root   4096 Mar 20 18:04 .\r\ndrwxr-xr-x  5 root root   4096 Mar 20 17:29 ..\r\n-rw-r--r--  1 root root 102400 Mar 20 17:58 jupyterhub.sqlite/\r\n-rw-------  1 root root     65 Mar 20 17:58 jupyterhub_cookie_secret/\r\ndrwxr-xr-x 48 root root   4096 Mar 20 17:48 node_modules/  <--- Location of local npm packages.\r\n-rw-r--r--  1 root root  13828 Mar 20 17:48 package-lock.json/\r\n-rw-r--r--  1 root root    273 Mar 20 17:48 package.json/\r\ndrwxr-xr-x  6 root root   4096 Mar 20 17:39 pyvenv.d/ <--- Python3 venv is activated from here.\r\n```\r\nThe `jupyterhub(1)` command therefore needs to know that the `npm` package(s) it relies on are located here: `/opt/jupyterhub.d/node_modules/ ...` (and not at the `global` location).\r\n\r\nAs such, I pre-pended `/opt/jupyterhub.d/node_modules/configurable-http-proxy/bin/` to my `PATH` environment variable, which allowed `jupyterhub(1)` to successfully launch (whereas before doing that, I got a `FileNotFoundError: [Errno 2] No such file or directory` error).\r\n\r\nI'm not a `node / npm` expert, but the above doesn't feel like the correct way of doing this; since it adds just that one binary path, as is silent on specifying anything about `library` paths (e.g. in `LD_LIBRARY_PATH`), etc.\r\n\r\nWhat is the correct way to do this?\r\n\r\nI'll incorporate the solution into a wrapper script that (1) `activates the python virtual environment` **and** (2) `points jupyterhub(1) and friends to the above npm package directory`.\r\n\r\nThank you in advance!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2990", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2990/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2990/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2990/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2990", "id": 584306434, "node_id": "MDU6SXNzdWU1ODQzMDY0MzQ=", "number": 2990, "title": "Working fine but 500 internal server error using jupyter lab extension manager ", "user": {"login": "camelator", "id": 4933992, "node_id": "MDQ6VXNlcjQ5MzM5OTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4933992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelator", "html_url": "https://github.com/camelator", "followers_url": "https://api.github.com/users/camelator/followers", "following_url": "https://api.github.com/users/camelator/following{/other_user}", "gists_url": "https://api.github.com/users/camelator/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelator/subscriptions", "organizations_url": "https://api.github.com/users/camelator/orgs", "repos_url": "https://api.github.com/users/camelator/repos", "events_url": "https://api.github.com/users/camelator/events{/privacy}", "received_events_url": "https://api.github.com/users/camelator/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-19T10:22:04Z", "updated_at": "2020-06-02T22:03:19Z", "closed_at": "2020-06-02T22:03:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nfirstly many thanks to the jupyter team.\r\nI successfully build a docker image including jupyterhub, jupyter lab for a small  ARM server at home.\r\nLogging, using jupyterlab work fine.\r\nBut I don't know why, I have no success using jupyter lab Extension manager\r\nExtension Manager works fine refreshing the extension list\r\nbut I Have a 500 internal server error by installing new extension. \r\nI am new with jupyterhub and lab so I don't really know how to debug, etc...\r\nI lauched jupyerhub with --debug option and here is the file content.\r\n\r\n\r\nWhat can be the issue? How improve debug level to provide more information if requested?\r\nMany thanks\r\n\r\n11:11:08.529 [ConfigProxy] ^[[32minfo^[[39m: Proxying http://*:8000 to (no default)\r\n11:11:08.543 [ConfigProxy] ^[[32minfo^[[39m: Proxy API at http://127.0.0.1:8001/api/routes\r\n11:11:08.979 [ConfigProxy] ^[[32minfo^[[39m: 200 GET /api/routes\r\n11:11:08.995 [ConfigProxy] ^[[32minfo^[[39m: 200 GET /api/routes\r\n11:11:09.015 [ConfigProxy] ^[[32minfo^[[39m: Adding route / -> http://jupyterhub:8081\r\n11:11:09.019 [ConfigProxy] ^[[32minfo^[[39m: Route added / -> http://jupyterhub:8081\r\n11:11:09.023 [ConfigProxy] ^[[32minfo^[[39m: 201 POST /api/routes/\r\n11:12:46.606 [ConfigProxy] ^[[32minfo^[[39m: Adding route /user/cvotava -> http://127.0.0.1:36815\r\n11:12:46.637 [ConfigProxy] ^[[32minfo^[[39m: Route added /user/cvotava -> http://127.0.0.1:36815\r\n11:12:46.639 [ConfigProxy] ^[[32minfo^[[39m: 201 POST /api/routes/user/cvotava\r\n-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^H|^H/^H-^H\\^$\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2989", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2989/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2989/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2989/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2989", "id": 582923056, "node_id": "MDU6SXNzdWU1ODI5MjMwNTY=", "number": 2989, "title": "Not able to log in as admin in jupyterhub Docker image", "user": {"login": "SaiAparna1", "id": 36157187, "node_id": "MDQ6VXNlcjM2MTU3MTg3", "avatar_url": "https://avatars2.githubusercontent.com/u/36157187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SaiAparna1", "html_url": "https://github.com/SaiAparna1", "followers_url": "https://api.github.com/users/SaiAparna1/followers", "following_url": "https://api.github.com/users/SaiAparna1/following{/other_user}", "gists_url": "https://api.github.com/users/SaiAparna1/gists{/gist_id}", "starred_url": "https://api.github.com/users/SaiAparna1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SaiAparna1/subscriptions", "organizations_url": "https://api.github.com/users/SaiAparna1/orgs", "repos_url": "https://api.github.com/users/SaiAparna1/repos", "events_url": "https://api.github.com/users/SaiAparna1/events{/privacy}", "received_events_url": "https://api.github.com/users/SaiAparna1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-17T10:49:28Z", "updated_at": "2020-06-02T22:04:06Z", "closed_at": "2020-06-02T22:04:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "What are the default admin username and password for jupyterhub image?\r\nI thought that is 'root' ( which is mentioned in dockerfile of image) and I am also don't know the password for that user. So, I have changed the password by using command passwd as like what we do in Linux machine. But still, I am not able to log in and getting error as follows,\r\n\r\n[W 2020-03-17 10:35:25.881 JupyterHub auth:923] PAM Authentication failed (root@::ffff:my_ip): [PAM Error 3] Error in service module\r\n[W 2020-03-17 10:35:25.881 JupyterHub base:714] Failed login for root\r\n\r\nCould anyone please help me how to log in as admin in jupyterhub image?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2988", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2988/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2988/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2988/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2988", "id": 582613372, "node_id": "MDU6SXNzdWU1ODI2MTMzNzI=", "number": 2988, "title": "Jupyterhub server setup with native", "user": {"login": "sudi007", "id": 60365314, "node_id": "MDQ6VXNlcjYwMzY1MzE0", "avatar_url": "https://avatars1.githubusercontent.com/u/60365314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sudi007", "html_url": "https://github.com/sudi007", "followers_url": "https://api.github.com/users/sudi007/followers", "following_url": "https://api.github.com/users/sudi007/following{/other_user}", "gists_url": "https://api.github.com/users/sudi007/gists{/gist_id}", "starred_url": "https://api.github.com/users/sudi007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sudi007/subscriptions", "organizations_url": "https://api.github.com/users/sudi007/orgs", "repos_url": "https://api.github.com/users/sudi007/repos", "events_url": "https://api.github.com/users/sudi007/events{/privacy}", "received_events_url": "https://api.github.com/users/sudi007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-16T21:37:05Z", "updated_at": "2020-03-22T17:09:06Z", "closed_at": "2020-03-22T17:08:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "can anyboy help with the following question i am setting up jupyterhub server for the firts time and need some help am having couple of issues i am trying to setup jupyterhub server on redhat linux with NativeAuthenticator in the jupyterconfig.py file but when i run the jupyterhub it allows me to create a username and password but when i try to log in it does not log in and even when i try to log in with root user , the other thing is am not able to access the admin page to authorize the user can anybody please guide me on how would i go about fixing the issue\r\nThanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2987", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2987/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2987/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2987/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2987", "id": 581770856, "node_id": "MDU6SXNzdWU1ODE3NzA4NTY=", "number": 2987, "title": "Failed to open PAM session for <username>: [PAM Error 14] Cannot make/remove an entry for the specified session ", "user": {"login": "zainul1114", "id": 31759122, "node_id": "MDQ6VXNlcjMxNzU5MTIy", "avatar_url": "https://avatars2.githubusercontent.com/u/31759122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zainul1114", "html_url": "https://github.com/zainul1114", "followers_url": "https://api.github.com/users/zainul1114/followers", "following_url": "https://api.github.com/users/zainul1114/following{/other_user}", "gists_url": "https://api.github.com/users/zainul1114/gists{/gist_id}", "starred_url": "https://api.github.com/users/zainul1114/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zainul1114/subscriptions", "organizations_url": "https://api.github.com/users/zainul1114/orgs", "repos_url": "https://api.github.com/users/zainul1114/repos", "events_url": "https://api.github.com/users/zainul1114/events{/privacy}", "received_events_url": "https://api.github.com/users/zainul1114/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-15T18:16:52Z", "updated_at": "2020-03-22T17:11:15Z", "closed_at": "2020-03-22T17:11:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nPlease help me to resolve this issue\r\n\r\n[root@master jupyterhub]# jupyterhub --ip 192.168.43.47 --ssl-key jhub.key --ssl-cert jhub.crt\r\n[I 2020-03-15 23:23:47.821 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-03-15 23:23:47.822 JupyterHub app:2271] Using Authenticator: jupyterhub.auth.PAMAuthenticator-1.1.0\r\n[I 2020-03-15 23:23:47.822 JupyterHub app:2271] Using Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\n[I 2020-03-15 23:23:47.822 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-03-15 23:23:47.824 JupyterHub app:1349] Loading cookie_secret from /etc/jupyterhub/jupyterhub_cookie_secret\r\n[I 2020-03-15 23:23:47.850 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\n[W 2020-03-15 23:23:47.852 JupyterHub app:1624] No admin users, admin interface will be unavailable.\r\n[W 2020-03-15 23:23:47.852 JupyterHub app:1626] Add any administrative users to `c.Authenticator.admin_users` in config.\r\n[I 2020-03-15 23:23:47.852 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10\r\n[I 2020-03-15 23:23:47.912 JupyterHub app:2311] Initialized 0 spawners in 0.003 seconds\r\n[W 2020-03-15 23:23:47.918 JupyterHub proxy:517] Found proxy pid file: /etc/jupyterhub/jupyterhub-proxy.pid\r\n[W 2020-03-15 23:23:47.920 JupyterHub proxy:529] Proxy no longer running at pid=451\r\n[I 2020-03-15 23:23:47.922 JupyterHub proxy:646] Starting proxy @ http://192.168.43.47:8000/\r\n23:23:48.167 [ConfigProxy] info: Proxying https://192.168.43.47:8000 to (no default)\r\n23:23:48.170 [ConfigProxy] info: Proxy API at http://127.0.0.1:8001/api/routes\r\n23:23:48.472 [ConfigProxy] info: 200 GET /api/routes\r\n[I 2020-03-15 23:23:48.474 JupyterHub app:2556] Hub API listening on http://127.0.0.1:8081/hub/\r\n23:23:48.477 [ConfigProxy] info: 200 GET /api/routes\r\n[I 2020-03-15 23:23:48.478 JupyterHub proxy:320] Checking routes\r\n[I 2020-03-15 23:23:48.478 JupyterHub proxy:400] Adding default route for Hub: / => http://127.0.0.1:8081\r\n23:23:48.481 [ConfigProxy] info: Adding route / -> http://127.0.0.1:8081\r\n23:23:48.482 [ConfigProxy] info: Route added / -> http://127.0.0.1:8081\r\n23:23:48.482 [ConfigProxy] info: 201 POST /api/routes/\r\n[I 2020-03-15 23:23:48.483 JupyterHub app:2631] JupyterHub is now running at http://192.168.43.47:8000/\r\n[I 2020-03-15 23:24:28.003 JupyterHub log:174] 302 GET / -> /hub/ (@127.0.0.1) 2.21ms\r\n[I 2020-03-15 23:24:28.017 JupyterHub log:174] 302 GET /hub/ -> /hub/login (@127.0.0.1) 1.49ms\r\n[I 2020-03-15 23:24:28.494 JupyterHub log:174] 200 GET /hub/login (@127.0.0.1) 455.97ms\r\n[I 2020-03-15 23:25:12.119 JupyterHub base:707] User logged in: zain\r\n[I 2020-03-15 23:25:12.125 JupyterHub log:174] 302 POST /hub/login?next= -> /hub/spawn (zain@127.0.0.1) 992.03ms\r\n[W 2020-03-15 23:25:12.639 JupyterHub auth:956] Failed to open PAM session for zain: [PAM Error 14] Cannot make/remove an entry for the specified session\r\n[W 2020-03-15 23:25:12.640 JupyterHub auth:957] Disabling PAM sessions from now on.\r\n[I 2020-03-15 23:25:12.669 JupyterHub spawner:1417] Spawning jupyterhub-singleuser --port=41201\r\n/share/apps/platform/ai/py36/3_6_8/bin/python3: error while loading shared libraries: libpython3.6m.so.1.0: cannot open shared object file: No such file or directory\r\n[I 2020-03-15 23:25:13.151 JupyterHub log:174] 302 GET /hub/spawn -> /hub/spawn-pending/zain (zain@127.0.0.1) 1019.25ms\r\n[I 2020-03-15 23:25:13.184 JupyterHub pages:347] zain is pending spawn\r\n[I 2020-03-15 23:25:13.255 JupyterHub log:174] 200 GET /hub/spawn-pending/zain (zain@127.0.0.1) 87.84ms\r\nERROR:asyncio:Task exception was never retrieved\r\nfuture: <Task finished coro=<BaseHandler.spawn_single_user() done, defined at /share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/handlers/base.py:741> exception=HTTPError()>\r\nTraceback (most recent call last):\r\n  File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 939, in spawn_single_user\r\n    timedelta(seconds=self.slow_spawn_timeout), finish_spawn_future\r\ntornado.util.TimeoutError: Timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 972, in spawn_single_user\r\n    % (status, spawner._log_name),\r\ntornado.web.HTTPError: HTTP 500: Internal Server Error (Spawner failed to start [status=127]. The logs for zain may contain details.)\r\n[W 2020-03-15 23:25:44.819 JupyterHub user:692] zain's server never showed up at http://127.0.0.1:41201/user/zain/ after 30 seconds. Giving up\r\n[E 2020-03-15 23:25:44.930 JupyterHub gen:599] Exception in Future <Task finished coro=<BaseHandler.spawn_single_user.<locals>.finish_user_spawn() done, defined at /share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/handlers/base.py:845> exception=TimeoutError(\"Server at http://127.0.0.1:41201/user/zain/ didn't respond in 30 seconds\",)> after timeout\r\n    Traceback (most recent call last):\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/tornado/gen.py\", line 593, in error_callback\r\n        future.result()\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 852, in finish_user_spawn\r\n        await spawn_future\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/user.py\", line 668, in spawn\r\n        await self._wait_up(spawner)\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/user.py\", line 715, in _wait_up\r\n        raise e\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/user.py\", line 683, in _wait_up\r\n        http=True, timeout=spawner.http_timeout, ssl_context=ssl_context\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/utils.py\", line 234, in wait_for_http_server\r\n        timeout=timeout,\r\n      File \"/share/apps/platform/ai/py36/3_6_8/lib/python3.6/site-packages/jupyterhub/utils.py\", line 177, in exponential_backoff\r\n        raise TimeoutError(fail_message)\r\n    TimeoutError: Server at http://127.0.0.1:41201/user/zain/ didn't respond in 30 seconds\r\n\r\nRegards,\r\nZain", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2986", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2986/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2986/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2986/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2986", "id": 580184965, "node_id": "MDU6SXNzdWU1ODAxODQ5NjU=", "number": 2986, "title": "Manually spawn jupyter worker", "user": {"login": "Hoeze", "id": 1200058, "node_id": "MDQ6VXNlcjEyMDAwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1200058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hoeze", "html_url": "https://github.com/Hoeze", "followers_url": "https://api.github.com/users/Hoeze/followers", "following_url": "https://api.github.com/users/Hoeze/following{/other_user}", "gists_url": "https://api.github.com/users/Hoeze/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hoeze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hoeze/subscriptions", "organizations_url": "https://api.github.com/users/Hoeze/orgs", "repos_url": "https://api.github.com/users/Hoeze/repos", "events_url": "https://api.github.com/users/Hoeze/events{/privacy}", "received_events_url": "https://api.github.com/users/Hoeze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-12T19:54:46Z", "updated_at": "2020-06-02T22:06:20Z", "closed_at": "2020-06-02T22:06:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, is it possible to manually spawn workers?\r\n\r\nE.g. I'd like to run a notebook server on my local desktop, which is not in our Slurm queue.\r\nThis way, the Jupyterhub server would work as a proxy for me.\r\n\r\nHaving a single run command for a worker like:\r\n```\r\njupyterhub run-worker --remote=https://cluster.com/jupyterhub/ --server_name=\"manually_spawned\" --user=myname --[token=(.*)|ask-pass]\r\n```\r\nwould serve two purposes:\r\n\r\n- It would allow to manually spawn workers wherever one would like to. Jupyterhub would work as proxy for the workers and nobody has to use stupid port forwardings any more.\r\n- Debugging would probably be easier\r\n\r\n( This issue is taken from https://github.com/jupyterhub/batchspawner/issues/169)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2983", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2983/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2983/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2983/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2983", "id": 579445721, "node_id": "MDU6SXNzdWU1Nzk0NDU3MjE=", "number": 2983, "title": "Kernel does Not connect when JHub accessed via Apache's Proxy.", "user": {"login": "lejeczek", "id": 1729865, "node_id": "MDQ6VXNlcjE3Mjk4NjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1729865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lejeczek", "html_url": "https://github.com/lejeczek", "followers_url": "https://api.github.com/users/lejeczek/followers", "following_url": "https://api.github.com/users/lejeczek/following{/other_user}", "gists_url": "https://api.github.com/users/lejeczek/gists{/gist_id}", "starred_url": "https://api.github.com/users/lejeczek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lejeczek/subscriptions", "organizations_url": "https://api.github.com/users/lejeczek/orgs", "repos_url": "https://api.github.com/users/lejeczek/repos", "events_url": "https://api.github.com/users/lejeczek/events{/privacy}", "received_events_url": "https://api.github.com/users/lejeczek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T17:57:04Z", "updated_at": "2020-06-02T22:08:19Z", "closed_at": "2020-06-02T22:08:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!---\r\nHi! Thanks for using JupyterHub.\r\n\r\nIf you are reporting an issue with JupyterHub, please use the GitHub search feature to check if your issue has been asked already. If it has, please add your comments to the existing issue.\r\n\r\nSome tips:\r\n- Running `jupyter troubleshoot` from the command line, if possible, and posting\r\nits output would also be helpful.\r\n- Running JupyterHub in `--debug` mode (`jupyterhub --debug`) can also be helpful for troubleshooting.\r\n--->\r\n\r\nI have Apache proxy set up after this: https://jupyterhub.readthedocs.io/en/stable/reference/config-proxy.html\r\nWhen I login and start a notebook kernel fails to connect and remains disconnected.\r\nThe problem does not occur/exist when JHub is accessed directly.\r\n\r\n<!---Add description here--->\r\n\r\n**To Reproduce**\r\n<!---\r\nPlease share the steps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n--->\r\n\r\n**Expected behavior**\r\n<!---\r\nWorking JHub\r\n--->\r\n\r\n**Compute Information**\r\nipykernel (5.1.4)\r\njupyter-client (6.0.0)\r\njupyter-core (4.6.3)\r\njupyter-telemetry (0.0.5)\r\njupyterhub (1.1.0)\r\nnotebook (6.0.3)\r\ntornado (6.0.4)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2982", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2982/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2982/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2982/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2982", "id": 579191448, "node_id": "MDU6SXNzdWU1NzkxOTE0NDg=", "number": 2982, "title": "Failed to find proxy ['configurable-http-proxy']", "user": {"login": "lx28110846", "id": 3928567, "node_id": "MDQ6VXNlcjM5Mjg1Njc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3928567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lx28110846", "html_url": "https://github.com/lx28110846", "followers_url": "https://api.github.com/users/lx28110846/followers", "following_url": "https://api.github.com/users/lx28110846/following{/other_user}", "gists_url": "https://api.github.com/users/lx28110846/gists{/gist_id}", "starred_url": "https://api.github.com/users/lx28110846/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lx28110846/subscriptions", "organizations_url": "https://api.github.com/users/lx28110846/orgs", "repos_url": "https://api.github.com/users/lx28110846/repos", "events_url": "https://api.github.com/users/lx28110846/events{/privacy}", "received_events_url": "https://api.github.com/users/lx28110846/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-11T11:22:01Z", "updated_at": "2020-03-12T02:07:21Z", "closed_at": "2020-03-12T02:07:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n[C 2020-03-11 19:10:10.500 JupyterHub app:2517] Failed to start proxy\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/app.py\", line 2515, in start\r\n        await self.proxy.start()\r\n      File \"/usr/local/lib/python3.6/dist-packages/jupyterhub/proxy.py\", line 656, in start\r\n        cmd, env=env, start_new_session=True, shell=shell\r\n      File \"/usr/lib/python3.6/subprocess.py\", line 729, in __init__\r\n        restore_signals, start_new_session)\r\n      File \"/usr/lib/python3.6/subprocess.py\", line 1364, in _execute_child\r\n        raise child_exception_type(errno_num, err_msg, err_filename)\r\n    FileNotFoundError: [Errno 2] No such file or directory: 'configurable-http-proxy': 'configurable-http-proxy'\r\n\r\ni am sure configurable-http-proxy has already installed !", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2981", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2981/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2981/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2981/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2981", "id": 579117237, "node_id": "MDU6SXNzdWU1NzkxMTcyMzc=", "number": 2981, "title": "Jupyterhub Nginx Reverse Proxy WSS Connection Not Working", "user": {"login": "rmalav15", "id": 10210908, "node_id": "MDQ6VXNlcjEwMjEwOTA4", "avatar_url": "https://avatars3.githubusercontent.com/u/10210908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmalav15", "html_url": "https://github.com/rmalav15", "followers_url": "https://api.github.com/users/rmalav15/followers", "following_url": "https://api.github.com/users/rmalav15/following{/other_user}", "gists_url": "https://api.github.com/users/rmalav15/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmalav15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmalav15/subscriptions", "organizations_url": "https://api.github.com/users/rmalav15/orgs", "repos_url": "https://api.github.com/users/rmalav15/repos", "events_url": "https://api.github.com/users/rmalav15/events{/privacy}", "received_events_url": "https://api.github.com/users/rmalav15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T09:21:14Z", "updated_at": "2020-06-02T22:09:03Z", "closed_at": "2020-06-02T22:09:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am using [jupyterhub-deploy-docker repo](https://github.com/jupyterhub/jupyterhub-deploy-docker) for running Jupyterhub (Docker) with DockerSpawner. I have basic configurations set up for Jupyterhub:\r\n```\r\n# User containers will access hub by container name on the Docker network\r\nc.JupyterHub.hub_ip = 'jupyterhub'\r\nc.JupyterHub.hub_port = 8080\r\n# TLS config\r\nc.JupyterHub.port = 80\r\n# Debug\r\nc.DockerSpawner.debug = True\r\nc.JupyterHub.log_level = 'DEBUG'\r\n```\r\nPlease note that Jupyterhub is running inside docker and I am using port forwarding to connect from outside:\r\n```\r\n# From docker-compose file \r\nports:\r\n      - \"8700:80\"\r\n```\r\n \r\nThis works perfectly behind Nginx proxy in a staging environment that uses only **HTTP**. Following is my very simple Nginx conf which works perfectly:\r\n```\r\n server {\r\n    listen 80;\r\n    server_name STAGING_SERVER_IP;\r\n\r\n    location ~ ^/(hub|user)/ {\r\n        proxy_pass http://localhost:8700;\r\n        proxy_set_header Host $host;\r\n        proxy_redirect off;\r\n        proxy_http_version 1.1;\r\n        proxy_set_header Upgrade $http_upgrade;\r\n        proxy_set_header Connection \"upgrade\";\r\n    }\r\n}\r\n```\r\n\r\nWith the above config Both HTTP and WS request (required for kernel) works perfectly:\r\n![image](https://user-images.githubusercontent.com/10210908/76399410-8d9ec380-63a4-11ea-8f4c-1d548d4be9f4.png)\r\n![image](https://user-images.githubusercontent.com/10210908/76399372-8081d480-63a4-11ea-92cd-f09418a795d4.png)\r\n\r\nHowever, when I move the setup in a production setting with **HTTPS Domain** (managed by aws) the above configuration failed. So I changed the configuration following [these](https://gist.github.com/zonca/08c413a37401bdc9d2a7f65a7af44462) and [these guidelines](https://jupyterhub.readthedocs.io/en/stable/reference/config-proxy.html). Now my Nginx conf is this:\r\n```\r\nserver {\r\n    listen 80;\r\n    server_name PROD_DOMAIN;\r\n   location / {\r\n        proxy_pass http://localhost:8700;\r\n        proxy_set_header Host $host;\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-NginX-Proxy true;\r\n   }\r\n   location ~* /(user/[^/]*)/(api/kernels/[^/]+/channels|terminals/websocket)/? {\r\n            proxy_pass http://localhost:8700;\r\n            proxy_set_header X-Real-IP $remote_addr;\r\n            proxy_set_header Host $host;\r\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n            proxy_set_header X-NginX-Proxy true;\r\n            # WebSocket support\r\n            proxy_http_version 1.1;\r\n            proxy_set_header Upgrade $http_upgrade;\r\n            proxy_set_header Connection \"upgrade\";\r\n            proxy_read_timeout 86400;\r\n        }\r\n}\r\n```\r\nPlease note two things. First, I am not adding SSL key and cert as it is managed by AWS. Second, I am not setting \"c.JupyterHub.bind_url\" as Jupyterhub is running inside docker not on host network.\r\nWith this configuration, **HTTPS** requests are working perfectly but **WSS** (In staging it was **WS**) requests go into pending state and then fails. I am able to see Jupyterhub UI but not able to connect to any kernel or terminal.\r\n![image](https://user-images.githubusercontent.com/10210908/76400937-1fa7cb80-63a7-11ea-93a6-af7b28000483.png)\r\n![image](https://user-images.githubusercontent.com/10210908/76400860-0272fd00-63a7-11ea-9f5b-4cfa0ebe42c0.png)\r\n![image](https://user-images.githubusercontent.com/10210908/76400867-069f1a80-63a7-11ea-9165-c7a1e93f948d.png)\r\n\r\nI have the following two questions\r\n\r\n1.  First is of course, how to resolve this? :)\r\n2. Even with DEBUG setting on, I am not able to see any logs related to WebSocket in Jupyterhub. Is there conf related to WebSocket logs?\r\n\r\nThanks,\r\nRam\r\n\r\n PS: I tried this with two Jupyterhub version 0.9.2 and 1.0.0. Nginx version is nginx/1.14.2.\r\nApologies for the long question. I wanted to give the whole picture.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2977", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2977/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2977/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2977/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2977", "id": 578506512, "node_id": "MDU6SXNzdWU1Nzg1MDY1MTI=", "number": 2977, "title": "Not able to access jupyter note book in web any  browser , getting  spawn error", "user": {"login": "mukhendra", "id": 40772418, "node_id": "MDQ6VXNlcjQwNzcyNDE4", "avatar_url": "https://avatars1.githubusercontent.com/u/40772418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mukhendra", "html_url": "https://github.com/mukhendra", "followers_url": "https://api.github.com/users/mukhendra/followers", "following_url": "https://api.github.com/users/mukhendra/following{/other_user}", "gists_url": "https://api.github.com/users/mukhendra/gists{/gist_id}", "starred_url": "https://api.github.com/users/mukhendra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mukhendra/subscriptions", "organizations_url": "https://api.github.com/users/mukhendra/orgs", "repos_url": "https://api.github.com/users/mukhendra/repos", "events_url": "https://api.github.com/users/mukhendra/events{/privacy}", "received_events_url": "https://api.github.com/users/mukhendra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-10T11:16:26Z", "updated_at": "2020-06-02T22:17:00Z", "closed_at": "2020-06-02T22:17:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Team,\r\n\r\nWhile accessing  Jupyter hub link in web browser I'm getting error like \r\nYou will be redirected automatically when it's ready for you.\r\nCan someone please help us.\r\n![jupyter issue](https://user-images.githubusercontent.com/40772418/76295459-a8a50100-62da-11ea-8d25-30559fe25c4f.png)\r\n\r\n  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2976", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2976/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2976/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2976/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2976", "id": 578404443, "node_id": "MDU6SXNzdWU1Nzg0MDQ0NDM=", "number": 2976, "title": "[SOLVED] jupyterhub hangs while displaying large log file", "user": {"login": "hdlbq", "id": 847175, "node_id": "MDQ6VXNlcjg0NzE3NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/847175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hdlbq", "html_url": "https://github.com/hdlbq", "followers_url": "https://api.github.com/users/hdlbq/followers", "following_url": "https://api.github.com/users/hdlbq/following{/other_user}", "gists_url": "https://api.github.com/users/hdlbq/gists{/gist_id}", "starred_url": "https://api.github.com/users/hdlbq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hdlbq/subscriptions", "organizations_url": "https://api.github.com/users/hdlbq/orgs", "repos_url": "https://api.github.com/users/hdlbq/repos", "events_url": "https://api.github.com/users/hdlbq/events{/privacy}", "received_events_url": "https://api.github.com/users/hdlbq/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-10T08:10:31Z", "updated_at": "2020-03-11T15:04:05Z", "closed_at": "2020-03-11T15:03:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "My hub runs in a docker, as the nginx proxy that allows an https access. The other nodes are managed in a docker swarm. The users are authenticated using CAS.\r\n\r\nthe following command:\r\n`docker service logs jupyterhubserver |& less`\r\nhangs after displaying about 16M of contents.\r\nThe hub and the notebook server are still fully functional\r\n\r\nDebian 9.11\r\nDocker version 19.03.3, build a872fc2f86\r\njupyterhub docker version: 1.2\r\nnginx docker version: latest\r\n\r\nThanks for any hint.\r\nSincerely Yours\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2974", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2974/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2974/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2974/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2974", "id": 576967843, "node_id": "MDU6SXNzdWU1NzY5Njc4NDM=", "number": 2974, "title": "hub not accessible when switching from helm 0.8.2 to 0.0.0-beta.4", "user": {"login": "adi413", "id": 49159227, "node_id": "MDQ6VXNlcjQ5MTU5MjI3", "avatar_url": "https://avatars2.githubusercontent.com/u/49159227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adi413", "html_url": "https://github.com/adi413", "followers_url": "https://api.github.com/users/adi413/followers", "following_url": "https://api.github.com/users/adi413/following{/other_user}", "gists_url": "https://api.github.com/users/adi413/gists{/gist_id}", "starred_url": "https://api.github.com/users/adi413/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adi413/subscriptions", "organizations_url": "https://api.github.com/users/adi413/orgs", "repos_url": "https://api.github.com/users/adi413/repos", "events_url": "https://api.github.com/users/adi413/events{/privacy}", "received_events_url": "https://api.github.com/users/adi413/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-06T14:29:42Z", "updated_at": "2020-03-06T15:25:05Z", "closed_at": "2020-03-06T15:25:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Issue I am facing**\r\nI am trying to switch from helm stable version 0.8.2 of jupyterhub to beta version 0.9.0-beta.4 so that I can use the named server functionality. When I trying to do that https is not working and if I find the public-proxy ip address I am not able to access hub on https.\r\n\r\n**Description**\r\n\r\nIf I try to directly upgrade the helm release with a different version number then I get the following ***error: kind ConfigMap with the name \"traefik-proxy-config\" already exists in the cluster and wasn't defined in the previous release. Before upgrading, please either delete the resource from the cluster or remove it from the chart***\r\n\r\nTo shift from version 0.8.2 to 0.9.0-beta.4 I need to first delete the release with version 0.8.2 and then install hub with version 0.9.0-beta.4. This deploys the changes with https enabled then I cannot access the public proxy ip address generated by hub.\r\nI need to disable auto-https and then I can access hub.\r\n\r\nIt will be great if you can tell me why this might be happening and what can be done to fix this\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2970", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2970/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2970/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2970/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2970", "id": 575532956, "node_id": "MDU6SXNzdWU1NzU1MzI5NTY=", "number": 2970, "title": "singleuser server version check spams the logs", "user": {"login": "mriedem", "id": 3237936, "node_id": "MDQ6VXNlcjMyMzc5MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3237936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mriedem", "html_url": "https://github.com/mriedem", "followers_url": "https://api.github.com/users/mriedem/followers", "following_url": "https://api.github.com/users/mriedem/following{/other_user}", "gists_url": "https://api.github.com/users/mriedem/gists{/gist_id}", "starred_url": "https://api.github.com/users/mriedem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mriedem/subscriptions", "organizations_url": "https://api.github.com/users/mriedem/orgs", "repos_url": "https://api.github.com/users/mriedem/repos", "events_url": "https://api.github.com/users/mriedem/events{/privacy}", "received_events_url": "https://api.github.com/users/mriedem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-04T16:00:15Z", "updated_at": "2020-05-06T07:23:05Z", "closed_at": "2020-05-06T07:23:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWe have ~277 active single user servers in our deployment right now and on restart of the hub service we see this for each one:\r\n\r\n> Mar 4 09:20:45 hub-7bccd48cd5-mp4fk hub [W 2020-03-04 15:20:45.996 JupyterHub _version:56] jupyterhub version 1.2.0dev != jupyterhub-singleuser version 1.1.0. This could cause failure to authenticate and result in redirect loops! \r\n\r\nMy only complaint is that logging that per server is redundant and spams the logs. Can we just log that once per restart of the hub?\r\n\r\n**To Reproduce**\r\n\r\nHave the jupyterhub and jupyterhub-singleuser services at different minor versions.\r\n\r\n**Expected behavior**\r\n\r\nJust log the warning once since there is no user/server specific context in the message.\r\n\r\n**Compute Information**\r\n - 1.2.0dev - we're running with a custom build based on b4391d0f796864a5b01167701d95eafce3ad987e so that we can pick up the performance fix for issue #2928.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2968", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2968/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2968/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2968/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2968", "id": 574603798, "node_id": "MDU6SXNzdWU1NzQ2MDM3OTg=", "number": 2968, "title": "SSL_ERROR_NO_CYPHER_OVERLAP", "user": {"login": "christandlg", "id": 42657218, "node_id": "MDQ6VXNlcjQyNjU3MjE4", "avatar_url": "https://avatars2.githubusercontent.com/u/42657218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christandlg", "html_url": "https://github.com/christandlg", "followers_url": "https://api.github.com/users/christandlg/followers", "following_url": "https://api.github.com/users/christandlg/following{/other_user}", "gists_url": "https://api.github.com/users/christandlg/gists{/gist_id}", "starred_url": "https://api.github.com/users/christandlg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christandlg/subscriptions", "organizations_url": "https://api.github.com/users/christandlg/orgs", "repos_url": "https://api.github.com/users/christandlg/repos", "events_url": "https://api.github.com/users/christandlg/events{/privacy}", "received_events_url": "https://api.github.com/users/christandlg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-03T11:31:49Z", "updated_at": "2020-03-03T11:35:52Z", "closed_at": "2020-03-03T11:35:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Jupyterhub is up and running on a server on our intranet, but using HTTP only, now I want to [switch over to HTTPS](https://jupyterhub.readthedocs.io/en/stable/getting-started/security-basics.html). \r\n\r\nI have created a .pfx certificate using our AD server and converted it to a PEM encoded certificate and key using [this method](https://blogs.adobe.com/connectsupport/connect-on-premise-ssl-convert-pfx-to-pem-format/). The permissions are set to \r\n```\r\nroot@my:~# ls -la /etc/ssl/certs/ | grep my\r\n-rwxrwxrwx 1 root root   2149 Mar  2 14:05 my.pem\r\nroot@my:~# ls -la /etc/ssl/private/ | grep my\r\n-rw-r----- 1 root ssl-cert 1170 Mar  2 14:04 my.key\r\n```\r\nmatching the permissions of the other certificates and key files. Jupyterhub is run as root. In the config file, I set the paths to the key and cert file:\r\n```\r\n## Path to SSL certificate file for the public facing interface of the proxy\r\n#\r\n#  When setting this, you should also set ssl_key\r\nc.JupyterHub.gssl_cert = '/etc/ssl/certs/my.pem'\r\n\r\n## Path to SSL key file for the public facing interface of the proxy\r\n#\r\n#  When setting this, you should also set ssl_cert\r\nc.JupyterHub.ssl_key = '/etc/ssl/private/my.key'\r\n```\r\n\r\nHowever, if I attempt to browse the site using Firefox (url: https://my.local:8000), it reports the error `SSL_ERROR_NO_CYPHER_OVERLAP` . No error is logged in the Jupyterhub log file:\r\n```\r\nMar 03 11:18:23 my systemd[1]: Started Jupyterhub service.\r\nMar 03 11:18:24 my python3[9673]: [W 2020-03-03 11:18:24.089 JupyterHub configurable:168] Config option `gssl_cert` not recognized by `JupyterHub`.  Did\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.089 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.091 JupyterHub app:2271] Using Authenticator: builtins.MyAuthenticator\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.091 JupyterHub app:2271] Using Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.091 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.094 JupyterHub app:1349] Loading cookie_secret from /etc/jupyterhub/jupyterhub_cookie_secret\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.127 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\nMar 03 11:18:24 my python3[9673]: [W 2020-03-03 11:18:24.129 JupyterHub app:1624] No admin users, admin interface will be unavailable.\r\nMar 03 11:18:24 my python3[9673]: [W 2020-03-03 11:18:24.130 JupyterHub app:1626] Add any administrative users to `c.Authenticator.admin_users` in config\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.130 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.230 JupyterHub app:2311] Initialized 0 spawners in 0.010 seconds\r\nMar 03 11:18:24 my python3[9673]: [I 2020-03-03 11:18:24.235 JupyterHub proxy:646] Starting proxy @ http://:8000\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.054 [ConfigProxy] info: Proxying https://*:8000 to (no default)\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.060 [ConfigProxy] info: Proxy API at http://127.0.0.1:8001/api/routes\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.299 [ConfigProxy] info: 200 GET /api/routes\r\nMar 03 11:18:25 my python3[9673]: [I 2020-03-03 11:18:25.300 JupyterHub app:2556] Hub API listening on http://127.0.0.1:8081/hub/\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.303 [ConfigProxy] info: 200 GET /api/routes\r\nMar 03 11:18:25 my python3[9673]: [I 2020-03-03 11:18:25.303 JupyterHub proxy:320] Checking routes\r\nMar 03 11:18:25 my python3[9673]: [I 2020-03-03 11:18:25.304 JupyterHub proxy:400] Adding default route for Hub: / => http://127.0.0.1:8081\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.308 [ConfigProxy] info: Adding route / -> http://127.0.0.1:8081\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.308 [ConfigProxy] info: Route added / -> http://127.0.0.1:8081\r\nMar 03 11:18:25 my python3[9673]: 11:18:25.309 [ConfigProxy] info: 201 POST /api/routes/\r\nMar 03 11:18:25 my python3[9673]: [I 2020-03-03 11:18:25.310 JupyterHub app:2631] JupyterHub is now running at http://:8000\r\n```\r\n\r\ntesting the server with [testssl.sh](https://github.com/drwetter/testssl.sh/tree/3.0) suggests that TLS is not enabled: \r\n```\r\nroot@my:~/testssl.sh# ./testssl.sh https://my.local:8000\r\n\r\n###########################################################\r\n    testssl.sh       3.1dev from https://testssl.sh/dev/\r\n    (e0c83b2 2020-02-24 14:21:28 -- )\r\n\r\n      This program is free software. Distribution and\r\n             modification under GPLv2 permitted.\r\n      USAGE w/o ANY WARRANTY. USE IT AT YOUR OWN RISK!\r\n\r\n       Please file bugs @ https://testssl.sh/bugs/\r\n\r\n###########################################################\r\n\r\n Using \"OpenSSL 1.0.2-chacha (1.0.2k-dev)\" [~183 ciphers]\r\n on my:./bin/openssl.Linux.x86_64\r\n (built: \"Jan 18 17:12:17 2019\", platform: \"linux-x86_64\")\r\n\r\n\r\n Start 2020-03-03 11:25:27        -->> 192.168.1.150:8000 (my.local) <<--\r\n\r\n rDNS (192.168.1.150):   my.\r\n\r\n 192.168.1.150:8000 doesn't seem to be a TLS/SSL enabled server\r\n The results might look ok but they could be nonsense. Really proceed ? (\"yes\" to continue) --> yes\r\n Service detected:       Couldn't determine what's running on port 8000, assuming no HTTP service => skipping all HTTP checks\r\n\r\n\r\n Testing protocols via sockets except NPN+ALPN\r\n\r\n SSLv2      not offered (OK)\r\n SSLv3      not offered (OK)\r\n TLS 1      not offered\r\n TLS 1.1    not offered\r\n TLS 1.2    not offered\r\n TLS 1.3    not offered\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2965", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2965/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2965/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2965/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2965", "id": 574084810, "node_id": "MDU6SXNzdWU1NzQwODQ4MTA=", "number": 2965, "title": "`user_options` is not in `Server` resource in API docs", "user": {"login": "mriedem", "id": 3237936, "node_id": "MDQ6VXNlcjMyMzc5MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3237936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mriedem", "html_url": "https://github.com/mriedem", "followers_url": "https://api.github.com/users/mriedem/followers", "following_url": "https://api.github.com/users/mriedem/following{/other_user}", "gists_url": "https://api.github.com/users/mriedem/gists{/gist_id}", "starred_url": "https://api.github.com/users/mriedem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mriedem/subscriptions", "organizations_url": "https://api.github.com/users/mriedem/orgs", "repos_url": "https://api.github.com/users/mriedem/repos", "events_url": "https://api.github.com/users/mriedem/events{/privacy}", "received_events_url": "https://api.github.com/users/mriedem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-02T16:17:17Z", "updated_at": "2020-03-12T12:04:26Z", "closed_at": "2020-03-12T12:04:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nEach resource in the `GET /users` admin API response has a `servers` entry and each of those entries has a `user_options` field but that is not shown in the swagger UI or REST API docs:\r\n\r\nhttp://petstore.swagger.io/?url=https://raw.githubusercontent.com/jupyter/jupyterhub/master/docs/rest-api.yml#/default\r\n\r\nhttps://jupyterhub.readthedocs.io/en/stable/_static/rest-api/index.html#/definitions/Server\r\n\r\n**To Reproduce**\r\nJust make a `GET /users` request as an admin where a user has at least one server, here is a sample response:\r\n\r\n```json\r\n[\r\n    {\r\n        \"kind\": \"user\",\r\n        \"name\": \"osboxes\",\r\n        \"admin\": true,\r\n        \"groups\": [],\r\n        \"server\": \"/user/osboxes/\",\r\n        \"pending\": null,\r\n        \"created\": \"2020-02-28T17:21:53.464409Z\",\r\n        \"last_activity\": \"2020-03-02T16:13:02.242953Z\",\r\n        \"servers\": {\r\n            \"\": {\r\n                \"name\": \"\",\r\n                \"last_activity\": \"2020-03-02T16:13:01.495037Z\",\r\n                \"started\": \"2020-03-02T16:13:01.015212Z\",\r\n                \"pending\": null,\r\n                \"ready\": true,\r\n                \"state\": {\r\n                    \"pid\": 5693\r\n                },\r\n                \"url\": \"/user/osboxes/\",\r\n                \"user_options\": {},\r\n                \"progress_url\": \"/hub/api/users/osboxes/server/progress\"\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n**Expected behavior**\r\nThe docs should mention all of the fields in the `Server` resource.\r\n\r\n**Compute Information**\r\n - Operating System:\r\n\r\n```\r\n$ uname -a\r\nLinux osboxes 5.3.0-26-generic #28~18.04.1-Ubuntu SMP Wed Dec 18 16:40:14 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n - JupyterHub Version: 1.1.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2964", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2964/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2964/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2964/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2964", "id": 573958502, "node_id": "MDU6SXNzdWU1NzM5NTg1MDI=", "number": 2964, "title": "nbgallery support?", "user": {"login": "elgalu", "id": 111569, "node_id": "MDQ6VXNlcjExMTU2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/111569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elgalu", "html_url": "https://github.com/elgalu", "followers_url": "https://api.github.com/users/elgalu/followers", "following_url": "https://api.github.com/users/elgalu/following{/other_user}", "gists_url": "https://api.github.com/users/elgalu/gists{/gist_id}", "starred_url": "https://api.github.com/users/elgalu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elgalu/subscriptions", "organizations_url": "https://api.github.com/users/elgalu/orgs", "repos_url": "https://api.github.com/users/elgalu/repos", "events_url": "https://api.github.com/users/elgalu/events{/privacy}", "received_events_url": "https://api.github.com/users/elgalu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-02T13:01:04Z", "updated_at": "2020-06-03T13:33:45Z", "closed_at": "2020-06-03T13:29:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/nbgallery/nbgallery", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2963", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2963/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2963/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2963/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2963", "id": 573570867, "node_id": "MDU6SXNzdWU1NzM1NzA4Njc=", "number": 2963, "title": "404 errors for static files using batchspawner", "user": {"login": "R-SDE", "id": 21292994, "node_id": "MDQ6VXNlcjIxMjkyOTk0", "avatar_url": "https://avatars3.githubusercontent.com/u/21292994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/R-SDE", "html_url": "https://github.com/R-SDE", "followers_url": "https://api.github.com/users/R-SDE/followers", "following_url": "https://api.github.com/users/R-SDE/following{/other_user}", "gists_url": "https://api.github.com/users/R-SDE/gists{/gist_id}", "starred_url": "https://api.github.com/users/R-SDE/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/R-SDE/subscriptions", "organizations_url": "https://api.github.com/users/R-SDE/orgs", "repos_url": "https://api.github.com/users/R-SDE/repos", "events_url": "https://api.github.com/users/R-SDE/events{/privacy}", "received_events_url": "https://api.github.com/users/R-SDE/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-01T16:02:04Z", "updated_at": "2020-03-10T12:43:56Z", "closed_at": "2020-03-10T12:43:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys,\r\nI installed Jupyterhub (v. 1.1.0) with the batchspawner to run the Single-User Notebooks remotely on a cluster. There are two test users on the Jupyterhub machine. However, these do not exist on the cluster side. My current setup is that  there is **only one** \"Jupyterhub-User\" on the cluster side who starts the Singe-User notebooks via ssh and a custom Workload-Manager.\r\n\r\n\r\n**batchspawner.py**\r\n```\r\nbatch_submit_cmd = Unicode(\"ssh -i /home/jhusr/.ssh/id_rsa jhusr@XX.XX.XX.XX /scratch/jhusr_groupfolder/jh_calloc\").tag(config=True)\r\nbatch_query_cmd = Unicode('ssh -i /home/jhusr/.ssh/id_rsa jhusr@XX.XX.XX.XX cinfo -s --mine --fmt=%m%w --raw {job_id} | tr \":\" \" \" | cut -d \" \" -f 1,6').tag(config=True)\r\nbatch_cancel_cmd = Unicode(\"ssh -i /home/jhusr/.ssh/id_rsa jhusr@XX.XX.XX.XX ckill {job_id}\").tag(config=True)\r\nstate_exechost_re = Unicode('(^cnode[0-9][0-9]-[0-9][0-9][0-9])').tag(config=True)\r\n```\r\n\r\nIf a port was thrown out before the notebook server was started, an SSH tunnel is established with this port so that the Jupyterhub server can communicate with the notebook instance.\r\n\r\n**singleuser.py**\r\n```\r\n[...]\r\nrssh_cmd=\"eval $(ssh-agent) && ssh-add ~/.ssh/id_rsa && /usr/bin/ssh -fNR \"+port+\":127.0.0.1:\"+port+\" tunnelbot@JUPYTERHUB_MACHINE\";\r\nsubprocess.call(rssh_cmd, shell=True);\r\n[...]\r\n```\r\nEverything works fine until here.\r\nBut while spawning /user/test1 I am getting 404 errors for static files on the Jupyterhub machine:\r\n```\r\n[I 2020-03-01 16:13:33.920 JupyterHub batchspawner:250] Spawner submitted script:\r\n    #!/usr/bin/bash\r\n    #WLM --resources=1:cpus=1:mem=1g\r\n    #WLM -t 1h\r\n    #WLM -N TEST\r\n    \r\n    module load python/3.6.0\r\n    export PATH=/scratch/jhusr_groupfolder/jupyterhub/bin/:$PATH\r\n    export LD_LIBRARY_PATH=/scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages:$LD_LIBRARY_PATH\r\n    export JUPYTERHUB_API_URL=\"http://XX.XX.XX.XX:8081/hub/api\"\r\n    export JUPYTERHUB_CLIENT_ID=BUGGY?????????\r\n\r\n    JUPYTERHUB_API_TOKEN={INSERT API TOKEN} /scratch/jhusr_groupfolder/jupyterhub/bin/batchspawner-singleuser jupyterhub-singleuser --notebook-dir=/scratch/jhusr_groupfolder/NOTEBOOKS/ --debug --disable-user-config\r\n                \r\n[W 2020-03-01 16:13:34.759 JupyterHub base:172] Rolling back dirty objects IdentitySet([<Server(:0)>])\r\n[I 2020-03-01 16:13:34.763 JupyterHub log:174] 302 GET /hub/spawn/test1 -> /hub/spawn-pending/test1 (test1@::ffff:XX.XX.XX.XX) 1005.46ms\r\n[I 2020-03-01 16:13:34.773 JupyterHub pages:347] test1 is pending spawn\r\n[I 2020-03-01 16:13:34.777 JupyterHub log:174] 200 GET /hub/spawn-pending/test1 (test1@::ffff:XX.XX.XX.XX) 8.70ms\r\n[I 2020-03-01 16:13:36.271 JupyterHub batchspawner:253] Job submitted. cmd:  ssh -i /home/jhusr/.ssh/id_rsa jhusr@XX.XX.XX.XX /scratch/jhusr_groupfolder/jh_calloc output: 5200632\r\n[D 2020-03-01 16:13:36.272 JupyterHub batchspawner:275] Spawner querying job:  ssh -i /home/jhusr/.ssh/id_rsa jhusr@XX.XX.XX.XX cinfo -s --mine --fmt=%m%w --raw 5200632 | tr \":\" \" \" | cut -d \" \" -f 1,6\r\n[W 2020-03-01 16:13:43.759 JupyterHub base:950] User test1 is slow to start (timeout=10)\r\n[D 2020-03-01 16:13:44.840 JupyterHub base:285] Recording first activity for <APIToken('5f86...', user='test1')>\r\n[I 2020-03-01 16:13:45.050 JupyterHub log:174] 200 POST /hub/api/batchspawner (test1@131.234.58.9) 213.02ms\r\n[I 2020-03-01 16:13:45.272 JupyterHub batchspawner:398] Notebook server job 5200632 started at cnode01-001:59284\r\n[D 2020-03-01 16:13:45.299 JupyterHub spawner:1119] Polling subprocess every 30s\r\n[I 2020-03-01 16:13:47.815 JupyterHub log:174] 200 GET /hub/api (@XX.XX.XX.XX) 0.68ms\r\n[D 2020-03-01 16:13:49.350 JupyterHub utils:218] Server at http://cnode01-001:59284/user/test1/ responded with 302\r\n[D 2020-03-01 16:13:49.350 JupyterHub _version:60] jupyterhub and jupyterhub-singleuser both on version 1.1.0\r\n[I 2020-03-01 16:13:49.350 JupyterHub base:855] User test1 took 15.592 seconds to start\r\n[I 2020-03-01 16:13:49.350 JupyterHub proxy:262] Adding user test1 to proxy /user/test1/ => http://node09-021:59284\r\n[D 2020-03-01 16:13:49.350 JupyterHub proxy:766] Proxy: Fetching POST http://127.0.0.1:8001/api/routes/user/test1\r\n16:13:49.352 [ConfigProxy] info: Adding route /user/test1 -> http://cnode01-001:59284\r\n16:13:49.352 [ConfigProxy] info: Route added /user/test1 -> http://cnode01-001:59284\r\n16:13:49.353 [ConfigProxy] info: 201 POST /api/routes/user/test1 \r\n[I 2020-03-01 16:13:49.353 JupyterHub users:609] Server test1 is ready\r\n[I 2020-03-01 16:13:49.353 JupyterHub log:174] 200 GET /hub/api/users/test1/server/progress (test1@::ffff:XX.XX.XX.XX) 14521.06ms\r\n[I 2020-03-01 16:13:49.370 JupyterHub log:174] 302 GET /hub/spawn-pending/test1 -> /user/test1/ (test1@::ffff:XX.XX.XX.XX) 2.90ms\r\n[I 2020-03-01 16:13:49.843 JupyterHub log:174] 302 GET /static/style/style.min.css?v=2165fc0d023f0baf5cce3b2a6db40e22 -> /hub/static/style/style.min.css?v=2165fc0d023f0baf5cce3b2a6db40e22 (@::ffff:XX.XX.XX.XX) 1.18ms\r\n[I 2020-03-01 16:13:49.843 JupyterHub log:174] 302 GET /custom/custom.css -> /hub/custom/custom.css (@::ffff:XX.XX.XX.XX) 1.38ms\r\n[I 2020-03-01 16:13:49.844 JupyterHub log:174] 302 GET /static/components/react/react-dom.production.min.js?v=b14d91fb641317cda38dbc9dbf985ab4 -> /hub/static/components/react/react-dom.production.min.js?v=b14d91fb641317cda38dbc9dbf985ab4 (@::ffff:XX.XX.XX.XX) 0.85ms\r\n[I 2020-03-01 16:13:49.846 JupyterHub log:174] 302 GET /static/components/create-react-class/index.js?v=94feb9971ce6d26211729abc43f96cd2 -> /hub/static/components/create-react-class/index.js?v=94feb9971ce6d26211729abc43f96cd2 (@::ffff:XX.XX.XX.XX) 0.86ms\r\n[I 2020-03-01 16:13:49.847 JupyterHub log:174] 302 GET /static/components/jquery-ui/themes/smoothness/jquery-ui.min.css?v=3c2a865c832a1322285c55c6ed99abb2 -> /hub/static/components/jquery-ui/themes/smoothness/jquery-ui.min.css?v=3c2a865c832a1322285c55c6ed99abb2 (@::ffff:XX.XX.XX.XX) 0.70ms\r\n[I 2020-03-01 16:13:49.848 JupyterHub log:174] 302 GET /static/components/jquery-typeahead/dist/jquery.typeahead.min.css?v=9df10041c3e07da766e7c48dd4c35e4a -> /hub/static/components/jquery-typeahead/dist/jquery.typeahead.min.css?v=9df10041c3e07da766e7c48dd4c35e4a (@::ffff:XX.XX.XX.XX) 0.68ms\r\n[W 2020-03-01 16:13:49.859 JupyterHub log:174] 404 GET /hub/static/style/style.min.css?v=2165fc0d023f0baf5cce3b2a6db40e22 (@::ffff:XX.XX.XX.XX) 0.67ms\r\n[W 2020-03-01 16:13:49.863 JupyterHub log:174] 404 GET /hub/static/components/jquery-typeahead/dist/jquery.typeahead.min.css?v=9df10041c3e07da766e7c48dd4c35e4a (@::ffff:XX.XX.XX.XX) 0.70ms\r\n[W 2020-03-01 16:13:49.864 JupyterHub log:174] 404 GET /hub/static/components/jquery-ui/themes/smoothness/jquery-ui.min.css?v=3c2a865c832a1322285c55c6ed99abb2 (@::ffff:XX.XX.XX.XX) 0.61ms\r\n[W 2020-03-01 16:13:49.875 JupyterHub log:174] 404 GET /hub/custom/custom.css (test1@::ffff:XX.XX.XX.XX) 10.29ms\r\n[I 2020-03-01 16:13:49.877 JupyterHub log:174] 302 GET /static/components/requirejs/require.js?v=951f856e81496aaeec2e71a1c2c0d51f -> /hub/static/components/requirejs/require.js?v=951f856e81496aaeec2e71a1c2c0d51f (@::ffff:XX.XX.XX.XX) 1.45ms\r\n[I 2020-03-01 16:13:49.877 JupyterHub log:174] 302 GET /static/components/es6-promise/promise.min.js?v=f004a16cb856e0ff11781d01ec5ca8fe -> /hub/static/components/es6-promise/promise.min.js?v=f004a16cb856e0ff11781d01ec5ca8fe (@::ffff:XX.XX.XX.XX) 1.38ms\r\n[I 2020-03-01 16:13:49.880 JupyterHub log:174] 302 GET /static/components/react/react.production.min.js?v=34f96ffc962a7deecc83037ccb582b58 -> /hub/static/components/react/react.production.min.js?v=34f96ffc962a7deecc83037ccb582b58 (@::ffff:XX.XX.XX.XX) 1.75ms\r\n[W 2020-03-01 16:13:49.881 JupyterHub log:174] 404 GET /hub/static/components/react/react-dom.production.min.js?v=b14d91fb641317cda38dbc9dbf985ab4 (@::ffff:XX.XX.XX.XX) 1.78ms\r\n[W 2020-03-01 16:13:49.881 JupyterHub log:174] 404 GET /hub/static/components/create-react-class/index.js?v=94feb9971ce6d26211729abc43f96cd2 (@::ffff:XX.XX.XX.XX) 1.82ms\r\n[D 2020-03-01 16:13:49.897 JupyterHub log:174] 200 GET /hub/static/components/requirejs/require.js?v=951f856e81496aaeec2e71a1c2c0d51f (@::ffff:XX.XX.XX.XX) 1.02ms\r\n[W 2020-03-01 16:13:49.898 JupyterHub log:174] 404 GET /hub/static/components/es6-promise/promise.min.js?v=f004a16cb856e0ff11781d01ec5ca8fe (@::ffff:XX.XX.XX.XX) 0.62ms\r\n[W 2020-03-01 16:13:49.899 JupyterHub log:174] 404 GET /hub/static/components/react/react.production.min.js?v=34f96ffc962a7deecc83037ccb582b58 (@::ffff:XX.XX.XX.XX) 0.70ms\r\n[I 2020-03-01 16:13:49.911 JupyterHub log:174] 302 GET /static/components/react/react-dom.production.min.js?v=b14d91fb641317cda38dbc9dbf985ab4 -> /hub/static/components/react/react-dom.production.min.js?v=b14d91fb641317cda38dbc9dbf985ab4 (@::ffff:XX.XX.XX.XX) 0.72ms\r\n[W 2020-03-01 16:13:49.919 JupyterHub log:174] 404 GET /hub/static/components/react/react-dom.production.min.js?v=b14d91fb641317cda38dbc9dbf985ab4 (@::ffff:XX.XX.XX.XX) 0.72ms\r\n[I 2020-03-01 16:13:49.928 JupyterHub log:174] 302 GET /static/components/create-react-class/index.js?v=94feb9971ce6d26211729abc43f96cd2 -> /hub/static/components/create-react-class/index.js?v=94feb9971ce6d26211729abc43f96cd2 (@::ffff:XX.XX.XX.XX) 0.66ms\r\n[W 2020-03-01 16:13:49.935 JupyterHub log:174] 404 GET /hub/static/components/create-react-class/index.js?v=94feb9971ce6d26211729abc43f96cd2 (@::ffff:XX.XX.XX.XX) 0.62ms\r\n[I 2020-03-01 16:13:49.955 JupyterHub log:174] 302 GET /static/components/jquery/jquery.min.js?v=20200301161346 -> /hub/static/components/jquery/jquery.min.js?v=20200301161346 (@::ffff:XX.XX.XX.XX) 0.65ms\r\n[W 2020-03-01 16:13:49.962 JupyterHub log:174] 404 GET /hub/static/components/jquery/jquery.min.js?v=20200301161346 (@::ffff:XX.XX.XX.XX) 0.61ms\r\n```\r\n\r\nOn the cluster side (cnode01-001) I am getting following error:\r\n```\r\n[D 2020-03-01 16:13:47.826 SingleUserNotebookApp _version:60] jupyterhub and jupyterhub-singleuser both on version 1.1.0\r\n[I 2020-03-01 16:13:47.856 SingleUserNotebookApp notebookapp:1924] Serving notebooks from local directory: /scratch/jhusr_groupfolder/NOTEBOOKS\r\n[I 2020-03-01 16:13:47.888 SingleUserNotebookApp notebookapp:1924] The Jupyter Notebook is running at:\r\n[I 2020-03-01 16:13:47.921 SingleUserNotebookApp notebookapp:1924] http://127.0.0.1:59284/\r\n[I 2020-03-01 16:13:47.959 SingleUserNotebookApp notebookapp:1925] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\r\n[W 2020-03-01 16:13:48.023 SingleUserNotebookApp singleuser:539] Activity events disabled\r\n[I 2020-03-01 16:13:49.357 SingleUserNotebookApp log:174] 302 GET /user/test1/ -> /user/test1 (@127.0.0.1) 2.41ms\r\n[I 2020-03-01 16:13:49.391 SingleUserNotebookApp log:174] 302 GET /user/test1/ -> /user/test1 (@::ffff:131.234.58.20) 1.35ms\r\n[D 2020-03-01 16:13:49.402 SingleUserNotebookApp auth:501] **No user identified**\r\n[D 2020-03-01 16:13:49.408 SingleUserNotebookApp handlers:252] Using contents: services/contents\r\n[D 2020-03-01 16:13:49.480 SingleUserNotebookApp handlers:828] Path base/images/favicon.ico served from /scratch/hpc-lco-jupyter/jupyterhub/lib/python3.6/site-packages/notebook/static/base/images/favicon.ico\r\n[D 2020-03-01 16:13:49.492 SingleUserNotebookApp handlers:828] Path components/jquery-ui/themes/smoothness/jquery-ui.min.css served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/jquery-ui/themes/smoothness/jquery-ui.min.css\r\n[D 2020-03-01 16:13:49.496 SingleUserNotebookApp handlers:828] Path components/jquery-typeahead/dist/jquery.typeahead.min.css served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/jquery-typeahead/dist/jquery.typeahead.min.css\r\n[D 2020-03-01 16:13:49.502 SingleUserNotebookApp handlers:828] Path style/style.min.css served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/style/style.min.css\r\n[D 2020-03-01 16:13:49.602 SingleUserNotebookApp handlers:828] Path components/es6-promise/promise.min.js served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/es6-promise/promise.min.js\r\n[D 2020-03-01 16:13:49.605 SingleUserNotebookApp handlers:828] Path components/react/react.production.min.js served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/react/react.production.min.js\r\n[D 2020-03-01 16:13:49.608 SingleUserNotebookApp handlers:828] Path components/react/react-dom.production.min.js served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/react/react-dom.production.min.js\r\n[D 2020-03-01 16:13:49.673 SingleUserNotebookApp handlers:828] Path components/create-react-class/index.js served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/create-react-class/index.js\r\n[D 2020-03-01 16:13:49.755 SingleUserNotebookApp handlers:828] Path components/requirejs/require.js served from /scratch/jhusr_groupfolder/jupyterhub/lib/python3.6/site-packages/notebook/static/components/requirejs/require.js\r\n[W 2020-03-01 16:13:49.812 SingleUserNotebookApp log:174] 404 GET /user/test1 (@::ffff:XX.XX.XX.XX) 411.36ms\r\n```\r\n\r\nI hope the problem can be solved. Many thanks for the help!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2961", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2961/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2961/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2961/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2961", "id": 572812968, "node_id": "MDU6SXNzdWU1NzI4MTI5Njg=", "number": 2961, "title": "RFE: Automate dev env setup using tox", "user": {"login": "mriedem", "id": 3237936, "node_id": "MDQ6VXNlcjMyMzc5MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3237936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mriedem", "html_url": "https://github.com/mriedem", "followers_url": "https://api.github.com/users/mriedem/followers", "following_url": "https://api.github.com/users/mriedem/following{/other_user}", "gists_url": "https://api.github.com/users/mriedem/gists{/gist_id}", "starred_url": "https://api.github.com/users/mriedem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mriedem/subscriptions", "organizations_url": "https://api.github.com/users/mriedem/orgs", "repos_url": "https://api.github.com/users/mriedem/repos", "events_url": "https://api.github.com/users/mriedem/events{/privacy}", "received_events_url": "https://api.github.com/users/mriedem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-28T15:06:49Z", "updated_at": "2020-03-03T06:20:16Z", "closed_at": "2020-03-03T06:20:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This isn't a bug, just a request for enhancement from a new contributor and maybe this has been discussed before in a mailing list thread or meeting (I didn't see an existing issue for this).\r\n\r\nI was going through https://github.com/jupyterhub/jupyterhub/blob/master/CONTRIBUTING.md and the dev environment setup seems like it could be pretty easily scripted in a `tox.ini` file and then running tests could be a specific `testenv` where the common setup is handled automatically and the `testenv` just runs `pytest` or a linter or builds docs, whatever.\r\n\r\nBasically consider taking the scripts portion of the travis config and putting that into a tox.ini and then you could update the travis config to just run the tox environment for each travis build. Then local dev / test and CI are aligned.\r\n\r\nAnyway, just an idea for discussion and like I said, maybe it's been discussed before and if so feel free to close this with a link to whatever discussion was captured (mailing list, meeting notes, forum, etc).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2958", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2958/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2958/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2958/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2958", "id": 572689883, "node_id": "MDU6SXNzdWU1NzI2ODk4ODM=", "number": 2958, "title": "ReadTheDocs builds are failing", "user": {"login": "manics", "id": 1644105, "node_id": "MDQ6VXNlcjE2NDQxMDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1644105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manics", "html_url": "https://github.com/manics", "followers_url": "https://api.github.com/users/manics/followers", "following_url": "https://api.github.com/users/manics/following{/other_user}", "gists_url": "https://api.github.com/users/manics/gists{/gist_id}", "starred_url": "https://api.github.com/users/manics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manics/subscriptions", "organizations_url": "https://api.github.com/users/manics/orgs", "repos_url": "https://api.github.com/users/manics/repos", "events_url": "https://api.github.com/users/manics/events{/privacy}", "received_events_url": "https://api.github.com/users/manics/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-02-28T11:13:18Z", "updated_at": "2020-04-02T11:50:28Z", "closed_at": "2020-04-02T11:50:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The [docs builds](https://readthedocs.org/projects/jupyterhub/builds/) have been failing since [Feb. 26, 2020. 1:05 p.m](https://readthedocs.org/projects/jupyterhub/builds/10508207/). This means https://github.com/jupyterhub/jupyterhub/pull/2956 which should've fixed https://github.com/jupyterhub/jupyterhub/issues/2955 hasn't been deployed\r\n\r\n[Most recent failure](https://readthedocs.org/projects/jupyterhub/builds/10520408/):\r\n```\r\n[rtd-command-info] start-time: 2020-02-28T10:48:22.704838Z, end-time: 2020-02-28T10:48:35.821550Z, duration: 13, exit-code: 1\r\nconda env create --quiet --name latest --file docs/environment.yml\r\nCollecting package metadata (repodata.json): ...working... failed\r\n\r\nCondaHTTPError: HTTP 500 CONNECTION FAILED for url <https://metachannel.conda-forge.org/conda-forge/jupyterhub,sphinx,recommonmark/noarch/repodata.json>\r\nElapsed: 00:00.420768\r\nCF-RAY: 56c1d36d1d42ccd6-EWR\r\n\r\nA remote server error occurred when trying to retrieve this URL.\r\n\r\nA 500-type error (e.g. 500, 501, 502, 503, etc.) indicates the server failed to\r\nfulfill a valid request.  The problem may be spurious, and will resolve itself if you\r\ntry your request again.  If the problem persists, consider notifying the maintainer\r\nof the remote server.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2955", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2955/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2955/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2955/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2955", "id": 572220375, "node_id": "MDU6SXNzdWU1NzIyMjAzNzU=", "number": 2955, "title": "Unwanted webpack popup on docs page", "user": {"login": "bitnik", "id": 6059799, "node_id": "MDQ6VXNlcjYwNTk3OTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/6059799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitnik", "html_url": "https://github.com/bitnik", "followers_url": "https://api.github.com/users/bitnik/followers", "following_url": "https://api.github.com/users/bitnik/following{/other_user}", "gists_url": "https://api.github.com/users/bitnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitnik/subscriptions", "organizations_url": "https://api.github.com/users/bitnik/orgs", "repos_url": "https://api.github.com/users/bitnik/repos", "events_url": "https://api.github.com/users/bitnik/events{/privacy}", "received_events_url": "https://api.github.com/users/bitnik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-27T17:00:46Z", "updated_at": "2020-02-28T10:28:22Z", "closed_at": "2020-02-28T10:28:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://jupyterhub.readthedocs.io/en/latest/ has same problem as https://github.com/jupyterhub/the-littlest-jupyterhub/issues/520 and https://github.com/jupyterhub/binderhub/issues/1069\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2949", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2949/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2949/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2949/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2949", "id": 569370874, "node_id": "MDU6SXNzdWU1NjkzNzA4NzQ=", "number": 2949, "title": "Launching services at runtime", "user": {"login": "rebenkoy", "id": 23475811, "node_id": "MDQ6VXNlcjIzNDc1ODEx", "avatar_url": "https://avatars3.githubusercontent.com/u/23475811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rebenkoy", "html_url": "https://github.com/rebenkoy", "followers_url": "https://api.github.com/users/rebenkoy/followers", "following_url": "https://api.github.com/users/rebenkoy/following{/other_user}", "gists_url": "https://api.github.com/users/rebenkoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/rebenkoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rebenkoy/subscriptions", "organizations_url": "https://api.github.com/users/rebenkoy/orgs", "repos_url": "https://api.github.com/users/rebenkoy/repos", "events_url": "https://api.github.com/users/rebenkoy/events{/privacy}", "received_events_url": "https://api.github.com/users/rebenkoy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-22T18:08:28Z", "updated_at": "2020-06-02T22:09:43Z", "closed_at": "2020-06-02T22:09:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to launch services at runtime?\r\nI want to be able to add courses (https://nbgrader.readthedocs.io/en/stable/configuration/jupyterhub_config.html)\r\nwithout restarting a server, which leads to progress loss for users.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2935", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2935/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2935/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2935/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2935", "id": 566905329, "node_id": "MDU6SXNzdWU1NjY5MDUzMjk=", "number": 2935, "title": "Block at starting ipython kernel ", "user": {"login": "lzw-all-in", "id": 34850455, "node_id": "MDQ6VXNlcjM0ODUwNDU1", "avatar_url": "https://avatars1.githubusercontent.com/u/34850455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzw-all-in", "html_url": "https://github.com/lzw-all-in", "followers_url": "https://api.github.com/users/lzw-all-in/followers", "following_url": "https://api.github.com/users/lzw-all-in/following{/other_user}", "gists_url": "https://api.github.com/users/lzw-all-in/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzw-all-in/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzw-all-in/subscriptions", "organizations_url": "https://api.github.com/users/lzw-all-in/orgs", "repos_url": "https://api.github.com/users/lzw-all-in/repos", "events_url": "https://api.github.com/users/lzw-all-in/events{/privacy}", "received_events_url": "https://api.github.com/users/lzw-all-in/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-18T13:49:10Z", "updated_at": "2020-02-19T11:37:01Z", "closed_at": "2020-02-19T11:37:01Z", "author_association": "NONE", "active_lock_reason": null, "body": " - Windows Subsystem for Linux Ubuntu 18.04\r\n - JupyterHub Version 1.1.0\r\n**When I start a notebook on JupyterHub. it gives me this error info. It might because I let notebook to call a kernel at Windows environment. But I can use this kernel at Jupyter Notebook Why I'm block at JupyterHub. Is there anyone can help me ?**\r\n```\r\n[W 2020-02-18 20:42:44.984 SingleUserNotebookApp handlers:229] Timeout waiting for kernel_info reply from 937f4d0b-8152-4816-a2ee-6cec7eb40f2e\r\n.....\r\n[E 2020-02-18 20:51:12.037 JupyterHub ioloop:763] Exception in callback functools.partial(<bound method IOLoop._discard_future_result of <tornado.platform.asyncio.AsyncIOMainLoop object at 0x7fd851133f90>>, <Task finished coro=<JupyterHub.update_last_activity() done, defined at /home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py:2428> exception=HTTP 599: Unknown>)\r\n    Traceback (most recent call last):\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py\", line 743, in _run_callback\r\n        ret = callback()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py\", line 767, in _discard_future_result\r\n        future.result()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py\", line 2430, in update_last_activity\r\n        routes = await self.proxy.get_all_routes()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 806, in get_all_routes\r\n        resp = await self.api_request('', client=client)\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 774, in api_request\r\n        result = await client.fetch(req)\r\n    tornado.curl_httpclient.CurlError: HTTP 599: Unknown\r\n\r\n20:51:16.503 [ConfigProxy] error: 503 GET /user/lzw/api/sessions?_=1582029689970 Error: connect EINVAL 127.0.0.1:58148 - Local (0.0.0.0:0)\r\n[E 2020-02-18 21:37:15.729 JupyterHub ioloop:763] Exception in callback functools.partial(<bound method IOLoop._discard_future_result of <tornado.platform.asyncio.AsyncIOMainLoop object at 0x7fd851133f90>>, <Task finished coro=<JupyterHub.update_last_activity() done, defined at /home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py:2428> exception=HTTP 599: Unknown>)\r\n    Traceback (most recent call last):\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py\", line 743, in _run_callback\r\n        ret = callback()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py\", line 767, in _discard_future_result\r\n        future.result()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py\", line 2430, in update_last_activity\r\n        routes = await self.proxy.get_all_routes()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 806, in get_all_routes\r\n        resp = await self.api_request('', client=client)\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 774, in api_request\r\n        result = await client.fetch(req)\r\n    tornado.curl_httpclient.CurlError: HTTP 599: Unknown\r\n\r\n21:37:15.733 [ConfigProxy] error: Failed to get custom error page: Error: connect EINVAL 127.0.0.1:8900 - Local (0.0.0.0:0)\r\n[E 2020-02-18 21:37:15.725 SingleUserNotebookApp singleuser:548] Error notifying Hub of activity\r\n    Traceback (most recent call last):\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/singleuser.py\", line 546, in keep_activity_updated\r\n        await self.notify_activity()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/singleuser.py\", line 533, in notify_activity\r\n        timeout=60,\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/utils.py\", line 177, in exponential_backoff\r\n        raise TimeoutError(fail_message)\r\n    TimeoutError: Failed to notify Hub of activity\r\n[I 2020-02-18 21:37:15.745 SingleUserNotebookApp kernelmanager:217] Starting buffering for 937f4d0b-8152-4816-a2ee-6cec7eb40f2e:81a151e7809f4ea48c6b86ce8bb88b30\r\n[I 2020-02-18 21:37:15.747 SingleUserNotebookApp kernelmanager:217] Starting buffering for 40641cb0-cbf2-4659-a60d-d2dca428e583:49ca32328b694bae805c2aeab9b2f0b7\r\n\r\n\r\n[E 2020-02-18 21:41:12.035 JupyterHub ioloop:763] Exception in callback functools.partial(<bound method IOLoop._discard_future_result of <tornado.platform.asyncio.AsyncIOMainLoop object at 0x7fd851133f90>>, <Task finished coro=<JupyterHub.update_last_activity() done, defined at /home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py:2428> exception=HTTP 599: Unknown>)\r\n    Traceback (most recent call last):\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py\", line 743, in _run_callback\r\n        ret = callback()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py\", line 767, in _discard_future_result\r\n        future.result()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/app.py\", line 2430, in update_last_activity\r\n        routes = await self.proxy.get_all_routes()\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 806, in get_all_routes\r\n        resp = await self.api_request('', client=client)\r\n      File \"/home/lzw/anaconda3/lib/python3.7/site-packages/jupyterhub/proxy.py\", line 774, in api_request\r\n        result = await client.fetch(req)\r\n    tornado.curl_httpclient.CurlError: HTTP 599: Unknown\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2933", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2933/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2933/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2933/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2933", "id": 566750020, "node_id": "MDU6SXNzdWU1NjY3NTAwMjA=", "number": 2933, "title": "Unexpected error connecting to myPC", "user": {"login": "lzw-all-in", "id": 34850455, "node_id": "MDQ6VXNlcjM0ODUwNDU1", "avatar_url": "https://avatars1.githubusercontent.com/u/34850455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzw-all-in", "html_url": "https://github.com/lzw-all-in", "followers_url": "https://api.github.com/users/lzw-all-in/followers", "following_url": "https://api.github.com/users/lzw-all-in/following{/other_user}", "gists_url": "https://api.github.com/users/lzw-all-in/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzw-all-in/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzw-all-in/subscriptions", "organizations_url": "https://api.github.com/users/lzw-all-in/orgs", "repos_url": "https://api.github.com/users/lzw-all-in/repos", "events_url": "https://api.github.com/users/lzw-all-in/events{/privacy}", "received_events_url": "https://api.github.com/users/lzw-all-in/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-18T09:14:54Z", "updated_at": "2020-02-18T10:24:01Z", "closed_at": "2020-02-18T10:24:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nIs there anyone can help me to fix this problem ? \r\n - Operating System Ubuntu 18.04\r\n - JupyterHub 1.1.0\r\n\r\n[W 2020-02-18 17:09:58.840 JupyterHub app:678] JupyterHub.proxy_api_port is deprecated in JupyterHub 0.8, use ConfigurableHTTPProxy.api_url\r\n[I 2020-02-18 17:09:58.843 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-02-18 17:09:58.843 JupyterHub app:2271] Using Authenticator: jupyterhub.auth.PAMAuthenticator-1.1.0\r\n[I 2020-02-18 17:09:58.844 JupyterHub app:2271] Using Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\n[I 2020-02-18 17:09:58.845 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-02-18 17:09:58.855 JupyterHub app:1349] Loading cookie_secret from /home/lzw/jupyterhub_cookie_secret\r\n[I 2020-02-18 17:09:58.897 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\n[W 2020-02-18 17:09:58.899 JupyterHub app:1624] No admin users, admin interface will be unavailable.\r\n[W 2020-02-18 17:09:58.899 JupyterHub app:1626] Add any administrative users to `c.Authenticator.admin_users` in config.\r\n[I 2020-02-18 17:09:58.900 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10\r\n[I 2020-02-18 17:09:58.946 JupyterHub app:2311] Initialized 0 spawners in 0.005 seconds\r\n[W 2020-02-18 17:09:58.952 JupyterHub proxy:517] Found proxy pid file: /home/lzw/jupyterhub-proxy.pid\r\n[W 2020-02-18 17:09:58.953 JupyterHub proxy:534] Proxy still running at pid=9278\r\n17:09:58.954 [ConfigProxy] warn: Terminated\r\n[W 2020-02-18 17:09:59.954 JupyterHub proxy:554] Stopped proxy at pid=9278\r\n[W 2020-02-18 17:09:59.962 JupyterHub proxy:643] Running JupyterHub without SSL.  I hope there is SSL termination happening somewhere else...\r\n[I 2020-02-18 17:09:59.964 JupyterHub proxy:646] Starting proxy @ http://:9002/\r\n[E 2020-02-18 17:10:00.013 JupyterHub utils:75] Unexpected error connecting to ZhiwenPC:9002 [Errno 22] Invalid argument\r\n[E 2020-02-18 17:10:00.112 JupyterHub utils:75] Unexpected error connecting to ZhiwenPC:9002 [Errno 22] Invalid argument\r\n[E 2020-02-18 17:10:00.411 JupyterHub utils:75] Unexpected error connecting to ZhiwenPC:9002 [Errno 22] Invalid argument\r\n[E 2020-02-18 17:10:00.578 JupyterHub utils:75] Unexpected error connecting to ZhiwenPC:9002 [Errno 22] Invalid argument", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2932", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2932/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2932/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2932/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2932", "id": 566090944, "node_id": "MDU6SXNzdWU1NjYwOTA5NDQ=", "number": 2932, "title": "Not able to embed Jupyterlab running on Jupyterhub into an iframe.", "user": {"login": "as-sher", "id": 22812395, "node_id": "MDQ6VXNlcjIyODEyMzk1", "avatar_url": "https://avatars1.githubusercontent.com/u/22812395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/as-sher", "html_url": "https://github.com/as-sher", "followers_url": "https://api.github.com/users/as-sher/followers", "following_url": "https://api.github.com/users/as-sher/following{/other_user}", "gists_url": "https://api.github.com/users/as-sher/gists{/gist_id}", "starred_url": "https://api.github.com/users/as-sher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/as-sher/subscriptions", "organizations_url": "https://api.github.com/users/as-sher/orgs", "repos_url": "https://api.github.com/users/as-sher/repos", "events_url": "https://api.github.com/users/as-sher/events{/privacy}", "received_events_url": "https://api.github.com/users/as-sher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-17T06:48:59Z", "updated_at": "2020-06-02T22:11:35Z", "closed_at": "2020-06-02T22:11:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to integrate jupyterlab running with jupyterhub into an iframe. I made all the required changes in the configuration files. In the jupyter_notebook_config.py \r\n\r\nI have made the following changes.\r\nc.NotebookApp.tornado_settings = {'headers': {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Content-Security-Policy': 'frame-ancestors http://localhost:9005'\r\n  }}\r\n\r\nWhile in the jupyterhub_config.py I have added the following\r\nc.JupyterHub.tornado_settings = {'headers': {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Content-Security-Policy': 'frame-ancestors http://localhost:9005'\r\n  }}\r\n\r\nBut still, when I try to open http://localhost:8002/user/admin/lab URL in the iframe I get the following error\r\n\r\nRefused to display 'http://localhost:8002/user/admin/lab' in a frame because an ancestor violates the following Content Security Policy directive: \"frame-ancestors 'self'\".\r\n\r\nCan someone let me know if I am missing something or is there an issue with my configuration?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2931", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2931/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2931/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2931/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2931", "id": 565848104, "node_id": "MDU6SXNzdWU1NjU4NDgxMDQ=", "number": 2931, "title": "Can I configure Jupyter Notebook path in Jupyterhub", "user": {"login": "lzw-all-in", "id": 34850455, "node_id": "MDQ6VXNlcjM0ODUwNDU1", "avatar_url": "https://avatars1.githubusercontent.com/u/34850455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzw-all-in", "html_url": "https://github.com/lzw-all-in", "followers_url": "https://api.github.com/users/lzw-all-in/followers", "following_url": "https://api.github.com/users/lzw-all-in/following{/other_user}", "gists_url": "https://api.github.com/users/lzw-all-in/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzw-all-in/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzw-all-in/subscriptions", "organizations_url": "https://api.github.com/users/lzw-all-in/orgs", "repos_url": "https://api.github.com/users/lzw-all-in/repos", "events_url": "https://api.github.com/users/lzw-all-in/events{/privacy}", "received_events_url": "https://api.github.com/users/lzw-all-in/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-16T04:09:28Z", "updated_at": "2020-02-18T06:46:19Z", "closed_at": "2020-02-18T06:46:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, for my situation I need to specify a Jupyter Notebook path not defualt path in ur configuration. Where can I modify it ? Thanks !", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2928", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2928/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2928/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2928/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2928", "id": 565209348, "node_id": "MDU6SXNzdWU1NjUyMDkzNDg=", "number": 2928, "title": "Extremely slow hub start up with large numbers of users", "user": {"login": "sdague", "id": 14367, "node_id": "MDQ6VXNlcjE0MzY3", "avatar_url": "https://avatars3.githubusercontent.com/u/14367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdague", "html_url": "https://github.com/sdague", "followers_url": "https://api.github.com/users/sdague/followers", "following_url": "https://api.github.com/users/sdague/following{/other_user}", "gists_url": "https://api.github.com/users/sdague/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdague/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdague/subscriptions", "organizations_url": "https://api.github.com/users/sdague/orgs", "repos_url": "https://api.github.com/users/sdague/repos", "events_url": "https://api.github.com/users/sdague/events{/privacy}", "received_events_url": "https://api.github.com/users/sdague/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2020-02-14T09:36:53Z", "updated_at": "2020-02-27T14:55:26Z", "closed_at": "2020-02-20T16:06:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWe have an instance of JupyterHub with over 50,000 users in it, connected to a custom authenticator. When starting the hub pod it takes over 15 minutes to get to the ready state, where it is accepting requests. During this period of time the Hub is effectively offline for users and they can not start notebooks. This appears to be linear related to users based on the delays we were seeing at 30,000.\r\n\r\n**To Reproduce**\r\n\r\n1. Create 50k+ users\r\n2. Boot hub, see how long until pod goes to ready state\r\n\r\n**Expected behavior**\r\n\r\nIdeally this would take a lot less time. \r\n\r\n**Compute Information**\r\n - Kubernetes 1.15\r\n - JupyterHub Version - jupyterhub/k8s-hub:0.9.0-beta.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2927", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2927/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2927/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2927/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2927", "id": 563930908, "node_id": "MDU6SXNzdWU1NjM5MzA5MDg=", "number": 2927, "title": "JupyterHub singleuser not able to use tensorflow gpu support using systemdspawner", "user": {"login": "ccauet", "id": 2505540, "node_id": "MDQ6VXNlcjI1MDU1NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2505540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccauet", "html_url": "https://github.com/ccauet", "followers_url": "https://api.github.com/users/ccauet/followers", "following_url": "https://api.github.com/users/ccauet/following{/other_user}", "gists_url": "https://api.github.com/users/ccauet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccauet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccauet/subscriptions", "organizations_url": "https://api.github.com/users/ccauet/orgs", "repos_url": "https://api.github.com/users/ccauet/repos", "events_url": "https://api.github.com/users/ccauet/events{/privacy}", "received_events_url": "https://api.github.com/users/ccauet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-12T11:18:33Z", "updated_at": "2020-02-15T11:46:40Z", "closed_at": "2020-02-15T11:46:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "(_this is a crossposting to [SO](https://stackoverflow.com/questions/60187732/jupyterhub-singleuser-not-able-to-use-tensorflow-gpu-support-using-systemdspawne), the [jupyterhub issue tracker](https://github.com/jupyterhub/jupyterhub/issues/2927) and the [jupyterhub/systemdspawner issue tracker](https://github.com/jupyterhub/systemdspawner/issues/67)_)\r\n\r\nI have a private JupyterHub Setup using a `SystemdSpawner` where I try to run tensorflow with gpu support.\r\n\r\nI followed the tensorflow [instructions](https://www.tensorflow.org/install/gpu) and alternatively tried a already provisioned AWS AMI (Deep Learning Base AMI (Ubuntu 18.04) Version 21.0) with NDVIDIA, both on AWS EC2 g4 instances.\r\n\r\nOn both setups I'm able to use tensorflow with gpu support in an (i)python 3.6 shell\r\n\r\n```\r\n>>> import tensorflow as tf\r\n>>> tf.config.list_physical_devices('GPU')\r\n2020-02-12 10:57:13.670937: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n2020-02-12 10:57:13.698230: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-02-12 10:57:13.699066: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties:\r\npciBusID: 0000:00:1e.0 name: Tesla T4 computeCapability: 7.5\r\ncoreClock: 1.59GHz coreCount: 40 deviceMemorySize: 14.73GiB deviceMemoryBandwidth: 298.08GiB/s\r\n2020-02-12 10:57:13.699286: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-02-12 10:57:13.700918: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2020-02-12 10:57:13.702512: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2020-02-12 10:57:13.702814: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2020-02-12 10:57:13.704561: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2020-02-12 10:57:13.705586: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2020-02-12 10:57:13.709171: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-02-12 10:57:13.709278: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-02-12 10:57:13.710120: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-02-12 10:57:13.710893: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0\r\n[PhysicalDevice(name='/physical_device:GPU:0', device_type='GPU')]\r\n```\r\n(some warnings about NUMA node, but the gpu is found)\r\n\r\nAlso using `nvidia-smi` and `deviceQuery` shows the gpu:\r\n\r\n```\r\n$ nvidia-smi\r\nWed Feb 12 10:39:44 2020\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 418.87.01    Driver Version: 418.87.01    CUDA Version: 10.1     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Tesla T4            On   | 00000000:00:1E.0 Off |                    0 |\r\n| N/A   33C    P8     9W /  70W |      0MiB / 15079MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\n```\r\n$ /usr/local/cuda/extras/demo_suite/deviceQuery\r\n/usr/local/cuda/extras/demo_suite/deviceQuery Starting...\r\n\r\n CUDA Device Query (Runtime API) version (CUDART static linking)\r\n\r\nDetected 1 CUDA Capable device(s)\r\n\r\nDevice 0: \"Tesla T4\"\r\n  CUDA Driver Version / Runtime Version          10.1 / 10.0\r\n  CUDA Capability Major/Minor version number:    7.5\r\n  Total amount of global memory:                 15080 MBytes (15812263936 bytes)\r\n  (40) Multiprocessors, ( 64) CUDA Cores/MP:     2560 CUDA Cores\r\n  GPU Max Clock rate:                            1590 MHz (1.59 GHz)\r\n  Memory Clock rate:                             5001 Mhz\r\n  Memory Bus Width:                              256-bit\r\n  L2 Cache Size:                                 4194304 bytes\r\n  Maximum Texture Dimension Size (x,y,z)         1D=(131072), 2D=(131072, 65536), 3D=(16384, 16384, 16384)\r\n  Maximum Layered 1D Texture Size, (num) layers  1D=(32768), 2048 layers\r\n  Maximum Layered 2D Texture Size, (num) layers  2D=(32768, 32768), 2048 layers\r\n  Total amount of constant memory:               65536 bytes\r\n  Total amount of shared memory per block:       49152 bytes\r\n  Total number of registers available per block: 65536\r\n  Warp size:                                     32\r\n  Maximum number of threads per multiprocessor:  1024\r\n  Maximum number of threads per block:           1024\r\n  Max dimension size of a thread block (x,y,z): (1024, 1024, 64)\r\n  Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)\r\n  Maximum memory pitch:                          2147483647 bytes\r\n  Texture alignment:                             512 bytes\r\n  Concurrent copy and kernel execution:          Yes with 3 copy engine(s)\r\n  Run time limit on kernels:                     No\r\n  Integrated GPU sharing Host Memory:            No\r\n  Support host page-locked memory mapping:       Yes\r\n  Alignment requirement for Surfaces:            Yes\r\n  Device has ECC support:                        Enabled\r\n  Device supports Unified Addressing (UVA):      Yes\r\n  Device supports Compute Preemption:            Yes\r\n  Supports Cooperative Kernel Launch:            Yes\r\n  Supports MultiDevice Co-op Kernel Launch:      Yes\r\n  Device PCI Domain ID / Bus ID / location ID:   0 / 0 / 30\r\n  Compute Mode:\r\n     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >\r\n\r\ndeviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 10.1, CUDA Runtime Version = 10.0, NumDevs = 1, Device0 = Tesla T4\r\nResult = PASS\r\n```\r\n\r\nNow I start the JupyterHub, login, and open a terminal, there I get:\r\n\r\n```\r\n$ nvidia-smi\r\nNVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.\r\n```\r\nand \r\n```\r\n$ /usr/local/cuda/extras/demo_suite/deviceQuery\r\ncuda/extras/demo_suite/deviceQuery Starting...\r\n\r\n CUDA Device Query (Runtime API) version (CUDART static linking)\r\n\r\ncudaGetDeviceCount returned 38\r\n-> no CUDA-capable device is detected\r\nResult = FAIL\r\n```\r\nand also \r\n\r\n![Screenshot 2020-02-12 12 08 46](https://user-images.githubusercontent.com/2505540/74329636-7a420d80-4d90-11ea-86e8-fdb3c5263c31.png)\r\n\r\nI suspect some kind of \"sandbox\", missing ENV vars, etc. due to that the gpu drivers are not found inside the singleuser environment and subsequently the tensorflow gpu support does not work.\r\n\r\nAny ideas on this? Probably it is either a small configuration tweak or due to the architecture not solvable at all ;) \r\n\r\nThanks a lot!\r\n\r\nEDIT: link to SO post", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2926", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2926/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2926/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2926/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2926", "id": 562706173, "node_id": "MDU6SXNzdWU1NjI3MDYxNzM=", "number": 2926, "title": "Paginate users under /admin template", "user": {"login": "cbjuan", "id": 2938045, "node_id": "MDQ6VXNlcjI5MzgwNDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2938045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbjuan", "html_url": "https://github.com/cbjuan", "followers_url": "https://api.github.com/users/cbjuan/followers", "following_url": "https://api.github.com/users/cbjuan/following{/other_user}", "gists_url": "https://api.github.com/users/cbjuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbjuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbjuan/subscriptions", "organizations_url": "https://api.github.com/users/cbjuan/orgs", "repos_url": "https://api.github.com/users/cbjuan/repos", "events_url": "https://api.github.com/users/cbjuan/events{/privacy}", "received_events_url": "https://api.github.com/users/cbjuan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-02-10T17:15:15Z", "updated_at": "2020-05-11T11:36:10Z", "closed_at": "2020-05-11T11:36:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!---\r\nHi! Thanks for using JupyterHub.\r\n\r\nIf you are reporting an issue with JupyterHub, please use the GitHub search feature to check if your issue has been asked already. If it has, please add your comments to the existing issue.\r\n\r\nSome tips:\r\n- Running `jupyter troubleshoot` from the command line, if possible, and posting\r\nits output would also be helpful.\r\n- Running JupyterHub in `--debug` mode (`jupyterhub --debug`) can also be helpful for troubleshooting.\r\n--->\r\n\r\n**Describe the bug**\r\nWhen using JupyterHub in an environment with a lot of users (example, 50K users), if I try to access the `/hub/admin` page, the website takes a long time to render every user. \r\n\r\nFor example, when loading the URL `/hub/admin` with 50K users, the handler to serve the users for the admin view - https://github.com/jupyterhub/jupyterhub/blob/master/jupyterhub/handlers/pages.py#L399-  takes about 7 seconds to retrieve the data and pass all the information to the template. Meanwhile, the rendering of the template https://github.com/jupyterhub/jupyterhub/blob/master/share/jupyterhub/templates/admin.html takes about 1 minute to complete the display of every element. Tests made using a local Postgres database.\r\n\r\nCould it be possible to improve this behavior? Probably, paginating users or taking a similar approach could work.\r\n\r\n<!---Add description here--->\r\n\r\n**To Reproduce**\r\n<!---\r\nPlease share the steps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n--->\r\n1. Have a high amount of users in JupyterHub database (my tests: 50,000)\r\n2. After starting the JupyterHub (which takes a long time too), log in with an admin user and navigate to the admin web view (/hub/admin).\r\n3. Wait until the webpage is fully rendered (~1 min). This is because the template renders each user individually in the table: `{% for user in users %}`.\r\n\r\n\r\n**Expected behavior**\r\n<!---\r\nA clear and concise description of what you expected to happen.\r\n--->\r\nIt would be great if admins of that kind of JupyterHubs don't need to wait so long to get the users. Probably, we can paginate users or make async rendering.\r\n\r\n**Compute Information**\r\n - Operating System: OSX\r\n - JupyterHub Version [e.g. 22]: Last version available in GitHub https://github.com/jupyterhub/jupyterhub/tree/22f86ad76c437d37bc26c28d9fecfa5457ef5974\r\n\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2924", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2924/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2924/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2924/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2924", "id": 561816962, "node_id": "MDU6SXNzdWU1NjE4MTY5NjI=", "number": 2924, "title": "Option to allow implicit server spawn", "user": {"login": "charnpreetsingh", "id": 16314651, "node_id": "MDQ6VXNlcjE2MzE0NjUx", "avatar_url": "https://avatars3.githubusercontent.com/u/16314651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charnpreetsingh", "html_url": "https://github.com/charnpreetsingh", "followers_url": "https://api.github.com/users/charnpreetsingh/followers", "following_url": "https://api.github.com/users/charnpreetsingh/following{/other_user}", "gists_url": "https://api.github.com/users/charnpreetsingh/gists{/gist_id}", "starred_url": "https://api.github.com/users/charnpreetsingh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charnpreetsingh/subscriptions", "organizations_url": "https://api.github.com/users/charnpreetsingh/orgs", "repos_url": "https://api.github.com/users/charnpreetsingh/repos", "events_url": "https://api.github.com/users/charnpreetsingh/events{/privacy}", "received_events_url": "https://api.github.com/users/charnpreetsingh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-02-07T19:06:12Z", "updated_at": "2020-02-22T15:05:43Z", "closed_at": "2020-02-22T15:05:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "JupyterHub version 1.0.0 introduced a change to no longer implicitly spawn a user user if it's not running. A number of users find the \"Server not Running\" page confusing, especially coming from a non-technical audience or from past JupyterHub versions where servers launched in the background. It would be nice to add an option to the JupyterHub config to disable/enable implicit spawning of servers. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2923", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2923/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2923/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2923/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2923", "id": 560940250, "node_id": "MDU6SXNzdWU1NjA5NDAyNTA=", "number": 2923, "title": "Jupyter terminal no longer sourcing .profile or .bashrc. ", "user": {"login": "fionnmk", "id": 41059531, "node_id": "MDQ6VXNlcjQxMDU5NTMx", "avatar_url": "https://avatars2.githubusercontent.com/u/41059531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fionnmk", "html_url": "https://github.com/fionnmk", "followers_url": "https://api.github.com/users/fionnmk/followers", "following_url": "https://api.github.com/users/fionnmk/following{/other_user}", "gists_url": "https://api.github.com/users/fionnmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/fionnmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fionnmk/subscriptions", "organizations_url": "https://api.github.com/users/fionnmk/orgs", "repos_url": "https://api.github.com/users/fionnmk/repos", "events_url": "https://api.github.com/users/fionnmk/events{/privacy}", "received_events_url": "https://api.github.com/users/fionnmk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-02-06T11:07:24Z", "updated_at": "2020-04-22T03:00:29Z", "closed_at": "2020-04-22T03:00:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "We upgraded our JupyterHub recently, and now terminal no longer sources .profile or .bashrc when launched. We now must enter \"bash\" for it to source these files.\r\n\r\nI have issued my problem in this stackoverflow post.\r\n\r\nhttps://stackoverflow.com/questions/60073276/how-to-login-to-bash-with-current-user-and-the-users-bashrc-file-in-jupyterl\r\n\r\n\r\nI have tried all the suggestions [here](https://github.com/jupyterhub/jupyterhub/issues/1993) with no avail.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2922", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2922/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2922/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2922/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2922", "id": 560716584, "node_id": "MDU6SXNzdWU1NjA3MTY1ODQ=", "number": 2922, "title": "Nbgitpuller: Githubenterprise Public Repo Authentication Issue", "user": {"login": "heyitsaakash", "id": 17155549, "node_id": "MDQ6VXNlcjE3MTU1NTQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/17155549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heyitsaakash", "html_url": "https://github.com/heyitsaakash", "followers_url": "https://api.github.com/users/heyitsaakash/followers", "following_url": "https://api.github.com/users/heyitsaakash/following{/other_user}", "gists_url": "https://api.github.com/users/heyitsaakash/gists{/gist_id}", "starred_url": "https://api.github.com/users/heyitsaakash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heyitsaakash/subscriptions", "organizations_url": "https://api.github.com/users/heyitsaakash/orgs", "repos_url": "https://api.github.com/users/heyitsaakash/repos", "events_url": "https://api.github.com/users/heyitsaakash/events{/privacy}", "received_events_url": "https://api.github.com/users/heyitsaakash/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-06T00:58:23Z", "updated_at": "2020-06-02T22:12:00Z", "closed_at": "2020-06-02T22:12:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi i am using nbgitpuller with Github enterprise on a public repo.  in my config file i have this entry - \r\nimport os\r\nos.environ['GITHUB_HOST'] = \"xx-xx-17-xx.us-east-2.compute.amazonaws.com\"\r\nos.environ['GITHUB_HTTP'] = \"1\"\r\nfrom oauthenticator.github import LocalGitHubOAuthenticator\r\nc.JupyterHub.authenticator_class = LocalGitHubOAuthenticator\r\nc.LocalGitHubOAuthenticator.create_system_users = True\r\nc.Authenticator.add_user_cmd =  ['adduser', '--home', '/home/USERNAME']\r\n\r\n----------------------------\r\n\r\nI am able to authenticate myself and login but when i try to hit the url to acccess \r\nhttp://xx-xx-xx-xx:8000/hub/user-redirect/git-pull?repo=http://yy-yy-yy-yy/aakashsharma/ai-accelerator-recipes&branch=master&urlPath=Credit_Fraud.ipynb\r\n\r\nI get an error . Apparently, it is because it is again asking for authentication Since it is github enterprise.\r\n------------------\r\ngit fetch\r\nfatal: could not read Username for 'xx: No such device or address\r\nTraceback (most recent call last):\r\nFile \"/usr/lib64/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n--------------------------------------------------------------\r\nbut if i have already authenticated myself and logged in it should use the same token which is n't the case. If i am missing something please tell me else please let me know if thats the issue with github enterprise.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2921", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2921/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2921/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2921/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2921", "id": 559685240, "node_id": "MDU6SXNzdWU1NTk2ODUyNDA=", "number": 2921, "title": "Permission issue jupyterhub :error no 13 Permission denied git", "user": {"login": "heyitsaakash", "id": 17155549, "node_id": "MDQ6VXNlcjE3MTU1NTQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/17155549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heyitsaakash", "html_url": "https://github.com/heyitsaakash", "followers_url": "https://api.github.com/users/heyitsaakash/followers", "following_url": "https://api.github.com/users/heyitsaakash/following{/other_user}", "gists_url": "https://api.github.com/users/heyitsaakash/gists{/gist_id}", "starred_url": "https://api.github.com/users/heyitsaakash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heyitsaakash/subscriptions", "organizations_url": "https://api.github.com/users/heyitsaakash/orgs", "repos_url": "https://api.github.com/users/heyitsaakash/repos", "events_url": "https://api.github.com/users/heyitsaakash/events{/privacy}", "received_events_url": "https://api.github.com/users/heyitsaakash/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-04T12:23:45Z", "updated_at": "2020-02-06T00:42:48Z", "closed_at": "2020-02-06T00:42:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi i am using nbgitpuller in jupyter hub to fetch certain notebooks in public git repositories.\r\n\r\nAlso, I am using github authentication it is working fine.\r\n\r\nWhen i am trying to hit the url below (formed from nbgitpuller link)\r\n\r\nhttp://ec2-xx.-xx-xx.compute-1.amazonaws.com:8000/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fxxxakash%2Fsagemaker-experiment&urlpath=tree%2Fexperiment%2FUntitled.ipynb&branch=master\r\n\r\nI am getting an exception that is related to permission. I also changed the permission using chmod 777 of the user's directory /home/aakash in my case still it is not resolving.\r\nTraceback (most recent call last):\r\nFile \"/usr/lib64/python3.7/threading.py\", line 926, in _bootstrap_inner\r\nself.run()\r\nFile \"/usr/lib64/python3.7/threading.py\", line 870, in run\r\nself._target(*self._args, **self._kwargs)\r\nFile \"/usr/local/lib/python3.7/site-packages/nbgitpuller/handlers.py\", line 85, in pull\r\nraise e\r\nFile \"/usr/local/lib/python3.7/site-packages/nbgitpuller/handlers.py\", line 79, in pull\r\nfor line in gp.pull():\r\nFile \"/usr/local/lib/python3.7/site-packages/nbgitpuller/pull.py\", line 79, in pull\r\nyield from self.initialize_repo()\r\nFile \"/usr/local/lib/python3.7/site-packages/nbgitpuller/pull.py\", line 93, in initialize_repo\r\nyield from execute_cmd(clone_args)\r\nFile \"/usr/local/lib/python3.7/site-packages/nbgitpuller/pull.py\", line 19, in execute_cmd\r\nproc = subprocess.Popen(cmd, **kwargs)\r\nFile \"/usr/lib64/python3.7/subprocess.py\", line 775, in init\r\nrestore_signals, start_new_session)\r\nFile \"/usr/lib64/python3.7/subprocess.py\", line 1522, in _execute_child\r\nraise child_exception_type(errno_num, err_msg, err_filename)\r\nPermissionError: [Errno 13] Permission denied: 'git'\r\n\r\n![image](https://user-images.githubusercontent.com/17155549/73744718-5e7aae00-4777-11ea-8489-5f8402501767.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2920", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2920/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2920/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2920/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2920", "id": 559639146, "node_id": "MDU6SXNzdWU1NTk2MzkxNDY=", "number": 2920, "title": "LDAP integration is getting failed", "user": {"login": "Siddhu1096", "id": 22325249, "node_id": "MDQ6VXNlcjIyMzI1MjQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/22325249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Siddhu1096", "html_url": "https://github.com/Siddhu1096", "followers_url": "https://api.github.com/users/Siddhu1096/followers", "following_url": "https://api.github.com/users/Siddhu1096/following{/other_user}", "gists_url": "https://api.github.com/users/Siddhu1096/gists{/gist_id}", "starred_url": "https://api.github.com/users/Siddhu1096/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Siddhu1096/subscriptions", "organizations_url": "https://api.github.com/users/Siddhu1096/orgs", "repos_url": "https://api.github.com/users/Siddhu1096/repos", "events_url": "https://api.github.com/users/Siddhu1096/events{/privacy}", "received_events_url": "https://api.github.com/users/Siddhu1096/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-04T10:54:19Z", "updated_at": "2020-06-02T22:12:31Z", "closed_at": "2020-06-02T22:12:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\n\r\nI tried running this command \r\n```docker run -d -p 8000:8000 --name jupyterhub jupyterhub/jupyterhub jupyterhub``` \r\nto run the docker container and after executing, the container is up and running. Now, I'm in need of integrating jupyterhub with ldap authentication. Is there an alternate way to do this?\r\n\r\nThanks in advance!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2919", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2919/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2919/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2919/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2919", "id": 559578651, "node_id": "MDU6SXNzdWU1NTk1Nzg2NTE=", "number": 2919, "title": "Jupyterhub cant import tensorflow or numpy.", "user": {"login": "Yaswanth-Tippireddy", "id": 15027302, "node_id": "MDQ6VXNlcjE1MDI3MzAy", "avatar_url": "https://avatars3.githubusercontent.com/u/15027302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yaswanth-Tippireddy", "html_url": "https://github.com/Yaswanth-Tippireddy", "followers_url": "https://api.github.com/users/Yaswanth-Tippireddy/followers", "following_url": "https://api.github.com/users/Yaswanth-Tippireddy/following{/other_user}", "gists_url": "https://api.github.com/users/Yaswanth-Tippireddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yaswanth-Tippireddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yaswanth-Tippireddy/subscriptions", "organizations_url": "https://api.github.com/users/Yaswanth-Tippireddy/orgs", "repos_url": "https://api.github.com/users/Yaswanth-Tippireddy/repos", "events_url": "https://api.github.com/users/Yaswanth-Tippireddy/events{/privacy}", "received_events_url": "https://api.github.com/users/Yaswanth-Tippireddy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-04T09:06:40Z", "updated_at": "2020-02-21T14:25:05Z", "closed_at": "2020-02-21T14:25:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have followed the Jupyterhub installation instructions and built it from the ground up on ubuntu 18.04 . I am unable to import tensorflow or numpy. When i test for them using python outside of jupyter, they are working fine. Jupyter is unable to import them. \r\n\r\nHere is the stack trace.\r\n```\r\nERROR:root:Internal Python error in the inspect module.\r\nBelow is the traceback from this internal error.\r\n\r\nERROR:root:Internal Python error in the inspect module.\r\nBelow is the traceback from this internal error.\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 24, in <module>\r\n    from . import multiarray\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/multiarray.py\", line 14, in <module>\r\n    from . import overrides\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/overrides.py\", line 7, in <module>\r\n    from numpy.core._multiarray_umath import (\r\nModuleNotFoundError: No module named 'numpy.core._multiarray_umath'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3331, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-579f5beb11ce>\", line 3, in <module>\r\n    import tensorflow as tf\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/python/__init__.py\", line 47, in <module>\r\n    import numpy as np\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/__init__.py\", line 142, in <module>\r\n    from . import core\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 54, in <module>\r\n    raise ImportError(msg)\r\nImportError: \r\n\r\nIMPORTANT: PLEASE READ THIS FOR ADVICE ON HOW TO SOLVE THIS ISSUE!\r\n\r\nImporting the numpy c-extensions failed.\r\n- Try uninstalling and reinstalling numpy.\r\n- If you have already done that, then:\r\n  1. Check that you expected to use Python3.6 from \"/opt/jupyterhub/bin/python3\",\r\n     and that you have no directories in your PATH or PYTHONPATH that can\r\n     interfere with the Python and numpy version \"1.18.1\" you're trying to use.\r\n  2. If (1) looks fine, you can open a new issue at\r\n     https://github.com/numpy/numpy/issues.  Please include details on:\r\n     - how you installed Python\r\n     - how you installed numpy\r\n     - your operating system\r\n     - whether or not you have multiple versions of Python installed\r\n     - if you built from source, your compiler versions and ideally a build log\r\n\r\n- If you're working with a numpy git repository, try `git clean -xdf`\r\n  (removes all files not under version control) and rebuild numpy.\r\n\r\nNote: this error has many possible causes, so please don't comment on\r\nan existing issue about this - open a new one instead.\r\n\r\nOriginal error was: No module named 'numpy.core._multiarray_umath'\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 24, in <module>\r\n    from . import multiarray\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/multiarray.py\", line 14, in <module>\r\n    from . import overrides\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/overrides.py\", line 7, in <module>\r\n    from numpy.core._multiarray_umath import (\r\nModuleNotFoundError: No module named 'numpy.core._multiarray_umath'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1151, in get_records\r\n    return _fixed_getinnerframes(etb, number_of_lines_of_context, tb_offset)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 319, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 353, in _fixed_getinnerframes\r\n    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))\r\n  File \"/usr/lib/python3.6/inspect.py\", line 1490, in getinnerframes\r\n    frameinfo = (tb.tb_frame,) + getframeinfo(tb, context)\r\n  File \"/usr/lib/python3.6/inspect.py\", line 1448, in getframeinfo\r\n    filename = getsourcefile(frame) or getfile(frame)\r\n  File \"/usr/lib/python3.6/inspect.py\", line 696, in getsourcefile\r\n    if getattr(getmodule(object, filename), '__loader__', None) is not None:\r\n  File \"/usr/lib/python3.6/inspect.py\", line 733, in getmodule\r\n    if ismodule(module) and hasattr(module, '__file__'):\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 941, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/python/__init__.py\", line 47, in <module>\r\n    import numpy as np\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/__init__.py\", line 142, in <module>\r\n    from . import core\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 54, in <module>\r\n    raise ImportError(msg)\r\nImportError: \r\n\r\nIMPORTANT: PLEASE READ THIS FOR ADVICE ON HOW TO SOLVE THIS ISSUE!\r\n\r\nImporting the numpy c-extensions failed.\r\n- Try uninstalling and reinstalling numpy.\r\n- If you have already done that, then:\r\n  1. Check that you expected to use Python3.6 from \"/opt/jupyterhub/bin/python3\",\r\n     and that you have no directories in your PATH or PYTHONPATH that can\r\n     interfere with the Python and numpy version \"1.18.1\" you're trying to use.\r\n  2. If (1) looks fine, you can open a new issue at\r\n     https://github.com/numpy/numpy/issues.  Please include details on:\r\n     - how you installed Python\r\n     - how you installed numpy\r\n     - your operating system\r\n     - whether or not you have multiple versions of Python installed\r\n     - if you built from source, your compiler versions and ideally a build log\r\n\r\n- If you're working with a numpy git repository, try `git clean -xdf`\r\n  (removes all files not under version control) and rebuild numpy.\r\n\r\nNote: this error has many possible causes, so please don't comment on\r\nan existing issue about this - open a new one instead.\r\n\r\nOriginal error was: No module named 'numpy.core._multiarray_umath'\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 24, in <module>\r\n    from . import multiarray\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/multiarray.py\", line 14, in <module>\r\n    from . import overrides\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/overrides.py\", line 7, in <module>\r\n    from numpy.core._multiarray_umath import (\r\nModuleNotFoundError: No module named 'numpy.core._multiarray_umath'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3331, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-579f5beb11ce>\", line 3, in <module>\r\n    import tensorflow as tf\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/python/__init__.py\", line 47, in <module>\r\n    import numpy as np\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/__init__.py\", line 142, in <module>\r\n    from . import core\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 54, in <module>\r\n    raise ImportError(msg)\r\nImportError: \r\n\r\nIMPORTANT: PLEASE READ THIS FOR ADVICE ON HOW TO SOLVE THIS ISSUE!\r\n\r\nImporting the numpy c-extensions failed.\r\n- Try uninstalling and reinstalling numpy.\r\n- If you have already done that, then:\r\n  1. Check that you expected to use Python3.6 from \"/opt/jupyterhub/bin/python3\",\r\n     and that you have no directories in your PATH or PYTHONPATH that can\r\n     interfere with the Python and numpy version \"1.18.1\" you're trying to use.\r\n  2. If (1) looks fine, you can open a new issue at\r\n     https://github.com/numpy/numpy/issues.  Please include details on:\r\n     - how you installed Python\r\n     - how you installed numpy\r\n     - your operating system\r\n     - whether or not you have multiple versions of Python installed\r\n     - if you built from source, your compiler versions and ideally a build log\r\n\r\n- If you're working with a numpy git repository, try `git clean -xdf`\r\n  (removes all files not under version control) and rebuild numpy.\r\n\r\nNote: this error has many possible causes, so please don't comment on\r\nan existing issue about this - open a new one instead.\r\n\r\nOriginal error was: No module named 'numpy.core._multiarray_umath'\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3254, in run_ast_nodes\r\n    if (await self.run_code(code, result,  async_=asy)):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3348, in run_code\r\n    self.showtraceback(running_compiled_code=True)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1418, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1318, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1186, in structured_traceback\r\n    formatted_exceptions += self.prepare_chained_exception_message(evalue.__cause__)\r\nTypeError: must be str, not list\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 24, in <module>\r\n    from . import multiarray\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/multiarray.py\", line 14, in <module>\r\n    from . import overrides\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/overrides.py\", line 7, in <module>\r\n    from numpy.core._multiarray_umath import (\r\nModuleNotFoundError: No module named 'numpy.core._multiarray_umath'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1151, in get_records\r\n    return _fixed_getinnerframes(etb, number_of_lines_of_context, tb_offset)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 319, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 353, in _fixed_getinnerframes\r\n    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))\r\n  File \"/usr/lib/python3.6/inspect.py\", line 1490, in getinnerframes\r\n    frameinfo = (tb.tb_frame,) + getframeinfo(tb, context)\r\n  File \"/usr/lib/python3.6/inspect.py\", line 1448, in getframeinfo\r\n    filename = getsourcefile(frame) or getfile(frame)\r\n  File \"/usr/lib/python3.6/inspect.py\", line 696, in getsourcefile\r\n    if getattr(getmodule(object, filename), '__loader__', None) is not None:\r\n  File \"/usr/lib/python3.6/inspect.py\", line 733, in getmodule\r\n    if ismodule(module) and hasattr(module, '__file__'):\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 941, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/tensorflow_core/python/__init__.py\", line 47, in <module>\r\n    import numpy as np\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/__init__.py\", line 142, in <module>\r\n    from . import core\r\n  File \"/home/yaswanth/.local/lib/python3.7/site-packages/numpy/core/__init__.py\", line 54, in <module>\r\n    raise ImportError(msg)\r\nImportError: \r\n\r\nIMPORTANT: PLEASE READ THIS FOR ADVICE ON HOW TO SOLVE THIS ISSUE!\r\n\r\nImporting the numpy c-extensions failed.\r\n- Try uninstalling and reinstalling numpy.\r\n- If you have already done that, then:\r\n  1. Check that you expected to use Python3.6 from \"/opt/jupyterhub/bin/python3\",\r\n     and that you have no directories in your PATH or PYTHONPATH that can\r\n     interfere with the Python and numpy version \"1.18.1\" you're trying to use.\r\n  2. If (1) looks fine, you can open a new issue at\r\n     https://github.com/numpy/numpy/issues.  Please include details on:\r\n     - how you installed Python\r\n     - how you installed numpy\r\n     - your operating system\r\n     - whether or not you have multiple versions of Python installed\r\n     - if you built from source, your compiler versions and ideally a build log\r\n\r\n- If you're working with a numpy git repository, try `git clean -xdf`\r\n  (removes all files not under version control) and rebuild numpy.\r\n\r\nNote: this error has many possible causes, so please don't comment on\r\nan existing issue about this - open a new one instead.\r\n\r\nOriginal error was: No module named 'numpy.core._multiarray_umath'\r\n\r\n---------------------------------------------------------------------------\r\nModuleNotFoundError                       Traceback (most recent call last)\r\n~/.local/lib/python3.7/site-packages/numpy/core/__init__.py in <module>\r\n     23 try:\r\n---> 24     from . import multiarray\r\n     25 except ImportError as exc:\r\n\r\n~/.local/lib/python3.7/site-packages/numpy/core/multiarray.py in <module>\r\n     13 \r\n---> 14 from . import overrides\r\n     15 from . import _multiarray_umath\r\n\r\n~/.local/lib/python3.7/site-packages/numpy/core/overrides.py in <module>\r\n      6 \r\n----> 7 from numpy.core._multiarray_umath import (\r\n      8     add_docstring, implement_array_function, _get_implementing_args)\r\n\r\nModuleNotFoundError: No module named 'numpy.core._multiarray_umath'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py in showtraceback(self, exc_tuple, filename, tb_offset, exception_only, running_compiled_code)\r\n   2043                         # in the engines. This should return a list of strings.\r\n-> 2044                         stb = value._render_traceback_()\r\n   2045                     except Exception:\r\n\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTypeError                                 Traceback (most recent call last)\r\n/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py in run_code(self, code_obj, result, async_)\r\n   3346             if result is not None:\r\n   3347                 result.error_in_exec = sys.exc_info()[1]\r\n-> 3348             self.showtraceback(running_compiled_code=True)\r\n   3349         else:\r\n   3350             outflag = False\r\n\r\n/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/interactiveshell.py in showtraceback(self, exc_tuple, filename, tb_offset, exception_only, running_compiled_code)\r\n   2045                     except Exception:\r\n   2046                         stb = self.InteractiveTB.structured_traceback(etype,\r\n-> 2047                                             value, tb, tb_offset=tb_offset)\r\n   2048 \r\n   2049                     self._showtraceback(etype, value, stb)\r\n\r\n/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py in structured_traceback(self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n   1416             self.tb = tb\r\n   1417         return FormattedTB.structured_traceback(\r\n-> 1418             self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n   1419 \r\n   1420 \r\n\r\n/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py in structured_traceback(self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n   1316             # Verbose modes need a full traceback\r\n   1317             return VerboseTB.structured_traceback(\r\n-> 1318                 self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n   1319             )\r\n   1320         elif mode == 'Minimal':\r\n\r\n/opt/jupyterhub/lib/python3.6/site-packages/IPython/core/ultratb.py in structured_traceback(self, etype, evalue, etb, tb_offset, number_of_lines_of_context)\r\n   1184         exception = self.get_parts_of_chained_exception(evalue)\r\n   1185         if exception:\r\n-> 1186             formatted_exceptions += self.prepare_chained_exception_message(evalue.__cause__)\r\n   1187             etype, evalue, etb = exception\r\n   1188         else:\r\n\r\nTypeError: must be str, not list```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2918", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2918/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2918/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2918/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2918", "id": 558303010, "node_id": "MDU6SXNzdWU1NTgzMDMwMTA=", "number": 2918, "title": "Receiving 404 error when trying to change working directory for JupyterHub on Linux VM", "user": {"login": "gsr7af-a", "id": 60447486, "node_id": "MDQ6VXNlcjYwNDQ3NDg2", "avatar_url": "https://avatars1.githubusercontent.com/u/60447486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gsr7af-a", "html_url": "https://github.com/gsr7af-a", "followers_url": "https://api.github.com/users/gsr7af-a/followers", "following_url": "https://api.github.com/users/gsr7af-a/following{/other_user}", "gists_url": "https://api.github.com/users/gsr7af-a/gists{/gist_id}", "starred_url": "https://api.github.com/users/gsr7af-a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gsr7af-a/subscriptions", "organizations_url": "https://api.github.com/users/gsr7af-a/orgs", "repos_url": "https://api.github.com/users/gsr7af-a/repos", "events_url": "https://api.github.com/users/gsr7af-a/events{/privacy}", "received_events_url": "https://api.github.com/users/gsr7af-a/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-31T18:36:49Z", "updated_at": "2020-02-03T20:56:58Z", "closed_at": "2020-02-03T20:56:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!---\r\nIf you are reading this message, you have probably already searched the existing\r\nGitHub issues for JupyterHub. If you haven't tried a search, we encourage you to do so.\r\n\r\nIf you are unsure where to ask your question (Jupyter, JupyterHub, JupyterLab, etc.),\r\nplease ask on our [Discourse Q&A channel](https://discourse.jupyter.org/c/questions).\r\n\r\nIf you have a quick question about JupyterHub installation or configuratation, you\r\nmay ask on the [JupyterHub gitter channel](https://gitter.im/jupyterhub/jupyterhub).\r\n\r\n:sunny: Please be patient. We are volunteers and will address your question when we are able. :sunny:\r\n\r\nIf after trying the above steps, you still have an in-depth installation or\r\nconfiguration question, such as a possible bug, please file an issue below and include\r\nany relevant details.\r\n--->\r\nHello all,\r\n\r\nI'm working on setting up JupyterHub at my company on a Linux VM for myself and a couple other users. I'm able to get JupyterHub up and running when accessing it from the default working directory, but when I try to change the working directory in the jupyterhub_config.py file, I get a 404 error (I've changed the jupyterhub_config.py file by modifying the c.Spawner.default_url and c.Spawner.notebook_dir entries to the same desired directory).\r\n\r\nI feel like part of the issue is the design of the VM itself. My desired directory is in an entirely different folder than where my \"HOME\" directory is located. For example, my HOME directory is located at /home/user, whereas my desired directory is located in /apps/jupyter. I'm curious to see if that's the reason for the issue.\r\n\r\nBelow is the readout when I spin up the \"jupyterhub --debug\"\r\n\r\n(base) [user@linux_vm jupyter]$ jupyterhub --debug\r\n[D 2020-01-31 13:22:21.865 JupyterHub application:556] Looking for jupyterhub_config in /apps/invest\r\n[D 2020-01-31 13:22:21.866 JupyterHub application:578] Loaded config file: /apps/invest/jupyterhub_config.py\r\n[I 2020-01-31 13:22:21.867 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-01-31 13:22:21.867 JupyterHub app:2271] Using Authenticator: jupyterhub.auth.PAMAuthenticator-1.1.0\r\n[I 2020-01-31 13:22:21.867 JupyterHub app:2271] Using Spawner: jupyterhub.spawner.LocalProcessSpawner-1.1.0\r\n[I 2020-01-31 13:22:21.867 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-01-31 13:22:21.870 JupyterHub app:1349] Loading cookie_secret from /data01/apps/invest/jupyterhub_cookie_secret\r\n[D 2020-01-31 13:22:21.870 JupyterHub app:1516] Connecting to db: sqlite:///jupyterhub.sqlite\r\n[D 2020-01-31 13:22:21.887 JupyterHub orm:749] database schema version found: 4dc2d5a8c53c\r\n[I 2020-01-31 13:22:21.890 JupyterHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\n[I 2020-01-31 13:22:21.913 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10\r\n[D 2020-01-31 13:22:21.925 JupyterHub app:1914] Initializing spawners\r\n[D 2020-01-31 13:22:21.928 JupyterHub app:2011] Loading state for user from db\r\n[D 2020-01-31 13:22:21.928 JupyterHub app:2038] Loaded users:\r\n    user admin\r\n[I 2020-01-31 13:22:21.928 JupyterHub app:2311] Initialized 0 spawners in 0.003 seconds\r\n[W 2020-01-31 13:22:21.931 JupyterHub proxy:643] Running JupyterHub without SSL.  I hope there is SSL termination happening somewhere else...\r\n[I 2020-01-31 13:22:21.931 JupyterHub proxy:646] Starting proxy @ http://:8000\r\n[D 2020-01-31 13:22:21.931 JupyterHub proxy:647] Proxy cmd: ['configurable-http-proxy', '--ip', '', '--port', '8000', '--api-ip', '127.0.0.1', '--api-port', '8001', '--error-target', 'http://127.0.0.1:8081/hub/error']\r\n[D 2020-01-31 13:22:21.933 JupyterHub proxy:562] Writing proxy pid file: jupyterhub-proxy.pid\r\n13:22:22.437 [ConfigProxy] info: Proxying http://*:8000 to (no default)\r\n13:22:22.439 [ConfigProxy] info: Proxy API at http://127.0.0.1:8001/api/routes\r\n[D 2020-01-31 13:22:23.034 JupyterHub proxy:682] Proxy started and appears to be up\r\n[D 2020-01-31 13:22:23.035 JupyterHub proxy:766] Proxy: Fetching GET http://127.0.0.1:8001/api/routes\r\n13:22:23.042 [ConfigProxy] info: 200 GET /api/routes\r\n[I 2020-01-31 13:22:23.043 JupyterHub app:2556] Hub API listening on http://127.0.0.1:8081/hub/\r\n[D 2020-01-31 13:22:23.043 JupyterHub proxy:315] Fetching routes to check\r\n[D 2020-01-31 13:22:23.043 JupyterHub proxy:766] Proxy: Fetching GET http://127.0.0.1:8001/api/routes\r\n13:22:23.043 [ConfigProxy] info: 200 GET /api/routes\r\n[I 2020-01-31 13:22:23.044 JupyterHub proxy:320] Checking routes\r\n[I 2020-01-31 13:22:23.044 JupyterHub proxy:400] Adding default route for Hub: / => http://127.0.0.1:8081\r\n[D 2020-01-31 13:22:23.044 JupyterHub proxy:766] Proxy: Fetching POST http://127.0.0.1:8001/api/routes/\r\n13:22:23.045 [ConfigProxy] info: Adding route / -> http://127.0.0.1:8081\r\n13:22:23.045 [ConfigProxy] info: Route added / -> http://127.0.0.1:8081\r\n13:22:23.046 [ConfigProxy] info: 201 POST /api/routes/\r\n[I 2020-01-31 13:22:23.046 JupyterHub app:2631] JupyterHub is now running at http://:8000\r\n[D 2020-01-31 13:22:23.046 JupyterHub app:2233] It took 1.184 seconds for the Hub to start\r\n\r\nThis is my first time every working with Linux in any capacity as well as my first time installing JupyterHub (I've  installed Jupyter Notebooks on my local machine before), so I appreciate any and all advice.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2916", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2916/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2916/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2916/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2916", "id": 557387032, "node_id": "MDU6SXNzdWU1NTczODcwMzI=", "number": 2916, "title": "JupyterHub configuration behind (two) proxy", "user": {"login": "sntgluca", "id": 10941257, "node_id": "MDQ6VXNlcjEwOTQxMjU3", "avatar_url": "https://avatars1.githubusercontent.com/u/10941257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sntgluca", "html_url": "https://github.com/sntgluca", "followers_url": "https://api.github.com/users/sntgluca/followers", "following_url": "https://api.github.com/users/sntgluca/following{/other_user}", "gists_url": "https://api.github.com/users/sntgluca/gists{/gist_id}", "starred_url": "https://api.github.com/users/sntgluca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sntgluca/subscriptions", "organizations_url": "https://api.github.com/users/sntgluca/orgs", "repos_url": "https://api.github.com/users/sntgluca/repos", "events_url": "https://api.github.com/users/sntgluca/events{/privacy}", "received_events_url": "https://api.github.com/users/sntgluca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-01-30T10:05:12Z", "updated_at": "2020-03-24T08:59:49Z", "closed_at": "2020-03-24T08:59:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\n\r\nI already searched the issues track without success. There are a few similar tickets but no one was good enough for me. Hence, here's a new request :) \r\n\r\nI have a relatively complex setup, with two proxies before JupyterHub.\r\nWhile I don't have control on the first proxy, the second one, JupyterHub and the Jupyter notebooks server configuration can be modified. \r\n\r\nWhen a user connects, the browser always points to the first proxy, which handles authentication and redirects to the second proxy, handling encryption.\r\nI need to configure the system to **direct any internal web connection / request to the second proxy**, avoiding the first one (as in the scheme below). The reason is pretty technical: the first proxy doesn't support web-socket connections, hence dropping any web-socket attempts to use services like bokeh - i.e. from a dask dashboard.\r\n\r\n<img width=\"594\" alt=\"jupyterhub proxy setup\" src=\"https://user-images.githubusercontent.com/10941257/73439687-51615780-4350-11ea-858c-06ccc0a80525.png\">\r\n\r\nI tried several configurations, including changing `SingleUserNotebookApp.websocket_url`, `bind_url`, `hub_api_url` and a few others.\r\nRegardless, the bokeh server always tries to open a connection to the first proxy. Incidentally this is the address the browser is pointing to. I don't know if this is just a coincidence or a hint to the problem.\r\nThe second proxy is nginx, and it has been configured according to https://jupyterhub.readthedocs.io/en/stable/reference/config-proxy.html\r\n\r\nAnyone would like to give a suggestion?\r\nThanks\r\nGianluca", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2915", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2915/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2915/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2915/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2915", "id": 557291315, "node_id": "MDU6SXNzdWU1NTcyOTEzMTU=", "number": 2915, "title": "spawn docker notebooks bug after reboot", "user": {"login": "Dmitry1987", "id": 9369080, "node_id": "MDQ6VXNlcjkzNjkwODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9369080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dmitry1987", "html_url": "https://github.com/Dmitry1987", "followers_url": "https://api.github.com/users/Dmitry1987/followers", "following_url": "https://api.github.com/users/Dmitry1987/following{/other_user}", "gists_url": "https://api.github.com/users/Dmitry1987/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dmitry1987/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dmitry1987/subscriptions", "organizations_url": "https://api.github.com/users/Dmitry1987/orgs", "repos_url": "https://api.github.com/users/Dmitry1987/repos", "events_url": "https://api.github.com/users/Dmitry1987/events{/privacy}", "received_events_url": "https://api.github.com/users/Dmitry1987/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-01-30T06:25:21Z", "updated_at": "2020-06-02T22:13:44Z", "closed_at": "2020-06-02T22:13:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n**Describe the bug**\r\nAfter a reboot, the docker spawner stopped working, getting error in logs.\r\n**To Reproduce**\r\nReboot the server with the jupyterhub container, and try to use the docker spawner (start server as usual)\r\n**Expected behavior**\r\nA single user notebook docker starts.\r\n\r\n**Compute Information**\r\nubuntu, jupyterhub 1.0.0\r\n\r\nI am getting this error:\r\n```\r\n[E 2020-01-30 05:53:10.692 JupyterHub log:174] 500 GET /hub/spawn-pending/dima1987 (dima1987@162.158.59.43) 15.80ms\r\n[W 2020-01-30 05:53:11.933 JupyterHub dockerspawner:976] Removing container that should have been cleaned up: jupyter-dima1987. (id: d1e0381)\r\n[I 2020-01-30 05:53:11.933 JupyterHub dockerspawner:815] Removing container d1e0381a507a04dcdd0db1c6d47584407162b2f5e75e2920785f0716fc9dc93c\r\n[I 2020-01-30 05:53:11.974 JupyterHub dockerspawner:990] Created container jupyter-dima1987. (id: c4f5470) from image xxxxxxxx.dkr.ecr.us-east-1.amazonaws.com/evisort-jupyter-notebook:latest\r\n[I 2020-01-30 05:53:11.974 JupyterHub dockerspawner:1013] Starting container jupyter-dima1987. (id: c4f5470)\r\n[E 2020-01-30 05:53:12.070 JupyterHub user:626] Unhandled error starting dima1987's server: The 'ip' trait of a Server instance must be a unicode string, but a value of None <class 'NoneType'> was specified.\r\n[I 2020-01-30 05:53:12.092 JupyterHub log:174] 302 GET /hub/spawn/dima1987 -> /hub/spawn-pending/dima1987 (dima1987@0.0.0.0) 204.61ms\r\nERROR:asyncio:Task exception was never retrieved\r\nfuture: <Task finished coro=<BaseHandler.spawn_single_user() done, defined at /opt/conda/lib/python3.6/site-packages/jupyterhub/handlers/base.py:697> exception=TraitError(\"The 'ip' trait of a Server instance must be a unicode string, but a value of None <class 'NoneType'> was specified.\",)>\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 889, in spawn_single_user\r\n    timedelta(seconds=self.slow_spawn_timeout), finish_spawn_future\r\n  File \"/opt/conda/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 807, in finish_user_spawn\r\n    await spawn_future\r\n  File \"/opt/conda/lib/python3.6/site-packages/jupyterhub/user.py\", line 642, in spawn\r\n    raise e\r\n  File \"/opt/conda/lib/python3.6/site-packages/jupyterhub/user.py\", line 558, in spawn\r\n    server.ip = urlinfo.hostname\r\n  File \"/opt/conda/lib/python3.6/site-packages/traitlets/traitlets.py\", line 585, in __set__\r\n    self.set(obj, value)\r\n  File \"/opt/conda/lib/python3.6/site-packages/traitlets/traitlets.py\", line 559, in set\r\n    new_value = self._validate(obj, value)\r\n  File \"/opt/conda/lib/python3.6/site-packages/traitlets/traitlets.py\", line 591, in _validate\r\n    value = self.validate(obj, value)\r\n  File \"/opt/conda/lib/python3.6/site-packages/traitlets/traitlets.py\", line 2054, in validate\r\n    self.error(obj, value)\r\n  File \"/opt/conda/lib/python3.6/site-packages/traitlets/traitlets.py\", line 625, in error\r\n    raise TraitError(e)\r\ntraitlets.traitlets.TraitError: The 'ip' trait of a Server instance must be a unicode string, but a value of None <class 'NoneType'> was specified.\r\n[E 2020-01-30 05:53:12.209 JupyterHub pages:284] Previous spawn for dima1987 failed: The 'ip' trait of a Server instance must be a unicode string, but a value of None <class 'NoneType'> was specified.\r\n[E 2020-01-30 05:53:12.210 JupyterHub log:166] {\r\n      \"X-Real-Ip\": \"xxxxx\",\r\n      \"X-Forwarded-Server\": \"xxxxx\",\r\n      \"X-Forwarded-Proto\": \"https\",\r\n      \"X-Forwarded-Port\": \"443\",\r\n      \"X-Forwarded-Host\": \"stagingvm.jjjjj.com\",\r\n      \"X-Forwarded-For\": \"xxxxxx, xxxxx\",\r\n      \"Upgrade-Insecure-Requests\": \"1\",\r\n      \"Sec-Fetch-User\": \"?1\",\r\n      \"Sec-Fetch-Site\": \"same-origin\",\r\n      \"Sec-Fetch-Mode\": \"navigate\",\r\n      \"Referer\": \"https://stagingvm.jjjjjjjjjj.com/hub/spawn-pending/dima1987\",\r\n      \"Cookie\": \"jupyterhub-hub-login=[secret]; __cfduid=[secret]; _xsrf=[secret]; jupyterhub-session-id=[secret]\",\r\n      \"Cf-Visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\r\n      \"Cf-Ray\": \"xxxxxx-LAX\",\r\n      \"Cf-Ipcountry\": \"US\",\r\n      \"Cf-Connecting-Ip\": \"xxxxx\",\r\n      \"Cdn-Loop\": \"cloudflare\",\r\n      \"Accept-Language\": \"en-US,en;q=0.9,ru;q=0.8\",\r\n      \"Accept-Encoding\": \"gzip\",\r\n      \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\r\n      \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/xxxxxxx Safari/537.36\",\r\n      \"Host\": \"stagingvm.jjjjjjjjj.com\",\r\n      \"Connection\": \"close\"\r\n    }\r\n[E 2020-01-30 05:53:12.210 JupyterHub log:174] 500 GET /hub/spawn-pending/dima1987 (dima1987@xxxxxxxxxxx) 9.75ms\r\n[I 2020-01-30 05:57:58.129 JupyterHub proxy:319] Checking routes\r\n[I 2020-01-30 06:02:58.129 JupyterHub proxy:319] Checking routes\r\n[I 2020-01-30 06:07:58.129 JupyterHub proxy:319] Checking routes\r\n[I 2020-01-30 06:12:58.130 JupyterHub proxy:319] Checking routes\r\n\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2913", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2913/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2913/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2913/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2913", "id": 556983628, "node_id": "MDU6SXNzdWU1NTY5ODM2Mjg=", "number": 2913, "title": "Why does JupyterHub spawner timeout?", "user": {"login": "mokumar1202", "id": 60439407, "node_id": "MDQ6VXNlcjYwNDM5NDA3", "avatar_url": "https://avatars3.githubusercontent.com/u/60439407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mokumar1202", "html_url": "https://github.com/mokumar1202", "followers_url": "https://api.github.com/users/mokumar1202/followers", "following_url": "https://api.github.com/users/mokumar1202/following{/other_user}", "gists_url": "https://api.github.com/users/mokumar1202/gists{/gist_id}", "starred_url": "https://api.github.com/users/mokumar1202/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mokumar1202/subscriptions", "organizations_url": "https://api.github.com/users/mokumar1202/orgs", "repos_url": "https://api.github.com/users/mokumar1202/repos", "events_url": "https://api.github.com/users/mokumar1202/events{/privacy}", "received_events_url": "https://api.github.com/users/mokumar1202/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-29T16:42:43Z", "updated_at": "2020-03-22T17:04:04Z", "closed_at": "2020-03-22T17:04:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi All,\r\n\r\nI have completed setting up Anaconda distribution, installed JupyterHub but when i login to the Hub, i get Spawn failed: Server at http://127.0.0.1:35990/user// didn't respond in 30 seconds.\r\n\r\nI have tried many suggestions but nothing seems to fix it. I have also tried downgrading Tornado version to 4.5.3 but it failed as there were too many dependencies associated.\r\n\r\nPlease could someone help. I am on Conda version - 4.8.2 and Python version - 3.7.4\r\n\r\nJust FYI, i have also reinstalled Anaconda, configured Proxy, generated jupyterhub_config.py.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2912", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2912/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2912/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2912/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2912", "id": 556908694, "node_id": "MDU6SXNzdWU1NTY5MDg2OTQ=", "number": 2912, "title": "Connection Refused When Launching Without Proxy", "user": {"login": "mjstroud", "id": 47119705, "node_id": "MDQ6VXNlcjQ3MTE5NzA1", "avatar_url": "https://avatars0.githubusercontent.com/u/47119705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjstroud", "html_url": "https://github.com/mjstroud", "followers_url": "https://api.github.com/users/mjstroud/followers", "following_url": "https://api.github.com/users/mjstroud/following{/other_user}", "gists_url": "https://api.github.com/users/mjstroud/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjstroud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjstroud/subscriptions", "organizations_url": "https://api.github.com/users/mjstroud/orgs", "repos_url": "https://api.github.com/users/mjstroud/repos", "events_url": "https://api.github.com/users/mjstroud/events{/privacy}", "received_events_url": "https://api.github.com/users/mjstroud/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-29T14:44:39Z", "updated_at": "2020-01-29T15:17:10Z", "closed_at": "2020-01-29T15:17:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am attempting to start JupyterHub independent of the configurable-http-proxy, and am failing. When I start the hub with the proxy I have no issues, however when I disable it using the configuration options recommended here [https://jupyterhub.readthedocs.io/en/stable/reference/separate-proxy.html](https://jupyterhub.readthedocs.io/en/stable/reference/separate-proxy.html), I am getting the following error.\r\n```\r\n>> jupyterhub -f /etc/jupyterhub/jupyterhub_new_config.py\r\n[I 2020-01-28 10:25:36.795 JupyterHub app:2240] Running JupyterHub version 1.1.0\r\n[I 2020-01-28 10:25:36.796 JupyterHub app:2271] Using Authenticator: jupyterhub.auth.PAMAuthenticator-1.1.0\r\n[I 2020-01-28 10:25:36.796 JupyterHub app:2271] Using Spawner: wrapspawner.wrapspawner.ProfilesSpawner\r\n[I 2020-01-28 10:25:36.796 JupyterHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.1.0\r\n[I 2020-01-28 10:25:36.798 JupyterHub app:1349] Loading cookie_secret from /var/log/jupyterhub/jhub/jupyterhub_cookie_secret\r\n[I 2020-01-28 10:25:36.847 JupyterHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n10\r\n[I 2020-01-28 10:25:36.865 JupyterHub app:2311] Initialized 0 spawners in 0.004 seconds\r\n[I 2020-01-28 10:25:36.867 JupyterHub app:2520] Not starting proxy\r\n[E 2020-01-28 10:25:36.873 JupyterHub app:2718]\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.6/site-packages/jupyterhub/app.py\", line 2716, in launch_instance_async\r\n        await self.start()\r\n      File \"/usr/local/lib/python3.6/site-packages/jupyterhub/app.py\", line 2524, in start\r\n        await self.proxy.get_all_routes()\r\n      File \"/usr/local/lib/python3.6/site-packages/jupyterhub/proxy.py\", line 806, in get_all_routes\r\n        resp = await self.api_request('', client=client)\r\n      File \"/usr/local/lib/python3.6/site-packages/jupyterhub/proxy.py\", line 774, in api_request\r\n        result = await client.fetch(req)\r\n    ConnectionRefusedError: [Errno 111] Connection refused\r\n```\r\nMost of the other configuration is default with the exception of my wrapspawner configuration to work with a backend Slurm cluster.\r\n\r\nAny help here would be appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2910", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2910/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2910/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2910/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2910", "id": 554727123, "node_id": "MDU6SXNzdWU1NTQ3MjcxMjM=", "number": 2910, "title": "Running tests in docker", "user": {"login": "dobrovolsky", "id": 14891109, "node_id": "MDQ6VXNlcjE0ODkxMTA5", "avatar_url": "https://avatars1.githubusercontent.com/u/14891109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dobrovolsky", "html_url": "https://github.com/dobrovolsky", "followers_url": "https://api.github.com/users/dobrovolsky/followers", "following_url": "https://api.github.com/users/dobrovolsky/following{/other_user}", "gists_url": "https://api.github.com/users/dobrovolsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/dobrovolsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dobrovolsky/subscriptions", "organizations_url": "https://api.github.com/users/dobrovolsky/orgs", "repos_url": "https://api.github.com/users/dobrovolsky/repos", "events_url": "https://api.github.com/users/dobrovolsky/events{/privacy}", "received_events_url": "https://api.github.com/users/dobrovolsky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-24T13:10:13Z", "updated_at": "2020-01-27T10:22:50Z", "closed_at": "2020-01-27T10:22:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!---\r\nHi! Thanks for using JupyterHub.\r\n\r\nIf you are reporting an issue with JupyterHub, please use the GitHub search feature to check if your issue has been asked already. If it has, please add your comments to the existing issue.\r\n\r\nSome tips:\r\n- Running `jupyter troubleshoot` from the command line, if possible, and posting\r\nits output would also be helpful.\r\n- Running JupyterHub in `--debug` mode (`jupyterhub --debug`) can also be helpful for troubleshooting.\r\n--->\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nCan't run tests inside of docker environment.\r\nSome tests fails.\r\n\r\n\r\n<!---Add description here--->\r\n\r\n**To Reproduce**\r\n\r\n```bash\r\ndocker build -t jupyterhub -f Dockerfile .\r\n```\r\n\r\n```bash\r\ndocker run -it -u root -v `pwd`:/srv/jupyterhub/ jupyterhub:latest bash\r\n```\r\n\r\n```bash\r\npip install -r dev-requirements.txt\r\n```\r\n\r\n```bash\r\npytest -v\r\n``` \r\nor to get one of tests that fails\r\n```bash\r\npytest -v jupyterhub/tests/test_internal_ssl_spawner.py::test_single_user_spawner\r\n```\r\n\r\nI got following output:\r\n```\r\n========================================================================== test session starts ==========================================================================\r\nplatform linux -- Python 3.6.9, pytest-5.3.3, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3\r\ncachedir: .pytest_cache\r\nrootdir: /srv/jupyterhub, inifile: pytest.ini\r\nplugins: requests-mock-1.7.0, asyncio-0.10.0, cov-2.8.1\r\ncollected 1 item                                                                                                                                                        \r\n\r\njupyterhub/tests/test_internal_ssl_spawner.py::test_single_user_spawner FAILED                                                                                    [100%]\r\n\r\n=============================================================================== FAILURES ================================================================================\r\n_______________________________________________________________________ test_single_user_spawner ________________________________________________________________________\r\n\r\napp = <jupyterhub.tests.mocking.MockHub object at 0x7f3e9f2eca58>, request = <FixtureRequest for <Function test_single_user_spawner>>\r\n\r\n>   ???\r\n\r\n/Users/bohdan_dobrovolskyi/projects/ref/hub_original/jupyterhub/tests/test_spawner.py:109: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\njupyterhub/user.py:668: in spawn\r\n    await self._wait_up(spawner)\r\njupyterhub/user.py:715: in _wait_up\r\n    raise e\r\njupyterhub/user.py:683: in _wait_up\r\n    http=True, timeout=spawner.http_timeout, ssl_context=ssl_context\r\njupyterhub/utils.py:234: in wait_for_http_server\r\n    timeout=timeout,\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\npass_func = <function wait_for_http_server.<locals>.is_reachable at 0x7f3e99d38f28>\r\nfail_message = \"Server at https://127.0.0.1:35217/@/space%20word/user/admin/ didn't respond in 30 seconds\", start_wait = 0.2, scale_factor = 2, max_wait = 5\r\ntimeout = 30, timeout_tolerance = 0.1, args = (), kwargs = {}, loop = <tornado.platform.asyncio.AsyncIOMainLoop object at 0x7f3e9f2ecc50>, deadline = 1579870865.616488\r\ntol = 3.0, scale = 4096, ret = False, remaining = -0.005999326705932617, dt = 3.062868118286133\r\n\r\n    async def exponential_backoff(\r\n        pass_func,\r\n        fail_message,\r\n        start_wait=0.2,\r\n        scale_factor=2,\r\n        max_wait=5,\r\n        timeout=10,\r\n        timeout_tolerance=0.1,\r\n        *args,\r\n        **kwargs\r\n    ):\r\n        \"\"\"\r\n        Exponentially backoff until `pass_func` is true.\r\n    \r\n        The `pass_func` function will wait with **exponential backoff** and\r\n        **random jitter** for as many needed iterations of the Tornado loop,\r\n        until reaching maximum `timeout` or truthiness. If `pass_func` is still\r\n        returning false at `timeout`, a `TimeoutError` will be raised.\r\n    \r\n        The first iteration will begin with a wait time of `start_wait` seconds.\r\n        Each subsequent iteration's wait time will scale up by continuously\r\n        multiplying itself by `scale_factor`. This continues for each iteration\r\n        until `pass_func` returns true or an iteration's wait time has reached\r\n        the `max_wait` seconds per iteration.\r\n    \r\n        `pass_func` may be a future, although that is not entirely recommended.\r\n    \r\n        Parameters\r\n        ----------\r\n        pass_func\r\n            function that is to be run\r\n        fail_message : str\r\n            message for a `TimeoutError`\r\n        start_wait : optional\r\n            initial wait time for the first iteration in seconds\r\n        scale_factor : optional\r\n            a multiplier to increase the wait time for each iteration\r\n        max_wait : optional\r\n            maximum wait time per iteration in seconds\r\n        timeout : optional\r\n            maximum time of total wait in seconds\r\n        timeout_tolerance : optional\r\n            a small multiplier used to add jitter to `timeout`'s deadline\r\n        *args, **kwargs\r\n            passed to `pass_func(*args, **kwargs)`\r\n    \r\n        Returns\r\n        -------\r\n        value of `pass_func(*args, **kwargs)`\r\n    \r\n        Raises\r\n        ------\r\n        TimeoutError\r\n            If `pass_func` is still false at the end of the `timeout` period.\r\n    \r\n        Notes\r\n        -----\r\n        See https://www.awsarchitectureblog.com/2015/03/backoff.html\r\n        for information about the algorithm and examples. We're using their\r\n        full Jitter implementation equivalent.\r\n        \"\"\"\r\n        loop = ioloop.IOLoop.current()\r\n        deadline = loop.time() + timeout\r\n        # add jitter to the deadline itself to prevent re-align of a bunch of\r\n        # timing out calls once the deadline is reached.\r\n        if timeout_tolerance:\r\n            tol = timeout_tolerance * timeout\r\n            deadline = random.uniform(deadline - tol, deadline + tol)\r\n        scale = 1\r\n        while True:\r\n            ret = await maybe_future(pass_func(*args, **kwargs))\r\n            # Truthy!\r\n            if ret:\r\n                return ret\r\n            remaining = deadline - loop.time()\r\n            if remaining < 0:\r\n                # timeout exceeded\r\n                break\r\n            # add some random jitter to improve performance\r\n            # this prevents overloading any single tornado loop iteration with\r\n            # too many things\r\n            dt = min(max_wait, remaining, random.uniform(0, start_wait * scale))\r\n            scale *= scale_factor\r\n            await gen.sleep(dt)\r\n>       raise TimeoutError(fail_message)\r\nE       TimeoutError: Server at https://127.0.0.1:35217/@/space%20word/user/admin/ didn't respond in 30 seconds\r\n\r\njupyterhub/utils.py:177: TimeoutError\r\n------------------------------------------------------------------------- Captured stdout setup -------------------------------------------------------------------------\r\n10\r\n13:00:35.739 [ConfigProxy] info: Proxying http://127.0.0.1:33789 to (no default)\r\n13:00:35.741 [ConfigProxy] info: Proxy API at https://127.0.0.1:8001/api/routes\r\n13:00:35.924 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:35.929 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:35.934 [ConfigProxy] info: Adding route /@/space word -> https://127.0.0.1:8081\r\n13:00:35.935 [ConfigProxy] info: Route added /@/space word -> https://127.0.0.1:8081\r\n13:00:35.935 [ConfigProxy] info: 201 POST /api/routes/@/space%20word \r\n------------------------------------------------------------------------- Captured stderr setup -------------------------------------------------------------------------\r\n[I 00:34.666 MockHub app:2240] Running JupyterHub version 1.2.0dev\r\n[D 00:34.666 MockHub app:2219] Writing PID 77 to /tmp/tmpj8z96chj\r\n[I 00:34.667 MockHub app:2271] Using Authenticator: jupyterhub.tests.mocking.MockPAMAuthenticator-1.2.0dev\r\n[I 00:34.667 MockHub app:2271] Using Spawner: jupyterhub.tests.mocking.MockSpawner-1.2.0dev\r\n[I 00:34.667 MockHub app:2271] Using Proxy: jupyterhub.proxy.ConfigurableHTTPProxy-1.2.0dev\r\n[I 00:34.681 MockHub app:1349] Loading cookie_secret from /srv/jupyterhub/jupyterhub_cookie_secret\r\n[I 00:35.028 MockHub app:1455] Adding CA for hub-internal: IP:127.0.0.1;DNS:localhost;DNS:1232d3fc1bf6\r\n[I 00:35.136 MockHub app:1475] Generating signed pair for proxy-api: IP:127.0.0.1;DNS:localhost\r\n[I 00:35.204 MockHub app:1475] Generating signed pair for proxy-client: IP:127.0.0.1;DNS:localhost\r\n[D 00:35.237 MockHub app:1516] Connecting to db: sqlite:////tmp/tmp97hgrfwq\r\n[D 00:35.275 MockHub orm:718] Stamping empty database with alembic revision 4dc2d5a8c53c\r\n[I 00:35.280 alembic.runtime.migration migration:154] Context impl SQLiteImpl.\r\n[I 00:35.280 alembic.runtime.migration migration:161] Will assume non-transactional DDL.\r\n[I 00:35.313 alembic.runtime.migration migration:513] Running stamp_revision  -> 4dc2d5a8c53c\r\n[D 00:35.313 alembic.runtime.migration migration:715] new branch insert 4dc2d5a8c53c\r\n[I 00:35.361 MockHub proxy:461] Generating new CONFIGPROXY_AUTH_TOKEN\r\n[I 00:35.363 MockHub app:1655] Not using whitelist. Any authenticated user will be allowed.\r\n[D 00:35.376 MockHub app:1914] Initializing spawners\r\n[D 00:35.382 MockHub app:2011] Loading state for admin from db\r\n[D 00:35.382 MockHub app:2038] Loaded users:\r\n       admin admin\r\n[I 00:35.382 MockHub app:2311] Initialized 0 spawners in 0.006 seconds\r\n[W 00:35.388 MockHub proxy:643] Running JupyterHub without SSL.  I hope there is SSL termination happening somewhere else...\r\n[I 00:35.388 MockHub proxy:646] Starting proxy @ http://127.0.0.1:33789/@/space%20word/\r\n[D 00:35.388 MockHub proxy:647] Proxy cmd: ['configurable-http-proxy', '--ip', '127.0.0.1', '--port', '33789', '--api-ip', '127.0.0.1', '--api-port', '8001', '--error-target', 'https://127.0.0.1:8081/@/space%20word/hub/error', '--api-ssl-key', '/tmp/pytest-of-root/pytest-1/ssl0/proxy-api/proxy-api.key', '--api-ssl-cert', '/tmp/pytest-of-root/pytest-1/ssl0/proxy-api/proxy-api.crt', '--api-ssl-ca', '/tmp/pytest-of-root/pytest-1/ssl0/proxy-api-ca_trust.crt', '--api-ssl-request-cert', '--api-ssl-reject-unauthorized', '--client-ssl-key', '/tmp/pytest-of-root/pytest-1/ssl0/proxy-client/proxy-client.key', '--client-ssl-cert', '/tmp/pytest-of-root/pytest-1/ssl0/proxy-client/proxy-client.crt', '--client-ssl-ca', '/tmp/pytest-of-root/pytest-1/ssl0/proxy-client-ca_trust.crt', '--client-ssl-request-cert', '--client-ssl-reject-unauthorized']\r\n[D 00:35.392 MockHub proxy:562] Writing proxy pid file: jupyterhub-proxy.pid\r\n[D 00:35.910 MockHub proxy:682] Proxy started and appears to be up\r\n[D 00:35.913 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:35.925 MockHub app:2556] Hub API listening on https://127.0.0.1:8081/@/space%20word/hub/\r\n[D 00:35.925 MockHub proxy:315] Fetching routes to check\r\n[D 00:35.925 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:35.930 MockHub proxy:320] Checking routes\r\n[I 00:35.930 MockHub proxy:400] Adding default route for Hub: /@/space%20word/ => https://127.0.0.1:8081\r\n[D 00:35.930 MockHub proxy:766] Proxy: Fetching POST https://127.0.0.1:8001/api/routes/@/space%20word\r\n[I 00:35.935 MockHub app:2631] JupyterHub is now running at http://127.0.0.1:33789/@/space%20word/\r\n[D 00:35.935 MockHub app:2233] It took 1.271 seconds for the Hub to start\r\n------------------------------------------------------------------------- Captured stdout call --------------------------------------------------------------------------\r\n13:00:37.944 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:37.950 [ConfigProxy] info: Adding route /@/space word/user/admin -> https://127.0.0.1:35217\r\n13:00:37.950 [ConfigProxy] info: Route added /@/space word/user/admin -> https://127.0.0.1:35217\r\n13:00:37.950 [ConfigProxy] info: 201 POST /api/routes/@/space%20word/user/admin \r\n13:00:39.945 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:41.921 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:43.947 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:45.942 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:47.944 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:49.944 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:51.946 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:53.944 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:55.945 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:57.947 [ConfigProxy] info: 200 GET /api/routes \r\n13:00:59.948 [ConfigProxy] info: 200 GET /api/routes \r\n13:01:01.944 [ConfigProxy] info: 200 GET /api/routes \r\n13:01:03.948 [ConfigProxy] info: 200 GET /api/routes \r\n------------------------------------------------------------------------- Captured stderr call --------------------------------------------------------------------------\r\n[D 00:35.937 MockHub user:242] Creating <class 'jupyterhub.tests.mocking.MockSpawner'> for admin:\r\n[W 00:35.972 MockHub auth:956] Failed to open PAM session for admin: [PAM Error 14] Cannot make/remove an entry for the specified session\r\n[W 00:35.972 MockHub auth:957] Disabling PAM sessions from now on.\r\n[D 00:35.977 MockHub user:553] Creating internal SSL certs for admin\r\n[I 00:35.978 MockHub spawner:886] Creating certs for admin: DNS:localhost;IP:127.0.0.1\r\n[D 00:35.998 MockHub user:556] Calling Spawner.start for admin\r\n[I 00:35.998 MockHub spawner:1417] Spawning jupyterhub-singleuser --port=35217\r\n[D 00:36.019 MockHub spawner:1113] Polling subprocess every 30s\r\n[I 2020-01-24 13:00:36.445 SingleUserNotebookApp singleuser:561] Starting jupyterhub-singleuser server version 1.2.0dev\r\n[I 00:36.452 MockHub log:174] 200 GET /@/space%20word/hub/api (@127.0.0.1) 1.08ms\r\n[C 2020-01-24 13:00:36.452 SingleUserNotebookApp notebookapp:1919] Running as root is not recommended. Use --allow-root to bypass.\r\n[D 00:37.939 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:37.945 MockHub proxy:320] Checking routes\r\n[W 00:37.945 MockHub proxy:345] Adding missing route for /@/space%20word/user/admin/ (Server(url=https://127.0.0.1:35217/@/space%20word/user/admin/, bind_url=https://127.0.0.1:35217/@/space%20word/user/admin/))\r\n[I 00:37.946 MockHub proxy:262] Adding user admin to proxy /@/space%20word/user/admin/ => https://127.0.0.1:35217\r\n[D 00:37.946 MockHub proxy:766] Proxy: Fetching POST https://127.0.0.1:8001/api/routes/@/space%20word/user/admin\r\n[D 00:39.940 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:39.951 MockHub proxy:320] Checking routes\r\n[D 00:41.916 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:41.924 MockHub proxy:320] Checking routes\r\n[D 00:43.941 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:43.949 MockHub proxy:320] Checking routes\r\n[D 00:45.937 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:45.944 MockHub proxy:320] Checking routes\r\n[D 00:47.939 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:47.946 MockHub proxy:320] Checking routes\r\n[D 00:49.940 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:49.947 MockHub proxy:320] Checking routes\r\n[D 00:51.941 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:51.949 MockHub proxy:320] Checking routes\r\n[D 00:53.938 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:53.946 MockHub proxy:320] Checking routes\r\n[D 00:55.939 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:55.948 MockHub proxy:320] Checking routes\r\n[D 00:57.941 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:57.951 MockHub proxy:320] Checking routes\r\n[D 00:59.943 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 00:59.951 MockHub proxy:320] Checking routes\r\n[D 01:01.939 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 01:01.947 MockHub proxy:320] Checking routes\r\n[D 01:03.943 MockHub proxy:766] Proxy: Fetching GET https://127.0.0.1:8001/api/routes\r\n[I 01:03.951 MockHub proxy:320] Checking routes\r\n[W 01:05.622 MockHub user:692] admin's server never showed up at https://127.0.0.1:35217/@/space%20word/user/admin/ after 30 seconds. Giving up\r\n[D 01:05.622 MockHub user:739] Stopping admin\r\n[D 01:05.628 MockHub user:767] Deleting oauth client jupyterhub-user-admin\r\n[D 01:05.634 MockHub user:770] Finished stopping admin\r\n```\r\n\r\n**Compute Information**\r\n - Default Dockerfile\r\n - master or tag 1.1.0\r\n\r\nMy thought was problem with this:\r\n```\r\n[W 00:35.972 MockHub auth:956] Failed to open PAM session for admin: [PAM Error 14] Cannot make/remove an entry for the specified session\r\n[W 00:35.972 MockHub auth:957] Disabling PAM sessions from now on.\r\n[D 00:35.977 MockHub user:553] Creating internal SSL certs for admin\r\n```\r\nAfter that i installed setcap to container and run command [from](https://github.com/jupyterhub/jupyterhub/issues/774#issuecomment-249420931) \r\n\r\n```bash\r\nsudo setcap 'cap_net_bind_service=+ep' `which node`\r\n```\r\nbut it didn't help\r\nLocal setup with virtualenv works file.\r\n\r\nWhat can be wrong?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2909", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2909/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2909/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2909/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2909", "id": 554413346, "node_id": "MDU6SXNzdWU1NTQ0MTMzNDY=", "number": 2909, "title": "How can I provide custom templates from a package?", "user": {"login": "jason-huling", "id": 7820042, "node_id": "MDQ6VXNlcjc4MjAwNDI=", "avatar_url": "https://avatars0.githubusercontent.com/u/7820042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jason-huling", "html_url": "https://github.com/jason-huling", "followers_url": "https://api.github.com/users/jason-huling/followers", "following_url": "https://api.github.com/users/jason-huling/following{/other_user}", "gists_url": "https://api.github.com/users/jason-huling/gists{/gist_id}", "starred_url": "https://api.github.com/users/jason-huling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jason-huling/subscriptions", "organizations_url": "https://api.github.com/users/jason-huling/orgs", "repos_url": "https://api.github.com/users/jason-huling/repos", "events_url": "https://api.github.com/users/jason-huling/events{/privacy}", "received_events_url": "https://api.github.com/users/jason-huling/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589228, "node_id": "MDU6TGFiZWwxMDY1ODkyMjg=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/question", "name": "question", "color": "Cfaef7", "default": true, "description": null}, {"id": 958035057, "node_id": "MDU6TGFiZWw5NTgwMzUwNTc=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/spawners", "name": "spawners", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-23T21:20:34Z", "updated_at": "2020-01-29T18:54:50Z", "closed_at": "2020-01-29T18:42:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm working on a custom spawner that is being packaged up as a python package. The spawner has a form, and up to this point I have been utilizing `options_form` to provide the form content.\r\n\r\nAt this point I'm focusing on the design of the form and have needed to add some additional javascript, css, etc. Being able to extend the `spawner.html` template seems like the cleaner approach now, vs providing these in `options_form`. \r\n\r\nI have read the documentation on [extending templates](https://jupyterhub.readthedocs.io/en/stable/reference/templates.html#extending-templates) which says to set `c.JupyterHub.template_paths`, but I'm not sure how to go about this correctly from my package. I am already using a jinja2 template for my `options_form` approach, so I don't have any issue making sure my template is packaged up correctly, or specifying the correct path of the template, I'm just not sure how to tell JupyterHub what the template_path is from my package.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2908", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2908/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2908/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2908/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2908", "id": 553806443, "node_id": "MDU6SXNzdWU1NTM4MDY0NDM=", "number": 2908, "title": "how to use in classroom for assignments and automatic grading", "user": {"login": "arademaker", "id": 86403, "node_id": "MDQ6VXNlcjg2NDAz", "avatar_url": "https://avatars2.githubusercontent.com/u/86403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arademaker", "html_url": "https://github.com/arademaker", "followers_url": "https://api.github.com/users/arademaker/followers", "following_url": "https://api.github.com/users/arademaker/following{/other_user}", "gists_url": "https://api.github.com/users/arademaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/arademaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arademaker/subscriptions", "organizations_url": "https://api.github.com/users/arademaker/orgs", "repos_url": "https://api.github.com/users/arademaker/repos", "events_url": "https://api.github.com/users/arademaker/events{/privacy}", "received_events_url": "https://api.github.com/users/arademaker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589228, "node_id": "MDU6TGFiZWwxMDY1ODkyMjg=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/question", "name": "question", "color": "Cfaef7", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-22T21:33:22Z", "updated_at": "2020-03-24T04:26:12Z", "closed_at": "2020-03-24T04:26:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!---\r\nIf you are reading this message, you have probably already searched the existing\r\nGitHub issues for JupyterHub. If you haven't tried a search, we encourage you to do so.\r\n\r\nIf you are unsure where to ask your question (Jupyter, JupyterHub, JupyterLab, etc.),\r\nplease ask on our [Discourse Q&A channel](https://discourse.jupyter.org/c/questions).\r\n\r\nIf you have a quick question about JupyterHub installation or configuratation, you\r\nmay ask on the [JupyterHub gitter channel](https://gitter.im/jupyterhub/jupyterhub).\r\n\r\n:sunny: Please be patient. We are volunteers and will address your question when we are able. :sunny:\r\n\r\nIf after trying the above steps, you still have an in-depth installation or\r\nconfiguration question, such as a possible bug, please file an issue below and include\r\nany relevant details.\r\n--->\r\n\r\nWhere can I find the intructions on the use of jupyterhub in classroom? How to create assignments, auto grade the submissions using test cases etc. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2906", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2906/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2906/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2906/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2906", "id": 553462044, "node_id": "MDU6SXNzdWU1NTM0NjIwNDQ=", "number": 2906, "title": "--generate-config fails since 1.1.0", "user": {"login": "iptizer", "id": 24313052, "node_id": "MDQ6VXNlcjI0MzEzMDUy", "avatar_url": "https://avatars1.githubusercontent.com/u/24313052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iptizer", "html_url": "https://github.com/iptizer", "followers_url": "https://api.github.com/users/iptizer/followers", "following_url": "https://api.github.com/users/iptizer/following{/other_user}", "gists_url": "https://api.github.com/users/iptizer/gists{/gist_id}", "starred_url": "https://api.github.com/users/iptizer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iptizer/subscriptions", "organizations_url": "https://api.github.com/users/iptizer/orgs", "repos_url": "https://api.github.com/users/iptizer/repos", "events_url": "https://api.github.com/users/iptizer/events{/privacy}", "received_events_url": "https://api.github.com/users/iptizer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 106589223, "node_id": "MDU6TGFiZWwxMDY1ODkyMjM=", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/bug", "name": "bug", "color": "ff9999", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-22T10:54:59Z", "updated_at": "2020-01-23T11:28:43Z", "closed_at": "2020-01-23T06:19:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nThe function `--generate-config` doesn't work as expected with the release of 1.1.0. Jupyterhub complains about the missing config file, which should be generated. We execute the steps in a Packer build process, which worked until the upgrade of jupyterhub from 1.0.0 to 1.1.0.\r\n\r\nThe executed command is even listed in the -h explanation, so I'm pretty confident it should work:\r\n\r\n```sh\r\n[user@ip-1-1-1-1 ~]$ /opt/anaconda3/bin/jupyterhub -h\r\nStart a multi-user Jupyter Notebook server\r\n[..]\r\n\r\nExamples\r\n--------\r\n\r\n    generate default config file:\r\n    \r\n        jupyterhub --generate-config -f /etc/jupyterhub/jupyterhub_config.py\r\n    \r\n[...]\r\n```\r\n\r\nPlease don't hit me if conda or amazon linux may introduce this error, but I personally don't think so.\r\n\r\n**To Reproduce**\r\n\r\nJust execute jupyterhub with *--generate-config*. Installation has been done via conda. Execute the following commands on a clean linux/centos/amazonLinux1.\r\n\r\n```sh\r\n$ wget https://repo.continuum.io/archive/Anaconda3-2019.10-Linux-x86_64.sh -O /tmp/Anaconda3-Linux-x86_64.sh\r\n$ sudo sh /tmp/Anaconda3-Linux-x86_64.sh -b -p /opt/anaconda3\r\n$ sudo /opt/anaconda3/bin/conda config --add channels 'conda-forge'\r\n$ sudo /opt/anaconda3/bin/conda install -y -c conda-forge jupyterhub\",\r\n$ sudo /opt/anaconda3/bin/jupyterhub --generate-config -f /etc/jupyterhub/jupyterhub_config.py\r\nERROR: Failed to find specified config file: /etc/jupyterhub/jupyterhub_config.py\r\n```\r\n\r\n**Expected behavior**\r\n\r\nThe config file should be generated. Failing with \"Failed to find specified config file\" doesn't make sense.\r\n\r\n**Compute Information**\r\n\r\n - Installation is usually performed within a packer build, but problem can be reproduced manually.\r\n\r\n```sh\r\n[user@ip-1-1-1-1 ~]$ cat /etc/issue\r\nAmazon Linux AMI release 2018.03\r\n[user@ip-1-1-1-1 ~]$ sudo /opt/anaconda3/bin/jupyterhub --version\r\n1.1.0\r\n```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2902", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2902/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2902/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2902/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2902", "id": 551733648, "node_id": "MDU6SXNzdWU1NTE3MzM2NDg=", "number": 2902, "title": "ModuleNotFoundError: No module named 'async_generator' with LocalProcessSpawner in a docker container", "user": {"login": "Nithanaroy", "id": 670556, "node_id": "MDQ6VXNlcjY3MDU1Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/670556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nithanaroy", "html_url": "https://github.com/Nithanaroy", "followers_url": "https://api.github.com/users/Nithanaroy/followers", "following_url": "https://api.github.com/users/Nithanaroy/following{/other_user}", "gists_url": "https://api.github.com/users/Nithanaroy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nithanaroy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nithanaroy/subscriptions", "organizations_url": "https://api.github.com/users/Nithanaroy/orgs", "repos_url": "https://api.github.com/users/Nithanaroy/repos", "events_url": "https://api.github.com/users/Nithanaroy/events{/privacy}", "received_events_url": "https://api.github.com/users/Nithanaroy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-18T07:21:12Z", "updated_at": "2020-01-18T23:56:58Z", "closed_at": "2020-01-18T23:56:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get `ModuleNotFoundError: No module named 'async_generator'` when I try to login using an existing user in my docker container with SimpleLocalProcessSpawner or LocalProcessSpawner\r\n\r\n**jupyter_config.py**\r\n```python\r\nfrom jupyterhub.auth import Authenticator\r\nfrom jupyterhub.utils import hash_token, compare_token\r\n# from dockerspawner import DockerSpawner\r\nimport os\r\nimport sys, traceback\r\n\r\nclass PasswordOnlyForRootAuthenticator(Authenticator):\r\n    def authenticate(self, handler, data):\r\n        try:\r\n            username, password = data['username'], data['password']\r\n            actual_password = hash_token(os.environ.get(\"HUB_ROOT_PASSWORD\"))\r\n\r\n            if username in c.Authenticator.admin_users:\r\n                if compare_token(actual_password, password):\r\n                    return username\r\n                else:\r\n                    return None\r\n            return username\r\n        except:\r\n            traceback.print_exc(file=sys.stdout)\r\n\r\nc.JupyterHub.authenticator_class = PasswordOnlyForRootAuthenticator\r\n# c.JupyterHub.spawner_class = DockerSpawner\r\nc.JupyterHub.spawner_class = 'jupyterhub.spawner.SimpleLocalProcessSpawner'\r\n\r\nimport netifaces\r\ndocker0 = netifaces.ifaddresses('eth0')\r\ndocker0_ipv4 = docker0[netifaces.AF_INET][0]\r\nc.JupyterHub.hub_ip = docker0_ipv4['addr']\r\n```\r\n\r\n**Error**\r\n```\r\n[I 2020-01-18 07:14:56.324 JupyterHub base:707] User logged in: test\r\n[I 2020-01-18 07:14:56.330 JupyterHub log:174] 302 POST /hub/login?next= -> /hub/spawn (test@172.17.0.1) 42.08ms\r\n[I 2020-01-18 07:14:56.396 JupyterHub spawner:1417] Spawning jupyterhub-singleuser --port=35683\r\nTraceback (most recent call last):\r\n  File \"/export/apps/python/3.6.1/bin/jupyterhub-singleuser\", line 7, in <module>\r\n    from jupyterhub.singleuser import main\r\n  File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/singleuser.py\", line 52, in <module>\r\n    from .services.auth import HubOAuth, HubOAuthenticated, HubOAuthCallbackHandler\r\n  File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/services/auth.py\", line 40, in <module>\r\n    from ..utils import url_path_join\r\n  File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/utils.py\", line 23, in <module>\r\n    from async_generator import aclosing\r\nModuleNotFoundError: No module named 'async_generator'\r\n[I 2020-01-18 07:14:57.357 JupyterHub log:174] 302 GET /hub/spawn -> /hub/spawn-pending/test (test@172.17.0.1) 1016.61ms\r\n[I 2020-01-18 07:14:57.376 JupyterHub pages:347] test is pending spawn\r\n[I 2020-01-18 07:14:57.387 JupyterHub log:174] 200 GET /hub/spawn-pending/test (test@172.17.0.1) 17.97ms\r\nERROR:asyncio:Task exception was never retrieved\r\nfuture: <Task finished coro=<BaseHandler.spawn_single_user() done, defined at /export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/handlers/base.py:741> exception=HTTPError()>\r\nTraceback (most recent call last):\r\n  File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 939, in spawn_single_user\r\n    timedelta(seconds=self.slow_spawn_timeout), finish_spawn_future\r\ntornado.util.TimeoutError: Timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 972, in spawn_single_user\r\n    % (status, spawner._log_name),\r\ntornado.web.HTTPError: HTTP 500: Internal Server Error (Spawner failed to start [status=1]. The logs for test may contain details.)\r\n[W 2020-01-18 07:15:24.128 JupyterHub user:692] test's server never showed up at http://127.0.0.1:35683/user/test/ after 30 seconds. Giving up\r\n[E 2020-01-18 07:15:24.172 JupyterHub gen:974] Exception in Future <Task finished coro=<BaseHandler.spawn_single_user.<locals>.finish_user_spawn() done, defined at /export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/handlers/base.py:845> exception=TimeoutError(\"Server at http://127.0.0.1:35683/user/test/ didn't respond in 30 seconds\",)> after timeout\r\n    Traceback (most recent call last):\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/tornado/gen.py\", line 970, in error_callback\r\n        future.result()\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/handlers/base.py\", line 852, in finish_user_spawn\r\n        await spawn_future\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/user.py\", line 668, in spawn\r\n        await self._wait_up(spawner)\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/user.py\", line 715, in _wait_up\r\n        raise e\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/user.py\", line 683, in _wait_up\r\n        http=True, timeout=spawner.http_timeout, ssl_context=ssl_context\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/utils.py\", line 234, in wait_for_http_server\r\n        timeout=timeout,\r\n      File \"/export/apps/python/3.6.1/lib/python3.6/site-packages/jupyterhub/utils.py\", line 177, in exponential_backoff\r\n        raise TimeoutError(fail_message)\r\n    TimeoutError: Server at http://127.0.0.1:35683/user/test/ didn't respond in 30 seconds\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2900", "repository_url": "https://api.github.com/repos/jupyterhub/jupyterhub", "labels_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2900/labels{/name}", "comments_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2900/comments", "events_url": "https://api.github.com/repos/jupyterhub/jupyterhub/issues/2900/events", "html_url": "https://github.com/jupyterhub/jupyterhub/issues/2900", "id": 551538686, "node_id": "MDU6SXNzdWU1NTE1Mzg2ODY=", "number": 2900, "title": "c.Spawner.default_url='/lab' only works for one account", "user": {"login": "dsun-ge", "id": 47542977, "node_id": "MDQ6VXNlcjQ3NTQyOTc3", "avatar_url": "https://avatars2.githubusercontent.com/u/47542977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsun-ge", "html_url": "https://github.com/dsun-ge", "followers_url": "https://api.github.com/users/dsun-ge/followers", "following_url": "https://api.github.com/users/dsun-ge/following{/other_user}", "gists_url": "https://api.github.com/users/dsun-ge/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsun-ge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsun-ge/subscriptions", "organizations_url": "https://api.github.com/users/dsun-ge/orgs", "repos_url": "https://api.github.com/users/dsun-ge/repos", "events_url": "https://api.github.com/users/dsun-ge/events{/privacy}", "received_events_url": "https://api.github.com/users/dsun-ge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1280242352, "node_id": "MDU6TGFiZWwxMjgwMjQyMzUy", "url": "https://api.github.com/repos/jupyterhub/jupyterhub/labels/support", "name": "support", "color": "Cfaef7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-17T17:22:49Z", "updated_at": "2020-06-02T22:12:54Z", "closed_at": "2020-06-02T22:12:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have set up a Jupyterhub server that allows both Jupyter notebook and Jupyterlab. I also set following in /etc/jupyterhub/jupyterhub_config.py file. I expect all users will have lab by default. However, only my own account has lab in default and the other 2 still have notebook. What can be wrong?\r\n\r\n> c.Spawner.default_url='/lab'\r\n\r\nThis is how I run: (I have Ubuntu 18.04 and everytyhing was intalled yesterday)\r\n\r\n> /usr/local/bin/jupyterhub --port 80 -f /etc/jupyterhub/jupyterhub_config.py", "performed_via_github_app": null, "score": 1.0}]}