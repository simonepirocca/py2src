{"total_count": 16, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/68", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/68/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/68/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/68", "id": 571299058, "node_id": "MDU6SXNzdWU1NzEyOTkwNTg=", "number": 68, "title": "Any sample setup.py file", "user": {"login": "openedev", "id": 7153824, "node_id": "MDQ6VXNlcjcxNTM4MjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/7153824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/openedev", "html_url": "https://github.com/openedev", "followers_url": "https://api.github.com/users/openedev/followers", "following_url": "https://api.github.com/users/openedev/following{/other_user}", "gists_url": "https://api.github.com/users/openedev/gists{/gist_id}", "starred_url": "https://api.github.com/users/openedev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/openedev/subscriptions", "organizations_url": "https://api.github.com/users/openedev/orgs", "repos_url": "https://api.github.com/users/openedev/repos", "events_url": "https://api.github.com/users/openedev/events{/privacy}", "received_events_url": "https://api.github.com/users/openedev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-26T12:11:17Z", "updated_at": "2020-02-26T18:18:03Z", "closed_at": "2020-02-26T18:18:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to build the source for my internal packaging system, but it require setup.py like any other python modules. Would anyone provide me a sample setup.py?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/67", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/67/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/67/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/67", "id": 555498577, "node_id": "MDU6SXNzdWU1NTU0OTg1Nzc=", "number": 67, "title": "Package threadpoolctl on conda-forge", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-27T10:58:24Z", "updated_at": "2020-03-20T08:54:35Z", "closed_at": "2020-03-20T08:54:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://conda-forge.org/#add_recipe\r\n\r\nWe might also want to ask the anaconda default channel maintainers if they are interested in packing it as well.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/53", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/53/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/53/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/53", "id": 519902581, "node_id": "MDU6SXNzdWU1MTk5MDI1ODE=", "number": 53, "title": "CI: change python version to 3.8 when scipy wheels are available", "user": {"login": "jeremiedbb", "id": 34657725, "node_id": "MDQ6VXNlcjM0NjU3NzI1", "avatar_url": "https://avatars2.githubusercontent.com/u/34657725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremiedbb", "html_url": "https://github.com/jeremiedbb", "followers_url": "https://api.github.com/users/jeremiedbb/followers", "following_url": "https://api.github.com/users/jeremiedbb/following{/other_user}", "gists_url": "https://api.github.com/users/jeremiedbb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremiedbb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremiedbb/subscriptions", "organizations_url": "https://api.github.com/users/jeremiedbb/orgs", "repos_url": "https://api.github.com/users/jeremiedbb/repos", "events_url": "https://api.github.com/users/jeremiedbb/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremiedbb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-08T09:22:35Z", "updated_at": "2019-12-05T17:47:59Z", "closed_at": "2019-12-05T17:47:58Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "currently python version is pinned to 3.7 for the job `py37_pip_openblas_gcc_clang` because wheels are not yet available. This issue is here to remember to change to 3.8 when they are.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/45", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/45/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/45/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/45", "id": 510631079, "node_id": "MDU6SXNzdWU1MTA2MzEwNzk=", "number": 45, "title": "CI random failure when building Blis: Cannot continue with unregistered configuration 'skx'.", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1631607861, "node_id": "MDU6TGFiZWwxNjMxNjA3ODYx", "url": "https://api.github.com/repos/joblib/threadpoolctl/labels/CI", "name": "CI", "color": "9e0636", "default": false, "description": ""}, {"id": 1290045857, "node_id": "MDU6TGFiZWwxMjkwMDQ1ODU3", "url": "https://api.github.com/repos/joblib/threadpoolctl/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-22T12:45:05Z", "updated_at": "2020-02-07T18:14:50Z", "closed_at": "2019-10-23T10:28:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n```\r\nconfigure: detected Linux kernel version 4.15.0-1059-azure.\r\nconfigure: python interpeter search list is: python python3 python2.\r\nconfigure: using 'python' python interpreter.\r\nconfigure: found python version 3.7.4 (maj: 3, min: 7, rev: 4).\r\nconfigure: python 3.7.4 appears to be supported.\r\nconfigure: C compiler search list is: gcc clang cc.\r\nconfigure: using 'gcc' C compiler.\r\nconfigure: C++ compiler search list is: g++ clang++ c++.\r\nconfigure: using 'g++' C++ compiler (for sandbox only).\r\nconfigure: found gcc version 5.4.0 (maj: 5, min: 4, rev: 0).\r\nconfigure: checking for blacklisted configurations due to gcc 5.4.0.\r\nconfigure: warning: gcc 5.4.0 does not support 'skx'; adding to blacklist.\r\nconfigure: checking gcc 5.4.0 against known consequential version ranges.\r\nconfigure: note: found gcc version older than 6.1.\r\nconfigure: found assembler ('as') version 2.26.1 (maj: 2, min: 26, rev: 1).\r\nconfigure: checking for blacklisted configurations due to as 2.26.1.\r\nconfigure: configuration blacklist:\r\nconfigure:   skx\r\nconfigure: reading configuration registry...done.\r\nconfigure: determining default version string.\r\nconfigure: found '.git' directory; assuming git clone.\r\nconfigure: executing: git describe --tags.\r\nconfigure: got back 0.6.0-58-ge6f0a96c.\r\nconfigure: truncating to 0.6.0-58.\r\nconfigure: starting configuration of BLIS 0.6.0-58.\r\nconfigure: configuring with official version string.\r\nconfigure: found shared library .so version '3.0.0'.\r\nconfigure:   .so major version: 3\r\nconfigure:   .so minor.build version: 0.0\r\nconfigure: automatic configuration requested.\r\nconfigure: hardware detection driver returned 'skx'.\r\nconfigure: checking configuration against contents of 'config_registry'.\r\nconfigure: 'auto-detected configuration 'skx' is NOT registered!\r\nconfigure: \r\nconfigure: *** Cannot continue with unregistered configuration 'skx'. ***\r\nconfigure: \r\n##[error]Bash exited with code '1'.\r\n##[section]Finishing: Install with BLIS\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/41", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/41/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/41/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/41", "id": 502724201, "node_id": "MDU6SXNzdWU1MDI3MjQyMDE=", "number": 41, "title": "Issue with 2 simultaneaous OpenMP runtimes ", "user": {"login": "jeremiedbb", "id": 34657725, "node_id": "MDQ6VXNlcjM0NjU3NzI1", "avatar_url": "https://avatars2.githubusercontent.com/u/34657725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremiedbb", "html_url": "https://github.com/jeremiedbb", "followers_url": "https://api.github.com/users/jeremiedbb/followers", "following_url": "https://api.github.com/users/jeremiedbb/following{/other_user}", "gists_url": "https://api.github.com/users/jeremiedbb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremiedbb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremiedbb/subscriptions", "organizations_url": "https://api.github.com/users/jeremiedbb/orgs", "repos_url": "https://api.github.com/users/jeremiedbb/repos", "events_url": "https://api.github.com/users/jeremiedbb/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremiedbb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-04T16:13:09Z", "updated_at": "2019-12-05T17:49:40Z", "closed_at": "2019-12-05T17:49:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "More specifically between intel OpenMP and llvm OpenMP.\r\nWhen both dlopened (and not linked which is always the case in python), calling intel's after llvm's may cause a crash.\r\n\r\n```c\r\n#include <stdlib.h>\r\n#include <dlfcn.h>\r\n\r\nint main(int argc, char **argv){\r\n    // load libomp and libiomp\r\n    void *libomp_handle = dlopen(\"/home/jeremie/R/C/llvm-project/build/lib/libomp.so\", RTLD_NOW);\r\n    void *libiomp_handle = dlopen(\"/home/jeremie/intel/compilers_and_libraries_2019.4.243/linux/mkl/lib/intel64_lin/../../../compiler/lib/intel64/libiomp5.so\", RTLD_NOW);\r\n   \r\n    // get \"omp_get_max_threads\" from each library\r\n    int (*libiomp_get_max_threads)() = (int (*)()) dlsym(libiomp_handle, \"omp_get_num_threads\");\r\n    int (*libomp_get_max_threads)() = (int (*)()) dlsym(libomp_handle, \"omp_get_max_threads\");\r\n\r\n    // switch order of calls causes SIGABRT\r\n    libomp_get_max_threads();\r\n    libiomp_get_max_threads();\r\n\r\n    return 0;\r\n}\r\n```\r\n\r\nIt's not an issue from threadpoolctl, but it has an impact on it.\r\nI opened https://bugs.llvm.org/show_bug.cgi?id=43565\r\nI also opened a ticket on intel support platform.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/40", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/40/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/40/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/40", "id": 498130778, "node_id": "MDU6SXNzdWU0OTgxMzA3Nzg=", "number": 40, "title": "Deadlock when calling threadpool_limits from python threadpool", "user": {"login": "jeremiedbb", "id": 34657725, "node_id": "MDQ6VXNlcjM0NjU3NzI1", "avatar_url": "https://avatars2.githubusercontent.com/u/34657725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremiedbb", "html_url": "https://github.com/jeremiedbb", "followers_url": "https://api.github.com/users/jeremiedbb/followers", "following_url": "https://api.github.com/users/jeremiedbb/following{/other_user}", "gists_url": "https://api.github.com/users/jeremiedbb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremiedbb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremiedbb/subscriptions", "organizations_url": "https://api.github.com/users/jeremiedbb/orgs", "repos_url": "https://api.github.com/users/jeremiedbb/repos", "events_url": "https://api.github.com/users/jeremiedbb/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremiedbb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-09-25T08:29:11Z", "updated_at": "2019-12-05T17:50:42Z", "closed_at": "2019-12-05T17:50:41Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "In very specific conditions.\r\n\r\nTo reproduce: \r\n- environment with numpy, mkl\r\n- clang compiler\r\n\r\n`CC_OUTER_LOOP=clang continuous_integration/build_test_ext.sh`\r\n(inner loop compiler is irrelevant)\r\n\r\n```python\r\nfrom threadpoolctl import threadpool_info \r\nimport numpy as np \r\nfrom tests._openmp_test_helper.nested_prange_blas import check_nested_prange_blas \r\nfrom multiprocessing.pool import ThreadPool \r\n \r\nA = np.ones((1000, 10)) \r\nB = np.ones((100, 10)) \r\n \r\n# blas call within a prange\r\n# remove this and no more deadlock\r\n# Lower number of threads (4) and no more deadlock\r\ncheck_nested_prange_blas(A, B, 4)\r\n\r\n# Remove this and no more deadlock.\r\n# Put it before check_nested_prange_blas and no more deadlock\r\nnp.dot(A, B.T) \r\n \r\ndef func(i): \r\n    threadpool_info()\r\n    # threadpool_info() can be replaced by\r\n    # check_nested_prange_blas(A, B, 1)\r\n    # the 1 is important\r\n     \r\ndef test(): \r\n    pool = ThreadPool(2) \r\n    pool.map(func, range(2)) \r\n    pool.close() \r\n    pool.join()  # no join = no more deadlock\r\n \r\ntest() \r\ntest()  # remove the second one and no more deadlock\r\n```\r\n\r\n@ogrisel @tomMoral ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/37", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/37/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/37/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/37", "id": 493989122, "node_id": "MDU6SXNzdWU0OTM5ODkxMjI=", "number": 37, "title": "1.1.0 release is not working for me", "user": {"login": "FabianIsensee", "id": 11302164, "node_id": "MDQ6VXNlcjExMzAyMTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/11302164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FabianIsensee", "html_url": "https://github.com/FabianIsensee", "followers_url": "https://api.github.com/users/FabianIsensee/followers", "following_url": "https://api.github.com/users/FabianIsensee/following{/other_user}", "gists_url": "https://api.github.com/users/FabianIsensee/gists{/gist_id}", "starred_url": "https://api.github.com/users/FabianIsensee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FabianIsensee/subscriptions", "organizations_url": "https://api.github.com/users/FabianIsensee/orgs", "repos_url": "https://api.github.com/users/FabianIsensee/repos", "events_url": "https://api.github.com/users/FabianIsensee/events{/privacy}", "received_events_url": "https://api.github.com/users/FabianIsensee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2019-09-16T11:21:00Z", "updated_at": "2019-10-25T15:23:56Z", "closed_at": "2019-10-25T14:31:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\nI had major issues on our compute cluster with the newest release of threadpoolctl. I don't quite know what is happening because I don't get any error messages and I have not been able to reproduce the error with a minimalist example. \r\n\r\nWhat is happening is basically - nothing. I am spawning a bunch of background workers which are supposed to generate data and put it into some queue. The code that runs in the background workers is embedded in `with threadpool_limits(limits=1, user_api=\"blas\"):` to limit the number of threads within each worker. This works perfectly on 1.0.0, but in 1.1.0 no data will arrive in the queue, no error message is printed, cpu is idle (so the really is nothing happening) and I get large core.304403 files in the folder the script was running in (as if there was a segmentation fault).\r\n\r\nThis issue only occurs on our compute cluster (LSF schedule with modular software stack (maybe this is the problem?), centOS). On my local workstation (Ubuntu 16.04) everything is fine.\r\n\r\nI would greatly appreciate if you have any idea why this happens or how this could be resolved.\r\n\r\nBest,\r\nFabian\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/36", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/36/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/36/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/36", "id": 493197952, "node_id": "MDU6SXNzdWU0OTMxOTc5NTI=", "number": 36, "title": "Just saying thanks", "user": {"login": "FabianIsensee", "id": 11302164, "node_id": "MDQ6VXNlcjExMzAyMTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/11302164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FabianIsensee", "html_url": "https://github.com/FabianIsensee", "followers_url": "https://api.github.com/users/FabianIsensee/followers", "following_url": "https://api.github.com/users/FabianIsensee/following{/other_user}", "gists_url": "https://api.github.com/users/FabianIsensee/gists{/gist_id}", "starred_url": "https://api.github.com/users/FabianIsensee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FabianIsensee/subscriptions", "organizations_url": "https://api.github.com/users/FabianIsensee/orgs", "repos_url": "https://api.github.com/users/FabianIsensee/repos", "events_url": "https://api.github.com/users/FabianIsensee/events{/privacy}", "received_events_url": "https://api.github.com/users/FabianIsensee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-13T08:24:29Z", "updated_at": "2019-09-13T14:09:07Z", "closed_at": "2019-09-13T14:09:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Awesome work! I just integrated it into my own python package (batchgenerators).\r\n\r\nI am just here to say thanks, this is not an issue :-)\r\n\r\nBest,\r\nFabian", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/33", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/33/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/33/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/33", "id": 492745679, "node_id": "MDU6SXNzdWU0OTI3NDU2Nzk=", "number": 33, "title": "threadpoolctl can't introspect conda-forge installed numpy ", "user": {"login": "jeremiedbb", "id": 34657725, "node_id": "MDQ6VXNlcjM0NjU3NzI1", "avatar_url": "https://avatars2.githubusercontent.com/u/34657725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremiedbb", "html_url": "https://github.com/jeremiedbb", "followers_url": "https://api.github.com/users/jeremiedbb/followers", "following_url": "https://api.github.com/users/jeremiedbb/following{/other_user}", "gists_url": "https://api.github.com/users/jeremiedbb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremiedbb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremiedbb/subscriptions", "organizations_url": "https://api.github.com/users/jeremiedbb/orgs", "repos_url": "https://api.github.com/users/jeremiedbb/repos", "events_url": "https://api.github.com/users/jeremiedbb/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremiedbb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-12T11:25:48Z", "updated_at": "2019-09-12T14:29:12Z", "closed_at": "2019-09-12T14:29:12Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Since a few month ago conda-forge has a new BLAS scheme for numpy: https://github.com/conda-forge/numpy-feedstock/pull/143\r\n\r\nI don't understand all the changes but now when you install numpy through conda-forge channel, you can't recover the right blas shared library path because they use symlinks. e.g.:\r\n\r\n```\r\n# linked to liblapack\r\nldd <conda env>/lib/python3.7/site-packages/numpy/linalg/lapack_lite.cpython-37m-x86_64-linux-gnu.so\r\n>>> liblapack.so.3 => <conda env>/lib/python3.7/site-packages/numpy/linalg/../../../../liblapack.so.3\r\n\r\n# but liblapack is actually a symlink to libopenblas\r\nls -l <conda env>/lib/python3.7/site-packages/numpy/linalg/../../../../liblapack.so.3\r\n>>> <conda env>/lib/python3.7/site-packages/numpy/linalg/../../../../liblapack.so.3 -> libopenblasp-r0.3.7.so\r\n```\r\n\r\nI feel like I remember  that we didn't want to care about symlinks, and I agree in general, but I think this case is very problematic.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/21", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/21/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/21/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/21", "id": 448095424, "node_id": "MDU6SXNzdWU0NDgwOTU0MjQ=", "number": 21, "title": "Can't install on Python2.7 because of flit", "user": {"login": "clemisch", "id": 5190547, "node_id": "MDQ6VXNlcjUxOTA1NDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5190547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clemisch", "html_url": "https://github.com/clemisch", "followers_url": "https://api.github.com/users/clemisch/followers", "following_url": "https://api.github.com/users/clemisch/following{/other_user}", "gists_url": "https://api.github.com/users/clemisch/gists{/gist_id}", "starred_url": "https://api.github.com/users/clemisch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clemisch/subscriptions", "organizations_url": "https://api.github.com/users/clemisch/orgs", "repos_url": "https://api.github.com/users/clemisch/repos", "events_url": "https://api.github.com/users/clemisch/events{/privacy}", "received_events_url": "https://api.github.com/users/clemisch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-24T10:25:41Z", "updated_at": "2019-06-03T08:15:04Z", "closed_at": "2019-06-03T08:15:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm unable to install the library using `pip2 install --user .` because `flit` is not available in Python2.7. Since this is only a single file, is `flit` really necessary?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/20", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/20/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/20/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/20", "id": 443068281, "node_id": "MDU6SXNzdWU0NDMwNjgyODE=", "number": 20, "title": "can't install using pip", "user": {"login": "migel", "id": 3897227, "node_id": "MDQ6VXNlcjM4OTcyMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3897227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/migel", "html_url": "https://github.com/migel", "followers_url": "https://api.github.com/users/migel/followers", "following_url": "https://api.github.com/users/migel/following{/other_user}", "gists_url": "https://api.github.com/users/migel/gists{/gist_id}", "starred_url": "https://api.github.com/users/migel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/migel/subscriptions", "organizations_url": "https://api.github.com/users/migel/orgs", "repos_url": "https://api.github.com/users/migel/repos", "events_url": "https://api.github.com/users/migel/events{/privacy}", "received_events_url": "https://api.github.com/users/migel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-12T06:00:27Z", "updated_at": "2019-06-03T08:12:30Z", "closed_at": "2019-06-03T08:12:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\npip install threadpoolctl\r\nCollecting threadpoolctl\r\n  ERROR: Could not find a version that satisfies the requirement threadpoolctl (from versions: none)\r\nERROR: No matching distribution found for threadpoolctl\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/15", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/15/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/15/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/15", "id": 427667373, "node_id": "MDU6SXNzdWU0Mjc2NjczNzM=", "number": 15, "title": "Add support for BLIS", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-01T12:05:45Z", "updated_at": "2019-09-09T16:28:16Z", "closed_at": "2019-09-09T16:28:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This would involve setting up a new CI environment.\r\n\r\nThe function names are:\r\n- `bli_thread_get_num_threads` / `bli_thread_set_num_threads`\r\n- there is a python package with compiled extension on PyPI: https://pypi.org/project/blis/\r\n\r\n I would be even better to have a CI setup with numpy/scipy built against blis for instance and check that we can control the specific BLIS instance used by those.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/8", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/8/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/8/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/8", "id": 426373897, "node_id": "MDU6SXNzdWU0MjYzNzM4OTc=", "number": 8, "title": "Remove filename_prefixes from the dicts returned by get_threadpool_limits", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-28T09:02:52Z", "updated_at": "2019-03-31T20:19:50Z", "closed_at": "2019-03-31T20:19:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't think the list of `filename_prefixes` is a useful info for the users introspecting their runtime. If they need this they can read the source code of threadpoolctl.\r\n\r\nAlso maybe `get_threadpool_limits` should be renamed to `get_threadpool_info`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/7", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/7/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/7/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/7", "id": 426372727, "node_id": "MDU6SXNzdWU0MjYzNzI3Mjc=", "number": 7, "title": "RFC Detect thread pool runtimes that are statically linked to a python extension module?", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-28T09:00:12Z", "updated_at": "2019-04-01T09:54:48Z", "closed_at": "2019-04-01T09:54:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The  current design of threadpoolctl will introspect the filename of the python extensions and more importantly the dynamically linked libraries they depend on.\r\n\r\nHowever one could imagine that some python extensions or their native dependencies are actually statically linked with one of the runtime libraries we what to detect (e.g. an OpenMP runtime).\r\n\r\nWe could detect that by loading all those libraries with ctype and introspective if the `*_set_num_threads` symbol is present or not.\r\n\r\nHowever this would probably cause a very large overhead. Maybe we could allow this as a non-default option?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/6", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/6/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/6/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/6", "id": 426350295, "node_id": "MDU6SXNzdWU0MjYzNTAyOTU=", "number": 6, "title": "Make threadpoolctl a single module project", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-28T08:02:16Z", "updated_at": "2019-03-29T16:08:16Z", "closed_at": "2019-03-29T16:08:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think we should remove the package folder structure and just keep everything in a `threadpoolctl.py` module.\r\n\r\nWe need to make sure to prefix all classes, constants, helper functions with a leading `_` prefix to make it explicit that they are not part of the public API.\r\n\r\nI think it's fine not to have the test file as part of the PyPI shipped wheel package.\r\n\r\nThis would make it easier to vendor.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/joblib/threadpoolctl/issues/1", "repository_url": "https://api.github.com/repos/joblib/threadpoolctl", "labels_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/1/comments", "events_url": "https://api.github.com/repos/joblib/threadpoolctl/issues/1/events", "html_url": "https://github.com/joblib/threadpoolctl/issues/1", "id": 425893843, "node_id": "MDU6SXNzdWU0MjU4OTM4NDM=", "number": 1, "title": "Slower without `OMP_NUM_THREADS=1` than with `OMP_NUM_THREADS=1`", "user": {"login": "paugier", "id": 8842662, "node_id": "MDQ6VXNlcjg4NDI2NjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paugier", "html_url": "https://github.com/paugier", "followers_url": "https://api.github.com/users/paugier/followers", "following_url": "https://api.github.com/users/paugier/following{/other_user}", "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}", "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paugier/subscriptions", "organizations_url": "https://api.github.com/users/paugier/orgs", "repos_url": "https://api.github.com/users/paugier/repos", "events_url": "https://api.github.com/users/paugier/events{/privacy}", "received_events_url": "https://api.github.com/users/paugier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2019-03-27T11:02:24Z", "updated_at": "2019-04-19T09:09:46Z", "closed_at": "2019-04-19T09:09:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried `with threadpool_limits(1, user_api=None):` with a not so simple case : https://gitlab.com/paugier/tsp-pythran (branch threadpoolctl) on Debian. \r\n\r\nThe case uses Pythran (through Transonic but I don't see how it could change anything for this) to get an extension accelerated with OpenMP. Pythran uses the system OpenBlas library.\r\n\r\nTo reproduce (sorry, I don't use Git):\r\n\r\n```\r\nhg clone https://gitlab.com/paugier/tsp-pythran.git\r\ncd tsp-pythran\r\nhg up threadpoolctl\r\n# compile the extension with openmp\r\ntransonic tsp.py -pf \"-march=native -DUSE_XSIMD -fopenmp\"\r\n# wait to get the extension ready\r\npython run-test-omp.py\r\nOMP_NUM_THREADS=1 python run-test-omp.py\r\n```\r\n\r\nThe good news is that threadpoolctl manages to reduce the number of threads used with OpenMP. However, I get something strange that I don't understand:\r\n\r\nI'm not sure it's an issue, but I get something slower with `python run-test-omp.py` (or `OMP_NUM_THREADS=2 python run-test-omp.py`) than with  `OMP_NUM_THREADS=1 python run-test-omp.py`.\r\n\r\nI actually get the same behavior if the extension is built without OpenMP, i.e. just with `transonic tsp.py`.\r\n\r\n```\r\nOMP_NUM_THREADS=1 python run-test-omp.py\r\n[{'filename_prefixes': ('libopenblas',),\r\n  'internal_api': 'openblas',\r\n  'module_path': '/home/users/augier3pi/.pyenv/versions/3.7.2/lib/python3.7/site-packages/numpy/.libs/libopenblasp-r0-382c8f3a.3.5.dev.so',\r\n  'n_thread': 1,\r\n  'prefix': 'libopenblas',\r\n  'user_api': 'blas',\r\n  'version': '0.3.5.dev'},\r\n {'filename_prefixes': ('libiomp', 'libgomp', 'libomp', 'vcomp'),\r\n  'internal_api': 'openmp',\r\n  'module_path': '/usr/lib/x86_64-linux-gnu/libgomp.so.1',\r\n  'n_thread': 1,\r\n  'prefix': 'libgomp',\r\n  'user_api': 'openmp',\r\n  'version': None},\r\n {'filename_prefixes': ('libopenblas',),\r\n  'internal_api': 'openblas',\r\n  'module_path': '/home/users/augier3pi/.pyenv/versions/3.7.2/lib/python3.7/site-packages/scipy/.libs/libopenblasp-r0-8dca6697.3.0.dev.so',\r\n  'n_thread': 1,\r\n  'prefix': 'libopenblas',\r\n  'user_api': 'blas',\r\n  'version': None},\r\n {'filename_prefixes': ('libopenblas',),\r\n  'internal_api': 'openblas',\r\n  'module_path': '/usr/lib/libopenblas.so.0',\r\n  'n_thread': 1,\r\n  'prefix': 'libopenblas',\r\n  'user_api': 'blas',\r\n  'version': None}]\r\nstart search\r\nrun time = 0.43 s\r\nstart search\r\nrun time = 0.43 s\r\nstart search\r\nrun time = 0.44 s\r\nstart search\r\nrun time = 0.46 s\r\n\r\n\r\npython run-test-omp.py\r\n[{'filename_prefixes': ('libopenblas',),\r\n  'internal_api': 'openblas',\r\n  'module_path': '/home/users/augier3pi/.pyenv/versions/3.7.2/lib/python3.7/site-packages/numpy/.libs/libopenblasp-r0-382c8f3a.3.5.dev.so',\r\n  'n_thread': 4,\r\n  'prefix': 'libopenblas',\r\n  'user_api': 'blas',\r\n  'version': '0.3.5.dev'},\r\n {'filename_prefixes': ('libiomp', 'libgomp', 'libomp', 'vcomp'),\r\n  'internal_api': 'openmp',\r\n  'module_path': '/usr/lib/x86_64-linux-gnu/libgomp.so.1',\r\n  'n_thread': 4,\r\n  'prefix': 'libgomp',\r\n  'user_api': 'openmp',\r\n  'version': None},\r\n {'filename_prefixes': ('libopenblas',),\r\n  'internal_api': 'openblas',\r\n  'module_path': '/home/users/augier3pi/.pyenv/versions/3.7.2/lib/python3.7/site-packages/scipy/.libs/libopenblasp-r0-8dca6697.3.0.dev.so',\r\n  'n_thread': 4,\r\n  'prefix': 'libopenblas',\r\n  'user_api': 'blas',\r\n  'version': None},\r\n {'filename_prefixes': ('libopenblas',),\r\n  'internal_api': 'openblas',\r\n  'module_path': '/usr/lib/libopenblas.so.0',\r\n  'n_thread': 4,\r\n  'prefix': 'libopenblas',\r\n  'user_api': 'blas',\r\n  'version': None}]\r\nstart search\r\nrun time = 0.57 s\r\nstart search\r\nrun time = 0.59 s\r\nstart search\r\nrun time = 0.58 s\r\nstart search\r\nrun time = 0.58 s\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}]}