{"total_count": 25, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/115", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/115/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/115/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/115", "id": 565744438, "node_id": "MDU6SXNzdWU1NjU3NDQ0Mzg=", "number": 115, "title": "Snapshotting unittest.mock.call objects fails", "user": {"login": "davidshepherd7", "id": 795860, "node_id": "MDQ6VXNlcjc5NTg2MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/795860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidshepherd7", "html_url": "https://github.com/davidshepherd7", "followers_url": "https://api.github.com/users/davidshepherd7/followers", "following_url": "https://api.github.com/users/davidshepherd7/following{/other_user}", "gists_url": "https://api.github.com/users/davidshepherd7/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidshepherd7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidshepherd7/subscriptions", "organizations_url": "https://api.github.com/users/davidshepherd7/orgs", "repos_url": "https://api.github.com/users/davidshepherd7/repos", "events_url": "https://api.github.com/users/davidshepherd7/events{/privacy}", "received_events_url": "https://api.github.com/users/davidshepherd7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-15T12:54:49Z", "updated_at": "2020-07-25T17:24:29Z", "closed_at": "2020-07-25T17:24:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Attempting to snapshot the `call_args_list` of a mock fails with this stack trace:\r\n\r\n```\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/module.py:261: in assert_match\r\n    self.assert_value_matches_snapshot(value, prev_snapshot)\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/module.py:241: in assert_value_matches_snapshot\r\n    formatter.assert_value_matches_snapshot(self, test_value, snapshot_value, Formatter())\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/formatters.py:21: in assert_value_matches_snapshot\r\n    test.assert_equals(formatter.normalize(test_value), snapshot_value)\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/formatter.py:24: in normalize\r\n    return formatter.normalize(value, self)\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/formatters.py:45: in normalize\r\n    return value.__class__(formatter.normalize(item) for item in iterator)\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/formatters.py:45: in <genexpr>\r\n    return value.__class__(formatter.normalize(item) for item in iterator)\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/formatter.py:24: in normalize\r\n    return formatter.normalize(value, self)\r\n.wavemodem-venv/lib/python3.7/site-packages/snapshottest/formatters.py:45: in normalize\r\n    return value.__class__(formatter.normalize(item) for item in iterator)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\ncls = <class 'unittest.mock._Call'>\r\nvalue = <generator object CollectionFormatter.normalize.<locals>.<genexpr> at 0x7f17dabc5050>, name = '', parent = None\r\ntwo = False, from_kall = True\r\n\r\n    def __new__(cls, value=(), name='', parent=None, two=False,\r\n                from_kall=True):\r\n        args = ()\r\n        kwargs = {}\r\n>       _len = len(value)\r\nE       TypeError: object of type 'generator' has no len()\r\n\r\n../../../.pyenv/versions/3.7.6/lib/python3.7/unittest/mock.py:2052: TypeError\r\n```\r\n\r\nPR to fix it incoming :slightly_smiling_face: ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/93", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/93/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/93/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/93", "id": 471415812, "node_id": "MDU6SXNzdWU0NzE0MTU4MTI=", "number": 93, "title": "SOLVED: Jenkins truncated job output when snapshot tests fail (disable colors)", "user": {"login": "ygormutti", "id": 114103, "node_id": "MDQ6VXNlcjExNDEwMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/114103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygormutti", "html_url": "https://github.com/ygormutti", "followers_url": "https://api.github.com/users/ygormutti/followers", "following_url": "https://api.github.com/users/ygormutti/following{/other_user}", "gists_url": "https://api.github.com/users/ygormutti/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygormutti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygormutti/subscriptions", "organizations_url": "https://api.github.com/users/ygormutti/orgs", "repos_url": "https://api.github.com/users/ygormutti/repos", "events_url": "https://api.github.com/users/ygormutti/events{/privacy}", "received_events_url": "https://api.github.com/users/ygormutti/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-23T00:14:20Z", "updated_at": "2020-07-23T12:15:47Z", "closed_at": "2020-07-23T12:15:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some Jenkins versions (or some Jenkins plugin, idk) have a bug that sometimes when the job console output uses ANSI escape codes for colors it gets truncated immediately before the start of the colored text. This is always happening with me when snapshots are deprecated.\r\n\r\nSolution: one way to workaround this issue in Jenkins and any other environment that doesn't support ANSI colors (like VSCode output) is to run the tests with the `ANSI_COLORS_DISABLED` environment variable set (to any value).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/88", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/88/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/88/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/88", "id": 468331941, "node_id": "MDU6SXNzdWU0NjgzMzE5NDE=", "number": 88, "title": "Does not install on Alpine - no `wesmer` available", "user": {"login": "aviv-ebates", "id": 37817804, "node_id": "MDQ6VXNlcjM3ODE3ODA0", "avatar_url": "https://avatars2.githubusercontent.com/u/37817804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aviv-ebates", "html_url": "https://github.com/aviv-ebates", "followers_url": "https://api.github.com/users/aviv-ebates/followers", "following_url": "https://api.github.com/users/aviv-ebates/following{/other_user}", "gists_url": "https://api.github.com/users/aviv-ebates/gists{/gist_id}", "starred_url": "https://api.github.com/users/aviv-ebates/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aviv-ebates/subscriptions", "organizations_url": "https://api.github.com/users/aviv-ebates/orgs", "repos_url": "https://api.github.com/users/aviv-ebates/repos", "events_url": "https://api.github.com/users/aviv-ebates/events{/privacy}", "received_events_url": "https://api.github.com/users/aviv-ebates/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-07-15T20:57:25Z", "updated_at": "2019-08-01T17:02:11Z", "closed_at": "2019-07-19T21:29:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Latest version refuses to install on Linux Alpine:\r\n\r\n```\r\n$ docker run  -ti --rm python:3.7-alpine sh -c 'pip install -U pip; pip install fastdiff'\r\nRequirement already up-to-date: pip in /usr/local/lib/python3.7/site-packages (19.1.1)\r\nCollecting fastdiff\r\n  Downloading https://files.pythonhosted.org/packages/11/6e/a2bceac267de3deeca904959b966533479cf0ea1031714b09d1af278bfeb/fastdiff-0.1.4-py2.py3-none-any.whl\r\nCollecting wasmer; python_version >= \"3.5\" and platform_machine == \"x86_64\" and sys_platform == \"linux\" (from fastdiff)\r\n  ERROR: Could not find a version that satisfies the requirement wasmer; python_version >= \"3.5\" and platform_machine == \"x86_64\" and sys_platform == \"linux\" (from fastdiff) (from versions: none)\r\nERROR: No matching distribution found for wasmer; python_version >= \"3.5\" and platform_machine == \"x86_64\" and sys_platform == \"linux\" (from fastdiff)\r\n```\r\n\r\nDoes install properly on other distros (Ubuntu, `slim`, etc).\r\n\r\nFastdiff requires wesmer, which isn't available for Alpine, so the whole setup fails.\r\n\r\n\r\nThere might be a variant of `extras` to allow explicitly not-install `wesmer`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/84", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/84/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/84/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/84", "id": 462956018, "node_id": "MDU6SXNzdWU0NjI5NTYwMTg=", "number": 84, "title": "Add yourbuddyconner to collaborator on PyPi", "user": {"login": "yourbuddyconner", "id": 2635475, "node_id": "MDQ6VXNlcjI2MzU0NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2635475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yourbuddyconner", "html_url": "https://github.com/yourbuddyconner", "followers_url": "https://api.github.com/users/yourbuddyconner/followers", "following_url": "https://api.github.com/users/yourbuddyconner/following{/other_user}", "gists_url": "https://api.github.com/users/yourbuddyconner/gists{/gist_id}", "starred_url": "https://api.github.com/users/yourbuddyconner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yourbuddyconner/subscriptions", "organizations_url": "https://api.github.com/users/yourbuddyconner/orgs", "repos_url": "https://api.github.com/users/yourbuddyconner/repos", "events_url": "https://api.github.com/users/yourbuddyconner/events{/privacy}", "received_events_url": "https://api.github.com/users/yourbuddyconner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "syrusakbary", "id": 188257, "node_id": "MDQ6VXNlcjE4ODI1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/188257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syrusakbary", "html_url": "https://github.com/syrusakbary", "followers_url": "https://api.github.com/users/syrusakbary/followers", "following_url": "https://api.github.com/users/syrusakbary/following{/other_user}", "gists_url": "https://api.github.com/users/syrusakbary/gists{/gist_id}", "starred_url": "https://api.github.com/users/syrusakbary/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syrusakbary/subscriptions", "organizations_url": "https://api.github.com/users/syrusakbary/orgs", "repos_url": "https://api.github.com/users/syrusakbary/repos", "events_url": "https://api.github.com/users/syrusakbary/events{/privacy}", "received_events_url": "https://api.github.com/users/syrusakbary/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "syrusakbary", "id": 188257, "node_id": "MDQ6VXNlcjE4ODI1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/188257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syrusakbary", "html_url": "https://github.com/syrusakbary", "followers_url": "https://api.github.com/users/syrusakbary/followers", "following_url": "https://api.github.com/users/syrusakbary/following{/other_user}", "gists_url": "https://api.github.com/users/syrusakbary/gists{/gist_id}", "starred_url": "https://api.github.com/users/syrusakbary/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syrusakbary/subscriptions", "organizations_url": "https://api.github.com/users/syrusakbary/orgs", "repos_url": "https://api.github.com/users/syrusakbary/repos", "events_url": "https://api.github.com/users/syrusakbary/events{/privacy}", "received_events_url": "https://api.github.com/users/syrusakbary/received_events", "type": "User", "site_admin": false}, {"login": "yourbuddyconner", "id": 2635475, "node_id": "MDQ6VXNlcjI2MzU0NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2635475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yourbuddyconner", "html_url": "https://github.com/yourbuddyconner", "followers_url": "https://api.github.com/users/yourbuddyconner/followers", "following_url": "https://api.github.com/users/yourbuddyconner/following{/other_user}", "gists_url": "https://api.github.com/users/yourbuddyconner/gists{/gist_id}", "starred_url": "https://api.github.com/users/yourbuddyconner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yourbuddyconner/subscriptions", "organizations_url": "https://api.github.com/users/yourbuddyconner/orgs", "repos_url": "https://api.github.com/users/yourbuddyconner/repos", "events_url": "https://api.github.com/users/yourbuddyconner/events{/privacy}", "received_events_url": "https://api.github.com/users/yourbuddyconner/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-01T23:39:53Z", "updated_at": "2019-07-04T00:13:12Z", "closed_at": "2019-07-04T00:13:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I need Access to the PyPi Repository in order to cut releases for this library. My username on PyPi is `yourbuddyconner`. @syrusakbary could you please provision this access? \r\n\r\ncc: @ygormutti ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/81", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/81/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/81/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/81", "id": 462235962, "node_id": "MDU6SXNzdWU0NjIyMzU5NjI=", "number": 81, "title": "Got a bug? New Fork of this project", "user": {"login": "yourbuddyconner", "id": 2635475, "node_id": "MDQ6VXNlcjI2MzU0NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2635475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yourbuddyconner", "html_url": "https://github.com/yourbuddyconner", "followers_url": "https://api.github.com/users/yourbuddyconner/followers", "following_url": "https://api.github.com/users/yourbuddyconner/following{/other_user}", "gists_url": "https://api.github.com/users/yourbuddyconner/gists{/gist_id}", "starred_url": "https://api.github.com/users/yourbuddyconner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yourbuddyconner/subscriptions", "organizations_url": "https://api.github.com/users/yourbuddyconner/orgs", "repos_url": "https://api.github.com/users/yourbuddyconner/repos", "events_url": "https://api.github.com/users/yourbuddyconner/events{/privacy}", "received_events_url": "https://api.github.com/users/yourbuddyconner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-28T23:11:40Z", "updated_at": "2019-07-01T04:27:10Z", "closed_at": "2019-07-01T04:27:10Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hey! If you're looking for a fix for this project, it's been inactive for about a year. I have forked it and am maintaining the codebase here: https://github.com/yourbuddyconner/pysnap\r\n\r\nPlease feel free to report issues or bugs over there! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/77", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/77/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/77/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/77", "id": 455324433, "node_id": "MDU6SXNzdWU0NTUzMjQ0MzM=", "number": 77, "title": "Snapshot not escaping tilt in strings", "user": {"login": "j-jacobi", "id": 12011794, "node_id": "MDQ6VXNlcjEyMDExNzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/12011794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j-jacobi", "html_url": "https://github.com/j-jacobi", "followers_url": "https://api.github.com/users/j-jacobi/followers", "following_url": "https://api.github.com/users/j-jacobi/following{/other_user}", "gists_url": "https://api.github.com/users/j-jacobi/gists{/gist_id}", "starred_url": "https://api.github.com/users/j-jacobi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j-jacobi/subscriptions", "organizations_url": "https://api.github.com/users/j-jacobi/orgs", "repos_url": "https://api.github.com/users/j-jacobi/repos", "events_url": "https://api.github.com/users/j-jacobi/events{/privacy}", "received_events_url": "https://api.github.com/users/j-jacobi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-12T16:59:15Z", "updated_at": "2019-06-12T17:34:56Z", "closed_at": "2019-06-12T17:34:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI got the following error when running some tests on a server:\r\n`Coverage.py warning: Could not parse Python file /.../snap_example_tests.py` because one of the snapshots was saved like this:\r\n```\r\nsnapshots['MyTestClass.test_method_1 1'] = '''some text...'example''''\r\n```\r\nSo I had to manually escape both tilts in the snap like this to be sure the test where working:\r\n```\r\nsnapshots['MyTestClass.test_method_1 1'] = '''some text...\\'example\\''''\r\n```\r\n\r\nThe test in the method was something like this:\r\n```\r\nsnapshot.assert_match(\"some text...'example'\")\r\n```\r\n\r\nRunning on the latest package version available with python 3.5.7\r\n\r\n\r\nCheers\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/75", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/75/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/75/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/75", "id": 447931348, "node_id": "MDU6SXNzdWU0NDc5MzEzNDg=", "number": 75, "title": "option to disable/bypass PrettyDiff'ing", "user": {"login": "hangtwenty", "id": 2420688, "node_id": "MDQ6VXNlcjI0MjA2ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/2420688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hangtwenty", "html_url": "https://github.com/hangtwenty", "followers_url": "https://api.github.com/users/hangtwenty/followers", "following_url": "https://api.github.com/users/hangtwenty/following{/other_user}", "gists_url": "https://api.github.com/users/hangtwenty/gists{/gist_id}", "starred_url": "https://api.github.com/users/hangtwenty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hangtwenty/subscriptions", "organizations_url": "https://api.github.com/users/hangtwenty/orgs", "repos_url": "https://api.github.com/users/hangtwenty/repos", "events_url": "https://api.github.com/users/hangtwenty/events{/privacy}", "received_events_url": "https://api.github.com/users/hangtwenty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-24T00:45:45Z", "updated_at": "2019-07-02T00:59:44Z", "closed_at": "2019-07-02T00:16:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "in pdb I just want the objects sometimes. would be good to have a CLI flag for this. happy to submit a PR if it would be considered", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/71", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/71/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/71/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/71", "id": 429554787, "node_id": "MDU6SXNzdWU0Mjk1NTQ3ODc=", "number": 71, "title": "snapshot won't match while tuple only have 1 elements", "user": {"login": "lucemia", "id": 432851, "node_id": "MDQ6VXNlcjQzMjg1MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/432851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucemia", "html_url": "https://github.com/lucemia", "followers_url": "https://api.github.com/users/lucemia/followers", "following_url": "https://api.github.com/users/lucemia/following{/other_user}", "gists_url": "https://api.github.com/users/lucemia/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucemia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucemia/subscriptions", "organizations_url": "https://api.github.com/users/lucemia/orgs", "repos_url": "https://api.github.com/users/lucemia/repos", "events_url": "https://api.github.com/users/lucemia/events{/privacy}", "received_events_url": "https://api.github.com/users/lucemia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-05T02:12:19Z", "updated_at": "2019-07-01T05:59:13Z", "closed_at": "2019-07-01T05:59:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "the snapshot won't match correctly in this case\r\n\r\n```python\r\ndef test_tuple_bug(snapshot):\r\n    snapshot.assert_match((1,))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/64", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/64/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/64/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/64", "id": 376277382, "node_id": "MDU6SXNzdWUzNzYyNzczODI=", "number": 64, "title": "Is this project not maintained?", "user": {"login": "NateScarlet", "id": 21083014, "node_id": "MDQ6VXNlcjIxMDgzMDE0", "avatar_url": "https://avatars1.githubusercontent.com/u/21083014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NateScarlet", "html_url": "https://github.com/NateScarlet", "followers_url": "https://api.github.com/users/NateScarlet/followers", "following_url": "https://api.github.com/users/NateScarlet/following{/other_user}", "gists_url": "https://api.github.com/users/NateScarlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/NateScarlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NateScarlet/subscriptions", "organizations_url": "https://api.github.com/users/NateScarlet/orgs", "repos_url": "https://api.github.com/users/NateScarlet/repos", "events_url": "https://api.github.com/users/NateScarlet/events{/privacy}", "received_events_url": "https://api.github.com/users/NateScarlet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-11-01T07:01:35Z", "updated_at": "2019-07-02T00:14:02Z", "closed_at": "2019-07-02T00:14:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since latest release already been 4 mounth old", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/62", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/62/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/62/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/62", "id": 367695818, "node_id": "MDU6SXNzdWUzNjc2OTU4MTg=", "number": 62, "title": "Wrong Snapshot Store Output", "user": {"login": "helloqiu", "id": 8971659, "node_id": "MDQ6VXNlcjg5NzE2NTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8971659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/helloqiu", "html_url": "https://github.com/helloqiu", "followers_url": "https://api.github.com/users/helloqiu/followers", "following_url": "https://api.github.com/users/helloqiu/following{/other_user}", "gists_url": "https://api.github.com/users/helloqiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/helloqiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/helloqiu/subscriptions", "organizations_url": "https://api.github.com/users/helloqiu/orgs", "repos_url": "https://api.github.com/users/helloqiu/repos", "events_url": "https://api.github.com/users/helloqiu/events{/privacy}", "received_events_url": "https://api.github.com/users/helloqiu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-08T09:04:43Z", "updated_at": "2019-07-02T00:10:08Z", "closed_at": "2019-07-02T00:10:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there. I think I find a bug :(\r\n## Reproduce the Problem\r\nIf I simply `assert_match` an `Exception`, the output is **right**:  \r\n``` python\r\n# test_example.py\r\ndef test_example(snapshot):\r\n  example = Exception()\r\n  snapshot.assert_match(example)\r\n```\r\nGenerated snapshot file:  \r\n``` python\r\n# -*- coding: utf-8 -*-\r\n# snapshottest: v1 - https://goo.gl/zC4yUc\r\nfrom __future__ import unicode_literals\r\n\r\nfrom snapshottest import GenericRepr, Snapshot\r\n\r\n\r\nsnapshots = Snapshot()\r\n\r\nsnapshots['test_example 1'] = GenericRepr('Exception()')\r\n```\r\nBut the output is **wrong** when I `assert_match` a `dict` which contains this `Exception`:\r\n``` python\r\n# test_example.py\r\ndef test_example(snapshot):\r\n  example = dict(err=Exception())\r\n  snapshot.assert_match(example)\r\n```\r\nGenerated snapshot file:  \r\n``` python\r\n# -*- coding: utf-8 -*-\r\n# snapshottest: v1 - https://goo.gl/zC4yUc\r\nfrom __future__ import unicode_literals\r\n\r\nfrom snapshottest import GenericRepr, Snapshot\r\n\r\n\r\nsnapshots = Snapshot()\r\n\r\nsnapshots['test_example 1'] = {\r\n    'err': Exception()\r\n}\r\n```\r\nThe expected result shoud be `'err': GenericRepr('Exception()')` as the first example.  \r\n## Possible Solutions\r\nMaybe this bug is caused here: \r\n https://github.com/syrusakbary/snapshottest/blob/master/snapshottest/formatters.py#L20\r\nhttps://github.com/syrusakbary/snapshottest/blob/master/snapshottest/module.py#L222\r\nIn the second example, the `Formatter.get_formatter()` returns a `TypeFormatter` which `store` function return the dict itself directely. It should get the formatter for every key&value in the dict like `format` and parse them recursively.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/61", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/61/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/61/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/61", "id": 365614047, "node_id": "MDU6SXNzdWUzNjU2MTQwNDc=", "number": 61, "title": "Django runner adds test summary even when no snapshot tests are run", "user": {"login": "batmantis", "id": 16705693, "node_id": "MDQ6VXNlcjE2NzA1Njkz", "avatar_url": "https://avatars3.githubusercontent.com/u/16705693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/batmantis", "html_url": "https://github.com/batmantis", "followers_url": "https://api.github.com/users/batmantis/followers", "following_url": "https://api.github.com/users/batmantis/following{/other_user}", "gists_url": "https://api.github.com/users/batmantis/gists{/gist_id}", "starred_url": "https://api.github.com/users/batmantis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/batmantis/subscriptions", "organizations_url": "https://api.github.com/users/batmantis/orgs", "repos_url": "https://api.github.com/users/batmantis/repos", "events_url": "https://api.github.com/users/batmantis/events{/privacy}", "received_events_url": "https://api.github.com/users/batmantis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-01T19:46:10Z", "updated_at": "2019-07-14T03:16:01Z", "closed_at": "2019-07-14T03:16:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "The below output is always displayed even when it is not relevant to the tests that are being run.\r\n```sh\r\n======================================================================\r\nSnapshotTest summary\r\n----------------------------------------------------------------------\r\n======================================================================\r\n```\r\nThis should be removed to avoid clutter in the terminal.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/59", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/59/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/59/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/59", "id": 365054403, "node_id": "MDU6SXNzdWUzNjUwNTQ0MDM=", "number": 59, "title": "Package includes .DS_Store file", "user": {"login": "behnam", "id": 37169, "node_id": "MDQ6VXNlcjM3MTY5", "avatar_url": "https://avatars2.githubusercontent.com/u/37169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/behnam", "html_url": "https://github.com/behnam", "followers_url": "https://api.github.com/users/behnam/followers", "following_url": "https://api.github.com/users/behnam/following{/other_user}", "gists_url": "https://api.github.com/users/behnam/gists{/gist_id}", "starred_url": "https://api.github.com/users/behnam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/behnam/subscriptions", "organizations_url": "https://api.github.com/users/behnam/orgs", "repos_url": "https://api.github.com/users/behnam/repos", "events_url": "https://api.github.com/users/behnam/events{/privacy}", "received_events_url": "https://api.github.com/users/behnam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-28T21:59:53Z", "updated_at": "2020-08-13T17:10:09Z", "closed_at": "2020-08-13T17:10:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Looks like the latest published pypi package (https://pypi.org/project/snapshottest/0.5.0/) includes a `.DS_Store` file. Would be great to drop it, as it's just junk for downstream users.\r\n\r\n(I'm surprised any dot-files being automatically included in packaging. That's usually not a good practice.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/57", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/57/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/57/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/57", "id": 353216057, "node_id": "MDU6SXNzdWUzNTMyMTYwNTc=", "number": 57, "title": "Generic Representation Issues", "user": {"login": "blakeembrey", "id": 1088987, "node_id": "MDQ6VXNlcjEwODg5ODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1088987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blakeembrey", "html_url": "https://github.com/blakeembrey", "followers_url": "https://api.github.com/users/blakeembrey/followers", "following_url": "https://api.github.com/users/blakeembrey/following{/other_user}", "gists_url": "https://api.github.com/users/blakeembrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/blakeembrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blakeembrey/subscriptions", "organizations_url": "https://api.github.com/users/blakeembrey/orgs", "repos_url": "https://api.github.com/users/blakeembrey/repos", "events_url": "https://api.github.com/users/blakeembrey/events{/privacy}", "received_events_url": "https://api.github.com/users/blakeembrey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2018-08-23T04:06:55Z", "updated_at": "2019-11-04T18:15:44Z", "closed_at": "2019-07-02T22:54:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use this for snapshotting, but running into issues with `GenericRepr` and double quoting problems when asserting the match. I tried `master` since it appeared to have fixed this and run into a new issue, the `GenericRepr` isn't used and instead it's directly `datetime.date(...)` or `Decimal(...)`. The problem with this is that these types were never imported to start with, so I run into type issues.\r\n\r\nIs there a reason these are representations in Python instead of a multiline string representation like in Jest? Jest only handles formatting and compares the formatted objects which makes things simpler (e.g. does this string equal the other), while the complexity of this project seems a bit higher from equality checks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/49", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/49/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/49/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/49", "id": 329689416, "node_id": "MDU6SXNzdWUzMjk2ODk0MTY=", "number": 49, "title": "Snapshot of any empty/falsy value incorrectly matches any other value", "user": {"login": "medmunds", "id": 639984, "node_id": "MDQ6VXNlcjYzOTk4NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/639984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/medmunds", "html_url": "https://github.com/medmunds", "followers_url": "https://api.github.com/users/medmunds/followers", "following_url": "https://api.github.com/users/medmunds/following{/other_user}", "gists_url": "https://api.github.com/users/medmunds/gists{/gist_id}", "starred_url": "https://api.github.com/users/medmunds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/medmunds/subscriptions", "organizations_url": "https://api.github.com/users/medmunds/orgs", "repos_url": "https://api.github.com/users/medmunds/repos", "events_url": "https://api.github.com/users/medmunds/events{/privacy}", "received_events_url": "https://api.github.com/users/medmunds/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-06T02:35:52Z", "updated_at": "2018-07-10T04:41:23Z", "closed_at": "2018-07-10T04:41:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Say you're trying to snapshot test something like this API:\r\n\r\n```python\r\ndef get_friends(user):\r\n    \"\"\"Returns list of user's friends, or None if user has restricted access\"\"\"\r\n    ...\r\n```\r\n\r\nIt's not possible to distinguish `[]` \"no friends\" from `None` \"restricted access\": assert_match considers all falsy values equivalent:\r\n\r\n```python\r\ndef test_falsy_values(snapshot):\r\n    # create a snapshot named 'none'\r\n    snapshot.assert_match(None, name='none')\r\n\r\n    # test that same named snapshot against other falsy values\r\n    # (this simulates a later run where the actual results have changed)\r\n    snapshot.assert_match([], name='none')  # should fail, but doesn't\r\n    snapshot.assert_match({}, name='none')  # should fail, but doesn't\r\n    snapshot.assert_match(\"\", name='none')  # should fail, but doesn't\r\n    snapshot.assert_match(0, name='none')  # should fail, but doesn't\r\n    snapshot.assert_match(False, name='none')  # should fail, but doesn't\r\n\r\n    # but, just to be clear:\r\n    assert None == []  # this fails, correctly\r\n```\r\n\r\nPR coming.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/44", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/44/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/44/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/44", "id": 328684614, "node_id": "MDU6SXNzdWUzMjg2ODQ2MTQ=", "number": 44, "title": "Python 2 snapshot text ending in newline always matches anything", "user": {"login": "medmunds", "id": 639984, "node_id": "MDQ6VXNlcjYzOTk4NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/639984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/medmunds", "html_url": "https://github.com/medmunds", "followers_url": "https://api.github.com/users/medmunds/followers", "following_url": "https://api.github.com/users/medmunds/following{/other_user}", "gists_url": "https://api.github.com/users/medmunds/gists{/gist_id}", "starred_url": "https://api.github.com/users/medmunds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/medmunds/subscriptions", "organizations_url": "https://api.github.com/users/medmunds/orgs", "repos_url": "https://api.github.com/users/medmunds/repos", "events_url": "https://api.github.com/users/medmunds/events{/privacy}", "received_events_url": "https://api.github.com/users/medmunds/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-06-01T23:01:38Z", "updated_at": "2018-06-03T17:57:18Z", "closed_at": "2018-06-03T17:57:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you generate snapshots on Python 2, and any snapshot is unicode text ending in newline, future test runs (on any Python version) will not detect changes.\r\n\r\n### To reproduce\r\n\r\n1. On Python 2, run this pytest (to generate the initial snapshot file):\r\n```python\r\ndef test_multiline_string(snapshot):\r\n    expected = u'one\\ntwo\\n'  # unicode text ending in newline\r\n    snapshot.assert_match(expected)\r\n```\r\n\r\n2. Now change the expected result and run the test again (on Python 2 or Python 3):\r\n```python\r\ndef test_multiline_string(snapshot):\r\n    expected = u'anything different'\r\n    snapshot.assert_match(expected)\r\n```\r\n\r\nExpected result: second run should fail, because it doesn't match the snapshot\r\n\r\nActual result: second run appears to succeed. (In fact, any other tests in the same module will appear to succeed, even if their snapshots have changed.)\r\n\r\n### Issue\r\n\r\nThere are actually two problems here:\r\n\r\n1. When saving the initial snapshot file, the formatter generates invalid Python code for unicode strings ending in newlines:\r\n  ```python\r\nsnapshots['test_multiline_string 1'] = ''''one\r\n'two\r\n'three\r\n''''\r\n```\r\n(Notice the extra single quotes on every line.) `formatter.trepr()` doesn't handle unicode strings properly on Python 2.\r\n\r\n2. On later runs, the snapshot loader silently swallows syntax errors, then runs as though it's creating new snapshots. So all snapshot tests in the same module will appear to pass, whether or not they match the actual snapshot. (See @mprostock's [comment in #24](https://github.com/syrusakbary/snapshottest/issues/24#issuecomment-371278312) about the snapshot loader dropping all errors.)\r\n\r\nPRs follow.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/40", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/40/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/40/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/40", "id": 315117407, "node_id": "MDU6SXNzdWUzMTUxMTc0MDc=", "number": 40, "title": "Snapshot does not record / test correctly", "user": {"login": "max-sixty", "id": 5635139, "node_id": "MDQ6VXNlcjU2MzUxMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5635139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/max-sixty", "html_url": "https://github.com/max-sixty", "followers_url": "https://api.github.com/users/max-sixty/followers", "following_url": "https://api.github.com/users/max-sixty/following{/other_user}", "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}", "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions", "organizations_url": "https://api.github.com/users/max-sixty/orgs", "repos_url": "https://api.github.com/users/max-sixty/repos", "events_url": "https://api.github.com/users/max-sixty/events{/privacy}", "received_events_url": "https://api.github.com/users/max-sixty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-17T15:39:38Z", "updated_at": "2018-06-06T14:55:06Z", "closed_at": "2018-06-06T14:55:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "After running with `--snapshot-update`, the library states it passes. \r\n\r\nBut then running again without, it raises an error.\r\n\r\nIs it to do with there being newlines? This is the start of the output\r\n```\r\nE         - Snapshot\r\nE         + Received\r\nE\r\nE         - ''''\\'{\"date\":946857600000,\"returns\":0.0343696959}\r\nE         ?    --\r\nE         + ''''{\"date\":946857600000,\"returns\":0.0343696959}\r\nE         - '\\'{\"date\":946944000000,\"returns\":0.0343696959}\r\nE         ? --\r\nE         + '{\"date\":946944000000,\"returns\":0.0343696959}\r\nE         - '\\'{\"date\":947030400000,\"returns\":0.0343696959}\r\nE         ? --\r\nE         + '{\"date\":947030400000,\"returns\":0.0343696959}\r\nE         - '\\'{\"date\":947116800000,\"returns\":0.0343696959}\r\nE         ? --\r\nE         + '{\"date\":947116800000,\"returns\":0.0343696959}\r\nE         - '\\'{\"date\":947203200000,\"returns\":0.0343696959}\r\n```\r\n\r\nor related to https://github.com/syrusakbary/snapshottest/pull/39 ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/37", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/37/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/37/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/37", "id": 306868458, "node_id": "MDU6SXNzdWUzMDY4Njg0NTg=", "number": 37, "title": "When can we expect release 0.5.1", "user": {"login": "eldos-dl", "id": 6558376, "node_id": "MDQ6VXNlcjY1NTgzNzY=", "avatar_url": "https://avatars3.githubusercontent.com/u/6558376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eldos-dl", "html_url": "https://github.com/eldos-dl", "followers_url": "https://api.github.com/users/eldos-dl/followers", "following_url": "https://api.github.com/users/eldos-dl/following{/other_user}", "gists_url": "https://api.github.com/users/eldos-dl/gists{/gist_id}", "starred_url": "https://api.github.com/users/eldos-dl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eldos-dl/subscriptions", "organizations_url": "https://api.github.com/users/eldos-dl/orgs", "repos_url": "https://api.github.com/users/eldos-dl/repos", "events_url": "https://api.github.com/users/eldos-dl/events{/privacy}", "received_events_url": "https://api.github.com/users/eldos-dl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-03-20T13:37:01Z", "updated_at": "2019-07-02T00:31:40Z", "closed_at": "2019-07-02T00:31:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Any plans on publishing latest changes to pip?\r\nAny plans on setting up CD with Travis to pip?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/28", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/28/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/28/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/28", "id": 289991226, "node_id": "MDU6SXNzdWUyODk5OTEyMjY=", "number": 28, "title": "snapshot errors mask the exceptions that caused them", "user": {"login": "g--", "id": 777078, "node_id": "MDQ6VXNlcjc3NzA3OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/777078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g--", "html_url": "https://github.com/g--", "followers_url": "https://api.github.com/users/g--/followers", "following_url": "https://api.github.com/users/g--/following{/other_user}", "gists_url": "https://api.github.com/users/g--/gists{/gist_id}", "starred_url": "https://api.github.com/users/g--/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g--/subscriptions", "organizations_url": "https://api.github.com/users/g--/orgs", "repos_url": "https://api.github.com/users/g--/repos", "events_url": "https://api.github.com/users/g--/events{/privacy}", "received_events_url": "https://api.github.com/users/g--/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-19T14:22:48Z", "updated_at": "2018-01-22T16:18:51Z", "closed_at": "2018-01-22T16:18:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Because snapshots are always compared after a test run, their error messages are displayed last.  If the cause of those errors are unhandled/unexpected exceptions during the test run (possibly in different tests), the stack traces are printed before the snapshot error messages.  And we have to scroll up past them.\r\n\r\nMy wish is some way to show stack trace at the end of a test run.  Perhaps even temporarily by disabling snapshot .. maybe with a flag (eg  `--no-snapshots`).\r\n\r\nCheers!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/17", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/17/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/17/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/17", "id": 253379949, "node_id": "MDU6SXNzdWUyNTMzNzk5NDk=", "number": 17, "title": "Named snapshots", "user": {"login": "tricoder42", "id": 827862, "node_id": "MDQ6VXNlcjgyNzg2Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/827862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tricoder42", "html_url": "https://github.com/tricoder42", "followers_url": "https://api.github.com/users/tricoder42/followers", "following_url": "https://api.github.com/users/tricoder42/following{/other_user}", "gists_url": "https://api.github.com/users/tricoder42/gists{/gist_id}", "starred_url": "https://api.github.com/users/tricoder42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tricoder42/subscriptions", "organizations_url": "https://api.github.com/users/tricoder42/orgs", "repos_url": "https://api.github.com/users/tricoder42/repos", "events_url": "https://api.github.com/users/tricoder42/events{/privacy}", "received_events_url": "https://api.github.com/users/tricoder42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-28T16:14:53Z", "updated_at": "2017-09-15T15:37:34Z", "closed_at": "2017-09-15T15:37:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey, great project, thanks a lot!\r\n\r\nWhat's your opinion on named snapshots? Right now the name is auto-generated from the name of method where it's called and number of occurrence. It would help me to check snapshots manually if I could set the name, something like:\r\n\r\n```py\r\ndef test_serializers(snapshot):\r\n    snapshot.assert_match(serializer(Project.objects.all()), 'projects')\r\n    snapshot.assert_match(serializer(Role.objects.all()), 'roles')\r\n```\r\n\r\n... and the snapshots would be named `test_serializers projects`, `test_serializers roles` and so on.\r\n\r\nWhat do you think?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/16", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/16/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/16/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/16", "id": 252528861, "node_id": "MDU6SXNzdWUyNTI1Mjg4NjE=", "number": 16, "title": "Non ASCII characters raises errors", "user": {"login": "ptgreg", "id": 1421214, "node_id": "MDQ6VXNlcjE0MjEyMTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1421214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptgreg", "html_url": "https://github.com/ptgreg", "followers_url": "https://api.github.com/users/ptgreg/followers", "following_url": "https://api.github.com/users/ptgreg/following{/other_user}", "gists_url": "https://api.github.com/users/ptgreg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptgreg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptgreg/subscriptions", "organizations_url": "https://api.github.com/users/ptgreg/orgs", "repos_url": "https://api.github.com/users/ptgreg/repos", "events_url": "https://api.github.com/users/ptgreg/events{/privacy}", "received_events_url": "https://api.github.com/users/ptgreg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-08-24T08:43:26Z", "updated_at": "2019-07-02T00:18:31Z", "closed_at": "2019-07-02T00:18:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nIn version 0.5.0\r\n\r\nThis just doesn't work:\r\n```\r\ndef simple_test(self):\r\n        expect = u'p\u00e9p\u00e8re'\r\n        self.assertMatchSnapshot(expect)\r\n```\r\nand fails with this error:\r\n```\r\nERROR: test suite for <class 'alk_service_search.tests.controller.search.v1.test_advanced_search.AdvancedSearchMixinTestCase'>\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/nose-1.3.6-py2.7.egg/nose/suite.py\", line 228, in run\r\n    self.tearDown()\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/nose-1.3.6-py2.7.egg/nose/suite.py\", line 351, in tearDown\r\n    self.teardownContext(ancestor)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/nose-1.3.6-py2.7.egg/nose/suite.py\", line 367, in teardownContext\r\n    try_run(context, names)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/nose-1.3.6-py2.7.egg/nose/util.py\", line 471, in try_run\r\n    return func()\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/unittest.py\", line 81, in tearDownClass\r\n    module.save()\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/module.py\", line 145, in save\r\n    snapshots_declarations.append('''snapshots['{}'] = {}'''.format(key, pretty(value)))\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 30, in __call__\r\n    return self.format(value, self.indent)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 45, in format\r\n    return self.format_str(value, indent)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 56, in format_str\r\n    return repr(str(value))\r\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xe9' in position 1: ordinal not in range(128)\r\n```\r\n\r\nand If I just do \r\n```\r\ndef simple_test(self):\r\n        expect = 'p\u00e9p\u00e8re'\r\n        self.assertMatchSnapshot(expect)\r\n```\r\nit saves the snapshot on disc \r\n`snapshots['AdvancedSearchMixinTestCase::simple_test 1'] = 'p\\xc3\\xa9p\\xc3\\xa8re'`\r\nbut fails when running nose to check\r\n```\r\nERROR: simple_test (alk_service_search.tests.controller.search.v1.test_advanced_search.AdvancedSearchMixinTestCase)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/ptgreg/alkemics/dev/backend/service-search-es/alk_service_search/tests/controller/search/v1/test_advanced_search.py\", line 27, in simple_test\r\n    self.assertMatchSnapshot(expect)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/unittest.py\", line 105, in assert_match_snapshot\r\n    self._snapshot.assert_match(value)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/module.py\", line 225, in assert_match\r\n    PrettyDiff(prev_snapshot, self)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/unittest.py\", line 29, in assert_equals\r\n    self.assertEqual(value, snapshot)\r\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 513, in assertEqual\r\n    assertion_func(first, second, msg=msg)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/unittest.py\", line 74, in comparePrettyDifs\r\n    raise self.failureException('\\n'.join(diff_report(obj1, obj2)))\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/reporting.py\", line 50, in diff_report\r\n    ] + left.get_diff(right)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/diff.py\", line 40, in get_diff\r\n    text2 = ['Snapshot ', ''] + self.pretty(other).splitlines(1)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 30, in __call__\r\n    return self.format(value, self.indent)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 37, in format\r\n    return self.format(value.obj, indent)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 45, in format\r\n    return self.format_str(value, indent)\r\n  File \"/Users/ptgreg/.virtualenvs/search-es/lib/python2.7/site-packages/snapshottest/formatter.py\", line 56, in format_str\r\n    return repr(str(value))\r\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 1-2: ordinal not in range(128)\r\n-------------------- >> begin captured logging << --------------------\r\nddtrace.encoding: DEBUG: using Msgpack encoder\r\npip.utils: DEBUG: lzma module is not available\r\npip.vcs: DEBUG: Registered VCS backend: git\r\npip.vcs: DEBUG: Registered VCS backend: hg\r\npip.vcs: DEBUG: Registered VCS backend: svn\r\npip.vcs: DEBUG: Registered VCS backend: bzr\r\n--------------------- >> end captured logging << ---------------------\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/14", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/14/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/14/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/14", "id": 247564243, "node_id": "MDU6SXNzdWUyNDc1NjQyNDM=", "number": 14, "title": "Error when running with py.test", "user": {"login": "jstejada", "id": 1271509, "node_id": "MDQ6VXNlcjEyNzE1MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1271509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jstejada", "html_url": "https://github.com/jstejada", "followers_url": "https://api.github.com/users/jstejada/followers", "following_url": "https://api.github.com/users/jstejada/following{/other_user}", "gists_url": "https://api.github.com/users/jstejada/gists{/gist_id}", "starred_url": "https://api.github.com/users/jstejada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jstejada/subscriptions", "organizations_url": "https://api.github.com/users/jstejada/orgs", "repos_url": "https://api.github.com/users/jstejada/repos", "events_url": "https://api.github.com/users/jstejada/events{/privacy}", "received_events_url": "https://api.github.com/users/jstejada/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-03T01:03:30Z", "updated_at": "2019-07-02T00:12:34Z", "closed_at": "2019-07-02T00:12:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting the following error when trying to use this library with py.test:\r\n```\r\n======================================================================================== ERRORS =========================================================================================\r\n__________________________________________________________ ERROR at setup of TestAccounts.test_get_accounts_three_way_sort_by ___________________________________________________________\r\npytest.fixture functions cannot use ``yield``. Instead write and return an inner function/generator and let the consumer call and iterate over it.:\r\n\r\n    @pytest.fixture\r\n    def snapshot(request):\r\n        with PyTestSnapshotTest(request) as snapshot_test:\r\n            yield snapshot_test\r\n/Users/juan/codez/nylas/cloud-core/.venv/lib/python2.7/site-packages/snapshottest/pytest.py:70\r\n================================================================================ 1 error in 2.98 seconds ================================================================================\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/9", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/9/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/9/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/9", "id": 238772499, "node_id": "MDU6SXNzdWUyMzg3NzI0OTk=", "number": 9, "title": "Proposed fork / extras_require", "user": {"login": "dfee", "id": 262602, "node_id": "MDQ6VXNlcjI2MjYwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/262602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfee", "html_url": "https://github.com/dfee", "followers_url": "https://api.github.com/users/dfee/followers", "following_url": "https://api.github.com/users/dfee/following{/other_user}", "gists_url": "https://api.github.com/users/dfee/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfee/subscriptions", "organizations_url": "https://api.github.com/users/dfee/orgs", "repos_url": "https://api.github.com/users/dfee/repos", "events_url": "https://api.github.com/users/dfee/events{/privacy}", "received_events_url": "https://api.github.com/users/dfee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-27T08:22:45Z", "updated_at": "2017-07-07T17:25:20Z", "closed_at": "2017-07-07T08:31:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Tonight, when upgrading, I noticed my virtualenv had been muddied by the addition(s) from a django requirement. I don't use django, and I don't think this library requires django (except for the django specific code in [`django.py`](https://github.com/syrusakbary/snapshottest/blob/master/snapshottest/django.py)).\r\n\r\nCan we move this code to either /ext/django and use setup.py's `extras_require={'django': [django]}` so this library can have a broader audience than those intererested in django development?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/5", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/5/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/5/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/5", "id": 232717024, "node_id": "MDU6SXNzdWUyMzI3MTcwMjQ=", "number": 5, "title": "Logging is configured on behalf of the user", "user": {"login": "dfee", "id": 262602, "node_id": "MDQ6VXNlcjI2MjYwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/262602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfee", "html_url": "https://github.com/dfee", "followers_url": "https://api.github.com/users/dfee/followers", "following_url": "https://api.github.com/users/dfee/following{/other_user}", "gists_url": "https://api.github.com/users/dfee/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfee/subscriptions", "organizations_url": "https://api.github.com/users/dfee/orgs", "repos_url": "https://api.github.com/users/dfee/repos", "events_url": "https://api.github.com/users/dfee/events{/privacy}", "received_events_url": "https://api.github.com/users/dfee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-05-31T22:36:28Z", "updated_at": "2017-06-27T08:05:31Z", "closed_at": "2017-06-27T08:05:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This module is [configuring logging](https://github.com/syrusakbary/snapshottest/blob/master/snapshottest/module.py#L12), which interferes with logging that I've already configured, and my `pytest-catchlog` configuration.\r\n\r\nI don't believe this line is necessary. Can we remove it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/3", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/3/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/3/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/3", "id": 222432140, "node_id": "MDU6SXNzdWUyMjI0MzIxNDA=", "number": 3, "title": "Sort order of OrderedDicts when snapshotting ?", "user": {"login": "peritus", "id": 11022, "node_id": "MDQ6VXNlcjExMDIy", "avatar_url": "https://avatars0.githubusercontent.com/u/11022?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peritus", "html_url": "https://github.com/peritus", "followers_url": "https://api.github.com/users/peritus/followers", "following_url": "https://api.github.com/users/peritus/following{/other_user}", "gists_url": "https://api.github.com/users/peritus/gists{/gist_id}", "starred_url": "https://api.github.com/users/peritus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peritus/subscriptions", "organizations_url": "https://api.github.com/users/peritus/orgs", "repos_url": "https://api.github.com/users/peritus/repos", "events_url": "https://api.github.com/users/peritus/events{/privacy}", "received_events_url": "https://api.github.com/users/peritus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-18T14:17:42Z", "updated_at": "2017-06-06T02:51:19Z", "closed_at": "2017-06-06T02:51:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey,\r\n\r\njust found your package, I'm super happy with jest snapshots and want to write tests for troposphere cloud formation templates (https://github.com/cloudtools/troposphere). They are large JSON templates and troposphere returns them as an ordinary dict.\r\n\r\nSo, OrderedDict to the rescue:\r\n\r\n```\r\nimport json\r\nfrom collections import OrderedDict\r\n\r\nfrom mycompany.troposphere import cftemplate\r\n\r\n\r\nclass SortedDict(OrderedDict):\r\n    def __init__(self, **kwargs):\r\n        super(SortedDict, self).__init__()\r\n\r\n        for key, value in sorted(kwargs.items()):\r\n            if isinstance(value, dict):\r\n                self[key] = SortedDict(**value)\r\n            else:\r\n                self[key] = value\r\n\r\n\r\ndef test_cftemplate(snapshot):\r\n    snapshot.assert_match(\r\n        SortedDict(**(\r\n          json.loads(\r\n              cftemplate.to_json(),\r\n              object_pairs_hook=OrderedDict)\r\n          )\r\n        )\r\n    )\r\n```\r\n\r\n(combining http://stackoverflow.com/a/31483810 here with http://stackoverflow.com/a/6921760 )\r\n\r\n-----\r\n\r\nBut I guess that is all I can do as a test author, because the snapshot is serialized as an ordinary dict like this:\r\n\r\n```\r\n\r\nfrom snapshottest import Snapshot\r\n\r\n\r\nsnapshots = Snapshot()\r\n\r\nsnapshots['test_cftemplate 1'] = {\r\n    'Conditions': {\r\n\r\n```\r\n\r\nand then also read as an ordinary dict when importing (and then the order is undefined again).\r\n\r\n-----\r\n\r\nHence my question:\r\n\r\nHow do I make both the snapshot and the received value be a `SortedDict` before comparing ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/1", "repository_url": "https://api.github.com/repos/syrusakbary/snapshottest", "labels_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/1/comments", "events_url": "https://api.github.com/repos/syrusakbary/snapshottest/issues/1/events", "html_url": "https://github.com/syrusakbary/snapshottest/issues/1", "id": 221896119, "node_id": "MDU6SXNzdWUyMjE4OTYxMTk=", "number": 1, "title": "django.test.TestCase support", "user": {"login": "BossGrand", "id": 2106699, "node_id": "MDQ6VXNlcjIxMDY2OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2106699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BossGrand", "html_url": "https://github.com/BossGrand", "followers_url": "https://api.github.com/users/BossGrand/followers", "following_url": "https://api.github.com/users/BossGrand/following{/other_user}", "gists_url": "https://api.github.com/users/BossGrand/gists{/gist_id}", "starred_url": "https://api.github.com/users/BossGrand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BossGrand/subscriptions", "organizations_url": "https://api.github.com/users/BossGrand/orgs", "repos_url": "https://api.github.com/users/BossGrand/repos", "events_url": "https://api.github.com/users/BossGrand/events{/privacy}", "received_events_url": "https://api.github.com/users/BossGrand/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-04-14T21:35:41Z", "updated_at": "2017-06-06T02:51:19Z", "closed_at": "2017-06-06T02:51:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "First off great library can't wait to integrate it into my project!\r\n\r\nI think theres a bug where testcase doesn't reset after each test.\r\n\r\nThe following code will print out 0, 1, 2 \r\nshowing that the market models are not being deleted after each test\r\n\r\n```python\r\nclass MasterDatabaseNodeTestCase(TestCase):\r\n    def setUp(self):\r\n        print(Markets.objects.count()\r\n\r\n        market = Markets(name='SF')\r\n        market.save()\r\n        self.market = market\r\n   \r\n    def test_1(self):\r\n         self.assertTrue(True)\r\n\r\n    def test_2(self):\r\n         self.assertTrue(True)\r\n\r\n    def test_3(self):\r\n         self.assertTrue(True)\r\n```\r\n\r\nI looked a little in to the source code for the testCase implementation\r\n\r\nshould\r\nhttps://github.com/syrusakbary/snapshottest/blob/master/snapshottest/unittest.py#L83\r\nbe calling super().setUp()\r\n\r\nand\r\n\r\nhttps://github.com/syrusakbary/snapshottest/blob/master/snapshottest/unittest.py#L97\r\nbe calling super().tearDown()?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}]}