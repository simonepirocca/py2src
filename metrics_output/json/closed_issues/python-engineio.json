{"total_count": 244, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/socketio/engine.io/issues/599", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/599/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/599/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/599/events", "html_url": "https://github.com/socketio/engine.io/issues/599", "id": 580493752, "node_id": "MDU6SXNzdWU1ODA0OTM3NTI=", "number": 599, "title": "ValueError: Too many packets in payload", "user": {"login": "VeNoMouS", "id": 597545, "node_id": "MDQ6VXNlcjU5NzU0NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/597545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VeNoMouS", "html_url": "https://github.com/VeNoMouS", "followers_url": "https://api.github.com/users/VeNoMouS/followers", "following_url": "https://api.github.com/users/VeNoMouS/following{/other_user}", "gists_url": "https://api.github.com/users/VeNoMouS/gists{/gist_id}", "starred_url": "https://api.github.com/users/VeNoMouS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VeNoMouS/subscriptions", "organizations_url": "https://api.github.com/users/VeNoMouS/orgs", "repos_url": "https://api.github.com/users/VeNoMouS/repos", "events_url": "https://api.github.com/users/VeNoMouS/events{/privacy}", "received_events_url": "https://api.github.com/users/VeNoMouS/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-13T10:01:57Z", "updated_at": "2020-03-13T10:10:43Z", "closed_at": "2020-03-13T10:10:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nIf not too many packets its fine, however push alot of packets and get an error of \r\n`ValueError: Too many packets in payload`\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nhave more than one `socket.on` with different namespaces\r\n\r\n### Expected behaviour\r\n\r\n\r\n### Setup\r\n- OS:\r\n- browser:\r\n- engine.io version: 3.11.3.dev0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/dist-packages/python_engineio-3.11.3.dev0-py3.7.egg/engineio/server.py\", line 396, in handle_request\r\n    socket.handle_post_request(environ)\r\n  File \"/usr/local/lib/python3.7/dist-packages/python_engineio-3.11.3.dev0-py3.7.egg/engineio/socket.py\", line 127, in handle_post_request\r\n    p = payload.Payload(encoded_payload=body)\r\n  File \"/usr/local/lib/python3.7/dist-packages/python_engineio-3.11.3.dev0-py3.7.egg/engineio/payload.py\", line 15, in __init__\r\n    self.decode(encoded_payload)\r\n  File \"/usr/local/lib/python3.7/dist-packages/python_engineio-3.11.3.dev0-py3.7.egg/engineio/payload.py\", line 61, in decode\r\n    raise ValueError('Too many packets in payload')\r\nValueError: Too many packets in payload\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/596", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/596/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/596/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/596/events", "html_url": "https://github.com/socketio/engine.io/issues/596", "id": 560855953, "node_id": "MDU6SXNzdWU1NjA4NTU5NTM=", "number": 596, "title": "abortConnection may throw EPIPE exception ", "user": {"login": "mingc00", "id": 799624, "node_id": "MDQ6VXNlcjc5OTYyNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/799624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingc00", "html_url": "https://github.com/mingc00", "followers_url": "https://api.github.com/users/mingc00/followers", "following_url": "https://api.github.com/users/mingc00/following{/other_user}", "gists_url": "https://api.github.com/users/mingc00/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingc00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingc00/subscriptions", "organizations_url": "https://api.github.com/users/mingc00/orgs", "repos_url": "https://api.github.com/users/mingc00/repos", "events_url": "https://api.github.com/users/mingc00/events{/privacy}", "received_events_url": "https://api.github.com/users/mingc00/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-06T08:34:47Z", "updated_at": "2020-04-15T09:42:33Z", "closed_at": "2020-04-15T09:42:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nApplication terminated by uncaught exception.\r\n\r\n```\r\nevents.js:187\r\nthrow er; // Unhandled 'error' event\r\n^\r\n\r\nError: write EPIPE\r\nat afterWriteDispatched (internal/stream_base_commons.js:150:25)\r\nat writeGeneric (internal/stream_base_commons.js:141:3)\r\nat Socket._writeGeneric (net.js:771:11)\r\nat Socket._write (net.js:783:8)\r\nat doWrite (_stream_writable.js:431:12)\r\nat writeOrBuffer (_stream_writable.js:415:5)\r\nat Socket.Writable.write (_stream_writable.js:305:11)\r\nat abortConnection (/volume1/@appstore/Spreadsheet/server/node_modules/engine.io/lib/server.js:506:12)\r\nat /volume1/@appstore/Spreadsheet/server/node_modules/engine.io/lib/server.js:353:7\r\nat Server.verify (/volume1/@appstore/Spreadsheet/server/node_modules/engine.io/lib/server.js:158:14)\r\nEmitted 'error' event on Socket instance at:\r\nat errorOrDestroy (internal/streams/destroy.js:108:12)\r\nat onwriteError (_stream_writable.js:446:5)\r\nat onwrite (_stream_writable.js:473:5)\r\nat internal/streams/destroy.js:50:7\r\nat Socket._destroy (net.js:664:5)\r\nat Socket.destroy (internal/streams/destroy.js:38:8)\r\nat afterWriteDispatched (internal/stream_base_commons.js:150:17)\r\nat writeGeneric (internal/stream_base_commons.js:141:3)\r\nat Socket._writeGeneric (net.js:771:11)\r\nat Socket._write (net.js:783:8) {\r\n  errno: 'EPIPE',\r\n  code: 'EPIPE',\r\n  syscall: 'write'\r\n}\r\n```\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n1. make Server be busy.\r\n\r\n```js\r\nio.use(function(socket, next) {\r\n  const time = Date.now() + 60000); // 1min\r\n  while (Date.now() < time) {} // busy task\r\n  next();\r\n});\r\n```\r\n\r\n2. Client try to connect the socket.io server.\r\n3. Close browser tab. ( abortConnection)\r\n4. server may got EPIPE error.\r\n\r\n### Expected behaviour\r\nError should be ignore.\r\n\r\n### Setup\r\n- OS: Node.js v12.14.1\r\n- browser: Chrome\r\n- engine.io version: 3.4.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nAdd error handler before [socket.write](https://github.com/socketio/engine.io/blob/master/lib/server.js#L509), otherwise EventEmitter will throw exception.\r\n```js\r\nsocket.once('error', function() { /* ignore */ });\r\nsocket.write(...);\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/594", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/594/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/594/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/594/events", "html_url": "https://github.com/socketio/engine.io/issues/594", "id": 541246381, "node_id": "MDU6SXNzdWU1NDEyNDYzODE=", "number": 594, "title": "Getting Allow Request Error Code", "user": {"login": "shanelarson", "id": 26246673, "node_id": "MDQ6VXNlcjI2MjQ2Njcz", "avatar_url": "https://avatars0.githubusercontent.com/u/26246673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shanelarson", "html_url": "https://github.com/shanelarson", "followers_url": "https://api.github.com/users/shanelarson/followers", "following_url": "https://api.github.com/users/shanelarson/following{/other_user}", "gists_url": "https://api.github.com/users/shanelarson/gists{/gist_id}", "starred_url": "https://api.github.com/users/shanelarson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shanelarson/subscriptions", "organizations_url": "https://api.github.com/users/shanelarson/orgs", "repos_url": "https://api.github.com/users/shanelarson/repos", "events_url": "https://api.github.com/users/shanelarson/events{/privacy}", "received_events_url": "https://api.github.com/users/shanelarson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-20T23:41:23Z", "updated_at": "2019-12-21T02:56:09Z", "closed_at": "2019-12-21T02:56:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is currently no way to get the error code that is passed to the function called inside `allowRequest` on the server side on the client. With `connect_error` you just get a `Transport Error` that contains an error message saying `Bad Request`. Am I missing something?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/592", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/592/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/592/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/592/events", "html_url": "https://github.com/socketio/engine.io/issues/592", "id": 507712084, "node_id": "MDU6SXNzdWU1MDc3MTIwODQ=", "number": 592, "title": "Only allow messages from the same IP address", "user": {"login": "grilme99", "id": 6473667, "node_id": "MDQ6VXNlcjY0NzM2Njc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6473667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grilme99", "html_url": "https://github.com/grilme99", "followers_url": "https://api.github.com/users/grilme99/followers", "following_url": "https://api.github.com/users/grilme99/following{/other_user}", "gists_url": "https://api.github.com/users/grilme99/gists{/gist_id}", "starred_url": "https://api.github.com/users/grilme99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grilme99/subscriptions", "organizations_url": "https://api.github.com/users/grilme99/orgs", "repos_url": "https://api.github.com/users/grilme99/repos", "events_url": "https://api.github.com/users/grilme99/events{/privacy}", "received_events_url": "https://api.github.com/users/grilme99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-16T08:57:42Z", "updated_at": "2020-06-20T13:04:12Z", "closed_at": "2020-06-20T13:04:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I don't think engine.io currently does this, but I want to prevent someone from sending messages to a socket when they don't have the same IP address as the initial request. How can I accomplish this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/589", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/589/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/589/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/589/events", "html_url": "https://github.com/socketio/engine.io/issues/589", "id": 497119293, "node_id": "MDU6SXNzdWU0OTcxMTkyOTM=", "number": 589, "title": "3.4.0 introduced breaking changes (dropping Node 6 support)", "user": {"login": "rwjblue", "id": 12637, "node_id": "MDQ6VXNlcjEyNjM3", "avatar_url": "https://avatars0.githubusercontent.com/u/12637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rwjblue", "html_url": "https://github.com/rwjblue", "followers_url": "https://api.github.com/users/rwjblue/followers", "following_url": "https://api.github.com/users/rwjblue/following{/other_user}", "gists_url": "https://api.github.com/users/rwjblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rwjblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rwjblue/subscriptions", "organizations_url": "https://api.github.com/users/rwjblue/orgs", "repos_url": "https://api.github.com/users/rwjblue/repos", "events_url": "https://api.github.com/users/rwjblue/events{/privacy}", "received_events_url": "https://api.github.com/users/rwjblue/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-23T14:04:47Z", "updated_at": "2020-04-15T12:26:01Z", "closed_at": "2020-04-15T12:26:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am very sorry to raise such an issue (I know its often pretty frustrating as a maintainer to have someone else tell me about \"semver violations\"), please understand that I am only reporting because _I_ would also want to be aware of issues that consumers of my packages are facing.\r\n\r\nThe `ws` updated landed in https://github.com/socketio/engine.io/pull/587 was a breaking change and releasing that updated as 3.4.0 means existing consumers that still support Node 6 environments are now broken. Since `ws@7` drops support for Node 6 (for example, it uses object rest/spread), any Node 6 consumers that had been using `^3.3.1` (which worked fine) will now get `3.4.0` and receive errors when `ws`'s `lib/websocket.js` is required.\r\n\r\nThank you for your time (and again, I apologize for the distasteful issue).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/588", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/588/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/588/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/588/events", "html_url": "https://github.com/socketio/engine.io/issues/588", "id": 489666118, "node_id": "MDU6SXNzdWU0ODk2NjYxMTg=", "number": 588, "title": "Please publish latest changes and integrate into socket.io", "user": {"login": "oliversalzburg", "id": 1658949, "node_id": "MDQ6VXNlcjE2NTg5NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1658949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oliversalzburg", "html_url": "https://github.com/oliversalzburg", "followers_url": "https://api.github.com/users/oliversalzburg/followers", "following_url": "https://api.github.com/users/oliversalzburg/following{/other_user}", "gists_url": "https://api.github.com/users/oliversalzburg/gists{/gist_id}", "starred_url": "https://api.github.com/users/oliversalzburg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oliversalzburg/subscriptions", "organizations_url": "https://api.github.com/users/oliversalzburg/orgs", "repos_url": "https://api.github.com/users/oliversalzburg/repos", "events_url": "https://api.github.com/users/oliversalzburg/events{/privacy}", "received_events_url": "https://api.github.com/users/oliversalzburg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-05T10:27:10Z", "updated_at": "2019-09-13T14:59:27Z", "closed_at": "2019-09-13T12:13:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### You want to:\r\n* [] report a *bug*\r\n* [x] request a *feature*\r\n\r\n### Current behaviour\r\nWhenever socket.io is loaded, NodeJS displays a warning about a deprecated `Buffer` usage in engine.io \u2192 base64id.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n`require( \"socket.io\" )`\r\n\r\n### Expected behaviour\r\nNo deprecation warnings are emitted.\r\n\r\n### Setup\r\n- OS: Windows\r\n- browser: -\r\n- engine.io version: 3.3.2\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nThe deprecated code in base64id was fixed and published in 2.0.0. The change has been integrated into engine.io, which already points to the new dependency version at HEAD, but the change has not yet been published and integrated into upstream packages, which still causes the deprecation to be emitted.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/584", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/584/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/584/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/584/events", "html_url": "https://github.com/socketio/engine.io/issues/584", "id": 452057426, "node_id": "MDU6SXNzdWU0NTIwNTc0MjY=", "number": 584, "title": "Cannot read property 'WebSocket' of undefined", "user": {"login": "soyjuanmedina", "id": 15341694, "node_id": "MDQ6VXNlcjE1MzQxNjk0", "avatar_url": "https://avatars2.githubusercontent.com/u/15341694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soyjuanmedina", "html_url": "https://github.com/soyjuanmedina", "followers_url": "https://api.github.com/users/soyjuanmedina/followers", "following_url": "https://api.github.com/users/soyjuanmedina/following{/other_user}", "gists_url": "https://api.github.com/users/soyjuanmedina/gists{/gist_id}", "starred_url": "https://api.github.com/users/soyjuanmedina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soyjuanmedina/subscriptions", "organizations_url": "https://api.github.com/users/soyjuanmedina/orgs", "repos_url": "https://api.github.com/users/soyjuanmedina/repos", "events_url": "https://api.github.com/users/soyjuanmedina/events{/privacy}", "received_events_url": "https://api.github.com/users/soyjuanmedina/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-06-04T15:16:48Z", "updated_at": "2020-06-04T11:17:12Z", "closed_at": "2019-06-04T17:37:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nAfter update my Angular App to Angular 8 I can npm start and npm build, but when I upoload to the server the console of the browser yield \r\n`Cannot read property 'WebSocket' of undefined`\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nI really don't know if the issue is for this library, but I read the problem is about the\r\n`global.WebSocket || global.MozWebSocket;`\r\nhttps://github.com/webpack/webpack-dev-server/issues/174#issuecomment-102391902\r\nin some libraries and I use yours\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/575", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/575/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/575/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/575/events", "html_url": "https://github.com/socketio/engine.io/issues/575", "id": 427399346, "node_id": "MDU6SXNzdWU0MjczOTkzNDY=", "number": 575, "title": "Error: Can't resolve 'uws'", "user": {"login": "evpozdniakov", "id": 1109345, "node_id": "MDQ6VXNlcjExMDkzNDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1109345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evpozdniakov", "html_url": "https://github.com/evpozdniakov", "followers_url": "https://api.github.com/users/evpozdniakov/followers", "following_url": "https://api.github.com/users/evpozdniakov/following{/other_user}", "gists_url": "https://api.github.com/users/evpozdniakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/evpozdniakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evpozdniakov/subscriptions", "organizations_url": "https://api.github.com/users/evpozdniakov/orgs", "repos_url": "https://api.github.com/users/evpozdniakov/repos", "events_url": "https://api.github.com/users/evpozdniakov/events{/privacy}", "received_events_url": "https://api.github.com/users/evpozdniakov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-03-31T13:54:30Z", "updated_at": "2020-06-04T14:40:40Z", "closed_at": "2020-06-04T14:18:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nI use socket.io, therefore engine.io is one of my depended packages.\r\nWhen I try to bundle my project, I have error \r\n*Module not found: Error: Can't resolve 'uws' in node_modules/engine.io/lib/server.js*\r\n(The error would not be here if I configure webpack with `webpack-node-externals`, but I really need all packages in a single bundle for docker container.)\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n1. Add socket.io v2.2.0 to your existing project (which uses webpack) as a production dependency.\r\n2. Require it in your entry point code.\r\n3. Run webpack \r\n\r\n### Expected behaviour\r\nIt should create a bundle without errors.\r\n\r\n### Setup\r\n- OS: centOS\r\n- browser: server side (node.js)\r\n- engine.io version: 3.3.2\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nIMO it could be fixed if engine.io declares uws as a prod dependency (not a dev dependency).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/572", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/572/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/572/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/572/events", "html_url": "https://github.com/socketio/engine.io/issues/572", "id": 416009116, "node_id": "MDU6SXNzdWU0MTYwMDkxMTY=", "number": 572, "title": "Request code explanation", "user": {"login": "trinopoty", "id": 5785366, "node_id": "MDQ6VXNlcjU3ODUzNjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/5785366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trinopoty", "html_url": "https://github.com/trinopoty", "followers_url": "https://api.github.com/users/trinopoty/followers", "following_url": "https://api.github.com/users/trinopoty/following{/other_user}", "gists_url": "https://api.github.com/users/trinopoty/gists{/gist_id}", "starred_url": "https://api.github.com/users/trinopoty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trinopoty/subscriptions", "organizations_url": "https://api.github.com/users/trinopoty/orgs", "repos_url": "https://api.github.com/users/trinopoty/repos", "events_url": "https://api.github.com/users/trinopoty/events{/privacy}", "received_events_url": "https://api.github.com/users/trinopoty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-01T09:16:37Z", "updated_at": "2019-03-05T11:56:48Z", "closed_at": "2019-03-05T11:56:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to figure out where the delay in the polling response is coming from but I can't seem to find it anywhere.\r\nCan someone please explain to me where that delay is introduced in the code?\r\nI need it for the java server library.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/568", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/568/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/568/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/568/events", "html_url": "https://github.com/socketio/engine.io/issues/568", "id": 394981298, "node_id": "MDU6SXNzdWUzOTQ5ODEyOTg=", "number": 568, "title": "sending cookie in every request", "user": {"login": "noexcess", "id": 23012561, "node_id": "MDQ6VXNlcjIzMDEyNTYx", "avatar_url": "https://avatars2.githubusercontent.com/u/23012561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noexcess", "html_url": "https://github.com/noexcess", "followers_url": "https://api.github.com/users/noexcess/followers", "following_url": "https://api.github.com/users/noexcess/following{/other_user}", "gists_url": "https://api.github.com/users/noexcess/gists{/gist_id}", "starred_url": "https://api.github.com/users/noexcess/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noexcess/subscriptions", "organizations_url": "https://api.github.com/users/noexcess/orgs", "repos_url": "https://api.github.com/users/noexcess/repos", "events_url": "https://api.github.com/users/noexcess/events{/privacy}", "received_events_url": "https://api.github.com/users/noexcess/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-31T13:33:36Z", "updated_at": "2018-12-31T13:42:45Z", "closed_at": "2018-12-31T13:42:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\nin every response the server send set-cookie header\r\n\r\ntransport.on('headers',  line 319 in /lib/server.js\r\n\r\nit should be transport.once\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/563", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/563/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/563/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/563/events", "html_url": "https://github.com/socketio/engine.io/issues/563", "id": 366958663, "node_id": "MDU6SXNzdWUzNjY5NTg2NjM=", "number": 563, "title": "ls", "user": {"login": "lborg019", "id": 8766358, "node_id": "MDQ6VXNlcjg3NjYzNTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8766358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lborg019", "html_url": "https://github.com/lborg019", "followers_url": "https://api.github.com/users/lborg019/followers", "following_url": "https://api.github.com/users/lborg019/following{/other_user}", "gists_url": "https://api.github.com/users/lborg019/gists{/gist_id}", "starred_url": "https://api.github.com/users/lborg019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lborg019/subscriptions", "organizations_url": "https://api.github.com/users/lborg019/orgs", "repos_url": "https://api.github.com/users/lborg019/repos", "events_url": "https://api.github.com/users/lborg019/events{/privacy}", "received_events_url": "https://api.github.com/users/lborg019/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-04T20:32:26Z", "updated_at": "2018-10-04T20:33:32Z", "closed_at": "2018-10-04T20:32:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/561", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/561/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/561/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/561/events", "html_url": "https://github.com/socketio/engine.io/issues/561", "id": 364412915, "node_id": "MDU6SXNzdWUzNjQ0MTI5MTU=", "number": 561, "title": "TypeError: \"string\" must be a string, Buffer, or ArrayBuffer at abortConnection", "user": {"login": "shapel", "id": 790487, "node_id": "MDQ6VXNlcjc5MDQ4Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/790487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shapel", "html_url": "https://github.com/shapel", "followers_url": "https://api.github.com/users/shapel/followers", "following_url": "https://api.github.com/users/shapel/following{/other_user}", "gists_url": "https://api.github.com/users/shapel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shapel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shapel/subscriptions", "organizations_url": "https://api.github.com/users/shapel/orgs", "repos_url": "https://api.github.com/users/shapel/repos", "events_url": "https://api.github.com/users/shapel/events{/privacy}", "received_events_url": "https://api.github.com/users/shapel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/socketio/engine.io/milestones/20", "html_url": "https://github.com/socketio/engine.io/milestone/20", "labels_url": "https://api.github.com/repos/socketio/engine.io/milestones/20/labels", "id": 3789898, "node_id": "MDk6TWlsZXN0b25lMzc4OTg5OA==", "number": 20, "title": "3.2.1", "description": null, "creator": {"login": "darrachequesne", "id": 13031701, "node_id": "MDQ6VXNlcjEzMDMxNzAx", "avatar_url": "https://avatars3.githubusercontent.com/u/13031701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darrachequesne", "html_url": "https://github.com/darrachequesne", "followers_url": "https://api.github.com/users/darrachequesne/followers", "following_url": "https://api.github.com/users/darrachequesne/following{/other_user}", "gists_url": "https://api.github.com/users/darrachequesne/gists{/gist_id}", "starred_url": "https://api.github.com/users/darrachequesne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darrachequesne/subscriptions", "organizations_url": "https://api.github.com/users/darrachequesne/orgs", "repos_url": "https://api.github.com/users/darrachequesne/repos", "events_url": "https://api.github.com/users/darrachequesne/events{/privacy}", "received_events_url": "https://api.github.com/users/darrachequesne/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "open", "created_at": "2018-11-02T06:27:46Z", "updated_at": "2018-11-02T06:28:02Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2018-09-27T10:42:00Z", "updated_at": "2018-11-02T06:27:47Z", "closed_at": "2018-11-02T06:25:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nWhen you use `allowRequest` and pass error as number (like internal Server.errorMessages but in other range) system throw `TypeError` exception.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n```\r\nconst server = io(httpServer, {\r\n    allowRequest: (req, callback) {\r\n      // do some checks\r\n      callback(403, false);\r\n    },\r\n    path: '/socket.io'\r\n  })\r\n```\r\n### Expected behaviour\r\nDo not throw  exception.\r\n### Setup\r\n- OS:\r\n- browser:\r\n- engine.io version:\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n```\r\nTypeError: \"string\" must be a string, Buffer, or ArrayBuffer\\n    at Function.byteLength (buffer.js:481:11)\\n    at abortConnection (\\node_modules\\engine.io\\lib\\server.js:507:25)\\n    at \\node_modules\\engine.io\\lib\\server.js:354:7\\n    at Server.allowRequest ```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/554", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/554/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/554/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/554/events", "html_url": "https://github.com/socketio/engine.io/issues/554", "id": 296279536, "node_id": "MDU6SXNzdWUyOTYyNzk1MzY=", "number": 554, "title": "Thanks", "user": {"login": "45498106", "id": 1415070, "node_id": "MDQ6VXNlcjE0MTUwNzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1415070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/45498106", "html_url": "https://github.com/45498106", "followers_url": "https://api.github.com/users/45498106/followers", "following_url": "https://api.github.com/users/45498106/following{/other_user}", "gists_url": "https://api.github.com/users/45498106/gists{/gist_id}", "starred_url": "https://api.github.com/users/45498106/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/45498106/subscriptions", "organizations_url": "https://api.github.com/users/45498106/orgs", "repos_url": "https://api.github.com/users/45498106/repos", "events_url": "https://api.github.com/users/45498106/events{/privacy}", "received_events_url": "https://api.github.com/users/45498106/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-12T06:44:44Z", "updated_at": "2018-04-30T05:39:58Z", "closed_at": "2018-04-30T05:39:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/546", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/546/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/546/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/546/events", "html_url": "https://github.com/socketio/engine.io/issues/546", "id": 280839458, "node_id": "MDU6SXNzdWUyODA4Mzk0NTg=", "number": 546, "title": "engine io and Express on the same port", "user": {"login": "dennisat", "id": 26453466, "node_id": "MDQ6VXNlcjI2NDUzNDY2", "avatar_url": "https://avatars0.githubusercontent.com/u/26453466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dennisat", "html_url": "https://github.com/dennisat", "followers_url": "https://api.github.com/users/dennisat/followers", "following_url": "https://api.github.com/users/dennisat/following{/other_user}", "gists_url": "https://api.github.com/users/dennisat/gists{/gist_id}", "starred_url": "https://api.github.com/users/dennisat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dennisat/subscriptions", "organizations_url": "https://api.github.com/users/dennisat/orgs", "repos_url": "https://api.github.com/users/dennisat/repos", "events_url": "https://api.github.com/users/dennisat/events{/privacy}", "received_events_url": "https://api.github.com/users/dennisat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-10T19:58:12Z", "updated_at": "2017-12-11T22:31:54Z", "closed_at": "2017-12-11T22:31:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [ ] report a *bug*\r\n* [ ] request a *feature*\r\n* [x] help how to setup my app for Heroku\r\n\r\n### Current behaviour\r\n\r\nHello engine io\r\n\r\nI want to load the engineIo together with an Express application on the same port.\r\n\r\nI managed to do that with the follow way: \r\n\r\n```\r\nimport express from 'express';\r\nconst engineIo = require('engine.io');\r\n\r\nexport const serverPort = process.env.PORT || 3222;\t\t// grab the port of the environment or use the dev 3222\r\n\r\nconst appExpress = express();\r\nconst httpServer = http.createServer(appExpress);\t\r\nconst wsServer = engineIo(httpServer);\r\nhttpServer.listen(serverPort);\t\t\t\t\t\t\t// here the server starts to listen\r\n```\r\n\r\nThis works perfectly on my machine. \r\nThe Express application is working correctly as webserver and as api server and the services that use websockets are also working properly!\r\n\r\nBut... on production environment, in precise on Heroku, although I grap the correct port number I get the error EADDRINUSE, (error address is in use).\r\nI am getting this error after both Express and Websocket instances are initialized (without errors).\r\n\r\nThe EADDRINUSE is a known error when you load the websocket server on a port that it is already used from another application.\r\n\r\nThis is the heroku error log:\r\n\r\n```\r\n2017-12-10T18:56:08.466921+00:00 app[web.1]: Error: listen EADDRINUSE :::8212\r\n2017-12-10T18:56:08.466922+00:00 app[web.1]:     at Object._errnoException (util.js:1024:11)\r\n2017-12-10T18:56:08.466923+00:00 app[web.1]:     at _exceptionWithHostPort (util.js:1046:20)\r\n2017-12-10T18:56:08.466927+00:00 app[web.1]:     at Server.setupListenHandle [as _listen2] (net.js:1351:14)\r\n2017-12-10T18:56:08.466928+00:00 app[web.1]:     at listenInCluster (net.js:1392:12)\r\n2017-12-10T18:56:08.466929+00:00 app[web.1]:     at Server.listen (net.js:1476:7)\r\n2017-12-10T18:56:08.466930+00:00 app[web.1]:     at Function.listen (/app/server/node_modules/express/lib/application.js:618:24)\r\n2017-12-10T18:56:08.466931+00:00 app[web.1]:     at dynaNodeServer.start.then.then (/app/server/dist/index.js:10873:9)\r\n2017-12-10T18:56:08.466931+00:00 app[web.1]:     at <anonymous>\r\n2017-12-10T18:56:08.466932+00:00 app[web.1]:     at process._tickCallback (internal/process/next_tick.js:188:7)\r\n\r\n```\r\n\r\nAny help is appreciated.\r\n\r\n### Setup\r\n- OS: heroku container\r\n- browser:\r\n- engine.io version: 3.1.1\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/542", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/542/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/542/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/542/events", "html_url": "https://github.com/socketio/engine.io/issues/542", "id": 272333908, "node_id": "MDU6SXNzdWUyNzIzMzM5MDg=", "number": 542, "title": "[Security] DOS vulnerability in requirement ws@2.3.1", "user": {"login": "jdforsythe", "id": 286972, "node_id": "MDQ6VXNlcjI4Njk3Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/286972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdforsythe", "html_url": "https://github.com/jdforsythe", "followers_url": "https://api.github.com/users/jdforsythe/followers", "following_url": "https://api.github.com/users/jdforsythe/following{/other_user}", "gists_url": "https://api.github.com/users/jdforsythe/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdforsythe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdforsythe/subscriptions", "organizations_url": "https://api.github.com/users/jdforsythe/orgs", "repos_url": "https://api.github.com/users/jdforsythe/repos", "events_url": "https://api.github.com/users/jdforsythe/events{/privacy}", "received_events_url": "https://api.github.com/users/jdforsythe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-08T20:14:12Z", "updated_at": "2017-11-12T21:26:38Z", "closed_at": "2017-11-12T21:26:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nDependency on `ws` module with vulnerability\r\n\r\nhttps://nodesecurity.io/advisories/550\r\n\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\n\r\n### Expected behaviour\r\n\r\n\r\n### Setup\r\n- OS:\r\n- browser:\r\n- engine.io version:\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nUpgrade `ws` from 2.3.1 to >= 3.3.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/536", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/536/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/536/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/536/events", "html_url": "https://github.com/socketio/engine.io/issues/536", "id": 268889269, "node_id": "MDU6SXNzdWUyNjg4ODkyNjk=", "number": 536, "title": "Not building uws correctly?", "user": {"login": "maikelmclauflin", "id": 4896982, "node_id": "MDQ6VXNlcjQ4OTY5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4896982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maikelmclauflin", "html_url": "https://github.com/maikelmclauflin", "followers_url": "https://api.github.com/users/maikelmclauflin/followers", "following_url": "https://api.github.com/users/maikelmclauflin/following{/other_user}", "gists_url": "https://api.github.com/users/maikelmclauflin/gists{/gist_id}", "starred_url": "https://api.github.com/users/maikelmclauflin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maikelmclauflin/subscriptions", "organizations_url": "https://api.github.com/users/maikelmclauflin/orgs", "repos_url": "https://api.github.com/users/maikelmclauflin/repos", "events_url": "https://api.github.com/users/maikelmclauflin/events{/privacy}", "received_events_url": "https://api.github.com/users/maikelmclauflin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-10-26T19:50:55Z", "updated_at": "2018-08-05T03:26:47Z", "closed_at": "2017-12-29T21:39:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not sure if this is a bug per-se because i don't know who is building uws, but the problem is manifesting itself there and the only module requiring it is this one so here i am.\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*?\r\n\r\n### Current behaviour\r\nerror on build in uws\r\n\r\n### Expected behaviour\r\nnot to error on build\r\n\r\n### Setup\r\n- OS: mac osx\r\n- browser: electron\r\n- engine.io version: 3.1.3\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nin stdout\r\n```\r\ndyld: lazy symbol binding failed: Symbol not found: _SSL_library_init\r\n  Referenced from: /Users/michaelmclaughlin/Sites/specless/cloud-compiler/sync/node_modules/uws/uws_darwin_57.node\r\n  Expected in: flat namespace\r\n\r\ndyld: Symbol not found: _SSL_library_init\r\n  Referenced from: /Users/michaelmclaughlin/Sites/specless/cloud-compiler/sync/node_modules/uws/uws_darwin_57.node\r\n  Expected in: flat namespace\r\n```\r\n\r\nin build log\r\n\r\n```\r\n  CXX(target) Release/obj.target/uws/src/Extensions.o\r\n  CXX(target) Release/obj.target/uws/src/Group.o\r\nIn file included from ../src/Group.cpp:1:\r\nIn file included from ../src/Group.h:4:\r\nIn file included from ../src/WebSocket.h:4:\r\nIn file included from ../src/WebSocketProtocol.h:5:\r\n../src/Networking.h:7:10: fatal error: 'openssl/opensslv.h' file not found\r\n#include <openssl/opensslv.h>\r\n         ^~~~~~~~~~~~~~~~~~~~\r\n1 error generated.\r\nmake: *** [Release/obj.target/uws/src/Group.o] Error 1\r\ngyp ERR! build error \r\ngyp ERR! stack Error: `make` failed with exit code: 2\r\ngyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:258:23)\r\ngyp ERR! stack     at emitTwo (events.js:125:13)\r\ngyp ERR! stack     at ChildProcess.emit (events.js:213:7)\r\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)\r\ngyp ERR! System Darwin 16.7.0\r\ngyp ERR! command \"/usr/local/Cellar/node/8.4.0/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\r\ngyp ERR! cwd /Users/michaelmclaughlin/Sites/specless/cloud-compiler/sync/node_modules/uws\r\ngyp ERR! node -v v8.4.0\r\ngyp ERR! node-gyp -v v3.6.2\r\ngyp ERR! not ok \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/528", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/528/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/528/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/528/events", "html_url": "https://github.com/socketio/engine.io/issues/528", "id": 254142231, "node_id": "MDU6SXNzdWUyNTQxNDIyMzE=", "number": 528, "title": "TypeError: \"list\" argument must be an Array of Buffers", "user": {"login": "raulmt", "id": 632782, "node_id": "MDQ6VXNlcjYzMjc4Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/632782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raulmt", "html_url": "https://github.com/raulmt", "followers_url": "https://api.github.com/users/raulmt/followers", "following_url": "https://api.github.com/users/raulmt/following{/other_user}", "gists_url": "https://api.github.com/users/raulmt/gists{/gist_id}", "starred_url": "https://api.github.com/users/raulmt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raulmt/subscriptions", "organizations_url": "https://api.github.com/users/raulmt/orgs", "repos_url": "https://api.github.com/users/raulmt/repos", "events_url": "https://api.github.com/users/raulmt/events{/privacy}", "received_events_url": "https://api.github.com/users/raulmt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-30T21:32:26Z", "updated_at": "2017-09-01T11:04:12Z", "closed_at": "2017-09-01T11:04:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nWe've been having this error in production, very unfrequently, but at the same time very important because it just kills the node process and we cannot prevent that from outside, since it's a callback on Node.js internals. Here is the stack trace:\r\n\r\n```\r\nTypeError: \"list\" argument must be an Array of Buffers\r\nat Function.Buffer.concat (buffer.js:314:13)\r\nat IncomingMessage.onData (/usr/src/app/node_modules/engine.io/lib/transports/polling.js:161:23)\r\nat emitOne (events.js:96:13)\r\nat IncomingMessage.emit (events.js:188:7)\r\nat IncomingMessage.Readable.read (_stream_readable.js:381:10)\r\nat flow (_stream_readable.js:761:34)\r\nat resume_ (_stream_readable.js:743:3)\r\nat _combinedTickCallback (internal/process/next_tick.js:80:11)\r\nat process._tickDomainCallback (internal/process/next_tick.js:128:9)\r\n```\r\n\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nSadly, I couldn't reproduce this locally :( I tried sending a POST body that exceeds the buffer, but `onData` was not called after destroying the socket. Still, this IS happening in production, so either I'm missing something, or it's really a very weird case or\u2026 I don't know\u2026 please see \"Other information\" section for further information.\r\n\r\n### Expected behaviour\r\n\r\nTo not generate exception\r\n\r\n### Setup\r\nProduction:\r\n- OS: Amazon Linux AMI 2017.03 (Fedora/Red Hat like)\r\n- browser: I don't think it matters much, but this has happen from Chrome and from react-native app\r\n- engine.io version: We are currently using 1.8.4, but as I said, this specific file is almost identical to current master (in particular the `onDataRequest` function is exactly the same in both, 1.8.4 and current master)\r\n- Node.js: 6.11.2 (latest LTS)\r\n\r\nDev (where I tried to reproduce):\r\n- OS: macOS Sierra 10.12.5\r\n- browser: curl\r\n- engine.io: 1.8.4, same as prod\r\n- Node.js: 6.11.2 too\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nWe are using an older version of engine.io (and actually, through primus) but this file involved (lib/transports/pollings.js) at least it's the same as the current version in master branch, and it's the only file involved in this stacktrace besides Node.js itself.\r\n\r\nThe error is triggered because [here](https://github.com/socketio/engine.io/blob/master/lib/transports/polling.js#L161) either `chunks` or `data` is not an instance of `Buffer`. Reading through the code and also reading docs for all the Node.js pieces involved here (Buffer, IncomingMessage, ReadableStream, Socket) there is only one circumstance I can think of for this to happen. Here is my logic: since `data` argument in `onData` is either a string or buffer, the problems needs to happen because of `chunks` not being one. And `chunks` is assigned only in a handful of places:\r\n\r\n- [initial assignement](https://github.com/socketio/engine.io/blob/master/lib/transports/polling.js#L139): in order for the bug to trigger, it needs `data` to not be a string, and that can only happen if `req.setEncoding` never happens, forcing `isBinary` to be true, and thus in this line `chunks` will necessarily be a Buffer\r\n- [inside `cleanup`](https://github.com/socketio/engine.io/blob/master/lib/transports/polling.js#L143): same as above, plus this fn is called after finishing processing, so it shouldn't have anything to do with this\r\n- [data concatenation inside `onData`](https://github.com/socketio/engine.io/blob/master/lib/transports/polling.js#L158): this won't happen since we are talking about a scenario where `data` is a Buffer, not string.\r\n- [the line triggering the error](https://github.com/socketio/engine.io/blob/master/lib/transports/polling.js#L161) (previous call to this\u2026): `Buffer.concat` as per [docs will always return a Buffer](https://nodejs.org/dist/latest-v6.x/docs/api/buffer.html#buffer_class_method_buffer_concat_list_totallength), so `chunks` will still be a Buffer.\r\n- [when exceeding `maxHttpBufferSize`](https://github.com/socketio/engine.io/blob/master/lib/transports/polling.js#L166): here the code does something different to any other assignment; it just sets empty string to `chunks`. So, if we ever call `onData` again after this happens, we have the scenario where L166 can crash. But, just after setting that, `req.connection.destroy();` is called\u2026\u00a0as far as I understand, `connection` is the socket, and destroying that means no further data can be read. So, theoretically, no other `data` event should be fired from the ReadableStream, I guess\u2026 but I think this is not necessarily trues, since all of socket and streams related stuff is actually async, right? So, also theoretically, I think it could happen that a new `onData` call is added to the callback queue just while destroying the socket or even before, and even when destroying the socket will prevent further data processing on that socket, the `onData` callback is already there ready for the event loop to add it to the stack. So, after this `onData` call is done, the one already in the callback queue is added to the call stack, and at this point we have a scenario with a `data` being a Buffer, but `chunks` being empty string.\r\n\r\nSo, I can only think of the last one as a cause for this. The solution for that would be very simple: to just use the same logic regarding `chunks` assignment than in the other two places (`chunks = isBinary ? new Buffer(0) : '';`). So I'll add that PR in case you think it can help\u2026", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/525", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/525/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/525/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/525/events", "html_url": "https://github.com/socketio/engine.io/issues/525", "id": 248226631, "node_id": "MDU6SXNzdWUyNDgyMjY2MzE=", "number": 525, "title": "Using internal, undocumented method `.listeners()` breaks non-core HTTP implementations", "user": {"login": "Qix-", "id": 885648, "node_id": "MDQ6VXNlcjg4NTY0OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/885648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qix-", "html_url": "https://github.com/Qix-", "followers_url": "https://api.github.com/users/Qix-/followers", "following_url": "https://api.github.com/users/Qix-/following{/other_user}", "gists_url": "https://api.github.com/users/Qix-/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qix-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qix-/subscriptions", "organizations_url": "https://api.github.com/users/Qix-/orgs", "repos_url": "https://api.github.com/users/Qix-/repos", "events_url": "https://api.github.com/users/Qix-/events{/privacy}", "received_events_url": "https://api.github.com/users/Qix-/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-06T05:23:25Z", "updated_at": "2017-08-30T16:31:52Z", "closed_at": "2017-08-30T16:31:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Engine.io seems to be using a non-standard, undocumented method called `listeners()` on `http.Server` objects (can be seen [here](https://github.com/socketio/engine.io/blob/master/lib/server.js#L456)).\r\n\r\nSince this isn't a standard method, this breaks implementations of `http` that do not provide it (e.g. `mitol`).\r\n\r\nIs there a way to remove the dependency on this method?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/522", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/522/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/522/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/522/events", "html_url": "https://github.com/socketio/engine.io/issues/522", "id": 246524915, "node_id": "MDU6SXNzdWUyNDY1MjQ5MTU=", "number": 522, "title": "WebPack is broken due to the wsEngine option", "user": {"login": "markbjerke", "id": 502296, "node_id": "MDQ6VXNlcjUwMjI5Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/502296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markbjerke", "html_url": "https://github.com/markbjerke", "followers_url": "https://api.github.com/users/markbjerke/followers", "following_url": "https://api.github.com/users/markbjerke/following{/other_user}", "gists_url": "https://api.github.com/users/markbjerke/gists{/gist_id}", "starred_url": "https://api.github.com/users/markbjerke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markbjerke/subscriptions", "organizations_url": "https://api.github.com/users/markbjerke/orgs", "repos_url": "https://api.github.com/users/markbjerke/repos", "events_url": "https://api.github.com/users/markbjerke/events{/privacy}", "received_events_url": "https://api.github.com/users/markbjerke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-29T14:34:58Z", "updated_at": "2017-09-02T12:12:28Z", "closed_at": "2017-09-02T12:12:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We can mitigate the WebPack issue by testing for the option being defined in a if/else branch, that way if the option is not defined there can be a require with a static path.  As known there can be no variables in the require statement in order for WebPack to static resolve the asset.\r\n\r\nThis would allow those who are happy with the default ( most people ? ) to bundle the code for node targets with WebPack.  It would still break bundling for users who did exercise the option for a different Websocket package, but I'm just guessing that the number is small and even smaller who want to bundle.\r\n\r\nIt's a trivial change to sniff the option in a branch first.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/520", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/520/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/520/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/520/events", "html_url": "https://github.com/socketio/engine.io/issues/520", "id": 246509987, "node_id": "MDU6SXNzdWUyNDY1MDk5ODc=", "number": 520, "title": "Server's .send() cannot send Buffer object", "user": {"login": "dennisat", "id": 26453466, "node_id": "MDQ6VXNlcjI2NDUzNDY2", "avatar_url": "https://avatars0.githubusercontent.com/u/26453466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dennisat", "html_url": "https://github.com/dennisat", "followers_url": "https://api.github.com/users/dennisat/followers", "following_url": "https://api.github.com/users/dennisat/following{/other_user}", "gists_url": "https://api.github.com/users/dennisat/gists{/gist_id}", "starred_url": "https://api.github.com/users/dennisat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dennisat/subscriptions", "organizations_url": "https://api.github.com/users/dennisat/orgs", "repos_url": "https://api.github.com/users/dennisat/repos", "events_url": "https://api.github.com/users/dennisat/events{/privacy}", "received_events_url": "https://api.github.com/users/dennisat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-07-29T09:01:55Z", "updated_at": "2017-09-02T15:23:56Z", "closed_at": "2017-09-02T12:21:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys, thanks for this awesome project, really nice work. \r\n\r\nI want to report a bug (probably) or a missing documentation... is not clear how to send and receive binary objects... or there is no need of documentation and this is simply a bug.\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behavior\r\nAlthough the client .send() is sending Buffer object and the server receives them, the server side cannot .send() Buffer objects. On .send(new Buffer(100)) there is no error or any exception.\r\n\r\n### Steps to reproduce (if the current behavior is a bug)\r\nTry to send a Buffer object from the server to client. ` .send(new Buffer(100))`\r\n\r\n### Expected behavior\r\nThe client should receive something but nothing happened or an exception with a meaningful message.\r\n\r\n### Setup\r\n- OS: window\r\n- browser: nodejs 7.2.0\r\n- engine.io version: 2.0.3\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nI haven't apply any special configuration like {binary: true} anywhere. No documentation on this topic :(.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/519", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/519/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/519/events", "html_url": "https://github.com/socketio/engine.io/issues/519", "id": 246084746, "node_id": "MDU6SXNzdWUyNDYwODQ3NDY=", "number": 519, "title": "Only websock transport can not work when client transports is ['polling', 'websocket']", "user": {"login": "SijieDingEsna", "id": 7290939, "node_id": "MDQ6VXNlcjcyOTA5Mzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/7290939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SijieDingEsna", "html_url": "https://github.com/SijieDingEsna", "followers_url": "https://api.github.com/users/SijieDingEsna/followers", "following_url": "https://api.github.com/users/SijieDingEsna/following{/other_user}", "gists_url": "https://api.github.com/users/SijieDingEsna/gists{/gist_id}", "starred_url": "https://api.github.com/users/SijieDingEsna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SijieDingEsna/subscriptions", "organizations_url": "https://api.github.com/users/SijieDingEsna/orgs", "repos_url": "https://api.github.com/users/SijieDingEsna/repos", "events_url": "https://api.github.com/users/SijieDingEsna/events{/privacy}", "received_events_url": "https://api.github.com/users/SijieDingEsna/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-27T15:44:57Z", "updated_at": "2017-11-22T21:07:53Z", "closed_at": "2017-11-22T21:07:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\nWhen socket.io server side set transports : ['websocket'] and the client transports is ['polling', 'websocket'], socket.io always return unknown error in handshake process. \r\n\r\n### Current behaviour\r\n\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\n\r\n### Expected behaviour\r\nIn handshake  process  the socket.io server should return upgrade response. After that polling request will be rejected. I have following reasons about this feature.\r\n\r\n1. Some other client libraries such as python socketIO-client 0.7.2 depends on the handshake to determine use websocket. They don't allow use transport websocket directly.\r\n2. Once server side support polling and websocket together, client side using the default setting ['polling', 'websocket'] of engine.io-client can still work.\r\n\r\n### Setup\r\n- OS:\r\n- browser:\r\n- engine.io version:\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/517", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/517/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/517/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/517/events", "html_url": "https://github.com/socketio/engine.io/issues/517", "id": 241693670, "node_id": "MDU6SXNzdWUyNDE2OTM2NzA=", "number": 517, "title": "polling connection request.headers.origin has invalid characters cause uncaughtException throw", "user": {"login": "ttol66", "id": 6821467, "node_id": "MDQ6VXNlcjY4MjE0Njc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6821467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ttol66", "html_url": "https://github.com/ttol66", "followers_url": "https://api.github.com/users/ttol66/followers", "following_url": "https://api.github.com/users/ttol66/following{/other_user}", "gists_url": "https://api.github.com/users/ttol66/gists{/gist_id}", "starred_url": "https://api.github.com/users/ttol66/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ttol66/subscriptions", "organizations_url": "https://api.github.com/users/ttol66/orgs", "repos_url": "https://api.github.com/users/ttol66/repos", "events_url": "https://api.github.com/users/ttol66/events{/privacy}", "received_events_url": "https://api.github.com/users/ttol66/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-10T12:21:23Z", "updated_at": "2017-09-02T12:17:24Z", "closed_at": "2017-09-02T12:16:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [x] report a *bug*\r\n\r\n### Current behaviour\r\npolling connection request.headers.origin  has invalid characters cause uncaughtException throw.\r\n\r\nerror stack:\r\n```\r\nTypeError: The header content contains invalid characters\r\n    at storeHeader (_http_outgoing.js:319:11)\r\n    at ServerResponse.OutgoingMessage._storeHeader (_http_outgoing.js:228:9)\r\n    at ServerResponse.writeHead (_http_server.js:221:8)\r\n    at IncomingMessage.onEnd (/opt/pushnode/node_modules/engine.io/lib/transports/polling.js:180:9)\r\n    at emitNone (events.js:86:13)\r\n    at IncomingMessage.emit (events.js:185:7)\r\n    at endReadableNT (_stream_readable.js:974:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:80:11)\r\n    at process._tickDomainCallback (internal/process/next_tick.js:128:9)\r\n```\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\n1. start a socket.io server\r\n2. send a polling connection request, headers.origin  contain invalid characters(\\x027)\r\n```\r\necho -en \"GET /socket.io/?rid=0&EIO=3&transport=polling HTTP/1.1\\r\\nHost: 127.0.0.1:3000\\r\\nOrigin:\\x027.com\\r\\n\\r\\n\" | nc 127.0.0.1 3000\r\n```\r\n\r\n### Expected behaviour\r\ndisconnect client connection , don't throw error, maybe emit an error event\r\n\r\n### Setup\r\n- OS:   Ubuntu 16.04.2 LTS , NodeJs v6.10.3\r\n- browser:\r\n- engine.io version: 1.6.8 (socket.io 1.4.5)\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\ncheck headers.origin value before writeHeader() or just wrap writeHeader() in try/catch \r\n\r\nhttps://github.com/nodejs/node/commit/7bef1b7907\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/516", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/516/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/516/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/516/events", "html_url": "https://github.com/socketio/engine.io/issues/516", "id": 238546964, "node_id": "MDU6SXNzdWUyMzg1NDY5NjQ=", "number": 516, "title": "engine.io package installation with yarn causes yarn.lock to not be created", "user": {"login": "jharris4", "id": 7042043, "node_id": "MDQ6VXNlcjcwNDIwNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7042043?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jharris4", "html_url": "https://github.com/jharris4", "followers_url": "https://api.github.com/users/jharris4/followers", "following_url": "https://api.github.com/users/jharris4/following{/other_user}", "gists_url": "https://api.github.com/users/jharris4/gists{/gist_id}", "starred_url": "https://api.github.com/users/jharris4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jharris4/subscriptions", "organizations_url": "https://api.github.com/users/jharris4/orgs", "repos_url": "https://api.github.com/users/jharris4/repos", "events_url": "https://api.github.com/users/jharris4/events{/privacy}", "received_events_url": "https://api.github.com/users/jharris4/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-06-26T13:41:53Z", "updated_at": "2018-01-08T02:10:09Z", "closed_at": "2017-12-29T21:39:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nWhen installing engine.io 3.1.0 with yarn, the yarn.lock file is not created despite yarn saying it was.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nCreate a package.json with the following content (only dependencies are important):\r\n\r\n```\r\n{\r\n  \"name\": \"yarn-lock-bug\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"repro bug with yarn not creating lock file\",\r\n  \"author\": \"jharris4\",\r\n  \"license\": \"MIT\",\r\n  \"devDependencies\": {\r\n    \"engine.io\": \"^3.1.0\"\r\n  }\r\n}\r\n```\r\n\r\nthen run `yarn install`\r\n\r\n### Expected behaviour\r\n\r\nyarn.lock file should be properly created. Yarn says it was, but the `yarn.lock` file does not actually exist.\r\n\r\n### Setup\r\n- OS: MacOS 10.12.5\r\n- browser: N/A\r\n- engine.io version: 3.1.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nThis is consistently reproducible with Node 8.x, Yarn 0.24.6 and MacOS 10.12.5.\r\n\r\nNote that the bug only reliably happens on first install (`rm -rf node_modules` and `rm yarn.lock`)\r\n\r\nThis bug was originally filed on yarn: https://github.com/yarnpkg/yarn/issues/3555\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/508", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/508/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/508/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/508/events", "html_url": "https://github.com/socketio/engine.io/issues/508", "id": 229207030, "node_id": "MDU6SXNzdWUyMjkyMDcwMzA=", "number": 508, "title": "Issues with uws as default wsEngine on Debian", "user": {"login": "brenc", "id": 12928053, "node_id": "MDQ6VXNlcjEyOTI4MDUz", "avatar_url": "https://avatars0.githubusercontent.com/u/12928053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brenc", "html_url": "https://github.com/brenc", "followers_url": "https://api.github.com/users/brenc/followers", "following_url": "https://api.github.com/users/brenc/following{/other_user}", "gists_url": "https://api.github.com/users/brenc/gists{/gist_id}", "starred_url": "https://api.github.com/users/brenc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brenc/subscriptions", "organizations_url": "https://api.github.com/users/brenc/orgs", "repos_url": "https://api.github.com/users/brenc/repos", "events_url": "https://api.github.com/users/brenc/events{/privacy}", "received_events_url": "https://api.github.com/users/brenc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-17T00:40:00Z", "updated_at": "2017-10-30T17:06:22Z", "closed_at": "2017-10-30T17:06:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [x] report a *bug*\r\n\r\n### Current behaviour\r\nI tried to upgrade one of my apps to socket.io 2 (a simple chat app). Apparently uws will silently fail to compile, yet it still installs successfully. engine.io then silently switches to using ws (I have another ticket open about this). I would *never* have known that this happened had I not done a bunch of digging.\r\n\r\nTurns out that uws doesn't support Wheezy and older LTS distros because [gcc 4.8 is required](https://github.com/uWebSockets/uWebSockets/issues/240). The uws owner also said [I expect the user to run pretty up-to-date systems (not debian)](https://github.com/uWebSockets/uWebSockets/issues/240). Unfortunately, there are many of us who can't up and switch distros overnight because of a requirement such as this.\r\n\r\nuws DOES compile on Jessie (current stable) but it logs a bunch of warnings (which makes me nervous). I'd also be nervous about deploying on Debian at all at this point given the above statement.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\nInstall socket.io 2.x on Debian Wheezy or another LTS distro using gcc < 4.8. Look at `node_modules/uws/build_log.txt`.\r\n\r\n### Expected behaviour\r\nWhen I install socket/engine.io and *any* dependencies fail to compile, the entire install should fail. Both engines should NOT be installed at the same time and the engine should definitely NOT be silently switched to ws or anything else.\r\n\r\nTo me it makes the most sense to remove uws and ws as engine.io dependencies and let the user decide which engine to use explicitly. Installing both seems messy and confusing, especially when uws can silently fail to compile making it a gamble as to which engine is really being used.\r\n\r\n### Setup\r\n- OS: Debian Wheezy/Jessie x64, Node 6.x LTS\r\n- engine.io version: 3.1.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nI think making uws the default wsEngine was a bit hasty. This adds a whole new layer of complexity to an already very complicated system, especially for the newcomer. I'm fairly experienced with this stuff and I still had to mess around for hours with it before I finally gave up and reverted to socket.io 1.7.4 (I had other issues too).\r\n\r\nI've stress tested ws and I'm fairly confident that it performs well enough for the _vast majority_ of users. uws still seems too bleeding edge and complex to be used as the default. It definitely seems like the option for more advanced users who know what they're doing and for people whose platform can support it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/507", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/507/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/507/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/507/events", "html_url": "https://github.com/socketio/engine.io/issues/507", "id": 229202724, "node_id": "MDU6SXNzdWUyMjkyMDI3MjQ=", "number": 507, "title": "wsEngine accepts ANY value and silently falls back to other engines", "user": {"login": "brenc", "id": 12928053, "node_id": "MDQ6VXNlcjEyOTI4MDUz", "avatar_url": "https://avatars0.githubusercontent.com/u/12928053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brenc", "html_url": "https://github.com/brenc", "followers_url": "https://api.github.com/users/brenc/followers", "following_url": "https://api.github.com/users/brenc/following{/other_user}", "gists_url": "https://api.github.com/users/brenc/gists{/gist_id}", "starred_url": "https://api.github.com/users/brenc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brenc/subscriptions", "organizations_url": "https://api.github.com/users/brenc/orgs", "repos_url": "https://api.github.com/users/brenc/repos", "events_url": "https://api.github.com/users/brenc/events{/privacy}", "received_events_url": "https://api.github.com/users/brenc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-05-17T00:09:21Z", "updated_at": "2017-10-30T17:06:32Z", "closed_at": "2017-10-30T17:06:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [x] report a *bug*\r\n\r\n### Current behaviour\r\nuws will silently fail to compile and still install successfully (which is bad). engine.io appears to try loading uws and if it can't, it silently falls back to ws. The user is given *no* indication that this has happened.\r\n\r\nIf I manually set wsEngine to ANY string, engine.io silently tries to use uws and then ws.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\nSet wsEngine to any string. Set it to uws and remove the module.\r\n\r\n### Expected behaviour\r\nwsEngine should be checked for valid values \"uws\" and \"ws\". It should throw a descriptive message if something else is passed. This is good self-documentation.\r\n\r\nIf \"uws\" is passed (or any valid engine) and it can't be loaded, an exception should be thrown. Silently loading other engines is bad, especially if I set wsEngine manually and expect it to be using that engine.\r\n\r\nuws and ws are too different to be silently switched between. This isn't a good thing to do anyway.\r\n\r\n### Setup\r\n- OS: Debian Wheezy/Jessie x64\r\n- engine.io version: 3.1.0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/505", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/505/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/505/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/505/events", "html_url": "https://github.com/socketio/engine.io/issues/505", "id": 227718584, "node_id": "MDU6SXNzdWUyMjc3MTg1ODQ=", "number": 505, "title": "Access the socket id in the allowRequest() callback", "user": {"login": "pensierinmusica", "id": 3594037, "node_id": "MDQ6VXNlcjM1OTQwMzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3594037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pensierinmusica", "html_url": "https://github.com/pensierinmusica", "followers_url": "https://api.github.com/users/pensierinmusica/followers", "following_url": "https://api.github.com/users/pensierinmusica/following{/other_user}", "gists_url": "https://api.github.com/users/pensierinmusica/gists{/gist_id}", "starred_url": "https://api.github.com/users/pensierinmusica/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pensierinmusica/subscriptions", "organizations_url": "https://api.github.com/users/pensierinmusica/orgs", "repos_url": "https://api.github.com/users/pensierinmusica/repos", "events_url": "https://api.github.com/users/pensierinmusica/events{/privacy}", "received_events_url": "https://api.github.com/users/pensierinmusica/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-10T15:25:28Z", "updated_at": "2017-05-22T20:51:17Z", "closed_at": "2017-05-22T20:51:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nIn the `allowRequest` callback I'd need to have access to the id that gets assigned to the socket when I call `cb(null, true)`. Is there any way to do this?\r\n\r\n@rauchg @darrachequesne \r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/504", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/504/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/504/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/504/events", "html_url": "https://github.com/socketio/engine.io/issues/504", "id": 227140338, "node_id": "MDU6SXNzdWUyMjcxNDAzMzg=", "number": 504, "title": "Pass the request IP address to allowRequest()", "user": {"login": "pensierinmusica", "id": 3594037, "node_id": "MDQ6VXNlcjM1OTQwMzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3594037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pensierinmusica", "html_url": "https://github.com/pensierinmusica", "followers_url": "https://api.github.com/users/pensierinmusica/followers", "following_url": "https://api.github.com/users/pensierinmusica/following{/other_user}", "gists_url": "https://api.github.com/users/pensierinmusica/gists{/gist_id}", "starred_url": "https://api.github.com/users/pensierinmusica/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pensierinmusica/subscriptions", "organizations_url": "https://api.github.com/users/pensierinmusica/orgs", "repos_url": "https://api.github.com/users/pensierinmusica/repos", "events_url": "https://api.github.com/users/pensierinmusica/events{/privacy}", "received_events_url": "https://api.github.com/users/pensierinmusica/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-08T18:55:54Z", "updated_at": "2017-05-10T14:57:12Z", "closed_at": "2017-05-10T14:57:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThe `allowRequest` callback should have access to the IP address of the request (for example to allow only some IP addresses), but currently there doesn't seem to be any way to access it. Am I missing something?\r\n\r\n@rauchg @darrachequesne \r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/502", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/502/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/502/events", "html_url": "https://github.com/socketio/engine.io/issues/502", "id": 224952589, "node_id": "MDU6SXNzdWUyMjQ5NTI1ODk=", "number": 502, "title": "abortConnection with code == null", "user": {"login": "miki131", "id": 3870117, "node_id": "MDQ6VXNlcjM4NzAxMTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3870117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miki131", "html_url": "https://github.com/miki131", "followers_url": "https://api.github.com/users/miki131/followers", "following_url": "https://api.github.com/users/miki131/following{/other_user}", "gists_url": "https://api.github.com/users/miki131/gists{/gist_id}", "starred_url": "https://api.github.com/users/miki131/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miki131/subscriptions", "organizations_url": "https://api.github.com/users/miki131/orgs", "repos_url": "https://api.github.com/users/miki131/repos", "events_url": "https://api.github.com/users/miki131/events{/privacy}", "received_events_url": "https://api.github.com/users/miki131/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-04-28T01:02:18Z", "updated_at": "2017-04-28T11:46:50Z", "closed_at": "2017-04-28T11:46:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n```\r\nio.set('origins', ''domain1.dev:*');\r\n```\r\n\r\nThen connect from another domain2.dev\r\n\r\n### Expected behaviour\r\nAccording to `abortConnection` function `400 Bad Request` exception should be thrown\r\n\r\n### Setup\r\n- OS:\r\n- browser:\r\n- engine.io version: 1.8.3\r\n- node version: v7.8.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n```\r\nbuffer.js:362\r\n    throw new TypeError('\"string\" must be a string, Buffer, or ArrayBuffer');\r\n    ^\r\n\r\nTypeError: \"string\" must be a string, Buffer, or ArrayBuffer\r\n    at Function.byteLength (buffer.js:362:11)\r\n    at abortConnection (/home/app/node_modules/engine.io/lib/server.js:471:25)\r\n    at /home/app/node_modules/engine.io/lib/server.js:326:7\r\n    at Server.checkRequest (/home/app/node_modules/socket.io/lib/index.js:85:3)\r\n    at Server.verify (/home/app/node_modules/engine.io/lib/server.js:151:17)\r\n    at Server.handleUpgrade (/home/app/node_modules/engine.io/lib/server.js:323:8)\r\n    at Server.<anonymous> (/home/app/node_modules/engine.io/lib/server.js:444:14)\r\n    at emitThree (events.js:116:13)\r\n    at Server.emit (events.js:197:7)\r\n    at onParserExecuteCommon (_http_server.js:462:14)\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/486", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/486/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/486/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/486/events", "html_url": "https://github.com/socketio/engine.io/issues/486", "id": 210550825, "node_id": "MDU6SXNzdWUyMTA1NTA4MjU=", "number": 486, "title": "\"Async-await\" is not compatible bacward - Can I commit my PR? ", "user": {"login": "efkan", "id": 6974198, "node_id": "MDQ6VXNlcjY5NzQxOTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6974198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/efkan", "html_url": "https://github.com/efkan", "followers_url": "https://api.github.com/users/efkan/followers", "following_url": "https://api.github.com/users/efkan/following{/other_user}", "gists_url": "https://api.github.com/users/efkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/efkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/efkan/subscriptions", "organizations_url": "https://api.github.com/users/efkan/orgs", "repos_url": "https://api.github.com/users/efkan/repos", "events_url": "https://api.github.com/users/efkan/events{/privacy}", "received_events_url": "https://api.github.com/users/efkan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-27T17:23:49Z", "updated_at": "2017-02-28T13:15:13Z", "closed_at": "2017-02-28T13:15:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've tried to commit some changes with my PR (https://github.com/socketio/engine.io/pull/485).\r\n\r\nAsync-await is a new feature for Node.js. Because of this, `travis-ci` tests cannot pass.\r\n\r\nIs there any way to overcome this issue in engine.io `travis-ci`? \r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/483", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/483/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/483/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/483/events", "html_url": "https://github.com/socketio/engine.io/issues/483", "id": 210317225, "node_id": "MDU6SXNzdWUyMTAzMTcyMjU=", "number": 483, "title": "update to uWebsocket 0.13", "user": {"login": "arden", "id": 11365, "node_id": "MDQ6VXNlcjExMzY1", "avatar_url": "https://avatars3.githubusercontent.com/u/11365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arden", "html_url": "https://github.com/arden", "followers_url": "https://api.github.com/users/arden/followers", "following_url": "https://api.github.com/users/arden/following{/other_user}", "gists_url": "https://api.github.com/users/arden/gists{/gist_id}", "starred_url": "https://api.github.com/users/arden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arden/subscriptions", "organizations_url": "https://api.github.com/users/arden/orgs", "repos_url": "https://api.github.com/users/arden/repos", "events_url": "https://api.github.com/users/arden/events{/privacy}", "received_events_url": "https://api.github.com/users/arden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-26T13:08:16Z", "updated_at": "2017-03-11T06:23:47Z", "closed_at": "2017-03-11T06:23:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "uWebsocket 0.13 has released, when engine.io update to uWebsocket 0.13?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/482", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/482/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/482/events", "html_url": "https://github.com/socketio/engine.io/issues/482", "id": 209102939, "node_id": "MDU6SXNzdWUyMDkxMDI5Mzk=", "number": 482, "title": "Don't intercept requests when the server doesn't listen", "user": {"login": "legikaloz", "id": 1634166, "node_id": "MDQ6VXNlcjE2MzQxNjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1634166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legikaloz", "html_url": "https://github.com/legikaloz", "followers_url": "https://api.github.com/users/legikaloz/followers", "following_url": "https://api.github.com/users/legikaloz/following{/other_user}", "gists_url": "https://api.github.com/users/legikaloz/gists{/gist_id}", "starred_url": "https://api.github.com/users/legikaloz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legikaloz/subscriptions", "organizations_url": "https://api.github.com/users/legikaloz/orgs", "repos_url": "https://api.github.com/users/legikaloz/repos", "events_url": "https://api.github.com/users/legikaloz/events{/privacy}", "received_events_url": "https://api.github.com/users/legikaloz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-21T10:32:06Z", "updated_at": "2017-05-31T22:51:22Z", "closed_at": "2017-03-24T12:54:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\nDo not intercept and handle any http* request when the property `server.listening` is false.\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nI'm trying to close my server with `server.close(cb)`, but engine.io accept and handle incoming requests during server.close. This makes effectively impossible to safely stop and restart the server. \r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\ncall `server.close(cb)` and try to connect to the engine.io endpoint from a client\r\n\r\n### Expected behaviour\r\nDo not intercept and handle any http* request when the property `server.listening` is false.\r\n\r\n### Setup\r\n- OS: Ubuntu 16.10\r\n- node.js: 7.4.0\r\n- engine.io version: 2.0.2\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\ncheck server.listening in https://github.com/socketio/engine.io/blob/master/lib/server.js#L460:\r\n`if (server.listening && check(req)) {`\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/479", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/479/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/479/events", "html_url": "https://github.com/socketio/engine.io/issues/479", "id": 206276660, "node_id": "MDU6SXNzdWUyMDYyNzY2NjA=", "number": 479, "title": "dependency on \"ws\" version < 2.00 has security flaw in random number generator", "user": {"login": "paulrobello", "id": 955011, "node_id": "MDQ6VXNlcjk1NTAxMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/955011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulrobello", "html_url": "https://github.com/paulrobello", "followers_url": "https://api.github.com/users/paulrobello/followers", "following_url": "https://api.github.com/users/paulrobello/following{/other_user}", "gists_url": "https://api.github.com/users/paulrobello/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulrobello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulrobello/subscriptions", "organizations_url": "https://api.github.com/users/paulrobello/orgs", "repos_url": "https://api.github.com/users/paulrobello/repos", "events_url": "https://api.github.com/users/paulrobello/events{/privacy}", "received_events_url": "https://api.github.com/users/paulrobello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-02-08T18:01:15Z", "updated_at": "2017-02-16T20:56:09Z", "closed_at": "2017-02-16T11:50:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\"ws\" version < 2.00 has security flaw in random number generator\r\n\r\nengine.io version 1.8.2\r\ncurrent dependency version \"ws 1.1.1\" \r\nneeds to be \"ws >= 2.0.0\"\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/478", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/478/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/478/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/478/events", "html_url": "https://github.com/socketio/engine.io/issues/478", "id": 205990964, "node_id": "MDU6SXNzdWUyMDU5OTA5NjQ=", "number": 478, "title": "snyk reports vulnerabilites in ws version", "user": {"login": "nahammervold", "id": 8010113, "node_id": "MDQ6VXNlcjgwMTAxMTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8010113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nahammervold", "html_url": "https://github.com/nahammervold", "followers_url": "https://api.github.com/users/nahammervold/followers", "following_url": "https://api.github.com/users/nahammervold/following{/other_user}", "gists_url": "https://api.github.com/users/nahammervold/gists{/gist_id}", "starred_url": "https://api.github.com/users/nahammervold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nahammervold/subscriptions", "organizations_url": "https://api.github.com/users/nahammervold/orgs", "repos_url": "https://api.github.com/users/nahammervold/repos", "events_url": "https://api.github.com/users/nahammervold/events{/privacy}", "received_events_url": "https://api.github.com/users/nahammervold/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-02-07T19:33:59Z", "updated_at": "2017-02-16T11:51:28Z", "closed_at": "2017-02-16T11:51:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nhttps://snyk.io/vuln/npm:ws:20160920\r\n\u2717 Medium severity vulnerability found on ws@1.1.1\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\nsnyk test\r\n\r\n### Expected behaviour\r\nno vulnerabilites\r\n\r\n### Setup\r\n- OS: Windows\r\n- browser: Chrome\r\n- engine.io version:  engine.io@1.8.2 but uses the same ws version in master\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nsocket.io also needs updating after this fix is implemented\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/475", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/475/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/475/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/475/events", "html_url": "https://github.com/socketio/engine.io/issues/475", "id": 202487174, "node_id": "MDU6SXNzdWUyMDI0ODcxNzQ=", "number": 475, "title": "Cannot send more than 16 MiB in a single message", "user": {"login": "lpinca", "id": 1443911, "node_id": "MDQ6VXNlcjE0NDM5MTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1443911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lpinca", "html_url": "https://github.com/lpinca", "followers_url": "https://api.github.com/users/lpinca/followers", "following_url": "https://api.github.com/users/lpinca/following{/other_user}", "gists_url": "https://api.github.com/users/lpinca/gists{/gist_id}", "starred_url": "https://api.github.com/users/lpinca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lpinca/subscriptions", "organizations_url": "https://api.github.com/users/lpinca/orgs", "repos_url": "https://api.github.com/users/lpinca/repos", "events_url": "https://api.github.com/users/lpinca/events{/privacy}", "received_events_url": "https://api.github.com/users/lpinca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/socketio/engine.io/milestones/11", "html_url": "https://github.com/socketio/engine.io/milestone/11", "labels_url": "https://api.github.com/repos/socketio/engine.io/milestones/11/labels", "id": 2487133, "node_id": "MDk6TWlsZXN0b25lMjQ4NzEzMw==", "number": 11, "title": "3.1.0", "description": "", "creator": {"login": "darrachequesne", "id": 13031701, "node_id": "MDQ6VXNlcjEzMDMxNzAx", "avatar_url": "https://avatars3.githubusercontent.com/u/13031701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darrachequesne", "html_url": "https://github.com/darrachequesne", "followers_url": "https://api.github.com/users/darrachequesne/followers", "following_url": "https://api.github.com/users/darrachequesne/following{/other_user}", "gists_url": "https://api.github.com/users/darrachequesne/gists{/gist_id}", "starred_url": "https://api.github.com/users/darrachequesne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darrachequesne/subscriptions", "organizations_url": "https://api.github.com/users/darrachequesne/orgs", "repos_url": "https://api.github.com/users/darrachequesne/repos", "events_url": "https://api.github.com/users/darrachequesne/events{/privacy}", "received_events_url": "https://api.github.com/users/darrachequesne/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2017-04-27T23:11:43Z", "updated_at": "2017-10-11T05:42:54Z", "due_on": null, "closed_at": "2017-04-27T23:12:00Z"}, "comments": 1, "created_at": "2017-01-23T09:49:34Z", "updated_at": "2017-04-27T23:11:55Z", "closed_at": "2017-04-27T21:40:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nIt is not possible to send more that 16 MiB of data in a single message\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nRun the following test case\r\n\r\n```js\r\n'use strict';\r\n\r\nconst eioc = require('engine.io-client');\r\nconst eio = require('engine.io');\r\nconst http = require('http');\r\n\r\nconst server = http.createServer();\r\nconst engine = eio.attach(server, {\r\n  maxHttpBufferSize: 20 * 1024 * 1024\r\n});\r\n\r\nengine.on('connection', (socket) => {\r\n  socket.on('message', (data) => console.log(data.length));\r\n});\r\n\r\nserver.listen(3000, () => {\r\n  const socket = eioc('http://localhost:3000', {\r\n    perMessageDeflate: false,\r\n    transports: ['websocket']\r\n  });\r\n\r\n  socket.on('open', () => {\r\n    socket.send('A'.repeat(17 * 1024 * 1024));\r\n  });\r\n\r\n  socket.on('close', () => console.log('close'));\r\n});\r\n```\r\n\r\n### Expected behaviour\r\n\r\nThe `message` event should be emitted on the server and `17825792` logged on the console.\r\n\r\n### Setup\r\n- OS: macOS\r\n- browser: -\r\n- engine.io version: 2.0.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nThe issue seems to be caused by `uws` which apparently ignores the `maxHttpBufferSize` option and hardcodes its value to 16 MiB. The above example works as expected with `engine.io@1.8.x`.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/474", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/474/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/474/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/474/events", "html_url": "https://github.com/socketio/engine.io/issues/474", "id": 202480999, "node_id": "MDU6SXNzdWUyMDI0ODA5OTk=", "number": 474, "title": "Data is not compressed even if engine.io has been instructed to do so", "user": {"login": "lpinca", "id": 1443911, "node_id": "MDQ6VXNlcjE0NDM5MTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1443911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lpinca", "html_url": "https://github.com/lpinca", "followers_url": "https://api.github.com/users/lpinca/followers", "following_url": "https://api.github.com/users/lpinca/following{/other_user}", "gists_url": "https://api.github.com/users/lpinca/gists{/gist_id}", "starred_url": "https://api.github.com/users/lpinca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lpinca/subscriptions", "organizations_url": "https://api.github.com/users/lpinca/orgs", "repos_url": "https://api.github.com/users/lpinca/repos", "events_url": "https://api.github.com/users/lpinca/events{/privacy}", "received_events_url": "https://api.github.com/users/lpinca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-01-23T09:19:51Z", "updated_at": "2017-12-29T21:39:35Z", "closed_at": "2017-12-29T21:39:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nThe WebSocket server does not compress data.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nRun the following test case\r\n\r\n```js\r\n'use strict';\r\n\r\nconst eioc = require('engine.io-client');\r\nconst eio = require('engine.io');\r\nconst http = require('http');\r\n\r\nconst server = http.createServer();\r\nconst engine = eio.attach(server, {\r\n  perMessageDeflate: { threshold: 0 }\r\n});\r\n\r\nengine.on('connection', (socket) => {\r\n  socket.on('message', (data) => socket.send(data));\r\n});\r\n\r\nserver.listen(3000, () => {\r\n  const socket = eioc('http://localhost:3000', {\r\n    perMessageDeflate: { threshold: 0 },\r\n    transports: ['websocket']\r\n  });\r\n\r\n  socket.on('open', () => {\r\n    socket.send('Hello');\r\n    socket.transport.ws._socket.once('data', (data) => {\r\n      console.log(data);\r\n      // => <Buffer 81 06 34 48 65 6c 6c 6f>\r\n      // an uncompressed WebSocket text frame\r\n    });\r\n  });\r\n});\r\n```\r\n\r\n### Expected behaviour\r\n\r\nThe received WebSocket frame should be compressed.\r\n\r\n### Setup\r\n- OS: macOS\r\n- browser: -\r\n- engine.io version: 2.0.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nThe issue seems to be caused by `uws` which apparently does not compress the data despite having been instructed to do so. The above example works as expected with `engine.io@1.8.x`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/473", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/473/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/473/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/473/events", "html_url": "https://github.com/socketio/engine.io/issues/473", "id": 202470056, "node_id": "MDU6SXNzdWUyMDI0NzAwNTY=", "number": 473, "title": "Cannot read property 'handleUpgrade' of undefined", "user": {"login": "lpinca", "id": 1443911, "node_id": "MDQ6VXNlcjE0NDM5MTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1443911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lpinca", "html_url": "https://github.com/lpinca", "followers_url": "https://api.github.com/users/lpinca/followers", "following_url": "https://api.github.com/users/lpinca/following{/other_user}", "gists_url": "https://api.github.com/users/lpinca/gists{/gist_id}", "starred_url": "https://api.github.com/users/lpinca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lpinca/subscriptions", "organizations_url": "https://api.github.com/users/lpinca/orgs", "repos_url": "https://api.github.com/users/lpinca/repos", "events_url": "https://api.github.com/users/lpinca/events{/privacy}", "received_events_url": "https://api.github.com/users/lpinca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-01-23T08:18:31Z", "updated_at": "2017-01-30T14:52:00Z", "closed_at": "2017-01-30T14:52:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nAn error is thrown when not using `Server.prototype.attach` directly or indirectly.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nRun the following the test case\r\n\r\n```js\r\n'use strict';\r\n\r\nconst eioc = require('engine.io-client');\r\nconst eio = require('engine.io');\r\nconst http = require('http');\r\n\r\nconst server = http.createServer();\r\nconst engine = new eio.Server();\r\n\r\nengine.on('connection', (socket) => {\r\n  socket.on('message', (data) => socket.send(data));\r\n  socket.on('close', () => console.log('close'));\r\n});\r\n\r\nserver.on('upgrade', (req, socket, head) => {\r\n  engine.handleUpgrade(req, socket, head);\r\n});\r\n\r\nserver.on('request', (req, res) => {\r\n  engine.handleRequest(req, res);\r\n});\r\n\r\nserver.listen(3000, () => {\r\n  const socket = eioc('http://localhost:3000');\r\n\r\n  socket.on('open', () => socket.send('foo'));\r\n  socket.on('message', (data) => console.log(data));\r\n  socket.on('close', () => console.log('close'));\r\n});\r\n\r\n```\r\n\r\n### Expected behaviour\r\n\r\nThe above example should work without throwing errors.\r\n\r\n### Setup\r\n- OS: macOS\r\n- browser: -\r\n- engine.io version: 2.0.0\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\n```\r\nTypeError: Cannot read property 'handleUpgrade' of undefined\r\n    at /Users/luigi/eio-2.0/node_modules/engine.io/lib/server.js:360:12\r\n    at Server.verify (/Users/luigi/eio-2.0/node_modules/engine.io/lib/server.js:171:3)\r\n    at Server.handleUpgrade (/Users/luigi/eio-2.0/node_modules/engine.io/lib/server.js:349:8)\r\n    at Server.server.on (/Users/luigi/eio-2.0/index.js:16:10)\r\n    at emitThree (events.js:116:13)\r\n    at Server.emit (events.js:194:7)\r\n    at onParserExecuteCommon (_http_server.js:459:14)\r\n    at onParserExecute (_http_server.js:418:3)\r\n```\r\n\r\nIt seems that issue has been introduces in 7e50871c418a6fcffd211d72c3abe1a09035b52e as the [`init`](https://github.com/socketio/engine.io/commit/7e50871c418a6fcffd211d72c3abe1a09035b52e#diff-c945a46d13b34fcaff544d966cffcabaR103) method is only called when [`attach`](https://github.com/socketio/engine.io/commit/7e50871c418a6fcffd211d72c3abe1a09035b52e#diff-c945a46d13b34fcaff544d966cffcabaR441) is used.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/470", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/470/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/470/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/470/events", "html_url": "https://github.com/socketio/engine.io/issues/470", "id": 200375732, "node_id": "MDU6SXNzdWUyMDAzNzU3MzI=", "number": 470, "title": "TypeError: Cannot read property 'displayName' of undefined at line https://github.com/socketio/engine.io/blob/1.8.2/lib/transports/websocket.js#L118", "user": {"login": "hansenyang", "id": 4083659, "node_id": "MDQ6VXNlcjQwODM2NTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/4083659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hansenyang", "html_url": "https://github.com/hansenyang", "followers_url": "https://api.github.com/users/hansenyang/followers", "following_url": "https://api.github.com/users/hansenyang/following{/other_user}", "gists_url": "https://api.github.com/users/hansenyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/hansenyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hansenyang/subscriptions", "organizations_url": "https://api.github.com/users/hansenyang/orgs", "repos_url": "https://api.github.com/users/hansenyang/repos", "events_url": "https://api.github.com/users/hansenyang/events{/privacy}", "received_events_url": "https://api.github.com/users/hansenyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 487552059, "node_id": "MDU6TGFiZWw0ODc1NTIwNTk=", "url": "https://api.github.com/repos/socketio/engine.io/labels/Cannot%20reproduce", "name": "Cannot reproduce", "color": "b60205", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-01-12T14:08:32Z", "updated_at": "2017-11-22T21:08:55Z", "closed_at": "2017-11-22T21:08:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nwhile client gets data from socket.io server, at code line of\r\n\r\nhttps://github.com/socketio/engine.io/blob/1.8.2/lib/transports/websocket.js#L118\r\n\r\nif err throws here, it would produce the error as below:\r\n```\r\ndebug.js:195\r\n  if (val instanceof Error) return val.stack || val.message;\r\n                                      ^\r\nTypeError: Cannot read property 'displayName' of undefined\r\n```\r\n\r\nand it could crash the KOA server\r\n\r\n\r\n### Expected behaviour\r\n\r\n\r\n### Setup\r\n- OS: Mac/Linux\r\n- browser:\r\n- engine.io version: 1.7.2\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\nuse `err` directly in stead of `err.stack`\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/468", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/468/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/468/events", "html_url": "https://github.com/socketio/engine.io/issues/468", "id": 198772072, "node_id": "MDU6SXNzdWUxOTg3NzIwNzI=", "number": 468, "title": "Memory leak if trying to send data to closed Socket", "user": {"login": "konstantinzolotarev", "id": 286431, "node_id": "MDQ6VXNlcjI4NjQzMQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/286431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstantinzolotarev", "html_url": "https://github.com/konstantinzolotarev", "followers_url": "https://api.github.com/users/konstantinzolotarev/followers", "following_url": "https://api.github.com/users/konstantinzolotarev/following{/other_user}", "gists_url": "https://api.github.com/users/konstantinzolotarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstantinzolotarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstantinzolotarev/subscriptions", "organizations_url": "https://api.github.com/users/konstantinzolotarev/orgs", "repos_url": "https://api.github.com/users/konstantinzolotarev/repos", "events_url": "https://api.github.com/users/konstantinzolotarev/events{/privacy}", "received_events_url": "https://api.github.com/users/konstantinzolotarev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-04T18:03:28Z", "updated_at": "2017-01-05T20:02:09Z", "closed_at": "2017-01-05T20:02:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here is check for only `closing` state. https://github.com/socketio/engine.io/blob/master/lib/socket.js#L382\r\n\r\nBut if `Socket` has `closed` readyState and somebody try to send something to this socket. Data remains in `this.writeBuffer` and eats memory. \r\n\r\n<img width=\"979\" alt=\"screen shot 2017-01-04 at 8 02 16 pm\" src=\"https://cloud.githubusercontent.com/assets/286431/21653234/c04a9eba-d2b8-11e6-8496-ead6e27f9fe0.png\">\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/467", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/467/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/467/events", "html_url": "https://github.com/socketio/engine.io/issues/467", "id": 198451323, "node_id": "MDU6SXNzdWUxOTg0NTEzMjM=", "number": 467, "title": "Tests seem broken on build server", "user": {"login": "mfiumara", "id": 1368859, "node_id": "MDQ6VXNlcjEzNjg4NTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1368859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfiumara", "html_url": "https://github.com/mfiumara", "followers_url": "https://api.github.com/users/mfiumara/followers", "following_url": "https://api.github.com/users/mfiumara/following{/other_user}", "gists_url": "https://api.github.com/users/mfiumara/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfiumara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfiumara/subscriptions", "organizations_url": "https://api.github.com/users/mfiumara/orgs", "repos_url": "https://api.github.com/users/mfiumara/repos", "events_url": "https://api.github.com/users/mfiumara/events{/privacy}", "received_events_url": "https://api.github.com/users/mfiumara/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-01-03T10:59:46Z", "updated_at": "2017-01-05T20:04:38Z", "closed_at": "2017-01-05T20:04:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\nThere seems to be a problem with testing new builds. When running 'npm test' on the build server, the following output is given: \r\n'Error: Cannot find module 'spdx-license-ids''\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\nRun 'npm test' to reproduce the issue.\r\n\r\n### Expected behaviour\r\n'npm test' should run all tests and exit normally. \r\n\r\n### Setup\r\n- OS: \r\n- browser:\r\n- engine.io version:\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\nCheck my pull request with a minor spelling mistake correction for an example.\r\nhttps://travis-ci.org/socketio/engine.io/jobs/188468047\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/465", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/465/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/465/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/465/events", "html_url": "https://github.com/socketio/engine.io/issues/465", "id": 198389303, "node_id": "MDU6SXNzdWUxOTgzODkzMDM=", "number": 465, "title": "While upgrading: Cannot read property 'prototype' of undefined (Stracktrace)", "user": {"login": "laino", "id": 1431530, "node_id": "MDQ6VXNlcjE0MzE1MzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1431530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laino", "html_url": "https://github.com/laino", "followers_url": "https://api.github.com/users/laino/followers", "following_url": "https://api.github.com/users/laino/following{/other_user}", "gists_url": "https://api.github.com/users/laino/gists{/gist_id}", "starred_url": "https://api.github.com/users/laino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laino/subscriptions", "organizations_url": "https://api.github.com/users/laino/orgs", "repos_url": "https://api.github.com/users/laino/repos", "events_url": "https://api.github.com/users/laino/events{/privacy}", "received_events_url": "https://api.github.com/users/laino/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-01-02T23:05:26Z", "updated_at": "2017-01-05T20:05:02Z", "closed_at": "2017-01-05T20:05:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note*: for support questions, please use one of these channels: [stackoverflow](http://stackoverflow.com/questions/tagged/engine.io) or [slack](https://socketio.slack.com)\r\n\r\n### You want to:\r\n\r\n* [x] report a *bug*\r\n* [ ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nStacktrace during upgrade. See stracktrace.\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nI believe an user is using an experimental client written in elixir.\r\n\r\n### Expected behaviour\r\n\r\nDoesn't crash.\r\n\r\n### Setup\r\n- OS:\r\n- browser:\r\n- engine.io version: 1.8.1\r\n\r\n### Other information (e.g. stacktraces, related issues, suggestions how to fix)\r\n\r\n```\r\n[11:12:41 PM Worker 46054 Critical] TypeError: Cannot read property 'prototype' of undefined TypeError: Cannot read property 'prototype' of undefined\r\n    at Server.onWebSocket (/var/volafile/app/node_modules/engine.io/lib/server.js:358:40)\r\n    at /var/volafile/app/node_modules/engine.io/lib/server.js:343:12\r\n    at completeHybiUpgrade2 (/var/volafile/app/node_modules/ws/lib/WebSocketServer.js:284:5)\r\n    at completeHybiUpgrade1 (/var/volafile/app/node_modules/ws/lib/WebSocketServer.js:309:13)\r\n    at WebSocketServer.handleHybiUpgrade (/var/volafile/app/node_modules/ws/lib/WebSocketServer.js:337:3)\r\n    at WebSocketServer.handleUpgrade (/var/volafile/app/node_modules/ws/lib/WebSocketServer.js:173:26)\r\n    at /var/volafile/app/node_modules/engine.io/lib/server.js:342:13\r\n    at Server.verify (/var/volafile/app/node_modules/engine.io/lib/server.js:142:12)\r\n    at Server.handleUpgrade (/var/volafile/app/node_modules/engine.io/lib/server.js:331:8)\r\n    at Server.<anonymous> (/var/volafile/app/node_modules/engine.io/lib/server.js:451:14)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/464", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/464/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/464/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/464/events", "html_url": "https://github.com/socketio/engine.io/issues/464", "id": 198263018, "node_id": "MDU6SXNzdWUxOTgyNjMwMTg=", "number": 464, "title": "Max call stack error on high load", "user": {"login": "konstantinzolotarev", "id": 286431, "node_id": "MDQ6VXNlcjI4NjQzMQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/286431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstantinzolotarev", "html_url": "https://github.com/konstantinzolotarev", "followers_url": "https://api.github.com/users/konstantinzolotarev/followers", "following_url": "https://api.github.com/users/konstantinzolotarev/following{/other_user}", "gists_url": "https://api.github.com/users/konstantinzolotarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstantinzolotarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstantinzolotarev/subscriptions", "organizations_url": "https://api.github.com/users/konstantinzolotarev/orgs", "repos_url": "https://api.github.com/users/konstantinzolotarev/repos", "events_url": "https://api.github.com/users/konstantinzolotarev/events{/privacy}", "received_events_url": "https://api.github.com/users/konstantinzolotarev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-01T10:17:11Z", "updated_at": "2017-01-23T11:48:09Z", "closed_at": "2017-01-23T11:47:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Current behaviour\r\nIn several minutes received about 50k new connections and from time to time see this in logs: \r\n```\r\n/var/app/current/node_modules/engine.io/lib/socket.js:275\r\n    cleanup();\r\n    ^\r\n\r\nRangeError: Maximum call stack size exceeded\r\n    at Socket.clearTransport (/var/app/current/node_modules/engine.io/lib/socket.js:275:5)\r\n    at Socket.onClose (/var/app/current/node_modules/engine.io/lib/socket.js:310:10)\r\n    at Socket.onError (/var/app/current/node_modules/engine.io/lib/socket.js:120:8)\r\n    at WebSocket.g (events.js:291:16)\r\n    at emitOne (events.js:96:13)\r\n    at WebSocket.emit (events.js:188:7)\r\n    at WebSocket.Transport.onError (/var/app/current/node_modules/engine.io/lib/transport.js:91:10)\r\n    at onEnd (/var/app/current/node_modules/engine.io/lib/transports/websocket.js:118:26)\r\n    at Sender.frameAndSend (/var/app/current/node_modules/ws/lib/Sender.js:235:38)\r\n    at /var/app/current/node_modules/ws/lib/Sender.js:126:12\r\n```\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\nActually no specific steps exist. App works pretty normally but from time to time see this in logs.\r\n\r\n### Setup\r\n- OS: Linux\r\n- browser: -\r\n- engine.io version: 1.8.2\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/449", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/449/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/449/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/449/events", "html_url": "https://github.com/socketio/engine.io/issues/449", "id": 191709940, "node_id": "MDU6SXNzdWUxOTE3MDk5NDA=", "number": 449, "title": "Engine.io to not set CORS headers on error response", "user": {"login": "jdolega", "id": 23740553, "node_id": "MDQ6VXNlcjIzNzQwNTUz", "avatar_url": "https://avatars3.githubusercontent.com/u/23740553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdolega", "html_url": "https://github.com/jdolega", "followers_url": "https://api.github.com/users/jdolega/followers", "following_url": "https://api.github.com/users/jdolega/following{/other_user}", "gists_url": "https://api.github.com/users/jdolega/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdolega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdolega/subscriptions", "organizations_url": "https://api.github.com/users/jdolega/orgs", "repos_url": "https://api.github.com/users/jdolega/repos", "events_url": "https://api.github.com/users/jdolega/events{/privacy}", "received_events_url": "https://api.github.com/users/jdolega/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-11-25T14:11:24Z", "updated_at": "2016-12-22T07:41:52Z", "closed_at": "2016-12-22T07:41:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an issue similar to https://github.com/socketio/engine.io/issues/331 but related to the error situations which are eventually handled by the sendErrorMessage (https://github.com/socketio/engine.io/blob/master/lib/server.js#L236)\r\nI have socket.io configured to allow only certain origins and in case of origin that is not passing validation I can see verify method failing (https://github.com/socketio/engine.io/blob/master/lib/server.js#L159) due to not allowed request. Unfortunately the error response generated by sendErrorMessage is having that unallowed origin set in Access-Control-Allow-Origin header which is \r\na) a bit confusing as my response about not allowed origin at the same time claims to allow it via Access-Control-Allow-Origin header\r\nb) such responses are picked up by the security scans\r\n\r\nIs there any reason sendErrorMessage explicitly sets the CORS headers? Could we add some way to somehow control their presence? \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/443", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/443/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/443/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/443/events", "html_url": "https://github.com/socketio/engine.io/issues/443", "id": 187626151, "node_id": "MDU6SXNzdWUxODc2MjYxNTE=", "number": 443, "title": "Feature Request: Get a Client's *Current* IP", "user": {"login": "kaansoral", "id": 170243, "node_id": "MDQ6VXNlcjE3MDI0Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/170243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaansoral", "html_url": "https://github.com/kaansoral", "followers_url": "https://api.github.com/users/kaansoral/followers", "following_url": "https://api.github.com/users/kaansoral/following{/other_user}", "gists_url": "https://api.github.com/users/kaansoral/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaansoral/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaansoral/subscriptions", "organizations_url": "https://api.github.com/users/kaansoral/orgs", "repos_url": "https://api.github.com/users/kaansoral/repos", "events_url": "https://api.github.com/users/kaansoral/events{/privacy}", "received_events_url": "https://api.github.com/users/kaansoral/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 487551825, "node_id": "MDU6TGFiZWw0ODc1NTE4MjU=", "url": "https://api.github.com/repos/socketio/engine.io/labels/Feature%20request", "name": "Feature request", "color": "0e8a16", "default": false, "description": null}, {"id": 487551848, "node_id": "MDU6TGFiZWw0ODc1NTE4NDg=", "url": "https://api.github.com/repos/socketio/engine.io/labels/PR%20welcome", "name": "PR welcome", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-11-07T05:05:02Z", "updated_at": "2017-11-23T08:06:37Z", "closed_at": "2017-11-22T21:08:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "### You want to:\r\n\r\n* [] report a *bug*\r\n* [x ] request a *feature*\r\n\r\n### Current behaviour\r\n\r\nIn socket.io, both `socket.handshake.address` `socket.request.connection.remoteAddress` are initial IP's, when the IP of the client change, It's invisible to socket.io\r\n\r\n### Steps to reproduce (if the current behaviour is a bug)\r\n\r\nConnect to a server with one IP, dynamically switch to a network with a different IP, the connection is persisted, but the new IP isn't available\r\n\r\n### Expected behaviour\r\n\r\nThere should be a clear and simple way for checking the current IP address of a connected user\r\nThere are 10's of questions and various answers that come short: https://www.google.com/search?q=socket+io+get+ip\r\nI've inspected the entire socket object, yet couldn't find a reference to the current IP, all that's available is `.handshake.address`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/442", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/442/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/442/events", "html_url": "https://github.com/socketio/engine.io/issues/442", "id": 187100507, "node_id": "MDU6SXNzdWUxODcxMDA1MDc=", "number": 442, "title": "Uncaught TypeError: Cannot read property 'handleUpgrade' of undefined", "user": {"login": "veloce48", "id": 20637422, "node_id": "MDQ6VXNlcjIwNjM3NDIy", "avatar_url": "https://avatars0.githubusercontent.com/u/20637422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/veloce48", "html_url": "https://github.com/veloce48", "followers_url": "https://api.github.com/users/veloce48/followers", "following_url": "https://api.github.com/users/veloce48/following{/other_user}", "gists_url": "https://api.github.com/users/veloce48/gists{/gist_id}", "starred_url": "https://api.github.com/users/veloce48/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/veloce48/subscriptions", "organizations_url": "https://api.github.com/users/veloce48/orgs", "repos_url": "https://api.github.com/users/veloce48/repos", "events_url": "https://api.github.com/users/veloce48/events{/privacy}", "received_events_url": "https://api.github.com/users/veloce48/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-11-03T15:46:39Z", "updated_at": "2017-01-27T13:16:51Z", "closed_at": "2016-11-15T21:01:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading socket.io to version 1.5.1, I got the following error (it didn't occur with socket.io 1.5.0):\r\n\r\n```\r\nUncaught TypeError: Cannot read property 'handleUpgrade' of undefined\r\n      at node_modules\\engine.io\\lib\\server.js:343:12\r\n      at Server.verify (node_modules\\engine.io\\lib\\server.js:162:3)\r\n      at Server.handleUpgrade (node_modules\\engine.io\\lib\\server.js:332:8)\r\n      at Server.<anonymous> (node_modules\\engine.io\\lib\\server.js:453:14)\r\n      at onParserExecuteCommon (_http_server.js:409:14)\r\n      at HTTPParser.onParserExecute (_http_server.js:377:5)\r\n```\r\n\r\nThe error comes from engine.io, whose version has been updated to 1.7.2 through the update of socket.io to 1.5.1. I searched in the code of server.js, and found that the guilty line is:\r\n\r\n```\r\nself.ws.handleUpgrade(req, socket, head, function(conn){\r\n    self.onWebSocket(req, conn);\r\n});\r\n```\r\n\r\nThe field `ws` is instantiated in the constructor of the `Server` object (server.js line 75):\r\n\r\n```\r\nthis.ws = new WebSocketServer({\r\n    noServer: true,\r\n    clientTracking: false,\r\n    perMessageDeflate: this.perMessageDeflate,\r\n    maxPayload: this.maxHttpBufferSize\r\n});\r\n```\r\n\r\nBut when you close the server with the `close()` function, we see in the code of server.js (line 182 to 195) that the field `ws` is deleted:\r\n\r\n```\r\nif (this.ws) {\r\n    debug('closing webSocketServer');\r\n    this.ws.close();\r\n    delete this.ws;\r\n}\r\n```\r\n\r\n And this was not the case in previous version of engine.io. This field is not instantiated again when you call the `listen()` function later on your server. That's why the error occur, `ws` is undefined.\r\n\r\nHere is a simple piece of code reproducing the error:\r\n\r\n```\r\nvar ioClient = require('socket.io-client');\r\nvar express = require('express');\r\nvar http = express();\r\nvar server = require('http').Server(http);\r\nvar io = require('socket.io')(server);\r\n\r\nio.on('connection', function (socket) {\r\n\tconsole.log('connection :', socket.id);\r\n});\r\n\r\nserver.listen(80, function () {\r\n\t// do some stuff ...\r\n\tserver.close(); // ws is deleted\r\n\tserver.listen(80, function () {\r\n\t\tvar socket = ioClient.connect('http://localhost');\r\n\t\t// the socket will trigger a call to handleUpgrade() function\r\n\t\t// and the error will occur\r\n\t});\r\n});\r\n```\r\n\r\nTry to run this code with a previous version of engine.io (through socket.io 1.5.0 eg) and the error will not occur. With the latest version of engine.io (through socket.io 1.5.1), the error will occur.\r\n\r\nIs this a real issue, or am I missing something ?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/440", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/440/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/440/events", "html_url": "https://github.com/socketio/engine.io/issues/440", "id": 185563163, "node_id": "MDU6SXNzdWUxODU1NjMxNjM=", "number": 440, "title": "Packet parser ", "user": {"login": "QingYong", "id": 5309786, "node_id": "MDQ6VXNlcjUzMDk3ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5309786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QingYong", "html_url": "https://github.com/QingYong", "followers_url": "https://api.github.com/users/QingYong/followers", "following_url": "https://api.github.com/users/QingYong/following{/other_user}", "gists_url": "https://api.github.com/users/QingYong/gists{/gist_id}", "starred_url": "https://api.github.com/users/QingYong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QingYong/subscriptions", "organizations_url": "https://api.github.com/users/QingYong/orgs", "repos_url": "https://api.github.com/users/QingYong/repos", "events_url": "https://api.github.com/users/QingYong/events{/privacy}", "received_events_url": "https://api.github.com/users/QingYong/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-27T03:11:47Z", "updated_at": "2016-11-21T22:00:06Z", "closed_at": "2016-11-21T22:00:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi ,\n  I got a data like this:\n        42[\"action\",{\"action\":\"canEnterRoom\",\"messageUUID\":\"18045\"}]\nwhen parsing with this function:\npublic static Packet<String> decodePacket(String data, boolean utf8decode) {\n        int type;\n        try {\n            type = Character.getNumericValue(data.charAt(0));\n        } catch (IndexOutOfBoundsException e) {\n            type = -1;\n        }\n\n```\n    if (utf8decode) {\n        try {\n            data = UTF8.decode(data);\n        } catch (UTF8Exception e) {\n            return err;\n        }\n    }\n\n    if (type < 0 || type >= packetslist.size()) {\n        return err;\n    }\n\n    if (data.length() > 1) {\n        return new Packet<String>(packetslist.get(type), data.substring(1));\n    } else {\n        return new Packet<String>(packetslist.get(type));\n    }\n}\n```\n\nResult data is  2[\"action\",{\"action\":\"canEnterRoom\",\"messageUUID\":\"18045\"}]\n\nwhat shoud I do to erase '2'\n\nand what does 2 means?\nThanks.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/432", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/432/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/432/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/432/events", "html_url": "https://github.com/socketio/engine.io/issues/432", "id": 183379210, "node_id": "MDU6SXNzdWUxODMzNzkyMTA=", "number": 432, "title": "Why wsEngine 'uws' didn't get released?", "user": {"login": "ldshi", "id": 18049879, "node_id": "MDQ6VXNlcjE4MDQ5ODc5", "avatar_url": "https://avatars3.githubusercontent.com/u/18049879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ldshi", "html_url": "https://github.com/ldshi", "followers_url": "https://api.github.com/users/ldshi/followers", "following_url": "https://api.github.com/users/ldshi/following{/other_user}", "gists_url": "https://api.github.com/users/ldshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ldshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ldshi/subscriptions", "organizations_url": "https://api.github.com/users/ldshi/orgs", "repos_url": "https://api.github.com/users/ldshi/repos", "events_url": "https://api.github.com/users/ldshi/events{/privacy}", "received_events_url": "https://api.github.com/users/ldshi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-10-17T10:25:27Z", "updated_at": "2016-12-09T08:32:44Z", "closed_at": "2016-10-29T16:40:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for the great job.\n\nI checked the source code a bit, then found:\n\n```\nvar WebSocketServer = (this.wsEngine ? require(this.wsEngine) : require('ws')).Server;\n```\n\nSo even in the option set the wsEngine as 'uws', will still use the ws engine, I am wondering why 'uws' engine didn't get released, are there some serious potential problems to use 'uws' engine?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/431", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/431/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/431/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/431/events", "html_url": "https://github.com/socketio/engine.io/issues/431", "id": 182539390, "node_id": "MDU6SXNzdWUxODI1MzkzOTA=", "number": 431, "title": "Upgraded from 1.3.7 and lost sockets.sockets array", "user": {"login": "chewax", "id": 7167355, "node_id": "MDQ6VXNlcjcxNjczNTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/7167355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chewax", "html_url": "https://github.com/chewax", "followers_url": "https://api.github.com/users/chewax/followers", "following_url": "https://api.github.com/users/chewax/following{/other_user}", "gists_url": "https://api.github.com/users/chewax/gists{/gist_id}", "starred_url": "https://api.github.com/users/chewax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chewax/subscriptions", "organizations_url": "https://api.github.com/users/chewax/orgs", "repos_url": "https://api.github.com/users/chewax/repos", "events_url": "https://api.github.com/users/chewax/events{/privacy}", "received_events_url": "https://api.github.com/users/chewax/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-12T14:23:57Z", "updated_at": "2016-10-12T20:25:44Z", "closed_at": "2016-10-12T20:25:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, i upgraded from 1.3.7 to 1.4.5 and the structure changed so my app crashed because of that. That is not the main concern though.\nThe problem i am facing, and i have tried everything, is to assign a custom attribute on the socket object. \nThis is what i am doing:\n\n```\n   io = socketio.listen(server);\n      io.on('connection', function(client){\n        client.on('handshake', function(userId, customer) {\n            client.user_id = userId;\n            client.join(customer);\n            //client.user_id is correctly assigned here.\n        });\n    });\n```\n\nThe issue is that i am not being able to find that property anymore. On 1.3.4 i would just\n       `io.sockets.sockets.filter(function(s){ return s.user_id == \"myid\" })`\n\nIs it possible that it does not get persisted and therefore lost? I really am in the dark here.\n\nAny help would be appreciated. \nThanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/430", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/430/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/430/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/430/events", "html_url": "https://github.com/socketio/engine.io/issues/430", "id": 181545081, "node_id": "MDU6SXNzdWUxODE1NDUwODE=", "number": 430, "title": "Cannot set Access-Control-Allow-Origin response header for XHR polling", "user": {"login": "pcolangelo73", "id": 17211856, "node_id": "MDQ6VXNlcjE3MjExODU2", "avatar_url": "https://avatars0.githubusercontent.com/u/17211856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcolangelo73", "html_url": "https://github.com/pcolangelo73", "followers_url": "https://api.github.com/users/pcolangelo73/followers", "following_url": "https://api.github.com/users/pcolangelo73/following{/other_user}", "gists_url": "https://api.github.com/users/pcolangelo73/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcolangelo73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcolangelo73/subscriptions", "organizations_url": "https://api.github.com/users/pcolangelo73/orgs", "repos_url": "https://api.github.com/users/pcolangelo73/repos", "events_url": "https://api.github.com/users/pcolangelo73/events{/privacy}", "received_events_url": "https://api.github.com/users/pcolangelo73/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 487551825, "node_id": "MDU6TGFiZWw0ODc1NTE4MjU=", "url": "https://api.github.com/repos/socketio/engine.io/labels/Feature%20request", "name": "Feature request", "color": "0e8a16", "default": false, "description": null}, {"id": 487551848, "node_id": "MDU6TGFiZWw0ODc1NTE4NDg=", "url": "https://api.github.com/repos/socketio/engine.io/labels/PR%20welcome", "name": "PR welcome", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-06T22:51:17Z", "updated_at": "2016-12-22T07:38:25Z", "closed_at": "2016-12-22T07:38:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am facing an issue when trying to set the `Access-Control-Allow-Origin` response header in socket IO when using xhr long polling. It seems that this library is hard coded to use either the value of the REQUEST header `origin`, or else `*`.\n\nLooking at the code for `lib/transports/polling-xhr.js` in the `XHR.prototype.headers` method, it seems that we are unable to set this value from the server side:\n\nThe code in question: ( https://github.com/socketio/engine.io/blob/master/lib/transports/polling-xhr.js line 59):\n\n```\n// https://github.com/socketio/engine.io/blob/master/lib/transports/polling-xhr.js line 59\nXHR.prototype.headers = function(req, headers){\n  headers = headers || {};\n\n  if (req.headers.origin) {\n    headers['Access-Control-Allow-Credentials'] = 'true';\n    headers['Access-Control-Allow-Origin'] = req.headers.origin;\n  } else {\n    headers['Access-Control-Allow-Origin'] = '*';\n  }\n\n  return Polling.prototype.headers.call(this, req, headers);\n};\n```\n\nThis seems strange to me as I would expect most people would want to set the header on the server side. Am I missing something here? Was this done for a reason or was this just an oversight?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/422", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/422/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/422/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/422/events", "html_url": "https://github.com/socketio/engine.io/issues/422", "id": 179049314, "node_id": "MDU6SXNzdWUxNzkwNDkzMTQ=", "number": 422, "title": "Why you don't use cookie stored socket ID?", "user": {"login": "dlimkin", "id": 5002852, "node_id": "MDQ6VXNlcjUwMDI4NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5002852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlimkin", "html_url": "https://github.com/dlimkin", "followers_url": "https://api.github.com/users/dlimkin/followers", "following_url": "https://api.github.com/users/dlimkin/following{/other_user}", "gists_url": "https://api.github.com/users/dlimkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlimkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlimkin/subscriptions", "organizations_url": "https://api.github.com/users/dlimkin/orgs", "repos_url": "https://api.github.com/users/dlimkin/repos", "events_url": "https://api.github.com/users/dlimkin/events{/privacy}", "received_events_url": "https://api.github.com/users/dlimkin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-09-24T20:09:25Z", "updated_at": "2017-01-11T10:43:34Z", "closed_at": "2017-01-11T10:43:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, \nI use a socket.id as ID of the session. \nAnd I need to after refresh the page, socket is created based on the already generated ID (stored in client cookie). \nIn your code you are saving ID, but do not use it for a new connection.\nWhy not use something similar? (possibly optional)\n\n```\nServer.prototype.generateId = function(req){\n  var c = parseCookie(req.headers.cookie);\n  if(this.cookie && c[this.cookie]){\n    return c[this.cookie];\n  }\n  return base64id.generateId();\n};\n```\n\nOr maybe something like this already implemented and configured?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/420", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/420/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/420/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/420/events", "html_url": "https://github.com/socketio/engine.io/issues/420", "id": 177212595, "node_id": "MDU6SXNzdWUxNzcyMTI1OTU=", "number": 420, "title": "Socket.writeBuffer size is not capped ", "user": {"login": "alex3d", "id": 712898, "node_id": "MDQ6VXNlcjcxMjg5OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/712898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex3d", "html_url": "https://github.com/alex3d", "followers_url": "https://api.github.com/users/alex3d/followers", "following_url": "https://api.github.com/users/alex3d/following{/other_user}", "gists_url": "https://api.github.com/users/alex3d/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex3d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex3d/subscriptions", "organizations_url": "https://api.github.com/users/alex3d/orgs", "repos_url": "https://api.github.com/users/alex3d/repos", "events_url": "https://api.github.com/users/alex3d/events{/privacy}", "received_events_url": "https://api.github.com/users/alex3d/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-09-15T15:41:56Z", "updated_at": "2017-12-05T07:28:37Z", "closed_at": "2017-01-10T10:42:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Socket.writeBuffer size is not capped, so malicious client can trigger out of memory error on the socket.io server (at least with websocket transport).\nI can provide vulnerability POC on request.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/419", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/419/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/419/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/419/events", "html_url": "https://github.com/socketio/engine.io/issues/419", "id": 174877711, "node_id": "MDU6SXNzdWUxNzQ4Nzc3MTE=", "number": 419, "title": "okhttp (almost) outdated", "user": {"login": "oliverhausler", "id": 8090341, "node_id": "MDQ6VXNlcjgwOTAzNDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8090341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oliverhausler", "html_url": "https://github.com/oliverhausler", "followers_url": "https://api.github.com/users/oliverhausler/followers", "following_url": "https://api.github.com/users/oliverhausler/following{/other_user}", "gists_url": "https://api.github.com/users/oliverhausler/gists{/gist_id}", "starred_url": "https://api.github.com/users/oliverhausler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oliverhausler/subscriptions", "organizations_url": "https://api.github.com/users/oliverhausler/orgs", "repos_url": "https://api.github.com/users/oliverhausler/repos", "events_url": "https://api.github.com/users/oliverhausler/events{/privacy}", "received_events_url": "https://api.github.com/users/oliverhausler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-09-03T04:07:12Z", "updated_at": "2016-10-05T14:03:59Z", "closed_at": "2016-10-05T14:03:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "engine.io uses an almost outdated okhttp-ws library (3.0.1). retrofit and other libraries which also use okhttp use much newer versions (up to 3.4.1), which leads to issues, if one of the other libraries brings in a version newer than 3.3.1. retrofit is still at 3.0.0 so we are still fine in most cases, but engine.io should be ready to release a newer version as soon as retrofit switches, or a lot of apps will break.\n\nMore specifically, I have that WebSocketCall has been changed around ln 108 by the okhttp guys, which breaks socket.io when an okhttp library after Jun 21 is used.\n\nThe offending commit is here: https://github.com/square/okhttp/commit/576408374d58a3e9a63714b6f7761cb42a315102#diff-6f6bc59233fb2201c3382a12e62e4b03\n\nAnd this is the call which will fail, and if it fails, WS fails entirely:\n\n```\n09-02 20:48:22.024 28423-28561/live.attach.testcontainer E/AndroidRuntime: FATAL EXCEPTION: EventThread\n                                                                           Process: live.attach.testcontainer, PID: 28423\n                                                                           java.lang.NoSuchMethodError: okhttp3.internal.Internal.callEnqueue\n                                                                               at okhttp3.ws.WebSocketCall.enqueue(WebSocketCall.java:108)\n                                                                               at io.socket.engineio.client.transports.WebSocket.doOpen(WebSocket.java:73)\n                                                                               at io.socket.engineio.client.Transport$1.run(Transport.java:75)\n                                                                               at io.socket.thread.EventThread.exec(EventThread.java:50)\n                                                                               at io.socket.engineio.client.Transport.open(Transport.java:70)\n                                                                               at io.socket.engineio.client.Socket.probe(Socket.java:458)\n                                                                               at io.socket.engineio.client.Socket.onOpen(Socket.java:471)\n                                                                               at io.socket.engineio.client.Socket.onHandshake(Socket.java:512)\n                                                                               at io.socket.engineio.client.Socket.onPacket(Socket.java:485)\n                                                                               at io.socket.engineio.client.Socket.access$900(Socket.java:30)\n                                                                               at io.socket.engineio.client.Socket$5.call(Socket.java:299)\n                                                                               at io.socket.emitter.Emitter.emit(Emitter.java:117)\n                                                                               at io.socket.engineio.client.Transport.onPacket(Transport.java:127)\n                                                                               at io.socket.engineio.client.transports.Polling.access$700(Polling.java:17)\n                                                                               at io.socket.engineio.client.transports.Polling$2.call(Polling.java:124)\n                                                                               at io.socket.engineio.parser.Parser.decodePayload(Parser.java:251)\n                                                                               at io.socket.engineio.client.transports.Polling._onData(Polling.java:134)\n                                                                               at io.socket.engineio.client.transports.Polling.onData(Polling.java:106)\n                                                                               at io.socket.engineio.client.transports.PollingXHR$5$1.run(PollingXHR.java:113)\n                                                                               at io.socket.thread.EventThread$2.run(EventThread.java:75)\n                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n                                                                               at java.lang.Thread.run(Thread.java:841)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/415", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/415/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/415/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/415/events", "html_url": "https://github.com/socketio/engine.io/issues/415", "id": 167984273, "node_id": "MDU6SXNzdWUxNjc5ODQyNzM=", "number": 415, "title": "IllegalStateException: must call close()", "user": {"login": "oliverhausler", "id": 8090341, "node_id": "MDQ6VXNlcjgwOTAzNDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8090341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oliverhausler", "html_url": "https://github.com/oliverhausler", "followers_url": "https://api.github.com/users/oliverhausler/followers", "following_url": "https://api.github.com/users/oliverhausler/following{/other_user}", "gists_url": "https://api.github.com/users/oliverhausler/gists{/gist_id}", "starred_url": "https://api.github.com/users/oliverhausler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oliverhausler/subscriptions", "organizations_url": "https://api.github.com/users/oliverhausler/orgs", "repos_url": "https://api.github.com/users/oliverhausler/repos", "events_url": "https://api.github.com/users/oliverhausler/events{/privacy}", "received_events_url": "https://api.github.com/users/oliverhausler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-28T00:00:41Z", "updated_at": "2016-10-18T02:14:39Z", "closed_at": "2016-10-18T02:14:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "In `compile('io.socket:socket.io-client:0.7.0')` I saw this here once. No idea what it triggered it, but it looks like okhttp is complaining about a missing `close()`.\n\n```\n07-27 16:56:51.078 30291-28451/live.attach.testcontainer E/AndroidRuntime: FATAL EXCEPTION: EventThread\n                                                                           Process: live.attach.testcontainer, PID: 30291\n                                                                           java.lang.IllegalStateException: must call close()\n                                                                               at okhttp3.internal.ws.RealWebSocket.sendMessage(RealWebSocket.java:108)\n                                                                               at io.socket.engineio.client.transports.WebSocket$3.call(WebSocket.java:173)\n                                                                               at io.socket.engineio.parser.Parser.encodePacket(Parser.java:63)\n                                                                               at io.socket.engineio.parser.Parser.encodePacket(Parser.java:42)\n                                                                               at io.socket.engineio.client.transports.WebSocket.write(WebSocket.java:168)\n                                                                               at io.socket.engineio.client.Transport$3.run(Transport.java:101)\n                                                                               at io.socket.thread.EventThread.exec(EventThread.java:50)\n                                                                               at io.socket.engineio.client.Transport.send(Transport.java:96)\n                                                                               at io.socket.engineio.client.Socket.flush(Socket.java:608)\n                                                                               at io.socket.engineio.client.Socket.onDrain(Socket.java:599)\n                                                                               at io.socket.engineio.client.Socket.access$1000(Socket.java:30)\n                                                                               at io.socket.engineio.client.Socket$6.call(Socket.java:294)\n                                                                               at io.socket.emitter.Emitter.emit(Emitter.java:117)\n                                                                               at io.socket.engineio.client.transports.WebSocket$2$1.run(WebSocket.java:160)\n                                                                               at io.socket.thread.EventThread$2.run(EventThread.java:75)\n                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n                                                                               at java.lang.Thread.run(Thread.java:818)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/414", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/414/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/414/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/414/events", "html_url": "https://github.com/socketio/engine.io/issues/414", "id": 165891912, "node_id": "MDU6SXNzdWUxNjU4OTE5MTI=", "number": 414, "title": "Timeout 'til forever", "user": {"login": "omarojo", "id": 995265, "node_id": "MDQ6VXNlcjk5NTI2NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/995265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omarojo", "html_url": "https://github.com/omarojo", "followers_url": "https://api.github.com/users/omarojo/followers", "following_url": "https://api.github.com/users/omarojo/following{/other_user}", "gists_url": "https://api.github.com/users/omarojo/gists{/gist_id}", "starred_url": "https://api.github.com/users/omarojo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omarojo/subscriptions", "organizations_url": "https://api.github.com/users/omarojo/orgs", "repos_url": "https://api.github.com/users/omarojo/repos", "events_url": "https://api.github.com/users/omarojo/events{/privacy}", "received_events_url": "https://api.github.com/users/omarojo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-07-15T22:54:50Z", "updated_at": "2016-12-22T07:45:34Z", "closed_at": "2016-12-22T07:45:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to make all clients try to reconnect forever ?\n\nI have a server computer that shuts-down during the night. But clients that never shut-down, so when the server is down, all clients fail to connect. I need them to keep trying forever, until the server goes up again.\n\nAny suggestions ?  \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/413", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/413/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/413/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/413/events", "html_url": "https://github.com/socketio/engine.io/issues/413", "id": 165711819, "node_id": "MDU6SXNzdWUxNjU3MTE4MTk=", "number": 413, "title": "Make uws default engine", "user": {"login": "alexhultman", "id": 3397140, "node_id": "MDQ6VXNlcjMzOTcxNDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3397140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexhultman", "html_url": "https://github.com/alexhultman", "followers_url": "https://api.github.com/users/alexhultman/followers", "following_url": "https://api.github.com/users/alexhultman/following{/other_user}", "gists_url": "https://api.github.com/users/alexhultman/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexhultman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexhultman/subscriptions", "organizations_url": "https://api.github.com/users/alexhultman/orgs", "repos_url": "https://api.github.com/users/alexhultman/repos", "events_url": "https://api.github.com/users/alexhultman/events{/privacy}", "received_events_url": "https://api.github.com/users/alexhultman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-15T05:02:03Z", "updated_at": "2016-12-11T19:38:08Z", "closed_at": "2016-12-11T19:38:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "@rauchg I think this is a sane thing to do now.\n- npm install uws never fails (there are pre-compiled binaries for Windows, OS X and Linux).\n- require('uws') can fail (it throws Error on failure such as compilation failed AND there is no pre-compiled binary available, or any other start-up errors).\n\nBy doing something like this:\n\n``` javascript\nvar WebSocketServer;\ntry {\n  WebSocketServer = require('uws');\n} catch() {\n  WebSocketServer = require('ws');\n}\n```\n\nYou can select implementation based on availability. Windows support is currently only working for Node.js 6.3.0, so it would be a good idea to always default to ws on Windows until patches to Node.js gets more widespread. I could make uws throw on Windows until I'm certain it works there.\n\nuws (native server) is 34x faster than ws and 14x faster from Node.js + JavaScript. If you want Socket.IO to stay competitive I think this needs to be done sometime.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/412", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/412/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/412/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/412/events", "html_url": "https://github.com/socketio/engine.io/issues/412", "id": 165705117, "node_id": "MDU6SXNzdWUxNjU3MDUxMTc=", "number": 412, "title": "Ping timeout test fails", "user": {"login": "alexhultman", "id": 3397140, "node_id": "MDQ6VXNlcjMzOTcxNDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3397140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexhultman", "html_url": "https://github.com/alexhultman", "followers_url": "https://api.github.com/users/alexhultman/followers", "following_url": "https://api.github.com/users/alexhultman/following{/other_user}", "gists_url": "https://api.github.com/users/alexhultman/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexhultman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexhultman/subscriptions", "organizations_url": "https://api.github.com/users/alexhultman/orgs", "repos_url": "https://api.github.com/users/alexhultman/repos", "events_url": "https://api.github.com/users/alexhultman/events{/privacy}", "received_events_url": "https://api.github.com/users/alexhultman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-07-15T03:39:27Z", "updated_at": "2016-12-12T21:03:23Z", "closed_at": "2016-12-12T21:03:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "This ping test fails sometimes, it depends on way too small timeout of 10ms:\n\nUncaught Error: expected 'transport error' to equal 'ping timeout'\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/410", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/410/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/410/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/410/events", "html_url": "https://github.com/socketio/engine.io/issues/410", "id": 162289602, "node_id": "MDU6SXNzdWUxNjIyODk2MDI=", "number": 410, "title": "Vulnerability in ws 1.1.0", "user": {"login": "cmrigney", "id": 3259448, "node_id": "MDQ6VXNlcjMyNTk0NDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/3259448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmrigney", "html_url": "https://github.com/cmrigney", "followers_url": "https://api.github.com/users/cmrigney/followers", "following_url": "https://api.github.com/users/cmrigney/following{/other_user}", "gists_url": "https://api.github.com/users/cmrigney/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmrigney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmrigney/subscriptions", "organizations_url": "https://api.github.com/users/cmrigney/orgs", "repos_url": "https://api.github.com/users/cmrigney/repos", "events_url": "https://api.github.com/users/cmrigney/events{/privacy}", "received_events_url": "https://api.github.com/users/cmrigney/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2016-06-25T16:47:09Z", "updated_at": "2016-10-09T20:47:18Z", "closed_at": "2016-10-09T20:47:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "See https://nodesecurity.io/advisories/120\n\n\"ws\" needs updated to 1.1.1 to fix it.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/407", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/407/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/407/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/407/events", "html_url": "https://github.com/socketio/engine.io/issues/407", "id": 162160763, "node_id": "MDU6SXNzdWUxNjIxNjA3NjM=", "number": 407, "title": "Version 1.6.11 broke <=IE9 support", "user": {"login": "fastest963", "id": 112555, "node_id": "MDQ6VXNlcjExMjU1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/112555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fastest963", "html_url": "https://github.com/fastest963", "followers_url": "https://api.github.com/users/fastest963/followers", "following_url": "https://api.github.com/users/fastest963/following{/other_user}", "gists_url": "https://api.github.com/users/fastest963/gists{/gist_id}", "starred_url": "https://api.github.com/users/fastest963/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fastest963/subscriptions", "organizations_url": "https://api.github.com/users/fastest963/orgs", "repos_url": "https://api.github.com/users/fastest963/repos", "events_url": "https://api.github.com/users/fastest963/events{/privacy}", "received_events_url": "https://api.github.com/users/fastest963/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-06-24T14:34:42Z", "updated_at": "2016-08-05T17:07:57Z", "closed_at": "2016-08-05T17:07:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like socket.io 1.4.8 broke IE9 and lower becuase they don't have `Uint8Array`. The only change between 1.4.7 and 1.4.8 in socket.io was an update to engine.io to 1.6.11 which updates ws to 1.1.0 so the problem might actually be related to ws.\n\nThe error is `'Uint8Array' is undefined` which seems to be coming from:\n\n```\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n```\n\nWhich is from base64-arraybuffer. That is a engine.io-parser dependency which doesn't seem to be updated in 1.6.11 so it must be the upgrade to ws causing some new code to be running in these browsers.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/406", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/406/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/406/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/406/events", "html_url": "https://github.com/socketio/engine.io/issues/406", "id": 162074463, "node_id": "MDU6SXNzdWUxNjIwNzQ0NjM=", "number": 406, "title": "Issues installing v1.6.10 and v1.6.11", "user": {"login": "steveharrison", "id": 1661692, "node_id": "MDQ6VXNlcjE2NjE2OTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1661692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveharrison", "html_url": "https://github.com/steveharrison", "followers_url": "https://api.github.com/users/steveharrison/followers", "following_url": "https://api.github.com/users/steveharrison/following{/other_user}", "gists_url": "https://api.github.com/users/steveharrison/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveharrison/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveharrison/subscriptions", "organizations_url": "https://api.github.com/users/steveharrison/orgs", "repos_url": "https://api.github.com/users/steveharrison/repos", "events_url": "https://api.github.com/users/steveharrison/events{/privacy}", "received_events_url": "https://api.github.com/users/steveharrison/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-06-24T04:35:57Z", "updated_at": "2016-06-24T04:56:23Z", "closed_at": "2016-06-24T04:56:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "A dependency is trying to install 1.6.10 but it doesn't seem to exist in the registry? Can see 1.6.10 and 1.6.11 as tagged releases on GitHub. Have these not been published yet / were they unpublished?\n\n`npm ERR! version not found: engine.io@1.6.10`\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/403", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/403/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/403/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/403/events", "html_url": "https://github.com/socketio/engine.io/issues/403", "id": 161381375, "node_id": "MDU6SXNzdWUxNjEzODEzNzU=", "number": 403, "title": "License of base64id", "user": {"login": "edi9999", "id": 2071336, "node_id": "MDQ6VXNlcjIwNzEzMzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/2071336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edi9999", "html_url": "https://github.com/edi9999", "followers_url": "https://api.github.com/users/edi9999/followers", "following_url": "https://api.github.com/users/edi9999/following{/other_user}", "gists_url": "https://api.github.com/users/edi9999/gists{/gist_id}", "starred_url": "https://api.github.com/users/edi9999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edi9999/subscriptions", "organizations_url": "https://api.github.com/users/edi9999/orgs", "repos_url": "https://api.github.com/users/edi9999/repos", "events_url": "https://api.github.com/users/edi9999/events{/privacy}", "received_events_url": "https://api.github.com/users/edi9999/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-06-21T08:53:37Z", "updated_at": "2016-12-01T19:47:24Z", "closed_at": "2016-12-01T19:47:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nthe released version of the package `base64id` is \"none\", which can have some legal issues (code without license is considered as copyleft, eg you have no rights on it). The package maintainer doesn't seem to want/have time for updating the published package. (https://github.com/faeldt/base64id/issues/6)\n\nSince they is a LICENSE in the git repository, we could simply copy the only file of this package inside engine.io \n\nThis also has the benefit of being less dependent on other packages (events with kik , left-pad).\n\nWould you accept a pull request that would take the one file of the base64id into the source code of engine.io ?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/402", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/402/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/402/events", "html_url": "https://github.com/socketio/engine.io/issues/402", "id": 160927845, "node_id": "MDU6SXNzdWUxNjA5Mjc4NDU=", "number": 402, "title": "Next engine.io release?", "user": {"login": "yasserf", "id": 2734923, "node_id": "MDQ6VXNlcjI3MzQ5MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2734923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yasserf", "html_url": "https://github.com/yasserf", "followers_url": "https://api.github.com/users/yasserf/followers", "following_url": "https://api.github.com/users/yasserf/following{/other_user}", "gists_url": "https://api.github.com/users/yasserf/gists{/gist_id}", "starred_url": "https://api.github.com/users/yasserf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yasserf/subscriptions", "organizations_url": "https://api.github.com/users/yasserf/orgs", "repos_url": "https://api.github.com/users/yasserf/repos", "events_url": "https://api.github.com/users/yasserf/events{/privacy}", "received_events_url": "https://api.github.com/users/yasserf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-06-17T16:36:15Z", "updated_at": "2016-06-18T09:21:01Z", "closed_at": "2016-06-18T09:21:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Wondering when the next release is, as I'm keen to start using the uws integration that has been merged early last month.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/401", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/401/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/401/events", "html_url": "https://github.com/socketio/engine.io/issues/401", "id": 160752878, "node_id": "MDU6SXNzdWUxNjA3NTI4Nzg=", "number": 401, "title": "nsp advisory Regular Expression Denial of Service", "user": {"login": "alecbenson", "id": 7052260, "node_id": "MDQ6VXNlcjcwNTIyNjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/7052260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alecbenson", "html_url": "https://github.com/alecbenson", "followers_url": "https://api.github.com/users/alecbenson/followers", "following_url": "https://api.github.com/users/alecbenson/following{/other_user}", "gists_url": "https://api.github.com/users/alecbenson/gists{/gist_id}", "starred_url": "https://api.github.com/users/alecbenson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alecbenson/subscriptions", "organizations_url": "https://api.github.com/users/alecbenson/orgs", "repos_url": "https://api.github.com/users/alecbenson/repos", "events_url": "https://api.github.com/users/alecbenson/events{/privacy}", "received_events_url": "https://api.github.com/users/alecbenson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-06-16T20:26:39Z", "updated_at": "2016-10-09T20:53:59Z", "closed_at": "2016-10-09T20:53:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Looks like https://nodesecurity.io/advisories/106 applies to engine.io\nI think the solution is to upgrade `accepts`:\n\nhttps://github.com/jshttp/accepts/releases/tag/1.3.3\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/399", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/399/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/399/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/399/events", "html_url": "https://github.com/socketio/engine.io/issues/399", "id": 159832492, "node_id": "MDU6SXNzdWUxNTk4MzI0OTI=", "number": 399, "title": "In what cases would give out the [Maximum call stack size exceeded] error?", "user": {"login": "xidui", "id": 4591091, "node_id": "MDQ6VXNlcjQ1OTEwOTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/4591091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xidui", "html_url": "https://github.com/xidui", "followers_url": "https://api.github.com/users/xidui/followers", "following_url": "https://api.github.com/users/xidui/following{/other_user}", "gists_url": "https://api.github.com/users/xidui/gists{/gist_id}", "starred_url": "https://api.github.com/users/xidui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xidui/subscriptions", "organizations_url": "https://api.github.com/users/xidui/orgs", "repos_url": "https://api.github.com/users/xidui/repos", "events_url": "https://api.github.com/users/xidui/events{/privacy}", "received_events_url": "https://api.github.com/users/xidui/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-06-12T15:18:50Z", "updated_at": "2016-11-21T21:41:47Z", "closed_at": "2016-11-21T21:41:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "RangeError: Maximum call stack size exceeded\n    at Socket.flush (/Users/xidui/Documents/xidui/github/NodeBB/node_modules/engine.io/lib/socket.js:413:32)\n    at emitNone (events.js:85:20)\n    at WebSocket.emit (events.js:179:7)\n    at Array.<anonymous> (/Users/xidui/Documents/xidui/github/NodeBB/node_modules/engine.io/lib/transports/websocket.js:109:14)\n    at _stream_writable.js:383:15\n    at afterWrite (_stream_writable.js:346:3)\n    at onwrite (_stream_writable.js:337:7)\n    at Socket.WritableState.onwrite (_stream_writable.js:89:5)\n    at WriteWrap.afterWrite (net.js:775:12)\nRangeError: Maximum call stack size exceeded\n    at Socket.flush (/Users/xidui/Documents/xidui/github/NodeBB/node_modules/engine.io/lib/socket.js:413:32)\n    at emitNone (events.js:85:20)\n    at WebSocket.emit (events.js:179:7)\n    at Array.<anonymous> (/Users/xidui/Documents/xidui/github/NodeBB/node_modules/engine.io/lib/transports/websocket.js:109:14)\n    at _stream_writable.js:383:15\n    at afterWrite (_stream_writable.js:346:3)\n    at onwrite (_stream_writable.js:337:7)\n    at Socket.WritableState.onwrite (_stream_writable.js:89:5)\n    at WriteWrap.afterWrite (net.js:775:12)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/398", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/398/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/398/events", "html_url": "https://github.com/socketio/engine.io/issues/398", "id": 157394056, "node_id": "MDU6SXNzdWUxNTczOTQwNTY=", "number": 398, "title": "using io.engine.clientsCount", "user": {"login": "Reeley", "id": 1641794, "node_id": "MDQ6VXNlcjE2NDE3OTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1641794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Reeley", "html_url": "https://github.com/Reeley", "followers_url": "https://api.github.com/users/Reeley/followers", "following_url": "https://api.github.com/users/Reeley/following{/other_user}", "gists_url": "https://api.github.com/users/Reeley/gists{/gist_id}", "starred_url": "https://api.github.com/users/Reeley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Reeley/subscriptions", "organizations_url": "https://api.github.com/users/Reeley/orgs", "repos_url": "https://api.github.com/users/Reeley/repos", "events_url": "https://api.github.com/users/Reeley/events{/privacy}", "received_events_url": "https://api.github.com/users/Reeley/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-29T16:32:46Z", "updated_at": "2016-11-13T19:31:43Z", "closed_at": "2016-11-13T19:31:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "So im using socket.io for a realtime chat. Today i decided to show how many users are currently connected. It works all fine, but when i refresh my page over and over very fast, the clientsCount rises above 1 client. Altough only one client is connected.\n\nI also tried specify my own variable and incrementing it, when the connect event happens and decrement, when the disconnect event happens, yet the counter keeps rising.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/396", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/396/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/396/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/396/events", "html_url": "https://github.com/socketio/engine.io/issues/396", "id": 156141081, "node_id": "MDU6SXNzdWUxNTYxNDEwODE=", "number": 396, "title": "engine.io-client 1.6.9 makes node.js socketio calls hang", "user": {"login": "ksylvan", "id": 1226059, "node_id": "MDQ6VXNlcjEyMjYwNTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1226059?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ksylvan", "html_url": "https://github.com/ksylvan", "followers_url": "https://api.github.com/users/ksylvan/followers", "following_url": "https://api.github.com/users/ksylvan/following{/other_user}", "gists_url": "https://api.github.com/users/ksylvan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ksylvan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ksylvan/subscriptions", "organizations_url": "https://api.github.com/users/ksylvan/orgs", "repos_url": "https://api.github.com/users/ksylvan/repos", "events_url": "https://api.github.com/users/ksylvan/events{/privacy}", "received_events_url": "https://api.github.com/users/ksylvan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-05-22T08:17:50Z", "updated_at": "2016-10-20T14:17:28Z", "closed_at": "2016-10-20T14:17:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is related to https://github.com/socketio/socket.io-client/issues/969\n\nAgain, not sure why the npm package is 1.6.9 while the source code here is only at version 1.6.8\n\nI traced the problem down to the engine.io-client 1.6.9 update in the socket.io-client update.\n\nAfter `npm install --save socket.io-client` I changed the `package.json` reference to be for `1.6.8`:\n\n```\n/usr/src/app $ grep engine.io-client node_modules/socket.io-client/package.json \n\"engine.io-client\": \"1.6.8\",\n```\n\nAnd now my tests work:\n\n```\n$ ./test/run_tests InfoController\n\n  InfoController\n    /version:\n  \u2713 should return json (57ms)\n  \u2713 should have valid json info\n  InfoController with sockets\n    /version:\n  \u2713 should return data\n  3 passing (16s)\n```\n\nChanging it back to 1.6.9, here is what happens:\n\n```\n$ ./test/run_tests InfoController\n\n InfoController\n    /version:\n  \u2713 should return json (41ms)\n  \u2713 should have valid json info \n  InfoController with sockets\n    /version:\n  1) should return data\n  2 passing (12s)\n  1 failing    \n  1) InfoController with sockets /version: should return data:\n     Error: timeout of 5000ms exceeded. Ensure the done() callback is being called in this test.\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/388", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/388/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/388/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/388/events", "html_url": "https://github.com/socketio/engine.io/issues/388", "id": 148907017, "node_id": "MDU6SXNzdWUxNDg5MDcwMTc=", "number": 388, "title": "Replace ws with uws?", "user": {"login": "pesho", "id": 265896, "node_id": "MDQ6VXNlcjI2NTg5Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/265896?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pesho", "html_url": "https://github.com/pesho", "followers_url": "https://api.github.com/users/pesho/followers", "following_url": "https://api.github.com/users/pesho/following{/other_user}", "gists_url": "https://api.github.com/users/pesho/gists{/gist_id}", "starred_url": "https://api.github.com/users/pesho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pesho/subscriptions", "organizations_url": "https://api.github.com/users/pesho/orgs", "repos_url": "https://api.github.com/users/pesho/repos", "events_url": "https://api.github.com/users/pesho/events{/privacy}", "received_events_url": "https://api.github.com/users/pesho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2016-04-17T00:46:43Z", "updated_at": "2019-07-12T07:52:49Z", "closed_at": "2016-05-09T20:36:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/alexhultman/uWebSockets\n\n`uws` (`\u00b5WS`/`\u00b5WebSockets`) claims to be much more performant than `ws`:\n- **23x** better short message throughput\n- **21x** better connection performance\n- **52x** less memory\n\nWould be great to see this adopted in `engine.io`.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/386", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/386/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/386/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/386/events", "html_url": "https://github.com/socketio/engine.io/issues/386", "id": 142773338, "node_id": "MDU6SXNzdWUxNDI3NzMzMzg=", "number": 386, "title": "Data delivered out of order on iOS Websocket", "user": {"login": "quicklyfrozen", "id": 1276492, "node_id": "MDQ6VXNlcjEyNzY0OTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1276492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quicklyfrozen", "html_url": "https://github.com/quicklyfrozen", "followers_url": "https://api.github.com/users/quicklyfrozen/followers", "following_url": "https://api.github.com/users/quicklyfrozen/following{/other_user}", "gists_url": "https://api.github.com/users/quicklyfrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/quicklyfrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quicklyfrozen/subscriptions", "organizations_url": "https://api.github.com/users/quicklyfrozen/orgs", "repos_url": "https://api.github.com/users/quicklyfrozen/repos", "events_url": "https://api.github.com/users/quicklyfrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/quicklyfrozen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-03-22T20:41:00Z", "updated_at": "2016-03-22T20:43:55Z", "closed_at": "2016-03-22T20:43:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "This workaround for a websocket crash doesn't seem to have any mechanism to ensure the messages are delivered in the correct order:\n\n``` /**\n * Override `onData` to use a timer on iOS.\n * See: https://gist.github.com/mloughran/2052006\n *\n * @api private\n */\n\nif ('undefined' != typeof navigator\n  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n  WS.prototype.onData = function(data){\n    var self = this;\n    setTimeout(function(){\n      Transport.prototype.onData.call(self, data);\n    }, 0);\n  };\n}\n```\n\nI was tearing my hair out for quite a while trying to figure out why I was receiving corrupted data on an iPad while it was working fine on every other platform.  Commenting out this block allows the app to work fine on an iPad (although I'm sure the original problem this is trying to work around will reappear).\n\nMy specific use case is VNC frame buffer data, so there is a fair amount of data being transported, and as it's jpeg or zlib data, order is important.\n\nhttp://stackoverflow.com/questions/1776239/are-equal-timeouts-executed-in-order-in-javascript suggests that there is no guarantee that timeouts with the same time will be executed in any particular order.  (One of the respondents to this question suggests using a queue to ensure ordering.)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/383", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/383/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/383/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/383/events", "html_url": "https://github.com/socketio/engine.io/issues/383", "id": 136818751, "node_id": "MDU6SXNzdWUxMzY4MTg3NTE=", "number": 383, "title": "'WebSocketHybi' object has no attribute 'version'", "user": {"login": "chrisspen", "id": 116631, "node_id": "MDQ6VXNlcjExNjYzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/116631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisspen", "html_url": "https://github.com/chrisspen", "followers_url": "https://api.github.com/users/chrisspen/followers", "following_url": "https://api.github.com/users/chrisspen/following{/other_user}", "gists_url": "https://api.github.com/users/chrisspen/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisspen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisspen/subscriptions", "organizations_url": "https://api.github.com/users/chrisspen/orgs", "repos_url": "https://api.github.com/users/chrisspen/repos", "events_url": "https://api.github.com/users/chrisspen/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisspen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-02-26T21:26:39Z", "updated_at": "2016-04-10T12:13:40Z", "closed_at": "2016-04-10T12:13:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Attempting to run simple [Flask-SocketIO example](https://github.com/miguelgrinberg/Flask-SocketIO/) fails with the traceback:\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/gevent/greenlet.py\", line 390, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/gevent/pywsgi.py\", line 571, in handle\n    handler.handle()\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/gevent/pywsgi.py\", line 180, in handle\n    result = self.handle_one_request()\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/gevent/pywsgi.py\", line 314, in handle_one_request\n    self.handle_one_response()\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/geventwebsocket/handler.py\", line 37, in handle_one_response\n    return self._handle_websocket()\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/geventwebsocket/handler.py\", line 62, in _handle_websocket\n    self.application(environ, self._fake_start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/flask/app.py\", line 1836, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/flask_socketio/__init__.py\", line 37, in __call__\n    start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/engineio/middleware.py\", line 47, in __call__\n    return self.engineio_app.handle_request(environ, start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/socketio/server.py\", line 303, in handle_request\n    return self.eio.handle_request(environ, start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/engineio/server.py\", line 226, in handle_request\n    environ, start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/engineio/socket.py\", line 77, in handle_get_request\n    start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/engineio/socket.py\", line 116, in _upgrade_websocket\n    return ws(environ, start_response)\n  File \"/usr/local/myproject/.env/local/lib/python2.7/site-packages/engineio/async_gevent.py\", line 39, in __call__\n    self.version = self._sock.version\nAttributeError: 'WebSocketHybi' object has no attribute 'version'\n```\n\nIs this a misconfiguraion on my part or a bug in socketio?\n\nMy package versions are:\n\n```\nFlask==0.10.1\nFlask-Login==0.3.2\nFlask-SocketIO==2.1\ngevent==0.13.8\ngevent-socketio==0.3.5rc2\ngevent-websocket==0.3.6\ngreenlet==0.4.0\nitsdangerous==0.24\npython-engineio==0.8.8\npython-socketio==1.0\nWerkzeug==0.11.4\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/380", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/380/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/380/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/380/events", "html_url": "https://github.com/socketio/engine.io/issues/380", "id": 131322687, "node_id": "MDU6SXNzdWUxMzEzMjI2ODc=", "number": 380, "title": "WebSocket is already in CLOSING or CLOSED state.", "user": {"login": "siddo420", "id": 6943328, "node_id": "MDQ6VXNlcjY5NDMzMjg=", "avatar_url": "https://avatars2.githubusercontent.com/u/6943328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siddo420", "html_url": "https://github.com/siddo420", "followers_url": "https://api.github.com/users/siddo420/followers", "following_url": "https://api.github.com/users/siddo420/following{/other_user}", "gists_url": "https://api.github.com/users/siddo420/gists{/gist_id}", "starred_url": "https://api.github.com/users/siddo420/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siddo420/subscriptions", "organizations_url": "https://api.github.com/users/siddo420/orgs", "repos_url": "https://api.github.com/users/siddo420/repos", "events_url": "https://api.github.com/users/siddo420/events{/privacy}", "received_events_url": "https://api.github.com/users/siddo420/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-02-04T11:48:49Z", "updated_at": "2018-08-17T07:31:06Z", "closed_at": "2016-11-18T00:28:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using Engine.io as a transporter for primus.\n\nHowever, on the browser I am getting the error in title from time to time.\n\nI looked at the part of code\n\n```\n        //Sometimes the websocket has already been closed but the browser didn't\n        //have a chance of informing us about it yet, in that case send will\n        //throw an error\n        try {\n          if (BrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);    //<----------------- Error on this line\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e){\n          debug('websocket closed before onclose event');\n        }\n```\n\nand opened an issue on primus repo but I was told that its an engine.io issue. See https://github.com/primus/primus/issues/426.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/379", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/379/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/379/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/379/events", "html_url": "https://github.com/socketio/engine.io/issues/379", "id": 128212228, "node_id": "MDU6SXNzdWUxMjgyMTIyMjg=", "number": 379, "title": "ngrok postinstall error on npm install ", "user": {"login": "vicneanschi", "id": 2883540, "node_id": "MDQ6VXNlcjI4ODM1NDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2883540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vicneanschi", "html_url": "https://github.com/vicneanschi", "followers_url": "https://api.github.com/users/vicneanschi/followers", "following_url": "https://api.github.com/users/vicneanschi/following{/other_user}", "gists_url": "https://api.github.com/users/vicneanschi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vicneanschi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vicneanschi/subscriptions", "organizations_url": "https://api.github.com/users/vicneanschi/orgs", "repos_url": "https://api.github.com/users/vicneanschi/repos", "events_url": "https://api.github.com/users/vicneanschi/events{/privacy}", "received_events_url": "https://api.github.com/users/vicneanschi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-01-22T18:14:46Z", "updated_at": "2016-10-20T14:18:22Z", "closed_at": "2016-10-20T14:18:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "22936 verbose about to build C:\\Users\\VALVI\\projects\\github\\socket.io\\node_modul\nes\\istanbul\n22937 info build C:\\Users\\VALVI\\projects\\github\\socket.io\\node_modules\\istanbul\n22938 info linkStuff istanbul@0.4.1\n22939 silly linkStuff istanbul@0.4.1 has C:\\Users\\VALVI\\projects\\github\\socket.i\no\\node_modules as its parent node_modules\n22940 verbose linkBins istanbul@0.4.1\n22941 verbose link bins [ { istanbul: './lib/cli.js' },\n22941 verbose link bins   'C:\\Users\\VALVI\\projects\\github\\socket.io\\node_m\nodules\\.bin',\n22941 verbose link bins   false ]\n22942 verbose linkMans istanbul@0.4.1\n22943 verbose rebuildBundles istanbul@0.4.1\n22944 verbose rebuildBundles [ '.bin',\n22944 verbose rebuildBundles   'abbrev',\n22944 verbose rebuildBundles   'async',\n22944 verbose rebuildBundles   'escodegen',\n22944 verbose rebuildBundles   'esprima',\n22944 verbose rebuildBundles   'fileset',\n22944 verbose rebuildBundles   'handlebars',\n22944 verbose rebuildBundles   'js-yaml',\n22944 verbose rebuildBundles   'mkdirp',\n22944 verbose rebuildBundles   'nopt',\n22944 verbose rebuildBundles   'once',\n22944 verbose rebuildBundles   'resolve',\n22944 verbose rebuildBundles   'supports-color',\n22944 verbose rebuildBundles   'which',\n22944 verbose rebuildBundles   'wordwrap' ]\n22945 info install istanbul@0.4.1\n22946 info postinstall istanbul@0.4.1\n22947 verbose unlock done using C:\\Users\\VALVI\\AppData\\Roaming\\npm-cache_locks\\\nistanbul-6ab0e3bc38209d8f.lock for C:\\Users\\VALVI\\projects\\github\\socket.io\\node\n_modules\\istanbul\n22948 verbose stack Error: ngrok@0.2.2 postinstall: `node ./postinstall.js`\n22948 verbose stack Exit status 1\n22948 verbose stack     at EventEmitter.<anonymous> (C:\\Users\\VALVI\\AppData\\Roam\ning\\nvm\\v4.2.5\\node_modules\\npm\\lib\\utils\\lifecycle.js:214:16)\n22948 verbose stack     at emitTwo (events.js:87:13)\n22948 verbose stack     at EventEmitter.emit (events.js:172:7)\n22948 verbose stack     at ChildProcess.<anonymous> (C:\\Users\\VALVI\\AppData\\Roam\ning\\nvm\\v4.2.5\\node_modules\\npm\\lib\\utils\\spawn.js:24:14)\n22948 verbose stack     at emitTwo (events.js:87:13)\n22948 verbose stack     at ChildProcess.emit (events.js:172:7)\n22948 verbose stack     at maybeClose (internal/child_process.js:821:16)\n22948 verbose stack     at Process.ChildProcess._handle.onexit (internal/child_p\nrocess.js:211:5)\n22949 verbose pkgid ngrok@0.2.2\n22950 verbose cwd C:\\Users\\VALVI\\projects\\github\\socket.io\n22951 error Windows_NT 6.1.7601\n22952 error argv \"C:\\Program Files\\nodejs\\node.exe\" \"C:\\Program Files\\nodej\ns\\node_modules\\npm\\bin\\npm-cli.js\" \"install\"\n22953 error node v4.2.5\n22954 error npm  v2.14.12\n22955 error code ELIFECYCLE\n22956 error ngrok@0.2.2 postinstall: `node ./postinstall.js`\n22956 error Exit status 1\n22957 error Failed at the ngrok@0.2.2 postinstall script 'node ./postinstall.js'\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/376", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/376/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/376/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/376/events", "html_url": "https://github.com/socketio/engine.io/issues/376", "id": 126849216, "node_id": "MDU6SXNzdWUxMjY4NDkyMTY=", "number": 376, "title": "`closeTimeoutTimer` is not cleared when transport is upgraded", "user": {"login": "lpinca", "id": 1443911, "node_id": "MDQ6VXNlcjE0NDM5MTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1443911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lpinca", "html_url": "https://github.com/lpinca", "followers_url": "https://api.github.com/users/lpinca/followers", "following_url": "https://api.github.com/users/lpinca/following{/other_user}", "gists_url": "https://api.github.com/users/lpinca/gists{/gist_id}", "starred_url": "https://api.github.com/users/lpinca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lpinca/subscriptions", "organizations_url": "https://api.github.com/users/lpinca/orgs", "repos_url": "https://api.github.com/users/lpinca/repos", "events_url": "https://api.github.com/users/lpinca/events{/privacy}", "received_events_url": "https://api.github.com/users/lpinca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-01-15T10:44:02Z", "updated_at": "2016-01-18T18:08:51Z", "closed_at": "2016-01-18T18:08:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I noticed that the [`closeTimeoutTimer`](https://github.com/socketio/engine.io/blob/a31551e141d3ea227e3f85b93285007ca16e4de0/lib/transports/polling.js#L374) is not cleared when upgrading to websocket.\nThis leaves the timer running when there is no reason for it as the transport has been upgraded.\n\nMaybe we can skip setting `shouldClose` and the `closeTimeoutTimer` when the polling transport is closed as a result of the websocket upgrade.\n\n/cc @nkzawa\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/375", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/375/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/375/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/375/events", "html_url": "https://github.com/socketio/engine.io/issues/375", "id": 124848018, "node_id": "MDU6SXNzdWUxMjQ4NDgwMTg=", "number": 375, "title": "Remote memory disclosure in ws", "user": {"login": "ef4", "id": 319282, "node_id": "MDQ6VXNlcjMxOTI4Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/319282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ef4", "html_url": "https://github.com/ef4", "followers_url": "https://api.github.com/users/ef4/followers", "following_url": "https://api.github.com/users/ef4/following{/other_user}", "gists_url": "https://api.github.com/users/ef4/gists{/gist_id}", "starred_url": "https://api.github.com/users/ef4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ef4/subscriptions", "organizations_url": "https://api.github.com/users/ef4/orgs", "repos_url": "https://api.github.com/users/ef4/repos", "events_url": "https://api.github.com/users/ef4/events{/privacy}", "received_events_url": "https://api.github.com/users/ef4/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-01-04T21:54:35Z", "updated_at": "2016-01-16T06:37:02Z", "closed_at": "2016-01-16T06:37:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is a remote memory disclosure vulnerability in ws < 1.0.1\n\nhttps://nodesecurity.io/advisories/67\n\nengine.io currently specifies `\"0.8.1\"` exactly, locking users into vulnerable version.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/373", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/373/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/373/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/373/events", "html_url": "https://github.com/socketio/engine.io/issues/373", "id": 124465249, "node_id": "MDU6SXNzdWUxMjQ0NjUyNDk=", "number": 373, "title": "Upgrade to ws@1.0.0", "user": {"login": "dignifiedquire", "id": 790842, "node_id": "MDQ6VXNlcjc5MDg0Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/790842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dignifiedquire", "html_url": "https://github.com/dignifiedquire", "followers_url": "https://api.github.com/users/dignifiedquire/followers", "following_url": "https://api.github.com/users/dignifiedquire/following{/other_user}", "gists_url": "https://api.github.com/users/dignifiedquire/gists{/gist_id}", "starred_url": "https://api.github.com/users/dignifiedquire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dignifiedquire/subscriptions", "organizations_url": "https://api.github.com/users/dignifiedquire/orgs", "repos_url": "https://api.github.com/users/dignifiedquire/repos", "events_url": "https://api.github.com/users/dignifiedquire/events{/privacy}", "received_events_url": "https://api.github.com/users/dignifiedquire/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-12-31T12:12:42Z", "updated_at": "2016-01-05T20:03:04Z", "closed_at": "2016-01-05T20:03:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Karma really needs this, as the current ws version is broken when used in combination with core-js. See https://github.com/karma-runner/karma/issues/1768#issuecomment-168114290 and https://github.com/websockets/ws/issues/645 for details on the bug and https://github.com/websockets/ws/releases/tag/1.0.0 for details on the release\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/363", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/363/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/363/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/363/events", "html_url": "https://github.com/socketio/engine.io/issues/363", "id": 116698343, "node_id": "MDU6SXNzdWUxMTY2OTgzNDM=", "number": 363, "title": "Client hangs after triggering a `data request overlap from client` error because no response is sent, but the connection remains open", "user": {"login": "posita", "id": 222581, "node_id": "MDQ6VXNlcjIyMjU4MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/222581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/posita", "html_url": "https://github.com/posita", "followers_url": "https://api.github.com/users/posita/followers", "following_url": "https://api.github.com/users/posita/following{/other_user}", "gists_url": "https://api.github.com/users/posita/gists{/gist_id}", "starred_url": "https://api.github.com/users/posita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/posita/subscriptions", "organizations_url": "https://api.github.com/users/posita/orgs", "repos_url": "https://api.github.com/users/posita/repos", "events_url": "https://api.github.com/users/posita/events{/privacy}", "received_events_url": "https://api.github.com/users/posita/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-11-13T04:33:37Z", "updated_at": "2016-01-16T06:44:02Z", "closed_at": "2016-01-16T06:42:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "UPDATE: I believe I have found the cause. See https://github.com/socketio/engine.io/issues/363#issuecomment-156581861 for more details.\n## \n\nI can reliably reproduce deadlocks within Engine.IO when serving multiple concurrent requests on a single session over a UNIX socket. Here's how to run:\n\n``` sh\n% git clone https://github.com/posita/txsocketio.git .../txsocketio\n% (cd .../txsocketio && git co 548e989022b28dc302280940431c000f44b1f58f )\n% ( cd .../txsocketio/integrations/node && npm install )\n...\n```\n\n``` sh\n% # SHELL # 1 - run local Engine.IO instance serving over UNIX domain socket\n% ( cd .../txsocketio/integrations/node && DEBUG=\\* npm start )\n...\n```\n\n``` sh\n% # SHELL # 2 - run tests to connect to local Engine.IO instance\n% ( cd .../txsocketio/integrations/node && TEST_DEADLOCK=1 tox -e py27-twisted_15_4-ssl_yes tests.integration_deadlock )\n...\n```\n\nYou may have to run the tests in SHELL # 2 several times before you observe the deadlock. You'll know you've hit it when the test doesn't resolve within a few seconds.\n\nThis is what the failure looks like:\n\n``` sh\n% # SHELL # 1\n% ( cd .../txsocketio/integrations/node && DEBUG=\\* npm start )\n...\n[20:06:40.446] [LOG]     engine intercepting request for path \"/engine.io/\" +46s\n[20:06:40.446] [LOG]     engine handling \"GET\" http request \"/engine.io/?transport=polling\" +0ms\n[20:06:40.447] [LOG]     engine handshaking client \"2hS896Vuh-koQ3HHAAAE\" +1ms\n[20:06:40.448] [LOG]     engine:socket sending packet \"open\" ({\"sid\":\"2hS896Vuh-koQ3HHAAAE\",\"upgrades\":[\"websocket\"],\"pingInterval\":25000,\"pingTimeout\":60000}) +1ms\n[20:06:40.448] [LOG]     engine:polling setting request +0ms\n[20:06:40.449] [LOG]     engine:socket flushing buffer to transport +1ms\n[20:06:40.449] [LOG]     engine:polling writing \"       \ufffd0{\"sid\":\"2hS896Vuh-koQ3HHAAAE\",\"upgrades\":[\"websocket\"],\"pingInterval\":25000,\"pingTimeout\":60000}\" +0ms\n[20:06:40.451] [LOG]     engine:socket executing batch send callback +2ms\n[20:06:40.452] [LOG]     engine:socket sending packet \"message\" (Hello!) +1ms\n[20:06:40.491] [LOG]     engine intercepting request for path \"/engine.io/\" +39ms\n[20:06:40.491] [LOG]     engine handling \"POST\" http request \"/engine.io/?transport=polling&sid=2hS896Vuh-koQ3HHAAAE\" +0ms\n[20:06:40.491] [LOG]     engine setting new request for existing client +0ms\n[20:06:40.492] [LOG]     engine:polling received \"\ufffd2probe\" +1ms\n[20:06:40.492] [LOG]     engine:socket packet +0ms\n[20:06:40.492] [LOG]     engine:socket got ping +0ms\n[20:06:40.492] [LOG]     engine:socket sending packet \"pong\" (undefined) +0ms\n[20:06:40.493] [LOG]     engine intercepting request for path \"/engine.io/\" +1ms\n[20:06:40.493] [LOG]     engine handling \"POST\" http request \"/engine.io/?transport=polling&sid=2hS896Vuh-koQ3HHAAAE\" +0ms\n[20:06:40.493] [LOG]     engine setting new request for existing client +0ms\n[20:06:40.494] [LOG]     engine intercepting request for path \"/engine.io/\" +1ms\n[20:06:40.494] [LOG]     engine handling \"POST\" http request \"/engine.io/?transport=polling&sid=2hS896Vuh-koQ3HHAAAE\" +0ms\n[20:06:40.494] [LOG]     engine setting new request for existing client +0ms\n[20:06:40.495] [LOG]     engine:socket transport error +0ms\n[20:06:40.497] [LOG]     engine:polling received \"\ufffd2probe\" +3ms\n[20:06:40.497] [LOG]     engine:socket packet received with closed socket +0ms\n...\n```\n\nNote the hung `Deferred` at index 0:\n\n``` sh\n% # SHELL # 2\n% ( cd .../txsocketio/integrations/node && TEST_DEADLOCK=1 tox -e py27-twisted_15_4-ssl_yes tests.integration_deadlock )\n...\n================================================================\n>>> FAIL: at least one of the requests is hung after 100 seconds! <<<\npost_deferreds[0]: <Deferred at 0x102988830 waiting on Deferred at 0x1029a4878>\npost_deferreds[1]: <Deferred at 0x1029a4560 current result: <twisted.web._newclient.Response object at 0x10297fc90>>\npost_deferreds[2]: <Deferred at 0x1029bccb0 current result: <twisted.web._newclient.Response object at 0x1028f4310>>\n================================================================\n...\n```\n\nCompare that to what happens when everything occasionally works as expected:\n\n``` sh\n% # SHELL # 1\n% ( cd .../txsocketio/integrations/node && DEBUG=\\* npm start )\n...\n[19:59:32.080] [LOG]     engine intercepting request for path \"/engine.io/\" +0ms\n[19:59:32.084] [LOG]     engine handling \"GET\" http request \"/engine.io/?transport=polling\" +6ms\n[19:59:32.088] [LOG]     engine handshaking client \"G4Db-G6cmltuPbeYAAAA\" +4ms\n[19:59:32.090] [LOG]     engine:socket sending packet \"open\" ({\"sid\":\"G4Db-G6cmltuPbeYAAAA\",\"upgrades\":[\"websocket\"],\"pingInterval\":25000,\"pingTimeout\":60000}) +2ms\n[19:59:32.091] [LOG]     engine:polling setting request +1ms\n[19:59:32.092] [LOG]     engine:socket flushing buffer to transport +1ms\n[19:59:32.094] [LOG]     engine:polling writing \"       \ufffd0{\"sid\":\"G4Db-G6cmltuPbeYAAAA\",\"upgrades\":[\"websocket\"],\"pingInterval\":25000,\"pingTimeout\":60000}\" +2ms\n[19:59:32.100] [LOG]     engine:socket executing batch send callback +6ms\n[19:59:32.101] [LOG]     engine:socket sending packet \"message\" (Hello!) +1ms\n[19:59:32.153] [LOG]     engine intercepting request for path \"/engine.io/\" +52ms\n[19:59:32.154] [LOG]     engine handling \"POST\" http request \"/engine.io/?transport=polling&sid=G4Db-G6cmltuPbeYAAAA\" +1ms\n[19:59:32.155] [LOG]     engine setting new request for existing client +1ms\n[19:59:32.156] [LOG]     engine:polling received \"\ufffd2probe\" +1ms\n[19:59:32.158] [LOG]     engine:socket packet +2ms\n[19:59:32.159] [LOG]     engine:socket got ping +0ms\n[19:59:32.159] [LOG]     engine:socket sending packet \"pong\" (undefined) +1ms\n[19:59:32.161] [LOG]     engine intercepting request for path \"/engine.io/\" +2ms\n[19:59:32.161] [LOG]     engine handling \"POST\" http request \"/engine.io/?transport=polling&sid=G4Db-G6cmltuPbeYAAAA\" +0ms\n[19:59:32.162] [LOG]     engine setting new request for existing client +1ms\n[19:59:32.162] [LOG]     engine:polling received \"\ufffd2probe\" +0ms\n[19:59:32.163] [LOG]     engine:socket packet +1ms\n[19:59:32.163] [LOG]     engine:socket got ping +0ms\n[19:59:32.164] [LOG]     engine:socket sending packet \"pong\" (undefined) +1ms\n[19:59:32.164] [LOG]     engine intercepting request for path \"/engine.io/\" +0ms\n[19:59:32.164] [LOG]     engine handling \"POST\" http request \"/engine.io/?transport=polling&sid=G4Db-G6cmltuPbeYAAAA\" +0ms\n[19:59:32.165] [LOG]     engine setting new request for existing client +1ms\n[19:59:32.165] [LOG]     engine:polling received \"\ufffd2probe\" +0ms\n[19:59:32.166] [LOG]     engine:socket packet +1ms\n[19:59:32.166] [LOG]     engine:socket got ping +0ms\n[19:59:32.166] [LOG]     engine:socket sending packet \"pong\" (undefined) +0ms\n```\n\n``` sh\n% # SHELL # 2\n% ( cd .../txsocketio/integrations/node && TEST_DEADLOCK=1 tox -e py27-twisted_15_4-ssl_yes tests.integration_deadlock )\n...\n================================================================\nAll requests resolved\npost_deferreds[0]: <Deferred at 0x10b000830 current result: <twisted.web._newclient.Response object at 0x10b0168d0>>\npost_deferreds[1]: <Deferred at 0x10b01a560 current result: <twisted.web._newclient.Response object at 0x10b004450>>\npost_deferreds[2]: <Deferred at 0x10b033cb0 current result: <twisted.web._newclient.Response object at 0x10b016ad0>>\n================================================================\n...\n```\n\nI noticed this while working on my own client code (which is why the [test uses Twisted python](https://github.com/posita/txsocketio/blob/548e989022b28dc302280940431c000f44b1f58f/tests/integration_deadlock.py)), but the deadlock appears to be on the server side. Note that in the failing case, the server has log entries for all three `POST`s, but does not respond (and does not send the corresponding `pong` packets) for all three. ~~I'm guessing one could (easily?) rewrite the tests using [`engine.io-client`](https://github.com/socketio/engine.io-client/) and likely achieve the same result (but see below).~~ UPDATE: Without substantial tinkering, I'm not sure how one would implement this test using the `engine.io-client`, since it appears to be implemented solely in terms of IP connections rather than basic sockets. (Unless I'm missing something?)\n\nThe [server instance](https://github.com/posita/txsocketio/blob/548e989022b28dc302280940431c000f44b1f58f/integrations/node/server.js) used in the test is stupid simple. It is essentially:\n\n``` js\nvar http = require('http');\nvar path = require('path');\nvar engine_io = require('engine.io');\nrequire('console-stamp')(console, { pattern: 'HH:MM:ss.l' });\nvar app = http.createServer();\n\nprocess.on('SIGINT', function () {\n    app.close();\n    process.exit();\n});\n\nvar eio = engine_io(app);\nvar sock_path = path.join(__dirname, 'http.sock');\napp.listen(sock_path);\n```\n\n(I've actually reduced the code to the exactly the above, and am still able to reproduce the issue.)\n\nAlso, this _isn't_ dependent on sending `ping` packets packets. If one changes the packet data sent from the client from `b'\\x00\\x06\\xff2probe'` to (e.g.) `b'\\x00\\x06\\xff4abcde'`, the deadlock will still (often) occur.\n\nIn the interest of some isolation, I attempted to reproduce the issue using `curl` from the command line, but am as-of-yet unsuccessful in triggering the deadlock using something like the following:\n\n``` sh\n(\n    echo -n $'\\x00\\x06\\xff2probe' >|data.bin\n    for (( i=0; i < 10; ++i )) ; do\n        (\n            sid=\"$( python -c 'import sys, urllib ; print(urllib.urlencode({ \"sid\": sys.argv[1].strip() }))' \"$( curl --max-time 1 --verbose --unix-socket ./integrations/node/http.sock 'http:/engine.io/?transport=polling' 2>&1 | grep '^< Set-Cookie: io=' | sed '-es%^.*: io=%%' )\" )\"\n            f() { curl --data-binary \\@data.bin --header 'Content-Type: application/octet-stream' --max-time 10 --request POST --unix-socket ./integrations/node/http.sock \"http:/engine.io/?transport=polling&${sid}\" || echo '>>>>>>>> TIMED OUT! <<<<<<<<' }\n            f & f & f & f & f &\n        ) &\n        sleep 1\n    done\n    sleep 10\n    rm -f data.bin\n)\n```\n\n~~I suspect this is because the average interval between `POST`s is substantially larger when coming from my command line script (typically > 10 ms) versus those from my Twisted python test (typically around 1-3 ms).~~ UPDATE: this isn't _quite_ true. Once the loop gets going, I've observed split times on par with my Twisted version, but on average they are still higher. One difference might be that all connections (while separate) are coming from the same process in the Twisted version, whereas they are all different `curl` processes in the shell version? Another difference might be the time between the `GET` method to acquire the session ID and the first `POST`? UPDATE to the UPDATE: If I [create a delay of 10 ms](https://github.com/posita/txsocketio/blob/548e989022b28dc302280940431c000f44b1f58f/tests/integration_deadlock.py#L111) between requests from within my Twisted version, I don't get any deadlocks on my machine.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/362", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/362/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/362/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/362/events", "html_url": "https://github.com/socketio/engine.io/issues/362", "id": 113341953, "node_id": "MDU6SXNzdWUxMTMzNDE5NTM=", "number": 362, "title": "What time do you release a new version from master branch?", "user": {"login": "zensh", "id": 863754, "node_id": "MDQ6VXNlcjg2Mzc1NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/863754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zensh", "html_url": "https://github.com/zensh", "followers_url": "https://api.github.com/users/zensh/followers", "following_url": "https://api.github.com/users/zensh/following{/other_user}", "gists_url": "https://api.github.com/users/zensh/gists{/gist_id}", "starred_url": "https://api.github.com/users/zensh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zensh/subscriptions", "organizations_url": "https://api.github.com/users/zensh/orgs", "repos_url": "https://api.github.com/users/zensh/repos", "events_url": "https://api.github.com/users/zensh/events{/privacy}", "received_events_url": "https://api.github.com/users/zensh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-10-26T12:09:21Z", "updated_at": "2016-01-11T01:30:45Z", "closed_at": "2015-12-07T09:26:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am waiting the new version.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/361", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/361/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/361/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/361/events", "html_url": "https://github.com/socketio/engine.io/issues/361", "id": 113300402, "node_id": "MDU6SXNzdWUxMTMzMDA0MDI=", "number": 361, "title": "Memory is not released in Ubuntu", "user": {"login": "Anson2048", "id": 10365431, "node_id": "MDQ6VXNlcjEwMzY1NDMx", "avatar_url": "https://avatars3.githubusercontent.com/u/10365431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anson2048", "html_url": "https://github.com/Anson2048", "followers_url": "https://api.github.com/users/Anson2048/followers", "following_url": "https://api.github.com/users/Anson2048/following{/other_user}", "gists_url": "https://api.github.com/users/Anson2048/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anson2048/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anson2048/subscriptions", "organizations_url": "https://api.github.com/users/Anson2048/orgs", "repos_url": "https://api.github.com/users/Anson2048/repos", "events_url": "https://api.github.com/users/Anson2048/events{/privacy}", "received_events_url": "https://api.github.com/users/Anson2048/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-10-26T07:36:26Z", "updated_at": "2015-11-09T00:40:10Z", "closed_at": "2015-11-09T00:40:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have written a simple test\u3002Are as follows\n# server\n\n``` coffee\n'use strict'\n\nhttp = require 'http'\nengine = require 'engine.io'\nlogger = require('log4js').getLogger 'server ' + process.pid\n\nshowMem = ->\n  mem = process.memoryUsage()\n\n  for k, v of mem\n    mem[k] = (v/1024/1024).toFixed(2)\n\n  logger.info \"mem: #{JSON.stringify(mem)}\"\n\nhttpServer = http.createServer().listen 3000\n\nengineServer = new engine.Server()\n\nengineServer.attach httpServer\n\nsetInterval ->\n  showMem()\n, 1000 * 10\n\nshowMem()\nengineServer.on 'connection', (socket) ->\n  logger.info \"clientCount: #{engineServer.clientsCount}\"\n  showMem()\n  socket.on 'close', ->\n    logger.info \"clientCount: #{engineServer.clientsCount}\"\n    showMem()\n\n```\n# client\n\n``` coffee\n'use strict'\n\nasync = require 'async'\n\nclientsCount = 3000\nlimit = 10\n\nsockets = []\n\noptions =\n  transports: ['websocket']\n\npollingOptions =\n  transports: ['polling']\n\nasync.timesLimit clientsCount, limit, (index, next) ->\n  socket = require('engine.io-client')('ws://localhost:3000', pollingOptions)\n\n  socket.on 'open', ->\n    console.log 'open' + index\n    sockets.push socket\n\n    socket.on 'message', (data) ->\n      console.log 'message', data\n\n    next()\n, (err) ->\n  setTimeout ->\n    socket.close() for socket in sockets\n  , 1000\n```\n\n---\n\nWhen a connection is disconnected memory will not be released,  but if manually invoke GC or in OSX doesn't have this problem. Had anyone encountered a similar problem.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/360", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/360/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/360/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/360/events", "html_url": "https://github.com/socketio/engine.io/issues/360", "id": 112275155, "node_id": "MDU6SXNzdWUxMTIyNzUxNTU=", "number": 360, "title": "Why \"Normalize\" path?", "user": {"login": "JohnBaileyN", "id": 10504132, "node_id": "MDQ6VXNlcjEwNTA0MTMy", "avatar_url": "https://avatars3.githubusercontent.com/u/10504132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnBaileyN", "html_url": "https://github.com/JohnBaileyN", "followers_url": "https://api.github.com/users/JohnBaileyN/followers", "following_url": "https://api.github.com/users/JohnBaileyN/following{/other_user}", "gists_url": "https://api.github.com/users/JohnBaileyN/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnBaileyN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnBaileyN/subscriptions", "organizations_url": "https://api.github.com/users/JohnBaileyN/orgs", "repos_url": "https://api.github.com/users/JohnBaileyN/repos", "events_url": "https://api.github.com/users/JohnBaileyN/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnBaileyN/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-20T02:50:36Z", "updated_at": "2017-11-22T21:08:44Z", "closed_at": "2017-11-22T21:08:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Without getting into the details of my project's infrastructure, we have an issue with Engine.io's server.js _normalization_ of `path` option. \n\nWhat is really happening is that we are putting \n\n`\n{path:  \"/ws\"}\n`\n\nHowever, due to the _normalizing_ of the path property, it ends up listening on `/ws/`\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/359", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/359/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/359/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/359/events", "html_url": "https://github.com/socketio/engine.io/issues/359", "id": 111366172, "node_id": "MDU6SXNzdWUxMTEzNjYxNzI=", "number": 359, "title": "Koa framework support?", "user": {"login": "ilearnio", "id": 14331216, "node_id": "MDQ6VXNlcjE0MzMxMjE2", "avatar_url": "https://avatars1.githubusercontent.com/u/14331216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilearnio", "html_url": "https://github.com/ilearnio", "followers_url": "https://api.github.com/users/ilearnio/followers", "following_url": "https://api.github.com/users/ilearnio/following{/other_user}", "gists_url": "https://api.github.com/users/ilearnio/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilearnio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilearnio/subscriptions", "organizations_url": "https://api.github.com/users/ilearnio/orgs", "repos_url": "https://api.github.com/users/ilearnio/repos", "events_url": "https://api.github.com/users/ilearnio/events{/privacy}", "received_events_url": "https://api.github.com/users/ilearnio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-14T10:11:39Z", "updated_at": "2015-10-14T11:42:17Z", "closed_at": "2015-10-14T11:42:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm trying to connect Engine.io over Primus to Koa framework, which seems pretty similar to Express, but something was giving me an error. I tried to figure out what exactly was causing it, and it turns out that it was Engine.io. In the browser it gives\n\n```\nWebSocket connection to 'ws://localhost:3000/primus/?_primuscb=L1bdrMr' failed: Connection closed before receiving a handshake response\n```\n\nAnd on the server:\n\n```\nunknown transport \"undefined\"\n\nTrace\n    at Server.verify (/Users/Admin/Code/www/app/node_modules/engine.io/lib/server.js:108:11)\n    at Server.handleUpgrade (/Users/Admin/Code/www/app/node_modules/engine.io/lib/server.js:276:8)\n    at child.upgrade (/Users/Admin/Code/www/app/node_modules/primus/transformers/engine.io/server.js:52:18)\n    at child.emit (/Users/Admin/Code/www/app/node_modules/eventemitter3/index.js:91:35)\n    at emitter (/Users/Admin/Code/www/app/node_modules/emits/index.js:26:22)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:125:24)\n    at done (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:139:7)\n    at Primus.client (/Users/Admin/Code/www/app/node_modules/primus/middleware/authorization.js:19:49)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:136:14)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:126:60)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:126:60)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:126:60)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:126:60)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:126:60)\n    at iterate (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:132:14)\n    at child.forEach (/Users/Admin/Code/www/app/node_modules/primus/transformer.js:141:4)\n```\n\nAny plans to add support for Koa? Thanks\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/358", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/358/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/358/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/358/events", "html_url": "https://github.com/socketio/engine.io/issues/358", "id": 111336660, "node_id": "MDU6SXNzdWUxMTEzMzY2NjA=", "number": 358, "title": "iOS client", "user": {"login": "zhangxiaolian1991", "id": 5828610, "node_id": "MDQ6VXNlcjU4Mjg2MTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/5828610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangxiaolian1991", "html_url": "https://github.com/zhangxiaolian1991", "followers_url": "https://api.github.com/users/zhangxiaolian1991/followers", "following_url": "https://api.github.com/users/zhangxiaolian1991/following{/other_user}", "gists_url": "https://api.github.com/users/zhangxiaolian1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangxiaolian1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangxiaolian1991/subscriptions", "organizations_url": "https://api.github.com/users/zhangxiaolian1991/orgs", "repos_url": "https://api.github.com/users/zhangxiaolian1991/repos", "events_url": "https://api.github.com/users/zhangxiaolian1991/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangxiaolian1991/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-14T06:55:57Z", "updated_at": "2016-03-22T11:57:41Z", "closed_at": "2015-11-18T14:45:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there any iOS client? My situation is that Server is engine.io(webSocket). I can not find any iOS client to use\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/357", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/357/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/357/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/357/events", "html_url": "https://github.com/socketio/engine.io/issues/357", "id": 110908708, "node_id": "MDU6SXNzdWUxMTA5MDg3MDg=", "number": 357, "title": "Allow disabling deflate for ws", "user": {"login": "calzoneman", "id": 385672, "node_id": "MDQ6VXNlcjM4NTY3Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/385672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calzoneman", "html_url": "https://github.com/calzoneman", "followers_url": "https://api.github.com/users/calzoneman/followers", "following_url": "https://api.github.com/users/calzoneman/following{/other_user}", "gists_url": "https://api.github.com/users/calzoneman/gists{/gist_id}", "starred_url": "https://api.github.com/users/calzoneman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calzoneman/subscriptions", "organizations_url": "https://api.github.com/users/calzoneman/orgs", "repos_url": "https://api.github.com/users/calzoneman/repos", "events_url": "https://api.github.com/users/calzoneman/events{/privacy}", "received_events_url": "https://api.github.com/users/calzoneman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-10-12T04:51:50Z", "updated_at": "2016-01-16T06:45:57Z", "closed_at": "2016-01-16T06:45:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nI noticed some performance issues on my socket.io server, and tracked it down to the fact that the `ws` module enables per-message zlib deflation by default.  This is nice if you're sending very large frames at a relatively slow rate, but for sending lots of very small messages it places unnecessary strain on the CPU and limits the number of frames socket.io can emit per second.\n\nTo benchmark this, I set up a socket.io server locally that just accepts messages from clients and broadcasts them.  I connected 100 clients and had each client send a message on a given interval.  Each message has a unique ID that the client uses to track the round trip time between sending the message and receiving it back.  I tuned the interval until I observed that the round trip time increases steadily, meaning that the socket.io server is backlogged and cannot recover until the message rate drops enough for it to drain.  I measured the number of \"frames per second\" (messages broadcast per second \\* number of clients) that socket.io was sending at this threshold.\n\nOn my desktop (i7-2600k @ 3.4GHz) using stock socket.io, I was able to reach about 8-9,000 frames/sec before socket.io became backlogged.  I then modified socket.io's engine.io dependency to pass `perMessageDeflate: false` to the `ws.Server` constructor, and observed that I was able to reach 50,000+ frames/sec-- a 5-6x increase in throughput.\n\nIt looks like @nkzawa added this option in a commit from January which has not landed in the release of engine.io: https://github.com/socketio/engine.io/commit/d11e17c8d7c09b9f0dbc4b0df72c6f6914aa68bc\n\nAre there any plans to add this option any time soon?  For now I am manually patching engine.io on my servers since it is better for my application.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/356", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/356/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/356/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/356/events", "html_url": "https://github.com/socketio/engine.io/issues/356", "id": 110469532, "node_id": "MDU6SXNzdWUxMTA0Njk1MzI=", "number": 356, "title": "Object has no method 'copy' (Buffer API change in Node v4)", "user": {"login": "STRML", "id": 1197375, "node_id": "MDQ6VXNlcjExOTczNzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1197375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/STRML", "html_url": "https://github.com/STRML", "followers_url": "https://api.github.com/users/STRML/followers", "following_url": "https://api.github.com/users/STRML/following{/other_user}", "gists_url": "https://api.github.com/users/STRML/gists{/gist_id}", "starred_url": "https://api.github.com/users/STRML/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/STRML/subscriptions", "organizations_url": "https://api.github.com/users/STRML/orgs", "repos_url": "https://api.github.com/users/STRML/repos", "events_url": "https://api.github.com/users/STRML/events{/privacy}", "received_events_url": "https://api.github.com/users/STRML/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2015-10-08T14:54:54Z", "updated_at": "2016-10-25T00:33:36Z", "closed_at": "2016-10-25T00:33:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nbuffer.js:499\n    buf.copy(buffer, pos);\n        ^\nTypeError: Object  has no method 'copy'\n  at Function.Buffer.concat (buffer.js:499:9)\n  at IncomingMessage.onData (/dev/node_modules/engine.io/lib/transports/polling.js:147:23)\n  at IncomingMessage.EventEmitter.emit (events.js:95:17)\n  at IncomingMessage.<anonymous> (_stream_readable.js:746:14)\n  at IncomingMessage.EventEmitter.emit (events.js:92:17)\n  at emitDataEvents (_stream_readable.js:771:10)\n  at IncomingMessage.Readable.on (_stream_readable.js:692:5)\n  at XHR.Polling.onDataRequest (/dev/node_modules/engine.io/lib/transports/polling.js:171:7)\n  at XHR.Polling.onRequest (/dev/node_modules/engine.io/lib/transports/polling.js:55:10)\n  at XHR.onRequest (/dev/node_modules/engine.io/lib/transports/polling-xhr.js:47:33)\n  at /dev/node_modules/engine.io/lib/server.js:178:46\n  at Server.verify (/dev/node_modules/engine.io/lib/server.js:126:3)\n  at Server.handleRequest (/dev/node_modules/engine.io/lib/server.js:170:8)\n  at [object Object].request (/dev/node_modules/primus/transformers/engine.io/server.js:59:18)\n  at [object Object].emit (/dev/node_modules/primus/node_modules/eventemitter3/index.js:53:12)\n  at emit (/dev/node_modules/primus/node_modules/fusing/index.js:131:24)\n  at iterate (/dev/node_modules/primus/transformer.js:120:24)\n  at done (/dev/node_modules/primus/transformer.js:142:7)\n```\n\nThis has cropped back up with Node v4 as documented in this Primus ticket: https://github.com/primus/primus/issues/196#issuecomment-146569882\n\nI'm going to try to investigate where this is happening: please see [this comment](https://github.com/nodejs/node/issues/3025#issuecomment-142991417) for more information about the Buffer change in core.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/355", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/355/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/355/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/355/events", "html_url": "https://github.com/socketio/engine.io/issues/355", "id": 108716384, "node_id": "MDU6SXNzdWUxMDg3MTYzODQ=", "number": 355, "title": "Errors when installing engine.io on Travis using Node v4", "user": {"login": "alexgibson", "id": 400117, "node_id": "MDQ6VXNlcjQwMDExNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/400117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexgibson", "html_url": "https://github.com/alexgibson", "followers_url": "https://api.github.com/users/alexgibson/followers", "following_url": "https://api.github.com/users/alexgibson/following{/other_user}", "gists_url": "https://api.github.com/users/alexgibson/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexgibson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexgibson/subscriptions", "organizations_url": "https://api.github.com/users/alexgibson/orgs", "repos_url": "https://api.github.com/users/alexgibson/repos", "events_url": "https://api.github.com/users/alexgibson/events{/privacy}", "received_events_url": "https://api.github.com/users/alexgibson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-09-28T18:13:10Z", "updated_at": "2016-01-16T06:58:26Z", "closed_at": "2016-01-16T06:58:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\n$ npm install \n\n> bufferutil@1.2.1 install /home/travis/build/socketio/engine.io/node_modules/ws/node_modules/bufferutil\n\n> node-gyp rebuild\n\nmake: Entering directory `/home/travis/build/socketio/engine.io/node_modules/ws/node_modules/bufferutil/build'\n\n  CXX(target) Release/obj.target/bufferutil/src/bufferutil.o\n\nIn file included from ../src/bufferutil.cc:7:0:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:336:1: error: expected unqualified-id before \u2018using\u2019\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:469:1: error: expected unqualified-id before \u2018using\u2019\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:852:1: error: expected unqualified-id before \u2018using\u2019\n\nIn file included from ../node_modules/nan/nan.h:182:0,\n\n                 from ../src/bufferutil.cc:16:\n\n../node_modules/nan/nan_maybe_43_inl.h:13:1: error: expected unqualified-id before \u2018using\u2019\n\n../node_modules/nan/nan_maybe_43_inl.h:16:1: error: expected unqualified-id before \u2018using\u2019\n\n../node_modules/nan/nan_maybe_43_inl.h:19:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:24:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:31:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:36:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:41:1: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:46:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:51:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:60:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:65:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:70:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:77:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:84:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:92:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:99:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:109:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:115:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:119:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:126:1: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:131:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:136:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:140:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:146:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:151:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:157:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:163:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:169:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:175:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:181:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:187:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:195:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:202:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:206:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:210:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:214:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:218:12: error: \u2018MaybeLocal\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan.h:187:0,\n\n                 from ../src/bufferutil.cc:16:\n\n../node_modules/nan/nan_converters.h:14:11: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:16:56: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:26:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:27:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:28:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:29:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:30:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:31:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:32:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:42:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:43:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:44:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:45:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:46:1: error: \u2018return_t\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan_converters.h:59:0,\n\n                 from ../node_modules/nan/nan.h:187,\n\n                 from ../src/bufferutil.cc:16:\n\n../node_modules/nan/nan_converters_43_inl.h:18:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Boolean>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:19:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Number>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:20:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:21:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Object>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:22:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Integer>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:23:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Uint32>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:24:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Int32>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:34:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<bool>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:35:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<double>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:36:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<long int>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:37:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<unsigned int>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:38:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<int>\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan.h:188:0,\n\n                 from ../src/bufferutil.cc:16:\n\n../node_modules/nan/nan_new.h: In function \u2018v8::Local<T> Nan::imp::To(v8::Local<v8::Integer>) [with T = v8::Integer]\u2019:\n\n../node_modules/nan/nan_new.h:21:32: error: no matching function for call to \u2018To(v8::Local<v8::Integer>&)\u2019\n\n../node_modules/nan/nan_new.h:21:32: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h: In function \u2018v8::Local<T> Nan::imp::To(v8::Local<v8::Integer>) [with T = v8::Int32]\u2019:\n\n../node_modules/nan/nan_new.h:28:30: error: no matching function for call to \u2018To(v8::Local<v8::Integer>&)\u2019\n\n../node_modules/nan/nan_new.h:28:30: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h: In function \u2018v8::Local<T> Nan::imp::To(v8::Local<v8::Integer>) [with T = v8::Uint32]\u2019:\n\n../node_modules/nan/nan_new.h:35:31: error: no matching function for call to \u2018To(v8::Local<v8::Integer>&)\u2019\n\n../node_modules/nan/nan_new.h:35:31: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h: At global scope:\n\n../node_modules/nan/nan_new.h:43:11: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:75:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:141:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:147:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:148:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:160:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:161:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:162:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:163:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:165:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:166:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:182:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:183:17: error: \u2018return_t\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan_new.h:189:0,\n\n                 from ../node_modules/nan/nan.h:188,\n\n                 from ../src/bufferutil.cc:16:\n\n../node_modules/nan/nan_implementation_12_inl.h:56:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::Date>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h: In static member function \u2018static Nan::imp::FactoryBase<v8::Function>::return_t Nan::imp::Factory<v8::Function>::New(Nan::FunctionCallback, v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan_implementation_12_inl.h:90:46: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan_implementation_12_inl.h: In static member function \u2018static Nan::imp::FactoryBase<v8::FunctionTemplate>::return_t Nan::imp::Factory<v8::FunctionTemplate>::New(Nan::FunctionCallback, v8::Local<v8::Value>, v8::Local<v8::Signature>)\u2019:\n\n../node_modules/nan/nan_implementation_12_inl.h:118:48: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan_implementation_12_inl.h: At global scope:\n\n../node_modules/nan/nan_implementation_12_inl.h:197:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::RegExp>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:216:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::Script>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:222:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::Script>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:254:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:262:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:268:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:275:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:281:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:286:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:347:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::UnboundScript>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:354:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::UnboundScript>\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan.h:188:0,\n\n                 from ../src/bufferutil.cc:16:\n\n../node_modules/nan/nan_new.h:291:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:297:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:303:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:309:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:315:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:321:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:327:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::RegExp>\u2019 does not name a type\n\nIn file included from ../src/bufferutil.cc:16:0:\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::Error(const char*)\u2019:\n\n../node_modules/nan/nan.h:639:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowError(const char*)\u2019:\n\n../node_modules/nan/nan.h:639:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::RangeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:640:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowRangeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:640:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::ReferenceError(const char*)\u2019:\n\n../node_modules/nan/nan.h:641:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowReferenceError(const char*)\u2019:\n\n../node_modules/nan/nan.h:641:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::SyntaxError(const char*)\u2019:\n\n../node_modules/nan/nan.h:642:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowSyntaxError(const char*)\u2019:\n\n../node_modules/nan/nan.h:642:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::TypeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:643:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowTypeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:643:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: At global scope:\n\n../node_modules/nan/nan.h:651:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:673:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:689:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:702:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:719:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:725:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:733:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:740:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:746:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::Callback::SetFunction(const v8::Local<v8::Function>&)\u2019:\n\n../node_modules/nan/nan.h:1366:40: error: \u2018Set\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:1366:40: note: suggested alternative:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::AsyncWorker::SaveToPersistent(const char*, const v8::Local<v8::Value>&)\u2019:\n\n../node_modules/nan/nan.h:1488:41: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In member function \u2018v8::Local<v8::Value> Nan::AsyncWorker::GetFromPersistent(const char*) const\u2019:\n\n../node_modules/nan/nan.h:1506:45: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In member function \u2018virtual void Nan::AsyncWorker::HandleErrorCallback()\u2019:\n\n../node_modules/nan/nan.h:1540:58: error: no matching function for call to \u2018New(const char*)\u2019\n\n../node_modules/nan/nan.h:1540:58: note: candidates are:\n\n../node_modules/nan/nan_implementation_12_inl.h:390:21: note: template<class T, class M> v8::Local<T> Nan::New(const v8::Persistent<S, M>&)\n\n../node_modules/nan/nan_implementation_12_inl.h:395:21: note: template<class T, class M> v8::Local<T> Nan::New(const Nan::Persistent<T, M>&)\n\n../node_modules/nan/nan_new.h:201:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New()\n\n../node_modules/nan/nan_new.h:207:1: note: template<class T, class A0> typename Nan::imp::Factory<T>::return_t Nan::New(A0)\n\n../node_modules/nan/nan_new.h:213:1: note: template<class T, class A0, class A1> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1)\n\n../node_modules/nan/nan_new.h:219:1: note: template<class T, class A0, class A1, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2)\n\n../node_modules/nan/nan_new.h:225:1: note: template<class T, class A0, class A1, class A2, class A3> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2, A3)\n\n../node_modules/nan/nan_new.h:237:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h:245:1: note: template<class T, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>, A2)\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetMethod(const T&, const char*, Nan::FunctionCallback)\u2019:\n\n../node_modules/nan/nan.h:1829:16: error: there are no arguments to \u2018GetFunction\u2019 that depend on a template parameter, so a declaration of \u2018GetFunction\u2019 must be available [-fpermissive]\n\n../node_modules/nan/nan.h:1829:16: note: (if you use \u2018-fpermissive\u2019, G++ will accept your code, but allowing the use of an undeclared name is deprecated)\n\n../node_modules/nan/nan.h:1830:45: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetPrototypeMethod(v8::Local<v8::FunctionTemplate>, const char*, Nan::FunctionCallback)\u2019:\n\n../node_modules/nan/nan.h:1842:32: error: \u2018GetFunction\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:1843:45: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetAccessor(v8::Local<v8::ObjectTemplate>, v8::Local<v8::String>, Nan::GetterCallback, Nan::SetterCallback, v8::Local<v8::Value>, v8::AccessControl, v8::PropertyAttribute, Nan::imp::Sig)\u2019:\n\n../node_modules/nan/nan.h:1868:47: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h: In function \u2018bool Nan::SetAccessor(v8::Local<v8::Object>, v8::Local<v8::String>, Nan::GetterCallback, Nan::SetterCallback, v8::Local<v8::Value>, v8::AccessControl, v8::PropertyAttribute)\u2019:\n\n../node_modules/nan/nan.h:1911:51: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetNamedPropertyHandler(v8::Local<v8::ObjectTemplate>, Nan::PropertyGetterCallback, Nan::PropertySetterCallback, Nan::PropertyQueryCallback, Nan::PropertyDeleterCallback, Nan::PropertyEnumeratorCallback, v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan.h:1959:47: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetIndexedPropertyHandler(v8::Local<v8::ObjectTemplate>, Nan::IndexGetterCallback, Nan::IndexSetterCallback, Nan::IndexQueryCallback, Nan::IndexDeleterCallback, Nan::IndexEnumeratorCallback, v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan.h:2029:47: error: \u2018NewInstance\u2019 was not declared in this scope\n\nIn file included from ../src/bufferutil.cc:16:0:\n\n../node_modules/nan/nan.h: In function \u2018void Nan::Export(Nan::ADDON_REGISTER_FUNCTION_ARGS_TYPE, const char*, Nan::FunctionCallback)\u2019:\n\n../node_modules/nan/nan.h:2090:35: error: no matching function for call to \u2018New(const char*&)\u2019\n\n../node_modules/nan/nan.h:2090:35: note: candidates are:\n\n../node_modules/nan/nan_implementation_12_inl.h:390:21: note: template<class T, class M> v8::Local<T> Nan::New(const v8::Persistent<S, M>&)\n\n../node_modules/nan/nan_implementation_12_inl.h:395:21: note: template<class T, class M> v8::Local<T> Nan::New(const Nan::Persistent<T, M>&)\n\n../node_modules/nan/nan_new.h:201:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New()\n\n../node_modules/nan/nan_new.h:207:1: note: template<class T, class A0> typename Nan::imp::Factory<T>::return_t Nan::New(A0)\n\n../node_modules/nan/nan_new.h:213:1: note: template<class T, class A0, class A1> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1)\n\n../node_modules/nan/nan_new.h:219:1: note: template<class T, class A0, class A1, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2)\n\n../node_modules/nan/nan_new.h:225:1: note: template<class T, class A0, class A1, class A2, class A3> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2, A3)\n\n../node_modules/nan/nan_new.h:237:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h:245:1: note: template<class T, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>, A2)\n\n../node_modules/nan/nan.h:2091:47: error: \u2018GetFunction\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:2091:65: error: \u2018Set\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:2091:65: note: suggested alternative:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n../node_modules/nan/nan.h: In constructor \u2018Nan::Tap::Tap(v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan.h:2098:30: error: no matching function for call to \u2018To(v8::Local<v8::Value>&)\u2019\n\n../node_modules/nan/nan.h:2098:30: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::Tap::ok(bool, const char*)\u2019:\n\n../node_modules/nan/nan.h:2111:33: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::Tap::pass(const char*)\u2019:\n\n../node_modules/nan/nan.h:2117:30: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../src/bufferutil.cc: At global scope:\n\n../src/bufferutil.cc:25:30: error: \u2018v8::Handle\u2019 has not been declared\n\n../src/bufferutil.cc:25:36: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018<\u2019 token\n\n../src/bufferutil.cc: In static member function \u2018static void BufferUtil::Initialize(int)\u2019:\n\n../src/bufferutil.cc:33:5: error: \u2018Set\u2019 is not a member of \u2018Nan\u2019\n\n../src/bufferutil.cc:33:5: note: suggested alternatives:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n../src/bufferutil.cc:33:14: error: \u2018target\u2019 was not declared in this scope\n\n../src/bufferutil.cc:33:51: error: no matching function for call to \u2018New(const char [11])\u2019\n\n../src/bufferutil.cc:33:51: note: candidates are:\n\n../node_modules/nan/nan_implementation_12_inl.h:390:21: note: template<class T, class M> v8::Local<T> Nan::New(const v8::Persistent<S, M>&)\n\n../node_modules/nan/nan_implementation_12_inl.h:395:21: note: template<class T, class M> v8::Local<T> Nan::New(const Nan::Persistent<T, M>&)\n\n../node_modules/nan/nan_new.h:201:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New()\n\n../node_modules/nan/nan_new.h:207:1: note: template<class T, class A0> typename Nan::imp::Factory<T>::return_t Nan::New(A0)\n\n../node_modules/nan/nan_new.h:213:1: note: template<class T, class A0, class A1> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1)\n\n../node_modules/nan/nan_new.h:219:1: note: template<class T, class A0, class A1, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2)\n\n../node_modules/nan/nan_new.h:225:1: note: template<class T, class A0, class A1, class A2, class A3> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2, A3)\n\n../node_modules/nan/nan_new.h:237:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h:245:1: note: template<class T, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>, A2)\n\n../src/bufferutil.cc: At global scope:\n\n../src/bufferutil.cc:114:12: error: variable or field \u2018init\u2019 declared void\n\n../src/bufferutil.cc:114:12: error: \u2018Handle\u2019 was not declared in this scope\n\n../src/bufferutil.cc:114:25: error: expected primary-expression before \u2018>\u2019 token\n\n../src/bufferutil.cc:114:27: error: \u2018target\u2019 was not declared in this scope\n\n../src/bufferutil.cc:120:1: error: \u2018init\u2019 was not declared in this scope\n\nIn file included from ../src/bufferutil.cc:16:0:\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetMethod(const T&, const char*, Nan::FunctionCallback) [with T = v8::Local<v8::FunctionTemplate>, Nan::FunctionCallback = void (*)(const Nan::FunctionCallbackInfo<v8::Value>&)]\u2019:\n\n../src/bufferutil.cc:30:51:   instantiated from here\n\n../node_modules/nan/nan.h:1829:33: error: \u2018GetFunction\u2019 was not declared in this scope\n\nmake: *** [Release/obj.target/bufferutil/src/bufferutil.o] Error 1\n\nmake: Leaving directory `/home/travis/build/socketio/engine.io/node_modules/ws/node_modules/bufferutil/build'\n\ngyp ERR! build error \n\ngyp ERR! stack Error: `make` failed with exit code: 2\n\ngyp ERR! stack     at ChildProcess.onExit (/home/travis/.nvm/versions/node/v4.0.0/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:270:23)\n\ngyp ERR! stack     at emitTwo (events.js:87:13)\n\ngyp ERR! stack     at ChildProcess.emit (events.js:172:7)\n\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)\n\ngyp ERR! System Linux 2.6.32-042stab108.8\n\ngyp ERR! command \"/home/travis/.nvm/versions/node/v4.0.0/bin/node\" \"/home/travis/.nvm/versions/node/v4.0.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\ngyp ERR! cwd /home/travis/build/socketio/engine.io/node_modules/ws/node_modules/bufferutil\n\ngyp ERR! node -v v4.0.0\n\ngyp ERR! node-gyp -v v3.0.1\n\ngyp ERR! not ok \n\n> utf-8-validate@1.2.1 install /home/travis/build/socketio/engine.io/node_modules/ws/node_modules/utf-8-validate\n\n> node-gyp rebuild\n\nmake: Entering directory `/home/travis/build/socketio/engine.io/node_modules/ws/node_modules/utf-8-validate/build'\n\n  CXX(target) Release/obj.target/validation/src/validation.o\n\nIn file included from ../src/validation.cc:7:0:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:336:1: error: expected unqualified-id before \u2018using\u2019\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:469:1: error: expected unqualified-id before \u2018using\u2019\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:852:1: error: expected unqualified-id before \u2018using\u2019\n\nIn file included from ../node_modules/nan/nan.h:182:0,\n\n                 from ../src/validation.cc:15:\n\n../node_modules/nan/nan_maybe_43_inl.h:13:1: error: expected unqualified-id before \u2018using\u2019\n\n../node_modules/nan/nan_maybe_43_inl.h:16:1: error: expected unqualified-id before \u2018using\u2019\n\n../node_modules/nan/nan_maybe_43_inl.h:19:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:24:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:31:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:36:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:41:1: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:46:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:51:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:60:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:65:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:70:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:77:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:84:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:92:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:99:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:109:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:115:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:119:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:126:1: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:131:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:136:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:140:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:146:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:151:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:157:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:163:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:169:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:175:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:181:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:187:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:195:12: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:202:1: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:206:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:210:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:214:12: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_maybe_43_inl.h:218:12: error: \u2018MaybeLocal\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan.h:187:0,\n\n                 from ../src/validation.cc:15:\n\n../node_modules/nan/nan_converters.h:14:11: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:16:56: error: \u2018Maybe\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:26:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:27:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:28:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:29:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:30:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:31:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:32:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:42:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:43:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:44:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:45:1: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_converters.h:46:1: error: \u2018return_t\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan_converters.h:59:0,\n\n                 from ../node_modules/nan/nan.h:187,\n\n                 from ../src/validation.cc:15:\n\n../node_modules/nan/nan_converters_43_inl.h:18:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Boolean>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:19:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Number>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:20:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:21:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Object>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:22:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Integer>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:23:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Uint32>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:24:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<v8::Int32>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:34:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<bool>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:35:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<double>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:36:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<long int>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:37:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<unsigned int>\u2019 does not name a type\n\n../node_modules/nan/nan_converters_43_inl.h:38:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::ToFactory<int>\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan.h:188:0,\n\n                 from ../src/validation.cc:15:\n\n../node_modules/nan/nan_new.h: In function \u2018v8::Local<T> Nan::imp::To(v8::Local<v8::Integer>) [with T = v8::Integer]\u2019:\n\n../node_modules/nan/nan_new.h:21:32: error: no matching function for call to \u2018To(v8::Local<v8::Integer>&)\u2019\n\n../node_modules/nan/nan_new.h:21:32: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h: In function \u2018v8::Local<T> Nan::imp::To(v8::Local<v8::Integer>) [with T = v8::Int32]\u2019:\n\n../node_modules/nan/nan_new.h:28:30: error: no matching function for call to \u2018To(v8::Local<v8::Integer>&)\u2019\n\n../node_modules/nan/nan_new.h:28:30: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h: In function \u2018v8::Local<T> Nan::imp::To(v8::Local<v8::Integer>) [with T = v8::Uint32]\u2019:\n\n../node_modules/nan/nan_new.h:35:31: error: no matching function for call to \u2018To(v8::Local<v8::Integer>&)\u2019\n\n../node_modules/nan/nan_new.h:35:31: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h: At global scope:\n\n../node_modules/nan/nan_new.h:43:11: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:75:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:141:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:147:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:148:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:160:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:161:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:162:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:163:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:165:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:166:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:182:17: error: \u2018return_t\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:183:17: error: \u2018return_t\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan_new.h:189:0,\n\n                 from ../node_modules/nan/nan.h:188,\n\n                 from ../src/validation.cc:15:\n\n../node_modules/nan/nan_implementation_12_inl.h:56:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::Date>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h: In static member function \u2018static Nan::imp::FactoryBase<v8::Function>::return_t Nan::imp::Factory<v8::Function>::New(Nan::FunctionCallback, v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan_implementation_12_inl.h:90:46: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan_implementation_12_inl.h: In static member function \u2018static Nan::imp::FactoryBase<v8::FunctionTemplate>::return_t Nan::imp::Factory<v8::FunctionTemplate>::New(Nan::FunctionCallback, v8::Local<v8::Value>, v8::Local<v8::Signature>)\u2019:\n\n../node_modules/nan/nan_implementation_12_inl.h:118:48: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan_implementation_12_inl.h: At global scope:\n\n../node_modules/nan/nan_implementation_12_inl.h:197:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::RegExp>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:216:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::Script>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:222:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::Script>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:254:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:262:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:268:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:275:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:281:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:286:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:347:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::UnboundScript>\u2019 does not name a type\n\n../node_modules/nan/nan_implementation_12_inl.h:354:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::UnboundScript>\u2019 does not name a type\n\nIn file included from ../node_modules/nan/nan.h:188:0,\n\n                 from ../src/validation.cc:15:\n\n../node_modules/nan/nan_new.h:291:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:297:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:303:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:309:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:315:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:321:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::String>\u2019 does not name a type\n\n../node_modules/nan/nan_new.h:327:1: error: \u2018return_t\u2019 in \u2018struct Nan::imp::Factory<v8::RegExp>\u2019 does not name a type\n\nIn file included from ../src/validation.cc:15:0:\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::Error(const char*)\u2019:\n\n../node_modules/nan/nan.h:639:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowError(const char*)\u2019:\n\n../node_modules/nan/nan.h:639:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::RangeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:640:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowRangeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:640:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::ReferenceError(const char*)\u2019:\n\n../node_modules/nan/nan.h:641:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowReferenceError(const char*)\u2019:\n\n../node_modules/nan/nan.h:641:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::SyntaxError(const char*)\u2019:\n\n../node_modules/nan/nan.h:642:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowSyntaxError(const char*)\u2019:\n\n../node_modules/nan/nan.h:642:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018v8::Local<v8::Value> Nan::TypeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:643:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::ThrowTypeError(const char*)\u2019:\n\n../node_modules/nan/nan.h:643:3: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: At global scope:\n\n../node_modules/nan/nan.h:651:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:673:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:689:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:702:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:719:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:725:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:733:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:740:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h:746:14: error: \u2018MaybeLocal\u2019 does not name a type\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::Callback::SetFunction(const v8::Local<v8::Function>&)\u2019:\n\n../node_modules/nan/nan.h:1366:40: error: \u2018Set\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:1366:40: note: suggested alternative:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::AsyncWorker::SaveToPersistent(const char*, const v8::Local<v8::Value>&)\u2019:\n\n../node_modules/nan/nan.h:1488:41: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In member function \u2018v8::Local<v8::Value> Nan::AsyncWorker::GetFromPersistent(const char*) const\u2019:\n\n../node_modules/nan/nan.h:1506:45: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In member function \u2018virtual void Nan::AsyncWorker::HandleErrorCallback()\u2019:\n\n../node_modules/nan/nan.h:1540:58: error: no matching function for call to \u2018New(const char*)\u2019\n\n../node_modules/nan/nan.h:1540:58: note: candidates are:\n\n../node_modules/nan/nan_implementation_12_inl.h:390:21: note: template<class T, class M> v8::Local<T> Nan::New(const v8::Persistent<S, M>&)\n\n../node_modules/nan/nan_implementation_12_inl.h:395:21: note: template<class T, class M> v8::Local<T> Nan::New(const Nan::Persistent<T, M>&)\n\n../node_modules/nan/nan_new.h:201:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New()\n\n../node_modules/nan/nan_new.h:207:1: note: template<class T, class A0> typename Nan::imp::Factory<T>::return_t Nan::New(A0)\n\n../node_modules/nan/nan_new.h:213:1: note: template<class T, class A0, class A1> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1)\n\n../node_modules/nan/nan_new.h:219:1: note: template<class T, class A0, class A1, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2)\n\n../node_modules/nan/nan_new.h:225:1: note: template<class T, class A0, class A1, class A2, class A3> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2, A3)\n\n../node_modules/nan/nan_new.h:237:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h:245:1: note: template<class T, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>, A2)\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetMethod(const T&, const char*, Nan::FunctionCallback)\u2019:\n\n../node_modules/nan/nan.h:1829:16: error: there are no arguments to \u2018GetFunction\u2019 that depend on a template parameter, so a declaration of \u2018GetFunction\u2019 must be available [-fpermissive]\n\n../node_modules/nan/nan.h:1829:16: note: (if you use \u2018-fpermissive\u2019, G++ will accept your code, but allowing the use of an undeclared name is deprecated)\n\n../node_modules/nan/nan.h:1830:45: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetPrototypeMethod(v8::Local<v8::FunctionTemplate>, const char*, Nan::FunctionCallback)\u2019:\n\n../node_modules/nan/nan.h:1842:32: error: \u2018GetFunction\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:1843:45: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetAccessor(v8::Local<v8::ObjectTemplate>, v8::Local<v8::String>, Nan::GetterCallback, Nan::SetterCallback, v8::Local<v8::Value>, v8::AccessControl, v8::PropertyAttribute, Nan::imp::Sig)\u2019:\n\n../node_modules/nan/nan.h:1868:47: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h: In function \u2018bool Nan::SetAccessor(v8::Local<v8::Object>, v8::Local<v8::String>, Nan::GetterCallback, Nan::SetterCallback, v8::Local<v8::Value>, v8::AccessControl, v8::PropertyAttribute)\u2019:\n\n../node_modules/nan/nan.h:1911:51: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetNamedPropertyHandler(v8::Local<v8::ObjectTemplate>, Nan::PropertyGetterCallback, Nan::PropertySetterCallback, Nan::PropertyQueryCallback, Nan::PropertyDeleterCallback, Nan::PropertyEnumeratorCallback, v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan.h:1959:47: error: \u2018NewInstance\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetIndexedPropertyHandler(v8::Local<v8::ObjectTemplate>, Nan::IndexGetterCallback, Nan::IndexSetterCallback, Nan::IndexQueryCallback, Nan::IndexDeleterCallback, Nan::IndexEnumeratorCallback, v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan.h:2029:47: error: \u2018NewInstance\u2019 was not declared in this scope\n\nIn file included from ../src/validation.cc:15:0:\n\n../node_modules/nan/nan.h: In function \u2018void Nan::Export(Nan::ADDON_REGISTER_FUNCTION_ARGS_TYPE, const char*, Nan::FunctionCallback)\u2019:\n\n../node_modules/nan/nan.h:2090:35: error: no matching function for call to \u2018New(const char*&)\u2019\n\n../node_modules/nan/nan.h:2090:35: note: candidates are:\n\n../node_modules/nan/nan_implementation_12_inl.h:390:21: note: template<class T, class M> v8::Local<T> Nan::New(const v8::Persistent<S, M>&)\n\n../node_modules/nan/nan_implementation_12_inl.h:395:21: note: template<class T, class M> v8::Local<T> Nan::New(const Nan::Persistent<T, M>&)\n\n../node_modules/nan/nan_new.h:201:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New()\n\n../node_modules/nan/nan_new.h:207:1: note: template<class T, class A0> typename Nan::imp::Factory<T>::return_t Nan::New(A0)\n\n../node_modules/nan/nan_new.h:213:1: note: template<class T, class A0, class A1> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1)\n\n../node_modules/nan/nan_new.h:219:1: note: template<class T, class A0, class A1, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2)\n\n../node_modules/nan/nan_new.h:225:1: note: template<class T, class A0, class A1, class A2, class A3> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2, A3)\n\n../node_modules/nan/nan_new.h:237:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h:245:1: note: template<class T, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>, A2)\n\n../node_modules/nan/nan.h:2091:47: error: \u2018GetFunction\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:2091:65: error: \u2018Set\u2019 was not declared in this scope\n\n../node_modules/nan/nan.h:2091:65: note: suggested alternative:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n../node_modules/nan/nan.h: In constructor \u2018Nan::Tap::Tap(v8::Local<v8::Value>)\u2019:\n\n../node_modules/nan/nan.h:2098:30: error: no matching function for call to \u2018To(v8::Local<v8::Value>&)\u2019\n\n../node_modules/nan/nan.h:2098:30: note: candidate is:\n\n../node_modules/nan/nan_converters.h:53:38: note: template<class T> typename Nan::imp::ToFactory::return_t Nan::To(v8::Local<v8::Value>)\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::Tap::ok(bool, const char*)\u2019:\n\n../node_modules/nan/nan.h:2111:33: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../node_modules/nan/nan.h: In member function \u2018void Nan::Tap::pass(const char*)\u2019:\n\n../node_modules/nan/nan.h:2117:30: error: \u2018Nan::imp::FactoryBase<v8::Boolean>::return_t\u2019 has no member named \u2018ToLocalChecked\u2019\n\n../src/validation.cc: At global scope:\n\n../src/validation.cc:107:30: error: \u2018v8::Handle\u2019 has not been declared\n\n../src/validation.cc:107:36: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018<\u2019 token\n\n../src/validation.cc: In static member function \u2018static void Validation::Initialize(int)\u2019:\n\n../src/validation.cc:113:5: error: \u2018Set\u2019 is not a member of \u2018Nan\u2019\n\n../src/validation.cc:113:5: note: suggested alternatives:\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n/home/travis/.node-gyp/4.0.0/include/node/v8.h:3021:17: note:   \u2018v8::Set\u2019\n\n../src/validation.cc:113:14: error: \u2018target\u2019 was not declared in this scope\n\n../src/validation.cc:113:51: error: no matching function for call to \u2018New(const char [11])\u2019\n\n../src/validation.cc:113:51: note: candidates are:\n\n../node_modules/nan/nan_implementation_12_inl.h:390:21: note: template<class T, class M> v8::Local<T> Nan::New(const v8::Persistent<S, M>&)\n\n../node_modules/nan/nan_implementation_12_inl.h:395:21: note: template<class T, class M> v8::Local<T> Nan::New(const Nan::Persistent<T, M>&)\n\n../node_modules/nan/nan_new.h:201:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New()\n\n../node_modules/nan/nan_new.h:207:1: note: template<class T, class A0> typename Nan::imp::Factory<T>::return_t Nan::New(A0)\n\n../node_modules/nan/nan_new.h:213:1: note: template<class T, class A0, class A1> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1)\n\n../node_modules/nan/nan_new.h:219:1: note: template<class T, class A0, class A1, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2)\n\n../node_modules/nan/nan_new.h:225:1: note: template<class T, class A0, class A1, class A2, class A3> typename Nan::imp::Factory<T>::return_t Nan::New(A0, A1, A2, A3)\n\n../node_modules/nan/nan_new.h:237:1: note: template<class T> typename Nan::imp::Factory::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>)\n\n../node_modules/nan/nan_new.h:245:1: note: template<class T, class A2> typename Nan::imp::Factory<T>::return_t Nan::New(Nan::FunctionCallback, v8::Local<v8::Value>, A2)\n\n../src/validation.cc: At global scope:\n\n../src/validation.cc:141:12: error: variable or field \u2018init\u2019 declared void\n\n../src/validation.cc:141:12: error: \u2018Handle\u2019 was not declared in this scope\n\n../src/validation.cc:141:25: error: expected primary-expression before \u2018>\u2019 token\n\n../src/validation.cc:141:27: error: \u2018target\u2019 was not declared in this scope\n\n../src/validation.cc:147:1: error: \u2018init\u2019 was not declared in this scope\n\nIn file included from ../src/validation.cc:15:0:\n\n../node_modules/nan/nan.h: In function \u2018void Nan::SetMethod(const T&, const char*, Nan::FunctionCallback) [with T = v8::Local<v8::FunctionTemplate>, Nan::FunctionCallback = void (*)(const Nan::FunctionCallbackInfo<v8::Value>&)]\u2019:\n\n../src/validation.cc:112:61:   instantiated from here\n\n../node_modules/nan/nan.h:1829:33: error: \u2018GetFunction\u2019 was not declared in this scope\n\nmake: *** [Release/obj.target/validation/src/validation.o] Error 1\n\nmake: Leaving directory `/home/travis/build/socketio/engine.io/node_modules/ws/node_modules/utf-8-validate/build'\n\ngyp ERR! build error \n\ngyp ERR! stack Error: `make` failed with exit code: 2\n\ngyp ERR! stack     at ChildProcess.onExit (/home/travis/.nvm/versions/node/v4.0.0/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:270:23)\n\ngyp ERR! stack     at emitTwo (events.js:87:13)\n\ngyp ERR! stack     at ChildProcess.emit (events.js:172:7)\n\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)\n\ngyp ERR! System Linux 2.6.32-042stab108.8\n\ngyp ERR! command \"/home/travis/.nvm/versions/node/v4.0.0/bin/node\" \"/home/travis/.nvm/versions/node/v4.0.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\ngyp ERR! cwd /home/travis/build/socketio/engine.io/node_modules/ws/node_modules/utf-8-validate\n\ngyp ERR! node -v v4.0.0\n\ngyp ERR! node-gyp -v v3.0.1\n\ngyp ERR! not ok \n\nnpm WARN optional dep failed, continuing bufferutil@1.2.1\n\nnpm WARN optional dep failed, continuing utf-8-validate@1.2.1\n\nbase64id@0.1.0 node_modules/base64id\n\ns@0.1.1 node_modules/s\n\nexpect.js@0.2.0 node_modules/expect.js\n\ndebug@2.1.3 node_modules/debug\n\n\u2514\u2500\u2500 ms@0.7.0\n\nengine.io-parser@1.2.2 node_modules/engine.io-parser\n\n\u251c\u2500\u2500 arraybuffer.slice@0.0.6\n\n\u251c\u2500\u2500 blob@0.0.4\n\n\u251c\u2500\u2500 after@0.8.1\n\n\u251c\u2500\u2500 base64-arraybuffer@0.1.2\n\n\u251c\u2500\u2500 utf8@2.1.0\n\n\u2514\u2500\u2500 has-binary@0.1.6 (isarray@0.0.1)\n\naccepts@1.1.4 node_modules/accepts\n\n\u251c\u2500\u2500 negotiator@0.4.9\n\n\u2514\u2500\u2500 mime-types@2.0.14 (mime-db@1.12.0)\n\nengine.io-client@1.5.4 node_modules/engine.io-client\n\n\u251c\u2500\u2500 indexof@0.0.1\n\n\u251c\u2500\u2500 component-inherit@0.0.3\n\n\u251c\u2500\u2500 has-cors@1.1.0\n\n\u251c\u2500\u2500 component-emitter@1.1.2\n\n\u251c\u2500\u2500 xmlhttprequest-ssl@1.5.1\n\n\u251c\u2500\u2500 parseqs@0.0.2 (better-assert@1.0.2)\n\n\u251c\u2500\u2500 parsejson@0.0.1 (better-assert@1.0.2)\n\n\u2514\u2500\u2500 parseuri@0.0.4 (better-assert@1.0.2)\n\nsuperagent@0.15.4 node_modules/superagent\n\n\u251c\u2500\u2500 methods@0.0.1\n\n\u251c\u2500\u2500 cookiejar@1.3.0\n\n\u251c\u2500\u2500 debug@0.7.4\n\n\u251c\u2500\u2500 qs@0.6.5\n\n\u251c\u2500\u2500 emitter-component@1.0.0\n\n\u251c\u2500\u2500 mime@1.2.5\n\n\u2514\u2500\u2500 formidable@1.0.14\n\nmocha@1.12.0 node_modules/mocha\n\n\u251c\u2500\u2500 growl@1.7.0\n\n\u251c\u2500\u2500 mkdirp@0.3.5\n\n\u251c\u2500\u2500 commander@0.6.1\n\n\u251c\u2500\u2500 diff@1.0.2\n\n\u251c\u2500\u2500 ms@0.3.0\n\n\u251c\u2500\u2500 jade@0.26.3 (mkdirp@0.3.0)\n\n\u2514\u2500\u2500 glob@3.2.1 (inherits@1.0.2, graceful-fs@1.2.3, minimatch@0.2.14)\n\nws@0.8.0 node_modules/ws\n\n\u251c\u2500\u2500 options@0.0.6\n\n\u2514\u2500\u2500 ultron@1.0.2\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/352", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/352/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/352/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/352/events", "html_url": "https://github.com/socketio/engine.io/issues/352", "id": 107813329, "node_id": "MDU6SXNzdWUxMDc4MTMzMjk=", "number": 352, "title": "\"request overlap\" / \"overlap from client\"", "user": {"login": "contra", "id": 425716, "node_id": "MDQ6VXNlcjQyNTcxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/425716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/contra", "html_url": "https://github.com/contra", "followers_url": "https://api.github.com/users/contra/followers", "following_url": "https://api.github.com/users/contra/following{/other_user}", "gists_url": "https://api.github.com/users/contra/gists{/gist_id}", "starred_url": "https://api.github.com/users/contra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/contra/subscriptions", "organizations_url": "https://api.github.com/users/contra/orgs", "repos_url": "https://api.github.com/users/contra/repos", "events_url": "https://api.github.com/users/contra/events{/privacy}", "received_events_url": "https://api.github.com/users/contra/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-09-22T22:13:37Z", "updated_at": "2016-06-01T07:51:21Z", "closed_at": "2016-01-16T14:53:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/socketio/engine.io/blob/1ecf02e32f05cf118f5506aaf704bb1059560836/lib/transports/polling.js#L76\n\nSockets that are in polling-mode disconnect after 60 seconds and this error is the cause - any ideas?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/342", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/342/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/342/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/342/events", "html_url": "https://github.com/socketio/engine.io/issues/342", "id": 102399124, "node_id": "MDU6SXNzdWUxMDIzOTkxMjQ=", "number": 342, "title": "Please upgrade ws to 0.8 and bump engine.io version", "user": {"login": "CxRes", "id": 2706227, "node_id": "MDQ6VXNlcjI3MDYyMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2706227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CxRes", "html_url": "https://github.com/CxRes", "followers_url": "https://api.github.com/users/CxRes/followers", "following_url": "https://api.github.com/users/CxRes/following{/other_user}", "gists_url": "https://api.github.com/users/CxRes/gists{/gist_id}", "starred_url": "https://api.github.com/users/CxRes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CxRes/subscriptions", "organizations_url": "https://api.github.com/users/CxRes/orgs", "repos_url": "https://api.github.com/users/CxRes/repos", "events_url": "https://api.github.com/users/CxRes/events{/privacy}", "received_events_url": "https://api.github.com/users/CxRes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2015-08-21T15:01:55Z", "updated_at": "2015-09-11T03:27:32Z", "closed_at": "2015-09-11T03:27:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "`ws 0.8` fixes issues with `iojs 3.0.0` (see websockets/ws#555). Please upgrade engine.io to reflect this!  \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/335", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/335/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/335/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/335/events", "html_url": "https://github.com/socketio/engine.io/issues/335", "id": 97053713, "node_id": "MDU6SXNzdWU5NzA1MzcxMw==", "number": 335, "title": "What ports are used?", "user": {"login": "JTallis", "id": 4530100, "node_id": "MDQ6VXNlcjQ1MzAxMDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/4530100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JTallis", "html_url": "https://github.com/JTallis", "followers_url": "https://api.github.com/users/JTallis/followers", "following_url": "https://api.github.com/users/JTallis/following{/other_user}", "gists_url": "https://api.github.com/users/JTallis/gists{/gist_id}", "starred_url": "https://api.github.com/users/JTallis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JTallis/subscriptions", "organizations_url": "https://api.github.com/users/JTallis/orgs", "repos_url": "https://api.github.com/users/JTallis/repos", "events_url": "https://api.github.com/users/JTallis/events{/privacy}", "received_events_url": "https://api.github.com/users/JTallis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-07-24T13:31:36Z", "updated_at": "2015-07-24T22:57:16Z", "closed_at": "2015-07-24T22:57:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Apart from the connection port (8080, in my case), what other ports are used?\n\nI have a firewall in place and will get errors such as `Failed to load resource: net::ERR_CONNECTION_REFUSED` because of a polling request on port 9242.\n\nI don't know if it's a setting I can change or if there is a variety of ports that get used.\n\nThanks.\n\n---\n\nActually this is all because of my bad judgement. It's actually relating to another server running on 9242.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/334", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/334/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/334/events", "html_url": "https://github.com/socketio/engine.io/issues/334", "id": 95553023, "node_id": "MDU6SXNzdWU5NTU1MzAyMw==", "number": 334, "title": "0 length response for initial poll leaves transport in opening state", "user": {"login": "stevedw", "id": 8269604, "node_id": "MDQ6VXNlcjgyNjk2MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8269604?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevedw", "html_url": "https://github.com/stevedw", "followers_url": "https://api.github.com/users/stevedw/followers", "following_url": "https://api.github.com/users/stevedw/following{/other_user}", "gists_url": "https://api.github.com/users/stevedw/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevedw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevedw/subscriptions", "organizations_url": "https://api.github.com/users/stevedw/orgs", "repos_url": "https://api.github.com/users/stevedw/repos", "events_url": "https://api.github.com/users/stevedw/events{/privacy}", "received_events_url": "https://api.github.com/users/stevedw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-07-16T23:33:24Z", "updated_at": "2015-07-16T23:54:19Z", "closed_at": "2015-07-16T23:54:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "when using the client against a non-node server.as a raw transport provider has an issue with 0 length poll reponses.\n\nThe function\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n\nif it receives a 0 length content response for the initial poll does not move the transport to open as buffers.length is always 0 and the callback which moves the state to open is never hit:\n\n   var total = buffers.length;\n  buffers.forEach(function(buffer, i) {  \n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/331", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/331/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/331/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/331/events", "html_url": "https://github.com/socketio/engine.io/issues/331", "id": 79181706, "node_id": "MDU6SXNzdWU3OTE4MTcwNg==", "number": 331, "title": "Allow disabling engine.io from emitting CORS headers", "user": {"login": "buunguyen", "id": 406631, "node_id": "MDQ6VXNlcjQwNjYzMQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/406631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/buunguyen", "html_url": "https://github.com/buunguyen", "followers_url": "https://api.github.com/users/buunguyen/followers", "following_url": "https://api.github.com/users/buunguyen/following{/other_user}", "gists_url": "https://api.github.com/users/buunguyen/gists{/gist_id}", "starred_url": "https://api.github.com/users/buunguyen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/buunguyen/subscriptions", "organizations_url": "https://api.github.com/users/buunguyen/orgs", "repos_url": "https://api.github.com/users/buunguyen/repos", "events_url": "https://api.github.com/users/buunguyen/events{/privacy}", "received_events_url": "https://api.github.com/users/buunguyen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 487551825, "node_id": "MDU6TGFiZWw0ODc1NTE4MjU=", "url": "https://api.github.com/repos/socketio/engine.io/labels/Feature%20request", "name": "Feature request", "color": "0e8a16", "default": false, "description": null}, {"id": 487551848, "node_id": "MDU6TGFiZWw0ODc1NTE4NDg=", "url": "https://api.github.com/repos/socketio/engine.io/labels/PR%20welcome", "name": "PR welcome", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-21T22:12:32Z", "updated_at": "2016-12-13T22:54:46Z", "closed_at": "2016-12-13T22:54:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've deployed a socket.io app behind Nginx, which is configured to emit CORS headers. The problem is socket.io also emits the same headers, which is disallowed by browsers due to [non-duplication rule](http://www.w3.org/TR/cors/).\n\nTo fix this, I moved all CORS handling to the app. This works except when Nginx cannot reach the backend (e.g. server is restarted) and return responses without CORS headers, causing browsers to reject all requests, including the socket.io XHR polling requests. When this happens, the client app cannot see the error status and message returned by Nginx to display proper error messages to users.\n\nIt would be great if there's an option to prevent engine.io from emitting CORS headers.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/329", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/329/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/329/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/329/events", "html_url": "https://github.com/socketio/engine.io/issues/329", "id": 75873383, "node_id": "MDU6SXNzdWU3NTg3MzM4Mw==", "number": 329, "title": "httpCompression shipping plan", "user": {"login": "Constellation", "id": 9023, "node_id": "MDQ6VXNlcjkwMjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/9023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Constellation", "html_url": "https://github.com/Constellation", "followers_url": "https://api.github.com/users/Constellation/followers", "following_url": "https://api.github.com/users/Constellation/following{/other_user}", "gists_url": "https://api.github.com/users/Constellation/gists{/gist_id}", "starred_url": "https://api.github.com/users/Constellation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Constellation/subscriptions", "organizations_url": "https://api.github.com/users/Constellation/orgs", "repos_url": "https://api.github.com/users/Constellation/repos", "events_url": "https://api.github.com/users/Constellation/events{/privacy}", "received_events_url": "https://api.github.com/users/Constellation/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-13T06:56:29Z", "updated_at": "2016-01-16T07:11:28Z", "closed_at": "2016-01-16T07:11:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've seen the option `httpCompression` is documented in README.md.\nHowever it doesn't work in the latest npm package because it is not shipped yet.\n\nDo you have a plan releasing a new version with `httpCompression` support?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/328", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/328/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/328/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/328/events", "html_url": "https://github.com/socketio/engine.io/issues/328", "id": 72993986, "node_id": "MDU6SXNzdWU3Mjk5Mzk4Ng==", "number": 328, "title": "Memory leak!", "user": {"login": "zensh", "id": 863754, "node_id": "MDQ6VXNlcjg2Mzc1NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/863754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zensh", "html_url": "https://github.com/zensh", "followers_url": "https://api.github.com/users/zensh/followers", "following_url": "https://api.github.com/users/zensh/following{/other_user}", "gists_url": "https://api.github.com/users/zensh/gists{/gist_id}", "starred_url": "https://api.github.com/users/zensh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zensh/subscriptions", "organizations_url": "https://api.github.com/users/zensh/orgs", "repos_url": "https://api.github.com/users/zensh/repos", "events_url": "https://api.github.com/users/zensh/events{/privacy}", "received_events_url": "https://api.github.com/users/zensh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-05-04T11:17:52Z", "updated_at": "2015-05-07T12:04:54Z", "closed_at": "2015-05-07T12:04:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here is simple test:\n\nserver.js:\n\n``` js\nvar engine = require('engine.io');\nvar server = engine.listen(8800);\n\nserver.on('connection', function(socket) {\n  console.log('connect:', socket.id, ' total:', server.clientsCount);\n  socket.once('close', function() {\n    console.log('Disconnect:', socket.id, ' total:', server.clientsCount);\n  });\n});\n\n\nfunction stats() {\n  var mem = process.memoryUsage().heapUsed / 1024 / 1024;\n  console.log('clients:', server.clientsCount, 'memory:', mem.toFixed(2), 'M');\n  setTimeout(stats, 3000);\n}\n\nstats();\n```\n\nclient.js:\n\n``` js\nvar engine = require('engine.io-client');\nvar count = 0;\n\nfunction addClient() {\n  var client = new engine('127.0.0.1:8800', {\n    // transports: ['websocket'],\n    rememberUpgrade: true\n  });\n  client\n    .once('open', function() {\n      console.log('client:', count++, client.id);\n      client.close();\n    })\n    .once('close', addClient);\n}\n\naddClient();\n```\n\nHere is memory used after created and closed the 8000 client:\n\n``` sh\nconnect: cDipBmkjl9zhtZYsAB_0  total: 1\nDisconnect: cDipBmkjl9zhtZYsAB_0  total: 0\nconnect: X2hUmjXRA4i4a5a6AB_1  total: 1\nDisconnect: X2hUmjXRA4i4a5a6AB_1  total: 0\nconnect: 4aVLHxLNMIWM5i4pAB_2  total: 1\nDisconnect: 4aVLHxLNMIWM5i4pAB_2  total: 0\nconnect: M4Q8a_xk2JM2T6_qAB_3  total: 1\nDisconnect: M4Q8a_xk2JM2T6_qAB_3  total: 0\nconnect: 145cCzMYDZLE9yyAAB_4  total: 1\nDisconnect: 145cCzMYDZLE9yyAAB_4  total: 0\nconnect: hNgsz8DFBChMshF2AB_5  total: 1\nDisconnect: hNgsz8DFBChMshF2AB_5  total: 0\nconnect: 0bNgaMO-nMr_CtEbAB_6  total: 1\nclients: 1 memory: 58.92 M\nclients: 1 memory: 58.92 M\nclients: 1 memory: 58.92 M\nclients: 1 memory: 58.92 M\nclients: 1 memory: 58.92 M\nclients: 1 memory: 58.93 M\nclients: 1 memory: 58.93 M\nclients: 1 memory: 58.93 M\nclients: 1 memory: 58.93 M\nclients: 1 memory: 58.94 M\nclients: 1 memory: 58.94 M\nclients: 1 memory: 58.94 M\n...\n```\n\nIt seems that memory always increase!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/322", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/322/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/322/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/322/events", "html_url": "https://github.com/socketio/engine.io/issues/322", "id": 70030089, "node_id": "MDU6SXNzdWU3MDAzMDA4OQ==", "number": 322, "title": "package.json different npm != git on version 1.5.1", "user": {"login": "martinoppitz", "id": 6279703, "node_id": "MDQ6VXNlcjYyNzk3MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6279703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinoppitz", "html_url": "https://github.com/martinoppitz", "followers_url": "https://api.github.com/users/martinoppitz/followers", "following_url": "https://api.github.com/users/martinoppitz/following{/other_user}", "gists_url": "https://api.github.com/users/martinoppitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinoppitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinoppitz/subscriptions", "organizations_url": "https://api.github.com/users/martinoppitz/orgs", "repos_url": "https://api.github.com/users/martinoppitz/repos", "events_url": "https://api.github.com/users/martinoppitz/events{/privacy}", "received_events_url": "https://api.github.com/users/martinoppitz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-04-22T05:36:38Z", "updated_at": "2016-01-16T07:14:35Z", "closed_at": "2016-01-16T07:14:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please increment.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/321", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/321/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/321/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/321/events", "html_url": "https://github.com/socketio/engine.io/issues/321", "id": 69052996, "node_id": "MDU6SXNzdWU2OTA1Mjk5Ng==", "number": 321, "title": "TransportError", "user": {"login": "xZGit", "id": 8132329, "node_id": "MDQ6VXNlcjgxMzIzMjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8132329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xZGit", "html_url": "https://github.com/xZGit", "followers_url": "https://api.github.com/users/xZGit/followers", "following_url": "https://api.github.com/users/xZGit/following{/other_user}", "gists_url": "https://api.github.com/users/xZGit/gists{/gist_id}", "starred_url": "https://api.github.com/users/xZGit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xZGit/subscriptions", "organizations_url": "https://api.github.com/users/xZGit/orgs", "repos_url": "https://api.github.com/users/xZGit/repos", "events_url": "https://api.github.com/users/xZGit/events{/privacy}", "received_events_url": "https://api.github.com/users/xZGit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-04-17T03:12:55Z", "updated_at": "2015-11-27T05:57:21Z", "closed_at": "2015-11-27T05:57:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Error: parser decode error {type: \"TransportError\", description: Error: Invalid UTF-8 detected, stack: (...), message: \"parser decode error\"}\ndescription: Error: Invalid UTF-8 detected\ndata: \"42[\"user joined\",{\"user\":{\"name\":\"\u4f60\u597d \u4f60\u53bb\u54ea\u513f\"},\"numUsers\":2}]\"\nmessage: \"Invalid UTF-8 detected\"\nstack: (...)\nget stack: function () { [native code] }\nset stack: function () { [native code] }\n**proto**: d\nmessage: \"parser decode error\"\nstack: (...)\nget stack: function () { [native code] }\nset stack: function () { [native code] }\ntype: \"TransportError\"\n**proto**: d\n\nAs about , when i use socket.io , I always get this error at engine.io version 1.5.1 , but if I use version 1.3.1 \uff0cit works.  what is the  matter?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/320", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/320/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/320/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/320/events", "html_url": "https://github.com/socketio/engine.io/issues/320", "id": 68922949, "node_id": "MDU6SXNzdWU2ODkyMjk0OQ==", "number": 320, "title": "XHR long-polling stuck forever on \"pending\"", "user": {"login": "nolanlawson", "id": 283842, "node_id": "MDQ6VXNlcjI4Mzg0Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/283842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nolanlawson", "html_url": "https://github.com/nolanlawson", "followers_url": "https://api.github.com/users/nolanlawson/followers", "following_url": "https://api.github.com/users/nolanlawson/following{/other_user}", "gists_url": "https://api.github.com/users/nolanlawson/gists{/gist_id}", "starred_url": "https://api.github.com/users/nolanlawson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nolanlawson/subscriptions", "organizations_url": "https://api.github.com/users/nolanlawson/orgs", "repos_url": "https://api.github.com/users/nolanlawson/repos", "events_url": "https://api.github.com/users/nolanlawson/events{/privacy}", "received_events_url": "https://api.github.com/users/nolanlawson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-04-16T13:23:43Z", "updated_at": "2015-04-18T21:53:10Z", "closed_at": "2015-04-18T19:56:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Howdy, I'm trying to write an engine.io-based plugin on top of PouchDB, but I'm running into an error trying to get my tests to pass. I can repro the error in both Firefox (37) and Chrome (42). I'm using Mac OS X Yosemite and Node v0.10.36.\n\nWhen my app falls back to long-polling, it eventually starts failing because the server never sends a response. The `'websocket'` transport works fine; it's just the `'polling'` transport that hangs:\n\n![screenshot 2015-04-16 09 18 13](https://cloud.githubusercontent.com/assets/283842/7181546/999e5aac-e419-11e4-95ce-5d8ce41ab3e0.png)\n\nI have a reproducible test case for this error. To repro, just run:\n\n```\ngit clone https://github.com/nolanlawson/socket-pouch.git --branch repro-bug\ncd socket-pouch\nnpm install && npm run dev\n```\n\n(You will need ports 8080, 8000, and 2020 open.) Then open up this URL in a browser:\n\n```\nhttp://127.0.0.1:8000/test/index.html?grep=test.basics.js-local\n```\n\nNotice that it works for awhile (creating and closing `Socket`s), but then eventually it just stops dead in its tracks. I can refresh the browser and it will start working again (briefly), so I'm guessing this is a client-side issue?\n\nLet me know if I can provide any more info, or if there's a good way to debug this. I don't see any logs on either the server or the client side to give any hint of what's going on. The source code is here: https://github.com/nolanlawson/socket-pouch/tree/repro-bug\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/315", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/315/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/315/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/315/events", "html_url": "https://github.com/socketio/engine.io/issues/315", "id": 61954236, "node_id": "MDU6SXNzdWU2MTk1NDIzNg==", "number": 315, "title": "Double encoding/decoding UTF8", "user": {"login": "calzoneman", "id": 385672, "node_id": "MDQ6VXNlcjM4NTY3Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/385672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calzoneman", "html_url": "https://github.com/calzoneman", "followers_url": "https://api.github.com/users/calzoneman/followers", "following_url": "https://api.github.com/users/calzoneman/following{/other_user}", "gists_url": "https://api.github.com/users/calzoneman/gists{/gist_id}", "starred_url": "https://api.github.com/users/calzoneman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calzoneman/subscriptions", "organizations_url": "https://api.github.com/users/calzoneman/orgs", "repos_url": "https://api.github.com/users/calzoneman/repos", "events_url": "https://api.github.com/users/calzoneman/events{/privacy}", "received_events_url": "https://api.github.com/users/calzoneman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2015-03-16T03:16:50Z", "updated_at": "2016-12-21T08:15:08Z", "closed_at": "2016-12-21T08:15:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "It appears that engine.io is double-decoding (and double-encoding) UTF8 strings for polling clients.  In particular, if polling clients specify any content-type besides `'application/octet-stream'`, engine.io calls `req.setEncoding('utf8')`, the request data is decoded as UTF8, and the resulting string is passed on to engine.io-parser, which then attempts to call `utf8.decode()`.  Since the string has already been decoded from UTF8, this fails*.  This is what I've observed from tinkering with the server side, and from talking to @nuclearace about his issues I suspect messages being sent to polling clients are double-encoded too.\n\nThe following demonstrates the issue (note that I [added a console.log(e) in the exception handler where utf8.decode() is called](https://github.com/Automattic/engine.io-parser/blob/master/lib/index.js#L159)):\n\n```\n> p.decodePayload('20:42[\"stringTest\",\"\u03c0\"]')\n[Error: Invalid continuation byte]\n```\n\nInterestingly, this alternative version works:\n\n```\n> b = new Buffer([0x32,0x31,0x3a,0x34,0x32,0x5b,0x22,0x73,0x74,0x72,0x69,0x6e,0x67,0x54,0x65,0x73,0x74,0x22,0x2c,0x22,0xcf,0x80,0x22,0x5d])\n<Buffer 32 31 3a 34 32 5b 22 73 74 72 69 6e 67 54 65 73 74 22 2c 22 cf 80 22 5d>\n> b.toString()\n'21:42[\"stringTest\",\"\u03c0\"]'\n> p.decodePayload(b.toString('binary'), function (x) { console.log(x) })\n{ type: 'message', data: '2[\"stringTest\",\"\u03c0\"]' }\n```\n\nSo the problem to me seems to be that the parser is expecting a raw string, but since the string is coming from node's HTTP server, it has already been decoded from UTF8, and this should only happen once.\n\n*I assume the client is double encoding, otherwise polling would be completely broken.  This issue affects 3rd-party clients that are single-encoding UTF8 strings.\n\nEDIT: Cleaned up some terminology.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/314", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/314/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/314/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/314/events", "html_url": "https://github.com/socketio/engine.io/issues/314", "id": 60223448, "node_id": "MDU6SXNzdWU2MDIyMzQ0OA==", "number": 314, "title": "Enhance the require('engine.io')(svr, opts) method to recognise an https server", "user": {"login": "mhmeadows63", "id": 6982471, "node_id": "MDQ6VXNlcjY5ODI0NzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6982471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhmeadows63", "html_url": "https://github.com/mhmeadows63", "followers_url": "https://api.github.com/users/mhmeadows63/followers", "following_url": "https://api.github.com/users/mhmeadows63/following{/other_user}", "gists_url": "https://api.github.com/users/mhmeadows63/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhmeadows63/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhmeadows63/subscriptions", "organizations_url": "https://api.github.com/users/mhmeadows63/orgs", "repos_url": "https://api.github.com/users/mhmeadows63/repos", "events_url": "https://api.github.com/users/mhmeadows63/events{/privacy}", "received_events_url": "https://api.github.com/users/mhmeadows63/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-03-07T20:40:08Z", "updated_at": "2016-11-18T00:28:17Z", "closed_at": "2016-11-18T00:28:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "The `require('socket.io')(svr, opts)` method recognises both **http** and **https** server objects for attachment, by testing for the presence of the _listen_ method.\n\nConsistency would be improved if the `require('engine.io')(svr, opts)` method could behave the same.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/313", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/313/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/313/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/313/events", "html_url": "https://github.com/socketio/engine.io/issues/313", "id": 60222616, "node_id": "MDU6SXNzdWU2MDIyMjYxNg==", "number": 313, "title": "Server#attach(server, options) should return Server:object", "user": {"login": "mhmeadows63", "id": 6982471, "node_id": "MDQ6VXNlcjY5ODI0NzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6982471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhmeadows63", "html_url": "https://github.com/mhmeadows63", "followers_url": "https://api.github.com/users/mhmeadows63/followers", "following_url": "https://api.github.com/users/mhmeadows63/following{/other_user}", "gists_url": "https://api.github.com/users/mhmeadows63/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhmeadows63/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhmeadows63/subscriptions", "organizations_url": "https://api.github.com/users/mhmeadows63/orgs", "repos_url": "https://api.github.com/users/mhmeadows63/repos", "events_url": "https://api.github.com/users/mhmeadows63/events{/privacy}", "received_events_url": "https://api.github.com/users/mhmeadows63/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-03-07T20:19:37Z", "updated_at": "2016-01-16T07:09:50Z", "closed_at": "2016-01-16T07:09:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to the README.md, attach() should return the Server object.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/310", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/310/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/310/events", "html_url": "https://github.com/socketio/engine.io/issues/310", "id": 59594278, "node_id": "MDU6SXNzdWU1OTU5NDI3OA==", "number": 310, "title": "Transport is not closed when ping timeout", "user": {"login": "nkzawa", "id": 775227, "node_id": "MDQ6VXNlcjc3NTIyNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/775227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkzawa", "html_url": "https://github.com/nkzawa", "followers_url": "https://api.github.com/users/nkzawa/followers", "following_url": "https://api.github.com/users/nkzawa/following{/other_user}", "gists_url": "https://api.github.com/users/nkzawa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkzawa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkzawa/subscriptions", "organizations_url": "https://api.github.com/users/nkzawa/orgs", "repos_url": "https://api.github.com/users/nkzawa/repos", "events_url": "https://api.github.com/users/nkzawa/events{/privacy}", "received_events_url": "https://api.github.com/users/nkzawa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-03-03T04:38:01Z", "updated_at": "2020-02-13T06:56:15Z", "closed_at": "2020-02-13T06:56:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "reported from @ladymalie, thanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/309", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/309/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/309/events", "html_url": "https://github.com/socketio/engine.io/issues/309", "id": 59027465, "node_id": "MDU6SXNzdWU1OTAyNzQ2NQ==", "number": 309, "title": "How can I send message to all client?", "user": {"login": "katopz", "id": 97060, "node_id": "MDQ6VXNlcjk3MDYw", "avatar_url": "https://avatars1.githubusercontent.com/u/97060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/katopz", "html_url": "https://github.com/katopz", "followers_url": "https://api.github.com/users/katopz/followers", "following_url": "https://api.github.com/users/katopz/following{/other_user}", "gists_url": "https://api.github.com/users/katopz/gists{/gist_id}", "starred_url": "https://api.github.com/users/katopz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/katopz/subscriptions", "organizations_url": "https://api.github.com/users/katopz/orgs", "repos_url": "https://api.github.com/users/katopz/repos", "events_url": "https://api.github.com/users/katopz/events{/privacy}", "received_events_url": "https://api.github.com/users/katopz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-02-26T06:34:30Z", "updated_at": "2015-09-18T13:18:24Z", "closed_at": "2015-03-08T23:30:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "First of all, I'm running socket.io with 2 browser working perfectly\nBut via engine.io only each browser is working separately (they don't see each other)\n\nFrom my understand, I've to call emit to trigger something.\n## server side\n\n``` js\nvar app = require('express')();\nvar http = require('http').Server(app).listen(3000);\nvar io = require('engine.io');\nvar server = io.attach(http);\n\nserver.on('connection', function (socket) {\n    socket.emit('chat message', \"socket.emit\");//not seem to work\n    server.emit('chat message', \"server.emit\");//not seem to work\n    socket.send(msg);//working but only 1 browser that connected to\n});\n```\n## client side\n\n``` js\n  var socket = eio('ws://localhost:3000');\n\n  socket.on('open', function(){\n      console.log(\"open\");\n      $('form').submit(function(){\n        console.log(\"emit:\" + socket);\n        socket.send($('#m').val());\n        $('#m').val('');\n        return false;\n      });\n\n      socket.on('message', function(msg){\n        console.log(\"message:\" + msg);\n        $('#messages').append($('<li>').text(msg)); // working fine\n      });\n\n      socket.on('chat message', function(msg){\n        console.log(\"chat message:\" + msg);\n        $('#messages').append($('<li>*').text(msg)); // never call\n      });\n\n      socket.on('packet', function (packet) {\n        console.log('packet.type: ' + packet.type); // expect 'chat message' but only message,noop,ping,pong and else\n        console.log('packet.data: ' + packet.data);\n      });\n  });\n```\n\nIf it's not \"emit\" it should be \"sendAll\" or something? or maybe I need pub/sub?\n\nThanks\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/308", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/308/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/308/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/308/events", "html_url": "https://github.com/socketio/engine.io/issues/308", "id": 58765130, "node_id": "MDU6SXNzdWU1ODc2NTEzMA==", "number": 308, "title": "upgrade ws package to fix windows installation fails", "user": {"login": "eikaramba", "id": 1320525, "node_id": "MDQ6VXNlcjEzMjA1MjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1320525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eikaramba", "html_url": "https://github.com/eikaramba", "followers_url": "https://api.github.com/users/eikaramba/followers", "following_url": "https://api.github.com/users/eikaramba/following{/other_user}", "gists_url": "https://api.github.com/users/eikaramba/gists{/gist_id}", "starred_url": "https://api.github.com/users/eikaramba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eikaramba/subscriptions", "organizations_url": "https://api.github.com/users/eikaramba/orgs", "repos_url": "https://api.github.com/users/eikaramba/repos", "events_url": "https://api.github.com/users/eikaramba/events{/privacy}", "received_events_url": "https://api.github.com/users/eikaramba/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-02-24T16:40:42Z", "updated_at": "2015-03-30T13:55:58Z", "closed_at": "2015-03-08T23:32:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "see https://github.com/BrowserSync/grunt-browser-sync/issues/95\n\nthe problem is the nan package used by WS. Hopefully i located it right that this package(engine.io) needs to adapt its dependencies.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/307", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/307/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/307/events", "html_url": "https://github.com/socketio/engine.io/issues/307", "id": 58353872, "node_id": "MDU6SXNzdWU1ODM1Mzg3Mg==", "number": 307, "title": "Socket closed with transport error \"Error: not opened\"", "user": {"login": "timjrobinson", "id": 525534, "node_id": "MDQ6VXNlcjUyNTUzNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/525534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timjrobinson", "html_url": "https://github.com/timjrobinson", "followers_url": "https://api.github.com/users/timjrobinson/followers", "following_url": "https://api.github.com/users/timjrobinson/following{/other_user}", "gists_url": "https://api.github.com/users/timjrobinson/gists{/gist_id}", "starred_url": "https://api.github.com/users/timjrobinson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timjrobinson/subscriptions", "organizations_url": "https://api.github.com/users/timjrobinson/orgs", "repos_url": "https://api.github.com/users/timjrobinson/repos", "events_url": "https://api.github.com/users/timjrobinson/events{/privacy}", "received_events_url": "https://api.github.com/users/timjrobinson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-02-20T13:39:22Z", "updated_at": "2016-12-24T10:00:11Z", "closed_at": "2016-10-25T00:42:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently updated my app from engine.io 1.3.3 to 1.5.1 and have started seeing the following error which I haven't seen before. Any ideas what could be causing it:\n\nI got this listening on the \"close\" event for the socket. \n\nReason: transport error\nDescription:\n\n```\nError: not opened\nat WebSocket.send (/home/ubuntu/newclient/node_modules/engine.io/node_modules/ws/lib/WebSocket.js:198:38)\nat /home/ubuntu/newclient/node_modules/engine.io/lib/transports/websocket.js:91:19\nat Object.exports.encodePacket (/home/ubuntu/newclient/node_modules/engine.io/node_modules/engine.io-parser/lib/index.js:81:10)\nat WebSocket.send (/home/ubuntu/newclient/node_modules/engine.io/lib/transports/websocket.js:88:12)\nat Socket.flush (/home/ubuntu/newclient/node_modules/engine.io/lib/socket.js:341:20)\nat WebSocket.emit (events.js:117:20)\nat /home/ubuntu/newclient/node_modules/engine.io/lib/transports/websocket.js:94:14\nat afterWrite (_stream_writable.js:277:3)\nat _stream_writable.js:266:9\nat process._tickDomainCallback (node.js:463:13)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/301", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/301/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/301/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/301/events", "html_url": "https://github.com/socketio/engine.io/issues/301", "id": 53438841, "node_id": "MDU6SXNzdWU1MzQzODg0MQ==", "number": 301, "title": "socket engine is dying when many clients are connected", "user": {"login": "flashmandv", "id": 2466808, "node_id": "MDQ6VXNlcjI0NjY4MDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/2466808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flashmandv", "html_url": "https://github.com/flashmandv", "followers_url": "https://api.github.com/users/flashmandv/followers", "following_url": "https://api.github.com/users/flashmandv/following{/other_user}", "gists_url": "https://api.github.com/users/flashmandv/gists{/gist_id}", "starred_url": "https://api.github.com/users/flashmandv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flashmandv/subscriptions", "organizations_url": "https://api.github.com/users/flashmandv/orgs", "repos_url": "https://api.github.com/users/flashmandv/repos", "events_url": "https://api.github.com/users/flashmandv/events{/privacy}", "received_events_url": "https://api.github.com/users/flashmandv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-01-05T20:16:18Z", "updated_at": "2015-01-12T09:03:23Z", "closed_at": "2015-01-10T18:55:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using latest 1.2.1 socket.io and my server dies constantly after more than 300 users are connected at the same time.\nThe server is not loaded, I turned the client and server debug and this is what got my attention:\nSERVER:\nMon, 05 Jan 2015 17:36:39 GMT engine:socket sending packet \"message\" (0)\nMon, 05 Jan 2015 17:36:39 GMT engine:socket transport error\nMon, 05 Jan 2015 17:36:39 GMT engine:socket error triggered by discarded transport\nMon, 05 Jan 2015 17:36:39 GMT engine upgrading existing transport\nMon, 05 Jan 2015 17:36:39 GMT engine:socket might upgrade socket transport from \"polling\" to \"websocket\"\nMon, 05 Jan 2015 17:36:39 GMT engine intercepting request for path \"/socket.io/\"\nMon, 05 Jan 2015 17:36:39 GMT engine handling \"GET\" http request \"/socket.io/?EIO=3&transport=polling&t=1420479277863-33&sid=ycn4-IOFOlHkALe1AAJR\"\nMon, 05 Jan 2015 17:36:39 GMT engine:ws received \"2probe\"\nMon, 05 Jan 2015 17:36:39 GMT engine:ws writing \"3probe\"\nMon, 05 Jan 2015 17:36:39 GMT engine intercepting request for path \"/socket.io/\"\n\nCLIENT:\nsocket socket error {\"type\":\"TransportError\",\"description\":0} +12ms\n...\nFailed to load resource: net::ERR_EMPTY_RESPONSE\n\nSERVER CODE:\nvar io = require(\"socket.io\")({'heartbeat interval':15, 'heartbeat timeout':40}); \nsocket = io.listen(port);\nsocket.sockets.on(\"connection\", onSocketConnection);\n\nI really need help.\nThanks\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/socketio/engine.io/issues/295", "repository_url": "https://api.github.com/repos/socketio/engine.io", "labels_url": "https://api.github.com/repos/socketio/engine.io/issues/295/labels{/name}", "comments_url": "https://api.github.com/repos/socketio/engine.io/issues/295/comments", "events_url": "https://api.github.com/repos/socketio/engine.io/issues/295/events", "html_url": "https://github.com/socketio/engine.io/issues/295", "id": 49684227, "node_id": "MDU6SXNzdWU0OTY4NDIyNw==", "number": 295, "title": "After migrating from 0.9 to 1.2.0 socket.io which uses engine.io I have a problem", "user": {"login": "mudlee", "id": 1439334, "node_id": "MDQ6VXNlcjE0MzkzMzQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1439334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mudlee", "html_url": "https://github.com/mudlee", "followers_url": "https://api.github.com/users/mudlee/followers", "following_url": "https://api.github.com/users/mudlee/following{/other_user}", "gists_url": "https://api.github.com/users/mudlee/gists{/gist_id}", "starred_url": "https://api.github.com/users/mudlee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mudlee/subscriptions", "organizations_url": "https://api.github.com/users/mudlee/orgs", "repos_url": "https://api.github.com/users/mudlee/repos", "events_url": "https://api.github.com/users/mudlee/events{/privacy}", "received_events_url": "https://api.github.com/users/mudlee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-11-21T11:06:17Z", "updated_at": "2015-01-10T18:56:38Z", "closed_at": "2015-01-10T18:56:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have to analyze and modify the events sent via socket.io but I see the protocol has been changed.\nIf I use 0.9, when I emit an event, I see that the http message contains the message I sent, starting with \"5:::\".\nExample: 5:::MESSAGE!!!\n\nIf I use 1.2.0, I get a message like this: \u0000\u0003\u0001\u0007\ufffd42MESSAGE!\n\nQuestion: is there a document somewhere about these type of changes? I really need to know that a http message I receive is a socket.io event, or not.\n", "performed_via_github_app": null, "score": 1.0}]}