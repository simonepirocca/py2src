{"total_count": 646, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2153", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2153/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2153/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2153/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2153", "id": 677282965, "node_id": "MDU6SXNzdWU2NzcyODI5NjU=", "number": 2153, "title": "Updating lambda stopped working with \"Code storage limit exceeded\"", "user": {"login": "jaredhobbs", "id": 630869, "node_id": "MDQ6VXNlcjYzMDg2OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/630869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredhobbs", "html_url": "https://github.com/jaredhobbs", "followers_url": "https://api.github.com/users/jaredhobbs/followers", "following_url": "https://api.github.com/users/jaredhobbs/following{/other_user}", "gists_url": "https://api.github.com/users/jaredhobbs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredhobbs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredhobbs/subscriptions", "organizations_url": "https://api.github.com/users/jaredhobbs/orgs", "repos_url": "https://api.github.com/users/jaredhobbs/repos", "events_url": "https://api.github.com/users/jaredhobbs/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredhobbs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-12T00:20:08Z", "updated_at": "2020-08-12T23:14:53Z", "closed_at": "2020-08-12T16:34:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nRunning latest zappa in python 3.8 context. `slim_handler` set to `true`.\r\n\r\n## Expected Behavior\r\nLambda should update with new code\r\n\r\n## Actual Behavior\r\nLambda fails to update due to \"Code storage limit exceeded\" exception.\r\n\r\nZappa has been running great for almost a year now. It even update successfully multiple times earlier today. Then it stopped working. I'm using the slim handler and the code is only 60mb zipped so I don't know why this just started failing. Here's the output:\r\n\r\n```\r\nPackaging project as zip.\r\nUploading yearend-dev-1597190872.tar.gz (56.3MiB)..\r\nUploading handler_yearend-dev-1597190947.zip (12.4MiB)..\r\nUpdating Lambda function code..\r\nOh no! An error occurred! :(\r\n==============\r\n==============\r\nNeed help? Found a bug? Let us know! :D\r\nFile bug reports on GitHub here: https://github.com/Miserlou/Zappa\r\nAnd join our Slack channel here: https://zappateam.slack.com\r\nLove!,\r\n ~ Team Zappa!\r\nTraceback (most recent call last):\r\n  File \"/var/lang/lib/python3.8/site-packages/zappa/cli.py\", line 2778, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/var/lang/lib/python3.8/site-packages/zappa/cli.py\", line 512, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/var/lang/lib/python3.8/site-packages/zappa/cli.py\", line 559, in dispatch_command\r\n    self.update(self.vargs['zip'], self.vargs['no_upload'])\r\n  File \"/var/lang/lib/python3.8/site-packages/zappa/cli.py\", line 961, in update\r\n    self.lambda_arn = self.zappa.update_lambda_function(**kwargs)\r\n  File \"/var/lang/lib/python3.8/site-packages/zappa/core.py\", line 1114, in update_lambda_function\r\n    response = self.lambda_client.update_function_code(**kwargs)\r\n  File \"/var/lang/lib/python3.8/site-packages/botocore/client.py\", line 316, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/var/lang/lib/python3.8/site-packages/botocore/client.py\", line 635, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.errorfactory.CodeStorageExceededException: An error occurred (CodeStorageExceededException) when calling the UpdateFunctionCode operation: Code storage limit exceeded.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2146", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2146/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2146/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2146/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2146", "id": 668000070, "node_id": "MDU6SXNzdWU2NjgwMDAwNzA=", "number": 2146, "title": "How to invoke or schedule functions from non wsgi app", "user": {"login": "manycoding", "id": 10396557, "node_id": "MDQ6VXNlcjEwMzk2NTU3", "avatar_url": "https://avatars0.githubusercontent.com/u/10396557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manycoding", "html_url": "https://github.com/manycoding", "followers_url": "https://api.github.com/users/manycoding/followers", "following_url": "https://api.github.com/users/manycoding/following{/other_user}", "gists_url": "https://api.github.com/users/manycoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/manycoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manycoding/subscriptions", "organizations_url": "https://api.github.com/users/manycoding/orgs", "repos_url": "https://api.github.com/users/manycoding/repos", "events_url": "https://api.github.com/users/manycoding/events{/privacy}", "received_events_url": "https://api.github.com/users/manycoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-29T17:05:50Z", "updated_at": "2020-07-29T17:46:44Z", "closed_at": "2020-07-29T17:46:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Context\r\nI have some code for automation https://github.com/manycoding/page-followers. I'd like to invoke functions to test from different files. I noticed when I run `zappa invoke dev \"anything but lambda_handler\" it actually invokes `lambda_handler`. Same with scheduling.\r\n\r\n\r\n## Expected Behavior\r\nI'd like to be able to execute any function from any file deployed with zappa, not just `lambda_handler`.\r\n\r\n## Actual Behavior\r\n`lambda_handler` is executed\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2140", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2140/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2140/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2140/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2140", "id": 663950967, "node_id": "MDU6SXNzdWU2NjM5NTA5Njc=", "number": 2140, "title": "OSError: Could not find a suitable TLS CA certificate bundle, invalid path: /etc/ssl/certs/ca-certificates.crt", "user": {"login": "NMisko", "id": 18364222, "node_id": "MDQ6VXNlcjE4MzY0MjIy", "avatar_url": "https://avatars3.githubusercontent.com/u/18364222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NMisko", "html_url": "https://github.com/NMisko", "followers_url": "https://api.github.com/users/NMisko/followers", "following_url": "https://api.github.com/users/NMisko/following{/other_user}", "gists_url": "https://api.github.com/users/NMisko/gists{/gist_id}", "starred_url": "https://api.github.com/users/NMisko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NMisko/subscriptions", "organizations_url": "https://api.github.com/users/NMisko/orgs", "repos_url": "https://api.github.com/users/NMisko/repos", "events_url": "https://api.github.com/users/NMisko/events{/privacy}", "received_events_url": "https://api.github.com/users/NMisko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-22T18:06:24Z", "updated_at": "2020-07-23T08:49:23Z", "closed_at": "2020-07-23T08:49:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 3.6/3.7/3.8 -->\r\n\r\nI'm deploying the following flask app\r\n\r\n```\r\nfrom flask import Flask\r\nimport requests\r\n\r\nAPP = Flask(__name__)\r\n\r\n@APP.route(\"/\")\r\ndef x():\r\n    return requests.get(\"https://www.google.com\")\r\n```\r\n\r\nAny requests lead to the following error\r\n```\r\n[DEBUG] 2020-07-22T17:45:15.334Z df5c257c-36bf-4087-9a57-9670eb82c344 Zappa Event: {'command': 'autoinvoice.app.x'}\r\n[ERROR] OSError: Could not find a suitable TLS CA certificate bundle, invalid path: /etc/ssl/certs/ca-certificates.crt\r\nTraceback (most recent call last):\r\n\u00a0\u00a0File \"/var/task/handler.py\", line 602, in lambda_handler\r\n\u00a0\u00a0\u00a0\u00a0return LambdaHandler.lambda_handler(event, context)\r\n\u00a0\u00a0File \"/var/task/handler.py\", line 248, in lambda_handler\r\n\u00a0\u00a0\u00a0\u00a0return handler.handler(event, context)\r\n\u00a0\u00a0File \"/var/task/handler.py\", line 382, in handler\r\n\u00a0\u00a0\u00a0\u00a0result = self.run_function(app_function, event, context)\r\n\u00a0\u00a0File \"/var/task/handler.py\", line 283, in run_function\r\n\u00a0\u00a0\u00a0\u00a0result = app_function(event, context) if varargs else app_function()\r\n\u00a0\u00a0File \"/var/task/autoinvoice/app.py\", line 20, in x\r\n\u00a0\u00a0\u00a0\u00a0return str(requests.get(\"https://www.google.com\").status_code)\r\n\u00a0\u00a0File \"/var/task/requests/api.py\", line 76, in get\r\n\u00a0\u00a0\u00a0\u00a0return request('get', url, params=params, **kwargs)\r\n\u00a0\u00a0File \"/var/task/requests/api.py\", line 61, in request\r\n\u00a0\u00a0\u00a0\u00a0return session.request(method=method, url=url, **kwargs)\r\n\u00a0\u00a0File \"/var/task/requests/sessions.py\", line 530, in request\r\n\u00a0\u00a0\u00a0\u00a0resp = self.send(prep, **send_kwargs)\r\n\u00a0\u00a0File \"/var/task/requests/sessions.py\", line 643, in send\r\n\u00a0\u00a0\u00a0\u00a0r = adapter.send(request, **kwargs)\r\n\u00a0\u00a0File \"/var/task/requests/adapters.py\", line 416, in send\r\n\u00a0\u00a0\u00a0\u00a0self.cert_verify(conn, request.url, verify, cert)\r\n\u00a0\u00a0File \"/var/task/requests/adapters.py\", line 227, in cert_verify\r\n\u00a0\u00a0\u00a0\u00a0raise IOError(\"Could not find a suitable TLS CA certificate bundle, \"\r\n```\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: Tried 51.0 and 50.0\r\n* Operating System and Python version: Ubuntu 20.04 LTS Python 3.8.2\r\n* The output of `pip freeze`:\r\n```\r\naniso8601==8.0.0\r\nappdirs==1.4.3\r\nargcomplete==1.11.1\r\nboto3==1.12.13\r\nbotocore==1.15.13\r\nCacheControl==0.12.6\r\ncertifi==2019.11.28\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nClick==7.0\r\ncolorama==0.4.3\r\ncontextlib2==0.6.0\r\ndistlib==0.3.0\r\ndistro==1.4.0\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nFlask==1.1.1\r\nFlask-BasicAuth==0.2.0\r\nFlask-RESTful==0.3.8\r\nfuture==0.18.2\r\nhjson==3.0.1\r\nhtml5lib==1.0.1\r\nidna==2.9\r\nimportlib-metadata==1.5.0\r\nipaddr==2.2.0\r\nitsdangerous==1.1.0\r\nJinja2==2.11.1\r\njmespath==0.9.5\r\nkappa==0.6.0\r\nlockfile==0.12.2\r\nMarkupSafe==1.1.1\r\nmsgpack==0.6.2\r\npackaging==20.3\r\npep517==0.8.2\r\npip-tools==4.5.1\r\nplacebo==0.9.0\r\nprogress==1.5\r\npyparsing==2.4.6\r\nPyPDF2==1.26.0\r\npython-dateutil==2.8.1\r\npython-slugify==4.0.0\r\npytoml==0.1.21\r\npytz==2019.3\r\nPyYAML==5.3\r\nrequests==2.23.0\r\nretrying==1.3.3\r\ns3transfer==0.3.3\r\nsix==1.14.0\r\nsparkpost==1.3.6\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntqdm==4.43.0\r\ntroposphere==2.6.0\r\nurllib3==1.25.8\r\nwebencodings==0.5.1\r\nWerkzeug==1.0.0\r\nwsgi-request-logger==0.4.6\r\nzappa==0.50.0\r\nzipp==3.1.0\r\n```\r\n\r\n* Your `zappa_settings.json`: \r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"autoinvoice.app.APP\",\r\n        \"aws_region\": \"eu-central-1\",\r\n        \"profile_name\": \"xxxxx\",\r\n        \"project_name\": \"autoinvoice\",\r\n        \"runtime\": \"python3.8\",\r\n        \"memory_size\": 512,\r\n        \"s3_bucket\": \"autoinvoice-dev-deploy\",\r\n        \"timeout_seconds\": 480,\r\n        \"cloudwatch_log_level\": \"INFO\",\r\n        \"cloudwatch_data_trace\": true,\r\n        \"cloudwatch_metrics_enabled\": true,\r\n        \"events\": []\r\n    },\r\n}\r\n```\r\n\r\nI appreciate any help, thanks!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2130", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2130/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2130/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2130/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2130", "id": 647918784, "node_id": "MDU6SXNzdWU2NDc5MTg3ODQ=", "number": 2130, "title": "documentation link is not working", "user": {"login": "avinash-bhosale", "id": 51014718, "node_id": "MDQ6VXNlcjUxMDE0NzE4", "avatar_url": "https://avatars3.githubusercontent.com/u/51014718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avinash-bhosale", "html_url": "https://github.com/avinash-bhosale", "followers_url": "https://api.github.com/users/avinash-bhosale/followers", "following_url": "https://api.github.com/users/avinash-bhosale/following{/other_user}", "gists_url": "https://api.github.com/users/avinash-bhosale/gists{/gist_id}", "starred_url": "https://api.github.com/users/avinash-bhosale/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avinash-bhosale/subscriptions", "organizations_url": "https://api.github.com/users/avinash-bhosale/orgs", "repos_url": "https://api.github.com/users/avinash-bhosale/repos", "events_url": "https://api.github.com/users/avinash-bhosale/events{/privacy}", "received_events_url": "https://api.github.com/users/avinash-bhosale/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-30T06:57:55Z", "updated_at": "2020-07-10T04:21:52Z", "closed_at": "2020-07-01T04:16:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "*Zappa documentation link is not working*\r\n\r\nI tried to acccess https://blog.zappa.io/, but its not loading", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2116", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2116/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2116/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2116/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2116", "id": 638230605, "node_id": "MDU6SXNzdWU2MzgyMzA2MDU=", "number": 2116, "title": "Zappa always re-downloads \"psycopg2-binary\" library when building the deployment package", "user": {"login": "k-solnushkin", "id": 23080507, "node_id": "MDQ6VXNlcjIzMDgwNTA3", "avatar_url": "https://avatars1.githubusercontent.com/u/23080507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-solnushkin", "html_url": "https://github.com/k-solnushkin", "followers_url": "https://api.github.com/users/k-solnushkin/followers", "following_url": "https://api.github.com/users/k-solnushkin/following{/other_user}", "gists_url": "https://api.github.com/users/k-solnushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-solnushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-solnushkin/subscriptions", "organizations_url": "https://api.github.com/users/k-solnushkin/orgs", "repos_url": "https://api.github.com/users/k-solnushkin/repos", "events_url": "https://api.github.com/users/k-solnushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/k-solnushkin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-13T20:54:03Z", "updated_at": "2020-07-14T18:19:16Z", "closed_at": "2020-07-14T18:19:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n\r\nFirst of all, I am indebted to Rich Jones and contributors who made Zappa possible! It's mind-blowing to think how far Zappa has taken Amazon API Gateway and Lambda functions.\r\n\r\nThe bug itself is tiny and might not even be worthy of the attention of this audience, and there is also a workaround. I am deploying a stock Django project coupled with a PostgreSQL database.\r\n\r\nNot sure how you guys and gals are doing this, but what worked for me was to run both `pip install psycopg2` and `pip install psycopg2-binary`. The former installs a nice `_psycopg.cpython-38-x86_64-linux-gnu.so` so-called \"shared object\" file, a dynamically linked Linux library, but it requires a host of other libraries to actually run -- so the latter provides those libraries.\r\n\r\nIt all deploys and runs well, but each time I try to run `zappa update`, or actually even `zappa package`, Zappa builds a package and *re-downloads* the poor `psycopg2-binary` library.\r\n\r\nThose libraries are supposed to be cached on disk to avoid re-downloading each time. I inserted a debug print statement after line [817](https://github.com/Miserlou/Zappa/blob/93804a1b3157f0189bf062e01baab2bd4f09400d/zappa/core.py#L817) in `core.py`:\r\n\r\n> print(f\"Looking for file: {wheel_path}\")\r\n\r\nAnd when running `zappa package`, it prints, among other lines:\r\n\r\n> Looking for file: /tmp/cached_wheels/psycopg2-binary-2.8.5-*_x86_64.whl\r\n\r\nActually, there is a file with almost the same name in that location, but the dash `-` between `psycopg2` and `binary` is replaced with an underscore `_`:\r\n\r\n> ls /tmp/cached_wheels/psycopg2_binary-2.8.5-cp38-cp38-manylinux1_x86_64.whl\r\n\r\nThe underscore is what is present in the [original name](https://pypi.org/project/psycopg2-binary/#files) of that file if you want to [download](https://files.pythonhosted.org/packages/ab/a8/ebd961de8bd750aa70d8a7e1073d1a2f860ec367ca3e20b2fb0886423fd2/psycopg2_binary-2.8.5-cp38-cp38-manylinux1_x86_64.whl) it from PyPi.\r\n\r\nLooks like this happens because the name of the library in `requirements.txt` is with a dash: `psycopg2-binary`, and this is what Zappa expects when building a wildcard expression in line [816](https://github.com/Miserlou/Zappa/blob/93804a1b3157f0189bf062e01baab2bd4f09400d/zappa/core.py#L816) of `core.py`, whereas the file on disk is with an underscore.\r\n\r\nFor comparison, another package with a dash in its name, `django-environ`, also [ships](https://pypi.org/project/django-environ/#files) its [wheel file](https://files.pythonhosted.org/packages/9f/32/76295a1a5d00bf556c495216581c6997e7fa5f533b2229e0a9d6cbaa95ae/django_environ-0.4.5-py2.py3-none-any.whl) with an underscore instead of a dash.\r\n\r\nNow, I am not sure we should call it a bug, since Zappa works, it just re-downloads this file each time since it believes it's not cached. The only negative thing is that guilty feeling that someone is paying for that bandwidth.\r\n\r\nA workaround would be to make a copy of that file in `/tmp/cached_wheels` but replace an underscore with a dash:\r\n\r\n> cd /tmp/cached_wheels\r\n> cp psycopg2_binary-2.8.5-cp38-cp38-manylinux1_x86_64.whl psycopg2-binary-2.8.5-cp38-cp38-manylinux1_x86_64.whl\r\n\r\nIt will then find the \"cached\" version and not download anything:\r\n\r\n```\r\n$ zappa package\r\n\r\nDownloading and installing dependencies..\r\n - psycopg2-binary==2.8.5: Using locally cached manylinux wheel\r\n```\r\n\r\nI am surprised that I didn't find anyone else complaining about this. Maybe I am doing it wrong and everyone else using Django with PostgreSQL is not having this problem.\r\n\r\n**Feel free to close this issue** since there is a workaround -- this way, even if closed, it will eventually become indexed by search engines for others to find.\r\n\r\n## Expected Behavior\r\n\r\nZappa should find the cached wheel file despite the underscore in its name.\r\n\r\n## Actual Behavior\r\n\r\nThe file has an underscore where Zappa expects a dash, so Zappa re-downloads the file.\r\n\r\n## Possible Fix\r\n\r\nA workaround is creating a copy of the wheel file with a dash instead of the underscore in its name (commands provided above); this way Zappa will find the copy and use it.\r\n\r\n## Steps to Reproduce\r\n\r\n1. pip install -r requirements.txt (packages to install are listed below)\r\n2. zappa package\r\n\r\n## Your Environment\r\n\r\n* Zappa version used: 0.51.0\r\n* Operating System and Python version: Ubuntu 20.04 LTS, Python 3.8.2\r\n* The output of `pip freeze` (relevant parts): \r\n\r\n```\r\nDjango==3.0.7\r\npsycopg2==2.8.5\r\npsycopg2-binary==2.8.5\r\nzappa==0.51.0\r\n```\r\n\r\nThanks, everyone -- again, it's not really a bug, or at most a tiny one. I just hope that after reading this others will know how to fix it using the workaround provided.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2108", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2108/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2108/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2108/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2108", "id": 628597702, "node_id": "MDU6SXNzdWU2Mjg1OTc3MDI=", "number": 2108, "title": "ERROR: zappa 0.51.0 has requirement python-dateutil<2.7.0, but you'll have python-dateutil 2.8.1 which is incompatible.", "user": {"login": "amsal-muhammad", "id": 65496106, "node_id": "MDQ6VXNlcjY1NDk2MTA2", "avatar_url": "https://avatars0.githubusercontent.com/u/65496106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amsal-muhammad", "html_url": "https://github.com/amsal-muhammad", "followers_url": "https://api.github.com/users/amsal-muhammad/followers", "following_url": "https://api.github.com/users/amsal-muhammad/following{/other_user}", "gists_url": "https://api.github.com/users/amsal-muhammad/gists{/gist_id}", "starred_url": "https://api.github.com/users/amsal-muhammad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amsal-muhammad/subscriptions", "organizations_url": "https://api.github.com/users/amsal-muhammad/orgs", "repos_url": "https://api.github.com/users/amsal-muhammad/repos", "events_url": "https://api.github.com/users/amsal-muhammad/events{/privacy}", "received_events_url": "https://api.github.com/users/amsal-muhammad/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-01T17:14:26Z", "updated_at": "2020-07-14T18:18:57Z", "closed_at": "2020-07-14T18:18:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "python-dateutil<2.7.0 is an outdated version and many packages require python-dateutil>= 2.7.5.\r\n\r\nPlease update the version of python-dateutil requirement of Zappa.\r\n\r\n* Zappa version used: 0.51.0\r\n* Operating System and Python version: 3.7.7 Mac OS", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2091", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2091/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2091/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2091/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2091", "id": 608477397, "node_id": "MDU6SXNzdWU2MDg0NzczOTc=", "number": 2091, "title": "Zappa 0.51.0 Not pulling updated files for the zip -- zappa update not working", "user": {"login": "emilynielson", "id": 16197748, "node_id": "MDQ6VXNlcjE2MTk3NzQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/16197748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emilynielson", "html_url": "https://github.com/emilynielson", "followers_url": "https://api.github.com/users/emilynielson/followers", "following_url": "https://api.github.com/users/emilynielson/following{/other_user}", "gists_url": "https://api.github.com/users/emilynielson/gists{/gist_id}", "starred_url": "https://api.github.com/users/emilynielson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emilynielson/subscriptions", "organizations_url": "https://api.github.com/users/emilynielson/orgs", "repos_url": "https://api.github.com/users/emilynielson/repos", "events_url": "https://api.github.com/users/emilynielson/events{/privacy}", "received_events_url": "https://api.github.com/users/emilynielson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-28T17:09:18Z", "updated_at": "2020-04-28T17:43:06Z", "closed_at": "2020-04-28T17:43:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\nWhen running zappa update with 0.51.0 the files that have been updated are not pulled into the zip and thus the updated code is not deployed\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug --> Can't send updated code via zappa update\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 3.6/3.7/3.8 -->\r\nPython 3.7.4\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nThe zip should be updated with the updated files and sent via the zip to the lambda\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nold code continues to get sent to the lambda\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.51.0\r\n* Operating System and Python version: \r\nmacOS Mojave Version 10.14.6\r\nPython 3.7.4\r\n* The output of `pip freeze`:\r\nappnope==0.1.0\r\nargcomplete==1.9.3\r\narrow==0.15.5\r\nattrs==19.3.0\r\nautopep8==1.5.2\r\nbackcall==0.1.0\r\nbcrypt==3.1.7\r\nbeautifulsoup4==4.9.0\r\nboto3==1.10.34\r\nbotocore==1.13.34\r\ncertifi==2020.4.5.1\r\ncffi==1.14.0\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nclick==7.1.1\r\ncoverage==5.1\r\ncryptography==2.9\r\ndatadog==0.35.0\r\ndecorator==4.4.2\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nenvdir==1.0.1\r\nenvlog==0.1.1\r\nFlask==1.1.2\r\nfurl==1.2.1\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.9\r\nimportlib-metadata==1.6.0\r\nInject==4.1.2\r\nipython==7.13.0\r\nipython-genutils==0.2.0\r\nitsdangerous==1.1.0\r\njedi==0.17.0\r\nJinja2==2.11.2\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nlxml==4.5.0\r\nMarkupSafe==1.1.1\r\nmore-itertools==8.2.0\r\nmypy==0.770\r\nmypy-extensions==0.4.3\r\norderedmultidict==1.0.1\r\npackaging==20.3\r\nparamiko==2.7.1\r\nparso==0.7.0\r\npartnerpub==0.1.0\r\npexpect==4.8.0\r\npickleshare==0.7.5\r\npip-tools==4.5.1\r\nplacebo==0.9.0\r\npluggy==0.12.0\r\nprompt-toolkit==3.0.5\r\nptyprocess==0.6.0\r\npy==1.8.1\r\npycodestyle==2.5.0\r\npycparser==2.20\r\nPygments==2.6.1\r\nPyNaCl==1.3.0\r\npynamodb==4.3.1\r\npyparsing==2.4.7\r\npysftp==0.2.9\r\npytest==5.4.1\r\npytest-cov==2.8.1\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==5.3.1\r\nrequests==2.23.0\r\ns3transfer==0.2.1\r\nsix==1.14.0\r\nsoupsieve==2.0\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntraitlets==4.3.3\r\ntroposphere==2.6.0\r\ntyped-ast==1.4.1\r\ntyping-extensions==3.7.4.2\r\nUnidecode==1.1.1\r\nurllib3==1.25.8\r\nwapoarc==1.10.1\r\nwcwidth==0.1.9\r\nWerkzeug==0.16.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.51.0\r\nzipp==3.1.0\r\n* Link to your project (optional):\r\n* Your `zappa_settings.json`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2090", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2090/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2090/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2090/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2090", "id": 607597334, "node_id": "MDU6SXNzdWU2MDc1OTczMzQ=", "number": 2090, "title": "Zappa+Flask: A GET request to '/' yielded a 502 response code", "user": {"login": "kashyapm94", "id": 35066641, "node_id": "MDQ6VXNlcjM1MDY2NjQx", "avatar_url": "https://avatars3.githubusercontent.com/u/35066641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kashyapm94", "html_url": "https://github.com/kashyapm94", "followers_url": "https://api.github.com/users/kashyapm94/followers", "following_url": "https://api.github.com/users/kashyapm94/following{/other_user}", "gists_url": "https://api.github.com/users/kashyapm94/gists{/gist_id}", "starred_url": "https://api.github.com/users/kashyapm94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kashyapm94/subscriptions", "organizations_url": "https://api.github.com/users/kashyapm94/orgs", "repos_url": "https://api.github.com/users/kashyapm94/repos", "events_url": "https://api.github.com/users/kashyapm94/events{/privacy}", "received_events_url": "https://api.github.com/users/kashyapm94/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-27T14:29:26Z", "updated_at": "2020-04-27T16:54:41Z", "closed_at": "2020-04-27T16:54:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to deploy my flask app on aws lambda via zappa. And I am getting the following error when I do `zappa deploy dev`:\r\n\r\n ```\r\n   Calling deploy for stage dev..\r\n    Downloading and installing dependencies..\r\n     - sqlalchemy==1.3.16: Downloading\r\n    100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.24M/1.24M [00:00<00:00, 6.06MB/s]\r\n     - psycopg2-binary==2.8.5: Downloading\r\n    100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 2.94M/2.94M [00:00<00:00, 8.30MB/s]\r\n     - pandas==1.0.3: Using locally cached manylinux wheel\r\n     - numpy==1.18.3: Using locally cached manylinux wheel\r\n     - markupsafe==1.1.1: Downloading\r\n    100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 27.5k/27.5k [00:00<00:00, 1.46MB/s]\r\n    Packaging project as zip.\r\n    Uploading prices-service-dev-1587997268.zip (44.2MiB)..\r\n    100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 46.3M/46.3M [01:05<00:00, 710kB/s]\r\n    Scheduling..\r\n    Scheduled prices-service-dev-zappa-keep-warm-handler.keep_warm_callback with expression rate(4 minutes)!\r\n    Uploading prices-service-dev-template-1587997350.json (1.6KiB)..\r\n    100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.65k/1.65k [00:00<00:00, 19.7kB/s]\r\n    Waiting for stack prices-service-dev to create (this can take a bit)..\r\n     75%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588                                          | 3/4 [00:09<00:03,  3.13s/res]\r\n    Deploying API Gateway..\r\n    Error: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 502 response code.\r\n\r\n```\r\n\r\nWhen I do `zappa init`, it generates the following `zappa_settings.json` file:\r\n```\r\n\r\n    {\r\n        \"dev\": {\r\n            \"app_function\": \"main.app\",\r\n            \"aws_region\": \"eu-central-1\",\r\n            \"profile_name\": \"default\",\r\n            \"project_name\": \"ps-zappa-test\",\r\n            \"runtime\": \"python3.7\",\r\n            \"s3_bucket\": -MY_BUCKET_NAME-\r\n        }\r\n    }\r\n\r\n```\r\nand my `main.py` file is:\r\n\r\n```\r\n    import os\r\n    from app import create_app\r\n    from config import config_by_name\r\n    from app.extensions import db\r\n    \r\n    config_name = os.getenv(\"FLASK_CONFIG\") or \"default\"\r\n    app_config = config_by_name[config_name]\r\n    app = create_app(app_config)\r\n    \r\n    db.create_all(app=app)\r\n    \r\n    if __name__ == '__main__':\r\n        app.run()\r\n\r\n```\r\nMy dependencies:\r\n\r\n```\r\n    aniso8601==8.0.0\r\n    argcomplete==1.11.1\r\n    attrs==19.3.0\r\n    beautifulsoup4==4.9.0\r\n    boto3==1.12.46\r\n    botocore==1.15.46\r\n    certifi==2020.4.5.1\r\n    cfn-flip==1.2.3\r\n    chardet==3.0.4\r\n    click==7.1.1\r\n    docutils==0.15.2\r\n    durationpy==0.5\r\n    entsoe-py==0.2.13\r\n    Flask==1.1.2\r\n    flask-marshmallow==0.12.0\r\n    flask-restx==0.2.0\r\n    Flask-SQLAlchemy==2.4.1\r\n    future==0.18.2\r\n    gunicorn==20.0.4\r\n    hjson==3.0.1\r\n    idna==2.9\r\n    importlib-metadata==1.6.0\r\n    itsdangerous==1.1.0\r\n    Jinja2==2.11.2\r\n    jmespath==0.9.5\r\n    jsonschema==3.2.0\r\n    kappa==0.6.0\r\n    MarkupSafe==1.1.1\r\n    marshmallow==3.5.1\r\n    marshmallow-sqlalchemy==0.23.0\r\n    more-itertools==8.2.0\r\n    numpy==1.18.3\r\n    packaging==20.3\r\n    pandas==1.0.3\r\n    pip-tools==5.0.0\r\n    placebo==0.9.0\r\n    pluggy==0.13.1\r\n    psycopg2-binary==2.8.5\r\n    py==1.8.1\r\n    pyparsing==2.4.7\r\n    pyrsistent==0.16.0\r\n    pytest==5.4.1\r\n    python-dateutil==2.6.1\r\n    python-dotenv==0.13.0\r\n    python-slugify==4.0.0\r\n    pytz==2019.3\r\n    PyYAML==5.3.1\r\n    requests==2.23.0\r\n    s3transfer==0.3.3\r\n    six==1.14.0\r\n    soupsieve==2.0\r\n    SQLAlchemy==1.3.16\r\n    text-unidecode==1.3\r\n    toml==0.10.0\r\n    tqdm==4.45.0\r\n    troposphere==2.6.0\r\n    urllib3==1.25.9\r\n    wcwidth==0.1.9\r\n    Werkzeug==0.16.1\r\n    wsgi-request-logger==0.4.6\r\n    zappa==0.51.0\r\n    zipp==3.1.0\r\n\r\n```\r\nWhen I do `zappa tail`, it gives:\r\n\r\n```\r\n    Calling tail for stage dev..\r\n    [1587996139600] Instancing..\r\n    [1587996139773] Instancing..\r\n    [1587996143093] OpenBLAS WARNING - could not determine the L2 cache size on this system, assuming 256k\r\n    [1587996143255] OpenBLAS WARNING - could not determine the L2 cache size on this system, assuming 256k\r\n    [1587996148073] [ERROR] OperationalError: (psycopg2.OperationalError) could not connect to server: Connection refused\r\n    [1587996148073] Is the server running on host \"localhost\" (127.0.0.1) and accepting\r\n    [1587996148073] TCP/IP connections on port 5432?\r\n    [1587996148073] could not create socket: Address family not supported by protocol\r\n    \u00a0\u00a0\u00a0\u00a0conn = _connect(dsn, connection_factory=connection_factory, **kwasync)nectption_noconnection\r\n    [1587996148289] [ERROR] OperationalError: (psycopg2.OperationalError) could not connect to server: Connection refused\r\n    [1587996148289] Is the server running on host \"localhost\" (127.0.0.1) and accepting\r\n    [1587996148289] TCP/IP connections on port 5432?\r\n    [1587996148289] could not create socket: Address family not supported by protocol\r\n    \u00a0\u00a0\u00a0\u00a0conn = _connect(dsn, connection_factory=connection_factory, **kwasync)nectption_noconnection\r\n```\r\n\r\nAny suggestions on how this issue can be solved?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2087", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2087/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2087/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2087/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2087", "id": 607075602, "node_id": "MDU6SXNzdWU2MDcwNzU2MDI=", "number": 2087, "title": "UnicodeDecodeError: 'utf-8' codec can't decode byte 0x8b in position 1: invalid start byte", "user": {"login": "aodj", "id": 1374905, "node_id": "MDQ6VXNlcjEzNzQ5MDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1374905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aodj", "html_url": "https://github.com/aodj", "followers_url": "https://api.github.com/users/aodj/followers", "following_url": "https://api.github.com/users/aodj/following{/other_user}", "gists_url": "https://api.github.com/users/aodj/gists{/gist_id}", "starred_url": "https://api.github.com/users/aodj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aodj/subscriptions", "organizations_url": "https://api.github.com/users/aodj/orgs", "repos_url": "https://api.github.com/users/aodj/repos", "events_url": "https://api.github.com/users/aodj/events{/privacy}", "received_events_url": "https://api.github.com/users/aodj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-26T18:07:10Z", "updated_at": "2020-04-26T18:11:11Z", "closed_at": "2020-04-26T18:11:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 3.6/3.7/3.8 -->\r\nWhen running my application I'm now receiving the exception listed below. My application previously worked, but due to some weird ssl/python3/macos issue, I destroyed and recreated my virtualenv. This also included updating to the latest version of Zappa\r\n\r\nEssentially I don't know what's causing the exception. Looking at the [code](https://github.com/Miserlou/Zappa/blob/master/zappa/handler.py#L558), I can't determine what exactly the request I should be debugging is.\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nPage loads. Note running the flask app itself works.\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nThe page fails to load and I receive the following error message:\r\n```\r\n\"{'message': 'An uncaught exception happened while servicing this request. You can investigate this with the `zappa tail` command.', 'traceback': ['Traceback (most recent call last):\\\\n', '  File \\\"/var/task/handler.py\\\", line 558, in handler\\\\n    zappa_returndict[\\\\'body\\\\'] = response.get_data(as_text=True)\\\\n', '  File \\\"/var/task/werkzeug/wrappers/base_response.py\\\", line 340, in get_data\\\\n    rv = rv.decode(self.charset)\\\\n', \\\"UnicodeDecodeError: 'utf-8' codec can't decode byte 0x8b in position 1: invalid start byte\\\\n\\\"]}\"\r\n```\r\n`zappa` tail also only logs the following:\r\n\r\n```\r\n[1587923775298] [DEBUG] 2020-04-26T17:56:15.298Z 22e92738-ad13-4db8-953f-ce64bf2d18bc amazonaws found in host\r\n[1587923777445] 'utf-8' codec can't decode byte 0x8b in position 1: invalid start byte\r\n```\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.51.0\r\n* Operating System and Python version: Python 3.7.7 & macOS Catalina 10.15.3\r\n* The output of `pip freeze`:\r\n```\r\nappdirs==1.4.3\r\nargcomplete==1.9.3\r\nattrs==19.3.0\r\nbasicauth==0.4.1\r\nbcrypt==3.1.7\r\nblack==19.10b0\r\nboto3==1.12.46\r\nbotocore==1.15.46\r\ncertifi==2020.4.5.1\r\ncffi==1.14.0\r\ncfn-flip==1.2.3\r\nchardet==3.0.4\r\nclick==7.1.1\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nFlask==1.1.2\r\nFlask-Compress==1.4.0\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nhumanize==2.2.0\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.11.2\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\npasslib==1.7.2\r\npathspec==0.8.0\r\npip-tools==5.0.0\r\nplacebo==0.9.0\r\npycparser==2.20\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npytoml==0.1.20\r\nPyYAML==5.3.1\r\nregex==2020.4.4\r\nrequests==2.23.0\r\nrequests-futures==1.0.0\r\ns3transfer==0.3.3\r\nsix==1.14.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.6.0\r\ntyped-ast==1.4.1\r\nUnidecode==1.1.1\r\nurllib3==1.25.9\r\nWerkzeug==0.16.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.51.0\r\n```\r\n* Link to your project (optional): https://github.com/aodj/eztv\r\n* Your `zappa_settings.json`: \r\n```json\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"main.app\",\r\n        \"aws_region\": \"eu-central-1\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"eztv\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"zappa.eztv.app\",\r\n        \"authorizer\": {\r\n            \"function\": \"auth.lambda_handler\"\r\n        }\r\n    }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2085", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2085/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2085/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2085/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2085", "id": 604055505, "node_id": "MDU6SXNzdWU2MDQwNTU1MDU=", "number": 2085, "title": "Zappa.io is down", "user": {"login": "emilepetrone", "id": 202745, "node_id": "MDQ6VXNlcjIwMjc0NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/202745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emilepetrone", "html_url": "https://github.com/emilepetrone", "followers_url": "https://api.github.com/users/emilepetrone/followers", "following_url": "https://api.github.com/users/emilepetrone/following{/other_user}", "gists_url": "https://api.github.com/users/emilepetrone/gists{/gist_id}", "starred_url": "https://api.github.com/users/emilepetrone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emilepetrone/subscriptions", "organizations_url": "https://api.github.com/users/emilepetrone/orgs", "repos_url": "https://api.github.com/users/emilepetrone/repos", "events_url": "https://api.github.com/users/emilepetrone/events{/privacy}", "received_events_url": "https://api.github.com/users/emilepetrone/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-21T14:44:15Z", "updated_at": "2020-04-21T14:53:20Z", "closed_at": "2020-04-21T14:53:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Zappa.io & blog.zappa.io are down\r\n\r\nUsing : Safari & Firefoxz", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2078", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2078/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2078/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2078/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2078", "id": 599282702, "node_id": "MDU6SXNzdWU1OTkyODI3MDI=", "number": 2078, "title": "update not fetching virtualenv installed dependencies", "user": {"login": "GregHilston", "id": 4227776, "node_id": "MDQ6VXNlcjQyMjc3NzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/4227776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GregHilston", "html_url": "https://github.com/GregHilston", "followers_url": "https://api.github.com/users/GregHilston/followers", "following_url": "https://api.github.com/users/GregHilston/following{/other_user}", "gists_url": "https://api.github.com/users/GregHilston/gists{/gist_id}", "starred_url": "https://api.github.com/users/GregHilston/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GregHilston/subscriptions", "organizations_url": "https://api.github.com/users/GregHilston/orgs", "repos_url": "https://api.github.com/users/GregHilston/repos", "events_url": "https://api.github.com/users/GregHilston/events{/privacy}", "received_events_url": "https://api.github.com/users/GregHilston/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-14T04:09:13Z", "updated_at": "2020-04-14T23:07:52Z", "closed_at": "2020-04-14T23:07:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\n\r\nI've used Zappa many times before but I'm attempting to `$ zappa update dev` an already `$ zappa deploy dev` project.\r\n\r\n## Expected Behavior\r\n\r\nI expect when I perform a `$ zappa deploy dev` that all the dependencies in the active `venv` to be packed up. \r\n\r\n## Actual Behavior\r\n\r\n`$ zappa deploy dev` only installs \r\n\r\n```\r\n - scipy==1.4.1: Using locally cached manylinux wheel\r\n - pandas==1.0.1: Using locally cached manylinux wheel\r\n - numpy==1.18.1: Using locally cached manylinux wheel\r\n - markupsafe==1.1.1: Downloading\r\n```\r\n\r\nFull output from `$ zappa deploy dev` is \r\n\r\n```\r\nCalling update for stage dev..\r\nDownloading and installing dependencies..\r\n- scipy==1.4.1: Using locally cached manylinux wheel\r\n- pandas==1.0.1: Using locally cached manylinux wheel\r\n- numpy==1.18.1: Using locally cached manylinux wheel\r\n- markupsafe==1.1.1: Downloading\r\nPackaging project as gzipped tarball.\r\nYou are using pip version 19.0.3, however version 20.0.2 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nDownloading and installing dependencies..\r\nPackaging project as zip.\r\nUploading ds-production-dev-1586805569.tar.gz (272.4MiB)..\r\nUpdating Lambda function code..\r\nUpdating Lambda function configuration..\r\nUploading ds-production-dev-template-1586806171.json (1.6KiB)..\r\nDeploying API Gateway..\r\nScheduling..\r\nUnscheduled ds-production-dev-zappa-keep-warm-handler.keep_warm_callback.\r\nScheduled ds-production-dev-zappa-keep-warm-handler.keep_warm_callback with expression rate(4 minutes)!\r\n```\r\n\r\n## Possible Fix\r\n\r\nHave none.\r\n\r\n## Steps to Reproduce\r\n\r\nSince it a private repo, one can't actually follow these steps on my repo\r\n\r\n1. create a new virtual env `python3 -m venv venv`\r\n2. activate that newly created env `source venv/bin/activate`\r\n3. installed dependencies `pip3 install -r requirements.txt`\r\n4. attempt to update `$ zappa update dev`\r\n\r\n## Your Environment\r\n\r\n- Using Python `3.7.4`\r\n- OSX 10.15.4 (19E287)\r\n- Zappa version used: 0.51.0\r\n- output of `$ pip3 freeze --local`\r\n\r\n```\r\nargcomplete==1.11.1\r\nboto3==1.12.39\r\nbotocore==1.15.39\r\ncertifi==2020.4.5.1\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nclick==7.1.1\r\ndill==0.3.1.1\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nFlask==1.1.2\r\nfuture==0.18.2\r\nhjson==3.0.1\r\nidna==2.9\r\nimportlib-metadata==1.6.0\r\nitsdangerous==1.1.0\r\nJinja2==2.11.1\r\njmespath==0.9.5\r\njoblib==0.14.1\r\nkappa==0.6.0\r\nMarkupSafe==1.1.1\r\nnumpy==1.18.2\r\npandas==1.0.3\r\npip-tools==4.5.1\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-slugify==4.0.0\r\npytz==2019.3\r\nPyYAML==5.3.1\r\nrequests==2.23.0\r\ns3transfer==0.3.3\r\nscikit-learn==0.22.2.post1\r\nscipy==1.4.1\r\nsix==1.14.0\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntqdm==4.45.0\r\ntroposphere==2.6.0\r\nurllib3==1.25.8\r\nWerkzeug==0.16.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.51.0\r\nzipp==3.1.0\r\n```\r\n- Your `zappa_settings.json`: \r\n\r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"api.api.app\",\r\n        \"profile_name\": \"personal\",\r\n        \"project_name\": \"ds-production\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"zappa-5c9lkbow7\",\r\n        \"slim_handler\": true\r\n    }\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2065", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2065/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2065/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2065/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2065", "id": 583887647, "node_id": "MDU6SXNzdWU1ODM4ODc2NDc=", "number": 2065, "title": "Cannot import name '_levenshtein' from 'Levenshtein'", "user": {"login": "Robinspecteur", "id": 18596290, "node_id": "MDQ6VXNlcjE4NTk2Mjkw", "avatar_url": "https://avatars3.githubusercontent.com/u/18596290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Robinspecteur", "html_url": "https://github.com/Robinspecteur", "followers_url": "https://api.github.com/users/Robinspecteur/followers", "following_url": "https://api.github.com/users/Robinspecteur/following{/other_user}", "gists_url": "https://api.github.com/users/Robinspecteur/gists{/gist_id}", "starred_url": "https://api.github.com/users/Robinspecteur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Robinspecteur/subscriptions", "organizations_url": "https://api.github.com/users/Robinspecteur/orgs", "repos_url": "https://api.github.com/users/Robinspecteur/repos", "events_url": "https://api.github.com/users/Robinspecteur/events{/privacy}", "received_events_url": "https://api.github.com/users/Robinspecteur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-18T17:25:28Z", "updated_at": "2020-03-19T16:32:34Z", "closed_at": "2020-03-19T16:32:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to get my app deployed, I get an ImportError for the levenshtein package\r\n## Context\r\nI am using the `fast-autocomplete` package, which is dependent upon the `levenshtein` package. When I deploy, this is the full traceback of the error:\r\n```\r\n[ERROR] ImportError: cannot import name '_levenshtein' from 'Levenshtein' (/var/task/Levenshtein/__init__.py)\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 609, in lambda_handler\r\n    return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 240, in lambda_handler\r\n    handler = cls()\r\n  File \"/var/task/handler.py\", line 134, in __init__\r\n    self.app_module = importlib.import_module(self.settings.APP_MODULE)\r\n  File \"/var/lang/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/var/task/app.py\", line 5, in <module>\r\n    from fast_autocomplete import AutoComplete\r\n  File \"/var/task/fast_autocomplete/__init__.py\", line 11, in <module>\r\n    from fast_autocomplete.dwg import AutoComplete\r\n  File \"/var/task/fast_autocomplete/dwg.py\", line 11, in <module>\r\n    from Levenshtein import distance as levenshtein_distance\r\n  File \"/var/task/Levenshtein/__init__.py\", line 1, in <module>\r\n    from Levenshtein import _levenshtein\r\n```\r\n\r\nThis seems to be a quite often used package yet I have only found [one similar issue](https://github.com/Miserlou/Zappa/issues/1132), and I don't understand why it was closed. \r\n\r\n## Expected Behavior\r\nShould be able to import Levenshtein into my lambda function\r\n## Actual Behavior\r\nLevenshtein is not imported\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Add `python-Levenshtein` in my project\r\n2. `zappa deploy/update`\r\n3. Get the importError\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.51.0\r\n* Operating System and Python version: Mac OS X 10.15.1 Python 3.7\r\n* The output of `pip freeze`:\r\n```aniso8601==8.0.0\r\nargcomplete==1.11.1\r\nboto3==1.12.23\r\nbotocore==1.15.23\r\ncertifi==2019.11.28\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nclick==7.1.1\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nfast-autocomplete==0.6.0\r\nFlask==1.1.1\r\nFlask-RESTful==0.3.8\r\nfuture==0.18.2\r\nhjson==3.0.1\r\nidna==2.9\r\nimportlib-metadata==1.5.0\r\nitsdangerous==1.1.0\r\nJinja2==2.11.1\r\njmespath==0.9.5\r\nkappa==0.6.0\r\nMarkupSafe==1.1.1\r\npip-tools==4.5.1\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-Levenshtein==0.12.0\r\npython-slugify==4.0.0\r\npytz==2019.3\r\nPyYAML==5.3\r\nrequests==2.23.0\r\ns3transfer==0.3.3\r\nsix==1.14.0\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntqdm==4.43.0\r\ntroposphere==2.6.0\r\nurllib3==1.25.8\r\nWerkzeug==0.16.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.51.0\r\nzipp==3.1.0\r\n```\r\n* Your `zappa_settings.json`: \r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"app.app\",\r\n        \"profile_name\": \"zappa\",\r\n        \"project_name\": \"lambda-related-\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"\",\r\n        \"slim_handler\": false,\r\n        \"manage_roles\": false,\r\n        \"role_name\": \"ZappaRole\",\r\n        \"role_arn\": \"\",\r\n    }\r\n}\r\n```\r\nThank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2062", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2062/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2062/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2062/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2062", "id": 579280789, "node_id": "MDU6SXNzdWU1NzkyODA3ODk=", "number": 2062, "title": "Module not found error", "user": {"login": "serendipity1004", "id": 20388249, "node_id": "MDQ6VXNlcjIwMzg4MjQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/20388249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/serendipity1004", "html_url": "https://github.com/serendipity1004", "followers_url": "https://api.github.com/users/serendipity1004/followers", "following_url": "https://api.github.com/users/serendipity1004/following{/other_user}", "gists_url": "https://api.github.com/users/serendipity1004/gists{/gist_id}", "starred_url": "https://api.github.com/users/serendipity1004/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/serendipity1004/subscriptions", "organizations_url": "https://api.github.com/users/serendipity1004/orgs", "repos_url": "https://api.github.com/users/serendipity1004/repos", "events_url": "https://api.github.com/users/serendipity1004/events{/privacy}", "received_events_url": "https://api.github.com/users/serendipity1004/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-11T13:53:02Z", "updated_at": "2020-03-12T03:33:39Z", "closed_at": "2020-03-12T03:33:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run `zappa deploy stag` I get following error in the cloud watch\r\n\r\n```\r\n[ERROR] ModuleNotFoundError: No module named 'user'\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 609, in lambda_handler\r\n    return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 240, in lambda_handler\r\n    handler = cls()\r\n  File \"/var/task/handler.py\", line 146, in __init__\r\n    wsgi_app_function = get_django_wsgi(self.settings.DJANGO_SETTINGS)\r\n  File \"/var/task/zappa/ext/django_zappa.py\", line 20, in get_django_wsgi\r\n    return get_wsgi_application()\r\n  File \"/var/task/django/core/wsgi.py\", line 12, in get_wsgi_application\r\n    django.setup(set_prefix=False)\r\n  File \"/var/task/django/__init__.py\", line 24, in setup\r\n    apps.populate(settings.INSTALLED_APPS)\r\n  File \"/var/task/django/apps/registry.py\", line 91, in populate\r\n    app_config = AppConfig.create(entry)\r\n  File \"/var/task/django/apps/config.py\", line 90, in create\r\n    module = import_module(entry)\r\n  File \"/var/lang/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 965, in _find_and_load_unlocked\r\n```\r\n\r\nI have included the app like below in the django settings.py\r\n\r\n```\r\nINSTALLED_APPS = [\r\n    'django.contrib.admin',\r\n    'django.contrib.auth',\r\n    'django.contrib.contenttypes',\r\n    'django.contrib.sessions',\r\n    'django.contrib.messages',\r\n    'django.contrib.staticfiles',\r\n    'rest_framework',\r\n    'django_filters',\r\n    'rest_framework.authtoken',\r\n    'storages',\r\n    'user',\r\n    'core',\r\n    'company',\r\n    'job_post',\r\n    'post',\r\n]\r\n```\r\n\r\nIt's not able to import the first app that I have created - the user app.\r\n\r\nI am currently using pipenv as virtual environment and following is my requirements.txt file\r\n\r\n```\r\nargcomplete==1.11.1\r\nasgiref==3.2.4\r\nboto3==1.12.18\r\nbotocore==1.15.18\r\ncertifi==2019.11.28\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nclick==7.1.1\r\nDjango==3.0.4\r\ndjango-filter==2.2.0\r\ndjango-storages==1.9.1\r\ndjangorestframework==3.11.0\r\ndjangorestframework-camel-case==1.1.2\r\ndocutils==0.15.2\r\ndrf-nested-routers==0.91\r\ndurationpy==0.5\r\nfuture==0.18.2\r\nget==2019.4.13\r\ngunicorn==20.0.4\r\nhjson==3.0.1\r\nidna==2.9\r\njmespath==0.9.5\r\nkappa==0.6.0\r\nMarkdown==3.2.1\r\nPillow==7.0.0\r\npip-tools==4.5.1\r\nplacebo==0.9.0\r\npost==2019.4.13\r\npsycopg2-binary==2.8.4\r\npublic==2019.4.13\r\npython-dateutil==2.6.1\r\npython-slugify==4.0.0\r\npytz==2019.3\r\nPyYAML==5.3\r\nquery-string==2019.4.13\r\nrequest==2019.4.13\r\nrequests==2.23.0\r\ns3transfer==0.3.3\r\nsix==1.14.0\r\nsqlparse==0.3.1\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntqdm==4.43.0\r\ntroposphere==2.6.0\r\nurllib3==1.25.8\r\nWerkzeug==0.16.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.51.0\r\n```\r\n\r\nWhat could possibly be the problem? The project runs no problem locally.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2061", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2061/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2061/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2061/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2061", "id": 579125551, "node_id": "MDU6SXNzdWU1NzkxMjU1NTE=", "number": 2061, "title": "Error on deploy: botocore.exceptions.ConnectTimeoutError", "user": {"login": "kwangsooshin", "id": 29035439, "node_id": "MDQ6VXNlcjI5MDM1NDM5", "avatar_url": "https://avatars3.githubusercontent.com/u/29035439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwangsooshin", "html_url": "https://github.com/kwangsooshin", "followers_url": "https://api.github.com/users/kwangsooshin/followers", "following_url": "https://api.github.com/users/kwangsooshin/following{/other_user}", "gists_url": "https://api.github.com/users/kwangsooshin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwangsooshin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwangsooshin/subscriptions", "organizations_url": "https://api.github.com/users/kwangsooshin/orgs", "repos_url": "https://api.github.com/users/kwangsooshin/repos", "events_url": "https://api.github.com/users/kwangsooshin/events{/privacy}", "received_events_url": "https://api.github.com/users/kwangsooshin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-11T09:35:38Z", "updated_at": "2020-03-16T01:24:20Z", "closed_at": "2020-03-16T01:24:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 3.6/3.7/3.8 -->\r\n\r\nWhne I try to deploy a lambda with zappa, I have the following error:\r\n\r\n* zappa tail\r\n```\r\n[1583918839541] [DEBUG] 2020-03-11T09:27:19.541Z 0c3c554a-eb41-4a26-a3a0-193979f79945 Converted retries value: False -> Retry(total=False, connect=None, read=None, redirect=0, status=None)\r\n[1583918839541] [DEBUG] 2020-03-11T09:27:19.541Z 0c3c554a-eb41-4a26-a3a0-193979f79945 Starting new HTTPS connection (1): {MY_S3_BUCKET}.s3.ap-northeast-2.amazonaws.com:443\r\n                                                                                  ......\r\n[1583918878934] Traceback (most recent call last):\r\n[1583918878934] File \"/var/task/urllib3/connection.py\", line 160, in _new_conn\r\n[1583918878934] (self._dns_host, self.port), self.timeout, **extra_kw)\r\n[1583918878934] File \"/var/task/urllib3/util/connection.py\", line 80, in create_connection\r\n[1583918878934] raise err\r\n[1583918878934] File \"/var/task/urllib3/util/connection.py\", line 70, in create_connection\r\n[1583918878934] sock.connect(sa)\r\n[1583918878934] socket.timeout: timed out\r\n[1583918878934] During handling of the above exception, another exception occurred:\r\n[1583918878934] Traceback (most recent call last):\r\n[1583918878934] File \"/var/task/botocore/httpsession.py\", line 262, in send\r\n[1583918878934] chunked=self._chunked(request.headers),\r\n[1583918878934] File \"/var/task/urllib3/connectionpool.py\", line 641, in urlopen\r\n[1583918878934] _stacktrace=sys.exc_info()[2])\r\n[1583918878934] File \"/var/task/urllib3/util/retry.py\", line 344, in increment\r\n[1583918878934] raise six.reraise(type(error), error, _stacktrace)\r\n[1583918878934] File \"/var/task/urllib3/packages/six.py\", line 686, in reraise\r\n[1583918878934] raise value\r\n[1583918878934] File \"/var/task/urllib3/connectionpool.py\", line 603, in urlopen\r\n[1583918878934] chunked=chunked)\r\n[1583918878934] File \"/var/task/urllib3/connectionpool.py\", line 344, in _make_request\r\n[1583918878934] self._validate_conn(conn)\r\n[1583918878934] File \"/var/task/urllib3/connectionpool.py\", line 843, in _validate_conn\r\n[1583918878934] conn.connect()\r\n[1583918878934] File \"/var/task/urllib3/connection.py\", line 316, in connect\r\n[1583918878934] conn = self._new_conn()\r\n[1583918878934] File \"/var/task/urllib3/connection.py\", line 165, in _new_conn\r\n[1583918878934] (self.host, self.timeout))\r\n[1583918878934] urllib3.exceptions.ConnectTimeoutError: (<botocore.awsrequest.AWSHTTPSConnection object at 0x7f31a4048c10>, 'Connection to {MY_ZAPPA_BUCKET}.s3.ap-northeast-2.amazonaws.com timed out. (connect timeout=60)')\r\n[1583918878934] During handling of the above exception, another exception occurred:\r\n[1583918878934] Traceback (most recent call last):\r\n[1583918878934] File \"/var/task/botocore/endpoint.py\", line 200, in _do_get_response\r\n[1583918878934] http_response = self._send(request)\r\n[1583918878934] File \"/var/task/botocore/endpoint.py\", line 244, in _send\r\n[1583918878934] return self.http_session.send(request)\r\n[1583918878934] File \"/var/task/botocore/httpsession.py\", line 286, in send\r\n[1583918878934] raise ConnectTimeoutError(endpoint_url=request.url, error=e)\r\n[1583918878934] botocore.exceptions.ConnectTimeoutError: Connect timeout on endpoint URL: \"https://{MY_S3_BUCKET}.ap-northeast-2.amazonaws.com/dev_{MY_PROJECT_NAME}_current_project.tar.gz\"\r\n```\r\n\r\nAccording to the error, it seems that lambda does not have access to the s3 bucket. However, when I checked s3, I found that the `{MY_S3_BUCKET}` bucket was created and the `dev_{MY_PROJECT_NAME}_current_project.tar.gz` file uploaded well inside. (The file size is 120MB.)\r\n\r\nWhat is problem? And What should I do?\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.51.0\r\n* Operating System and Python version: python3.7\r\n* The output of `pip freeze`:\r\n```\r\naiohttp==3.5.4\r\nAPScheduler==3.6.0\r\nargcomplete==1.11.1\r\nasn1crypto==0.24.0\r\nasync-timeout==3.0.1\r\nattrs==19.1.0\r\nbcrypt==3.1.6\r\nboto3==1.9.170\r\nbotocore==1.12.170\r\ncertifi==2019.6.16\r\ncffi==1.12.3\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nClick==7.0\r\ncolorlog==4.0.2\r\ncoreapi==2.3.3\r\ncoreschema==0.0.4\r\ncryptography==2.7\r\ncycler==0.10.0\r\nDjango==2.2.10\r\ndjango-admin-rangefilter==0.5.2\r\ndjango-cleanup==3.2.0\r\ndjango-cors-middleware==1.3.1\r\ndjango-debug-toolbar==1.11\r\ndjango-extensions==2.1.9\r\ndjango-json-widget==0.2.0\r\ndjango-netfields==1.0.1\r\ndjango-render-block==0.6\r\ndjango-sendgrid-v5==0.8.0\r\ndjango-split-settings==1.0.0\r\ndjango-storages==1.7.1\r\ndjango-templated-email==2.3.0\r\ndjangorestframework==3.10.2\r\ndjangorestframework-jwt==1.11.0\r\ndocutils==0.14\r\ndrf-writable-nested==0.5.1\r\ndrf-yasg==1.16.1\r\ndurationpy==0.5\r\nfuture==0.17.1\r\ngunicorn==19.9.0\r\nhjson==3.0.1\r\nidna==2.8\r\nimportlib-metadata==1.5.0\r\ninflection==0.3.1\r\nitypes==1.1.0\r\nJinja2==2.10.1\r\njmespath==0.9.4\r\njsonpointer==2.0\r\njsonschema==3.0.1\r\nkappa==0.6.0\r\nkiwisolver==1.1.0\r\nMarkupSafe==1.1.1\r\nmatplotlib==3.1.0\r\nmultidict==4.5.2\r\nnetaddr==0.7.19\r\nnumpy==1.16.4\r\nopencv-python==4.1.0.25\r\npackaging==19.1\r\nparamiko==2.5.0\r\nPillow==6.2.0\r\npip-tools==4.5.1\r\npkg-resources==0.0.0\r\nplacebo==0.9.0\r\npsutil==5.6.3\r\npsycopg2-binary==2.8.4\r\npyasn1==0.4.8\r\npycparser==2.19\r\npydicom==1.3.0\r\nPyJWT==1.7.1\r\nPyNaCl==1.3.0\r\npyparsing==2.4.0\r\npyrsistent==0.15.2\r\npython-dateutil==2.6.0\r\npython-dotenv==0.10.3\r\npython-http-client==3.1.0\r\npython-slugify==4.0.0\r\npytz==2019.1\r\nPyYAML==5.1.1\r\nrequests==2.22.0\r\nruamel.yaml==0.15.97\r\ns3transfer==0.2.1\r\nscipy==1.3.0\r\nsendgrid==6.0.5\r\nsentry-sdk==0.14.0\r\nsix==1.12.0\r\nslacker==0.13.0\r\nsqlparse==0.3.0\r\nswagger-spec-validator==2.4.3\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntqdm==4.43.0\r\ntroposphere==2.6.0\r\ntzlocal==1.5.1\r\nuritemplate==3.0.1\r\nurllib3==1.25.3\r\nWerkzeug==0.16.1\r\nwsgi-request-logger==0.4.6\r\nyarl==1.3.0\r\nzappa==0.51.0\r\nzipp==3.1.0\r\n```\r\n* Link to your project (optional): Private!\r\n* Your `zappa_settings.json`: \r\n```\r\n{\r\n    \"dev\": {\r\n        \"aws_region\": \"ap-northeast-2\",\r\n        \"django_settings\": \"core.settings\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"{MY_PROJECT_NAME}\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"{MY_S3_BUCKET}\",\r\n        \"vpc_config\": {\r\n            \"SubnetIds\": [\"subnet-abcd1234\", \"subnet-efgh5678\"],\r\n            \"SecurityGroupIds\": [\"sg-xyz1234567890\"]\r\n        },\r\n        \"memory_size\": 2048,\r\n        \"slim_handler\": true,\r\n        \"timeout_seconds\": 300,\r\n        \"exclude\": [\"pytest*\", \"pytest-*\", \"__pycache__/*\", \".git/*\"]\r\n    }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2052", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2052/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2052/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2052/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2052", "id": 573041359, "node_id": "MDU6SXNzdWU1NzMwNDEzNTk=", "number": 2052, "title": "register_targets fails if application load balancer state is not 'active'", "user": {"login": "dsterne", "id": 751030, "node_id": "MDQ6VXNlcjc1MTAzMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/751030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsterne", "html_url": "https://github.com/dsterne", "followers_url": "https://api.github.com/users/dsterne/followers", "following_url": "https://api.github.com/users/dsterne/following{/other_user}", "gists_url": "https://api.github.com/users/dsterne/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsterne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsterne/subscriptions", "organizations_url": "https://api.github.com/users/dsterne/orgs", "repos_url": "https://api.github.com/users/dsterne/repos", "events_url": "https://api.github.com/users/dsterne/events{/privacy}", "received_events_url": "https://api.github.com/users/dsterne/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-28T22:30:49Z", "updated_at": "2020-03-15T19:40:18Z", "closed_at": "2020-03-15T19:40:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nWhen running a new deploy, the `register_targets` step fails if it's reached before the Application Load Balancer is in active state. \r\n\r\n## Expected Behavior\r\nWait for Application Load Balancer to become active before continuing.\r\n\r\n## Actual Behavior\r\n`deploy_lambda_alb` currently gets a waiter using `get_waiter`, but never actually calls `waiter.wait`\r\n\r\n## Possible Fix\r\nAt line 1341 in `core.py`, add the following:\r\n\r\n```Python\r\n        waiter = self.elbv2_client.get_waiter('load_balancer_available')\r\n        print('Waiting for load balancer [{}] to become active..'.format(load_balancer_arn))\r\n        waiter.wait(LoadBalancerArns=[load_balancer_arn], WaiterConfig={\"Delay\": 3})\r\n```\r\n\r\n## Your Environment\r\n* Zappa version used: 0.48.2, 0.49.0, 0.50.0\r\n* Operating System and Python version: Ubuntu 16.04.6, Python 3.7.5\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2050", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2050/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2050/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2050/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2050", "id": 572849715, "node_id": "MDU6SXNzdWU1NzI4NDk3MTU=", "number": 2050, "title": "Zappa Deployment to AWS Lamda not working with MSSQL", "user": {"login": "ORC-1", "id": 16105527, "node_id": "MDQ6VXNlcjE2MTA1NTI3", "avatar_url": "https://avatars2.githubusercontent.com/u/16105527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ORC-1", "html_url": "https://github.com/ORC-1", "followers_url": "https://api.github.com/users/ORC-1/followers", "following_url": "https://api.github.com/users/ORC-1/following{/other_user}", "gists_url": "https://api.github.com/users/ORC-1/gists{/gist_id}", "starred_url": "https://api.github.com/users/ORC-1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ORC-1/subscriptions", "organizations_url": "https://api.github.com/users/ORC-1/orgs", "repos_url": "https://api.github.com/users/ORC-1/repos", "events_url": "https://api.github.com/users/ORC-1/events{/privacy}", "received_events_url": "https://api.github.com/users/ORC-1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-28T16:09:41Z", "updated_at": "2020-03-06T05:16:54Z", "closed_at": "2020-03-06T05:16:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Django apps using MSSQL as Database deployed using Zappa, fails with error: ImproperlyConfigured(\"Error loading pyodbc module: %s\" % e)s_removeddulele named 'pyodbc'\r\neven if installed and works properly on local environment\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: zappa 0.50.0\r\n* Operating System and Python version: Linux| python 3.7\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2048", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2048/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2048/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2048/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2048", "id": 572823502, "node_id": "MDU6SXNzdWU1NzI4MjM1MDI=", "number": 2048, "title": "Syntax warning due to comparison of literals using is in Python 3.8", "user": {"login": "tirkarthi", "id": 3972343, "node_id": "MDQ6VXNlcjM5NzIzNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/3972343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tirkarthi", "html_url": "https://github.com/tirkarthi", "followers_url": "https://api.github.com/users/tirkarthi/followers", "following_url": "https://api.github.com/users/tirkarthi/following{/other_user}", "gists_url": "https://api.github.com/users/tirkarthi/gists{/gist_id}", "starred_url": "https://api.github.com/users/tirkarthi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tirkarthi/subscriptions", "organizations_url": "https://api.github.com/users/tirkarthi/orgs", "repos_url": "https://api.github.com/users/tirkarthi/repos", "events_url": "https://api.github.com/users/tirkarthi/events{/privacy}", "received_events_url": "https://api.github.com/users/tirkarthi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-28T15:24:42Z", "updated_at": "2020-03-01T21:05:57Z", "closed_at": "2020-03-01T21:05:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Context\r\n\r\nSyntax warning due to comparison of literals using is.\r\n\r\n## Possible Fix\r\n\r\nUse == and != as suggested in the warning\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\nfind . -iname '*.py'  | xargs -P 4 -I{} python -Walways -m py_compile {} \r\n\r\n./zappa/core.py:2026: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  elif key is 'LambdaConfig':\r\n./zappa/cli.py:1379: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  if token.count('-') is 4 and token.replace('-', '').isalnum():\r\n./zappa/cli.py:2513: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  if (token.count('.') is 3 and token.replace('.', '').isnumeric()):\r\n./zappa/cli.py:2548: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  if token.count('-') is 4 and token.replace('-', '').isalnum():\r\n./zappa/cli.py:2555: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  if token.count('.') is 3 and token.replace('.', '').isnumeric():\r\n./example/authmodule.py:78: DeprecationWarning: invalid escape sequence \\*\r\n  pathRegex = \"^[/.a-zA-Z0-9-\\*]+$\"\r\n```\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: master\r\n* Operating System and Python version: Python 3.8\r\n* The output of `pip freeze`:\r\n* Link to your project (optional):\r\n* Your `zappa_settings.json`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2040", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2040/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2040/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2040/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2040", "id": 569850166, "node_id": "MDU6SXNzdWU1Njk4NTAxNjY=", "number": 2040, "title": "Not sure what's causing this error.", "user": {"login": "jaoxford", "id": 26263928, "node_id": "MDQ6VXNlcjI2MjYzOTI4", "avatar_url": "https://avatars1.githubusercontent.com/u/26263928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaoxford", "html_url": "https://github.com/jaoxford", "followers_url": "https://api.github.com/users/jaoxford/followers", "following_url": "https://api.github.com/users/jaoxford/following{/other_user}", "gists_url": "https://api.github.com/users/jaoxford/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaoxford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaoxford/subscriptions", "organizations_url": "https://api.github.com/users/jaoxford/orgs", "repos_url": "https://api.github.com/users/jaoxford/repos", "events_url": "https://api.github.com/users/jaoxford/events{/privacy}", "received_events_url": "https://api.github.com/users/jaoxford/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T13:18:34Z", "updated_at": "2020-03-12T10:49:12Z", "closed_at": "2020-03-12T10:49:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "The application I'm creating receives messages from an SQS queue and performs some Database interacation. Which works the first time.\r\nBut then when trying to run again, I get this message on the Lambda application:\r\n```\r\n\"{'message': 'An uncaught exception happened while servicing this request. You can investigate this with the `zappa tail` command.', 'traceback': ['Traceback (most recent call last):\\\\n', '  File \\\"/var/task/handler.py\\\", line 531, in handler\\\\n    with Response.from_app(self.wsgi_app, environ) as response:\\\\n', '  File \\\"/var/task/werkzeug/wrappers/base_response.py\\\", line 287, in from_app\\\\n    return cls(*_run_wsgi_app(app, environ, buffered))\\\\n', '  File \\\"/var/task/werkzeug/test.py\\\", line 1096, in run_wsgi_app\\\\n    app_rv = app(environ, start_response)\\\\n', \\\"TypeError: 'NoneType' object is not callable\\\\n\\\"]}\"\r\n```\r\n\r\nAny ideas what this is?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2039", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2039/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2039/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2039/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2039", "id": 569627579, "node_id": "MDU6SXNzdWU1Njk2Mjc1Nzk=", "number": 2039, "title": "Doppins automated PRs", "user": {"login": "mbeacom", "id": 7315957, "node_id": "MDQ6VXNlcjczMTU5NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7315957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbeacom", "html_url": "https://github.com/mbeacom", "followers_url": "https://api.github.com/users/mbeacom/followers", "following_url": "https://api.github.com/users/mbeacom/following{/other_user}", "gists_url": "https://api.github.com/users/mbeacom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbeacom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbeacom/subscriptions", "organizations_url": "https://api.github.com/users/mbeacom/orgs", "repos_url": "https://api.github.com/users/mbeacom/repos", "events_url": "https://api.github.com/users/mbeacom/events{/privacy}", "received_events_url": "https://api.github.com/users/mbeacom/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T04:18:06Z", "updated_at": "2020-02-29T02:32:17Z", "closed_at": "2020-02-24T13:31:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Is there any chance a collaborator could disable doppins and cleanup all of the conflicting PRs spanning back to 2017..?  That would eliminate 38 unnecessary/wont fix PRs from the total 130 currently open.\r\nThe doppins integration seems to have been a problem since it was enabled... and dependency management in general.\r\n\r\nRefs:\r\n#1312 \r\n#1678 \r\n\r\nCC @mcrowson @jneves ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2034", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2034/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2034/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2034/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2034", "id": 568804567, "node_id": "MDU6SXNzdWU1Njg4MDQ1Njc=", "number": 2034, "title": "Fix simple typo: whenvever -> whenever", "user": {"login": "timgates42", "id": 47873678, "node_id": "MDQ6VXNlcjQ3ODczNjc4", "avatar_url": "https://avatars1.githubusercontent.com/u/47873678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timgates42", "html_url": "https://github.com/timgates42", "followers_url": "https://api.github.com/users/timgates42/followers", "following_url": "https://api.github.com/users/timgates42/following{/other_user}", "gists_url": "https://api.github.com/users/timgates42/gists{/gist_id}", "starred_url": "https://api.github.com/users/timgates42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timgates42/subscriptions", "organizations_url": "https://api.github.com/users/timgates42/orgs", "repos_url": "https://api.github.com/users/timgates42/repos", "events_url": "https://api.github.com/users/timgates42/events{/privacy}", "received_events_url": "https://api.github.com/users/timgates42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-21T08:16:40Z", "updated_at": "2020-02-21T09:13:49Z", "closed_at": "2020-02-21T09:13:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There is a small typo in docs/domain_with_free_ssl_dns.md.\nShould read `whenever` rather than `whenvever`.\n\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2031", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2031/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2031/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2031/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2031", "id": 568617757, "node_id": "MDU6SXNzdWU1Njg2MTc3NTc=", "number": 2031, "title": "Latest version is not hosted on Github and no requirements.in file on pypi.org hosted package", "user": {"login": "0xFF1E071F", "id": 55749371, "node_id": "MDQ6VXNlcjU1NzQ5Mzcx", "avatar_url": "https://avatars1.githubusercontent.com/u/55749371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0xFF1E071F", "html_url": "https://github.com/0xFF1E071F", "followers_url": "https://api.github.com/users/0xFF1E071F/followers", "following_url": "https://api.github.com/users/0xFF1E071F/following{/other_user}", "gists_url": "https://api.github.com/users/0xFF1E071F/gists{/gist_id}", "starred_url": "https://api.github.com/users/0xFF1E071F/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0xFF1E071F/subscriptions", "organizations_url": "https://api.github.com/users/0xFF1E071F/orgs", "repos_url": "https://api.github.com/users/0xFF1E071F/repos", "events_url": "https://api.github.com/users/0xFF1E071F/events{/privacy}", "received_events_url": "https://api.github.com/users/0xFF1E071F/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "jneves", "id": 53665, "node_id": "MDQ6VXNlcjUzNjY1", "avatar_url": "https://avatars1.githubusercontent.com/u/53665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jneves", "html_url": "https://github.com/jneves", "followers_url": "https://api.github.com/users/jneves/followers", "following_url": "https://api.github.com/users/jneves/following{/other_user}", "gists_url": "https://api.github.com/users/jneves/gists{/gist_id}", "starred_url": "https://api.github.com/users/jneves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jneves/subscriptions", "organizations_url": "https://api.github.com/users/jneves/orgs", "repos_url": "https://api.github.com/users/jneves/repos", "events_url": "https://api.github.com/users/jneves/events{/privacy}", "received_events_url": "https://api.github.com/users/jneves/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jneves", "id": 53665, "node_id": "MDQ6VXNlcjUzNjY1", "avatar_url": "https://avatars1.githubusercontent.com/u/53665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jneves", "html_url": "https://github.com/jneves", "followers_url": "https://api.github.com/users/jneves/followers", "following_url": "https://api.github.com/users/jneves/following{/other_user}", "gists_url": "https://api.github.com/users/jneves/gists{/gist_id}", "starred_url": "https://api.github.com/users/jneves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jneves/subscriptions", "organizations_url": "https://api.github.com/users/jneves/orgs", "repos_url": "https://api.github.com/users/jneves/repos", "events_url": "https://api.github.com/users/jneves/events{/privacy}", "received_events_url": "https://api.github.com/users/jneves/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-20T22:38:08Z", "updated_at": "2020-02-21T18:24:26Z", "closed_at": "2020-02-20T23:45:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 3.6/3.7/3.8 -->\r\nHello. \r\n1. I couldn't download the latest version 0.50.0 from packages github releases page.\r\n2. Latest version is hosted on pypi.org and there is no \"requirements.in\" file in that package. So i got an error while installing\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nAfter the command `python3.8 setup.py build`, package should be built as intended\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nI got this error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 10, in <module>\r\n    with open(os.path.join(os.path.dirname(__file__), 'requirements.in')) as f:\r\nFileNotFoundError: [Errno 2] No such file or directory: 'requirements.in'\r\n```\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\nI have changed \"requirements.in\" to requirements.txt. We can do that.\r\nBut also you can reupload package with requirements.in file.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.50.0\r\n* Operating System and Python version: PisiLinux and Python3.8\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2003", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2003/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2003/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2003/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2003", "id": 566559824, "node_id": "MDU6SXNzdWU1NjY1NTk4MjQ=", "number": 2003, "title": "Migrate Zappa to pyproject.toml - PEP 518", "user": {"login": "mbeacom", "id": 7315957, "node_id": "MDQ6VXNlcjczMTU5NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7315957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbeacom", "html_url": "https://github.com/mbeacom", "followers_url": "https://api.github.com/users/mbeacom/followers", "following_url": "https://api.github.com/users/mbeacom/following{/other_user}", "gists_url": "https://api.github.com/users/mbeacom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbeacom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbeacom/subscriptions", "organizations_url": "https://api.github.com/users/mbeacom/orgs", "repos_url": "https://api.github.com/users/mbeacom/repos", "events_url": "https://api.github.com/users/mbeacom/events{/privacy}", "received_events_url": "https://api.github.com/users/mbeacom/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-17T23:21:51Z", "updated_at": "2020-02-18T19:21:24Z", "closed_at": "2020-02-18T19:21:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Context\r\n\r\nCurrently, Zappa is using the setup.py, setup.cfg, test_requirements.txt, and requirements.txt to handle Zappa packaging, dependencies, and publishing.\r\n\r\n[PEP-518](https://www.python.org/dev/peps/pep-0518/)\r\n\r\n## Possible Fix\r\n\r\nMigrate to use [Poetry](https://github.com/python-poetry/poetry), removing setup.py in favor of the new pyproject.toml", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/2001", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2001/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2001/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/2001/events", "html_url": "https://github.com/Miserlou/Zappa/issues/2001", "id": 565104229, "node_id": "MDU6SXNzdWU1NjUxMDQyMjk=", "number": 2001, "title": "How do I set up a CI/CD pipeline using AWS CodePipeline for a Flask application deployed using Zappa?", "user": {"login": "rupam-kundu", "id": 56736881, "node_id": "MDQ6VXNlcjU2NzM2ODgx", "avatar_url": "https://avatars2.githubusercontent.com/u/56736881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rupam-kundu", "html_url": "https://github.com/rupam-kundu", "followers_url": "https://api.github.com/users/rupam-kundu/followers", "following_url": "https://api.github.com/users/rupam-kundu/following{/other_user}", "gists_url": "https://api.github.com/users/rupam-kundu/gists{/gist_id}", "starred_url": "https://api.github.com/users/rupam-kundu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rupam-kundu/subscriptions", "organizations_url": "https://api.github.com/users/rupam-kundu/orgs", "repos_url": "https://api.github.com/users/rupam-kundu/repos", "events_url": "https://api.github.com/users/rupam-kundu/events{/privacy}", "received_events_url": "https://api.github.com/users/rupam-kundu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750372319, "node_id": "MDU6TGFiZWw3NTAzNzIzMTk=", "url": "https://api.github.com/repos/Miserlou/Zappa/labels/documentation", "name": "documentation", "color": "e27fc4", "default": true, "description": null}, {"id": 314264719, "node_id": "MDU6TGFiZWwzMTQyNjQ3MTk=", "url": "https://api.github.com/repos/Miserlou/Zappa/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-14T04:54:04Z", "updated_at": "2020-02-24T14:23:03Z", "closed_at": "2020-02-24T14:23:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I need a step by step guide on setting up a CI/CD pipeline using AWS CodePipeline for a Flask application deployed using Zappa.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1997", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1997/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1997/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1997/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1997", "id": 564302151, "node_id": "MDU6SXNzdWU1NjQzMDIxNTE=", "number": 1997, "title": "Using pip-tools to manage dependencies", "user": {"login": "jneves", "id": 53665, "node_id": "MDQ6VXNlcjUzNjY1", "avatar_url": "https://avatars1.githubusercontent.com/u/53665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jneves", "html_url": "https://github.com/jneves", "followers_url": "https://api.github.com/users/jneves/followers", "following_url": "https://api.github.com/users/jneves/following{/other_user}", "gists_url": "https://api.github.com/users/jneves/gists{/gist_id}", "starred_url": "https://api.github.com/users/jneves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jneves/subscriptions", "organizations_url": "https://api.github.com/users/jneves/orgs", "repos_url": "https://api.github.com/users/jneves/repos", "events_url": "https://api.github.com/users/jneves/events{/privacy}", "received_events_url": "https://api.github.com/users/jneves/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-12T22:01:01Z", "updated_at": "2020-03-15T19:39:51Z", "closed_at": "2020-03-15T19:39:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Currently zappa has several pinned dependencies that make it likely that it works, but also makes it hard to keep using as time passes because of other packages dependency updates.\r\n\r\nFor this I believe we should be separating the hard requirements from the pinned ones.\r\n\r\npip-tools allows us to do that, while not having two collections of requirements that need to be updated individually.\r\n\r\n## Context\r\n\r\nSee many complaints throughout the years.\r\n\r\n## Expected Behavior\r\nInstalling zappa should work with an open-ended set of dependencies until a specific one doesn't work.\r\n\r\n## Actual Behavior\r\nSome installations only work if people ignore the dependency requirements.\r\n\r\n## Possible Fix\r\nWith pip-tools, updating a requirement would be adding it in requirements.in or test_requirements.in as needed and then running:\r\n\r\n`pip-compile -o test_requirements.txt requirements.in test_requirements.in && cp test_requirements.txt requirements.txt && pip-compile -o requirements.txt requirements.in`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1994", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1994/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1994/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1994/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1994", "id": 562056788, "node_id": "MDU6SXNzdWU1NjIwNTY3ODg=", "number": 1994, "title": "Drop support for Python versions < 3.6", "user": {"login": "mbeacom", "id": 7315957, "node_id": "MDQ6VXNlcjczMTU5NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7315957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbeacom", "html_url": "https://github.com/mbeacom", "followers_url": "https://api.github.com/users/mbeacom/followers", "following_url": "https://api.github.com/users/mbeacom/following{/other_user}", "gists_url": "https://api.github.com/users/mbeacom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbeacom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbeacom/subscriptions", "organizations_url": "https://api.github.com/users/mbeacom/orgs", "repos_url": "https://api.github.com/users/mbeacom/repos", "events_url": "https://api.github.com/users/mbeacom/events{/privacy}", "received_events_url": "https://api.github.com/users/mbeacom/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-08T18:10:13Z", "updated_at": "2020-02-24T13:27:30Z", "closed_at": "2020-02-24T13:27:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Python 2.x is now end of life and will no longer receive updates.\r\n\r\n##  Context\r\n\r\nPython 2.x and 3.{4, 5} are either no longer supported or don't have official AWS Lambda runtimes.\r\n\r\nSome additional references in favor of this change:\r\n\r\n- [Python Clock - Lapsed](https://pythonclock.org/)\r\n- [Python 3 Statement](https://python3statement.org/)\r\n- [Pandas drops Python 2 support - July 2019](https://pandas.pydata.org/#v0-25-0-final-july-18-2019)\r\n- [NumPy drops Python 2 support - Proposed January 2019](https://numpy.org/neps/nep-0014-dropping-python2.7-proposal.html)\r\n- [Pytest drops Python 2 support](https://pytest.readthedocs.io/en/latest/py27-py34-deprecation.html)\r\n- [PEP-373 - 2.7 Lifecycle](https://www.python.org/dev/peps/pep-0373/)\r\n\r\n## Possible Fix\r\nI propose we add a deprecation notice in the next patch for 0.49.x and increment the minor (`0.49.0` -> `0.50.0`), dropping support for Python versions `< 3.6` by setting python min requirement, removing six/compat support, and convert relevant code to Python 3.6+.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1983", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1983/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1983/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1983/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1983", "id": 552188459, "node_id": "MDU6SXNzdWU1NTIxODg0NTk=", "number": 1983, "title": "General question about large uploads.", "user": {"login": "corpulent", "id": 849403, "node_id": "MDQ6VXNlcjg0OTQwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/849403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corpulent", "html_url": "https://github.com/corpulent", "followers_url": "https://api.github.com/users/corpulent/followers", "following_url": "https://api.github.com/users/corpulent/following{/other_user}", "gists_url": "https://api.github.com/users/corpulent/gists{/gist_id}", "starred_url": "https://api.github.com/users/corpulent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corpulent/subscriptions", "organizations_url": "https://api.github.com/users/corpulent/orgs", "repos_url": "https://api.github.com/users/corpulent/repos", "events_url": "https://api.github.com/users/corpulent/events{/privacy}", "received_events_url": "https://api.github.com/users/corpulent/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-20T09:52:50Z", "updated_at": "2020-01-21T22:13:24Z", "closed_at": "2020-01-21T22:13:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running DRF.\r\n\r\n```\r\ndjango==3.0.1\r\ndjango-storages==1.8\r\ndjango-filter==2.2.0\r\ndjangorestframework==3.11.0\r\ndjangorestframework-jwt==1.11.0\r\n\r\npsycopg2-binary==2.8.4\r\nzappa==0.48.2\r\ndjango-anymail[mailgun]==7.0.0\r\nbotocore==1.14.5\r\nboto3==1.11.5\r\npython-magic==0.4.15\r\n```\r\n\r\nAnd I am trying to upload a large file over 10MB through an endpoint I created.  Small files work.  I am not seeing any errors in the Django/Lambda logs.  The only response I get is:\r\n\r\n```\r\n{\r\n    \"message\": \"Internal server error\"\r\n}\r\n```\r\n\r\nI maxed out the lambda memory, and timeout.  Is this a problem with API gateway?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1981", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1981/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1981/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1981/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1981", "id": 550525387, "node_id": "MDU6SXNzdWU1NTA1MjUzODc=", "number": 1981, "title": "PLEASE DONATE A SMALL AMOUNT TO THIS PROJECT", "user": {"login": "mattmillen888", "id": 25214970, "node_id": "MDQ6VXNlcjI1MjE0OTcw", "avatar_url": "https://avatars2.githubusercontent.com/u/25214970?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattmillen888", "html_url": "https://github.com/mattmillen888", "followers_url": "https://api.github.com/users/mattmillen888/followers", "following_url": "https://api.github.com/users/mattmillen888/following{/other_user}", "gists_url": "https://api.github.com/users/mattmillen888/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattmillen888/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattmillen888/subscriptions", "organizations_url": "https://api.github.com/users/mattmillen888/orgs", "repos_url": "https://api.github.com/users/mattmillen888/repos", "events_url": "https://api.github.com/users/mattmillen888/events{/privacy}", "received_events_url": "https://api.github.com/users/mattmillen888/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-16T01:46:06Z", "updated_at": "2020-03-03T05:56:54Z", "closed_at": "2020-03-03T05:56:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "It takes a-lot of time and effort to create great products\r\n\r\nBy donating a very small amount every month to this project it would help to add lots of enhancements and keep the project updated and going with regular updates.\r\n\r\nToo many people expect everything for nothing these days and good people get tired of doing things for nothing.\r\n\r\nAs I see it the small amount that Rich is asking to keep him and his team going with regular updates is minimal for the great product that Zappa is.\r\n\r\nI find it very disappointing that the Python community has not supported him more. If everyone was just to donate a small amount each month, they would easily achieve their goal plus more, which would only mean things get resolved quicker with more developers!\r\n\r\nHopefully the next person that sees this will act as i did and donate!\r\nhttps://www.patreon.com/zappa\r\n\r\nLong live Zappa!!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1979", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1979/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1979/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1979/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1979", "id": 546622849, "node_id": "MDU6SXNzdWU1NDY2MjI4NDk=", "number": 1979, "title": "dead link", "user": {"login": "shinriyo", "id": 396927, "node_id": "MDQ6VXNlcjM5NjkyNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/396927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shinriyo", "html_url": "https://github.com/shinriyo", "followers_url": "https://api.github.com/users/shinriyo/followers", "following_url": "https://api.github.com/users/shinriyo/following{/other_user}", "gists_url": "https://api.github.com/users/shinriyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/shinriyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shinriyo/subscriptions", "organizations_url": "https://api.github.com/users/shinriyo/orgs", "repos_url": "https://api.github.com/users/shinriyo/repos", "events_url": "https://api.github.com/users/shinriyo/events{/privacy}", "received_events_url": "https://api.github.com/users/shinriyo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-08T03:23:10Z", "updated_at": "2020-03-15T19:41:02Z", "closed_at": "2020-03-15T19:41:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "On the home page of the github, the link was dead.\r\nhttps://blog.zappa.io/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1976", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1976/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1976/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1976/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1976", "id": 543281349, "node_id": "MDU6SXNzdWU1NDMyODEzNDk=", "number": 1976, "title": "Zappa Websites are not working", "user": {"login": "kareemcoding", "id": 32601343, "node_id": "MDQ6VXNlcjMyNjAxMzQz", "avatar_url": "https://avatars3.githubusercontent.com/u/32601343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kareemcoding", "html_url": "https://github.com/kareemcoding", "followers_url": "https://api.github.com/users/kareemcoding/followers", "following_url": "https://api.github.com/users/kareemcoding/following{/other_user}", "gists_url": "https://api.github.com/users/kareemcoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/kareemcoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kareemcoding/subscriptions", "organizations_url": "https://api.github.com/users/kareemcoding/orgs", "repos_url": "https://api.github.com/users/kareemcoding/repos", "events_url": "https://api.github.com/users/kareemcoding/events{/privacy}", "received_events_url": "https://api.github.com/users/kareemcoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-12-28T21:12:13Z", "updated_at": "2020-06-04T07:14:35Z", "closed_at": "2020-05-11T21:17:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm unable to access any websites for Zappa.\r\n\r\nBoth the blog (https://blog.zappa.io/) or the root websites (https://zappa.io/)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1975", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1975/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1975/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1975/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1975", "id": 542434343, "node_id": "MDU6SXNzdWU1NDI0MzQzNDM=", "number": 1975, "title": "'NoneType' object is not callable in django", "user": {"login": "jyr", "id": 59930, "node_id": "MDQ6VXNlcjU5OTMw", "avatar_url": "https://avatars3.githubusercontent.com/u/59930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyr", "html_url": "https://github.com/jyr", "followers_url": "https://api.github.com/users/jyr/followers", "following_url": "https://api.github.com/users/jyr/following{/other_user}", "gists_url": "https://api.github.com/users/jyr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyr/subscriptions", "organizations_url": "https://api.github.com/users/jyr/orgs", "repos_url": "https://api.github.com/users/jyr/repos", "events_url": "https://api.github.com/users/jyr/events{/privacy}", "received_events_url": "https://api.github.com/users/jyr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-26T05:05:18Z", "updated_at": "2019-12-28T20:34:32Z", "closed_at": "2019-12-28T20:34:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't run a functional deploy on django \r\n\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\nI running zappa on docker using [virtualenv](https://github.com/jyr/true-challenge/blob/part1/part1/build/Dockerfile#L14)\r\n\r\n## Expected Behavior\r\nI want to have my project running on aws lambda with api gateway.\r\n\r\n## Actual Behavior\r\nAfter run:\r\n\r\n```\r\nzappa deploy dev -s realstate/zappa_settings.json; zappa tail -s realstate/zappa_settings.json\r\n```\r\n\r\nI get:\r\n\r\n```\r\n[1577335548070] Instancing..\r\n\u00a0\u00a0\u00a0\u00a0from django.core.wsgi import get_wsgi_application in get_django_wsgi\r\n[1577335582193] [DEBUG] 2019-12-26T04:46:22.193Z a08b952c-cfbf-401d-854b-0f07ac993d6a Zappa Event: {'time': '2019-12-26T04:45:33Z', 'detail-type': 'Scheduled Event', 'source': 'aws.events', 'account': '423539928029', 'region': 'us-east-2', 'detail': {}, 'version': '0', 'resources': ['arn:aws:events:us-east-2:423539928029:rule/realstate-dev-zappa-keep-warm-handler.keep_warm_callback'], 'id': '724a9dd6-a53d-d09b-fe17-d10fdaff8c77', 'kwargs': {}}\r\n[1577335582193] [DEBUG] 2019-12-26T04:46:22.193Z a08b952c-cfbf-401d-854b-0f07ac993d6a Zappa Event: {}\r\n[1577335583196]\r\n```\r\n\r\nWhen I run curl -c https://mw5oaob23b.execute-api.us-east-2.amazonaws.com/dev/api/v1/listings/, I get error:\r\n\r\n```\r\n[1577335736302] [DEBUG] 2019-12-26T04:48:56.302Z 073d5519-afd2-4d78-9a6a-f0607276de44 Zappa Event: {'resource': '/{proxy+}', 'path': '/api/v1/listings/', 'httpMethod': 'POST', 'headers': {'Accept': '*/*', 'Accept-Encoding': 'gzip, deflate', 'Cache-Control': 'no-cache', 'CloudFront-Forwarded-Proto': 'https', 'CloudFront-Is-Desktop-Viewer': 'true', 'CloudFront-Is-Mobile-Viewer': 'false', 'CloudFront-Is-SmartTV-Viewer': 'false', 'CloudFront-Is-Tablet-Viewer': 'false', 'CloudFront-Viewer-Country': 'MX', 'Content-Type': 'application/json', 'Host': 'mw5oaob12b.execute-api.us-east-2.amazonaws.com', 'Postman-Token': '575978ad-e9cf-447d-b5d9-d95d16e34c9b', 'User-Agent': 'PostmanRuntime/7.21.0', 'Via': '1.1 77b442172bf6094d7d1fbcb54118378e.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': '5jl0HwSlkMk8z7EMPsfplB68cZ2udDDKpadvUQFTb09tUYmtfBBZLQ==', 'X-Amzn-Trace-Id': 'Root=1-5e043bb8-ca09ad2a1fe157ecbc4726f4', 'X-Forwarded-For': '189.189.76.217, 52.46.35.87', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https'}, 'multiValueHeaders': {'Accept': ['*/*'], 'Accept-Encoding': ['gzip, deflate'], 'Cache-Control': ['no-cache'], 'CloudFront-Forwarded-Proto': ['https'], 'CloudFront-Is-Desktop-Viewer': ['true'], 'CloudFront-Is-Mobile-Viewer': ['false'], 'CloudFront-Is-SmartTV-Viewer': ['false'], 'CloudFront-Is-Tablet-Viewer': ['false'], 'CloudFront-Viewer-Country': ['MX'], 'Content-Type': ['application/json'], 'Host': ['mw5oaob12b.execute-api.us-east-2.amazonaws.com'], 'Postman-Token': ['575978ad-e9cf-447d-b5d9-d95d16e34c9b'], 'User-Agent': ['PostmanRuntime/7.21.0'], 'Via': ['1.1 77b442172bf6094d7d1fbcb54118378e.cloudfront.net (CloudFront)'], 'X-Amz-Cf-Id': ['5jl0HwSlkMk8z7EMPsfplB68cZ2udDDKpadvUQFTb09tUYmtfBBZLQ=='], 'X-Amzn-Trace-Id': ['Root=1-5e043bb8-ca09ad2a1fe157ecbc4726f4'], 'X-Forwarded-For': ['189.189.76.217, 52.46.35.87'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https']}, 'queryStringParameters': None, 'multiValueQueryStringParameters': None, 'pathParameters': {'proxy': 'api/v1/listings'}, 'stageVariables': None, 'requestContext': {'resourceId': 'c1c8aw', 'resourcePath': '/{proxy+}', 'httpMethod': 'POST', 'extendedRequestId': 'FS5EzFw7iYcFj2w=', 'requestTime': '26/Dec/2019:04:48:56 +0000', 'path': '/dev/api/v1/listings/', 'accountId': '423539928029', 'protocol': 'HTTP/1.1', 'stage': 'dev', 'domainPrefix': 'mw5oaob12b', 'requestTimeEpoch': 1577335736238, 'requestId': 'f9dc0d89-8b00-4a23-b6cb-8aba30192740', 'identity': {'cognitoIdentityPoolId': None, 'accountId': None, 'cognitoIdentityId': None, 'caller': None, 'sourceIp': '189.189.76.217', 'principalOrgId': None, 'accessKey': None, 'cognitoAuthenticationType': None, 'cognitoAuthenticationProvider': None, 'userArn': None, 'userAgent': 'PostmanRuntime/7.21.0', 'user': None}, 'domainName': 'mw5oaob12b.execute-api.us-east-2.amazonaws.com', 'apiId': 'mw5oaob12b'}, 'body': 'ewogICAgImJhdGhzIjogMSwKICAgICJiZWRzIjogMSwKICAgICJzaXplIjogMjUwLAogICAgInByaWNlIjogMTAwMDAwMCwKICAgICJkZXNjcmlwdGlvbiI6ICJFeGNsdXNpdmEgQ2FzYSBUb3RhbG1lbnRlIHJlbW9kZWxhZGEgZW4gdmVudGEsIHViaWNhZGEgZW4gbGEgY2FsbGUgWWF1dGVwZWMgZGUgbGEgcHJlc3RpZ2lvc2EgQ29sb25pYSBDb25kZXNhLCBxdWUgY29uc2VydmEgZWwgZXN0aWxvIG3DoXMgcHVybyAg4oCcQXJ0IERlY8Oz4oCdIHF1ZSBjYXJhY3Rlcml6YSBhIGxhIENvbG9uaWEuIiwKICAgICJsaXN0aW5nX3R5cGUiOiAiaG91c2UiLAogICAgInNsdWciOiAiYmxhMyIsCiAgICAibG9jYXRpb24iOiB7CiAgICAgICAgInN0cmVldCI6IllhdXRlcGVjLCBDb25kZXNhIiwKICAgICAgICAic3VidXJiIjoiQ29uZGVzYSIsCiAgICAgICAgImNpdHkiOiJDdWF1aHTDqW1vYyIsCiAgICAgICAgInN0YXRlIjoiQ2l1ZGFkIGRlIE3DqXhpY28iLAogICAgICAgICJ6aXBjb2RlIjoiMDYxNDAiLAogICAgICAgICJwb2ludCI6IjE5LjQxMjU3NDgsLTk5LjE3OTUzMTMiCiAgICB9Cn0=', 'isBase64Encoded': True}\r\n[1577335736302] [DEBUG] 2019-12-26T04:48:56.302Z 073d5519-afd2-4d78-9a6a-f0607276de44 host found: [mw5oaob12b.execute-api.us-east-2.amazonaws.com]\r\n[1577335736302] [DEBUG] 2019-12-26T04:48:56.302Z 073d5519-afd2-4d78-9a6a-f0607276de44 amazonaws found in host\r\n[1577335736302] 'NoneType' object is not callable\r\n```\r\nThe message response is:\r\n\r\n```\r\n\"{'message': 'An uncaught exception happened while servicing this request. You can investigate this with the `zappa tail` command.', 'traceback': ['Traceback (most recent call last):\\\\n', '  File \\\"/var/task/handler.py\\\", line 531, in handler\\\\n    with Response.from_app(self.wsgi_app, environ) as response:\\\\n', '  File \\\"/var/task/werkzeug/wrappers/base_response.py\\\", line 287, in from_app\\\\n    return cls(*_run_wsgi_app(app, environ, buffered))\\\\n', '  File \\\"/var/task/werkzeug/wrappers/base_response.py\\\", line 26, in _run_wsgi_app\\\\n    return _run_wsgi_app(*args)\\\\n', '  File \\\"/var/task/werkzeug/test.py\\\", line 1119, in run_wsgi_app\\\\n    app_rv = app(environ, start_response)\\\\n', \\\"TypeError: 'NoneType' object is not callable\\\\n\\\"]}\"\r\n```\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. git clone git@github.com:jyr/true-challenge.git\r\n2. git branch part1\r\n3. cd build; docker-compose up db --build\r\n4. docker-compose exec api /bin/sh -c -l \"zappa deploy dev -s realstate/zappa_settings.json; zappa tail -s realstate/zappa_settings.json\"\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.48.2\r\n* Operating System and Python version: python: 3.7-slim\r\n* The output of `pip freeze`:\r\n\r\n```\r\nargcomplete==1.9.3\r\nasgiref==3.2.3\r\nawscli==1.16.309\r\nboto3==1.10.45\r\nbotocore==1.13.45\r\ncertifi==2019.11.28\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nClick==7.0\r\ncolorama==0.4.1\r\ncoreapi==2.3.3\r\ncoreschema==0.0.4\r\nDjango==3.0.1\r\ndjango-money==1.0\r\ndjangorestframework==3.10.1\r\ndocutils==0.15.2\r\ndrf-yasg==1.17.0\r\ndurationpy==0.5\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\ninflection==0.3.1\r\nitypes==1.1.0\r\nJinja2==2.10.3\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\npackaging==19.2\r\nPillow==6.2.1\r\nplacebo==0.9.0\r\npsycopg2-binary==2.8.4\r\npy-moneyed==0.8.0\r\npyasn1==0.4.8\r\npyparsing==2.4.6\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npytz==2019.3\r\nPyYAML==5.2\r\nrequests==2.22.0\r\nrsa==3.4.2\r\nruamel.yaml==0.16.5\r\nruamel.yaml.clib==0.2.0\r\ns3transfer==0.2.1\r\nsix==1.13.0\r\nsqlparse==0.3.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.5.3\r\nUnidecode==1.1.1\r\nuritemplate==3.0.1\r\nurllib3==1.25.7\r\nvirtualenv==16.7.9\r\nWerkzeug==0.16.0\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\n```\r\n* Link to your project (optional):\r\n\r\nhttps://github.com/jyr/true-challenge/tree/part1\r\n\r\n* Your `zappa_settings.py`: \r\n\r\n```\r\n{\r\n    \"dev\": {\r\n        \"django_settings\": \"realstate.settings\",\r\n        \"profile_name\": \"default\",\r\n\t      \"slim_handler\": false,\r\n\t      \"use_apigateway\": true,\r\n        \"project_name\": \"realstate\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"zappa-dwjphz145\",\r\n        \"debug\": true,\r\n        \"log_level\": \"DEBUG\",\r\n    }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1972", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1972/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1972/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1972/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1972", "id": 538042004, "node_id": "MDU6SXNzdWU1MzgwNDIwMDQ=", "number": 1972, "title": "Zappa throws AccessDenied exception while attempting to upload zip to S3 while AWS CLI can upload files with same profile", "user": {"login": "marekyggdrasil", "id": 8202674, "node_id": "MDQ6VXNlcjgyMDI2NzQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8202674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marekyggdrasil", "html_url": "https://github.com/marekyggdrasil", "followers_url": "https://api.github.com/users/marekyggdrasil/followers", "following_url": "https://api.github.com/users/marekyggdrasil/following{/other_user}", "gists_url": "https://api.github.com/users/marekyggdrasil/gists{/gist_id}", "starred_url": "https://api.github.com/users/marekyggdrasil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marekyggdrasil/subscriptions", "organizations_url": "https://api.github.com/users/marekyggdrasil/orgs", "repos_url": "https://api.github.com/users/marekyggdrasil/repos", "events_url": "https://api.github.com/users/marekyggdrasil/events{/privacy}", "received_events_url": "https://api.github.com/users/marekyggdrasil/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-15T12:07:28Z", "updated_at": "2019-12-15T16:08:17Z", "closed_at": "2019-12-15T16:08:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n\r\nHi all! To make my first deployment using Zappa I cloned your repository and decided to deploy the app from `example` directory.\r\n\r\nWhen I follow your README.md instructions I get `AccessDenied` exception from `botocore`.\r\n\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n\r\nReason why I think it is a bug is I tested my AWS credentials with this `profile` and `bucket` and it uploads files correctly.\r\n\r\n```\r\n$ aws --profile <avs config used in zappa> s3 cp <some file> s3://<s3 bucked used with zappa>\r\nupload: ./setup.py to s3://<s3 bucked used with zappa>/<some file>\r\n```\r\n\r\nFile gets uploaded correctly. When I login to AWS console and open S3 I can see it there.\r\n\r\n\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\nI made sure I'm using Python 3.6, please check reproduction steps for details.\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\nAfter running\r\n\r\n```\r\n$ zappa deploy dev_api\r\n```\r\n\r\nI expect to see the progress bar indicating zip being uploaded to S3, creating API Gateway routes and deploying it.\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\nInstead, I get the following error\r\n\r\n```\r\nCalling deploy for stage dev_api..\r\nCreating zappa-permissions policy on ZappaFlaskRole IAM Role.\r\nDownloading and installing dependencies..\r\n - sqlite==python3: Using precompiled lambda package\r\n'python3.7'\r\nPackaging project as zip.\r\nOh no! An error occurred! :(\r\n\r\n==============\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/zappa/core.py\", line 924, in upload_to_s3\r\n    self.s3_client.head_bucket(Bucket=bucket_name)\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/botocore/client.py\", line 272, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/botocore/client.py\", line 576, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (403) when calling the HeadBucket operation: Forbidden\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/zappa/cli.py\", line 2779, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/zappa/cli.py\", line 509, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/zappa/cli.py\", line 546, in dispatch_command\r\n    self.deploy(self.vargs['zip'])\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/zappa/cli.py\", line 723, in deploy\r\n    self.zip_path, self.s3_bucket_name, disable_progress=self.disable_progress)\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/zappa/core.py\", line 936, in upload_to_s3\r\n    CreateBucketConfiguration={'LocationConstraint': self.aws_region},\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/botocore/client.py\", line 272, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/marek/.pyenv/versions/3.7.4/envs/zappa-project/lib/python3.7/site-packages/botocore/client.py\", line 576, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (AccessDenied) when calling the CreateBucket operation: Access Denied\r\n\r\n==============\r\n\r\nNeed help? Found a bug? Let us know! :D\r\nFile bug reports on GitHub here: https://github.com/Miserlou/Zappa\r\nAnd join our Slack channel here: https://slack.zappa.io\r\nLove!,\r\n ~ Team Zappa!\r\n```\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Login to AWS console and config policy, roles and users as indicated under [this tutorial](https://www.codingforentrepreneurs.com/blog/aws-iam-user-role-policies-zappa-serverless-python), keep bucket name, secret key, arn etc...\r\n2. `aws configure --profile zappa` creates profile name `zappa`, provide credentials from step (1)\r\n2. `git clone git@github.com:Miserlou/Zappa.git --depth 1`, clone repo to fetch the example\r\n3. `cd example` change directory to example\r\n4. Update the `zappa_settings.json` to match one mentioned below in `Your environment` section, mainly to set the local AWS credentials profile, arn etc.\r\n5. `pyenv install 3.6.9` make sure you use `Python 3.6` as recommended\r\n6. `pyenv virtualenv 3.6.9 zappa-project` creates a virtual environment\r\n7. `pyenv local zappa-project` activates the virtual environment\r\n8. `pip install zappa` installs zappa in the virtual environment\r\n9. `zappa deploy dev_api` runs the deployment, here we expect it to fail\r\n10. `aws --profile zappa s3 cp <any-file> s3://<bucket-name>` run this just to upload any file to prove that S3 can be reached with local setup credentials\r\n\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\nZappa version used:\r\n\r\n```\r\n$ zappa -v\r\n0.48.2\r\n```\r\n\r\nOperating System and Python version:\r\n\r\n```\r\n$ sw_vers\r\nProductName:    Mac OS X\r\nProductVersion: 10.14.5\r\nBuildVersion:   18F132\r\n```\r\n\r\n* The output of `pip freeze`:\r\n\r\n```\r\n$ pip freeze\r\nargcomplete==1.9.3\r\nboto3==1.10.39\r\nbotocore==1.13.39\r\ncertifi==2019.11.28\r\ncfn-flip==1.2.2\r\nchardet==3.0.4\r\nClick==7.0\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==5.2\r\nrequests==2.22.0\r\ns3transfer==0.2.1\r\nsix==1.13.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.5.3\r\nUnidecode==1.1.1\r\nurllib3==1.25.7\r\nWerkzeug==0.16.0\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\n```\r\n\r\n* Your `zappa_settings.json`: \r\n\r\n```json\r\n{\r\n    \"dev_api\": {\r\n       \"project_name\": \"dev_api_zappa_test_flask_app\",\r\n       \"keep_warm\": false,\r\n       \"debug\": true,\r\n       \"log_level\": \"DEBUG\",\r\n       \"aws_region\": \"<my-region>\",\r\n       \"s3_bucket\": \"<my-bucket>\",\r\n       \"app_function\": \"app.app\",\r\n       \"http_methods\": [\"GET\"],\r\n       \"parameter_depth\": 1,\r\n       \"timeout_seconds\": 300,\r\n       \"memory_size\": 128,\r\n       \"use_precompiled_packages\": true,\r\n       \"profile_name\": \"<my-profile>\",\r\n       \"role_name\": \"<my-role>\",\r\n       \"role_arn\": \"<my-arn>\"\r\n    }\r\n}\r\n```\r\n\r\nWhere I replace `<my-region>` with the region of my AWS deployment, `<my-bucket>` the name of the bucket I created, `<my-profile>` with local AWS cli profile bound to it and `<my-role>` with role I created in AWS IAM and `<my-arn>` with my ARN string.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1969", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1969/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1969/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1969/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1969", "id": 533514443, "node_id": "MDU6SXNzdWU1MzM1MTQ0NDM=", "number": 1969, "title": "Project still maintained/alive?", "user": {"login": "sometimescool22", "id": 20865218, "node_id": "MDQ6VXNlcjIwODY1MjE4", "avatar_url": "https://avatars0.githubusercontent.com/u/20865218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sometimescool22", "html_url": "https://github.com/sometimescool22", "followers_url": "https://api.github.com/users/sometimescool22/followers", "following_url": "https://api.github.com/users/sometimescool22/following{/other_user}", "gists_url": "https://api.github.com/users/sometimescool22/gists{/gist_id}", "starred_url": "https://api.github.com/users/sometimescool22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sometimescool22/subscriptions", "organizations_url": "https://api.github.com/users/sometimescool22/orgs", "repos_url": "https://api.github.com/users/sometimescool22/repos", "events_url": "https://api.github.com/users/sometimescool22/events{/privacy}", "received_events_url": "https://api.github.com/users/sometimescool22/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2019-12-05T18:16:34Z", "updated_at": "2020-04-06T05:42:56Z", "closed_at": "2020-02-13T23:53:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is the project still alive? Hundreds of open issues and commits are drying up.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1968", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1968/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1968/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1968/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1968", "id": 529664344, "node_id": "MDU6SXNzdWU1Mjk2NjQzNDQ=", "number": 1968, "title": "Add support for Python 3.8", "user": {"login": "jasonrhaas", "id": 7018237, "node_id": "MDQ6VXNlcjcwMTgyMzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7018237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonrhaas", "html_url": "https://github.com/jasonrhaas", "followers_url": "https://api.github.com/users/jasonrhaas/followers", "following_url": "https://api.github.com/users/jasonrhaas/following{/other_user}", "gists_url": "https://api.github.com/users/jasonrhaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonrhaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonrhaas/subscriptions", "organizations_url": "https://api.github.com/users/jasonrhaas/orgs", "repos_url": "https://api.github.com/users/jasonrhaas/repos", "events_url": "https://api.github.com/users/jasonrhaas/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonrhaas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-28T02:53:31Z", "updated_at": "2020-02-05T18:44:57Z", "closed_at": "2020-02-05T18:44:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nAWS Lambda now supports Python 3.8 but Zappa does not.  Supporting Python 3.8 is potentially a big deal since it uses Amazon Linux 2, which includes some C libraries that are important for some Python packages.\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\nZappa should be able to deploy using `runtime: \"python3.8\"`\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\nWhen running `zappa deploy staging`:\r\n\r\n```\r\n[1574908829969] [ERROR] RuntimeError: This version of Python (3.8) is not supported!\r\nZappa (and AWS Lambda) support the following versions of Python: ['2.7', '3.6', '3.7']\r\nTraceback (most recent call last):\r\n\u00a0\u00a0File \"/var/lang/lib/python3.8/imp.py\", line 234, in load_module\r\n\u00a0\u00a0\u00a0\u00a0return load_source(name, filename, file)\r\n\u00a0\u00a0File \"/var/lang/lib/python3.8/imp.py\", line 171, in load_source\r\n\u00a0\u00a0\u00a0\u00a0module = _load(spec)\r\n\u00a0\u00a0File \"<frozen importlib._bootstrap>\", line 702, in _load\r\n\u00a0\u00a0File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\r\n\u00a0\u00a0File \"<frozen importlib._bootstrap_external>\", line 783, in exec_module\r\n\u00a0\u00a0File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n\u00a0\u00a0File \"/var/task/handler.py\", line 22, in <module>\r\n\u00a0\u00a0\u00a0\u00a0from zappa.middleware import ZappaWSGIMiddleware\r\n\u00a0\u00a0File \"/var/task/zappa/__init__.py\", line 12, in <module>\r\n\u00a0\u00a0\u00a0\u00a0raise RuntimeError(err_msg)\r\n```\r\n<!--- Tell us what happens instead -->\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\nPossibly an easy fix is just updating the **__init__.py** file.  Snippet below:\r\n\r\n```\r\nimport sys\r\n\r\nSUPPORTED_VERSIONS = [(2, 7), (3, 6), (3, 7)]\r\n\r\npython_major_version = sys.version_info[0]\r\npython_minor_version = sys.version_info[1]\r\n\r\nif (python_major_version, python_minor_version) not in SUPPORTED_VERSIONS:\r\n    formatted_supported_versions = ['{}.{}'.format(mav, miv) for mav, miv in SUPPORTED_VERSIONS]\r\n    err_msg = 'This version of Python ({}.{}) is not supported!\\n'.format(python_major_version, python_minor_version) +\\\r\n              'Zappa (and AWS Lambda) support the following versions of Python: {}'.format(formatted_supported_versions)\r\n    raise RuntimeError(err_msg)\r\n\r\n__version__ = '0.48.2'\r\n```\r\n\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. `zappa init`.\r\n2. Set the `runtime` variables to `\"python3.8\" in the **zappa_settings.yml** file.\r\n3. `zappa deploy`\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: `zappa==0.48.2`\r\n* Operating System and Python version: Mac OSX 10.13.6.  Python 3.7.4\r\n* The output of `pip freeze`:\r\n```\r\narea==1.1.1\r\nargcomplete==1.9.3\r\natomicwrites==1.3.0\r\nattrs==19.3.0\r\nawslogs==0.11.0\r\nboto3==1.9.251\r\nbotocore==1.12.251\r\ncertifi==2019.9.11\r\ncfn-flip==1.2.1\r\nchardet==3.0.4\r\nClick==7.0\r\nclickclick==1.2.2\r\nconnexion==2.4.0\r\ncoverage==4.5.4\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nFlask==1.1.1\r\nFlask-Cors==3.0.8\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\nimportlib-metadata==0.23\r\ninflection==0.3.1\r\nitsdangerous==1.1.0\r\nJinja2==2.10.3\r\njmespath==0.9.3\r\njsonschema==2.6.0\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\nmgrs==1.3.5\r\nmore-itertools==7.2.0\r\nopenapi-spec-validator==0.2.8\r\npackaging==19.2\r\nplacebo==0.9.0\r\npluggy==0.13.0\r\npy==1.8.0\r\npyparsing==2.4.2\r\npytest==5.2.1\r\npytest-cov==2.8.1\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==5.1.2\r\nrequests==2.22.0\r\ns3transfer==0.2.1\r\nsentry-sdk==0.12.3\r\nShapely==1.6.4.post2\r\nshort-url==1.2.2\r\nsix==1.12.0\r\nsqlparse==0.3.0\r\nswagger-ui-bundle==0.0.5\r\ntermcolor==1.1.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.5.2\r\nUnidecode==1.1.1\r\nurllib3==1.25.6\r\nwcwidth==0.1.7\r\nWerkzeug==0.16.0\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\nzipp==0.6.0\r\n```\r\n\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n\r\n```\r\n---\r\n\r\nfeatures:\r\n  app_function: app.api_app\r\n  # aws_region: us-west-2\r\n  profile_name: xxxx\r\n  s3_bucket: zappa-bazze-events\r\n  exclude:\r\n    - \"*.gz\"\r\n    - \"*.pyc\"\r\n    - \"*.zip\"\r\n    - \".tox\"\r\n    - \"__pycache__\"\r\n    - \"tests\"\r\n    - \".venv\"\r\n    - \".cache\"\r\n    - \".pip-cache\"\r\n    - \".vscode\"\r\n  project_name: events\r\n  domain: example.com\r\n  certificate_arn: arn:aws:acm:us-east-1:294182326609:certificate/889ef603-ed89-433a-af5e-20379c8ff874\r\n  timeout_seconds: 120\r\n  api_key_required: false\r\n  environment_variables:\r\n    APP_MODE: feature\r\n    SENTRY_DSN: ''\r\n  cors: true\r\n  timeout_seconds: 300\r\n  manage_roles: false\r\n  role_name: events-production-ZappaLambdaExecutionRole\r\n  # extra_permissions: {\"Effect\":\"Allow\",\"Action\":[\"athena:*\"],\"Resource\":[\"*\"]}\r\n\r\nstaging:\r\n  extends: features\r\n  domain: example.com\r\n  environment_variables:\r\n    APP_MODE: staging\r\n    SENTRY_DSN: ''\r\n  runtime: \"python3.8\"\r\n\r\nproduction:\r\n  extends: features\r\n  domain: example.com\r\n  environment_variables:\r\n    APP_MODE: production\r\n    SENTRY_DSN: ''\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1967", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1967/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1967/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1967/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1967", "id": 527548782, "node_id": "MDU6SXNzdWU1Mjc1NDg3ODI=", "number": 1967, "title": "How to deploy zappa flask app from git using git actions to AWS lambda", "user": {"login": "chiju", "id": 16324564, "node_id": "MDQ6VXNlcjE2MzI0NTY0", "avatar_url": "https://avatars1.githubusercontent.com/u/16324564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chiju", "html_url": "https://github.com/chiju", "followers_url": "https://api.github.com/users/chiju/followers", "following_url": "https://api.github.com/users/chiju/following{/other_user}", "gists_url": "https://api.github.com/users/chiju/gists{/gist_id}", "starred_url": "https://api.github.com/users/chiju/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chiju/subscriptions", "organizations_url": "https://api.github.com/users/chiju/orgs", "repos_url": "https://api.github.com/users/chiju/repos", "events_url": "https://api.github.com/users/chiju/events{/privacy}", "received_events_url": "https://api.github.com/users/chiju/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-23T11:58:26Z", "updated_at": "2019-11-25T08:39:03Z", "closed_at": "2019-11-25T08:39:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not able to use git actions for deploying or updating zappa to aws lambda", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1965", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1965/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1965/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1965/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1965", "id": 524207714, "node_id": "MDU6SXNzdWU1MjQyMDc3MTQ=", "number": 1965, "title": "Set_Cookie option sets duplicate cookies on AWS Lambda", "user": {"login": "ZappaUserMan", "id": 57892401, "node_id": "MDQ6VXNlcjU3ODkyNDAx", "avatar_url": "https://avatars2.githubusercontent.com/u/57892401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZappaUserMan", "html_url": "https://github.com/ZappaUserMan", "followers_url": "https://api.github.com/users/ZappaUserMan/followers", "following_url": "https://api.github.com/users/ZappaUserMan/following{/other_user}", "gists_url": "https://api.github.com/users/ZappaUserMan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZappaUserMan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZappaUserMan/subscriptions", "organizations_url": "https://api.github.com/users/ZappaUserMan/orgs", "repos_url": "https://api.github.com/users/ZappaUserMan/repos", "events_url": "https://api.github.com/users/ZappaUserMan/events{/privacy}", "received_events_url": "https://api.github.com/users/ZappaUserMan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-18T08:22:45Z", "updated_at": "2020-02-12T21:10:33Z", "closed_at": "2020-02-12T21:10:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nI have an API running Python3.7 and Zappa (in a virtualenv).\r\nI am setting 6 cookies by using the option \"set_cookie\" in flask. It looks something like this:\r\n```\r\nresp = make_response(jsonify({'success':'true', 'message': 'Successfully authenticated!'}), 200)\r\nresp.set_cookie(\"1\", value=\"1\", secure=True, samesite='Lax', domain=\".example.com\",max_age=3600)\r\nresp.set_cookie(\"2\", value=\"2\", secure=True, samesite='Lax', domain=\".example.com\",max_age=3600)\r\nresp.set_cookie(\"3\", value=\"3\", secure=True, samesite='Lax', domain=\".example.com\",max_age=3600)\r\nresp.set_cookie(\"4\", value=\"4\", secure=True, samesite='Lax', domain=\".example.com\",max_age=3600)\r\nresp.set_cookie(\"5\", value=\"5\", secure=True, samesite='Lax', domain=\".example.com\",max_age=3600)\r\nresp.set_cookie(\"6\", value=\"6\", secure=True, samesite='Lax', domain=\".example.com\",max_age=3600)\r\nreturn resp\r\n```\r\n\r\nOn localhost testing Flask, this works as expected.\r\n\r\nIf I deploy the same code to AWS using Zappa, the response header will show 36 \"set-cookie\" headers. So the formula here is n^2. So if I add 4 cookies using the above method, it will show 16 in the request header.\r\n\r\nThe browser takes care of duplicate cookies, but the response from the API is still huge because of this issue.\r\n\r\nSame thing happens if I use: \r\n`resp.headers.add(\"set-cookie\"\"1\"=\"1; Domain=.example.com; Max-Age=3600; Secure; Path=/; SameSite=Lax\")`\r\n\r\n## Expected Behavior\r\nI believe Zappa or something at AWS is at fault here. Expected behaviour is to send 6 \"set-cookie\" headers and not 36.\r\n\r\n## Actual Behavior\r\nSets n^2 cookies as response.\r\n\r\n## Steps to Reproduce\r\nDeploy a Flask route using Zappa which sets the cookies. Use the code above.\r\n\r\n## Your Environment\r\n* Zappa version used: 0.48.2\r\n* Operating System and Python version: Ubuntu 18.04, Python3.7\r\n* The output of `pip freeze`: https://pastebin.com/d4QTaTuG\r\n* Your `zappa_settings.py`: https://pastebin.com/d1GK8sbe", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1954", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1954/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1954/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1954/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1954", "id": 517588567, "node_id": "MDU6SXNzdWU1MTc1ODg1Njc=", "number": 1954, "title": "Can't update due Segmentation fault (core dumped)", "user": {"login": "loscil06", "id": 40837050, "node_id": "MDQ6VXNlcjQwODM3MDUw", "avatar_url": "https://avatars0.githubusercontent.com/u/40837050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/loscil06", "html_url": "https://github.com/loscil06", "followers_url": "https://api.github.com/users/loscil06/followers", "following_url": "https://api.github.com/users/loscil06/following{/other_user}", "gists_url": "https://api.github.com/users/loscil06/gists{/gist_id}", "starred_url": "https://api.github.com/users/loscil06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/loscil06/subscriptions", "organizations_url": "https://api.github.com/users/loscil06/orgs", "repos_url": "https://api.github.com/users/loscil06/repos", "events_url": "https://api.github.com/users/loscil06/events{/privacy}", "received_events_url": "https://api.github.com/users/loscil06/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-11-05T07:16:15Z", "updated_at": "2020-06-22T20:37:58Z", "closed_at": "2020-06-22T20:37:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to update a stage (in my case, dev) just after uploading the zip a message appears saying literally the title of this issue.\r\n\r\nI made sure I was running zappa from venv and using python 3.7 (been using it with no problems up until now)\r\n## Expected Behavior\r\nThe workflow should go on like normal, updating the existing API\r\n\r\n## Actual Behavior\r\nCrashes and burns with no further explanation. \r\n\r\n## Steps to Reproduce\r\n1. get into a virtual env\r\n2. run zappa update <branch>\r\n3. wait until it segfaults\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.48.2\r\n* Operating System and Python version: Ubuntu 19.10 Python 3.7\r\n* The output of `pip freeze`:\r\n```\r\nargcomplete==1.9.3\r\nboto3==1.9.173\r\nbotocore==1.12.173\r\ncertifi==2019.6.16\r\ncfn-flip==1.2.1\r\nchardet==3.0.4\r\nClick==7.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.3\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.10.1\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\nmarshmallow==3.2.2\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==5.1.1\r\nrequests==2.22.0\r\ns3transfer==0.2.1\r\nsix==1.12.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.7\r\nUnidecode==1.1.0\r\nurllib3==1.25.3\r\nWerkzeug==0.15.4\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\n```\r\n* Link to your project (optional): https://github.com/loscil06/random_names_api\r\n* Your `zappa_settings.py`: \r\n```\r\n{\r\n    \"dev\":\r\n    {\r\n        \"s3_bucket\": \"lmbda2randomnames\",\r\n        \"app_function\": \"app.app\",\r\n        \"aws_region\": \"us-east-2\",\r\n        \"parameter_depth\": 1,\r\n        \"environment_variables\":\r\n        {}\r\n    }\r\n}\r\n\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1945", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1945/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1945/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1945/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1945", "id": 509721366, "node_id": "MDU6SXNzdWU1MDk3MjEzNjY=", "number": 1945, "title": "Cannot use Custom Domain Names with ACM in us-east-2", "user": {"login": "alecl", "id": 1110491, "node_id": "MDQ6VXNlcjExMTA0OTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1110491?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alecl", "html_url": "https://github.com/alecl", "followers_url": "https://api.github.com/users/alecl/followers", "following_url": "https://api.github.com/users/alecl/following{/other_user}", "gists_url": "https://api.github.com/users/alecl/gists{/gist_id}", "starred_url": "https://api.github.com/users/alecl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alecl/subscriptions", "organizations_url": "https://api.github.com/users/alecl/orgs", "repos_url": "https://api.github.com/users/alecl/repos", "events_url": "https://api.github.com/users/alecl/events{/privacy}", "received_events_url": "https://api.github.com/users/alecl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-21T04:19:23Z", "updated_at": "2020-03-15T19:54:33Z", "closed_at": "2020-03-15T19:54:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n\r\nWas trying to zappa certify with ACM for a wildcard cert in us-east-2 but noticed instructions mention us-east-1 and I get an error. Not sure why boto3 for creating the domain can't respect the aws_region in the zappa_settings.json like the rest of the commands do.\r\n\r\nI was able to do the DNS juggling myself to get it running through custom domain names myself so it's not an AWS limitation\r\n\r\n## Actual Behavior\r\nOn zappa certify get this error\r\n\r\n`botocore.errorfactory.BadRequestException: An error occurred (BadRequestException) when calling the CreateDomainName operation: Invalid certificate ARN: arn:aws:acm:us-east-2:...:certificate/.... Certificate must be in 'us-east-1'.`\r\n\r\n## Steps to Reproduce\r\n1. Setup lambdas and API gateways in us-east-2\r\n2. Use a wildcard ACM cert from us-east-2\r\n3. Get error on zappa certify\r\n\r\n## Your Environment\r\nPython 3.6.9\r\n\r\n```\r\n#\r\n# This file is autogenerated by pip-compile\r\n# To update, run:\r\n#\r\n#    pip-compile dev-requirements.in\r\n#\r\nappdirs==1.4.3            # via black\r\nargcomplete==1.9.3        # via zappa\r\naspy.yaml==1.3.0          # via pre-commit\r\natomicwrites==1.3.0       # via pytest\r\nattrs==19.2.0             # via black, pytest\r\nblack==19.3b0             # via flake8-black\r\nboto3==1.9.253            # via kappa, zappa\r\nbotocore==1.12.253        # via boto3, s3transfer, zappa\r\ncertifi==2019.9.11        # via requests\r\ncfgv==2.0.1               # via pre-commit\r\ncfn-flip==1.2.1           # via troposphere\r\nchardet==3.0.4            # via requests\r\nclick==7.0                # via black, cfn-flip, kappa, pip-tools, pur\r\ndocopt==0.6.2             # via pipreqs\r\ndocutils==0.15.2          # via botocore, zappa\r\ndurationpy==0.5           # via zappa\r\nentrypoints==0.3          # via flake8\r\nflake8-black==0.1.1\r\nflake8==3.7.8             # via flake8-black\r\nfuture==0.16.0            # via zappa\r\nhjson==3.0.1              # via zappa\r\nidentify==1.4.7           # via pre-commit\r\nidna==2.8                 # via requests\r\nimportlib-metadata==0.23  # via pluggy, pre-commit, pytest\r\nimportlib-resources==1.0.2  # via pre-commit\r\njmespath==0.9.3           # via boto3, botocore, zappa\r\nkappa==0.6.0              # via zappa\r\nlambda-packages==0.20.0   # via zappa\r\nmccabe==0.6.1             # via flake8\r\nmore-itertools==7.2.0     # via pytest, zipp\r\nnodeenv==1.3.3            # via pre-commit\r\npackaging==19.2           # via pytest, pytest-reqs\r\npip-api==0.0.12           # via pytest-reqs\r\npip-tools==4.2.0\r\npipdeptree==0.13.2\r\npipreqs==0.4.9\r\nplacebo==0.9.0            # via kappa\r\npluggy==0.13.0            # via pytest\r\npre-commit==1.18.3\r\npur==5.2.2\r\npy==1.8.0                 # via pytest\r\npycodestyle==2.5.0        # via flake8\r\npyflakes==2.1.1           # via flake8\r\npyparsing==2.4.2          # via packaging\r\npytest-reqs==0.2.1\r\npytest==5.2.1             # via pytest-reqs\r\npython-dateutil==2.6.1    # via botocore, zappa\r\npython-slugify==1.2.4     # via zappa\r\npyyaml==5.1.2             # via aspy.yaml, cfn-flip, kappa, pre-commit, zappa\r\nrequests==2.22.0          # via yarg, zappa\r\ns3transfer==0.2.1         # via boto3\r\nsix==1.12.0               # via cfgv, cfn-flip, packaging, pip-tools, pre-commit, python-dateutil, zappa\r\ntoml==0.10.0              # via black, pre-commit, zappa\r\ntqdm==4.19.1              # via zappa\r\ntroposphere==2.5.2        # via zappa\r\nunidecode==1.1.1          # via python-slugify\r\nurllib3==1.25.6           # via botocore, requests\r\nvirtualenv==16.7.5        # via pre-commit\r\nwcwidth==0.1.7            # via pytest\r\nwerkzeug==0.16.0          # via zappa\r\nwheel==0.33.6             # via zappa\r\nwsgi-request-logger==0.4.6  # via zappa\r\nyarg==0.1.9               # via pipreqs\r\nzappa==0.48.2\r\nzipp==0.6.0               # via importlib-metadata\r\n\r\n# The following packages are considered to be unsafe in a requirements file:\r\n# pip==19.3.1               # via pip-api, pipdeptree, zappa\r\n```\r\n\r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"sample.app.app\",\r\n        \"aws_region\": \"us-east-2\",\r\n        \"apigateway_description\": \"sample api gateway\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"sample\",\r\n        \"lamdba_description\": \"sample lambda\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-...\",\r\n        \"keep_warm\": false,\r\n        \"certificate_arn\": \"arn:aws:acm:us-east-2:...:certificate/...\",\r\n        \"domain\": \"sample-dev.mydomain.com\",\r\n        \"endpoint_configuration\": [\"REGIONAL\"],\r\n        \"environment_variables\": {\r\n            \"DEBUG\":\"True\",\r\n            \"TESTING\":\"True\",\r\n            \"FLASK_ENV\":\"development\",\r\n            \"FLASK_DEBUG\":\"1\",\r\n            \"PYTHONUNBUFFERED\":\"1\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Ideas\r\n\r\nNot sure if related to regional domain names #1465 not being implemented yet (PR with fix was over a year ago) though unclear how that differs from endpoint_configuration: [\"REGIONAL\"]", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1944", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1944/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1944/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1944/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1944", "id": 509510952, "node_id": "MDU6SXNzdWU1MDk1MTA5NTI=", "number": 1944, "title": "Zappa and flask_injector in Lambda doesn't work", "user": {"login": "AbdoDabbas", "id": 10743723, "node_id": "MDQ6VXNlcjEwNzQzNzIz", "avatar_url": "https://avatars0.githubusercontent.com/u/10743723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AbdoDabbas", "html_url": "https://github.com/AbdoDabbas", "followers_url": "https://api.github.com/users/AbdoDabbas/followers", "following_url": "https://api.github.com/users/AbdoDabbas/following{/other_user}", "gists_url": "https://api.github.com/users/AbdoDabbas/gists{/gist_id}", "starred_url": "https://api.github.com/users/AbdoDabbas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AbdoDabbas/subscriptions", "organizations_url": "https://api.github.com/users/AbdoDabbas/orgs", "repos_url": "https://api.github.com/users/AbdoDabbas/repos", "events_url": "https://api.github.com/users/AbdoDabbas/events{/privacy}", "received_events_url": "https://api.github.com/users/AbdoDabbas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-19T21:18:25Z", "updated_at": "2019-10-23T05:53:33Z", "closed_at": "2019-10-23T05:53:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to deploy a python project uses flask_restplus and flask_injector packages to AWS Lambda using Zappa project, but it doesn't work, it throws an error when I try to call the API gateway that Zappa automatically created for the project:\r\n> [ERROR] AttributeError: type object 'Callable' has no attribute '_abc_registry' Traceback (most recent call last):\r\nFile \"/var/task/handler.py\", line 602, in lambda_handler return LambdaHandler.lambda_handler(event, context)\r\nFile \"/var/task/handler.py\", line 245, in lambda_handler handler = cls()\r\nFile \"/var/task/handler.py\", line 139, in init self.app_module = importlib.import_module(self.settings.APP_MODULE) File \"/var/lang/lib/python3.7/importlib/init.py\", line 127, in import_module return _bootstrap._gcd_import(name[level:], package, level)\r\nFile \"\", line 1006, in _gcd_import\r\nFile \"\", line 983, in _find_and_load\r\nFile \"\", line 967, in _find_and_load_unlocked\r\nFile \"\", line 677, in _load_unlocked\r\nFile \"\", line 728, in exec_module\r\nFile \"\", line 219, in _call_with_frames_removed\r\nFile \"/var/task/app.py\", line 1, in from startup import Startup\r\nFile \"/var/task/startup.py\", line 3, in from flask_injector import FlaskInjector\r\nFile \"/var/task/flask_injector.py\", line 13, in from typing import Any, Callable, cast, Dict, get_type_hints, Iterable, List, TypeVar, Union\r\nFile \"/var/task/typing.py\", line 1357, in class Callable(extra=collections_abc.Callable, metaclass=CallableMeta):\r\nFile \"/var/task/typing.py\", line 1005, in new self._abc_registry = extra._abc_registry\r\n\r\nThe project consists of two Python files only:\r\n\r\n- app.py:\r\n```\r\nfrom startup import Startup\r\napp = Startup.start_app()\r\n```\r\n- startup.py:\r\n```\r\nfrom flask import Flask\r\nfrom flask_restplus import Api\r\n# if I removed the following line, the project works perfectly.\r\nfrom flask_injector import FlaskInjector\r\n\r\nclass Startup():\r\n    @staticmethod\r\n    def start_app():\r\n        appObj = Flask(__name__)\r\n        appObj.secret_key = '123123'\r\n        app = appObj\r\n\r\n        print(\"It's working\")\r\n\r\n        return app\r\n```\r\nAnd the zappa_settings.json file\r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"app.app\",\r\n        \"aws_region\": \"[My Region]\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"my-api-test\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"[An S3 bucket name]\",\r\n        \"keep_warm\": false,\r\n        \"memory_size\": 1024,\r\n        \"timeout_seconds\": 90,\r\n        \"manage_roles\": false,\r\n        \"role_name\": \"[A specific role name to deploy the project]\",\r\n        \"role_arn\": \"[Role ARN]\"\r\n    }\r\n}\r\n```\r\nI don't know what's the issue here, why using `flask_injector` causes this error?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1940", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1940/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1940/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1940/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1940", "id": 505217734, "node_id": "MDU6SXNzdWU1MDUyMTc3MzQ=", "number": 1940, "title": "Future dependency issue", "user": {"login": "svechinsky", "id": 19955883, "node_id": "MDQ6VXNlcjE5OTU1ODgz", "avatar_url": "https://avatars1.githubusercontent.com/u/19955883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svechinsky", "html_url": "https://github.com/svechinsky", "followers_url": "https://api.github.com/users/svechinsky/followers", "following_url": "https://api.github.com/users/svechinsky/following{/other_user}", "gists_url": "https://api.github.com/users/svechinsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/svechinsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svechinsky/subscriptions", "organizations_url": "https://api.github.com/users/svechinsky/orgs", "repos_url": "https://api.github.com/users/svechinsky/repos", "events_url": "https://api.github.com/users/svechinsky/events{/privacy}", "received_events_url": "https://api.github.com/users/svechinsky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-10T11:48:31Z", "updated_at": "2020-03-15T19:43:36Z", "closed_at": "2020-03-15T19:43:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using Zappa with zenpy there is a dependency conflict.\r\nZappa requires future==0.16.0 and zenpy requires futuer>=0.17.1\r\n\r\nThis causes a dependency conflict, I'm sure other packages (not just zenpy might be effected as well)\r\n\r\n## Possible Fix\r\nChange the future requirement to:\r\nfuture>=0.16.0\r\n\r\nA similar fix was done for PyYAML:\r\nhttps://github.com/Miserlou/Zappa/pull/1786\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\nRelevant pipenv output:\r\n```\r\n[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches future==0.16.0,>=0.17.1\r\n[pipenv.exceptions.ResolutionFailure]:       Tried: 0.0.1, 0.0.2, 0.0.3, 0.1.0, 0.2.0, 0.3.0, 0.3.1, 0.3.2, 0.3.3, 0.3.4, 0.3.5, 0.4.0, 0.4.1, 0.5.0, 0.5.1, 0.5.2, 0.6.0, 0.7.0, 0.8.0, 0.8.1, 0.8.2, 0.9.0, 0.10.0, 0.10.1, 0.10.2, 0.11.0, 0.11.1, 0.11.2, 0.11.3, 0.11.4, 0.12.0, 0.12.1, 0.12.2, 0.12.3, 0.12.4, 0.13.0, 0.13.1, 0.14.0, 0.14.1, 0.14.2, 0.14.3, 0.15.0, 0.15.1, 0.15.2, 0.16.0, 0.17.0, 0.17.1, 0.18.0\r\n[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1938", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1938/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1938/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1938/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1938", "id": 502395822, "node_id": "MDU6SXNzdWU1MDIzOTU4MjI=", "number": 1938, "title": "Zappa deployment does not work if the virtualenv name is the same as the app name", "user": {"login": "piraka9011", "id": 16828657, "node_id": "MDQ6VXNlcjE2ODI4NjU3", "avatar_url": "https://avatars2.githubusercontent.com/u/16828657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piraka9011", "html_url": "https://github.com/piraka9011", "followers_url": "https://api.github.com/users/piraka9011/followers", "following_url": "https://api.github.com/users/piraka9011/following{/other_user}", "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}", "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions", "organizations_url": "https://api.github.com/users/piraka9011/orgs", "repos_url": "https://api.github.com/users/piraka9011/repos", "events_url": "https://api.github.com/users/piraka9011/events{/privacy}", "received_events_url": "https://api.github.com/users/piraka9011/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-04T02:49:39Z", "updated_at": "2019-10-17T20:36:49Z", "closed_at": "2019-10-17T20:36:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\n\r\nWhen running Zappa in a virtualenv, I found that if the name of your Django app and the name of your virtualenv are the same, then you will get a \r\n```\r\nModuleNotFoundError: No module named '<app-name>'\r\n```\r\nwhen deploying your app.\r\n\r\n## Expected Behavior\r\n\r\nZappa should deploy normally. e.g.\r\n```\r\nYour updated Zappa deployment is live!: https://api.com (https://...api.us-west-2.amazonaws.com/dev)\r\n```\r\n\r\n## Actual Behavior\r\n\r\nZappa logs return:\r\n```\r\n[1570156390363] Instancing..\r\n[1570156392032] No module named '<app>': ModuleNotFoundError\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 580, in lambda_handler\r\n  return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 245, in lambda_handler\r\n  handler = cls()\r\n  File \"/var/task/handler.py\", line 151, in __init__\r\n  wsgi_app_function = get_django_wsgi(self.settings.DJANGO_SETTINGS)\r\n  File \"/var/task/zappa/ext/django_zappa.py\", line 20, in get_django_wsgi\r\n  return get_wsgi_application()\r\n  File \"/var/task/django/core/wsgi.py\", line 12, in get_wsgi_application\r\n  django.setup(set_prefix=False)\r\n  File \"/var/task/django/__init__.py\", line 19, in setup\r\n  configure_logging(settings.LOGGING_CONFIG, settings.LOGGING)\r\n  File \"/var/task/django/conf/__init__.py\", line 79, in __getattr__\r\n  self._setup(name)\r\n  File \"/var/task/django/conf/__init__.py\", line 66, in _setup\r\n  self._wrapped = Settings(settings_module)\r\n  File \"/var/task/django/conf/__init__.py\", line 157, in __init__\r\n  mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"/var/lang/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n  return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 941, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 953, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named '<app>'\r\n```\r\nand the \r\n```\r\nzappa deploy <stage>`\r\n```\r\ncommand returns\r\n```\r\nError: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 500 response code.\r\n```\r\n\r\n## Possible Fix\r\n\r\nI'm unsure, but if someone could point me in the right direction I can take a look.\r\n\r\n## Steps to Reproduce\r\n\r\n(Assuming you are using virtualenvwrapper)\r\n\r\n1. `mkvirtualenv <app> `\r\n2. Name the directory of your main Django app (where the `settings.py` and `urls.py` live) '<app>'.\r\n3. `zappa deploy/update <stage>`\r\n\r\n## Your Environment\r\n\r\n* Zappa version used: 0.47.0\r\n* Operating System and Python version: Ubuntu 18.04, Python 3.6\r\n* The output of `pip freeze`:\r\n```\r\nawscli==1.16.152\r\nboto3==1.9.152\r\ndjangorestframework==3.10.3\r\ndjango==2.2.5\r\ndjango-allauth==0.38.0\r\ndjango-cors-headers==3.1.0\r\ndjango-extensions==2.1.6\r\ndjango-filter==2.1.0\r\ndjango-ranged-fileresponse==0.1.2\r\ndjango-rest-auth==0.9.5\r\ndjango-storages==1.7.1\r\ndjango-environ==0.4.5\r\nfuture==0.16.0\r\ngunicorn==19.9.0\r\njmespath==0.9.3\r\npinax-badges==2.0.0\r\npsycopg2-binary==2.8.2\r\npython-dateutil==2.6.1\r\nsentry-sdk==0.11.2\r\nwhoosh==2.7.4\r\nzappa==0.47.0\r\n```\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`:  Can't display.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1935", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1935/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1935/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1935/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1935", "id": 500768856, "node_id": "MDU6SXNzdWU1MDA3Njg4NTY=", "number": 1935, "title": "Request best practice with `remote_env`", "user": {"login": "elcolie", "id": 18206728, "node_id": "MDQ6VXNlcjE4MjA2NzI4", "avatar_url": "https://avatars0.githubusercontent.com/u/18206728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elcolie", "html_url": "https://github.com/elcolie", "followers_url": "https://api.github.com/users/elcolie/followers", "following_url": "https://api.github.com/users/elcolie/following{/other_user}", "gists_url": "https://api.github.com/users/elcolie/gists{/gist_id}", "starred_url": "https://api.github.com/users/elcolie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elcolie/subscriptions", "organizations_url": "https://api.github.com/users/elcolie/orgs", "repos_url": "https://api.github.com/users/elcolie/repos", "events_url": "https://api.github.com/users/elcolie/events{/privacy}", "received_events_url": "https://api.github.com/users/elcolie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-01T09:19:20Z", "updated_at": "2019-10-07T09:16:20Z", "closed_at": "2019-10-07T09:16:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can be able to deploy `Django` and secure my sensitive variables by using `env.json`\r\n\r\n```yml\r\nuat:\r\n  <<: *base\r\n  profile_name: \"uat\"\r\n  django_settings: \"settings.dev\"\r\n  domain: \"delta.uat-direct.com\"\r\n  remote_env: \"s3://futh-life-uat/env.json\"\r\n  s3_bucket: \"futh-life-zappa-uat\"\r\n```\r\n\r\nI have 2 buckets\r\n1. `env.json`\r\n2. `Django`\r\nMy development has `env.json` open to public since I don't care at all. But now I am deploying `UAT` then I need to tweak all security to meet production grade system\r\n\r\n**Problem:**\r\nI had tried to find out how to configure it, but I don't found any\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1933", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1933/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1933/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1933/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1933", "id": 499546981, "node_id": "MDU6SXNzdWU0OTk1NDY5ODE=", "number": 1933, "title": "Is there documentation for this thing???", "user": {"login": "sleepychild", "id": 4987916, "node_id": "MDQ6VXNlcjQ5ODc5MTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4987916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleepychild", "html_url": "https://github.com/sleepychild", "followers_url": "https://api.github.com/users/sleepychild/followers", "following_url": "https://api.github.com/users/sleepychild/following{/other_user}", "gists_url": "https://api.github.com/users/sleepychild/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleepychild/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleepychild/subscriptions", "organizations_url": "https://api.github.com/users/sleepychild/orgs", "repos_url": "https://api.github.com/users/sleepychild/repos", "events_url": "https://api.github.com/users/sleepychild/events{/privacy}", "received_events_url": "https://api.github.com/users/sleepychild/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-27T16:50:38Z", "updated_at": "2019-10-18T05:26:54Z", "closed_at": "2019-10-18T05:25:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used:\r\n* Operating System and Python version:\r\n* The output of `pip freeze`:\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1930", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1930/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1930/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1930/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1930", "id": 497015806, "node_id": "MDU6SXNzdWU0OTcwMTU4MDY=", "number": 1930, "title": "Django settings of static and media?", "user": {"login": "lamiru", "id": 4251107, "node_id": "MDQ6VXNlcjQyNTExMDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/4251107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamiru", "html_url": "https://github.com/lamiru", "followers_url": "https://api.github.com/users/lamiru/followers", "following_url": "https://api.github.com/users/lamiru/following{/other_user}", "gists_url": "https://api.github.com/users/lamiru/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamiru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamiru/subscriptions", "organizations_url": "https://api.github.com/users/lamiru/orgs", "repos_url": "https://api.github.com/users/lamiru/repos", "events_url": "https://api.github.com/users/lamiru/events{/privacy}", "received_events_url": "https://api.github.com/users/lamiru/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-23T10:29:57Z", "updated_at": "2019-09-24T00:17:32Z", "closed_at": "2019-09-24T00:17:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\nHi, I want to make a Django serverless web via zappa in AWS.\r\nI succeeded to deploy Django serverless web and I can access to the url, but I have a problem with static and media.\r\nHow should I write the setting for static and media? Currently, I use Elastic Beanstalk to deploy the web and wrote the setting of S3Boto3Storage for static and media. What should I change in this settings?\r\n\r\n```\r\n    from storages.backends.s3boto3 import S3Boto3Storage\r\n\r\n    class StaticRootS3Boto3Storage(S3Boto3Storage):\r\n        location = 'static'\r\n\r\n    class MediaRootS3Boto3Storage(S3Boto3Storage):\r\n        location = 'media'\r\n        file_overwrite = False\r\n\r\n    STATICFILES_STORAGE = 'myproject.settings.StaticRootS3Boto3Storage'\r\n    STATIC_URL = 'https://s3-ap-southeast-1.amazonaws.com/myproject/static/'\r\n\r\n    DEFAULT_FILE_STORAGE = 'myproject.settings.MediaRootS3Boto3Storage'\r\n    MEDIA_URL = 'https://s3-ap-southeast-1.amazonaws.com/myproject/media/'\r\n\r\n    COMPRESS_STORAGE = STATICFILES_STORAGE\r\n    COMPRESS_URL = STATIC_URL\r\n```\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. zappa update web\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.48.2\r\n* Operating System and Python version: 3.6\r\n* The output of `pip freeze`:\r\nargcomplete==1.9.3\r\nawsebcli==3.15.3\r\nblessed==1.15.0\r\nboto3==1.9.141\r\nbotocore==1.12.141\r\ncached-property==1.5.1\r\ncement==2.8.2\r\ncertifi==2019.3.9\r\ncfn-flip==1.2.1\r\nchardet==3.0.4\r\nClick==7.0\r\ncolorama==0.3.9\r\nDjango==2.1.7\r\ndjango-appconf==1.0.3\r\ndjango-bootstrap-pagination==1.7.1\r\ndjango-bootstrap4==0.0.8\r\ndjango-compressor==2.2\r\ndjango-libsass==0.7\r\ndjango-sass-processor==0.7.3\r\ndjango-storages==1.7.1\r\ndocker==3.7.3\r\ndocker-compose==1.23.2\r\ndocker-pycreds==0.4.0\r\ndockerpty==0.4.1\r\ndocopt==0.6.2\r\ndocutils==0.14\r\ndurationpy==0.5\r\nfuture==0.16.0\r\ngunicorn==19.9.0\r\nhjson==3.0.1\r\nidna==2.7\r\njmespath==0.9.3\r\njsonschema==2.6.0\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nlibsass==0.18.0\r\nmysqlclient==1.3.12\r\npathspec==0.5.9\r\nPillow==5.4.1\r\nplacebo==0.9.0\r\npsycopg2==2.7.7\r\nPyMySQL==0.9.3\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npytz==2018.9\r\nPyYAML==3.13\r\nrcssmin==1.0.6\r\nrequests==2.20.1\r\nrjsmin==1.0.12\r\ns3transfer==0.2.0\r\nsemantic-version==2.5.0\r\nsix==1.11.0\r\nsorl-thumbnail==12.5.0\r\nsqlparse==0.3.0\r\ntermcolor==1.1.0\r\ntexttable==0.9.1\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.5.1\r\nUnidecode==1.1.1\r\nurllib3==1.24.1\r\nwcwidth==0.1.7\r\nwebsocket-client==0.56.0\r\nWerkzeug==0.16.0\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\n\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n{\r\n    \"web\": {\r\n        \"aws_region\": \"ap-southeast-1\",\r\n        \"django_settings\": \"myproject.settings\",\r\n        \"profile_name\": \"myproject\",\r\n        \"project_name\": \"myproject\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-myproject\",\r\n        \"exclude\": [\"media\"]\r\n    }\r\n}\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1922", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1922/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1922/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1922/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1922", "id": 485552200, "node_id": "MDU6SXNzdWU0ODU1NTIyMDA=", "number": 1922, "title": "IsADirectoryError", "user": {"login": "elcolie", "id": 18206728, "node_id": "MDQ6VXNlcjE4MjA2NzI4", "avatar_url": "https://avatars0.githubusercontent.com/u/18206728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elcolie", "html_url": "https://github.com/elcolie", "followers_url": "https://api.github.com/users/elcolie/followers", "following_url": "https://api.github.com/users/elcolie/following{/other_user}", "gists_url": "https://api.github.com/users/elcolie/gists{/gist_id}", "starred_url": "https://api.github.com/users/elcolie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elcolie/subscriptions", "organizations_url": "https://api.github.com/users/elcolie/orgs", "repos_url": "https://api.github.com/users/elcolie/repos", "events_url": "https://api.github.com/users/elcolie/events{/privacy}", "received_events_url": "https://api.github.com/users/elcolie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-27T02:48:26Z", "updated_at": "2019-08-27T03:10:48Z", "closed_at": "2019-08-27T03:10:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\nI am unable to deploy my Django 2 with Python 3.7.3. I put all variable into the source code then\r\nwith `slim handler` is `false` I got \r\n```bash\r\nTraceback (most recent call last):\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 748, in deploy\r\n    function_name=self.lambda_name)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/core.py\", line 1287, in get_lambda_function\r\n    FunctionName=function_name)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/botocore/client.py\", line 357, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/botocore/client.py\", line 661, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.errorfactory.ResourceNotFoundException: An error occurred (ResourceNotFoundException) when calling the GetFunction operation: Function not found: arn:aws:lambda:ap-southeast-1:530403937392:function:futuready-th-li-sarit\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 2779, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 509, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 546, in dispatch_command\r\n    self.deploy(self.vargs['zip'])\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 779, in deploy\r\n    self.lambda_arn = self.zappa.create_lambda_function(**kwargs)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/core.py\", line 1089, in create_lambda_function\r\n    response = self.lambda_client.create_function(**kwargs)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/botocore/client.py\", line 357, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/botocore/client.py\", line 661, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.errorfactory.InvalidParameterValueException: An error occurred (InvalidParameterValueException) when calling the CreateFunction operation: Unzipped size must be smaller than 262144000 bytes\r\n```\r\n\r\n`slim handler` is `true`. I got\r\n```bash\r\n$ zappa deploy sarit\r\nCalling deploy for stage sarit..\r\nDownloading and installing dependencies..\r\n - typed-ast==1.4.0: Using locally cached manylinux wheel\r\n - psycopg2-binary==2.8.3: Using locally cached manylinux wheel\r\n - pillow==6.1.0: Using locally cached manylinux wheel\r\n - mypy==0.720: Using locally cached manylinux wheel\r\n - markupsafe==1.1.1: Using locally cached manylinux wheel\r\n - lazy-object-proxy==1.4.2: Using locally cached manylinux wheel\r\n - coverage==4.5.4: Using locally cached manylinux wheel\r\n - cffi==1.12.3: Using locally cached manylinux wheel\r\n - sqlite==python3: Using precompiled lambda package\r\n'python3.7'\r\nPackaging project as gzipped tarball.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/durationpy already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/python_dateutil-2.6.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/troposphere-2.5.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/chardet-3.0.4.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/toml already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/chardet already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/placebo-0.9.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/pip-19.2.3.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/Unidecode-1.1.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/easy_install.py already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/s3transfer already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/cfn_flip-1.2.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/docutils already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/wsgi_request_logger-0.4.6.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/past already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/lambda_packages-0.20.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/unidecode already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/placebo already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/argcomplete already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/Click-7.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/cfn_flip already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/troposphere already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/PyYAML-5.1.2.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/idna already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/werkzeug already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/wheel already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/click already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/slugify already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/lambda_packages already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/cfn_clean already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/__pycache__ already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/certifi-2019.6.16.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/future-0.16.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/botocore already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/requests already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/pip already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/argcomplete-1.9.3.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/docutils-0.15.2.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/certifi already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/zappa already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/wheel-0.33.6.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/idna-2.8.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/boto3-1.9.215.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/tqdm already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/six.py already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/toml-0.10.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/durationpy-0.5.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/kappa already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/urllib3-1.25.3.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/yaml already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/tqdm-4.19.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/jmespath already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/six-1.12.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/kappa-0.6.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/urllib3 already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/Werkzeug-0.15.5.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/setuptools already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/pkg_resources already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/zappa-0.48.2.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/hjson already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/requests-2.22.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/python_slugify-1.2.4.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/requestlogger already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/libfuturize already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/s3transfer-0.2.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/future already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/botocore-1.12.215.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/libpasteurize already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/jmespath-0.9.3.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/dateutil already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/toml.py already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/hjson-3.0.1.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/setuptools-41.2.0.dist-info already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/cfn_tools already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/boto3 already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/man already exists. Specify --upgrade to force replacement.\r\nWARNING: Target directory /Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/bin already exists. Specify --upgrade to force replacement.\r\nOh no! An error occurred! :(\r\n\r\n==============\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 2779, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 509, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 546, in dispatch_command\r\n    self.deploy(self.vargs['zip'])\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 718, in deploy\r\n    self.create_package()\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/cli.py\", line 2230, in create_package\r\n    disable_progress=self.disable_progress\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/core.py\", line 627, in create_lambda_zip\r\n    self.copy_editable_packages(egg_links, temp_package_path)\r\n  File \"/Users/sarit/.pyenv/versions/3.7.3/envs/life/lib/python3.7/site-packages/zappa/core.py\", line 362, in copy_editable_packages\r\n    with open(egg_link, 'rb') as df:\r\nIsADirectoryError: [Errno 21] Is a directory: '/Users/sarit/mein-codes/futuready_th_life_insurance/handler_venv/lib/python3.7/site-packages/zappa.egg-link'\r\n\r\n==============\r\n```\r\n\r\n\r\n\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n`zappa` must replace all the package and be able to deploy the Django Application\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nIt raises an error and stop the deployment\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\nNo idea\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Django2 Python3.7.3 install through `pyenv`\r\n2. `zappa deploy`\r\n3. Put all configuration into `settings.py` file\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: `0.48.2`\r\n* Operating System and Python version: `10.14.5`, `Python3.7.3`\r\n* The output of `pip freeze`:\r\n```bash\r\nalabaster==0.7.12\r\nappdirs==1.4.3\r\nappnope==0.1.0\r\nargcomplete==1.9.3\r\nargon2-cffi==19.1.0\r\nasn1crypto==0.24.0\r\nastroid==2.2.5\r\natomicwrites==1.3.0\r\nattrs==19.1.0\r\nautoflake==1.3.1\r\nBabel==2.7.0\r\nbackcall==0.1.0\r\nbackports.csv==1.0.7\r\nblack==19.3b0\r\nboto3==1.9.215\r\nbotocore==1.12.215\r\ncertifi==2019.6.16\r\ncffi==1.12.3\r\ncfn-flip==1.2.1\r\nchardet==3.0.4\r\nClick==7.0\r\nCollectfast==1.0.0\r\ncoreapi==2.3.3\r\ncoreschema==0.0.4\r\ncoverage==4.5.4\r\ncryptography==2.7\r\ndecorator==4.4.0\r\ndefusedxml==0.6.0\r\ndiff-match-patch==20181111\r\nDjango==2.2.4\r\ndjango-allauth==0.39.1\r\ndjango-anymail==6.1.0\r\ndjango-coverage-plugin==1.6.0\r\ndjango-crispy-forms==1.7.2\r\ndjango-debug-toolbar==2.0\r\ndjango-environ==0.4.5\r\ndjango-extensions==2.2.1\r\ndjango-filter==2.2.0\r\ndjango-import-export==1.2.0\r\ndjango-model-utils==3.2.0\r\ndjango-modeltranslation==0.13.3\r\ndjango-money==0.15\r\ndjango-redis==4.10.0\r\ndjango-storages==1.7.1\r\ndjangorestframework==3.10.2\r\ndjangorestframework-simplejwt==4.3.0\r\ndocutils==0.15.2\r\ndurationpy==0.5\r\nentrypoints==0.3\r\net-xmlfile==1.0.1\r\nfactory-boy==2.12.0\r\nFaker==2.0.1\r\nflake8==3.7.8\r\nfuture==0.16.0\r\ngunicorn==19.9.0\r\nhjson==3.0.1\r\nidna==2.8\r\nimagesize==1.1.0\r\nimportlib-metadata==0.19\r\nipdb==0.12.2\r\nipython==7.7.0\r\nipython-genutils==0.2.0\r\nisort==4.3.21\r\nitypes==1.1.0\r\njdcal==1.4.1\r\njedi==0.15.1\r\nJinja2==2.10.1\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nlazy-object-proxy==1.4.2\r\nMarkupSafe==1.1.1\r\nmccabe==0.6.1\r\nmodel-mommy==1.6.0\r\nmore-itertools==7.2.0\r\nmypy==0.720\r\nmypy-extensions==0.4.1\r\noauthlib==3.1.0\r\nodfpy==1.4.0\r\nopenpyxl==2.6.3\r\npackaging==19.1\r\nparso==0.5.1\r\npexpect==4.7.0\r\npickleshare==0.7.5\r\nPillow==6.1.0\r\npip-tools==4.1.0\r\nplacebo==0.9.0\r\npluggy==0.12.0\r\nprompt-toolkit==2.0.9\r\npsycopg2==2.8.3\r\npsycopg2-binary==2.8.3\r\nptyprocess==0.6.0\r\npy==1.8.0\r\npy-moneyed==0.8.0\r\npycodestyle==2.5.0\r\npycparser==2.19\r\npyflakes==2.1.1\r\nPygments==2.4.2\r\nPyJWT==1.7.1\r\npylint==2.3.1\r\npylint-django==2.0.11\r\npylint-plugin-utils==0.5\r\npyOpenSSL==19.0.0\r\npyparsing==2.4.2\r\npytest==5.1.1\r\npytest-django==3.5.1\r\npytest-sugar==0.9.2\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npython3-openid==3.1.0\r\npytz==2019.2\r\nPyYAML==5.1.2\r\nredis==3.3.8\r\nrequests==2.22.0\r\nrequests-oauthlib==1.2.0\r\ns3transfer==0.2.1\r\nsentry-sdk==0.11.1\r\nsix==1.12.0\r\nsnowballstemmer==1.9.0\r\nSphinx==2.2.0\r\nsphinxcontrib-applehelp==1.0.1\r\nsphinxcontrib-devhelp==1.0.1\r\nsphinxcontrib-htmlhelp==1.0.2\r\nsphinxcontrib-jsmath==1.0.1\r\nsphinxcontrib-qthelp==1.0.2\r\nsphinxcontrib-serializinghtml==1.1.3\r\nsqlparse==0.3.0\r\ntablib==0.13.0\r\ntermcolor==1.1.0\r\ntext-unidecode==1.2\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntraitlets==4.3.2\r\ntroposphere==2.5.1\r\ntyped-ast==1.4.0\r\ntyping==3.7.4.1\r\ntyping-extensions==3.7.4\r\nUnidecode==1.1.1\r\nuritemplate==3.0.0\r\nurllib3==1.25.3\r\nwcwidth==0.1.7\r\nWerkzeug==0.15.5\r\nwrapt==1.11.2\r\nwsgi-request-logger==0.4.6\r\nxlrd==1.2.0\r\nxlwt==1.3.0\r\nyapf==0.28.0\r\nzappa==0.48.2\r\nzipp==0.6.0\r\n```\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\nI don't use this\r\n* `zappa_settings.json`\r\n```bash\r\n    \"sarit\": {\r\n        \"profile_name\": \"xxx-dev\",\r\n        \"project_name\": \"yyyy-th-li\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"futh-life-zappa-dev-sarit\",\r\n        \"aws_region\": \"ap-southeast-1\",\r\n        \"slim_handler\": true,\r\n        \"django_settings\": \"dev\",\r\n        \"memory_size\": 3008,\r\n    }\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1916", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1916/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1916/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1916/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1916", "id": 478416430, "node_id": "MDU6SXNzdWU0Nzg0MTY0MzA=", "number": 1916, "title": "Trigger issues for new Zappa application with same module name and function name", "user": {"login": "themmes", "id": 12343995, "node_id": "MDQ6VXNlcjEyMzQzOTk1", "avatar_url": "https://avatars1.githubusercontent.com/u/12343995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/themmes", "html_url": "https://github.com/themmes", "followers_url": "https://api.github.com/users/themmes/followers", "following_url": "https://api.github.com/users/themmes/following{/other_user}", "gists_url": "https://api.github.com/users/themmes/gists{/gist_id}", "starred_url": "https://api.github.com/users/themmes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/themmes/subscriptions", "organizations_url": "https://api.github.com/users/themmes/orgs", "repos_url": "https://api.github.com/users/themmes/repos", "events_url": "https://api.github.com/users/themmes/events{/privacy}", "received_events_url": "https://api.github.com/users/themmes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-08T11:38:25Z", "updated_at": "2019-08-08T12:14:03Z", "closed_at": "2019-08-08T12:14:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\nI created an application, then copied that application renamed it and started recomposing the zappa_settings to debug.\r\n\r\n```\r\nScheduling..\r\nRemoved event sample.lambda_handler (['s3:ObjectCreated:*']).\r\ns3:ObjectCreated:* event schedule for sample.lambda_handler already exists - Nothing to do here.\r\n```\r\n\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nA trigger to be unique for an application\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nTrigger seems to be coupled to module.function combination, not to application?\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Create two `hello_world.py` examples of Zappa and name the projects differently\r\n2. Add triggers and deploy both\r\n3. See that only the first gets the trigger\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: zappa 0.48.2\r\n* Operating System and Python version: python3.6\r\n* The output of `pip freeze`:\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"sample.lambda_handler\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"testapp\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"test-zappa\"\r\n        \"slim_handler\": true,\r\n        \"aws_region\": \"eu-central-1\",\r\n        \"events\": [{\r\n            \"function\": \"sample.lambda_handler\",\r\n            \"event_source\": {\r\n                \"arn\":  \"arn:aws:s3:::test-expedition\",\r\n                \"events\": [\"s3:ObjectCreated:*\"]\r\n            }\r\n        }],\r\n        \"keep_warm\": false,\r\n        \"apigateway_enabled\": false\r\n    }\r\n}", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1900", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1900/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1900/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1900/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1900", "id": 468988132, "node_id": "MDU6SXNzdWU0Njg5ODgxMzI=", "number": 1900, "title": "Is Python3.7 officially supported now?", "user": {"login": "C-Kenny", "id": 5967521, "node_id": "MDQ6VXNlcjU5Njc1MjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5967521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/C-Kenny", "html_url": "https://github.com/C-Kenny", "followers_url": "https://api.github.com/users/C-Kenny/followers", "following_url": "https://api.github.com/users/C-Kenny/following{/other_user}", "gists_url": "https://api.github.com/users/C-Kenny/gists{/gist_id}", "starred_url": "https://api.github.com/users/C-Kenny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/C-Kenny/subscriptions", "organizations_url": "https://api.github.com/users/C-Kenny/orgs", "repos_url": "https://api.github.com/users/C-Kenny/repos", "events_url": "https://api.github.com/users/C-Kenny/events{/privacy}", "received_events_url": "https://api.github.com/users/C-Kenny/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-17T05:07:17Z", "updated_at": "2020-03-15T19:55:32Z", "closed_at": "2020-03-15T19:55:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the docs and issue template, Zappa assumes running Python `3.6`. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1890", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1890/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1890/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1890/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1890", "id": 461764798, "node_id": "MDU6SXNzdWU0NjE3NjQ3OTg=", "number": 1890, "title": "Am I able to use the output from Zappa Package as the source for Zappa Update?", "user": {"login": "carkar7", "id": 22269536, "node_id": "MDQ6VXNlcjIyMjY5NTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/22269536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carkar7", "html_url": "https://github.com/carkar7", "followers_url": "https://api.github.com/users/carkar7/followers", "following_url": "https://api.github.com/users/carkar7/following{/other_user}", "gists_url": "https://api.github.com/users/carkar7/gists{/gist_id}", "starred_url": "https://api.github.com/users/carkar7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carkar7/subscriptions", "organizations_url": "https://api.github.com/users/carkar7/orgs", "repos_url": "https://api.github.com/users/carkar7/repos", "events_url": "https://api.github.com/users/carkar7/events{/privacy}", "received_events_url": "https://api.github.com/users/carkar7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-27T21:49:38Z", "updated_at": "2019-07-02T21:22:11Z", "closed_at": "2019-07-02T21:22:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\nI'm trying to load a model on AWS lambda using Zappa. The problem is that the total unzipped file size from the package created by Zappa and uploaded to S3 is about 550mb, which exceeds the limit. One of the packages I'm using is Spacy (an NLP dependency that is very large), and I'm able to reduce the size of this package by manually removing unused languages in the lang folder. Doing this I can get the unzipped file size under 500mb. Problem is that Zappa automatically downloads the full Spacy version (spacy==2.1.4: Using locally cached manylinux wheel) on deploy and update.\r\n\r\nI've learned that I can call Zappa Package, and it will generate a package that I can then upload myself. What I've done is unzipped the generated package and removed the unnecessary lang files, then I zipped it back up. Is it possible for me to call Zappa Deploy/Update and use the modified package and handler that was created by Zappa Package? This way Zappa can still handle the deployment.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1885", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1885/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1885/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1885/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1885", "id": 456374231, "node_id": "MDU6SXNzdWU0NTYzNzQyMzE=", "number": 1885, "title": "psycopg2-binary only being downloaded if inside virtualenv", "user": {"login": "jonbesga", "id": 9107782, "node_id": "MDQ6VXNlcjkxMDc3ODI=", "avatar_url": "https://avatars2.githubusercontent.com/u/9107782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonbesga", "html_url": "https://github.com/jonbesga", "followers_url": "https://api.github.com/users/jonbesga/followers", "following_url": "https://api.github.com/users/jonbesga/following{/other_user}", "gists_url": "https://api.github.com/users/jonbesga/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonbesga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonbesga/subscriptions", "organizations_url": "https://api.github.com/users/jonbesga/orgs", "repos_url": "https://api.github.com/users/jonbesga/repos", "events_url": "https://api.github.com/users/jonbesga/events{/privacy}", "received_events_url": "https://api.github.com/users/jonbesga/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-14T18:15:42Z", "updated_at": "2019-06-14T19:36:29Z", "closed_at": "2019-06-14T19:36:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n\r\nI'm trying to deploy to lambda using zappa and Pipenv. But the app fails after being deployed because it requires the psycopg2 package.\r\n\r\nIt seems that if I run `zappa update dev` inside the virtualenv (after doing `pipenv shell`, it does downloads/uses the cached package. But if done through `pipenv run zappa update dev` the behaviour changes and it skips the package.\r\n\r\n\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n\r\npsycopg2 being downloaded/used when packaging the .zip file.\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\n```\r\njon-be@fring ~/P/project_a> pipenv install --dev\r\nCreating a virtualenv for this project\u2026\r\nPipfile: /home/jon-be/Projects/project_a/Pipfile\r\nUsing /usr/local/bin/python3.6 (3.6.6) to create virtualenv\u2026\r\n\u2807 Creating virtual environment...Using base prefix '/usr/local'\r\nNew python executable in /home/jon-be/Projects/project_a/.venv/bin/python3.6\r\nAlso creating executable in /home/jon-be/Projects/project_a/.venv/bin/python\r\nInstalling setuptools, pip, wheel...\r\ndone.\r\nRunning virtualenv with interpreter /usr/local/bin/python3.6\r\n\r\n\u2714 Successfully created virtual environment! \r\nVirtualenv location: /home/jon-be/Projects/project_a/.venv\r\nInstalling dependencies from Pipfile.lock (ac62cf)\u2026\r\n  \ud83d\udc0d   \u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589 109/109 \u2014 00:01:12\r\nTo activate this project's virtualenv, run pipenv shell.\r\nAlternatively, run a command inside the virtualenv with pipenv run.\r\njon-be@fring ~/P/project_a> export VIRTUAL_ENV=.venv/\r\njon-be@fring ~/P/project_a> pipenv run zappa update dev\r\nLoading .env environment variables\u2026\r\n(jmespath 0.9.4 (/home/jon-be/Projects/project_a/.venv/lib/python3.6/site-packages), Requirement.parse('jmespath==0.9.3'), {'zappa'})\r\nCalling update for stage dev..\r\nDownloading and installing dependencies..\r\n - markupsafe==1.1.1: Using locally cached manylinux wheel\r\n - cryptography==2.7: Warning! Using precompiled lambda package version 1.9 instead!\r\n - coverage==4.5.3: Using locally cached manylinux wheel\r\n - cffi==1.12.3: Using locally cached manylinux wheel\r\n - sqlite==python3: Using precompiled lambda package\r\nPackaging project as zip.\r\n```\r\npsycopg2-binary is not used.\r\n\r\nHowever, if I use `pipenv shell`:\r\n\r\n```\r\njon-be@fring ~/P/project_a> pipenv shell\r\nLoading .env environment variables\u2026\r\nLaunching subshell in virtual environment\u2026\r\njon-be@fring ~/P/project_a>  source /home/jon-be/Projects/project_a/.venv/bin/activate.fish\r\n(project_a) jon-be@fring ~/P/project_a> zappa update dev\r\n(future 0.17.1 (/home/jon-be/Projects/project_a/.venv/lib/python3.6/site-packages), Requirement.parse('future==0.16.0'), {'zappa'})\r\nCalling update for stage dev..\r\nDownloading and installing dependencies..\r\n - psycopg2-binary==2.8.3: Downloading\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 2.94M/2.94M [00:01<00:00, 2.21MB/s]\r\n - pillow==6.0.0: Downloading\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.99M/1.99M [00:00<00:00, 2.21MB/s]\r\n - markupsafe==1.1.1: Downloading\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 27.5K/27.5K [00:00<00:00, 2.37MB/s]\r\n^C\u23ce             \r\n```\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n\r\nI use a similar configuration to https://github.com/Miserlou/Zappa/issues/1443#issuecomment-374174824 where the virtualenv is in the project folder and use the VIRTUAL_ENV variable to point to `.venv/`\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used:\r\n* Operating System and Python version:\r\n* The output of `pip freeze`:\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1882", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1882/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1882/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1882/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1882", "id": 453493573, "node_id": "MDU6SXNzdWU0NTM0OTM1NzM=", "number": 1882, "title": "s secret", "user": {"login": "vipradwivedi", "id": 8500951, "node_id": "MDQ6VXNlcjg1MDA5NTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8500951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vipradwivedi", "html_url": "https://github.com/vipradwivedi", "followers_url": "https://api.github.com/users/vipradwivedi/followers", "following_url": "https://api.github.com/users/vipradwivedi/following{/other_user}", "gists_url": "https://api.github.com/users/vipradwivedi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vipradwivedi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vipradwivedi/subscriptions", "organizations_url": "https://api.github.com/users/vipradwivedi/orgs", "repos_url": "https://api.github.com/users/vipradwivedi/repos", "events_url": "https://api.github.com/users/vipradwivedi/events{/privacy}", "received_events_url": "https://api.github.com/users/vipradwivedi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-07T12:40:52Z", "updated_at": "2019-06-07T12:43:09Z", "closed_at": "2019-06-07T12:43:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used:\r\n* Operating System and Python version:\r\n* The output of `pip freeze`:\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1879", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1879/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1879/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1879/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1879", "id": 450856827, "node_id": "MDU6SXNzdWU0NTA4NTY4Mjc=", "number": 1879, "title": "Configuration of cognito event's trigger fails", "user": {"login": "Yaronn44", "id": 22750189, "node_id": "MDQ6VXNlcjIyNzUwMTg5", "avatar_url": "https://avatars0.githubusercontent.com/u/22750189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yaronn44", "html_url": "https://github.com/Yaronn44", "followers_url": "https://api.github.com/users/Yaronn44/followers", "following_url": "https://api.github.com/users/Yaronn44/following{/other_user}", "gists_url": "https://api.github.com/users/Yaronn44/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yaronn44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yaronn44/subscriptions", "organizations_url": "https://api.github.com/users/Yaronn44/orgs", "repos_url": "https://api.github.com/users/Yaronn44/repos", "events_url": "https://api.github.com/users/Yaronn44/events{/privacy}", "received_events_url": "https://api.github.com/users/Yaronn44/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-31T15:31:19Z", "updated_at": "2020-02-29T07:46:21Z", "closed_at": "2020-02-29T07:46:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nI wanted to use the cognito event trigger by declaring it in the `zappa_setting.py` with this form :\r\n```        \r\n\"cognito\": {\r\n            \"user_pool\": \"user-pool-id\", \r\n            \"triggers\": [{\r\n                \"source\": \"PreAuthentication_Authentication\", \r\n                \"function\": \"my_app.pre_authentication_function\"\r\n            }]\r\n        }\r\n```\r\n## Expected Behavior\r\nThe zappa update should succeed, and the trigger should be created in the cognito pool.\r\n\r\n## Actual Behavior\r\nAt the zappa update i have this error that trigger : \r\n```\r\nTraceback (most recent call last):\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\zappa\\cli.py\", line 2712, in handle\r\n    sys.exit(cli.handle())\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\zappa\\cli.py\", line 509, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\zappa\\cli.py\", line 556, in dispatch_command\r\n    self.update(self.vargs['zip'], self.vargs['no_upload'])\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\zappa\\cli.py\", line 1016, in update\r\n    self.update_cognito_triggers()\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\zappa\\cli.py\", line 1138, in update_cognito_triggers\r\n    self.zappa.update_cognito(self.lambda_name, user_pool, lambda_configs, self.lambda_arn)\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\zappa\\core.py\", line 1803, in update_cognito\r\n    result = self.cognito_client.update_user_pool(UserPoolId=user_pool, **description_kwargs)\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\botocore\\client.py\", line 357, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"c:\\***\\***\\venv\\lib\\site-packages\\botocore\\client.py\", line 661, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.errorfactory.InvalidParameterException: An error occurred (InvalidParameterException) when calling the UpdateUserPool operation: Please use TemporaryPasswordValidityDays instead of UnusedAccountValidityDays\r\n```\r\nAn associate of mine did the configuration 2 or 3 weeks ago and everything worked. \r\n\r\n\r\n## Possible Fix\r\nIn boto3 documentation it is said [here](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/cognito-idp.html#CognitoIdentityProvider.Client.update_user_pool) that : \r\n```\r\nNote\r\nIf you set a value for TemporaryPasswordValidityDays in PasswordPolicy , that value will be used and UnusedAccountValidityDays will be deprecated for that user pool.\r\n```\r\nBut it seems now, that it will not only be deprecated, but also that it shouldn't be in the request body.\r\n\r\nAbout zappa, in the `update_cognito` function in the `core.py` file, the `UnusedAccountValidityDays` attribut and the `TemporaryPasswordValidityDays` are get with the `describe_user_pool` function (line 2044). So both attributs are automatically present in the arguments for the `update_user_pool` function (line 2061).\r\nIf the attribut `UnusedAccountValidityDays`  is deleted from `description_kwargs['AdminCreateUserConfig']` (the attributs for the `update_user_pool` function) the update works good. \r\nIt's a bit rude to resolve the problem but I didn't found a better fix for the moment.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Create a cognito pool\r\n2. Configure the event trigger as said in the zappa readme\r\n3. Make a zappa update\r\n\r\n## Your Environment\r\nTest with : \r\n\r\n* Zappa version used: 0.48.2 \r\n* Operating System and Python version: Windows 10 and python 3.7.3 \r\n* The output of `pip freeze`: \r\n```\r\nargcomplete==1.9.3\r\nboto3==1.9.152\r\nbotocore==1.12.152\r\ncertifi==2019.3.9\r\ncfn-flip==1.2.0\r\nchardet==3.0.4\r\nClick==7.0\r\nclickclick==1.2.2\r\nconnexion==2.2.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.3\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\ninflection==0.3.1\r\nitsdangerous==1.1.0\r\nJinja2==2.10.1\r\njmespath==0.9.3\r\njsonschema==2.6.0\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\nopenapi-spec-validator==0.2.7\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==3.13\r\nrequests==2.22.0\r\ns3transfer==0.2.0\r\nsentry-sdk==0.8.0\r\nsix==1.12.0\r\nSQLAlchemy==1.3.4\r\nswagger-ui-bundle==0.0.3\r\ntext-unidecode==1.2\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.7\r\nUnidecode==1.0.23\r\nurllib3==1.24.3\r\nWerkzeug==0.15.4\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\n```\r\n\r\n* Your `zappa_settings.py`: \r\n```\r\n\"preprod\" : {\r\n        \"aws_region\": \"eu-central-1\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"***\",\r\n        \"runtime\": \"python3.7\",\r\n        \"s3_bucket\": \"***\",\r\n        \"certificate_arn\": \"***\",\r\n        \"domain\": \"***\",\r\n        \"api_key_required\": true,\r\n        \"cloudwatch_log_level\": \"INFO\",\r\n        \"cors\": true,\r\n        \"extra_permissions\": [{\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"cognito-idp:*\"\r\n            ],\r\n            \"Resource\": \"*\"\r\n        }],\r\n        \"cognito\": { \r\n            \"user_pool\": \"***\", \r\n            \"triggers\": [{\r\n                \"source\": \"PreAuthentication_Authentication\", \r\n                \"function\": \"my_app.pre_authentication_function\"\r\n            }]\r\n        }\r\n    }\r\n```\r\n\r\n\r\nAnd with : \r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: Windows 10 and python 3.6\r\n* The output of `pip freeze`: \r\n```\r\nargcomplete==1.9.3\r\nboto3==1.9.79\r\nbotocore==1.12.79\r\ncertifi==2019.3.9\r\ncfn-flip==1.2.0\r\nchardet==3.0.4\r\nClick==7.0\r\nclickclick==1.2.2\r\nconnexion==2.2.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.3\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\ninflection==0.3.1\r\nitsdangerous==1.1.0\r\nJinja2==2.10.1\r\njmespath==0.9.3\r\njsonschema==2.6.0\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\nopenapi-spec-validator==0.2.7\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==3.13\r\nrequests==2.22.0\r\ns3transfer==0.1.13\r\nsentry-sdk==0.8.0\r\nsix==1.12.0\r\nSQLAlchemy==1.3.4\r\nswagger-ui-bundle==0.0.3\r\ntext-unidecode==1.2\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.7\r\nUnidecode==1.0.23\r\nurllib3==1.24.3\r\nWerkzeug==0.15.4\r\nwsgi-request-logger==0.4.6\r\nzappa==0.47.1\r\n```\r\n\r\n* Your `zappa_settings.py`: \r\n```\r\n\"preprod\" : {\r\n        \"aws_region\": \"eu-central-1\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"***\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"***\",\r\n        \"certificate_arn\": \"***\",\r\n        \"domain\": \"***\",\r\n        \"api_key_required\": true,\r\n        \"cloudwatch_log_level\": \"INFO\",\r\n        \"cors\": true,\r\n        \"extra_permissions\": [{\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"cognito-idp:*\"\r\n            ],\r\n            \"Resource\": \"*\"\r\n        }],\r\n        \"cognito\": { \r\n            \"user_pool\": \"***\", \r\n            \"triggers\": [{\r\n                \"source\": \"PreAuthentication_Authentication\", \r\n                \"function\": \"my_app.pre_authentication_function\"\r\n            }]\r\n        }\r\n    }\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1870", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1870/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1870/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1870/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1870", "id": 442738573, "node_id": "MDU6SXNzdWU0NDI3Mzg1NzM=", "number": 1870, "title": "I can not get slim_handler=true work", "user": {"login": "qiubill", "id": 22843313, "node_id": "MDQ6VXNlcjIyODQzMzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/22843313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiubill", "html_url": "https://github.com/qiubill", "followers_url": "https://api.github.com/users/qiubill/followers", "following_url": "https://api.github.com/users/qiubill/following{/other_user}", "gists_url": "https://api.github.com/users/qiubill/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiubill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiubill/subscriptions", "organizations_url": "https://api.github.com/users/qiubill/orgs", "repos_url": "https://api.github.com/users/qiubill/repos", "events_url": "https://api.github.com/users/qiubill/events{/privacy}", "received_events_url": "https://api.github.com/users/qiubill/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-10T14:08:45Z", "updated_at": "2020-07-29T00:46:09Z", "closed_at": "2019-05-15T15:50:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nI try to make the example code from zappa github work using slim_handler=true, but after deployment, always got error like this: \r\nError: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 502 response code.\r\nI am running Zappa _from a virtual environment_ and are using Python 3.6\r\n\r\n## Expected Behavior\r\nI tried to deploy the example code from zappa github without slim_handler=true, everything works perfectly. Based on the document, if we have a project size bigger than 50M, we have to use slim_handler=true, that is why I set slim_handler=true in the zappa_settings.json, and I hope things should work as documented.\r\n\r\n## Actual Behavior\r\nAfter deployment is done, I see one error like this: \r\nError: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 502 response code.\r\n\r\nAnd from the zappa tail, I see the exception: \r\n\r\n[1557496083125] Failed to find library...right filename?\r\n[1557496083142] cannot import name 'Flask': ImportError\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 602, in lambda_handler\r\n  return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 245, in lambda_handler\r\n  handler = cls()\r\n  File \"/var/task/handler.py\", line 139, in __init__\r\n  self.app_module = importlib.import_module(self.settings.APP_MODULE)\r\n  File \"/var/lang/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n  return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/slim-handler-test/app.py\", line 3, in <module>\r\n  from flask import Flask\r\nImportError: cannot import name 'Flask'\r\n\r\nI also post more logs from the zappa tail:\r\n\r\n[1557496079308] [DEBUG] 2019-05-10T13:47:59.308Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from creating-client-class.iot-dat\r\na to creating-client-class.iot-data-plane\r\n[1557496079311] [DEBUG] 2019-05-10T13:47:59.311Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from before-call.apigateway to bef\r\nore-call.api-gateway\r\n[1557496079312] [DEBUG] 2019-05-10T13:47:59.312Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from request-created.machinelearni\r\nng.Predict to request-created.machine-learning.Predict\r\n[1557496079322] [DEBUG] 2019-05-10T13:47:59.322Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from before-parameter-build.autosc\r\naling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration\r\n[1557496079322] [DEBUG] 2019-05-10T13:47:59.322Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from before-parameter-build.route5\r\n3 to before-parameter-build.route-53\r\n[1557496079323] [DEBUG] 2019-05-10T13:47:59.323Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from request-created.cloudsearchdo\r\nmain.Search to request-created.cloudsearch-domain.Search\r\n[1557496079324] [DEBUG] 2019-05-10T13:47:59.324Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from docs.*.autoscaling.CreateLaun\r\nchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section\r\n[1557496079343] [DEBUG] 2019-05-10T13:47:59.343Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from before-parameter-build.logs.C\r\nreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask\r\n[1557496079343] [DEBUG] 2019-05-10T13:47:59.343Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from docs.*.logs.CreateExportTask.\r\ncomplete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section\r\n[1557496079343] [DEBUG] 2019-05-10T13:47:59.343Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from before-parameter-build.clouds\r\nearchdomain.Search to before-parameter-build.cloudsearch-domain.Search\r\n[1557496079343] [DEBUG] 2019-05-10T13:47:59.343Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Changing event name from docs.*.cloudsearchdomain.Sear\r\nch.complete-section to docs.*.cloudsearch-domain.Search.complete-section\r\n[1557496079362] [DEBUG] 2019-05-10T13:47:59.362Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Loading JSON file: /var/task/boto3/data/s3/2006-03-01/\r\nresources-1.json\r\n[1557496079405] [DEBUG] 2019-05-10T13:47:59.404Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Looking for credentials via: env\r\n[1557496079405] [INFO] 2019-05-10T13:47:59.405Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Found credentials in environment variables.\r\n[1557496079405] [DEBUG] 2019-05-10T13:47:59.405Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Loading JSON file: /var/task/botocore/data/endpoints.j\r\nson\r\n[1557496079423] [DEBUG] 2019-05-10T13:47:59.422Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event choose-service-name: calling handler <function h\r\nandle_service_name_alias at 0x7f3f07ca1598>\r\n[1557496079461] [DEBUG] 2019-05-10T13:47:59.461Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Loading JSON file: /var/task/botocore/data/s3/2006-03-\r\n01/service-2.json\r\n[1557496079483] [DEBUG] 2019-05-10T13:47:59.483Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event creating-client-class.s3: calling handler <funct\r\nion add_generate_presigned_post at 0x7f3f07d15e18>\r\n[1557496079483] [DEBUG] 2019-05-10T13:47:59.483Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event creating-client-class.s3: calling handler <funct\r\nion lazy_call.<locals>._handler at 0x7f3f07b780d0>\r\n[1557496079661] [DEBUG] 2019-05-10T13:47:59.661Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event creating-client-class.s3: calling handler <funct\r\nion add_generate_presigned_url at 0x7f3f07d15bf8>\r\n[1557496079662] [DEBUG] 2019-05-10T13:47:59.662Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 The s3 config key is not a dictionary type, ignoring i\r\nts value of: None\r\n[1557496079681] [DEBUG] 2019-05-10T13:47:59.680Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Setting s3 timeout as (60, 60)\r\n[1557496079682] [DEBUG] 2019-05-10T13:47:59.681Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Loading JSON file: /var/task/botocore/data/_retry.json\r\n\r\n[1557496079682] [DEBUG] 2019-05-10T13:47:59.682Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Registering retry handlers for service: s3\r\n[1557496079683] [DEBUG] 2019-05-10T13:47:59.683Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Defaulting to S3 virtual host style addressing with pa\r\nth style addressing fallback.\r\n[1557496079683] [DEBUG] 2019-05-10T13:47:59.683Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Loading s3:s3\r\n[1557496079685] [DEBUG] 2019-05-10T13:47:59.685Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Loading s3:Object\r\n[1557496079687] [DEBUG] 2019-05-10T13:47:59.687Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event creating-resource-class.s3.Object: calling handl\r\ner <function lazy_call.<locals>._handler at 0x7f3f07b7bb70>\r\n[1557496079687] [DEBUG] 2019-05-10T13:47:59.687Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Calling s3:get_object with {'Bucket': 'tpmtech', 'Key'\r\n: 'dev_slim-handler-test_current_project.tar.gz'}\r\n[1557496079687] [DEBUG] 2019-05-10T13:47:59.687Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-parameter-build.s3.GetObject: calling han\r\ndler <function sse_md5 at 0x7f3f07c9fd08>\r\n[1557496079687] [DEBUG] 2019-05-10T13:47:59.687Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-parameter-build.s3.GetObject: calling han\r\ndler <function validate_bucket_name at 0x7f3f07c9fc80>\r\n[1557496079687] [DEBUG] 2019-05-10T13:47:59.687Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-parameter-build.s3.GetObject: calling han\r\ndler <bound method S3RegionRedirector.redirect_from_cache of <botocore.utils.S3RegionRedirector object at 0x7f3f075de4a8>>\r\n[1557496079687] [DEBUG] 2019-05-10T13:47:59.687Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-parameter-build.s3.GetObject: calling han\r\ndler <function generate_idempotent_uuid at 0x7f3f07c9f8c8>\r\n[1557496079688] [DEBUG] 2019-05-10T13:47:59.688Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-call.s3.GetObject: calling handler <funct\r\nion add_expect_header at 0x7f3f07cab1e0>\r\n[1557496079688] [DEBUG] 2019-05-10T13:47:59.688Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-call.s3.GetObject: calling handler <bound\r\n method S3RegionRedirector.set_request_url of <botocore.utils.S3RegionRedirector object at 0x7f3f075de4a8>>\r\n[1557496079688] [DEBUG] 2019-05-10T13:47:59.688Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-call.s3.GetObject: calling handler <funct\r\nion inject_api_version_header_if_needed at 0x7f3f07cc2400>\r\n[1557496079688] [DEBUG] 2019-05-10T13:47:59.688Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Making request for OperationModel(name=GetObject) with\r\n params: {'url_path': '/tpmtech/dev_slim-handler-test_current_project.tar.gz', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent'\r\n: 'Boto3/1.9.144 Python/3.6.8 Linux/4.14.106-92.87.amzn2.x86_64 exec-env/AWS_Lambda_python3.6 Botocore/1.12.144 Resource'}, 'body': b'', 'ur\r\nl': 'https://s3.amazonaws.com/tpmtech/dev_slim-handler-test_current_project.tar.gz', 'context': {'client_region': 'us-east-1', 'client_confi\r\ng': <botocore.config.Config object at 0x7f3f0769fb70>, 'has_streaming_input': False, 'auth_type': None, 'signing': {'bucket': 'tpmtech'}}}\r\n[1557496079701] [DEBUG] 2019-05-10T13:47:59.700Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event request-created.s3.GetObject: calling handler <b\r\nound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f3f0769f1d0>>\r\n[1557496079701] [DEBUG] 2019-05-10T13:47:59.701Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event choose-signer.s3.GetObject: calling handler <bou\r\nnd method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f3f07b00470>>\r\n[1557496079701] [DEBUG] 2019-05-10T13:47:59.701Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event choose-signer.s3.GetObject: calling handler <fun\r\nction set_operation_specific_signer at 0x7f3f07c9f7b8>\r\n[1557496079701] [DEBUG] 2019-05-10T13:47:59.701Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event before-sign.s3.GetObject: calling handler <funct\r\nion fix_s3_host at 0x7f3f07d4f730>\r\n[1557496079701] [DEBUG] 2019-05-10T13:47:59.701Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Checking for DNS compatible bucket for: https://s3.ama\r\nzonaws.com/tpmtech/dev_slim-handler-test_current_project.tar.gz\r\n[1557496079701] [DEBUG] 2019-05-10T13:47:59.701Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 URI updated to: https://tpmtech.s3.amazonaws.com/dev_s\r\nlim-handler-test_current_project.tar.gz\r\n[1557496079702] [DEBUG] 2019-05-10T13:47:59.702Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Calculating signature using v4 auth.\r\n[1557496079702] [DEBUG] 2019-05-10T13:47:59.702Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 CanonicalRequest:\r\nGET\r\n/dev_slim-handler-test_current_project.tar.gz\r\n\r\nhost:tpmtech.s3.amazonaws.com\r\nx-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nx-amz-date:20190510T134759Z\r\nx-amz-security-token:AgoJb3JpZ2luX2VjEH0aCXVzLWVhc3QtMSJHMEUCIHy90LIuLjwRaSZNkMYqqJUVC5OR2kiVgeL3znPZp+Z0AiEAzASsDNi+howgCA1vyJ3rvW1Rvb2HKwn\r\nYywrn9aNei1EqkQIIdhAAGgw3MDA5ODc4Mjg1MjUiDHydcoGzAaRwGQk4HyruARazCemHRsibNGlvoiw4s+jKnyTnAsdR9+xW7jZk+zOl6FN4Jd+Awov9EO6JgQT5RMo3re1saSthSTf\r\nxT42cDjKqBSAaoQ/MmpCj92tONEXhTtsZVyRGSQG2jGe+mWuVaEnO43W30yUZtulHeTz5hoaIWcATc3d2X7NWezHOW+4eEyrhzeKo1T6VBeDxOG1Sc4JbiZmdDxNUR3BPnf9Xe+8/+Nr\r\nqQS+9hu1F6uebramKlecptbxfIOePUBKugFiqd9Xz+DjTyMhQ+fkIDRj+7yv53rruOjn5hq6QKABB52+w6fKJ8GGNXS+9wa8iiMEw5+rV5gU6tAEIQn9TwcdYz5w1As9iVTx6EVWmanw\r\nY/BLre2ulGOkPlizFKyvk8HK+Lcfae2BkACRSuXipEC8as8GEz3J7Pxlma5u5HJZqqDY7z7675vMfTL8htyfWXUqPkKh/0RN5cpvgWPPDzjfUPWgkk3YpmzwRuTEpSQf3S4ou/X/+hYq\r\nNa+okxPblNwsWsA/K0+yclXtevyz3ZEKqkE5WoTE4Ag1TiCVSmHgiZ6YmOi+BsCzxxrMcQ1s=\r\n\r\nhost;x-amz-content-sha256;x-amz-date;x-amz-security-token\r\ne3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\n[1557496079721] [DEBUG] 2019-05-10T13:47:59.720Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 StringToSign:\r\nAWS4-HMAC-SHA256\r\n20190510T134759Z\r\n20190510/us-east-1/s3/aws4_request\r\nc271ea60a294605485ade4fa0f0e15b5ce6fe125d91368026694ff356d8b6e24\r\n[1557496079721] [DEBUG] 2019-05-10T13:47:59.721Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Signature:\r\nc3b70903d2943bd08694fc58d57e2f9df32cee6d8c12c9d2c61ad801b8e8f5cf\r\n[1557496079721] [DEBUG] 2019-05-10T13:47:59.721Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Sending http request: <AWSPreparedRequest stream_outpu\r\nt=True, method=GET, url=https://tpmtech.s3.amazonaws.com/dev_slim-handler-test_current_project.tar.gz, headers={'User-Agent': b'Boto3/1.9.14\r\n4 Python/3.6.8 Linux/4.14.106-92.87.amzn2.x86_64 exec-env/AWS_Lambda_python3.6 Botocore/1.12.144 Resource', 'X-Amz-Date': b'20190510T134759Z\r\n', 'X-Amz-Security-Token': b'AgoJb3JpZ2luX2VjEH0aCXVzLWVhc3QtMSJHMEUCIHy90LIuLjwRaSZNkMYqqJUVC5OR2kiVgeL3znPZp+Z0AiEAzASsDNi+howgCA1vyJ3rvW1\r\nRvb2HKwnYywrn9aNei1EqkQIIdhAAGgw3MDA5ODc4Mjg1MjUiDHydcoGzAaRwGQk4HyruARazCemHRsibNGlvoiw4s+jKnyTnAsdR9+xW7jZk+zOl6FN4Jd+Awov9EO6JgQT5RMo3re1\r\nsaSthSTfxT42cDjKqBSAaoQ/MmpCj92tONEXhTtsZVyRGSQG2jGe+mWuVaEnO43W30yUZtulHeTz5hoaIWcATc3d2X7NWezHOW+4eEyrhzeKo1T6VBeDxOG1Sc4JbiZmdDxNUR3BPnf9\r\nXe+8/+NrqQS+9hu1F6uebramKlecptbxfIOePUBKugFiqd9Xz+DjTyMhQ+fkIDRj+7yv53rruOjn5hq6QKABB52+w6fKJ8GGNXS+9wa8iiMEw5+rV5gU6tAEIQn9TwcdYz5w1As9iVTx\r\n6EVWmanwY/BLre2ulGOkPlizFKyvk8HK+Lcfae2BkACRSuXipEC8as8GEz3J7Pxlma5u5HJZqqDY7z7675vMfTL8htyfWXUqPkKh/0RN5cpvgWPPDzjfUPWgkk3YpmzwRuTEpSQf3S4o\r\nu/X/+hYqNa+okxPblNwsWsA/K0+yclXtevyz3ZEKqkE5WoTE4Ag1TiCVSmHgiZ6YmOi+BsCzxxrMcQ1s=', 'X-Amz-Content-SHA256': b'e3b0c44298fc1c149afbf4c8996fb9\r\n2427ae41e4649b934ca495991b7852b855', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2GNRBNEW2D36ISTD/20190510/us-east-1/s3/aws4_request,\r\n SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=c3b70903d2943bd08694fc58d57e2f9df32cee6d8c12c9d2c61ad801\r\nb8e8f5cf'}>\r\n[1557496079722] [DEBUG] 2019-05-10T13:47:59.722Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Converted retries value: False -> Retry(total=False, c\r\nonnect=None, read=None, redirect=0, status=None)\r\n[1557496079722] [DEBUG] 2019-05-10T13:47:59.722Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Starting new HTTPS connection (1): tpmtech.s3.amazonaw\r\ns.com:443\r\n[1557496079795] [DEBUG] 2019-05-10T13:47:59.795Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 https://tpmtech.s3.amazonaws.com:443 \"GET /dev_slim-ha\r\nndler-test_current_project.tar.gz HTTP/1.1\" 200 11136487\r\n[1557496079795] [DEBUG] 2019-05-10T13:47:59.795Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Response headers: {'x-amz-id-2': '3uHfKAgrvpTqBrv5ob8v\r\nNJ70yvKEgVJoH6UeKGnl5FNyCIEq59qIMlP+lPtYxz8tH+Z62m0SgR4=', 'x-amz-request-id': '71B334D30EE0CE21', 'Date': 'Fri, 10 May 2019 13:48:00 GMT',\r\n'Last-Modified': 'Fri, 10 May 2019 13:47:51 GMT', 'ETag': '\"16dcafba67de29d54d2d92ece6eb15c5-2\"', 'Accept-Ranges': 'bytes', 'Content-Type':\r\n'binary/octet-stream', 'Content-Length': '11136487', 'Server': 'AmazonS3'}\r\n[1557496079796] [DEBUG] 2019-05-10T13:47:59.795Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Response body:\r\n<botocore.response.StreamingBody object at 0x7f3f075440f0>\r\n[1557496079797] [DEBUG] 2019-05-10T13:47:59.797Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event needs-retry.s3.GetObject: calling handler <botoc\r\nore.retryhandler.RetryHandler object at 0x7f3f075de4e0>\r\n[1557496079797] [DEBUG] 2019-05-10T13:47:59.797Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 No retry needed.\r\n[1557496079797] [DEBUG] 2019-05-10T13:47:59.797Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Event needs-retry.s3.GetObject: calling handler <bound\r\n method S3RegionRedirector.redirect_from_error of <botocore.utils.S3RegionRedirector object at 0x7f3f075de4a8>>\r\n[1557496079797] [DEBUG] 2019-05-10T13:47:59.797Z 2650443f-57e0-42c1-8695-1d8b67b4ef71 Response: {'ResponseMetadata': {'RequestId': '71B334D3\r\n0EE0CE21', 'HostId': '3uHfKAgrvpTqBrv5ob8vNJ70yvKEgVJoH6UeKGnl5FNyCIEq59qIMlP+lPtYxz8tH+Z62m0SgR4=', 'HTTPStatusCode': 200, 'HTTPHeaders': {\r\n'x-amz-id-2': '3uHfKAgrvpTqBrv5ob8vNJ70yvKEgVJoH6UeKGnl5FNyCIEq59qIMlP+lPtYxz8tH+Z62m0SgR4=', 'x-amz-request-id': '71B334D30EE0CE21', 'date'\r\n: 'Fri, 10 May 2019 13:48:00 GMT', 'last-modified': 'Fri, 10 May 2019 13:47:51 GMT', 'etag': '\"16dcafba67de29d54d2d92ece6eb15c5-2\"', 'accept\r\n-ranges': 'bytes', 'content-type': 'binary/octet-stream', 'content-length': '11136487', 'server': 'AmazonS3'}, 'RetryAttempts': 0}, 'AcceptR\r\nanges': 'bytes', 'LastModified': datetime.datetime(2019, 5, 10, 13, 47, 51, tzinfo=tzutc()), 'ContentLength': 11136487, 'ETag': '\"16dcafba67\r\nde29d54d2d92ece6eb15c5-2\"', 'ContentType': 'binary/octet-stream', 'Metadata': {}, 'Body': <botocore.response.StreamingBody object at 0x7f3f0\r\n75440f0>}\r\n[1557496083125] Failed to find library...right filename?\r\n[1557496083142] cannot import name 'Flask': ImportError\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 602, in lambda_handler\r\n  return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 245, in lambda_handler\r\n  handler = cls()\r\n  File \"/var/task/handler.py\", line 139, in __init__\r\n  self.app_module = importlib.import_module(self.settings.APP_MODULE)\r\n  File \"/var/lang/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n  return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/slim-handler-test/app.py\", line 3, in <module>\r\n  from flask import Flask\r\nImportError: cannot import name 'Flask'\r\n\r\n## Possible Fix\r\nI tried to exclude the concurrent dependency from the older post, it still does not work. And I believe the concurrent exclusion should have been done from the framework code level, since I am using the latest zappa (0.48.2). But it still does not work.\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Just use the same example code from the zappa github \r\n2. add \"slim_handler\": true to zappa_settings.json\r\n3. run zappa update dev\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used:\r\n0.48.2\r\n* Operating System and Python version:\r\nWindows 7 and python 3.6.8\r\n* The output of `pip freeze`:\r\nargcomplete==1.9.3\r\nboto3==1.9.144\r\nbotocore==1.12.144\r\ncertifi==2019.3.9\r\ncfn-flip==1.2.0\r\nchardet==3.0.4\r\nClick==7.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.2\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.10.1\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.1\r\nplacebo==0.9.0\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==5.1\r\nrequests==2.21.0\r\ns3transfer==0.2.0\r\nsix==1.12.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.6\r\nUnidecode==1.0.23\r\nurllib3==1.24.3\r\nWerkzeug==0.15.2\r\nwsgi-request-logger==0.4.6\r\nzappa==0.48.2\r\n\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n# Generated by Zappa\r\nAPP_MODULE='app'\r\nAPP_FUNCTION='app'\r\nEXCEPTION_HANDLER=None\r\nDEBUG=True\r\nLOG_LEVEL='DEBUG'\r\nBINARY_SUPPORT=True\r\nCONTEXT_HEADER_MAPPINGS={}\r\nDOMAIN=None\r\nBASE_PATH=None\r\nENVIRONMENT_VARIABLES={'AWS_REGION': 'us-east-1', 'ENVIRONMENT': 'dev'}\r\nAPI_STAGE='dev'\r\nPROJECT_NAME='slim-handler-test'\r\nSETTINGS_FILE=None\r\nDJANGO_SETTINGS=None\r\nARCHIVE_PATH='s3://tpmtech/dev_slim-handler-test_current_project.tar.gz'\r\nSLIM_HANDLER=True\r\nAWS_EVENT_MAPPING={}\r\nAWS_BOT_EVENT_MAPPING={}\r\nCOGNITO_TRIGGER_MAPPING={}\r\nASYNC_RESPONSE_TABLE=''\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1861", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1861/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1861/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1861/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1861", "id": 440038832, "node_id": "MDU6SXNzdWU0NDAwMzg4MzI=", "number": 1861, "title": "[Enhancement] Use abi3 binary versions for packages such as cryptography that don't have manylinux for Python 3.6/3.7", "user": {"login": "nikbora", "id": 2362887, "node_id": "MDQ6VXNlcjIzNjI4ODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/2362887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikbora", "html_url": "https://github.com/nikbora", "followers_url": "https://api.github.com/users/nikbora/followers", "following_url": "https://api.github.com/users/nikbora/following{/other_user}", "gists_url": "https://api.github.com/users/nikbora/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikbora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikbora/subscriptions", "organizations_url": "https://api.github.com/users/nikbora/orgs", "repos_url": "https://api.github.com/users/nikbora/repos", "events_url": "https://api.github.com/users/nikbora/events{/privacy}", "received_events_url": "https://api.github.com/users/nikbora/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-03T13:10:40Z", "updated_at": "2020-02-29T08:06:17Z", "closed_at": "2020-02-29T08:06:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Context\r\nZappa currently uses a combination of manylinux wheels and lambda-packages to get the right binary during deploy time. In case of manylinux, some libraries like `cryptography` don't have a manylinux binary for Python 3.6 and 3.7, but do have one for abi3 and Python 3.4, which is suppossedly upwards compatible. See this thread for more info: https://github.com/pyca/cryptography/issues/4406\r\n\r\n## Expected Behavior\r\nWhen picking the right binary wheel for Python 3.x, Zappa should be smart enough to see if there is abi3 for any 3.x versions below the one needed.\r\n\r\n## Actual Behavior\r\nZappa only looks at Python 3.7/3.6 manylinux binary and thinks there isn't one. In the case of cryptography (that does have an abi3 one for Python 3.4) Zappa then goes to lambda-packages and uses whatever version is there, irrespective of the one you have in your virtualenv.\r\n\r\n## Possible Fix\r\n1. Test that using abi3 binaries does indeed work on on AWS Lambda (using cryptography as a guinnea pig).\r\n2. Add code into the packaging/deploy logic to resort to this if it exists.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1845", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1845/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1845/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1845/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1845", "id": 428040875, "node_id": "MDU6SXNzdWU0MjgwNDA4NzU=", "number": 1845, "title": "Documentation request: use of more advanced regex in exclude setting", "user": {"login": "bendog", "id": 894916, "node_id": "MDQ6VXNlcjg5NDkxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/894916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bendog", "html_url": "https://github.com/bendog", "followers_url": "https://api.github.com/users/bendog/followers", "following_url": "https://api.github.com/users/bendog/following{/other_user}", "gists_url": "https://api.github.com/users/bendog/gists{/gist_id}", "starred_url": "https://api.github.com/users/bendog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bendog/subscriptions", "organizations_url": "https://api.github.com/users/bendog/orgs", "repos_url": "https://api.github.com/users/bendog/repos", "events_url": "https://api.github.com/users/bendog/events{/privacy}", "received_events_url": "https://api.github.com/users/bendog/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-02T06:10:48Z", "updated_at": "2019-04-02T07:07:21Z", "closed_at": "2019-04-02T07:07:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "problem:\r\nbotocore is huge\r\n`\"exclude\": [\"botocore*\"]` will also remove aws_xray_sdk/ext/botocore\r\nneed to filter out botocore* but only when it's the package, not when it's a subfolder\r\nexamples in the readme are only \"botocore*\"\r\n\r\n\r\ncan we have an example of how to define a more complex regex pattern, something like `\"exclude\": [\"^((?!xray).)*botocore*\"]`?\r\nto show how to filter out specific folders or specific structures? \r\n\r\nthere seem to be a lot of issues raised around this, but nobody is showing their solution code.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1844", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1844/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1844/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1844/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1844", "id": 427369139, "node_id": "MDU6SXNzdWU0MjczNjkxMzk=", "number": 1844, "title": "Unable to update code using \"zappa update dev\" command", "user": {"login": "nidhinp", "id": 5348730, "node_id": "MDQ6VXNlcjUzNDg3MzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5348730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nidhinp", "html_url": "https://github.com/nidhinp", "followers_url": "https://api.github.com/users/nidhinp/followers", "following_url": "https://api.github.com/users/nidhinp/following{/other_user}", "gists_url": "https://api.github.com/users/nidhinp/gists{/gist_id}", "starred_url": "https://api.github.com/users/nidhinp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nidhinp/subscriptions", "organizations_url": "https://api.github.com/users/nidhinp/orgs", "repos_url": "https://api.github.com/users/nidhinp/repos", "events_url": "https://api.github.com/users/nidhinp/events{/privacy}", "received_events_url": "https://api.github.com/users/nidhinp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-31T07:50:32Z", "updated_at": "2020-03-18T07:37:40Z", "closed_at": "2020-03-18T07:37:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am no longer able to update my development code. It is throwing ConnectionClosedError boto exception.\r\n\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\nAfter making changes to code base I can no longer use zappa update dev. Looks like lambda cannot access S3 bucket.\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. zappa update dev\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: OSx Mojave, Python 3.6\r\n* The output of `pip freeze`:\r\nargcomplete==1.9.3\r\nastroid==2.1.0\r\nautopep8==1.4.3\r\nBabel==2.6.0\r\nboto==2.49.0\r\nboto3==1.9.86\r\nbotocore==1.12.86\r\ncairocffi==1.0.2\r\ncertifi==2018.11.29\r\ncffi==1.12.2\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\ncssselect2==0.2.1\r\ndefusedxml==0.5.0\r\nDjango==2.1.5\r\ndjango-amazon-ses==2.0.0\r\ndjango-cleanup==3.2.0\r\ndjango-phonenumber-field==2.1.0\r\ndjango-redis==4.10.0\r\ndjango-storages-redux==1.3.3\r\ndjangorestframework==3.9.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nflake8==3.6.0\r\nfuture==0.16.0\r\ngeographiclib==1.49\r\ngeopy==1.18.1\r\ngooglemaps==3.0.2\r\nhjson==3.0.1\r\nidna==2.8\r\nisort==4.3.4\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nlazy-object-proxy==1.3.1\r\nmccabe==0.6.1\r\nphonenumberslite==8.10.2\r\nPillow==5.4.0\r\nplacebo==0.8.2\r\npsycopg2-binary==2.7.6.1\r\npycodestyle==2.4.0\r\npycparser==2.19\r\npyflakes==2.0.0\r\npylint==2.2.2\r\npython-dateutil==2.6.1\r\npython-google-places==1.4.1\r\npython-slugify==1.2.4\r\npytz==2018.7\r\nPyYAML==3.13\r\nredis==3.1.0\r\nrequests==2.21.0\r\ns3transfer==0.1.13\r\nsix==1.12.0\r\nsqlparse==0.2.4\r\ntinycss2==1.0.1\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.1\r\ntyped-ast==1.2.0\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nwebencodings==0.5.1\r\nWerkzeug==0.14.1\r\nwrapt==1.10.11\r\nwsgi-request-logger==0.4.6\r\nzappa==0.47.1\r\nzappa-django-utils==0.4.0\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n{\r\n    \"dev\": {\r\n        \"aws_region\": \"eu-west-1\",\r\n        \"django_settings\": \"***.settings.devs\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"****\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-****-****\",\r\n        \"vpc_config\" : {\r\n            \"SubnetIds\": [\r\n                \"subnet-****\",\r\n                \"subnet-*****\",\r\n                \"subnet-******\"\r\n            ],\r\n            \"SecurityGroupIds\": [\"sg-****\"]\r\n        },\r\n        \"certificate_arn\": \"arn:aws:acm:us-east-1:****\",\r\n        \"route53_enabled\": true,\r\n        \"domain\": \"my_project_domain_****\",\r\n        \"events\": [\r\n            {\r\n                \"function\": \"app.authentication.utils.process_avatar\",\r\n                \"event_source\": {\r\n                    \"arn\":  \"arn:aws:s3:::******\",\r\n                    \"key_filters\": [\r\n                        {\r\n                            \"type\": \"prefix\",\r\n                            \"value\": \"media/members/avatars/\"\r\n                        }\r\n                    ],\r\n                    \"events\": [\r\n                        \"s3:ObjectCreated:*\"\r\n                    ]\r\n                }\r\n            },\r\n            {\r\n                \"function\": \"app.business.utils.process_business_logo\",\r\n                \"event_source\": {\r\n                    \"arn\":  \"arn:aws:s3:::*****\",\r\n                    \"key_filters\": [\r\n                        {\r\n                            \"type\": \"prefix\",\r\n                            \"value\": \"media/business/logos/\"\r\n                        }\r\n                    ],\r\n                    \"events\": [\r\n                        \"s3:ObjectCreated:*\"\r\n                    ]\r\n                }\r\n            },\r\n            {\r\n                \"function\": \"app.social.zappa_tasks.engagement_beam_calculation\",\r\n                \"expression\": \"rate(12 hours)\"\r\n            },\r\n            {\r\n                \"function\": \"app.authentication.zappa_tasks.store_beam_stats\",\r\n                \"expression\": \"rate(24 hours)\"\r\n            }\r\n        ],\r\n        \"exclude\": [\r\n            \"*.gz\", \"*.rar\", \"*.pyc\", \"*.jpg\", \"*.jpeg\", \"*.mp4\",\r\n            \"*.DS_Store\"\r\n        ]\r\n    }\r\n}\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1838", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1838/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1838/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1838/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1838", "id": 424488254, "node_id": "MDU6SXNzdWU0MjQ0ODgyNTQ=", "number": 1838, "title": "Is the blog relevant?", "user": {"login": "dimaqq", "id": 662249, "node_id": "MDQ6VXNlcjY2MjI0OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/662249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dimaqq", "html_url": "https://github.com/dimaqq", "followers_url": "https://api.github.com/users/dimaqq/followers", "following_url": "https://api.github.com/users/dimaqq/following{/other_user}", "gists_url": "https://api.github.com/users/dimaqq/gists{/gist_id}", "starred_url": "https://api.github.com/users/dimaqq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dimaqq/subscriptions", "organizations_url": "https://api.github.com/users/dimaqq/orgs", "repos_url": "https://api.github.com/users/dimaqq/repos", "events_url": "https://api.github.com/users/dimaqq/events{/privacy}", "received_events_url": "https://api.github.com/users/dimaqq/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-23T10:54:52Z", "updated_at": "2020-05-11T21:17:54Z", "closed_at": "2020-05-11T21:17:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "The latest post on https://blog.zappa.io/ is from 2017.\r\nYet the URL is prominently displayed both on zappa.io and in the github project title.\r\nIt's mixed signals at best.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1836", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1836/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1836/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1836/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1836", "id": 423974933, "node_id": "MDU6SXNzdWU0MjM5NzQ5MzM=", "number": 1836, "title": "Using my own packages", "user": {"login": "dluiscosta", "id": 9122632, "node_id": "MDQ6VXNlcjkxMjI2MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/9122632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dluiscosta", "html_url": "https://github.com/dluiscosta", "followers_url": "https://api.github.com/users/dluiscosta/followers", "following_url": "https://api.github.com/users/dluiscosta/following{/other_user}", "gists_url": "https://api.github.com/users/dluiscosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/dluiscosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dluiscosta/subscriptions", "organizations_url": "https://api.github.com/users/dluiscosta/orgs", "repos_url": "https://api.github.com/users/dluiscosta/repos", "events_url": "https://api.github.com/users/dluiscosta/events{/privacy}", "received_events_url": "https://api.github.com/users/dluiscosta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-21T22:48:44Z", "updated_at": "2020-03-15T19:56:54Z", "closed_at": "2020-03-15T19:56:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently I work with a mono repository setup, and have all my coded functionalities (both python packages and lambdas) split between side-by-side folders, so I can separate responsibilities and reuse code. My desire is to be able to import my own packages and, as seamlessly as possible, deploy those dependencies with Zappa alongside the actual lambda using them.\r\n\r\nFor now I've been setting a .sh script to copy the files from each of my own required dependencies to the folder of the active virtualenv on the moment of deploy, which works, but starts to get messy and cumbersome when I have to start managing cycles and the dependencies of dependencies (...).\r\n\r\nI know setting private npms could be a way to solve my problem, but it seems like much work too. Can zappa package help me somehow? (Sincerelly, I didn't understand it's use from the docs)\r\n\r\nSince Zappa does not yet support Layers, what is the recommended approach to doing this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1835", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1835/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1835/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1835/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1835", "id": 423969402, "node_id": "MDU6SXNzdWU0MjM5Njk0MDI=", "number": 1835, "title": ".", "user": {"login": "dluiscosta", "id": 9122632, "node_id": "MDQ6VXNlcjkxMjI2MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/9122632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dluiscosta", "html_url": "https://github.com/dluiscosta", "followers_url": "https://api.github.com/users/dluiscosta/followers", "following_url": "https://api.github.com/users/dluiscosta/following{/other_user}", "gists_url": "https://api.github.com/users/dluiscosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/dluiscosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dluiscosta/subscriptions", "organizations_url": "https://api.github.com/users/dluiscosta/orgs", "repos_url": "https://api.github.com/users/dluiscosta/repos", "events_url": "https://api.github.com/users/dluiscosta/events{/privacy}", "received_events_url": "https://api.github.com/users/dluiscosta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-21T22:28:10Z", "updated_at": "2019-03-21T22:48:33Z", "closed_at": "2019-03-21T22:28:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1825", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1825/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1825/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1825/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1825", "id": 422911733, "node_id": "MDU6SXNzdWU0MjI5MTE3MzM=", "number": 1825, "title": "CORS issue: 0.48 release returns same value multiple times in access-control-allow-origin", "user": {"login": "vijayparne", "id": 10782606, "node_id": "MDQ6VXNlcjEwNzgyNjA2", "avatar_url": "https://avatars1.githubusercontent.com/u/10782606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vijayparne", "html_url": "https://github.com/vijayparne", "followers_url": "https://api.github.com/users/vijayparne/followers", "following_url": "https://api.github.com/users/vijayparne/following{/other_user}", "gists_url": "https://api.github.com/users/vijayparne/gists{/gist_id}", "starred_url": "https://api.github.com/users/vijayparne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vijayparne/subscriptions", "organizations_url": "https://api.github.com/users/vijayparne/orgs", "repos_url": "https://api.github.com/users/vijayparne/repos", "events_url": "https://api.github.com/users/vijayparne/events{/privacy}", "received_events_url": "https://api.github.com/users/vijayparne/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-03-19T19:25:18Z", "updated_at": "2019-03-21T14:13:00Z", "closed_at": "2019-03-21T14:13:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\naccess-control-allow-origin: https://www.example.com\r\n\r\n## Actual Behavior\r\naccess-control-allow-origin: https://www.example.com, https://www.example.com, https://www.example.com\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.48\r\n* Operating System and Python version: macOS 10.14: Mojave and python 3.6\r\n* The output of `pip freeze`: \r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`:  \r\n{\r\n  \"dev\": {\r\n    \"app_function\": \"myapi.app.app\",\r\n    \"cors\": true,\r\n    \"binary_support\": false,\r\n  }\r\n}\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1823", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1823/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1823/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1823/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1823", "id": 422776260, "node_id": "MDU6SXNzdWU0MjI3NzYyNjA=", "number": 1823, "title": "Unable to update lambda function", "user": {"login": "bruceduhamel", "id": 19784036, "node_id": "MDQ6VXNlcjE5Nzg0MDM2", "avatar_url": "https://avatars3.githubusercontent.com/u/19784036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bruceduhamel", "html_url": "https://github.com/bruceduhamel", "followers_url": "https://api.github.com/users/bruceduhamel/followers", "following_url": "https://api.github.com/users/bruceduhamel/following{/other_user}", "gists_url": "https://api.github.com/users/bruceduhamel/gists{/gist_id}", "starred_url": "https://api.github.com/users/bruceduhamel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bruceduhamel/subscriptions", "organizations_url": "https://api.github.com/users/bruceduhamel/orgs", "repos_url": "https://api.github.com/users/bruceduhamel/repos", "events_url": "https://api.github.com/users/bruceduhamel/events{/privacy}", "received_events_url": "https://api.github.com/users/bruceduhamel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-03-19T14:49:53Z", "updated_at": "2019-03-21T10:43:20Z", "closed_at": "2019-03-21T10:43:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nWith the latest release of Zappa (0.48.0), I'm no longer able to update my functions via the zappa update command. I reverted to 0.47.0 and found that it worked as expected.\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\nInitially, when using 0.48.0, the update command failed because it lacked the UpdateAlias lambda permissions. I updated the permissions and retried and it failed with the below error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/zappa/cli.py\", line 2759, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/zappa/cli.py\", line 509, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/zappa/cli.py\", line 556, in dispatch_command\r\n    self.update(self.vargs['zip'], self.vargs['no_upload'])\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/zappa/cli.py\", line 950, in update\r\n    self.lambda_arn = self.zappa.update_lambda_function(**kwargs)\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/zappa/core.py\", line 1135, in update_lambda_function\r\n    Name=ALB_LAMBDA_ALIAS,\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/botocore/client.py\", line 357, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/home/circleci/repo/env/lib/python2.7/site-packages/botocore/client.py\", line 661, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nResourceNotFoundException: An error occurred (ResourceNotFoundException) when calling the UpdateAlias operation: Alias not found: arn:aws:lambda:us-west-2:xxx:function:xxx-xxx-xxx:current-alb-version\r\n```\r\n\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nThe lambda function is updated when calling zappa update without errors.\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nThe update command fails with the above error.\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. pip install zappa (installs 0.48.0)\r\n2. zappa update test (deploy lambda for test environment)\r\n3. See above error ResourceNotFoundException\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.48.0\r\n* Operating System and Python version: Ubuntu 18.04, Python 2.7.15rc1\r\n* The output of `pip freeze`:\r\n```\r\nargcomplete==1.9.3\r\nbackoff==1.8.0\r\nboto3==1.9.116\r\nbotocore==1.12.116\r\ncertifi==2019.3.9\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\ndeepdiff==3.3.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nflexmock==0.10.3\r\nfreezegun==0.3.11\r\nfuncsigs==1.0.2\r\nfuture==0.16.0\r\nfutures==3.2.0\r\nfuzzyset==0.0.19\r\ngooglemaps==3.0.2\r\nhjson==3.0.1\r\nidna==2.8\r\njmespath==0.9.3\r\njsonpickle==1.1\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nmock==2.0.0\r\npbr==5.1.3\r\npeewee==2.10.2\r\nphonenumbers==8.10.7\r\nplacebo==0.9.0\r\npprint==0.1\r\nPyMySQL==0.9.3\r\npyshmht==0.0.2\r\npython-dateutil==2.6.1\r\npython-Levenshtein==0.12.0\r\npython-slugify==1.2.4\r\nPyYAML==3.13\r\nrequests==2.21.0\r\ns3transfer==0.2.0\r\nsix==1.12.0\r\ntexttable==1.6.1\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.5\r\ntyping==3.6.6\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nurlnorm==1.1.4\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.47.0\r\n```\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n```\r\n{\r\n    \"test\": {\r\n        \"app_function\": \"app.handler\",\r\n        \"aws_region\": \"us-west-2\",\r\n        \"project_name\": \"xxx-muns\",\r\n        \"s3_bucket\": \"zappa-xxx-xxx-xxx-xxx\",\r\n        \"runtime\": \"python2.7\",\r\n        \"memory_size\": 1280,\r\n        \"keep_warm\": false,\r\n        \"apigateway_enabled\": false,\r\n        \"timeout_seconds\": 300,\r\n        \"log_level\": \"INFO\",\r\n        \"events\": [\r\n            {\r\n                \"function\": \"app.handler\",\r\n                \"event_source\": {\r\n                    \"arn\": \"arn:aws:kinesis:us-west-2:xxx:stream/xxx-xxx-xxx-xxx\",\r\n                    \"starting_position\": \"TRIM_HORIZON\",\r\n                    \"batch_size\": 1,\r\n                    \"enabled\": true\r\n            }\r\n          }\r\n        ],\r\n        \"tags\": { \r\n           \"xxx\": \"xxx\",\r\n           \"environment\": \"test\"\r\n       },\r\n        \"vpc_config\": {\r\n          \"SubnetIds\": [\r\n            \"subnet-41649119\",\r\n            \"subnet-32c44b56\"\r\n          ],\r\n          \"SecurityGroupIds\": [\r\n            \"sg-53db3c35\"\r\n          ]\r\n        }\r\n    }\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1809", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1809/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1809/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1809/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1809", "id": 419226673, "node_id": "MDU6SXNzdWU0MTkyMjY2NzM=", "number": 1809, "title": "Flask example ModuleNotFoundError ", "user": {"login": "ChrisBolman", "id": 1119410, "node_id": "MDQ6VXNlcjExMTk0MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1119410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisBolman", "html_url": "https://github.com/ChrisBolman", "followers_url": "https://api.github.com/users/ChrisBolman/followers", "following_url": "https://api.github.com/users/ChrisBolman/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisBolman/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisBolman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisBolman/subscriptions", "organizations_url": "https://api.github.com/users/ChrisBolman/orgs", "repos_url": "https://api.github.com/users/ChrisBolman/repos", "events_url": "https://api.github.com/users/ChrisBolman/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisBolman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-10T20:12:03Z", "updated_at": "2019-03-11T01:25:34Z", "closed_at": "2019-03-11T01:25:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to deploy a skeleton Flask app referencing the [example](https://github.com/Miserlou/Zappa/tree/master/example) and keep hitting this err on `zappa deploy`:\r\n\r\n```\r\nDeploying API Gateway..\r\nError: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 500 response code.\r\n```\r\n\r\nvirtualenv with python: 3.6.5\r\n\r\nroot folder:\r\n\r\n```\r\n- app.py\r\n- requirements.txt\r\n- zappa_settings.json\r\n```\r\n\r\napp.py:\r\n\r\n```\r\nimport logging\r\nfrom flask import Flask\r\n\r\napp = Flask(__name__)\r\nlogging.basicConfig()\r\nlogger = logging.getLogger(__name__)\r\nlogger.setLevel(logging.DEBUG)\r\n\r\n@app.route('/', methods=['GET', 'POST'])\r\ndef lambda_handler(event=None, context=None):\r\n\tlogger.info('Lambda function invoked index()')\r\n\treturn 'Success'\r\n\r\nif __name__ == '__main__':\r\n    app.run()\r\n```\r\n\r\npip freeze:\r\n\r\n```\r\nargcomplete==1.9.3\r\nawscli==1.16.121\r\nbase58==1.0.0\r\nboto==2.48.0\r\nboto3==1.7.4\r\nbotocore==1.10.6\r\ncertifi==2019.3.9\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\ncolorama==0.3.9\r\nconfigparser==3.5.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.2\r\nFlask-Boto3==0.3.2\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.10\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.0\r\nplacebo==0.9.0\r\npyasn1==0.4.5\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==3.13\r\nrequests==2.21.0\r\nrsa==3.4.2\r\ns3transfer==0.1.13\r\nsix==1.11.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.5\r\nUnidecode==1.0.23\r\nurllib3==1.23\r\nvirtualenv==13.1.0\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.47.1\r\n```\r\n\r\nzappa_settings.json:\r\n\r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"app.app\",\r\n        \"lambda_handler\": \"app.lambda_handler\",\r\n        \"profile_name\": \"dev-app\",\r\n        \"manage_roles\": false,\r\n        \"role_name\":\"dev-ZappaLambdaExecutionRole\",\r\n        \"role_arn\": \"arn:aws:iam::***:role/dev-ZappaLambdaExecutionRole\",\r\n        \"project_name\": \"project-dev\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-foo\",\r\n        \"log_level\": \"DEBUG\",\r\n        \"http_methods\": [\"GET\"],\r\n        \"parameter_depth\": 1,\r\n        \"timeout_seconds\": 300,\r\n        \"memory_size\": 128,\r\n        \"use_precompiled_packages\": true\r\n    }\r\n}\r\n```\r\n\r\nzappa tail dev:\r\n\r\n```\r\nNo module named 'app.init'; 'app' is not a package: ModuleNotFoundError\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 580, in lambda_handler\r\n  return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 245, in lambda_handler\r\n  handler = cls()\r\n  File \"/var/task/handler.py\", line 139, in __init__\r\n  self.app_module = importlib.import_module(self.settings.APP_MODULE)\r\n  File \"/var/lang/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n  return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 950, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'app.init'; 'app' is not a package\r\n\r\n```\r\n\r\nper # [1491](https://github.com/Miserlou/Zappa/issues/1491) I've tried clearing out my .pyc files. same err.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1805", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1805/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1805/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1805/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1805", "id": 418353124, "node_id": "MDU6SXNzdWU0MTgzNTMxMjQ=", "number": 1805, "title": "Possible to workaround API Gateway timeout limits?", "user": {"login": "mojimi", "id": 10172340, "node_id": "MDQ6VXNlcjEwMTcyMzQw", "avatar_url": "https://avatars2.githubusercontent.com/u/10172340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mojimi", "html_url": "https://github.com/mojimi", "followers_url": "https://api.github.com/users/mojimi/followers", "following_url": "https://api.github.com/users/mojimi/following{/other_user}", "gists_url": "https://api.github.com/users/mojimi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mojimi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mojimi/subscriptions", "organizations_url": "https://api.github.com/users/mojimi/orgs", "repos_url": "https://api.github.com/users/mojimi/repos", "events_url": "https://api.github.com/users/mojimi/events{/privacy}", "received_events_url": "https://api.github.com/users/mojimi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-07T14:56:03Z", "updated_at": "2019-03-08T13:56:31Z", "closed_at": "2019-03-08T13:56:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have this code that generates a PDF synchronously and the client keeps waiting on the response being returned with the PDF, sometimes it can take several minutes.\r\n\r\nI had previously calculated that Lambda's 15 minute limit would be enough for me, but after deploying I realized that API Gateway only wait for the lambda response up to 29 seconds, so now my whole setup is invalid.\r\n\r\nIs there a quick way I can work around this? I don't know what to do at this point and I'm out of options and time", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1804", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1804/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1804/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1804/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1804", "id": 417480650, "node_id": "MDU6SXNzdWU0MTc0ODA2NTA=", "number": 1804, "title": "Django Push Notifications not working", "user": {"login": "Blutude", "id": 18058736, "node_id": "MDQ6VXNlcjE4MDU4NzM2", "avatar_url": "https://avatars0.githubusercontent.com/u/18058736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Blutude", "html_url": "https://github.com/Blutude", "followers_url": "https://api.github.com/users/Blutude/followers", "following_url": "https://api.github.com/users/Blutude/following{/other_user}", "gists_url": "https://api.github.com/users/Blutude/gists{/gist_id}", "starred_url": "https://api.github.com/users/Blutude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Blutude/subscriptions", "organizations_url": "https://api.github.com/users/Blutude/orgs", "repos_url": "https://api.github.com/users/Blutude/repos", "events_url": "https://api.github.com/users/Blutude/events{/privacy}", "received_events_url": "https://api.github.com/users/Blutude/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-03-05T20:10:55Z", "updated_at": "2019-03-14T03:49:33Z", "closed_at": "2019-03-14T03:49:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I migrated my app to AWS Lambda and Zappa is working perfectly fine, except for push notifications. They use to work well on the digital ocean server, I didn't do any modifications to that part of the code. I am using the django-push-notifications package https://github.com/jazzband/django-push-notifications. Django crashes on this line of code `device.send_message(message=request.data[\"message\"], extra=request.data['extra'], badge=allBadgesCount)`\r\nHere is my stacktrace:\r\n`File \"/var/task/django/core/handlers/exception.py\", line 35, in inner\r\n  response = get_response(request)\r\n  File \"/var/task/django/core/handlers/base.py\", line 128, in _get_response\r\n  response = self.process_exception_by_middleware(e, request)\r\n  File \"/var/task/django/core/handlers/base.py\", line 126, in _get_response\r\n  response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/var/task/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n  return view_func(*args, **kwargs)\r\n  File \"/var/task/django/views/generic/base.py\", line 69, in view\r\n  return self.dispatch(request, *args, **kwargs)\r\n  File \"/var/task/rest_framework/views.py\", line 483, in dispatch\r\n  response = self.handle_exception(exc)\r\n  File \"/var/task/rest_framework/views.py\", line 443, in handle_exception\r\n  self.raise_uncaught_exception(exc)\r\n  File \"/var/task/rest_framework/views.py\", line 480, in dispatch\r\n  response = handler(request, *args, **kwargs)\r\n  File \"/var/task/social/views.py\", line 628, in post\r\n  device.send_message(message=request.data[\"message\"], extra=request.data['extra'], badge=allBadgesCount)\r\n  File \"/var/task/push_notifications/models.py\", line 167, in send_message\r\n  **kwargs\r\n  File \"/var/task/push_notifications/apns.py\", line 113, in apns_send_message\r\n  certfile=certfile, **kwargs\r\n  File \"/var/task/push_notifications/apns.py\", line 66, in _apns_send\r\n  client = _apns_create_socket(certfile=certfile, application_id=application_id)\r\n  File \"/var/task/push_notifications/apns.py\", line 38, in _apns_create_socket\r\n  use_alternative_port=get_manager().get_apns_use_alternative_port(application_id)\r\n  File \"/var/task/apns2/client.py\", line 38, in __init__\r\n  self.__credentials = CertificateCredentials(credentials, password)\r\n  File \"/var/task/apns2/credentials.py\", line 29, in __init__\r\n  ssl_context = init_context(cert=cert_file, cert_password=password)\r\n  File \"/var/task/hyper/tls.py\", line 131, in init_context\r\n  context.load_cert_chain(cert, password=cert_password)\r\nFileNotFoundError: [Errno 2] No such file or directory`\r\n\r\nI am not sure what causes this. I couldn't find any \"No such file or directory\" issues related to that.\r\n\r\n## Your Environment\r\nHere are my zappa settings if that helps:\r\n`{\r\n    \"staging\": {\r\n        \"aws_region\": \"ca-central-1\",\r\n        \"django_settings\": \"spap.settings\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"spap\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-4ptzm651m\",\r\n        \"keep_warm\": true\r\n    }\r\n}`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1794", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1794/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1794/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1794/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1794", "id": 416122522, "node_id": "MDU6SXNzdWU0MTYxMjI1MjI=", "number": 1794, "title": "Migrating from Sanic(or any ASGI) to Flask + Zappa's Async?", "user": {"login": "mojimi", "id": 10172340, "node_id": "MDQ6VXNlcjEwMTcyMzQw", "avatar_url": "https://avatars2.githubusercontent.com/u/10172340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mojimi", "html_url": "https://github.com/mojimi", "followers_url": "https://api.github.com/users/mojimi/followers", "following_url": "https://api.github.com/users/mojimi/following{/other_user}", "gists_url": "https://api.github.com/users/mojimi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mojimi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mojimi/subscriptions", "organizations_url": "https://api.github.com/users/mojimi/orgs", "repos_url": "https://api.github.com/users/mojimi/repos", "events_url": "https://api.github.com/users/mojimi/events{/privacy}", "received_events_url": "https://api.github.com/users/mojimi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-01T14:17:35Z", "updated_at": "2019-03-06T20:31:16Z", "closed_at": "2019-03-06T20:31:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a Sanic application that utilizes python's executor and asyncio to generate files paralel to the server request handling, I would like to know if this is possible to do with Flask + Zappa and no other depencies like Celery or SQS/SNS? Has anyone managed to do this with no issues?\r\n\r\nI've found this bit here https://blog.zappa.io/posts/zappa-introduces-seamless-asynchronous-task-execution\r\nwhere i'm assuming it simply invokes another lambda to call that function? So in the end it should give the same result as a executor. I was just a little worried as that post is from 2017 and I haven't found anything in the docs about it.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1783", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1783/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1783/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1783/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1783", "id": 413845669, "node_id": "MDU6SXNzdWU0MTM4NDU2Njk=", "number": 1783, "title": "Suggestion: support for multiple provisioning providers ", "user": {"login": "youcandanch", "id": 448732, "node_id": "MDQ6VXNlcjQ0ODczMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/448732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/youcandanch", "html_url": "https://github.com/youcandanch", "followers_url": "https://api.github.com/users/youcandanch/followers", "following_url": "https://api.github.com/users/youcandanch/following{/other_user}", "gists_url": "https://api.github.com/users/youcandanch/gists{/gist_id}", "starred_url": "https://api.github.com/users/youcandanch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/youcandanch/subscriptions", "organizations_url": "https://api.github.com/users/youcandanch/orgs", "repos_url": "https://api.github.com/users/youcandanch/repos", "events_url": "https://api.github.com/users/youcandanch/events{/privacy}", "received_events_url": "https://api.github.com/users/youcandanch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-24T17:28:57Z", "updated_at": "2019-02-24T18:03:35Z", "closed_at": "2019-02-24T18:03:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://www.reddit.com/r/aws/comments/as21r7/cloudformation_feature_support_lag_is_way_out_of/\r\n\r\nIt's a well known pain point in the AWS world that Cloudformation support lags pretty far behind new releases; the most poignant example of this is in #1730, where support for auto-provisioning ALBs and associating Lambda targets to them is basically impossible, since it's not in CFN yet.\r\n\r\nJust kind of kicking tires here; is it _possible_ to either:\r\n\r\na) Move to allowing multiple providers, like Terraform, or\r\nb) Ditch going through Cloudformation and just use Boto directly?\r\n\r\nI've admittedly not done my research on this, but wanted to bring it up, as it seems like new features will continually be blocked on CFN's lag time. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1776", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1776/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1776/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1776/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1776", "id": 407995781, "node_id": "MDU6SXNzdWU0MDc5OTU3ODE=", "number": 1776, "title": "Async function can't find file", "user": {"login": "Amir-Ahmad", "id": 4963254, "node_id": "MDQ6VXNlcjQ5NjMyNTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4963254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amir-Ahmad", "html_url": "https://github.com/Amir-Ahmad", "followers_url": "https://api.github.com/users/Amir-Ahmad/followers", "following_url": "https://api.github.com/users/Amir-Ahmad/following{/other_user}", "gists_url": "https://api.github.com/users/Amir-Ahmad/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amir-Ahmad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amir-Ahmad/subscriptions", "organizations_url": "https://api.github.com/users/Amir-Ahmad/orgs", "repos_url": "https://api.github.com/users/Amir-Ahmad/repos", "events_url": "https://api.github.com/users/Amir-Ahmad/events{/privacy}", "received_events_url": "https://api.github.com/users/Amir-Ahmad/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-08T03:48:20Z", "updated_at": "2019-02-10T09:56:20Z", "closed_at": "2019-02-10T09:56:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nWhen running a zappa asynchronous function, the function can't find my config file on the second call.\r\n\r\nI have a flask project with this structure:\r\napp.py\r\nstatic/\r\nlib/\r\ntemplates/\r\nutils.py\r\nconfig.json\r\nzappa_settings.json.\r\n\r\napp.py has two functions:\r\n\r\nmain(): This is the main function that runs, calls generate_pdf(), and returns 200. \r\n@task generate_pdf(): This function reads the config.json file (code below), generates a PDF and emails it using SES. It needs to be asynchronous as it could take 1-2 minutes to generate, longer than the API gateway timeout.\r\n\r\n```\r\n  with open('config.json', 'r', encoding=\"utf8\") as config_file:\r\n    config = json.load(config_file)\r\n```\r\n\r\nAbove is working fine when the lambda is initially deployed, email is received correctly. However, on the second time the function is run, the generate_pdf() can't find the config file, and the following error is appearing.\r\n\r\n```\r\n[Errno 2] No such file or directory: 'config.json': FileNotFoundError\r\nTraceback (most recent call last):\r\n  File \"/var/task/handler.py\", line 580, in lambda_handler\r\n  return LambdaHandler.lambda_handler(event, context)\r\n  File \"/var/task/handler.py\", line 248, in lambda_handler\r\n  return handler.handler(event, context)\r\n  File \"/var/task/handler.py\", line 382, in handler\r\n  result = self.run_function(app_function, event, context)\r\n  File \"/var/task/handler.py\", line 287, in run_function\r\n  result = app_function(event, context)\r\n  File \"/var/task/zappa/async.py\", line 269, in route_lambda_task\r\n  return run_message(message)\r\n  File \"/var/task/zappa/async.py\", line 305, in run_message\r\n  **message['kwargs']\r\n  File \"/var/task/app.py\", line 35, in email_pdf\r\n  config = init()\r\n  File \"/var/task/app.py\", line 16, in init\r\n  with open('config.json', 'r', encoding=\"utf8\") as config_file:\r\nFileNotFoundError: [Errno 2] No such file or directory: 'config.json'\r\n```\r\n\r\n\r\nIs the config file somehow being deleted by something? Is it a path issue?\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: Linux, 3.6.7\r\n* The output of `pip freeze`:  \r\nargcomplete==1.9.3\r\nboto3==1.9.86\r\nbotocore==1.12.86\r\ncairocffi==0.9.0\r\nCairoSVG==2.2.1\r\ncertifi==2018.11.29\r\ncffi==1.11.5\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\ncssselect2==0.2.1\r\ndefusedxml==0.5.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.2\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nhtml5lib==1.0.1\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.10\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.0\r\nPillow==5.4.1\r\npkg-resources==0.0.0\r\nplacebo==0.8.2\r\npycparser==2.19\r\nPyphen==0.9.5\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\nPyYAML==3.13\r\nrequests==2.21.0\r\ns3transfer==0.1.13\r\nsix==1.12.0\r\ntinycss2==0.6.1\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.1\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nWeasyPrint==44\r\nwebencodings==0.5.1\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.47.1\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"app.app\",\r\n        \"aws_region\": \"us-west-2\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"lambda-pdf\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"lambda-pdf\",\r\n        \"keep_warm\": false,\r\n        \"timeout_seconds\": 120,\r\n        \"extra_permissions\": [{ // Attach any extra permissions to this policy.\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\"ses:*\"], // AWS Service ARN\r\n            \"Resource\": \"*\"\r\n        }],\r\n        \"tags\": { // Attach additional tags to AWS Resources\r\n            \"project\": \"lambda_pdf\"\r\n        }\r\n    }\r\n}\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1772", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1772/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1772/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1772/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1772", "id": 404042954, "node_id": "MDU6SXNzdWU0MDQwNDI5NTQ=", "number": 1772, "title": "Will Zappa incur Data Transfer Out charges?", "user": {"login": "Swordyjohn", "id": 32469251, "node_id": "MDQ6VXNlcjMyNDY5MjUx", "avatar_url": "https://avatars0.githubusercontent.com/u/32469251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Swordyjohn", "html_url": "https://github.com/Swordyjohn", "followers_url": "https://api.github.com/users/Swordyjohn/followers", "following_url": "https://api.github.com/users/Swordyjohn/following{/other_user}", "gists_url": "https://api.github.com/users/Swordyjohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Swordyjohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Swordyjohn/subscriptions", "organizations_url": "https://api.github.com/users/Swordyjohn/orgs", "repos_url": "https://api.github.com/users/Swordyjohn/repos", "events_url": "https://api.github.com/users/Swordyjohn/events{/privacy}", "received_events_url": "https://api.github.com/users/Swordyjohn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-28T22:51:01Z", "updated_at": "2019-03-07T20:40:59Z", "closed_at": "2019-03-07T20:40:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks to me that my Zappa Site is being server through API Gateway based on the logs, which uses the data transfer model of EC2 (1st GB free then $0.09 for next 9.99 TB). Will Zappa incur these charges?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1763", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1763/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1763/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1763/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1763", "id": 401048905, "node_id": "MDU6SXNzdWU0MDEwNDg5MDU=", "number": 1763, "title": "Code example for using Flask + X-Ray raises exception", "user": {"login": "aelse", "id": 165789, "node_id": "MDQ6VXNlcjE2NTc4OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/165789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aelse", "html_url": "https://github.com/aelse", "followers_url": "https://api.github.com/users/aelse/followers", "following_url": "https://api.github.com/users/aelse/following{/other_user}", "gists_url": "https://api.github.com/users/aelse/gists{/gist_id}", "starred_url": "https://api.github.com/users/aelse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aelse/subscriptions", "organizations_url": "https://api.github.com/users/aelse/orgs", "repos_url": "https://api.github.com/users/aelse/repos", "events_url": "https://api.github.com/users/aelse/events{/privacy}", "received_events_url": "https://api.github.com/users/aelse/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-20T00:26:31Z", "updated_at": "2020-03-15T19:58:38Z", "closed_at": "2020-03-15T19:58:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The code example given for using X-Ray follows the AWS docs for using python/Flask but is wrong for running in a Lambda context. This requires a fix to the zappa documentation but not to any zappa code.\r\n\r\n## Context\r\n\r\nThe X-Ray middleware provided by the sdk will attempt to create a segment and the result is the code errors out with a `raise FacadeSegmentMutationException(MUTATION_UNSUPPORTED_MESSAGE)`.\r\n\r\n## Expected Behavior\r\n\r\nThe code example for using X-Ray should not error.\r\n\r\n## Actual Behavior\r\n\r\nAn exception is raised within the AWS sdk. This failure is reported on `zappa update`.\r\n\r\n## Possible Fix\r\n\r\nI've preferred a documentation fix and improvement which will reference this issue.\r\n\r\n## Steps to Reproduce\r\n\r\nWithin your code wrap a flask object with the XRay middleware (per existing instructions in README) and `zappa update`.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: aws lambda (unsure what version)\r\n* The output of `pip freeze`: n/a\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: It has \"xray_tracing\": true\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1761", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1761/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1761/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1761/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1761", "id": 400727490, "node_id": "MDU6SXNzdWU0MDA3Mjc0OTA=", "number": 1761, "title": "botocore.exceptions.ClientError: InvalidAccessKeyId while uploading an image via Django admin", "user": {"login": "thesunlover", "id": 6734600, "node_id": "MDQ6VXNlcjY3MzQ2MDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6734600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thesunlover", "html_url": "https://github.com/thesunlover", "followers_url": "https://api.github.com/users/thesunlover/followers", "following_url": "https://api.github.com/users/thesunlover/following{/other_user}", "gists_url": "https://api.github.com/users/thesunlover/gists{/gist_id}", "starred_url": "https://api.github.com/users/thesunlover/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thesunlover/subscriptions", "organizations_url": "https://api.github.com/users/thesunlover/orgs", "repos_url": "https://api.github.com/users/thesunlover/repos", "events_url": "https://api.github.com/users/thesunlover/events{/privacy}", "received_events_url": "https://api.github.com/users/thesunlover/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-18T13:35:56Z", "updated_at": "2019-02-08T11:59:54Z", "closed_at": "2019-02-06T12:39:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\n\r\nWe use Zappa with Django to deploy our project on the AWS.\r\nWe have an API end-point that receives json with base64 images. The image is parsed on the server side and then is saved in an ImageField to Django model (in the DB). All our media images are stored on the AWS S3 service.\r\nAt first the issue happened when upgrading the boto3 as soon as a new version is released, upgrading it and then updating the deploy on the AWS Lambda instance.\r\n\r\nThe last time we had a deploy 28 days back and we got the error from the client in the late evening (17th Jan 2019). Later today our client said that he managed to save his data with the image ( using the same sync procedure from an Android app)\r\nWe have development and deploy envirnment with separated dev and deploy requirements. Env is only python36.\r\n\r\nWhen the issue is present in the api requests it is present in the admin as well.\r\n\r\n## Expected Behavior\r\nSaving images via Django admin happens normally and the image is visible in the S3 bucket.\r\nApi handles properly saving images on S3 (via Django S3 storage)\r\n\r\n## Actual Behavior\r\nboto3 error:\r\n     botocore.exceptions.ClientError: An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The AWS Access Key Id you provided does not exist in our records.\r\n\r\n## Full python traceback from the AWS lambda\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/var/task/django/core/handlers/exception.py\", line 34, in inner\r\n  response = get_response(request)\r\n  File \"/var/task/django/core/handlers/base.py\", line 126, in _get_response\r\n  response = self.process_exception_by_middleware(e, request)\r\n  File \"/var/task/django/core/handlers/base.py\", line 124, in _get_response\r\n  response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/var/task/django/contrib/admin/options.py\", line 604, in wrapper\r\n  return self.admin_site.admin_view(view)(*args, **kwargs)\r\n  File \"/var/task/django/utils/decorators.py\", line 142, in _wrapped_view\r\n  response = view_func(request, *args, **kwargs)\r\n  File \"/var/task/django/views/decorators/cache.py\", line 44, in _wrapped_view_func\r\n  response = view_func(request, *args, **kwargs)\r\n  File \"/var/task/django/contrib/admin/sites.py\", line 223, in inner\r\n  return view(request, *args, **kwargs)\r\n  File \"/var/task/django/contrib/admin/options.py\", line 1640, in change_view\r\n  return self.changeform_view(request, object_id, form_url, extra_context)\r\n  File \"/var/task/django/utils/decorators.py\", line 45, in _wrapper\r\n  return bound_method(*args, **kwargs)\r\n  File \"/var/task/django/utils/decorators.py\", line 142, in _wrapped_view\r\n  response = view_func(request, *args, **kwargs)\r\n  File \"/var/task/django/contrib/admin/options.py\", line 1525, in changeform_view\r\n  return self._changeform_view(request, object_id, form_url, extra_context)\r\n  File \"/var/task/django/contrib/admin/options.py\", line 1564, in _changeform_view\r\n  self.save_model(request, new_object, form, not add)\r\n  File \"/var/task/django/contrib/admin/options.py\", line 1091, in save_model\r\n  obj.save()\r\n  File \"/var/task/django/db/models/base.py\", line 718, in save\r\n  force_update=force_update, update_fields=update_fields)\r\n  File \"/var/task/django/db/models/base.py\", line 748, in save_base\r\n  updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)\r\n  File \"/var/task/django/db/models/base.py\", line 809, in _save_table\r\n  for f in non_pks]\r\n  File \"/var/task/django/db/models/base.py\", line 809, in <listcomp>\r\n  for f in non_pks]\r\n  File \"/var/task/django/db/models/fields/files.py\", line 288, in pre_save\r\n  file.save(file.name, file.file, save=False)\r\n  File \"/var/task/django/db/models/fields/files.py\", line 87, in save\r\n  self.name = self.storage.save(name, content, max_length=self.field.max_length)\r\n  File \"/var/task/django/core/files/storage.py\", line 49, in save\r\n  return self._save(name, content)\r\n  File \"/var/task/storages/backends/s3boto3.py\", line 506, in _save\r\n  self._save_content(obj, content, parameters=parameters)\r\n  File \"/var/task/storages/backends/s3boto3.py\", line 521, in _save_content\r\n  obj.upload_fileobj(content, ExtraArgs=put_parameters)\r\n  File \"/var/runtime/boto3/s3/inject.py\", line 621, in object_upload_fileobj\r\n  ExtraArgs=ExtraArgs, Callback=Callback, Config=Config)\r\n  File \"/var/runtime/boto3/s3/inject.py\", line 539, in upload_fileobj\r\n  return future.result()\r\n  File \"/var/runtime/s3transfer/futures.py\", line 73, in result\r\n  return self._coordinator.result()\r\n  File \"/var/runtime/s3transfer/futures.py\", line 233, in result\r\n  raise self._exception\r\n  File \"/var/runtime/s3transfer/tasks.py\", line 126, in __call__\r\n  return self._execute_main(kwargs)\r\n  File \"/var/runtime/s3transfer/tasks.py\", line 150, in _execute_main\r\n  return_value = self._main(**kwargs)\r\n  File \"/var/runtime/s3transfer/upload.py\", line 692, in _main\r\n  client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)\r\n  File \"/var/runtime/botocore/client.py\", line 314, in _api_call\r\n  return self._make_api_call(operation_name, kwargs)\r\n  File \"/var/runtime/botocore/client.py\", line 612, in _make_api_call\r\n  raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The AWS Access Key Id you provided does not exist in our records.\r\n```\r\n\r\n## Possible Fix\r\nNot sure, but probably... When the session token fails a retry can be triggered with reloading the session token.\r\n\r\n## Steps to Reproduce\r\n1. Setup VPC, set all the right, create a zappa role, create S3 bucket with all the policies needed for the `PutObject` action\r\n2. Create Django app with a model that contains an ImageField\r\n3. deploy to AWS, then wait for a new version of boto libs and `zappa update dev` \r\n4. go to /admin/model_with_image/  and create a new record with an image.\r\nI am not sure I can create a separete working example I can present to the open public.\r\n\r\n## Your Environment\r\n* Zappa version used:\r\n0.47.1\r\n* Operating System and Python version:\r\nlocal: Windows 10 + python3.6\r\nremote: not known + python3.6\r\n* The output of `pip freeze`:\r\n```\r\nargcomplete==1.9.3\r\nbeautifulsoup4==4.7.1\r\nboto3==1.9.78\r\nbotocore==1.12.79\r\nCacheControl==0.12.5\r\ncchardet==1.1.3\r\ncertifi==2018.10.15\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nclick==6.7\r\nconfigparser==3.5.0\r\ndatadotworld==1.6.0\r\ndatapackage==0.8.9\r\ndiff-match-patch==20181111\r\nDjango==2.1.5\r\ndjango-debug-toolbar==1.11\r\ndjango-extensions==2.1.4\r\ndjango-import-export==1.2.0\r\ndjango-rest-auth==0.9.3\r\ndjango-s3-storage==0.12.4\r\ndjango-storages==1.7.1\r\ndjangorestframework==3.9.0\r\ndocutils==0.14\r\ndrf-extensions==0.4.0\r\ndurationpy==0.5\r\net-xmlfile==1.0.1\r\nflake8==3.4.0\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.7\r\nijson==2.3\r\nisodate==0.6.0\r\njdcal==1.4\r\njmespath==0.9.3\r\njsonlines==1.2.0\r\njsonschema==2.6.0\r\njsontableschema==0.10.1\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nlinear-tsv==1.1.0\r\nmccabe==0.6.1\r\nmsgpack==0.5.6\r\nmysqlclient==1.3.14\r\nodfpy==1.3.6\r\nopenpyxl==2.5.11\r\nPillow==5.4.1\r\nplacebo==0.8.2\r\npsycopg2==2.7.6.1\r\npycodestyle==2.3.1\r\npyflakes==1.5.0\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npytz==2018.7\r\nPyYAML==3.13\r\nrequests==2.21.0\r\nrfc3986==0.4.1\r\ns3transfer==0.1.13\r\nsix==1.11.0\r\nsoupsieve==1.7.1\r\nSQLAlchemy==1.2.14\r\nsqlparse==0.2.4\r\ntablib==0.12.1\r\ntabulator==1.4.1\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.3.4\r\nunicodecsv==0.14.1\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nxlrd==1.1.0\r\nxlwt==1.3.0\r\nzappa==0.47.1\r\nzappa-django-utils==0.4.0\r\n```\r\n* Your `zappa_settings.py`: \r\n```\r\n{\r\n    \"dev\": {\r\n        \"log_level\": \"ERROR\",\r\n        \"aws_region\": \"us-east-1\",\r\n        \"django_settings\": \"******hidden******\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"******hidden******\",\r\n        \"runtime\": \"python3.6\",\r\n        \"keep_warm\":false,\r\n        \"timeout_seconds\": 30,\r\n        \"s3_bucket\": \"zappa-dev-package\",\r\n        \"num_retained_versions\": 10,\r\n        \"environment_variables\": {\r\n            \"DJANGO_CONF\": \"aws_lambda\",\r\n            \"PROJECT_STAGE\": \"dev\"\r\n        },\r\n        \"manage_roles\": false,\r\n        \"role_name\": \"******hidden******\",\r\n        \"role_arn\": \"arn:aws:iam::******hidden******\",\r\n        \"vpc_config\": {\r\n            \"SubnetIds\": [\r\n                \"******hidden******\",\r\n                \"******hidden******\"\r\n            ],\r\n            \"SecurityGroupIds\": [\r\n                \"******hidden******\"\r\n            ]\r\n        },\r\n        \"events\": [\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(10000 days)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(10000 days)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(10000 days)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(10000 days)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(10000 days)\"\r\n            }\r\n        ]\r\n    },\r\n    \"production\": {\r\n        \"extends\": \"dev\",\r\n        \"log_level\": \"ERROR\",\r\n        \"profile_name\": \"production\",\r\n        \"aws_region\": \"us-west-2\",\r\n        \"keep_warm\":true,\r\n        \"s3_bucket\": \"******hidden******\",\r\n        \"environment_variables\": {\r\n            \"DJANGO_CONF\": \"aws_lambda\",\r\n            \"PROJECT_STAGE\": \"production\"\r\n        },\r\n        \"events\": [],\r\n        \"role_name\": \"******hidden******\",\r\n        \"role_arn\": \"arn:aws:iam::******hidden******\",\r\n        \"vpc_config\": {\r\n            \"SubnetIds\": [\r\n                \"******hidden******\",\r\n                \"******hidden******\"\r\n            ],\r\n            \"SecurityGroupIds\": [\r\n                \"******hidden******\"\r\n            ]\r\n        }\r\n    },\r\n    \"production_export\": {\r\n        \"extends\": \"production\",\r\n        \"keep_warm\": false,\r\n        \"project_name\": \"******hidden******\",\r\n        \"timeout_seconds\": 900,\r\n        \"events\": [\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(6 hours)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(6 hours)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(6 hours)\"\r\n            }\r\n        ]\r\n    },\r\n    \"production_import\": {\r\n        \"extends\": \"production\",\r\n        \"keep_warm\": false,\r\n        \"project_name\": \"******hidden******\",\r\n        \"timeout_seconds\": 900,\r\n        \"events\": [\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(16 minutes)\"\r\n            },\r\n            {\r\n                \"function\": \"******hidden******\",\r\n                \"expression\": \"rate(1 day)\"\r\n            }\r\n        ]\r\n    }\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1759", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1759/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1759/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1759/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1759", "id": 400702143, "node_id": "MDU6SXNzdWU0MDA3MDIxNDM=", "number": 1759, "title": "Read timeout for pypi.python.org is too short for a slow network", "user": {"login": "wolfg1969", "id": 1585718, "node_id": "MDQ6VXNlcjE1ODU3MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1585718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolfg1969", "html_url": "https://github.com/wolfg1969", "followers_url": "https://api.github.com/users/wolfg1969/followers", "following_url": "https://api.github.com/users/wolfg1969/following{/other_user}", "gists_url": "https://api.github.com/users/wolfg1969/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolfg1969/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolfg1969/subscriptions", "organizations_url": "https://api.github.com/users/wolfg1969/orgs", "repos_url": "https://api.github.com/users/wolfg1969/repos", "events_url": "https://api.github.com/users/wolfg1969/events{/privacy}", "received_events_url": "https://api.github.com/users/wolfg1969/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-01-18T12:20:30Z", "updated_at": "2019-03-19T08:17:47Z", "closed_at": "2019-03-19T08:17:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\nWhen using Zappa with  a slow Internet connection (Sometimes I get a slow connection for the sites out of my country), it is always failed to download packages (manylinux wheel package) from pypi.python.org. \r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nCan download the packages successfully.\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nGot the error\r\n```\r\nHTTPSConnectionPool(host='pypi.python.org', port=443): Read timed out. (read timeout=2)\r\n```\r\nSometimes includes a broken package in lambda zip and causes runtime error. Eg. a Pillow import error.\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\nI made a PR which adds a timeout option for deploy, package, update command. But I feel it isn't a good solution.  \r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Create a Django app, add mysqlclient to requirements\r\n2. Run `zappa update` with a slow network.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1758", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1758/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1758/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1758/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1758", "id": 400358043, "node_id": "MDU6SXNzdWU0MDAzNTgwNDM=", "number": 1758, "title": "GET response without CORS headers", "user": {"login": "mark-mishyn", "id": 5605800, "node_id": "MDQ6VXNlcjU2MDU4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/5605800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-mishyn", "html_url": "https://github.com/mark-mishyn", "followers_url": "https://api.github.com/users/mark-mishyn/followers", "following_url": "https://api.github.com/users/mark-mishyn/following{/other_user}", "gists_url": "https://api.github.com/users/mark-mishyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-mishyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-mishyn/subscriptions", "organizations_url": "https://api.github.com/users/mark-mishyn/orgs", "repos_url": "https://api.github.com/users/mark-mishyn/repos", "events_url": "https://api.github.com/users/mark-mishyn/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-mishyn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-17T16:28:10Z", "updated_at": "2020-04-13T15:01:05Z", "closed_at": "2019-01-23T10:50:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nI've enabled CORS in `zappa_settings.json` with `\"cors\": true` (and `\"binary_support\": false`)\r\nNow if I send request OPTIONS, I see CORS headers in response, but if request method is GET - there are **no** CORS headers. \r\n\r\nI also tried to enable CORS manually in AWS console. Still the same.\r\nAlso I've tried `django-cors-headers` with disabled cors in `zappa_settings.json` \r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\nResponse for GET requests with CORS headers.\r\n\r\n## Actual Behavior\r\nResponse for GET requests **without** CORS headers. OPTIONS works fine.\r\n\r\n## Possible Fix\r\nUse application-level CORS (doesn't work on Lambda for me, but works on my server)\r\n\r\n##  The link to a live example\r\nhttps://k8zhte0yjj.execute-api.us-west-1.amazonaws.com/dev/\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: Ubuntu 18.04, Python 3.6\r\n* The output of `pip freeze`:\r\nargcomplete==1.9.3\r\nboto3==1.9.75\r\nbotocore==1.12.75\r\ncertifi==2018.11.29\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\nDjango==1.11.18\r\ndocutils==0.14\r\ndurationpy==0.5\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nplacebo==0.8.2\r\npsycopg2==2.7.6.1\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npytz==2018.9\r\nPyYAML==3.13\r\nrequests==2.21.0\r\ns3transfer==0.1.13\r\nsix==1.12.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.0\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nWerkzeug==0.14.1\r\nwhitenoise==4.1.2\r\nwsgi-request-logger==0.4.6\r\nzappa==0.47.1\r\n* `zappa_settings.py`: \r\n```\r\n{\r\n    \"dev\": {\r\n        \"aws_region\": \"us-west-1\",\r\n        \"django_settings\": \"frankie.settings\",\r\n        \"profile_name\": null,\r\n        \"project_name\": \"zappatest_empty\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"sisuserbucket\",\r\n        \"cors\": true,\r\n        \"binary_support\": false,\r\n        \"timeout_seconds\": 30,\r\n        \"vpc_config\": {\r\n            \"SubnetIds\": [\"subnet-01efd98b0e62260b4\"],\r\n            \"SecurityGroupIds\": [\"sg-0eef31646150c67fd\"]\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1755", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1755/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1755/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1755/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1755", "id": 399574863, "node_id": "MDU6SXNzdWUzOTk1NzQ4NjM=", "number": 1755, "title": "Error in handler when using multi-value headers", "user": {"login": "jedestep", "id": 1072527, "node_id": "MDQ6VXNlcjEwNzI1Mjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1072527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedestep", "html_url": "https://github.com/jedestep", "followers_url": "https://api.github.com/users/jedestep/followers", "following_url": "https://api.github.com/users/jedestep/following{/other_user}", "gists_url": "https://api.github.com/users/jedestep/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedestep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedestep/subscriptions", "organizations_url": "https://api.github.com/users/jedestep/orgs", "repos_url": "https://api.github.com/users/jedestep/repos", "events_url": "https://api.github.com/users/jedestep/events{/privacy}", "received_events_url": "https://api.github.com/users/jedestep/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-15T23:03:45Z", "updated_at": "2019-03-08T18:03:57Z", "closed_at": "2019-03-08T18:03:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\nIf an API gateway or ALB is configured to use multi-value headers, the handler module is unable to find the request headers and breaks in two places:\r\n1. when setting script name based on the Host header (this is all that's seen in production because the lambda crashes here)\r\n2. when forwarding the wsgi request via werkzeug, because no dict called 'headers' is included.\r\n\r\n## Expected Behavior\r\nHeaders should all be combined into a single dict called 'headers'.\r\n\r\n## Actual Behavior\r\nLambda crashes ignominiously with this error: `'NoneType' object has no attribute 'get'`.\r\n\r\n## Possible Fix\r\nSimple, just combine `multiValueHeaders` and `headers` into a single dict. I have a PR for this I have been working on.\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used:\r\n* Operating System and Python version:\r\n* The output of `pip freeze`:\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1750", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1750/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1750/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1750/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1750", "id": 397064338, "node_id": "MDU6SXNzdWUzOTcwNjQzMzg=", "number": 1750, "title": "Error: Unable to import module 'handler': No module named 'botocore.docs'", "user": {"login": "albmarin", "id": 23726970, "node_id": "MDQ6VXNlcjIzNzI2OTcw", "avatar_url": "https://avatars1.githubusercontent.com/u/23726970?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albmarin", "html_url": "https://github.com/albmarin", "followers_url": "https://api.github.com/users/albmarin/followers", "following_url": "https://api.github.com/users/albmarin/following{/other_user}", "gists_url": "https://api.github.com/users/albmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/albmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albmarin/subscriptions", "organizations_url": "https://api.github.com/users/albmarin/orgs", "repos_url": "https://api.github.com/users/albmarin/repos", "events_url": "https://api.github.com/users/albmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/albmarin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-08T20:02:54Z", "updated_at": "2019-02-08T14:24:45Z", "closed_at": "2019-02-08T14:24:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nDeploying Flask app Python 3.6, and getting this error.\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nThe successful deployment of the app\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nThrowing the following error.\r\n`Unable to import module 'handler': No module named 'botocore.docs'`\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: Ubuntu 18.04 LTS, Python 3.6\r\n* The output of `pip freeze`:\r\n```\r\nalembic==1.0.5\r\naniso8601==4.0.1\r\nargcomplete==1.9.3\r\nasn1crypto==0.24.0\r\nAuthlib==0.10\r\nboto3==1.9.75\r\nbotocore==1.12.75\r\ncertifi==2018.11.29\r\ncffi==1.11.5\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\ncryptography==2.4.2\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.2\r\nFlask-Cors==3.0.7\r\nflask-marshmallow==0.9.0\r\nFlask-Migrate==2.3.1\r\nFlask-RESTful==0.3.7\r\nFlask-SQLAlchemy==2.3.2\r\nFlask-WTF==0.14.2\r\nfuture==0.16.0\r\ngevent==1.4.0\r\ngreenlet==0.4.15\r\ngunicorn==19.9.0\r\nhjson==3.0.1\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.10\r\njmespath==0.9.3\r\njwcrypto==0.6.0\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMako==1.0.7\r\nMarkupSafe==1.1.0\r\nmarshmallow==2.17.0\r\nmarshmallow-sqlalchemy==0.15.0\r\nplacebo==0.8.2\r\npsycopg2==2.7.6.1\r\npycparser==2.19\r\nPyMySQL==0.9.3\r\npython-dateutil==2.6.1\r\npython-dotenv==0.10.1\r\npython-editor==1.0.3\r\npython-jwt==3.2.4\r\npython-slugify==1.2.4\r\npytz==2018.9\r\nPyYAML==3.13\r\nrequests==2.21.0\r\ns3transfer==0.1.13\r\nsix==1.12.0\r\nSQLAlchemy==1.2.15\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.4.0\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nWTForms==2.2.1\r\nzappa==0.47.1\r\n```\r\n* Your `zappa_settings.py`: \r\n```\r\n{\r\n  \"dev\": {\r\n    \"app_function\": \"app.app\",\r\n    \"aws_region\": \"us-east-1\",\r\n    \"profile_name\": \"default\",\r\n    \"project_name\": \"pahm-auth\",\r\n    \"runtime\": \"python3.6\",\r\n    \"s3_bucket\": \"zappa-y15ujoow7\",\r\n    \"exclude\": [\r\n      \"*.egg-info\",\r\n      \"*.eggs\",\r\n      \".coverage\",\r\n      \"*.env\",\r\n      \"*.db\",\r\n      \"*.tox\",\r\n      \".pytest_cache\",\r\n      \".idea\",\r\n      \".github\",\r\n      \"tox\",\r\n      \"dist\",\r\n      \"build\",\r\n      \"docs\",\r\n      \"scripts\",\r\n      \"htmlcov\",\r\n      \"node_modules\"\r\n    ]\r\n  },\r\n  \"dev_ap_northeast_1\": {\r\n    \"aws_region\": \"ap-northeast-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_ap_northeast_2\": {\r\n    \"aws_region\": \"ap-northeast-2\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_ap_northeast_3\": {\r\n    \"aws_region\": \"ap-northeast-3\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_ap_south_1\": {\r\n    \"aws_region\": \"ap-south-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_ap_southeast_1\": {\r\n    \"aws_region\": \"ap-southeast-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_ap_southeast_2\": {\r\n    \"aws_region\": \"ap-southeast-2\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_ca_central_1\": {\r\n    \"aws_region\": \"ca-central-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_cn_north_1\": {\r\n    \"aws_region\": \"cn-north-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_cn_northwest_1\": {\r\n    \"aws_region\": \"cn-northwest-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_eu_central_1\": {\r\n    \"aws_region\": \"eu-central-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_eu_west_1\": {\r\n    \"aws_region\": \"eu-west-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_eu_west_2\": {\r\n    \"aws_region\": \"eu-west-2\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_eu_west_3\": {\r\n    \"aws_region\": \"eu-west-3\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_sa_east_1\": {\r\n    \"aws_region\": \"sa-east-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_us_east_2\": {\r\n    \"aws_region\": \"us-east-2\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_us_west_1\": {\r\n    \"aws_region\": \"us-west-1\",\r\n    \"extends\": \"dev\"\r\n  },\r\n  \"dev_us_west_2\": {\r\n    \"aws_region\": \"us-west-2\",\r\n    \"extends\": \"dev\"\r\n  }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1748", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1748/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1748/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1748/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1748", "id": 396126581, "node_id": "MDU6SXNzdWUzOTYxMjY1ODE=", "number": 1748, "title": "AttributeError: 'S3' object has no attribute 'put_object_retention'", "user": {"login": "napsterstiffler", "id": 18133973, "node_id": "MDQ6VXNlcjE4MTMzOTcz", "avatar_url": "https://avatars1.githubusercontent.com/u/18133973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/napsterstiffler", "html_url": "https://github.com/napsterstiffler", "followers_url": "https://api.github.com/users/napsterstiffler/followers", "following_url": "https://api.github.com/users/napsterstiffler/following{/other_user}", "gists_url": "https://api.github.com/users/napsterstiffler/gists{/gist_id}", "starred_url": "https://api.github.com/users/napsterstiffler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/napsterstiffler/subscriptions", "organizations_url": "https://api.github.com/users/napsterstiffler/orgs", "repos_url": "https://api.github.com/users/napsterstiffler/repos", "events_url": "https://api.github.com/users/napsterstiffler/events{/privacy}", "received_events_url": "https://api.github.com/users/napsterstiffler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-05T02:55:36Z", "updated_at": "2019-01-07T03:23:54Z", "closed_at": "2019-01-07T03:23:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to implement the s3 client put_object_retention method using flask on zappa. My code works when i run it locally but as soon as I deploy it to flask I get the following error: \r\n\r\n> 'S3' object has no attribute 'put_object_retention'\r\n\r\nAll the other APIs are working perfectly locally as well as on zappa. \r\n## Context\r\n```\r\n    response = s3_client.put_object_retention(\r\n        Bucket=bucket_name,\r\n        Key=file_name,\r\n        Retention={\r\n            'Mode': 'COMPLIANCE',\r\n            'RetainUntilDate': datetime.datetime.now() + datetime.timedelta(days=1)\r\n        },\r\n        VersionId=version_id\r\n    )\r\n```\r\n\r\n## Expected Behavior\r\nNo error\r\n\r\n## Actual Behavior\r\nAttributeError: 'S3' object has no attribute 'put_object_retention'\r\n\r\n\r\n## Your Environment\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: win 10, python 3.6\r\n* Your `zappa_settings.py`: \r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"application.app\",\r\n        \"aws_region\": \"us-east-1\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"zap-test\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-lxlsteemi\"\r\n    }\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1745", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1745/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1745/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1745/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1745", "id": 395731574, "node_id": "MDU6SXNzdWUzOTU3MzE1NzQ=", "number": 1745, "title": "Retrieving API Gateway URL", "user": {"login": "alexrkopp", "id": 45714392, "node_id": "MDQ6VXNlcjQ1NzE0Mzky", "avatar_url": "https://avatars0.githubusercontent.com/u/45714392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrkopp", "html_url": "https://github.com/alexrkopp", "followers_url": "https://api.github.com/users/alexrkopp/followers", "following_url": "https://api.github.com/users/alexrkopp/following{/other_user}", "gists_url": "https://api.github.com/users/alexrkopp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrkopp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrkopp/subscriptions", "organizations_url": "https://api.github.com/users/alexrkopp/orgs", "repos_url": "https://api.github.com/users/alexrkopp/repos", "events_url": "https://api.github.com/users/alexrkopp/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrkopp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-03T21:31:49Z", "updated_at": "2019-01-07T14:37:55Z", "closed_at": "2019-01-07T14:37:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to programmatically capture the final API gateway URL to the service at the end of the deployment? At first glance, it doesn't seem like the callback hooks have access to this URL.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1743", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1743/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1743/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1743/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1743", "id": 395660365, "node_id": "MDU6SXNzdWUzOTU2NjAzNjU=", "number": 1743, "title": "Slow update command using zappa docker container", "user": {"login": "shawnzam", "id": 1268552, "node_id": "MDQ6VXNlcjEyNjg1NTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1268552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shawnzam", "html_url": "https://github.com/shawnzam", "followers_url": "https://api.github.com/users/shawnzam/followers", "following_url": "https://api.github.com/users/shawnzam/following{/other_user}", "gists_url": "https://api.github.com/users/shawnzam/gists{/gist_id}", "starred_url": "https://api.github.com/users/shawnzam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shawnzam/subscriptions", "organizations_url": "https://api.github.com/users/shawnzam/orgs", "repos_url": "https://api.github.com/users/shawnzam/repos", "events_url": "https://api.github.com/users/shawnzam/events{/privacy}", "received_events_url": "https://api.github.com/users/shawnzam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-03T17:29:56Z", "updated_at": "2019-01-03T18:43:32Z", "closed_at": "2019-01-03T18:43:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\nIt takes about 20 minutes to update my app, stalling during the the `Packaging project as zip.` part.\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\nI am running https://github.com/danielwhatmuff/zappa container anf my application is set to use python 3.6.4\r\n```\r\nDjango==2.1.4\r\nzappa==0.47.1\r\ndjango-s3-storage==0.12.4\r\ndjango-bootstrap4==0.0.7\r\npsycopg2-binary==2.7.6.1\r\n```\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\nI expect `zappa update dev` to complete much faster\r\n\r\n## Actual Behavior\r\nIt takes about 20 minutes to compete. I am looking for a verbose mode to figure out what is causing the slowdown.\r\n\r\n\r\n## Your Environment\r\n```\r\n{\r\n\t\"dev\": {\r\n\t\t\"django_settings\": \"todo.settings\",\r\n\t\t\"profile_name\": \"wcit\",\r\n\t\t\"project_name\": \"task\",\r\n\t\t\"runtime\": \"python3.6\",\r\n\t\t\"s3_bucket\": \"zappa-<removed>\",\r\n\t\t\"aws_region\": \"us-east-1\",\r\n\t\t\"vpc_config\": {\r\n\t\t\t\"SubnetIds\": [\"subnet-<removed>\",\r\n\t\t\t\t\"subnet-<removed>\"\r\n\t\t\t],\r\n\t\t\t\"SecurityGroupIds\": [\"sg-<removed>\"]\r\n\t\t},\r\n\t\t\"exclude\": [\r\n\t\t\t\".git/\",\r\n\t\t\t\".gitignore\",\r\n\t\t\t\"axe/\",\r\n\t\t\t\"node_modules/\",\r\n\t\t\t\"assets/\",\r\n\t\t\t\"ve/\",\r\n\t\t\t\".cache/\",\r\n\t\t\t\"*.sqlite\",\r\n\t\t\t\"*.json\",\r\n\t\t\t\"*.sh\",\r\n\t\t\t\".babelrc\",\r\n\t\t\t\"Dockerfile\",\r\n\t\t\t\"dist/\",\r\n\t\t\t\"*.zip\"\r\n\t\t]\r\n\t}\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1738", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1738/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1738/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1738/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1738", "id": 394892601, "node_id": "MDU6SXNzdWUzOTQ4OTI2MDE=", "number": 1738, "title": "issue with installing zappa", "user": {"login": "tutzy1", "id": 19907747, "node_id": "MDQ6VXNlcjE5OTA3NzQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/19907747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tutzy1", "html_url": "https://github.com/tutzy1", "followers_url": "https://api.github.com/users/tutzy1/followers", "following_url": "https://api.github.com/users/tutzy1/following{/other_user}", "gists_url": "https://api.github.com/users/tutzy1/gists{/gist_id}", "starred_url": "https://api.github.com/users/tutzy1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tutzy1/subscriptions", "organizations_url": "https://api.github.com/users/tutzy1/orgs", "repos_url": "https://api.github.com/users/tutzy1/repos", "events_url": "https://api.github.com/users/tutzy1/events{/privacy}", "received_events_url": "https://api.github.com/users/tutzy1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-30T18:39:06Z", "updated_at": "2020-04-07T21:24:14Z", "closed_at": "2019-01-02T22:21:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nWhile trying to install zappa in my venv (python 3.6), I've got this error, and doesn't find any solution:\r\n\r\nComplete output from command python setup.py egg_info:\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"C:\\Users\\tutzy\\AppData\\Local\\Temp\\pip-install-2nv6ra7n\\kappa\\setup.py\", line 54, in <module>\r\n        run_setup()\r\n      File \"C:\\Users\\tutzy\\AppData\\Local\\Temp\\pip-install-2nv6ra7n\\kappa\\setup.py\", line 22, in run_setup\r\n        long_description=open_file('README.rst').read(),\r\n      File \"C:\\Program Files\\Python36\\lib\\encodings\\cp1255.py\", line 23, in decode\r\n        return codecs.charmap_decode(input,self.errors,decoding_table)[0]\r\n    UnicodeDecodeError: 'charmap' codec can't decode byte 0x9c in position 2341: character maps to <undefined>\r\n\r\n    ----------------------------------------\r\nCommand \"python setup.py egg_info\" failed with error code 1 in C:\\Users\\tutzy\\AppData\\Local\\Temp\\pip-install-2nv6ra7n\\kappa\\\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: trying to install the newest\r\n* Operating System and Python version: win 10, python 3.6\r\n* The output of `pip freeze`: \r\nDjango==2.1.4\r\npytz==2018.7\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1736", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1736/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1736/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1736/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1736", "id": 393711061, "node_id": "MDU6SXNzdWUzOTM3MTEwNjE=", "number": 1736, "title": "Zappa won't deploy from Travis with environment variables", "user": {"login": "Benjamin-Lee", "id": 13618205, "node_id": "MDQ6VXNlcjEzNjE4MjA1", "avatar_url": "https://avatars2.githubusercontent.com/u/13618205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Benjamin-Lee", "html_url": "https://github.com/Benjamin-Lee", "followers_url": "https://api.github.com/users/Benjamin-Lee/followers", "following_url": "https://api.github.com/users/Benjamin-Lee/following{/other_user}", "gists_url": "https://api.github.com/users/Benjamin-Lee/gists{/gist_id}", "starred_url": "https://api.github.com/users/Benjamin-Lee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Benjamin-Lee/subscriptions", "organizations_url": "https://api.github.com/users/Benjamin-Lee/orgs", "repos_url": "https://api.github.com/users/Benjamin-Lee/repos", "events_url": "https://api.github.com/users/Benjamin-Lee/events{/privacy}", "received_events_url": "https://api.github.com/users/Benjamin-Lee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-22T23:51:09Z", "updated_at": "2018-12-23T00:00:54Z", "closed_at": "2018-12-23T00:00:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n\r\nI'm trying to deploy a Zappa app as per [this blog post](https://blog.zappa.io/posts/continuous-zappa-deployments-with-travis) using Python 3.6 and Travis.\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\nThe app would deploy. I can deploy from my computer but not Travis.\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n```\r\n$ export AWS_ACCESS_KEY_ID=[secure]\r\n$ export AWS_SECRET_ACCESS_KEY=[secure]\r\n\r\ntravis_time:start:0002b71a\r\n\u001b[0K$ source ~/virtualenv/python3.6/bin/activate\r\ntravis_time:end:0002b71a:start=1545521726858641044,finish=1545521726864754926,duration=6113882\r\n\u001b[0K$ python --version\r\nPython 3.6.3\r\n$ pip --version\r\npip 9.0.1 from /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (python 3.6)\r\ntravis_fold:start:install\r\n\u001b[0Ktravis_time:start:13e7689c\r\n\u001b[0K$ pip install -r requirements.txt\r\nCollecting boto3==1.9.66 (from -r requirements.txt (line 1))\r\n  Downloading https://files.pythonhosted.org/packages/6b/31/2922911f17940f8616c075415cda13de88577f350c31f9b5ea14ed104e7c/boto3-1.9.66-py2.py3-none-any.whl (128kB)\r\nCollecting pandas==0.22.0 (from -r requirements.txt (line 2))\r\n  Downloading https://files.pythonhosted.org/packages/da/c6/0936bc5814b429fddb5d6252566fe73a3e40372e6ceaf87de3dec1326f28/pandas-0.22.0-cp36-cp36m-manylinux1_x86_64.whl (26.2MB)\r\nCollecting Werkzeug==0.14.1 (from -r requirements.txt (line 3))\r\n  Downloading https://files.pythonhosted.org/packages/20/c4/12e3e56473e52375aa29c4764e70d1b8f3efa6682bef8d0aae04fe335243/Werkzeug-0.14.1-py2.py3-none-any.whl (322kB)\r\nCollecting xxhash==1.3.0 (from -r requirements.txt (line 4))\r\n  Downloading https://files.pythonhosted.org/packages/df/db/abd8ecd1753b60e5b527365676482bda272d71eaab0ad732a8be5f11d2d8/xxhash-1.3.0-cp36-cp36m-manylinux1_x86_64.whl (46kB)\r\nCollecting Flask==1.0.2 (from -r requirements.txt (line 5))\r\n  Downloading https://files.pythonhosted.org/packages/7f/e7/08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b/Flask-1.0.2-py2.py3-none-any.whl (91kB)\r\nCollecting zappa (from -r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/64/e2/2c13f117d2178dd45f25f04c0a3a2afb59f2dc779fec1bdeaf7a8567f776/zappa-0.47.1-py3-none-any.whl (107kB)\r\nCollecting pyarrow (from -r requirements.txt (line 7))\r\n  Downloading https://files.pythonhosted.org/packages/36/94/23135312f97b20d6457294606fb70fad43ef93b7bffe567088ebe3623703/pyarrow-0.11.1-cp36-cp36m-manylinux1_x86_64.whl (11.6MB)\r\nCollecting s3transfer<0.2.0,>=0.1.10 (from boto3==1.9.66->-r requirements.txt (line 1))\r\n  Downloading https://files.pythonhosted.org/packages/d7/14/2a0004d487464d120c9fb85313a75cd3d71a7506955be458eebfe19a6b1d/s3transfer-0.1.13-py2.py3-none-any.whl (59kB)\r\nCollecting botocore<1.13.0,>=1.12.66 (from boto3==1.9.66->-r requirements.txt (line 1))\r\n  Downloading https://files.pythonhosted.org/packages/50/c0/cd4f8bec8a10876f0ce34f0cf264fda04e09df41d1a473a43f890c71fffa/botocore-1.12.71-py2.py3-none-any.whl (5.2MB)\r\nCollecting jmespath<1.0.0,>=0.7.1 (from boto3==1.9.66->-r requirements.txt (line 1))\r\n  Downloading https://files.pythonhosted.org/packages/b7/31/05c8d001f7f87f0f07289a5fc0fc3832e9a57f2dbd4d3b0fee70e0d51365/jmespath-0.9.3-py2.py3-none-any.whl\r\nCollecting python-dateutil>=2 (from pandas==0.22.0->-r requirements.txt (line 2))\r\n  Downloading https://files.pythonhosted.org/packages/74/68/d87d9b36af36f44254a8d512cbfc48369103a3b9e474be9bdfe536abfc45/python_dateutil-2.7.5-py2.py3-none-any.whl (225kB)\r\nCollecting pytz>=2011k (from pandas==0.22.0->-r requirements.txt (line 2))\r\n  Downloading https://files.pythonhosted.org/packages/f8/0e/2365ddc010afb3d79147f1dd544e5ee24bf4ece58ab99b16fbb465ce6dc0/pytz-2018.7-py2.py3-none-any.whl (506kB)\r\nRequirement already satisfied: numpy>=1.9.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from pandas==0.22.0->-r requirements.txt (line 2))\r\nCollecting click>=5.1 (from Flask==1.0.2->-r requirements.txt (line 5))\r\n  Downloading https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl (81kB)\r\nCollecting itsdangerous>=0.24 (from Flask==1.0.2->-r requirements.txt (line 5))\r\n  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl\r\nCollecting Jinja2>=2.10 (from Flask==1.0.2->-r requirements.txt (line 5))\r\n  Downloading https://files.pythonhosted.org/packages/7f/ff/ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731/Jinja2-2.10-py2.py3-none-any.whl (126kB)\r\nCollecting PyYAML==3.13 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/9e/a3/1d13970c3f36777c583f136c136f804d70f500168edc1edea6daa7200769/PyYAML-3.13.tar.gz (270kB)\r\nRequirement already satisfied: six>=1.11.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: pip>=9.0.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nCollecting lambda-packages==0.20.0 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/0d/27/e588646a1c8c47b96862aafa66416142db5db857732594aafe19cbbf3fda/lambda_packages-0.20.0.tar.gz (99.7MB)\r\nCollecting tqdm==4.19.1 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/c0/d3/7f930cbfcafae3836be39dd3ed9b77e5bb177bdcf587a80b6cd1c7b85e74/tqdm-4.19.1-py2.py3-none-any.whl (50kB)\r\nCollecting troposphere>=1.9.0 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/c7/d8/ac1aa690cb15d8b5f451ff1c54d106534d305a7dadee25c0052b144d425f/troposphere-2.3.4.tar.gz (128kB)\r\nCollecting requests>=2.20.0 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/7d/e3/20f3d364d6c8e5d2353c72a67778eb189176f08e873c9900e10c0287b84b/requests-2.21.0-py2.py3-none-any.whl (57kB)\r\nCollecting future==0.16.0 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/00/2b/8d082ddfed935f3608cc61140df6dcbf0edea1bc3ab52fb6c29ae3e81e85/future-0.16.0.tar.gz (824kB)\r\nCollecting docutils>=0.12 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/36/fa/08e9e6e0e3cbd1d362c3bbee8d01d0aedb2155c4ac112b19ef3cae8eed8d/docutils-0.14-py3-none-any.whl (543kB)\r\nCollecting toml>=0.9.4 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/a2/12/ced7105d2de62fa7c8fb5fce92cc4ce66b57c95fb875e9318dba7f8c5db0/toml-0.10.0-py2.py3-none-any.whl\r\nCollecting wsgi-request-logger==0.4.6 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/04/dd/5e6c52b96a841baec75e5c5647460214aa02e9c4902c7b250375352224c0/wsgi-request-logger-0.4.6.tar.gz\r\nCollecting argcomplete==1.9.3 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/0d/f2/058910b2c732092175875820177dae9d390e71a5f30a9895f92e6a6ca466/argcomplete-1.9.3-py2.py3-none-any.whl\r\nCollecting kappa==0.6.0 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/ee/fa/1b8328d2199520ef5a257f8a2e9315ed0b0194e353a152ca1959490dfbc8/kappa-0.6.0.tar.gz\r\nCollecting durationpy==0.5 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/24/85/70dabb62c3f9705566db0d8a33ebf6c203b5887a1a186f8bcf58a9bf46a6/durationpy-0.5.tar.gz\r\nCollecting python-slugify==1.2.4 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/9f/77/ab7134b731d0e831cf82861c1ab0bb318e80c41155fa9da18958f9d96057/python_slugify-1.2.4-py2.py3-none-any.whl\r\nRequirement already satisfied: wheel>=0.30.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nCollecting hjson==3.0.1 (from zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/8a/92/6b6b85064f8a88cb3b31901d839e7b45c33e4ee450bb1b3cf0c226cca8ec/hjson-3.0.1.tar.gz (43kB)\r\nCollecting urllib3<1.25,>=1.20; python_version >= \"3.4\" (from botocore<1.13.0,>=1.12.66->boto3==1.9.66->-r requirements.txt (line 1))\r\n  Downloading https://files.pythonhosted.org/packages/62/00/ee1d7de624db8ba7090d1226aebefab96a2c71cd5cfa7629d6ad3f61b79e/urllib3-1.24.1-py2.py3-none-any.whl (118kB)\r\nCollecting MarkupSafe>=0.23 (from Jinja2>=2.10->Flask==1.0.2->-r requirements.txt (line 5))\r\n  Downloading https://files.pythonhosted.org/packages/08/04/f2191b50fb7f0712f03f064b71d8b4605190f2178ba02e975a87f7b89a0d/MarkupSafe-1.1.0-cp36-cp36m-manylinux1_x86_64.whl\r\nCollecting cfn_flip>=1.0.2 (from troposphere>=1.9.0->zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/2b/98/c91146bf03087ea35fedeac0e7a751af9cbc29b560f576e6422aaacbe13d/cfn_flip-1.1.0.post1-py3-none-any.whl\r\nCollecting idna<2.9,>=2.5 (from requests>=2.20.0->zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/14/2c/cd551d81dbe15200be1cf41cd03869a46fe7226e7450af7a6545bfc474c9/idna-2.8-py2.py3-none-any.whl (58kB)\r\nCollecting certifi>=2017.4.17 (from requests>=2.20.0->zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/9f/e0/accfc1b56b57e9750eba272e24c4dddeac86852c2bebd1236674d7887e8a/certifi-2018.11.29-py2.py3-none-any.whl (154kB)\r\nCollecting chardet<3.1.0,>=3.0.2 (from requests>=2.20.0->zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl (133kB)\r\nCollecting placebo>=0.8.1 (from kappa==0.6.0->zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/4e/67/cdd143e5cb486b33a0b43c5cdfe96c72f0f5dc0c2a2b5efebd4a47d703c1/placebo-0.8.2.tar.gz\r\nCollecting Unidecode>=0.04.16 (from python-slugify==1.2.4->zappa->-r requirements.txt (line 6))\r\n  Downloading https://files.pythonhosted.org/packages/31/39/53096f9217b057cb049fe872b7fc7ce799a1a89b76cf917d9639e7a558b5/Unidecode-1.0.23-py2.py3-none-any.whl (237kB)\r\nBuilding wheels for collected packages: PyYAML, lambda-packages, troposphere, future, wsgi-request-logger, kappa, durationpy, hjson, placebo\r\n  Running setup.py bdist_wheel for PyYAML: started\r\n  Running setup.py bdist_wheel for PyYAML: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/ad/da/0c/74eb680767247273e2cf2723482cb9c924fe70af57c334513f\r\n  Running setup.py bdist_wheel for lambda-packages: started\r\n  Running setup.py bdist_wheel for lambda-packages: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/c3/88/27/fdd463e4ada229ba4874ef3c38bea268d91bddcdf0ea69cb71\r\n  Running setup.py bdist_wheel for troposphere: started\r\n  Running setup.py bdist_wheel for troposphere: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/c2/da/bc/f353d6852cfbb312db95f9dbaf578eaaa3f3863e8d5d2e586f\r\n  Running setup.py bdist_wheel for future: started\r\n  Running setup.py bdist_wheel for future: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/bf/c9/a3/c538d90ef17cf7823fa51fc701a7a7a910a80f6a405bf15b1a\r\n  Running setup.py bdist_wheel for wsgi-request-logger: started\r\n  Running setup.py bdist_wheel for wsgi-request-logger: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/6b/aa/05/d92d33e020a66e347ddd04ec3a57dd5b2c33d14616d675bd43\r\n  Running setup.py bdist_wheel for kappa: started\r\n  Running setup.py bdist_wheel for kappa: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/fe/34/ec/23a576ff864ede8a44f06062b7b6183b11479b860eea67f72b\r\n  Running setup.py bdist_wheel for durationpy: started\r\n  Running setup.py bdist_wheel for durationpy: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/00/cd/8d/5089f745ef355c25c8642b3d8ab6ffb2bb958b91eb13c49c90\r\n  Running setup.py bdist_wheel for hjson: started\r\n  Running setup.py bdist_wheel for hjson: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/34/2a/5b/254bcb7475d861a2bdc1f8f32f9924734b4e045a7c8dd596ae\r\n  Running setup.py bdist_wheel for placebo: started\r\n  Running setup.py bdist_wheel for placebo: finished with status 'done'\r\n  Stored in directory: /home/travis/.cache/pip/wheels/85/4f/60/7cf98f842649810ac29f0b6b51684621c60e9a6f997aa552e1\r\nSuccessfully built PyYAML lambda-packages troposphere future wsgi-request-logger kappa durationpy hjson placebo\r\nInstalling collected packages: docutils, urllib3, jmespath, python-dateutil, botocore, s3transfer, boto3, pytz, pandas, Werkzeug, xxhash, click, itsdangerous, MarkupSafe, Jinja2, Flask, PyYAML, lambda-packages, tqdm, cfn-flip, troposphere, idna, certifi, chardet, requests, future, toml, wsgi-request-logger, argcomplete, placebo, kappa, durationpy, Unidecode, python-slugify, hjson, zappa, pyarrow\r\nSuccessfully installed Flask-1.0.2 Jinja2-2.10 MarkupSafe-1.1.0 PyYAML-3.13 Unidecode-1.0.23 Werkzeug-0.14.1 argcomplete-1.9.3 boto3-1.9.66 botocore-1.12.71 certifi-2018.11.29 cfn-flip-1.1.0.post1 chardet-3.0.4 click-7.0 docutils-0.14 durationpy-0.5 future-0.16.0 hjson-3.0.1 idna-2.8 itsdangerous-1.1.0 jmespath-0.9.3 kappa-0.6.0 lambda-packages-0.20.0 pandas-0.22.0 placebo-0.8.2 pyarrow-0.11.1 python-dateutil-2.7.5 python-slugify-1.2.4 pytz-2018.7 requests-2.21.0 s3transfer-0.1.13 toml-0.10.0 tqdm-4.19.1 troposphere-2.3.4 urllib3-1.24.1 wsgi-request-logger-0.4.6 xxhash-1.3.0 zappa-0.47.1\r\ntravis_time:end:13e7689c:start=1545521727877395793,finish=1545521779755813937,duration=51878418144\r\n\u001b[0Ktravis_fold:end:install\r\n\u001b[0Ktravis_time:start:0cbe1cc4\r\n\u001b[0K$ echo \"all tests passing\"\r\nall tests passing\r\ntravis_time:end:0cbe1cc4:start=1545521779760698848,finish=1545521779763699315,duration=3000467\r\n\u001b[0K\u001b[32;1mThe command \"echo \"all tests passing\"\" exited with 0.\u001b[0m\r\n\r\n\r\ntravis_fold:start:after_success.1\r\n\u001b[0Ktravis_time:start:056ad326\r\n\u001b[0K$ pip install -r requirements.txt\r\nRequirement already satisfied: boto3==1.9.66 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 1))\r\nRequirement already satisfied: pandas==0.22.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 2))\r\nRequirement already satisfied: Werkzeug==0.14.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 3))\r\nRequirement already satisfied: xxhash==1.3.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 4))\r\nRequirement already satisfied: Flask==1.0.2 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 5))\r\nRequirement already satisfied: zappa in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 6))\r\nRequirement already satisfied: pyarrow in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from -r requirements.txt (line 7))\r\nRequirement already satisfied: jmespath<1.0.0,>=0.7.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from boto3==1.9.66->-r requirements.txt (line 1))\r\nRequirement already satisfied: botocore<1.13.0,>=1.12.66 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from boto3==1.9.66->-r requirements.txt (line 1))\r\nRequirement already satisfied: s3transfer<0.2.0,>=0.1.10 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from boto3==1.9.66->-r requirements.txt (line 1))\r\nRequirement already satisfied: numpy>=1.9.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from pandas==0.22.0->-r requirements.txt (line 2))\r\nRequirement already satisfied: python-dateutil>=2 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from pandas==0.22.0->-r requirements.txt (line 2))\r\nRequirement already satisfied: pytz>=2011k in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from pandas==0.22.0->-r requirements.txt (line 2))\r\nRequirement already satisfied: Jinja2>=2.10 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from Flask==1.0.2->-r requirements.txt (line 5))\r\nRequirement already satisfied: click>=5.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from Flask==1.0.2->-r requirements.txt (line 5))\r\nRequirement already satisfied: itsdangerous>=0.24 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from Flask==1.0.2->-r requirements.txt (line 5))\r\nRequirement already satisfied: hjson==3.0.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: future==0.16.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: durationpy==0.5 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: toml>=0.9.4 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: docutils>=0.12 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: troposphere>=1.9.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: kappa==0.6.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: six>=1.11.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: argcomplete==1.9.3 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: pip>=9.0.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: requests>=2.20.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: tqdm==4.19.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: python-slugify==1.2.4 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: wsgi-request-logger==0.4.6 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: lambda-packages==0.20.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: PyYAML==3.13 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: wheel>=0.30.0 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: urllib3<1.25,>=1.20; python_version >= \"3.4\" in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from botocore<1.13.0,>=1.12.66->boto3==1.9.66->-r requirements.txt (line 1))\r\nRequirement already satisfied: MarkupSafe>=0.23 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from Jinja2>=2.10->Flask==1.0.2->-r requirements.txt (line 5))\r\nRequirement already satisfied: cfn-flip>=1.0.2 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from troposphere>=1.9.0->zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: placebo>=0.8.1 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from kappa==0.6.0->zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: chardet<3.1.0,>=3.0.2 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from requests>=2.20.0->zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: idna<2.9,>=2.5 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from requests>=2.20.0->zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: certifi>=2017.4.17 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from requests>=2.20.0->zappa->-r requirements.txt (line 6))\r\nRequirement already satisfied: Unidecode>=0.04.16 in /home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages (from python-slugify==1.2.4->zappa->-r requirements.txt (line 6))\r\ntravis_time:end:056ad326:start=1545521779769256550,finish=1545521780629014544,duration=859757994\r\n\u001b[0Ktravis_fold:end:after_success.1\r\n\u001b[0Ktravis_fold:start:after_success.2\r\n\u001b[0Ktravis_time:start:09f93e59\r\n\u001b[0K$ zappa update dev\r\n(python-dateutil 2.7.5 (/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages), Requirement.parse('python-dateutil<2.7.0,>=2.6.1'), {'zappa'})\r\nCalling update for stage dev..\r\nOh no! An error occurred! :(\r\n\r\n==============\r\n\r\n\r\n==============\r\n\r\nNeed help? Found a bug? Let us know! :D\r\nFile bug reports on GitHub here: https://github.com/Miserlou/Zappa\r\nAnd join our Slack channel here: https://slack.zappa.io\r\nLove!,\r\n ~ Team Zappa!\r\nTraceback (most recent call last):\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/zappa/cli.py\", line 2712, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/zappa/cli.py\", line 509, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/zappa/cli.py\", line 535, in dispatch_command\r\n    self.load_settings(self.vargs.get('settings_file'))\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/zappa/cli.py\", line 2074, in load_settings\r\n    xray_tracing=self.xray_tracing\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/zappa/core.py\", line 293, in __init__\r\n    self.load_credentials(boto_session, profile_name)\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/zappa/core.py\", line 2922, in load_credentials\r\n    self.boto_session = boto3.Session(profile_name=profile_name, region_name=self.aws_region)\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/boto3/session.py\", line 80, in __init__\r\n    self._setup_loader()\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/boto3/session.py\", line 120, in _setup_loader\r\n    self._loader = self._session.get_component('data_loader')\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/session.py\", line 679, in get_component\r\n    return self._components.get_component(name)\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/session.py\", line 902, in get_component\r\n    self._components[name] = factory()\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/session.py\", line 150, in <lambda>\r\n    lambda:  create_loader(self.get_config_variable('data_path')))\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/session.py\", line 233, in get_config_variable\r\n    logical_name)\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/configprovider.py\", line 226, in get_config_variable\r\n    return provider.provide()\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/configprovider.py\", line 323, in provide\r\n    value = provider.provide()\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/configprovider.py\", line 382, in provide\r\n    config = self._session.get_scoped_config()\r\n  File \"/home/travis/virtualenv/python3.6.3/lib/python3.6/site-packages/botocore/session.py\", line 334, in get_scoped_config\r\n    raise ProfileNotFound(profile=profile_name)\r\nbotocore.exceptions.ProfileNotFound: The config profile (default) could not be found\r\n```\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.1\r\n* Operating System and Python version: Travis Python 3.6\r\n* The output of `pip freeze`:\r\n```\r\nargcomplete==1.9.3\r\nboto3==1.9.66\r\nbotocore==1.12.66\r\nbrython==3.6.2\r\ncertifi==2018.11.29\r\ncfn-flip==1.1.0.post1\r\nchardet==3.0.4\r\nClick==7.0\r\ndocutils==0.14\r\ndurationpy==0.5\r\nFlask==1.0.2\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.8\r\nitsdangerous==1.1.0\r\nJinja2==2.10\r\njiphy==1.2.2\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nMarkupSafe==1.1.0\r\nnumpy==1.15.4\r\npandas==0.22.0\r\nplacebo==0.8.2\r\npyarrow==0.11.1\r\npython-dateutil==2.7.5\r\npython-slugify==1.2.4\r\npytz==2018.7\r\nPyYAML==3.13\r\nrequests==2.21.0\r\ns3transfer==0.1.13\r\nsix==1.12.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.3.4\r\nUnidecode==1.0.23\r\nurllib3==1.24.1\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nxxhash==1.3.0\r\nzappa==0.47.1\r\n```\r\n* Link to your project (optional):\r\nhttps://github.com/Benjamin-Lee/squiggle-server\r\nhttps://travis-ci.org/Benjamin-Lee/squiggle-server\r\n* Your `zappa_settings.py`: \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1723", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1723/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1723/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1723/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1723", "id": 387735897, "node_id": "MDU6SXNzdWUzODc3MzU4OTc=", "number": 1723, "title": "Zappa always leaks the underlying WSGI response", "user": {"login": "untitaker", "id": 837573, "node_id": "MDQ6VXNlcjgzNzU3Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untitaker", "html_url": "https://github.com/untitaker", "followers_url": "https://api.github.com/users/untitaker/followers", "following_url": "https://api.github.com/users/untitaker/following{/other_user}", "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions", "organizations_url": "https://api.github.com/users/untitaker/orgs", "repos_url": "https://api.github.com/users/untitaker/repos", "events_url": "https://api.github.com/users/untitaker/events{/privacy}", "received_events_url": "https://api.github.com/users/untitaker/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-05T12:32:28Z", "updated_at": "2019-03-02T10:35:44Z", "closed_at": "2019-03-02T10:35:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n\r\nFrom the WSGI spec:\r\n\r\n>f the iterable returned by the application has a close() method, the server or gateway must call that method upon completion of the current request, whether the request was completed normally, or terminated early due to an error (this is to support resource release by the application).\r\n\r\nZappa creates a `werkzeug.Response` object but never closes it. That might cause the leak of an arbitrary amount of resources that the WSGI app has decided to only close when the response is closed. For example the file that is currently being streamed to the client, a database connection or even a HTTP request that is proxied through the WSGI app.\r\n\r\nIt is surprising that this issue was never found despite the popularity of Zappa. My guess is that AWS kills and restarts a function when it notices the function to run out of file descriptors.\r\n\r\nThis issue affects every Python version.\r\n\r\n## Possible Fix\r\n\r\nThe following fix is sufficient for successful responses, but it probably should be called in a `try: .. finally: ..` or `with` block like you would do with files:\r\n\r\n```diff\r\ndiff --git a/zappa/handler.py b/zappa/handler.py\r\nindex 5bfcc43..00e8d3e 100644\r\n--- a/zappa/handler.py\r\n+++ b/zappa/handler.py\r\n@@ -540,6 +540,8 @@ class LambdaHandler(object):\r\n                 response.content = response.data\r\n                 common_log(environ, response, response_time=response_time_ms)\r\n\r\n+                response.close()\r\n+\r\n                 return zappa_returndict\r\n         except Exception as e:  # pragma: no cover\r\n```\r\n\r\nA better one would be to wrap everything including the `return zappa_returndict` in  a `with Response.from_app(..) as response:`\r\n\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n\r\nThis is how this issue was surfaced:\r\n\r\n1. Install `sentry-sdk` and set up its [aws-lambda](https://docs.sentry.io/platforms/python/aws_lambda/) integration together with e.g. the [flask](https://docs.sentry.io/platforms/python/flask/) integration\r\n2. deploy your flask app with zappa\r\n3. encounter https://github.com/getsentry/sentry-python/issues/190\r\n\r\n## Your Environment\r\n\r\n* Zappa version used: 0.46.1, as well as master at https://github.com/Miserlou/Zappa/commit/7730144dec01b4cdbf0205b936a200e54a287ebb", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1718", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1718/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1718/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1718/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1718", "id": 386434963, "node_id": "MDU6SXNzdWUzODY0MzQ5NjM=", "number": 1718, "title": "How to update the code from a different computer", "user": {"login": "weasteam", "id": 6238854, "node_id": "MDQ6VXNlcjYyMzg4NTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6238854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weasteam", "html_url": "https://github.com/weasteam", "followers_url": "https://api.github.com/users/weasteam/followers", "following_url": "https://api.github.com/users/weasteam/following{/other_user}", "gists_url": "https://api.github.com/users/weasteam/gists{/gist_id}", "starred_url": "https://api.github.com/users/weasteam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weasteam/subscriptions", "organizations_url": "https://api.github.com/users/weasteam/orgs", "repos_url": "https://api.github.com/users/weasteam/repos", "events_url": "https://api.github.com/users/weasteam/events{/privacy}", "received_events_url": "https://api.github.com/users/weasteam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-01T07:52:12Z", "updated_at": "2018-12-03T05:09:42Z", "closed_at": "2018-12-03T05:09:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is not a bug. I had this question I could not find any solutions.\r\n\r\nI have computer A, that already deployed the code.\r\n\r\nNow I do not have access to the computer A. I got computer B. I downloaded the repository code, installed the virtual environment and requirement package. \r\n\r\nWhat should I do to only update the code and keep/use all previous lambda functions, et.al?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1716", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1716/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1716/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1716/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1716", "id": 386047863, "node_id": "MDU6SXNzdWUzODYwNDc4NjM=", "number": 1716, "title": "Support for Lambda layers", "user": {"login": "jgissend10", "id": 589502, "node_id": "MDQ6VXNlcjU4OTUwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/589502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgissend10", "html_url": "https://github.com/jgissend10", "followers_url": "https://api.github.com/users/jgissend10/followers", "following_url": "https://api.github.com/users/jgissend10/following{/other_user}", "gists_url": "https://api.github.com/users/jgissend10/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgissend10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgissend10/subscriptions", "organizations_url": "https://api.github.com/users/jgissend10/orgs", "repos_url": "https://api.github.com/users/jgissend10/repos", "events_url": "https://api.github.com/users/jgissend10/events{/privacy}", "received_events_url": "https://api.github.com/users/jgissend10/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-11-30T05:51:48Z", "updated_at": "2020-03-09T22:01:42Z", "closed_at": "2020-03-09T22:01:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Lambda now supports layers and custom run times: https://aws.amazon.com/blogs/aws/new-for-aws-lambda-use-any-programming-language-and-share-common-components/\r\n\r\nWith this the lambda libs could be a layer and no longer a dep that has to be deployed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1715", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1715/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1715/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1715/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1715", "id": 385978528, "node_id": "MDU6SXNzdWUzODU5Nzg1Mjg=", "number": 1715, "title": "Supprt for ALB as event source?", "user": {"login": "dmateos", "id": 13409, "node_id": "MDQ6VXNlcjEzNDA5", "avatar_url": "https://avatars0.githubusercontent.com/u/13409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmateos", "html_url": "https://github.com/dmateos", "followers_url": "https://api.github.com/users/dmateos/followers", "following_url": "https://api.github.com/users/dmateos/following{/other_user}", "gists_url": "https://api.github.com/users/dmateos/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmateos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmateos/subscriptions", "organizations_url": "https://api.github.com/users/dmateos/orgs", "repos_url": "https://api.github.com/users/dmateos/repos", "events_url": "https://api.github.com/users/dmateos/events{/privacy}", "received_events_url": "https://api.github.com/users/dmateos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2018-11-29T23:55:30Z", "updated_at": "2019-04-11T06:31:56Z", "closed_at": "2019-03-19T21:11:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Just wondering if theres any insight to if this will work and if not if it can be made to in the future? :) \r\n\r\nAs per here: \r\nhttps://docs.aws.amazon.com/elasticloadbalancing/latest/application/lambda-functions.html\r\n\r\nThis would eliminate some timeout issues we have using API Gateway.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1711", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1711/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1711/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1711/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1711", "id": 385136268, "node_id": "MDU6SXNzdWUzODUxMzYyNjg=", "number": 1711, "title": "How to call \"xxx.so\" file", "user": {"login": "wally-yu", "id": 4316855, "node_id": "MDQ6VXNlcjQzMTY4NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4316855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wally-yu", "html_url": "https://github.com/wally-yu", "followers_url": "https://api.github.com/users/wally-yu/followers", "following_url": "https://api.github.com/users/wally-yu/following{/other_user}", "gists_url": "https://api.github.com/users/wally-yu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wally-yu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wally-yu/subscriptions", "organizations_url": "https://api.github.com/users/wally-yu/orgs", "repos_url": "https://api.github.com/users/wally-yu/repos", "events_url": "https://api.github.com/users/wally-yu/events{/privacy}", "received_events_url": "https://api.github.com/users/wally-yu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-28T07:29:43Z", "updated_at": "2018-12-04T02:28:36Z", "closed_at": "2018-12-04T02:28:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear Zappa developers,\r\n\r\nthanks for providing such a wonderful solution to help depoly python web services to Lambda.\r\ni am trying to use Zappa to migrate my current Django project to lambda, the problem is some of my third-party packages are not pure python (example package \"levenshtein\") the output file was a \"xxxxxx.so\" file, it works from my local but reported \"Import Error\" when i deploy to Lambda.\r\n\r\nI m new to Lambda, sorry for bothering you guys, but could you please help give me some suggestions  how i can call \".so\" file from Lambda?\r\n\r\nThanks in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1710", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1710/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1710/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1710/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1710", "id": 382483306, "node_id": "MDU6SXNzdWUzODI0ODMzMDY=", "number": 1710, "title": "Lambda now supports python 3.7", "user": {"login": "jgissend10", "id": 589502, "node_id": "MDQ6VXNlcjU4OTUwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/589502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgissend10", "html_url": "https://github.com/jgissend10", "followers_url": "https://api.github.com/users/jgissend10/followers", "following_url": "https://api.github.com/users/jgissend10/following{/other_user}", "gists_url": "https://api.github.com/users/jgissend10/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgissend10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgissend10/subscriptions", "organizations_url": "https://api.github.com/users/jgissend10/orgs", "repos_url": "https://api.github.com/users/jgissend10/repos", "events_url": "https://api.github.com/users/jgissend10/events{/privacy}", "received_events_url": "https://api.github.com/users/jgissend10/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-20T03:20:41Z", "updated_at": "2019-03-19T11:06:24Z", "closed_at": "2019-03-19T11:06:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://aws.amazon.com/blogs/compute/python-3-7-runtime-now-available-in-aws-lambda/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1693", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1693/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1693/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1693/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1693", "id": 377688106, "node_id": "MDU6SXNzdWUzNzc2ODgxMDY=", "number": 1693, "title": "slim_hanlder = true, Still -> (InvalidParameterValueException) when calling the UpdateFunctionCode operation: Unzipped size must be smaller than 262144000 bytes", "user": {"login": "LourdesMoran", "id": 39055764, "node_id": "MDQ6VXNlcjM5MDU1NzY0", "avatar_url": "https://avatars1.githubusercontent.com/u/39055764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LourdesMoran", "html_url": "https://github.com/LourdesMoran", "followers_url": "https://api.github.com/users/LourdesMoran/followers", "following_url": "https://api.github.com/users/LourdesMoran/following{/other_user}", "gists_url": "https://api.github.com/users/LourdesMoran/gists{/gist_id}", "starred_url": "https://api.github.com/users/LourdesMoran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LourdesMoran/subscriptions", "organizations_url": "https://api.github.com/users/LourdesMoran/orgs", "repos_url": "https://api.github.com/users/LourdesMoran/repos", "events_url": "https://api.github.com/users/LourdesMoran/events{/privacy}", "received_events_url": "https://api.github.com/users/LourdesMoran/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-06T04:27:58Z", "updated_at": "2020-04-26T21:16:33Z", "closed_at": "2018-11-06T17:09:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Summary:\r\nslim_handler = true in zappa_settings not working as expected. Can't deploy or update a large project.\r\n \r\n## Context\r\nI am using Python 3.6, Zappa 0.47.0.  Running Zappa inside docker a container 'lambci/lambda:build-python3.6'. Project size is around 250 MB.\r\n\r\n## Expected Behaviour\r\nAs per the docs, setting slim_handler to true should trigger creation of a small handler file and the rest of the project should be loaded from S3 at run time.\r\n\r\n## Actual Behavior\r\nThe Error:\r\n + zappa update stage1 --zip s3://my-bucket/build.zip\r\nzbuild_1  | Calling update for stage stage1..\r\nzbuild_1  | Updating Lambda function code..\r\nzbuild_1  | Oh no! An error occurred! :(\r\nzbuild_1  | \r\nzbuild_1  | ==============\r\nzbuild_1  | \r\nzbuild_1  | \r\nzbuild_1  | ==============\r\nzbuild_1  | \r\nzbuild_1  | Need help? Found a bug? Let us know! :D\r\nzbuild_1  | File bug reports on GitHub here: https://github.com/Miserlou/Zappa\r\nzbuild_1  | And join our Slack channel here: https://slack.zappa.io\r\nzbuild_1  | Love!,\r\nzbuild_1  |  ~ Team Zappa!\r\nzbuild_1  | Traceback (most recent call last):\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/zappa/cli.py\", line 2710, in handle\r\nzbuild_1  |     sys.exit(cli.handle())\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/zappa/cli.py\", line 508, in handle\r\nzbuild_1  |     self.dispatch_command(self.command, stage)\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/zappa/cli.py\", line 555, in dispatch_command\r\nzbuild_1  |     self.update(self.vargs['zip'], self.vargs['no_upload'])\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/zappa/cli.py\", line 924, in update\r\nzbuild_1  |     num_revisions=self.num_retained_versions\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/zappa/core.py\", line 1104, in update_lambda_function\r\nzbuild_1  |     response = self.lambda_client.update_function_code(**kwargs)\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/botocore/client.py\", line 320, in _api_call\r\nzbuild_1  |     return self._make_api_call(operation_name, kwargs)\r\nzbuild_1  |   File \"/var/lang/lib/python3.6/site-packages/botocore/client.py\", line 623, in _make_api_call\r\nzbuild_1  |     raise error_class(parsed_response, operation_name)\r\nzbuild_1  | botocore.errorfactory.InvalidParameterValueException: An error occurred (InvalidParameterValueException) when calling the UpdateFunctionCode operation: Unzipped size must be smaller than 262144000 bytes\r\n\r\n## Steps to reproduce\r\nzappa update stage1 --zip s3://my-bucket/build.zip\r\n\r\n## My Zappa settings (.yml):\r\n\r\ncommon:\r\n  django_settings: django_project.settings\r\n  lambda_description: The Cloud API\r\n  runtime: python3.6\r\n  slim_handler: true\r\n  timeout_seconds: 300\r\n\r\nstage1:\r\n  aws_region: us-east-1\r\n  debug: true\r\n  extends: common\r\n  keep_warm: false\r\n  log_level: DEBUG\r\n  manage_roles: false\r\n  memory_size: 1024\r\n  profile_name: default\r\n  project_name: django-project\r\n  role_name: my-role\r\n  s3_bucket: my-bucket\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1677", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1677/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1677/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1677/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1677", "id": 373373734, "node_id": "MDU6SXNzdWUzNzMzNzM3MzQ=", "number": 1677, "title": "How I can support one authmodule for both local develop and serverless environment", "user": {"login": "jjuu", "id": 9148703, "node_id": "MDQ6VXNlcjkxNDg3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9148703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjuu", "html_url": "https://github.com/jjuu", "followers_url": "https://api.github.com/users/jjuu/followers", "following_url": "https://api.github.com/users/jjuu/following{/other_user}", "gists_url": "https://api.github.com/users/jjuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjuu/subscriptions", "organizations_url": "https://api.github.com/users/jjuu/orgs", "repos_url": "https://api.github.com/users/jjuu/repos", "events_url": "https://api.github.com/users/jjuu/events{/privacy}", "received_events_url": "https://api.github.com/users/jjuu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-24T08:53:43Z", "updated_at": "2018-10-25T00:00:09Z", "closed_at": "2018-10-25T00:00:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "My application is restful, authorized with a token named \"s_token\", that in header.\r\nSome of my APIs need auth with token, but others not.\r\nI want to verify the token if necessary. Or, I just need to get the \"user_id\".\r\n\r\nSo I want to know if there is a solution for this.\r\n1. Can I mark which methods need verified, and which are not. \r\n    Or I do this in the api gateway authorizer\r\n2. To use the same authorizer for the local flask, what do I need to do.\r\n3. The login_required decorator, means the method should be verified.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1676", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1676/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1676/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1676/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1676", "id": 372986859, "node_id": "MDU6SXNzdWUzNzI5ODY4NTk=", "number": 1676, "title": "Problem about flask_restful and Zappa authorizer", "user": {"login": "jjuu", "id": 9148703, "node_id": "MDQ6VXNlcjkxNDg3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9148703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjuu", "html_url": "https://github.com/jjuu", "followers_url": "https://api.github.com/users/jjuu/followers", "following_url": "https://api.github.com/users/jjuu/following{/other_user}", "gists_url": "https://api.github.com/users/jjuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjuu/subscriptions", "organizations_url": "https://api.github.com/users/jjuu/orgs", "repos_url": "https://api.github.com/users/jjuu/repos", "events_url": "https://api.github.com/users/jjuu/events{/privacy}", "received_events_url": "https://api.github.com/users/jjuu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-23T12:59:09Z", "updated_at": "2018-10-24T08:04:21Z", "closed_at": "2018-10-24T08:04:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Zappa is really a great tool, saving lots of time.\r\nHere's my problem.\r\n\r\nI want to develop a flask application that can run on both server and serverless environments.\r\nFor this purpose, I want to use the flask_restful, for the request parsing and output fields. \r\nI'll link the restful api object to the flask blueprints.\r\n\r\nFor server environment, I have to authorize with a token, authenticating the same auth-model. But for the serverless, I have to use the zappa authorizer. So I don't have to use the zappa authorizer, do I ? If I use zappa, would it be better?\r\n\r\nI also want to know that if there're any conflicts with flask_restful and others flask extensions.\r\n\r\nIt would be nice to deploy my flask on both two environments without too much work.\r\n\r\nThank you.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1671", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1671/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1671/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1671/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1671", "id": 372147777, "node_id": "MDU6SXNzdWUzNzIxNDc3Nzc=", "number": 1671, "title": "The builtin 'file' was removed in Python 3", "user": {"login": "cclauss", "id": 3709715, "node_id": "MDQ6VXNlcjM3MDk3MTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3709715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cclauss", "html_url": "https://github.com/cclauss", "followers_url": "https://api.github.com/users/cclauss/followers", "following_url": "https://api.github.com/users/cclauss/following{/other_user}", "gists_url": "https://api.github.com/users/cclauss/gists{/gist_id}", "starred_url": "https://api.github.com/users/cclauss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cclauss/subscriptions", "organizations_url": "https://api.github.com/users/cclauss/orgs", "repos_url": "https://api.github.com/users/cclauss/repos", "events_url": "https://api.github.com/users/cclauss/events{/privacy}", "received_events_url": "https://api.github.com/users/cclauss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-19T23:37:38Z", "updated_at": "2019-03-02T10:49:28Z", "closed_at": "2019-03-02T10:49:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/Miserlou/Zappa/blob/master/tests/utils.py#L62 refers to the builtin __file__ which was removed in Python 3.  https://github.com/Miserlou/Zappa/blob/master/tests/utils.py#L62", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1670", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1670/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1670/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1670/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1670", "id": 372096781, "node_id": "MDU6SXNzdWUzNzIwOTY3ODE=", "number": 1670, "title": "DynamoDB-based async never deletes the table", "user": {"login": "jneves", "id": 53665, "node_id": "MDQ6VXNlcjUzNjY1", "avatar_url": "https://avatars1.githubusercontent.com/u/53665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jneves", "html_url": "https://github.com/jneves", "followers_url": "https://api.github.com/users/jneves/followers", "following_url": "https://api.github.com/users/jneves/following{/other_user}", "gists_url": "https://api.github.com/users/jneves/gists{/gist_id}", "starred_url": "https://api.github.com/users/jneves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jneves/subscriptions", "organizations_url": "https://api.github.com/users/jneves/orgs", "repos_url": "https://api.github.com/users/jneves/repos", "events_url": "https://api.github.com/users/jneves/events{/privacy}", "received_events_url": "https://api.github.com/users/jneves/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-19T20:00:28Z", "updated_at": "2018-11-19T17:46:09Z", "closed_at": "2018-11-19T17:46:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "As seen in: https://github.com/Miserlou/Zappa/blob/master/zappa/core.py#L2740\r\n\r\nThe code doesn't work for it's purpose and seems to be an unmodified copy of the SNS subscription removal.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1663", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1663/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1663/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1663/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1663", "id": 371392637, "node_id": "MDU6SXNzdWUzNzEzOTI2Mzc=", "number": 1663, "title": "Zappa does not recognise a deployed project after changing the AWS secret keys", "user": {"login": "thesunlover", "id": 6734600, "node_id": "MDQ6VXNlcjY3MzQ2MDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6734600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thesunlover", "html_url": "https://github.com/thesunlover", "followers_url": "https://api.github.com/users/thesunlover/followers", "following_url": "https://api.github.com/users/thesunlover/following{/other_user}", "gists_url": "https://api.github.com/users/thesunlover/gists{/gist_id}", "starred_url": "https://api.github.com/users/thesunlover/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thesunlover/subscriptions", "organizations_url": "https://api.github.com/users/thesunlover/orgs", "repos_url": "https://api.github.com/users/thesunlover/repos", "events_url": "https://api.github.com/users/thesunlover/events{/privacy}", "received_events_url": "https://api.github.com/users/thesunlover/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-18T07:19:24Z", "updated_at": "2020-08-05T08:18:45Z", "closed_at": "2018-10-18T07:33:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nI have a deployed project with Zappa v0.47.0.\r\nAfter rotating my secret keys for AWS Zappa does not recognise that the project is already deployed.\r\nI have a virtual env with python 3.6.0\r\n\r\n## Expected Behavior\r\n\"zappa update dev\" updates the deployed project\r\n\r\n## Actual Behavior\r\n\"zappa update dev\" returns:\r\n`Warning! Couldn't get function projectname-dev in us-east-1 - have you deployed yet?`\r\n\r\n\r\n## Possible Fix\r\nI don't have an idea\r\n\r\n## Steps to Reproduce\r\n1. `zappa deploy dev` your project.\r\n1.2. `zappa update dev` your project to check its working if you want.\r\n2. create new AWS keys in the AWS IAM console.\r\n3. disable and remove the old keys in the AWS IAM console.\r\n4. try to `zappa update dev` your project\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.47.0.\r\n* Operating System and Python version: Windows 10 with Python 3.6.0\r\n* The output of `pip freeze`:\r\napipkg==1.5\r\nargcomplete==1.9.3\r\nasn1crypto==0.24.0\r\natomicwrites==1.2.1\r\nattrs==18.2.0\r\nawsebcli==3.14.6\r\nbackcall==0.1.0\r\nbase58==1.0.0\r\nbeautifulsoup4==4.6.3\r\nboto3==1.9.23\r\nbotocore==1.12.23\r\nCacheControl==0.12.5\r\ncchardet==1.1.3\r\ncement==2.8.2\r\ncertifi==2018.8.24\r\ncffi==1.11.5\r\ncfn-flip==1.0.3\r\nchardet==3.0.4\r\nclick==6.7\r\ncolorama==0.3.9\r\nconfigparser==3.5.0\r\ncoverage==4.5.1\r\ncryptography==2.3.1\r\ncssselect==1.0.3\r\ndatadotworld==1.6.0\r\ndatapackage==0.8.9\r\ndecorator==4.3.0\r\ndiff-match-patch==20121119\r\nDjango==2.1.2\r\ndjango-debug-toolbar==1.10.1\r\ndjango-extensions==2.1.3\r\ndjango-import-export==1.1.0\r\ndjango-rest-auth==0.9.3\r\ndjango-s3-storage==0.12.4\r\ndjango-storages==1.7.1\r\ndjango-webtest==1.9.3\r\ndjangorestframework==3.8.2\r\ndocutils==0.14\r\ndrf-extensions==0.4.0\r\ndurationpy==0.5\r\net-xmlfile==1.0.1\r\nexecnet==1.5.0\r\nflake8==3.5.0\r\nflake8-polyfill==1.0.2\r\nfreezegun==0.3.11\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.7\r\nijson==2.3\r\nipdb==0.11\r\nipython==7.0.1\r\nipython-genutils==0.2.0\r\nisodate==0.6.0\r\njdcal==1.4\r\njedi==0.13.0\r\njmespath==0.9.3\r\njsonlines==1.2.0\r\njsonschema==2.6.0\r\njsontableschema==0.10.1\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nlinear-tsv==1.1.0\r\nlxml==4.2.5\r\nmccabe==0.6.1\r\nmock==2.0.0\r\nmodel-mommy==1.6.0\r\nmore-itertools==4.3.0\r\nmsgpack==0.5.6\r\nmysqlclient==1.3.13\r\nodfpy==1.3.6\r\nopenpyxl==2.5.8\r\nparso==0.3.1\r\npathspec==0.5.5\r\npbr==4.2.0\r\npep8==1.7.1\r\npep8-naming==0.7.0\r\npickleshare==0.7.5\r\nPillow==5.3.0\r\nplacebo==0.8.2\r\npluggy==0.7.1\r\nprompt-toolkit==2.0.5\r\npsycopg2==2.7.5\r\npy==1.6.0\r\npycodestyle==2.3.1\r\npycparser==2.19\r\npyflakes==1.6.0\r\nPygments==2.2.0\r\nPyMySQL==0.9.2\r\npyquery==1.4.0\r\npytest==3.8.2\r\npytest-cache==1.0\r\npytest-cov==2.6.0\r\npytest-django==3.4.3\r\npytest-flake8==1.0.2\r\npytest-pep8==1.0.6\r\npython-coveralls==2.9.1\r\npython-dateutil==2.6.1\r\npython-slugify==1.2.4\r\npytz==2018.5\r\nPyYAML==3.13\r\nrequests==2.19.1\r\nrfc3986==0.4.1\r\ns3transfer==0.1.13\r\nsemantic-version==2.5.0\r\nsh==1.12.14\r\nsimplegeneric==0.8.1\r\nsix==1.11.0\r\nSQLAlchemy==1.2.12\r\nsqlparse==0.2.4\r\ntablib==0.12.1\r\ntabulator==1.4.1\r\ntermcolor==1.1.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntraitlets==4.3.2\r\ntroposphere==2.3.3\r\nunicodecsv==0.14.1\r\nUnidecode==1.0.22\r\nurllib3==1.22\r\nwaitress==1.1.0\r\nwcwidth==0.1.7\r\nWebOb==1.8.2\r\nWebTest==2.0.30\r\nWerkzeug==0.14.1\r\nwhitenoise==4.1\r\nwsgi-request-logger==0.4.6\r\nxlrd==1.1.0\r\nxlwt==1.3.0\r\nzappa==0.47.0\r\n* Link to your project (optional): not required\r\n* Your `zappa_settings.py`: can't share my full zappa settings for security reasons\r\n{\r\n    \"dev\": {\r\n        \"aws_region\": \"us-east-1\",\r\n        \"django_settings\": \"myproject.settings\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"myproject\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"zappa-dev-package\",\r\n        \"environment_variables\": {\r\n            \"DJANGO_CONF\": \"aws_lambda\"\r\n        },\r\n        \"manage_roles\": false,\r\n        \"role_name\": \"my zappa role name\",\r\n        \"role_arn\": \"my zappa role arn\",\r\n        \"vpc_config\": {\r\n            \"SubnetIds\": [\r\n                \"subnet-a\",\r\n                \"subnet-b\",\r\n                \"subnet-c\",\r\n                \"subnet-d\",\r\n                \"subnet-e\",\r\n                \"subnet-f\"\r\n            ],\r\n            \"SecurityGroupIds\": [\r\n                \"sg-my-sec-group\"\r\n            ]\r\n        }\r\n    }\r\n}\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1661", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1661/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1661/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1661/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1661", "id": 371275683, "node_id": "MDU6SXNzdWUzNzEyNzU2ODM=", "number": 1661, "title": "Certify command fails when AWS account has more than 100 hosted zones", "user": {"login": "degroat", "id": 156872, "node_id": "MDQ6VXNlcjE1Njg3Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/156872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/degroat", "html_url": "https://github.com/degroat", "followers_url": "https://api.github.com/users/degroat/followers", "following_url": "https://api.github.com/users/degroat/following{/other_user}", "gists_url": "https://api.github.com/users/degroat/gists{/gist_id}", "starred_url": "https://api.github.com/users/degroat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/degroat/subscriptions", "organizations_url": "https://api.github.com/users/degroat/orgs", "repos_url": "https://api.github.com/users/degroat/repos", "events_url": "https://api.github.com/users/degroat/events{/privacy}", "received_events_url": "https://api.github.com/users/degroat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-17T21:32:43Z", "updated_at": "2018-10-19T18:49:51Z", "closed_at": "2018-10-19T18:49:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\nIf an AWS account has more than 100 hosted zones, the certify command will fail if the domain being certified does not return in the first 100 records.\r\n\r\nHere is the traceroute of the error that I receive:\r\n\r\n```Traceback (most recent call last):\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/zappa/cli.py\", line 2710, in handle\r\n    sys.exit(cli.handle())\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/zappa/cli.py\", line 508, in handle\r\n    self.dispatch_command(self.command, stage)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/zappa/cli.py\", line 616, in dispatch_command\r\n    manual=self.vargs['manual']\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/zappa/cli.py\", line 1858, in certify\r\n    self.zappa.update_route53_records(self.domain, dns_name)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/zappa/core.py\", line 2074, in update_route53_records\r\n    hosted_zone = self.route53.get_hosted_zone(Id=zone_id)['HostedZone']['Name'][:-1]\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/client.py\", line 320, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/client.py\", line 596, in _make_api_call\r\n    api_params, operation_model, context=request_context)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/client.py\", line 630, in _convert_to_request_dict\r\n    api_params, operation_model, context)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/client.py\", line 660, in _emit_api_params\r\n    params=api_params, model=operation_model, context=context)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/hooks.py\", line 356, in emit\r\n    return self._emitter.emit(aliased_event_name, **kwargs)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/hooks.py\", line 228, in emit\r\n    return self._emit(event_name, kwargs)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/hooks.py\", line 211, in _emit\r\n    response = handler(**kwargs)\r\n  File \"/Users/degroat/.virtualenvs/coderblend/lib/python2.7/site-packages/botocore/handlers.py\", line 597, in fix_route53_ids\r\n    params[name] = orig_value.split('/')[-1]\r\nAttributeError: 'NoneType' object has no attribute 'split'\r\n\r\n==============\r\n```\r\n\r\n## Possible Fix\r\nI traced the issue back to the usage of route53.list_hosted_zones in core.py.  It only returns the first 100.  There is a list_hosted_zones_by_name method that could be used here with the param DNSName.  Another option would be simple pagination to get all of the hosted zones from the account.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1645", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1645/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1645/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1645/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1645", "id": 369454844, "node_id": "MDU6SXNzdWUzNjk0NTQ4NDQ=", "number": 1645, "title": "Undefined name: 'lambda_name' in core.py", "user": {"login": "cclauss", "id": 3709715, "node_id": "MDQ6VXNlcjM3MDk3MTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3709715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cclauss", "html_url": "https://github.com/cclauss", "followers_url": "https://api.github.com/users/cclauss/followers", "following_url": "https://api.github.com/users/cclauss/following{/other_user}", "gists_url": "https://api.github.com/users/cclauss/gists{/gist_id}", "starred_url": "https://api.github.com/users/cclauss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cclauss/subscriptions", "organizations_url": "https://api.github.com/users/cclauss/orgs", "repos_url": "https://api.github.com/users/cclauss/repos", "events_url": "https://api.github.com/users/cclauss/events{/privacy}", "received_events_url": "https://api.github.com/users/cclauss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-12T08:43:45Z", "updated_at": "2019-03-02T10:49:03Z", "closed_at": "2019-03-02T10:49:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "__lambda_name__ is an _undefined name_ in this context which has the potential to raise __NameError__ at runtime.\r\n* https://github.com/Miserlou/Zappa/blob/master/zappa/core.py#L2745\r\n\r\n[flake8](http://flake8.pycqa.org) testing of https://github.com/Miserlou/Zappa on Python 2.7.14\r\n\r\n$ __flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics__\r\n```\r\n./zappa/core.py:2745:37: F821 undefined name 'lambda_name'\r\n        topic_name = get_topic_name(lambda_name)\r\n                                    ^\r\n1     F821 undefined name 'lambda_name'\r\n1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1638", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1638/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1638/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1638/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1638", "id": 367888915, "node_id": "MDU6SXNzdWUzNjc4ODg5MTU=", "number": 1638, "title": "HTTPS connection to S3 times out when trying to load \"remote_env\"", "user": {"login": "jh0ker", "id": 3945220, "node_id": "MDQ6VXNlcjM5NDUyMjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3945220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jh0ker", "html_url": "https://github.com/jh0ker", "followers_url": "https://api.github.com/users/jh0ker/followers", "following_url": "https://api.github.com/users/jh0ker/following{/other_user}", "gists_url": "https://api.github.com/users/jh0ker/gists{/gist_id}", "starred_url": "https://api.github.com/users/jh0ker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jh0ker/subscriptions", "organizations_url": "https://api.github.com/users/jh0ker/orgs", "repos_url": "https://api.github.com/users/jh0ker/repos", "events_url": "https://api.github.com/users/jh0ker/events{/privacy}", "received_events_url": "https://api.github.com/users/jh0ker/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-08T17:40:27Z", "updated_at": "2020-02-04T05:47:01Z", "closed_at": "2018-10-09T08:18:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\nI'm trying to use the `remote_env` key in my `zappa_settings.json` to load my environment variables from a JSON file in an S3 bucket. The app deploys using `zappa update`, but at the end it pauses for a while and reports a `504` error for my endpoint.\r\n\r\n```\r\nDeploying API Gateway..\r\nError: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 504 response code.\r\n```\r\n\r\nThe response body (using my browser) is\r\n```\r\n{\r\n    \"message\": \"Endpoint request timed out\"\r\n}\r\n```\r\n\r\nIf I put in my environment variables directly in my `zappa_settings.json`, my app runs fine.\r\n\r\n`zappa tail` output:\r\n```\r\n Calling s3:get_object with {'Bucket': 'newsforyou-config-jhoeke', 'Key': 'master/env.json'}\r\n Event before-parameter-build.s3.GetObject: calling handler <function sse_md5 at 0x7f1bf5c98510>\r\n Event before-parameter-build.s3.GetObject: calling handler <function validate_bucket_name at 0x7f1bf5c98488>\r\n Event before-parameter-build.s3.GetObject: calling handler <bound method S3RegionRedirector.redirect_from_cache of <botocore.utils.S3RegionRedirector object at 0x7f1bf5650c88>>\r\n Event before-parameter-build.s3.GetObject: calling handler <function generate_idempotent_uuid at 0x7f1bf5c980d0>\r\n Event before-call.s3.GetObject: calling handler <function add_expect_header at 0x7f1bf5c98950>\r\n Event before-call.s3.GetObject: calling handler <bound method S3RegionRedirector.set_request_url of <botocore.utils.S3RegionRedirector object at 0x7f1bf5650c88>>\r\n Making request for OperationModel(name=GetObject) (verify_ssl=True) with params: {'url_path': '/newsforyou-config-jhoeke/master/env.json', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent': 'Boto3/1.7.74 Python/3.6.1 Linux/4.14.67-66.56.amzn1.x86_64 exec-env/AWS_Lambda_python3.6 Botocore/1.10.74 Resource'}, 'body': b'', 'url': 'https://s3.eu-central-1.amazonaws.com/newsforyou-config-jhoeke/master/env.json', 'context': {'client_region': 'eu-central-1', 'client_config': <botocore.config.Config object at 0x7f1bf570abe0>, 'has_streaming_input': False, 'auth_type': None, 'signing': {'bucket': 'newsforyou-config-jhoeke'}}}\r\n Event request-created.s3.GetObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f1bf570a748>>\r\n Event choose-signer.s3.GetObject: calling handler <function set_operation_specific_signer at 0x7f1bf5c96f28>\r\n Event before-sign.s3.GetObject: calling handler <function fix_s3_host at 0x7f1bf5d36e18>\r\n Checking for DNS compatible bucket for: https://s3.eu-central-1.amazonaws.com/newsforyou-config-jhoeke/master/env.json\r\n URI updated to: https://newsforyou-config-jhoeke.s3.eu-central-1.amazonaws.com/master/env.json\r\n Calculating signature using v4 auth.\r\n CanonicalRequest:\r\nGET\r\n/master/env.json\r\n\r\nhost:newsforyou-config-jhoeke.s3.eu-central-1.amazonaws.com\r\nx-amz-content-sha256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\nx-amz-date:20181008T165808Z\r\nx-amz-security-token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXX==\r\n\r\nhost;x-amz-content-sha256;x-amz-date;x-amz-security-token\r\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n StringToSign:\r\nAWS4-HMAC-SHA256\r\n20181008T165808Z\r\n20181008/eu-central-1/s3/aws4_request\r\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n Signature:\r\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n Sending http request: <PreparedRequest [GET]>\r\n Starting new HTTPS connection (1): newsforyou-config-jhoeke.s3.eu-central-1.amazonaws.com\r\n Task timed out after 30.01 seconds\r\n```\r\n\r\n## Expected Behavior\r\nThe JSON file with my environment should either load, or it should fail quickly with an error message\r\n\r\n## Actual Behavior\r\nThe task times out after starting the HTTPS connection to retrieve the object from S3\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Create a new Zappa project\r\n2. Upload a JSON file to an S3 Bucket\r\n3. Set `remote_env` to point to that file\r\n4. Deploy\r\n\r\nThe code is available here: https://github.com/wdr-data/wdrforyou-cms \r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.46.2\r\n* Operating System and Python version: Fedora Linux 28, Python 3.6.6\r\n* The output of `pip freeze`:\r\n```\r\n$ pip freeze\r\nargcomplete==1.9.3\r\nbase58==1.0.0\r\nboto3==1.9.18\r\nbotocore==1.12.18\r\ncertifi==2018.8.24\r\ncfn-flip==1.0.3\r\nchardet==3.0.4\r\nClick==7.0\r\nDjango==2.1.2\r\ndjango-emoji-picker==0.0.3\r\ndjango-filter==2.0.0\r\ndjango-s3-storage==0.12.4\r\ndjango-tz-detect==0.2.9\r\ndjangorestframework==3.8.2\r\ndocutils==0.14\r\ndurationpy==0.5\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.7\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nplacebo==0.8.2\r\npsycopg2==2.7.5\r\npython-dateutil==2.7.3\r\npython-slugify==1.2.4\r\npytz==2018.5\r\nPyYAML==3.12\r\nrequests==2.19.1\r\ns3transfer==0.1.13\r\nsix==1.11.0\r\ntoml==0.10.0\r\ntqdm==4.19.1\r\ntroposphere==2.3.3\r\nUnidecode==1.0.22\r\nurllib3==1.23\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.46.2\r\n```\r\n* Link to your project (optional): https://github.com/wdr-data/wdrforyou-cms\r\n* Your `zappa_settings.py`: \r\n```{\r\n    \"dev\": {\r\n        \"aws_region\": \"eu-central-1\",\r\n        \"django_settings\": \"main.settings\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"newsforyou\",\r\n        \"runtime\": \"python3.6\",\r\n        \"keep_warm\": false,\r\n        \"s3_bucket\": \"newsforyou-zappa-jhoeke\",\r\n        \"remote_env\": \"s3://newsforyou-config-jhoeke/master/config.json\",\r\n        \"vpc_config\" : {\r\n            \"SubnetIds\": [ \"subnet-6022fc1d\", \"subnet-e46ee8a9\", \"subnet-7d107616\" ],\r\n            \"SecurityGroupIds\": [ \"sg-0e6f12a560361382e\" ]\r\n        }\r\n    }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1630", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1630/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1630/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1630/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1630", "id": 365791874, "node_id": "MDU6SXNzdWUzNjU3OTE4NzQ=", "number": 1630, "title": "error at initializing zappa", "user": {"login": "prashantbaditya", "id": 43376906, "node_id": "MDQ6VXNlcjQzMzc2OTA2", "avatar_url": "https://avatars0.githubusercontent.com/u/43376906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashantbaditya", "html_url": "https://github.com/prashantbaditya", "followers_url": "https://api.github.com/users/prashantbaditya/followers", "following_url": "https://api.github.com/users/prashantbaditya/following{/other_user}", "gists_url": "https://api.github.com/users/prashantbaditya/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashantbaditya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashantbaditya/subscriptions", "organizations_url": "https://api.github.com/users/prashantbaditya/orgs", "repos_url": "https://api.github.com/users/prashantbaditya/repos", "events_url": "https://api.github.com/users/prashantbaditya/events{/privacy}", "received_events_url": "https://api.github.com/users/prashantbaditya/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-10-02T08:30:18Z", "updated_at": "2018-10-03T08:18:33Z", "closed_at": "2018-10-03T08:18:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\nreceived error while initializing zappa\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n![error](https://user-images.githubusercontent.com/43376906/46337272-c5032f80-c64a-11e8-830c-0759b2db3f87.JPG)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1628", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1628/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1628/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1628/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1628", "id": 365072541, "node_id": "MDU6SXNzdWUzNjUwNzI1NDE=", "number": 1628, "title": "Feature: Reserve concurrency", "user": {"login": "johnyoonh", "id": 18730221, "node_id": "MDQ6VXNlcjE4NzMwMjIx", "avatar_url": "https://avatars0.githubusercontent.com/u/18730221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnyoonh", "html_url": "https://github.com/johnyoonh", "followers_url": "https://api.github.com/users/johnyoonh/followers", "following_url": "https://api.github.com/users/johnyoonh/following{/other_user}", "gists_url": "https://api.github.com/users/johnyoonh/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnyoonh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnyoonh/subscriptions", "organizations_url": "https://api.github.com/users/johnyoonh/orgs", "repos_url": "https://api.github.com/users/johnyoonh/repos", "events_url": "https://api.github.com/users/johnyoonh/events{/privacy}", "received_events_url": "https://api.github.com/users/johnyoonh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-09-28T23:34:37Z", "updated_at": "2020-02-13T20:24:52Z", "closed_at": "2020-02-13T20:24:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Lambda has an option to set reserved concurrency. It would be nice to able to set this at the time of deployment by setting it in zappa_settings.json", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1627", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1627/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1627/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1627/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1627", "id": 364818891, "node_id": "MDU6SXNzdWUzNjQ4MTg4OTE=", "number": 1627, "title": "Cannot deploy with custom lambda_handler", "user": {"login": "aldwyn", "id": 7032430, "node_id": "MDQ6VXNlcjcwMzI0MzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/7032430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldwyn", "html_url": "https://github.com/aldwyn", "followers_url": "https://api.github.com/users/aldwyn/followers", "following_url": "https://api.github.com/users/aldwyn/following{/other_user}", "gists_url": "https://api.github.com/users/aldwyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldwyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldwyn/subscriptions", "organizations_url": "https://api.github.com/users/aldwyn/orgs", "repos_url": "https://api.github.com/users/aldwyn/repos", "events_url": "https://api.github.com/users/aldwyn/events{/privacy}", "received_events_url": "https://api.github.com/users/aldwyn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-28T09:50:47Z", "updated_at": "2018-11-02T08:30:34Z", "closed_at": "2018-11-02T08:30:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\nI tried creating a custom handler that inherits `zappa.handler.LambdaHandler`. My app just works without the custom handler, but I need to add a custom S3 event, wherein whenever there is an S3 PUT, it will unzip the file and process the data. I just need to intercept/override the `handler` method and filter the records. But when deploy \r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nThe app should just successfully import the env settings while monitoring `zappa tail dev --since 5m`, and flag that the app is running.\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nRaises this kind of error:\r\n```\r\n[1538127761180] module initialization error\r\nRequested setting EXTENSIONS_MAX_UNIQUE_QUERY_ATTEMPTS, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.\r\n```\r\nAnd after finding `EXTENSIONS_MAX_UNIQUE_QUERY_ATTEMPTS` on the entirety of my app, it was used on `django_extensions`, but I think the error is on creating the custom handler\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\nSuggest an appropriate way to create a custom handler.\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Create a custom handler, and inherit `zappa.handler.LambdaHandler`.\r\n2. Do deploy/update the app.\r\n3. Check the error on `zappa tail`\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.46.2\r\n* Operating System and Python version: macOS High Sierra\r\n* The output of `pip freeze`:\r\n* Link to your project (optional): Confidential\r\n* Your `zappa_settings.py`: \r\nIgnore the `<mysite>` tags.\r\n```json\r\n{\r\n    \"dev2\": {\r\n        \"aws_region\": \"us-east-1\",\r\n        \"django_settings\": \"<mysite>.settings\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"<mysite>-staging2\",\r\n        \"exclude\": [\r\n            \"static\",\r\n            \"fabfile.py\",\r\n            \"README.md\",\r\n            \".gitignore\",\r\n            \"<mysite>-*\",\r\n            \"zappa-env-*.json\",\r\n            \"search-keywords.json\",\r\n            \"requirements-ec2.txt\",\r\n            \"lambda_packages\",\r\n            \"boto3*\",\r\n            \"botocore*\",\r\n            \"*.sh\",\r\n            \"*.log\",\r\n            \"*.zip\"\r\n        ],\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"<mysite>-dev2\",\r\n        \"certificate_arn\": \"<scm-cert>\",\r\n        \"domain\": \"alpha.api.<mysite>.com\",\r\n        \"remote_env\": \"s3://<mysite>-api/zappa-env-settings-v2.json\",\r\n        \"lambda_handler\": \"<mysite>.lambda_handler.handler\",\r\n        \"timeout_seconds\": 180\r\n    }\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1626", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1626/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1626/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1626/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1626", "id": 364684844, "node_id": "MDU6SXNzdWUzNjQ2ODQ4NDQ=", "number": 1626, "title": "Error 502 during deployment", "user": {"login": "edxxgardo", "id": 8612773, "node_id": "MDQ6VXNlcjg2MTI3NzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8612773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edxxgardo", "html_url": "https://github.com/edxxgardo", "followers_url": "https://api.github.com/users/edxxgardo/followers", "following_url": "https://api.github.com/users/edxxgardo/following{/other_user}", "gists_url": "https://api.github.com/users/edxxgardo/gists{/gist_id}", "starred_url": "https://api.github.com/users/edxxgardo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edxxgardo/subscriptions", "organizations_url": "https://api.github.com/users/edxxgardo/orgs", "repos_url": "https://api.github.com/users/edxxgardo/repos", "events_url": "https://api.github.com/users/edxxgardo/events{/privacy}", "received_events_url": "https://api.github.com/users/edxxgardo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-27T23:07:17Z", "updated_at": "2018-09-27T23:32:25Z", "closed_at": "2018-09-27T23:32:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nI finished my Zappa installation env on my OSX, it went well. Then I proceeded with the configuration and it went well. But, during the deployment:\r\n\r\nError: Warning! Status check on the deployed lambda failed. A GET request to '/' yielded a 502 response code.\r\n\r\nI tried twice the same, same error.\r\n\r\nAny help will be appreciated. Thx", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1616", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1616/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1616/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1616/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1616", "id": 362364120, "node_id": "MDU6SXNzdWUzNjIzNjQxMjA=", "number": 1616, "title": "How to schedule a cloudwatch event as event source", "user": {"login": "rlaverde", "id": 2024217, "node_id": "MDQ6VXNlcjIwMjQyMTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2024217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rlaverde", "html_url": "https://github.com/rlaverde", "followers_url": "https://api.github.com/users/rlaverde/followers", "following_url": "https://api.github.com/users/rlaverde/following{/other_user}", "gists_url": "https://api.github.com/users/rlaverde/gists{/gist_id}", "starred_url": "https://api.github.com/users/rlaverde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rlaverde/subscriptions", "organizations_url": "https://api.github.com/users/rlaverde/orgs", "repos_url": "https://api.github.com/users/rlaverde/repos", "events_url": "https://api.github.com/users/rlaverde/events{/privacy}", "received_events_url": "https://api.github.com/users/rlaverde/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-20T20:59:54Z", "updated_at": "2019-05-23T16:29:30Z", "closed_at": "2018-10-01T19:21:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to schedule a lambda when a cloudwatch rule is triggered.\r\n\r\n## Context\r\n\r\nI'm using the following configuration, but I don't know which event should I capture, I haven't found any documentation neither in zappa or kappa\r\n\r\n```\r\n    \"events\": [\r\n    {\r\n        \"function\": \"my_function.main\",\r\n        \"event_source\": {\r\n          \"arn\":  \"arn:aws:events:us-east-1:000000000000:rule/my-cloudwatch-rule\",\r\n        \"events\": {\r\n              \"\"\r\n        }\r\n        }\r\n      }\r\n    ]\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1613", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1613/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1613/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1613/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1613", "id": 361550646, "node_id": "MDU6SXNzdWUzNjE1NTA2NDY=", "number": 1613, "title": "Support SQS events to trigger lambda", "user": {"login": "jneves", "id": 53665, "node_id": "MDQ6VXNlcjUzNjY1", "avatar_url": "https://avatars1.githubusercontent.com/u/53665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jneves", "html_url": "https://github.com/jneves", "followers_url": "https://api.github.com/users/jneves/followers", "following_url": "https://api.github.com/users/jneves/following{/other_user}", "gists_url": "https://api.github.com/users/jneves/gists{/gist_id}", "starred_url": "https://api.github.com/users/jneves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jneves/subscriptions", "organizations_url": "https://api.github.com/users/jneves/orgs", "repos_url": "https://api.github.com/users/jneves/repos", "events_url": "https://api.github.com/users/jneves/events{/privacy}", "received_events_url": "https://api.github.com/users/jneves/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-19T02:14:35Z", "updated_at": "2018-10-11T20:52:35Z", "closed_at": "2018-10-11T20:52:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "## Context\r\nAmazon launched SQS events as triggers for lambda.\r\n\r\nhttps://docs.aws.amazon.com/lambda/latest/dg/with-sqs.html\r\n\r\n## Expected Behavior\r\nIf I add an event source like the one below it should work:\r\n\r\n```\r\n        \"events\": [{\r\n            \"function\": \"app.process\",\r\n            \"event_source\": {\r\n                  \"arn\": \"arn:aws:sqs:<region>:<account_id>:zappa-test\",\r\n               \t  \"batch_size\": 10, // Max: 10\r\n                  \"enabled\": true // Default is false\r\n               }\r\n\t}]\r\n```\r\n\r\n## Actual Behavior\r\nI get an error.\r\n\r\n## Possible Fix\r\nSee PR following this issue.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1609", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1609/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1609/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1609/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1609", "id": 360346136, "node_id": "MDU6SXNzdWUzNjAzNDYxMzY=", "number": 1609, "title": "\"exception_handler\" does not work.", "user": {"login": "ohjeyong", "id": 11625617, "node_id": "MDQ6VXNlcjExNjI1NjE3", "avatar_url": "https://avatars1.githubusercontent.com/u/11625617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ohjeyong", "html_url": "https://github.com/ohjeyong", "followers_url": "https://api.github.com/users/ohjeyong/followers", "following_url": "https://api.github.com/users/ohjeyong/following{/other_user}", "gists_url": "https://api.github.com/users/ohjeyong/gists{/gist_id}", "starred_url": "https://api.github.com/users/ohjeyong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ohjeyong/subscriptions", "organizations_url": "https://api.github.com/users/ohjeyong/orgs", "repos_url": "https://api.github.com/users/ohjeyong/repos", "events_url": "https://api.github.com/users/ohjeyong/events{/privacy}", "received_events_url": "https://api.github.com/users/ohjeyong/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-14T15:13:15Z", "updated_at": "2018-09-19T14:13:56Z", "closed_at": "2018-09-19T14:13:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Provide a general summary of the issue in the Title above -->\r\n## Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug -->\r\n<!--- Also, please make sure that you are running Zappa _from a virtual environment_ and are using Python 2.7/3.6 -->\r\n### **\"When I set custom handler in zappa_settings, it isn't applied.\"**\r\n\r\nI found this when I set sentry setting in django project.\r\nI installed zappa_sentry and then, set exception_handler just like below.\r\n````\r\n{\r\n    \"production\": {\r\n        ...\r\n        \"exception_handler\": \"zappa_sentry.unhandled_exceptions\",\r\n        ...\r\n    }\r\n}\r\n````\r\nThen, enter command \"zappa update production\", and I raise error on purpose.\r\nIn zappa tail,\r\n````\r\nTraceback (most recent call last):\r\n  File \"/var/task/django/core/handlers/exception.py\", line 34, in inner\r\n  response = get_response(request)\r\n  File \"/var/task/django/core/handlers/base.py\", line 156, in _get_response\r\n  response = self.process_exception_by_middleware(e, request)\r\n  File \"/var/task/django/core/handlers/base.py\", line 154, in _get_response\r\n  response = response.render()\r\n  File \"/var/task/django/template/response.py\", line 106, in render\r\n  self.content = self.rendered_content\r\n  File \"/var/task/django/template/response.py\", line 81, in rendered_content\r\n  template = self.resolve_template(self.template_name)\r\n  File \"/var/task/django/template/response.py\", line 65, in resolve_template\r\n  return get_template(template, using=self.using)\r\n  File \"/var/task/django/template/loader.py\", line 19, in get_template\r\n  raise TemplateDoesNotExist(template_name, chain=chain)\r\ndjango.template.exceptions.TemplateDoesNotExist: admin/change_list__.html\r\n````\r\nHowever, there was no error report in sentry.\r\n\r\nSo I made custom handler like this,\r\n````\r\nsomething.py\r\n\r\ndef handle_error(e, exception, context):\r\n    print(\"BOOOOOOOM!\")\r\n    return False\r\n````\r\nthen I set exception_handler in zappa_settings to 'something.handle_error'.\r\nI raise error on purpose and see zappa tail production.\r\nI expect \"BOOOOOOOM\" and traceback, but there is no \"BOOOOOOOM\" print, just traceback above.\r\nWhen I set handle_error function return True, still zappa tail print same traceback above.\r\nEven I set exception_handler like this random string,\r\n````\r\n{\r\n    \"production\": {\r\n        ...\r\n        \"exception_handler\": \"qwer\",\r\n        ...\r\n    }\r\n}\r\n\r\n````\r\nstill zappa tail print same traceback above.\r\n\r\nOf course, I enter command \"zappa update production\" before every test and I even tried redeploy(zappa undeploy production, and zappa deploy production), but still same.\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\ncustom exception handler applied.\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nAny exception handler doesn't applied.\r\n\r\n## Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. set exception_handler in zappa_settings to any custom handler\r\n2. raise error\r\n3. see zappa_tail or sentry or any method that can verify whether exception_handler works. \r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.46.1, 0.46.2 (I tested two versions, and still same result.)\r\n* Operating System and Python version: Docker lambci/lambda:build-python3.6\r\n* The output of `pip freeze`:\r\nargcomplete==1.9.3\r\nBabel==2.6.0\r\nbase58==1.0.0\r\nboto==2.49.0\r\nboto3==1.7.74\r\nbotocore==1.12.4\r\ncertifi==2018.8.24\r\ncfn-flip==1.0.3\r\nchardet==3.0.4\r\nclick==6.7\r\ncoolsms-python-sdk==2.0.3\r\nDjango==2.1.1\r\ndjango-phonenumber-field==2.0.1\r\ndjango-storages==1.7\r\ndjangorestframework==3.8.2\r\ndjangorestframework-camel-case==1.0b1\r\ndocutils==0.14\r\ndurationpy==0.5\r\nfuture==0.16.0\r\nhjson==3.0.1\r\nidna==2.7\r\njmespath==0.9.3\r\nkappa==0.6.0\r\nlambda-packages==0.20.0\r\nphonenumbers==8.9.13\r\nplacebo==0.8.2\r\npsycopg2-binary==2.7.5\r\npycryptodome==3.6.6\r\npython-dateutil==2.7.3\r\npython-dotenv==0.9.1\r\npython-slugify==1.2.4\r\npytz==2018.5\r\nPyYAML==3.12\r\nraven==6.9.0\r\nrequests==2.19.1\r\ns3transfer==0.1.13\r\nsix==1.11.0\r\ntoml==0.9.6\r\ntqdm==4.19.1\r\ntroposphere==2.3.3\r\nUnidecode==1.0.22\r\nurllib3==1.23\r\nWerkzeug==0.14.1\r\nwsgi-request-logger==0.4.6\r\nzappa==0.46.2\r\nzappa-sentry==0.2.3\r\n* Link to your project (optional):\r\n* Your `zappa_settings.py`: \r\n{\r\n    \"production\": {\r\n        \"aws_region\": \"ap-northeast-2\",\r\n        \"django_settings\": \"config.settings.production\",\r\n        \"project_name\": \"blahblah\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"blahblah\",\r\n        \"certificate_arn\": \"blahblah\",\r\n        \"domain\": \"blahblah\",\r\n        \"vpc_config\": {\r\n            \"SubnetIds\": [\"blahblah\"],\r\n            \"SecurityGroupIds\": [\"blahblah\"]\r\n        },\r\n        \"exception_handler\": \"qwer\",\r\n        \"environment_variables\": {\r\n            \"SENTRY_DSN\": \"blahblah\"\r\n        }\r\n    }\r\n}\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Miserlou/Zappa/issues/1603", "repository_url": "https://api.github.com/repos/Miserlou/Zappa", "labels_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1603/labels{/name}", "comments_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1603/comments", "events_url": "https://api.github.com/repos/Miserlou/Zappa/issues/1603/events", "html_url": "https://github.com/Miserlou/Zappa/issues/1603", "id": 358241096, "node_id": "MDU6SXNzdWUzNTgyNDEwOTY=", "number": 1603, "title": "Issues triggering Flask routes as scheduled events", "user": {"login": "peteryin21", "id": 4015131, "node_id": "MDQ6VXNlcjQwMTUxMzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/4015131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peteryin21", "html_url": "https://github.com/peteryin21", "followers_url": "https://api.github.com/users/peteryin21/followers", "following_url": "https://api.github.com/users/peteryin21/following{/other_user}", "gists_url": "https://api.github.com/users/peteryin21/gists{/gist_id}", "starred_url": "https://api.github.com/users/peteryin21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peteryin21/subscriptions", "organizations_url": "https://api.github.com/users/peteryin21/orgs", "repos_url": "https://api.github.com/users/peteryin21/repos", "events_url": "https://api.github.com/users/peteryin21/events{/privacy}", "received_events_url": "https://api.github.com/users/peteryin21/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-07T23:34:41Z", "updated_at": "2019-01-04T18:15:33Z", "closed_at": "2019-01-04T18:15:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Context\r\nHi! I have a Flask app running with Zappa and I'm having trouble getting the events to trigger the API endpoints as expected.\r\n\r\n I'd like to run some of the functions in my routes.py on a schedule. The closest thing I found to this was the scheduled events with kwargs, so I created the following in my `zappa_settings.json`\r\n```\r\n{\r\n    \"dev\": {\r\n        \"app_function\": \"grablunch.app\",\r\n        \"aws_region\": \"us-west-2\",\r\n        \"profile_name\": \"default\",\r\n        \"project_name\": \"grablunch\",\r\n        \"runtime\": \"python3.6\",\r\n        \"s3_bucket\": \"test\",\r\n        \"memory_size\": 3008, // Lambda function memory in MB. Default 512.\r\n        \"apigateway_enabled\": true, // Set to false if you don't want to create an API Gateway resource. Default true.\r\n        \"keep_warm_expression\": \"rate(44 minutes)\", // How often to execute the keep-warm, in cron and rate format. Default 4 minutes.\r\n        \"domain\": \"test.net\",\r\n        \"slim_handler\": true,\r\n        \"timeout_seconds\": 300,\r\n        \"events\": [\r\n            {\r\n                \"function\": \"preview_matches\", \r\n                \"kwargs\": {\r\n                    \"day\": \"thursday\"\r\n                },\r\n                \"expression\": \"cron(* * ? * * *)\"\r\n            }\r\n        ],\r\n    }\r\n}\r\n```\r\nIn my `routes.py` (which is imported at the bottom of my `apps/__init__.py`)\r\n```\r\n@app.route(\"/some_url/<day>)\r\ndef preview_matches(day):\r\n    # stuff\r\n```\r\nI see the function trigger every minute in the cloudwatch logs, with the following Zappa event\r\n```\r\n[DEBUG]\t2018-09-07T23:21:08.488Z\tb341fac0-b2f4-11e8-a093-e1d21d73af58\tZappa Event: {'time': '2018-09-07T23:21:00Z', 'detail-type': 'Scheduled Event', 'source': 'aws.events', 'account': '703076520410', 'region': 'us-west-2', 'detail': {}, 'version': '0', 'resources': ['arn:aws:events:us-west-2:703076520410:rule/grablunch-dev-send_match_email'], 'id': '27e03715-580f-973f-34da-11ccc2891401', 'kwargs': {'day': 'thursday'}}\r\n``` \r\nBut the function is not actually called. Any ideas?\r\n\r\n## Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Zappa version used: 0.46.2\r\n* Operating System and Python version: MacOS Sierra, Python 3.6.4\r\n", "performed_via_github_app": null, "score": 1.0}]}