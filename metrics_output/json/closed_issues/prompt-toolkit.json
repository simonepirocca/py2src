{"total_count": 445, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1219", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1219/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1219/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1219/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1219", "id": 682184815, "node_id": "MDU6SXNzdWU2ODIxODQ4MTU=", "number": 1219, "title": "Script doesn't completely exit? Terminal showing (END) instead of prompt?", "user": {"login": "luthis1124", "id": 55561775, "node_id": "MDQ6VXNlcjU1NTYxNzc1", "avatar_url": "https://avatars0.githubusercontent.com/u/55561775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luthis1124", "html_url": "https://github.com/luthis1124", "followers_url": "https://api.github.com/users/luthis1124/followers", "following_url": "https://api.github.com/users/luthis1124/following{/other_user}", "gists_url": "https://api.github.com/users/luthis1124/gists{/gist_id}", "starred_url": "https://api.github.com/users/luthis1124/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luthis1124/subscriptions", "organizations_url": "https://api.github.com/users/luthis1124/orgs", "repos_url": "https://api.github.com/users/luthis1124/repos", "events_url": "https://api.github.com/users/luthis1124/events{/privacy}", "received_events_url": "https://api.github.com/users/luthis1124/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T21:13:53Z", "updated_at": "2020-08-19T21:25:26Z", "closed_at": "2020-08-19T21:25:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not sure if I'm doing anything wrong, I'm having an issue after implementing the most basic completion straight from the tutorial.\r\n\r\nMy terminal looks like this after I choose x (for exit)\r\n\r\n`\r\nx\r\n...skipping...\r\nx\r\n~\r\n~\r\n~\r\n~\r\n~\r\n~\r\n~\r\n~\r\n~\r\n~\r\n(END)\r\n`\r\n\r\nand my code is copy pasted from tutorial:\r\n\r\n`\r\nclass menuCompleter(Completer):\r\n    def get_completions(self, document, complete_event):\r\n        word_before_cursor = document.get_word_before_cursor(WORD=True)\r\n        matches = fuzzyfinder(word_before_cursor, menu_items)\r\n        for m in matches:\r\n            yield Completion(m, start_position=-len(word_before_cursor))\r\n\r\nwhile True:\r\n     user_input = prompt(u'>', history=FileHistory('history.txt'),completer=menuCompleter())\r\n     click.echo_via_pager(user_input)\r\n     if 'x' == user_input:\r\n          break\r\n          # quit()\r\n          # sys.exit()\r\n`\r\n\r\nI'm using VS Code for IDE, if I try running again, I get:\r\n\r\nPattern not found  (press RETURN)\r\n\r\nlike, completer isn't ending with the rest of the program, even when I use quit()?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1209", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1209/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1209/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1209/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1209", "id": 675795419, "node_id": "MDU6SXNzdWU2NzU3OTU0MTk=", "number": 1209, "title": "The little Stdout class in PromptToolkitSSHSession is missing an encoding property", "user": {"login": "JoshHeitzman", "id": 2836480, "node_id": "MDQ6VXNlcjI4MzY0ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2836480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoshHeitzman", "html_url": "https://github.com/JoshHeitzman", "followers_url": "https://api.github.com/users/JoshHeitzman/followers", "following_url": "https://api.github.com/users/JoshHeitzman/following{/other_user}", "gists_url": "https://api.github.com/users/JoshHeitzman/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoshHeitzman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoshHeitzman/subscriptions", "organizations_url": "https://api.github.com/users/JoshHeitzman/orgs", "repos_url": "https://api.github.com/users/JoshHeitzman/repos", "events_url": "https://api.github.com/users/JoshHeitzman/events{/privacy}", "received_events_url": "https://api.github.com/users/JoshHeitzman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-09T23:46:56Z", "updated_at": "2020-08-11T21:17:09Z", "closed_at": "2020-08-11T21:17:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "prompt_toolkit.output.vt100.Vt100_Output.encoding method expects a the instance it is holding in its self.stdout attribute to have an encoding attribute/property.  However, the prompt_toolkit.contrib.ssh.PromptToolkitSSHSession.__init__ method has a little Stdout class that lacks such an attribute/property and Vt100_Output will have an instance of that little Stdout class in the ssh server case.\r\n\r\nI worked around this by adding this property to that little Stdout class:\r\n            @property\r\n            def encoding(s):\r\n                return self._chan._orig_chan.get_encoding()[0]", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1207", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1207/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1207/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1207/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1207", "id": 675627606, "node_id": "MDU6SXNzdWU2NzU2Mjc2MDY=", "number": 1207, "title": "PromptToolkitSSHSession._interact may fail on self._chan.set_line_mode(False)", "user": {"login": "JoshHeitzman", "id": 2836480, "node_id": "MDQ6VXNlcjI4MzY0ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2836480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoshHeitzman", "html_url": "https://github.com/JoshHeitzman", "followers_url": "https://api.github.com/users/JoshHeitzman/followers", "following_url": "https://api.github.com/users/JoshHeitzman/following{/other_user}", "gists_url": "https://api.github.com/users/JoshHeitzman/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoshHeitzman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoshHeitzman/subscriptions", "organizations_url": "https://api.github.com/users/JoshHeitzman/orgs", "repos_url": "https://api.github.com/users/JoshHeitzman/repos", "events_url": "https://api.github.com/users/JoshHeitzman/events{/privacy}", "received_events_url": "https://api.github.com/users/JoshHeitzman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-09T03:19:52Z", "updated_at": "2020-08-11T21:18:09Z", "closed_at": "2020-08-11T21:18:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I observed this call fail in two different ways:\r\n1.  When self._chan is of the type asyncssh.editor.SSHLineEditorChannel and its self._editor is None the set_line_mode function raises an exception as tries to make a call on self._editor.\r\n2.  When asyncssh.listen is called with the kwarg line_editor=False.  In this case the type of self._chan is asyncssh.channel.SSHServerChannel and lacks a set_line_mode method.\r\n\r\nIn both cases I was able to workaround by putting the set_line_mode call under the condition:\r\n\r\nif hasattr(self._chan, 'set_line_mode') and self._chan._editor is not None:\r\n\r\nand the ssh example then worked fine, so it appears that the need to call set_line_mode is limited to specific configuration and isn't possible in other configuraitons.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1205", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1205/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1205/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1205/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1205", "id": 673341644, "node_id": "MDU6SXNzdWU2NzMzNDE2NDQ=", "number": 1205, "title": "Allowing users to use tab key for indentation", "user": {"login": "mewais", "id": 19926502, "node_id": "MDQ6VXNlcjE5OTI2NTAy", "avatar_url": "https://avatars2.githubusercontent.com/u/19926502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mewais", "html_url": "https://github.com/mewais", "followers_url": "https://api.github.com/users/mewais/followers", "following_url": "https://api.github.com/users/mewais/following{/other_user}", "gists_url": "https://api.github.com/users/mewais/gists{/gist_id}", "starred_url": "https://api.github.com/users/mewais/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mewais/subscriptions", "organizations_url": "https://api.github.com/users/mewais/orgs", "repos_url": "https://api.github.com/users/mewais/repos", "events_url": "https://api.github.com/users/mewais/events{/privacy}", "received_events_url": "https://api.github.com/users/mewais/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T08:03:51Z", "updated_at": "2020-08-21T04:45:11Z", "closed_at": "2020-08-21T04:45:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm using prompt-toolkit to implement a command line interface, the CLI includes some builtin commands including `If` and `While` statements.\r\n\r\nGiven this, I would like the user to able to press the tab key to indent commands they write inside the `If` and `While` statements. Is there anyway to do this?\r\n\r\n**EDIT**: Currently I'm trying a workaround through custom completers. Although I do not fully understand what all the parameters for `Completion` are.\r\n\r\nThis is my code:\r\n```\r\nclass TabCompleter(Completer):\r\n    index = 0\r\n    def get_completions(self, document, complete_event):\r\n        self.index += 4\r\n        yield Completion(' '*self.index, start_position=4-self.index, display='')\r\n```\r\n\r\nTheoretically, this should allow me to insert the correct number of spaces on each tab key press. However, this introduces 2 problems:\r\n1- It gets stuck after my second Tab press (gets stuck going in and out from the dropdown menu) and does not increase the depth of indentation.\r\n2- It keeps showing the autocomplete menu, which is not a required behavior for users pressing tabs to do indentation.\r\n\r\nAnyway to solve those two issues? Or other ways to do indentation by pressing tab in general?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1201", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1201/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1201/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1201/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1201", "id": 669200630, "node_id": "MDU6SXNzdWU2NjkyMDA2MzA=", "number": 1201, "title": "Autocompleting words with special characters?", "user": {"login": "Nahnahchi", "id": 43776514, "node_id": "MDQ6VXNlcjQzNzc2NTE0", "avatar_url": "https://avatars3.githubusercontent.com/u/43776514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nahnahchi", "html_url": "https://github.com/Nahnahchi", "followers_url": "https://api.github.com/users/Nahnahchi/followers", "following_url": "https://api.github.com/users/Nahnahchi/following{/other_user}", "gists_url": "https://api.github.com/users/Nahnahchi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nahnahchi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nahnahchi/subscriptions", "organizations_url": "https://api.github.com/users/Nahnahchi/orgs", "repos_url": "https://api.github.com/users/Nahnahchi/repos", "events_url": "https://api.github.com/users/Nahnahchi/events{/privacy}", "received_events_url": "https://api.github.com/users/Nahnahchi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-30T21:10:53Z", "updated_at": "2020-08-07T01:06:04Z", "closed_at": "2020-08-07T01:06:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been struggling with a pretty frustrating issue.\r\nI'm using a Nested Completer with words that often include dashes. I've noticed that if you are trying to complete something like `verb-example`, then it would work fine if I just type `verb` and press *tab*, but if it's `verb-`, the completer will get confused and ignore the previous input. This results in unreliable autocompletion in my application.\r\n\r\nIs there a fix or at least a workaround to this problem?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1193", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1193/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1193/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1193/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1193", "id": 654921467, "node_id": "MDU6SXNzdWU2NTQ5MjE0Njc=", "number": 1193, "title": "message_dialog doesn't pop up under pycharm", "user": {"login": "ebgd", "id": 21105741, "node_id": "MDQ6VXNlcjIxMTA1NzQx", "avatar_url": "https://avatars1.githubusercontent.com/u/21105741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebgd", "html_url": "https://github.com/ebgd", "followers_url": "https://api.github.com/users/ebgd/followers", "following_url": "https://api.github.com/users/ebgd/following{/other_user}", "gists_url": "https://api.github.com/users/ebgd/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebgd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebgd/subscriptions", "organizations_url": "https://api.github.com/users/ebgd/orgs", "repos_url": "https://api.github.com/users/ebgd/repos", "events_url": "https://api.github.com/users/ebgd/events{/privacy}", "received_events_url": "https://api.github.com/users/ebgd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-10T17:15:34Z", "updated_at": "2020-07-15T07:35:16Z", "closed_at": "2020-07-15T07:35:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "In a python Pycharm project, if I run that code \r\n    print(125)\r\n    message_dialog(\r\n        title=\"Example dialog window\",\r\n        text=\"Do you want to continue?\\nPress ENTER to quit.\",\r\n    ).run()\r\n    print(333)\r\n\r\nThe result is \r\n125\r\nProcess finished with exit code -1073741510 (0xC000013A: interrupted by Ctrl+C)\r\n\r\nNothing pop's up and the program hangs. (info : I didn't press Ctrl+C)\r\n\r\nI did the setting (picture attached)\r\n\r\nWhat is wrong ?\r\nPC windows 7\r\nPycharm pro (last version) \r\nPrompt_toolkit installed (last version)\r\n![2020-07-10_16-03-21](https://user-images.githubusercontent.com/21105741/87180575-155bf680-c2e1-11ea-9377-d14c1961844e.jpg)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1174", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1174/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1174/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1174/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1174", "id": 646424866, "node_id": "MDU6SXNzdWU2NDY0MjQ4NjY=", "number": 1174, "title": "New pypi release?", "user": {"login": "lorencarvalho", "id": 1018108, "node_id": "MDQ6VXNlcjEwMTgxMDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1018108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lorencarvalho", "html_url": "https://github.com/lorencarvalho", "followers_url": "https://api.github.com/users/lorencarvalho/followers", "following_url": "https://api.github.com/users/lorencarvalho/following{/other_user}", "gists_url": "https://api.github.com/users/lorencarvalho/gists{/gist_id}", "starred_url": "https://api.github.com/users/lorencarvalho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lorencarvalho/subscriptions", "organizations_url": "https://api.github.com/users/lorencarvalho/orgs", "repos_url": "https://api.github.com/users/lorencarvalho/repos", "events_url": "https://api.github.com/users/lorencarvalho/events{/privacy}", "received_events_url": "https://api.github.com/users/lorencarvalho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-26T18:01:04Z", "updated_at": "2020-08-11T22:15:38Z", "closed_at": "2020-08-11T22:15:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello!\r\n\r\nI'm writing to kindly ask that y'all cut a new release to PyPI, if you can. I'm not sure what (if any) prompt_toolkit's release cadence is, but I am currently feeling the pain of missing the `py.typed` marker file in 3.0.5:\r\n\r\n`error: No library stub file for module 'prompt_toolkit'`\r\n\r\nThis is the commit that included it, https://github.com/prompt-toolkit/python-prompt-toolkit/commit/f0b4cda0bfde17b479ce23b7aa29455dc003d683\r\n\r\nThanks in advance!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1171", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1171/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1171/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1171/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1171", "id": 642497926, "node_id": "MDU6SXNzdWU2NDI0OTc5MjY=", "number": 1171, "title": "Buffer `accept_handler` does not function as indicated", "user": {"login": "tcrensink", "id": 26497809, "node_id": "MDQ6VXNlcjI2NDk3ODA5", "avatar_url": "https://avatars2.githubusercontent.com/u/26497809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcrensink", "html_url": "https://github.com/tcrensink", "followers_url": "https://api.github.com/users/tcrensink/followers", "following_url": "https://api.github.com/users/tcrensink/following{/other_user}", "gists_url": "https://api.github.com/users/tcrensink/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcrensink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcrensink/subscriptions", "organizations_url": "https://api.github.com/users/tcrensink/orgs", "repos_url": "https://api.github.com/users/tcrensink/repos", "events_url": "https://api.github.com/users/tcrensink/events{/privacy}", "received_events_url": "https://api.github.com/users/tcrensink/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-21T05:20:58Z", "updated_at": "2020-06-21T05:34:10Z", "closed_at": "2020-06-21T05:34:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1169", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1169/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1169/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1169/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1169", "id": 640730476, "node_id": "MDU6SXNzdWU2NDA3MzA0NzY=", "number": 1169, "title": "Spontaneous crashes due to CPR & wait_for_responses", "user": {"login": "nitrocalcite", "id": 13782231, "node_id": "MDQ6VXNlcjEzNzgyMjMx", "avatar_url": "https://avatars1.githubusercontent.com/u/13782231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nitrocalcite", "html_url": "https://github.com/nitrocalcite", "followers_url": "https://api.github.com/users/nitrocalcite/followers", "following_url": "https://api.github.com/users/nitrocalcite/following{/other_user}", "gists_url": "https://api.github.com/users/nitrocalcite/gists{/gist_id}", "starred_url": "https://api.github.com/users/nitrocalcite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nitrocalcite/subscriptions", "organizations_url": "https://api.github.com/users/nitrocalcite/orgs", "repos_url": "https://api.github.com/users/nitrocalcite/repos", "events_url": "https://api.github.com/users/nitrocalcite/events{/privacy}", "received_events_url": "https://api.github.com/users/nitrocalcite/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-17T20:44:18Z", "updated_at": "2020-06-19T06:00:40Z", "closed_at": "2020-06-19T06:00:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "This may be related, but it isn't a duplicate of #1164.  I use `prompt-toolkit` as part of `ipython` and even when I just leave the terminal sitting there, it will spontaneously crash.  It continually tries to recover with \"Press enter to continue...\" but doing so will eventually lock the terminal so bad I can't Ctrl-C or Ctrl-Z out of it.  This behavior has happened to me repeatedly, but it seems to be spontaneous rather than triggered by some set of user actions.\r\n\r\nSee this series of stack traces:\r\n```\r\nUnhandled exception in event loop:\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/renderer.py\", line 502, in wait_for_responses\r\n    await response_f\r\n\r\nException Task <Task pending coro=<Renderer.wait_for_cpr_responses.<locals>.wait_for_responses() running at /home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/renderer.py:502> cb=[_wait.<locals>._on_completion() at /home/empad/miniconda3/envs/PyX/lib/python3.7/asyncio/tasks.py:466]> got Future <Future pending> attached to a different loop\r\nWARNING: your terminal doesn't support cursor position requests (CPR).\r\nPress ENTER to continue...\r\nPress ENTER to continue...\r\n\r\nUnhandled exception in event loop:\r\nPress ENTER to continue...\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 837, in in_term\r\n    await _do_wait_for_enter(\"Press ENTER to continue...\")\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 1174, in _do_wait_for_enter\r\n    await session.app.run_async()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 778, in run_async\r\n    return await _run_async2()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 766, in _run_async2\r\n    await self.cancel_and_wait_for_background_tasks()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 867, in cancel_and_wait_for_background_tasks\r\n    await task\r\n\r\nException Task <Task pending coro=<Application._handle_exception.<locals>.in_term() running at /home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py:837>> got Future <Task pending coro=<KeyProcessor._start_timeout.<locals>.wait() running at /home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/key_binding/key_processor.py:406> wait_for=<Future cancelled>> attached to a different loop\r\n\r\nUnhandled exception in event loop:\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 837, in in_term\r\n    await _do_wait_for_enter(\"Press ENTER to continue...\")\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 1174, in _do_wait_for_enter\r\n    await session.app.run_async()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 778, in run_async\r\n    return await _run_async2()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 766, in _run_async2\r\n    await self.cancel_and_wait_for_background_tasks()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 867, in cancel_and_wait_for_background_tasks\r\n    await task\r\n\r\nException Task <Task pending coro=<Application._handle_exception.<locals>.in_term() running at /home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/application.py:837>> got Future <Task pending coro=<KeyProcessor._start_timeout.<locals>.wait() running at /home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/key_binding/key_processor.py:406> wait_for=<Future cancelled>> attached to a different loop\r\nPress ENTER to continue...\r\nUnhandled exception in event loop:\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/run_in_terminal.py\", line 51, in run\r\n    async with in_terminal(render_cli_done=render_cli_done):\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/contextlib.py\", line 170, in __aenter__\r\n    return await self.gen.__anext__()\r\n  File \"/home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/run_in_terminal.py\", line 86, in in_terminal\r\n    await previous_run_in_terminal_f\r\n\r\nException Task <Task pending coro=<run_in_terminal.<locals>.run() running at /home/empad/miniconda3/envs/PyX/lib/python3.7/site-packages/prompt_toolkit/application/run_in_terminal.py:51>> got Future <Future pending> attached to a different loop\r\nPress ENTER to continue...\r\n```\r\n\r\nI get other random `asyncio` errors from `prompt_toolkit` occasionally, but those are recoverable; this is not.  I'm running `prompt-toolkit 3.0.5` with `ipython 7.15.0` on Ubuntu 16.04.  My terminal is a standard Windows 10 terminal running `ssh` into the remote Ubuntu machine.\r\n\r\nThis kind of crash occurs can occur every several hours, and causes me to lose work.  I was hoping to ship this as part of an application I'm developing, but this is not production ready behavior.  \r\n\r\nIf someone can suggest a patch or workaround, I'm all ears.  Short of that, I will likely have to temporarily downgrade `ipython` and `prompt-toolkit` back to v2.\r\n\r\nThanks a lot!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1164", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1164/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1164/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1164/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1164", "id": 638996080, "node_id": "MDU6SXNzdWU2Mzg5OTYwODA=", "number": 1164, "title": "wait_for_cpr_responses does not correctly handle timeouts", "user": {"login": "jacobbogdanov", "id": 48320751, "node_id": "MDQ6VXNlcjQ4MzIwNzUx", "avatar_url": "https://avatars2.githubusercontent.com/u/48320751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacobbogdanov", "html_url": "https://github.com/jacobbogdanov", "followers_url": "https://api.github.com/users/jacobbogdanov/followers", "following_url": "https://api.github.com/users/jacobbogdanov/following{/other_user}", "gists_url": "https://api.github.com/users/jacobbogdanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacobbogdanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacobbogdanov/subscriptions", "organizations_url": "https://api.github.com/users/jacobbogdanov/orgs", "repos_url": "https://api.github.com/users/jacobbogdanov/repos", "events_url": "https://api.github.com/users/jacobbogdanov/events{/privacy}", "received_events_url": "https://api.github.com/users/jacobbogdanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-15T16:48:38Z", "updated_at": "2020-06-17T21:10:03Z", "closed_at": "2020-06-17T21:10:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that `wait_for_cpr_responses` does not correctly handle the timeout case and causes an unhandled exception in the event loop.\r\n\r\nprompt_toolkit version: 3.0.5\r\n\r\nterminal output:\r\n```\r\nUnhandled exception in event loop:\r\n\r\nException None\r\nPress ENTER to continue...                                                                                                                                                  \r\n                                                                                                                                                                            \r\nWARNING: your terminal doesn't support cursor position requests (CPR).\r\nPress ENTER to continue...                                                                                                                                                  \r\n                                                                                                                                                                            \r\nWARNING: your terminal doesn't support cursor position requests (CPR).\r\nPress ENTER to continue...\r\n```\r\n\r\nI hacked `prompt_toolkit/application/application.py::Application._handle_exception` to print the entire `context` dict, which printed the following:\r\n\r\n```\r\n{'message': 'Task was destroyed but it is pending!', 'task': <Task pending coro=<Renderer.wait_for_cpr_responses.<locals>.wait_for_responses() done, defined at <path omitted>/prompt_toolkit/prompt_toolkit/renderer.py:500> wait_for=<Future pending cb=[<TaskWakeupMethWrapper obj...\r\n    [ Message content over the limit has been removed. ]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1156", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1156/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1156/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1156/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1156", "id": 628812060, "node_id": "MDU6SXNzdWU2Mjg4MTIwNjA=", "number": 1156, "title": "Keybinding for alt included in Keybindings", "user": {"login": "fyrue819", "id": 59713105, "node_id": "MDQ6VXNlcjU5NzEzMTA1", "avatar_url": "https://avatars0.githubusercontent.com/u/59713105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fyrue819", "html_url": "https://github.com/fyrue819", "followers_url": "https://api.github.com/users/fyrue819/followers", "following_url": "https://api.github.com/users/fyrue819/following{/other_user}", "gists_url": "https://api.github.com/users/fyrue819/gists{/gist_id}", "starred_url": "https://api.github.com/users/fyrue819/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fyrue819/subscriptions", "organizations_url": "https://api.github.com/users/fyrue819/orgs", "repos_url": "https://api.github.com/users/fyrue819/repos", "events_url": "https://api.github.com/users/fyrue819/events{/privacy}", "received_events_url": "https://api.github.com/users/fyrue819/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-02T00:23:36Z", "updated_at": "2020-06-02T00:33:35Z", "closed_at": "2020-06-02T00:33:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I feel this should be an easy one, instead of ctrl I wanted to use alt because I feel I can reach that easier on the keyboard than the control key. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1155", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1155/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1155/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1155/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1155", "id": 627944190, "node_id": "MDU6SXNzdWU2Mjc5NDQxOTA=", "number": 1155, "title": "Syntax highlighting in Buffer()", "user": {"login": "alyasevich", "id": 63086762, "node_id": "MDQ6VXNlcjYzMDg2NzYy", "avatar_url": "https://avatars1.githubusercontent.com/u/63086762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alyasevich", "html_url": "https://github.com/alyasevich", "followers_url": "https://api.github.com/users/alyasevich/followers", "following_url": "https://api.github.com/users/alyasevich/following{/other_user}", "gists_url": "https://api.github.com/users/alyasevich/gists{/gist_id}", "starred_url": "https://api.github.com/users/alyasevich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alyasevich/subscriptions", "organizations_url": "https://api.github.com/users/alyasevich/orgs", "repos_url": "https://api.github.com/users/alyasevich/repos", "events_url": "https://api.github.com/users/alyasevich/events{/privacy}", "received_events_url": "https://api.github.com/users/alyasevich/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-31T11:28:25Z", "updated_at": "2020-05-31T16:25:16Z", "closed_at": "2020-05-31T16:25:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\nI have a question. Are there any ways to\r\nadd a **Syntax** _highlighting_ in Buffer?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1134", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1134/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1134/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1134/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1134", "id": 610380721, "node_id": "MDU6SXNzdWU2MTAzODA3MjE=", "number": 1134, "title": "Change content of container", "user": {"login": "metropt", "id": 764040, "node_id": "MDQ6VXNlcjc2NDA0MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/764040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metropt", "html_url": "https://github.com/metropt", "followers_url": "https://api.github.com/users/metropt/followers", "following_url": "https://api.github.com/users/metropt/following{/other_user}", "gists_url": "https://api.github.com/users/metropt/gists{/gist_id}", "starred_url": "https://api.github.com/users/metropt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metropt/subscriptions", "organizations_url": "https://api.github.com/users/metropt/orgs", "repos_url": "https://api.github.com/users/metropt/repos", "events_url": "https://api.github.com/users/metropt/events{/privacy}", "received_events_url": "https://api.github.com/users/metropt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2031155041, "node_id": "MDU6TGFiZWwyMDMxMTU1MDQx", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/need-better-docs", "name": "need-better-docs", "color": "fc8046", "default": false, "description": "Question about something for which we probably need better documentation."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-30T20:57:19Z", "updated_at": "2020-05-06T17:55:27Z", "closed_at": "2020-05-06T17:55:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to have two containers, one (left) with some buttons and another (right) that will be changed depending on the button clicked.\r\n\r\nWhat kind of container should I use?\r\nHow can I access the container to change it's content?\r\n\r\n![image](https://user-images.githubusercontent.com/764040/80758138-247a3780-8b2d-11ea-8677-b2787281a2de.png)\r\n\r\nThank you", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1133", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1133/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1133/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1133/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1133", "id": 610163668, "node_id": "MDU6SXNzdWU2MTAxNjM2Njg=", "number": 1133, "title": "Autocompletion on Application", "user": {"login": "metropt", "id": 764040, "node_id": "MDQ6VXNlcjc2NDA0MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/764040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metropt", "html_url": "https://github.com/metropt", "followers_url": "https://api.github.com/users/metropt/followers", "following_url": "https://api.github.com/users/metropt/following{/other_user}", "gists_url": "https://api.github.com/users/metropt/gists{/gist_id}", "starred_url": "https://api.github.com/users/metropt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metropt/subscriptions", "organizations_url": "https://api.github.com/users/metropt/orgs", "repos_url": "https://api.github.com/users/metropt/repos", "events_url": "https://api.github.com/users/metropt/events{/privacy}", "received_events_url": "https://api.github.com/users/metropt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-30T15:42:42Z", "updated_at": "2020-04-30T19:16:52Z", "closed_at": "2020-04-30T19:16:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to get the autocompletion dialog like the one on the prompt session but on an application?\r\n\r\nRight now ti doesn't show the word list and it only works before I type something.\r\n\r\n![Peek 2020-04-30 16-39](https://user-images.githubusercontent.com/764040/80730346-61303980-8b01-11ea-8048-0808f2190dbc.gif)\r\n\r\nThank you\r\n\r\n```\r\nfrom __future__ import unicode_literals\r\nfrom prompt_toolkit.application import Application\r\nfrom prompt_toolkit import PromptSession\r\nfrom prompt_toolkit.key_binding.defaults import load_key_bindings\r\nfrom prompt_toolkit.key_binding.key_bindings import KeyBindings, merge_key_bindings\r\nfrom prompt_toolkit.key_binding.bindings.focus import focus_next, focus_previous\r\nfrom prompt_toolkit.layout import Layout\r\nfrom prompt_toolkit.widgets import RadioList, Label, TextArea\r\nfrom prompt_toolkit.keys import Keys\r\nfrom prompt_toolkit.layout.containers import HSplit, VSplit, HorizontalAlign\r\nfrom prompt_toolkit.shortcuts import input_dialog\r\nfrom prompt_toolkit.completion import WordCompleter\r\nfrom prompt_toolkit.completion import NestedCompleter\r\nfrom prompt_toolkit.completion import Completer, Completion\r\n\r\ndef form_dialog(title='', values=None, style=None, async_=False):\r\n    # Add exit key binding.\r\n    bindings = KeyBindings()\r\n    #bindings.add('tab')(focus_next)\r\n    #bindings.add('up')(focus_previous)\r\n    #bindings.add('down')(focus_next)\r\n    #bindings.add('s-tab')(focus_previous)\r\n    \r\n    @bindings.add('c-d')\r\n    def exit_(event):\r\n        \"\"\"\r\n        Pressing Ctrl-d will exit the user interface.\r\n        \"\"\"\r\n        event.app.exit()    \r\n    @bindings.add('c-a')\r\n    def exit_with_value(event):\r\n        \"\"\"\r\n        Pressing Ctrl-a will exit the user interface returning the selected value.\r\n        \"\"\"\r\n        event.app.exit(result=text1.text)   \r\n\r\n    html_completer = WordCompleter(['<html>', '<body>', '<head>', '<title>'])\r\n\r\n    label1 = Label(text=\"ID:\", dont_extend_width=True)\r\n    label2 = Label(text=\"Firmware:\", dont_extend_width=True)\r\n    label3 = Label(text=\"Client:\", dont_extend_width=True)\r\n    text1 = TextArea(multiline=False,focusable=True,focus_on_click=True, completer=html_completer, complete_while_typing=True)\r\n    text2 = TextArea(multiline=False,focusable=True,focus_on_click=True)\r\n    text3 = TextArea(multiline=False,focusable=True,focus_on_click=True)\r\n\r\n    application = Application(\r\n        layout=Layout(\r\n            HSplit(\r\n                [ Label(title), \r\n                VSplit([label1,text1],align=HorizontalAlign.JUSTIFY),\r\n                VSplit([label2,text2],align=HorizontalAlign.JUSTIFY),\r\n                VSplit([label3,text3],align=HorizontalAlign.JUSTIFY),\r\n                ])),\r\n        key_bindings=merge_key_bindings(\r\n            [bindings]),\r\n        mouse_support=True,\r\n        style=style,        \r\n        full_screen=False)\r\n\r\n    if async_:\r\n        return application.run_async()\r\n    else:\r\n        return application.run()   \r\n\r\ndef main():\r\n    from prompt_toolkit.formatted_text import HTML\r\n\r\n    # With HTML.\r\n    result = form_dialog(\r\n        title='Fill the form:',\r\n        )\r\n        \r\n    print('Result = {}'.format(result))\r\n\r\nif __name__ == '__main__':\r\n    main()       \r\n```\r\n\r\nUPDATE:\r\nI found the example https://github.com/prompt-toolkit/python-prompt-toolkit/blob/master/examples/full-screen/simple-demos/autocompletion.py\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1131", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1131/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1131/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1131/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1131", "id": 609075243, "node_id": "MDU6SXNzdWU2MDkwNzUyNDM=", "number": 1131, "title": "NestedCompleter N to N", "user": {"login": "metropt", "id": 764040, "node_id": "MDQ6VXNlcjc2NDA0MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/764040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metropt", "html_url": "https://github.com/metropt", "followers_url": "https://api.github.com/users/metropt/followers", "following_url": "https://api.github.com/users/metropt/following{/other_user}", "gists_url": "https://api.github.com/users/metropt/gists{/gist_id}", "starred_url": "https://api.github.com/users/metropt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metropt/subscriptions", "organizations_url": "https://api.github.com/users/metropt/orgs", "repos_url": "https://api.github.com/users/metropt/repos", "events_url": "https://api.github.com/users/metropt/events{/privacy}", "received_events_url": "https://api.github.com/users/metropt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-29T13:51:28Z", "updated_at": "2020-04-30T20:54:03Z", "closed_at": "2020-04-30T20:54:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to create a nested completer where the first option is insert, delete or update and the second option could be a circle, rectangle or triangle so I can write something like `insert circle`\r\n\r\nThere is a better way to do that than this?\r\n```\r\ncompleter = NestedCompleter.from_nested_dict({\r\n    'insert': {\r\n        'circle': None,\r\n        'rectangle': None,\r\n        'triangle': None,\r\n    },\r\n    'delete': {\r\n        'circle': None,\r\n        'rectangle': None,\r\n        'triangle': None,\r\n    },\r\n    'update': {\r\n        'circle': None,\r\n        'rectangle': None,\r\n        'triangle': None,\r\n    },\r\n    'exit': None,\r\n})\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1111", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1111/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1111/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1111/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1111", "id": 591624508, "node_id": "MDU6SXNzdWU1OTE2MjQ1MDg=", "number": 1111, "title": "Background color that spans an entire line of prompt", "user": {"login": "gotgenes", "id": 8517, "node_id": "MDQ6VXNlcjg1MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/8517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gotgenes", "html_url": "https://github.com/gotgenes", "followers_url": "https://api.github.com/users/gotgenes/followers", "following_url": "https://api.github.com/users/gotgenes/following{/other_user}", "gists_url": "https://api.github.com/users/gotgenes/gists{/gist_id}", "starred_url": "https://api.github.com/users/gotgenes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gotgenes/subscriptions", "organizations_url": "https://api.github.com/users/gotgenes/orgs", "repos_url": "https://api.github.com/users/gotgenes/repos", "events_url": "https://api.github.com/users/gotgenes/events{/privacy}", "received_events_url": "https://api.github.com/users/gotgenes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-01T05:00:26Z", "updated_at": "2020-04-03T20:34:57Z", "closed_at": "2020-04-03T20:34:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to have a background color span an entire line of a prompt with Prompt Toolkit, as shown in this screenshot (specifically, the lines that begin with \"`root abc`\")?\r\n![prompt with background spanning entire line](https://user-images.githubusercontent.com/1708680/66709996-34405300-ed78-11e9-9988-3ce9f4ae6af3.png)\r\n\r\nI believe the screenshot is from a zsh shell session.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1107", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1107/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1107/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1107/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1107", "id": 589771743, "node_id": "MDU6SXNzdWU1ODk3NzE3NDM=", "number": 1107, "title": "print_formatted_text function raises UnsupportedOperation when executed in pytest", "user": {"login": "StanSvec", "id": 2771595, "node_id": "MDQ6VXNlcjI3NzE1OTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2771595?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StanSvec", "html_url": "https://github.com/StanSvec", "followers_url": "https://api.github.com/users/StanSvec/followers", "following_url": "https://api.github.com/users/StanSvec/following{/other_user}", "gists_url": "https://api.github.com/users/StanSvec/gists{/gist_id}", "starred_url": "https://api.github.com/users/StanSvec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StanSvec/subscriptions", "organizations_url": "https://api.github.com/users/StanSvec/orgs", "repos_url": "https://api.github.com/users/StanSvec/repos", "events_url": "https://api.github.com/users/StanSvec/events{/privacy}", "received_events_url": "https://api.github.com/users/StanSvec/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-29T11:33:20Z", "updated_at": "2020-04-12T20:16:22Z", "closed_at": "2020-04-12T20:16:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use **prompt_toolkit.print_formatted_text** function for printing colored text and it works nicely when it is executed as a python app. However when the same code is unit tested using pytest then **io.UnsupportedOperation** error is raised.\r\n\r\ncls = <class 'prompt_toolkit.output.vt100.Vt100_Output'>\r\nstdout = <_io.TextIOWrapper encoding='UTF-8'>, term = ''\r\n\r\n    @classmethod\r\n    def from_pty(cls, stdout: TextIO, term: Optional[str] = None) -> \"Vt100_Output\":\r\n        \"\"\"\r\n        Create an Output class from a pseudo terminal.\r\n        (This will take the dimensions by reading the pseudo\r\n        terminal attributes.)\r\n        \"\"\"\r\n        # Normally, this requires a real TTY device, but people instantiate\r\n        # this class often during unit tests as well. For convenience, we print\r\n        # an error message, use standard dimensions, and go on.\r\n>       fd = stdout.fileno()\r\nE       io.UnsupportedOperation: fileno\r\n\r\n../venv/lib/python3.8/site-packages/prompt_toolkit/output/vt100.py:449: UnsupportedOperation\r\n\r\nIs there anything I can do to prevent this error? I just need to test that certain output is printed to the console. The formatting doesn't need work in unit tests.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1102", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1102/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1102/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1102/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1102", "id": 583526708, "node_id": "MDU6SXNzdWU1ODM1MjY3MDg=", "number": 1102, "title": "PromptSession does not execute commands when pasting copied multi-line text.", "user": {"login": "alexxbar", "id": 62325656, "node_id": "MDQ6VXNlcjYyMzI1NjU2", "avatar_url": "https://avatars1.githubusercontent.com/u/62325656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexxbar", "html_url": "https://github.com/alexxbar", "followers_url": "https://api.github.com/users/alexxbar/followers", "following_url": "https://api.github.com/users/alexxbar/following{/other_user}", "gists_url": "https://api.github.com/users/alexxbar/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexxbar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexxbar/subscriptions", "organizations_url": "https://api.github.com/users/alexxbar/orgs", "repos_url": "https://api.github.com/users/alexxbar/repos", "events_url": "https://api.github.com/users/alexxbar/events{/privacy}", "received_events_url": "https://api.github.com/users/alexxbar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-18T07:34:07Z", "updated_at": "2020-03-23T15:26:16Z", "closed_at": "2020-03-23T15:26:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n    while True:\r\n        session = PromptSession()\r\n        line = session.prompt(\r\n            message=\">>> \",\r\n            multiline=False,\r\n        )\r\n\r\n        print(\"::: \" + line)\r\n```\r\n\r\n_For example, we want to paste the copied text:_\r\n```\r\nhelp\r\nexit\r\n```\r\n\r\n**Expected Result:**\r\nCommands are executed sequentially, one after another\r\n\r\n**Actual result:**\r\n    Copy-paste input occurs and is displayed on the screen as a few lines\r\n    The console starts processing the command only after pressing Enter\r\n    The console interprets the entered copy-paste as one command line, which it cannot process, and returns an error\r\n\r\nExample with **raw_input**:\r\n```\r\n    while True:\r\n        line = raw_input(\">>> \")\r\n        print(\"::: \" + line)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1100", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1100/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1100/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1100/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1100", "id": 582634972, "node_id": "MDU6SXNzdWU1ODI2MzQ5NzI=", "number": 1100, "title": "Async fullscreen application dialog unresponsive", "user": {"login": "linkous8", "id": 19753981, "node_id": "MDQ6VXNlcjE5NzUzOTgx", "avatar_url": "https://avatars1.githubusercontent.com/u/19753981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linkous8", "html_url": "https://github.com/linkous8", "followers_url": "https://api.github.com/users/linkous8/followers", "following_url": "https://api.github.com/users/linkous8/following{/other_user}", "gists_url": "https://api.github.com/users/linkous8/gists{/gist_id}", "starred_url": "https://api.github.com/users/linkous8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linkous8/subscriptions", "organizations_url": "https://api.github.com/users/linkous8/orgs", "repos_url": "https://api.github.com/users/linkous8/repos", "events_url": "https://api.github.com/users/linkous8/events{/privacy}", "received_events_url": "https://api.github.com/users/linkous8/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-16T22:27:47Z", "updated_at": "2020-03-18T21:18:57Z", "closed_at": "2020-03-18T21:18:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "(Full (but brief) code to replicate the issue is attached)\r\n\r\nUsing toolkit version 3.0.4 under python 3.6.10\r\n\r\nI'm writing an application that uses a full-screen prompt application as the view (imb_tui.py) to keep the business logic (imb.py) separate from the presentation. To prevent flickering, I launch the app with run_async and swap out the body of the main application frame to switch screens.\r\n\r\nThe run_async task starts the app with a frame around an empty window, then the business logic task calls a method to swap the body of the frame with an HSplit containing my prompt then awaits for one of the yes/no handlers to execute before returning the result. The problem is the updated frame body does not get drawn to the screen until there is keyboard input (eg. the 'n' key). However, even though the dialog is drawn, it is not responsive to any keystrokes except for Enter which triggers the yes handler. Further, if you press Enter as the first keystroke (before the dialog is drawn) it will trigger the yes handler.\r\n\r\nCould you take a look at my example code and let me know if I have set up the application incorrectly? To run: `python3.6 imb.py`\r\n\r\n[imb.py.txt](https://github.com/prompt-toolkit/python-prompt-toolkit/files/4340639/imb.py.txt)\r\n[imb_tui.py.txt](https://github.com/prompt-toolkit/python-prompt-toolkit/files/4340640/imb_tui.py.txt)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1099", "id": 581186721, "node_id": "MDU6SXNzdWU1ODExODY3MjE=", "number": 1099, "title": "MouseEventType.MOUSE_DOWN ValueError on Windows 10 / Python 3.8", "user": {"login": "dskrypa", "id": 7505342, "node_id": "MDQ6VXNlcjc1MDUzNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7505342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dskrypa", "html_url": "https://github.com/dskrypa", "followers_url": "https://api.github.com/users/dskrypa/followers", "following_url": "https://api.github.com/users/dskrypa/following{/other_user}", "gists_url": "https://api.github.com/users/dskrypa/gists{/gist_id}", "starred_url": "https://api.github.com/users/dskrypa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dskrypa/subscriptions", "organizations_url": "https://api.github.com/users/dskrypa/orgs", "repos_url": "https://api.github.com/users/dskrypa/repos", "events_url": "https://api.github.com/users/dskrypa/events{/privacy}", "received_events_url": "https://api.github.com/users/dskrypa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-14T12:24:13Z", "updated_at": "2020-03-26T20:49:57Z", "closed_at": "2020-03-26T20:49:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using prompt-toolkit 3.0.4 on Windows 10 in Git BASH in ConEmu with Python 3.8.0 and 3.8.2 results in the following exception when the left mouse button is clicked:\r\n\r\n```\r\n>>> from prompt_toolkit import prompt\r\n>>> answer = prompt('Give me some input: ')\r\n\r\nUnhandled exception in event loop:\r\n  File \"C:\\Program Files\\Python38\\lib\\asyncio\\events.py\", line 81, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\input\\win32.py\", line 512, in ready\r\n    callback()\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 653, in read_from_input\r\n    self.key_processor.process_keys()\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_processor.py\", line 274, in process_keys\r\n    self._process_coroutine.send(key_press)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_processor.py\", line 186, in _process\r\n    self._call_handler(matches[-1], key_sequence=buffer[:])\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_processor.py\", line 329, in _call_handler\r\n    handler.call(event)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_bindings.py\", line 101, in call\r\n    self.handler(event)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\bindings\\mouse.py\", line 126, in _mouse\r\n    event_type = MouseEventType(pieces[0])\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 304, in __call__\r\n    return cls.__new__(cls, value)\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 595, in __new__\r\n    raise exc\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 579, in __new__\r\n    result = cls._missing_(value)\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 608, in _missing_\r\n    raise ValueError(\"%r is not a valid %s\" % (value, cls.__name__))\r\n\r\nException 'MouseEventType.MOUSE_DOWN' is not a valid MouseEventType\r\nPress ENTER to continue...\r\n```\r\n\r\nIt happens both in the vanilla Python interactive terminal, and in ipython.\r\n\r\nThe problem seems to be that the event type is being passed as `MouseEventType.MOUSE_DOWN` instead of `MOUSE_DOWN`.  Changing the following line works to fix the issue, but I'm not familiar enough with this project to know if this is where/how the official fix should be applied:\r\n```\r\nevent_type = MouseEventType(pieces[0].rsplit('.', 1)[-1])\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1097", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1097/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1097/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1097/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1097", "id": 580088184, "node_id": "MDU6SXNzdWU1ODAwODgxODQ=", "number": 1097, "title": "Update readme to mention support for newer versions of Python", "user": {"login": "Nicholas-Steel", "id": 11567846, "node_id": "MDQ6VXNlcjExNTY3ODQ2", "avatar_url": "https://avatars1.githubusercontent.com/u/11567846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nicholas-Steel", "html_url": "https://github.com/Nicholas-Steel", "followers_url": "https://api.github.com/users/Nicholas-Steel/followers", "following_url": "https://api.github.com/users/Nicholas-Steel/following{/other_user}", "gists_url": "https://api.github.com/users/Nicholas-Steel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nicholas-Steel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nicholas-Steel/subscriptions", "organizations_url": "https://api.github.com/users/Nicholas-Steel/orgs", "repos_url": "https://api.github.com/users/Nicholas-Steel/repos", "events_url": "https://api.github.com/users/Nicholas-Steel/events{/privacy}", "received_events_url": "https://api.github.com/users/Nicholas-Steel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-12T17:14:06Z", "updated_at": "2020-03-18T21:20:57Z", "closed_at": "2020-03-18T21:20:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/prompt-toolkit/python-prompt-toolkit/edit/master/docs/index.rst\r\n\r\nLine 39, change it to say 3.6+ as the highest supported release, this'll bring it in line with the start of the document.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1086", "id": 573453006, "node_id": "MDU6SXNzdWU1NzM0NTMwMDY=", "number": 1086, "title": "Prompt generates whitespace to end of line that appears on clipboard", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-01T01:35:16Z", "updated_at": "2020-04-25T20:09:12Z", "closed_at": "2020-04-25T20:09:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "In xonsh/xonsh#3167, I reported an issue that appears to have emerged with prompt_toolkit 2.x. When completing a prompt, a bunch of spaces are left in place of the newline, causing them to be rendered if the command is copied to a clipboard.\r\n\r\nFor example, see this copy of a session:\r\n\r\n```\r\n$ python\r\n>>> import prompt_toolkit as pt\r\n>>> ps = pt.PromptSession()\r\n>>> ps.prompt()\r\nfoo                                                                                                  \r\n'foo'\r\n```\r\n\r\nIt looks normal until you select the text inside and see there are 98 or so spaces after `foo`. This issue causes wrapping issues and other noise when working in xonsh. Is there a way to avoid this undesirable behavior?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1085", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1085/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1085/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1085/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1085", "id": 572491065, "node_id": "MDU6SXNzdWU1NzI0OTEwNjU=", "number": 1085, "title": "Broken on Python 3.6.0: missing typing.AsyncGenerator", "user": {"login": "cooijmanstim", "id": 206920, "node_id": "MDQ6VXNlcjIwNjkyMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/206920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cooijmanstim", "html_url": "https://github.com/cooijmanstim", "followers_url": "https://api.github.com/users/cooijmanstim/followers", "following_url": "https://api.github.com/users/cooijmanstim/following{/other_user}", "gists_url": "https://api.github.com/users/cooijmanstim/gists{/gist_id}", "starred_url": "https://api.github.com/users/cooijmanstim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cooijmanstim/subscriptions", "organizations_url": "https://api.github.com/users/cooijmanstim/orgs", "repos_url": "https://api.github.com/users/cooijmanstim/repos", "events_url": "https://api.github.com/users/cooijmanstim/events{/privacy}", "received_events_url": "https://api.github.com/users/cooijmanstim/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-28T03:08:46Z", "updated_at": "2020-03-08T21:49:38Z", "closed_at": "2020-03-08T21:49:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "This package is currently broken on Python 3.6.0 as it requires `typing.AsyncGenerator` which wasn't introduced until 3.6.1.\r\n\r\nTraceback fragment:\r\n\r\n```python\r\n  File \".../prompt_toolkit/application/current.py\", line 8, in <module>\r\n    from prompt_toolkit.eventloop.dummy_contextvars import ContextVar  # type: ignore\r\n  File \".../prompt_toolkit/eventloop/__init__.py\", line 1, in <module>\r\n    from .async_generator import generator_to_async_generator\r\n  File \".../prompt_toolkit/eventloop/async_generator.py\", line 5, in <module>\r\n    from typing import AsyncGenerator, Callable, Iterable, TypeVar, Union\r\nImportError: cannot import name 'AsyncGenerator'\r\n```\r\n\r\nI'm not attached to Python 3.6.0 but it took me a while to figure out why conda kept giving me a broken environment. Maybe refine the dependency to >=3.6.1?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1084", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1084/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1084/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1084/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1084", "id": 570433015, "node_id": "MDU6SXNzdWU1NzA0MzMwMTU=", "number": 1084, "title": "RuntimeError: This event loop is already running\" if application is run from inside a running event loop", "user": {"login": "brianmaissy", "id": 622989, "node_id": "MDQ6VXNlcjYyMjk4OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/622989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianmaissy", "html_url": "https://github.com/brianmaissy", "followers_url": "https://api.github.com/users/brianmaissy/followers", "following_url": "https://api.github.com/users/brianmaissy/following{/other_user}", "gists_url": "https://api.github.com/users/brianmaissy/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianmaissy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianmaissy/subscriptions", "organizations_url": "https://api.github.com/users/brianmaissy/orgs", "repos_url": "https://api.github.com/users/brianmaissy/repos", "events_url": "https://api.github.com/users/brianmaissy/events{/privacy}", "received_events_url": "https://api.github.com/users/brianmaissy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-25T09:36:18Z", "updated_at": "2020-02-27T21:05:28Z", "closed_at": "2020-02-27T21:05:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "After recently upgrading ipython from 7.9.0 to 7.12.0, which involved upgrading prompt_toolkit from 2.0.10 to 3.0.3, I have a problem.\r\n\r\nI use ipdb to debug tests, and until now (with prompt_toolkit 2.0), calling `ipdb.set_trace()` from within a running event loop worked fine. Now, it (very understandably) results in the following exception:\r\n\r\n```\r\n../../.local/lib/python3.6/site-packages/IPython/terminal/debugger.py:114: in cmdloop\r\n    line = self.pt_app.prompt()\r\n../../.local/lib/python3.6/site-packages/prompt_toolkit/shortcuts/prompt.py:997: in prompt\r\n    return self.app.run()\r\n../../.local/lib/python3.6/site-packages/prompt_toolkit/application/application.py:810: in run\r\n    return loop.run_until_complete(self.run_async(pre_run=pre_run))\r\n/usr/lib/python3.6/asyncio/base_events.py:471: in run_until_complete\r\n    self.run_forever()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <_UnixSelectorEventLoop running=False closed=False debug=False>\r\n\r\n    def run_forever(self):\r\n        \"\"\"Run until stop() is called.\"\"\"\r\n        self._check_closed()\r\n        if self.is_running():\r\n>           raise RuntimeError('This event loop is already running')\r\nE           RuntimeError: This event loop is already running\r\n\r\n/usr/lib/python3.6/asyncio/base_events.py:425: RuntimeError\r\n```\r\n\r\nNow the question is what to do about this, and whether or not my use case (which I'm guessing is relatively common) can continue to be supported.\r\n\r\nI debated whether this is a prompt_toolkit issue or an ipython (or even ipdb) one, but it's probably both. If prompt_toolkit has an equivalent entry point that can be called from a running event loop, then it's just a matter of asking ipython to use it. But if not, I wonder if such an entry point could be created. If not, suggestions for workarounds that ipython/ipdb could use to solve this on their end are welcome.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1077", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1077/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1077/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1077/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1077", "id": 564110354, "node_id": "MDU6SXNzdWU1NjQxMTAzNTQ=", "number": 1077, "title": "Prompt using multiprocessing causes KeyError", "user": {"login": "bt235711", "id": 60978723, "node_id": "MDQ6VXNlcjYwOTc4NzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/60978723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bt235711", "html_url": "https://github.com/bt235711", "followers_url": "https://api.github.com/users/bt235711/followers", "following_url": "https://api.github.com/users/bt235711/following{/other_user}", "gists_url": "https://api.github.com/users/bt235711/gists{/gist_id}", "starred_url": "https://api.github.com/users/bt235711/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bt235711/subscriptions", "organizations_url": "https://api.github.com/users/bt235711/orgs", "repos_url": "https://api.github.com/users/bt235711/repos", "events_url": "https://api.github.com/users/bt235711/events{/privacy}", "received_events_url": "https://api.github.com/users/bt235711/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-12T16:19:22Z", "updated_at": "2020-02-21T16:09:48Z", "closed_at": "2020-02-21T16:09:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "prompt-toolkit 3.0.3 \r\nUbuntu 18.04.4\r\nPython 3.7.5\r\n\r\n```\r\nimport multiprocessing\r\nfrom prompt_toolkit import prompt\r\n\r\ndef run_console():\r\n    print('You said: %s' % prompt('>>>: '))\r\n\r\nprocess = multiprocessing.Process(target=run_console)\r\nprocess.start()\r\n```\r\n$ python ptk_test.py\r\n\r\nWarning: Input is not a terminal (fd=3).Process Process-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/asyncio/selector_events.py\", line 251, in _add_reader\r\n    key = self._selector.get_key(fd)\r\n  File \"/usr/local/lib/python3.7/selectors.py\", line 192, in get_key\r\n    raise KeyError(\"{!r} is not registered\".format(fileobj)) from None\r\nKeyError: '3 is not registered'\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1073", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1073/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1073/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1073/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1073", "id": 561517111, "node_id": "MDU6SXNzdWU1NjE1MTcxMTE=", "number": 1073, "title": "Readthedocs for version 3.0.2 does not exit", "user": {"login": "bendikro", "id": 84580, "node_id": "MDQ6VXNlcjg0NTgw", "avatar_url": "https://avatars2.githubusercontent.com/u/84580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bendikro", "html_url": "https://github.com/bendikro", "followers_url": "https://api.github.com/users/bendikro/followers", "following_url": "https://api.github.com/users/bendikro/following{/other_user}", "gists_url": "https://api.github.com/users/bendikro/gists{/gist_id}", "starred_url": "https://api.github.com/users/bendikro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bendikro/subscriptions", "organizations_url": "https://api.github.com/users/bendikro/orgs", "repos_url": "https://api.github.com/users/bendikro/repos", "events_url": "https://api.github.com/users/bendikro/events{/privacy}", "received_events_url": "https://api.github.com/users/bendikro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-07T09:24:48Z", "updated_at": "2020-02-10T19:26:42Z", "closed_at": "2020-02-10T19:26:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "The link to docs for version 3.0.2 is dead: https://python-prompt-toolkit.readthedocs.io/en/3.0.2/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1066", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1066/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1066/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1066/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1066", "id": 556613832, "node_id": "MDU6SXNzdWU1NTY2MTM4MzI=", "number": 1066, "title": "Doesn't work in Jupyter Notebook", "user": {"login": "thoth291", "id": 2971670, "node_id": "MDQ6VXNlcjI5NzE2NzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/2971670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoth291", "html_url": "https://github.com/thoth291", "followers_url": "https://api.github.com/users/thoth291/followers", "following_url": "https://api.github.com/users/thoth291/following{/other_user}", "gists_url": "https://api.github.com/users/thoth291/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoth291/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoth291/subscriptions", "organizations_url": "https://api.github.com/users/thoth291/orgs", "repos_url": "https://api.github.com/users/thoth291/repos", "events_url": "https://api.github.com/users/thoth291/events{/privacy}", "received_events_url": "https://api.github.com/users/thoth291/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-29T03:26:21Z", "updated_at": "2020-01-29T07:29:16Z", "closed_at": "2020-01-29T07:26:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear prompt_toolkit Team!\r\nPlease advise on the situation below:\r\n\r\nSimple example:\r\n```python\r\nfrom prompt_toolkit.shortcuts import ProgressBar\r\nimport time\r\nfrom prompt_toolkit import __version__\r\nprint(__version__)\r\n\r\nwith ProgressBar() as pb:\r\n    for i in pb(range(800)):\r\n        time.sleep(.01)\r\n```\r\nFor 2.0.9 gives this:\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/shortcuts/progress_bar/base.py\", line 157, in run\r\n    self.app.run()\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/application/application.py\", line 709, in run\r\n    return run()\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/application/application.py\", line 683, in run\r\n    return f.result()\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/eventloop/future.py\", line 149, in result\r\n    raise self._exception\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/eventloop/coroutine.py\", line 90, in step_next\r\n    new_f = coroutine.throw(exc)\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/application/application.py\", line 658, in _run_async2\r\n    result = yield f\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/eventloop/coroutine.py\", line 90, in step_next\r\n    new_f = coroutine.throw(exc)\r\n  File \"/anaconda3/envs/intel-2019/lib/python3.6/site-packages/prompt_toolkit/application/application.py\", line 610, in _run_async\r\n    result = yield From(f)\r\nEOFError\r\n```\r\n\r\nFor  version 3.0.3:\r\n```python\r\n---------------------------------------------------------------------------\r\nUnsupportedOperation                      Traceback (most recent call last)\r\n<ipython-input-1-c20cb4d79981> in <module>\r\n      4 print(__version__)\r\n      5 \r\n----> 6 with ProgressBar() as pb:\r\n      7     for i in pb(range(800)):\r\n      8         time.sleep(.01)\r\n\r\n/envs/pt/lib/python3.7/site-packages/prompt_toolkit/shortcuts/progress_bar/base.py in __init__(self, title, formatters, bottom_toolbar, style, key_bindings, file, color_depth, output, input)\r\n    136         # works best with `patch_stdout`.\r\n    137         self.color_depth = color_depth\r\n--> 138         self.output = output or get_app_session().output\r\n    139         self.input = input or get_app_session().input\r\n    140 \r\n\r\n/envs/pt/lib/python3.7/site-packages/prompt_toolkit/application/current.py in output(self)\r\n     63             from prompt_toolkit.output.defaults import create_output\r\n     64 \r\n---> 65             self._output = create_output()\r\n     66         return self._output\r\n     67 \r\n\r\n/envs/pt/lib/python3.7/site-packages/prompt_toolkit/output/defaults.py in create_output(stdout, always_prefer_tty)\r\n     60         from .vt100 import Vt100_Output\r\n     61 \r\n---> 62         return Vt100_Output.from_pty(stdout, term=get_term_environment_variable())\r\n\r\n/envs/pt/lib/python3.7/site-packages/prompt_toolkit/output/vt100.py in from_pty(cls, stdout, term)\r\n    447         # this class often during unit tests as well. For convenience, we print\r\n    448         # an error message, use standard dimensions, and go on.\r\n--> 449         fd = stdout.fileno()\r\n    450 \r\n    451         if not stdout.isatty() and fd not in cls._fds_not_a_terminal:\r\n\r\nUnsupportedOperation: fileno\r\n```\r\nIs it only for me - if so - could you please share your envlist?\r\nIf it happens with you too, then is there anyway to fix it or provide any workaround?\r\n\r\nThanks in Advance!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1060", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1060/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1060/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1060/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1060", "id": 554893320, "node_id": "MDU6SXNzdWU1NTQ4OTMzMjA=", "number": 1060, "title": "completer stop working when the '=' character is typed", "user": {"login": "jorgeallyson", "id": 49375303, "node_id": "MDQ6VXNlcjQ5Mzc1MzAz", "avatar_url": "https://avatars1.githubusercontent.com/u/49375303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorgeallyson", "html_url": "https://github.com/jorgeallyson", "followers_url": "https://api.github.com/users/jorgeallyson/followers", "following_url": "https://api.github.com/users/jorgeallyson/following{/other_user}", "gists_url": "https://api.github.com/users/jorgeallyson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorgeallyson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorgeallyson/subscriptions", "organizations_url": "https://api.github.com/users/jorgeallyson/orgs", "repos_url": "https://api.github.com/users/jorgeallyson/repos", "events_url": "https://api.github.com/users/jorgeallyson/events{/privacy}", "received_events_url": "https://api.github.com/users/jorgeallyson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984994, "node_id": "MDU6TGFiZWw3Njk4NDk5NA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-24T18:42:34Z", "updated_at": "2020-01-30T18:01:05Z", "closed_at": "2020-01-30T18:01:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying something like this:\r\nchoices=('ou=something,ou=somethingelse', 'ou=something1,ou=somethingelse1')\r\nou_completer=FuzzyWordCompleter(choices)\r\nselected_ou=prompt('Choose OU: ', completer=ou_completer, validator=OUValidator(), validate_while_typing=False)\r\nEverything is working until I type the '=', then the completer simply stop showing the options. This is unexpected unless the '=' has some undocumented special meaning in this situation.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1054", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1054/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1054/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1054/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1054", "id": 550343545, "node_id": "MDU6SXNzdWU1NTAzNDM1NDU=", "number": 1054, "title": "jjjjjjtnibidpedcbjhg.xggkughbexeeextd.tinbkt", "user": {"login": "jonathanslenders", "id": 216638, "node_id": "MDQ6VXNlcjIxNjYzOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/216638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathanslenders", "html_url": "https://github.com/jonathanslenders", "followers_url": "https://api.github.com/users/jonathanslenders/followers", "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}", "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions", "organizations_url": "https://api.github.com/users/jonathanslenders/orgs", "repos_url": "https://api.github.com/users/jonathanslenders/repos", "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathanslenders/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-15T18:02:51Z", "updated_at": "2020-01-15T19:43:30Z", "closed_at": "2020-01-15T19:43:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1053", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1053/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1053/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1053/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1053", "id": 549690864, "node_id": "MDU6SXNzdWU1NDk2OTA4NjQ=", "number": 1053, "title": "Can't register key bindings from a dictionary?", "user": {"login": "Sann0", "id": 34208612, "node_id": "MDQ6VXNlcjM0MjA4NjEy", "avatar_url": "https://avatars1.githubusercontent.com/u/34208612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sann0", "html_url": "https://github.com/Sann0", "followers_url": "https://api.github.com/users/Sann0/followers", "following_url": "https://api.github.com/users/Sann0/following{/other_user}", "gists_url": "https://api.github.com/users/Sann0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sann0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sann0/subscriptions", "organizations_url": "https://api.github.com/users/Sann0/orgs", "repos_url": "https://api.github.com/users/Sann0/repos", "events_url": "https://api.github.com/users/Sann0/events{/privacy}", "received_events_url": "https://api.github.com/users/Sann0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-14T16:47:35Z", "updated_at": "2020-01-14T21:22:56Z", "closed_at": "2020-01-14T21:22:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was trying to register key bindings from a config file which gets converted into a dictionary. For any reason the registered values will be every time the same. \r\n\r\nI was able to reproduce the issue with:\r\n```python\r\nfrom prompt_toolkit import prompt\r\nfrom prompt_toolkit.key_binding import KeyBindings\r\n\r\nkeys = {\r\n    'f12': 'foo',\r\n    'c-left': 'bar',\r\n    'f2': 'Hello'\r\n}\r\n\r\nkey_bindings = KeyBindings()\r\n[print(f'Registering key `{k}` to `{v}`') for k, v in keys.items()]\r\n[key_bindings.add(k)(lambda event: event.app.current_buffer.insert_text(v)) for k, v in keys.items()]\r\n\"\"\"\r\nSame for:\r\nfor k, v in keys.items():\r\n    @key_bindings.add(k)\r\n    def _(event):\r\n        event.app.current_buffer.insert_text(v)\r\n\"\"\"\r\n\r\nwhile True:\r\n    prompt('> ', key_bindings=key_bindings)\r\n```\r\nThe inserted text will be `Hello` on every key. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1048", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1048/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1048/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1048/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1048", "id": 546620936, "node_id": "MDU6SXNzdWU1NDY2MjA5MzY=", "number": 1048, "title": "[PT 3.0.2] TypeError: Object of type bytes is not JSON serializable", "user": {"login": "Brittank88", "id": 24266948, "node_id": "MDQ6VXNlcjI0MjY2OTQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/24266948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Brittank88", "html_url": "https://github.com/Brittank88", "followers_url": "https://api.github.com/users/Brittank88/followers", "following_url": "https://api.github.com/users/Brittank88/following{/other_user}", "gists_url": "https://api.github.com/users/Brittank88/gists{/gist_id}", "starred_url": "https://api.github.com/users/Brittank88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Brittank88/subscriptions", "organizations_url": "https://api.github.com/users/Brittank88/orgs", "repos_url": "https://api.github.com/users/Brittank88/repos", "events_url": "https://api.github.com/users/Brittank88/events{/privacy}", "received_events_url": "https://api.github.com/users/Brittank88/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-08T03:15:55Z", "updated_at": "2020-01-10T12:46:39Z", "closed_at": "2020-01-10T12:46:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any use (yes, even if there's no formatting whatsoever) of the `print_formatted_text()` function causes [the following error](https://hatebin.com/hcqbjdazrt).\r\n\r\nWeirdly enough, it actually does still print the text with the right colouring (only when using ANSI colours though, HTML colours don't work...):\r\n![image](https://user-images.githubusercontent.com/24266948/71947457-0d7fa480-3221-11ea-9f37-b754934aab65.png)\r\n\r\nI wonder if this is to do with running my code from within Visual Studio Code, as no error occurs when using a Python terminal or a standard terminal to run a python file with this code. I have no idea why this would be though.\r\n\r\nLet me know if you need any more information or want me to do any testing!\r\n\r\nP.S. I have tried this same code with PT 2.0.10 and **it works perfectly fine with no issues**. Likely something in the 3.x versions of PT has broken this functionality somehow.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1041", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1041/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1041/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1041/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1041", "id": 541850085, "node_id": "MDU6SXNzdWU1NDE4NTAwODU=", "number": 1041, "title": "Auto-generated API docs aren't displaying", "user": {"login": "farisachugthai", "id": 20028782, "node_id": "MDQ6VXNlcjIwMDI4Nzgy", "avatar_url": "https://avatars3.githubusercontent.com/u/20028782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farisachugthai", "html_url": "https://github.com/farisachugthai", "followers_url": "https://api.github.com/users/farisachugthai/followers", "following_url": "https://api.github.com/users/farisachugthai/following{/other_user}", "gists_url": "https://api.github.com/users/farisachugthai/gists{/gist_id}", "starred_url": "https://api.github.com/users/farisachugthai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farisachugthai/subscriptions", "organizations_url": "https://api.github.com/users/farisachugthai/orgs", "repos_url": "https://api.github.com/users/farisachugthai/repos", "events_url": "https://api.github.com/users/farisachugthai/events{/privacy}", "received_events_url": "https://api.github.com/users/farisachugthai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-23T17:55:25Z", "updated_at": "2020-01-20T21:39:49Z", "closed_at": "2020-01-20T21:39:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://python-prompt-toolkit.readthedocs.io/en/master/pages/reference.html\r\n\r\nMight need to rebuild the docs.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1031", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1031/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1031/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1031/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1031", "id": 538044325, "node_id": "MDU6SXNzdWU1MzgwNDQzMjU=", "number": 1031, "title": "to exit external editor without saving is considered successful edit", "user": {"login": "pasenor", "id": 11982173, "node_id": "MDQ6VXNlcjExOTgyMTcz", "avatar_url": "https://avatars0.githubusercontent.com/u/11982173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pasenor", "html_url": "https://github.com/pasenor", "followers_url": "https://api.github.com/users/pasenor/followers", "following_url": "https://api.github.com/users/pasenor/following{/other_user}", "gists_url": "https://api.github.com/users/pasenor/gists{/gist_id}", "starred_url": "https://api.github.com/users/pasenor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pasenor/subscriptions", "organizations_url": "https://api.github.com/users/pasenor/orgs", "repos_url": "https://api.github.com/users/pasenor/repos", "events_url": "https://api.github.com/users/pasenor/events{/privacy}", "received_events_url": "https://api.github.com/users/pasenor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-15T12:28:11Z", "updated_at": "2019-12-18T08:38:06Z", "closed_at": "2019-12-18T08:38:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "After I invoke external editor with the default `edit-and-execute-command` handler, there is no way to cancel the edit: it is always considered successful, and the resulting query is always invoked. It would be more intuitive to only consider an editing session successful when the user explicitly saves changes on exit, and to simply return control if they are discarded.\r\n\r\nIt would also save some cycles, since the document doesn't need to always be re-read.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1030", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1030/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1030/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1030/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1030", "id": 537904987, "node_id": "MDU6SXNzdWU1Mzc5MDQ5ODc=", "number": 1030, "title": "Input is not to a terminal (fd=0) error (within git hook)", "user": {"login": "menaveenshankar", "id": 15365471, "node_id": "MDQ6VXNlcjE1MzY1NDcx", "avatar_url": "https://avatars3.githubusercontent.com/u/15365471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/menaveenshankar", "html_url": "https://github.com/menaveenshankar", "followers_url": "https://api.github.com/users/menaveenshankar/followers", "following_url": "https://api.github.com/users/menaveenshankar/following{/other_user}", "gists_url": "https://api.github.com/users/menaveenshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/menaveenshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/menaveenshankar/subscriptions", "organizations_url": "https://api.github.com/users/menaveenshankar/orgs", "repos_url": "https://api.github.com/users/menaveenshankar/repos", "events_url": "https://api.github.com/users/menaveenshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/menaveenshankar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-14T11:59:22Z", "updated_at": "2019-12-19T07:37:48Z", "closed_at": "2019-12-19T07:37:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n  I am trying to use prompt_toolkit within a git hook (prepare-commit-msg). I get this  warning - **Input is not to a terminal (fd=0)** I would appreciate any pointers on how to solve this.\r\n\r\nI am using python 3.7.5. ```prompt_toolkit.__version__ = '2.0.10' ```\r\n\r\nscreenshot of the errors that follow -\r\n<img width=\"1220\" alt=\"prompt_toolkit_fail_githook\" src=\"https://user-images.githubusercontent.com/15365471/70848413-146ffd00-1e97-11ea-9f9d-68ab101c22ad.png\">\r\n \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1019", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1019/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1019/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1019/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1019", "id": 531643821, "node_id": "MDU6SXNzdWU1MzE2NDM4MjE=", "number": 1019, "title": "Printing a string that has \"&\" in it using with print_formatted_text won't work", "user": {"login": "evertonstz", "id": 1169768, "node_id": "MDQ6VXNlcjExNjk3Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1169768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evertonstz", "html_url": "https://github.com/evertonstz", "followers_url": "https://api.github.com/users/evertonstz/followers", "following_url": "https://api.github.com/users/evertonstz/following{/other_user}", "gists_url": "https://api.github.com/users/evertonstz/gists{/gist_id}", "starred_url": "https://api.github.com/users/evertonstz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evertonstz/subscriptions", "organizations_url": "https://api.github.com/users/evertonstz/orgs", "repos_url": "https://api.github.com/users/evertonstz/repos", "events_url": "https://api.github.com/users/evertonstz/events{/privacy}", "received_events_url": "https://api.github.com/users/evertonstz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-03T01:14:27Z", "updated_at": "2019-12-05T22:09:03Z", "closed_at": "2019-12-05T22:09:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "```python\r\nfrom prompt_toolkit.validation import Validator, ValidationError\r\nfrom prompt_toolkit import prompt, HTML, print_formatted_text as printft`\r\n\r\nname = \"everton & everton\"\r\nprintft(HTML(f\"<green>[DOWNLOAD] {name}</green>\"))\r\n```\r\n\r\nWill raise the following error:\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3.7/site-packages/prompt_toolkit/formatted_text/html.py\", line 33, in __init__\r\n    document = minidom.parseString('<html-root>%s</html-root>' % (value, ))\r\n  File \"/usr/lib64/python3.7/xml/dom/minidom.py\", line 1968, in parseString\r\n    return expatbuilder.parseString(string)\r\n  File \"/usr/lib64/python3.7/xml/dom/expatbuilder.py\", line 925, in parseString\r\n    return builder.parseString(string)\r\n  File \"/usr/lib64/python3.7/xml/dom/expatbuilder.py\", line 223, in parseString\r\n    parser.Parse(string, True)\r\nxml.parsers.expat.ExpatError: not well-formed (invalid token): line 1, column 39\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1016", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1016/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1016/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1016/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1016", "id": 530660409, "node_id": "MDU6SXNzdWU1MzA2NjA0MDk=", "number": 1016, "title": "Allowing arbitrary updates to the progress bar", "user": {"login": "ivannp", "id": 1331156, "node_id": "MDQ6VXNlcjEzMzExNTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1331156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivannp", "html_url": "https://github.com/ivannp", "followers_url": "https://api.github.com/users/ivannp/followers", "following_url": "https://api.github.com/users/ivannp/following{/other_user}", "gists_url": "https://api.github.com/users/ivannp/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivannp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivannp/subscriptions", "organizations_url": "https://api.github.com/users/ivannp/orgs", "repos_url": "https://api.github.com/users/ivannp/repos", "events_url": "https://api.github.com/users/ivannp/events{/privacy}", "received_events_url": "https://api.github.com/users/ivannp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-01T02:51:22Z", "updated_at": "2019-12-16T16:48:43Z", "closed_at": "2019-12-16T16:48:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Really happy to see the progress bar support!\r\n\r\nAllowing updates on the progress bar via _item_updated_ is a good addition, but I would prefer to have an _update_ function which takes an arbitrary value (less than the total).\r\n\r\nThis is useful in a scenario where files are processed: the total is best set as the total sum of bytes over all files. The value is updated after each file, adding the processed bytes.\r\n\r\nWhat do you think?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1015", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1015/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1015/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1015/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1015", "id": 530660130, "node_id": "MDU6SXNzdWU1MzA2NjAxMzA=", "number": 1015, "title": "The parser complains for strings ending with '\\'", "user": {"login": "ivannp", "id": 1331156, "node_id": "MDQ6VXNlcjEzMzExNTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1331156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivannp", "html_url": "https://github.com/ivannp", "followers_url": "https://api.github.com/users/ivannp/followers", "following_url": "https://api.github.com/users/ivannp/following{/other_user}", "gists_url": "https://api.github.com/users/ivannp/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivannp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivannp/subscriptions", "organizations_url": "https://api.github.com/users/ivannp/orgs", "repos_url": "https://api.github.com/users/ivannp/repos", "events_url": "https://api.github.com/users/ivannp/events{/privacy}", "received_events_url": "https://api.github.com/users/ivannp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-01T02:47:43Z", "updated_at": "2019-12-01T03:18:24Z", "closed_at": "2019-12-01T03:18:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to enable strings ending with '\\'? I discovered this while trying to run commands using Windows paths, like:\r\n    pull /home/documents j:\\documents\\\r\n\r\nThe last backslash causes an exception. Even the first backslash renders a string like:\r\n    pull /home/documents j:\\documents\r\n\r\nTo _j:documents_. No exception, still wrong.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1013", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1013/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1013/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1013/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1013", "id": 530621969, "node_id": "MDU6SXNzdWU1MzA2MjE5Njk=", "number": 1013, "title": "Small typo in prompt_toolkit/styles/base.py", "user": {"login": "timgates42", "id": 47873678, "node_id": "MDQ6VXNlcjQ3ODczNjc4", "avatar_url": "https://avatars1.githubusercontent.com/u/47873678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timgates42", "html_url": "https://github.com/timgates42", "followers_url": "https://api.github.com/users/timgates42/followers", "following_url": "https://api.github.com/users/timgates42/following{/other_user}", "gists_url": "https://api.github.com/users/timgates42/gists{/gist_id}", "starred_url": "https://api.github.com/users/timgates42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timgates42/subscriptions", "organizations_url": "https://api.github.com/users/timgates42/orgs", "repos_url": "https://api.github.com/users/timgates42/repos", "events_url": "https://api.github.com/users/timgates42/events{/privacy}", "received_events_url": "https://api.github.com/users/timgates42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-30T19:44:47Z", "updated_at": "2019-11-30T20:29:30Z", "closed_at": "2019-11-30T20:29:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Should read unconventional rather than unconvential.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1008", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1008/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1008/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1008/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1008", "id": 528989289, "node_id": "MDU6SXNzdWU1Mjg5ODkyODk=", "number": 1008, "title": "Fix mypy: \"Module has no attribute ...\" errors", "user": {"login": "jonathanslenders", "id": 216638, "node_id": "MDQ6VXNlcjIxNjYzOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/216638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathanslenders", "html_url": "https://github.com/jonathanslenders", "followers_url": "https://api.github.com/users/jonathanslenders/followers", "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}", "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions", "organizations_url": "https://api.github.com/users/jonathanslenders/orgs", "repos_url": "https://api.github.com/users/jonathanslenders/repos", "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathanslenders/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-26T21:46:14Z", "updated_at": "2019-11-27T22:28:38Z", "closed_at": "2019-11-27T22:28:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When running mypy, we are still getting the following errors below.\r\nIf anyone knows how to fix this, let me know. I really don't know why mypy thinks these attributes don't exist...\r\n\r\n```\r\n $ mypy prompt_toolkit\r\nprompt_toolkit/layout/utils.py:50: error: Argument 1 to \"explode_text_fragments\" has incompatible type \"Union[_T, Iterable[_T]]\"; expected \"Iterable[_T]\"\r\nprompt_toolkit/application/current.py:11: error: Module 'prompt_toolkit.application.application' has no attribute 'Application'\r\nprompt_toolkit/application/dummy.py:6: error: Module 'prompt_toolkit.application.application' has no attribute 'Application'\r\nprompt_toolkit/application/__init__.py:1: error: Module 'prompt_toolkit.application.application' has no attribute 'Application'\r\nprompt_toolkit/completion/nested.py:14: error: Cannot resolve name \"NestedDict\" (possible cyclic definition)\r\nprompt_toolkit/buffer.py:1404: error: Incompatible types in assignment (expression has type \"Optional[str]\", variable has type \"str\")\r\nprompt_toolkit/layout/__init__.py:91: error: Module 'prompt_toolkit.layout.menus' has no attribute 'CompletionsMenu'\r\nprompt_toolkit/layout/__init__.py:91: error: Module 'prompt_toolkit.layout.menus' has no attribute 'MultiColumnCompletionsMenu'\r\nprompt_toolkit/shortcuts/progress_bar/formatters.py:22: error: Module 'prompt_toolkit.shortcuts.progress_bar.base' has no attribute 'ProgressBar'\r\nprompt_toolkit/shortcuts/progress_bar/formatters.py:22: error: Module 'prompt_toolkit.shortcuts.progress_bar.base' has no attribute 'ProgressBarCounter'\r\nprompt_toolkit/key_binding/bindings/named_commands.py:17: error: Module 'prompt_toolkit.key_binding.bindings.completion' has no attribute 'display_completions_like_readline'\r\nprompt_toolkit/key_binding/bindings/named_commands.py:17: error: Module 'prompt_toolkit.key_binding.bindings.completion' has no attribute 'generate_completions'\r\nprompt_toolkit/widgets/dialogs.py:22: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Box'\r\nprompt_toolkit/widgets/dialogs.py:22: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Button'\r\nprompt_toolkit/widgets/dialogs.py:22: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Frame'\r\nprompt_toolkit/widgets/dialogs.py:22: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Shadow'\r\nprompt_toolkit/shortcuts/progress_bar/__init__.py:1: error: Module 'prompt_toolkit.shortcuts.progress_bar.base' has no attribute 'ProgressBar'\r\nprompt_toolkit/key_binding/defaults.py:8: error: Module 'prompt_toolkit.key_binding.bindings.basic' has no attribute 'load_basic_bindings'\r\nprompt_toolkit/key_binding/defaults.py:10: error: Module 'prompt_toolkit.key_binding.bindings.emacs' has no attribute 'load_emacs_bindings'\r\nprompt_toolkit/key_binding/defaults.py:10: error: Module 'prompt_toolkit.key_binding.bindings.emacs' has no attribute 'load_emacs_search_bindings'\r\nprompt_toolkit/key_binding/defaults.py:10: error: Module 'prompt_toolkit.key_binding.bindings.emacs' has no attribute 'load_emacs_shift_selection_bindings'\r\nprompt_toolkit/key_binding/defaults.py:15: error: Module 'prompt_toolkit.key_binding.bindings.mouse' has no attribute 'load_mouse_bindings'\r\nprompt_toolkit/key_binding/defaults.py:16: error: Module 'prompt_toolkit.key_binding.bindings.vi' has no attribute 'load_vi_bindings'\r\nprompt_toolkit/key_binding/defaults.py:16: error: Module 'prompt_toolkit.key_binding.bindings.vi' has no attribute 'load_vi_search_bindings'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Box'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Button'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Checkbox'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'CheckboxList'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Frame'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'HorizontalLine'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Label'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'ProgressBar'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'RadioList'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'Shadow'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'TextArea'\r\nprompt_toolkit/widgets/__init__.py:9: error: Module 'prompt_toolkit.widgets.base' has no attribute 'VerticalLine'\r\nprompt_toolkit/widgets/__init__.py:24: error: Module 'prompt_toolkit.widgets.menus' has no attribute 'MenuContainer'\r\nprompt_toolkit/widgets/__init__.py:24: error: Module 'prompt_toolkit.widgets.menus' has no attribute 'MenuItem'\r\nprompt_toolkit/widgets/__init__.py:25: error: Module 'prompt_toolkit.widgets.toolbars' has no attribute 'ArgToolbar'\r\nprompt_toolkit/widgets/__init__.py:25: error: Module 'prompt_toolkit.widgets.toolbars' has no attribute 'CompletionsToolbar'\r\nprompt_toolkit/widgets/__init__.py:25: error: Module 'prompt_toolkit.widgets.toolbars' has no attribute 'FormattedTextToolbar'\r\nprompt_toolkit/widgets/__init__.py:25: error: Module 'prompt_toolkit.widgets.toolbars' has no attribute 'SearchToolbar'\r\nprompt_toolkit/widgets/__init__.py:25: error: Module 'prompt_toolkit.widgets.toolbars' has no attribute 'SystemToolbar'\r\nprompt_toolkit/widgets/__init__.py:25: error: Module 'prompt_toolkit.widgets.toolbars' has no attribute 'ValidationToolbar'\r\nprompt_toolkit/shortcuts/__init__.py:11: error: Module 'prompt_toolkit.shortcuts.prompt' has no attribute 'CompleteStyle'\r\nprompt_toolkit/shortcuts/__init__.py:11: error: Module 'prompt_toolkit.shortcuts.prompt' has no attribute 'PromptSession'\r\nprompt_toolkit/shortcuts/__init__.py:11: error: Module 'prompt_toolkit.shortcuts.prompt' has no attribute 'confirm'\r\nprompt_toolkit/shortcuts/__init__.py:11: error: Module 'prompt_toolkit.shortcuts.prompt' has no attribute 'create_confirm_session'\r\nprompt_toolkit/shortcuts/__init__.py:11: error: Module 'prompt_toolkit.shortcuts.prompt' has no attribute 'prompt'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1004", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1004/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1004/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1004/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1004", "id": 527709594, "node_id": "MDU6SXNzdWU1Mjc3MDk1OTQ=", "number": 1004, "title": "Use asyncio.run() in Application.run()", "user": {"login": "jonathanslenders", "id": 216638, "node_id": "MDQ6VXNlcjIxNjYzOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/216638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathanslenders", "html_url": "https://github.com/jonathanslenders", "followers_url": "https://api.github.com/users/jonathanslenders/followers", "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}", "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions", "organizations_url": "https://api.github.com/users/jonathanslenders/orgs", "repos_url": "https://api.github.com/users/jonathanslenders/repos", "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathanslenders/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-24T14:54:12Z", "updated_at": "2019-11-26T20:24:43Z", "closed_at": "2019-11-26T20:24:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Doing this will also reveal a bug in the loading of the history.\r\nThe history is loaded before the application starts, which means it doesn't work if we do this change. This results in the following bug:\r\n\r\n```\r\ntask: <Task pending coro=<History._start_loading() running at /home/jonathan/git/python-prompt-toolkit/prompt_toolkit/history.py:40> cb=[History.start_loading.\r\n<locals>.cb() at /home/jonathan/git/python-prompt-toolkit/prompt_toolkit/history.py:72]>\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1000", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1000/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1000/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1000/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1000", "id": 521066803, "node_id": "MDU6SXNzdWU1MjEwNjY4MDM=", "number": 1000, "title": "Issue with open_in_editor", "user": {"login": "njalerikson", "id": 4546435, "node_id": "MDQ6VXNlcjQ1NDY0MzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4546435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njalerikson", "html_url": "https://github.com/njalerikson", "followers_url": "https://api.github.com/users/njalerikson/followers", "following_url": "https://api.github.com/users/njalerikson/following{/other_user}", "gists_url": "https://api.github.com/users/njalerikson/gists{/gist_id}", "starred_url": "https://api.github.com/users/njalerikson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njalerikson/subscriptions", "organizations_url": "https://api.github.com/users/njalerikson/orgs", "repos_url": "https://api.github.com/users/njalerikson/repos", "events_url": "https://api.github.com/users/njalerikson/events{/privacy}", "received_events_url": "https://api.github.com/users/njalerikson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-11T16:39:34Z", "updated_at": "2019-12-05T18:00:59Z", "closed_at": "2019-12-05T18:00:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Seems like #851 didn't properly address tempfile/tempfile_suffix being dynamic/lambda.\r\n\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/c8f5b5cd6048935c64ba451443af7962ad5d9cc2/prompt_toolkit/buffer.py#L1407-L1430\r\n\r\nCurrently, it's always ending up in the first clause since PromptSession passes the values as `lambda: self.tempfile`.\r\n\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/c8f5b5cd6048935c64ba451443af7962ad5d9cc2/prompt_toolkit/shortcuts/prompt.py#L467-L487", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/997", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/997/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/997/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/997/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/997", "id": 520492567, "node_id": "MDU6SXNzdWU1MjA0OTI1Njc=", "number": 997, "title": "Bug with FuzzyWordCompleter", "user": {"login": "nebbles", "id": 12599555, "node_id": "MDQ6VXNlcjEyNTk5NTU1", "avatar_url": "https://avatars2.githubusercontent.com/u/12599555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nebbles", "html_url": "https://github.com/nebbles", "followers_url": "https://api.github.com/users/nebbles/followers", "following_url": "https://api.github.com/users/nebbles/following{/other_user}", "gists_url": "https://api.github.com/users/nebbles/gists{/gist_id}", "starred_url": "https://api.github.com/users/nebbles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nebbles/subscriptions", "organizations_url": "https://api.github.com/users/nebbles/orgs", "repos_url": "https://api.github.com/users/nebbles/repos", "events_url": "https://api.github.com/users/nebbles/events{/privacy}", "received_events_url": "https://api.github.com/users/nebbles/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-09T18:08:51Z", "updated_at": "2019-11-10T20:03:23Z", "closed_at": "2019-11-10T20:03:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems the `FuzzyWordCompleter` forgot to pass the `meta_dict` information to the `WordCompleter` when it instantiated it.\r\n\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/394a618a66db2c13b2ddc9d32891795e1add6505/prompt_toolkit/completion/fuzzy_completer.py#L153-L166\r\n\r\nI made a copy of the `FuzzyWordCompleter` and added it around line 161; now applies meta information as expected\r\n```python\r\nself.word_completer = WordCompleter(\r\n    words=lambda: self.words, WORD=self.WORD, meta_dict=self.meta_dict\r\n)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/988", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/988/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/988/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/988/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/988", "id": 511449387, "node_id": "MDU6SXNzdWU1MTE0NDkzODc=", "number": 988, "title": "Maybe some bug in FuzzyCompleter", "user": {"login": "kingice", "id": 4256391, "node_id": "MDQ6VXNlcjQyNTYzOTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4256391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingice", "html_url": "https://github.com/kingice", "followers_url": "https://api.github.com/users/kingice/followers", "following_url": "https://api.github.com/users/kingice/following{/other_user}", "gists_url": "https://api.github.com/users/kingice/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingice/subscriptions", "organizations_url": "https://api.github.com/users/kingice/orgs", "repos_url": "https://api.github.com/users/kingice/repos", "events_url": "https://api.github.com/users/kingice/events{/privacy}", "received_events_url": "https://api.github.com/users/kingice/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-23T16:49:41Z", "updated_at": "2019-11-13T07:49:02Z", "closed_at": "2019-11-12T12:54:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I run the example fuzzy_custom_completer.py,Then  modifed it to verify an idea, but it didn't work.\r\nThe code is bellow:\r\n#!/usr/bin/env python\r\n\"\"\"\r\nDemonstration of a custom completer wrapped in a `FuzzyCompleter` for fuzzy\r\nmatching.\r\n\"\"\"\r\nfrom prompt_toolkit.completion import Completer, Completion, FuzzyCompleter\r\nfrom prompt_toolkit.output.color_depth import ColorDepth\r\nfrom prompt_toolkit.shortcuts import CompleteStyle, prompt\r\n\r\ncolors = ['red', 'blue', 'green', 'orange', 'purple', 'yellow', 'cyan',\r\n          'magenta', 'pink']\r\n\r\n\r\nclass ColorCompleter(Completer):\r\n    def get_completions(self, document, complete_event):\r\n        word = document.get_word_before_cursor()\r\n        for color in colors:\r\n            if color.startswith(word):\r\n                yield Completion(\r\n                    color,\r\n                    display = color+\"test\",\r\n                    display_meta = \"w\",\r\n                    start_position=-len(word),\r\n                    style='fg:' + color,\r\n                    selected_style='fg:white bg:' + color)\r\n\r\n\r\ndef main():\r\n    # Simple completion menu.\r\n    print('(The completion menu displays colors.)')\r\n    prompt('Type a color: ', completer=FuzzyCompleter(ColorCompleter()))\r\n\r\n    # Multi-column menu.\r\n    prompt('Type a color: ', completer=FuzzyCompleter(ColorCompleter()),\r\n           complete_style=CompleteStyle.MULTI_COLUMN)\r\n\r\n    # Readline-like\r\n    prompt('Type a color: ', completer=FuzzyCompleter(ColorCompleter()),\r\n           complete_style=CompleteStyle.READLINE_LIKE)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n\r\n\r\nThe parameter \"display\" in  Completion is not work.It didn't  show the \"test\" suffix. The screen shot like:\r\n![1571849365805](https://user-images.githubusercontent.com/4256391/67415744-27352680-f5f8-11e9-9d16-66a9ce460719.jpg)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/986", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/986/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/986/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/986/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/986", "id": 509567630, "node_id": "MDU6SXNzdWU1MDk1Njc2MzA=", "number": 986, "title": "Something wrong in jupyter", "user": {"login": "kingice", "id": 4256391, "node_id": "MDQ6VXNlcjQyNTYzOTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4256391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingice", "html_url": "https://github.com/kingice", "followers_url": "https://api.github.com/users/kingice/followers", "following_url": "https://api.github.com/users/kingice/following{/other_user}", "gists_url": "https://api.github.com/users/kingice/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingice/subscriptions", "organizations_url": "https://api.github.com/users/kingice/orgs", "repos_url": "https://api.github.com/users/kingice/repos", "events_url": "https://api.github.com/users/kingice/events{/privacy}", "received_events_url": "https://api.github.com/users/kingice/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-20T09:11:38Z", "updated_at": "2019-10-20T15:32:29Z", "closed_at": "2019-10-20T15:32:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "When use the prompt in jupyter , there is an error . It couldn't redirect input  to the Jupyter Input?\r\nAfter reading the doc, I can't find the solution. Thanks for help!\r\n<img width=\"936\" alt=\"WechatIMG874\" src=\"https://user-images.githubusercontent.com/4256391/67157270-8d058200-f35c-11e9-8e89-053b7e3c59d3.png\">\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/981", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/981/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/981/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/981/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/981", "id": 504646399, "node_id": "MDU6SXNzdWU1MDQ2NDYzOTk=", "number": 981, "title": "List Boxes with highlighted selections", "user": {"login": "clarity20", "id": 5527273, "node_id": "MDQ6VXNlcjU1MjcyNzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5527273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clarity20", "html_url": "https://github.com/clarity20", "followers_url": "https://api.github.com/users/clarity20/followers", "following_url": "https://api.github.com/users/clarity20/following{/other_user}", "gists_url": "https://api.github.com/users/clarity20/gists{/gist_id}", "starred_url": "https://api.github.com/users/clarity20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clarity20/subscriptions", "organizations_url": "https://api.github.com/users/clarity20/orgs", "repos_url": "https://api.github.com/users/clarity20/repos", "events_url": "https://api.github.com/users/clarity20/events{/privacy}", "received_events_url": "https://api.github.com/users/clarity20/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-09T13:17:03Z", "updated_at": "2019-10-12T05:22:18Z", "closed_at": "2019-10-12T05:22:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello!\r\n\r\nI am working on a List Box dialog, which I'm implementing as a read-only TextArea for which I track the cursor line. The one issue that I've not been able to solve is getting the selected line to highlight, and getting the highlight to follow the cursor as the user scrolls through the options. \r\n\r\nIt looks like I cannot use formatting or stylized text in order to highlight, because the constructors for both the buffer and the underlying document require that the text be flat:\r\n```\r\nassert isinstance(text, six.text_type)\r\n```\r\nOn the other hand, since the TextArea is read-only, I get an exception when I try to dynamically update the SelectionState of the underlying document.\r\n\r\nDoes the prompt-toolkit have a straightforward path for dynamically highlighting the selected line? Would a new widget class with more advanced formatted-text capabilities work better than trying to accomplish this through TextArea?\r\n\r\nThank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/980", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/980/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/980/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/980/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/980", "id": 502164867, "node_id": "MDU6SXNzdWU1MDIxNjQ4Njc=", "number": 980, "title": "Recent release `1.0.17` breaks ipython", "user": {"login": "sphuber", "id": 6992332, "node_id": "MDQ6VXNlcjY5OTIzMzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/6992332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sphuber", "html_url": "https://github.com/sphuber", "followers_url": "https://api.github.com/users/sphuber/followers", "following_url": "https://api.github.com/users/sphuber/following{/other_user}", "gists_url": "https://api.github.com/users/sphuber/gists{/gist_id}", "starred_url": "https://api.github.com/users/sphuber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sphuber/subscriptions", "organizations_url": "https://api.github.com/users/sphuber/orgs", "repos_url": "https://api.github.com/users/sphuber/repos", "events_url": "https://api.github.com/users/sphuber/events{/privacy}", "received_events_url": "https://api.github.com/users/sphuber/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-10-03T16:19:16Z", "updated_at": "2019-10-10T05:34:46Z", "closed_at": "2019-10-10T05:34:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running `ipython==5.8.0` on Ubuntu and with the recent release `1.0.17` breaks it:\r\n```\r\n$ ipython\r\nTraceback (most recent call last):\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/bin/ipython\", line 6, in <module>\r\n    from IPython import start_ipython\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/IPython/__init__.py\", line 49, in <module>\r\n    from .terminal.embed import embed\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/IPython/terminal/embed.py\", line 18, in <module>\r\n    from IPython.terminal.interactiveshell import TerminalInteractiveShell\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/IPython/terminal/interactiveshell.py\", line 16, in <module>\r\n    from prompt_toolkit.document import Document\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/__init__.py\", line 16, in <module>\r\n    from .interface import CommandLineInterface\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/interface.py\", line 19, in <module>\r\n    from .application import Application, AbortAction\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/application/__init__.py\", line 3, in <module>\r\n    from .application import Application\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/application/application.py\", line 13, in <module>\r\n    from prompt_toolkit.buffer import Buffer\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/buffer.py\", line 9, in <module>\r\n    from .completion import Completer, Completion, CompleteEvent\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/completion/__init__.py\", line 3, in <module>\r\n    from .base import (\r\n  File \"/home/sphuber/.virtualenvs/aiida_dev/local/lib/python2.7/site-packages/prompt_toolkit/completion/base.py\", line 9, in <module>\r\n    from prompt_toolkit.eventloop import (\r\nImportError: cannot import name AsyncGeneratorItem\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/972", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/972/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/972/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/972/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/972", "id": 498996267, "node_id": "MDU6SXNzdWU0OTg5OTYyNjc=", "number": 972, "title": "session.prompt empty string", "user": {"login": "brusand", "id": 1648561, "node_id": "MDQ6VXNlcjE2NDg1NjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1648561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brusand", "html_url": "https://github.com/brusand", "followers_url": "https://api.github.com/users/brusand/followers", "following_url": "https://api.github.com/users/brusand/following{/other_user}", "gists_url": "https://api.github.com/users/brusand/gists{/gist_id}", "starred_url": "https://api.github.com/users/brusand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brusand/subscriptions", "organizations_url": "https://api.github.com/users/brusand/orgs", "repos_url": "https://api.github.com/users/brusand/repos", "events_url": "https://api.github.com/users/brusand/events{/privacy}", "received_events_url": "https://api.github.com/users/brusand/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-26T16:38:46Z", "updated_at": "2019-09-26T17:08:06Z", "closed_at": "2019-09-26T17:07:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "why when you loop, the second time, session.prompt return empty string ?\r\n\r\nYou said: \"nnn\"\r\nYou said: \"\"\r\nSay something:  \r\n\r\nwith this code :\r\n    our_history = FileHistory('.example-history-file')\r\n\r\n    # Create Prompt.\r\n    session = PromptSession('Say something: ', history=our_history)\r\n\r\n    # Run echo loop. Read text from stdin, and reply it back.\r\n    while True:\r\n        try:\r\n            result = session.prompt(default='')\r\n            print('You said: \"{0}\"'.format(result))\r\n        except (EOFError, KeyboardInterrupt):\r\n            return", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/969", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/969/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/969/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/969/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/969", "id": 496916321, "node_id": "MDU6SXNzdWU0OTY5MTYzMjE=", "number": 969, "title": "AttributeError: 'StdoutProxy' object has no attribute 'isatty' on mac", "user": {"login": "brusand", "id": 1648561, "node_id": "MDQ6VXNlcjE2NDg1NjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1648561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brusand", "html_url": "https://github.com/brusand", "followers_url": "https://api.github.com/users/brusand/followers", "following_url": "https://api.github.com/users/brusand/following{/other_user}", "gists_url": "https://api.github.com/users/brusand/gists{/gist_id}", "starred_url": "https://api.github.com/users/brusand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brusand/subscriptions", "organizations_url": "https://api.github.com/users/brusand/orgs", "repos_url": "https://api.github.com/users/brusand/repos", "events_url": "https://api.github.com/users/brusand/events{/privacy}", "received_events_url": "https://api.github.com/users/brusand/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-23T06:30:04Z", "updated_at": "2019-09-26T11:02:00Z", "closed_at": "2019-09-26T11:01:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "i have this issue with all example's program with patch_stdout on mac. is there a turn around ? i need patch_stdout \r\ni git clone the current branch before running current examples\r\nthx\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/965", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/965/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/965/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/965/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/965", "id": 490802441, "node_id": "MDU6SXNzdWU0OTA4MDI0NDE=", "number": 965, "title": "Run Processor before Completer", "user": {"login": "sum-catnip", "id": 26556802, "node_id": "MDQ6VXNlcjI2NTU2ODAy", "avatar_url": "https://avatars3.githubusercontent.com/u/26556802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sum-catnip", "html_url": "https://github.com/sum-catnip", "followers_url": "https://api.github.com/users/sum-catnip/followers", "following_url": "https://api.github.com/users/sum-catnip/following{/other_user}", "gists_url": "https://api.github.com/users/sum-catnip/gists{/gist_id}", "starred_url": "https://api.github.com/users/sum-catnip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sum-catnip/subscriptions", "organizations_url": "https://api.github.com/users/sum-catnip/orgs", "repos_url": "https://api.github.com/users/sum-catnip/repos", "events_url": "https://api.github.com/users/sum-catnip/events{/privacy}", "received_events_url": "https://api.github.com/users/sum-catnip/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-08T20:28:49Z", "updated_at": "2019-09-09T18:10:55Z", "closed_at": "2019-09-09T18:10:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, is there any way I can get my custom input processor to always execute before the completer? My completer relies on an action that happens inside the processor so the processor needs to already have been executed for the current input.\r\n\r\nHave a nice day \ud83d\udc4c", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/963", "id": 489894208, "node_id": "MDU6SXNzdWU0ODk4OTQyMDg=", "number": 963, "title": "completer parameter is not overriden in PromptSession.prompt()", "user": {"login": "misko321", "id": 7603973, "node_id": "MDQ6VXNlcjc2MDM5NzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7603973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/misko321", "html_url": "https://github.com/misko321", "followers_url": "https://api.github.com/users/misko321/followers", "following_url": "https://api.github.com/users/misko321/following{/other_user}", "gists_url": "https://api.github.com/users/misko321/gists{/gist_id}", "starred_url": "https://api.github.com/users/misko321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/misko321/subscriptions", "organizations_url": "https://api.github.com/users/misko321/orgs", "repos_url": "https://api.github.com/users/misko321/repos", "events_url": "https://api.github.com/users/misko321/events{/privacy}", "received_events_url": "https://api.github.com/users/misko321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-05T17:12:11Z", "updated_at": "2019-09-12T17:38:45Z", "closed_at": "2019-09-12T17:38:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to the comment in `prompt.py`, `completer` option can be overridden when a new value is passed to PromptSession.prompt() method:\r\n> \\# When any of these arguments are passed, this value is overwritten \r\n\\# in this PromptSession.\r\n\r\nHowever it seems not to be the case:\r\n```\r\ndef main():\r\n    session = PromptSession()\r\n\r\n    comp = WordCompleter(['abc', 'def'])\r\n    session.prompt(\"1> \", completer=comp, complete_while_typing=True)\r\n    session.prompt(\"2> \", completer=None)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/7603973/64363031-f1b88780-d00f-11e9-866a-2eb505b04fc5.png)\r\n\r\nThe completer is still enabled in the second prompt.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/960", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/960/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/960/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/960/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/960", "id": 484926108, "node_id": "MDU6SXNzdWU0ODQ5MjYxMDg=", "number": 960, "title": "How to pipe stdout/stderr into fullscreen application TextArea", "user": {"login": "kerol2r20", "id": 3398826, "node_id": "MDQ6VXNlcjMzOTg4MjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/3398826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kerol2r20", "html_url": "https://github.com/kerol2r20", "followers_url": "https://api.github.com/users/kerol2r20/followers", "following_url": "https://api.github.com/users/kerol2r20/following{/other_user}", "gists_url": "https://api.github.com/users/kerol2r20/gists{/gist_id}", "starred_url": "https://api.github.com/users/kerol2r20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kerol2r20/subscriptions", "organizations_url": "https://api.github.com/users/kerol2r20/orgs", "repos_url": "https://api.github.com/users/kerol2r20/repos", "events_url": "https://api.github.com/users/kerol2r20/events{/privacy}", "received_events_url": "https://api.github.com/users/kerol2r20/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-25T12:34:13Z", "updated_at": "2019-09-12T16:13:00Z", "closed_at": "2019-09-12T16:13:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\nAs title, is there any way to pipe stdout and stderr into TextArea?\r\nBecause some library was hard code with stdout, like argparse.\r\nI want to use argparse as auxiliary utils to construct a REPL.\r\nHow could I do?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/957", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/957/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/957/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/957/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/957", "id": 483897567, "node_id": "MDU6SXNzdWU0ODM4OTc1Njc=", "number": 957, "title": "How to keep the prompt at last line?", "user": {"login": "kerol2r20", "id": 3398826, "node_id": "MDQ6VXNlcjMzOTg4MjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/3398826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kerol2r20", "html_url": "https://github.com/kerol2r20", "followers_url": "https://api.github.com/users/kerol2r20/followers", "following_url": "https://api.github.com/users/kerol2r20/following{/other_user}", "gists_url": "https://api.github.com/users/kerol2r20/gists{/gist_id}", "starred_url": "https://api.github.com/users/kerol2r20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kerol2r20/subscriptions", "organizations_url": "https://api.github.com/users/kerol2r20/orgs", "repos_url": "https://api.github.com/users/kerol2r20/repos", "events_url": "https://api.github.com/users/kerol2r20/events{/privacy}", "received_events_url": "https://api.github.com/users/kerol2r20/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-22T10:09:36Z", "updated_at": "2019-08-25T11:21:43Z", "closed_at": "2019-08-25T11:21:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'am developing a multiple thread CLI app.\r\nWhen the prompt wait for user input, other thread would print log to screen. This may mess up the prompt output.\r\nI found some CLI app could keep the prompt at last line, or stick the prompt position at the screen bottom. How could I implement like that?\r\nThanks~\r\n\r\n```py\r\nfrom threading import Thread\r\nfrom prompt_toolkit import prompt\r\nimport time\r\n\r\ndef foo():\r\n    while True:\r\n        print(\"foo\")\r\n        time.sleep(1)\r\n\r\nt = Thread(target=foo)\r\nt.start()\r\n\r\ntext = prompt(\">> \")\r\nprint(f\"You input: {text}\")\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/956", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/956/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/956/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/956/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/956", "id": 482570901, "node_id": "MDU6SXNzdWU0ODI1NzA5MDE=", "number": 956, "title": "Is there a way to debug using pdb?", "user": {"login": "joaqo", "id": 14966348, "node_id": "MDQ6VXNlcjE0OTY2MzQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/14966348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joaqo", "html_url": "https://github.com/joaqo", "followers_url": "https://api.github.com/users/joaqo/followers", "following_url": "https://api.github.com/users/joaqo/following{/other_user}", "gists_url": "https://api.github.com/users/joaqo/gists{/gist_id}", "starred_url": "https://api.github.com/users/joaqo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joaqo/subscriptions", "organizations_url": "https://api.github.com/users/joaqo/orgs", "repos_url": "https://api.github.com/users/joaqo/repos", "events_url": "https://api.github.com/users/joaqo/events{/privacy}", "received_events_url": "https://api.github.com/users/joaqo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-19T23:16:47Z", "updated_at": "2019-09-11T15:18:29Z", "closed_at": "2019-09-11T15:18:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying out the progress bar scripts, in particular the simple progress bar, and I noticed it doesn't let me use `ipdb`. For example if I run\r\n\r\n```python\r\n#!/usr/bin/env python\r\n\"\"\"\r\nA very simple progress bar which keep track of the progress as we consume an\r\niterator.\r\n\"\"\"\r\nimport time\r\n\r\nfrom prompt_toolkit.shortcuts import ProgressBar\r\n\r\n\r\ndef main():\r\n    with ProgressBar() as pb:\r\n        for i in pb(range(800)):\r\n            import ipdb; ipdb.set_trace()\r\n            time.sleep(.01)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nI get the following error:\r\n\r\n```bash\r\nFuture exception was never retrieved\r\nfuture: <prompt_toolkit.eventloop.future.Future object at 0x11013ee48>\r\nTraceback (most recent call last):\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/eventloop/coroutine.py\", line 90, in step_next\r\n    new_f = coroutine.throw(exc)\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 658, in _run_async2\r\n    result = yield f\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/eventloop/coroutine.py\", line 86, in step_next\r\n    new_f = coroutine.send(None)\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/application/application.py\", line 598, in _run_async\r\n    with self.input.attach(read_from_input):\r\n  File \"/usr/local/Cellar/python/3.7.2_2/Frameworks/Python.framework/Versions/3.7/lib/python3.7/contextlib.py\", line 112, in __enter__\r\n    return next(self.gen)\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/input/vt100.py\", line 147, in _attached_input\r\n    loop.add_reader(fd, callback)\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/eventloop/posix.py\", line 272, in add_reader\r\n    self.selector.register(fd)\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/eventloop/select.py\", line 76, in register\r\n    sel.register(fd)\r\n  File \"/Users/joaqo/.virtualenvs/deleteme/lib/python3.7/site-packages/prompt_toolkit/eventloop/select.py\", line 131, in register\r\n    self._sel.register(fd, selectors.EVENT_READ, None)\r\n  File \"/usr/local/Cellar/python/3.7.2_2/Frameworks/Python.framework/Versions/3.7/lib/python3.7/selectors.py\", line 517, in register\r\n    key = super().register(fileobj, events, data)\r\n  File \"/usr/local/Cellar/python/3.7.2_2/Frameworks/Python.framework/Versions/3.7/lib/python3.7/selectors.py\", line 242, in register\r\n    .format(fileobj, key.fd))\r\nKeyError: '0 (FD 0) is already registered'\r\n```\r\n\r\nIs there a way to work with debuggers using python-prompt-toolkit?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/948", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/948/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/948/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/948/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/948", "id": 474987028, "node_id": "MDU6SXNzdWU0NzQ5ODcwMjg=", "number": 948, "title": "Documentation incomplete for FormattedTextController", "user": {"login": "arkocal", "id": 3494011, "node_id": "MDQ6VXNlcjM0OTQwMTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3494011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arkocal", "html_url": "https://github.com/arkocal", "followers_url": "https://api.github.com/users/arkocal/followers", "following_url": "https://api.github.com/users/arkocal/following{/other_user}", "gists_url": "https://api.github.com/users/arkocal/gists{/gist_id}", "starred_url": "https://api.github.com/users/arkocal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arkocal/subscriptions", "organizations_url": "https://api.github.com/users/arkocal/orgs", "repos_url": "https://api.github.com/users/arkocal/repos", "events_url": "https://api.github.com/users/arkocal/events{/privacy}", "received_events_url": "https://api.github.com/users/arkocal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-31T07:43:23Z", "updated_at": "2020-07-10T15:21:15Z", "closed_at": "2020-07-10T15:21:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "The [documentation](https://python-prompt-toolkit.readthedocs.io/en/stable/pages/reference.html?highlight=formattedtextcontrol#prompt_toolkit.layout.FormattedTextControl) currently states:\r\n\r\nControl that displays formatted text. This can be either plain text, an HTML object an ANSI object or a list of `(style_str, text)` tuples, depending on how you prefer to do the formatting. See `prompt_toolkit.layout.formatted_text` for more information.\r\n\r\nThis is misleading, as formatted text can also be function generating the text, as used in the implementation of `widgets.RadioList`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/935", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/935/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/935/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/935/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/935", "id": 464822558, "node_id": "MDU6SXNzdWU0NjQ4MjI1NTg=", "number": 935, "title": "Newbie help: Iterate through an dict to get call function with args", "user": {"login": "securisec", "id": 22226823, "node_id": "MDQ6VXNlcjIyMjI2ODIz", "avatar_url": "https://avatars2.githubusercontent.com/u/22226823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/securisec", "html_url": "https://github.com/securisec", "followers_url": "https://api.github.com/users/securisec/followers", "following_url": "https://api.github.com/users/securisec/following{/other_user}", "gists_url": "https://api.github.com/users/securisec/gists{/gist_id}", "starred_url": "https://api.github.com/users/securisec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/securisec/subscriptions", "organizations_url": "https://api.github.com/users/securisec/orgs", "repos_url": "https://api.github.com/users/securisec/repos", "events_url": "https://api.github.com/users/securisec/events{/privacy}", "received_events_url": "https://api.github.com/users/securisec/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-06T06:13:09Z", "updated_at": "2020-02-10T03:31:19Z", "closed_at": "2020-02-10T03:31:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Consider the following example:\r\n\r\n```python\r\noptions = {\r\n    'check: {\r\n        'method': 'checkMethod',\r\n        'args': ['ls'],\r\n        'color' ['red', 'green'],\r\n        'user_options': None\r\n    },\r\n    'another': {\r\n        'method': 'anotherMethod',\r\n        'args': [],\r\n        'color': ['yellow']\r\n    }\r\n}\r\n# return a dictionary hopefully from args based on user prompt interaction\r\n\r\ndef checkMethod(args, color):\r\n    print(color(os.system(args)))\r\n```\r\n\r\nWhat I am trying to accomplish is step through the dict so that if the user selects `check`, then the next completion options are args, user_options and color etc till all the options are used. In case of user_options where it has None associated, it will take userinput as a string. If the user chooses `another`, then the objects under `another` should be presented. \r\n\r\nFinally, once all the options are selected, the prompt() will return a dict where i can call a method using the `method` key as the name, passing the rest as the method arguments.\r\n\r\nWhen I use FuzzyWordCompleter, I am stuck only at the first level. Most of the docs i read through speaks only of arrays, but none how to chain a dict. \r\n\r\nHow can I accomplish this? Any not so complex examples like saws would be very helpful also! Would love to be able to add some description text for each key so that when the user chooses them, they can see the description also. \r\n\r\nThanks! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/926", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/926/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/926/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/926", "id": 456678748, "node_id": "MDU6SXNzdWU0NTY2Nzg3NDg=", "number": 926, "title": "Add pydoro project lists", "user": {"login": "JaDogg", "id": 498642, "node_id": "MDQ6VXNlcjQ5ODY0Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/498642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JaDogg", "html_url": "https://github.com/JaDogg", "followers_url": "https://api.github.com/users/JaDogg/followers", "following_url": "https://api.github.com/users/JaDogg/following{/other_user}", "gists_url": "https://api.github.com/users/JaDogg/gists{/gist_id}", "starred_url": "https://api.github.com/users/JaDogg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JaDogg/subscriptions", "organizations_url": "https://api.github.com/users/JaDogg/orgs", "repos_url": "https://api.github.com/users/JaDogg/repos", "events_url": "https://api.github.com/users/JaDogg/events{/privacy}", "received_events_url": "https://api.github.com/users/JaDogg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-16T20:24:24Z", "updated_at": "2019-06-19T06:58:43Z", "closed_at": "2019-06-19T06:58:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "pydoro is a tomato/pomodoro timer in the terminal.\r\n\r\nI'm using prompt-toolkit for the TUI \u2714\r\n\r\n\r\nGithub: https://github.com/JaDogg/pydoro\r\nASCII Cast: https://asciinema.org/a/251825", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/915", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/915/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/915/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/915/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/915", "id": 453133642, "node_id": "MDU6SXNzdWU0NTMxMzM2NDI=", "number": 915, "title": "assertion in print_formatted_text", "user": {"login": "jnwatson", "id": 3623079, "node_id": "MDQ6VXNlcjM2MjMwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/3623079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnwatson", "html_url": "https://github.com/jnwatson", "followers_url": "https://api.github.com/users/jnwatson/followers", "following_url": "https://api.github.com/users/jnwatson/following{/other_user}", "gists_url": "https://api.github.com/users/jnwatson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnwatson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnwatson/subscriptions", "organizations_url": "https://api.github.com/users/jnwatson/orgs", "repos_url": "https://api.github.com/users/jnwatson/repos", "events_url": "https://api.github.com/users/jnwatson/events{/privacy}", "received_events_url": "https://api.github.com/users/jnwatson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-06T16:43:52Z", "updated_at": "2020-08-01T00:40:19Z", "closed_at": "2020-08-01T00:40:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "prompt toolkit version 2.0.9\r\n\r\nExample code:\r\n```\r\nfrom prompt_toolkit import print_formatted_text\r\nprint_formatted_text('Hello world\\r')\r\n```\r\nOutput:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/tmp/pttest.py\", line 3, in <module>\r\n    print_formatted_text('Hello world\\r')\r\n  File \"/home/nic/.pyenv/versions/3.7.1/lib/python3.7/site-packages/prompt_toolkit/shortcuts/utils.py\", line 124, in print_formatted_text\r\n    style_transformation=style_transformation)\r\n  File \"/home/nic/.pyenv/versions/3.7.1/lib/python3.7/site-packages/prompt_toolkit/renderer.py\", line 674, in print_formatted_text\r\n    assert '\\r' not in text\r\nAssertionError\r\n```\r\nI might suggest that an assertion isn't appropriate here, given that `print_formatted_text` is used as a substitute for `print`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/907", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/907/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/907/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/907/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/907", "id": 450290794, "node_id": "MDU6SXNzdWU0NTAyOTA3OTQ=", "number": 907, "title": "button_dialog example AttributeError", "user": {"login": "OphirCarmi", "id": 31179336, "node_id": "MDQ6VXNlcjMxMTc5MzM2", "avatar_url": "https://avatars3.githubusercontent.com/u/31179336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OphirCarmi", "html_url": "https://github.com/OphirCarmi", "followers_url": "https://api.github.com/users/OphirCarmi/followers", "following_url": "https://api.github.com/users/OphirCarmi/following{/other_user}", "gists_url": "https://api.github.com/users/OphirCarmi/gists{/gist_id}", "starred_url": "https://api.github.com/users/OphirCarmi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OphirCarmi/subscriptions", "organizations_url": "https://api.github.com/users/OphirCarmi/orgs", "repos_url": "https://api.github.com/users/OphirCarmi/repos", "events_url": "https://api.github.com/users/OphirCarmi/events{/privacy}", "received_events_url": "https://api.github.com/users/OphirCarmi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-30T12:47:48Z", "updated_at": "2019-06-03T07:04:28Z", "closed_at": "2019-06-02T19:16:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Traceback (most recent call last):\r\n  File \"scratch_46.py\", line 23, in <module>\r\n    main()\r\n  File \"scratch_46.py\", line 15, in main\r\n    ('Maybe...', None),\r\nAttributeError: 'bool' object has no attribute 'run'\r\n\r\nneed to remove \".run()\"", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/905", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/905/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/905/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/905/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/905", "id": 449018514, "node_id": "MDU6SXNzdWU0NDkwMTg1MTQ=", "number": 905, "title": "Incomprehensible error while using prompt() with grammar, lexer, and completer", "user": {"login": "mpenning", "id": 36991, "node_id": "MDQ6VXNlcjM2OTkx", "avatar_url": "https://avatars3.githubusercontent.com/u/36991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpenning", "html_url": "https://github.com/mpenning", "followers_url": "https://api.github.com/users/mpenning/followers", "following_url": "https://api.github.com/users/mpenning/following{/other_user}", "gists_url": "https://api.github.com/users/mpenning/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpenning/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpenning/subscriptions", "organizations_url": "https://api.github.com/users/mpenning/orgs", "repos_url": "https://api.github.com/users/mpenning/repos", "events_url": "https://api.github.com/users/mpenning/events{/privacy}", "received_events_url": "https://api.github.com/users/mpenning/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-28T00:30:40Z", "updated_at": "2019-05-28T11:34:40Z", "closed_at": "2019-05-28T11:34:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running the git head version of `prompt_toolkit` to build what should be a simple test that's similar to [`regular-language.py`](https://github.com/prompt-toolkit/python-prompt-toolkit/blob/master/examples/prompts/regular-language.py); however, my test fails with an error that seemingly says nothing about the real problem.\r\n\r\nThis is the test:\r\n\r\n```python\r\n\"\"\"Loosely based on\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/master/examples/prompts/regular-language.py\"\"\"\r\n\r\nfrom prompt_toolkit import prompt\r\nfrom prompt_toolkit.completion import WordCompleter\r\nfrom prompt_toolkit.contrib.regular_languages.compiler import compile\r\nfrom prompt_toolkit.contrib.regular_languages.completion import (\r\n    GrammarCompleter,\r\n)\r\nfrom prompt_toolkit.contrib.regular_languages.lexer import GrammarLexer\r\nfrom prompt_toolkit.lexers import SimpleLexer\r\nfrom prompt_toolkit.styles import Style\r\n\r\noperators1 = ['show']\r\nobjects1 = ['log', 'jobs']\r\n\r\noperators2 = ['kill', 'run']\r\n\r\ndef create_grammar():\r\n    compile(r\"\"\"\r\n    (\\s* (?P<operator1>\\w+) \\s+ (?P<object1>\\w+) \\s*) |\r\n    (\\s* (?P<operator2>\\w+) \\s+ (?P<var2>\\w+) \\s*)\r\n    \"\"\")\r\n\r\ncmd_style = Style.from_dict({\r\n    'operator':       '#33aa33 bold',\r\n    'object':         '#ff0000 bold',\r\n    'var':            '#ffff00 bold',\r\n\r\n    'trailing-input': 'bg:#662222 #ffffff',\r\n})\r\n\r\nif __name__=='__main__':\r\n    gg = create_grammar()\r\n\r\n    ## Class names should match regex names found in the grammar\r\n    lexer = GrammarLexer(gg,\r\n        lexers={\r\n            'operator1': SimpleLexer('class:operator'),\r\n            'object1':   SimpleLexer('class:object'),\r\n\r\n            'operator2': SimpleLexer('class:operator'),\r\n            'var2':      SimpleLexer('class:var'),\r\n            })\r\n\r\n    completer = GrammarCompleter(gg, {\r\n        'operator1': WordCompleter(operators1),\r\n        'object1': WordCompleter(objects1),\r\n\r\n        'operator2': WordCompleter(operators2),\r\n    })\r\n\r\n    try:\r\n        while True:\r\n            text = prompt('shell> ', lexer=lexer, completer=completer,\r\n                          style=cmd_style)\r\n\r\n    except EOFError:\r\n        pass\r\n```\r\n\r\nWhen I run this, I get the error found below.  My concern is twofold:\r\n- First, what should I do to make this run correctly?\r\n- Second, the error handling in this case is quite shall we say \"perl-esque\"; by this I mean, the error is rather byzantine and seems to have nothing to do with anything I can identify in my code.\r\n\r\nThoughts?\r\n\r\n```\r\n(py36_test) [mpenning@mudslide python-prompt-toolkit]$ python that.py\r\nTraceback (most recent call last):\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/cache.py\", line 47, in get\r\n    return self._data[key]\r\nKeyError: ('', 139801200009168)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"that.py\", line 58, in <module>\r\n    style=None)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/shortcuts/prompt.py\", line 1270, in prompt\r\n    pre_run=pre_run)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/shortcuts/prompt.py\", line 928, in prompt\r\n    return self.app.run()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 749, in run\r\n    return run()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 721, in run\r\n    get_event_loop().run_until_complete(f)\r\n  File \"/opt/python36/lib/python3.6/asyncio/base_events.py\", line 467, in run_until_complete\r\n    return future.result()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 706, in run_async\r\n    return await _run_async2()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 697, in _run_async2\r\n    result = await _run_async()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 640, in _run_async\r\n    self._redraw()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 489, in _redraw\r\n    self.context.run(run_in_context)\r\n  File \"/opt/virtual_env/py36_test/lib/python3.6/site-packages/contextvars/__init__.py\", line 38, in run\r\n    return callable(*args, **kwargs)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/application/application.py\", line 475, in run_in_context\r\n    self.renderer.render(self, self.layout)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/renderer.py\", line 562, in render\r\n    layout.container.preferred_height(size.columns, size.rows).preferred)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 301, in preferred_height\r\n    for c in self._all_children]\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 301, in <listcomp>\r\n    for c in self._all_children]\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 716, in preferred_height\r\n    return self.content.preferred_height(width, max_available_height)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 301, in preferred_height\r\n    for c in self._all_children]\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 301, in <listcomp>\r\n    for c in self._all_children]\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 2329, in preferred_height\r\n    return self.content.preferred_height(width, max_available_height)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 1466, in preferred_height\r\n    dont_extend=self.dont_extend_height())\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 1488, in _merge_dimensions\r\n    preferred = get_preferred()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 1461, in preferred_content_height\r\n    self.get_line_prefix)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 587, in preferred_height\r\n    content = self.create_content(width, height=1)  # Pass a dummy '1' as height.\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 701, in create_content\r\n    document, width, height)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 665, in _create_get_processed_line_func\r\n    return create_func()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 653, in create_func\r\n    get_line = self._get_formatted_text_for_line_func(document)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 617, in _get_formatted_text_for_line_func\r\n    return self._fragment_cache.get(key, get_formatted_text_for_line)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/cache.py\", line 50, in get\r\n    value = getter_func()\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 614, in get_formatted_text_for_line\r\n    return self.lexer.lex_document(document)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/lexers/base.py\", line 74, in lex_document\r\n    return lexer.lex_document(document)\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/contrib/regular_languages/lexer.py\", line 80, in lex_document\r\n    lines = list(split_lines(self._get_text_fragments(document.text)))\r\n  File \"/home/mpenning/python-prompt-toolkit/prompt_toolkit/contrib/regular_languages/lexer.py\", line 42, in _get_text_fragments\r\n    m = self.compiled_grammar.match_prefix(text)\r\nAttributeError: 'NoneType' object has no attribute 'match_prefix'\r\n(py36_test) [mpenning@mudslide python-prompt-toolkit]$\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/895", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/895/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/895/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/895/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/895", "id": 441983248, "node_id": "MDU6SXNzdWU0NDE5ODMyNDg=", "number": 895, "title": "Prompt_toolkit 3.0: full_screen defaulted to False", "user": {"login": "gpotter2", "id": 10530980, "node_id": "MDQ6VXNlcjEwNTMwOTgw", "avatar_url": "https://avatars0.githubusercontent.com/u/10530980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gpotter2", "html_url": "https://github.com/gpotter2", "followers_url": "https://api.github.com/users/gpotter2/followers", "following_url": "https://api.github.com/users/gpotter2/following{/other_user}", "gists_url": "https://api.github.com/users/gpotter2/gists{/gist_id}", "starred_url": "https://api.github.com/users/gpotter2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gpotter2/subscriptions", "organizations_url": "https://api.github.com/users/gpotter2/orgs", "repos_url": "https://api.github.com/users/gpotter2/repos", "events_url": "https://api.github.com/users/gpotter2/events{/privacy}", "received_events_url": "https://api.github.com/users/gpotter2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-08T23:16:37Z", "updated_at": "2019-05-11T13:10:38Z", "closed_at": "2019-05-11T10:54:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi !\r\n\r\nSince 3.0, the shortcut dialogs don't start in full screen mode anymore\r\n\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/7b16d2401dc00e6dd82a565001de8b6f9a86af48/prompt_toolkit/shortcuts/dialogs.py#L257\r\n\r\nIf that's on purpose, it might be a good idea to document it somewhere (what would then be the recommended way ?)\r\n\r\n(Great job with 3.0 ! :smile:)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/890", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/890/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/890/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/890/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/890", "id": 439476763, "node_id": "MDU6SXNzdWU0Mzk0NzY3NjM=", "number": 890, "title": "Question: can I have  radiolist dialog where a user can select multi options?", "user": {"login": "unixsurfer", "id": 1716117, "node_id": "MDQ6VXNlcjE3MTYxMTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1716117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unixsurfer", "html_url": "https://github.com/unixsurfer", "followers_url": "https://api.github.com/users/unixsurfer/followers", "following_url": "https://api.github.com/users/unixsurfer/following{/other_user}", "gists_url": "https://api.github.com/users/unixsurfer/gists{/gist_id}", "starred_url": "https://api.github.com/users/unixsurfer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unixsurfer/subscriptions", "organizations_url": "https://api.github.com/users/unixsurfer/orgs", "repos_url": "https://api.github.com/users/unixsurfer/repos", "events_url": "https://api.github.com/users/unixsurfer/events{/privacy}", "received_events_url": "https://api.github.com/users/unixsurfer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-02T08:28:10Z", "updated_at": "2019-05-03T18:03:18Z", "closed_at": "2019-05-03T18:03:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I need this https://github.com/CITGuru/PyInquirer#checkbox---type-checkbox. Is it possible? I checked the source code and I couldn't find it.\r\nThank you", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/881", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/881/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/881/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/881/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/881", "id": 434300147, "node_id": "MDU6SXNzdWU0MzQzMDAxNDc=", "number": 881, "title": "prompt toolkit spawns too many threads", "user": {"login": "amigrave", "id": 93337, "node_id": "MDQ6VXNlcjkzMzM3", "avatar_url": "https://avatars1.githubusercontent.com/u/93337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amigrave", "html_url": "https://github.com/amigrave", "followers_url": "https://api.github.com/users/amigrave/followers", "following_url": "https://api.github.com/users/amigrave/following{/other_user}", "gists_url": "https://api.github.com/users/amigrave/gists{/gist_id}", "starred_url": "https://api.github.com/users/amigrave/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amigrave/subscriptions", "organizations_url": "https://api.github.com/users/amigrave/orgs", "repos_url": "https://api.github.com/users/amigrave/repos", "events_url": "https://api.github.com/users/amigrave/events{/privacy}", "received_events_url": "https://api.github.com/users/amigrave/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-17T14:00:27Z", "updated_at": "2019-05-09T07:15:35Z", "closed_at": "2019-05-09T07:15:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Every type stroke in a prompt toolkit spawns some threads, when typing fast there can be a huge amount of threads spawned concurrently. Constrained environments such as containers with some cgroups limits on the amount of processes prompt toolkit can crash when typing fast.\r\n\r\nHere's a live demo that showcase the threads usage:\r\nhttps://asciinema.org/a/GrtgrvnaGxUszAVXQpnp2KSYI", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/876", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/876/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/876/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/876/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/876", "id": 432835111, "node_id": "MDU6SXNzdWU0MzI4MzUxMTE=", "number": 876, "title": "Posix pipe inputs might respond to CPR", "user": {"login": "vxgmichel", "id": 7490006, "node_id": "MDQ6VXNlcjc0OTAwMDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/7490006?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vxgmichel", "html_url": "https://github.com/vxgmichel", "followers_url": "https://api.github.com/users/vxgmichel/followers", "following_url": "https://api.github.com/users/vxgmichel/following{/other_user}", "gists_url": "https://api.github.com/users/vxgmichel/gists{/gist_id}", "starred_url": "https://api.github.com/users/vxgmichel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vxgmichel/subscriptions", "organizations_url": "https://api.github.com/users/vxgmichel/orgs", "repos_url": "https://api.github.com/users/vxgmichel/repos", "events_url": "https://api.github.com/users/vxgmichel/events{/privacy}", "received_events_url": "https://api.github.com/users/vxgmichel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-13T10:58:41Z", "updated_at": "2020-06-28T13:34:40Z", "closed_at": "2020-06-28T13:34:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Issue # 5 from [this gist](https://gist.github.com/vxgmichel/f99c372f05dafb16ab24960d985ba61a)*\r\n\r\nIt'd be nice to be able to configure whether a posix pipe input responds to CPR. It is currently forced to `False`:\r\n\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/9e3845abe9d3cd64c096eaba8d890943f86b8954/prompt_toolkit/input/posix_pipe.py#L39-L41\r\n\r\nBut this pipe might be connected to a vt100 terminal that supports ANSI codes. A good example of that is `TelnetConnection.vt100_input`:\r\n\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/9e3845abe9d3cd64c096eaba8d890943f86b8954/prompt_toolkit/contrib/telnet/server.py#L112\r\n\r\nIn this context `telnet_connection.vt100_input.responds_to_cpr` returns `False` even though CPR is most likely supported.\r\n\r\nAlso, all the tests seems to pass with `PosixPipeInput.responds_to_cpr` forced to `True` instead.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/873", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/873/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/873/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/873", "id": 431723676, "node_id": "MDU6SXNzdWU0MzE3MjM2NzY=", "number": 873, "title": "StdoutProxy missing fileno attribute", "user": {"login": "vEpiphyte", "id": 26100278, "node_id": "MDQ6VXNlcjI2MTAwMjc4", "avatar_url": "https://avatars2.githubusercontent.com/u/26100278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vEpiphyte", "html_url": "https://github.com/vEpiphyte", "followers_url": "https://api.github.com/users/vEpiphyte/followers", "following_url": "https://api.github.com/users/vEpiphyte/following{/other_user}", "gists_url": "https://api.github.com/users/vEpiphyte/gists{/gist_id}", "starred_url": "https://api.github.com/users/vEpiphyte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vEpiphyte/subscriptions", "organizations_url": "https://api.github.com/users/vEpiphyte/orgs", "repos_url": "https://api.github.com/users/vEpiphyte/repos", "events_url": "https://api.github.com/users/vEpiphyte/events{/privacy}", "received_events_url": "https://api.github.com/users/vEpiphyte/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-10T21:27:04Z", "updated_at": "2019-04-19T16:35:41Z", "closed_at": "2019-04-19T16:35:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "The StdoutProxy object does not have a fileno attribute.  If the patch_stdout context manager is being held, anything else which may attempt direct access to the stdout fd could fail.  This can be seen by attempting to call faulthandler.dump_traceback() while the context manager is being held.\r\n\r\nExample code:\r\n\r\n```\r\nimport signal\r\nimport asyncio\r\nimport traceback\r\nimport faulthandler\r\n\r\nfrom prompt_toolkit import PromptSession\r\nfrom prompt_toolkit.patch_stdout import patch_stdout\r\nfrom prompt_toolkit.eventloop.defaults import use_asyncio_event_loop\r\n\r\ndef threadstacks(*args, **kwargs):\r\n    '''\r\n    A signal handler used to print thread stacks.\r\n    '''\r\n    print(80 * '*')\r\n    print('Faulthandler stack frames per thread:')\r\n    faulthandler.dump_traceback()\r\n    print(80 * '*')\r\n\r\nsignal.signal(signal.SIGUSR1, threadstacks)\r\n\r\nclass Cli:\r\n    def __init__(self):\r\n        # Tell prompt_toolkit to use the asyncio event loop.\r\n        use_asyncio_event_loop()\r\n\r\n        self.sess = None\r\n        self.ptext = '> '\r\n\r\n    async def prompt(self, text=None):\r\n        if self.sess is None:\r\n            self.sess = PromptSession()\r\n        with patch_stdout():\r\n            retn = await self.sess.prompt(text,\r\n                                          async_=True,\r\n                                          vi_mode=False,\r\n                                          enable_open_in_editor=True)\r\n            return retn\r\n\r\n    async def runCmdLoop(self):\r\n        exitloop = False\r\n        while True:\r\n            if exitloop:\r\n                print('Exiting loop...')\r\n                break\r\n\r\n            try:\r\n\r\n                line = await self.prompt(self.ptext)\r\n                if not line:\r\n                    continue\r\n\r\n                line = line.strip()\r\n                if not line:\r\n                    continue\r\n\r\n                print(f'Got line: {line}')\r\n\r\n                if line in ('quit', 'exit'):\r\n                    exitloop = True\r\n\r\n            except KeyboardInterrupt:\r\n\r\n                print('<ctrl-c>')\r\n                exitloop = True\r\n\r\n            except Exception:\r\n                print('Unknown error occurred:')\r\n                s = traceback.format_exc()\r\n                print(s)\r\n                exitloop = True\r\n\r\nasync def main():\r\n    cli = Cli()\r\n    await cli.runCmdLoop()\r\n\r\nif __name__ == '__main__':\r\n    asyncio.run(main())\r\n```\r\n\r\nWith that code running, sending SIGUSR1 to the process will terminate it due to an AttributeError\r\n\r\n```\r\n$ ps aux | grep break | grep -v grep\r\nnewp  5329  0.8  0.1 1191476 24524 pts/12  S+   21:18   0:00 python break_prompt_toolkit.py\r\n$ kill -10 5329\r\n```\r\n\r\nWith the following error:\r\n\r\n```\r\n$ python break_prompt_toolkit.py \r\n> Unknown error occurred:                                                                                                                                                                                                               \r\nTraceback (most recent call last):\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/runners.py\", line 43, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/base_events.py\", line 560, in run_until_complete\r\n    self.run_forever()\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/base_events.py\", line 528, in run_forever\r\n    self._run_once()\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/base_events.py\", line 1728, in _run_once\r\n    event_list = self._selector.select(timeout)\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/selectors.py\", line 468, in select\r\n    fd_event_list = self._selector.poll(timeout, max_ev)\r\n  File \"break_prompt_toolkit.py\", line 16, in threadstacks\r\n    faulthandler.dump_traceback()\r\nAttributeError: 'StdoutProxy' object has no attribute 'fileno'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"break_prompt_toolkit.py\", line 48, in runCmdLoop\r\n    line = await self.prompt(self.ptext)\r\n  File \"break_prompt_toolkit.py\", line 36, in prompt\r\n    enable_open_in_editor=True)\r\nconcurrent.futures._base.CancelledError\r\n\r\nExiting loop...\r\n********************************************************************************\r\n> Traceback (most recent call last):                                                                                                                                                                                                    \r\n  File \"break_prompt_toolkit.py\", line 77, in <module>\r\n    asyncio.run(main())\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/runners.py\", line 43, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/base_events.py\", line 560, in run_until_complete\r\n    self.run_forever()\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/base_events.py\", line 528, in run_forever\r\n    self._run_once()\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/asyncio/base_events.py\", line 1728, in _run_once\r\n    event_list = self._selector.select(timeout)\r\n  File \"/home/newp/.pyenv/versions/3.7.1/lib/python3.7/selectors.py\", line 468, in select\r\n    fd_event_list = self._selector.poll(timeout, max_ev)\r\n  File \"break_prompt_toolkit.py\", line 16, in threadstacks\r\n    faulthandler.dump_traceback()\r\nAttributeError: 'StdoutProxy' object has no attribute 'fileno'\r\n```\r\n\r\nEnvironment:\r\nUbuntu 18.04; Python 3.7.1 installed via pyenv\r\n\r\nPrompt-toolkit version\r\n```\r\nprompt-toolkit==2.0.9\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/871", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/871/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/871/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/871/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/871", "id": 430610455, "node_id": "MDU6SXNzdWU0MzA2MTA0NTU=", "number": 871, "title": "prompt-toolkit 1.0.15: styles.from_dict throws DeprecationWarning", "user": {"login": "carmenbianca", "id": 12065945, "node_id": "MDQ6VXNlcjEyMDY1OTQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/12065945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carmenbianca", "html_url": "https://github.com/carmenbianca", "followers_url": "https://api.github.com/users/carmenbianca/followers", "following_url": "https://api.github.com/users/carmenbianca/following{/other_user}", "gists_url": "https://api.github.com/users/carmenbianca/gists{/gist_id}", "starred_url": "https://api.github.com/users/carmenbianca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carmenbianca/subscriptions", "organizations_url": "https://api.github.com/users/carmenbianca/orgs", "repos_url": "https://api.github.com/users/carmenbianca/repos", "events_url": "https://api.github.com/users/carmenbianca/events{/privacy}", "received_events_url": "https://api.github.com/users/carmenbianca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-08T19:05:55Z", "updated_at": "2020-02-18T14:34:02Z", "closed_at": "2019-04-16T09:01:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to run xonsh 0.8.12 on Fedora 29 using prompt-toolkit 1.0.15. When I launch xonsh, I get the following output:\r\n\r\n```\r\n$ /bin/xonsh\r\n/usr/lib/python3.7/site-packages/prompt_toolkit/styles/from_dict.py:9: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n  from collections import Mapping\r\ncarmen@carmen-thinkpad ~/Projektoj/xonsh.bak f30 $\r\n```\r\n\r\nI have reported the bug at https://bugzilla.redhat.com/show_bug.cgi?id=1697574\r\n\r\nI have a fix for the bug at https://src.fedoraproject.org/rpms/python-prompt_toolkit/pull-request/2\r\n\r\n```\r\n---\r\n prompt_toolkit/styles/from_dict.py |    5 ++++-\r\n 1 file changed, 4 insertions(+), 1 deletion(-)\r\n\r\nIndex: prompt_toolkit-1.0.15/prompt_toolkit/styles/from_dict.py\r\n===================================================================\r\n--- prompt_toolkit-1.0.15.orig/prompt_toolkit/styles/from_dict.py\t2019-04-08 19:44:07.417924677 +0200\r\n+++ prompt_toolkit-1.0.15/prompt_toolkit/styles/from_dict.py\t2019-04-08 19:48:54.632773366 +0200\r\n@@ -6,7 +6,10 @@ This is very similar to the Pygments sty\r\n - Support for ANSI color names. (These will map directly to the 16 terminal\r\n   colors.)\r\n \"\"\"\r\n-from collections import Mapping\r\n+try:\r\n+    from collections.abc import Mapping\r\n+except ImportError:\r\n+    from collections import Mapping\r\n \r\n from .base import Style, DEFAULT_ATTRS, ANSI_COLOR_NAMES\r\n from .defaults import DEFAULT_STYLE_EXTENSIONS\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/865", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/865/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/865/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/865/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/865", "id": 427902661, "node_id": "MDU6SXNzdWU0Mjc5MDI2NjE=", "number": 865, "title": "Add pattern to WordCompleter's constructor", "user": {"login": "ehsan-fj", "id": 6216925, "node_id": "MDQ6VXNlcjYyMTY5MjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/6216925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehsan-fj", "html_url": "https://github.com/ehsan-fj", "followers_url": "https://api.github.com/users/ehsan-fj/followers", "following_url": "https://api.github.com/users/ehsan-fj/following{/other_user}", "gists_url": "https://api.github.com/users/ehsan-fj/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehsan-fj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehsan-fj/subscriptions", "organizations_url": "https://api.github.com/users/ehsan-fj/orgs", "repos_url": "https://api.github.com/users/ehsan-fj/repos", "events_url": "https://api.github.com/users/ehsan-fj/events{/privacy}", "received_events_url": "https://api.github.com/users/ehsan-fj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-01T20:41:37Z", "updated_at": "2019-04-05T08:51:55Z", "closed_at": "2019-04-05T08:51:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nIt might be a good idea to add `pattern` to WordCompleter's constructor in order to pass it to `document.get_word_before_cursor` in `get_completions` method.\r\n\r\nRight now you have to override `get_completions`?!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/858", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/858/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/858/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/858/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/858", "id": 422546150, "node_id": "MDU6SXNzdWU0MjI1NDYxNTA=", "number": 858, "title": "Is it possible to cancel a prompt?", "user": {"login": "Verequies", "id": 282071, "node_id": "MDQ6VXNlcjI4MjA3MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/282071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Verequies", "html_url": "https://github.com/Verequies", "followers_url": "https://api.github.com/users/Verequies/followers", "following_url": "https://api.github.com/users/Verequies/following{/other_user}", "gists_url": "https://api.github.com/users/Verequies/gists{/gist_id}", "starred_url": "https://api.github.com/users/Verequies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Verequies/subscriptions", "organizations_url": "https://api.github.com/users/Verequies/orgs", "repos_url": "https://api.github.com/users/Verequies/repos", "events_url": "https://api.github.com/users/Verequies/events{/privacy}", "received_events_url": "https://api.github.com/users/Verequies/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-19T05:07:08Z", "updated_at": "2019-03-21T00:29:19Z", "closed_at": "2019-03-21T00:29:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an issue where when I lose connection to server, my program cleanly terminates, however the complete termination of the program is blocked till I press enter ( due to it being stuck in the input ). Normally once text has been entered, it would check if the connection is still alive before requesting another input.\r\n\r\nIs it possible to cancel a prompt when it detects a variable change? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/856", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/856/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/856/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/856", "id": 419671036, "node_id": "MDU6SXNzdWU0MTk2NzEwMzY=", "number": 856, "title": "Multiple selection dialog", "user": {"login": "kislyuk", "id": 862013, "node_id": "MDQ6VXNlcjg2MjAxMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/862013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kislyuk", "html_url": "https://github.com/kislyuk", "followers_url": "https://api.github.com/users/kislyuk/followers", "following_url": "https://api.github.com/users/kislyuk/following{/other_user}", "gists_url": "https://api.github.com/users/kislyuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/kislyuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kislyuk/subscriptions", "organizations_url": "https://api.github.com/users/kislyuk/orgs", "repos_url": "https://api.github.com/users/kislyuk/repos", "events_url": "https://api.github.com/users/kislyuk/events{/privacy}", "received_events_url": "https://api.github.com/users/kislyuk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-11T20:35:04Z", "updated_at": "2019-05-27T19:45:44Z", "closed_at": "2019-05-27T19:45:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for building prompt-toolkit, it's an awesome package.\r\n\r\nI'm trying to build a dialog to select multiple items from a list of items. It should look like this:\r\n\r\n```\r\nSelect the widgets to send to the factory. Press Space or Enter to select:\r\n[ ] Widget 1\r\n[*] Widget 2\r\n[ ] Widget 3\r\n[ Send ] [ Quit ]\r\n```\r\n\r\nI haven't been able to find anything similar in the examples or docs. Is this possible? Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/854", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/854/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/854/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/854", "id": 417483031, "node_id": "MDU6SXNzdWU0MTc0ODMwMzE=", "number": 854, "title": "prompt-toolkit raises KeyError: ('', 1711583303320)", "user": {"login": "Code4SAFrankie", "id": 6196390, "node_id": "MDQ6VXNlcjYxOTYzOTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6196390?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Code4SAFrankie", "html_url": "https://github.com/Code4SAFrankie", "followers_url": "https://api.github.com/users/Code4SAFrankie/followers", "following_url": "https://api.github.com/users/Code4SAFrankie/following{/other_user}", "gists_url": "https://api.github.com/users/Code4SAFrankie/gists{/gist_id}", "starred_url": "https://api.github.com/users/Code4SAFrankie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Code4SAFrankie/subscriptions", "organizations_url": "https://api.github.com/users/Code4SAFrankie/orgs", "repos_url": "https://api.github.com/users/Code4SAFrankie/repos", "events_url": "https://api.github.com/users/Code4SAFrankie/events{/privacy}", "received_events_url": "https://api.github.com/users/Code4SAFrankie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-05T20:17:12Z", "updated_at": "2019-03-13T15:52:20Z", "closed_at": "2019-03-13T15:52:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get the following error:\r\n\r\nE:\\WPy-3710\\python-3.7.1.amd64>python e:\\Work\\Python\\repl.py\r\nTraceback (most recent call last):\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\cache.py\", line 34, in get\r\n    return self._data[key]\r\nKeyError: ('', 1711583303320)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 652, in _run_async2\r\n    result = yield f\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\eventloop\\coroutine.py\", line 86, in step_next\r\n    new_f = coroutine.send(None)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 595, in _run_async\r\n    self._redraw()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 444, in _redraw\r\n    self.renderer.render(self, self.layout)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\renderer.py\", line 546, in render\r\n    layout.container.preferred_height(size.columns, size.rows).preferred)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 245, in preferred_height\r\n    for c in self._all_children]\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 245, in <listcomp>\r\n    for c in self._all_children]\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 639, in preferred_height\r\n    return self.content.preferred_height(width, max_available_height)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 245, in preferred_height\r\n    for c in self._all_children]\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 245, in <listcomp>\r\n    for c in self._all_children]\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 2179, in preferred_height\r\n    return self.content.preferred_height(width, max_available_height)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 1362, in preferred_height\r\n    dont_extend=self.dont_extend_height())\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 1380, in _merge_dimensions\r\n    preferred = get_preferred()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\containers.py\", line 1357, in preferred_content_height\r\n    self.get_line_prefix)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\controls.py\", line 548, in preferred_height\r\n    content = self.create_content(width, None)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\controls.py\", line 667, in create_content\r\n    document, width, height)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\controls.py\", line 632, in _create_get_processed_line_func\r\n    return create_func()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\controls.py\", line 620, in create_func\r\n    get_line = self._get_formatted_text_for_line_func(document)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\controls.py\", line 577, in _get_formatted_text_for_line_func\r\n    return self._fragment_cache.get(key, get_formatted_text_for_line)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\cache.py\", line 37, in get\r\n    value = getter_func()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\layout\\controls.py\", line 574, in get_formatted_text_for_line\r\n    return self.lexer.lex_document(document)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\lexers\\base.py\", line 73, in lex_document\r\n    assert isinstance(lexer, Lexer)\r\nAssertionError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"e:\\Work\\Python\\repl.py\", line 14, in <module>\r\n    lexer = SqlLexer\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\shortcuts\\prompt.py\", line 840, in prompt\r\n    return session.prompt(*a, **kw)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\shortcuts\\prompt.py\", line 733, in prompt\r\n    return run_sync()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\shortcuts\\prompt.py\", line 722, in run_sync\r\n    return self.app.run(inputhook=self.inputhook, pre_run=pre_run2)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 699, in run\r\n    return run()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 673, in run\r\n    return f.result()\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\eventloop\\future.py\", line 149, in result\r\n    raise self._exception\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\eventloop\\coroutine.py\", line 90, in step_next\r\n    new_f = coroutine.throw(exc)\r\n  File \"E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 654, in _run_async2\r\n    assert not self._is_running\r\nAssertionError\r\n\r\nwhen running:\r\n\r\nfrom prompt_toolkit import prompt\r\nfrom prompt_toolkit.history import FileHistory\r\nfrom prompt_toolkit.auto_suggest import AutoSuggestFromHistory\r\n#from prompt_toolkit.contrib.completers import WordCompleter\r\nfrom pygments.lexers.sql import SqlLexer\r\n\r\n#SQLCompleter = WordCompleter(['SELECT', 'FROM', 'WHERE'], ignore_case = True)\r\n\r\nwhile 1:\r\n    inp = prompt(u'>',\r\n        history = FileHistory('history.txt'),\r\n        auto_suggest = AutoSuggestFromHistory(),\r\n        #completer = SQLCompleter,\r\n        lexer = SqlLexer\r\n    )\r\n    print(inp)\r\n\r\non: \r\n\r\nWinPython 3.7.1 (v3.7.1:260ec2c36a, Oct 20 2018, 14:57:15) [MSC v.1915 64 bit (AMD64)] on win32", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/853", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/853/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/853/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/853/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/853", "id": 417472052, "node_id": "MDU6SXNzdWU0MTc0NzIwNTI=", "number": 853, "title": "ImportError: cannot import name 'WordCompleter' from 'prompt_toolkit.contrib.completers'", "user": {"login": "Code4SAFrankie", "id": 6196390, "node_id": "MDQ6VXNlcjYxOTYzOTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6196390?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Code4SAFrankie", "html_url": "https://github.com/Code4SAFrankie", "followers_url": "https://api.github.com/users/Code4SAFrankie/followers", "following_url": "https://api.github.com/users/Code4SAFrankie/following{/other_user}", "gists_url": "https://api.github.com/users/Code4SAFrankie/gists{/gist_id}", "starred_url": "https://api.github.com/users/Code4SAFrankie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Code4SAFrankie/subscriptions", "organizations_url": "https://api.github.com/users/Code4SAFrankie/orgs", "repos_url": "https://api.github.com/users/Code4SAFrankie/repos", "events_url": "https://api.github.com/users/Code4SAFrankie/events{/privacy}", "received_events_url": "https://api.github.com/users/Code4SAFrankie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-05T19:47:36Z", "updated_at": "2019-03-13T15:52:39Z", "closed_at": "2019-03-13T15:52:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get the following error:\r\n\r\nTraceback (most recent call last):\r\n  File \"e:\\Work\\Python\\repl.py\", line 4, in <module>\r\n    from prompt_toolkit.contrib.completers import WordCompleter\r\nImportError: cannot import name 'WordCompleter' from 'prompt_toolkit.contrib.completers' (E:\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\prompt_toolkit\\contrib\\completers\\__init__.py)\r\n\r\nwhen trying to run:\r\n\r\nfrom prompt_toolkit import prompt\r\nfrom prompt_toolkit.history import FileHistory\r\nfrom prompt_toolkit.auto_suggest import AutoSuggestFromHistory\r\nfrom prompt_toolkit.contrib.completers import WordCompleter\r\nfrom pygments.lexers.sql import SqlLexer\r\n\r\nSQLCompleter = WordCompleter(['SELECT', 'FROM', 'WHERE'], ignore_case = True)\r\n\r\nwhile 1:\r\n    inp = prompt(u'>',\r\n        history = FileHistory('history.txt'),\r\n        auto_suggest = AutoSuggestFromHistory(),\r\n        completer = SQLCompleter,\r\n        lexer = SqlLexer\r\n    )\r\n    print(inp)\r\n\r\non:\r\n\r\nPython 3.7.1 (v3.7.1:260ec2c36a, Oct 20 2018, 14:57:15) [MSC v.1915 64 bit (AMD64)] on win32", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/850", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/850/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/850/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/850/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/850", "id": 416847339, "node_id": "MDU6SXNzdWU0MTY4NDczMzk=", "number": 850, "title": "Insert Autocompletion on Enter", "user": {"login": "f0ff886f", "id": 528239, "node_id": "MDQ6VXNlcjUyODIzOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/528239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/f0ff886f", "html_url": "https://github.com/f0ff886f", "followers_url": "https://api.github.com/users/f0ff886f/followers", "following_url": "https://api.github.com/users/f0ff886f/following{/other_user}", "gists_url": "https://api.github.com/users/f0ff886f/gists{/gist_id}", "starred_url": "https://api.github.com/users/f0ff886f/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/f0ff886f/subscriptions", "organizations_url": "https://api.github.com/users/f0ff886f/orgs", "repos_url": "https://api.github.com/users/f0ff886f/repos", "events_url": "https://api.github.com/users/f0ff886f/events{/privacy}", "received_events_url": "https://api.github.com/users/f0ff886f/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-04T15:11:38Z", "updated_at": "2019-03-06T10:23:46Z", "closed_at": "2019-03-06T10:23:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a built in way to handle autocompletions with `enter` instead of just submitting the current input buffer?\r\n\r\nWould I have to use a keybind on `enter` to override the default functionality?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/844", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/844/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/844/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/844", "id": 410757537, "node_id": "MDU6SXNzdWU0MTA3NTc1Mzc=", "number": 844, "title": "Add vulcano to projects using prompt_toolkit", "user": {"login": "dgarana", "id": 5599011, "node_id": "MDQ6VXNlcjU1OTkwMTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5599011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgarana", "html_url": "https://github.com/dgarana", "followers_url": "https://api.github.com/users/dgarana/followers", "following_url": "https://api.github.com/users/dgarana/following{/other_user}", "gists_url": "https://api.github.com/users/dgarana/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgarana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgarana/subscriptions", "organizations_url": "https://api.github.com/users/dgarana/orgs", "repos_url": "https://api.github.com/users/dgarana/repos", "events_url": "https://api.github.com/users/dgarana/events{/privacy}", "received_events_url": "https://api.github.com/users/dgarana/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-15T12:55:40Z", "updated_at": "2019-02-19T21:09:37Z", "closed_at": "2019-02-19T21:09:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Vulcano is a framework for creating command-line applications that also runs in REPL mode. https://github.com/dgarana/vulcano", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/842", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/842/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/842/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/842/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/842", "id": 410669774, "node_id": "MDU6SXNzdWU0MTA2Njk3NzQ=", "number": 842, "title": "Add KubeTerminal to \"Projects using prompt_toolkit\"", "user": {"login": "samisalkosuo", "id": 2252765, "node_id": "MDQ6VXNlcjIyNTI3NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2252765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samisalkosuo", "html_url": "https://github.com/samisalkosuo", "followers_url": "https://api.github.com/users/samisalkosuo/followers", "following_url": "https://api.github.com/users/samisalkosuo/following{/other_user}", "gists_url": "https://api.github.com/users/samisalkosuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/samisalkosuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samisalkosuo/subscriptions", "organizations_url": "https://api.github.com/users/samisalkosuo/orgs", "repos_url": "https://api.github.com/users/samisalkosuo/repos", "events_url": "https://api.github.com/users/samisalkosuo/events{/privacy}", "received_events_url": "https://api.github.com/users/samisalkosuo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-15T09:08:22Z", "updated_at": "2019-02-19T21:11:30Z", "closed_at": "2019-02-19T21:11:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[KubeTerminal](https://github.com/samisalkosuo/kubeterminal) is a full screen application and uses prompt_toolkit.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/837", "id": 409524356, "node_id": "MDU6SXNzdWU0MDk1MjQzNTY=", "number": 837, "title": "completion of a line ending with a space in WordCompleter is broken in 2.0.8", "user": {"login": "jeroen-dhollander", "id": 10767030, "node_id": "MDQ6VXNlcjEwNzY3MDMw", "avatar_url": "https://avatars3.githubusercontent.com/u/10767030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeroen-dhollander", "html_url": "https://github.com/jeroen-dhollander", "followers_url": "https://api.github.com/users/jeroen-dhollander/followers", "following_url": "https://api.github.com/users/jeroen-dhollander/following{/other_user}", "gists_url": "https://api.github.com/users/jeroen-dhollander/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeroen-dhollander/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeroen-dhollander/subscriptions", "organizations_url": "https://api.github.com/users/jeroen-dhollander/orgs", "repos_url": "https://api.github.com/users/jeroen-dhollander/repos", "events_url": "https://api.github.com/users/jeroen-dhollander/events{/privacy}", "received_events_url": "https://api.github.com/users/jeroen-dhollander/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-12T22:12:33Z", "updated_at": "2019-02-19T21:12:53Z", "closed_at": "2019-02-19T21:12:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "In 2.0.8, completion of an input line like 'test ' is broken in the WordCompleter.\r\n\r\nThis can be seen with this simple test case:\r\n```\r\ndef test_word_completer_static_word_list():\r\n    completer = WordCompleter(['abc', 'def', 'aaa'])\r\n\r\n    <snip current tests>\r\n\r\n    # Multiple words ending with space. (Accept all options)\r\n    completions = completer.get_completions(Document('test '), CompleteEvent())\r\n    assert [c.text for c in completions] == ['abc', 'def', 'aaa']\r\n```\r\n\r\nAfter some digging I figured out it was broken by commit 81c30157.\r\nI will publish a pull request with some extra unittests and the fix.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/836", "id": 409129415, "node_id": "MDU6SXNzdWU0MDkxMjk0MTU=", "number": 836, "title": "print_formatted_text(ANSI(...)) removes color", "user": {"login": "RichardWarfield", "id": 4101168, "node_id": "MDQ6VXNlcjQxMDExNjg=", "avatar_url": "https://avatars1.githubusercontent.com/u/4101168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RichardWarfield", "html_url": "https://github.com/RichardWarfield", "followers_url": "https://api.github.com/users/RichardWarfield/followers", "following_url": "https://api.github.com/users/RichardWarfield/following{/other_user}", "gists_url": "https://api.github.com/users/RichardWarfield/gists{/gist_id}", "starred_url": "https://api.github.com/users/RichardWarfield/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RichardWarfield/subscriptions", "organizations_url": "https://api.github.com/users/RichardWarfield/orgs", "repos_url": "https://api.github.com/users/RichardWarfield/repos", "events_url": "https://api.github.com/users/RichardWarfield/events{/privacy}", "received_events_url": "https://api.github.com/users/RichardWarfield/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-12T05:38:40Z", "updated_at": "2019-02-19T21:06:54Z", "closed_at": "2019-02-13T10:38:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "While using prompt_toolkit with pygments to highlight Haskell code, I discovered that I get different output using `print_formatted_text(ANSI(ansi_string))` compared to `print(ansi_string)`\r\n\r\n![bad_color](https://user-images.githubusercontent.com/4101168/52613249-22946c00-2ec8-11e9-850e-ca37bad4edbf.gif)\r\n\r\nIf I peek at the ANSI that gets output by the call to print_formatted_text, it is radically different from the input:\r\n\r\n`'\\x1b[0m\\x1b[?7h\\x1b[0m\"\\x1b[0mH\\x1b[0me\\x1b[0ml\\x1b[0ml\\x1b[0mo\\x1b[0m \\x1b[0mw\\x1b[0mo\\x1b[0mr\\x1b[0ml\\x1b[0md\\x1b[0m\"\\x1b[0m\\r\\n\\x1b[0m'`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/834", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/834/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/834/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/834/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/834", "id": 408573251, "node_id": "MDU6SXNzdWU0MDg1NzMyNTE=", "number": 834, "title": "Buffer redrawing becomes very slow", "user": {"login": "mashaklzo", "id": 31956343, "node_id": "MDQ6VXNlcjMxOTU2MzQz", "avatar_url": "https://avatars1.githubusercontent.com/u/31956343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mashaklzo", "html_url": "https://github.com/mashaklzo", "followers_url": "https://api.github.com/users/mashaklzo/followers", "following_url": "https://api.github.com/users/mashaklzo/following{/other_user}", "gists_url": "https://api.github.com/users/mashaklzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mashaklzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mashaklzo/subscriptions", "organizations_url": "https://api.github.com/users/mashaklzo/orgs", "repos_url": "https://api.github.com/users/mashaklzo/repos", "events_url": "https://api.github.com/users/mashaklzo/events{/privacy}", "received_events_url": "https://api.github.com/users/mashaklzo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-02-10T20:08:42Z", "updated_at": "2019-02-13T21:32:19Z", "closed_at": "2019-02-13T21:32:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm doing a lot of heavy drawing into a buffer and after a few minutes it slows down. \r\n\r\nBasically I have a couple of buffers and I'm writing a large amount of text to them in a kind of animation every 1/10 second or so. It starts off refreshing rapidly and starts to slow down. Is there anything I can trigger to make this work?\r\n\r\nSetup is something like this:\r\n\r\n```\r\nwindow = Window(BufferControl(buffer=my_buffer,focusable=False,include_default_input_processors=False,input_processors=[FormatText()]))\r\n\r\nbody = HSplit([\r\n    window\r\n])\r\n\r\nroot_container = HSplit([\r\n    Window(height=1,\r\n           content=FormattedTextControl(get_titlebar_text),\r\n           align=WindowAlign.CENTER),\r\n    Window(height=1, char='-', style='class:line'),\r\n    body,\r\n])\r\n\r\n```\r\nThen I have a thread where I update my_buffer.text - whereby, I get the sluggish behaviour after a short while. Is there a better way of doing this?\r\n\r\nI thought I'd ask if there is something I've missed in the docs, I've read everything carefully and have set an app.invalidate() but this doesn't help. Same for the min_redraw_interval and max_render_postpone_time settings.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/831", "id": 407679515, "node_id": "MDU6SXNzdWU0MDc2Nzk1MTU=", "number": 831, "title": "READLINE_LIKE completer behaves differently in 2.0.8 ? ", "user": {"login": "lambdamusic", "id": 3493663, "node_id": "MDQ6VXNlcjM0OTM2NjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/3493663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambdamusic", "html_url": "https://github.com/lambdamusic", "followers_url": "https://api.github.com/users/lambdamusic/followers", "following_url": "https://api.github.com/users/lambdamusic/following{/other_user}", "gists_url": "https://api.github.com/users/lambdamusic/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambdamusic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambdamusic/subscriptions", "organizations_url": "https://api.github.com/users/lambdamusic/orgs", "repos_url": "https://api.github.com/users/lambdamusic/repos", "events_url": "https://api.github.com/users/lambdamusic/events{/privacy}", "received_events_url": "https://api.github.com/users/lambdamusic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-07T12:37:43Z", "updated_at": "2019-02-20T22:37:18Z", "closed_at": "2019-02-20T22:37:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello. I am using the fantastic autocomplete feature to build an [API REPL](https://github.com/lambdamusic/dimcli/blob/master/dimcli/console/repl.py#L224) and noticed that in version 2.0.8 if I hit TAB when no text prefix is present the autocomplete is not invoked. Eg\r\n\r\n```\r\n[1] Give some animals: # [TAB => shows all options]\r\nalligator ape       bear      bee       butterfly chicken   dinosaur  dolphin   duck      elephant  goat      kangaroo  lion      rabbit    snake     turkey\r\nant       bat       beaver    bison     cat       crocodile dog       dove      eagle     fish      gorilla   leopard   mouse     rat       spider    turtle\r\n\r\n[2] Give some animals: bear b # [TAB => shows options staring with b]\r\nbat       bear      beaver    bee       bison     butterfly\r\n\r\n[3] Give some animals: bear # [TAB => nothing shown!]\r\n```\r\n\r\n**NOTE** In version 2.0.7, the last example would show all available options. \r\n\r\nAm I doing anything wrong? Is there any way to revert back to the previous behaviour? \r\nThanks a million in advance!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/829", "id": 404829046, "node_id": "MDU6SXNzdWU0MDQ4MjkwNDY=", "number": 829, "title": "Running a shell command under ptpython Vi (NAV) mode returns an exception from prompt_toolkit", "user": {"login": "jcrmatos", "id": 1813375, "node_id": "MDQ6VXNlcjE4MTMzNzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1813375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcrmatos", "html_url": "https://github.com/jcrmatos", "followers_url": "https://api.github.com/users/jcrmatos/followers", "following_url": "https://api.github.com/users/jcrmatos/following{/other_user}", "gists_url": "https://api.github.com/users/jcrmatos/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcrmatos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcrmatos/subscriptions", "organizations_url": "https://api.github.com/users/jcrmatos/orgs", "repos_url": "https://api.github.com/users/jcrmatos/repos", "events_url": "https://api.github.com/users/jcrmatos/events{/privacy}", "received_events_url": "https://api.github.com/users/jcrmatos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-30T15:37:35Z", "updated_at": "2019-01-30T21:01:59Z", "closed_at": "2019-01-30T21:01:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "ptpython 2.04, prompt-toolkit 2.0.7 in Python 3.7.1 32b.\r\nRunning a shell command under ptpython Vi (NAV) mode returns an exception from prompt_toolkit.\r\n\r\n```\r\nUnhandled exception in event loop:\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\eventloop\\coroutine.py\", line 90, in step_next\r\n    new_f = coroutine.throw(exc)\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\application\\run_in_terminal.py\", line 95, in _run_in_t\r\n    result = yield From(async_func())\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\eventloop\\coroutine.py\", line 86, in step_next\r\n    new_f = coroutine.send(None)\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\application\\application.py\", line 771, in run\r\n    input_fd = self.input.fileno()\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\input\\win32.py\", line 73, in fileno\r\n    raise NotImplementedError\r\n\r\nException\r\nPress ENTER to continue...\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/823", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/823/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/823/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/823/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/823", "id": 403567002, "node_id": "MDU6SXNzdWU0MDM1NjcwMDI=", "number": 823, "title": "Question: What is the difference between text_before_cursor and get_word_before_cursor?", "user": {"login": "tamago324", "id": 16581287, "node_id": "MDQ6VXNlcjE2NTgxMjg3", "avatar_url": "https://avatars2.githubusercontent.com/u/16581287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamago324", "html_url": "https://github.com/tamago324", "followers_url": "https://api.github.com/users/tamago324/followers", "following_url": "https://api.github.com/users/tamago324/following{/other_user}", "gists_url": "https://api.github.com/users/tamago324/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamago324/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamago324/subscriptions", "organizations_url": "https://api.github.com/users/tamago324/orgs", "repos_url": "https://api.github.com/users/tamago324/repos", "events_url": "https://api.github.com/users/tamago324/events{/privacy}", "received_events_url": "https://api.github.com/users/tamago324/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-27T16:10:50Z", "updated_at": "2019-01-30T15:27:25Z", "closed_at": "2019-01-30T15:27:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "hi.\r\n\r\nThank you for a wonderful library!\r\n\r\nIs there a difference between [document.text_before_cursor](https://github.com/prompt-toolkit/python-prompt-toolkit/blob/81c30157422989957c8a56b333b17ba35ab1a223/prompt_toolkit/document.py#L155-L157) and [document.get_word_before_cursor()](https://github.com/prompt-toolkit/python-prompt-toolkit/blob/81c30157422989957c8a56b333b17ba35ab1a223/prompt_toolkit/document.py#L410-L425)?\r\n\r\nThe difference is \"contain\" or \"not contain\" the leading space?\r\n\r\nIf there is a difference, I would like if there is an example\r\n\r\nThank you\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/822", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/822/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/822/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/822", "id": 403552185, "node_id": "MDU6SXNzdWU0MDM1NTIxODU=", "number": 822, "title": "spelling mistake", "user": {"login": "shenxianpeng", "id": 3353385, "node_id": "MDQ6VXNlcjMzNTMzODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3353385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shenxianpeng", "html_url": "https://github.com/shenxianpeng", "followers_url": "https://api.github.com/users/shenxianpeng/followers", "following_url": "https://api.github.com/users/shenxianpeng/following{/other_user}", "gists_url": "https://api.github.com/users/shenxianpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/shenxianpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shenxianpeng/subscriptions", "organizations_url": "https://api.github.com/users/shenxianpeng/orgs", "repos_url": "https://api.github.com/users/shenxianpeng/repos", "events_url": "https://api.github.com/users/shenxianpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/shenxianpeng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-27T13:41:34Z", "updated_at": "2019-01-27T20:55:27Z", "closed_at": "2019-01-27T20:55:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "python-prompt-toolkit/examples/prompts/auto-completion/autocomplete-with-control-space.py\r\n\r\nline 3 `Eample of using the control-space key binding for auto completion.`\r\n\r\nEample should be Example", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/818", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/818/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/818/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/818", "id": 398403520, "node_id": "MDU6SXNzdWUzOTg0MDM1MjA=", "number": 818, "title": "Unexpected memory growth when using refresh_interval", "user": {"login": "benjunmun", "id": 1108917, "node_id": "MDQ6VXNlcjExMDg5MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1108917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjunmun", "html_url": "https://github.com/benjunmun", "followers_url": "https://api.github.com/users/benjunmun/followers", "following_url": "https://api.github.com/users/benjunmun/following{/other_user}", "gists_url": "https://api.github.com/users/benjunmun/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjunmun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjunmun/subscriptions", "organizations_url": "https://api.github.com/users/benjunmun/orgs", "repos_url": "https://api.github.com/users/benjunmun/repos", "events_url": "https://api.github.com/users/benjunmun/events{/privacy}", "received_events_url": "https://api.github.com/users/benjunmun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-11T18:31:35Z", "updated_at": "2019-07-23T03:03:26Z", "closed_at": "2019-07-22T15:22:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm working on a prompt toolkit based application that has issues with unbounded memory usage. I believe that I've narrowed the issue down to using the `refresh_interval` feature of `prompt_toolkit.prompt`.\r\n\r\nThe following sample code consumes an additional 5 MB every 10 minutes sitting idle at the prompt. My actual code with a fancier prompt seems to grow faster than this. Turning the refresh_interval to a sub-second rate increases this dramatically, making it easier to reproduce. Without refresh_interval, the prompt can sit there forever with no change in memory usage. When measuring, I'm looking at the growth of RSS with [mprof](https://pypi.org/project/memory-profiler/) and OS tools.\r\n\r\n```\r\nimport prompt_toolkit\r\n\r\nprompt_toolkit.prompt(\r\n    '>',\r\n    refresh_interval=1,\r\n    bottom_toolbar='test',\r\n)\r\n```\r\n\r\nI'm testing with Python 3.6.7, prompt-toolkit version 2.0.7 on Linux.\r\n\r\nI'm not super familiar with prompt toolkit yet, so please let me know if I can provide any additional information or if I may be doing something incorrectly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/811", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/811/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/811/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/811/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/811", "id": 396078426, "node_id": "MDU6SXNzdWUzOTYwNzg0MjY=", "number": 811, "title": "^M (control character) appears when provided as default to prompt", "user": {"login": "ashleyblackmore", "id": 1227589, "node_id": "MDQ6VXNlcjEyMjc1ODk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1227589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashleyblackmore", "html_url": "https://github.com/ashleyblackmore", "followers_url": "https://api.github.com/users/ashleyblackmore/followers", "following_url": "https://api.github.com/users/ashleyblackmore/following{/other_user}", "gists_url": "https://api.github.com/users/ashleyblackmore/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashleyblackmore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashleyblackmore/subscriptions", "organizations_url": "https://api.github.com/users/ashleyblackmore/orgs", "repos_url": "https://api.github.com/users/ashleyblackmore/repos", "events_url": "https://api.github.com/users/ashleyblackmore/events{/privacy}", "received_events_url": "https://api.github.com/users/ashleyblackmore/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-04T21:46:19Z", "updated_at": "2019-02-22T19:49:41Z", "closed_at": "2019-02-22T19:49:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "When providing a string to the default param for prompt, i.e.,\r\n\r\n```\r\ns.prompt(message=\"in example below\\r\\n\\r\\n{code}\\r\\n\")\r\n```\r\n\r\nThe editable output explicitly displays the control char for a carriage return instead of the expected implicit carriage return:\r\n\r\n```\r\nin example below^M\r\n^M\r\n{code}^M\r\n```\r\n\r\nIs this a known issue? Is there a workaround for this? Normalizing the unicode before display doesn't appear to fix it.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/809", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/809/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/809/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/809", "id": 392500818, "node_id": "MDU6SXNzdWUzOTI1MDA4MTg=", "number": 809, "title": "ImportError: cannot import name 'PromptSession' from 'prompt_toolkit'", "user": {"login": "c0r3dump3d", "id": 5602401, "node_id": "MDQ6VXNlcjU2MDI0MDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5602401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c0r3dump3d", "html_url": "https://github.com/c0r3dump3d", "followers_url": "https://api.github.com/users/c0r3dump3d/followers", "following_url": "https://api.github.com/users/c0r3dump3d/following{/other_user}", "gists_url": "https://api.github.com/users/c0r3dump3d/gists{/gist_id}", "starred_url": "https://api.github.com/users/c0r3dump3d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c0r3dump3d/subscriptions", "organizations_url": "https://api.github.com/users/c0r3dump3d/orgs", "repos_url": "https://api.github.com/users/c0r3dump3d/repos", "events_url": "https://api.github.com/users/c0r3dump3d/events{/privacy}", "received_events_url": "https://api.github.com/users/c0r3dump3d/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-19T09:01:16Z", "updated_at": "2018-12-19T12:45:03Z", "closed_at": "2018-12-19T12:45:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm trying to use prompt-toolkit but I have this error when I try to import some modules, for example with the PromptSession:\r\n\r\n`from prompt_toolkit import PromptSession`\r\n\r\n`ImportError: cannot import name 'PromptSession' from 'prompt_toolkit' (/usr/lib/python3.7/site-packages/prompt_toolkit/__init__.py)`\r\n\r\nI have installed prompt-toolkit:\r\n\r\n`pip install prompt_toolkit`\r\n\r\nwith python version 3.7.1:\r\n\r\n`Python 3.7.1 (default, Oct 22 2018, 10:41:28)`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/808", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/808/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/808/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/808/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/808", "id": 392392714, "node_id": "MDU6SXNzdWUzOTIzOTI3MTQ=", "number": 808, "title": "WordCompleter docs example throws AssertionError", "user": {"login": "MareoRaft", "id": 860303, "node_id": "MDQ6VXNlcjg2MDMwMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/860303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MareoRaft", "html_url": "https://github.com/MareoRaft", "followers_url": "https://api.github.com/users/MareoRaft/followers", "following_url": "https://api.github.com/users/MareoRaft/following{/other_user}", "gists_url": "https://api.github.com/users/MareoRaft/gists{/gist_id}", "starred_url": "https://api.github.com/users/MareoRaft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MareoRaft/subscriptions", "organizations_url": "https://api.github.com/users/MareoRaft/orgs", "repos_url": "https://api.github.com/users/MareoRaft/repos", "events_url": "https://api.github.com/users/MareoRaft/events{/privacy}", "received_events_url": "https://api.github.com/users/MareoRaft/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-12-19T00:31:45Z", "updated_at": "2019-01-06T16:01:00Z", "closed_at": "2019-01-06T15:59:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am using version 2.0.7 with python 2.7\r\n\r\n    ~/programming/card-game-maxeta % pip install prompt_toolkit\r\n    Requirement already satisfied: prompt_toolkit in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (2.0.7)\r\n    Requirement already satisfied: wcwidth in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from prompt_toolkit) (0.1.7)\r\n    Requirement already satisfied: six>=1.9.0 in /Library/Python/2.7/site-packages (from prompt_toolkit) (1.11.0)\r\n\r\nand I am running the python file `pt_fun.py` whose contents is\r\n\r\n    from prompt_toolkit import prompt\r\n    from prompt_toolkit.completion import WordCompleter\r\n    \r\n    html_completer = WordCompleter(['<html>', '<body>', '<head>', '<title>'])\r\n    text = prompt('Enter HTML: ', completer=html_completer)\r\n    print('You said: %s' % text)\r\n\r\nwhich is verbatim what is shown in the stable and 2.0.7 [docs](https://python-prompt-toolkit.readthedocs.io/en/2.0.7/pages/asking_for_input.html#autocompletion).\r\n\r\nIt throws the error:\r\n\r\n    ~/programming/card-game-maxeta % python pt_fun.py\r\n    Traceback (most recent call last):\r\n      File \"pt_fun.py\", line 5, in <module>\r\n        text = prompt('Enter HTML: ', completer=html_completer)\r\n      File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/prompt_toolkit/shortcuts/prompt.py\", line 840, in prompt\r\n    ^[[32;1R    return session.prompt(*a, **kw)\r\n      File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/prompt_toolkit/shortcuts/prompt.py\", line 733, in prompt\r\n        return run_sync()\r\n      File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/prompt_toolkit/shortcuts/prompt.py\", line 722, in run_sync\r\n        return self.app.run(inputhook=self.inputhook, pre_run=pre_run2)\r\n      File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/prompt_toolkit/application/application.py\", line 699, in run\r\n        return run()\r\n      File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/prompt_toolkit/application/application.py\", line 673, in run\r\n        return f.result()\r\n      File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/prompt_toolkit/eventloop/future.py\", line 149, in result\r\n        raise self._exception\r\n    AssertionError\r\n\r\nThank you,\r\nMatthew", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/807", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/807/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/807/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/807", "id": 389395416, "node_id": "MDU6SXNzdWUzODkzOTU0MTY=", "number": 807, "title": "Automatic replacements", "user": {"login": "Aluriak", "id": 1257159, "node_id": "MDQ6VXNlcjEyNTcxNTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1257159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aluriak", "html_url": "https://github.com/Aluriak", "followers_url": "https://api.github.com/users/Aluriak/followers", "following_url": "https://api.github.com/users/Aluriak/following{/other_user}", "gists_url": "https://api.github.com/users/Aluriak/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aluriak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aluriak/subscriptions", "organizations_url": "https://api.github.com/users/Aluriak/orgs", "repos_url": "https://api.github.com/users/Aluriak/repos", "events_url": "https://api.github.com/users/Aluriak/events{/privacy}", "received_events_url": "https://api.github.com/users/Aluriak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-10T16:59:59Z", "updated_at": "2018-12-11T13:55:27Z", "closed_at": "2018-12-10T22:48:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi !\r\n\r\nI am building an interface, and wish to allow user to specify some mathematical symbols, either using some letters (like `u` in place of `\u222a`) or expression (\\union).\r\nI would like the prompt to replace any word matching the letter/expression by the mathematical symbol.\r\n\r\nThis can be emulated using a Completer subclass, but require user to push tab to get the symbol replaced. This is quite annoying.\r\n\r\nIs there any way to get a real-time replacement of expressions, based on regexes or function rules ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/798", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/798/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/798/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/798/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/798", "id": 386485652, "node_id": "MDU6SXNzdWUzODY0ODU2NTI=", "number": 798, "title": "Kernel app breaks with prompt-tookit 2.0. Works with 1.0", "user": {"login": "rigogsilva", "id": 31558765, "node_id": "MDQ6VXNlcjMxNTU4NzY1", "avatar_url": "https://avatars1.githubusercontent.com/u/31558765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rigogsilva", "html_url": "https://github.com/rigogsilva", "followers_url": "https://api.github.com/users/rigogsilva/followers", "following_url": "https://api.github.com/users/rigogsilva/following{/other_user}", "gists_url": "https://api.github.com/users/rigogsilva/gists{/gist_id}", "starred_url": "https://api.github.com/users/rigogsilva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rigogsilva/subscriptions", "organizations_url": "https://api.github.com/users/rigogsilva/orgs", "repos_url": "https://api.github.com/users/rigogsilva/repos", "events_url": "https://api.github.com/users/rigogsilva/events{/privacy}", "received_events_url": "https://api.github.com/users/rigogsilva/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-01T18:49:42Z", "updated_at": "2018-12-01T19:04:59Z", "closed_at": "2018-12-01T19:04:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "This issue seems to be happening for kernel application. \r\n\r\nhttps://github.com/jupyter/jupyter_console/issues/158\r\n\r\nNot sure why it breaks the app. \r\n\r\nError:\r\n```bash\r\nInternal Kernel Error\r\nThe 'prompt-toolkit<2.0.0,>=1.0.4' distribution was not found and is required by the application\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/796", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/796/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/796/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/796/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/796", "id": 384468732, "node_id": "MDU6SXNzdWUzODQ0Njg3MzI=", "number": 796, "title": "tty issues when launching via docker compose", "user": {"login": "ashleyblackmore", "id": 1227589, "node_id": "MDQ6VXNlcjEyMjc1ODk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1227589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashleyblackmore", "html_url": "https://github.com/ashleyblackmore", "followers_url": "https://api.github.com/users/ashleyblackmore/followers", "following_url": "https://api.github.com/users/ashleyblackmore/following{/other_user}", "gists_url": "https://api.github.com/users/ashleyblackmore/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashleyblackmore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashleyblackmore/subscriptions", "organizations_url": "https://api.github.com/users/ashleyblackmore/orgs", "repos_url": "https://api.github.com/users/ashleyblackmore/repos", "events_url": "https://api.github.com/users/ashleyblackmore/events{/privacy}", "received_events_url": "https://api.github.com/users/ashleyblackmore/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-26T19:07:15Z", "updated_at": "2019-03-27T11:14:46Z", "closed_at": "2019-02-22T19:50:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nI'm trying to launch a script that uses prompt() from docker compose. With `tty = true` I get:\r\n ```\r\nWARNING: your terminal doesn't support cursor position requests (CPR).\r\n```\r\n\r\nWith 'tty = false`:\r\n\r\n```\r\nalert-blocks_1_e98bc44562b1 | Warning: Output is not to a terminal (fd=1).\r\nalert-blocks_1_e98bc44562b1 | Warning: Input is not to a terminal (fd=0).\r\n```\r\n\r\nDo you know where I can get started on fixing this? It seems that the tty available from docker is not sufficient?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/794", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/794/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/794/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/794/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/794", "id": 384006441, "node_id": "MDU6SXNzdWUzODQwMDY0NDE=", "number": 794, "title": "Multi Threading with a single progress bar", "user": {"login": "makitos666", "id": 3305564, "node_id": "MDQ6VXNlcjMzMDU1NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3305564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/makitos666", "html_url": "https://github.com/makitos666", "followers_url": "https://api.github.com/users/makitos666/followers", "following_url": "https://api.github.com/users/makitos666/following{/other_user}", "gists_url": "https://api.github.com/users/makitos666/gists{/gist_id}", "starred_url": "https://api.github.com/users/makitos666/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/makitos666/subscriptions", "organizations_url": "https://api.github.com/users/makitos666/orgs", "repos_url": "https://api.github.com/users/makitos666/repos", "events_url": "https://api.github.com/users/makitos666/events{/privacy}", "received_events_url": "https://api.github.com/users/makitos666/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-24T17:22:37Z", "updated_at": "2018-11-25T21:24:57Z", "closed_at": "2018-11-25T21:24:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "The documentation is a bit scarce, and I would like to know if you can make a single progress bar with parallel tasks.\r\n\r\nI mean, is there any way to do something like: \"update_pb (int i)\"?\r\nSo I can have different threads, knowing in advance the total of iterations that I will do between all the threads and adding 1 to the variable \"i\" I can handle the bar.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/791", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/791/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/791/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/791", "id": 382590664, "node_id": "MDU6SXNzdWUzODI1OTA2NjQ=", "number": 791, "title": "Style colors don't work with complete_style=CompleteStyle.READLINE_LIKE?", "user": {"login": "hacksterous", "id": 16697108, "node_id": "MDQ6VXNlcjE2Njk3MTA4", "avatar_url": "https://avatars0.githubusercontent.com/u/16697108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hacksterous", "html_url": "https://github.com/hacksterous", "followers_url": "https://api.github.com/users/hacksterous/followers", "following_url": "https://api.github.com/users/hacksterous/following{/other_user}", "gists_url": "https://api.github.com/users/hacksterous/gists{/gist_id}", "starred_url": "https://api.github.com/users/hacksterous/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hacksterous/subscriptions", "organizations_url": "https://api.github.com/users/hacksterous/orgs", "repos_url": "https://api.github.com/users/hacksterous/repos", "events_url": "https://api.github.com/users/hacksterous/events{/privacy}", "received_events_url": "https://api.github.com/users/hacksterous/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984992, "node_id": "MDU6TGFiZWw3Njk4NDk5Mg==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-20T10:14:34Z", "updated_at": "2018-12-18T17:02:20Z", "closed_at": "2018-12-18T17:02:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "yield Completion(text, start_position=-(len(matchWord)), style='fg:green') does not seem to be working when I have\r\n\r\nprompt (message,\r\n\t\tcompleter=completer, \r\n\t\thistory=self.history, \r\n\t\tcomplete_while_typing=True, \r\n\t\tauto_suggest=suggestion,\r\n\t\tcomplete_style=CompleteStyle.READLINE_LIKE,\r\n\t\tcomplete_in_thread=True\r\n\t)\r\n\r\nbut works with CompleteStyle.COLUMN", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/789", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/789/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/789/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/789/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/789", "id": 380753362, "node_id": "MDU6SXNzdWUzODA3NTMzNjI=", "number": 789, "title": "Unexpected way to handle non-breakable space \\xa0", "user": {"login": "zakora", "id": 106620, "node_id": "MDQ6VXNlcjEwNjYyMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/106620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zakora", "html_url": "https://github.com/zakora", "followers_url": "https://api.github.com/users/zakora/followers", "following_url": "https://api.github.com/users/zakora/following{/other_user}", "gists_url": "https://api.github.com/users/zakora/gists{/gist_id}", "starred_url": "https://api.github.com/users/zakora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zakora/subscriptions", "organizations_url": "https://api.github.com/users/zakora/orgs", "repos_url": "https://api.github.com/users/zakora/repos", "events_url": "https://api.github.com/users/zakora/events{/privacy}", "received_events_url": "https://api.github.com/users/zakora/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-14T15:33:07Z", "updated_at": "2018-11-16T08:46:45Z", "closed_at": "2018-11-16T08:46:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I reported an issue against IPython recently (ipython/ipython#11490) due to a weird behavior, as can be seen on this gif:\r\n![screencap](https://user-images.githubusercontent.com/106620/48313373-d5001e80-e5bb-11e8-9903-d26fd47c7447.gif)\r\n\r\n**How to reproduce the bug:**\r\n1. have a prompt managed by prompt_toolkit\r\n2. insert the non-breakable space character (\\xa0)\r\n\r\n**What I expected:** A non-breakable space character appears\r\n**Instead, what happens:** the `&` character appears on the screen\r\n\r\nAt first, I thought that the non-breakable space was replaced by `&` in my input. As it turns out, it is only the displayed character that is affected. As we can see on the gif above, the string variable still contains the non-breakable space after the prompt has processed the input, even if the input appears as `a = \"&\"`.\r\n\r\n**Cause of the bug:** Digging into this bug, I found out that IPython was using prompt_toolkit to manage its prompt. Then, I found that prompt_toolkit explicitly converts the non-breakable space to `&`: https://github.com/prompt-toolkit/python-prompt-toolkit/blob/05fc17b030ba3c49baf4539401aeca2910af0909/prompt_toolkit/layout/screen.py#L103\r\nApparently this was added in efdec6ea48e3e1a5a5095a170424ca5973df07f1, along with other character substitutions.\r\n\r\n**Discussion:**\r\nReading a bit about this code, I think the intention is to transform some characters that are hard to read into readable ones. However, I find the substitution of `\\xa0` into `&` not ideal since `&` is a common character that can be in an input.\r\nFurthermore, the code mentions that the substitutions are based on vim: \r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/05fc17b030ba3c49baf4539401aeca2910af0909/prompt_toolkit/layout/screen.py#L68\r\nbut when I did some tests in vim, the non-breakable space doesn't appear as `&`.\r\n\r\nCould you give me the bigger picture for the reason to replace `\\xa0` with `&`? I might be missing some context to grasp the reason it was done this way.\r\n\r\nIn my case, seeing `&` instead of a space was really confusing. I understand the need to display special characters, maybe replacing it with `<nbsp>` or `<a0>` would have been less confusing for me.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/788", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/788/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/788/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/788/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/788", "id": 379704069, "node_id": "MDU6SXNzdWUzNzk3MDQwNjk=", "number": 788, "title": "Refresh prompt from custom key binding ", "user": {"login": "ibeex", "id": 1125612, "node_id": "MDQ6VXNlcjExMjU2MTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1125612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibeex", "html_url": "https://github.com/ibeex", "followers_url": "https://api.github.com/users/ibeex/followers", "following_url": "https://api.github.com/users/ibeex/following{/other_user}", "gists_url": "https://api.github.com/users/ibeex/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibeex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibeex/subscriptions", "organizations_url": "https://api.github.com/users/ibeex/orgs", "repos_url": "https://api.github.com/users/ibeex/repos", "events_url": "https://api.github.com/users/ibeex/events{/privacy}", "received_events_url": "https://api.github.com/users/ibeex/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-11-12T10:08:21Z", "updated_at": "2020-08-06T07:30:32Z", "closed_at": "2019-02-19T21:28:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am trying to oweride ctrl+d with custom command, calling command works but after presing c-d prompt and bottom toolbar are same. (commands.exit() changes prompt and bottom toolbar but) They change only if I pres enter, how can I redraw prompt and bottom toolbar from custom binding?\r\n\r\nhere is example code\r\n\r\n``` python\r\ndef shell():\r\n    \"\"\"Repl shell\"\"\"\r\n    print(\"Welcome\")\r\n    prompt = PromptSession(\r\n        history=FileHistory(os.path.join(os.path.expanduser(\"~\"), \".history.txt\"))\r\n    )\r\n    commands = Commands()\r\n    bindings = KeyBindings()\r\n\r\n    @bindings.add(\"c-d\")\r\n    def _(event):\r\n        def print_exit():\r\n            print(commands.exit())\r\n\r\n        run_in_terminal(print_exit)\r\n\r\n    while True:\r\n        try:\r\n            user_input = prompt.prompt(\r\n                commands.prompt,\r\n                auto_suggest=AutoSuggestFromHistory(),\r\n                enable_history_search=True,\r\n                key_bindings=bindings,\r\n                bottom_toolbar=commands.bottom,\r\n            )\r\n            if not user_input:\r\n                continue\r\n            except (EOFError, KeyboardInterrupt):\r\n                break\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/778", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/778/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/778/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/778/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/778", "id": 377016169, "node_id": "MDU6SXNzdWUzNzcwMTYxNjk=", "number": 778, "title": "Python 3.6 and 3.7 support", "user": {"login": "blshkv", "id": 309751, "node_id": "MDQ6VXNlcjMwOTc1MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/309751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blshkv", "html_url": "https://github.com/blshkv", "followers_url": "https://api.github.com/users/blshkv/followers", "following_url": "https://api.github.com/users/blshkv/following{/other_user}", "gists_url": "https://api.github.com/users/blshkv/gists{/gist_id}", "starred_url": "https://api.github.com/users/blshkv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blshkv/subscriptions", "organizations_url": "https://api.github.com/users/blshkv/orgs", "repos_url": "https://api.github.com/users/blshkv/repos", "events_url": "https://api.github.com/users/blshkv/events{/privacy}", "received_events_url": "https://api.github.com/users/blshkv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-03T02:43:59Z", "updated_at": "2018-11-05T21:08:33Z", "closed_at": "2018-11-05T21:08:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I noticed that this software does not support (officially) modern versions of Python,\r\nhttps://github.com/prompt-toolkit/python-prompt-toolkit/blob/master/setup.py#L49\r\n\r\nCould you add it please?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/776", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/776/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/776/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/776", "id": 377004354, "node_id": "MDU6SXNzdWUzNzcwMDQzNTQ=", "number": 776, "title": "Auto-Suggest gets overwritten by previous command with default key bindings", "user": {"login": "MaryWeeb", "id": 16361449, "node_id": "MDQ6VXNlcjE2MzYxNDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/16361449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaryWeeb", "html_url": "https://github.com/MaryWeeb", "followers_url": "https://api.github.com/users/MaryWeeb/followers", "following_url": "https://api.github.com/users/MaryWeeb/following{/other_user}", "gists_url": "https://api.github.com/users/MaryWeeb/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaryWeeb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaryWeeb/subscriptions", "organizations_url": "https://api.github.com/users/MaryWeeb/orgs", "repos_url": "https://api.github.com/users/MaryWeeb/repos", "events_url": "https://api.github.com/users/MaryWeeb/events{/privacy}", "received_events_url": "https://api.github.com/users/MaryWeeb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-03T00:17:20Z", "updated_at": "2018-11-04T11:29:31Z", "closed_at": "2018-11-04T11:29:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/772", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/772/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/772/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/772/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/772", "id": 376468856, "node_id": "MDU6SXNzdWUzNzY0Njg4NTY=", "number": 772, "title": "Support ANSI color codes", "user": {"login": "MaryWeeb", "id": 16361449, "node_id": "MDQ6VXNlcjE2MzYxNDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/16361449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaryWeeb", "html_url": "https://github.com/MaryWeeb", "followers_url": "https://api.github.com/users/MaryWeeb/followers", "following_url": "https://api.github.com/users/MaryWeeb/following{/other_user}", "gists_url": "https://api.github.com/users/MaryWeeb/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaryWeeb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaryWeeb/subscriptions", "organizations_url": "https://api.github.com/users/MaryWeeb/orgs", "repos_url": "https://api.github.com/users/MaryWeeb/repos", "events_url": "https://api.github.com/users/MaryWeeb/events{/privacy}", "received_events_url": "https://api.github.com/users/MaryWeeb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-01T16:30:46Z", "updated_at": "2018-11-02T17:10:50Z", "closed_at": "2018-11-02T17:10:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, it looks like this in prompt_toolkit:\r\n![image](https://user-images.githubusercontent.com/16361449/47865137-b780c700-ddfb-11e8-8f21-f53fbd08e183.png)\r\nBut like this when just using `print()`:\r\n![image](https://user-images.githubusercontent.com/16361449/47865160-c49db600-ddfb-11e8-9624-c618cd189a01.png)\r\nColors are received from a remote and may vary from line to line, so changing to a standard color scheme is not an option.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/770", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/770/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/770/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/770/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/770", "id": 376289518, "node_id": "MDU6SXNzdWUzNzYyODk1MTg=", "number": 770, "title": "Autocompletion does not work on Python2.x(2.7)", "user": {"login": "urain39", "id": 16981964, "node_id": "MDQ6VXNlcjE2OTgxOTY0", "avatar_url": "https://avatars2.githubusercontent.com/u/16981964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urain39", "html_url": "https://github.com/urain39", "followers_url": "https://api.github.com/users/urain39/followers", "following_url": "https://api.github.com/users/urain39/following{/other_user}", "gists_url": "https://api.github.com/users/urain39/gists{/gist_id}", "starred_url": "https://api.github.com/users/urain39/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urain39/subscriptions", "organizations_url": "https://api.github.com/users/urain39/orgs", "repos_url": "https://api.github.com/users/urain39/repos", "events_url": "https://api.github.com/users/urain39/events{/privacy}", "received_events_url": "https://api.github.com/users/urain39/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-01T07:52:20Z", "updated_at": "2018-11-17T03:19:11Z", "closed_at": "2018-11-17T03:19:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Seems like `completer` does not work on Python2.x.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/769", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/769/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/769/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/769/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/769", "id": 376186809, "node_id": "MDU6SXNzdWUzNzYxODY4MDk=", "number": 769, "title": "Confused about usage of Applications", "user": {"login": "MaryWeeb", "id": 16361449, "node_id": "MDQ6VXNlcjE2MzYxNDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/16361449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaryWeeb", "html_url": "https://github.com/MaryWeeb", "followers_url": "https://api.github.com/users/MaryWeeb/followers", "following_url": "https://api.github.com/users/MaryWeeb/following{/other_user}", "gists_url": "https://api.github.com/users/MaryWeeb/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaryWeeb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaryWeeb/subscriptions", "organizations_url": "https://api.github.com/users/MaryWeeb/orgs", "repos_url": "https://api.github.com/users/MaryWeeb/repos", "events_url": "https://api.github.com/users/MaryWeeb/events{/privacy}", "received_events_url": "https://api.github.com/users/MaryWeeb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-31T22:37:53Z", "updated_at": "2018-11-01T18:05:46Z", "closed_at": "2018-11-01T18:05:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For context, I'm working on an application that takes user input (using prompt_toolkit) and listens to a feed and prints it. This is all done using Asuncion, using a read/write socket pair.\r\n\r\nThe issue I experienced was that the print() calls sometimes filled in the text of the prompt, which I quite obviously wanted to avoid.\r\n\r\nI looked into urwid, which I'd used before, but couldn't find a way to use it with prompt_toolkit.\r\n\r\nThen I stumbled upon the Applications in the documentation, but I just couldn't figure out how to use them.\r\n\r\nThe concept is to have a box (urwid.LineBox) as main screen, with a scrollable list of commands executed and feed received.\r\nBelow that would be a small box for input, similar to what I currently use prompt() for.\r\n\r\nRight now I'm wondering not only what elements I need to use, but also how I update them, how I get input, make users able to select from only the scrollable list, et cetera.\r\n\r\nIf you could give me some directions in how my code should look or what part of the documentation I should look, any related examples or even a project that has done this before, that would be greatly appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/765", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/765/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/765/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/765/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/765", "id": 374586265, "node_id": "MDU6SXNzdWUzNzQ1ODYyNjU=", "number": 765, "title": "importing pygments style raises exception (py 2.7)", "user": {"login": "rofl0r", "id": 341425, "node_id": "MDQ6VXNlcjM0MTQyNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/341425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rofl0r", "html_url": "https://github.com/rofl0r", "followers_url": "https://api.github.com/users/rofl0r/followers", "following_url": "https://api.github.com/users/rofl0r/following{/other_user}", "gists_url": "https://api.github.com/users/rofl0r/gists{/gist_id}", "starred_url": "https://api.github.com/users/rofl0r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rofl0r/subscriptions", "organizations_url": "https://api.github.com/users/rofl0r/orgs", "repos_url": "https://api.github.com/users/rofl0r/repos", "events_url": "https://api.github.com/users/rofl0r/events{/privacy}", "received_events_url": "https://api.github.com/users/rofl0r/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-27T00:22:10Z", "updated_at": "2018-10-30T22:45:16Z", "closed_at": "2018-10-30T22:45:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "```py\r\n        #style = Style.from_dict(get_style_by_name(u'borland').styles),\r\n        #style = style_from_pygments_dict(get_style_by_name(u'monokai').styles) \r\n        style = style_from_pygments_cls(get_style_by_name(u'monokai'))\r\n        \r\n        controls['codeview'] = TextArea(\r\n                text = u'',\r\n                read_only = True,\r\n                scrollbar = True,\r\n                line_numbers = True,\r\n                wrap_lines = False,\r\n                lexer=PygmentsLexer(CLexer),\r\n                style = style,  \r\n        ) \r\n\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"gdb.py\", line 180, in <module>\r\n    app = setup_app()\r\n  File \"gdb.py\", line 120, in setup_app\r\n    style = style,\r\n  File \"/lib/python2.7/site-packages/prompt_toolkit/widgets/base.py\", line 197, in __init__\r\n    style = 'class:text-area ' + style\r\nTypeError: coercing to Unicode: need string or buffer, Style found\r\n```\r\nthis is using the latest release 2.0.6", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/763", "id": 374187859, "node_id": "MDU6SXNzdWUzNzQxODc4NTk=", "number": 763, "title": "input_dialog.py example swallows ENTER", "user": {"login": "rofl0r", "id": 341425, "node_id": "MDQ6VXNlcjM0MTQyNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/341425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rofl0r", "html_url": "https://github.com/rofl0r", "followers_url": "https://api.github.com/users/rofl0r/followers", "following_url": "https://api.github.com/users/rofl0r/following{/other_user}", "gists_url": "https://api.github.com/users/rofl0r/gists{/gist_id}", "starred_url": "https://api.github.com/users/rofl0r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rofl0r/subscriptions", "organizations_url": "https://api.github.com/users/rofl0r/orgs", "repos_url": "https://api.github.com/users/rofl0r/repos", "events_url": "https://api.github.com/users/rofl0r/events{/privacy}", "received_events_url": "https://api.github.com/users/rofl0r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-26T00:59:47Z", "updated_at": "2018-11-01T04:56:27Z", "closed_at": "2018-11-01T04:56:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "if you enter text, and press ENTER, the input will be deleted. if you use TAB instead to jump to the OK button, it will be preserved (same applies to password dialog example)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/759", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/759/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/759/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/759/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/759", "id": 373007452, "node_id": "MDU6SXNzdWUzNzMwMDc0NTI=", "number": 759, "title": "Fullscreen App: Async Button handler", "user": {"login": "sander76", "id": 1688712, "node_id": "MDQ6VXNlcjE2ODg3MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1688712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sander76", "html_url": "https://github.com/sander76", "followers_url": "https://api.github.com/users/sander76/followers", "following_url": "https://api.github.com/users/sander76/following{/other_user}", "gists_url": "https://api.github.com/users/sander76/gists{/gist_id}", "starred_url": "https://api.github.com/users/sander76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sander76/subscriptions", "organizations_url": "https://api.github.com/users/sander76/orgs", "repos_url": "https://api.github.com/users/sander76/repos", "events_url": "https://api.github.com/users/sander76/events{/privacy}", "received_events_url": "https://api.github.com/users/sander76/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-23T13:43:39Z", "updated_at": "2020-06-06T05:10:17Z", "closed_at": "2018-11-01T12:15:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I guess it is not possible to add an asyncio coroutine as a handler to a `Button`.\r\nI tried subclassing `Button` like this:\r\n\r\n```\r\nclass AsyncButton(Button):\r\n    def _get_key_bindings(self):\r\n        \" Key bindings for the Button. \"\r\n        kb = KeyBindings()\r\n\r\n        @kb.add(' ')\r\n        @kb.add('enter')\r\n        async def _(event):\r\n            if self.handler is not None:\r\n                await self.handler()\r\n\r\n        return kb\r\n```\r\n\r\nBut that gives an error. Following this logic I should be creating an asyncio `KeyBindings` class shouldn't I?\r\n\r\nSander.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/757", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/757/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/757/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/757/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/757", "id": 371134664, "node_id": "MDU6SXNzdWUzNzExMzQ2NjQ=", "number": 757, "title": "cli.run() equivalent in prompt_toolkit v2", "user": {"login": "s4shyam95", "id": 1823644, "node_id": "MDQ6VXNlcjE4MjM2NDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1823644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s4shyam95", "html_url": "https://github.com/s4shyam95", "followers_url": "https://api.github.com/users/s4shyam95/followers", "following_url": "https://api.github.com/users/s4shyam95/following{/other_user}", "gists_url": "https://api.github.com/users/s4shyam95/gists{/gist_id}", "starred_url": "https://api.github.com/users/s4shyam95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s4shyam95/subscriptions", "organizations_url": "https://api.github.com/users/s4shyam95/orgs", "repos_url": "https://api.github.com/users/s4shyam95/repos", "events_url": "https://api.github.com/users/s4shyam95/events{/privacy}", "received_events_url": "https://api.github.com/users/s4shyam95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984994, "node_id": "MDU6TGFiZWw3Njk4NDk5NA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-17T15:25:08Z", "updated_at": "2018-10-31T16:13:38Z", "closed_at": "2018-10-31T16:13:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have noticed the app.run() doesn't have a default accept_handler attached to it. cli.run() used to return the prompt the user typed in.\r\nI know I could use prompt(from session) or just PromptSession, but I don't see how I would do it with a layout already in place.\r\n\r\nThanks for your help!", "performed_via_github_app": null, "score": 1.0}]}