{"total_count": 88, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ansible-community/ara/issues/157", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/157/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/157/events", "html_url": "https://github.com/ansible-community/ara/issues/157", "id": 681060819, "node_id": "MDU6SXNzdWU2ODEwNjA4MTk=", "number": 157, "title": "ARA-server communication with mysql over ssl", "user": {"login": "smarcu92", "id": 69853637, "node_id": "MDQ6VXNlcjY5ODUzNjM3", "avatar_url": "https://avatars1.githubusercontent.com/u/69853637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smarcu92", "html_url": "https://github.com/smarcu92", "followers_url": "https://api.github.com/users/smarcu92/followers", "following_url": "https://api.github.com/users/smarcu92/following{/other_user}", "gists_url": "https://api.github.com/users/smarcu92/gists{/gist_id}", "starred_url": "https://api.github.com/users/smarcu92/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smarcu92/subscriptions", "organizations_url": "https://api.github.com/users/smarcu92/orgs", "repos_url": "https://api.github.com/users/smarcu92/repos", "events_url": "https://api.github.com/users/smarcu92/events{/privacy}", "received_events_url": "https://api.github.com/users/smarcu92/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}, {"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/ara/milestones/1", "html_url": "https://github.com/ansible-community/ara/milestone/1", "labels_url": "https://api.github.com/repos/ansible-community/ara/milestones/1/labels", "id": 5768979, "node_id": "MDk6TWlsZXN0b25lNTc2ODk3OQ==", "number": 1, "title": "1.5", "description": "Issues that should be resolved before 1.5", "creator": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 4, "state": "open", "created_at": "2020-08-13T13:17:45Z", "updated_at": "2020-08-22T09:16:26Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2020-08-18T13:52:50Z", "updated_at": "2020-08-22T09:16:26Z", "closed_at": "2020-08-22T09:16:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "## What component is this about ?\r\n**ara-server**\r\n\r\n## What is your ARA installation like ?\r\n**ara:** 1.4.2 Running in a docker container hosted in Azure\r\n**ansible:** 2.9.6\r\n**django.db.backends.mysql**\r\n**Database**: MariaDB in Azure\r\n\r\n## What is happening ?\r\nI have ara-server setup to communicate with MariaDB. The settings used by ara to communicate with the db are declared using env variables. \r\n```\r\n      ARA_DATABASE_ENGINE: django.db.backends.mysql\r\n      ARA_DATABASE_HOST: \"{{ ara_db_fqdn }}\"\r\n      ARA_DATABASE_NAME: ara\r\n      ...\r\n```\r\nEverything works fine, until I enable SSL on MariaDB, at which point ARA crashes. Telling me that I need to configure SSL.\r\n\r\nLooking over the ARA documentation, I don't see a clear way of doing the SSL setup for ARA.\r\n\r\nLooking over the Azure documentation on how to configure SSL connectivity between applications and MariaDB \r\n[https://docs.microsoft.com/en-us/azure/mariadb/howto-configure-ssl](url)\r\nI need to: \r\n> download the **BaltimoreCyberTrust pem**\r\n> add the following to the config files of ARA  \r\n    Using Python (PyMySQL)  (ssl={'ca': '/var/www/html/BaltimoreCyberTrustRoot.crt.pem'})\r\n\r\nThe problem is that there's no environment variable or field in the settings.yaml to load the certificate.\r\n\r\nAlso the **Options** filed needed for setting-up the SSL connection is missing from the settings.py in Ara.\r\n/usr/local/lib/python3.7/site-packages/ara/server/settings.py\r\nOriginal\r\n\r\n```\r\nDATABASES = {\r\n     \"default\": {\r\n         \"ENGINE\": DATABASE_ENGINE,\r\n         \"NAME\": DATABASE_NAME,\r\n         \"USER\": DATABASE_USER,\r\n         \"PASSWORD\": DATABASE_PASSWORD,\r\n         \"HOST\": DATABASE_HOST,\r\n         \"PORT\": DATABASE_PORT,\r\n         \"CONN_MAX_AGE\": DATABASE_CONN_MAX_AGE,\r\n     }\r\n }\r\n```\r\n\r\nTo get this working I modified the file to include the Options field and everything works as expected.\r\n```\r\n        \"PORT\": DATABASE_PORT,                                                                                   \r\n        \"OPTIONS\": {                                                                                             \r\n            'ssl': {                                                                                             \r\n                'ca': '/path/to/cert/BaltimoreCyberTrustRoot.crt.pem',                                         \r\n            },                                                                                                   \r\n        },                                                                                                       \r\n        \"CONN_MAX_AGE\": DATABASE_CONN_MAX_AGE, \r\n```\r\nI'm not ok with this solution... am I missing something? Can this be done using existing settings or variables? If not it would be great if the Options field would be included in the settings.yaml and retrievable via env variables.\r\n**Thanks!**", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/156", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/156/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/156/events", "html_url": "https://github.com/ansible-community/ara/issues/156", "id": 680786752, "node_id": "MDU6SXNzdWU2ODA3ODY3NTI=", "number": 156, "title": "Invalid syntax on line 36 in ara_default.py ; due to which the ansible playbook is skipping execution. ", "user": {"login": "crkg", "id": 53430341, "node_id": "MDQ6VXNlcjUzNDMwMzQx", "avatar_url": "https://avatars1.githubusercontent.com/u/53430341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crkg", "html_url": "https://github.com/crkg", "followers_url": "https://api.github.com/users/crkg/followers", "following_url": "https://api.github.com/users/crkg/following{/other_user}", "gists_url": "https://api.github.com/users/crkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/crkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crkg/subscriptions", "organizations_url": "https://api.github.com/users/crkg/orgs", "repos_url": "https://api.github.com/users/crkg/repos", "events_url": "https://api.github.com/users/crkg/events{/privacy}", "received_events_url": "https://api.github.com/users/crkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-18T08:04:09Z", "updated_at": "2020-08-21T20:25:33Z", "closed_at": "2020-08-21T20:25:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Team, \r\n\r\nwhen i am trying to call an sample asnible playbook the callback plugin is skipped due an invalid syntax. definitely it doesnt seems to be any syntax issue. \r\n\r\nlook at the below error: \r\n\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\n [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\r\n\r\nLoading callback plugin default of type stdout, v2.0 from /usr/lib/python2.6/site-packages/ansible/plugins/callback/default.pyc\r\n **[WARNING]: Skipping plugin (/git/ara-callback-plugin/myenv/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py) as it seems to be\r\ninvalid: invalid syntax (ara_default.py, line 36)**\r\n\r\ncan you please help further, my use case is i need to record the ansible execution into the ARA database but its currently skipping.\r\n\r\n<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\n\r\n## What is your ARA installation like ?\r\n<!-- What version of Ansible and ARA ? Did you install from source or from PyPi ? With an Ansible role ? In a virtualenv or a container ? Which Linux distribution ? Which database driver ? -->\r\n<!-- Feel free to include any other installation details that could be relevant to this report -->\r\n\r\n\r\n## What is happening ?\r\n<!-- If reporting an issue with the API, please include relevant logs by setting ARA_DEBUG to True and ARA_LOG_LEVEL to DEBUG -->\r\n<!-- If reporting an exception from an Ansible role or plugin, please include the full error or exception trace by running ansible-playbook with \"-vvv\" -->\r\n\r\n\r\n## What should be happening ?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/152", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/152/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/152/events", "html_url": "https://github.com/ansible-community/ara/issues/152", "id": 666667268, "node_id": "MDU6SXNzdWU2NjY2NjcyNjg=", "number": 152, "title": "unable to use ara callback plugin under python 3.5", "user": {"login": "kalyanbhonagiri16", "id": 16315401, "node_id": "MDQ6VXNlcjE2MzE1NDAx", "avatar_url": "https://avatars3.githubusercontent.com/u/16315401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kalyanbhonagiri16", "html_url": "https://github.com/kalyanbhonagiri16", "followers_url": "https://api.github.com/users/kalyanbhonagiri16/followers", "following_url": "https://api.github.com/users/kalyanbhonagiri16/following{/other_user}", "gists_url": "https://api.github.com/users/kalyanbhonagiri16/gists{/gist_id}", "starred_url": "https://api.github.com/users/kalyanbhonagiri16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kalyanbhonagiri16/subscriptions", "organizations_url": "https://api.github.com/users/kalyanbhonagiri16/orgs", "repos_url": "https://api.github.com/users/kalyanbhonagiri16/repos", "events_url": "https://api.github.com/users/kalyanbhonagiri16/events{/privacy}", "received_events_url": "https://api.github.com/users/kalyanbhonagiri16/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-28T00:30:44Z", "updated_at": "2020-07-28T02:15:54Z", "closed_at": "2020-07-28T02:15:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\nThanks for the tool ARA. I have been checking on this for past few days and its a great one .\r\n## What component is this about ?\r\n$ ansible-playbook -i  test_inventory uptime.yaml -e 'ansible_python_interpreter=/usr/bin/python3.7'\r\n[WARNING]: Skipping plugin (/Users/kbhonagiri/Library/Python/3.7/lib/python/site-packages/ara/plugins/callback/ara_default.py) as it seems to be invalid: No\r\nmodule named 'requests'\r\n\r\n\r\n\r\n## What is your ARA installation like ?\r\n ansible --version\r\nansible 2.9.11\r\n  config file = /Users/kbhonagiri/.ansible/ansible.cfg\r\n  configured module search path = ['/Users/kbhonagiri/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/kbhonagiri/Library/Python/3.7/lib/python/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, Apr 24 2020, 18:51:23) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n\r\n\r\n## What is happening ?\r\nI have a remote ARA running on http://xyz:8000 and trying to connect ansible from my laptop to populate results on xyz:8000. Its not reporting.\r\n\r\n## What should be happening ?\r\n\r\nARA reporting is not updated", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/151", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/151/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/151/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/151/events", "html_url": "https://github.com/ansible-community/ara/issues/151", "id": 664862734, "node_id": "MDU6SXNzdWU2NjQ4NjI3MzQ=", "number": 151, "title": "centos8 container images: use python-mysql once it's available on epel", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}, {"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-24T01:40:01Z", "updated_at": "2020-08-13T13:16:12Z", "closed_at": "2020-08-13T13:16:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\n``contrib/container-images/centos8*``\r\n\r\n## What is the idea ?\r\n\r\nThere is a build of python-mysql (mysqlclient on pypi) in epel8 that could be nice to use so we don't rely on development dependencies: https://koji.fedoraproject.org/koji/buildinfo?buildID=1540605\r\n\r\nSee all builds here: https://koji.fedoraproject.org/koji/packageinfo?packageID=20643", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/149", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/149/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/149/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/149/events", "html_url": "https://github.com/ansible-community/ara/issues/149", "id": 660404418, "node_id": "MDU6SXNzdWU2NjA0MDQ0MTg=", "number": 149, "title": "API server bug: settings precedence/ordering regression", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2092664766, "node_id": "MDU6TGFiZWwyMDkyNjY0NzY2", "url": "https://api.github.com/repos/ansible-community/ara/labels/built-in%20server/offline%20client", "name": "built-in server/offline client", "color": "12b56b", "default": false, "description": "Related to \"ara-manage runserver\" or the offline API client"}, {"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/ara/milestones/1", "html_url": "https://github.com/ansible-community/ara/milestone/1", "labels_url": "https://api.github.com/repos/ansible-community/ara/milestones/1/labels", "id": 5768979, "node_id": "MDk6TWlsZXN0b25lNTc2ODk3OQ==", "number": 1, "title": "1.5", "description": "Issues that should be resolved before 1.5", "creator": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 4, "state": "open", "created_at": "2020-08-13T13:17:45Z", "updated_at": "2020-08-22T09:16:26Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-07-18T21:55:17Z", "updated_at": "2020-08-13T13:21:37Z", "closed_at": "2020-08-11T01:47:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nDjango API server\r\n\r\n## What is happening ?\r\n\r\nI was working on [importing the Ansible role CI jobs](https://review.opendev.org/#/c/738946/) for the Ansible collection and took the time to investigate why the distributed sqlite job started failing:\r\n![Screenshot from 2020-07-18 17-30-21](https://user-images.githubusercontent.com/1291204/87862292-6345af80-c91c-11ea-971c-2be8b2d7e425.png)\r\n\r\nIt turns out that when using dynaconf>=3.0.0, there seems to be some sort of confusion around where the settings should be and how the settings.yaml file and env variables are reconciled:\r\n![Screenshot from 2020-07-18 17-32-43](https://user-images.githubusercontent.com/1291204/87862325-b9b2ee00-c91c-11ea-8462-88666831812d.png)\r\n\r\nPictured above, we'd expect the data to live in ``~/.ara-tests`` but it wound up in ``~/.ara/server``, the default location.\r\n\r\nIf we [pin dynaconf to <3.0.0](https://review.opendev.org/#/c/741814/), the CI job doesn't fail but there's still something weird about the loading order:\r\n![Screenshot from 2020-07-18 17-35-47](https://user-images.githubusercontent.com/1291204/87862360-3219af00-c91d-11ea-8289-b51d451faba6.png)\r\n\r\nIn both cases, we use the ``ARA_SETTINGS`` environment variable: https://github.com/ansible-community/ara-collection/blob/189aa65dbc28cee082d48421305b31c48236915b/roles/ara_api/tasks/database_engine/django.db.backends.mysql.yaml#L45-L49\r\n\r\nThe bits involved are when the server initializes:\r\nhttps://github.com/ansible-community/ara/blob/22c2043089baec319a9081ee0b850c2343310cdb/ara/server/__main__.py#L40-L44\r\n\r\nWhen ARA_SETTINGS gets loaded:\r\nhttps://github.com/ansible-community/ara/blob/22c2043089baec319a9081ee0b850c2343310cdb/ara/server/settings.py#L36-L38\r\n\r\nBut then we do this, and this might be part of the problem:\r\nhttps://github.com/ansible-community/ara/blob/22c2043089baec319a9081ee0b850c2343310cdb/ara/server/settings.py#L242\r\n\r\n## What should be happening ?\r\n\r\nIt would be nice to figure out the right way to do it so we get the ordering right :+1:", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/147", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/147/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/147/events", "html_url": "https://github.com/ansible-community/ara/issues/147", "id": 650405594, "node_id": "MDU6SXNzdWU2NTA0MDU1OTQ=", "number": 147, "title": "Starting ara shows \"SyntaxError: invalid syntax\" in Ubuntu Xenial", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-03T07:35:48Z", "updated_at": "2020-07-06T06:44:46Z", "closed_at": "2020-07-06T06:44:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nara-manage\r\n\r\n## What is your ARA installation like ?\r\n\r\nBoth Ansible and ARA are installed using `pip`\r\n\r\n```\r\n$ pip list\r\nPackage             Version\r\n------------------- ----------------------\r\nara                 1.4.2\r\n...\r\n```\r\n\r\n```\r\n$ ansible --version\r\nansible 2.9.10\r\n```\r\n\r\n## What is happening ?\r\n\r\nWhen starting the service, an error is displayed:\r\n\r\n```\r\n# /usr/local/bin/ara-manage runserver\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ara-manage\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/ara/server/__main__.py\", line 41, in main\r\n    if not os.path.exists(settings.ARA_SETTINGS):\r\n  File \"/usr/local/lib/python3.5/dist-packages/django/conf/__init__.py\", line 79, in __getattr__\r\n    self._setup(name)\r\n  File \"/usr/local/lib/python3.5/dist-packages/django/conf/__init__.py\", line 66, in _setup\r\n    self._wrapped = Settings(settings_module)\r\n  File \"/usr/local/lib/python3.5/dist-packages/django/conf/__init__.py\", line 157, in __init__\r\n    mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"/usr/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 665, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\r\n  File \"/usr/local/lib/python3.5/dist-packages/ara/server/settings.py\", line 24, in <module>\r\n    from dynaconf import LazySettings\r\n  File \"/usr/local/lib/python3.5/dist-packages/dynaconf/__init__.py\", line 6, in <module>\r\n    from dynaconf.base import LazySettings  # noqa\r\n  File \"/usr/local/lib/python3.5/dist-packages/dynaconf/base.py\", line 130\r\n    if f\"{key.upper()}_FOR_DYNACONF\" in for_dynaconf_keys\r\n                                   ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\n## What should be happening ?\r\n\r\nI was desperately hoping the service would start.\r\n\r\nBy the way, I spotted [ARA](https://www.icloud.com/photos/#0Pfk1xswYoSoOI2YJDr8-Vahw) near my house!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/146", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/146/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/146/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/146/events", "html_url": "https://github.com/ansible-community/ara/issues/146", "id": 649588547, "node_id": "MDU6SXNzdWU2NDk1ODg1NDc=", "number": 146, "title": "ModuleNotFoundError: No module named 'yaml' when running the API server or ara-manage commands", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-02T03:22:33Z", "updated_at": "2020-07-02T19:03:35Z", "closed_at": "2020-07-02T19:03:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\nAPI server\r\n\r\n## What is happening ?\r\n\r\nWhen trying to launch commands with ``ara-manage`` or the API server, ``settings.py`` will raise an exception:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \".tox/linters/bin/ara-manage\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/ara/server/__main__.py\", line 41, in main\r\n    if not os.path.exists(settings.ARA_SETTINGS):\r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/.tox/linters/lib/python3.8/site-packages/django/conf/__init__.py\", line 79, in __getattr__\r\n    self._setup(name)\r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/.tox/linters/lib/python3.8/site-packages/django/conf/__init__.py\", line 66, in _setup\r\n    self._wrapped = Settings(settings_module)\r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/.tox/linters/lib/python3.8/site-packages/django/conf/__init__.py\", line 157, in __init__\r\n    mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/.tox/linters/lib64/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 783, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/ara/server/settings.py\", line 23, in <module>\r\n    import yaml\r\nModuleNotFoundError: No module named 'yaml'\r\n```\r\n\r\nThis is because ``settings.py`` imports yaml (PyYAML) but it stopped being installed automatically with a recent dynaconf release 3.0.0 where they changed to [ruamel.yaml](https://github.com/rochacbruno/dynaconf/commit/d5cf87cbbdf54625ccf1138a4e4c210956791e61) instead. The exception happens because we don't have PyYAML as an explicit dependency so it doesn't get installed anymore.\r\n\r\n## What should be happening ?\r\n\r\nWe don't really mind if we use one or the other because the only thing we use it for is to write a relatively simple ``settings.yaml``\u00a0configuration file so I've submitted a fix where we could also use either: https://review.opendev.org/#/c/738947/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/145", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/145/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/145/events", "html_url": "https://github.com/ansible-community/ara/issues/145", "id": 646207872, "node_id": "MDU6SXNzdWU2NDYyMDc4NzI=", "number": 145, "title": "unable to use ara callback plugin under python 2.7", "user": {"login": "soumya-devops", "id": 37827483, "node_id": "MDQ6VXNlcjM3ODI3NDgz", "avatar_url": "https://avatars2.githubusercontent.com/u/37827483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumya-devops", "html_url": "https://github.com/soumya-devops", "followers_url": "https://api.github.com/users/soumya-devops/followers", "following_url": "https://api.github.com/users/soumya-devops/following{/other_user}", "gists_url": "https://api.github.com/users/soumya-devops/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumya-devops/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumya-devops/subscriptions", "organizations_url": "https://api.github.com/users/soumya-devops/orgs", "repos_url": "https://api.github.com/users/soumya-devops/repos", "events_url": "https://api.github.com/users/soumya-devops/events{/privacy}", "received_events_url": "https://api.github.com/users/soumya-devops/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-26T11:47:45Z", "updated_at": "2020-08-22T03:39:14Z", "closed_at": "2020-08-22T03:39:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "when an running any ansible playbook to record with ara, i getting below warning message like ara.client is not available .\r\n\r\n[WARNING]: Skipping plugin (/home/cubevd1/.local/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py) as it seems to be invalid: No module named ara.clients\r\n\r\nand ansible is using python2 interpreter .\r\n\r\n ansible --version\r\nansible 2.9.10\r\n  config file = None\r\n  configured module search path = [u'/home/cubevd1/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Nov 27 2019, 09:57:45) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39.0.1)].\r\n\r\nso how can i use ara callback plugin under python2.7.\r\n\r\nplease help me on this.\r\n\r\nThanks in advance ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/144", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/144/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/144/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/144/events", "html_url": "https://github.com/ansible-community/ara/issues/144", "id": 644602490, "node_id": "MDU6SXNzdWU2NDQ2MDI0OTA=", "number": 144, "title": "can i record remote server ansible log , with my ara-server", "user": {"login": "soumya-devops", "id": 37827483, "node_id": "MDQ6VXNlcjM3ODI3NDgz", "avatar_url": "https://avatars2.githubusercontent.com/u/37827483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumya-devops", "html_url": "https://github.com/soumya-devops", "followers_url": "https://api.github.com/users/soumya-devops/followers", "following_url": "https://api.github.com/users/soumya-devops/following{/other_user}", "gists_url": "https://api.github.com/users/soumya-devops/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumya-devops/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumya-devops/subscriptions", "organizations_url": "https://api.github.com/users/soumya-devops/orgs", "repos_url": "https://api.github.com/users/soumya-devops/repos", "events_url": "https://api.github.com/users/soumya-devops/events{/privacy}", "received_events_url": "https://api.github.com/users/soumya-devops/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1399379482, "node_id": "MDU6TGFiZWwxMzk5Mzc5NDgy", "url": "https://api.github.com/repos/ansible-community/ara/labels/needs%20information", "name": "needs information", "color": "fce42a", "default": false, "description": "Needs more information to be triaged properly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-24T13:10:20Z", "updated_at": "2020-07-18T22:09:50Z", "closed_at": "2020-07-18T22:09:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to record remote host ansible logs . with my ara-server.\r\nso how can i configure it. can you please help me on this .\r\n\r\nThanks and regards \r\nSoumya", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/142", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/142/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/142/events", "html_url": "https://github.com/ansible-community/ara/issues/142", "id": 641773811, "node_id": "MDU6SXNzdWU2NDE3NzM4MTE=", "number": 142, "title": "ara.clients module not found.", "user": {"login": "soumya-devops", "id": 37827483, "node_id": "MDQ6VXNlcjM3ODI3NDgz", "avatar_url": "https://avatars2.githubusercontent.com/u/37827483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumya-devops", "html_url": "https://github.com/soumya-devops", "followers_url": "https://api.github.com/users/soumya-devops/followers", "following_url": "https://api.github.com/users/soumya-devops/following{/other_user}", "gists_url": "https://api.github.com/users/soumya-devops/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumya-devops/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumya-devops/subscriptions", "organizations_url": "https://api.github.com/users/soumya-devops/orgs", "repos_url": "https://api.github.com/users/soumya-devops/repos", "events_url": "https://api.github.com/users/soumya-devops/events{/privacy}", "received_events_url": "https://api.github.com/users/soumya-devops/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-19T07:39:52Z", "updated_at": "2020-07-18T22:11:25Z", "closed_at": "2020-07-18T22:11:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "i have installed ara in my centos 7 .  when i am running a ansible playbook to record . it giving the below warning message.\r\n\r\n[WARNING]: Skipping plugin (/usr/local/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py) as it seems to be invalid: No module named ara.clients\r\n\r\nplease can you help me on this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/141", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/141/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/141/events", "html_url": "https://github.com/ansible-community/ara/issues/141", "id": 641403645, "node_id": "MDU6SXNzdWU2NDE0MDM2NDU=", "number": 141, "title": "ara-manage: command not found", "user": {"login": "soumya-devops", "id": 37827483, "node_id": "MDQ6VXNlcjM3ODI3NDgz", "avatar_url": "https://avatars2.githubusercontent.com/u/37827483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumya-devops", "html_url": "https://github.com/soumya-devops", "followers_url": "https://api.github.com/users/soumya-devops/followers", "following_url": "https://api.github.com/users/soumya-devops/following{/other_user}", "gists_url": "https://api.github.com/users/soumya-devops/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumya-devops/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumya-devops/subscriptions", "organizations_url": "https://api.github.com/users/soumya-devops/orgs", "repos_url": "https://api.github.com/users/soumya-devops/repos", "events_url": "https://api.github.com/users/soumya-devops/events{/privacy}", "received_events_url": "https://api.github.com/users/soumya-devops/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-18T17:07:36Z", "updated_at": "2020-06-22T03:34:53Z", "closed_at": "2020-06-21T21:01:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed ARA from pypi.\r\ni followed the doc https://ara.readthedocs.io/en/latest/installation.html to install it and i installed it successfully.\r\nbut when i am try to run ara-manage cmd. it's giving error like -bash: ara-manage: command not found.\r\n\r\nplease help me on this .\r\n\r\nThanks and regards\r\nsoumya\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/140", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/140/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/140/events", "html_url": "https://github.com/ansible-community/ara/issues/140", "id": 628538870, "node_id": "MDU6SXNzdWU2Mjg1Mzg4NzA=", "number": 140, "title": "Missing pbr dependency on Fedora and EL packaging", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-01T15:41:17Z", "updated_at": "2020-06-02T13:36:13Z", "closed_at": "2020-06-02T13:36:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nPackaging for ARA on Fedora and EL\r\n\r\n## What is happening ?\r\n\r\npbr is listed as a buildrequires but not as a requires in the packaging: https://src.fedoraproject.org/rpms/ara/blob/f32/f/ara.spec\r\n\r\nThis can lead to runtime exceptions on missing pbr if it has not been installed through other dependencies.\r\n\r\n## What should be happening ?\r\n\r\npbr is a dependency and should be required.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/135", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/135/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/135/events", "html_url": "https://github.com/ansible-community/ara/issues/135", "id": 621714512, "node_id": "MDU6SXNzdWU2MjE3MTQ1MTI=", "number": 135, "title": "ara-web console is not loading HTML", "user": {"login": "hritz220", "id": 55184565, "node_id": "MDQ6VXNlcjU1MTg0NTY1", "avatar_url": "https://avatars0.githubusercontent.com/u/55184565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hritz220", "html_url": "https://github.com/hritz220", "followers_url": "https://api.github.com/users/hritz220/followers", "following_url": "https://api.github.com/users/hritz220/following{/other_user}", "gists_url": "https://api.github.com/users/hritz220/gists{/gist_id}", "starred_url": "https://api.github.com/users/hritz220/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hritz220/subscriptions", "organizations_url": "https://api.github.com/users/hritz220/orgs", "repos_url": "https://api.github.com/users/hritz220/repos", "events_url": "https://api.github.com/users/hritz220/events{/privacy}", "received_events_url": "https://api.github.com/users/hritz220/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813941, "node_id": "MDU6TGFiZWwzODk4MTM5NDE=", "url": "https://api.github.com/repos/ansible-community/ara/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}, {"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-20T12:17:08Z", "updated_at": "2020-06-06T19:23:48Z", "closed_at": "2020-06-06T16:00:31Z", "author_association": "NONE", "active_lock_reason": null, "body": " I\u2019m using ARA with CI. I\u2019m generating a new sqlite file for every deployment job.\r\nHere is the set up. Installed ara with API server dependencies\r\n```\r\npython3 -m pip install --user ansible \"ara[server]\"\r\nexport ANSIBLE_CALLBACK_PLUGINS=\"$(python3 -m ara.setup.callback_plugins)\"\r\n```\r\nUpdated settings.yml\r\n`DISTRIBUTED_SQLITE: true`\r\nStarted the server\r\n`ara-manage runserver`\r\nexecuted the playbook\r\n`ansible-playbook -vvvv test.yml`\r\ncopied the ansible.sqlite from ~/.ara/server to /var/www/logs/rep1/ara-report/ansible.sqlite\r\nwhen I hit the URL: [](http://localhost:8000/rep1/ara-report)\r\n```\r\n[16/May/2020 15:20:51] \"GET /rep1/ara-report HTTP/1.1\" 200 15783\r\n2020-05-16 15:20:51,591 WARNING ara.server.wsgi: Ignoring request: URL does not contain delegated prefix (ara-report)\r\n2020-05-16 15:20:51,592 WARNING ara.server.wsgi: Ignoring request: URL does not contain delegated prefix (ara-report)\r\n[16/May/2020 15:20:51] \"GET /rep1/static/css/ara.css HTTP/1.1\" 404 77\r\n[16/May/2020 15:20:51] \"GET /rep1/static/css/patternfly.min.css HTTP/1.1\" 404 77\r\n2020-05-16 15:20:51,601 WARNING ara.server.wsgi: Ignoring request: URL does not contain delegated prefix (ara-report)\r\n[16/May/2020 15:20:51] \"GET /rep1/static/images/logo.svg HTTP/1.1\" 404 77\r\n```\r\n\r\n<img width=\"1440\" alt=\"Screen Shot 2020-05-16 at 3 43 55 PM\" src=\"https://user-images.githubusercontent.com/55184565/82444916-8f31e980-9ac1-11ea-9a24-bf68eabca5db.png\">\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/134", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/134/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/134/events", "html_url": "https://github.com/ansible-community/ara/issues/134", "id": 620365289, "node_id": "MDU6SXNzdWU2MjAzNjUyODk=", "number": 134, "title": "Ara offline mode not working\u2026", "user": {"login": "xenlo", "id": 4190073, "node_id": "MDQ6VXNlcjQxOTAwNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4190073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xenlo", "html_url": "https://github.com/xenlo", "followers_url": "https://api.github.com/users/xenlo/followers", "following_url": "https://api.github.com/users/xenlo/following{/other_user}", "gists_url": "https://api.github.com/users/xenlo/gists{/gist_id}", "starred_url": "https://api.github.com/users/xenlo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xenlo/subscriptions", "organizations_url": "https://api.github.com/users/xenlo/orgs", "repos_url": "https://api.github.com/users/xenlo/repos", "events_url": "https://api.github.com/users/xenlo/events{/privacy}", "received_events_url": "https://api.github.com/users/xenlo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-18T17:01:15Z", "updated_at": "2020-05-27T13:06:49Z", "closed_at": "2020-05-27T00:49:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "## What component is this about ?\r\n- Ara offline\r\n\r\n## What is your ARA installation like ?\r\nWe are moving from ara 0.16 to ara 1.4.0. It's installed from PyPi in a virtualenv with pip 20.1 and Python v3.7.6.\r\n\r\nThe following output comes from my Fedora 30 VM I use for my Ansible roles and playbook developments. But has been reproduced on the Debian 9 workstation from my colleague. He used a Python v3.5.3 and the rest of the virtualenv is the same (ara 1.4.0).\r\n\r\n## What is happening ?\r\n\r\nWhen playing [a simple playbook](https://gist.github.com/xenlo/9d3c445a4dbbebd453c4598861fd416a#file-set_local_facts-yml) I get:\r\n- Lot's of warning\r\n  ```\r\n  [WARNING]: Failure using method (v2_playbook_on_start) in callback plugin (<ansible.plugins.callback.ara_default.CallbackModule object at 0x7fa69243efd0>): HTTPConnectionPool(host='localhost', port=54149): Max retries exceeded with url: /api/v1/playbooks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa68da4d390>: Failed to establish a new connection: [Errno 111] Connection refused'))\r\n  [WARNING]: Failure using method (v2_playbook_on_play_start) in callback plugin (<ansible.plugins.callback.ara_default.CallbackModule object at 0x7fa69243efd0>): 'NoneType' object is not subscriptable\r\n  [WARNING]: Failure using method (v2_playbook_on_task_start) in callback plugin (<ansible.plugins.callback.ara_default.CallbackModule object at 0x7fa69243efd0>): 'NoneType' object is not subscriptable\r\n  [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin (<ansible.plugins.callback.ara_default.CallbackModule object at 0x7fa69243efd0>): 'NoneType' object is not subscriptable\r\n  [WARNING]: Failure using method (v2_runner_on_failed) in callback plugin (<ansible.plugins.callback.ara_default.CallbackModule object at 0x7fa69243efd0>): 'NoneType' object is not subscriptable\r\n  [WARNING]: Failure using method (v2_playbook_on_stats) in callback plugin (<ansible.plugins.callback.ara_default.CallbackModule object at 0x7fa69243efd0>): 'NoneType' object is not subscriptable\r\n  ```\r\n\r\n- Too much verbosity, lots of lines repeated twice.\r\n  Example:\r\n  ```\r\n  Monday 18 May 2020  18:52:47 +0200 (0:00:01.681)       0:00:02.097 ************\r\n  2020-05-18 18:52:47,177 INFO ansible: Monday 18 May 2020  18:52:47 +0200 (0:00:01.681)       0:00:02.097 ************\r\n  ok: [my_little_host] => (item={'key': 'my_first_key', 'value': 'my_value'})\r\n  2020-05-18 18:52:49,213 INFO ansible: ok: [my_little_host] => (item={'key': 'my_first_key', 'value': 'my_value'})\r\n  ok: [my_little_host] => (item={'key': 'a_second_key', 'value': ['this', 'is', 'a', 'list']})\r\n  2020-05-18 18:52:50,869 INFO ansible: ok: [my_little_host] => (item={'key': 'a_second_key', 'value': ['this', 'is', 'a', 'list']})\r\n  ok: [my_little_host] => (item={'key': 'third_key', 'value': {'one': 'and try', 'two': 'a dict', 'three': 'too'}})\r\n  2020-05-18 18:52:52,109 INFO ansible: ok: [my_little_host] => (item={'key': 'third_key', 'value': {'one': 'and try', 'two': 'a dict', 'three': 'too'}})\r\n  ```\r\n\r\n- Fails on `ara_record`\r\n  ```\r\n  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=53003): Max retries exceeded with url: /api/v1/plays?uuid=08002738-7772-6bea-a143-0000000000b2 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f71ec803410>: Failed to establish a new connection: [Errno 111] Connection refused'))\r\n  fatal: [my_little_host]: FAILED! =>\r\n  msg: Unexpected failure during module execution.\r\n  stdout: ''\r\n  ```\r\n\r\nYou can found the [full verbose output on the gist](https://gist.github.com/xenlo/9d3c445a4dbbebd453c4598861fd416a#file-set_local_facts-verbose_output) I created for this issue.\r\n\r\n\r\n\r\n\r\n## What should be happening ?\r\nNo warning, clean output like here under, and successful ara_records.\r\n\r\n```\r\nPLAY [Create a structure to store meta data on hosts] ***************************************************************************\r\n\r\nTASK [Ensure directory ansible/facts.d is present] ******************************************************************************\r\nMonday 18 May 2020  18:56:52 +0200 (0:00:00.536)       0:00:00.536 ************\r\nok: [my_little_host]\r\n\r\nTASK [Store the a list of stuffs as custom facts] *******************************************************************************\r\nMonday 18 May 2020  18:56:54 +0200 (0:00:01.740)       0:00:02.277 ************\r\nok: [my_little_host] => (item={'key': 'my_first_key', 'value': 'my_value'})\r\nok: [my_little_host] => (item={'key': 'a_second_key', 'value': ['this', 'is', 'a', 'list']})\r\nok: [my_little_host] => (item={'key': 'third_key', 'value': {'one': 'and try', 'two': 'a dict', 'three': 'too'}})\r\n\r\nTASK [Gather the facts] *********************************************************************************************************\r\nMonday 18 May 2020  18:56:58 +0200 (0:00:04.133)       0:00:06.411 ************\r\nok: [my_little_host]\r\n\r\nTASK [Print the custom facts] ***************************************************************************************************\r\nMonday 18 May 2020  18:57:00 +0200 (0:00:02.670)       0:00:09.081 ************\r\nok: [my_little_host] =>\r\n  ansible_local:\r\n    a_second_key:\r\n    - this\r\n    - is\r\n    - a\r\n    - list\r\n    my_first_key: my_value\r\n    third_key:\r\n      one: and try\r\n      three: too\r\n      two: a dict\r\n\r\nTASK [Log on ara] ****************************************************************************************************************\r\nMonday 18 May 2020  18:57:01 +0200 (0:00:00.474)       0:00:09.556 ************\r\nchanged: [my_little_host]\r\n\r\nPLAY RECAP ***********************************************************************************************************************\r\nmy_little_host                      : ok=5    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nMonday 18 May 2020  18:57:02 +0200 (0:00:00.886)       0:00:10.443 ************\r\n=========================================================================\r\nStore the a list of stuffs as custom facts ------------------------------------------------------------------------------- 4.14s\r\nGather the facts --------------------------------------------------------------------------------------------------------- 2.67s\r\nEnsure directory ansible/facts.d is present ------------------------------------------------------------------------------ 1.74s\r\nLog on ara --------------------------------------------------------------------------------------------------------------- 0.89s\r\nPrint the custom facts --------------------------------------------------------------------------------------------------- 0.47s\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/132", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/132/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/132/events", "html_url": "https://github.com/ansible-community/ara/issues/132", "id": 618496254, "node_id": "MDU6SXNzdWU2MTg0OTYyNTQ=", "number": 132, "title": "Dockerfile for recordsansible/ara-api", "user": {"login": "markfaine", "id": 949949, "node_id": "MDQ6VXNlcjk0OTk0OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/949949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markfaine", "html_url": "https://github.com/markfaine", "followers_url": "https://api.github.com/users/markfaine/followers", "following_url": "https://api.github.com/users/markfaine/following{/other_user}", "gists_url": "https://api.github.com/users/markfaine/gists{/gist_id}", "starred_url": "https://api.github.com/users/markfaine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markfaine/subscriptions", "organizations_url": "https://api.github.com/users/markfaine/orgs", "repos_url": "https://api.github.com/users/markfaine/repos", "events_url": "https://api.github.com/users/markfaine/events{/privacy}", "received_events_url": "https://api.github.com/users/markfaine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-14T19:54:18Z", "updated_at": "2020-05-27T00:52:36Z", "closed_at": "2020-05-27T00:52:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n## What component is this about ?\r\nThe docker image for ara-api\r\n\r\n\r\n## What is your ARA installation like ?\r\nI'm working on a deployment with swarm as a stack with mysql.\r\n\r\n\r\n## What is the idea ?\r\nI know you use buildah but I could really use a Dockerfile so that I can see what it is you're doing in your build and modify accordingly for my own.  I'm building swarm files (compose files) and it helps a ton if I have a reference.\r\n\r\nI'm not sure yet if I will have a separate UI and API container yet but it is likely.\r\n\r\nThanks!\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/131", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/131/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/131/events", "html_url": "https://github.com/ansible-community/ara/issues/131", "id": 618329743, "node_id": "MDU6SXNzdWU2MTgzMjk3NDM=", "number": 131, "title": "Traceback in API browser: TypeError at /api/v1/playbooks/1 unhashable type: 'dict'", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529438, "node_id": "MDU6TGFiZWwxMzIyNTI5NDM4", "url": "https://api.github.com/repos/ansible-community/ara/labels/api", "name": "api", "color": "1238b7", "default": false, "description": "Related to the API"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-14T15:35:57Z", "updated_at": "2020-05-27T13:54:38Z", "closed_at": "2020-05-27T13:54:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\nAPI Browser\r\n\r\n## What is your ARA installation like ?\r\n<!-- What version of Ansible and ARA ? Did you install from source or from PyPi ? With an Ansible role ? In a virtualenv or a container ? Which Linux distribution ? Which database driver ? -->\r\n<!-- Feel free to include any other installation details that could be relevant to this report -->\r\n\r\nLatest master (1.4.1.dev26)\r\n\r\n## What is happening ?\r\n<!-- If reporting an issue with the API, please include relevant logs by setting ARA_DEBUG to True and ARA_LOG_LEVEL to DEBUG -->\r\n<!-- If reporting an exception from an Ansible role or plugin, please include the full error or exception trace by running ansible-playbook with \"-vvv\" -->\r\n\r\nI'm able to browse the playbook through the UI just fine but if I query the API for the same playbook it fails:\r\n![Screenshot from 2020-05-14 11-30-20](https://user-images.githubusercontent.com/1291204/81954232-9b580b80-95d6-11ea-9eed-1d8f21019567.png)\r\n\r\n```\r\n2020-05-14 15:29:56,785 ERROR django.request: Internal Server Error: /api/v1/playbooks/1\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/core/handlers/base.py\", line 145, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/core/handlers/base.py\", line 143, in _get_response\r\n    response = response.render()\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/response.py\", line 106, in render\r\n    self.content = self.rendered_content\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/response.py\", line 70, in rendered_content\r\n    ret = renderer.render(self.data, accepted_media_type, context)\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/renderers.py\", line 724, in render\r\n    context = self.get_context(data, accepted_media_type, renderer_context)\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/renderers.py\", line 695, in get_context\r\n    'put_form': self.get_rendered_html_form(data, view, 'PUT', request),\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/renderers.py\", line 511, in get_rendered_html_form\r\n    return self.render_form_for_serializer(serializer)\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/renderers.py\", line 518, in render_form_for_serializer\r\n    return form_renderer.render(\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/renderers.py\", line 372, in render\r\n    return template.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/backends/django.py\", line 61, in render\r\n    return self.template.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 171, in render\r\n    return self._render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 163, in _render\r\n    return self.nodelist.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 937, in render\r\n    bit = node.render_annotated(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 904, in render_annotated\r\n    return self.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/defaulttags.py\", line 209, in render\r\n    nodelist.append(node.render_annotated(context))\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 904, in render_annotated\r\n    return self.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/defaulttags.py\", line 309, in render\r\n    return nodelist.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 937, in render\r\n    bit = node.render_annotated(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 904, in render_annotated\r\n    return self.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/library.py\", line 192, in render\r\n    output = self.func(*resolved_args, **resolved_kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/templatetags/rest_framework.py\", line 87, in render_field\r\n    return renderer.render_field(field, style)\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/renderers.py\", line 351, in render_field\r\n    return template.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/backends/django.py\", line 61, in render\r\n    return self.template.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 171, in render\r\n    return self._render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 163, in _render\r\n    return self.nodelist.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 937, in render\r\n    bit = node.render_annotated(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 904, in render_annotated\r\n    return self.render(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/defaulttags.py\", line 161, in render\r\n    values = self.sequence.resolve(context, ignore_failures=True)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 671, in resolve\r\n    obj = self.var.resolve(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 796, in resolve\r\n    value = self._resolve_lookup(context)\r\n  File \"/usr/local/lib/python3.8/site-packages/django/template/base.py\", line 858, in _resolve_lookup\r\n    current = current()\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/relations.py\", line 551, in iter_options\r\n    self.get_choices(cutoff=self.html_cutoff),\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/relations.py\", line 539, in get_choices\r\n    return self.child_relation.get_choices(cutoff)\r\n  File \"/usr/local/lib/python3.8/site-packages/rest_framework/relations.py\", line 197, in get_choices\r\n    return OrderedDict([\r\nTypeError: unhashable type: 'dict'\r\n```\r\n\r\nSame thing for ``/api/v1/playbooks``.\r\n\r\nIf I had to take a guess, it looks like it's related to playbook labels because I am unable to reproduce the issue for the same playbook without labels.\r\n\r\n## What should be happening ?\r\n\r\nIt should work :)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/129", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/129/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/129/events", "html_url": "https://github.com/ansible-community/ara/issues/129", "id": 613290360, "node_id": "MDU6SXNzdWU2MTMyOTAzNjA=", "number": 129, "title": "docs: the distributed sqlite instructions don't mention the specific wsgi app", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-06T12:43:33Z", "updated_at": "2020-05-09T23:13:34Z", "closed_at": "2020-05-09T23:13:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\ndistributed_sqlite database backend\r\n\r\n## What is happening ?\r\n<!-- If reporting an issue with the API, please include relevant logs by setting ARA_DEBUG to True and ARA_LOG_LEVEL to DEBUG -->\r\n<!-- If reporting an exception from an Ansible role or plugin, please include the full error or exception trace by running ansible-playbook with \"-vvv\" -->\r\n\r\nhttps://ara.readthedocs.io/en/latest/distributed-sqlite-backend.html is missing instructions on how to load the wsgi application for distributed sqlite, for example: ``gunicorn --workers=4 --access-logfile - --bind 127.0.0.1:8000 ara.server.wsgi:distributed_sqlite``\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/126", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/126/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/126/events", "html_url": "https://github.com/ansible-community/ara/issues/126", "id": 607382841, "node_id": "MDU6SXNzdWU2MDczODI4NDE=", "number": 126, "title": "Replacing Database_password with IAM temporary token ", "user": {"login": "saranyasridharan", "id": 15728811, "node_id": "MDQ6VXNlcjE1NzI4ODEx", "avatar_url": "https://avatars1.githubusercontent.com/u/15728811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saranyasridharan", "html_url": "https://github.com/saranyasridharan", "followers_url": "https://api.github.com/users/saranyasridharan/followers", "following_url": "https://api.github.com/users/saranyasridharan/following{/other_user}", "gists_url": "https://api.github.com/users/saranyasridharan/gists{/gist_id}", "starred_url": "https://api.github.com/users/saranyasridharan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saranyasridharan/subscriptions", "organizations_url": "https://api.github.com/users/saranyasridharan/orgs", "repos_url": "https://api.github.com/users/saranyasridharan/repos", "events_url": "https://api.github.com/users/saranyasridharan/events{/privacy}", "received_events_url": "https://api.github.com/users/saranyasridharan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-27T09:21:56Z", "updated_at": "2020-04-27T12:09:08Z", "closed_at": "2020-04-27T12:08:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nWhat component is this about ?\r\nAra API\r\n\r\nWhat is your ARA installation like ?\r\nAra 1.4.0 , Installed from Pypi , it is in virtualenv\r\nDatabase driver: Postgresql AWS RDS 11.4\r\nLinux Environment: Centos 7.3\r\n\r\nWhat is the idea ?\r\nMy idea is to login to the database using temporory IAM token instead of password. \r\nI can achieve that when I try the steps with psql utility , But with Ara when I specify the generated temp token as password, it is throwing migration can't run with the username & password.\r\nThis [has](https://gist.github.com/quiver/509e1a6e6b54a0148527553502e9f55d) the steps for the process.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/125", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/125/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/125/events", "html_url": "https://github.com/ansible-community/ara/issues/125", "id": 605696212, "node_id": "MDU6SXNzdWU2MDU2OTYyMTI=", "number": 125, "title": "AttributeError: 'str' object has no attribute 'to_list'", "user": {"login": "berendt", "id": 419091, "node_id": "MDQ6VXNlcjQxOTA5MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/419091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berendt", "html_url": "https://github.com/berendt", "followers_url": "https://api.github.com/users/berendt/followers", "following_url": "https://api.github.com/users/berendt/following{/other_user}", "gists_url": "https://api.github.com/users/berendt/gists{/gist_id}", "starred_url": "https://api.github.com/users/berendt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berendt/subscriptions", "organizations_url": "https://api.github.com/users/berendt/orgs", "repos_url": "https://api.github.com/users/berendt/repos", "events_url": "https://api.github.com/users/berendt/events{/privacy}", "received_events_url": "https://api.github.com/users/berendt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-23T16:59:49Z", "updated_at": "2020-04-24T14:01:55Z", "closed_at": "2020-04-23T20:09:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "ARA version: 1.4.0\r\n\r\nTrying to initialize my database with ``ara-manage migrate``.  For configuration I am using an environment file with ``ARA_ALLOWED_HOSTS=\"['api.ara.example.org', 'web.ara.example.org']\"``.\r\n\r\n``ara-manage migrate`` failed:\r\n\r\n```\r\n[ara] No setting found for SECRET_KEY. Generating a random key...\r\n[ara] Creating data & configuration directory: /home/ara-server/.ara/server\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/ara-manage\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/ara/server/__main__.py\", line 41, in main\r\n    if not os.path.exists(settings.ARA_SETTINGS):\r\n  File \"/usr/local/lib/python3.7/site-packages/django/conf/__init__.py\", line 79, in __getattr__\r\n    self._setup(name)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/conf/__init__.py\", line 66, in _setup\r\n    self._wrapped = Settings(settings_module)\r\n  File \"/usr/local/lib/python3.7/site-packages/django/conf/__init__.py\", line 157, in __init__\r\n    mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"/usr/local/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/usr/local/lib/python3.7/site-packages/ara/server/settings.py\", line 248, in <module>\r\n    ALLOWED_HOSTS=ALLOWED_HOSTS.to_list(),\r\nAttributeError: 'str' object has no attribute 'to_list'\r\ndatabase migration failed, trying again in 10 seconds\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/124", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/124/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/124/events", "html_url": "https://github.com/ansible-community/ara/issues/124", "id": 604198317, "node_id": "MDU6SXNzdWU2MDQxOTgzMTc=", "number": 124, "title": "Docs: EXTERNAL_AUTH isn't documented", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/ara/milestones/1", "html_url": "https://github.com/ansible-community/ara/milestone/1", "labels_url": "https://api.github.com/repos/ansible-community/ara/milestones/1/labels", "id": 5768979, "node_id": "MDk6TWlsZXN0b25lNTc2ODk3OQ==", "number": 1, "title": "1.5", "description": "Issues that should be resolved before 1.5", "creator": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 4, "state": "open", "created_at": "2020-08-13T13:17:45Z", "updated_at": "2020-08-22T09:16:26Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2020-04-21T18:37:27Z", "updated_at": "2020-08-18T17:37:40Z", "closed_at": "2020-08-18T17:37:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nDocumentation\r\n\r\n## What is happening ?\r\nThere's no documentation for ``EXTERNAL_AUTH``: https://github.com/ansible-community/ara/blob/7a192ac1b7541465d9e799ab96e3db48861cdd16/ara/server/settings.py#L80\r\n\r\n## What should be happening ?\r\nThere should be docs about it and how to use it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/123", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/123/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/123/events", "html_url": "https://github.com/ansible-community/ara/issues/123", "id": 604123256, "node_id": "MDU6SXNzdWU2MDQxMjMyNTY=", "number": 123, "title": "Remote auth not working", "user": {"login": "viktorkrivak", "id": 603758, "node_id": "MDQ6VXNlcjYwMzc1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/603758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viktorkrivak", "html_url": "https://github.com/viktorkrivak", "followers_url": "https://api.github.com/users/viktorkrivak/followers", "following_url": "https://api.github.com/users/viktorkrivak/following{/other_user}", "gists_url": "https://api.github.com/users/viktorkrivak/gists{/gist_id}", "starred_url": "https://api.github.com/users/viktorkrivak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viktorkrivak/subscriptions", "organizations_url": "https://api.github.com/users/viktorkrivak/orgs", "repos_url": "https://api.github.com/users/viktorkrivak/repos", "events_url": "https://api.github.com/users/viktorkrivak/events{/privacy}", "received_events_url": "https://api.github.com/users/viktorkrivak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/ara/milestones/1", "html_url": "https://github.com/ansible-community/ara/milestone/1", "labels_url": "https://api.github.com/repos/ansible-community/ara/milestones/1/labels", "id": 5768979, "node_id": "MDk6TWlsZXN0b25lNTc2ODk3OQ==", "number": 1, "title": "1.5", "description": "Issues that should be resolved before 1.5", "creator": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 4, "state": "open", "created_at": "2020-08-13T13:17:45Z", "updated_at": "2020-08-22T09:16:26Z", "due_on": null, "closed_at": null}, "comments": 16, "created_at": "2020-04-21T16:42:05Z", "updated_at": "2020-08-17T14:22:02Z", "closed_at": "2020-08-13T19:21:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "## What component is this about ?\r\nara-server, mainly rest-api\r\n\r\n## What is your ARA installation like ?\r\nFound in version 1.3.2 (from debian package) but same code is in master\r\n\r\n## What is happening ?\r\nWhen EXTERNAL_AUTH is enabled, only admin and healthcheck working properly. /api and index return 401\r\n\r\n## What should be happening ?\r\nEverything should be working same as it internal auth is used.\r\n\r\nMain problem is in server.settings because rest_framework use BasicAuth even if EXTERNAL_AUTH is set.\r\nThis patch should fix issue\r\n```\r\ndiff --git a/ara/server/settings.py b/ara/server/settings.py\r\nindex 252fa98..b4691d1 100644\r\n--- a/ara/server/settings.py\r\n+++ b/ara/server/settings.py\r\n@@ -214,6 +214,12 @@ ROOT_URLCONF = \"ara.server.urls\"\r\n APPEND_SLASH = False\r\n \r\n PAGE_SIZE = settings.get(\"PAGE_SIZE\", 100)\r\n+\r\n+if EXTERNAL_AUTH:\r\n+    REST_FRAMEWORK_AUTH = ('rest_framework.authentication.RemoteUserAuthentication',)\r\n+else:\r\n+    REST_FRAMEWORK_AUTH = ('rest_framework.authentication.BasixAuthentication',)\r\n+\r\n REST_FRAMEWORK = {\r\n     \"DEFAULT_PAGINATION_CLASS\": \"rest_framework.pagination.LimitOffsetPagination\",\r\n     \"PAGE_SIZE\": PAGE_SIZE,\r\n@@ -227,7 +233,7 @@ REST_FRAMEWORK = {\r\n         \"rest_framework.parsers.FormParser\",\r\n         \"rest_framework.parsers.MultiPartParser\",\r\n     ),\r\n-    \"DEFAULT_AUTHENTICATION_CLASSES\": (\"rest_framework.authentication.BasicAuthentication\",),\r\n+    \"DEFAULT_AUTHENTICATION_CLASSES\": REST_FRAMEWORK_AUTH ,\r\n     \"DEFAULT_PERMISSION_CLASSES\": (\"ara.api.auth.APIAccessPermission\",),\r\n     \"TEST_REQUEST_DEFAULT_FORMAT\": \"json\",\r\n     \"UNICODE_JSON\": False,\r\n```\r\n\r\nNOTE: sorry If this is not a proper way to post patch. There are no pull request so I have no idea where to put this.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/121", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/121/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/121/events", "html_url": "https://github.com/ansible-community/ara/issues/121", "id": 601009003, "node_id": "MDU6SXNzdWU2MDEwMDkwMDM=", "number": 121, "title": "Allow configuration of FORCE_SCRIPT_NAME in settings.yaml", "user": {"login": "mmslkr", "id": 57526005, "node_id": "MDQ6VXNlcjU3NTI2MDA1", "avatar_url": "https://avatars2.githubusercontent.com/u/57526005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmslkr", "html_url": "https://github.com/mmslkr", "followers_url": "https://api.github.com/users/mmslkr/followers", "following_url": "https://api.github.com/users/mmslkr/following{/other_user}", "gists_url": "https://api.github.com/users/mmslkr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmslkr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmslkr/subscriptions", "organizations_url": "https://api.github.com/users/mmslkr/orgs", "repos_url": "https://api.github.com/users/mmslkr/repos", "events_url": "https://api.github.com/users/mmslkr/events{/privacy}", "received_events_url": "https://api.github.com/users/mmslkr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-04-16T12:28:59Z", "updated_at": "2020-05-04T07:34:04Z", "closed_at": "2020-04-16T12:44:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this request. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nAPI server\r\n\r\n## What is your ARA installation like ?\r\n- `ara 1.4.0.0rc1` from PyPi via `pip install --pre ara[server]` in a virtualenv on CentOS 7.6\r\n- started with default options with `ara-manage runserver`\r\n- installed as a PoC behind an nginx like so\r\n```\r\nhttp {\r\n...\r\n  server {\r\n    listen 0.0.0.0:8081;\r\n...\r\n    location /ara/ {\r\n      proxy_pass http://127.0.0.1:8000/;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## What is the idea ?\r\nIn this setup, ara is reachable on http://ip:8081/ara/. But a few links are absolute, for example the api link is at http://ip:8081/api/ instead of http://ip:8081/ara/api/. Workarounds might be achievable by rewriting the output in nginx, but that is fragile.\r\n\r\nThere is no way to configure a base_url or similar within the `settings.yaml`. However, the Django setting [`FORCE_SCRIPT_NAME`](https://docs.djangoproject.com/en/3.0/ref/settings/#force-script-name) does work, which I've successfully tried by patching `ara/server/settings.py` with `FORCE_SCRIPT_NAME = \"/ara\"`.\r\n\r\nThis setting should be configurable within the settings.yaml.\r\n\r\n<!-- Describe how the feature would be used, why it is needed and what it would solve -->\r\n<!-- If relevant, please include code or playbook examples -->\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/120", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/120/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/120/events", "html_url": "https://github.com/ansible-community/ara/issues/120", "id": 595154359, "node_id": "MDU6SXNzdWU1OTUxNTQzNTk=", "number": 120, "title": "Ara_playbook is erroring out in the playbook", "user": {"login": "saranyasridharan", "id": 15728811, "node_id": "MDQ6VXNlcjE1NzI4ODEx", "avatar_url": "https://avatars1.githubusercontent.com/u/15728811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saranyasridharan", "html_url": "https://github.com/saranyasridharan", "followers_url": "https://api.github.com/users/saranyasridharan/followers", "following_url": "https://api.github.com/users/saranyasridharan/following{/other_user}", "gists_url": "https://api.github.com/users/saranyasridharan/gists{/gist_id}", "starred_url": "https://api.github.com/users/saranyasridharan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saranyasridharan/subscriptions", "organizations_url": "https://api.github.com/users/saranyasridharan/orgs", "repos_url": "https://api.github.com/users/saranyasridharan/repos", "events_url": "https://api.github.com/users/saranyasridharan/events{/privacy}", "received_events_url": "https://api.github.com/users/saranyasridharan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 389813943, "node_id": "MDU6TGFiZWwzODk4MTM5NDM=", "url": "https://api.github.com/repos/ansible-community/ara/labels/help%20wanted", "name": "help wanted", "color": "128A0C", "default": true, "description": null}, {"id": 1399379482, "node_id": "MDU6TGFiZWwxMzk5Mzc5NDgy", "url": "https://api.github.com/repos/ansible-community/ara/labels/needs%20information", "name": "needs information", "color": "fce42a", "default": false, "description": "Needs more information to be triaged properly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-06T14:15:36Z", "updated_at": "2020-04-24T06:20:40Z", "closed_at": "2020-04-24T06:20:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have copied ara_playbook from the github and set action plugin and tried to run playbook as below.\r\n\r\n# What component is this about ?\r\nPlugin: Ara_playbook  action plugin \r\n What is your ARA installation like ?\r\nAnsible:\r\nAra: 1.3 \r\nInstalled: from pip command\r\nEnvironment: virtualenv\r\nLinux environment: Centos 7.2\r\nDatabase driver: Aws RDS postgres\r\n\r\n\r\n\r\n# What is happening ?\r\n```\r\nansible-playbook -v sample_playbook.yml\r\nNo config file found; using defaults\r\n[WARNING]: No inventory was parsed, only implicit localhost is available\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\r\nOperations to perform:\r\n  Apply all migrations: admin, api, auth, contenttypes, db, sessions\r\nRunning migrations:\r\n  No migrations to apply.\r\nPLAY [Test playbook] ********************************************************************************************************************\r\nTASK [Gathering Facts] ******************************************************************************************************************\r\nok: [localhost]\r\nTASK [Get the currently running playbook] ***********************************************************************************************\r\nInternal Server Error: /api/v1/plays\r\nTraceback (most recent call last):\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\npsycopg2.errors.UndefinedFunction: operator does not exist: text = uuid\r\nLINE 1: ...*) AS \"__count\" FROM \"plays\" WHERE \"plays\".\"uuid\" = '0abdbda...\r\n                                                             ^\r\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\r\nThe above exception was the direct cause of the following exception:\r\nTraceback (most recent call last):\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 115, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 113, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/viewsets.py\", line 114, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 505, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 465, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 476, in raise_uncaught_exception\r\n    raise exc\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 502, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/mixins.py\", line 40, in list\r\n    page = self.paginate_queryset(queryset)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/generics.py\", line 171, in paginate_queryset\r\n    return self.paginator.paginate_queryset(queryset, self.request, view=self)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/pagination.py\", line 373, in paginate_queryset\r\n    self.count = self.get_count(queryset)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/pagination.py\", line 510, in get_count\r\n    return queryset.count()\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/query.py\", line 392, in count\r\n    return self.query.get_count(using=self.db)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/sql/query.py\", line 504, in get_count\r\n    number = obj.get_aggregation(using, ['__count'])['__count']\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/sql/query.py\", line 489, in get_aggregation\r\n    result = compiler.execute_sql(SINGLE)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/sql/compiler.py\", line 1133, in execute_sql\r\n    cursor.execute(sql, params)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 99, in execute\r\n    return super().execute(sql, params)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 67, in execute\r\n    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 76, in _execute_with_wrappers\r\n    return executor(sql, params, many, context)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/utils.py\", line 89, in __exit__\r\n    raise dj_exc_value.with_traceback(traceback) from exc_value\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\ndjango.db.utils.ProgrammingError: operator does not exist: text = uuid\r\nLINE 1: ...*) AS \"__count\" FROM \"plays\" WHERE \"plays\".\"uuid\" = '0abdbda...\r\n                                                             ^\r\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\r\n2020-04-06 09:06:53,582 ERROR django.request: Internal Server Error: /api/v1/plays\r\nTraceback (most recent call last):\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\npsycopg2.errors.UndefinedFunction: operator does not exist: text = uuid\r\nLINE 1: ...*) AS \"__count\" FROM \"plays\" WHERE \"plays\".\"uuid\" = '0abdbda...\r\n                                                             ^\r\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\r\nThe above exception was the direct cause of the following exception:\r\nTraceback (most recent call last):\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 115, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 113, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/viewsets.py\", line 114, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 505, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 465, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 476, in raise_uncaught_exception\r\n    raise exc\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 502, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/mixins.py\", line 40, in list\r\n    page = self.paginate_queryset(queryset)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/generics.py\", line 171, in paginate_queryset\r\n    return self.paginator.paginate_queryset(queryset, self.request, view=self)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/pagination.py\", line 373, in paginate_queryset\r\n    self.count = self.get_count(queryset)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/rest_framework/pagination.py\", line 510, in get_count\r\n    return queryset.count()\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/query.py\", line 392, in count\r\n    return self.query.get_count(using=self.db)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/sql/query.py\", line 504, in get_count\r\n    number = obj.get_aggregation(using, ['__count'])['__count']\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/sql/query.py\", line 489, in get_aggregation\r\n    result = compiler.execute_sql(SINGLE)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/models/sql/compiler.py\", line 1133, in execute_sql\r\n    cursor.execute(sql, params)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 99, in execute\r\n    return super().execute(sql, params)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 67, in execute\r\n    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 76, in _execute_with_wrappers\r\n    return executor(sql, params, many, context)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/utils.py\", line 89, in __exit__\r\n    raise dj_exc_value.with_traceback(traceback) from exc_value\r\n  File \"/home/build/araenv/lib64/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\ndjango.db.utils.ProgrammingError: operator does not exist: text = uuid\r\nLINE 1: ...*) AS \"__count\" FROM \"plays\" WHERE \"plays\".\"uuid\" = '0abdbda...\r\n                                                             ^\r\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\r\n2020-04-06 09:06:53,629 ERROR ara.clients.http: Failed to get on /api/v1/plays?uuid=0abdbda0-6b67-f8a3-b552-000000000005: {'params': {}}\r\n2020-04-06 09:06:53,629 ERROR ara.clients.http: Failed to get on /api/v1/plays?uuid=0abdbda0-6b67-f8a3-b552-000000000005: {'params': {}}\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\nfatal: [localhost]: FAILED! => {\"msg\": \"Unexpected failure during module execution.\", \"stdout\": \"\"}\r\nPLAY RECAP ******************************************************************************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n```\r\n\r\n# What should be happening ?\r\nI expect to get playbook id when I query it from ara_playbook \r\n\r\nThis is my playbook:\r\n```\r\ncat sample_playbook.yml\r\n- name: Test playbook\r\n  connection: local\r\n  hosts: localhost\r\n  tasks:\r\n    - name: Get the currently running playbook\r\n      ara_playbook:\r\n      register: playbook_query\r\n    - name: Get failed tasks for the currently running playbook\r\n      vars:\r\n        playbook_id: \"{{ playbook_query.playbook.id | string }}\"\r\n      set_fact:\r\n        playbook_id: \"{{ playbook_id }}\"\r\n    - debug:\r\n        msg: \"{{ playbook_id }}\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/118", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/118/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/118/events", "html_url": "https://github.com/ansible-community/ara/issues/118", "id": 575454206, "node_id": "MDU6SXNzdWU1NzU0NTQyMDY=", "number": 118, "title": "ARA 0.16.6 breaks Ansible on Python 2 due to pyfakefs 4", "user": {"login": "markgoddard", "id": 5795873, "node_id": "MDQ6VXNlcjU3OTU4NzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5795873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markgoddard", "html_url": "https://github.com/markgoddard", "followers_url": "https://api.github.com/users/markgoddard/followers", "following_url": "https://api.github.com/users/markgoddard/following{/other_user}", "gists_url": "https://api.github.com/users/markgoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/markgoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markgoddard/subscriptions", "organizations_url": "https://api.github.com/users/markgoddard/orgs", "repos_url": "https://api.github.com/users/markgoddard/repos", "events_url": "https://api.github.com/users/markgoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/markgoddard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-04T14:38:15Z", "updated_at": "2020-04-14T19:18:18Z", "closed_at": "2020-04-14T19:18:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nCallback plugin.\r\n\r\n\r\n## What is your ARA installation like ?\r\nThis is affecting Kolla Ansible CI on stable branches that use Python 2: https://bugs.launchpad.net/kolla-ansible/+bug/1866079.\r\n\r\nReproducing on a CentOS 7.7 box:\r\n\r\n```\r\nsudo yum -y install python-virtualenv gcc libffi-devel openssl-devel\r\nvirtualenv ansible-2.6\r\nsource ansible-2.6/bin/activate\r\npip install 'ansible<2.7' 'ara<1.0.0'\r\ncat << EOF > ansible.cfg\r\n[defaults]\r\ncallback_plugins = $(pwd)/ansible-2.6/lib/python2.7/site-packages/ara/plugins/callbacks\r\nEOF\r\n```\r\n\r\nNow gather facts:\r\n`./ansible-2.6/bin/ansible localhost -m setup -e ansible_python_interpreter=$(which python) -vvvv`\r\n\r\n## What is happening ?\r\n\r\nAnsible fails:\r\n\r\n```\r\nansible 2.6.20\r\n  config file = /home/mark/ansible.cfg\r\n  configured module search path = [u'/home/mark/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/mark/ansible-2.6/lib/python2.7/site-packages/ansible\r\n  executable location = /home/mark/ansible-2.6/bin/ansible\r\n  python version = 2.7.5 (default, Aug 7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\nUsing /home/mark/ansible.cfg as config file\r\nsetting up inventory plugins\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\n [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\r\n\r\nLoading callback plugin minimal of type stdout, v2.0 from /home/mark/ansible-2.6/lib/python2.7/site-packages/ansible/plugins/callback/minimal.pyc\r\nERROR! Unexpected Exception, this is probably a bug: invalid syntax (fake_filesystem.py, line 1195)\r\nthe full traceback was:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/mark/ansible-2.6/bin/ansible\", line 118, in <module>\r\n    exit_code = cli.run()\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ansible/cli/adhoc.py\", line 181, in run\r\n    result = self._tqm.run(play)\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ansible/executor/task_queue_manager.py\", line 231, in run\r\n    self.load_callbacks()\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ansible/executor/task_queue_manager.py\", line 193, in load_callbacks\r\n    for callback_plugin in callback_loader.all(class_only=True):\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ansible/plugins/loader.py\", line 489, in all\r\n    module = self._load_module_source(name, path)\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ansible/plugins/loader.py\", line 357, in _load_module_source\r\n    module = imp.load_source(full_name, path, module_file)\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ara/plugins/callbacks/log_ara.py\", line 29, in <module>\r\n    from ara.webapp import create_app\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ara/webapp.py\", line 39, in <module>\r\n    from ara.utils import fast_count\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/ara/utils.py\", line 24, in <module>\r\n    import pyfakefs.fake_filesystem as fake_filesystem\r\n  File \"/home/mark/ansible-2.6/lib/python2.7/site-packages/pyfakefs/fake_filesystem.py\", line 1195\r\n    def utime(self, path, times=None, *, ns=None, follow_symlinks=True):\r\n                                       ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\n## What should be happening ?\r\n\r\nAnsible gathers facts.\r\n\r\n## Analysis\r\n\r\npyfakefs 4.0.0 and 4.0.1 were released yesterday, apparently without python2 support. Looks like we need to pin.\r\n\r\n`pip install 'pyfakefs<4'`\r\n\r\nNow it works.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/117", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/117/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/117/events", "html_url": "https://github.com/ansible-community/ara/issues/117", "id": 574347645, "node_id": "MDU6SXNzdWU1NzQzNDc2NDU=", "number": 117, "title": "If ara-api cannot read settings.yml, it falls back to some default w/o warning", "user": {"login": "zswanson", "id": 1272954, "node_id": "MDQ6VXNlcjEyNzI5NTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1272954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zswanson", "html_url": "https://github.com/zswanson", "followers_url": "https://api.github.com/users/zswanson/followers", "following_url": "https://api.github.com/users/zswanson/following{/other_user}", "gists_url": "https://api.github.com/users/zswanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/zswanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zswanson/subscriptions", "organizations_url": "https://api.github.com/users/zswanson/orgs", "repos_url": "https://api.github.com/users/zswanson/repos", "events_url": "https://api.github.com/users/zswanson/events{/privacy}", "received_events_url": "https://api.github.com/users/zswanson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-03T01:00:32Z", "updated_at": "2020-04-14T22:02:23Z", "closed_at": "2020-04-14T22:02:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\nara-api\r\n\r\n## What is your ARA installation like ?\r\n<!-- What version of Ansible and ARA ? Did you install from source or from PyPi ? With an Ansible role ? In a virtualenv or a container ? Which Linux distribution ? Which database driver ? -->\r\n<!-- Feel free to include any other installation details that could be relevant to this report -->\r\nara-api was installed on an ubuntu AMI. I was attempting to install it to /opt/ara and *not* use the `.ara` hidden path, and use a service user with home directory at /opt/ara.\r\n\r\n## What is happening ?\r\n<!-- If reporting an issue with the API, please include relevant logs by setting ARA_DEBUG to True and ARA_LOG_LEVEL to DEBUG -->\r\n<!-- If reporting an exception from an Ansible role or plugin, please include the full error or exception trace by running ansible-playbook with \"-vvv\" -->\r\nMy install had mistakenly set the ownership of the ara/server/settings.yaml to root, with no read permissions for my ara service user. When ara-api launched, it appears to have fallen back to an internal default settings, while *still reporting that it was using the config file I had specified*. It took a few days of debugging and reinstalling before I realized the error.\r\n\r\n## What should be happening ?\r\nI think that falling back to the internal defaults is fine but some sort of error or warning needs to be provided.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/115", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/115/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/115/events", "html_url": "https://github.com/ansible-community/ara/issues/115", "id": 565543000, "node_id": "MDU6SXNzdWU1NjU1NDMwMDA=", "number": 115, "title": "API server no longer accept default format for `ALLOWED_HOSTS`", "user": {"login": "hvtuananh", "id": 301680, "node_id": "MDQ6VXNlcjMwMTY4MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/301680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvtuananh", "html_url": "https://github.com/hvtuananh", "followers_url": "https://api.github.com/users/hvtuananh/followers", "following_url": "https://api.github.com/users/hvtuananh/following{/other_user}", "gists_url": "https://api.github.com/users/hvtuananh/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvtuananh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvtuananh/subscriptions", "organizations_url": "https://api.github.com/users/hvtuananh/orgs", "repos_url": "https://api.github.com/users/hvtuananh/repos", "events_url": "https://api.github.com/users/hvtuananh/events{/privacy}", "received_events_url": "https://api.github.com/users/hvtuananh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-14T20:33:02Z", "updated_at": "2020-04-21T18:39:46Z", "closed_at": "2020-04-21T18:39:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "## What component is this about ?\r\nAPI server\r\n\r\n\r\n## What is happening ?\r\nRunning API server with `ARA_ALLOWED_HOSTS='[\"127.0.0.1\", \"localhost\", \"::1\"]'` environment variable now produce an error:\r\n\r\n```\r\nFile \"{...}/ara/server/settings.py\", line 248, in <module>\r\n    ALLOWED_HOSTS=ALLOWED_HOSTS.to_list(),\r\nAttributeError: 'list' object has no attribute 'to_list'\r\n```\r\n\r\nRef commit: https://github.com/ansible-community/ara/commit/df3bace703ea0c8bc3cbf6946444848c4cfaa61d\r\n\r\n## What should be happening ?\r\nAPI server should accept this format, or the doc should specify an alternative way of configuring `ALLOWED_HOSTS`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/113", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/113/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/113/events", "html_url": "https://github.com/ansible-community/ara/issues/113", "id": 557751932, "node_id": "MDU6SXNzdWU1NTc3NTE5MzI=", "number": 113, "title": "ara.api.models.Label.MultipleObjectsReturned: get() returned more than one Label -- it returned 2!", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529438, "node_id": "MDU6TGFiZWwxMzIyNTI5NDM4", "url": "https://api.github.com/repos/ansible-community/ara/labels/api", "name": "api", "color": "1238b7", "default": false, "description": "Related to the API"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-30T21:04:21Z", "updated_at": "2020-04-13T19:38:14Z", "closed_at": "2020-04-13T19:38:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nAPI server\r\n\r\n## What is happening ?\r\n\r\nNoticed a new trace, occured with the mysql backend:\r\n```\r\nPLAYBOOK: smoke.yaml ***********************************************************\r\n2020-01-30 20:51:51,886 DEBUG ara.plugins.callback.default: v2_playbook_on_start\r\n2020-01-30 20:51:51,886 DEBUG ara.plugins.callback.default: Ignoring argument: extra_vars\r\n2020-01-30 20:51:51,888 DEBUG urllib3.connectionpool: Starting new HTTP connection (1): localhost:53827\r\n2020-01-30 20:51:51,948 DEBUG urllib3.connectionpool: http://localhost:53827 \"POST /api/v1/playbooks HTTP/1.1\" 201 1083\r\n2020-01-30 20:51:51,949 DEBUG ara.clients.http: HTTP 201: post on /api/v1/playbooks\r\n2020-01-30 20:51:51,949 DEBUG ara.plugins.callback.default: File not in cache, getting or creating: /home/zuul/.ara-tests/git/ara/tests/integration/smoke.yaml\r\n2020-01-30 20:51:52,016 DEBUG urllib3.connectionpool: http://localhost:53827 \"POST /api/v1/files HTTP/1.1\" 201 2285\r\n2020-01-30 20:51:52,018 DEBUG ara.clients.http: HTTP 201: post on /api/v1/files\r\n3 plays in /home/zuul/.ara-tests/git/ara/tests/integration/smoke.yaml\r\n\r\nPLAY [ARA Tasks test play] *****************************************************\r\n2020-01-30 20:51:52,027 DEBUG ara.plugins.callback.default: v2_playbook_on_play_start\r\n2020-01-30 20:51:52,096 DEBUG urllib3.connectionpool: http://localhost:53827 \"PATCH /api/v1/playbooks/3 HTTP/1.1\" 200 1092\r\n2020-01-30 20:51:52,098 DEBUG ara.clients.http: HTTP 200: patch on /api/v1/playbooks/3\r\nInternal Server Error: /api/v1/playbooks/3\r\nTraceback (most recent call last):\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 115, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 113, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/viewsets.py\", line 114, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 505, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 465, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 476, in raise_uncaught_exception\r\n    raise exc\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 502, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/mixins.py\", line 82, in partial_update\r\n    return self.update(request, *args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/mixins.py\", line 67, in update\r\n    serializer.is_valid(raise_exception=True)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/serializers.py\", line 234, in is_valid\r\n    self._validated_data = self.run_validation(self.initial_data)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/serializers.py\", line 433, in run_validation\r\n    value = self.to_internal_value(data)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/serializers.py\", line 490, in to_internal_value\r\n    validated_value = field.run_validation(primitive_value)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/fields.py\", line 565, in run_validation\r\n    value = self.to_internal_value(data)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/relations.py\", line 521, in to_internal_value\r\n    for item in data\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/relations.py\", line 521, in <listcomp>\r\n    for item in data\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/ara/api/fields.py\", line 86, in to_internal_value\r\n    return self.get_queryset().get_or_create(**{self.slug_field: data})[0]\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/db/models/query.py\", line 538, in get_or_create\r\n    return self.get(**kwargs), False\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/db/models/query.py\", line 412, in get\r\n    (self.model._meta.object_name, num)\r\nara.api.models.Label.MultipleObjectsReturned: get() returned more than one Label -- it returned 2!\r\n2020-01-30 20:51:52,183 ERROR django.request: Internal Server Error: /api/v1/playbooks/3\r\nTraceback (most recent call last):\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 115, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/core/handlers/base.py\", line 113, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/viewsets.py\", line 114, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 505, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 465, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 476, in raise_uncaught_exception\r\n    raise exc\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/views.py\", line 502, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/mixins.py\", line 82, in partial_update\r\n    return self.update(request, *args, **kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/mixins.py\", line 67, in update\r\n    serializer.is_valid(raise_exception=True)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/serializers.py\", line 234, in is_valid\r\n    self._validated_data = self.run_validation(self.initial_data)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/serializers.py\", line 433, in run_validation\r\n    value = self.to_internal_value(data)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/serializers.py\", line 490, in to_internal_value\r\n    validated_value = field.run_validation(primitive_value)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/fields.py\", line 565, in run_validation\r\n    value = self.to_internal_value(data)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/relations.py\", line 521, in to_internal_value\r\n    for item in data\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/rest_framework/relations.py\", line 521, in <listcomp>\r\n    for item in data\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/ara/api/fields.py\", line 86, in to_internal_value\r\n    return self.get_queryset().get_or_create(**{self.slug_field: data})[0]\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/db/models/query.py\", line 538, in get_or_create\r\n    return self.get(**kwargs), False\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/django/db/models/query.py\", line 412, in get\r\n    (self.model._meta.object_name, num)\r\nara.api.models.Label.MultipleObjectsReturned: get() returned more than one Label -- it returned 2!\r\n2020-01-30 20:51:52,226 DEBUG urllib3.connectionpool: http://localhost:53827 \"PATCH /api/v1/playbooks/3 HTTP/1.1\" 500 17976\r\n2020-01-30 20:51:52,228 ERROR ara.clients.http: Failed to patch on /api/v1/playbooks/3: {'labels': ['nodepool.provider:ovh-bhs1', 'zuul.change:693855', 'zuul.executor:ze07.openstack.org', 'zuul.job:ara-api-mysql', 'zuul.pipeline:check', 'zuul.project:opendev.org/recordsansible/ara', 'integration tests', 'smoke']}\r\n2020-01-30 20:51:52,228 DEBUG ara.clients.http: HTTP 500: patch on /api/v1/playbooks/3\r\n2020-01-30 20:51:52,228 ERROR ara.clients.http: Failed to patch on /api/v1/playbooks/3: {'labels': ['nodepool.provider:ovh-bhs1', 'zuul.change:693855', 'zuul.executor:ze07.openstack.org', 'zuul.job:ara-api-mysql', 'zuul.pipeline:check', 'zuul.project:opendev.org/recordsansible/ara', 'integration tests', 'smoke']}\r\n[WARNING]: Failure using method (v2_playbook_on_play_start) in callback plugin\r\n(<ansible.plugins.callback.ara_default.CallbackModule object at\r\n0x7f447a905f98>): Expecting value: line 1 column 1 (char 0)\r\nCallback Exception: \r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/ansible/executor/task_queue_manager.py\", line 324, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/home/zuul/.ara-tests/virtualenv/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\", line 232, in v2_playbook_on_play_start\r\n    self._set_playbook_labels(labels=labels)\r\n   File \"/home/zuul/.ara-tests/virtualenv/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\", line 333, in _set_playbook_labels\r\n    self.playbook = self.client.patch(\"/api/v1/playbooks/%s\" % self.playbook[\"id\"], labels=labels)\r\n   File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/ara/clients/http.py\", line 112, in patch\r\n    return self._request(\"patch\", endpoint, **kwargs)\r\n   File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/ara/clients/http.py\", line 106, in _request\r\n    return response.json()\r\n   File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.6/site-packages/requests/models.py\", line 897, in json\r\n    return complexjson.loads(self.text, **kwargs)\r\n   File \"/usr/lib64/python3.6/json/__init__.py\", line 354, in loads\r\n    return _default_decoder.decode(s)\r\n   File \"/usr/lib64/python3.6/json/decoder.py\", line 339, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n   File \"/usr/lib64/python3.6/json/decoder.py\", line 357, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\n```\r\n\r\n## What should be happening ?\r\n\r\nThe exception should be handled.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/110", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/110/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/110/events", "html_url": "https://github.com/ansible-community/ara/issues/110", "id": 554262416, "node_id": "MDU6SXNzdWU1NTQyNjI0MTY=", "number": 110, "title": "Add pagination to the playbook list of the built-in UI", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1657566675, "node_id": "MDU6TGFiZWwxNjU3NTY2Njc1", "url": "https://api.github.com/repos/ansible-community/ara/labels/UI", "name": "UI", "color": "fbca04", "default": false, "description": "Related to the built-in user interface"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-23T16:21:45Z", "updated_at": "2020-01-28T19:18:04Z", "closed_at": "2020-01-28T19:18:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nThe built-in reporting web UI\r\n\r\n## What is the idea ?\r\n\r\nThe API supports pagination (using fields like ``count``, ``next`` and ``previous``) and configuring the amount of results per page with the [ARA_PAGE_SIZE](https://ara.readthedocs.io/en/latest/api-configuration.html#ara-page-size) setting.\r\n\r\nHowever, there is no pagination at all in the built-in web UI yet.\r\nThis can result in performance issues when loading the playbook list if users have a sizeable amount of playbooks recorded.\r\n\r\nWe need to consider how to implement the pagination in the UI [views](https://github.com/ansible-community/ara/blob/master/ara/ui/views.py) and add the necessary templating, probably in [index.html](https://github.com/ansible-community/ara/blob/master/ara/ui/templates/index.html).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/109", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/109/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/109/events", "html_url": "https://github.com/ansible-community/ara/issues/109", "id": 554013944, "node_id": "MDU6SXNzdWU1NTQwMTM5NDQ=", "number": 109, "title": "Ara Api server UI gives response timedout(504) ", "user": {"login": "saranyasridharan", "id": 15728811, "node_id": "MDQ6VXNlcjE1NzI4ODEx", "avatar_url": "https://avatars1.githubusercontent.com/u/15728811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saranyasridharan", "html_url": "https://github.com/saranyasridharan", "followers_url": "https://api.github.com/users/saranyasridharan/followers", "following_url": "https://api.github.com/users/saranyasridharan/following{/other_user}", "gists_url": "https://api.github.com/users/saranyasridharan/gists{/gist_id}", "starred_url": "https://api.github.com/users/saranyasridharan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saranyasridharan/subscriptions", "organizations_url": "https://api.github.com/users/saranyasridharan/orgs", "repos_url": "https://api.github.com/users/saranyasridharan/repos", "events_url": "https://api.github.com/users/saranyasridharan/events{/privacy}", "received_events_url": "https://api.github.com/users/saranyasridharan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-01-23T08:38:18Z", "updated_at": "2020-03-02T04:59:56Z", "closed_at": "2020-02-03T18:09:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nAra API server \r\n\r\n\r\n\r\nWhat is your ARA installation like ?\r\nI have installed Ara1.1 , with pip install inside a virtual environment\r\nAnsible 2.9,psql (9.2.24, server 11.5)\r\n\r\n\r\n What is happening ?\r\nAra UI is loading very slow , it gives 504 timed out error, Some time I get 'too many opened files' other times  I dont see any error in the nohup output and server side its giving 200 response, but in UI it is timing out. I am attached the db data details\r\n\r\n![image](https://user-images.githubusercontent.com/15728811/72968359-4e62e600-3de9-11ea-8402-33ea78ad1a67.png)\r\nI had this issue with sqlite, thought its db issue. Now I have changed to postgresql and migrated the old data to it. again I am getting the same error. After restart, it is better for sometime and the problem occurs again in few minutes. our setup is in aws environment , ara in one server and postgres in rds but having it in same setup also had this issue when the playbook is more than 300. this is server nohup output at that time of the issue.\r\n![image](https://user-images.githubusercontent.com/15728811/72969444-7ce1c080-3deb-11ea-81f7-ca6a8cce539e.png)\r\n\r\n\r\nWhat should be happening ?\r\nUI should load irrespective of db load.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/108", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/108/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/108/events", "html_url": "https://github.com/ansible-community/ara/issues/108", "id": 551714763, "node_id": "MDU6SXNzdWU1NTE3MTQ3NjM=", "number": 108, "title": "How to use ARA_ALLOWED_HOSTS with Dynaconf.", "user": {"login": "LaurentDumont", "id": 8936473, "node_id": "MDQ6VXNlcjg5MzY0NzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8936473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaurentDumont", "html_url": "https://github.com/LaurentDumont", "followers_url": "https://api.github.com/users/LaurentDumont/followers", "following_url": "https://api.github.com/users/LaurentDumont/following{/other_user}", "gists_url": "https://api.github.com/users/LaurentDumont/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaurentDumont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaurentDumont/subscriptions", "organizations_url": "https://api.github.com/users/LaurentDumont/orgs", "repos_url": "https://api.github.com/users/LaurentDumont/repos", "events_url": "https://api.github.com/users/LaurentDumont/events{/privacy}", "received_events_url": "https://api.github.com/users/LaurentDumont/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-01-18T03:29:10Z", "updated_at": "2020-02-04T16:07:08Z", "closed_at": "2020-01-18T17:55:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\nThis is about ara-api\r\n\r\n\r\n## What is your ARA installation like ?\r\n```\r\n(venv) ldumont@smallpotato:~/projects/ara-ansible$ uname -a\r\nLinux smallpotato 5.0.0-37-generic #40-Ubuntu SMP Thu Nov 14 00:14:01 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n(venv) ldumont@smallpotato:~/projects/ara-ansible$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 19.04\r\nRelease:\t19.04\r\nCodename:\tdisco\r\n\r\n(venv) ldumont@smallpotato:~/projects/ara-ansible$ pip list | grep -i ara\r\nara                 1.3.2    \r\n```\r\n\r\nLaunching the server with \r\n```\r\nara-manage runserver 0.0.0.0:8000\r\n```\r\n\r\n## What is happening ?\r\n\r\n- I'm trying to use the \"ARA_ALLOWED_HOSTS\" environment variable.\r\n- The variable is getting picked up properly but it looks like the rendered value in Django is a bit weird.\r\n\r\nWorking - Setup with the `settings.yaml` \r\n![image](https://user-images.githubusercontent.com/8936473/72657887-25b99700-3978-11ea-8683-365d7925a57f.png)\r\n\r\nRendered Django variable value \r\n![image](https://user-images.githubusercontent.com/8936473/72657903-57caf900-3978-11ea-8f17-19688b26e0e8.png)\r\n\r\nNOT WORKING - using `ARA_ALLOWED_HOSTS` value\r\n\r\n![image](https://user-images.githubusercontent.com/8936473/72657917-7e892f80-3978-11ea-9e0e-f6ab1b3845e8.png)\r\n\r\n![image](https://user-images.githubusercontent.com/8936473/72657936-a6789300-3978-11ea-909c-5270be6e8725.png)\r\n\r\n\r\nWe can see that the Django variable is changed but the format is quite different from when the values are pulled from `settings.yaml.\r\n\r\nI've tried a few other variations on the Env variable syntax but nothing seems to stick.\r\n\r\nLet me know if anything else is required.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/107", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/107/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/107/events", "html_url": "https://github.com/ansible-community/ara/issues/107", "id": 550962133, "node_id": "MDU6SXNzdWU1NTA5NjIxMzM=", "number": 107, "title": "The ara_api and ara_frontend Ansible roles should support deploying to EL8", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-16T17:51:21Z", "updated_at": "2020-01-30T21:08:49Z", "closed_at": "2020-01-30T21:08:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nThe ara_api and ara_frontend Ansible roles\r\n\r\n## What is the idea ?\r\n\r\nWe currently support deploying the API server to Fedora and Ubuntu.\r\nSince EL8 now ships with Python 3 and CentOS 8 is readily available, we can consider adding support for it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/105", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/105/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/105/events", "html_url": "https://github.com/ansible-community/ara/issues/105", "id": 550260488, "node_id": "MDU6SXNzdWU1NTAyNjA0ODg=", "number": 105, "title": "Build and publish ARA API server container images", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1789377344, "node_id": "MDU6TGFiZWwxNzg5Mzc3MzQ0", "url": "https://api.github.com/repos/ansible-community/ara/labels/operations/deployment", "name": "operations/deployment", "color": "4fcc37", "default": false, "description": ""}, {"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-15T15:33:34Z", "updated_at": "2020-05-09T18:29:54Z", "closed_at": "2020-05-09T18:29:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nARA API Server\r\n\r\n## What is the idea ?\r\n\r\nThe ARA API server is a good candidate for living in a container since the state is kept in a database.\r\nI've successfully tested a simple container image built with buildah and podman, the script can be found here: https://review.opendev.org/#/c/687905/3/contrib/containers/ara-api-container-fedora.sh\r\n\r\nIt would be useful and convenient to users if we'd build and publish supported images.\r\nPublishing images is also a dependency if we eventually want to provide tooling to deploy the API server on top Kubernetes or OpenShift.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/102", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/102/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/102/events", "html_url": "https://github.com/ansible-community/ara/issues/102", "id": 537149448, "node_id": "MDU6SXNzdWU1MzcxNDk0NDg=", "number": 102, "title": "TypeError: register() got an unexpected keyword argument 'base_name'", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-12T18:43:43Z", "updated_at": "2019-12-12T19:48:55Z", "closed_at": "2019-12-12T19:48:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nAPI server\r\n\r\n## What is happening ?\r\n\r\nDue to the 3.11 django-rest-framework release today, base_name was removed in favor of basename, resulting in the following exception when attempting to launch the server:\r\n```\r\nTASK [ara_api : Run SQL migrations]\r\nTraceback (most recent call last):\r\n  File \"/home/zuul/.ara-tests/virtualenv/bin/ara-manage\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/ara/server/__main__.py\", line 47, in main\r\n    execute_from_command_line(sys.argv)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/__init__.py\", line 375, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/base.py\", line 323, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/base.py\", line 361, in execute\r\n    self.check()\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/base.py\", line 390, in check\r\n    include_deployment_checks=include_deployment_checks,\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/commands/migrate.py\", line 65, in _run_checks\r\n    issues.extend(super()._run_checks(**kwargs))\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/management/base.py\", line 377, in _run_checks\r\n    return checks.run_checks(**kwargs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/checks/registry.py\", line 72, in run_checks\r\n    new_errors = check(app_configs=app_configs)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/checks/urls.py\", line 40, in check_url_namespaces_unique\r\n    all_namespaces = _load_all_namespaces(resolver)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/core/checks/urls.py\", line 57, in _load_all_namespaces\r\n    url_patterns = getattr(resolver, 'url_patterns', [])\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/utils/functional.py\", line 80, in __get__\r\n    res = instance.__dict__[self.name] = self.func(instance)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/urls/resolvers.py\", line 584, in url_patterns\r\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/utils/functional.py\", line 80, in __get__\r\n    res = instance.__dict__[self.name] = self.func(instance)\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/urls/resolvers.py\", line 577, in urlconf_module\r\n    return import_module(self.urlconf_name)\r\n  File \"/usr/lib64/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/ara/server/urls.py\", line 44, in <module>\r\n    path(\"api/v1/\", include(\"ara.api.urls\")),\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/django/urls/conf.py\", line 34, in include\r\n    urlconf_module = import_module(urlconf_module)\r\n  File \"/usr/lib64/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/zuul/.ara-tests/virtualenv/lib64/python3.7/site-packages/ara/api/urls.py\", line 23, in <module>\r\n    router.register(\"labels\", views.LabelViewSet, base_name=\"label\")\r\nTypeError: register() got an unexpected keyword argument 'base_name'\r\nERROR\r\n{\r\n  \"delta\": \"0:00:00.854477\",\r\n  \"end\": \"2019-12-12 16:03:56.755711\",\r\n  \"msg\": \"non-zero return code\",\r\n  \"rc\": 1,\r\n  \"start\": \"2019-12-12 16:03:55.901234\"\r\n}\r\n```\r\n\r\nThis will be fixed by https://review.opendev.org/#/c/698781/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/100", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/100/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/100/events", "html_url": "https://github.com/ansible-community/ara/issues/100", "id": 533137625, "node_id": "MDU6SXNzdWU1MzMxMzc2MjU=", "number": 100, "title": "Not possible to install ara[server] via pip2 on el7", "user": {"login": "arrfab", "id": 728893, "node_id": "MDQ6VXNlcjcyODg5Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/728893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arrfab", "html_url": "https://github.com/arrfab", "followers_url": "https://api.github.com/users/arrfab/followers", "following_url": "https://api.github.com/users/arrfab/following{/other_user}", "gists_url": "https://api.github.com/users/arrfab/gists{/gist_id}", "starred_url": "https://api.github.com/users/arrfab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arrfab/subscriptions", "organizations_url": "https://api.github.com/users/arrfab/orgs", "repos_url": "https://api.github.com/users/arrfab/repos", "events_url": "https://api.github.com/users/arrfab/events{/privacy}", "received_events_url": "https://api.github.com/users/arrfab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1716835357, "node_id": "MDU6TGFiZWwxNzE2ODM1MzU3", "url": "https://api.github.com/repos/ansible-community/ara/labels/el7", "name": "el7", "color": "44c9a5", "default": false, "description": "Related to support on EL7"}, {"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}, {"id": 389813946, "node_id": "MDU6TGFiZWwzODk4MTM5NDY=", "url": "https://api.github.com/repos/ansible-community/ara/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-05T05:43:35Z", "updated_at": "2019-12-05T15:15:26Z", "closed_at": "2019-12-05T15:14:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When trying to use pip (so still with python 2.7 on .el7), it fails with this : \r\n```\r\nERROR: Could not find a version that satisfies the requirement Django<3.0,>=2.1.5; extra == \"server\" (from ara[server]) (from versions: 1.1.3, 1.1.4, 1.2, 1.2.1, 1.2.2, 1.2.3, 1.2.4, 1.2.5, 1.2.6, 1.2.7, 1.3, 1.3.1, 1.3.2, 1.3.3, 1.3.4, 1.3.5, 1.3.6, 1.3.7, 1.4, 1.4.1, 1.4.2, 1.4.3, 1.4.4, 1.4.5, 1.4.6, 1.4.7, 1.4.8, 1.4.9, 1.4.10, 1.4.11, 1.4.12, 1.4.13, 1.4.14, 1.4.15, 1.4.16, 1.4.17, 1.4.18, 1.4.19, 1.4.20, 1.4.21, 1.4.22, 1.5, 1.5.1, 1.5.2, 1.5.3, 1.5.4, 1.5.5, 1.5.6, 1.5.7, 1.5.8, 1.5.9, 1.5.10, 1.5.11, 1.5.12, 1.6, 1.6.1, 1.6.2, 1.6.3, 1.6.4, 1.6.5, 1.6.6, 1.6.7, 1.6.8, 1.6.9, 1.6.10, 1.6.11, 1.7, 1.7.1, 1.7.2, 1.7.3, 1.7.4, 1.7.5, 1.7.6, 1.7.7, 1.7.8, 1.7.9, 1.7.10, 1.7.11, 1.8a1, 1.8b1, 1.8b2, 1.8rc1, 1.8, 1.8.1, 1.8.2, 1.8.3, 1.8.4, 1.8.5, 1.8.6, 1.8.7, 1.8.8, 1.8.9, 1.8.10, 1.8.11, 1.8.12, 1.8.13, 1.8.14, 1.8.15, 1.8.16, 1.8.17, 1.8.18, 1.8.19, 1.9a1, 1.9b1, 1.9rc1, 1.9rc2, 1.9, 1.9.1, 1.9.2, 1.9.3, 1.9.4, 1.9.5, 1.9.6, 1.9.7, 1.9.8, 1.9.9, 1.9.10, 1.9.11, 1.9.12, 1.9.13, 1.10a1, 1.10b1, 1.10rc1, 1.10, 1.10.1, 1.10.2, 1.10.3, 1.10.4, 1.10.5, 1.10.6, 1.10.7, 1.10.8, 1.11a1, 1.11b1, 1.11rc1, 1.11, 1.11.1, 1.11.2, 1.11.3, 1.11.4, 1.11.5, 1.11.6, 1.11.7, 1.11.8, 1.11.9, 1.11.10, 1.11.11, 1.11.12, 1.11.13, 1.11.14, 1.11.15, 1.11.16, 1.11.17, 1.11.18, 1.11.20, 1.11.21, 1.11.22, 1.11.23, 1.11.24, 1.11.25, 1.11.26)\r\nERROR: No matching distribution found for Django<3.0,>=2.1.5; extra == \"server\" (from ara[server])\r\n```\r\nIs there no way to get current ara installed on .el7 platform ? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/98", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/98/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/98/events", "html_url": "https://github.com/ansible-community/ara/issues/98", "id": 532806924, "node_id": "MDU6SXNzdWU1MzI4MDY5MjQ=", "number": 98, "title": "no attribute 'ActionModule' when using ansible 2.6.20 ", "user": {"login": "arrfab", "id": 728893, "node_id": "MDQ6VXNlcjcyODg5Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/728893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arrfab", "html_url": "https://github.com/arrfab", "followers_url": "https://api.github.com/users/arrfab/followers", "following_url": "https://api.github.com/users/arrfab/following{/other_user}", "gists_url": "https://api.github.com/users/arrfab/gists{/gist_id}", "starred_url": "https://api.github.com/users/arrfab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arrfab/subscriptions", "organizations_url": "https://api.github.com/users/arrfab/orgs", "repos_url": "https://api.github.com/users/arrfab/repos", "events_url": "https://api.github.com/users/arrfab/events{/privacy}", "received_events_url": "https://api.github.com/users/arrfab/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-12-04T16:47:18Z", "updated_at": "2019-12-05T15:21:24Z", "closed_at": "2019-12-05T15:21:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What is your ARA installation like ?\r\nAra installed in virtualenv, with pip like ansible 2.6.20 (on CentOS 8)\r\n```\r\npip list|egrep 'ara|ansible'\r\nansible                   2.6.20   \r\nara                       1.3.0    \r\n```\r\n\r\n## What is happening ?\r\nWhen calling ansible-playbook with a working playbook, it starts with \r\n```\r\nOperations to perform:\r\n  Apply all migrations: admin, api, auth, contenttypes, db, sessions\r\nRunning migrations:\r\n  No migrations to apply.\r\n\r\nPLAY \r\n```\r\nand then the tasks until it reaches to one template task and then (after the OK: part): \r\n\r\n```\r\nERROR! Unexpected Exception, this is probably a bug: module 'ansible.plugins.action.service' has no attribute 'ActionModule'\r\n```\r\nThe playbook stops at this stage, while the tasks that ran are availble in ara\r\nsome -vvv output : \r\n```\r\nERROR! Unexpected Exception, this is probably a bug: module 'ansible.plugins.action.service' has no attribute 'ActionModule'\r\nthe full traceback was:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/arrfab/virtualenvs/ansible26/bin/ansible-playbook\", line 118, in <module>\r\n    exit_code = cli.run()\r\n  File \"/home/arrfab/virtualenvs/ansible26/lib/python3.6/site-packages/ansible/cli/playbook.py\", line 122, in run\r\n    results = pbex.run()\r\n  File \"/home/arrfab/virtualenvs/ansible26/lib/python3.6/site-packages/ansible/executor/playbook_executor.py\", line 156, in run\r\n    result = self._tqm.run(play=play)\r\n  File \"/home/arrfab/virtualenvs/ansible26/lib/python3.6/site-packages/ansible/executor/task_queue_manager.py\", line 292, in run\r\n    play_return = strategy.run(iterator, play_context)\r\n  File \"/home/arrfab/ansible/CentOS_dev/mitogen-0.2.8/ansible_mitogen/strategy.py\", line 350, in run\r\n    lambda: run(iterator, play_context)\r\n  File \"/home/arrfab/ansible/CentOS_dev/mitogen-0.2.8/mitogen/core.py\", line 633, in _profile_hook\r\n    return func(*args)\r\n  File \"/home/arrfab/ansible/CentOS_dev/mitogen-0.2.8/ansible_mitogen/strategy.py\", line 350, in <lambda>\r\n    lambda: run(iterator, play_context)\r\n  File \"/home/arrfab/virtualenvs/ansible26/lib/python3.6/site-packages/ansible/plugins/strategy/linear.py\", line 247, in run\r\n    action = action_loader.get(task.action, class_only=True)\r\n  File \"/home/arrfab/ansible/CentOS_dev/mitogen-0.2.8/ansible_mitogen/strategy.py\", line 135, in wrap_action_loader__get\r\n    klass = action_loader__get(name, **get_kwargs)\r\n  File \"/home/arrfab/virtualenvs/ansible26/lib/python3.6/site-packages/ansible/plugins/loader.py\", line 381, in get\r\n    obj = getattr(self._module_cache[path], self.class_name)\r\nAttributeError: module 'ansible.plugins.action.service' has no attribute 'ActionModule'\r\n[mux  20272] 17:43:59.021152 D mitogen: Waker(fd=11/13): disconnecting\r\n```\r\n\r\nWondering if that conflicting with mitogen (version mitogen-0.2.8) that is used also with strategy_plugin = mitogen_linear\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/96", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/96/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/96/events", "html_url": "https://github.com/ansible-community/ara/issues/96", "id": 530479651, "node_id": "MDU6SXNzdWU1MzA0Nzk2NTE=", "number": 96, "title": "Callback exception: Connection aborted.', RemoteDisconnected('Remote end closed connection without response')", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 389813944, "node_id": "MDU6TGFiZWwzODk4MTM5NDQ=", "url": "https://api.github.com/repos/ansible-community/ara/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-29T20:22:04Z", "updated_at": "2019-11-29T21:57:03Z", "closed_at": "2019-11-29T21:57:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n\r\nThe callback plugin\r\n\r\n## What is your ARA installation like ?\r\n\r\nansible 2.8.5\r\npython 3.6.9\r\nara 1.3.0rc1\r\n\r\n## What is happening ?\r\n\r\nThe creation of the playbook works but then fails like this:\r\n```\r\n+ export ARA_DEBUG=true\r\n+ ARA_DEBUG=true\r\n+ export ARA_LOG_LEVEL=DEBUG\r\n+ ARA_LOG_LEVEL=DEBUG\r\n+ /usr/local/bin/ansible-playbook -vvvv bootstrap-aio.yml\r\nansible-playbook 2.8.5\r\n  config file = None\r\n  configured module search path = ['/etc/ansible/roles/config_template/library', '/etc/ansible/roles/plugins/library', '/etc/ansible/roles/ceph-ansible/library']\r\n  ansible python module location = /opt/ansible-runtime/lib/python3.6/site-packages/ansible\r\n  executable location = /opt/ansible-runtime/bin/ansible-playbook\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nNo config file found; using defaults\r\nsetting up inventory plugins\r\nhost_list declined parsing /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/test-inventory.ini as it did not pass it's verify_file() method\r\nscript declined parsing /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/test-inventory.ini as it did not pass it's verify_file() method\r\nauto declined parsing /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/test-inventory.ini as it did not pass it's verify_file() method\r\nyaml declined parsing /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/test-inventory.ini as it did not pass it's verify_file() method\r\nSet default localhost to localhost\r\nParsed /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/test-inventory.ini inventory source with ini plugin\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/check-requirements.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/install_packages.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_data_disk.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\n[DEPRECATION WARNING]: The use of 'static' has been deprecated. Use\r\n'import_tasks' for static inclusion, or 'include_tasks' for dynamic inclusion.\r\nThis feature will be removed in version 2.12. Deprecation warnings can be\r\ndisabled by setting deprecation_warnings=False in ansible.cfg.\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_machines.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_zfs.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_btrfs.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_cinder.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_nova.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_swift.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_loopback_manila.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_ceph.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_hostname.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_networking.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_ssh_keys.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_squid.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nstatically imported: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/roles/bootstrap-host/tasks/prepare_aio_config.yml\r\nLoading callback plugin default of type stdout, v2.0 from /opt/ansible-runtime/lib/python3.6/site-packages/ansible/plugins/callback/default.py\r\nLoading callback plugin ara_default of type awesome, v2.0 from /opt/ansible-runtime/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\r\n[ara] No setting found for SECRET_KEY. Generating a random key...\r\n[ara] Creating data & configuration directory: /root/.ara/server\r\n[ara] Writing default settings to /root/.ara/server/settings.yaml\r\nOperations to perform:\r\n  Apply all migrations: admin, api, auth, contenttypes, db, sessions\r\nRunning migrations:\r\n  Applying contenttypes.0001_initial... OK\r\n  Applying auth.0001_initial... OK\r\n  Applying admin.0001_initial... OK\r\n  Applying admin.0002_logentry_remove_auto_add... OK\r\n  Applying api.0001_initial... OK\r\n  Applying api.0002_remove_host_alias... OK\r\n  Applying api.0003_add_missing_result_properties... OK\r\n  Applying api.0004_duration_in_database... OK\r\n  Applying contenttypes.0002_remove_content_type_name... OK\r\n  Applying auth.0002_alter_permission_name_max_length... OK\r\n  Applying auth.0003_alter_user_email_max_length... OK\r\n  Applying auth.0004_alter_user_username_opts... OK\r\n  Applying auth.0005_alter_user_last_login_null... OK\r\n  Applying auth.0006_require_contenttypes_0002... OK\r\n  Applying auth.0007_alter_validators_add_error_messages... OK\r\n  Applying auth.0008_alter_user_username_max_length... OK\r\n  Applying auth.0009_alter_user_last_name_max_length... OK\r\n  Applying db.0001_initial... OK\r\n  Applying sessions.0001_initial... OK\r\nLoading callback plugin installer_checkpoint of type aggregate, v2.0 from /etc/ansible/roles/ceph-ansible/plugins/callback/installer_checkpoint.py\r\n2019-11-29 19:59:53,366 INFO p=9129 u=root | : Loading callback plugin installer_checkpoint of type aggregate, v2.0 from /etc/ansible/roles/ceph-ansible/plugins/callback/installer_checkpoint.py\r\nPLAYBOOK: bootstrap-aio.yml ****************************************************\r\n2019-11-29 19:59:53,555 INFO p=9129 u=root | : PLAYBOOK: bootstrap-aio.yml ****************************************************\r\nPositional arguments: bootstrap-aio.yml\r\nverbosity: 4\r\nconnection: ssh\r\ntimeout: 5\r\nforce_handlers: True\r\nbecome_method: sudo\r\ntags: ('all',)\r\ninventory: ('/home/zuul/src/opendev.org/openstack/openstack-ansible/tests/test-inventory.ini',)\r\nforks: 5\r\n2019-11-29 19:59:53,555 DEBUG ara.plugins.callback.default: v2_playbook_on_start\r\n2019-11-29 19:59:53,555 DEBUG ara.plugins.callback.default: Ignoring argument: extra_vars\r\n2019-11-29 19:59:53,558 DEBUG urllib3.connectionpool: Starting new HTTP connection (1): localhost:58101\r\n2019-11-29 19:59:53,573 DEBUG urllib3.connectionpool: http://localhost:58101 \"POST /api/v1/playbooks HTTP/1.1\" 201 1092\r\n2019-11-29 19:59:53,573 DEBUG ara.clients.http: HTTP 201: post on /api/v1/playbooks\r\n2019-11-29 19:59:53,573 DEBUG ara.plugins.callback.default: File not in cache, getting or creating: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/bootstrap-aio.yml\r\n [WARNING]: Failure using method (v2_playbook_on_start) in callback plugin\r\n(<ansible.plugins.callback./opt/ansible-runtime/lib/python3.6/site-\r\npackages/ara/plugins/callback/ara_default.CallbackModule object at\r\n0x7f37d5228898>): ('Connection aborted.', RemoteDisconnected('Remote end closed\r\nconnection without response',))\r\n2019-11-29 19:59:53,576 INFO p=9129 u=root | :  [WARNING]: Failure using method (v2_playbook_on_start) in callback plugin\r\n(<ansible.plugins.callback./opt/ansible-runtime/lib/python3.6/site-\r\npackages/ara/plugins/callback/ara_default.CallbackModule object at\r\n0x7f37d5228898>): ('Connection aborted.', RemoteDisconnected('Remote end closed\r\nconnection without response',))\r\nCallback Exception:\r\n  File \"/opt/ansible-runtime/lib/python3.6/site-packages/ansible/executor/task_queue_manager.py\", line 333, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\", line 196, in v2_playbook_on_start\r\n    self._get_or_create_file(path)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\", line 325, in _get_or_create_file\r\n    \"/api/v1/files\", playbook=self.playbook[\"id\"], path=path, content=content\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 115, in post\r\n    return self._request(\"post\", endpoint, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 93, in _request\r\n    response = func(url, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 69, in post\r\n    return self._request(\"post\", url, data=json.dumps(payload))\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 57, in _request\r\n    return self.http.request(method, self.endpoint + url, timeout=self.timeout, **payload)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/requests/sessions.py\", line 533, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/requests/sessions.py\", line 646, in send\r\n    r = adapter.send(request, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/requests/adapters.py\", line 498, in send\r\n    raise ConnectionError(err, request=request)\r\n2019-11-29 19:59:53,577 INFO p=9129 u=root | : Callback Exception:\r\n  File \"/opt/ansible-runtime/lib/python3.6/site-packages/ansible/executor/task_queue_manager.py\", line 333, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\", line 196, in v2_playbook_on_start\r\n    self._get_or_create_file(path)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/plugins/callback/ara_default.py\", line 325, in _get_or_create_file\r\n    \"/api/v1/files\", playbook=self.playbook[\"id\"], path=path, content=content\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 115, in post\r\n    return self._request(\"post\", endpoint, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 93, in _request\r\n    response = func(url, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 69, in post\r\n    return self._request(\"post\", url, data=json.dumps(payload))\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/ara/clients/http.py\", line 57, in _request\r\n    return self.http.request(method, self.endpoint + url, timeout=self.timeout, **payload)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/requests/sessions.py\", line 533, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/requests/sessions.py\", line 646, in send\r\n    r = adapter.send(request, **kwargs)\r\n   File \"/opt/ansible-runtime/lib/python3.6/site-packages/requests/adapters.py\", line 498, in send\r\n    raise ConnectionError(err, request=request)\r\n1 plays in bootstrap-aio.yml\r\n2019-11-29 19:59:53,577 INFO p=9129 u=root | : 1 plays in bootstrap-aio.yml\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\n2019-11-29 19:59:53,582 INFO p=9129 u=root | : Read vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\n2019-11-29 19:59:53,586 INFO p=9129 u=root | : Read vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\n2019-11-29 19:59:53,591 INFO p=9129 u=root | : Read vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\nPLAY [Bootstrap the All-In-One (AIO)] ******************************************\r\n2019-11-29 19:59:53,593 INFO p=9129 u=root | : PLAY [Bootstrap the All-In-One (AIO)] ******************************************\r\n2019-11-29 19:59:53,593 DEBUG ara.plugins.callback.default: v2_playbook_on_play_start\r\nRead vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\n2019-11-29 19:59:53,597 INFO p=9129 u=root | : Read vars_file '{{ playbook_dir }}/../playbooks/defaults/repo_packages/openstack_services.yml'\r\n2019-11-29 19:59:53,597 DEBUG ara.plugins.callback.default: File not in cache, getting or creating: /home/zuul/src/opendev.org/openstack/openstack-ansible/tests/bootstrap-aio.yml\r\n2019-11-29 19:59:53,598 DEBUG urllib3.connectionpool: Starting new HTTP connection (2): localhost:58101\r\n2019-11-29 19:59:53,615 DEBUG urllib3.connectionpool: http://localhost:58101 \"POST /api/v1/files HTTP/1.1\" 201 3089\r\n2019-11-29 19:59:53,616 DEBUG ara.clients.http: HTTP 201: post on /api/v1/files\r\n2019-11-29 19:59:53,616 DEBUG ara.plugins.callback.default: File not in cache, getting or creating: /home/zuul/src/opendev.org/openstack/openstack-ansible/playbooks/defaults/repo_packages/openstack_services.yml\r\n2019-11-29 19:59:53,618 DEBUG urllib3.connectionpool: Resetting dropped connection: localhost\r\n2019-11-29 19:59:53,636 DEBUG urllib3.connectionpool: http://localhost:58101 \"POST /api/v1/files HTTP/1.1\" 201 14147\r\n2019-11-29 19:59:53,637 DEBUG ara.clients.http: HTTP 201: post on /api/v1/files\r\n2019-11-29 19:59:53,637 DEBUG ara.plugins.callback.default: File not in cache, getting or creating: /etc/ansible/roles/sshd/defaults/main.yml\r\n2019-11-29 19:59:53,639 DEBUG urllib3.connectionpool: Resetting dropped connection: localhost\r\n2019-11-29 19:59:53,654 DEBUG urllib3.connectionpool: http://localhost:58101 \"POST /api/v1/files HTTP/1.1\" 201 1715\r\n2019-11-29 19:59:53,654 DEBUG ara.clients.http: HTTP 201: post on /api/v1/files\r\n2019-11-29 19:59:53,654 DEBUG ara.plugins.callback.default: File not in cache, getting or creating: /etc/ansible/roles/sshd/meta/main.yml\r\n [WARNING]: Failure using method (v2_playbook_on_play_start) in callback plugin\r\n(<ansible.plugins.callback./opt/ansible-runtime/lib/python3.6/site-\r\npackages/ara/plugins/callback/ara_default.CallbackModule object at\r\n0x7f37d5228898>): ('Connection aborted.', RemoteDisconnected('Remote end closed\r\nconnection without response',))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/95", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/95/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/95/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/95/events", "html_url": "https://github.com/ansible-community/ara/issues/95", "id": 530439315, "node_id": "MDU6SXNzdWU1MzA0MzkzMTU=", "number": 95, "title": "callback: add support for specifying default playbook labels from Ansible configuration", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-29T17:16:01Z", "updated_at": "2020-01-29T02:08:26Z", "closed_at": "2020-01-29T02:08:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nThe ara_default callback\r\n\r\n## What is the idea ?\r\n\r\nPlaybook labels are currently set based on the ``ara_playbook_labels`` Ansible variable: https://ara.readthedocs.io/en/latest/playbook-names-and-labels.html\r\n\r\nIn practice, this is done once at the beginning of every play here: https://github.com/ansible-community/ara/blob/f404247dea6c59f1715c90e9d8e1ba119dbe1fd4/ara/plugins/callback/ara_default.py#L205-L210\r\n\r\nIt would be nice to be able to supply a default list of labels from the Ansible configuration instead of Ansible variables. This would allow labels to be applied without needing to specify Ansible variables or modify playbooks. Any labels specified as variables would be added to the default list.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/93", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/93/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/93/events", "html_url": "https://github.com/ansible-community/ara/issues/93", "id": 517332636, "node_id": "MDU6SXNzdWU1MTczMzI2MzY=", "number": 93, "title": "Globally available objects", "user": {"login": "markfaine", "id": 949949, "node_id": "MDQ6VXNlcjk0OTk0OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/949949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markfaine", "html_url": "https://github.com/markfaine", "followers_url": "https://api.github.com/users/markfaine/followers", "following_url": "https://api.github.com/users/markfaine/following{/other_user}", "gists_url": "https://api.github.com/users/markfaine/gists{/gist_id}", "starred_url": "https://api.github.com/users/markfaine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markfaine/subscriptions", "organizations_url": "https://api.github.com/users/markfaine/orgs", "repos_url": "https://api.github.com/users/markfaine/repos", "events_url": "https://api.github.com/users/markfaine/events{/privacy}", "received_events_url": "https://api.github.com/users/markfaine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1399379482, "node_id": "MDU6TGFiZWwxMzk5Mzc5NDgy", "url": "https://api.github.com/repos/ansible-community/ara/labels/needs%20information", "name": "needs information", "color": "fce42a", "default": false, "description": "Needs more information to be triaged properly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-04T18:43:30Z", "updated_at": "2019-11-19T16:35:19Z", "closed_at": "2019-11-19T16:34:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this request. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\nAPI\r\n\r\n## What is your ARA installation like ?\r\n<!-- What version of Ansible and ARA ? Did you install from source or from PyPi ? With an Ansible role ? In a virtualenv or a container ? Which Linux distribution ? Which database driver ? -->\r\n<!-- Feel free to include any other installation details that could be relevant to this report -->\r\nAlpine Docker container in a python virtual environment using git master\r\nThe database driver is mysqldb\r\n\r\n## What is the idea ?\r\n<!-- Describe how the feature would be used, why it is needed and what it would solve -->\r\n<!-- If relevant, please include code or playbook examples -->\r\nMost, if not all of our projects will be selecting from the same group of inventory, environments, repositories, and keys, it would be nice if there were a way to flag these items as global so that they could be used in any project without recreating them.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/91", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/91/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/91/events", "html_url": "https://github.com/ansible-community/ara/issues/91", "id": 517270545, "node_id": "MDU6SXNzdWU1MTcyNzA1NDU=", "number": 91, "title": "Labels should wrap", "user": {"login": "markfaine", "id": 949949, "node_id": "MDQ6VXNlcjk0OTk0OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/949949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markfaine", "html_url": "https://github.com/markfaine", "followers_url": "https://api.github.com/users/markfaine/followers", "following_url": "https://api.github.com/users/markfaine/following{/other_user}", "gists_url": "https://api.github.com/users/markfaine/gists{/gist_id}", "starred_url": "https://api.github.com/users/markfaine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markfaine/subscriptions", "organizations_url": "https://api.github.com/users/markfaine/orgs", "repos_url": "https://api.github.com/users/markfaine/repos", "events_url": "https://api.github.com/users/markfaine/events{/privacy}", "received_events_url": "https://api.github.com/users/markfaine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1657566675, "node_id": "MDU6TGFiZWwxNjU3NTY2Njc1", "url": "https://api.github.com/repos/ansible-community/ara/labels/UI", "name": "UI", "color": "fbca04", "default": false, "description": "Related to the built-in user interface"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-04T16:40:04Z", "updated_at": "2020-02-04T00:17:50Z", "closed_at": "2020-02-03T18:17:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this request. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\nAPI Client\r\n\r\n## What is your ARA installation like ?\r\n<!-- What version of Ansible and ARA ? Did you install from source or from PyPi ? With an Ansible role ? In a virtualenv or a container ? Which Linux distribution ? Which database driver ? -->\r\n<!-- Feel free to include any other installation details that could be relevant to this report -->\r\nAlpine Docker container in a python virtual environment using git master\r\nThe database driver is mysqldb\r\n\r\n## What is the idea ?\r\n<!-- Describe how the feature would be used, why it is needed and what it would solve -->\r\n<!-- If relevant, please include code or playbook examples -->\r\n![image](https://user-images.githubusercontent.com/949949/68139188-564c7180-feef-11e9-841c-8c2ac33f3e2c.png)\r\nSee the attached images.  If you have more than a few labels they run over the text.  I think they should probably wrap to a new line, though any solution that looks good is fine.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/90", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/90/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/90/events", "html_url": "https://github.com/ansible-community/ara/issues/90", "id": 517167258, "node_id": "MDU6SXNzdWU1MTcxNjcyNTg=", "number": 90, "title": "API client: Add support for customizing SSL verification", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529931, "node_id": "MDU6TGFiZWwxMzIyNTI5OTMx", "url": "https://api.github.com/repos/ansible-community/ara/labels/client", "name": "client", "color": "bee582", "default": false, "description": "Related to the python API clients"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-04T13:54:00Z", "updated_at": "2019-11-05T15:36:44Z", "closed_at": "2019-11-05T15:36:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nhttp API client\r\n\r\n## What is the idea ?\r\n\r\nWe don't currently expose the python requests setting to ignore SSL verification: https://requests.kennethreitz.org//en/latest/user/advanced/#ssl-cert-verification\r\n\r\nWe should add a \"verify\" argument.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/89", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/89/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/89/events", "html_url": "https://github.com/ansible-community/ara/issues/89", "id": 516659381, "node_id": "MDU6SXNzdWU1MTY2NTkzODE=", "number": 89, "title": "Slack invatation link is expired", "user": {"login": "markfaine", "id": 949949, "node_id": "MDQ6VXNlcjk0OTk0OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/949949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markfaine", "html_url": "https://github.com/markfaine", "followers_url": "https://api.github.com/users/markfaine/followers", "following_url": "https://api.github.com/users/markfaine/following{/other_user}", "gists_url": "https://api.github.com/users/markfaine/gists{/gist_id}", "starred_url": "https://api.github.com/users/markfaine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markfaine/subscriptions", "organizations_url": "https://api.github.com/users/markfaine/orgs", "repos_url": "https://api.github.com/users/markfaine/repos", "events_url": "https://api.github.com/users/markfaine/events{/privacy}", "received_events_url": "https://api.github.com/users/markfaine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1656726191, "node_id": "MDU6TGFiZWwxNjU2NzI2MTkx", "url": "https://api.github.com/repos/ansible-community/ara/labels/community", "name": "community", "color": "fce6a9", "default": false, "description": "Related to the project community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-02T17:08:55Z", "updated_at": "2019-11-07T15:10:39Z", "closed_at": "2019-11-07T15:10:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Slack: https://arecordsansible.slack.com ([invitation link)](https://arecordsansible.slack.com/join/shared_invite/enQtMjMxNzI4ODAxMDQxLWU4MmZhZTI4ZjRjOTUwZTM2MzM3MzcwNDU1YzFmNzRlMzI0NTUzNDY1MWJlNThhM2I4ZTViZjUwZTRkNTBiM2I)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/87", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/87/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/87/events", "html_url": "https://github.com/ansible-community/ara/issues/87", "id": 515165335, "node_id": "MDU6SXNzdWU1MTUxNjUzMzU=", "number": 87, "title": "API not receiving hosts. ", "user": {"login": "adahlmanpinterest", "id": 48810472, "node_id": "MDQ6VXNlcjQ4ODEwNDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/48810472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adahlmanpinterest", "html_url": "https://github.com/adahlmanpinterest", "followers_url": "https://api.github.com/users/adahlmanpinterest/followers", "following_url": "https://api.github.com/users/adahlmanpinterest/following{/other_user}", "gists_url": "https://api.github.com/users/adahlmanpinterest/gists{/gist_id}", "starred_url": "https://api.github.com/users/adahlmanpinterest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adahlmanpinterest/subscriptions", "organizations_url": "https://api.github.com/users/adahlmanpinterest/orgs", "repos_url": "https://api.github.com/users/adahlmanpinterest/repos", "events_url": "https://api.github.com/users/adahlmanpinterest/events{/privacy}", "received_events_url": "https://api.github.com/users/adahlmanpinterest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-10-31T04:59:29Z", "updated_at": "2019-11-02T01:23:51Z", "closed_at": "2019-11-02T01:23:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nAPI Client\r\n\r\n\r\n## What is your ARA installation like ?\r\nAra api is installed on an its own aws instance behind an ELB. \r\nThe ara-web server is able to talk to the api webserver , ara.pinadmin.com and araweb.pinadmin.com. \r\n\r\nThe elb is pointing from 80-8000. And allowing all traffic from our RFC 1819 space. \r\n\r\n\r\n## What is happening ?\r\nCurrently running test ansible runs and the API server isn't picking up the request. Here is the ansible.cfg:\r\n\r\n```\r\n[defaults]\r\ninventory = /etc/ansible/inventory/production.yaml\r\nremote_tmp = /etc/ansible/tmp\r\nlocal_tmp = /etc/ansible/tmp\r\nlog_path = /var/log/ansible.log\r\ncallback =  ara\r\ncallback_type = notification\r\n[ara]\r\napi_client = http\r\napi_server = http://ara.pinadmin.com\r\napi_username = joe\r\napi_password = joe12345678\r\napi_timeout = 15\r\nignored_facts = '[\"ansible_env\", \"ansible_all_ipv4_addresses\"]'\r\nignored_arguments = '[\"extra_vars\", \"vault_password_files\"]'\r\n```\r\n\r\n\r\nplaybook:\r\n```\r\n - name: Run playbook for all hosts\r\n    hosts: all \r\n  connection: local\r\n  vars_files:\r\n    - /etc/ansible/vars/basevars.yml\r\n  become: true\r\n  vars:\r\n    ara_playbook_name: base\r\n    ara_playbook_labels:\r\n        - base-test\r\n  roles:\r\n   - logrotate\r\n```\r\n\r\nsettings.yaml \r\n```default:\r\n  ALLOWED_HOSTS: !!python/object/new:box.BoxList\r\n    listitems:\r\n    - ::1\r\n    - 127.0.0.1\r\n    - localhost\r\n    - ara.mars.pinadmin.com\r\n    - ara.pinadmin.com\r\n    state:\r\n      box_class: &id001 !!python/name:box.Box ''\r\n      box_options: {}\r\n      box_org_ref: 140525303662472\r\n  BASE_DIR: /opt/ara/.ara/server\r\n  CORS_ORIGIN_ALLOW_ALL: true\r\n  CORS_ORIGIN_WHITELIST: !!python/object/new:box.BoxList\r\n    listitems:\r\n    - http://127.0.0.1:8000\r\n    - http://ara.pinadmin.com:8000\r\n    - http://ara.mars.pinadmin.com:8000\r\n    - http://araweb.pinadmin.com:3000\r\n    - http://araweb.mars.pinadmin.com:3000\r\n    - http://araweb.pinadmin.com\r\n    - http://araweb.mars.pinadmin.com\r\n    - http://10.245.66.205:3000/\r\n```\r\n\r\n The security groups are allowing traffic in as I'm able to curl the api server from all my servers.  Am I missing anything Ansible wise that would cause these requests to not reach the api?\r\n\r\n## What should be happening ?\r\nAnsible playbooks should be reporting to the API.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/85", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/85/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/85/events", "html_url": "https://github.com/ansible-community/ara/issues/85", "id": 514507916, "node_id": "MDU6SXNzdWU1MTQ1MDc5MTY=", "number": 85, "title": "built-in interface vs ara-web", "user": {"login": "jcheger", "id": 4332314, "node_id": "MDQ6VXNlcjQzMzIzMTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4332314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcheger", "html_url": "https://github.com/jcheger", "followers_url": "https://api.github.com/users/jcheger/followers", "following_url": "https://api.github.com/users/jcheger/following{/other_user}", "gists_url": "https://api.github.com/users/jcheger/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcheger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcheger/subscriptions", "organizations_url": "https://api.github.com/users/jcheger/orgs", "repos_url": "https://api.github.com/users/jcheger/repos", "events_url": "https://api.github.com/users/jcheger/events{/privacy}", "received_events_url": "https://api.github.com/users/jcheger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}, {"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-30T09:18:39Z", "updated_at": "2019-10-31T08:27:46Z", "closed_at": "2019-10-31T08:27:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was using ara for debugging ansible scripts for months, and I did make the mistake to update it. Regarding the current version of ara, I'm completely confused. After installing ara[server] (1.1.0), and ara-web, I can only see a kind of log of each task. But how can I see the records, the details of the playbooks, all the stuff that were useful in the legacy interface ?\r\n\r\nIs ara-web an early and very incomplete rewrite of the legacy built-in interface ? Can we still use the legacy one, but how ? The way it works at now is completely useless, giving much less information than the CLI.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/84", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/84/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/84/events", "html_url": "https://github.com/ansible-community/ara/issues/84", "id": 513401356, "node_id": "MDU6SXNzdWU1MTM0MDEzNTY=", "number": 84, "title": "ara_api role: add support for installation from Fedora packages", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-28T16:04:40Z", "updated_at": "2020-02-03T16:13:21Z", "closed_at": "2020-02-03T16:13:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nThe ara_api role.\r\n\r\n## What is the idea ?\r\n\r\nARA 1.x is packaged for [Fedora](https://koji.fedoraproject.org/koji/packageinfo?packageID=24394) it would be nice to add support for installation from packages.\r\n\r\nWhen creating the role, we intentionally left a toggle to make it easier to extend in the future:\r\nhttps://github.com/ansible-community/ara/blob/a0cf0cb8371aa7f6071a9a35e8d1bf5c7c9551c7/roles/ara_api/defaults/main.yaml#L33-L36\r\n\r\nThere might be other things to think about but this would add a \"distribution\" install toggle.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/83", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/83/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/83/events", "html_url": "https://github.com/ansible-community/ara/issues/83", "id": 512719989, "node_id": "MDU6SXNzdWU1MTI3MTk5ODk=", "number": 83, "title": "Ara server setup. Manage.py missing", "user": {"login": "adahlmanpinterest", "id": 48810472, "node_id": "MDQ6VXNlcjQ4ODEwNDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/48810472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adahlmanpinterest", "html_url": "https://github.com/adahlmanpinterest", "followers_url": "https://api.github.com/users/adahlmanpinterest/followers", "following_url": "https://api.github.com/users/adahlmanpinterest/following{/other_user}", "gists_url": "https://api.github.com/users/adahlmanpinterest/gists{/gist_id}", "starred_url": "https://api.github.com/users/adahlmanpinterest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adahlmanpinterest/subscriptions", "organizations_url": "https://api.github.com/users/adahlmanpinterest/orgs", "repos_url": "https://api.github.com/users/adahlmanpinterest/repos", "events_url": "https://api.github.com/users/adahlmanpinterest/events{/privacy}", "received_events_url": "https://api.github.com/users/adahlmanpinterest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-25T21:03:29Z", "updated_at": "2019-10-25T21:23:03Z", "closed_at": "2019-10-25T21:21:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nApi server. \r\n\r\n\r\n## What is your ARA installation like ?\r\nThe install is for an ansible environment that is running masterless. The server running Ara is installed under /opt/ara with the folders belonging to the ara user and group.  \r\nUbuntu 18.04\r\napt install python3-venv\r\n/opt/ara/.ara/virtualenv/bin/pip install \"ara[server]\"\r\nara@ara:/opt/ara/.ara/virtualenv \r\n## What is happening ?\r\nFollowing the documentation on the website I am experiencing a few issues with the setup and install. \r\nIssue 1)   While running the install fro ara[server] this error appears\r\n                Failed building wheel for PyYAML\r\n                Running setup.py clean for PyYAML\r\nIssue 2) Running from bin` ./ara-manage createsuperuser  --username=admin --email=sre@company.com` results in \r\n```You have 20 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, api, auth, contenttypes, sessions.\r\nRun 'python manage.py migrate' to apply them.  Traceback (most recent call last):\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/sqlite3/base.py\", line 383, in execute\r\n    return Database.Cursor.execute(self, query, params)\r\nsqlite3.OperationalError: no such table: auth_user\r\n\r\nThe above exception was the direct cause of the following exception: Traceback (most recent call last):\r\n  File \"./ara-manage\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/ara/server/__main__.py\", line 35, in main\r\n    execute_from_command_line(sys.argv)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/core/management/__init__.py\", line 375, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/core/management/base.py\", line 323, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/contrib/auth/management/commands/createsuperuser.py\", line 61, in execute\r\n    return super().execute(*args, **options)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/core/management/base.py\", line 364, in execute\r\n    output = self.handle(*args, **options)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/contrib/auth/management/commands/createsuperuser.py\", line 82, in handle\r\n    default_username = get_default_username()\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/contrib/auth/management/__init__.py\", line 140, in get_default_username\r\n    auth_app.User._default_manager.get(username=default_username)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/models/query.py\", line 402, in get\r\n    num = len(clone)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/models/query.py\", line 256, in __len__\r\n    self._fetch_all()\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/models/query.py\", line 1242, in _fetch_all\r\n    self._result_cache = list(self._iterable_class(self))\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/models/query.py\", line 55, in __iter__\r\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/models/sql/compiler.py\", line 1100, in execute_sql\r\n    cursor.execute(sql, params)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/utils.py\", line 67, in execute\r\n    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/utils.py\", line 76, in _execute_with_wrappers\r\n    return executor(sql, params, many, context)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/utils.py\", line 89, in __exit__\r\n    raise dj_exc_value.with_traceback(traceback) from exc_value\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/utils.py\", line 84, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/opt/ara/.ara/virtualenv/lib/python3.6/site-packages/django/db/backends/sqlite3/base.py\", line 383, in execute\r\n    return Database.Cursor.execute(self, query, params)\r\ndjango.db.utils.OperationalError: no such table: auth_user``` Runing ```'python manage.py migrate``` results in ```python: can't open file 'manage.py': [Errno 2] No such file or directory``` even after using pip to install manage.py. Is there something I'm missing in the documentation?\r\n\r\n\r\n## What should be happening ?\r\nUsers should be created and server started with no python errors. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/80", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/80/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/80/events", "html_url": "https://github.com/ansible-community/ara/issues/80", "id": 511575927, "node_id": "MDU6SXNzdWU1MTE1NzU5Mjc=", "number": 80, "title": "Performance degradation relative to number of playbook hosts", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-23T21:14:40Z", "updated_at": "2019-10-24T14:08:25Z", "closed_at": "2019-10-24T14:08:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I ran the following simple test playbook against 64 hosts:\r\n```\r\n- name: Test playbook\r\n  hosts: test_hosts\r\n  gather_facts: no\r\n  tasks:\r\n    - name: Test task\r\n      debug:\r\n        msg: Test\r\n\r\n    - name: Get facts\r\n      setup:\r\n\r\n    - name: Another test task\r\n      debug:\r\n        msg: Test\r\n```\r\n\r\nRunning with ``ANSIBLE_FORKS=32``:\r\n- without ara: avg 11s\r\n- with ara (offline client, sqlite): avg 35s\r\n- with ara (~64ms to remote API, mysql local to API server): avg 114s\r\n\r\nA count of the API calls throughout the playbook:\r\n```\r\n    257 \"POST /api/v1/hosts\r\n    192 \"POST /api/v1/results\r\n      6 \"POST /api/v1/files\r\n      3 \"POST /api/v1/tasks\r\n      2 \"PATCH /api/v1/hosts/9\r\n      2 \"PATCH /api/v1/hosts/8\r\n      2 \"PATCH /api/v1/hosts/7\r\n      2 \"PATCH /api/v1/hosts/65\r\n      2 \"PATCH /api/v1/hosts/64\r\n      2 \"PATCH /api/v1/hosts/63\r\n      2 \"PATCH /api/v1/hosts/62\r\n      2 \"PATCH /api/v1/hosts/61\r\n      2 \"PATCH /api/v1/hosts/60\r\n      2 \"PATCH /api/v1/hosts/6\r\n      2 \"PATCH /api/v1/hosts/59\r\n      2 \"PATCH /api/v1/hosts/58\r\n      2 \"PATCH /api/v1/hosts/57\r\n      2 \"PATCH /api/v1/hosts/56\r\n      2 \"PATCH /api/v1/hosts/55\r\n      2 \"PATCH /api/v1/hosts/54\r\n      2 \"PATCH /api/v1/hosts/53\r\n      2 \"PATCH /api/v1/hosts/52\r\n      2 \"PATCH /api/v1/hosts/51\r\n      2 \"PATCH /api/v1/hosts/50\r\n      2 \"PATCH /api/v1/hosts/5\r\n      2 \"PATCH /api/v1/hosts/49\r\n      2 \"PATCH /api/v1/hosts/48\r\n      2 \"PATCH /api/v1/hosts/47\r\n      2 \"PATCH /api/v1/hosts/46\r\n      2 \"PATCH /api/v1/hosts/45\r\n      2 \"PATCH /api/v1/hosts/44\r\n      2 \"PATCH /api/v1/hosts/43\r\n      2 \"PATCH /api/v1/hosts/42\r\n      2 \"PATCH /api/v1/hosts/41\r\n      2 \"PATCH /api/v1/hosts/40\r\n      2 \"PATCH /api/v1/hosts/4\r\n      2 \"PATCH /api/v1/hosts/39\r\n      2 \"PATCH /api/v1/hosts/38\r\n      2 \"PATCH /api/v1/hosts/37\r\n      2 \"PATCH /api/v1/hosts/36\r\n      2 \"PATCH /api/v1/hosts/35\r\n      2 \"PATCH /api/v1/hosts/34\r\n      2 \"PATCH /api/v1/hosts/33\r\n      2 \"PATCH /api/v1/hosts/32\r\n      2 \"PATCH /api/v1/hosts/31\r\n      2 \"PATCH /api/v1/hosts/30\r\n      2 \"PATCH /api/v1/hosts/3\r\n      2 \"PATCH /api/v1/hosts/29\r\n      2 \"PATCH /api/v1/hosts/28\r\n      2 \"PATCH /api/v1/hosts/27\r\n      2 \"PATCH /api/v1/hosts/26\r\n      2 \"PATCH /api/v1/hosts/25\r\n      2 \"PATCH /api/v1/hosts/24\r\n      2 \"PATCH /api/v1/hosts/23\r\n      2 \"PATCH /api/v1/hosts/22\r\n      2 \"PATCH /api/v1/hosts/21\r\n      2 \"PATCH /api/v1/hosts/20\r\n      2 \"PATCH /api/v1/hosts/2\r\n      2 \"PATCH /api/v1/hosts/19\r\n      2 \"PATCH /api/v1/hosts/18\r\n      2 \"PATCH /api/v1/hosts/17\r\n      2 \"PATCH /api/v1/hosts/16\r\n      2 \"PATCH /api/v1/hosts/15\r\n      2 \"PATCH /api/v1/hosts/14\r\n      2 \"PATCH /api/v1/hosts/13\r\n      2 \"PATCH /api/v1/hosts/12\r\n      2 \"PATCH /api/v1/hosts/11\r\n      2 \"PATCH /api/v1/hosts/10\r\n      1 \"POST /api/v1/plays\r\n      1 \"POST /api/v1/playbooks\r\n      1 \"PATCH /api/v1/tasks/3\r\n      1 \"PATCH /api/v1/tasks/2\r\n      1 \"PATCH /api/v1/tasks/1\r\n      1 \"PATCH /api/v1/plays/1\r\n      1 \"PATCH /api/v1/playbooks/1\r\n```\r\n\r\nAnalyzing the API calls:\r\n- PATCH requests to ``/api/v1/hosts/<id>`` are either\r\n  1) recording host facts: https://github.com/ansible-community/ara/blob/364ed258e16a57193600f45a5475d3bee468fb40/ara/plugins/callback/ara_default.py#L356-L364\r\n  2) recording playbook stats at the end of the playbook:\r\nhttps://github.com/ansible-community/ara/blob/364ed258e16a57193600f45a5475d3bee468fb40/ara/plugins/callback/ara_default.py#L366-L378\r\n\r\n- POST requests to ``/api/v1/results`` are to record a task result for a host:\r\nhttps://github.com/ansible-community/ara/blob/364ed258e16a57193600f45a5475d3bee468fb40/ara/plugins/callback/ara_default.py#L341-L354\r\n\r\n- POST requests to ``/api/v1/hosts`` can occur in two cases:\r\n  1) At the beginning of the play, we create hosts that are involved in it:\r\nhttps://github.com/ansible-community/ara/blob/364ed258e16a57193600f45a5475d3bee468fb40/ara/plugins/callback/ara_default.py#L209-L211\r\n  2) For each task result, we need to retrieve the host id so we can attach the result to it:\r\nhttps://github.com/ansible-community/ara/blob/364ed258e16a57193600f45a5475d3bee468fb40/ara/plugins/callback/ara_default.py#L324\r\n\r\nIn the example above, we see there is exactly 257 POSTs to /api/v1/hosts -- this corresponds to our 64 test hosts (created when the play started), the 192 recorded results as well as an extra host due to an unrelated bug due to the group being recorded.\r\n\r\nWe need to make sure the host is recorded before recording the result of a task and because the host wasn't necessarily there at the beginning of the play (ex: when there is an add_host task).\r\n\r\nI think the right way to address this is to create the host once and cache the result locally so we can retrieve the ID later without needing to query the API again. We can also remove the superfluous host creation at the play level.\r\n\r\nI'll give that a try and we can iterate to improve other things.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/79", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/79/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/79/events", "html_url": "https://github.com/ansible-community/ara/issues/79", "id": 511556689, "node_id": "MDU6SXNzdWU1MTE1NTY2ODk=", "number": 79, "title": "Callback records groups as hosts", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-23T20:34:49Z", "updated_at": "2019-10-23T21:44:36Z", "closed_at": "2019-10-23T21:44:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\nara callback plugin\r\n\r\n## What is happening ?\r\n\r\nThe group name involved in a play can be recorded as a host:\r\nhttps://github.com/ansible-community/ara/blob/364ed258e16a57193600f45a5475d3bee468fb40/ara/plugins/callback/ara_default.py#L210-L211\r\n\r\n```\r\nPLAY [Test playbook] ******************************************************************************************************************************************************************************************************************************************\r\n2019-10-23 16:09:34,872 DEBUG ara.plugins.callback.default: v2_playbook_on_play_start\r\n2019-10-23 16:09:34,873 DEBUG ara.plugins.callback.default: Getting or creating file: /home/dmsimard/dev/git/ansible-community/ara-infra/benchmark/hosts\r\n2019-10-23 16:09:34,891 DEBUG urllib3.connectionpool: http://localhost:51181 \"POST /api/v1/files HTTP/1.1\" 201 862\r\n2019-10-23 16:09:34,892 DEBUG ara.clients.http: HTTP 201: post on /api/v1/files\r\n2019-10-23 16:09:34,892 DEBUG ara.plugins.callback.default: Getting or creating file: /home/dmsimard/dev/git/ansible-community/ara-infra/benchmark/test-playbook.yaml\r\n2019-10-23 16:09:34,900 DEBUG urllib3.connectionpool: http://localhost:51181 \"POST /api/v1/files HTTP/1.1\" 201 498\r\n2019-10-23 16:09:34,901 DEBUG ara.clients.http: HTTP 201: post on /api/v1/files\r\n2019-10-23 16:09:34,953 DEBUG urllib3.connectionpool: http://localhost:51181 \"POST /api/v1/plays HTTP/1.1\" 201 279\r\n2019-10-23 16:09:34,954 DEBUG ara.clients.http: HTTP 201: post on /api/v1/plays\r\n2019-10-23 16:09:34,955 DEBUG ara.plugins.callback.default: Getting or creating host: test_hosts\r\n2019-10-23 16:09:34,996 DEBUG urllib3.connectionpool: http://localhost:51181 \"POST /api/v1/hosts HTTP/1.1\" 201 200\r\n2019-10-23 16:09:34,997 DEBUG ara.clients.http: HTTP 201: post on /api/v1/hosts\r\n```\r\n\r\n## What should be happening ?\r\n\r\nOnly hosts should be recorded as hosts.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/77", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/77/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/77/events", "html_url": "https://github.com/ansible-community/ara/issues/77", "id": 504693725, "node_id": "MDU6SXNzdWU1MDQ2OTM3MjU=", "number": 77, "title": "Package django-health-check for Fedora", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-09T14:34:54Z", "updated_at": "2019-11-05T21:05:05Z", "closed_at": "2019-11-05T21:05:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "ara is packaged for Fedora rawhide (and soon f30, f31) but Fedora does not currently have a package for the new [django-health-check](https://github.com/KristianOellegaard/django-health-check) middleware added by https://github.com/ansible-community/ara/commit/8d6b063dfca2351fe04671a0839df51517273b96.\r\n\r\ndjango-health-check doesn't have unpackaged dependencies and the licensing allows for being included in Fedora so it should hopefully not be too complicated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/75", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/75/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/75/events", "html_url": "https://github.com/ansible-community/ara/issues/75", "id": 504158187, "node_id": "MDU6SXNzdWU1MDQxNTgxODc=", "number": 75, "title": "Support CORS_ORIGIN_REGEX_WHITELIST", "user": {"login": "zxaos", "id": 891202, "node_id": "MDQ6VXNlcjg5MTIwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/891202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zxaos", "html_url": "https://github.com/zxaos", "followers_url": "https://api.github.com/users/zxaos/followers", "following_url": "https://api.github.com/users/zxaos/following{/other_user}", "gists_url": "https://api.github.com/users/zxaos/gists{/gist_id}", "starred_url": "https://api.github.com/users/zxaos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zxaos/subscriptions", "organizations_url": "https://api.github.com/users/zxaos/orgs", "repos_url": "https://api.github.com/users/zxaos/repos", "events_url": "https://api.github.com/users/zxaos/events{/privacy}", "received_events_url": "https://api.github.com/users/zxaos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529438, "node_id": "MDU6TGFiZWwxMzIyNTI5NDM4", "url": "https://api.github.com/repos/ansible-community/ara/labels/api", "name": "api", "color": "1238b7", "default": false, "description": "Related to the API"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-10-08T16:46:52Z", "updated_at": "2019-10-23T21:45:08Z", "closed_at": "2019-10-23T21:45:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this request. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nAPI\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\n\r\n## What is your ARA installation like ?\r\n* Ara installed from PyPi\r\n* Wrapped in a container\r\n* Running in k8s\r\n* [ara-web](https://github.com/ansible-community/ara-web) deployed to [Netlify](https://www.netlify.com)\r\n\r\n## What is the idea ?\r\nSupporting django's `CORS_ORIGIN_REGEX_WHITELIST` attribute would be useful for testing ara-web deployments in staging environments.\r\n\r\nBackground: while testing out ara-web, we used the deployment preview functionality at netlify. This created several ara-web deployments with unique but predictable urls. Having to individually allow each url was really frustrating, so we eventually just modified ara server during our docker build step to enable regex rules for CORS. It would be great to officially support that in ara.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/74", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/74/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/74/events", "html_url": "https://github.com/ansible-community/ara/issues/74", "id": 504090642, "node_id": "MDU6SXNzdWU1MDQwOTA2NDI=", "number": 74, "title": "No suitable health check target when running with ARA_READ_LOGIN_REQUIRED", "user": {"login": "zxaos", "id": 891202, "node_id": "MDQ6VXNlcjg5MTIwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/891202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zxaos", "html_url": "https://github.com/zxaos", "followers_url": "https://api.github.com/users/zxaos/followers", "following_url": "https://api.github.com/users/zxaos/following{/other_user}", "gists_url": "https://api.github.com/users/zxaos/gists{/gist_id}", "starred_url": "https://api.github.com/users/zxaos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zxaos/subscriptions", "organizations_url": "https://api.github.com/users/zxaos/orgs", "repos_url": "https://api.github.com/users/zxaos/repos", "events_url": "https://api.github.com/users/zxaos/events{/privacy}", "received_events_url": "https://api.github.com/users/zxaos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-08T14:46:33Z", "updated_at": "2019-10-08T21:11:32Z", "closed_at": "2019-10-08T21:11:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this request. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nAPI\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\n\r\n## What is your ARA installation like ?\r\n* Ara installed from PyPi\r\n* Wrapped in a container\r\n* Running in k8s\r\n\r\n## What is the idea ?\r\n* K8S health checks, and more specifically some ingress load balancers _require_ an unauthenticated http health check that will server a 200. When ara is running in read-login-required mode, there is no suitable endpoint, and thus the container is never deemed \"healthy\".\r\n\r\nIt would be helpful to integrate https://github.com/KristianOellegaard/django-health-check , which could provide a basic database-aware unauthenticated healthcheck.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/71", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/71/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/71/events", "html_url": "https://github.com/ansible-community/ara/issues/71", "id": 496026972, "node_id": "MDU6SXNzdWU0OTYwMjY5NzI=", "number": 71, "title": "An Ansible collection for ARA", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}, {"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 40, "created_at": "2019-09-19T21:06:55Z", "updated_at": "2020-07-16T17:22:31Z", "closed_at": "2020-07-16T17:22:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Ansible is moving forward with an approach called *Ansible collections*, see \"[The Future of Ansible Content Delivery](https://www.ansible.com/blog/the-future-of-ansible-content-delivery)\".\r\n\r\nARA has a lot of Ansible content and it might be worthwhile to consider packaging everything in an Ansible collection:\r\n- [Action and callback plugins](https://github.com/ansible-community/ara/tree/master/ara/plugins)\r\n- [Roles](https://github.com/ansible-community/ara/tree/master/roles)\r\n- [Playbooks](https://github.com/ansible-community/ara/tree/master/playbooks)\r\n- [Integration tests](https://github.com/ansible-community/ara/tree/master/tests/integration)\r\n\r\nDocs:\r\n- User guide: https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/user_guide/collections_using.rst\r\n- Dev guide: https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/dev_guide/developing_collections.rst\r\n\r\nLet's use this issue to discuss how we might do this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/69", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/69/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/69/events", "html_url": "https://github.com/ansible-community/ara/issues/69", "id": 490220238, "node_id": "MDU6SXNzdWU0OTAyMjAyMzg=", "number": 69, "title": "Wrong playbook execution time", "user": {"login": "yannfill", "id": 11028416, "node_id": "MDQ6VXNlcjExMDI4NDE2", "avatar_url": "https://avatars2.githubusercontent.com/u/11028416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannfill", "html_url": "https://github.com/yannfill", "followers_url": "https://api.github.com/users/yannfill/followers", "following_url": "https://api.github.com/users/yannfill/following{/other_user}", "gists_url": "https://api.github.com/users/yannfill/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannfill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannfill/subscriptions", "organizations_url": "https://api.github.com/users/yannfill/orgs", "repos_url": "https://api.github.com/users/yannfill/repos", "events_url": "https://api.github.com/users/yannfill/events{/privacy}", "received_events_url": "https://api.github.com/users/yannfill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-09-06T09:16:59Z", "updated_at": "2019-12-18T19:11:02Z", "closed_at": "2019-10-28T16:06:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed ARA using the playbooks provided and everything is fine, except that the execution time is wrong. I have added `TIME_ZONE: Europe/Paris` in ARA API settings.yaml and it seems that the start time taken into account is in GMT whereas the end time is in local time. ARA API server and the computer playing the playbook are set up in the same french timezone.\r\n![Screenshot_2019-09-06 ARA Records Ansible](https://user-images.githubusercontent.com/11028416/64416435-77334a80-d097-11e9-83ca-8361e8d1687a.png)\r\n![Screenshot_2019-09-06 https ara-api ecritel net](https://user-images.githubusercontent.com/11028416/64416445-7c909500-d097-11e9-9397-4aea73fc519b.png)\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/68", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/68/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/68/events", "html_url": "https://github.com/ansible-community/ara/issues/68", "id": 488600244, "node_id": "MDU6SXNzdWU0ODg2MDAyNDQ=", "number": 68, "title": "API: Add support for sorting results", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529438, "node_id": "MDU6TGFiZWwxMzIyNTI5NDM4", "url": "https://api.github.com/repos/ansible-community/ara/labels/api", "name": "api", "color": "1238b7", "default": false, "description": "Related to the API"}, {"id": 1322529931, "node_id": "MDU6TGFiZWwxMzIyNTI5OTMx", "url": "https://api.github.com/repos/ansible-community/ara/labels/client", "name": "client", "color": "bee582", "default": false, "description": "Related to the python API clients"}, {"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}, {"id": 389813943, "node_id": "MDU6TGFiZWwzODk4MTM5NDM=", "url": "https://api.github.com/repos/ansible-community/ara/labels/help%20wanted", "name": "help wanted", "color": "128A0C", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-09-03T13:16:36Z", "updated_at": "2019-11-08T20:22:51Z", "closed_at": "2019-11-08T20:22:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## What component is this about ?\r\n\r\nAPI, API clients\r\n\r\n## What is the idea ?\r\n\r\nWhen querying the API, we should be able to request a sorted list of results based on different fields, for example:\r\n\r\n- Sort by start date\r\n- Sort by end date\r\n- Sort by duration\r\n- Sort by status\r\n\r\ndjango-rest-framework provides filtering and ordering ([docs](https://www.django-rest-framework.org/api-guide/filtering/#orderingfilter)) but we should also consider whether or not we need to implement things at the django model level like suggested in https://github.com/ansible-community/ara/pull/66.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/64", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/64/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/64/events", "html_url": "https://github.com/ansible-community/ara/issues/64", "id": 481419700, "node_id": "MDU6SXNzdWU0ODE0MTk3MDA=", "number": 64, "title": "zsh: no matches found: ara[server]", "user": {"login": "magick93", "id": 2173213, "node_id": "MDQ6VXNlcjIxNzMyMTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2173213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magick93", "html_url": "https://github.com/magick93", "followers_url": "https://api.github.com/users/magick93/followers", "following_url": "https://api.github.com/users/magick93/following{/other_user}", "gists_url": "https://api.github.com/users/magick93/gists{/gist_id}", "starred_url": "https://api.github.com/users/magick93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magick93/subscriptions", "organizations_url": "https://api.github.com/users/magick93/orgs", "repos_url": "https://api.github.com/users/magick93/repos", "events_url": "https://api.github.com/users/magick93/events{/privacy}", "received_events_url": "https://api.github.com/users/magick93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-16T02:56:50Z", "updated_at": "2019-09-12T19:07:23Z", "closed_at": "2019-09-12T19:07:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n## What component is this about ?\r\nNot sure. Am just trying to install ara.\r\n\r\n\r\n## What is your ARA installation like ?\r\nCurrently not successfully installed.\r\n\r\nAm trying to install ARA on Ubuntu 18.04.\r\n\r\n\r\n## What is happening ?\r\nI ran the following:\r\n```\r\npython3 -m venv ~/.ara/virtualenv\r\nsource ~/.ara/virtualenv/bin/activate\r\npip install ansible ara[server]\r\n```\r\nWhich resulted in `no matches found: ara[server]`.\r\n\r\n\r\n\r\n\r\n## What should be happening ?\r\n\r\nNot sure, but I'm guessing not what did happen.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/63", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/63/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/63/events", "html_url": "https://github.com/ansible-community/ara/issues/63", "id": 478134395, "node_id": "MDU6SXNzdWU0NzgxMzQzOTU=", "number": 63, "title": "ara-manage runserver silently hangs when Postgres dependency is missing", "user": {"login": "zxaos", "id": 891202, "node_id": "MDQ6VXNlcjg5MTIwMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/891202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zxaos", "html_url": "https://github.com/zxaos", "followers_url": "https://api.github.com/users/zxaos/followers", "following_url": "https://api.github.com/users/zxaos/following{/other_user}", "gists_url": "https://api.github.com/users/zxaos/gists{/gist_id}", "starred_url": "https://api.github.com/users/zxaos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zxaos/subscriptions", "organizations_url": "https://api.github.com/users/zxaos/orgs", "repos_url": "https://api.github.com/users/zxaos/repos", "events_url": "https://api.github.com/users/zxaos/events{/privacy}", "received_events_url": "https://api.github.com/users/zxaos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-07T20:52:52Z", "updated_at": "2019-11-19T17:01:58Z", "closed_at": "2019-11-19T17:01:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!-- Thank you for taking the time to create this report. Your feedback is appreciated ! -->\r\n\r\n## What component is this about ?\r\nAPI\r\n<!-- The API or the API clients ? The Ansible roles or plugins ? Something else ? -->\r\n<!-- For ara-web issues, please use https://github.com/ansible-community/ara-web/issues -->\r\n\r\n\r\n## What is your ARA installation like ?\r\nInstalled from PyPi\r\n<!-- What version of Ansible and ARA ? Did you install from source or from PyPi ? With an Ansible role ? In a virtualenv or a container ? Which Linux distribution ? Which database driver ? -->\r\n<!-- Feel free to include any other installation details that could be relevant to this report -->\r\n\r\n\r\n## What is happening ?\r\nIf `ara-manage runserver` is invoked while the db engine set to Postgres but without the `psycopg2` or `psycopg2-binary` package installed, it fails to start, but doesn't print any information about why it's not working.\r\n\r\nOutput:\r\n```\r\n2019-08-07 20:30:30,855 INFO django.utils.autoreload: Watching for file changes with StatReloader\r\n```\r\n<!-- If reporting an issue with the API, please include relevant logs by setting ARA_DEBUG to True and ARA_LOG_LEVEL to DEBUG -->\r\n<!-- If reporting an exception from an Ansible role or plugin, please include the full error or exception trace by running ansible-playbook with \"-vvv\" -->\r\n\r\n\r\n## What should be happening ?\r\nSomething closer to what happens if `ara-manage` is called without arguments:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/backends/postgresql/base.py\", line 20, in <module>\r\n    import psycopg2 as Database\r\nModuleNotFoundError: No module named 'psycopg2'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n...\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/62", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/62/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/62/events", "html_url": "https://github.com/ansible-community/ara/issues/62", "id": 462677777, "node_id": "MDU6SXNzdWU0NjI2Nzc3Nzc=", "number": 62, "title": "Cannot get it running on Ubuntu 18.04 LTS", "user": {"login": "osmanlicilegi", "id": 18678662, "node_id": "MDQ6VXNlcjE4Njc4NjYy", "avatar_url": "https://avatars2.githubusercontent.com/u/18678662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/osmanlicilegi", "html_url": "https://github.com/osmanlicilegi", "followers_url": "https://api.github.com/users/osmanlicilegi/followers", "following_url": "https://api.github.com/users/osmanlicilegi/following{/other_user}", "gists_url": "https://api.github.com/users/osmanlicilegi/gists{/gist_id}", "starred_url": "https://api.github.com/users/osmanlicilegi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/osmanlicilegi/subscriptions", "organizations_url": "https://api.github.com/users/osmanlicilegi/orgs", "repos_url": "https://api.github.com/users/osmanlicilegi/repos", "events_url": "https://api.github.com/users/osmanlicilegi/events{/privacy}", "received_events_url": "https://api.github.com/users/osmanlicilegi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-01T12:08:04Z", "updated_at": "2020-02-07T19:09:16Z", "closed_at": "2019-07-01T19:13:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nUbuntu 18.04 LTS comes with Python 3 by default but Ara has problems. Please see below.\r\n\r\n```\r\ndincer@bozhane:~$ python3 -m ara.setup.action_plugins\r\n/usr/local/lib/python3.6/dist-packages/ara/plugins/action\r\n\r\ndincer@bozhane:~$ python3 -m ara.setup.callback_plugins\r\n/usr/local/lib/python3.6/dist-packages/ara/plugins/callback\r\n\r\ndincer@bozhane:~$ grep plugins /etc/ansible/ansible.cfg \r\n## Ansible ships with some plugins that require whitelisting,\r\n## Custom plugins should not need this unless plugin author specifies it.\r\n# enable callback plugins, they can output to stdout but cannot be 'stdout' type.\r\naction_plugins     = /usr/local/lib/python3.6/dist-packages/ara/plugins/action\r\n#become_plugins     = /usr/share/ansible/plugins/become\r\n#cache_plugins      = /usr/share/ansible/plugins/cache\r\ncallback_plugins   = /usr/local/lib/python3.6/dist-packages/ara/plugins/callback\r\n#connection_plugins = /usr/share/ansible/plugins/connection\r\n#lookup_plugins     = /usr/share/ansible/plugins/lookup\r\n#inventory_plugins  = /usr/share/ansible/plugins/inventory\r\n#vars_plugins       = /usr/share/ansible/plugins/vars\r\n#filter_plugins     = /usr/share/ansible/plugins/filter\r\n#test_plugins       = /usr/share/ansible/plugins/test\r\n#terminal_plugins   = /usr/share/ansible/plugins/terminal\r\n#strategy_plugins   = /usr/share/ansible/plugins/strategy\r\n# enable inventory plugins, default: 'host_list', 'script', 'auto', 'yaml', 'ini', 'toml'\r\n#enable_plugins = host_list, virtualbox, yaml, constructed\r\n\r\ndincer@bozhane:~$ ansible localhost -m ping\r\n [WARNING]: Skipping plugin (/usr/local/lib/python3.6/dist-packages/ara/plugins/callback/ara_default.py) as it seems to be invalid: No module named ara.clients\r\n\r\nlocalhost | SUCCESS => {\r\n    \"changed\": false, \r\n    \"ping\": \"pong\"\r\n}\r\n\r\ndincer@bozhane:~$ ara-manage runserver\r\nPerforming system checks...\r\n\r\nUnhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7f8bddbe9598>\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/django/utils/autoreload.py\", line 228, in wrapper\r\n    fn(*args, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/django/core/management/commands/runserver.py\", line 124, in inner_run\r\n    self.check(display_num_errors=True)\r\n  File \"/usr/lib/python3/dist-packages/django/core/management/base.py\", line 359, in check\r\n    include_deployment_checks=include_deployment_checks,\r\n  File \"/usr/lib/python3/dist-packages/django/core/management/base.py\", line 346, in _run_checks\r\n    return checks.run_checks(**kwargs)\r\n  File \"/usr/lib/python3/dist-packages/django/core/checks/registry.py\", line 81, in run_checks\r\n    new_errors = check(app_configs=app_configs)\r\n  File \"/usr/lib/python3/dist-packages/django/core/checks/urls.py\", line 16, in check_url_config\r\n    return check_resolver(resolver)\r\n  File \"/usr/lib/python3/dist-packages/django/core/checks/urls.py\", line 26, in check_resolver\r\n    return check_method()\r\n  File \"/usr/lib/python3/dist-packages/django/urls/resolvers.py\", line 256, in check\r\n    for pattern in self.url_patterns:\r\n  File \"/usr/lib/python3/dist-packages/django/utils/functional.py\", line 35, in __get__\r\n    res = instance.__dict__[self.name] = self.func(instance)\r\n  File \"/usr/lib/python3/dist-packages/django/urls/resolvers.py\", line 407, in url_patterns\r\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\r\n  File \"/usr/lib/python3/dist-packages/django/utils/functional.py\", line 35, in __get__\r\n    res = instance.__dict__[self.name] = self.func(instance)\r\n  File \"/usr/lib/python3/dist-packages/django/urls/resolvers.py\", line 400, in urlconf_module\r\n    return import_module(self.urlconf_name)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/usr/local/lib/python3.6/dist-packages/ara/server/urls.py\", line 22, in <module>\r\n    from django.urls import include, path\r\nImportError: cannot import name 'include'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/60", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/60/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/60/events", "html_url": "https://github.com/ansible-community/ara/issues/60", "id": 457493193, "node_id": "MDU6SXNzdWU0NTc0OTMxOTM=", "number": 60, "title": "delete old Ansible runs from Ara", "user": {"login": "biohazd", "id": 986551, "node_id": "MDQ6VXNlcjk4NjU1MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/986551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biohazd", "html_url": "https://github.com/biohazd", "followers_url": "https://api.github.com/users/biohazd/followers", "following_url": "https://api.github.com/users/biohazd/following{/other_user}", "gists_url": "https://api.github.com/users/biohazd/gists{/gist_id}", "starred_url": "https://api.github.com/users/biohazd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biohazd/subscriptions", "organizations_url": "https://api.github.com/users/biohazd/orgs", "repos_url": "https://api.github.com/users/biohazd/repos", "events_url": "https://api.github.com/users/biohazd/events{/privacy}", "received_events_url": "https://api.github.com/users/biohazd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813941, "node_id": "MDU6TGFiZWwzODk4MTM5NDE=", "url": "https://api.github.com/repos/ansible-community/ara/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-18T13:47:30Z", "updated_at": "2019-11-28T20:37:55Z", "closed_at": "2019-06-18T13:53:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there an easy way to delete old data in ARA?   I noticed our has Ansible runs going back to 2017 so I would like to prune the old data and maybe keep a year. I'm also hoping deleting odl data might speed it up abit.\r\n\r\nIs there a simple SQL query I can use or even a script ?\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/57", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/57/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/57/events", "html_url": "https://github.com/ansible-community/ara/issues/57", "id": 455788634, "node_id": "MDU6SXNzdWU0NTU3ODg2MzQ=", "number": 57, "title": "Add support for Django dynamic database routing (ex: sqlite middleware from 0.x)", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}, {"id": 389813943, "node_id": "MDU6TGFiZWwzODk4MTM5NDM=", "url": "https://api.github.com/repos/ansible-community/ara/labels/help%20wanted", "name": "help wanted", "color": "128A0C", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-13T14:52:57Z", "updated_at": "2019-07-02T17:39:26Z", "closed_at": "2019-07-02T17:39:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In ARA 0.x, we have a custom [WSGI middleware](https://github.com/ansible-community/ara/blob/stable/0.x/ara/wsgi_sqlite.py) which makes the web application load a database dynamically based on the URL where the request came from.\r\n\r\nThis feature is most notably used by the OpenStack CI environment which leverages Zuul and Ansible to run more than a million playbooks a month, see: https://superuser.openstack.org/articles/scaling-ara-ansible/\r\n\r\nIn a nutshell, it maps an URL (like ``http://logserver/some/path/ara-report``) to a location on the filesystem (such as ``/srv/logs/some/path/ara-report``) and configures the backend to use the database found in ``/srv/logs/some/path/ara-report/ansible.sqlite``.\r\n\r\nThis is done with the help of a [webserver configuration](https://ara.readthedocs.io/en/stable-0.x/advanced.html#using-wsgi-sqlite-with-apache-s-mod-wsgi) which routes ``/ara-report/*`` to the middleware.\r\n\r\nLooking at how this might work with the new Django backend, their [documentation](https://docs.djangoproject.com/en/2.2/topics/settings/#altering-settings-at-runtime) explicitly recommends against altering settings during runtime.\r\n\r\nThere are different approaches using a mixture of Django middlewares and database routers (like [this](https://stackoverflow.com/questions/14254315/django-dynamic-database-file/14442569#14442569) or [that](https://djangosnippets.org/snippets/2037/)).\r\nWhat is problematic with the approach of using middlewares and routers is that the databases should be configured in the settings prior to launching the backend server.\r\n\r\nThe official [Django docs](https://docs.djangoproject.com/en/2.1/topics/db/multi-db/) for multi-database usage has different examples like routing write requests to a master server and read requests to replicas.\r\nThis does not really help us since we do not know the location of the databases ahead of time.\r\n\r\nSo it seems like we'd need a custom Django database backend which extends the sqlite engine but allows us to define the database location dynamically after settings have been loaded.\r\n\r\nAny help, suggestions and ideas would be much appreciated for this issue.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/56", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/56/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/56/events", "html_url": "https://github.com/ansible-community/ara/issues/56", "id": 453823580, "node_id": "MDU6SXNzdWU0NTM4MjM1ODA=", "number": 56, "title": "missing wheel dependencie fir ARA 1.0 with API server ", "user": {"login": "JSGUYOT", "id": 23457789, "node_id": "MDQ6VXNlcjIzNDU3Nzg5", "avatar_url": "https://avatars0.githubusercontent.com/u/23457789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JSGUYOT", "html_url": "https://github.com/JSGUYOT", "followers_url": "https://api.github.com/users/JSGUYOT/followers", "following_url": "https://api.github.com/users/JSGUYOT/following{/other_user}", "gists_url": "https://api.github.com/users/JSGUYOT/gists{/gist_id}", "starred_url": "https://api.github.com/users/JSGUYOT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JSGUYOT/subscriptions", "organizations_url": "https://api.github.com/users/JSGUYOT/orgs", "repos_url": "https://api.github.com/users/JSGUYOT/repos", "events_url": "https://api.github.com/users/JSGUYOT/events{/privacy}", "received_events_url": "https://api.github.com/users/JSGUYOT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1399379482, "node_id": "MDU6TGFiZWwxMzk5Mzc5NDgy", "url": "https://api.github.com/repos/ansible-community/ara/labels/needs%20information", "name": "needs information", "color": "fce42a", "default": false, "description": "Needs more information to be triaged properly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-08T18:46:31Z", "updated_at": "2019-11-05T21:05:44Z", "closed_at": "2019-11-05T21:05:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi ! \r\n\r\nIt seem dependencies missing for install ara[server] with pip ==> wheel is missing\r\n\r\nBest regards, ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/54", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/54/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/54/events", "html_url": "https://github.com/ansible-community/ara/issues/54", "id": 453533901, "node_id": "MDU6SXNzdWU0NTM1MzM5MDE=", "number": 54, "title": "Ara v1.0 feaure list", "user": {"login": "biohazd", "id": 986551, "node_id": "MDQ6VXNlcjk4NjU1MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/986551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biohazd", "html_url": "https://github.com/biohazd", "followers_url": "https://api.github.com/users/biohazd/followers", "following_url": "https://api.github.com/users/biohazd/following{/other_user}", "gists_url": "https://api.github.com/users/biohazd/gists{/gist_id}", "starred_url": "https://api.github.com/users/biohazd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biohazd/subscriptions", "organizations_url": "https://api.github.com/users/biohazd/orgs", "repos_url": "https://api.github.com/users/biohazd/repos", "events_url": "https://api.github.com/users/biohazd/events{/privacy}", "received_events_url": "https://api.github.com/users/biohazd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-06-07T14:09:42Z", "updated_at": "2019-06-18T18:26:37Z", "closed_at": "2019-06-18T18:26:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\n>> Ara v1.0 is not feature complete yet\r\n\r\nDo you have a list of features that work in Ara v1.0 as compared to the latest v0.xx ?\r\n\r\nWhat features are still missing from Ara v1.0?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/53", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/53/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/53/events", "html_url": "https://github.com/ansible-community/ara/issues/53", "id": 453478543, "node_id": "MDU6SXNzdWU0NTM0Nzg1NDM=", "number": 53, "title": "A non-django way of modifying settings.py", "user": {"login": "alainchiasson-guavus", "id": 37624623, "node_id": "MDQ6VXNlcjM3NjI0NjIz", "avatar_url": "https://avatars1.githubusercontent.com/u/37624623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alainchiasson-guavus", "html_url": "https://github.com/alainchiasson-guavus", "followers_url": "https://api.github.com/users/alainchiasson-guavus/followers", "following_url": "https://api.github.com/users/alainchiasson-guavus/following{/other_user}", "gists_url": "https://api.github.com/users/alainchiasson-guavus/gists{/gist_id}", "starred_url": "https://api.github.com/users/alainchiasson-guavus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alainchiasson-guavus/subscriptions", "organizations_url": "https://api.github.com/users/alainchiasson-guavus/orgs", "repos_url": "https://api.github.com/users/alainchiasson-guavus/repos", "events_url": "https://api.github.com/users/alainchiasson-guavus/events{/privacy}", "received_events_url": "https://api.github.com/users/alainchiasson-guavus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-07T12:02:11Z", "updated_at": "2019-06-18T18:30:50Z", "closed_at": "2019-06-18T18:30:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "While we can modify settings.py through a module on the python path ( as described : https://docs.djangoproject.com/en/dev/topics/settings/), I don't beleive ARA is aimed as standalone server (that happens to use Django).\r\n\r\nWould it make sense to have a CLI or ENV variable type configuration that is more \"simplistic\". Or if there is and I missed it?  point it out.\r\n\r\nI encountered this while trying to create separate server and client - I needed to provide ALLOWED_HOSTS. While possible, I felt this was alot of python configuration ( not code ) that had to be understood.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/51", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/51/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/51/events", "html_url": "https://github.com/ansible-community/ara/issues/51", "id": 452501330, "node_id": "MDU6SXNzdWU0NTI1MDEzMzA=", "number": 51, "title": "Slow loading of tasks in ara 0.x web interface", "user": {"login": "biohazd", "id": 986551, "node_id": "MDQ6VXNlcjk4NjU1MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/986551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biohazd", "html_url": "https://github.com/biohazd", "followers_url": "https://api.github.com/users/biohazd/followers", "following_url": "https://api.github.com/users/biohazd/following{/other_user}", "gists_url": "https://api.github.com/users/biohazd/gists{/gist_id}", "starred_url": "https://api.github.com/users/biohazd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biohazd/subscriptions", "organizations_url": "https://api.github.com/users/biohazd/orgs", "repos_url": "https://api.github.com/users/biohazd/repos", "events_url": "https://api.github.com/users/biohazd/events{/privacy}", "received_events_url": "https://api.github.com/users/biohazd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-05T13:28:01Z", "updated_at": "2019-06-06T07:57:37Z", "closed_at": "2019-06-06T07:57:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nWhen I click on a TASK and then onto an entry on the \"status\" column, it takes ages to load. I have the same setup on an older version of ARA and its much faster.\r\n\r\nDatabase in stored in AWS RDS.\r\n\r\nVersions.\r\nara (0.16.4)\r\nansible (2.5.5)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/50", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/50/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/50/events", "html_url": "https://github.com/ansible-community/ara/issues/50", "id": 452501220, "node_id": "MDU6SXNzdWU0NTI1MDEyMjA=", "number": 50, "title": "slow loading of tasks", "user": {"login": "biohazd", "id": 986551, "node_id": "MDQ6VXNlcjk4NjU1MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/986551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biohazd", "html_url": "https://github.com/biohazd", "followers_url": "https://api.github.com/users/biohazd/followers", "following_url": "https://api.github.com/users/biohazd/following{/other_user}", "gists_url": "https://api.github.com/users/biohazd/gists{/gist_id}", "starred_url": "https://api.github.com/users/biohazd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biohazd/subscriptions", "organizations_url": "https://api.github.com/users/biohazd/orgs", "repos_url": "https://api.github.com/users/biohazd/repos", "events_url": "https://api.github.com/users/biohazd/events{/privacy}", "received_events_url": "https://api.github.com/users/biohazd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-05T13:27:49Z", "updated_at": "2019-06-05T14:16:16Z", "closed_at": "2019-06-05T14:16:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nWhen I click on a TASK and then onto an entry on the \"status\" column, it takes ages to load. I have the same setup on an older version of ARA and its much faster.\r\n\r\nDatabase in stored in AWS RDS.\r\n\r\nVersions.\r\nara (0.16.4)\r\nansible (2.5.5)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/49", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/49/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/49/events", "html_url": "https://github.com/ansible-community/ara/issues/49", "id": 449365809, "node_id": "MDU6SXNzdWU0NDkzNjU4MDk=", "number": 49, "title": "ara_api role: gunicorn fails to start if selinux is enforcing", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-28T16:28:12Z", "updated_at": "2019-06-07T13:02:25Z", "closed_at": "2019-06-07T13:02:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See:\r\n\r\n```\r\ntype=AVC msg=audit(1559060052.066:203): avc:  denied  { execute } for  pid=32057 comm=\"(gunicorn)\" name=\"gunicorn\" dev=\"vda1\" ino=528956 scontext=system_u:system_r:init_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file permissive=0\r\ntype=AVC msg=audit(1559060259.586:238): avc:  denied  { execute } for  pid=872 comm=\"(gunicorn)\" name=\"gunicorn\" dev=\"vda1\" ino=528956 scontext=system_u:system_r:init_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\ntype=AVC msg=audit(1559060259.586:239): avc:  denied  { read open } for  pid=872 comm=\"(gunicorn)\" path=\"/root/.ara/virtualenv/bin/gunicorn\" dev=\"vda1\" ino=528956 scontext=system_u:system_r:init_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\ntype=AVC msg=audit(1559060259.586:240): avc:  denied  { execute_no_trans } for  pid=872 comm=\"(gunicorn)\" path=\"/root/.ara/virtualenv/bin/gunicorn\" dev=\"vda1\" ino=528956 scontext=system_u:system_r:init_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\ntype=AVC msg=audit(1559060259.598:241): avc:  denied  { ioctl } for  pid=872 comm=\"gunicorn\" path=\"/root/.ara/virtualenv/pyvenv.cfg\" dev=\"vda1\" ino=397404 ioctlcmd=0x5401 scontext=system_u:system_r:init_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\ntype=AVC msg=audit(1559060260.003:242): avc:  denied  { read } for  pid=875 comm=\"gunicorn\" name=\"settings.yaml\" dev=\"vda1\" ino=397411 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\ntype=AVC msg=audit(1559060260.003:243): avc:  denied  { open } for  pid=875 comm=\"gunicorn\" path=\"/root/.ara/server/settings.yaml\" dev=\"vda1\" ino=397411 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\ntype=AVC msg=audit(1559060260.003:244): avc:  denied  { ioctl } for  pid=875 comm=\"gunicorn\" path=\"/root/.ara/server/settings.yaml\" dev=\"vda1\" ino=397411 ioctlcmd=0x5401 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:admin_home_t:s0 tclass=file permissive=1\r\n```\r\n\r\nThis used to be addressed by shipping a selinux policy file but somehow got lost during the transition from ara-infra to ara.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/47", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/47/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/47/events", "html_url": "https://github.com/ansible-community/ara/issues/47", "id": 447752630, "node_id": "MDU6SXNzdWU0NDc3NTI2MzA=", "number": 47, "title": "Add role support and integration tests for MySQL/MariaDB", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}, {"id": 1332572278, "node_id": "MDU6TGFiZWwxMzMyNTcyMjc4", "url": "https://api.github.com/repos/ansible-community/ara/labels/tests", "name": "tests", "color": "fff2ba", "default": false, "description": "Related to unit, functional or integration tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-23T16:11:00Z", "updated_at": "2019-07-02T19:26:30Z", "closed_at": "2019-07-02T19:26:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We already have tests for postgresql but could use tests for mysql in a similar fashion to https://github.com/ansible-community/ara/blob/89daa48a6bf7e60b7a41284690b3f0a943c1ae0f/tests/with_postgresql.yaml", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/46", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/46/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/46/events", "html_url": "https://github.com/ansible-community/ara/issues/46", "id": 447174543, "node_id": "MDU6SXNzdWU0NDcxNzQ1NDM=", "number": 46, "title": "Ansible 2.8: Regression because of new sentinel class representing None or []", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-22T14:35:27Z", "updated_at": "2019-05-23T14:07:47Z", "closed_at": "2019-05-23T14:07:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Example trace from ara 1.0:\r\n```\r\n[WARNING]: Failure using method (v2_playbook_on_task_start) in callback plugin (<ansible.plugins.callback./home/dmsimard/dev/git/ansible-community/ara/ara/plugins/callback/ara_default.CallbackModule object at 0x7fb58bb36a90>): Object of type type is not\r\nJSON serializable\r\n\r\nCallback Exception: \r\n  File \"/home/dmsimard/dev/git/ansible-community/ara/.tox/ansible-integration/lib/python3.7/site-packages/ansible/executor/task_queue_manager.py\", line 333, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/home/dmsimard/dev/git/ansible-community/ara/ara/plugins/callback/ara_default.py\", line 232, in v2_playbook_on_task_start\r\n    handler=handler,\r\n   File \"/home/dmsimard/dev/git/ansible-community/ara/ara/clients/http.py\", line 104, in post\r\n    return self._request(\"post\", endpoint, **kwargs)\r\n   File \"/home/dmsimard/dev/git/ansible-community/ara/ara/clients/http.py\", line 82, in _request\r\n    response = func(url, **kwargs)\r\n   File \"/home/dmsimard/dev/git/ansible-community/ara/ara/clients/http.py\", line 63, in post\r\n    return self._request(\"post\", url, data=json.dumps(payload))\r\n   File \"/usr/lib64/python3.7/json/__init__.py\", line 231, in dumps\r\n    return _default_encoder.encode(obj)\r\n   File \"/usr/lib64/python3.7/json/encoder.py\", line 199, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n   File \"/usr/lib64/python3.7/json/encoder.py\", line 257, in iterencode\r\n    return _iterencode(o, 0)\r\n   File \"/usr/lib64/python3.7/json/encoder.py\", line 179, in default\r\n    raise TypeError(f'Object of type {o.__class__.__name__} '\r\n```\r\n\r\nOr screenshot from 0.x:\r\n![Screenshot](https://user-images.githubusercontent.com/1291204/58183314-254bed80-7c7d-11e9-9320-0945ae34469d.png)\r\n\r\nThis is because the structure of the task object has changed.\r\n\r\nIn 2.7:\r\n```\r\n(Pdb) task._attributes\r\n{'args': {'name': '{{ item }}', 'ansible_host': '127.0.0.1', 'ansible_connection': 'local'}, 'action': 'add_host', 'async_val': 0, 'changed_when': [], 'delay': 5, 'delegate_to': None, 'delegate_facts': None, 'failed_when': [], 'loop': ['host1', 'host2', 'host3'], 'loop_control': None, 'notify': None, 'poll': 10, 'register': None, 'retries': 3, 'until': [], 'loop_with': 'items', 'name': 'Add fake hosts in inventory', 'connection': None, 'port': None, 'remote_user': None, 'vars': {}, 'module_defaults': None, 'environment': None, 'no_log': None, 'run_once': None, 'ignore_errors': None, 'ignore_unreachable': None, 'check_mode': None, 'diff': None, 'any_errors_fatal': None, 'debugger': None, 'when': [], 'tags': [], 'become': None, 'become_method': None, 'become_user': None, 'become_flags': None}\r\n(Pdb) task._attributes[\"tags\"]\r\n[]\r\n```\r\n\r\nIn 2.8 (notice all the ``ansible.utils.sentinel.Sentinel``):\r\n```\r\n(Pdb) task._attributes\r\n{'args': {'name': '{{ item }}', 'ansible_host': '127.0.0.1', 'ansible_connection': 'local'}, 'action': 'add_host', 'async_val': <class 'ansible.utils.sentinel.Sentinel'>, 'changed_when': <class 'ansible.utils.sentinel.Sentinel'>, 'delay': <class 'ansible.utils.sentinel.Sentinel'>, 'delegate_to': <class 'ansible.utils.sentinel.Sentinel'>, 'delegate_facts': <class 'ansible.utils.sentinel.Sentinel'>, 'failed_when': <class 'ansible.utils.sentinel.Sentinel'>, 'loop': ['host1', 'host2', 'host3'], 'loop_control': <class 'ansible.utils.sentinel.Sentinel'>, 'notify': <class 'ansible.utils.sentinel.Sentinel'>, 'poll': <class 'ansible.utils.sentinel.Sentinel'>, 'register': <class 'ansible.utils.sentinel.Sentinel'>, 'retries': <class 'ansible.utils.sentinel.Sentinel'>, 'until': <class 'ansible.utils.sentinel.Sentinel'>, 'loop_with': 'items', 'name': 'Add fake hosts in inventory', 'connection': <class 'ansible.utils.sentinel.Sentinel'>, 'port': <class 'ansible.utils.sentinel.Sentinel'>, 'remote_user': <class 'ansible.utils.sentinel.Sentinel'>, 'vars': {}, 'module_defaults': <class 'ansible.utils.sentinel.Sentinel'>, 'environment': <class 'ansible.utils.sentinel.Sentinel'>, 'no_log': <class 'ansible.utils.sentinel.Sentinel'>, 'run_once': <class 'ansible.utils.sentinel.Sentinel'>, 'ignore_errors': <class 'ansible.utils.sentinel.Sentinel'>, 'ignore_unreachable': <class 'ansible.utils.sentinel.Sentinel'>, 'check_mode': <class 'ansible.utils.sentinel.Sentinel'>, 'diff': <class 'ansible.utils.sentinel.Sentinel'>, 'any_errors_fatal': <class 'ansible.utils.sentinel.Sentinel'>, 'debugger': <class 'ansible.utils.sentinel.Sentinel'>, 'when': <class 'ansible.utils.sentinel.Sentinel'>, 'tags': <class 'ansible.utils.sentinel.Sentinel'>, 'become': <class 'ansible.utils.sentinel.Sentinel'>, 'become_method': <class 'ansible.utils.sentinel.Sentinel'>, 'become_user': <class 'ansible.utils.sentinel.Sentinel'>, 'become_flags': <class 'ansible.utils.sentinel.Sentinel'>, 'collections': <class 'ansible.utils.sentinel.Sentinel'>}\r\n(Pdb) task._attributes[\"tags\"]\r\n<class 'ansible.utils.sentinel.Sentinel'>\r\n```\r\n\r\nAfter discussing this with upstream in #ansible-devel, it turns out that this new Sentinel object is used to indicate that something has not been set (to allow a distinction between unset and set to ``None``).\r\n\r\nWe can use something like ``from ansible.utils.sentinel import Sentinel; if foo is Sentinel`` to determine if the value is set and otherwise coerce to a value we can send to the database like None or an empty list, for example.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/45", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/45/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/45/events", "html_url": "https://github.com/ansible-community/ara/issues/45", "id": 446099161, "node_id": "MDU6SXNzdWU0NDYwOTkxNjE=", "number": 45, "title": "pytz.exceptions.UnknownTimeZoneError: None", "user": {"login": "rndmh3ro", "id": 3198961, "node_id": "MDQ6VXNlcjMxOTg5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3198961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rndmh3ro", "html_url": "https://github.com/rndmh3ro", "followers_url": "https://api.github.com/users/rndmh3ro/followers", "following_url": "https://api.github.com/users/rndmh3ro/following{/other_user}", "gists_url": "https://api.github.com/users/rndmh3ro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rndmh3ro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rndmh3ro/subscriptions", "organizations_url": "https://api.github.com/users/rndmh3ro/orgs", "repos_url": "https://api.github.com/users/rndmh3ro/repos", "events_url": "https://api.github.com/users/rndmh3ro/events{/privacy}", "received_events_url": "https://api.github.com/users/rndmh3ro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-20T12:48:34Z", "updated_at": "2019-05-22T10:33:18Z", "closed_at": "2019-05-22T10:33:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Problem\r\n\r\nRunning ara on Ubuntu 18.04 fails with nginx and gunicorn.\r\nWhen opening the URL via nginx, I get a Internal Server Error and the following exception in the log: https://gist.github.com/rndmh3ro/2117d0d5dc286f38fe849788709ad42e\r\n\r\nHowever when opening ara on port 3000 it works.\r\n\r\nInstalled with the playbook:\r\n```\r\n- name: Install ARA with default settings\r\n  hosts: all\r\n  gather_facts: yes\r\n  vars:\r\n    ara_api_frontend_server: nginx\r\n    ara_api_wsgi_server: gunicorn\r\n    ara_api_fqdn: 172.24.126.194\r\n    ara_api_allowed_hosts:\r\n      - localhost\r\n  roles:\r\n    - ara_api\r\n    - ara_web\r\n```\r\n\r\n# Resolution\r\nI don't know. I tried fiddling with the TIME_ZONE parameter but that didn't help.\r\n\r\n# Additional data\r\n\r\nARA-release: `1.0.0b1`\r\n\r\nOS:\r\n```\r\nVERSION=\"18.04.2 LTS (Bionic Beaver)\"\r\n```\r\n\r\nTimezone:\r\n```\r\n(virtualenv) ubuntu:~/ara-1.0.0b1/playbooks$ cat /etc/timezone\r\nEurope/Berlin\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/44", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/44/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/44/events", "html_url": "https://github.com/ansible-community/ara/issues/44", "id": 446072259, "node_id": "MDU6SXNzdWU0NDYwNzIyNTk=", "number": 44, "title": "ansible_user undefined variable on gunicorn-task", "user": {"login": "rndmh3ro", "id": 3198961, "node_id": "MDQ6VXNlcjMxOTg5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3198961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rndmh3ro", "html_url": "https://github.com/rndmh3ro", "followers_url": "https://api.github.com/users/rndmh3ro/followers", "following_url": "https://api.github.com/users/rndmh3ro/following{/other_user}", "gists_url": "https://api.github.com/users/rndmh3ro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rndmh3ro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rndmh3ro/subscriptions", "organizations_url": "https://api.github.com/users/rndmh3ro/orgs", "repos_url": "https://api.github.com/users/rndmh3ro/repos", "events_url": "https://api.github.com/users/rndmh3ro/events{/privacy}", "received_events_url": "https://api.github.com/users/rndmh3ro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-20T11:46:09Z", "updated_at": "2019-05-21T18:05:32Z", "closed_at": "2019-05-21T18:05:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Problem\r\n\r\nInstalling ara on Ubuntu 18.04 with: \r\n```bash\r\n> ubuntu:~/ara-1.0.0b1/playbooks$ cat hosts\r\n127.0.0.1\r\n> ansible-playbook -i hosts ara_web.yaml -K\r\n```\r\n\r\nfails with: \r\n\r\n```bash\r\nTASK [ara_api : Install gunicorn] ************************************************************************************\r\nok: [127.0.0.1]\r\n\r\nTASK [ara_api : Set up systemd unit file for gunicorn to run the ARA API] ********************************************\r\nfatal: [127.0.0.1]: FAILED! => {\"changed\": false, \"msg\": \"AnsibleUndefinedVariable: 'ansible_user' is undefined\"}\r\n\r\nPLAY RECAP ***********************************************************************************************************\r\n127.0.0.1                  : ok=25   changed=1    unreachable=0    failed=1    skipped=3    rescued=0    ignored=0\r\n\r\n```\r\n\r\n# Resolution\r\n\r\nOne also could either define `ansible_user` as a variable or use `ansible_user_id` in the gunicorn service-template.\r\n\r\n\r\n# Additional data\r\n\r\nARA-release: `1.0.0b1`\r\n\r\nOS:\r\n```\r\nVERSION=\"18.04.2 LTS (Bionic Beaver)\"\r\n```\r\n\r\nPython:\r\n```\r\nubuntu:~/ara-1.0.0b1/playbooks$ python --version\r\nPython 2.7.15rc1\r\nubuntu:~/ara-1.0.0b1/playbooks$ which python\r\n/usr/bin/python\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/43", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/43/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/43/events", "html_url": "https://github.com/ansible-community/ara/issues/43", "id": 446063257, "node_id": "MDU6SXNzdWU0NDYwNjMyNTc=", "number": 43, "title": "Running ara_api playbook fails on install_ara", "user": {"login": "rndmh3ro", "id": 3198961, "node_id": "MDQ6VXNlcjMxOTg5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3198961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rndmh3ro", "html_url": "https://github.com/rndmh3ro", "followers_url": "https://api.github.com/users/rndmh3ro/followers", "following_url": "https://api.github.com/users/rndmh3ro/following{/other_user}", "gists_url": "https://api.github.com/users/rndmh3ro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rndmh3ro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rndmh3ro/subscriptions", "organizations_url": "https://api.github.com/users/rndmh3ro/orgs", "repos_url": "https://api.github.com/users/rndmh3ro/repos", "events_url": "https://api.github.com/users/rndmh3ro/events{/privacy}", "received_events_url": "https://api.github.com/users/rndmh3ro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-20T11:23:58Z", "updated_at": "2019-05-21T20:09:16Z", "closed_at": "2019-05-21T20:09:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Problem\r\n\r\nInstalling ara on Ubuntu 18.04 with: \r\n```bash\r\n> ubuntu:~/ara-1.0.0b1/playbooks$ cat hosts\r\n127.0.0.1\r\n> ansible-playbook -i hosts ara_web.yaml -K\r\n```\r\n\r\nfails with: \r\n\r\n```bash\r\nTASK [ara_api : Prepare git repository for ara] **********************************************************************\r\nchanged: [127.0.0.1]\r\n\r\nTASK [ara_api : Install ara] *****************************************************************************************\r\nfatal: [127.0.0.1]: FAILED! => {\"changed\": false, \"msg\": \"Failed to find required executable virtualenv in paths: /usr\r\n/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\"}\r\n        to retry, use: --limit @/home/basti/ara-1.0.0b1/playbooks/ara_api.retry\r\n\r\nPLAY RECAP ***********************************************************************************************************\r\n127.0.0.1                  : ok=12   changed=5    unreachable=0    failed=1\r\n```\r\n\r\n# Resolution\r\n\r\nChange the install ara task to look like this.\r\nSince Python 3 is required for ara and on Ubuntu the binary `virtualenv` does not exist, I guess this should be fine. However I did not test in on other operating systems. I can provide a PR for it.\r\n\r\n```yaml\r\n- name: Install ara\r\n  pip:\r\n    name: \"{{ ara_api_source_checkout }}[server]\"\r\n    state: present\r\n    virtualenv: \"{{ ara_api_venv | bool | ternary(ara_api_venv_path, omit) }}\"\r\n    #virtualenv_python: python3\r\n    virtualenv_command: \"/usr/bin/python3 -m venv\"\r\n```\r\n\r\n# Additional data\r\n\r\nARA-release: `1.0.0b1`\r\n\r\nOS:\r\n```\r\nVERSION=\"18.04.2 LTS (Bionic Beaver)\"\r\n```\r\n\r\nPython:\r\n```\r\nubuntu:~/ara-1.0.0b1/playbooks$ python --version\r\nPython 2.7.15rc1\r\nubuntu:~/ara-1.0.0b1/playbooks$ which python\r\n/usr/bin/python\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/42", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/42/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/42/events", "html_url": "https://github.com/ansible-community/ara/issues/42", "id": 445454286, "node_id": "MDU6SXNzdWU0NDU0NTQyODY=", "number": 42, "title": "ara_api role on fedora could not detect package manager ", "user": {"login": "yodatak", "id": 704477, "node_id": "MDQ6VXNlcjcwNDQ3Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/704477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yodatak", "html_url": "https://github.com/yodatak", "followers_url": "https://api.github.com/users/yodatak/followers", "following_url": "https://api.github.com/users/yodatak/following{/other_user}", "gists_url": "https://api.github.com/users/yodatak/gists{/gist_id}", "starred_url": "https://api.github.com/users/yodatak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yodatak/subscriptions", "organizations_url": "https://api.github.com/users/yodatak/orgs", "repos_url": "https://api.github.com/users/yodatak/repos", "events_url": "https://api.github.com/users/yodatak/events{/privacy}", "received_events_url": "https://api.github.com/users/yodatak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346166495, "node_id": "MDU6TGFiZWwxMzQ2MTY2NDk1", "url": "https://api.github.com/repos/ansible-community/ara/labels/ansible%20roles", "name": "ansible roles", "color": "006b75", "default": false, "description": "Related to the Ansible roles"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-17T13:54:13Z", "updated_at": "2019-06-07T13:02:53Z", "closed_at": "2019-06-07T13:02:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "The use of of auto make it bug on my fedora 30 \r\nTASK [ara_api : Get list of installed packages] **********************************************************************************************************************************************************************************************\r\ntask path: /home/YC588F8N/ara/ara-feature-1.0/roles/ara_api/tasks/pre-requirements.yaml:32\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: YC588F8N\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /tmp/ansible-tmp-1558101442.807949-53175802335807 `\" && echo ansible-tmp-1558101442.807949-53175802335807=\"` echo /tmp/ansible-tmp-1558101442.807949-53175802335807 `\" ) && sleep 0'\r\nUsing module file /home/X/.ara/virtualenv/lib64/python3.7/site-packages/ansible/modules/packaging/os/package_facts.py\r\n<127.0.0.1> PUT /home/X/.ansible/tmp/ansible-local-4634b0t1_ln9/tmprp6ve_5_ TO /tmp/ansible-tmp-1558101442.807949-53175802335807/AnsiballZ_package_facts.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /tmp/ansible-tmp-1558101442.807949-53175802335807/ /tmp/ansible-tmp-1558101442.807949-53175802335807/AnsiballZ_package_facts.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/home/X/.ara/virtualenv/bin/python3 /tmp/ansible-tmp-1558101442.807949-53175802335807/AnsiballZ_package_facts.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /tmp/ansible-tmp-1558101442.807949-53175802335807/ > /dev/null 2>&1 && sleep 0'\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"manager\": [\r\n                \"auto\"\r\n            ],\r\n            \"strategy\": \"first\"\r\n        }\r\n    },\r\n    \"msg\": \"Could not detect a supported package manager from the following list: ['portage', 'pkg', 'apt', 'rpm']\"\r\n}\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/40", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/40/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/40/events", "html_url": "https://github.com/ansible-community/ara/issues/40", "id": 442257227, "node_id": "MDU6SXNzdWU0NDIyNTcyMjc=", "number": 40, "title": "Internal Server Error in browser", "user": {"login": "biohazd", "id": 986551, "node_id": "MDQ6VXNlcjk4NjU1MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/986551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biohazd", "html_url": "https://github.com/biohazd", "followers_url": "https://api.github.com/users/biohazd/followers", "following_url": "https://api.github.com/users/biohazd/following{/other_user}", "gists_url": "https://api.github.com/users/biohazd/gists{/gist_id}", "starred_url": "https://api.github.com/users/biohazd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biohazd/subscriptions", "organizations_url": "https://api.github.com/users/biohazd/orgs", "repos_url": "https://api.github.com/users/biohazd/repos", "events_url": "https://api.github.com/users/biohazd/events{/privacy}", "received_events_url": "https://api.github.com/users/biohazd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}, {"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-09T14:09:12Z", "updated_at": "2019-05-16T12:50:29Z", "closed_at": "2019-05-16T12:50:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I often get the error in the browser \"Internal Server Error\".  If I view the other pages in the browser, they load fine, so its only 1 page that has the issue. e.g. https://ara/reports/list/4.html\r\n\r\n[ root@ara-20:~]$ pip list\r\nansible (2.3.2.0)\r\nara (0.13.0)\r\n\r\nShould i just upgrade ARA version, or is this a known issue?\r\n\r\nThe error logs show\r\n```\r\n[2019-05-09 13:20:24,624] ERROR in app: Exception on /reports/ [GET]\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 1988, in wsgi_app\r\n    response = self.full_dispatch_request()\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 1641, in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 1544, in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 1639, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 1625, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"/usr/local/lib/python2.7/site-packages/ara/views/reports.py\", line 66, in report_list\r\n    stats=stats)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/templating.py\", line 134, in render_template\r\n    context, ctx.app)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/templating.py\", line 116, in _render\r\n    rv = template.render(context)\r\n  File \"/usr/local/lib/python2.7/site-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"/usr/local/lib/python2.7/site-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python2.7/site-packages/ara/templates/report_list.html\", line 1, in top-level template code\r\n    {% extends \"layout.html\" %}\r\n  File \"/usr/local/lib/python2.7/site-packages/ara/templates/layout.html\", line 6, in top-level template code\r\n    {% block content -%}\r\n  File \"/usr/local/lib/python2.7/site-packages/ara/templates/report_list.html\", line 10, in block \"content\"\r\n    {% include \"report.html\" -%}\r\n  File \"/usr/local/lib/python2.7/site-packages/ara/templates/report.html\", line 22, in top-level template code\r\n    <a href=\"#\" data-toggle=\"modal\" data-target=\"#file_modal\" data-load=\"{{ playbook.file.id }}/\" title=\"{{ playbook.path }}\">{{ playbook.path | basename }}</a>\r\n  File \"/usr/local/lib/python2.7/site-packages/jinja2/environment.py\", line 430, in getattr\r\n    return getattr(obj, attribute)\r\n  File \"/usr/local/lib/python2.7/site-packages/ara/models.py\", line 195, in file\r\n    .filter(File.is_playbook)).one()\r\n  File \"/usr/local/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2953, in one\r\n    raise orm_exc.NoResultFound(\"No row was found for one()\")\r\nNoResultFound: No row was found for one()\r\n[pid: 20661|app: 0|req: 228290/228300] 10.6.0.18 () {54 vars in 892 bytes} [Thu May  9 13:20:24 2019] GET /reports/ => generated 291 bytes in 413 msecs (HTTP/1.1 500) 2 headers in 84 bytes (1 switches on core 0)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/36", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/36/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/36/events", "html_url": "https://github.com/ansible-community/ara/issues/36", "id": 438863280, "node_id": "MDU6SXNzdWU0Mzg4NjMyODA=", "number": 36, "title": "Provide standalone packages for the API, the clients and the plugins", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813943, "node_id": "MDU6TGFiZWwzODk4MTM5NDM=", "url": "https://api.github.com/repos/ansible-community/ara/labels/help%20wanted", "name": "help wanted", "color": "128A0C", "default": true, "description": null}, {"id": 1342339001, "node_id": "MDU6TGFiZWwxMzQyMzM5MDAx", "url": "https://api.github.com/repos/ansible-community/ara/labels/packaging", "name": "packaging", "color": "f4b924", "default": false, "description": "Related to the packaging"}], "state": "closed", "locked": false, "assignee": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-30T16:19:54Z", "updated_at": "2019-05-06T14:17:15Z", "closed_at": "2019-05-06T14:17:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``ara-server``, ``ara-plugins`` and ``ara-clients`` were standalone packages on PyPi before we pulled everything back into a single repository in order to simplify things and reduce the overhead from managing multiple repositories.\r\n\r\nIf possible, it would be relevant to provide standalone packages so that users don't end up installing things they don't need.\r\n\r\nIt's worth noting that ARA 1.0 is already far more lightweight than 0.x in terms of dependencies and as a result I don't see this as a blocker right now.\r\n\r\n20 packages for 1.0a4:\r\n```\r\nara==1.0.0.0a4\r\ncertifi==2019.3.9\r\nchardet==3.0.4\r\nClick==7.0\r\nDjango==2.2\r\ndjango-cors-headers==2.5.3\r\ndjango-filter==2.1.0\r\ndjangorestframework==3.9.3\r\ndynaconf==2.0.2\r\nidna==2.8\r\npbr==5.2.0\r\npython-box==3.4.0\r\npython-dotenv==0.10.1\r\npytz==2019.1\r\nPyYAML==5.1\r\nrequests==2.21.0\r\nsqlparse==0.3.0\r\ntoml==0.10.0\r\nurllib3==1.24.2\r\nwhitenoise==4.1.2\r\n```\r\n\r\n65 packages for 0.16.3:\r\n```\r\nalembic==1.0.10\r\nansible==2.7.10\r\nara==0.16.3\r\nasn1crypto==0.24.0\r\nattrs==19.1.0\r\nBabel==2.6.0\r\nbcrypt==3.1.6\r\ncffi==1.12.3\r\nClick==7.0\r\ncliff==2.14.1\r\ncmd2==0.9.12\r\ncolorama==0.4.1\r\ncryptography==2.6.1\r\ndebtcollector==1.21.0\r\nextras==1.0.0\r\nfixtures==3.0.0\r\nFlask==1.0.2\r\nFlask-Migrate==2.4.0\r\nFlask-Script==2.0.6\r\nFlask-SQLAlchemy==2.4.0\r\nFrozen-Flask==0.15\r\niso8601==0.1.12\r\nitsdangerous==1.1.0\r\nJinja2==2.10.1\r\njunit-xml==1.8\r\nlinecache2==1.0.0\r\nMako==1.0.9\r\nMarkupSafe==1.1.1\r\nmsgpack==0.6.1\r\nnetaddr==0.7.19\r\nnetifaces==0.10.9\r\noslo.i18n==3.23.1\r\noslo.serialization==2.29.0\r\noslo.utils==3.41.0\r\nparamiko==2.4.2\r\npbr==5.2.0\r\nprettytable==0.7.2\r\npyasn1==0.4.5\r\npycparser==2.19\r\npyfakefs==3.5.8\r\nPygments==2.3.1\r\nPyNaCl==1.3.0\r\npyparsing==2.4.0\r\npyperclip==1.7.0\r\npython-dateutil==2.8.0\r\npython-editor==1.0.4\r\npython-mimeparse==1.6.0\r\npython-subunit==1.3.0\r\npytz==2019.1\r\nPyYAML==5.1\r\nsix==1.12.0\r\nSQLAlchemy==1.3.3\r\nstevedore==1.30.1\r\ntesttools==2.3.0\r\ntraceback2==1.4.0\r\nunittest2==1.1.0\r\nwcwidth==0.1.7\r\nWerkzeug==0.15.2\r\nwrapt==1.11.1\r\nXStatic==1.0.2\r\nXStatic-Bootstrap-SCSS==3.3.7.1\r\nXStatic-DataTables==1.10.15.1\r\nXStatic-jQuery==3.3.1.1\r\nXStatic-Patternfly==3.21.0.1\r\nXStatic-Patternfly-Bootstrap-Treeview==2.1.3.2\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/35", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/35/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/35/events", "html_url": "https://github.com/ansible-community/ara/issues/35", "id": 438344004, "node_id": "MDU6SXNzdWU0MzgzNDQwMDQ=", "number": 35, "title": "ara_record stucks with MariaDB and Postgresql", "user": {"login": "spvolin", "id": 49960452, "node_id": "MDQ6VXNlcjQ5OTYwNDUy", "avatar_url": "https://avatars2.githubusercontent.com/u/49960452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spvolin", "html_url": "https://github.com/spvolin", "followers_url": "https://api.github.com/users/spvolin/followers", "following_url": "https://api.github.com/users/spvolin/following{/other_user}", "gists_url": "https://api.github.com/users/spvolin/gists{/gist_id}", "starred_url": "https://api.github.com/users/spvolin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spvolin/subscriptions", "organizations_url": "https://api.github.com/users/spvolin/orgs", "repos_url": "https://api.github.com/users/spvolin/repos", "events_url": "https://api.github.com/users/spvolin/events{/privacy}", "received_events_url": "https://api.github.com/users/spvolin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}, {"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-04-29T14:27:20Z", "updated_at": "2019-12-05T15:20:17Z", "closed_at": "2019-12-05T15:20:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "ara_record stucks with MariaDB and Postgresql when running playbook for a few inventory hosts and fork>=2\r\nWith fork = 1 ara_record works just fine.\r\nNormaly a user wants this parameter be much >>1!!\r\nSo putting it to 1 can not be regarded as a solution. It's only an indication of a problem with DB more mature than SQLite.\r\nIt demands more testing of ARA with other DB.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/34", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/34/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/34/events", "html_url": "https://github.com/ansible-community/ara/issues/34", "id": 437910392, "node_id": "MDU6SXNzdWU0Mzc5MTAzOTI=", "number": 34, "title": "Unable to connect to MySQL with SSL enabled", "user": {"login": "pleung-eis", "id": 41584705, "node_id": "MDQ6VXNlcjQxNTg0NzA1", "avatar_url": "https://avatars3.githubusercontent.com/u/41584705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pleung-eis", "html_url": "https://github.com/pleung-eis", "followers_url": "https://api.github.com/users/pleung-eis/followers", "following_url": "https://api.github.com/users/pleung-eis/following{/other_user}", "gists_url": "https://api.github.com/users/pleung-eis/gists{/gist_id}", "starred_url": "https://api.github.com/users/pleung-eis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pleung-eis/subscriptions", "organizations_url": "https://api.github.com/users/pleung-eis/orgs", "repos_url": "https://api.github.com/users/pleung-eis/repos", "events_url": "https://api.github.com/users/pleung-eis/events{/privacy}", "received_events_url": "https://api.github.com/users/pleung-eis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}, {"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}, {"id": 389813945, "node_id": "MDU6TGFiZWwzODk4MTM5NDU=", "url": "https://api.github.com/repos/ansible-community/ara/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-27T05:56:30Z", "updated_at": "2019-05-17T17:27:08Z", "closed_at": "2019-05-17T17:27:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unable to connect to MySQL database with SSL enabled.\r\n\r\n[exception]\r\n  File \"/usr/local/lib/python3.7/site-packages/pymysql/connections.py\", line 684, in _read_packet\r\n    packet.check_error()\r\n  File \"/usr/local/lib/python3.7/site-packages/pymysql/protocol.py\", line 220, in check_error\r\n    err.raise_mysql_exception(self._data)\r\n  File \"/usr/local/lib/python3.7/site-packages/pymysql/err.py\", line 109, in raise_mysql_exception\r\n    raise errorclass(errno, errval)\r\nsqlalchemy.exc.InternalError: (pymysql.err.InternalError) (9002, 'SSL connection is required. Please specify SSL options and retry.\\x00')\r\n\r\nAdded \"ssl\" parameter to the connection string but it doesn't appear the value is recognized as a dictionary.  Tried passing in the database via cfg file and environment variable.  Both generate same error message.\r\n\r\n[ara]\r\ndatabase = \"mysql+pymysql://ara:password@mysqlinstance/ara?ssl={'ca': 'pemfile'}\r\nor\r\nexport ARA_DATABASE=\"mysql+pymysql://ara:password@mysqlinstance/ara?ssl={'ca': 'pemfile'}\"\r\n\r\n  File \"/usr/local/lib/python3.7/site-packages/pymysql/connections.py\", line 330, in _create_ssl_ctx\r\n    ca = sslp.get('ca')\r\nAttributeError: 'str' object has no attribute 'get'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/33", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/33/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/33/events", "html_url": "https://github.com/ansible-community/ara/issues/33", "id": 436921159, "node_id": "MDU6SXNzdWU0MzY5MjExNTk=", "number": 33, "title": "pep517 makes tox confused when both pyproject.toml and setup.py are present", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-24T21:44:58Z", "updated_at": "2019-04-25T20:08:01Z", "closed_at": "2019-04-25T20:08:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Got this error today:\r\n```\r\n$ tox -e ansible-integration\r\nansible-integration create: /home/dmsimard/dev/git/ansible-community/ara/.tox/ansible-integration\r\nansible-integration installdeps: ansible\r\nansible-integration develop-inst: /home/dmsimard/dev/git/ansible-community/ara\r\nERROR: invocation failed (exit code 1), logfile: /home/dmsimard/dev/git/ansible-community/ara/.tox/ansible-integration/log/ansible-integration-2.log\r\nERROR: actionid: ansible-integration\r\nmsg: developpkg\r\ncmdargs: ['/home/dmsimard/dev/git/ansible-community/ara/.tox/ansible-integration/bin/pip', 'install', '-U', '-e', '/home/dmsimard/dev/git/ansible-community/ara', '-c/dev/null']\r\n\r\nObtaining file:///home/dmsimard/dev/git/ansible-community/ara\r\nERROR: Error installing 'file:///home/dmsimard/dev/git/ansible-community/ara': editable mode is not supported for pyproject.toml-style projects. pip is processing this project as pyproject.toml-style because it has a pyproject.toml file. Since the project has a setup.py and the pyproject.toml has no \"build-backend\" key for the \"build_system\" value, you may pass --no-use-pep517 to opt out of pyproject.toml-style processing. See PEP 517 for details on pyproject.toml-style projects.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/32", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/32/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/32/events", "html_url": "https://github.com/ansible-community/ara/issues/32", "id": 436859431, "node_id": "MDU6SXNzdWU0MzY4NTk0MzE=", "number": 32, "title": "psycopg2.OperationalError when using ARA 0.x with PostgreSQL", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}, {"id": 389813940, "node_id": "MDU6TGFiZWwzODk4MTM5NDA=", "url": "https://api.github.com/repos/ansible-community/ara/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-04-24T19:05:35Z", "updated_at": "2019-12-05T15:19:48Z", "closed_at": "2019-12-05T15:19:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Migrated from https://storyboard.openstack.org/#!/story/2005492\r\n\r\nSergei Volin reported issues trying to run ARA with PostgreSQL:\r\n```\r\nansible@debian9:~/ansible/out$ grep OperationalError ansible.log | cat -n\r\n1 2019-04-18 18:13:22,641 p=50426 u=uansible | fatal: [l1]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n2 (psycopg2.OperationalError) SSL error: decryption failed or bad record mac [SQL: SELECT tasks.id AS\r\n3 2019-04-18 18:13:25,421 p=50426 u=uansible | fatal: [l2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) server closed the connection unexpectedly\\n\\tThis probably means the server terminated abnormally\\n\\tbefore or while processing the request.\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'0d78ff1d-c3f0-454a-9b46-2e24fa39accb', 'key_1': u'l2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n4 object at 0x7f09731a1950>): (psycopg2.OperationalError) server closed the connection unexpectedly This\r\n5 2019-04-18 18:41:04,521 p=50665 u=uansible | fatal: [l2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'f0f32eab-8a2c-40e3-98d0-d77a54111bad', 'key_1': u'l2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n6 object at 0x7ff8c514d950>): (psycopg2.OperationalError) server closed the connection unexpectedly This\r\n7 2019-04-18 18:56:18,571 p=50898 u=uansible | fatal: [l2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'bfd7130b-76e6-4140-8b31-7e628da58612', 'key_1': u'l2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n8 object at 0x7f66406e0950>): (psycopg2.OperationalError) server closed the connection unexpectedly This\r\n9 2019-04-18 18:57:30,896 p=51013 u=uansible | fatal: [l2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'5b626cec-08a9-4444-b457-336385796dfd', 'key_1': u'l2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n10 object at 0x7f247c0e6950>): (psycopg2.OperationalError) server closed the connection unexpectedly This\r\n11 2019-04-18 18:59:29,083 p=51149 u=uansible | fatal: [l2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'd6f6ab7b-5380-4bac-b6fa-a61531b35c1a', 'key_1': u'l2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n12 object at 0x7f06ce8e8950>): (psycopg2.OperationalError) server closed the connection unexpectedly This\r\n13 2019-04-18 18:59:57,440 p=51262 u=uansible | fatal: [l2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'7f576582-7da8-41cd-95a3-5e4eaf4036a0', 'key_1': u'l2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n14 2019-04-18 19:08:49,911 p=52450 u=uansible | fatal: [j1]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'252b17ff-253c-4a6e-8c46-d9cf49e58f72', 'key_1': u'j1_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n15 object at 0x7f88d830f5d0>): (psycopg2.OperationalError) server closed the connection unexpectedly This\r\n16 2019-04-18 19:08:50,081 p=52450 u=uansible | fatal: [j2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: INSERT INTO data (id, playbook_id, key, value, type) VALUES (%(id)s, %(playbook_id)s, %(key)s, %(value)s, %(type)s)]\\n[parameters: {'type': u'json', 'value': <psycopg2.extensions.Binary object at 0x7f88cdc87198>, 'playbook_id': u'252b17ff-253c-4a6e-8c46-d9cf49e58f72', 'id': 'ce10c92b-e944-41de-bf07-1094586ac35f', 'key': u'j2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n17 2019-04-18 19:42:04,311 p=52990 u=uansible | fatal: [j1]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'24645bcc-8a4f-43f1-8788-fdcd529ad62a', 'key_1': u'j1_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n18 object at 0x7f2806dacf90>): (psycopg2.OperationalError) SSL SYSCALL error: EOF detected [SQL: SELECT tasks.id AS\r\n19 2019-04-18 19:42:04,387 p=52990 u=uansible | fatal: [j2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) server closed the connection unexpectedly\\n\\tThis probably means the server terminated abnormally\\n\\tbefore or while processing the request.\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'24645bcc-8a4f-43f1-8788-fdcd529ad62a', 'key_1': u'j2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n20 2019-04-18 19:55:39,624 p=53357 u=uansible | fatal: [j2]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) server closed the connection unexpectedly\\n\\tThis probably means the server terminated abnormally\\n\\tbefore or while processing the request.\\n\\n[SQL: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type \\nFROM data \\nWHERE data.key = %(key_1)s AND data.playbook_id = %(playbook_id_1)s]\\n[parameters: {'playbook_id_1': u'7b398a6e-0eb0-4f2a-8a3e-5154f564ec57', 'key_1': u'j2_facts'}]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\"}\r\n21 object at 0x7f392dd54f90>): (psycopg2.OperationalError) SSL SYSCALL error: EOF detected [SQL: SELECT tasks.id AS\r\n22 2019-04-18 19:55:39,727 p=53357 u=uansible | fatal: [j1]: FAILED! => {\"changed\": false, \"msg\": \"Data not recorded in ARA: (psycopg2.OperationalError) SSL error: decryption failed or bad record mac\\n\\n[SQL: INSERT INTO data (id, playbook_id, key, value, type) VALUES (%(id)s, %(playbook_id)s, %(key)s, %(value)s, %(type)s)]\\n[parameters: {'type': u'json', 'value': <psycopg2.extensions.Binary object at 0x7f391f713350>, 'playbook_id': u'7b398a6e-0eb0-4f2a-8a3e-5154f564ec5\r\n```\r\n\r\nExcerpt from posgresql-9.6-main.log file:\r\n```\r\n2019-04-18 18:13:20.317 MSK [50433] ara@ara ::1(48976)LOG: duration: 0.283 ms statement: SELECT data.id AS data_id, data.playbook_id AS data_playbook_id, data.key AS data_key, data.value AS data_value, data.type AS data_type FROM data WHERE data.key = 'l1_facts' AND data.playbook_id = '0d78ff1d-c3f0-454a-9b46-2e24fa39accb'\r\n2019-04-18 18:13:20.322 MSK [50433] ara@ara ::1(48976)LOG: duration: 0.484 ms statement: INSERT INTO data (id, playbook_id, key, value, type) VALUES ('ff50ead9-79c3-42e1-8d5a-5b9939572f5e', '0d78ff1d-c3f0-454a-9b46-2e24fa39accb', 'l1_facts', '\\x789ced5b796fda4abbff<...>'::bytea, 'json')\r\n2019-04-18 18:13:20.343 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.051 ms statement: BEGIN\r\n2019-04-18 18:13:20.343 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.445 ms statement: SELECT t.oid, typarray FROM pg_type t JOIN pg_namespace ns ON typnamespace = ns.oid WHERE typname = 'hstore';\r\n2019-04-18 18:13:20.343 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.011 ms statement: ROLLBACK\r\n2019-04-18 18:13:20.344 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.007 ms statement: BEGIN\r\n2019-04-18 18:13:20.344 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.052 ms statement: select version()\r\n2019-04-18 18:13:20.344 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.045 ms statement: select current_schema()\r\n2019-04-18 18:13:20.345 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.016 ms statement: show transaction isolation level\r\n2019-04-18 18:13:20.345 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.070 ms statement: SELECT CAST('test plain returns' AS VARCHAR(60)) AS anon_1\r\n2019-04-18 18:13:20.346 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.029 ms statement: SELECT CAST('test unicode returns' AS VARCHAR(60)) AS anon_1\r\n2019-04-18 18:13:20.346 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.027 ms statement: SELECT 'x' AS some_label\r\n2019-04-18 18:13:20.346 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.009 ms statement: ROLLBACK\r\n2019-04-18 18:13:20.346 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.007 ms statement: BEGIN\r\n2019-04-18 18:13:20.346 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.013 ms statement: show standard_conforming_strings\r\n2019-04-18 18:13:20.346 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.008 ms statement: ROLLBACK\r\n2019-04-18 18:13:20.347 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.007 ms statement: BEGIN\r\n2019-04-18 18:13:20.347 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.361 ms statement: SELECT c.relname FROM pg_class c JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = 'public' AND c.relkind in ('r', 'p')\r\n2019-04-18 18:13:20.347 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.011 ms statement: ROLLBACK\r\n2019-04-18 18:13:20.350 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.033 ms statement: BEGIN\r\n2019-04-18 18:13:20.350 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.167 ms statement: select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname='alembic_version'\r\n2019-04-18 18:13:20.350 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.094 ms statement: SELECT alembic_version.version_num FROM alembic_version\r\n2019-04-18 18:13:20.351 MSK [50507] ara@ara ::1(48986)LOG: duration: 0.012 ms statement: ROLLBACK\r\n2019-04-18 18:13:22.633 MSK [50433] ara@ara ::1(48976)LOG: duration: 2311.093 ms statement: COMMIT\r\n2019-04-18 18:13:22.633 MSK [50433] ara@ara ::1(48976)LOG: SSL error: decryption failed or bad record mac\r\n2019-04-18 18:13:22.633 MSK [50433] ara@ara ::1(48976)LOG: could not receive data from client: Connection reset by peer\r\n2019-04-18 18:13:22.649 MSK [50506] ara@ara ::1(48984)LOG: could not receive data from client: Connection reset by peer\r\n2019-04-18 18:13:22.665 MSK [50507] ara@ara ::1(48986)LOG: could not receive data from client: Connection reset by peer\r\n```\r\n\r\nInstalled packages:\r\n```\r\nuser@debian9:/var/log/postgresql# pip freeze\r\nalembic==1.0.8\r\nansible==2.7.6\r\nansible-cmdb==1.30\r\nara==0.16.3\r\nBabel==2.6.0\r\nbeautifulsoup4==4.5.3\r\nchardet==2.3.0\r\nchrome-gnome-shell==0.0.0\r\nClick==7.0\r\ncliff==2.14.1\r\ncmd2==0.8.9\r\ncontextlib2==0.5.5\r\ncryptography==1.7.1\r\ndebtcollector==1.21.0\r\nenum34==1.1.6\r\nextras==1.0.0\r\nfixtures==3.0.0\r\nFlask==1.0.2\r\nFlask-Migrate==2.4.0\r\nFlask-Script==2.0.6\r\nFlask-SQLAlchemy==2.3.2\r\nFrozen-Flask==0.15\r\nfuncsigs==1.0.2\r\nhtml5lib==0.999999999\r\nhttplib2==0.9.2\r\nidna==2.2\r\nipaddress==1.0.17\r\niso8601==0.1.12\r\nitsdangerous==1.1.0\r\nJinja2==2.10\r\njmespath==0.9.0\r\njsonxs==0.6\r\njunit-xml==1.8\r\njunos-eznc==2.2.0\r\njxmlease==1.0.1\r\nkeyring==10.1\r\nkeyrings.alt==1.3\r\nlinecache2==1.0.0\r\nlxml==3.7.1\r\nMako==1.0.7\r\nMarkupSafe==0.23\r\nmonotonic==1.5\r\nmsgpack==0.6.1\r\nncclient==0.6.3\r\nnetifaces==0.10.9\r\nntlm-auth==1.2.0\r\nnumpy==1.12.1\r\noslo.i18n==3.23.1\r\noslo.serialization==2.28.2\r\noslo.utils==3.40.3\r\nparamiko==2.0.0\r\npbr==5.1.3\r\nprettytable==0.7.2\r\npsycopg2==2.7.7\r\npyasn1==0.1.9\r\npycrypto==2.6.1\r\npyfakefs==3.5.8\r\nPygments==2.3.1\r\npygobject==3.22.0\r\npyOpenSSL==16.2.0\r\npyparsing==2.3.1\r\npyperclip==1.7.0\r\npyserial==3.4\r\npython-dateutil==2.8.0\r\npython-editor==1.0.4\r\npython-mimeparse==1.6.0\r\npython-subunit==1.3.0\r\npytz==2018.9\r\npywinrm==0.3.0\r\npyxdg==0.25\r\nPyYAML==3.12\r\nrequests==2.12.4\r\nrequests-ntlm==1.1.0\r\nscour==0.32\r\nscp==0.13.0\r\nSecretStorage==2.3.1\r\nselectors2==2.0.1\r\nsimplejson==3.16.1\r\nsix==1.10.0\r\nSQLAlchemy==1.3.1\r\nstevedore==1.30.1\r\nsubprocess32==3.5.3\r\ntesttools==2.3.0\r\ntraceback2==1.4.0\r\nunicodecsv==0.14.1\r\nunittest2==1.1.0\r\nurllib3==1.19.1\r\nushlex==0.99.1\r\nwcwidth==0.1.7\r\nwebencodings==0.5\r\nWerkzeug==0.14.1\r\nwrapt==1.11.1\r\nXStatic==1.0.2\r\nXStatic-Bootstrap-SCSS==3.3.7.1\r\nXStatic-DataTables==1.10.15.1\r\nXStatic-jQuery==3.3.1.1\r\nXStatic-Patternfly==3.21.0.1\r\nXStatic-Patternfly-Bootstrap-Treeview==2.1.3.2\r\n```\r\n\r\n```\r\nansible@debian9:~/ansible/out$ python\r\nPython 2.7.13 (default, Sep 26 2018, 18:42:22)\r\n[GCC 6.3.0 20170516] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import sqlite3\r\n>>> sqlite3.version\r\n'2.6.0'\r\n>>> sqlite3.sqlite_version\r\n'3.16.2'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/31", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/31/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/31/events", "html_url": "https://github.com/ansible-community/ara/issues/31", "id": 436854146, "node_id": "MDU6SXNzdWU0MzY4NTQxNDY=", "number": 31, "title": "Add tooling to prune the database of old records", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1342286502, "node_id": "MDU6TGFiZWwxMzQyMjg2NTAy", "url": "https://api.github.com/repos/ansible-community/ara/labels/database", "name": "database", "color": "89bff9", "default": false, "description": "Related to the database backends or models"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-24T18:52:25Z", "updated_at": "2019-11-28T16:42:01Z", "closed_at": "2019-11-28T16:42:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Users might not want to keep all records around until the end of time. It might be relevant to keep them for 30 days, 60 days, a year, etc.\r\n\r\nThe API does not yet support searching by dates (see https://github.com/ansible-community/ara/issues/30) so that would need to be addressed first.\r\n\r\nWe need to determine what this would look like in practice. A django-admin command ? A command in the (eventual) CLI client ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/30", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/30/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/30/events", "html_url": "https://github.com/ansible-community/ara/issues/30", "id": 436852669, "node_id": "MDU6SXNzdWU0MzY4NTI2Njk=", "number": 30, "title": "Add API support for searching objects by dates", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529438, "node_id": "MDU6TGFiZWwxMzIyNTI5NDM4", "url": "https://api.github.com/repos/ansible-community/ara/labels/api", "name": "api", "color": "1238b7", "default": false, "description": "Related to the API"}, {"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}, {"id": 389813943, "node_id": "MDU6TGFiZWwzODk4MTM5NDM=", "url": "https://api.github.com/repos/ansible-community/ara/labels/help%20wanted", "name": "help wanted", "color": "128A0C", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-24T18:49:05Z", "updated_at": "2019-11-07T15:19:17Z", "closed_at": "2019-11-07T15:19:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The API should support searching objects based on their dates.\r\n\r\nFor example, we might want to search for playbook that were run after a certain date or before a certain date. This search should be possible for other objects as well: plays, tasks, results.\r\n\r\nThere are some approaches suggested on how to do this with django-rest-framework here: https://stackoverflow.com/questions/37183943/django-how-to-filter-by-date-with-django-rest-framework", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/28", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/28/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/28/events", "html_url": "https://github.com/ansible-community/ara/issues/28", "id": 436788834, "node_id": "MDU6SXNzdWU0MzY3ODg4MzQ=", "number": 28, "title": "Make playbook.arguments available in playbook list", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322529438, "node_id": "MDU6TGFiZWwxMzIyNTI5NDM4", "url": "https://api.github.com/repos/ansible-community/ara/labels/api", "name": "api", "color": "1238b7", "default": false, "description": "Related to the API"}], "state": "closed", "locked": false, "assignee": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-04-24T16:18:01Z", "updated_at": "2020-06-01T14:46:50Z", "closed_at": "2019-05-08T20:35:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "playbook.arguments is more or less a fixed size dict and we can afford to make it available in the playbook list call.\r\n\r\nThis will be useful for things like highlighting playbooks that ran with ``--check`` without needing to do a call for the playbook details. Example: https://github.com/ansible-community/ara-web/issues/6", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/27", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/27/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/27/events", "html_url": "https://github.com/ansible-community/ara/issues/27", "id": 436780580, "node_id": "MDU6SXNzdWU0MzY3ODA1ODA=", "number": 27, "title": "Add support for recording Ansible adhoc commands", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-04-24T16:00:29Z", "updated_at": "2020-04-20T20:54:43Z", "closed_at": "2020-04-20T20:54:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``ansible-playbook`` commands have always been recorded by ara if the callback plugin was loaded.\r\n\r\nBy default, callback plugins are not enabled for ``ansible`` adhoc commands but they can be enabled by setting ``bin_ansible_callbacks`` in ansible.cfg or the ``ANSIBLE_LOAD_CALLBACK_PLUGINS`` env variable to ``True``.\r\n\r\nHowever, enabling this at time of writing does not work because there is no ``v2_playbook_on_start`` callback hook fired, it goes straight to ``v2_play_on_start`` so we have no playbook to tie the data back into:\r\n```\r\n$ ansible localhost -m setup -vvv\r\n# [...]\r\n\r\n [WARNING]: Failure using method (v2_playbook_on_play_start) in callback plugin (<ansible.plugins.callback./home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.CallbackModule object at 0x7f3d283eb0f0>): 'NoneType'\r\nobject is not subscriptable\r\n\r\nCallback Exception: \r\n  File \"/home/fedora/.ara/virtualenv/lib64/python3.7/site-packages/ansible/executor/task_queue_manager.py\", line 375, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 173, in v2_playbook_on_play_start\r\n    \"/api/v1/plays\", name=play.name, status=\"running\", uuid=play._uuid, playbook=self.playbook[\"id\"]\r\n\r\nMETA: ran handlers\r\n [WARNING]: Failure using method (v2_playbook_on_task_start) in callback plugin (<ansible.plugins.callback./home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.CallbackModule object at 0x7f3d283eb0f0>): 'NoneType'\r\nobject is not subscriptable\r\n\r\nCallback Exception: \r\n  File \"/home/fedora/.ara/virtualenv/lib64/python3.7/site-packages/ansible/executor/task_queue_manager.py\", line 375, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 194, in v2_playbook_on_task_start\r\n    path = self.playbook[\"path\"]\r\n\r\n# [...]\r\nlocalhost | SUCCESS => {\r\n    \"ansible_facts\": {\r\n        \"ansible_all_ipv4_addresses\": [\r\n            \"10.88.0.1\",\r\n            \"172.24.0.11\"\r\n        ],\r\n       # [...]\r\n        \"gather_subset\": [\r\n            \"all\"\r\n        ],\r\n        \"module_setup\": true\r\n    },\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"fact_path\": \"/etc/ansible/facts.d\",\r\n            \"filter\": \"*\",\r\n            \"gather_subset\": [\r\n                \"all\"\r\n            ],\r\n            \"gather_timeout\": 10\r\n        }\r\n    }\r\n}\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin (<ansible.plugins.callback./home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.CallbackModule object at 0x7f3d283eb0f0>): 'NoneType' object is not\r\nsubscriptable\r\n\r\nCallback Exception: \r\n  File \"/home/fedora/.ara/virtualenv/lib64/python3.7/site-packages/ansible/executor/task_queue_manager.py\", line 375, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 216, in v2_runner_on_ok\r\n    self._load_result(result, \"ok\", **kwargs)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 288, in _load_result\r\n    host = self._get_or_create_host(result._host.get_name())\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 280, in _get_or_create_host\r\n    return self.client.post(\"/api/v1/hosts\", name=host, alias=host_alias, playbook=self.playbook[\"id\"])\r\n\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n [WARNING]: Failure using method (v2_playbook_on_stats) in callback plugin (<ansible.plugins.callback./home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.CallbackModule object at 0x7f3d283eb0f0>): 'NoneType' object\r\nis not subscriptable\r\n\r\nCallback Exception: \r\n  File \"/home/fedora/.ara/virtualenv/lib64/python3.7/site-packages/ansible/executor/task_queue_manager.py\", line 375, in send_callback\r\n    method(*new_args, **kwargs)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 231, in v2_playbook_on_stats\r\n    self._load_stats(stats)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 335, in _load_stats\r\n    host = self._get_or_create_host(hostname)\r\n   File \"/home/fedora/.ara/virtualenv/lib/python3.7/site-packages/ara/plugins/callback/ara_default.py\", line 280, in _get_or_create_host\r\n    return self.client.post(\"/api/v1/hosts\", name=host, alias=host_alias, playbook=self.playbook[\"id\"])\r\n```\r\n\r\nWe need to investigate what's the best course of action to support this.\r\nFor example, if there is no playbook, should ``v2_play_on_start`` create a \"fake\" one ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/25", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/25/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/25/events", "html_url": "https://github.com/ansible-community/ara/issues/25", "id": 436759125, "node_id": "MDU6SXNzdWU0MzY3NTkxMjU=", "number": 25, "title": "Add client-side implementation of labels", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 389813942, "node_id": "MDU6TGFiZWwzODk4MTM5NDI=", "url": "https://api.github.com/repos/ansible-community/ara/labels/enhancement", "name": "enhancement", "color": "aee05e", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-24T15:20:19Z", "updated_at": "2019-05-21T20:06:03Z", "closed_at": "2019-05-21T20:06:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A label is a concept exclusive to ara and it is meant to be applied to playbooks by users in order to organize playbooks in logical groups.\r\n\r\nSome example use cases:\r\n- Labels called ``dev``, ``staging`` and ``production`` could be applied to playbooks in order to group playbooks targetting specific environments.\r\n- Labels called ``pre``, ``run`` and ``post`` could be used to identify which phase of a deployment the playbook ran for\r\n\r\nLabels are simple alphanumerical strings so you could have labels targetting a bug number, a reference number, etc.\r\n\r\nThis later allows users to search for playbooks matching that label.\r\n\r\nWhile labels are implemented in the API, there is no way for users to easily use them yet. I've been thinking about how this would look like in practice and it might end up being an Ansible module that looks like this:\r\n```yaml\r\n# Would create the label if it doesn't exist\r\n# Description is optional but can be provided\r\n# Appends the label to playbook.labels for state.present\r\n# Removes the label from playbook.labels for state.absent\r\n- name: Label this playbook\r\n  ara_playbook_label:\r\n    name: \"{{ item }}\"\r\n    state: present\r\n  loop:\r\n    - pre-run\r\n    - \"{{ ansible_os_distribution }}\"\r\n    - \"{{ lookup('env','USER') }}\"\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/23", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/23/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/23/events", "html_url": "https://github.com/ansible-community/ara/issues/23", "id": 436714020, "node_id": "MDU6SXNzdWU0MzY3MTQwMjA=", "number": 23, "title": "Confusing behavior of env vars ARA_DIR and ARA_LOG_FILE", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322528622, "node_id": "MDU6TGFiZWwxMzIyNTI4NjIy", "url": "https://api.github.com/repos/ansible-community/ara/labels/0.x", "name": "0.x", "color": "fc7100", "default": false, "description": "Related to version 0.x"}, {"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-04-24T13:59:00Z", "updated_at": "2019-12-05T15:18:41Z", "closed_at": "2019-12-05T15:18:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Migrated from https://storyboard.openstack.org/#!/story/2005197\r\n\r\n@riccardomurri reported:\r\n\r\n> The [current documentation][1] for environmental variable `ARA_DIR` states:\r\n> \r\n> >  ARA_DIR: Base directory where ARA will store it\u2019s log file and sqlite database, unless specified otherwise.\r\n> >\r\n> >  ARA_LOG_FILE: Path to the logfile to store ARA logs in.\r\n> \r\n> However, it is not clear how the two are combined: I would expect that Ara does `os.path.join(ARA_DIR, ARA_LOG_FILE)`.  Instead, it apparently does the equivalent of `ARA_DIR + '/' + os.path.abspath(ARA_LOG_FILE)`, as the following experiments show:\r\n> \r\n> ### 1.\r\n> \r\n> ```\r\n> ...\r\n> elasticluster[15012] DEBUG - ARA_DIR='.'\r\n> elasticluster[15012] DEBUG - ARA_LOG_FILE='/home/***/elasticluster/ara.log'\r\n> ...\r\n>  [WARNING]: ... Unable to configure handler 'ara_file': [Errno 2] No such file or directory: '/tmp/elasticluster.P9hCdo.d/home/***/elasticluster/ara.log'\r\n> ```\r\n> \r\n> ### 2.\r\n> \r\n> ```\r\n> ...\r\n> elasticluster[15178] DEBUG - ARA_DIR='/home/***/elasticluster'\r\n> elasticluster[15178] DEBUG - ARA_LOG_FILE='ara.log'\r\n> ...\r\n>  [WARNING]: ... Unable to configure handler 'ara_file': [Errno 2] No such file or directory: '/home/***/elasticluster/home/***/elasticluster/ara.log'\r\n> \r\n> ```\r\n> \r\n> ### 3.\r\n> \r\n> ```\r\n> 2019-03-11 11:43:58 monia gc3.elasticluster[15264] DEBUG - ARA_DIR='/'\r\n> 2019-03-11 11:43:58 monia gc3.elasticluster[15264] DEBUG - ARA_LOG_FILE='/home/***/elasticluster/ara.log'\r\n> ...\r\n>  [WARNING]: [Errno 13] Permission denied: u'/logging.yml'\r\n> ```\r\n> \r\n> This last combination seems to work w.r.t. writing to the correct log file, but it fails because of other files that are assumed to be present and/or created in `ARA_DIR` -- which should not be there in the first place, as the documentation for `ARA_DIR` only mentions it being the \"base directory\" for logs and the SQLite database..\r\n> \r\n> \r\n> [1]: https://ara.readthedocs.io/en/latest/configuration.html#ara-dir", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/22", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/22/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/22/events", "html_url": "https://github.com/ansible-community/ara/issues/22", "id": 436683118, "node_id": "MDU6SXNzdWU0MzY2ODMxMTg=", "number": 22, "title": "Update link in the github project description", "user": {"login": "apevec", "id": 934852, "node_id": "MDQ6VXNlcjkzNDg1Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/934852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apevec", "html_url": "https://github.com/apevec", "followers_url": "https://api.github.com/users/apevec/followers", "following_url": "https://api.github.com/users/apevec/following{/other_user}", "gists_url": "https://api.github.com/users/apevec/gists{/gist_id}", "starred_url": "https://api.github.com/users/apevec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apevec/subscriptions", "organizations_url": "https://api.github.com/users/apevec/orgs", "repos_url": "https://api.github.com/users/apevec/repos", "events_url": "https://api.github.com/users/apevec/events{/privacy}", "received_events_url": "https://api.github.com/users/apevec/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-24T13:00:15Z", "updated_at": "2019-04-24T13:07:31Z", "closed_at": "2019-04-24T13:07:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "While redirect works, this would complete detach from the openstack branding:\r\n\r\ns#This is the GitHub mirror for https://opendev.org/openstack/ara#This is the GitHub mirror for https://opendev.org/recordsansible/ara#\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/20", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/20/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/20/events", "html_url": "https://github.com/ansible-community/ara/issues/20", "id": 436354222, "node_id": "MDU6SXNzdWU0MzYzNTQyMjI=", "number": 20, "title": "Add default callback and ara_record documentation to the docs", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-23T19:34:07Z", "updated_at": "2019-06-10T14:47:43Z", "closed_at": "2019-06-10T14:47:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``ansible-doc -t callback ara_default`` works because we have documentation in the callback plugin:\r\nhttps://github.com/ansible-community/ara/blob/d56c68f749476e761d7d62a60c6d8843b95bf5eb/ara/plugins/callback/ara_default.py#L48-L100\r\n\r\nSame thing for ``ara_record``:\r\nhttps://github.com/ansible-community/ara/blob/d56c68f749476e761d7d62a60c6d8843b95bf5eb/ara/plugins/action/ara_record.py#L24-L132\r\n\r\nHowever, that doesn't get us pretty rendered pages on [ara.readthedocs.io](https://ara.readthedocs.io) like the ones from upstream Ansible: https://docs.ansible.com/ansible/latest/plugins/callback/slack.html\r\n\r\nUpstream uses [plugin_formatter.py](https://github.com/ansible/ansible/blob/devel/docs/bin/plugin_formatter.py) and the [plugin.rst.j2](https://github.com/ansible/ansible/blob/devel/docs/templates/plugin.rst.j2) template to render them.\r\n\r\nIt is not immediately clear if we can (or should) re-use those as-is but we need docs for the callback and ara_record to be on the docs website.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/19", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/19/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/19/events", "html_url": "https://github.com/ansible-community/ara/issues/19", "id": 436341367, "node_id": "MDU6SXNzdWU0MzYzNDEzNjc=", "number": 19, "title": "Add postgresql integration tests", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1332572278, "node_id": "MDU6TGFiZWwxMzMyNTcyMjc4", "url": "https://api.github.com/repos/ansible-community/ara/labels/tests", "name": "tests", "color": "fff2ba", "default": false, "description": "Related to unit, functional or integration tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-23T19:00:18Z", "updated_at": "2019-05-23T16:09:44Z", "closed_at": "2019-05-23T16:09:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We're only testing with sqlite right now which was good enough but we need a minimum of coverage on mysql and postgresql too.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/17", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/17/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/17/events", "html_url": "https://github.com/ansible-community/ara/issues/17", "id": 436330675, "node_id": "MDU6SXNzdWU0MzYzMzA2NzU=", "number": 17, "title": "Add parameter to ignore file path patterns to avoid saving matched files", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322543214, "node_id": "MDU6TGFiZWwxMzIyNTQzMjE0", "url": "https://api.github.com/repos/ansible-community/ara/labels/config", "name": "config", "color": "5a67bc", "default": false, "description": "Related to the configuration"}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2019-04-23T18:33:53Z", "updated_at": "2020-01-31T00:59:14Z", "closed_at": "2020-01-31T00:59:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The callback will retrieve files that are loaded by Ansible throughout the execution of the playbook. This could contain files that users might not want to save, either because they are sensitive or are simply not relevant.\r\n\r\nThe implementation would be somewhat similar to that we already do with ``ignored_arguments`` and ``ignored_facts`` for ignoring specified playbook parameters and host facts.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/16", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/16/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/16/events", "html_url": "https://github.com/ansible-community/ara/issues/16", "id": 434298066, "node_id": "MDU6SXNzdWU0MzQyOTgwNjY=", "number": 16, "title": "Add support for API authentication in the clients", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322531668, "node_id": "MDU6TGFiZWwxMzIyNTMxNjY4", "url": "https://api.github.com/repos/ansible-community/ara/labels/cli", "name": "cli", "color": "f7e0af", "default": false, "description": "Related to the CLI"}, {"id": 1322529931, "node_id": "MDU6TGFiZWwxMzIyNTI5OTMx", "url": "https://api.github.com/repos/ansible-community/ara/labels/client", "name": "client", "color": "bee582", "default": false, "description": "Related to the python API clients"}, {"id": 1322530252, "node_id": "MDU6TGFiZWwxMzIyNTMwMjUy", "url": "https://api.github.com/repos/ansible-community/ara/labels/plugins", "name": "plugins", "color": "3cc98c", "default": false, "description": "Related to the Ansible plugins"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-17T13:56:32Z", "updated_at": "2019-05-08T16:00:01Z", "closed_at": "2019-05-08T14:10:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The API can require authentication for reads and writes and the client must be able to authenticate against the API.\r\n\r\nWe will need to do the plumbing so that the different components are able to authenticate:\r\n- ``ara_default`` callback plugin: https://github.com/ansible-community/ara/blob/d56c68f749476e761d7d62a60c6d8843b95bf5eb/ara/plugins/callback/ara_default.py#L135\r\n- ``ara_record`` action plugin: https://github.com/ansible-community/ara/blob/d56c68f749476e761d7d62a60c6d8843b95bf5eb/ara/plugins/action/ara_record.py#L150\r\n\r\nThis work is in progress in https://review.openstack.org/#/c/651569/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/ara/issues/15", "repository_url": "https://api.github.com/repos/ansible-community/ara", "labels_url": "https://api.github.com/repos/ansible-community/ara/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/ara/issues/15/comments", "events_url": "https://api.github.com/repos/ansible-community/ara/issues/15/events", "html_url": "https://github.com/ansible-community/ara/issues/15", "id": 434046024, "node_id": "MDU6SXNzdWU0MzQwNDYwMjQ=", "number": 15, "title": "Add documentation for playbook names", "user": {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1322544030, "node_id": "MDU6TGFiZWwxMzIyNTQ0MDMw", "url": "https://api.github.com/repos/ansible-community/ara/labels/docs", "name": "docs", "color": "2e98d1", "default": false, "description": "Related to the documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-17T01:01:11Z", "updated_at": "2019-06-10T14:47:32Z", "closed_at": "2019-06-10T14:47:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It's possible to give playbook names by supplying the ``ara_playbook_name`` Ansible variable.\r\n\r\nThe intent of the feature is to allow users to give their playbook user friendly names that would display in-lieu of the playbook path by default.\r\nFor example, you might have 3 different playbooks named \"pre\" \"run\" and \"post\".\r\n\r\nThe name is a searchable field in the API and users could therefore search for all the playbooks named \"run\", for example.", "performed_via_github_app": null, "score": 1.0}]}