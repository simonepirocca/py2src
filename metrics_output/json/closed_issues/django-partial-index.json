{"total_count": 8, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/17", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/17/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/17/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/17", "id": 428229764, "node_id": "MDU6SXNzdWU0MjgyMjk3NjQ=", "number": 17, "title": "Django 2.2 support ", "user": {"login": "devbis", "id": 12081127, "node_id": "MDQ6VXNlcjEyMDgxMTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/12081127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devbis", "html_url": "https://github.com/devbis", "followers_url": "https://api.github.com/users/devbis/followers", "following_url": "https://api.github.com/users/devbis/following{/other_user}", "gists_url": "https://api.github.com/users/devbis/gists{/gist_id}", "starred_url": "https://api.github.com/users/devbis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devbis/subscriptions", "organizations_url": "https://api.github.com/users/devbis/orgs", "repos_url": "https://api.github.com/users/devbis/repos", "events_url": "https://api.github.com/users/devbis/events{/privacy}", "received_events_url": "https://api.github.com/users/devbis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-04-02T13:32:35Z", "updated_at": "2020-06-09T20:59:52Z", "closed_at": "2020-06-09T20:59:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use django 2.2 with django-partial-index I see the exception:\r\n\r\n```\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/base.py\", line 315, in __new__\r\n    new_class._prepare()\r\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/base.py\", line 367, in _prepare\r\n    index.set_name_with_model(cls)\r\n  File \"/usr/local/lib/python3.7/site-packages/partial_index/index.py\", line 146, in set_name_with_model\r\n    '%s_%s' % (self._hash_generator(*hash_data), self.suffix),\r\nAttributeError: 'PartialIndex' object has no attribute '_hash_generator'\r\n```\r\n\r\n`_hash_generator` method in Django 2.2 was moved to a function:\r\n\r\n`from django.db.backends.utils import names_digest`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/12", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/12/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/12/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/12", "id": 339557266, "node_id": "MDU6SXNzdWUzMzk1NTcyNjY=", "number": 12, "title": "Cannot create migrations when using index with `where` `PQ` object.", "user": {"login": "jproffitt", "id": 2227681, "node_id": "MDQ6VXNlcjIyMjc2ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/2227681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jproffitt", "html_url": "https://github.com/jproffitt", "followers_url": "https://api.github.com/users/jproffitt/followers", "following_url": "https://api.github.com/users/jproffitt/following{/other_user}", "gists_url": "https://api.github.com/users/jproffitt/gists{/gist_id}", "starred_url": "https://api.github.com/users/jproffitt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jproffitt/subscriptions", "organizations_url": "https://api.github.com/users/jproffitt/orgs", "repos_url": "https://api.github.com/users/jproffitt/repos", "events_url": "https://api.github.com/users/jproffitt/events{/privacy}", "received_events_url": "https://api.github.com/users/jproffitt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 662639229, "node_id": "MDU6TGFiZWw2NjI2MzkyMjk=", "url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-07-09T18:23:16Z", "updated_at": "2018-07-17T16:46:07Z", "closed_at": "2018-07-17T16:46:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to create an index like so:\r\n\r\n```\r\nPartialIndex(fields=['date_created', 'ignored', 'id'], unique=True, where=PQ(ignored=False))\r\n```\r\n\r\nBut when I run `makemigrations`, django cannot serialize the `PQ` object into a migration. Here is the output:\r\n\r\n```\r\nValueError: Cannot serialize: <PQ: (AND: ('ignored', False))>\r\nThere are some values Django cannot serialize into migration files.\r\nFor more, see https://docs.djangoproject.com/en/1.11/topics/migrations/#migration-serializing\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/11", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/11/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/11/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/11", "id": 318495766, "node_id": "MDU6SXNzdWUzMTg0OTU3NjY=", "number": 11, "title": "Using a where clause compring field to string", "user": {"login": "mwolff44", "id": 2518965, "node_id": "MDQ6VXNlcjI1MTg5NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2518965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mwolff44", "html_url": "https://github.com/mwolff44", "followers_url": "https://api.github.com/users/mwolff44/followers", "following_url": "https://api.github.com/users/mwolff44/following{/other_user}", "gists_url": "https://api.github.com/users/mwolff44/gists{/gist_id}", "starred_url": "https://api.github.com/users/mwolff44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mwolff44/subscriptions", "organizations_url": "https://api.github.com/users/mwolff44/orgs", "repos_url": "https://api.github.com/users/mwolff44/repos", "events_url": "https://api.github.com/users/mwolff44/events{/privacy}", "received_events_url": "https://api.github.com/users/mwolff44/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-27T17:53:39Z", "updated_at": "2018-04-27T18:01:12Z", "closed_at": "2018-04-27T18:01:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI want to create a partial index with postgresql, but in my where clause, i need to compare a field to a char. I get an error .\r\nExample : \r\nPartialIndex(fields=['id', 'rc_type'], unique=False, where_postgresql='status = \"enabled\"')\r\n\r\ndjango.db.utils.ProgrammingError: column \"enabled\" does not exist\r\nLINE 1: ...N \"table\" (\"id\", \"rc_type\") WHERE status = \"enabled\"\r\n\r\nThanks for your help", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/8", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/8/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/8/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/8", "id": 286391338, "node_id": "MDU6SXNzdWUyODYzOTEzMzg=", "number": 8, "title": "Use Django's Q-expressions instead of text for the where-condition of the partial index.", "user": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 662639231, "node_id": "MDU6TGFiZWw2NjI2MzkyMzE=", "url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-01-05T20:07:11Z", "updated_at": "2018-07-15T17:53:20Z", "closed_at": "2018-07-15T15:56:42Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This would have three main advantages:\r\n\r\n* More \"djangonic\" than writing raw SQL,\r\n* No need to provide separate conditions for PostgreSQL and SQLite for boolean conditions,\r\n* May be easier to parse for form validation.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/4", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/4/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/4/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/4", "id": 248760035, "node_id": "MDU6SXNzdWUyNDg3NjAwMzU=", "number": 4, "title": "User-friendly error messages for ModelForms", "user": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 662639231, "node_id": "MDU6TGFiZWw2NjI2MzkyMzE=", "url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-08T15:44:49Z", "updated_at": "2018-07-15T15:57:13Z", "closed_at": "2018-07-15T15:57:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Currently when you save data that violates a unique=True PartialIndex, the database backend will raise an IntegrityError. This can show up as a \"500 Server Error\" page.\r\n\r\nIf a partial unique constraint exists on a model, then ModelForms derived from it should automatically get some sort of validation with nice error messages.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/3", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/3/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/3/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/3", "id": 248366150, "node_id": "MDU6SXNzdWUyNDgzNjYxNTA=", "number": 3, "title": "Allow setting only where_postgresql='' or where_sqlite='' without the other one.", "user": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 662639231, "node_id": "MDU6TGFiZWw2NjI2MzkyMzE=", "url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-08-07T10:13:19Z", "updated_at": "2018-07-15T15:58:11Z", "closed_at": "2018-07-15T15:58:11Z", "author_association": "OWNER", "active_lock_reason": null, "body": "For projects where you think that your SQL expression is not portable, and really do not care about supporting the other database.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/2", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/2/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/2/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/2", "id": 248334761, "node_id": "MDU6SXNzdWUyNDgzMzQ3NjE=", "number": 2, "title": "\"unique\" and \"where\" parameters are not used for index equality comparison and name generation.", "user": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 662639229, "node_id": "MDU6TGFiZWw2NjI2MzkyMjk=", "url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-08-07T07:59:39Z", "updated_at": "2017-08-07T08:29:53Z", "closed_at": "2017-08-07T08:29:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This can cause issues when you add multiple indexes with the same fields list.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/1", "repository_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index", "labels_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/1/comments", "events_url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/issues/1/events", "html_url": "https://github.com/mattiaslinnap/django-partial-index/issues/1", "id": 248327298, "node_id": "MDU6SXNzdWUyNDgzMjcyOTg=", "number": 1, "title": "Allow adding separate where='sql expression' for PostgreSQL and SQLite", "user": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 662639231, "node_id": "MDU6TGFiZWw2NjI2MzkyMzE=", "url": "https://api.github.com/repos/mattiaslinnap/django-partial-index/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mattiaslinnap", "id": 315310, "node_id": "MDQ6VXNlcjMxNTMxMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/315310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiaslinnap", "html_url": "https://github.com/mattiaslinnap", "followers_url": "https://api.github.com/users/mattiaslinnap/followers", "following_url": "https://api.github.com/users/mattiaslinnap/following{/other_user}", "gists_url": "https://api.github.com/users/mattiaslinnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiaslinnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiaslinnap/subscriptions", "organizations_url": "https://api.github.com/users/mattiaslinnap/orgs", "repos_url": "https://api.github.com/users/mattiaslinnap/repos", "events_url": "https://api.github.com/users/mattiaslinnap/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiaslinnap/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-08-07T07:21:53Z", "updated_at": "2017-08-07T10:12:14Z", "closed_at": "2017-08-07T10:11:54Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The where='sql expression' is inserted directly into the CREATE INDEX statement when a migration runs. It must be valid for the currently active database backend.\r\n\r\nWhile the django-partial-index project supports both PostgreSQL and SQLite, they have slightly different expected syntax for some expressions.\r\n\r\nIn a particularly common case, they differ in valid boolean literals: SQLite only accepts 0 and 1 as numbers, and PostgreSQL only accepts TRUE, FALSE and a few string values: https://www.postgresql.org/docs/9.1/static/datatype-boolean.html\r\n\r\nThis means that where-expressions for the common case of filtering on a boolean flag need two different expressions in a project that uses PostgreSQL in production and SQLite in testing.\r\n\r\nProposed solution:\r\n* where='' is used for both backends,\r\n* where_postgresql='' and where_sqlite='' can be used instead to provide different expressions,\r\n* Only one of them can be provided if the developer is not aiming to support both backends,\r\n* It's up to the developer to ensure that their behaviour is identical,\r\n* For consistency, where='' cannot be used if either or both where_<vendor>='' are provided,\r\n* For consistency, where_<vendor>='' expressions must be different; if they are identical you must use where=''.", "performed_via_github_app": null, "score": 1.0}]}