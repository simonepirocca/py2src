{"total_count": 122, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/277", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/277/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/277/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/277/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/277", "id": 677119331, "node_id": "MDU6SXNzdWU2NzcxMTkzMzE=", "number": 277, "title": "Missing link in docs for hashivault_aws_auth_config_module", "user": {"login": "maishiroma", "id": 19522250, "node_id": "MDQ6VXNlcjE5NTIyMjUw", "avatar_url": "https://avatars3.githubusercontent.com/u/19522250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maishiroma", "html_url": "https://github.com/maishiroma", "followers_url": "https://api.github.com/users/maishiroma/followers", "following_url": "https://api.github.com/users/maishiroma/following{/other_user}", "gists_url": "https://api.github.com/users/maishiroma/gists{/gist_id}", "starred_url": "https://api.github.com/users/maishiroma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maishiroma/subscriptions", "organizations_url": "https://api.github.com/users/maishiroma/orgs", "repos_url": "https://api.github.com/users/maishiroma/repos", "events_url": "https://api.github.com/users/maishiroma/events{/privacy}", "received_events_url": "https://api.github.com/users/maishiroma/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-11T18:58:34Z", "updated_at": "2020-08-18T01:10:56Z", "closed_at": "2020-08-18T01:10:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not sure if this is the right place to ask this, since the docs seem to be in a private repository? Regardless, I noticed that in the main module page for this Ansible module: https://terryhowe.github.io/ansible-modules-hashivault/modules/list_of_hashivault_modules.html, there is a broken link for `hashivault_aws_auth_config_module`. \r\n\r\n![Screen Shot 2020-08-11 at 11 54 09 AM](https://user-images.githubusercontent.com/19522250/89937133-88e77100-dbc9-11ea-95ad-b34138a24dce.png)\r\n\r\nThankfully, that page still exists if you edit the url to to said module: https://terryhowe.github.io/ansible-modules-hashivault/modules/hashivault_aws_auth_config_module. However, it seems that the title has a mistypo:\r\n```\r\nhashivault_aws_auth_role_create \u2013 Hashicorp Vault aws auth configure module\r\n```\r\n\r\nwhen it should say:\r\n```\r\nhashivault_aws_auth_config \u2013 Hashicorp Vault aws auth configure module\r\n```\r\n\r\nNot sure if that has anything to do with the broken link, but it is something that I found a little troubling when finding documentation for AWS auth for this Ansible module.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/275", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/275/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/275/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/275", "id": 673968707, "node_id": "MDU6SXNzdWU2NzM5Njg3MDc=", "number": 275, "title": "Hashivault write module does not support check and set parameter", "user": {"login": "bharathrajbk", "id": 20235145, "node_id": "MDQ6VXNlcjIwMjM1MTQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/20235145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bharathrajbk", "html_url": "https://github.com/bharathrajbk", "followers_url": "https://api.github.com/users/bharathrajbk/followers", "following_url": "https://api.github.com/users/bharathrajbk/following{/other_user}", "gists_url": "https://api.github.com/users/bharathrajbk/gists{/gist_id}", "starred_url": "https://api.github.com/users/bharathrajbk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bharathrajbk/subscriptions", "organizations_url": "https://api.github.com/users/bharathrajbk/orgs", "repos_url": "https://api.github.com/users/bharathrajbk/repos", "events_url": "https://api.github.com/users/bharathrajbk/events{/privacy}", "received_events_url": "https://api.github.com/users/bharathrajbk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-06T02:34:23Z", "updated_at": "2020-08-19T02:30:29Z", "closed_at": "2020-08-19T02:30:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am trying to use hashivault write module to write secret into a Version 2 of Key value store. That has [check and set parameter](https://learn.hashicorp.com/tutorials/vault/versioned-kv) checked.\r\n\r\nThe module fails since, it needs to set the cas: (int) to the version (for example 0, 1)\r\n\r\nCan I please request that the module be upgraded to include this feature?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/265", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/265/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/265/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/265/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/265", "id": 650612278, "node_id": "MDU6SXNzdWU2NTA2MTIyNzg=", "number": 265, "title": "OIDC auth method config does not work if oidc_client_secret changed", "user": {"login": "lvisterin", "id": 59868517, "node_id": "MDQ6VXNlcjU5ODY4NTE3", "avatar_url": "https://avatars0.githubusercontent.com/u/59868517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lvisterin", "html_url": "https://github.com/lvisterin", "followers_url": "https://api.github.com/users/lvisterin/followers", "following_url": "https://api.github.com/users/lvisterin/following{/other_user}", "gists_url": "https://api.github.com/users/lvisterin/gists{/gist_id}", "starred_url": "https://api.github.com/users/lvisterin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lvisterin/subscriptions", "organizations_url": "https://api.github.com/users/lvisterin/orgs", "repos_url": "https://api.github.com/users/lvisterin/repos", "events_url": "https://api.github.com/users/lvisterin/events{/privacy}", "received_events_url": "https://api.github.com/users/lvisterin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-03T13:53:38Z", "updated_at": "2020-08-21T14:57:16Z", "closed_at": "2020-08-21T14:57:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I found an issue with the `oidc_auth_method_config` module. If you change the `oidc_client_secret` client secret, the module cannot detect a change and will not make an API request to Vault.\r\n\r\nThis is because `vault read auth/oidc/config`, which is used to check for changes, does not return the client secret.\r\n\r\nI am not aware of a good way to really solve this while keeping change detection. \r\n\r\nWe worked around this by overriding `changed = True` in the module so that it always makes the request. I think sacrificing change detection is worth it to make this work more reliably, what is your opinion?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/264", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/264/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/264/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/264/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/264", "id": 647639325, "node_id": "MDU6SXNzdWU2NDc2MzkzMjU=", "number": 264, "title": "hashivault_approle_role_create token type parameter missing", "user": {"login": "ashwinkupatkar", "id": 25248596, "node_id": "MDQ6VXNlcjI1MjQ4NTk2", "avatar_url": "https://avatars2.githubusercontent.com/u/25248596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashwinkupatkar", "html_url": "https://github.com/ashwinkupatkar", "followers_url": "https://api.github.com/users/ashwinkupatkar/followers", "following_url": "https://api.github.com/users/ashwinkupatkar/following{/other_user}", "gists_url": "https://api.github.com/users/ashwinkupatkar/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashwinkupatkar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashwinkupatkar/subscriptions", "organizations_url": "https://api.github.com/users/ashwinkupatkar/orgs", "repos_url": "https://api.github.com/users/ashwinkupatkar/repos", "events_url": "https://api.github.com/users/ashwinkupatkar/events{/privacy}", "received_events_url": "https://api.github.com/users/ashwinkupatkar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-29T20:20:31Z", "updated_at": "2020-08-20T12:35:43Z", "closed_at": "2020-08-20T12:35:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nIf i want to configure approle to generate batch tokens or periodic tokens on demand . \r\n\r\nI do not see a provision for the same ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/262", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/262/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/262/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/262/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/262", "id": 636993500, "node_id": "MDU6SXNzdWU2MzY5OTM1MDA=", "number": 262, "title": "Import Vault intermediate certificate signed by Vault root CA", "user": {"login": "tomasodehnal", "id": 62995026, "node_id": "MDQ6VXNlcjYyOTk1MDI2", "avatar_url": "https://avatars3.githubusercontent.com/u/62995026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomasodehnal", "html_url": "https://github.com/tomasodehnal", "followers_url": "https://api.github.com/users/tomasodehnal/followers", "following_url": "https://api.github.com/users/tomasodehnal/following{/other_user}", "gists_url": "https://api.github.com/users/tomasodehnal/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomasodehnal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomasodehnal/subscriptions", "organizations_url": "https://api.github.com/users/tomasodehnal/orgs", "repos_url": "https://api.github.com/users/tomasodehnal/repos", "events_url": "https://api.github.com/users/tomasodehnal/events{/privacy}", "received_events_url": "https://api.github.com/users/tomasodehnal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-11T12:59:23Z", "updated_at": "2020-06-12T08:50:39Z", "closed_at": "2020-06-11T17:28:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm starting with Vault in Ansible and ran into this awesome module. Thanks for all the effort.\r\n\r\nI'm trying to set up root and intermediate CA in Vault using the module and found out I'm unable to import the signed intermediate CA cert. The module hashivault_pki_ca_set mentions:\r\n_Not needed if you are generating a self-signed root certificate, and not used if you have a signed intermediate CA certificate with a generated key (use the /pki/intermediate/set-signed endpoint for that). If you have already set a certificate and key, they will be overridden._\r\n\r\nAm I supposed to call that outside of the module, using curl for example?\r\n\r\nThanks in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/258", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/258/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/258/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/258", "id": 625977790, "node_id": "MDU6SXNzdWU2MjU5Nzc3OTA=", "number": 258, "title": "Fail to verify SSL cert - requests.exceptions.SSLError", "user": {"login": "tmiroslav", "id": 42550141, "node_id": "MDQ6VXNlcjQyNTUwMTQx", "avatar_url": "https://avatars3.githubusercontent.com/u/42550141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiroslav", "html_url": "https://github.com/tmiroslav", "followers_url": "https://api.github.com/users/tmiroslav/followers", "following_url": "https://api.github.com/users/tmiroslav/following{/other_user}", "gists_url": "https://api.github.com/users/tmiroslav/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiroslav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiroslav/subscriptions", "organizations_url": "https://api.github.com/users/tmiroslav/orgs", "repos_url": "https://api.github.com/users/tmiroslav/repos", "events_url": "https://api.github.com/users/tmiroslav/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiroslav/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-27T19:38:52Z", "updated_at": "2020-08-21T14:57:16Z", "closed_at": "2020-08-21T14:57:16Z", "author_association": "NONE", "active_lock_reason": null, "body": " After enabling TLS in VAULT I am running into issue where it fails to verify SSL. I have been trying to set REQUESTS_CA_BUNDLE env variable as mentioned (https://hvac.readthedocs.io/en/v0.6.4/advanced_usage.html#making-use-of-private-ca), but have not managed to make it work.  Do you have any advice what should be done? Below is error I get when run hashivault_secret_list module.\r\n\r\n`An exception occurred during task execution. To see the full traceback, use -vvv. The error was: requests.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:579)\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/root/.ansible/tmp/ansible-tmp-1590607123.88-1303-259038520701818/AnsiballZ_hashivault_secret_list.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/root/.ansible/tmp/ansible-tmp-1590607123.88-1303-259038520701818/AnsiballZ_hashivault_secret_list.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/root/.ansible/tmp/ansible-tmp-1590607123.88-1303-259038520701818/AnsiballZ_hashivault_secret_list.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.hashivault.hashivault_secret_list', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/lib64/python2.7/runpy.py\\\", line 176, in run_module\\n    fname, loader, pkg_name)\\n  File \\\"/usr/lib64/python2.7/runpy.py\\\", line 82, in _run_module_code\\n    mod_name, mod_fname, mod_loader, pkg_name)\\n  File \\\"/usr/lib64/python2.7/runpy.py\\\", line 72, in _run_code\\n    exec code in run_globals\\n  File \\\"/tmp/ansible_hashivault_secret_list_payload_6ckeJ8/ansible_hashivault_secret_list_payload.zip/ansible/modules/hashivault/hashivault_secret_list.py\\\", line 46, in <module>\\n  File \\\"/tmp/ansible_hashivault_secret_list_payload_6ckeJ8/ansible_hashivault_secret_list_payload.zip/ansible/modules/hashivault/hashivault_secret_list.py\\\", line 29, in main\\n  File \\\"/tmp/ansible_hashivault_secret_list_payload_6ckeJ8/ansible_hashivault_secret_list_payload.zip/ansible/module_utils/hashivault.py\\\", line 127, in wrapper\\n  File \\\"/tmp/ansible_hashivault_secret_list_payload_6ckeJ8/ansible_hashivault_secret_list_payload.zip/ansible/modules/hashivault/hashivault_secret_list.py\\\", line 39, in hashivault_secret_list\\n  File \\\"/usr/lib/python2.7/site-packages/hvac/api/system_backend/mount.py\\\", line 16, in list_mounted_secrets_engines\\n    return self._adapter.get('/v1/sys/mounts')\\n  File \\\"/usr/lib/python2.7/site-packages/hvac/adapters.py\\\", line 94, in get\\n    return self.request('get', url, **kwargs)\\n  File \\\"/usr/lib/python2.7/site-packages/hvac/adapters.py\\\", line 342, in request\\n    response = super(JSONAdapter, self).request(*args, **kwargs)\\n  File \\\"/usr/lib/python2.7/site-packages/hvac/adapters.py\\\", line 292, in request\\n    **_kwargs\\n  File \\\"/usr/lib/python2.7/site-packages/requests/sessions.py\\\", line 464, in request\\n    resp = self.send(prep, **send_kwargs)\\n  File \\\"/usr/lib/python2.7/site-packages/requests/sessions.py\\\", line 576, in send\\n    r = adapter.send(request, **kwargs)\\n  File \\\"/usr/lib/python2.7/site-packages/requests/adapters.py\\\", line 431, in send\\n    raise SSLError(e, request=request)\\nrequests.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:579)\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/256", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/256/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/256/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/256", "id": 624753011, "node_id": "MDU6SXNzdWU2MjQ3NTMwMTE=", "number": 256, "title": "MODULE FAILURE - hashivault_pki_ca_set <Response [204]>", "user": {"login": "tiagoposse", "id": 2262091, "node_id": "MDQ6VXNlcjIyNjIwOTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2262091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiagoposse", "html_url": "https://github.com/tiagoposse", "followers_url": "https://api.github.com/users/tiagoposse/followers", "following_url": "https://api.github.com/users/tiagoposse/following{/other_user}", "gists_url": "https://api.github.com/users/tiagoposse/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiagoposse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiagoposse/subscriptions", "organizations_url": "https://api.github.com/users/tiagoposse/orgs", "repos_url": "https://api.github.com/users/tiagoposse/repos", "events_url": "https://api.github.com/users/tiagoposse/events{/privacy}", "received_events_url": "https://api.github.com/users/tiagoposse/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-26T09:49:55Z", "updated_at": "2020-05-26T16:24:06Z", "closed_at": "2020-05-26T16:24:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nFirst of all thanks for the amazing work! This halved (at least!) the amount of code I had to use to interact with vault.\r\n\r\nI am however, seeing an error that looks exactly like #238, but this time with the module hashivault_pki_ca_set, added on 4.5.0. AS such, the proposed solution of updating to 4.4.7 won't work.\r\n\r\nI tested the same call via curl and confirmed the api call \"pki/config/ca\" is not expected to return any data on success.\r\n\r\nI'm currently using the following versions:\r\n- ansible-modules-hashivault 4.5.1\r\n- vault 1.4.2\r\n- hvac 0.10.3\r\n\r\nstacktrace below:\r\n`\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: TypeError: Value of unknown type: <class 'requests.models.Response'>, <Response [204]>\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/<redacted_home>/.ansible/tmp/ansible-tmp-1590486227.999131-51553-143437930391410/AnsiballZ_hashivault_pki_ca_set.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/<redacted_home>/.ansible/tmp/ansible-tmp-1590486227.999131-51553-143437930391410/AnsiballZ_hashivault_pki_ca_set.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/<redacted_home>/.ansible/tmp/ansible-tmp-1590486227.999131-51553-143437930391410/AnsiballZ_hashivault_pki_ca_set.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.hashivault.hashivault_pki_ca_set', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/runpy.py\\\", line 205, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/runpy.py\\\", line 96, in _run_module_code\\n    mod_name, mod_spec, pkg_name, script_name)\\n  File \\\"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/runpy.py\\\", line 85, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/var/folders/zy/738v4p796hd9rwsgvrz1zjg00000gn/T/ansible_hashivault_pki_ca_set_payload_r9in23d8/ansible_hashivault_pki_ca_set_payload.zip/ansible/modules/hashivault/hashivault_pki_ca_set.py\\\", line 80, in <module>\\n  File \\\"/var/folders/zy/738v4p796hd9rwsgvrz1zjg00000gn/T/ansible_hashivault_pki_ca_set_payload_r9in23d8/ansible_hashivault_pki_ca_set_payload.zip/ansible/modules/hashivault/hashivault_pki_ca_set.py\\\", line 57, in main\\n  File \\\"/var/folders/zy/738v4p796hd9rwsgvrz1zjg00000gn/T/ansible_hashivault_pki_ca_set_payload_r9in23d8/ansible_hashivault_pki_ca_set_payload.zip/ansible/module_utils/basic.py\\\", line 2071, in exit_json\\n  File \\\"/var/folders/zy/738v4p796hd9rwsgvrz1zjg00000gn/T/ansible_hashivault_pki_ca_set_payload_r9in23d8/ansible_hashivault_pki_ca_set_payload.zip/ansible/module_utils/basic.py\\\", line 2064, in _return_formatted\\n  File \\\"/var/folders/zy/738v4p796hd9rwsgvrz1zjg00000gn/T/ansible_hashivault_pki_ca_set_payload_r9in23d8/ansible_hashivault_pki_ca_set_payload.zip/ansible/module_utils/basic.py\\\", line 418, in remove_values\\n  File \\\"/var/folders/zy/738v4p796hd9rwsgvrz1zjg00000gn/T/ansible_hashivault_pki_ca_set_payload_r9in23d8/ansible_hashivault_pki_ca_set_payload.zip/ansible/module_utils/basic.py\\\", line 401, in _remove_values_conditions\\nTypeError: Value of unknown type: <class 'requests.models.Response'>, <Response [204]>\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\n`\r\n\r\nModule call:\r\n```\r\n- name: Submit root cert\r\n  hashivault_pki_ca_set:\r\n    token: \"{{ token }}\"\r\n    pem_bundle: |-\r\n      {{ lookup('file', data_dir + '/vault/certs/vault-ca.key') }}\r\n      {{ lookup('file', data_dir + '/vault/certs/vault-ca_chain.crt') }}\r\n```\r\n\r\nHappy to provide more information if necessary.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/247", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/247/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/247/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/247/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/247", "id": 617096571, "node_id": "MDU6SXNzdWU2MTcwOTY1NzE=", "number": 247, "title": "Modules report changed due to type mismatch", "user": {"login": "jamielennox", "id": 416057, "node_id": "MDQ6VXNlcjQxNjA1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/416057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamielennox", "html_url": "https://github.com/jamielennox", "followers_url": "https://api.github.com/users/jamielennox/followers", "following_url": "https://api.github.com/users/jamielennox/following{/other_user}", "gists_url": "https://api.github.com/users/jamielennox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamielennox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamielennox/subscriptions", "organizations_url": "https://api.github.com/users/jamielennox/orgs", "repos_url": "https://api.github.com/users/jamielennox/repos", "events_url": "https://api.github.com/users/jamielennox/events{/privacy}", "received_events_url": "https://api.github.com/users/jamielennox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-13T02:43:24Z", "updated_at": "2020-05-13T14:51:22Z", "closed_at": "2020-05-13T14:49:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Me again, I promise i'm doing this to help not be a pain :) \r\n\r\nSo this is kind of an inbuilt problem with ansible, but I _think_ it might be something that can be worked around. There are a lot of places where vault expects and returns an integer value. The ones that are getting me at the moment are all the TTLs in certificates. However due to the way jinja works ansible generally only templates out strings.\r\n\r\nTaking a new-ish example: \r\n\r\n```\r\n- hosts: localhost\r\n  tasks:\r\n    - hashivault_pki_role:\r\n        name: tester\r\n        config:\r\n          allow_subdomains: true\r\n          ttl: 3600\r\n```\r\n\r\nthis should work because the ttl is an integer and the values returned by the vault APIs are integers, if i put that into a loop though: \r\n\r\n```\r\n- hosts: localhost\r\n  tasks:\r\n    - hashivault_pki_role:\r\n        name: \"{{ item.name }}\"\r\n        config:\r\n          allow_subdomains: \"{{ item.allow_subdomains | default(omit) }}\"\r\n          ttl: \"{{ item.ttl | default('3600') }}\"\r\n      loop: \"{{ roles }}\"\r\n```\r\n\r\nThis will always return changed and update because the ttl value is a string, being compared to an integer even though the value is the same. \r\n\r\nThere is actually a relatively new feature on the ansible side that can let a jinja value be templated and return a non-string type: https://docs.ansible.com/ansible/latest/reference_appendices/config.html#default-jinja2-native but it's not really ideal to set that at the cfg level. \r\n\r\nI think the easiest way to fix this would be to cast everything to strings in the compare function? Or at least check if the return value is a native type (int, float, ?) and then cast both sides to string before doing the check? \r\n\r\nNote: i'm typing this directly into the bug, so my examples probably don't work perfectly, but hopefully show the problem.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/244", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/244/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/244/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/244/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/244", "id": 613894075, "node_id": "MDU6SXNzdWU2MTM4OTQwNzU=", "number": 244, "title": "Don't use list to validate existence", "user": {"login": "jamielennox", "id": 416057, "node_id": "MDQ6VXNlcjQxNjA1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/416057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamielennox", "html_url": "https://github.com/jamielennox", "followers_url": "https://api.github.com/users/jamielennox/followers", "following_url": "https://api.github.com/users/jamielennox/following{/other_user}", "gists_url": "https://api.github.com/users/jamielennox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamielennox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamielennox/subscriptions", "organizations_url": "https://api.github.com/users/jamielennox/orgs", "repos_url": "https://api.github.com/users/jamielennox/repos", "events_url": "https://api.github.com/users/jamielennox/events{/privacy}", "received_events_url": "https://api.github.com/users/jamielennox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-07T09:04:19Z", "updated_at": "2020-05-13T14:10:11Z", "closed_at": "2020-05-11T13:46:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is biting in a number of places, but most recently: https://github.com/TerryHowe/ansible-modules-hashivault/blob/c97a39260162aa5dd8a5bbb4e05d10098f0f0a19/ansible/modules/hashivault/hashivault_k8s_auth_role.py#L104-L113 \r\n\r\nPlease let's not use in list to validate that something exists. It means that the automation tool I'm using now need to have `read` and `list` on `sys/auth` which given we're using the open source version (no namespaces) is more than my devops team wants to allow for this tool. \r\n\r\nTo check existence lets just try and read the object, it's fair to think if i have write of that object I also have read of the same path. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/243", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/243/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/243/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/243/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/243", "id": 613394876, "node_id": "MDU6SXNzdWU2MTMzOTQ4NzY=", "number": 243, "title": "Module ignores the no_log parameter when using env variables", "user": {"login": "stokkie90", "id": 10831825, "node_id": "MDQ6VXNlcjEwODMxODI1", "avatar_url": "https://avatars0.githubusercontent.com/u/10831825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stokkie90", "html_url": "https://github.com/stokkie90", "followers_url": "https://api.github.com/users/stokkie90/followers", "following_url": "https://api.github.com/users/stokkie90/following{/other_user}", "gists_url": "https://api.github.com/users/stokkie90/gists{/gist_id}", "starred_url": "https://api.github.com/users/stokkie90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stokkie90/subscriptions", "organizations_url": "https://api.github.com/users/stokkie90/orgs", "repos_url": "https://api.github.com/users/stokkie90/repos", "events_url": "https://api.github.com/users/stokkie90/events{/privacy}", "received_events_url": "https://api.github.com/users/stokkie90/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-06T15:07:49Z", "updated_at": "2020-08-12T20:01:20Z", "closed_at": "2020-08-12T20:01:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running ansible/awx using this module we can see the role_id/secret_id or the token in plain text. This is only when using the environment. The defaults in the `hashivault_argspec` definition in `module_utils/hashivault.py`:\r\n\r\n```\r\n        token=dict(required=False, default=hashivault_default_token(), type='str', no_log=True),\r\n        password=dict(required=False, default=os.environ.get('VAULT_PASSWORD', ''), type='str', no_log=True),\r\n        role_id=dict(required=False, default=os.environ.get('VAULT_ROLE_ID', ''), type='str', no_log=True),\r\n        secret_id=dict(required=False, default=os.environ.get('VAULT_SECRET_ID', ''), type='str', no_log=True),\r\n        aws_header=dict(required=False, default=os.environ.get('VAULT_AWS_HEADER', ''), type='str', no_log=True),\r\n```\r\n\r\nI'm not sure if this is default for ansible modules but seems quite strange. \r\n\r\nWhen specifying `token: \"{{ lookup('env', 'VAULT_TOKEN') }}\"` for example then it will output  `VALUE_SPECIFIED_IN_NO_LOG_PARAMETER`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/241", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/241/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/241/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/241/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/241", "id": 612406721, "node_id": "MDU6SXNzdWU2MTI0MDY3MjE=", "number": 241, "title": "ansible-doc error", "user": {"login": "chicuongha", "id": 21046106, "node_id": "MDQ6VXNlcjIxMDQ2MTA2", "avatar_url": "https://avatars0.githubusercontent.com/u/21046106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chicuongha", "html_url": "https://github.com/chicuongha", "followers_url": "https://api.github.com/users/chicuongha/followers", "following_url": "https://api.github.com/users/chicuongha/following{/other_user}", "gists_url": "https://api.github.com/users/chicuongha/gists{/gist_id}", "starred_url": "https://api.github.com/users/chicuongha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chicuongha/subscriptions", "organizations_url": "https://api.github.com/users/chicuongha/orgs", "repos_url": "https://api.github.com/users/chicuongha/repos", "events_url": "https://api.github.com/users/chicuongha/events{/privacy}", "received_events_url": "https://api.github.com/users/chicuongha/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-05-05T07:47:45Z", "updated_at": "2020-05-08T20:18:48Z", "closed_at": "2020-05-08T20:18:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello\r\n\r\nI'm using virtualenv and got error with ansible-doc hashivault_*\r\nHowever ansible-doc -l | grep hashivault sucess list all hashivault modules\r\n```\r\n$ ansible-doc hashivault_write\r\nERROR! module hashivault_write missing documentation (or could not parse documentation): unknown doc_fragment(s) in file /home/cloud-user/.virtualenvs/py3_ansible/lib/python3.8/site-packages/ansible/modules/hashivault/hashivault_write.py: hashivault\r\n\r\n# pip list\r\nPackage                    Version\r\n-------------------------- ----------\r\nansible                    2.9.7\r\nansible-lint               4.2.0\r\nansible-modules-hashivault 4.5.0\r\ncertifi                    2020.4.5.1\r\ncffi                       1.14.0\r\nchardet                    3.0.4\r\ncryptography               2.9.2\r\nhvac                       0.10.1\r\nidna                       2.9\r\nJinja2                     2.11.2\r\njmespath                   0.9.5\r\nMarkupSafe                 1.1.1\r\npip                        20.1\r\npycparser                  2.20\r\nPyYAML                     5.3.1\r\nrequests                   2.23.0\r\nruamel.yaml                0.16.10\r\nruamel.yaml.clib           0.2.0\r\nsetuptools                 46.1.3\r\nsix                        1.14.0\r\nurllib3                    1.25.9\r\nwheel                      0.34.2\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/239", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/239/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/239/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/239/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/239", "id": 609876363, "node_id": "MDU6SXNzdWU2MDk4NzYzNjM=", "number": 239, "title": "[ bug ] hashivault_secret_engine fails if description was provided ", "user": {"login": "DrMagPie", "id": 23652900, "node_id": "MDQ6VXNlcjIzNjUyOTAw", "avatar_url": "https://avatars0.githubusercontent.com/u/23652900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrMagPie", "html_url": "https://github.com/DrMagPie", "followers_url": "https://api.github.com/users/DrMagPie/followers", "following_url": "https://api.github.com/users/DrMagPie/following{/other_user}", "gists_url": "https://api.github.com/users/DrMagPie/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrMagPie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrMagPie/subscriptions", "organizations_url": "https://api.github.com/users/DrMagPie/orgs", "repos_url": "https://api.github.com/users/DrMagPie/repos", "events_url": "https://api.github.com/users/DrMagPie/events{/privacy}", "received_events_url": "https://api.github.com/users/DrMagPie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-30T11:56:43Z", "updated_at": "2020-04-30T16:54:08Z", "closed_at": "2020-04-30T13:37:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Vault 1.4.0 started to return description in data object\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/7dfeb8eb0a161e526d4a22e57add351eaa3e8f97/ansible/modules/hashivault/hashivault_secret_engine.py#L89-L90\r\n\r\n```\r\n- name: \"Enable {{ outer_item.path }} KV Secrets Engine\"\r\n  run_once: true\r\n  delegate_to: localhost\r\n  hashivault_secret_engine:\r\n    name: \"my_cool_kv\"\r\n    backend: \"kv\"\r\n    description: \"testing\"\r\n```\r\nIf description was provided it will be in that object and execution will fail with error\r\n```\r\nfatal: [localhost -> localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"rc\": 1\r\n}\r\n\r\nMSG:\r\n\r\nException: u'description'\r\n```\r\nif we will move it to config objet \r\n```\r\n- name: \"Enable {{ outer_item.path }} KV Secrets Engine\"\r\n  run_once: true\r\n  delegate_to: localhost\r\n  hashivault_secret_engine:\r\n    name: \"my_cool_kv\"\r\n    backend: \"kv\"\r\n    config:\r\n        default_lease_ttl: 2764800\r\n        max_lease_ttl: 2764800\r\n        force_no_cache: false\r\n        description: Concourse Platform secrets across the teams\r\n```\r\nthen it fails with following error \r\n\r\n```\r\nfatal: [localhost -> localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"rc\": 1\r\n}\r\n\r\nMSG:\r\n\r\nException: tune_mount_configuration() got multiple values for keyword argument 'description'\r\n```\r\n\r\n\r\nnew data structure\r\n```json\r\n{\r\n  \"max_lease_ttl\": 2764800,\r\n  \"lease_id\": \"\",\r\n  \"force_no_cache\": false,\r\n  \"description\": \"Concourse Platform secrets across the teams\",\r\n  \"warnings\": null,\r\n  \"data\": {\r\n    \"force_no_cache\": false,\r\n    \"options\": {\r\n      \"version\": \"1\"\r\n    },\r\n    \"default_lease_ttl\": 2764800,\r\n    \"description\": \"Concourse Platform secrets across the teams\",\r\n    \"max_lease_ttl\": 2764800\r\n  },\r\n  \"wrap_info\": null,\r\n  \"auth\": null,\r\n  \"lease_duration\": 0,\r\n  \"request_id\": \"9c663e1e-7d61-b3b0-9dd5-9e395c91ac56\",\r\n  \"default_lease_ttl\": 2764800,\r\n  \"options\": {\r\n    \"version\": \"1\"\r\n  },\r\n  \"renewable\": false\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/238", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/238/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/238/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/238", "id": 609772570, "node_id": "MDU6SXNzdWU2MDk3NzI1NzA=", "number": 238, "title": "MODULE FAILURE - TypeError: Value of unknown type: <class 'requests.models.Response'>, <Response [204]>", "user": {"login": "hparashu", "id": 46400851, "node_id": "MDQ6VXNlcjQ2NDAwODUx", "avatar_url": "https://avatars2.githubusercontent.com/u/46400851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hparashu", "html_url": "https://github.com/hparashu", "followers_url": "https://api.github.com/users/hparashu/followers", "following_url": "https://api.github.com/users/hparashu/following{/other_user}", "gists_url": "https://api.github.com/users/hparashu/gists{/gist_id}", "starred_url": "https://api.github.com/users/hparashu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hparashu/subscriptions", "organizations_url": "https://api.github.com/users/hparashu/orgs", "repos_url": "https://api.github.com/users/hparashu/repos", "events_url": "https://api.github.com/users/hparashu/events{/privacy}", "received_events_url": "https://api.github.com/users/hparashu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-30T09:52:06Z", "updated_at": "2020-05-04T08:16:04Z", "closed_at": "2020-05-03T13:29:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am seeing module failure while using hashivault_write module. \r\n\r\nAnsible - Python - OpenSSH version on Ansible Node ;\r\n`root@35f3dfdc476f:playbooks # ansible --version\r\nansible 2.9.2\r\n  config file = /root/galorndon-infra/playbooks/ansible.cfg\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /py36env/lib64/python3.6/site-packages/ansible\r\n  executable location = /py36env/bin/ansible\r\n  python version = 3.6.8 (default, Aug  7 2019, 08:02:28) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39.0.1)]\r\nroot@35f3dfdc476f:playbooks #\r\nroot@35f3dfdc476f:playbooks #\r\nroot@35f3dfdc476f:playbooks # \r\nroot@6193af66d482:playbooks # rpm -qa  |grep -i openssh\r\nopenssh-7.4p1-21.el7.x86_64\r\nopenssh-clients-7.4p1-21.el7.x86_64\r\nroot@6193af66d482:playbooks #`\r\n\r\nAnsible - Python - OpenSSH version on Vault3 VM ;\r\n`[root@vault3 ~]# ansible --version\r\nansible 2.8.4\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Nov 27 2019, 09:57:45) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39.0.1)]\r\n[root@vault3 ~]#\r\n[root@vault3 ~]#\r\n[root@vault3 ~]# rpm -qa  |grep -i openssh\r\nopenssh-7.4p1-21.el7.x86_64\r\nopenssh-clients-7.4p1-21.el7.x86_64\r\nopenssh-server-7.4p1-21.el7.x86_64\r\n[root@vault3 ~]#`\r\n\r\n\r\nPlaybook ;\r\n` root@6193af66d482:playbooks # cat hashivault_write.yml\r\n---\r\n- hosts: \"{{ target_group }}{{ (':&' + availability_domain ) if availability_domain is defined else '' }}\"\r\n  serial: 1\r\n  max_fail_percentage: 30\r\n  become: yes\r\n  vars_files:\r\n    - \"vars/defaults.yml\"\r\n    - \"vars/envs/{{ env }}.yml\"\r\n    - \"vars/regions/{{ region }}.yml\"\r\n\r\n  tasks:\r\n    - name: \"Write Secrets at path /secret/cpe-test\"\r\n      hashivault_write:\r\n        url: 'https://127.0.0.1:8200'\r\n        ca_path: '/etc/pki/ca-trust/source/anchors/cpetestphx_ca.crt'\r\n        token: REDACTED \r\n        secret: 'secret/cpe-test'\r\n        data:\r\n            foo: 'password-foo'\r\n\r\n    - name: \"Return all secrets from a path /secret/cpe-test\"\r\n      debug:\r\n        msg: \"{{ lookup('hashi_vault', 'secret=/secret/cpe-test token=7h4AHyZnXINsBAQ4MqYiNzau url=https://127.0.0.1:8200')}}\"\r\nroot@6193af66d482:playbooks #`\r\n\r\n\r\nModule error when the above playbook is run ;\r\n`root@6193af66d482:playbooks # ansible-playbook  -u opc -i inventories/$ENVIRONMENT.$REGION/oci_inventory.py -e target_group=tag_componentType=vault_server -e target_group=10.5.4.58 -e proxy_is_required=false hashivault_write.yml\r\n[DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will\r\nbe removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.\r\n[WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details\r\n\r\n\r\nPLAY [10.5.4.58] ************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ******************************************************************************************************************************************************************************************\r\nok: [10.5.4.58]\r\n---\r\n\r\nTASK [Write Secrets at path /secret/cpe-test] *******************************************************************************************************************************************************************\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: TypeError: Value of unknown type: <class 'requests.models.Response'>, <Response [204]>\r\nfatal: [10.5.4.58]: FAILED! => {\"changed\": false, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"<stdin>\\\", line 102, in <module>\\n  File \\\"<stdin>\\\", line 94, in _ansiballz_main\\n  File \\\"<stdin>\\\", line 40, in invoke_module\\n  File \\\"/usr/lib64/python2.7/runpy.py\\\", line 176, in run_module\\n    fname, loader, pkg_name)\\n  File \\\"/usr/lib64/python2.7/runpy.py\\\", line 82, in _run_module_code\\n    mod_name, mod_fname, mod_loader, pkg_name)\\n  File \\\"/usr/lib64/python2.7/runpy.py\\\", line 72, in _run_code\\n    exec code in run_globals\\n  File \\\"/tmp/ansible_hashivault_write_payload_A5NErK/ansible_hashivault_write_payload.zip/ansible/modules/hashivault/hashivault_write.py\\\", line 229, in <module>\\n  File \\\"/tmp/ansible_hashivault_write_payload_A5NErK/ansible_hashivault_write_payload.zip/ansible/modules/hashivault/hashivault_write.py\\\", line 109, in main\\n  File \\\"/tmp/ansible_hashivault_write_payload_A5NErK/ansible_hashivault_write_payload.zip/ansible/module_utils/basic.py\\\", line 2072, in exit_json\\n  File \\\"/tmp/ansible_hashivault_write_payload_A5NErK/ansible_hashivault_write_payload.zip/ansible/module_utils/basic.py\\\", line 2065, in _return_formatted\\n  File \\\"/tmp/ansible_hashivault_write_payload_A5NErK/ansible_hashivault_write_payload.zip/ansible/module_utils/basic.py\\\", line 418, in remove_values\\n  File \\\"/tmp/ansible_hashivault_write_payload_A5NErK/ansible_hashivault_write_payload.zip/ansible/module_utils/basic.py\\\", line 401, in _remove_values_conditions\\nTypeError: Value of unknown type: <class 'requests.models.Response'>, <Response [204]>\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\n\r\nNO MORE HOSTS LEFT **********************************************************************************************************************************************************************************************\r\n\r\nNO MORE HOSTS LEFT **********************************************************************************************************************************************************************************************\r\n\r\nPLAY RECAP ******************************************************************************************************************************************************************************************************\r\n10.5.4.58                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nroot@6193af66d482:playbooks #238 `\r\n\r\nAm I missing anything to pass in hashivault_write module or anything else? Though i am able to manually create/list/delete secrets to this vault VM. Please review and suggest. Thanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/236", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/236/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/236/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/236/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/236", "id": 606014457, "node_id": "MDU6SXNzdWU2MDYwMTQ0NTc=", "number": 236, "title": "`hashivault_k8s_auth_config_module` should support `issuer` and `pem_keys`", "user": {"login": "jamielennox", "id": 416057, "node_id": "MDQ6VXNlcjQxNjA1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/416057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamielennox", "html_url": "https://github.com/jamielennox", "followers_url": "https://api.github.com/users/jamielennox/followers", "following_url": "https://api.github.com/users/jamielennox/following{/other_user}", "gists_url": "https://api.github.com/users/jamielennox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamielennox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamielennox/subscriptions", "organizations_url": "https://api.github.com/users/jamielennox/orgs", "repos_url": "https://api.github.com/users/jamielennox/repos", "events_url": "https://api.github.com/users/jamielennox/events{/privacy}", "received_events_url": "https://api.github.com/users/jamielennox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-24T03:34:09Z", "updated_at": "2020-05-12T17:00:19Z", "closed_at": "2020-05-12T17:00:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Optionally when setting up a kubernetes auth method you can provide an `issuer` that is check as the issuer on the JWT token, and `pem_keys` for validating JWTs. These should be configurable on the module. \r\n\r\nhttps://www.vaultproject.io/api/auth/kubernetes#configure-method", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/229", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/229/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/229/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/229/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/229", "id": 602696404, "node_id": "MDU6SXNzdWU2MDI2OTY0MDQ=", "number": 229, "title": "Useless check and potentially broken check ", "user": {"login": "DrMagPie", "id": 23652900, "node_id": "MDQ6VXNlcjIzNjUyOTAw", "avatar_url": "https://avatars0.githubusercontent.com/u/23652900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrMagPie", "html_url": "https://github.com/DrMagPie", "followers_url": "https://api.github.com/users/DrMagPie/followers", "following_url": "https://api.github.com/users/DrMagPie/following{/other_user}", "gists_url": "https://api.github.com/users/DrMagPie/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrMagPie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrMagPie/subscriptions", "organizations_url": "https://api.github.com/users/DrMagPie/orgs", "repos_url": "https://api.github.com/users/DrMagPie/repos", "events_url": "https://api.github.com/users/DrMagPie/events{/privacy}", "received_events_url": "https://api.github.com/users/DrMagPie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-19T11:55:19Z", "updated_at": "2020-04-25T16:14:55Z", "closed_at": "2020-04-25T16:14:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have noticed that in a lot of modules you have following check to strop tailing slash\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/c0a9843a0534885b03ba40c63e8941ba6888a5be/ansible/modules/hashivault/hashivault_k8s_auth_role.py#L99-L100\r\n\r\nit seams completely useless, because that if always evaluates True.\r\nAnd possibly there is no need to perform such checks at all.\r\n `The strip() method returns a copy of the string in which all chars have been stripped from the beginning and the end of the string (default whitespace characters).`\r\n\r\nAnd also this looks like in following place check is miss used:\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/c0a9843a0534885b03ba40c63e8941ba6888a5be/ansible/modules/hashivault/hashivault_k8s_auth_config.py#L77\r\nif we compare it with:\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/c0a9843a0534885b03ba40c63e8941ba6888a5be/ansible/modules/hashivault/hashivault_azure_auth_role.py#L144\r\n\r\nthese try/catch blocks are almost identical but k8s one is missing `...()['data'].keys():`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/222", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/222/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/222/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/222/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/222", "id": 600616522, "node_id": "MDU6SXNzdWU2MDA2MTY1MjI=", "number": 222, "title": "hashivault_auth_ldap imports from hvac.constants.ldap which is removed in hvac 0.10.0", "user": {"login": "jhegarty412", "id": 46856321, "node_id": "MDQ6VXNlcjQ2ODU2MzIx", "avatar_url": "https://avatars2.githubusercontent.com/u/46856321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhegarty412", "html_url": "https://github.com/jhegarty412", "followers_url": "https://api.github.com/users/jhegarty412/followers", "following_url": "https://api.github.com/users/jhegarty412/following{/other_user}", "gists_url": "https://api.github.com/users/jhegarty412/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhegarty412/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhegarty412/subscriptions", "organizations_url": "https://api.github.com/users/jhegarty412/orgs", "repos_url": "https://api.github.com/users/jhegarty412/repos", "events_url": "https://api.github.com/users/jhegarty412/events{/privacy}", "received_events_url": "https://api.github.com/users/jhegarty412/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-15T22:06:50Z", "updated_at": "2020-04-16T15:45:42Z", "closed_at": "2020-04-16T15:45:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1586987775.65-80536902911716/AnsiballZ_hashivault_auth_ldap.py\", line 102, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1586987775.65-80536902911716/AnsiballZ_hashivault_auth_ldap.py\", line 94, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1586987775.65-80536902911716/AnsiballZ_hashivault_auth_ldap.py\", line 40, in invoke_module\r\n    runpy.run_module(mod_name='ansible.modules.hashivault.hashivault_auth_ldap', init_globals=None, run_name='__main__', alter_sys=True)\r\n  File \"/usr/lib64/python2.7/runpy.py\", line 176, in run_module\r\n    fname, loader, pkg_name)\r\n  File \"/usr/lib64/python2.7/runpy.py\", line 82, in _run_module_code\r\n    mod_name, mod_fname, mod_loader, pkg_name)\r\n  File \"/usr/lib64/python2.7/runpy.py\", line 72, in _run_code\r\n    exec code in run_globals\r\n  File \"/var/tmp/ansible_hashivault_auth_ldap_payload_bcTOyf/ansible_hashivault_auth_ldap_payload.zip/ansible/modules/hashivault/hashivault_auth_ldap.py\", line 6, in <module>\r\nImportError: No module named ldap", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/221", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/221/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/221/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/221/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/221", "id": 600168462, "node_id": "MDU6SXNzdWU2MDAxNjg0NjI=", "number": 221, "title": "Path specified without '/' produces error \"Path already in use\"", "user": {"login": "JoostvdB94", "id": 3438285, "node_id": "MDQ6VXNlcjM0MzgyODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3438285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoostvdB94", "html_url": "https://github.com/JoostvdB94", "followers_url": "https://api.github.com/users/JoostvdB94/followers", "following_url": "https://api.github.com/users/JoostvdB94/following{/other_user}", "gists_url": "https://api.github.com/users/JoostvdB94/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoostvdB94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoostvdB94/subscriptions", "organizations_url": "https://api.github.com/users/JoostvdB94/orgs", "repos_url": "https://api.github.com/users/JoostvdB94/repos", "events_url": "https://api.github.com/users/JoostvdB94/events{/privacy}", "received_events_url": "https://api.github.com/users/JoostvdB94/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-15T09:49:38Z", "updated_at": "2020-04-15T21:03:46Z", "closed_at": "2020-04-15T21:03:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "The check for the existance of an audit device will not succeed if an path is specified that does not end with a forward slash. When the path does not already exist, the creation of the audit device is successful. \r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/269b2135bba9d7a7638f37c2876046ed741a8a37/ansible/modules/hashivault/hashivault_audit.py#L120\r\n\r\nTo combat this issue, the `path` parameter should do any of the following: \r\n- check for the slash, and fail accordingly\r\n- append a slash to the path if it does not end with a slash.\r\n- append a slash where the path is checked (see referenced code line)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/219", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/219/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/219/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/219/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/219", "id": 600118545, "node_id": "MDU6SXNzdWU2MDAxMTg1NDU=", "number": 219, "title": "hashivault_read_to_file does a base64 decode.", "user": {"login": "jamielennox", "id": 416057, "node_id": "MDQ6VXNlcjQxNjA1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/416057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamielennox", "html_url": "https://github.com/jamielennox", "followers_url": "https://api.github.com/users/jamielennox/followers", "following_url": "https://api.github.com/users/jamielennox/following{/other_user}", "gists_url": "https://api.github.com/users/jamielennox/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamielennox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamielennox/subscriptions", "organizations_url": "https://api.github.com/users/jamielennox/orgs", "repos_url": "https://api.github.com/users/jamielennox/repos", "events_url": "https://api.github.com/users/jamielennox/events{/privacy}", "received_events_url": "https://api.github.com/users/jamielennox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-15T08:28:27Z", "updated_at": "2020-04-27T02:35:36Z", "closed_at": "2020-04-27T02:35:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the middle of `hashivault_read_to_file` it calls `b64decode`.\r\n\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/259ae6bcac83759442ea59d407841df3a2aa7ab4/ansible/plugins/action/hashivault_read_to_file.py#L74\r\n\r\nThat's an interesting assumption that probably makes sense in one of the secret engines, however it massively messes up trying to fetch things like a CA certficate from a PKI engine. \r\n\r\nWhat's this assumption, can we have a flag that says don't do this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/218", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/218/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/218/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/218/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/218", "id": 599493522, "node_id": "MDU6SXNzdWU1OTk0OTM1MjI=", "number": 218, "title": "enable_audit_device uses name parameter as device_type in hvac", "user": {"login": "JoostvdB94", "id": 3438285, "node_id": "MDQ6VXNlcjM0MzgyODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3438285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoostvdB94", "html_url": "https://github.com/JoostvdB94", "followers_url": "https://api.github.com/users/JoostvdB94/followers", "following_url": "https://api.github.com/users/JoostvdB94/following{/other_user}", "gists_url": "https://api.github.com/users/JoostvdB94/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoostvdB94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoostvdB94/subscriptions", "organizations_url": "https://api.github.com/users/JoostvdB94/orgs", "repos_url": "https://api.github.com/users/JoostvdB94/repos", "events_url": "https://api.github.com/users/JoostvdB94/events{/privacy}", "received_events_url": "https://api.github.com/users/JoostvdB94/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-14T11:18:40Z", "updated_at": "2020-04-14T17:18:40Z", "closed_at": "2020-04-14T17:18:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "The module `hashivault_audit_enable` uses the `name`-parameter for both `device_type` as well as the `path` variable to call the hvac method [`enable_audit_device`](https://hvac.readthedocs.io/en/stable/usage/system_backend/audit.html#enable-audit-device). \r\n\r\nThe parameter `name` does not describe this behaviour. Besides, a person may want to name it's audit log to describe it's use. The `name` parameter description fits the the url mountpoint, but in my opinion not suitable for the `device_type` parameter in `hvac`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/214", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/214/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/214/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/214/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/214", "id": 596688095, "node_id": "MDU6SXNzdWU1OTY2ODgwOTU=", "number": 214, "title": "hashivault_oidc_auth_method_config won't update existing oidc auth config", "user": {"login": "masterphenix", "id": 19638227, "node_id": "MDQ6VXNlcjE5NjM4MjI3", "avatar_url": "https://avatars3.githubusercontent.com/u/19638227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masterphenix", "html_url": "https://github.com/masterphenix", "followers_url": "https://api.github.com/users/masterphenix/followers", "following_url": "https://api.github.com/users/masterphenix/following{/other_user}", "gists_url": "https://api.github.com/users/masterphenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/masterphenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masterphenix/subscriptions", "organizations_url": "https://api.github.com/users/masterphenix/orgs", "repos_url": "https://api.github.com/users/masterphenix/repos", "events_url": "https://api.github.com/users/masterphenix/events{/privacy}", "received_events_url": "https://api.github.com/users/masterphenix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-08T16:00:30Z", "updated_at": "2020-04-16T16:14:19Z", "closed_at": "2020-04-16T16:14:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am using hashivault_oidc_auth_method_config to create / update the oidc auth method config ; each time the task is ran, the oidc_client_secret changes :\r\n```ansible\r\n- name: \"Configure OIDC auth method\"\r\n  hashivault_oidc_auth_method_config:\r\n    url: \"{{ vault_addr }}\"\r\n    token: \"{{ root_token }}\"\r\n    oidc_discovery_url: \"https://login.microsoftonline.com/tenant_id/v2.0\"\r\n    oidc_client_id: \"xxxx-yyy-zzzz\"\r\n    oidc_client_secret: \"mypassword\"\r\n    default_role: \"admin\"\r\n```\r\nFirst time run, this works fine : config is created, and authentication with my azure provider works.\r\nSecond time, though, I get the following error (with -vvvv) :\r\n```\r\nTASK [vault-configure : Configure OIDC auth method] ************************************************************************************************************************************\r\ntask path: /home/sr/git/production/ansible-vault/roles/vault-configure/tasks/main.yml:47\r\n<localhost> ESTABLISH LOCAL CONNECTION FOR USER: sr\r\n<localhost> EXEC /bin/sh -c 'echo ~sr && sleep 0'\r\n<localhost> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909 `\" && echo ansible-tmp-1586361411.34-149731349480909=\"` echo /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909 `\" ) && sleep 0'\r\nUsing module file /usr/local/lib/python2.7/dist-packages/ansible-2.10.0.dev0-py2.7.egg/ansible/modules/hashivault/hashivault_oidc_auth_method_config.py\r\n<localhost> PUT /home/sr/.ansible/tmp/ansible-local-1742QUilwS/tmpV4q9M2 TO /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909/AnsiballZ_hashivault_oidc_auth_method_config.py\r\n<localhost> EXEC /bin/sh -c 'chmod u+x /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909/ /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909/AnsiballZ_hashivault_oidc_auth_method_config.py && sleep 0'\r\n<localhost> EXEC /bin/sh -c '/usr/bin/python /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909/AnsiballZ_hashivault_oidc_auth_method_config.py && sleep 0'\r\n<localhost> EXEC /bin/sh -c 'rm -f -r /home/sr/.ansible/tmp/ansible-tmp-1586361411.34-149731349480909/ > /dev/null 2>&1 && sleep 0'\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"authtype\": \"token\",\r\n            \"bound_issuer\": \"\",\r\n            \"ca_cert\": \"\",\r\n            \"ca_path\": \"\",\r\n            \"client_cert\": \"\",\r\n            \"client_key\": \"\",\r\n            \"default_role\": \"admin\",\r\n            \"jwks_ca_pem\": \"\",\r\n            \"jwks_url\": null,\r\n            \"jwt_supported_algs\": [],\r\n            \"jwt_validation_pubkeys\": [],\r\n            \"mount_point\": \"oidc\",\r\n            \"namespace\": null,\r\n            \"oidc_client_id\": \"xxxx-yyy-zzzz\",\r\n            \"oidc_client_secret\": \"mypassword2\",\r\n            \"oidc_discovery_ca_pem\": \"\",\r\n            \"oidc_discovery_url\": \"https://login.microsoftonline.com/tenant_id/v2.0\",\r\n            \"password\": \"\",\r\n            \"role_id\": \"\",\r\n            \"secret_id\": \"\",\r\n            \"token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"url\": \"https://myvaultaddress.com\",\r\n            \"username\": \"\",\r\n            \"verify\": true\r\n        }\r\n    },\r\n    \"msg\": \"Exception: u'oidc_response_mode'\",\r\n    \"rc\": 1\r\n}\r\n```\r\n\r\nUsing ansible 2.10.0.dev0 with ansible-modules-hashivault installed from pip (today).\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/213", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/213/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/213/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/213/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/213", "id": 596679225, "node_id": "MDU6SXNzdWU1OTY2NzkyMjU=", "number": 213, "title": "hashivault_auth_method not idempotent", "user": {"login": "masterphenix", "id": 19638227, "node_id": "MDQ6VXNlcjE5NjM4MjI3", "avatar_url": "https://avatars3.githubusercontent.com/u/19638227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masterphenix", "html_url": "https://github.com/masterphenix", "followers_url": "https://api.github.com/users/masterphenix/followers", "following_url": "https://api.github.com/users/masterphenix/following{/other_user}", "gists_url": "https://api.github.com/users/masterphenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/masterphenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masterphenix/subscriptions", "organizations_url": "https://api.github.com/users/masterphenix/orgs", "repos_url": "https://api.github.com/users/masterphenix/repos", "events_url": "https://api.github.com/users/masterphenix/events{/privacy}", "received_events_url": "https://api.github.com/users/masterphenix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-08T15:47:23Z", "updated_at": "2020-04-10T07:40:26Z", "closed_at": "2020-04-10T00:02:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I am using the `hashivault_auth_method` module to enable the oidc auth method :\r\n```ansible\r\n- name: \"Enable OIDC auth method\"\r\n  hashivault_auth_method:\r\n    url: \"{{ vault_addr }}\"\r\n    token: \"{{ root_token }}\"\r\n    method_type: oidc\r\n    state: enabled\r\n```\r\nIf I run this task twice, both times the task result is \"changed\" :\r\n```\r\nTASK [vault-configure : Enable OIDC auth method] ******************************\r\nchanged: [localhost]\r\n```\r\n\r\nThe second time, the task should show 'OK' instead.\r\n\r\nI am using ansible 2.10.0.dev0 with ansible-modules-hashivault installed with pip.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/212", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/212/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/212/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/212/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/212", "id": 596522008, "node_id": "MDU6SXNzdWU1OTY1MjIwMDg=", "number": 212, "title": "Probable issue with response from vault api", "user": {"login": "HammerZ3it", "id": 12964578, "node_id": "MDQ6VXNlcjEyOTY0NTc4", "avatar_url": "https://avatars2.githubusercontent.com/u/12964578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HammerZ3it", "html_url": "https://github.com/HammerZ3it", "followers_url": "https://api.github.com/users/HammerZ3it/followers", "following_url": "https://api.github.com/users/HammerZ3it/following{/other_user}", "gists_url": "https://api.github.com/users/HammerZ3it/gists{/gist_id}", "starred_url": "https://api.github.com/users/HammerZ3it/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HammerZ3it/subscriptions", "organizations_url": "https://api.github.com/users/HammerZ3it/orgs", "repos_url": "https://api.github.com/users/HammerZ3it/repos", "events_url": "https://api.github.com/users/HammerZ3it/events{/privacy}", "received_events_url": "https://api.github.com/users/HammerZ3it/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-08T11:56:09Z", "updated_at": "2020-04-14T07:18:10Z", "closed_at": "2020-04-09T20:31:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nI think that there is maybe a problem with how the code handle the response from Vault API.\r\nI am making a write into my vault from ansible and I get an error : \r\n`TypeError: Value of unknown type: <class 'requests.models.Response'>, <Response [204]>`\r\n\r\nWhen I make a call for the secret I write, it is here (from ui or api).\r\nBut the ansible goes on an error (one mentioned earlier).\r\n\r\nFrom the vault documentation : \r\n\r\n> Note: Applications should be prepared to accept both 200 and 204 as success. 204 is simply an indication that there is no response body to parse, but API endpoints that indicate that they return a 204 may return a 200 if warnings are generated during the operation.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/209", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/209/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/209/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/209", "id": 589160715, "node_id": "MDU6SXNzdWU1ODkxNjA3MTU=", "number": 209, "title": "hashivault_auth_method", "user": {"login": "metanovii", "id": 9963998, "node_id": "MDQ6VXNlcjk5NjM5OTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/9963998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metanovii", "html_url": "https://github.com/metanovii", "followers_url": "https://api.github.com/users/metanovii/followers", "following_url": "https://api.github.com/users/metanovii/following{/other_user}", "gists_url": "https://api.github.com/users/metanovii/gists{/gist_id}", "starred_url": "https://api.github.com/users/metanovii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metanovii/subscriptions", "organizations_url": "https://api.github.com/users/metanovii/orgs", "repos_url": "https://api.github.com/users/metanovii/repos", "events_url": "https://api.github.com/users/metanovii/events{/privacy}", "received_events_url": "https://api.github.com/users/metanovii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-03-27T14:10:55Z", "updated_at": "2020-04-09T20:32:12Z", "closed_at": "2020-04-09T20:32:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, i try use hashivault_auth_method module in ansible task like that:\r\n\r\n-   hashivault_auth_method:\r\n        config:\r\n          kubernetes_host: \"{{ k8s_api_endpoint }}\"\r\n          kubernetes_ca_cert: \"{{ lookup('file','{{playbook_dir}}/../artifacts/ca.crt') }}\"\r\n          token_reviewer_jwt: \"{{ k8s_token_vault.stdout }}\"\r\n      method_type: kubernetes\r\n      mount_point: \"some_k8s_path\"\r\n      state: \"enabled\"\r\n\r\nAfter task i have rc 0 , but in some_k8s_path all field empty.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/207", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/207/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/207/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/207/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/207", "id": 586413187, "node_id": "MDU6SXNzdWU1ODY0MTMxODc=", "number": 207, "title": "hashivault_userpass causes \"Exception: ''policies''\" when updating userpass with policy field not set", "user": {"login": "phihos", "id": 1387322, "node_id": "MDQ6VXNlcjEzODczMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1387322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phihos", "html_url": "https://github.com/phihos", "followers_url": "https://api.github.com/users/phihos/followers", "following_url": "https://api.github.com/users/phihos/following{/other_user}", "gists_url": "https://api.github.com/users/phihos/gists{/gist_id}", "starred_url": "https://api.github.com/users/phihos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phihos/subscriptions", "organizations_url": "https://api.github.com/users/phihos/orgs", "repos_url": "https://api.github.com/users/phihos/repos", "events_url": "https://api.github.com/users/phihos/events{/privacy}", "received_events_url": "https://api.github.com/users/phihos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-23T18:08:17Z", "updated_at": "2020-03-23T20:47:07Z", "closed_at": "2020-03-23T20:47:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "After creating a userpass without setting the \"policies\" field, running _hashivault_userpass_ over the user causes it to fail with `Exception: ''policies''`.\r\nSimilar to #204 this is caused by not providing a default value if the field is not set.\r\n\r\nThe issue arises for example when updating a userpass password via web UI. Afterwards the policy field is not set.\r\n\r\nI will create a PR within the next minutes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/204", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/204/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/204/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/204", "id": 582453906, "node_id": "MDU6SXNzdWU1ODI0NTM5MDY=", "number": 204, "title": "hashivault_identity_entity causes \"'NoneType'' object is not iterable\" when entity has no policy", "user": {"login": "phihos", "id": 1387322, "node_id": "MDQ6VXNlcjEzODczMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1387322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phihos", "html_url": "https://github.com/phihos", "followers_url": "https://api.github.com/users/phihos/followers", "following_url": "https://api.github.com/users/phihos/following{/other_user}", "gists_url": "https://api.github.com/users/phihos/gists{/gist_id}", "starred_url": "https://api.github.com/users/phihos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phihos/subscriptions", "organizations_url": "https://api.github.com/users/phihos/orgs", "repos_url": "https://api.github.com/users/phihos/repos", "events_url": "https://api.github.com/users/phihos/events{/privacy}", "received_events_url": "https://api.github.com/users/phihos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-16T16:51:43Z", "updated_at": "2020-03-16T18:09:14Z", "closed_at": "2020-03-16T18:09:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the `hashivault_identity_entity` module on a preexisting entity that has no policy (not even default) attached to it the tasks fails with:\r\n```\r\nmsg: 'Exception: ''NoneType'' object is not iterable'\r\n```\r\nThe cause is this piece of code:\r\n```python\r\ndef hashivault_identity_entity_update(entity_details, client, entity_id, entity_name, entity_metadata, entity_disabled, entity_policies):\r\n# ...\r\n  if entity_details['name'] != entity_name or entity_details['disabled'] != entity_disabled or \\\r\n       entity_details['metadata'] != entity_metadata or set(entity_details['policies']) != set(entity_policies):\r\n  # ...\r\n```\r\nThe  `set(entity_details['policies'])` causes the error, because `None` can not be converted into a `set`.\r\n\r\nPR coming soon.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/203", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/203/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/203/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/203", "id": 579208502, "node_id": "MDU6SXNzdWU1NzkyMDg1MDI=", "number": 203, "title": "SSL issue", "user": {"login": "mark1973ryan", "id": 5713109, "node_id": "MDQ6VXNlcjU3MTMxMDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5713109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark1973ryan", "html_url": "https://github.com/mark1973ryan", "followers_url": "https://api.github.com/users/mark1973ryan/followers", "following_url": "https://api.github.com/users/mark1973ryan/following{/other_user}", "gists_url": "https://api.github.com/users/mark1973ryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark1973ryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark1973ryan/subscriptions", "organizations_url": "https://api.github.com/users/mark1973ryan/orgs", "repos_url": "https://api.github.com/users/mark1973ryan/repos", "events_url": "https://api.github.com/users/mark1973ryan/events{/privacy}", "received_events_url": "https://api.github.com/users/mark1973ryan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T11:52:05Z", "updated_at": "2020-03-11T12:52:00Z", "closed_at": "2020-03-11T12:52:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI've seen a closed issue on this already but I can't determine the solution. We cannot pass creds in the clear so switching ssl verify off is not an option.\r\nThis is a self-signed cert as we're in a sandpit. I used update-ca-trust to add the pem file to the bundle.\r\n\r\nVAULT_CACERT=/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\r\nVAULT_TOKEN=<redacted>\r\nVAULT_ADDR=https://vault.nbs-stp.co.uk:8200\r\nVAULT_CLIENT_CERT=/etc/pki/ca-trust/source/anchors/vault-selfsigned-crt.pem\r\nVAULT_CLIENT_KEY=/etc/pki/ca-trust/source/anchors/vault-selfsigned-key.pem\r\n\r\n```yaml\r\n- name: Vault lookup test\r\n  connection: local\r\n  gather_facts: false\r\n  hosts: 127.0.0.1\r\n  tasks:\r\n    - name: vault lookup\r\n      debug:\r\n        msg: \"{{ lookup('hashi_vault', 'secret=serviceaccounts/data/testsite') }}\"\r\n```\r\n\r\nI get the following:\r\n\r\nTASK [using certificate auth] *******************************************************************************************\r\nfatal: [127.0.0.1]: FAILED! => {\"msg\": \"An unhandled exception occurred while running the lookup plugin 'hashi_vault'. Error was a <class 'requests.exceptions.SSLError'>, original message: HTTPSConnectionPool(host='vault.nbs-stp.co.uk', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by SSLError(SSLError(1, u'[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:618)'),))\"}\r\n\r\nIf I use a URI module task with the client paths set ti works no problem but having to stick a task in every time isn't as clean. I set the environment variables using custom credentials in a the AWX tower.\r\n\r\n```yaml\r\n- name: Vault credential fetch\r\n  connection: local\r\n  gather_facts: false\r\n  hosts: localhost\r\n  tasks:\r\n  \r\n    - name: Get vault credentials\r\n      uri:\r\n        url: \"{{ lookup('env','VAULT_ADDR') }}{{ lookup('env','VAULT_PATH') }}\"\r\n        method: GET\r\n        validate_certs: true\r\n        client_cert: /etc/pki/ca-trust/source/anchors/vault-selfsigned-crt.pem\r\n        client_key: /etc/pki/ca-trust/source/anchors/vault-selfsigned-key.pem\r\n        headers:\r\n          X-Vault-Token: \"{{ lookup('env','VAULT_TOKEN') }}\"\r\n      register: vault_response\r\n```\r\n\r\nIf anyone can spot the obvious that would be great.\r\n\r\nThanks in advance Mark", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/199", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/199/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/199/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/199", "id": 568526462, "node_id": "MDU6SXNzdWU1Njg1MjY0NjI=", "number": 199, "title": "Cannot set login mount point", "user": {"login": "Clockwork757", "id": 4714821, "node_id": "MDQ6VXNlcjQ3MTQ4MjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4714821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Clockwork757", "html_url": "https://github.com/Clockwork757", "followers_url": "https://api.github.com/users/Clockwork757/followers", "following_url": "https://api.github.com/users/Clockwork757/following{/other_user}", "gists_url": "https://api.github.com/users/Clockwork757/gists{/gist_id}", "starred_url": "https://api.github.com/users/Clockwork757/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Clockwork757/subscriptions", "organizations_url": "https://api.github.com/users/Clockwork757/orgs", "repos_url": "https://api.github.com/users/Clockwork757/repos", "events_url": "https://api.github.com/users/Clockwork757/events{/privacy}", "received_events_url": "https://api.github.com/users/Clockwork757/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T19:41:38Z", "updated_at": "2020-04-16T20:49:05Z", "closed_at": "2020-04-16T20:49:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I need to be able to change the mount_point parameter of the login functions [here](https://github.com/TerryHowe/ansible-modules-hashivault/blob/master/ansible/module_utils/hashivault.py#L74)\r\n\r\nWould it make sense to add another argument to pass this in? Its default value could be the authtype argument, since those are identical to the default mount points. \r\n\r\nSo it would be something like:\r\n\r\nAdded to `argument_spec`:\r\n```py\r\n...\r\nlogin_mount_point=dict(required=False, default=os.environ.get('VAULT_LOGIN_MOUNT_POINT', None), type='str')\r\n...\r\n```\r\n\r\nAnd then in `hashivault_auth`:\r\n```py\r\n...\r\nauthtype = params.get('authtype')\r\nlogin_mount_point = params.get('login_mount_point')\r\nif not login_mount_point:\r\n    login_mount_point = authtype\r\n\r\nif authtype == 'github':\r\n        client.auth.github.login(token, mount_point=login_mount_point)\r\nelif authtype == 'userpass':\r\n        client.auth_userpass(username, password, mount_point=login_mount_point)\r\n...\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/197", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/197/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/197/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/197", "id": 567332916, "node_id": "MDU6SXNzdWU1NjczMzI5MTY=", "number": 197, "title": "hashivault_approle_role doesnt update role policies if role already created", "user": {"login": "i1men", "id": 28391679, "node_id": "MDQ6VXNlcjI4MzkxNjc5", "avatar_url": "https://avatars3.githubusercontent.com/u/28391679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/i1men", "html_url": "https://github.com/i1men", "followers_url": "https://api.github.com/users/i1men/followers", "following_url": "https://api.github.com/users/i1men/following{/other_user}", "gists_url": "https://api.github.com/users/i1men/gists{/gist_id}", "starred_url": "https://api.github.com/users/i1men/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/i1men/subscriptions", "organizations_url": "https://api.github.com/users/i1men/orgs", "repos_url": "https://api.github.com/users/i1men/repos", "events_url": "https://api.github.com/users/i1men/events{/privacy}", "received_events_url": "https://api.github.com/users/i1men/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-19T05:49:39Z", "updated_at": "2020-04-13T15:14:46Z", "closed_at": "2020-04-13T15:14:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "i tryed to update policies with depriceted module (_hashivault_approle_role_create) and it works fine - if role already exists it update role, but in module hashivault_approle_role i try to update existing role, it returns that \"changed: False\"\r\n\r\n```\r\ntasks:\r\n    - name: read policy\r\n      hashivault_approle_role_get:\r\n        name: i1men\r\n    - name: try to update policy\r\n      hashivault_approle_role:\r\n        name: i1men\r\n        policies:\r\n          - foo\r\n          - bar\r\n        token_ttl: 60s #I tryed '60' or '60s'\r\n    - name: read policy again and check if it changed\r\n      hashivault_approle_role_get:\r\n        name: i1men\r\n```\r\n\r\nand the here my verbose output\r\n```\r\nPLAY [localhost] ********************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [get policy] *******************************************************************************************************************\r\nok: [localhost] => {\"changed\": false, \"rc\": 0, \"role\": {\"auth\": null, \"data\": {\"bind_secret_id\": true, \"local_secret_ids\": false, \"policies\": [\"aaa\", \"bbb\"], \"secret_id_bound_cidrs\": null, \"secret_id_num_uses\": 0, \"secret_id_ttl\": 0, \"token_bound_cidrs\": [], \"token_explicit_max_ttl\": 0, \"token_max_ttl\": 0, \"token_no_default_policy\": false, \"token_num_uses\": 0, \"token_period\": 0, \"token_policies\": [\"aaa\", \"bbb\"], \"token_ttl\": 10, \"token_type\": \"default\"}, \"lease_duration\": 0, \"lease_id\": \"\", \"renewable\": false, \"request_id\": \"50574a71-7281-98b6-cdf6-49c2f8899667\", \"warnings\": null, \"wrap_info\": null}}\r\n\r\nTASK [update policy] ****************************************************************************************************************\r\nok: [localhost] => {\"changed\": false, \"missing\": [\"token_ttl\", \"policies\"], \"rc\": 0}\r\n\r\nTASK [get policy] *******************************************************************************************************************\r\nok: [localhost] => {\"changed\": false, \"rc\": 0, \"role\": {\"auth\": null, \"data\": {\"bind_secret_id\": true, \"local_secret_ids\": false, \"policies\": [\"aaa\", \"bbb\"], \"secret_id_bound_cidrs\": null, \"secret_id_num_uses\": 0, \"secret_id_ttl\": 0, \"token_bound_cidrs\": [], \"token_explicit_max_ttl\": 0, \"token_max_ttl\": 0, \"token_no_default_policy\": false, \"token_num_uses\": 0, \"token_period\": 0, \"token_policies\": [\"aaa\", \"bbb\"], \"token_ttl\": 10, \"token_type\": \"default\"}, \"lease_duration\": 0, \"lease_id\": \"\", \"renewable\": false, \"request_id\": \"211e4f53-21ff-12aa-0b14-a13ed8888c73\", \"warnings\": null, \"wrap_info\": null}}\r\n\r\nPLAY RECAP **************************************************************************************************************************\r\nlocalhost                  : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0 \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/193", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/193/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/193/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/193/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/193", "id": 563054663, "node_id": "MDU6SXNzdWU1NjMwNTQ2NjM=", "number": 193, "title": "from ansible.module_utils.basic import AnsibleModule", "user": {"login": "JG127", "id": 52695622, "node_id": "MDQ6VXNlcjUyNjk1NjIy", "avatar_url": "https://avatars0.githubusercontent.com/u/52695622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JG127", "html_url": "https://github.com/JG127", "followers_url": "https://api.github.com/users/JG127/followers", "following_url": "https://api.github.com/users/JG127/following{/other_user}", "gists_url": "https://api.github.com/users/JG127/gists{/gist_id}", "starred_url": "https://api.github.com/users/JG127/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JG127/subscriptions", "organizations_url": "https://api.github.com/users/JG127/orgs", "repos_url": "https://api.github.com/users/JG127/repos", "events_url": "https://api.github.com/users/JG127/events{/privacy}", "received_events_url": "https://api.github.com/users/JG127/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-11T08:51:31Z", "updated_at": "2020-04-13T15:03:32Z", "closed_at": "2020-04-13T15:03:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running \"python setup.py test\". In PyCharm I'm getting the same error. \r\n\r\nIs there an additional setup required in order to run this project ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/192", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/192/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/192/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/192", "id": 562057173, "node_id": "MDU6SXNzdWU1NjIwNTcxNzM=", "number": 192, "title": "How use lookup plugin for kv-v2", "user": {"login": "ihard", "id": 3078342, "node_id": "MDQ6VXNlcjMwNzgzNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3078342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ihard", "html_url": "https://github.com/ihard", "followers_url": "https://api.github.com/users/ihard/followers", "following_url": "https://api.github.com/users/ihard/following{/other_user}", "gists_url": "https://api.github.com/users/ihard/gists{/gist_id}", "starred_url": "https://api.github.com/users/ihard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ihard/subscriptions", "organizations_url": "https://api.github.com/users/ihard/orgs", "repos_url": "https://api.github.com/users/ihard/repos", "events_url": "https://api.github.com/users/ihard/events{/privacy}", "received_events_url": "https://api.github.com/users/ihard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-08T18:13:08Z", "updated_at": "2020-04-16T21:57:51Z", "closed_at": "2020-04-16T21:57:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "How use lookup plugin for kv-v2 secret engine, can I see a working example of using the plugin?\r\n`{{ lookup('hashivault', 'secret/my', 'token', 'version=2') }}`\r\ndoes not work", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/189", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/189/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/189/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/189", "id": 556159803, "node_id": "MDU6SXNzdWU1NTYxNTk4MDM=", "number": 189, "title": "Weird FAILED! when loading \"0\" value on a key", "user": {"login": "adomenech73", "id": 4040180, "node_id": "MDQ6VXNlcjQwNDAxODA=", "avatar_url": "https://avatars0.githubusercontent.com/u/4040180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adomenech73", "html_url": "https://github.com/adomenech73", "followers_url": "https://api.github.com/users/adomenech73/followers", "following_url": "https://api.github.com/users/adomenech73/following{/other_user}", "gists_url": "https://api.github.com/users/adomenech73/gists{/gist_id}", "starred_url": "https://api.github.com/users/adomenech73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adomenech73/subscriptions", "organizations_url": "https://api.github.com/users/adomenech73/orgs", "repos_url": "https://api.github.com/users/adomenech73/repos", "events_url": "https://api.github.com/users/adomenech73/events{/privacy}", "received_events_url": "https://api.github.com/users/adomenech73/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-28T11:54:22Z", "updated_at": "2020-04-14T21:37:40Z", "closed_at": "2020-04-14T21:37:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got a yaml file with the k/v I want to load to vault like:\r\n\r\n```yaml\r\nvault_kvs:\r\n  \"commons.httpClient.connectionManagerTimeout\": \"11000\"\r\n  \"commons.httpClient.socketTimeout\": \"60000\"\r\n  \"commons.httpConnectionManager.connectionTimeout\": \"10000\"\r\n  \"commons.httpConnectionManager.linger\": \"0\"\r\n  \"commons.httpConnectionManager.maxConnections\": \"16\"\r\n  \"commons.httpConnectionManager.maxConnectionsPerHost\": \"16\"\r\n```\r\nThen I have a role that loads this data like:\r\n\r\n```yaml\r\n- name: Upload vault-kv from yaml file\r\n  hashivault_write:\r\n    url: \"http://127.0.0.1:8200\"\r\n    authtype: \"approle\"\r\n    role_id: \"{{rundeck_role_id}}\"\r\n    secret: \"/kv/config/{{app_name}}\"\r\n    verify: false\r\n    data:\r\n        \"{{ vault_kvs }}\"\r\n  run_once: True\r\n  delegate_to: \"{{vault_server}}\"\r\n```\r\n\r\nThe problem comes with `\"commons.httpConnectionManager.linger\": \"0\"`line, meaning that:\r\n\r\n- With this setup, role execution fails on the k/v upload with VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\r\n- If I comment this specific line the k/v upload works as expected\r\n- If I change the value from 0 to 1 the k/v upload works as expected \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/188", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/188/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/188/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/188", "id": 550656213, "node_id": "MDU6SXNzdWU1NTA2NTYyMTM=", "number": 188, "title": "Module hashivault_list seems broken", "user": {"login": "lperrin-obs", "id": 57952794, "node_id": "MDQ6VXNlcjU3OTUyNzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/57952794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lperrin-obs", "html_url": "https://github.com/lperrin-obs", "followers_url": "https://api.github.com/users/lperrin-obs/followers", "following_url": "https://api.github.com/users/lperrin-obs/following{/other_user}", "gists_url": "https://api.github.com/users/lperrin-obs/gists{/gist_id}", "starred_url": "https://api.github.com/users/lperrin-obs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lperrin-obs/subscriptions", "organizations_url": "https://api.github.com/users/lperrin-obs/orgs", "repos_url": "https://api.github.com/users/lperrin-obs/repos", "events_url": "https://api.github.com/users/lperrin-obs/events{/privacy}", "received_events_url": "https://api.github.com/users/lperrin-obs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-01-16T08:40:38Z", "updated_at": "2020-04-11T15:56:07Z", "closed_at": "2020-04-11T15:56:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently upgraded to last module version (4.2.3)\r\nI use the hashivault_list but since 4.2.0 version, it seems broken. The list returned by the module is empty.\r\n\r\nI rollback to 4.1.0 and with the same playbook, the module returns a non-empty list. \r\n\r\nPlaybook:\r\n```\r\n- hosts: localhost\r\n  tasks:\r\n  - name: check if password is already created\r\n    hashivault_list:\r\n      secret: \"/team/clouds/rp-apache/cloud-rp-z01n-prd.cloud.620nm.net/EID00001_demo\"\r\n    register: vault_list\r\n    tags: apache,rp,vhost,password,test\r\n\r\n  - debug:\r\n      var: vault_list\r\n    tags: test\r\n```\r\n\r\nResult with 4.2.3:\r\n```\r\nPLAY [localhost] ***************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************************************************************************\r\nThursday 16 January 2020  09:37:42 +0100 (0:00:00.086)       0:00:00.086 ****** \r\nok: [localhost]\r\n\r\nTASK [check if password is already created] ************************************************************************************************\r\nThursday 16 January 2020  09:37:43 +0100 (0:00:01.216)       0:00:01.302 ****** \r\nok: [localhost]\r\n\r\nTASK [debug] *******************************************************************************************************************************\r\nThursday 16 January 2020  09:37:44 +0100 (0:00:00.713)       0:00:02.015 ****** \r\nok: [localhost] => {\r\n    \"vault_list\": {\r\n        \"changed\": false, \r\n        \"failed\": false, \r\n        \"rc\": 0, \r\n        \"secrets\": []\r\n    }\r\n}\r\n\r\nPLAY RECAP *********************************************************************************************************************************\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n```\r\n\r\nResult with 4.1.0:\r\n```\r\nPLAY [localhost] ***************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************************************************************************\r\nThursday 16 January 2020  09:37:31 +0100 (0:00:00.115)       0:00:00.115 ****** \r\nok: [localhost]\r\n\r\nTASK [check if password is already created] ************************************************************************************************\r\nThursday 16 January 2020  09:37:32 +0100 (0:00:01.339)       0:00:01.454 ****** \r\nok: [localhost]\r\n\r\nTASK [debug] *******************************************************************************************************************************\r\nThursday 16 January 2020  09:37:33 +0100 (0:00:00.699)       0:00:02.154 ****** \r\nok: [localhost] => {\r\n    \"vault_list\": {\r\n        \"changed\": false, \r\n        \"failed\": false, \r\n        \"rc\": 0, \r\n        \"secrets\": [\r\n            \"rp_apache\"\r\n        ]\r\n    }\r\n}\r\n\r\nPLAY RECAP *********************************************************************************************************************************\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/186", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/186/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/186/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/186", "id": 547470491, "node_id": "MDU6SXNzdWU1NDc0NzA0OTE=", "number": 186, "title": "hashivault_audit_enable indepotence issue", "user": {"login": "DrMagPie", "id": 23652900, "node_id": "MDQ6VXNlcjIzNjUyOTAw", "avatar_url": "https://avatars0.githubusercontent.com/u/23652900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrMagPie", "html_url": "https://github.com/DrMagPie", "followers_url": "https://api.github.com/users/DrMagPie/followers", "following_url": "https://api.github.com/users/DrMagPie/following{/other_user}", "gists_url": "https://api.github.com/users/DrMagPie/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrMagPie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrMagPie/subscriptions", "organizations_url": "https://api.github.com/users/DrMagPie/orgs", "repos_url": "https://api.github.com/users/DrMagPie/repos", "events_url": "https://api.github.com/users/DrMagPie/events{/privacy}", "received_events_url": "https://api.github.com/users/DrMagPie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-09T13:15:02Z", "updated_at": "2020-04-14T17:16:24Z", "closed_at": "2020-04-14T16:06:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm facing odd issue with hashivault_audit_enable module,\r\nIf I'm using following configuration item then everything works fine.\r\n```yml\r\n- name: Enable Audit Log\r\n  run_once: true\r\n  register: result\r\n  delegate_to: localhost\r\n  hashivault_audit_enable:\r\n    url: \"{{ vault_addr }}\"\r\n    ca_cert: \"{{ root_ca_crt }}\"\r\n    verify: \"{{ verify }}\"\r\n    authtype: approle\r\n    role_id: \"{{ role_id }}\"\r\n    secret_id: \"{{ secret_id }}\"\r\n    name: \"syslog\"\r\n    options:\r\n      tag: vault\r\n      facility: AUTH\r\n```\r\nOUTPUT:\r\n```\r\nPLAY [localhost] ***************************************************************************************************************************************************************************\r\nTASK [Gathering Facts] *********************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [config : Enable Audit Log] ***********************************************************************************************************************************************************\r\nchanged: [localhost -> localhost]\r\n\r\nTASK [config : Enable Audit Log] ***********************************************************************************************************************************************************\r\nok: [localhost -> localhost]\r\n\r\nTASK [config : Enable Audit Log] ***********************************************************************************************************************************************************\r\nok: [localhost -> localhost]\r\n\r\nTASK [config : Enable Audit Log] ***********************************************************************************************************************************************************\r\nok: [localhost -> localhost]\r\n\r\nTASK [config : Enable Audit Log] ***********************************************************************************************************************************************************\r\nok: [localhost -> localhost]\r\n```\r\n\r\nBut if we add `hmac_accessor: false` option then everything breaks\r\n\r\n```yml\r\n- name: Enable Audit Log\r\n  run_once: true\r\n  register: result\r\n  delegate_to: localhost\r\n  hashivault_audit_enable:\r\n    url: \"{{ vault_addr }}\"\r\n    ca_cert: \"{{ root_ca_crt }}\"\r\n    verify: \"{{ verify }}\"\r\n    authtype: approle\r\n    role_id: \"{{ role_id }}\"\r\n    secret_id: \"{{ secret_id }}\"\r\n    name: \"syslog\"\r\n    options:\r\n      tag: vault\r\n      facility: AUTH\r\n      hmac_accessor: false\r\n```\r\nOUTPUT:\r\n```\r\nPLAY [localhost] ***************************************************************************************************************************************************************************\r\nTASK [Gathering Facts] *********************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [config : Enable Audit Log] **********************************************************************************************************************************************************\r\n*changed: [localhost -> localhost]\r\n\r\nTASK [config : Enable Audit Log] ***********************************************************************************************************************************************************\r\nfatal: [localhost -> localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"rc\": 1\r\n}\r\n\r\nMSG:\r\n\r\nException: path already in use\r\n```\r\n\r\nI had quick look at modules source code, and I don't see what could cause this issue.\r\nSo probably issue comes from HVAC package.\r\nbut might be I have missed something so could you please investigate this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/184", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/184/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/184/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/184/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/184", "id": 537794196, "node_id": "MDU6SXNzdWU1Mzc3OTQxOTY=", "number": 184, "title": "Module to write to Hashicorp Vault - Documentation", "user": {"login": "rjsbsamarathunga", "id": 13924402, "node_id": "MDQ6VXNlcjEzOTI0NDAy", "avatar_url": "https://avatars3.githubusercontent.com/u/13924402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjsbsamarathunga", "html_url": "https://github.com/rjsbsamarathunga", "followers_url": "https://api.github.com/users/rjsbsamarathunga/followers", "following_url": "https://api.github.com/users/rjsbsamarathunga/following{/other_user}", "gists_url": "https://api.github.com/users/rjsbsamarathunga/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjsbsamarathunga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjsbsamarathunga/subscriptions", "organizations_url": "https://api.github.com/users/rjsbsamarathunga/orgs", "repos_url": "https://api.github.com/users/rjsbsamarathunga/repos", "events_url": "https://api.github.com/users/rjsbsamarathunga/events{/privacy}", "received_events_url": "https://api.github.com/users/rjsbsamarathunga/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-13T21:53:53Z", "updated_at": "2020-04-14T13:23:30Z", "closed_at": "2020-04-14T13:23:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Could you update the documentation to include an example for hashivault_write for following:\r\n `vault write aws/roles/ops policy=@policy.json`\r\n\r\nor provide me a link to where it exists in the documentation (if it already does)?\r\n\r\nAs far as I can see, the documentation as of now only provides an example for secret write.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/183", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/183/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/183/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/183/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/183", "id": 529332541, "node_id": "MDU6SXNzdWU1MjkzMzI1NDE=", "number": 183, "title": "Difficulty creating external groups with hashivault_identity_group", "user": {"login": "dorees", "id": 7231649, "node_id": "MDQ6VXNlcjcyMzE2NDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7231649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dorees", "html_url": "https://github.com/dorees", "followers_url": "https://api.github.com/users/dorees/followers", "following_url": "https://api.github.com/users/dorees/following{/other_user}", "gists_url": "https://api.github.com/users/dorees/gists{/gist_id}", "starred_url": "https://api.github.com/users/dorees/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dorees/subscriptions", "organizations_url": "https://api.github.com/users/dorees/orgs", "repos_url": "https://api.github.com/users/dorees/repos", "events_url": "https://api.github.com/users/dorees/events{/privacy}", "received_events_url": "https://api.github.com/users/dorees/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-27T13:02:11Z", "updated_at": "2020-04-11T13:29:17Z", "closed_at": "2020-04-11T13:29:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm trying to utilise external groups to implement multi-tenancy namespaces as shown in the Additional discussion of this Vault learning doc.\r\nhttps://learn.hashicorp.com/vault/operations/namespaces#additional-discussion\r\nThe basic steps are to create an external group then attach an alias to link my LDAP authentication backend. \r\n\r\nPlaybook\r\n```---\r\n- hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - hashivault_identity_group:\r\n        name: ansible-group\r\n        group_type: external\r\n```\r\n\r\nOutput\r\n```\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"authtype\": \"token\",\r\n            \"ca_cert\": \"\",\r\n            \"ca_path\": \"\",\r\n            \"client_cert\": \"\",\r\n            \"client_key\": \"\",\r\n            \"group_type\": \"external\",\r\n            \"id\": null,\r\n            \"member_entity_ids\": [],\r\n            \"member_group_ids\": [],\r\n            \"metadata\": {},\r\n            \"mount_point\": \"identity\",\r\n            \"name\": \"ansible-group\",\r\n            \"namespace\": null,\r\n            \"password\": \"\",\r\n            \"policies\": [],\r\n            \"role_id\": \"\",\r\n            \"secret_id\": \"\",\r\n            \"state\": \"present\",\r\n            \"token\": \"removed\",\r\n            \"url\": \"removed\",\r\n            \"username\": \"\",\r\n            \"verify\": false\r\n        }\r\n    },\r\n    \"msg\": \"Exception: member entities can't be set manually for external groups\",\r\n    \"rc\": 1\r\n}\r\n```\r\n\r\nI've noticed the docs specify that member_entity_ids and member_group_ids default to None but are output as empty lists. Am I missing something?\r\n\r\nAny help is appreciated,\r\n\r\nDan\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/182", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/182/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/182/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/182/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/182", "id": 523546753, "node_id": "MDU6SXNzdWU1MjM1NDY3NTM=", "number": 182, "title": "hashiwrapper strips useful python stacktrace info on hard failures", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-15T15:50:10Z", "updated_at": "2020-04-17T19:12:39Z", "closed_at": "2020-04-17T19:12:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/TerryHowe/ansible-modules-hashivault/blob/bfb50f59d2e03cf01c33269c81cb6105ee7446e1/ansible/module_utils/hashivault.py#L111\r\n\r\nwhen there is a python failure behind the scenes, the `Exception` cuts everything except for the last carriage return. example below.\r\n\r\nansible-playbook failure:\r\n\r\n`    \"msg\": \"Exception: 'version'\",`\r\n\r\nif i remove the `try` to something like:\r\n\r\n```\r\ndef hashiwrapper(function):\r\n    def wrapper(*args, **kwargs):\r\n        result = {\"changed\": False, \"rc\": 0}\r\n        result.update(function(*args, **kwargs))\r\n    return wrapper\r\n```\r\n\r\nI now get a much more helpful stacktrace:\r\nyoull notice it ends in `line 141, in hashivault_secret_engine\\nKeyError: 'version'\\n` keyword being \"version\"\r\n\r\n```\r\n/home/vaultadmin/.ansible/tmp/ansible-tmp-1573831735.4493992-196812719653411/AnsiballZ_hashivault_secret_engine.py:18: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\\n  import imp\\n/home/vaultadmin/3env/lib/python3.7/site-packages/urllib3/connectionpool.py:1004: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings\\n  InsecureRequestWarning,\\nTraceback (most recent call last):\\n  File \\\"/home/vaultadmin/.ansible/tmp/ansible-tmp-1573831735.4493992-196812719653411/AnsiballZ_hashivault_secret_engine.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/home/vaultadmin/.ansible/tmp/ansible-tmp-1573831735.4493992-196812719653411/AnsiballZ_hashivault_secret_engine.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/home/vaultadmin/.ansible/tmp/ansible-tmp-1573831735.4493992-196812719653411/AnsiballZ_hashivault_secret_engine.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/lib/python3.7/imp.py\\\", line 234, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/lib/python3.7/imp.py\\\", line 169, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 630, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 728, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/tmp/ansible_hashivault_secret_engine_payload_6_7udlcd/__main__.py\\\", line 176, in <module>\\n  File \\\"/tmp/ansible_hashivault_secret_engine_payload_6_7udlcd/__main__.py\\\", line 97, in main\\n  File \\\"/tmp/ansible_hashivault_secret_engine_payload_6_7udlcd/ansible_hashivault_secret_engine_payload.zip/ansible/module_utils/hashivault.py\\\", line 109, in wrapper\\n  File \\\"/tmp/ansible_hashivault_secret_engine_payload_6_7udlcd/__main__.py\\\", line 141, in hashivault_secret_engine\\nKeyError: 'version'\\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/180", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/180/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/180/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/180", "id": 518914940, "node_id": "MDU6SXNzdWU1MTg5MTQ5NDA=", "number": 180, "title": "TLS handshake error from 1.1.1.1:57411: tls: client offered only unsupported versions: [301 300]", "user": {"login": "jcustenborder", "id": 209792, "node_id": "MDQ6VXNlcjIwOTc5Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/209792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcustenborder", "html_url": "https://github.com/jcustenborder", "followers_url": "https://api.github.com/users/jcustenborder/followers", "following_url": "https://api.github.com/users/jcustenborder/following{/other_user}", "gists_url": "https://api.github.com/users/jcustenborder/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcustenborder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcustenborder/subscriptions", "organizations_url": "https://api.github.com/users/jcustenborder/orgs", "repos_url": "https://api.github.com/users/jcustenborder/repos", "events_url": "https://api.github.com/users/jcustenborder/events{/privacy}", "received_events_url": "https://api.github.com/users/jcustenborder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-06T22:54:02Z", "updated_at": "2019-11-07T18:18:19Z", "closed_at": "2019-11-07T18:18:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running into this error message when I have TLS 1.2 enabled on my vault instance. When I drop the TLS requirement to 1.0 it works properly. Using TLS 1.1 gave me the same error message. Am I missing a setting? Great project BTW!\r\n\r\n```json\r\n{\r\n  \"changed\": false,\r\n  \"msg\": \"Error SSLError(HTTPSConnectionPool(host='vault-01.example.com', port=8200): Max retries exceeded with url: /v1/stories/charlotte (Caused by SSLError(SSLError(1, '[SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:645)'),))) reading stories/charlotte\",\r\n  \"rc\": 1\r\n}\r\n```\r\n\r\n```text\r\nansible 2.9.0\r\n  config file = /Users/jeremy/source/personal/ansible/infrastructure/ansible.cfg\r\n  configured module search path = ['/Users/jeremy/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jeremy/source/personal/ansible/infrastructure/python3/lib/python3.5/site-packages/ansible\r\n  executable location = /Users/jeremy/source/personal/ansible/infrastructure/python3/bin/ansible\r\n  python version = 3.5.1 (v3.5.1:37a07cee5969, Dec  5 2015, 21:12:44) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]\r\n```\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/179", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/179/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/179/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/179", "id": 518516227, "node_id": "MDU6SXNzdWU1MTg1MTYyMjc=", "number": 179, "title": "hashivault_write can't be used anymore to have csr/private key generated and crt signed", "user": {"login": "mirwan", "id": 8307951, "node_id": "MDQ6VXNlcjgzMDc5NTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/8307951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mirwan", "html_url": "https://github.com/mirwan", "followers_url": "https://api.github.com/users/mirwan/followers", "following_url": "https://api.github.com/users/mirwan/following{/other_user}", "gists_url": "https://api.github.com/users/mirwan/gists{/gist_id}", "starred_url": "https://api.github.com/users/mirwan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mirwan/subscriptions", "organizations_url": "https://api.github.com/users/mirwan/orgs", "repos_url": "https://api.github.com/users/mirwan/repos", "events_url": "https://api.github.com/users/mirwan/events{/privacy}", "received_events_url": "https://api.github.com/users/mirwan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-06T14:42:22Z", "updated_at": "2019-11-21T00:44:00Z", "closed_at": "2019-11-21T00:44:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is kind of a followup to #162. \r\nSince #135, I can't use `hashivault_write` to write to pki/intermediate/generate/exported or pki/root/sign-intermediate.\r\nIn my use-case, the first one is supposed to return csr and private key, the second is supposed to return a certificate (intermediate CA here) from csr (supposedly returned in the previous step).\r\nNow that `no_log` is set to \"true\", csr and private key contain \"********\", sign-intermediate fails and/or check crt verification against priviate key fails.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/176", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/176/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/176/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/176/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/176", "id": 512714092, "node_id": "MDU6SXNzdWU1MTI3MTQwOTI=", "number": 176, "title": "auth_method is broken", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-25T20:47:46Z", "updated_at": "2019-10-29T15:54:24Z", "closed_at": "2019-10-29T15:54:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "4.2.1 auth method is currently not working at all\r\n\r\n```\r\ncat auth.yml\r\n---\r\n- hosts: localhost\r\n  gather_facts: false\r\n  tasks:\r\n    - hashivault_auth_method:\r\n        method_type: userpass\r\n```\r\n\r\n```\r\nTASK [hashivault_auth_method] ***********************************\r\nfatal: [localhost]: FAILED! => changed=false\r\n  msg: auth mount is not enabled or namespace does not exist\r\n  rc: 1\r\n```\r\n\r\nI thought this had been tested correctly but it wasnt. also need to follow up on why travis build did not catch: https://github.com/TerryHowe/ansible-modules-hashivault/blob/master/functional/test_auth_method.yml\r\n\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/0db687f8aa367b72dfb8d00e32aab3ac86c59af7/functional/run.sh#L23", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/167", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/167/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/167/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/167", "id": 504655294, "node_id": "MDU6SXNzdWU1MDQ2NTUyOTQ=", "number": 167, "title": "some configs fail when namespace doesnt exist yet", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-09T13:32:36Z", "updated_at": "2020-04-18T13:47:33Z", "closed_at": "2020-04-18T13:47:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`hashivault_azure_auth_config` fails if the namespace has not been built yet. that means `-C` does not work. i believe this can be fixed by wrapping the following code in a `try` block (or including in the try below it:\r\n\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/52dd34093b80026ff07eecaaa822e175867ee3af/ansible/modules/hashivault/hashivault_azure_auth_config.py#L152\r\n\r\nI'm guessing there are many other configs that fall into this bucket as well\r\n\r\nlist of modules affected:\r\n\r\n- [x] hashivault_azure_auth_config\r\n- [x] hashivault_auth_method\r\n- [x] hashivault_azure_auth_role\r\n- [x] hashivault_database_secret_engine_config\r\n- [x] hashivault_database_secret_engine_config\r\n- [x] hashivault_azure_secret_engine_config\r\n- [x] hashivault_azure_secret_engine_role\r\n- [x] hashivault_policy_set_from_file\r\n- [x] hashivault_approle_role\r\n- [x] hashivault_policy_set\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/166", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/166/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/166/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/166", "id": 504071743, "node_id": "MDU6SXNzdWU1MDQwNzE3NDM=", "number": 166, "title": "secret_engine creation is not idempotent anymore", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-08T14:15:25Z", "updated_at": "2019-10-08T21:52:08Z", "closed_at": "2019-10-08T17:37:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "setting a specific configuration for a secret engine is no longer checked correctly. this task will result in `changed` everytime\r\n\r\n```\r\n---\r\n- hosts: localhost\r\n  gather_facts: false\r\n  tasks:\r\n    - hashivault_secret_engine:\r\n        name: database\r\n        backend: database\r\n        config:\r\n          default_lease_ttl: \"700h\"\r\n```\r\n\r\npossibly related: https://github.com/TerryHowe/ansible-modules-hashivault/issues/144", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/163", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/163/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/163/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/163", "id": 499482947, "node_id": "MDU6SXNzdWU0OTk0ODI5NDc=", "number": 163, "title": "hashivault_write with update and version 2 messes up the structure", "user": {"login": "rnsc", "id": 1765108, "node_id": "MDQ6VXNlcjE3NjUxMDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1765108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rnsc", "html_url": "https://github.com/rnsc", "followers_url": "https://api.github.com/users/rnsc/followers", "following_url": "https://api.github.com/users/rnsc/following{/other_user}", "gists_url": "https://api.github.com/users/rnsc/gists{/gist_id}", "starred_url": "https://api.github.com/users/rnsc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rnsc/subscriptions", "organizations_url": "https://api.github.com/users/rnsc/orgs", "repos_url": "https://api.github.com/users/rnsc/repos", "events_url": "https://api.github.com/users/rnsc/events{/privacy}", "received_events_url": "https://api.github.com/users/rnsc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-27T14:35:45Z", "updated_at": "2019-09-30T07:29:40Z", "closed_at": "2019-09-30T07:29:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI've been testing this awesome library and it looks like I'm hitting an issue when using a KV in version 2 and the update flag.\r\nPlaybook tasks:\r\n\r\n```yaml\r\n    - name: \"hashivault_write | write password\"\r\n      delegate_to: localhost\r\n      hashivault_write:\r\n        mount_point: my_secret_kv\r\n        secret: \"{{ kv_path + '/vars_test' }}\"\r\n        version: 2\r\n        data:\r\n          user1: \"password1\"\r\n\r\n    - debug:\r\n        msg: \"{{ lookup('hashi_vault', 'secret=my_secret_kv/data/'+kv_path+'/vars_test') }}\"\r\n\r\n    - name: \"hashivault_write | write another password\"\r\n      delegate_to: localhost\r\n      hashivault_write:\r\n        mount_point: my_secret_kv\r\n        secret: \"{{ kv_path + '/vars_test' }}\"\r\n        version: 2\r\n        update: true\r\n        data:\r\n          user2: \"password2\"\r\n\r\n    - debug:\r\n        msg: \"{{ lookup('hashi_vault', 'secret=my_secret_kv/data/'+kv_path+'/vars_test') }}\"\r\n```\r\n\r\nResult:\r\n```\r\nTASK [hashivault_write | write password] **************************************************************************************************************************************************************************************************************\r\nFriday 27 September 2019  16:27:09 +0200 (0:00:00.662)       0:00:05.967 ******\r\nFriday 27 September 2019  16:27:09 +0200 (0:00:00.662)       0:00:05.967 ******\r\nchanged: [localhost -> localhost]\r\n\r\nTASK [debug] ******************************************************************************************************************************************************************************************************************************************\r\nFriday 27 September 2019  16:27:09 +0200 (0:00:00.529)       0:00:06.497 ******\r\nFriday 27 September 2019  16:27:09 +0200 (0:00:00.529)       0:00:06.496 ******\r\nok: [localhost] =>\r\n  msg:\r\n    data:\r\n      user1: password1\r\n    metadata:\r\n      created_time: '2019-09-27T14:27:09.548159353Z'\r\n      deletion_time: ''\r\n      destroyed: false\r\n      version: 1\r\n\r\nTASK [hashivault_write | write another password] ******************************************************************************************************************************************************************************************************\r\nFriday 27 September 2019  16:27:10 +0200 (0:00:00.649)       0:00:07.147 ******\r\nFriday 27 September 2019  16:27:10 +0200 (0:00:00.649)       0:00:07.146 ******\r\nchanged: [localhost -> localhost]\r\n\r\nTASK [debug] ******************************************************************************************************************************************************************************************************************************************\r\nFriday 27 September 2019  16:27:10 +0200 (0:00:00.622)       0:00:07.769 ******\r\nFriday 27 September 2019  16:27:10 +0200 (0:00:00.622)       0:00:07.768 ******\r\nok: [localhost] =>\r\n  msg:\r\n    data:\r\n      data:\r\n        user1: password1\r\n      metadata:\r\n        created_time: '2019-09-27T14:27:09.548159353Z'\r\n        deletion_time: ''\r\n        destroyed: false\r\n        version: 1\r\n      user2: password2\r\n    metadata:\r\n      created_time: '2019-09-27T14:27:10.818319333Z'\r\n      deletion_time: ''\r\n      destroyed: false\r\n      version: 2\r\n```\r\n\r\nIf I then want to view my secrets in the web UI, I only see a JSON because the structure of the object is messed up.\r\n\r\nI'm able to bypass this issue using this trick:\r\n\r\n```yaml\r\ndata: \"{{ (lookup('hashi_vault', 'my_secret_kv/data/'+kv_path+'/vars')).data | combine(new_secrets) }}\"\r\n```\r\nnew_secrets is just a dictionary like this:\r\n```yaml\r\nnew_secrets:\r\n  user2: \"password2\"\r\n```\r\nBut I'd rather use the \"update: true\" option for readability and ease of use.\r\n\r\nI hope I gave enough information to debug this!\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/162", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/162/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/162/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/162", "id": 496919359, "node_id": "MDU6SXNzdWU0OTY5MTkzNTk=", "number": 162, "title": "hashivault_write: returned data contains ********", "user": {"login": "kongslund", "id": 1836149, "node_id": "MDQ6VXNlcjE4MzYxNDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1836149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kongslund", "html_url": "https://github.com/kongslund", "followers_url": "https://api.github.com/users/kongslund/followers", "following_url": "https://api.github.com/users/kongslund/following{/other_user}", "gists_url": "https://api.github.com/users/kongslund/gists{/gist_id}", "starred_url": "https://api.github.com/users/kongslund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kongslund/subscriptions", "organizations_url": "https://api.github.com/users/kongslund/orgs", "repos_url": "https://api.github.com/users/kongslund/repos", "events_url": "https://api.github.com/users/kongslund/events{/privacy}", "received_events_url": "https://api.github.com/users/kongslund/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-23T06:40:09Z", "updated_at": "2019-10-01T06:22:21Z", "closed_at": "2019-10-01T06:22:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "When requesting a certificate by writing a secret to Vault's PKI secrets engine, a result is returned containing the requested certificate, private key etc. If the result returned has a substring matching whatever was provided in `hashivault_write`'s `data` option then that substring is replaced by [`********`](https://docs.ansible.com/ansible/latest/network/user_guide/faq.html#why-is-my-output-sometimes-replaced-with) and the output is no longer usable.\r\n\r\nAs an example, if `data` contains the string `1h` for 1 hour:\r\n\r\n```\r\n        data:\r\n          common_name: \"test.example.com\"\r\n          ttl: \"1h\"\r\n```\r\n\r\nand the result (certificate/private key/issuing certificate/...) contains the substring `1h`\r\n\r\n```\r\n-----BEGIN CERTIFICATE-----\r\n...\r\nA4IBAQAIQFdBHN8hKaWLsST1h6M4YN2yl2tFkP3zy+ie23f5VZTB0XpFknJCaJQN\r\n...\r\n-----END CERTIFICATE-----\r\n```\r\n\r\nthen the output becomes\r\n\r\n```\r\n-----BEGIN CERTIFICATE-----\r\n...\r\nA4IBAQAIQFdBHN8hKaWLsST********6M4YN2yl2tFkP3zy+ie23f5VZTB0XpFknJCaJQN\r\n...\r\n-----END CERTIFICATE-----\r\n```\r\n\r\nI believe this is caused by the change in #135.\r\n\r\nDoes this qualify as a bug or feature? \ud83e\udd14 I am guessing it is not the intention to treat a string such as `1h` as a password. It could cause problems later on in a play - not just when attempting to use the returned data. Perhaps a separate pki module is needed for this kind of use case?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/160", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/160/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/160/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/160", "id": 490525370, "node_id": "MDU6SXNzdWU0OTA1MjUzNzA=", "number": 160, "title": "hashivault_policy_set_from_file and hashivault_policy_set should be 1 module", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-06T21:13:25Z", "updated_at": "2019-10-22T12:51:05Z", "closed_at": "2019-10-22T12:51:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "params should be pulled from a file if dictated as a parameter. this was the first ansible module i wrote so i didnt know any good practices lol", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/158", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/158/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/158/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/158", "id": 490488194, "node_id": "MDU6SXNzdWU0OTA0ODgxOTQ=", "number": 158, "title": "kv engine idempotence fails with version 2", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-06T19:30:18Z", "updated_at": "2019-09-09T23:54:39Z", "closed_at": "2019-09-09T23:54:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "runs multiple times:\r\n\r\n```\r\n    - hashivault_secret_engine:\r\n        name: kv2\r\n        backend: kv\r\n        options:\r\n          version: 2\r\n      environment:\r\n        VAULT_TOKEN: \"{{ lookup('env', 'VAULT_TOKEN') }}\"\r\n        VAULT_ADDR: \"{{ lookup('env', 'VAULT_ADDR') }}\"\r\n```\r\n\r\nruns once:\r\n\r\n```\r\n    - hashivault_secret_engine:\r\n        name: kv1\r\n        backend: kv\r\n      environment:\r\n        VAULT_TOKEN: \"{{ lookup('env', 'VAULT_TOKEN') }}\"\r\n        VAULT_ADDR: \"{{ lookup('env', 'VAULT_ADDR') }}\"\r\n```\r\n\r\n- [x] make sure you check why this wasnt caught in tests", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/156", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/156/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/156/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/156", "id": 488878383, "node_id": "MDU6SXNzdWU0ODg4NzgzODM=", "number": 156, "title": "VAULT_PASSWORD field value is visible when playbook is executed with verbose flag.", "user": {"login": "dmilind", "id": 18506584, "node_id": "MDQ6VXNlcjE4NTA2NTg0", "avatar_url": "https://avatars3.githubusercontent.com/u/18506584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmilind", "html_url": "https://github.com/dmilind", "followers_url": "https://api.github.com/users/dmilind/followers", "following_url": "https://api.github.com/users/dmilind/following{/other_user}", "gists_url": "https://api.github.com/users/dmilind/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmilind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmilind/subscriptions", "organizations_url": "https://api.github.com/users/dmilind/orgs", "repos_url": "https://api.github.com/users/dmilind/repos", "events_url": "https://api.github.com/users/dmilind/events{/privacy}", "received_events_url": "https://api.github.com/users/dmilind/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-04T00:11:42Z", "updated_at": "2019-09-04T01:00:21Z", "closed_at": "2019-09-04T01:00:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/155", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/155/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/155/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/155", "id": 487685721, "node_id": "MDU6SXNzdWU0ODc2ODU3MjE=", "number": 155, "title": "Ansible error out stating No module named hvac when using ansible-modules-hashivault on mac", "user": {"login": "dmilind", "id": 18506584, "node_id": "MDQ6VXNlcjE4NTA2NTg0", "avatar_url": "https://avatars3.githubusercontent.com/u/18506584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmilind", "html_url": "https://github.com/dmilind", "followers_url": "https://api.github.com/users/dmilind/followers", "following_url": "https://api.github.com/users/dmilind/following{/other_user}", "gists_url": "https://api.github.com/users/dmilind/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmilind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmilind/subscriptions", "organizations_url": "https://api.github.com/users/dmilind/orgs", "repos_url": "https://api.github.com/users/dmilind/repos", "events_url": "https://api.github.com/users/dmilind/events{/privacy}", "received_events_url": "https://api.github.com/users/dmilind/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-30T22:01:55Z", "updated_at": "2019-08-30T23:04:46Z", "closed_at": "2019-08-30T23:04:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using ansible-modules-hashivault to perform some activities on vault server. I installed this module on my mac. When I execute the play. it fails with the error saying No module named hvac, even though this module is available on mac. \r\n\r\nAnsible version \r\n```\r\nansible-playbook 2.8.0\r\n  configured module search path = [u'/Users/mdhoke/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible-playbook\r\n  python version = 2.7.10 (default, Feb 22 2019, 21:55:15) [GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.37.14)]\r\n\r\n```\r\nFor the reference, I am pasting execution stdout. \r\n```\r\nASK [qtfa : Generating Vault Auth Client Token For mdhoke From [ Pod Vault ]] ***************************************************************************************************************************************************************\r\ntask path: /Users/mdhoke/office/stash/bootstrap/src/main/ansible/roles/qtfa/tasks/main.yaml:13\r\nfatal: [vault.abc.com]: FAILED! => {\"changed\": false, \"module_stderr\": \"Shared connection to vault.abc.com closed.\\r\\n\", \"module_stdout\": \"Traceback (most recent call last):\\r\\n  File \\\"/home/mdhoke/.ansible/tmp/ansible-tmp-1567202083.35-180453939375704/AnsiballZ_hashivault_read.py\\\", line 114, in <module>\\r\\n    _ansiballz_main()\\r\\n  File \\\"/home/mdhoke/.ansible/tmp/ansible-tmp-1567202083.35-180453939375704/AnsiballZ_hashivault_read.py\\\", line 106, in _ansiballz_main\\r\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\r\\n  File \\\"/home/mdhoke/.ansible/tmp/ansible-tmp-1567202083.35-180453939375704/AnsiballZ_hashivault_read.py\\\", line 49, in invoke_module\\r\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\r\\n  File \\\"/tmp/ansible_hashivault_read_payload_Q0MMq7/__main__.py\\\", line 3, in <module>\\r\\n  File \\\"/tmp/ansible_hashivault_read_payload_Q0MMq7/ansible_hashivault_read_payload.zip/ansible/module_utils/hashivault.py\\\", line 4, in <module>\\r\\nImportError: No module named hvac\\r\\n\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\n```\r\n\r\nI am trying to figure out the issue. Is this particularly with mac or what? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/153", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/153/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/153/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/153/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/153", "id": 481663800, "node_id": "MDU6SXNzdWU0ODE2NjM4MDA=", "number": 153, "title": "Allow setting header for AWS auth method", "user": {"login": "tomi-roam", "id": 11049230, "node_id": "MDQ6VXNlcjExMDQ5MjMw", "avatar_url": "https://avatars3.githubusercontent.com/u/11049230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomi-roam", "html_url": "https://github.com/tomi-roam", "followers_url": "https://api.github.com/users/tomi-roam/followers", "following_url": "https://api.github.com/users/tomi-roam/following{/other_user}", "gists_url": "https://api.github.com/users/tomi-roam/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomi-roam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomi-roam/subscriptions", "organizations_url": "https://api.github.com/users/tomi-roam/orgs", "repos_url": "https://api.github.com/users/tomi-roam/repos", "events_url": "https://api.github.com/users/tomi-roam/events{/privacy}", "received_events_url": "https://api.github.com/users/tomi-roam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-16T15:28:43Z", "updated_at": "2020-04-19T13:51:11Z", "closed_at": "2020-04-19T13:51:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I couldn't find a way to specify the header value for `X-Vault-AWS-IAM-Server-ID` that can be configured to be required on Vault login to prevent replay attacks (https://www.vaultproject.io/docs/auth/aws.html).\r\n\r\nLooks like `hvac` has this supported when creating the client (https://hvac.readthedocs.io/en/stable/usage/auth_methods/aws.html) by passing in the value with the `header_value` argument.\r\n\r\nAny chance to get this added?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/147", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/147/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/147/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/147", "id": 478556948, "node_id": "MDU6SXNzdWU0Nzg1NTY5NDg=", "number": 147, "title": "Add support for Vault agent.", "user": {"login": "semrov", "id": 10096109, "node_id": "MDQ6VXNlcjEwMDk2MTA5", "avatar_url": "https://avatars2.githubusercontent.com/u/10096109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semrov", "html_url": "https://github.com/semrov", "followers_url": "https://api.github.com/users/semrov/followers", "following_url": "https://api.github.com/users/semrov/following{/other_user}", "gists_url": "https://api.github.com/users/semrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/semrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semrov/subscriptions", "organizations_url": "https://api.github.com/users/semrov/orgs", "repos_url": "https://api.github.com/users/semrov/repos", "events_url": "https://api.github.com/users/semrov/events{/privacy}", "received_events_url": "https://api.github.com/users/semrov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-08T15:55:45Z", "updated_at": "2019-08-17T13:24:47Z", "closed_at": "2019-08-17T13:24:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Add support for authenticating with [Vault Agent](https://www.vaultproject.io/docs/agent/).\r\n\r\nAdd additional authentication type to VAULT_AUTHTYPE environment variable called 'Agent', which means 'pass authentication to Vault Agent'. In general there are two options available:\r\n    1) No additional authentication data (like token, role id etc.) provided in environment:\r\n          - Just pass request to Vault agent - agent is entirely responsible for authentication \r\n    2) Additional authentication data (like token, role id etc.) is provided in environment:\r\n          - Pass provided data to Vault Agent, Vault Agent now uses authentication data provided in environment instead of these provided in Agent's configuration file \r\n\r\nThat is exactly how Agent works.\r\n\r\nFor example: \r\nIn case of: lookup('hashi_vault', 'secret={{ secret_path }}  url={{ vault_addr }}') \r\n\r\n1) No environment data provided:\r\n    - Vault agent is completely responsible for authentication with Vault server (using it's own configuration)\r\n2) Environment data (like VAULT_TOKEN) provided:\r\n    -  hashi_vault module passes VAULT_TOKEN to agent. Agent now uses VAULT_TOKEN to authenticate with server.\r\n\r\nFor start only option 1) would be enough to implement.\r\n\r\nCurrently hashi_vault module throws exception if no authentication data provided in environment.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/144", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/144/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/144/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/144/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/144", "id": 476900765, "node_id": "MDU6SXNzdWU0NzY5MDA3NjU=", "number": 144, "title": "idempotence checks may be affected by 1.4 update", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-05T14:45:47Z", "updated_at": "2020-04-16T20:52:32Z", "closed_at": "2020-04-16T20:52:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "vault 1.4 is likely to introduce many breaking changes: https://github.com/hashicorp/vault/blob/master/CHANGELOG.md#120-july-30th-2019\r\n\r\nToken store roles use new, common token fields for the values that overlap with other auth backends. period, explicit_max_ttl, and bound_cidrs will continue to work, with priority being given to the token_ prefixed versions of those parameters. They will also be returned when doing a read on the role if they were used to provide values initially; however, in Vault 1.4 if period or explicit_max_ttl is zero they will no longer be returned. (explicit_max_ttl was already not returned if empty.)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/142", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/142/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/142/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/142", "id": 476185035, "node_id": "MDU6SXNzdWU0NzYxODUwMzU=", "number": 142, "title": "hashivault_db_secret_engine_role false failure", "user": {"login": "Dudesons", "id": 3831949, "node_id": "MDQ6VXNlcjM4MzE5NDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/3831949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dudesons", "html_url": "https://github.com/Dudesons", "followers_url": "https://api.github.com/users/Dudesons/followers", "following_url": "https://api.github.com/users/Dudesons/following{/other_user}", "gists_url": "https://api.github.com/users/Dudesons/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dudesons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dudesons/subscriptions", "organizations_url": "https://api.github.com/users/Dudesons/orgs", "repos_url": "https://api.github.com/users/Dudesons/repos", "events_url": "https://api.github.com/users/Dudesons/events{/privacy}", "received_events_url": "https://api.github.com/users/Dudesons/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-08-02T13:39:40Z", "updated_at": "2019-08-06T01:57:01Z", "closed_at": "2019-08-06T01:57:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi @TerryHowe  @drewmullen ,\r\n\r\nI try to use the `hashivault_db_secret_engine_role` action but ansible return me an error whereas vault was correctly setup\r\nSo the action work but I don't understand why ansible failed :(\r\n\r\n```\r\nfailed: [localhost] (item={u'default_ttl': 600, u'state': u'present', u'db_name': u'scyllav3', u'name': u'scylla_backup_v3', u'max_ttl': 600, u'creation_statements': u\"CREATE USER '{{username}}' WITH PASSWORD '{{password}}' NOSUPERUSER; GRANT dba TO {{username}};\"}) => {\r\n    \"changed\": false, \r\n    \"item\": {\r\n        \"creation_statements\": \"CREATE USER '{{username}}' WITH PASSWORD '{{password}}' NOSUPERUSER; GRANT dba TO {{username}};\", \r\n        \"db_name\": \"scyllav3\", \r\n        \"default_ttl\": 600, \r\n        \"max_ttl\": 600, \r\n        \"name\": \"scylla_backup_v3\", \r\n        \"state\": \"present\"\r\n    }, \r\n    \"module_stderr\": \"\", \r\n    \"module_stdout\": \"[u'identity/', u'database/', u'consul/', u'sys/', u'secret/', u'cubbyhole/']\\n\\n{\\\"invocation\\\": {\\\"module_args\\\": {\\\"rollback_statements\\\": [], \\\"renew_statements\\\": [], \\\"client_key\\\": \\\"\\\", \\\"mount_point\\\": \\\"database\\\", \\\"verify\\\": true, \\\"namespace\\\": null, \\\"role_id\\\": \\\"\\\", \\\"state\\\": \\\"present\\\", \\\"client_cert\\\": \\\"\\\", \\\"username\\\": \\\"\\\", \\\"authtype\\\": \\\"token\\\", \\\"creation_statements\\\": [\\\"CREATE USER '{{username}}' WITH PASSWORD '{{password}}' NOSUPERUSER; GRANT dba TO {{username}};\\\"], \\\"ca_cert\\\": \\\"\\\", \\\"token_ttl\\\": 600, \\\"token_max_ttl\\\": 600, \\\"secret_id\\\": \\\"\\\", \\\"db_name\\\": \\\"scyllav3\\\", \\\"password\\\": \\\"\\\", \\\"revocation_statements\\\": [], \\\"name\\\": \\\"scylla_backup_v3\\\", \\\"url\\\": \\\"https://vault.dev.veepeez.io:8200\\\", \\\"role_file\\\": null, \\\"token\\\": \\\"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\\\", \\\"ca_path\\\": \\\"\\\"}}, \\\"changed\\\": false, \\\"rc\\\": 0}\\n\", \r\n    \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \r\n    \"rc\": 0\r\n}\r\n```\r\n\r\nSomeone have an idea ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/139", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/139/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/139/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/139", "id": 461024112, "node_id": "MDU6SXNzdWU0NjEwMjQxMTI=", "number": 139, "title": "hashivault_approle_role_create does not support path option version=< 3.17.7", "user": {"login": "codeselim", "id": 3070801, "node_id": "MDQ6VXNlcjMwNzA4MDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3070801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codeselim", "html_url": "https://github.com/codeselim", "followers_url": "https://api.github.com/users/codeselim/followers", "following_url": "https://api.github.com/users/codeselim/following{/other_user}", "gists_url": "https://api.github.com/users/codeselim/gists{/gist_id}", "starred_url": "https://api.github.com/users/codeselim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codeselim/subscriptions", "organizations_url": "https://api.github.com/users/codeselim/orgs", "repos_url": "https://api.github.com/users/codeselim/repos", "events_url": "https://api.github.com/users/codeselim/events{/privacy}", "received_events_url": "https://api.github.com/users/codeselim/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-26T15:00:05Z", "updated_at": "2019-08-14T21:44:38Z", "closed_at": "2019-08-14T21:44:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "The hashivault_approle_role_create does not allow a user to specify an auth path different than the default one. The path that is used is the default one \"approle\"\r\nUsing version: 3.17.7\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/138", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/138/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/138/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/138", "id": 458135109, "node_id": "MDU6SXNzdWU0NTgxMzUxMDk=", "number": 138, "title": "No line feed at the end of the last line when issuing a certificate from vault", "user": {"login": "libussa", "id": 13407183, "node_id": "MDQ6VXNlcjEzNDA3MTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/13407183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/libussa", "html_url": "https://github.com/libussa", "followers_url": "https://api.github.com/users/libussa/followers", "following_url": "https://api.github.com/users/libussa/following{/other_user}", "gists_url": "https://api.github.com/users/libussa/gists{/gist_id}", "starred_url": "https://api.github.com/users/libussa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/libussa/subscriptions", "organizations_url": "https://api.github.com/users/libussa/orgs", "repos_url": "https://api.github.com/users/libussa/repos", "events_url": "https://api.github.com/users/libussa/events{/privacy}", "received_events_url": "https://api.github.com/users/libussa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-19T17:29:12Z", "updated_at": "2019-07-06T15:01:51Z", "closed_at": "2019-07-06T15:01:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using `hashivault_write` to issue a certificate from a pki, the files I get lack an end-of-line character in the last line. This causes issues when using those files (for example when needing to concatenate them)\r\n\r\nThis is the roles I'm using:\r\n\r\n```\r\n- name: Issue certificates from Vault\r\n  become: false\r\n  hashivault_write:\r\n    secret: \"/my_pki/issue/server-certificate\"\r\n    data:\r\n      common_name: \"{{ inventory_hostname }}\"\r\n      format: \"pem\"\r\n      ttl: \"8670h\"\r\n      alt_names: \"{{ alt_names_list |unique|join(',') }}\"\r\n      ip_sans: \"{{ ip_sans_list |unique|join(',') }}\"\r\n  delegate_to: localhost\r\n  register: certificate_issue\r\n\r\n- name: Write data to another variable\r\n  set_fact:\r\n    certificate_issue_data={{ certificate_issue.data }}\r\n\r\n- name: Write server certificate\r\n  copy: \r\n    content: \"{{ certificate_issue_data.data.certificate }}\"\r\n    dest: \"/etc/ssl/certs/{{ inventory_hostname_short }}.crt\" \r\n    mode: \"u=rw,g=r,o=r\" \r\n    owner: \"root\"\r\n    group: \"root\"\r\n\r\n- name: Write server key\r\n  copy: \r\n    content: \"{{ certificate_issue_data.data.certificate }}\"\r\n    dest: \"/etc/ssl/certs/{{ inventory_hostname_short }}.key\" \r\n    mode: \"u=rw,g=r,o=r\" \r\n    owner: \"root\"\r\n    group: \"root\"\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/137", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/137/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/137/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/137", "id": 455842830, "node_id": "MDU6SXNzdWU0NTU4NDI4MzA=", "number": 137, "title": "Sphinx doc build broken", "user": {"login": "TerryHowe", "id": 104113, "node_id": "MDQ6VXNlcjEwNDExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/104113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TerryHowe", "html_url": "https://github.com/TerryHowe", "followers_url": "https://api.github.com/users/TerryHowe/followers", "following_url": "https://api.github.com/users/TerryHowe/following{/other_user}", "gists_url": "https://api.github.com/users/TerryHowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/TerryHowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TerryHowe/subscriptions", "organizations_url": "https://api.github.com/users/TerryHowe/orgs", "repos_url": "https://api.github.com/users/TerryHowe/repos", "events_url": "https://api.github.com/users/TerryHowe/events{/privacy}", "received_events_url": "https://api.github.com/users/TerryHowe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-13T16:39:16Z", "updated_at": "2019-07-24T16:25:10Z", "closed_at": "2019-07-24T16:25:10Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\nSphinx parallel build error:\r\nRecursionError: maximum recursion depth exceeded while calling a Python object\r\nmake[1]: *** [html] Error 2\r\nmake[1]: Leaving directory `/home/travis/build/TerryHowe/ansible-modules-hashivault/ansible-repo/ansible/docs/docsite'\r\nmake: *** [htmldocs] Error 2\r\ntravis_time:end:1481ed38:start=1560435487295156204,finish=1560435612083481322,duration=124788325118\r\n\u001b[0K\u001b[31;1mThe command \"make webdocs .\" exited with 2.\u001b[0m\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/136", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/136/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/136/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/136", "id": 455407396, "node_id": "MDU6SXNzdWU0NTU0MDczOTY=", "number": 136, "title": "approle_role_create is not idempotent", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-12T20:24:02Z", "updated_at": "2019-08-14T15:32:15Z", "closed_at": "2019-08-14T15:31:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```yaml\r\n- name: approle\r\n  hashivault_approle_role_create:\r\n    name: template\r\n    bind_secret_id: true\r\n    bound_cidr_list: []\r\n    secret_id_num_uses: 0\r\n    secret_id_ttl: 0\r\n    token_num_uses: 0\r\n    token_ttl: \"10m\"\r\n    token_max_ttl: \"15m\"\r\n    period: \"\"\r\n    enable_local_secret_ids: false\r\n    policies: [\"default\", \"secret_rw\"]\r\n```\r\n\r\nrun 1\r\n```\r\nTASK [namespace : approle] ********************************\r\nchanged: [localhost]\r\n```\r\n\r\nrun 2\r\n```\r\nTASK [namespace : approle] ********************************\r\nchanged: [localhost]\r\n```\r\n\r\nhopefully i can investigate at some point but documenting for now\r\n\r\n*bonus issue: doesnt support `mount_point`\r\n\r\nwould be nice if it took a arguments as a file too", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/135", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/135/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/135/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/135", "id": 453042967, "node_id": "MDU6SXNzdWU0NTMwNDI5Njc=", "number": 135, "title": "use no_log=True for sensitive module parameters", "user": {"login": "Andrean", "id": 203854, "node_id": "MDQ6VXNlcjIwMzg1NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/203854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andrean", "html_url": "https://github.com/Andrean", "followers_url": "https://api.github.com/users/Andrean/followers", "following_url": "https://api.github.com/users/Andrean/following{/other_user}", "gists_url": "https://api.github.com/users/Andrean/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andrean/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andrean/subscriptions", "organizations_url": "https://api.github.com/users/Andrean/orgs", "repos_url": "https://api.github.com/users/Andrean/repos", "events_url": "https://api.github.com/users/Andrean/events{/privacy}", "received_events_url": "https://api.github.com/users/Andrean/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-06T13:51:39Z", "updated_at": "2019-07-24T18:30:30Z", "closed_at": "2019-07-24T18:30:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nIf I run playbook in verbose mode or if playbook failed on tasks hashivault_write something, ansible shows all sensitive information in log, including contents if 'data', 'password', 'token'\r\n\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"authtype\": \"userpass\",\r\n            \"ca_cert\": \"\",\r\n            \"ca_path\": \"\",\r\n            \"client_cert\": \"\",\r\n            \"client_key\": \"\",\r\n            \"data\": {\r\n                \"key1\": \"SENSITIVE_INFORMATION\",\r\n                \"key2\": \"SENSITIVE_INFORMATION\",\r\n                \"key3\": \"SENSITIVE_INFORMATION\"\r\n            },\r\n            \"mount_point\": \"secret\",\r\n            \"namespace\": null,\r\n            \"password\": \"SENSITIVE_INFORMATION\",\r\n            \"role_id\": \"\",\r\n            \"secret\": \"my/path/to/secret\",\r\n            \"secret_id\": \"\",\r\n            \"token\": \"SENSITIVE_INFORMATION\",\r\n            \"update\": true,\r\n            \"url\": \"http://vault.localhost\",\r\n            \"username\": \"user\",\r\n            \"verify\": true,\r\n            \"version\": 2\r\n     }\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/134", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/134/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/134/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/134", "id": 451678608, "node_id": "MDU6SXNzdWU0NTE2Nzg2MDg=", "number": 134, "title": "hashivault_auth_method doesnt check for config idempotence", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-03T20:38:23Z", "updated_at": "2019-06-18T17:13:55Z", "closed_at": "2019-06-18T17:13:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "im not checking the config of the current auth method vs desired auth method..\r\n\r\nill push a change in the next couple weeks if no one else does", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/131", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/131/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/131/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/131", "id": 448143051, "node_id": "MDU6SXNzdWU0NDgxNDMwNTE=", "number": 131, "title": "hashivault_auth_disable doesnt exist", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-24T12:24:53Z", "updated_at": "2019-05-31T03:28:38Z", "closed_at": "2019-05-31T03:28:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "we need an auth disable module, at the very least for testing\r\n\r\npersonally, i recommend just adding `hashivault_auth_backend` and include a `{'state': 'enabled' or 'disabled'}`\r\n\r\ni can add this to my todo list if you're okay with that design implementation", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/129", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/129/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/129/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/129", "id": 445075061, "node_id": "MDU6SXNzdWU0NDUwNzUwNjE=", "number": 129, "title": "azure and database modules", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-16T17:29:25Z", "updated_at": "2019-06-18T17:12:45Z", "closed_at": "2019-06-18T17:12:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "hey terry,\r\n\r\nI'm working on some azure and database modules:\r\n- ~azure secrets engine config - `hashivault_azure_secret_engine_config`~ https://github.com/TerryHowe/ansible-modules-hashivault/pull/130\r\n- ~azure secrets engine role write - `hashivault_azure_secret_engine_role`~ https://github.com/TerryHowe/ansible-modules-hashivault/pull/130\r\n- ~azure auth config - `hashivault_azure_auth_config`~ https://github.com/TerryHowe/ansible-modules-hashivault/pull/132\r\n- ~azure auth role write - `hashivault_azure_auth_role`~ https://github.com/TerryHowe/ansible-modules-hashivault/pull/132\r\n- ~database config - `hashivault_database_config`~ https://github.com/TerryHowe/ansible-modules-hashivault/pull/133\r\n- ~database role- `hashivault_database_role`~ https://github.com/TerryHowe/ansible-modules-hashivault/pull/133\r\n\r\nI wanted to ask for consensus in naming (above) and also spread awareness that im working on these. \r\n\r\nall will take either parameters or a json file containing the required params\r\n\r\nfinally, im not sure how we'll fully test the database config since it would actually require a database to exist in test env but ill try to get as much testing as possible\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/122", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/122/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/122/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/122", "id": 426455119, "node_id": "MDU6SXNzdWU0MjY0NTUxMTk=", "number": 122, "title": "Lease information to hashivault_read result", "user": {"login": "eeroniemi", "id": 1384231, "node_id": "MDQ6VXNlcjEzODQyMzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1384231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eeroniemi", "html_url": "https://github.com/eeroniemi", "followers_url": "https://api.github.com/users/eeroniemi/followers", "following_url": "https://api.github.com/users/eeroniemi/following{/other_user}", "gists_url": "https://api.github.com/users/eeroniemi/gists{/gist_id}", "starred_url": "https://api.github.com/users/eeroniemi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eeroniemi/subscriptions", "organizations_url": "https://api.github.com/users/eeroniemi/orgs", "repos_url": "https://api.github.com/users/eeroniemi/repos", "events_url": "https://api.github.com/users/eeroniemi/events{/privacy}", "received_events_url": "https://api.github.com/users/eeroniemi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-28T12:03:53Z", "updated_at": "2019-04-05T21:56:17Z", "closed_at": "2019-04-05T21:55:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using Vault to to generate GCP service accounts (https://www.vaultproject.io/docs/secrets/gcp/index.html), and my plan was to use this module to create and manage these created keys. It looks like hashivault_read module's response is missing critical lease information (lease_id) so that I could accomplish my goal (renewing the tokens in crontab).\r\n\r\nFor example, if I create new service account using Vault CLI I get the lease_id:\r\n\r\n```\r\nvault read gcp/key/testkey\r\nKey                 Value\r\n---                 -----\r\nlease_id            gcp/key/testkey/rLArJn3j1dLpEgRuYAhz1dbw\r\nlease_duration      10m\r\nlease_renewable     true\r\nkey_algorithm       KEY_ALG_RSA_2048\r\nkey_type            TYPE_GOOGLE_CREDENTIALS_FILE\r\nprivate_key_data    ewogICJ0eXBlIjogInNlcnZp...\r\n```\r\n\r\nBut when I do the same with hashivault_read Ansible module:\r\n\r\n```\r\n- name: Create service account key\r\n  hashivault_read:\r\n    secret: \"key/testkey\"\r\n    mount_point: \"gcp\"\r\n```\r\n\r\nThe result is missing lease_id:\r\n\r\n```\r\nTASK [vault-credential-key : debug service account key] ************************************************************************************************************************************************************************************************************************\r\nok: [127.0.0.1] => {\r\n    \"msg\": {\r\n        \"changed\": false, \r\n        \"failed\": false, \r\n        \"rc\": 0, \r\n        \"value\": {\r\n            \"key_algorithm\": \"KEY_ALG_RSA_2048\", \r\n            \"key_type\": \"TYPE_GOOGLE_CREDENTIALS_FILE\", \r\n            \"private_key_data\": \"ewogICJ0eXBlIjogInNlcnZp...\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt looks like the Python HVAC library provides this information, with this kind of Python test script:\r\n\r\n```\r\nvault_client = hvac.Client(url=vault_url, token=vault_token, timeout=3, verify=vault_verify, cert=vault_cert)\r\nkey_path = 'gcp/key/testkey'\r\ndata = vault_client.read(key_path)\r\nprint(data)\r\n```\r\n\r\nData has lease_id:\r\n\r\n\r\n```\r\n{u'lease_id': u'gcp/key/testkey/LDBb2ziaPZmRN22TaTVD3Lji', u'warnings': None, u'wrap_info': None, u'auth': None, u'lease_duration': 600, u'request_id': u'9c72cc7c-9139-9c1e-347a-6ac134abc426', u'data': {u'key_type': u'TYPE_GOOGLE_CREDENTIALS_FILE', u'key_algorithm': u'KEY_ALG_RSA_2048', u'private_key_data': u'ewogICJ0eXBlIjogInNlcnZp...'}, u'renewable': True}\r\n```\r\n\r\nIt would be nice to get this lease_id (and maybe other metadata also, lease duration etc?) into hashivault_read result.\r\n\r\nThis looks like quite simple code change in ansible.module_utils.hashivault.hashivault_read function ([here](https://github.com/TerryHowe/ansible-modules-hashivault/blob/3a8b735a7cfe97e71dd1aaa5951cf1078ce7e1b3/ansible/module_utils/hashivault.py#L126-L188)) and I could probably help by providing PR, but I'm not totally sure what would be correct place for this information, inside \"value\" dict or somewhere else?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/121", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/121/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/121/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/121", "id": 425513922, "node_id": "MDU6SXNzdWU0MjU1MTM5MjI=", "number": 121, "title": "Add pep8 tox support for Travis etc", "user": {"login": "TerryHowe", "id": 104113, "node_id": "MDQ6VXNlcjEwNDExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/104113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TerryHowe", "html_url": "https://github.com/TerryHowe", "followers_url": "https://api.github.com/users/TerryHowe/followers", "following_url": "https://api.github.com/users/TerryHowe/following{/other_user}", "gists_url": "https://api.github.com/users/TerryHowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/TerryHowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TerryHowe/subscriptions", "organizations_url": "https://api.github.com/users/TerryHowe/orgs", "repos_url": "https://api.github.com/users/TerryHowe/repos", "events_url": "https://api.github.com/users/TerryHowe/events{/privacy}", "received_events_url": "https://api.github.com/users/TerryHowe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-26T16:12:43Z", "updated_at": "2019-03-28T16:12:04Z", "closed_at": "2019-03-28T16:12:04Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I recently had a problem that would have been avoided if pep8 tests were working.  Add pep8 tests to tox, Travis and clean up the code so it passes a pep8 test.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/120", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/120/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/120/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/120", "id": 425447939, "node_id": "MDU6SXNzdWU0MjU0NDc5Mzk=", "number": 120, "title": "Update the upload.sh script to use Twine", "user": {"login": "TerryHowe", "id": 104113, "node_id": "MDQ6VXNlcjEwNDExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/104113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TerryHowe", "html_url": "https://github.com/TerryHowe", "followers_url": "https://api.github.com/users/TerryHowe/followers", "following_url": "https://api.github.com/users/TerryHowe/following{/other_user}", "gists_url": "https://api.github.com/users/TerryHowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/TerryHowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TerryHowe/subscriptions", "organizations_url": "https://api.github.com/users/TerryHowe/orgs", "repos_url": "https://api.github.com/users/TerryHowe/repos", "events_url": "https://api.github.com/users/TerryHowe/events{/privacy}", "received_events_url": "https://api.github.com/users/TerryHowe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-26T14:21:05Z", "updated_at": "2019-04-05T20:27:06Z", "closed_at": "2019-04-05T20:27:06Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Upload using https://pypi.org/p/twine/ \r\n\r\nAlso use double quotes on that $VERSION echo.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/118", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/118/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/118/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/118", "id": 415816894, "node_id": "MDU6SXNzdWU0MTU4MTY4OTQ=", "number": 118, "title": "Approle authentication fails to set token for hvac kv2 calls", "user": {"login": "nathkn", "id": 41593086, "node_id": "MDQ6VXNlcjQxNTkzMDg2", "avatar_url": "https://avatars2.githubusercontent.com/u/41593086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathkn", "html_url": "https://github.com/nathkn", "followers_url": "https://api.github.com/users/nathkn/followers", "following_url": "https://api.github.com/users/nathkn/following{/other_user}", "gists_url": "https://api.github.com/users/nathkn/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathkn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathkn/subscriptions", "organizations_url": "https://api.github.com/users/nathkn/orgs", "repos_url": "https://api.github.com/users/nathkn/repos", "events_url": "https://api.github.com/users/nathkn/events{/privacy}", "received_events_url": "https://api.github.com/users/nathkn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-02-28T20:49:46Z", "updated_at": "2019-03-02T18:43:29Z", "closed_at": "2019-03-02T18:43:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following playbook will fail in the latest version of the module (3.16.1)\r\n```yaml\r\n- hosts: localhost\r\n  environment:\r\n    VAULT_AUTH_TYPE: approle\r\n    VAULT_SECRET_ID: secret-id\r\n    VAULT_ROLE_ID: role-id\r\n  tasks:\r\n    - hashivault_read:\r\n        secret: test\r\n        key: value\r\n        version: 2\r\n```\r\n\r\n```json\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"authtype\": \"token\", \r\n            \"ca_cert\": \"\", \r\n            \"ca_path\": \"\", \r\n            \"client_cert\": \"\", \r\n            \"client_key\": \"\", \r\n            \"default\": null, \r\n            \"key\": \"value\", \r\n            \"mount_point\": \"secret\", \r\n            \"namespace\": null, \r\n            \"password\": \"\", \r\n            \"register\": null, \r\n            \"role_id\": \"r\", \r\n            \"secret\": \"test\", \r\n            \"secret_id\": \"s\", \r\n            \"token\": \"\", \r\n            \"url\": \"http://127.0.0.1:8200\", \r\n            \"username\": \"\", \r\n            \"verify\": true, \r\n            \"version\": 2\r\n        }\r\n    }, \r\n    \"msg\": \"Error InvalidRequest(missing client token) reading secret/test\", \r\n    \"rc\": 1\r\n}\r\n```\r\n\r\nThis is due to the approle login only being performed on callable attribute's, while the hvac kv2 library actually makes a call on a subclass `secrets.kv.v2`:\r\n\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/167af5ee194ec9bf31c8cf97129b45ad7d7635ad/ansible/module_utils/hashivault.py#L149\r\n\r\nMeaning the approle auth is never performed, and the client request is made without a token.\r\n\r\nI believe this also applies to other examples where a subclass is called, i.e. `client.sys.*`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/116", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/116/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/116/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/116", "id": 414607021, "node_id": "MDU6SXNzdWU0MTQ2MDcwMjE=", "number": 116, "title": "hashivault_init should accept recovery_shares and recovery_threshold as arguments", "user": {"login": "kdask", "id": 2042045, "node_id": "MDQ6VXNlcjIwNDIwNDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2042045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdask", "html_url": "https://github.com/kdask", "followers_url": "https://api.github.com/users/kdask/followers", "following_url": "https://api.github.com/users/kdask/following{/other_user}", "gists_url": "https://api.github.com/users/kdask/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdask/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdask/subscriptions", "organizations_url": "https://api.github.com/users/kdask/orgs", "repos_url": "https://api.github.com/users/kdask/repos", "events_url": "https://api.github.com/users/kdask/events{/privacy}", "received_events_url": "https://api.github.com/users/kdask/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-26T13:18:49Z", "updated_at": "2019-03-02T16:17:38Z", "closed_at": "2019-03-02T16:17:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently it's not possible to initialize vault with configured autounseal using `hashivault_init`. \r\n\r\nI've tested it with [awskms seal](https://learn.hashicorp.com/vault/operations/ops-autounseal-aws-kms) :\r\n\r\n**_vault.hcl_**\r\n```\r\nbackend \"consul\" {\r\n  address = \"127.0.0.1:8500\"\r\n  advertise_addr = \"http://1.2.3.4:8200\"\r\n  path = \"vault\"\r\n  scheme = \"http\"\r\n}\r\n\r\nlistener \"tcp\" {\r\n  address = \"0.0.0.0:8200\"\r\n  tls_disable = 1\r\n}\r\n\r\nseal \"awskms\" {\r\n  kms_key_id = \"alias/vault\"\r\n  region     = \"us-west-2\"\r\n}\r\n\r\ndisable_mlock = 1\r\n```\r\n\r\n**_Ansible task:_**\r\n```\r\n- name: Initialize\r\n  hashivault_init:\r\n    url: \"http://1.2.3.4:8200\"\r\n```\r\n\r\nWhen running it, I'm getting the following error:\r\n```    \r\n    TASK [vault : Initialize] ******************************************************\r\n    fatal: [vault-1]: FAILED! => changed=false \r\n      msg: 'Exception: recovery configuration must specify a positive number of shares'\r\n      rc: 1\r\n```\r\n\r\nBut `hashivault_init` doesn't accept [recovery_shares](https://www.vaultproject.io/api/system/init.html#recovery_shares) and [recovery_threshold](https://www.vaultproject.io/api/system/init.html#recovery_threshold) as parameters.\r\n\r\n**_CLI works as expected:_**\r\n```\r\n$ vault operator init\r\nRecovery Key 1: tRwgdu0eM6x4JSJr3f4uhQjsOdHDUCXc2jkb9QEF15Px\r\n<...>\r\nRecovery Key 5: qpcm5081oVKNtFuClT9Gxvw8Vht34n/h4Gw9UnZLEqSV\r\n\r\nInitial Root Token: <...>\r\n\r\nSuccess! Vault is initialized\r\n\r\nRecovery key initialized with 5 key shares and a key threshold of 3. Please\r\nsecurely distribute the key shares printed above.\r\n```\r\n\r\n**Note:** currently there is another opened issue in **hvac** which makes it impossible to pass `recovery_shares` and `recovery_threshold` to Vault API: https://github.com/hvac/hvac/issues/394", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/115", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/115/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/115/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/115", "id": 410874614, "node_id": "MDU6SXNzdWU0MTA4NzQ2MTQ=", "number": 115, "title": "enable auth leads to missing client token error", "user": {"login": "Sam-Mumm", "id": 8766836, "node_id": "MDQ6VXNlcjg3NjY4MzY=", "avatar_url": "https://avatars3.githubusercontent.com/u/8766836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sam-Mumm", "html_url": "https://github.com/Sam-Mumm", "followers_url": "https://api.github.com/users/Sam-Mumm/followers", "following_url": "https://api.github.com/users/Sam-Mumm/following{/other_user}", "gists_url": "https://api.github.com/users/Sam-Mumm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sam-Mumm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sam-Mumm/subscriptions", "organizations_url": "https://api.github.com/users/Sam-Mumm/orgs", "repos_url": "https://api.github.com/users/Sam-Mumm/repos", "events_url": "https://api.github.com/users/Sam-Mumm/events{/privacy}", "received_events_url": "https://api.github.com/users/Sam-Mumm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-15T17:40:34Z", "updated_at": "2019-02-25T23:30:47Z", "closed_at": "2019-02-25T23:30:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI use the following configuration:\r\n\r\n- ansible==2.7.7\r\n- ansible-modules-hashivault==3.16.0\r\n- hashicorp vault:  0.11.4\r\n\r\nand I don't know if I used wrong or I found a bug but when I try:\r\n\r\n```\r\n- name: Enable LDAP Authentifikation\r\n  hashivault_auth_enable:\r\n    name: \"ldap\"\r\n    url: \"https://vault.example.com:8200\"\r\n    ca_cert: \"/etc/vault/ssl/materna-chain.crt\"\r\n    client_cert: \"/etc/vault/ssl/vault.example.crt\"\r\n    client_key: \"/etc/vault/ssl/vault.example.key\"\r\n    token: \"k6shEQnNK7o6g85ql1y98eQI\"\r\n    authtype: ldap\r\n```\r\n\r\nI get the error:\r\n\r\n`fatal: [alm-k8s-2.materna.de]: FAILED! => {\"changed\": false, \"msg\": \"Exception: missing client token\", \"rc\": 1}`\r\n\r\nthe strange thing is if I try another operation e.g. creating a policy it works. Maybe someone here can give me a hint what I am doing wrong or confirm the bug.\r\nbest regards\r\nDan\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/114", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/114/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/114/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/114", "id": 406586120, "node_id": "MDU6SXNzdWU0MDY1ODYxMjA=", "number": 114, "title": "hashivault_write returning bad json", "user": {"login": "SamyCoenen", "id": 11629856, "node_id": "MDQ6VXNlcjExNjI5ODU2", "avatar_url": "https://avatars1.githubusercontent.com/u/11629856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SamyCoenen", "html_url": "https://github.com/SamyCoenen", "followers_url": "https://api.github.com/users/SamyCoenen/followers", "following_url": "https://api.github.com/users/SamyCoenen/following{/other_user}", "gists_url": "https://api.github.com/users/SamyCoenen/gists{/gist_id}", "starred_url": "https://api.github.com/users/SamyCoenen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SamyCoenen/subscriptions", "organizations_url": "https://api.github.com/users/SamyCoenen/orgs", "repos_url": "https://api.github.com/users/SamyCoenen/repos", "events_url": "https://api.github.com/users/SamyCoenen/events{/privacy}", "received_events_url": "https://api.github.com/users/SamyCoenen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-05T00:55:20Z", "updated_at": "2019-02-05T07:25:26Z", "closed_at": "2019-02-05T07:25:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A recent change is breaking Dicts in Ansible, see https://github.com/TerryHowe/ansible-modules-hashivault/commit/80bdfcbadf04787a11a1ac4a47ac01679b4e321b#diff-f0f16be345082eef03028bc8e7f78502R196\r\nExample output: \r\n```\r\n\"data\": \"{'request_id': '9008f409-6c17-1247-e816-7e281f522828', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'csr': '-----BEGIN CERTIFICATE REQUEST-----\\\\nMIICfsdafasdfsaAwNzE1MDMGA1UEAxMsRGlnaXfdasfsWF0ZSBD\\\\nZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK\\\\nAoIBAQDAHKKtc795TOz/gFe+kGZpaEOeHS2TzrzMkgbgcJauolQwnlUyRvNrbbPx\\\\nXJeiYG5ok+Xa5z/VVo3gnUVkynPK2jYzVI86cmAJs2mgvfrVvR42cdIwksek4daq\\\\nyuOJ2vMIAxFIAH54pfdsafsdafdsafKZiO8qa1xVO85ZOoVXfeLxGJZ+IZT+9ooZ\\\\nOIZyb9tBqO+FLaTpvW5rZadsfsdfasfddfQYuFuRD/DyRTIpc0KE3YzIeGnwYI\\\\nTOn+/IMiwCzoCUqM6zN9S9U4WVdwQhCAStUL3sWo7Ols+TbqEv2a9fzN/YWI30EJ\\\\nGf63uuZPPmyKhDD+C8iTT2bktZLzAgMBAAGgADANBgkqhkiG9w0BAQsFAAOCAQEA\\\\nW8Sva/OLk35T+uUMwzlJTy8s1SIFdaw52Z1Xlfadsfsadf59VqOGiNKQEq/h4lg\\\\n/ridfFtdyXuy6NPSBZa8jsHLk6I6L7Nbz5TGO826IiFnHTXyKrsX2ZGmc8XvBCv8\\\\nU+PBaAQF8/1JQSAyjKTSj6ZpvnEbfasdfdsfashuo6oOcL2kV+FvAoAA9rtAZHqU\\\\nODzT8wUuXgwR2SrvpGpkUOzBpTbQp6MjUVvj60Zo6MtT3eeNdM7RZCY01aYuRimk\\\\nOITm5hc1kRTvSeW3u6/qhT6KWJ49sDbXL97ENGaFyF4HQ+/8F7XL5wjWidW4LJKp\\\\n8qGat3pp1sOjTFdRInFoCg==\\\\n-----END CERTIFICATE REQUEST-----'}, 'wrap_info': None, 'warnings': None, 'auth': None}\",\r\n```\r\n\r\nUsing release 3.12 for now", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/113", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/113/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/113/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/113", "id": 404846746, "node_id": "MDU6SXNzdWU0MDQ4NDY3NDY=", "number": 113, "title": "3.12.1 doesnt include the PR changes for version param", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-01-30T16:13:53Z", "updated_at": "2019-01-31T15:27:18Z", "closed_at": "2019-01-30T18:15:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "take a look at the tag 3.12.1 files and look at the `hashivault_write.py`. that file doesn't include the new `version` parameter. seems like something went bad during packaging", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/104", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/104/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/104/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/104", "id": 387796218, "node_id": "MDU6SXNzdWUzODc3OTYyMTg=", "number": 104, "title": "Check if key is already set", "user": {"login": "ushacow", "id": 11769880, "node_id": "MDQ6VXNlcjExNzY5ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/11769880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ushacow", "html_url": "https://github.com/ushacow", "followers_url": "https://api.github.com/users/ushacow/followers", "following_url": "https://api.github.com/users/ushacow/following{/other_user}", "gists_url": "https://api.github.com/users/ushacow/gists{/gist_id}", "starred_url": "https://api.github.com/users/ushacow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ushacow/subscriptions", "organizations_url": "https://api.github.com/users/ushacow/orgs", "repos_url": "https://api.github.com/users/ushacow/repos", "events_url": "https://api.github.com/users/ushacow/events{/privacy}", "received_events_url": "https://api.github.com/users/ushacow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-05T14:59:53Z", "updated_at": "2018-12-17T18:12:36Z", "closed_at": "2018-12-17T18:12:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! \r\n\r\nAre there any check if key is already exist in vault when I'm using hashivault_write?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/101", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/101/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/101/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/101", "id": 387744786, "node_id": "MDU6SXNzdWUzODc3NDQ3ODY=", "number": 101, "title": "ansible-playbook: error: no such option: --authtype", "user": {"login": "MrAmbiG", "id": 11379625, "node_id": "MDQ6VXNlcjExMzc5NjI1", "avatar_url": "https://avatars3.githubusercontent.com/u/11379625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MrAmbiG", "html_url": "https://github.com/MrAmbiG", "followers_url": "https://api.github.com/users/MrAmbiG/followers", "following_url": "https://api.github.com/users/MrAmbiG/following{/other_user}", "gists_url": "https://api.github.com/users/MrAmbiG/gists{/gist_id}", "starred_url": "https://api.github.com/users/MrAmbiG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MrAmbiG/subscriptions", "organizations_url": "https://api.github.com/users/MrAmbiG/orgs", "repos_url": "https://api.github.com/users/MrAmbiG/repos", "events_url": "https://api.github.com/users/MrAmbiG/events{/privacy}", "received_events_url": "https://api.github.com/users/MrAmbiG/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-05T12:56:55Z", "updated_at": "2018-12-05T15:08:49Z", "closed_at": "2018-12-05T15:08:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is what I ran\r\n`ansible-playbook --authtype=approle vault_list.yaml`\r\nThe output was\r\n```\r\nUsage: ansible-playbook [options] playbook.yml [playbook2 ...]\r\n\r\nansible-playbook: error: no such option: --authtype\r\n\r\n```\r\nmodule name:- hashivault_list.py\r\nplaybook content:-\r\n```\r\n---\r\n- hosts: localhost\r\n  tasks:\r\n    - hashivault_list:\r\n        secret: '/<mypath>'\r\n      register: vault\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/99", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/99/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/99/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/99", "id": 378134804, "node_id": "MDU6SXNzdWUzNzgxMzQ4MDQ=", "number": 99, "title": "hvac 0.7.0 breaks hashivault_status", "user": {"login": "bootswithdefer", "id": 415790, "node_id": "MDQ6VXNlcjQxNTc5MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/415790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bootswithdefer", "html_url": "https://github.com/bootswithdefer", "followers_url": "https://api.github.com/users/bootswithdefer/followers", "following_url": "https://api.github.com/users/bootswithdefer/following{/other_user}", "gists_url": "https://api.github.com/users/bootswithdefer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bootswithdefer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bootswithdefer/subscriptions", "organizations_url": "https://api.github.com/users/bootswithdefer/orgs", "repos_url": "https://api.github.com/users/bootswithdefer/repos", "events_url": "https://api.github.com/users/bootswithdefer/events{/privacy}", "received_events_url": "https://api.github.com/users/bootswithdefer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-07T04:05:13Z", "updated_at": "2018-11-12T16:05:04Z", "closed_at": "2018-11-12T16:05:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "hvac 0.7.0 deprecated a lot of the API (see https://github.com/hvac/hvac/releases/tag/v0.7.0) and broke hashivault_status.\r\n\r\nChanging this line:\r\nhttps://github.com/TerryHowe/ansible-modules-hashivault/blob/77aa207583130b7dac0454f6244beb2f0576ce85/ansible/modules/hashivault/hashivault_status.py#L78\r\n\r\nto this fixed it for me:\r\n`return {'status': client.sys.read_seal_status()} `\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/98", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/98/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/98/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/98", "id": 373250714, "node_id": "MDU6SXNzdWUzNzMyNTA3MTQ=", "number": 98, "title": "AWS Support Multiple Auth Methods", "user": {"login": "TerryHowe", "id": 104113, "node_id": "MDQ6VXNlcjEwNDExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/104113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TerryHowe", "html_url": "https://github.com/TerryHowe", "followers_url": "https://api.github.com/users/TerryHowe/followers", "following_url": "https://api.github.com/users/TerryHowe/following{/other_user}", "gists_url": "https://api.github.com/users/TerryHowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/TerryHowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TerryHowe/subscriptions", "organizations_url": "https://api.github.com/users/TerryHowe/orgs", "repos_url": "https://api.github.com/users/TerryHowe/repos", "events_url": "https://api.github.com/users/TerryHowe/events{/privacy}", "received_events_url": "https://api.github.com/users/TerryHowe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-24T00:01:18Z", "updated_at": "2019-08-11T19:44:09Z", "closed_at": "2019-08-11T19:43:56Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://hvac.readthedocs.io/en/latest/usage/auth_methods/aws.html", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/95", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/95/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/95/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/95/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/95", "id": 368138869, "node_id": "MDU6SXNzdWUzNjgxMzg4Njk=", "number": 95, "title": "Example of getting secrets from kv via approle", "user": {"login": "samitpal", "id": 12378746, "node_id": "MDQ6VXNlcjEyMzc4NzQ2", "avatar_url": "https://avatars1.githubusercontent.com/u/12378746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samitpal", "html_url": "https://github.com/samitpal", "followers_url": "https://api.github.com/users/samitpal/followers", "following_url": "https://api.github.com/users/samitpal/following{/other_user}", "gists_url": "https://api.github.com/users/samitpal/gists{/gist_id}", "starred_url": "https://api.github.com/users/samitpal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samitpal/subscriptions", "organizations_url": "https://api.github.com/users/samitpal/orgs", "repos_url": "https://api.github.com/users/samitpal/repos", "events_url": "https://api.github.com/users/samitpal/events{/privacy}", "received_events_url": "https://api.github.com/users/samitpal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-09T10:16:59Z", "updated_at": "2018-10-11T12:38:50Z", "closed_at": "2018-10-11T12:38:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I did not see any mailing list to ask question, hence creating this issue.\r\n\r\nI'm interested in a playbook where I need to access secrets from KV using approle. Basically I want to login to the approle using role_id, secret_id and then from the token received (the token ) post a successful login I want to access the secret from KV. Is that workflow possible using this ansible module?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/93", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/93/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/93/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/93", "id": 365016758, "node_id": "MDU6SXNzdWUzNjUwMTY3NTg=", "number": 93, "title": "not able to create a branch", "user": {"login": "simonmacklin", "id": 31375533, "node_id": "MDQ6VXNlcjMxMzc1NTMz", "avatar_url": "https://avatars3.githubusercontent.com/u/31375533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonmacklin", "html_url": "https://github.com/simonmacklin", "followers_url": "https://api.github.com/users/simonmacklin/followers", "following_url": "https://api.github.com/users/simonmacklin/following{/other_user}", "gists_url": "https://api.github.com/users/simonmacklin/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonmacklin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonmacklin/subscriptions", "organizations_url": "https://api.github.com/users/simonmacklin/orgs", "repos_url": "https://api.github.com/users/simonmacklin/repos", "events_url": "https://api.github.com/users/simonmacklin/events{/privacy}", "received_events_url": "https://api.github.com/users/simonmacklin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-28T19:42:54Z", "updated_at": "2018-09-28T20:13:27Z", "closed_at": "2018-09-28T20:13:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\nHi \r\n\r\nI am sorry if this is the wrong place to put this.  I have started to write the code to allow the module to create AWS backed roles, but I am not able to push the branch I created locally up.\r\n\r\nKind Regards\r\n\r\nSimon \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/91", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/91/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/91/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/91", "id": 363731580, "node_id": "MDU6SXNzdWUzNjM3MzE1ODA=", "number": 91, "title": ".vault_token is read with the newline", "user": {"login": "danielmotaleite", "id": 11890049, "node_id": "MDQ6VXNlcjExODkwMDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/11890049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielmotaleite", "html_url": "https://github.com/danielmotaleite", "followers_url": "https://api.github.com/users/danielmotaleite/followers", "following_url": "https://api.github.com/users/danielmotaleite/following{/other_user}", "gists_url": "https://api.github.com/users/danielmotaleite/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielmotaleite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielmotaleite/subscriptions", "organizations_url": "https://api.github.com/users/danielmotaleite/orgs", "repos_url": "https://api.github.com/users/danielmotaleite/repos", "events_url": "https://api.github.com/users/danielmotaleite/events{/privacy}", "received_events_url": "https://api.github.com/users/danielmotaleite/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-25T19:27:09Z", "updated_at": "2018-09-29T13:42:41Z", "closed_at": "2018-09-29T13:42:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the module with the vault_token, it reads the file with the `\\n` and fails\r\nOne can strip that from the file, but the module should be flexible and ignore any newline, as vaut do. so this simple fix solve this issue:\r\n\r\n```\r\ndiff --git a/ansible/module_utils/hashivault.py b/ansible/module_utils/hashivault.py\r\nindex b548457..dc2d14a 100644\r\n--- a/ansible/module_utils/hashivault.py\r\n+++ b/ansible/module_utils/hashivault.py\r\n@@ -88,5 +88,5 @@ def hashivault_default_token():\r\n     token_file = os.path.expanduser('~/.vault-token')\r\n     if os.path.exists(token_file):\r\n         with open(token_file, 'r') as f:\r\n-            return f.read()\r\n+            return f.read().rstrip()\r\n     return ''\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/90", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/90/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/90/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/90", "id": 363210294, "node_id": "MDU6SXNzdWUzNjMyMTAyOTQ=", "number": 90, "title": "Allow use of hashivault without requiring root", "user": {"login": "danielmotaleite", "id": 11890049, "node_id": "MDQ6VXNlcjExODkwMDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/11890049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielmotaleite", "html_url": "https://github.com/danielmotaleite", "followers_url": "https://api.github.com/users/danielmotaleite/followers", "following_url": "https://api.github.com/users/danielmotaleite/following{/other_user}", "gists_url": "https://api.github.com/users/danielmotaleite/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielmotaleite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielmotaleite/subscriptions", "organizations_url": "https://api.github.com/users/danielmotaleite/orgs", "repos_url": "https://api.github.com/users/danielmotaleite/repos", "events_url": "https://api.github.com/users/danielmotaleite/events{/privacy}", "received_events_url": "https://api.github.com/users/danielmotaleite/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-24T15:55:39Z", "updated_at": "2018-11-12T16:06:41Z", "closed_at": "2018-11-12T16:06:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm have been trying trying to use hashivault as much as standalone as possible, ie: not requiring root to install hashivault and be able to run directly everything after a git clone... but i'm failing hard, ansible do not even search for the module in other places\r\n\r\ni did open a bug in ansible:\r\nhttps://github.com/ansible/ansible/issues/46004\r\n\r\nbut they report it's not possible right now... \r\n\r\nHave you any workaround for this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/87", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/87/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/87/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/87", "id": 359474280, "node_id": "MDU6SXNzdWUzNTk0NzQyODA=", "number": 87, "title": "Lookup plugin doesn't work with environment vars in tasks.", "user": {"login": "m4dm4rtig4n", "id": 7872518, "node_id": "MDQ6VXNlcjc4NzI1MTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/7872518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m4dm4rtig4n", "html_url": "https://github.com/m4dm4rtig4n", "followers_url": "https://api.github.com/users/m4dm4rtig4n/followers", "following_url": "https://api.github.com/users/m4dm4rtig4n/following{/other_user}", "gists_url": "https://api.github.com/users/m4dm4rtig4n/gists{/gist_id}", "starred_url": "https://api.github.com/users/m4dm4rtig4n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m4dm4rtig4n/subscriptions", "organizations_url": "https://api.github.com/users/m4dm4rtig4n/orgs", "repos_url": "https://api.github.com/users/m4dm4rtig4n/repos", "events_url": "https://api.github.com/users/m4dm4rtig4n/events{/privacy}", "received_events_url": "https://api.github.com/users/m4dm4rtig4n/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-09-12T13:13:37Z", "updated_at": "2018-10-07T22:13:12Z", "closed_at": "2018-10-07T22:13:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "When i set VAULT_ADDR directly in tasks with environment parameter, hashivault lookup plugin doesn't load vars.\r\n\r\nExemple :\r\n\r\n```\r\n    - name: USER Create User\r\n      tags: account_create_user\r\n      environment:\r\n        VAULT_ADDR: \"{{\u00a0vault.url }}\"\r\n        VAULT_TOKEN: \"{{\u00a0account_vault.root_token }}\"\r\n        VAULT_SKIP_VERIFY: true    \r\n      vars:\r\n        vault_path: \"/test/{{\u00a0item }}\"\r\n        vault_username: \"{{\u00a0lookup('hashivault', vault_path, 'username') }}\"\r\n        vault_password: \"{{\u00a0lookup('hashivault', vault_path, 'password') }}\"\r\n        vault_state:    \"{{\u00a0lookup('hashivault', vault_path, 'state') }}\"\r\n        vault_key:      \"{{\u00a0lookup('hashivault', vault_path, 'key') }}\"\r\n        account_home:   \"/home/{{ vault_username }}\"          \r\n      with_items: \"{{\u00a0account_group_fusion }}\"\r\n      user:\r\n        name:            \"{{ vault_username }}\"\r\n        comment:         \"{{ account_description }}\"\r\n        shell:           \"{{ account_shell }}\"\r\n        password:        \"{{\u00a0vault_password|password_hash('sha512') }}\"\r\n        groups:          \"{{ account_groups }}\"\r\n        createhome:      \"{{ account_createhome }}\"\r\n        home:            \"{{ account_home }}\"\r\n        state:           \"{{ vault_state }}\"\r\n        update_password: \"{{ account_reset_password }}\"\r\n```\r\n\r\nOutput : \r\n\r\n> An unhandled exception occurred while templating '{{\u00a0lookup('hashivault', vault_path, 'username') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'hashivault'. Error was a <class 'ansible.errors.AnsibleError'>, original message: Error reading vault /test/test@test.net/username: Exception: HTTPSConnectionPool(host='127.0.0.1', port=8200): Max retries exceeded with url: /v1/test/test@test.net (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x7fad10ef4b50>: Failed to establish a new connection: [Errno 111] Connection refused',))\r\n\r\nPS : vault.url  is not https://127.0.0.1:8200", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/84", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/84/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/84/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/84", "id": 356548308, "node_id": "MDU6SXNzdWUzNTY1NDgzMDg=", "number": 84, "title": "How do I enable github auth backend and assign policies to teams/users?", "user": {"login": "riuvshin", "id": 1636732, "node_id": "MDQ6VXNlcjE2MzY3MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1636732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/riuvshin", "html_url": "https://github.com/riuvshin", "followers_url": "https://api.github.com/users/riuvshin/followers", "following_url": "https://api.github.com/users/riuvshin/following{/other_user}", "gists_url": "https://api.github.com/users/riuvshin/gists{/gist_id}", "starred_url": "https://api.github.com/users/riuvshin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/riuvshin/subscriptions", "organizations_url": "https://api.github.com/users/riuvshin/orgs", "repos_url": "https://api.github.com/users/riuvshin/repos", "events_url": "https://api.github.com/users/riuvshin/events{/privacy}", "received_events_url": "https://api.github.com/users/riuvshin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-03T15:38:43Z", "updated_at": "2018-10-07T19:23:36Z", "closed_at": "2018-10-07T19:23:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, first of all I want to say thanks for the great module :)\r\n\r\nBut I need some help here... I stuck on getting github auth configured.\r\n\r\nI basically need few things:\r\n1) `vault write auth/github/config organization=my-awesome-org`\r\n2) `vault write auth/github/map/teams/default value=very-cool-policy-for-default-team-in-my-awesome-org`\r\n3) `vault write auth/github/map/users/developer value=very-cool-policy-for-user-developer-in-my-awesome-org`\r\n\r\n\r\nit basically should be covered by `hashivault_write` / `hashivault_read` as there is nothing special, but I do not see this covered in the docs so wonder if this is supported...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/83", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/83/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/83/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/83", "id": 355106418, "node_id": "MDU6SXNzdWUzNTUxMDY0MTg=", "number": 83, "title": "New release", "user": {"login": "Dudesons", "id": 3831949, "node_id": "MDQ6VXNlcjM4MzE5NDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/3831949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dudesons", "html_url": "https://github.com/Dudesons", "followers_url": "https://api.github.com/users/Dudesons/followers", "following_url": "https://api.github.com/users/Dudesons/following{/other_user}", "gists_url": "https://api.github.com/users/Dudesons/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dudesons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dudesons/subscriptions", "organizations_url": "https://api.github.com/users/Dudesons/orgs", "repos_url": "https://api.github.com/users/Dudesons/repos", "events_url": "https://api.github.com/users/Dudesons/events{/privacy}", "received_events_url": "https://api.github.com/users/Dudesons/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-29T10:57:34Z", "updated_at": "2018-08-29T14:44:08Z", "closed_at": "2018-08-29T14:44:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI would like to use the contribution added by this commit: https://github.com/TerryHowe/ansible-modules-hashivault/commit/f51143cf28e0d5bd2486e3eb13adb5d76387cdcd\r\nBut there is no release on pip with this commit.\r\n\r\n@TerryHowe do you have an ETA for the release generation ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/82", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/82/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/82/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/82", "id": 353872521, "node_id": "MDU6SXNzdWUzNTM4NzI1MjE=", "number": 82, "title": "Vault Secret Engine 2", "user": {"login": "willwh", "id": 398396, "node_id": "MDQ6VXNlcjM5ODM5Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/398396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willwh", "html_url": "https://github.com/willwh", "followers_url": "https://api.github.com/users/willwh/followers", "following_url": "https://api.github.com/users/willwh/following{/other_user}", "gists_url": "https://api.github.com/users/willwh/gists{/gist_id}", "starred_url": "https://api.github.com/users/willwh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willwh/subscriptions", "organizations_url": "https://api.github.com/users/willwh/orgs", "repos_url": "https://api.github.com/users/willwh/repos", "events_url": "https://api.github.com/users/willwh/events{/privacy}", "received_events_url": "https://api.github.com/users/willwh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 369965296, "node_id": "MDU6TGFiZWwzNjk5NjUyOTY=", "url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-08-24T17:49:03Z", "updated_at": "2018-10-07T19:55:10Z", "closed_at": "2018-10-07T19:55:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can do the following using the Vault CLI client:\r\n\r\n```\r\n$ vault kv list secret/certificates\r\nKeys\r\n----\r\ncert1.domain.com\r\ncert2.domain.com\r\ncert3.domain.com\r\n```\r\n\r\nMy Secret Engine config looks like so:\r\n\r\n![image](https://user-images.githubusercontent.com/398396/44599627-cad43e00-a78b-11e8-8b88-4015461ade1d.png)\r\n\r\nWith some tasks like so in play:\r\n\r\n```\r\ntasks:\r\n    - hashivault_list:\r\n        secret: 'secret/certificates'\r\n      register: cert_list\r\n      delegate_to: localhost\r\n    - debug:\r\n        var: cert_list\r\n```\r\n\r\nI would expect to have a list, however, it's empty:\r\n\r\n```\r\nTASK [debug] ********************************************************************************************************************************************************************************************************************************************************\r\nok: [nsdnginx1] => {\r\n    \"cert_list\": {\r\n        \"changed\": false, \r\n        \"failed\": false, \r\n        \"rc\": 0, \r\n        \"secrets\": []\r\n    }\r\n}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/81", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/81/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/81/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/81", "id": 353831391, "node_id": "MDU6SXNzdWUzNTM4MzEzOTE=", "number": 81, "title": "policy creation is not idempotent", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-24T15:33:07Z", "updated_at": "2018-08-31T13:29:58Z", "closed_at": "2018-08-31T13:29:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My playbook is simple: \r\n1. cat the contents of a *.hcl policy file and register to {{ file_contents }}\r\n2. create the policy using \"hashivault_policy_set\"\r\n   - name is derived from the policy file name (same name but minus the .hcl)\r\n   - content is derived from the {{ file_contents.stdout }}\r\n\r\n# error\r\n\r\n## successful run\r\n$ ansible-playbook tasks/set_policy/vault_set_policy.yml -i tasks/set_policy/inv -e \"policy_file=./policies/app_awx.hcl\"\r\n\r\nPLAY [all] **********************************\r\n\r\nTASK [cat file] ****************************\r\nchanged: [localhost -> localhost]\r\n\r\nTASK [set policy from file contents] **\r\nchanged: [localhost -> localhost]\r\n\r\nPLAY RECAP ****************************************\r\nlocalhost                  : ok=2    changed=2    unreachable=0    failed=0   \r\n\r\n## rerunning yields failure\r\n$ ansible-playbook tasks/set_policy/vault_set_policy.yml -i tasks/set_policy/inv -e \"policy_file=./policies/app_awx.hcl\"\r\n\r\nPLAY [all] *****************************************\r\n\r\nTASK [cat file] ********************************************\r\nchanged: [localhost -> localhost]\r\n\r\nTASK [set policy from file contents] ****************************************************\r\nfatal: [localhost -> localhost]: FAILED! => {\"changed\": false, \"msg\": \"Exception: u'rules'\", \"rc\": 1}\r\n\r\nPLAY RECAP *********************************************\r\nlocalhost                  : ok=1    changed=1    unreachable=0    failed=1\r\n\r\n# playbook\r\n\r\n```\r\n---\r\n\r\n- hosts: all\r\n  strategy: linear\r\n  gather_facts: false\r\n  tasks:\r\n\r\n  - name: cat file\r\n    local_action: shell cat \"{{ policy_file }}\"\r\n    register: file_contents\r\n\r\n  - name: set policy from file contents\r\n    hashivault_policy_set:\r\n      name: \"{{ (policy_file.split('.')[0]) | basename | string }}\"\r\n      rules: \"{{ file_contents.stdout }}\"\r\n    delegate_to: localhost\r\n```\r\n\r\n# verbose error\r\n```\r\nfatal: [localhost -> localhost]: FAILED! => {\r\n    \"changed\": false, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"authtype\": \"token\", \r\n            \"ca_cert\": \"\", \r\n            \"ca_path\": \"\", \r\n            \"client_cert\": \"\", \r\n            \"client_key\": \"\", \r\n            \"name\": \"app_awx\", \r\n            \"password\": \"\", \r\n            \"role_id\": \"\", \r\n            \"rules\": \"path \\\"secret/*\\\" { capabilities = [\\\"list\\\"] }\\n\\npath \\\"secret/data/lob/*\\\" { capabilities = [\\\"list\\\", \\\"read\\\", \\\"update\\\", \\\"create\\\", \\\"delete\\\"] }\\n\\npath \\\"secret/metadata/lob/*\\\" { capabilities = [\\\"list\\\", \\\"read\\\", \\\"delete\\\"] }\", \r\n            \"secret_id\": \"\", \r\n            \"token\": \"<my token>\", \r\n            \"url\": \"https://vault.example.com:8200\", \r\n            \"username\": \"\", \r\n            \"verify\": false\r\n        }\r\n    }, \r\n    \"msg\": \"Exception: u'rules'\", \r\n    \"rc\": 1\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/79", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/79/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/79/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/79", "id": 350757169, "node_id": "MDU6SXNzdWUzNTA3NTcxNjk=", "number": 79, "title": "Support \"options\" param in hashivault_secret_enable", "user": {"login": "devops2seedlink", "id": 24642964, "node_id": "MDQ6VXNlcjI0NjQyOTY0", "avatar_url": "https://avatars1.githubusercontent.com/u/24642964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devops2seedlink", "html_url": "https://github.com/devops2seedlink", "followers_url": "https://api.github.com/users/devops2seedlink/followers", "following_url": "https://api.github.com/users/devops2seedlink/following{/other_user}", "gists_url": "https://api.github.com/users/devops2seedlink/gists{/gist_id}", "starred_url": "https://api.github.com/users/devops2seedlink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devops2seedlink/subscriptions", "organizations_url": "https://api.github.com/users/devops2seedlink/orgs", "repos_url": "https://api.github.com/users/devops2seedlink/repos", "events_url": "https://api.github.com/users/devops2seedlink/events{/privacy}", "received_events_url": "https://api.github.com/users/devops2seedlink/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-15T10:16:22Z", "updated_at": "2018-08-18T12:19:36Z", "closed_at": "2018-08-18T12:19:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Vault released [key/value version 2](https://www.vaultproject.io/docs/secrets/kv/kv-v2.html) secret backend.\r\nAnd hvac client support \"options\" params in secret enable function since [0.6.1](https://github.com/hvac/hvac/releases/tag/v0.6.1).\r\nIs it possible to add \"options\" in hashivault_secret_enable command?\r\n\r\nI'm happy to create PR for this. Please see #80 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/78", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/78/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/78/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/78", "id": 346347949, "node_id": "MDU6SXNzdWUzNDYzNDc5NDk=", "number": 78, "title": "Environment variable confusion", "user": {"login": "Flybro", "id": 10743439, "node_id": "MDQ6VXNlcjEwNzQzNDM5", "avatar_url": "https://avatars1.githubusercontent.com/u/10743439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flybro", "html_url": "https://github.com/Flybro", "followers_url": "https://api.github.com/users/Flybro/followers", "following_url": "https://api.github.com/users/Flybro/following{/other_user}", "gists_url": "https://api.github.com/users/Flybro/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flybro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flybro/subscriptions", "organizations_url": "https://api.github.com/users/Flybro/orgs", "repos_url": "https://api.github.com/users/Flybro/repos", "events_url": "https://api.github.com/users/Flybro/events{/privacy}", "received_events_url": "https://api.github.com/users/Flybro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-31T20:35:07Z", "updated_at": "2018-08-01T08:06:26Z", "closed_at": "2018-08-01T08:06:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, Sorry if my question is kind of immature but I really stumbled accross the following error:\r\n\r\n```yaml\r\nfatal: [etc01]: FAILED! => {\r\n    \"changed\": false, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"authtype\": \"token\", \r\n            \"ca_cert\": \"\", \r\n            \"ca_path\": \"\", \r\n            \"client_cert\": \"\", \r\n            \"client_key\": \"\", \r\n            \"data\": {\r\n                \"certificates\": \"abc\"\r\n            }, \r\n            \"password\": \"\", \r\n            \"role_id\": \"\", \r\n            \"secret\": \"kafka\", \r\n            \"secret_id\": \"\", \r\n            \"token\": \"e75b7556-762d-ed89-1dca-9c3923187257\", \r\n            \"update\": false, \r\n            \"url\": \"\", \r\n            \"username\": \"\", \r\n            \"verify\": true\r\n        }\r\n    }, \r\n    \"msg\": \"Exception: Invalid URL '/v1/secret/kafka': No schema supplied. Perhaps you meant http:///v1/secret/kafka?\", \r\n    \"rc\": 1\r\n}\r\n```\r\nI'm trying to run playbook on remote machine. All neccessary variable are set but still no go. Looks like module is not reading env. The token is readed form .vault-token on remote machine instead from env.\r\nThis is how I run it:\r\n\r\n```yaml\r\nansible-playbook -i poc.inv -e VAULT_ADDR=https://bunsen:8200 -e VAULT_TOKEN=e75b7556-762d-ed89-1dca-9c3923187258 poc.yml\r\n```\r\npoc.yml\r\n```yaml\r\n---\r\n- hosts: poc\r\n  roles:\r\n    - vault\r\n```\r\n\r\nmain.yml:\r\n```yaml\r\n---\r\n- name: Write secrets\r\n  hashivault_write:\r\n    secret: 'kafka'\r\n    data:\r\n      certificates: 'abc'\r\n  register: 'vault_write'\r\n```\r\n\r\nAny thoughts about how it should be done, please?\r\nCheers,\r\nBB", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/74", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/74/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/74/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/74", "id": 338328561, "node_id": "MDU6SXNzdWUzMzgzMjg1NjE=", "number": 74, "title": "hashivault_token_create does not work with authtype: approle", "user": {"login": "philippwiesner", "id": 3457660, "node_id": "MDQ6VXNlcjM0NTc2NjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3457660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philippwiesner", "html_url": "https://github.com/philippwiesner", "followers_url": "https://api.github.com/users/philippwiesner/followers", "following_url": "https://api.github.com/users/philippwiesner/following{/other_user}", "gists_url": "https://api.github.com/users/philippwiesner/gists{/gist_id}", "starred_url": "https://api.github.com/users/philippwiesner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philippwiesner/subscriptions", "organizations_url": "https://api.github.com/users/philippwiesner/orgs", "repos_url": "https://api.github.com/users/philippwiesner/repos", "events_url": "https://api.github.com/users/philippwiesner/events{/privacy}", "received_events_url": "https://api.github.com/users/philippwiesner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-07-04T16:11:41Z", "updated_at": "2018-10-07T19:02:40Z", "closed_at": "2018-10-07T19:02:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm currently testing this hashivault module for python, but I stumbled accross the following error:\r\n\r\nI'm trying to generate a token for a defined approle, for this I'm retrieving the role_id and secret_id using the provided methods. According to the documentation the following should then retrieve the token:\r\n\r\n```yaml\r\n---\r\n- name: Test Vault lookup\r\n  hosts: localhost\r\n  no_log: false\r\n  tasks:\r\n  - hashivault_approle_role_id:\r\n      name: ansible\r\n    register: 'vault_role_id'\r\n\r\n  - debug:\r\n      msg: \"{{ vault_role_id.id }}\"\r\n\r\n  - hashivault_approle_role_secret_create:\r\n      name: ansible\r\n    register: 'vault_role_secret_create'\r\n\r\n  - debug:\r\n      msg: \"{{ vault_role_secret_create.secret_id }}\"\r\n\r\n  - hashivault_token_create:\r\n      display_name: approle\r\n      authtype: approle\r\n      role_id: \"{{ vault_role_id.id }}\"\r\n      secret_id: \"{{ vault_role_secret_create.secret_id }}\"\r\n      policies: [ \"ansible\" ]\r\n    register: vault_token\r\n\r\n  - debug:\r\n      msg: \"{{ vault_token }}\"\r\n\r\n  environment:\r\n    VAULT_ADDR: \"https://localhost:8200\"\r\n    VAULT_CACERT: \"cert\"\r\n    VAULT_TOKEN: fancy_token\r\n```\r\n\r\nBut hashivault_token_create fails with permission denied message.\r\n\r\nWith the provided vault token, i can create a token for this approle. So policies do work. However when looking through the code and the requests made against vault i saw the following:\r\n\r\nHere are the requests against vault when using `vault write auth/approle/login role_id=foo secret_id=bar`:\r\n\r\n```json\r\n{\r\n    \"time\": \"2018-07-04T14:50:58.412152016Z\",\r\n    \"type\": \"response\",\r\n    \"auth\": {\r\n      \"client_token\": \"hmac-sha256:d1fa1f74ad5aeb2e198bda60a20c9cc74b7d7fbe9f5631de6e51a2bf82b52942\",\r\n      \"accessor\": \"hmac-sha256:0a78fed8478ca10f3591783c8b6c56f3849d7cb77d6b9ed877a14d26fbd613fc\",\r\n      \"display_name\": \"approle\",\r\n      \"policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"token_policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"metadata\": {\r\n        \"role_name\": \"ansible\"\r\n      },\r\n      \"entity_id\": \"e275625c-b6af-286d-c093-c752e2e02352\"\r\n    },\r\n    \"request\": {\r\n      \"id\": \"32347833-16b7-dd55-c1b8-a5853b81efc9\",\r\n      \"operation\": \"update\",\r\n      \"client_token\": \"hmac-sha256:c79ed6c84930065b1b238258f9a1c069e3e22739c09a62a023c585365009381c\",\r\n      \"client_token_accessor\": \"hmac-sha256:5dc18a22ce8b289516a722352ec1118cf11a62b59f6a415de3698551713de69e\",\r\n      \"path\": \"auth/approle/login\",\r\n      \"data\": {\r\n        \"role_id\": \"hmac-sha256:e35acd0afd583494841c244afda6068c0713405e2d9cb1090dae03966d4c1af1\",\r\n        \"secret_id\": \"hmac-sha256:600a3283e135246f80bd0f397d21201069900dee479efc5a699fde521f615328\"\r\n      },\r\n      \"policy_override\": false,\r\n      \"remote_address\": \"ip\",\r\n      \"wrap_ttl\": 0,\r\n      \"headers\": {}\r\n    }\r\n```\r\n\r\nThere is one request and one response, delivering the token.\r\n\r\nHowever when running the playbook above, the hashivault_token_create method returns two requests:\r\n```json\r\n{\r\n    \"time\": \"2018-07-04T14:50:48.351173813Z\",\r\n    \"type\": \"response\",\r\n    \"auth\": {\r\n      \"client_token\": \"hmac-sha256:dce4762e4cd4c2f2cbd78c091e611704bb66c4d785d1b3963bbf9b717555ad54\",\r\n      \"accessor\": \"hmac-sha256:b1174011ce92a280463679888f6d78107b48e7e31b0f2e684f779e796d24916e\",\r\n      \"display_name\": \"approle\",\r\n      \"policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"token_policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"metadata\": {\r\n        \"role_name\": \"ansible\"\r\n      },\r\n      \"entity_id\": \"e275625c-b6af-286d-c093-c752e2e02352\"\r\n    },\r\n    \"request\": {\r\n      \"id\": \"55c81279-89c5-8a50-4aaf-5b42015ebefe\",\r\n      \"operation\": \"update\",\r\n      \"client_token\": \"\",\r\n      \"client_token_accessor\": \"\",\r\n      \"path\": \"auth/approle/login\",\r\n      \"data\": {\r\n        \"role_id\": \"hmac-sha256:e35acd0afd583494841c244afda6068c0713405e2d9cb1090dae03966d4c1af1\",\r\n        \"secret_id\": \"hmac-sha256:600a3283e135246f80bd0f397d21201069900dee479efc5a699fde521f615328\"\r\n      },\r\n      \"policy_override\": false,\r\n      \"remote_address\": \"ip\",\r\n      \"wrap_ttl\": 0,\r\n      \"headers\": {}\r\n    },\r\n    \"response\": {\r\n      \"auth\": {\r\n        \"client_token\": \"hmac-sha256:dce4762e4cd4c2f2cbd78c091e611704bb66c4d785d1b3963bbf9b717555ad54\",\r\n        \"accessor\": \"hmac-sha256:b1174011ce92a280463679888f6d78107b48e7e31b0f2e684f779e796d24916e\",\r\n        \"display_name\": \"approle\",\r\n        \"policies\": [\r\n          \"ansible\",\r\n          \"default\"\r\n        ],\r\n        \"token_policies\": [\r\n          \"ansible\",\r\n          \"default\"\r\n        ],\r\n        \"metadata\": {\r\n          \"role_name\": \"ansible\"\r\n        },\r\n        \"entity_id\": \"\"\r\n      }\r\n    },\r\n    \"error\": \"\"\r\n  },\r\n```\r\n\r\nThe first one looks fine, it's also running against auth/approle/login, however afterwards the second requests comes in:\r\n\r\n```json\r\n{\r\n    \"time\": \"2018-07-04T14:50:48.353911896Z\",\r\n    \"type\": \"request\",\r\n    \"auth\": {\r\n      \"client_token\": \"hmac-sha256:dce4762e4cd4c2f2cbd78c091e611704bb66c4d785d1b3963bbf9b717555ad54\",\r\n      \"accessor\": \"hmac-sha256:b1174011ce92a280463679888f6d78107b48e7e31b0f2e684f779e796d24916e\",\r\n      \"display_name\": \"approle\",\r\n      \"policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"token_policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"metadata\": {\r\n        \"role_name\": \"ansible\"\r\n      },\r\n      \"entity_id\": \"e275625c-b6af-286d-c093-c752e2e02352\"\r\n    },\r\n    \"request\": {\r\n      \"id\": \"af03ed86-b7a9-02ea-aae6-746e36b1ca18\",\r\n      \"operation\": \"update\",\r\n      \"client_token\": \"hmac-sha256:dce4762e4cd4c2f2cbd78c091e611704bb66c4d785d1b3963bbf9b717555ad54\",\r\n      \"client_token_accessor\": \"hmac-sha256:b1174011ce92a280463679888f6d78107b48e7e31b0f2e684f779e796d24916e\",\r\n      \"path\": \"auth/token/create\",\r\n      \"data\": {\r\n        \"display_name\": \"hmac-sha256:670f1c96d3608d1341311565d8cfd382b434dc426901f565fa5b96f852625705\",\r\n        \"explicit_max_ttl\": null,\r\n        \"id\": null,\r\n        \"meta\": null,\r\n        \"no_default_policy\": false,\r\n        \"no_parent\": false,\r\n        \"num_uses\": null,\r\n        \"policies\": [\r\n          \"hmac-sha256:609017dcd80855ab6fb4f80f6302cc1a495a11b50244db39ee24add07ebcaff3\"\r\n        ],\r\n        \"renewable\": null,\r\n        \"ttl\": null\r\n      },\r\n      \"policy_override\": false,\r\n      \"remote_address\": \"ip\",\r\n      \"wrap_ttl\": 0,\r\n      \"headers\": {}\r\n    },\r\n    \"error\": \"permission denied\"\r\n  },\r\n  {\r\n    \"time\": \"2018-07-04T14:50:48.35415999Z\",\r\n    \"type\": \"response\",\r\n    \"auth\": {\r\n      \"client_token\": \"hmac-sha256:dce4762e4cd4c2f2cbd78c091e611704bb66c4d785d1b3963bbf9b717555ad54\",\r\n      \"accessor\": \"hmac-sha256:b1174011ce92a280463679888f6d78107b48e7e31b0f2e684f779e796d24916e\",\r\n      \"display_name\": \"approle\",\r\n      \"policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"token_policies\": [\r\n        \"ansible\",\r\n        \"default\"\r\n      ],\r\n      \"metadata\": {\r\n        \"role_name\": \"ansible\"\r\n      },\r\n      \"entity_id\": \"e275625c-b6af-286d-c093-c752e2e02352\"\r\n    },\r\n    \"request\": {\r\n      \"id\": \"af03ed86-b7a9-02ea-aae6-746e36b1ca18\",\r\n      \"operation\": \"update\",\r\n      \"client_token\": \"hmac-sha256:dce4762e4cd4c2f2cbd78c091e611704bb66c4d785d1b3963bbf9b717555ad54\",\r\n      \"client_token_accessor\": \"hmac-sha256:b1174011ce92a280463679888f6d78107b48e7e31b0f2e684f779e796d24916e\",\r\n      \"path\": \"auth/token/create\",\r\n      \"data\": {\r\n        \"display_name\": \"hmac-sha256:670f1c96d3608d1341311565d8cfd382b434dc426901f565fa5b96f852625705\",\r\n        \"explicit_max_ttl\": null,\r\n        \"id\": null,\r\n        \"meta\": null,\r\n        \"no_default_policy\": false,\r\n        \"no_parent\": false,\r\n        \"num_uses\": null,\r\n        \"policies\": [\r\n          \"hmac-sha256:609017dcd80855ab6fb4f80f6302cc1a495a11b50244db39ee24add07ebcaff3\"\r\n        ],\r\n        \"renewable\": null,\r\n        \"ttl\": null\r\n      },\r\n      \"policy_override\": false,\r\n      \"remote_address\": \"ip\",\r\n      \"wrap_ttl\": 0,\r\n      \"headers\": {}\r\n    },\r\n    \"response\": {\r\n      \"data\": {\r\n        \"error\": \"hmac-sha256:f1307ff81a70a896c1383b979abb0b49d692a1c113d8b451a3507dccf45f11cb\"\r\n      }\r\n    },\r\n    \"error\": \"1 error occurred:\\n\\n* permission denied\"\r\n```\r\nThe second request is running against auth/token/create, which fails, as my policy does not allow this. I think the problem is related to the call of create_token [here](https://github.com/TerryHowe/ansible-modules-hashivault/blob/77aa207583130b7dac0454f6244beb2f0576ce85/ansible/modules/hashivault/hashivault_token_create.py#L154) as this will be executed after the [AppRoleClient call](https://github.com/TerryHowe/ansible-modules-hashivault/blob/77aa207583130b7dac0454f6244beb2f0576ce85/ansible/module_utils/hashivault.py#L67). \r\n\r\nI guess this bug applies to the other authtypes as well, as the create_token function is called afterwards again and the [hashivault_auth](https://github.com/TerryHowe/ansible-modules-hashivault/blob/77aa207583130b7dac0454f6244beb2f0576ce85/ansible/module_utils/hashivault.py#L52) method is already requesting the tokens.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/73", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/73/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/73/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/73", "id": 338326415, "node_id": "MDU6SXNzdWUzMzgzMjY0MTU=", "number": 73, "title": "Issue with readonly token on Travis", "user": {"login": "TerryHowe", "id": 104113, "node_id": "MDQ6VXNlcjEwNDExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/104113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TerryHowe", "html_url": "https://github.com/TerryHowe", "followers_url": "https://api.github.com/users/TerryHowe/followers", "following_url": "https://api.github.com/users/TerryHowe/following{/other_user}", "gists_url": "https://api.github.com/users/TerryHowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/TerryHowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TerryHowe/subscriptions", "organizations_url": "https://api.github.com/users/TerryHowe/orgs", "repos_url": "https://api.github.com/users/TerryHowe/repos", "events_url": "https://api.github.com/users/TerryHowe/events{/privacy}", "received_events_url": "https://api.github.com/users/TerryHowe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-04T16:02:51Z", "updated_at": "2018-07-05T14:50:25Z", "closed_at": "2018-07-05T14:50:07Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I cannot reproduce locally https://travis-ci.org/TerryHowe/ansible-modules-hashivault/jobs/400064704", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/72", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/72/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/72/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/72", "id": 333242942, "node_id": "MDU6SXNzdWUzMzMyNDI5NDI=", "number": 72, "title": "Self-Signed Vault Cert: hashivault_read successful, lookup fails", "user": {"login": "atrepca", "id": 2030087, "node_id": "MDQ6VXNlcjIwMzAwODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2030087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atrepca", "html_url": "https://github.com/atrepca", "followers_url": "https://api.github.com/users/atrepca/followers", "following_url": "https://api.github.com/users/atrepca/following{/other_user}", "gists_url": "https://api.github.com/users/atrepca/gists{/gist_id}", "starred_url": "https://api.github.com/users/atrepca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atrepca/subscriptions", "organizations_url": "https://api.github.com/users/atrepca/orgs", "repos_url": "https://api.github.com/users/atrepca/repos", "events_url": "https://api.github.com/users/atrepca/events{/privacy}", "received_events_url": "https://api.github.com/users/atrepca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-18T12:10:10Z", "updated_at": "2018-07-04T19:27:57Z", "closed_at": "2018-07-04T16:03:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Versions:**\r\nansible: 2.5.4\r\nansible-modules-hashivault: 3.9.5\r\nhvac: 0.6.0\r\n\r\n**Environment variables set:**\r\nVAULT_ADDR=https://my.vault.install:8200/\r\nVAULT_CACERT=/Users/atrepca/.certs/vault-ca.pem\r\n\r\nThis works fine:\r\n```yml\r\n---\r\n- hosts: localhost\r\n  gather_facts: False\r\n  - name: Read Vault secret - foo\r\n    hashivault_read:\r\n      secret: 'secret/foo'\r\n      key: 'bar'\r\n    register: 'bar'\r\n```\r\nThis fails:\r\n```yml\r\n---\r\n- hosts: localhost\r\n  gather_facts: False\r\n  vars:\r\n    bar: \"{{ lookup('hashivault', 'secret/foo', 'bar') }}\"\r\n  tasks:\r\n    - debug:\r\n        msg: \"bar={{ bar }}\"\r\n```\r\nWith a `CERTIFICATE_VERIFY_FAILED` error:\r\n```shell\r\nfatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('hashivault', 'secret/foo', 'bar') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'hashivault'. Error was a <class 'ansible.errors.AnsibleError'>, original message: Error reading vault/secret/foo/bar: Exception: HTTPSConnectionPool(host='my.vault.install', port=8200): Max retries exceeded with url: /v1/secret/foo (Caused by SSLError(SSLError(1, u'[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)'),))\\n\"}\r\n```\r\n\r\nIf I `export VAULT_SKIP_VERIFY=true`, the `lookup` works as expected.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/70", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/70/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/70/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/70", "id": 332498238, "node_id": "MDU6SXNzdWUzMzI0OTgyMzg=", "number": 70, "title": "documenting enviromental variables", "user": {"login": "paparaka", "id": 3033485, "node_id": "MDQ6VXNlcjMwMzM0ODU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3033485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paparaka", "html_url": "https://github.com/paparaka", "followers_url": "https://api.github.com/users/paparaka/followers", "following_url": "https://api.github.com/users/paparaka/following{/other_user}", "gists_url": "https://api.github.com/users/paparaka/gists{/gist_id}", "starred_url": "https://api.github.com/users/paparaka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paparaka/subscriptions", "organizations_url": "https://api.github.com/users/paparaka/orgs", "repos_url": "https://api.github.com/users/paparaka/repos", "events_url": "https://api.github.com/users/paparaka/events{/privacy}", "received_events_url": "https://api.github.com/users/paparaka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-14T17:39:05Z", "updated_at": "2018-06-15T13:54:14Z", "closed_at": "2018-06-15T13:54:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I had hard time finding which environmental variables this module uses. \r\nAfter looking at the source code for a while, I found what I was looking for, but it would have been easier if it was more readily available.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/69", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/69/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/69/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/69", "id": 327235952, "node_id": "MDU6SXNzdWUzMjcyMzU5NTI=", "number": 69, "title": "Vault seal operation requesting client token", "user": {"login": "dminca", "id": 5355219, "node_id": "MDQ6VXNlcjUzNTUyMTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5355219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dminca", "html_url": "https://github.com/dminca", "followers_url": "https://api.github.com/users/dminca/followers", "following_url": "https://api.github.com/users/dminca/following{/other_user}", "gists_url": "https://api.github.com/users/dminca/gists{/gist_id}", "starred_url": "https://api.github.com/users/dminca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dminca/subscriptions", "organizations_url": "https://api.github.com/users/dminca/orgs", "repos_url": "https://api.github.com/users/dminca/repos", "events_url": "https://api.github.com/users/dminca/events{/privacy}", "received_events_url": "https://api.github.com/users/dminca/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-29T09:19:47Z", "updated_at": "2018-05-29T09:49:13Z", "closed_at": "2018-05-29T09:49:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nThere's a logical error when calling the `hashivault_seal` module that's making it throw\r\n\r\n```sh\r\nException: 1 error occurred:\\n\\n* missing client token\r\n```\r\n\r\nVault doesn't require a client token to seal the vault, just the `VAULT_TOKEN` (aka root token) is required.\r\n\r\nHere's my vault status:\r\n\r\n```sh\r\nvagrant@slave:~$ vault status\r\nSealed: false\r\nKey Shares: 6\r\nKey Threshold: 4\r\nUnseal Progress: 0\r\nUnseal Nonce:\r\nVersion: 0.7.3\r\nCluster Name: vault-cluster-93661e49\r\nCluster ID: 93684931-7133-0fd5-ccab-d46dee4fefd4\r\n\r\nHigh-Availability Enabled: false\r\n```\r\n\r\nSample play:\r\n\r\n```yml\r\n- name: seal the Vault\r\n  hashivault_seal:\r\n    url: \"http://0.0.0.0:8200\"\r\n  register: vault_seal\r\n```\r\n\r\nPlay output\r\n\r\n```sh\r\nTASK [debian-hashivault : seal the Vault] *******************************************************************************\r\nfatal: [slave-1]: FAILED! => {\"changed\": false, \"msg\": \"Exception: 1 error occurred:\\n\\n* missing client token\", \"rc\": 1}\r\n\r\nPLAY RECAP **************************************************************************************************************\r\nslave-1                    : ok=2    changed=0    unreachable=0    failed=1\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/68", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/68/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/68/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/68", "id": 324459698, "node_id": "MDU6SXNzdWUzMjQ0NTk2OTg=", "number": 68, "title": "Need v2 K/V secrets engine support", "user": {"login": "wknapik", "id": 1129003, "node_id": "MDQ6VXNlcjExMjkwMDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1129003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wknapik", "html_url": "https://github.com/wknapik", "followers_url": "https://api.github.com/users/wknapik/followers", "following_url": "https://api.github.com/users/wknapik/following{/other_user}", "gists_url": "https://api.github.com/users/wknapik/gists{/gist_id}", "starred_url": "https://api.github.com/users/wknapik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wknapik/subscriptions", "organizations_url": "https://api.github.com/users/wknapik/orgs", "repos_url": "https://api.github.com/users/wknapik/repos", "events_url": "https://api.github.com/users/wknapik/events{/privacy}", "received_events_url": "https://api.github.com/users/wknapik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 369965296, "node_id": "MDU6TGFiZWwzNjk5NjUyOTY=", "url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-05-18T15:40:17Z", "updated_at": "2019-07-23T16:43:00Z", "closed_at": "2019-07-23T16:42:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Server started with:\r\n```\r\n% vault server -dev\r\n```\r\nExample code from https://pypi.org/project/ansible-modules-hashivault/:\r\n```\r\n% export VAULT_ADDR='http://127.0.0.1:8200'\r\n% cat >example.yml <<EOF\r\n---\r\n- hosts: localhost\r\n  vars:\r\n    foo_value: 'fum'\r\n    fie_value: 'fum'\r\n  tasks:\r\n    - hashivault_status:\r\n      register: 'vault_status'\r\n    - hashivault_write:\r\n        secret: 'giant'\r\n        data:\r\n            foo: '{{foo_value}}'\r\n            fie: '{{fie_value}}'\r\n      register: 'vault_write'\r\n    - hashivault_read:\r\n        secret: 'giant'\r\n        key: 'fie'\r\n      register: 'vault_read'\r\nEOF\r\n% ansible-playbook example.yml\r\nPLAY [localhost] ******************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ************************************************************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [hashivault_status] **********************************************************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [hashivault_write] ***********************************************************************************************************************************************************************************************************************\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false, \r\n    \"rc\": 1\r\n}\r\n\r\nMSG:\r\n\r\nException: {\"request_id\":\"4c06a0be-9e8d-a4f0-6603-1c96d258a876\",\"lease_id\":\"\",\"renewable\":false,\"lease_duration\":0,\"data\":null,\"wrap_info\":null,\"warnings\":[\"Invalid path for a versioned K/V secrets engine. See the API docs for the appropriate API endpoints to use. If using the Vault CLI, use 'vault kv put' for this operation.\"],\"auth\":null}\r\n\r\n        to retry, use: --limit @/some/path/example.retry\r\n\r\nPLAY RECAP ************************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=1   \r\n%\r\n```\r\nManual query:\r\n```\r\n% vault kv put secret/foo value=bar\r\nKey              Value\r\n---              -----\r\ncreated_time     2018-05-18T15:25:50.377136792Z\r\ndeletion_time    n/a\r\ndestroyed        false\r\nversion          1\r\n% vault kv get secret/foo       \r\n====== Metadata ======\r\nKey              Value\r\n---              -----\r\ncreated_time     2018-05-18T15:25:50.377136792Z\r\ndeletion_time    n/a\r\ndestroyed        false\r\nversion          1\r\n\r\n==== Data ====\r\nKey      Value\r\n---      -----\r\nvalue    bar\r\n% vault write secret/bar value=baz \r\nError writing data to secret/bar: Error making API request.\r\n\r\nURL: PUT http://127.0.0.1:8200/v1/secret/bar\r\nCode: 404. Errors:\r\n\r\n\r\nWARNING! The following warnings were returned from Vault:\r\n\r\n  * Invalid path for a versioned K/V secrets engine. See the API docs for the\r\n  appropriate API endpoints to use. If using the Vault CLI, use 'vault kv put'\r\n  for this operation.\r\n%\r\n```\r\nVersions:\r\n```\r\n% vault --version\r\nVault v0.10.1 ('756fdc4587350daf1c65b93647b2cc31a6f119cd+CHANGES')\r\n% ansible --version\r\nansible 2.5.2\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/foo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.6.5 (default, May 11 2018, 04:00:52) [GCC 8.1.0]\r\n% uname -a\r\nLinux something 4.16.8-1-ARCH #1 SMP PREEMPT Wed May 9 11:25:02 UTC 2018 x86_64 GNU/Linux\r\n%\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/66", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/66/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/66/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/66", "id": 321467145, "node_id": "MDU6SXNzdWUzMjE0NjcxNDU=", "number": 66, "title": "hashivault_read_to_file does not mesh well with bastion hosts and firewalls", "user": {"login": "mattymo", "id": 1229061, "node_id": "MDQ6VXNlcjEyMjkwNjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1229061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattymo", "html_url": "https://github.com/mattymo", "followers_url": "https://api.github.com/users/mattymo/followers", "following_url": "https://api.github.com/users/mattymo/following{/other_user}", "gists_url": "https://api.github.com/users/mattymo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattymo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattymo/subscriptions", "organizations_url": "https://api.github.com/users/mattymo/orgs", "repos_url": "https://api.github.com/users/mattymo/repos", "events_url": "https://api.github.com/users/mattymo/events{/privacy}", "received_events_url": "https://api.github.com/users/mattymo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-09T07:53:45Z", "updated_at": "2018-10-07T20:13:32Z", "closed_at": "2018-10-07T20:13:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Much to my surprise, the module requires that the read operation takes place on the local ansible host. First of all, that adds a python dependency on the Ansible host that I wasn't planning on. Secondly, it requires that I can route from my Ansible host to the Vault host. In my case, that's not allowed. \r\n\r\nI would prefer if the action was run on the target node that wants to run hashivault_read_to_file. Can you explain why this task needs to be local and if we could make it configurable?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/65", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/65/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/65/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/65", "id": 320270733, "node_id": "MDU6SXNzdWUzMjAyNzA3MzM=", "number": 65, "title": "hashivault_write with update tries to write empty string to unset values", "user": {"login": "perj", "id": 224521, "node_id": "MDQ6VXNlcjIyNDUyMQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/224521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perj", "html_url": "https://github.com/perj", "followers_url": "https://api.github.com/users/perj/followers", "following_url": "https://api.github.com/users/perj/following{/other_user}", "gists_url": "https://api.github.com/users/perj/gists{/gist_id}", "starred_url": "https://api.github.com/users/perj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perj/subscriptions", "organizations_url": "https://api.github.com/users/perj/orgs", "repos_url": "https://api.github.com/users/perj/repos", "events_url": "https://api.github.com/users/perj/events{/privacy}", "received_events_url": "https://api.github.com/users/perj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-04T13:15:08Z", "updated_at": "2018-10-07T16:09:38Z", "closed_at": "2018-10-07T16:09:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Maybe this is not a problem in most cases, but for some secrets it matters.\r\nE.g. here:\r\n\r\n```\r\n- hashivault_write:\r\n    update: true\r\n    secret: \"/auth/aws/role/myrole\"\r\n    data:\r\n      auth_type: ec2\r\n      policies:\r\n      - mypolicy\r\n      disallow_reauthentication: true\r\n      bound_iam_instance_profile_arn: \"arn:aws:iam::1234:instance-profile/myinstanceprofile\"\r\n```\r\n\r\nThis works if the secret is new but if it already exists and I've changed the `bound_iam_instance_profile_arn` value then it fails with\r\n```\r\n\"Exception: failed updating the unique ID of ARN \\\"\\\": &errors.errorString{s:\\\"unrecognized arn: contains 1 colon-separated parts, expected 6\\\"}\"\r\n```\r\n\r\nMy understanding is that this is because it tries to write empty string to the other arn-field (`bound_iam_principal_arn`)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/64", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/64/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/64/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/64", "id": 320194887, "node_id": "MDU6SXNzdWUzMjAxOTQ4ODc=", "number": 64, "title": "hashivault_approle_role_secret_create does not support wrap_ttl", "user": {"login": "vuminhkh", "id": 6248367, "node_id": "MDQ6VXNlcjYyNDgzNjc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6248367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vuminhkh", "html_url": "https://github.com/vuminhkh", "followers_url": "https://api.github.com/users/vuminhkh/followers", "following_url": "https://api.github.com/users/vuminhkh/following{/other_user}", "gists_url": "https://api.github.com/users/vuminhkh/gists{/gist_id}", "starred_url": "https://api.github.com/users/vuminhkh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vuminhkh/subscriptions", "organizations_url": "https://api.github.com/users/vuminhkh/orgs", "repos_url": "https://api.github.com/users/vuminhkh/repos", "events_url": "https://api.github.com/users/vuminhkh/events{/privacy}", "received_events_url": "https://api.github.com/users/vuminhkh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 369965296, "node_id": "MDU6TGFiZWwzNjk5NjUyOTY=", "url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-05-04T08:42:47Z", "updated_at": "2018-10-08T03:02:17Z", "closed_at": "2018-10-08T03:02:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nIt seems that this module hashivault_approle_role_secret_create does not support wrap_ttl:\r\n\r\n```\r\n  hashivault_approle_role_secret_create:\r\n    token: \"{{ vault_admin_token.stdout }}\"\r\n    name: goldfish\r\n    wrap_ttl: \"5m\"\r\n  register: 'vault_role_secret_create'\r\n```\r\nThank you in advance for your help.\r\n\r\nRegards,\r\n\r\nKhang", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/63", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/63/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/63/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/63", "id": 320188463, "node_id": "MDU6SXNzdWUzMjAxODg0NjM=", "number": 63, "title": "hashivault_approle_role_create does not support secret_id_ttl, period, token_ttl, token_max_ttl", "user": {"login": "vuminhkh", "id": 6248367, "node_id": "MDQ6VXNlcjYyNDgzNjc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6248367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vuminhkh", "html_url": "https://github.com/vuminhkh", "followers_url": "https://api.github.com/users/vuminhkh/followers", "following_url": "https://api.github.com/users/vuminhkh/following{/other_user}", "gists_url": "https://api.github.com/users/vuminhkh/gists{/gist_id}", "starred_url": "https://api.github.com/users/vuminhkh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vuminhkh/subscriptions", "organizations_url": "https://api.github.com/users/vuminhkh/orgs", "repos_url": "https://api.github.com/users/vuminhkh/repos", "events_url": "https://api.github.com/users/vuminhkh/events{/privacy}", "received_events_url": "https://api.github.com/users/vuminhkh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 369965296, "node_id": "MDU6TGFiZWwzNjk5NjUyOTY=", "url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-04T08:18:21Z", "updated_at": "2018-05-19T12:42:15Z", "closed_at": "2018-05-19T12:42:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nEveything is in the title, for now i'm using a workaround by using the generic end point:\r\n\r\n```\r\nhashivault_write:\r\n    token: \"{{ vault_admin_token.stdout }}\"\r\n    secret: '/auth/approle/role/goldfish'\r\n    data:\r\n      role_name: \"goldfish\"\r\n      policies: \"default,goldfish\"\r\n      secret_id_num_uses: 1\r\n      secret_id_ttl: \"5m\"\r\n      period: \"24h\"\r\n      token_ttl: 0\r\n      token_max_ttl: 0\r\n```\r\nThank you in advance for your help.\r\n\r\nRegards,\r\n\r\nKhang", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/62", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/62/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/62/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/62", "id": 319932654, "node_id": "MDU6SXNzdWUzMTk5MzI2NTQ=", "number": 62, "title": "lookup plugin not functioning", "user": {"login": "drewmullen", "id": 3812162, "node_id": "MDQ6VXNlcjM4MTIxNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3812162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewmullen", "html_url": "https://github.com/drewmullen", "followers_url": "https://api.github.com/users/drewmullen/followers", "following_url": "https://api.github.com/users/drewmullen/following{/other_user}", "gists_url": "https://api.github.com/users/drewmullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewmullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewmullen/subscriptions", "organizations_url": "https://api.github.com/users/drewmullen/orgs", "repos_url": "https://api.github.com/users/drewmullen/repos", "events_url": "https://api.github.com/users/drewmullen/events{/privacy}", "received_events_url": "https://api.github.com/users/drewmullen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-03T13:58:41Z", "updated_at": "2018-08-24T15:36:08Z", "closed_at": "2018-08-24T15:36:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Learning to use this great plugin. Not sure if im using it wrong or if there is a bug. Notice, im able to read the value when i use `hashivault_read` but not when i use the `lookup('hashivault')` method\r\n\r\n`ansible --version`: 2.5.2\r\nvault version: 0.10.1\r\n\r\nPlaybook:\r\n\r\n```yaml\r\ntasks:\r\n\r\n## USE hashivault_read module ## WORKS!\r\n  - name: read value\r\n    hashivault_read:\r\n      secret: test\r\n      key: password\r\n    register: mypass\r\n\r\n  - name: output pass\r\n    debug:\r\n      var: mypass\r\n\r\n## USE lookup plugin ## DOES NOT WORK\r\n  - name: look up value\r\n    debug:\r\n      msg: \"{{ lookup('hashivault', 'test', 'password') }}\"\r\n```\r\n\r\nOutput:\r\n```yaml\r\nTASK [read value] **************************\r\nok: [localhost]\r\n\r\nTASK [output pass] *************************\r\nok: [localhost] =>\r\n  mypass:\r\n    changed: false\r\n    failed: false\r\n    rc: 0\r\n    value: P@ssw0rd\r\n\r\nTASK [look up value] ***********************\r\nfatal: [localhost]: FAILED! =>\r\n  msg: |-\r\n    An unhandled exception occurred while running the lookup plugin 'hashivault'. Error was a <class 'ansible.errors.AnsibleError'>, original message: Error reading vault test/password: Exception: <HTML><HEAD>\r\n                    <TITLE>Network Error</TITLE>\r\n                    </HEAD>\r\n                    <BODY>\r\n                    <FONT face=\"Helvetica\">\r\n                    <big><strong></strong></big><br />\r\n                    </FONT>\r\n                    <blockquote>\r\n                    <TABLE border=0 cellPadding=1 width=\"80%\">\r\n                    <TR><TD>\r\n                    <FONT face=\"Helvetica\">\r\n                    <big>Network Error (dns_server_failure)</big>\r\n                    <br />\r\n                    <br />\r\n                    </FONT>\r\n                    </TD></TR>\r\n                    <TR><TD>\r\n                    <FONT face=\"Helvetica\">\r\n                    Please confirm you typed your URL correctly.<P> Your request could not be processed because an error occurred contacting the DNS server.\r\n                    </FONT>\r\n                    </TD></TR>\r\n                    <TR><TD>\r\n                    <FONT face=\"Helvetica\">\r\n                    The DNS server may be temporarily unavailable, or there could be a network problem.\r\n                    </FONT>\r\n                    </TD></TR>\r\n                    <TR><TD>\r\n                    <FONT face=\"Helvetica\" SIZE=2>\r\n                    <br />\r\n                    For assistance, contact your network support team.\r\n                    </FONT>\r\n                    </TD></TR>\r\n                    </TABLE>\r\n                    </blockquote>\r\n                    </FONT>\r\n```\r\n\r\n\r\nAlso, just a comment on the documentation: `looky: \"{{lookup('hashivault', 'giant', 'foo')}}\"`\r\n\r\nis `looky` a module you provide? If not, it was confusing to me and you may want to update to use a `debug` example instead.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/61", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/61/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/61/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/61", "id": 317657796, "node_id": "MDU6SXNzdWUzMTc2NTc3OTY=", "number": 61, "title": "Missing EC2 auth support", "user": {"login": "TerryHowe", "id": 104113, "node_id": "MDQ6VXNlcjEwNDExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/104113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TerryHowe", "html_url": "https://github.com/TerryHowe", "followers_url": "https://api.github.com/users/TerryHowe/followers", "following_url": "https://api.github.com/users/TerryHowe/following{/other_user}", "gists_url": "https://api.github.com/users/TerryHowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/TerryHowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TerryHowe/subscriptions", "organizations_url": "https://api.github.com/users/TerryHowe/orgs", "repos_url": "https://api.github.com/users/TerryHowe/repos", "events_url": "https://api.github.com/users/TerryHowe/events{/privacy}", "received_events_url": "https://api.github.com/users/TerryHowe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 369965296, "node_id": "MDU6TGFiZWwzNjk5NjUyOTY=", "url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-04-25T14:37:56Z", "updated_at": "2018-11-03T13:12:29Z", "closed_at": "2018-11-03T13:12:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/58", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/58/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/58/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/58", "id": 310886847, "node_id": "MDU6SXNzdWUzMTA4ODY4NDc=", "number": 58, "title": "hashivault_secret_enable to enable with type", "user": {"login": "bru2code", "id": 15280055, "node_id": "MDQ6VXNlcjE1MjgwMDU1", "avatar_url": "https://avatars3.githubusercontent.com/u/15280055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bru2code", "html_url": "https://github.com/bru2code", "followers_url": "https://api.github.com/users/bru2code/followers", "following_url": "https://api.github.com/users/bru2code/following{/other_user}", "gists_url": "https://api.github.com/users/bru2code/gists{/gist_id}", "starred_url": "https://api.github.com/users/bru2code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bru2code/subscriptions", "organizations_url": "https://api.github.com/users/bru2code/orgs", "repos_url": "https://api.github.com/users/bru2code/repos", "events_url": "https://api.github.com/users/bru2code/events{/privacy}", "received_events_url": "https://api.github.com/users/bru2code/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-03T15:31:07Z", "updated_at": "2018-05-07T22:55:56Z", "closed_at": "2018-05-07T22:55:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am trying to use hashivault_secret_enable to enable ssh-backend, something similar to below. And I don't see any equivalent options in the py. Do you know if there is a quick way to do this perhaps! \r\n```\r\nvault secrets enable -path=ssh-prod ssh \r\n```\r\nCheers, Raj", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/57", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/57/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/57/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/57", "id": 310035157, "node_id": "MDU6SXNzdWUzMTAwMzUxNTc=", "number": 57, "title": "Module fails to unseal", "user": {"login": "bru2code", "id": 15280055, "node_id": "MDQ6VXNlcjE1MjgwMDU1", "avatar_url": "https://avatars3.githubusercontent.com/u/15280055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bru2code", "html_url": "https://github.com/bru2code", "followers_url": "https://api.github.com/users/bru2code/followers", "following_url": "https://api.github.com/users/bru2code/following{/other_user}", "gists_url": "https://api.github.com/users/bru2code/gists{/gist_id}", "starred_url": "https://api.github.com/users/bru2code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bru2code/subscriptions", "organizations_url": "https://api.github.com/users/bru2code/orgs", "repos_url": "https://api.github.com/users/bru2code/repos", "events_url": "https://api.github.com/users/bru2code/events{/privacy}", "received_events_url": "https://api.github.com/users/bru2code/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-30T10:37:27Z", "updated_at": "2018-05-07T22:56:30Z", "closed_at": "2018-05-07T22:56:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "- hosts: localhost\r\n  vars:\r\n    vault_keys:  \"{{ lookup('env','VAULT_KEY1', 'VAULT_KEY2', 'VAULT_KEY3') }}\"\r\n  tasks:\r\n    - name: print environment\r\n      debug:\r\n        msg: \"key vaule{{item}}\"\r\n      with_items:\r\n        - \"{{ vault_keys }}\"\r\n\r\n    - name: Unseal status\r\n      hashivault_status:\r\n      register: 'vault_status'\r\n\r\n    - name: Print the status of vault\r\n      debug:\r\n        msg: \"vault environment sealed ? {{ vault_status.status.sealed }}\"\r\n\r\n    - name: Unseal Vault if Sealed\r\n      hashivault_unseal:\r\n        keys: '{{vault_keys}}'\r\n      when: vault_status.status.sealed == True\r\n\r\n\r\nI had to set vault keys separately on bash, and even then it fails to unseal with below error \r\n\r\nTASK [print environment] ********************************************************************************************************************************************************************************************************************\r\nFriday 30 March 2018  11:34:54 +0100 (0:00:00.539)       0:00:00.618 **********\r\nok: [localhost] => (item=RExlyUib/KhCRCHHWpLc0+CGFlrrk2gFM0FaKc4C7IrH,uIFpZScsRF74+SISdPe+icR1g1yP3P2p9z/Nh/fP9Mkm,KHw8ph30CmNF5Bh0AyBiVIZ6M8lVXKzPkFLnOUbS8wVQ) => {\r\n    \"item\": \"RExlyUib/KhCRCHHWpLc0+CGFlrrk2gFM0FaKc4C7IrH,uIFpZScsRF74+SISdPe+icR1g1yP3P2p9z/Nh/fP9Mkm,KHw8ph30CmNF5Bh0AyBiVIZ6M8lVXKzPkFLnOUbS8wVQ\",\r\n    \"msg\": \"key vauleRExlyUib/KhCRCHHWpLc0+CGFlrrk2gFM0FaKc4C7IrH,uIFpZScsRF74+SISdPe+icR1g1yP3P2p9z/Nh/fP9Mkm,KHw8ph30CmNF5Bh0AyBiVIZ6M8lVXKzPkFLnOUbS8wVQ\"\r\n}\r\n\r\nTASK [Unseal status] ************************************************************************************************************************************************************************************************************************\r\nFriday 30 March 2018  11:34:54 +0100 (0:00:00.028)       0:00:00.647 **********\r\nok: [localhost]\r\n\r\nTASK [Print the status of vault] ************************************************************************************************************************************************************************************************************\r\nFriday 30 March 2018  11:34:54 +0100 (0:00:00.420)       0:00:01.067 **********\r\nok: [localhost] => {\r\n    \"msg\": \"vault environment sealed ? True\"\r\n}\r\n\r\nTASK [Unseal Vault if Sealed] ***************************************************************************************************************************************************************************************************************\r\nFriday 30 March 2018  11:34:54 +0100 (0:00:00.035)       0:00:01.103 **********\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Exception: 'key' must be a valid hex or base64 string\", \"rc\": 1}\r\n [WARNING]: Failure using method (v2_runner_on_failed) in callback plugin (</usr/lib/python2.7/site-packages/ansible/plugins/callback/mail.CallbackModule object at 0x1927ed0>): 'module_name'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/54", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/54/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/54/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/54", "id": 306430584, "node_id": "MDU6SXNzdWUzMDY0MzA1ODQ=", "number": 54, "title": "approle support", "user": {"login": "bru2code", "id": 15280055, "node_id": "MDQ6VXNlcjE1MjgwMDU1", "avatar_url": "https://avatars3.githubusercontent.com/u/15280055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bru2code", "html_url": "https://github.com/bru2code", "followers_url": "https://api.github.com/users/bru2code/followers", "following_url": "https://api.github.com/users/bru2code/following{/other_user}", "gists_url": "https://api.github.com/users/bru2code/gists{/gist_id}", "starred_url": "https://api.github.com/users/bru2code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bru2code/subscriptions", "organizations_url": "https://api.github.com/users/bru2code/orgs", "repos_url": "https://api.github.com/users/bru2code/repos", "events_url": "https://api.github.com/users/bru2code/events{/privacy}", "received_events_url": "https://api.github.com/users/bru2code/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-19T11:50:05Z", "updated_at": "2018-03-19T12:43:12Z", "closed_at": "2018-03-19T12:42:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThis is quite a neat package, however I am struggling to get this working with approle. Is there a way to get this working so that we can read or write secrets just using app role - i.e role_id and secret_id set, and not generate a token and set that token as an environment variable instead? \r\n\r\nregards, Raju ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/53", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/53/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/53/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/53", "id": 302085168, "node_id": "MDU6SXNzdWUzMDIwODUxNjg=", "number": 53, "title": "Change log?", "user": {"login": "mohsen0", "id": 135178, "node_id": "MDQ6VXNlcjEzNTE3OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/135178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohsen0", "html_url": "https://github.com/mohsen0", "followers_url": "https://api.github.com/users/mohsen0/followers", "following_url": "https://api.github.com/users/mohsen0/following{/other_user}", "gists_url": "https://api.github.com/users/mohsen0/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohsen0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohsen0/subscriptions", "organizations_url": "https://api.github.com/users/mohsen0/orgs", "repos_url": "https://api.github.com/users/mohsen0/repos", "events_url": "https://api.github.com/users/mohsen0/events{/privacy}", "received_events_url": "https://api.github.com/users/mohsen0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-04T13:20:28Z", "updated_at": "2018-03-17T16:47:49Z", "closed_at": "2018-03-17T16:47:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Do you publish a changelog for this nice module somewhere else? it is not easy to keep up with the changes if one had to look at the commits", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/52", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/52/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/52/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/52", "id": 301505600, "node_id": "MDU6SXNzdWUzMDE1MDU2MDA=", "number": 52, "title": "enabling the kubernetes backend in 0.8.3", "user": {"login": "snoby", "id": 724760, "node_id": "MDQ6VXNlcjcyNDc2MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/724760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snoby", "html_url": "https://github.com/snoby", "followers_url": "https://api.github.com/users/snoby/followers", "following_url": "https://api.github.com/users/snoby/following{/other_user}", "gists_url": "https://api.github.com/users/snoby/gists{/gist_id}", "starred_url": "https://api.github.com/users/snoby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snoby/subscriptions", "organizations_url": "https://api.github.com/users/snoby/orgs", "repos_url": "https://api.github.com/users/snoby/repos", "events_url": "https://api.github.com/users/snoby/events{/privacy}", "received_events_url": "https://api.github.com/users/snoby/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-03-01T18:10:52Z", "updated_at": "2018-03-19T01:02:06Z", "closed_at": "2018-03-19T01:02:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm a bit confused as to how to use the hashivault_write command to configure this backend.\r\nHere are the instructions on how to setup the backend: https://github.com/aws-samples/aws-workshop-for-kubernetes/tree/master/04-path-security-and-networking/401-configmaps-and-secrets#configure-kubernetes-auth-backend\r\n\r\nSpecifically need to configure it by writing  a token, the certificate authority and the server api to this backend.\r\n```sh\r\n vault write auth/kubernetes/config \\\r\n  token_reviewer_jwt=$REVIEWER_TOKEN  \\\r\n  kubernetes_host=<api-server> \\\r\n  kubernetes_ca_cert=@~/.kube/kops.crt\r\n```\r\n\r\nthoughts?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/50", "repository_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault", "labels_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/50/comments", "events_url": "https://api.github.com/repos/TerryHowe/ansible-modules-hashivault/issues/50/events", "html_url": "https://github.com/TerryHowe/ansible-modules-hashivault/issues/50", "id": 299367686, "node_id": "MDU6SXNzdWUyOTkzNjc2ODY=", "number": 50, "title": "hashivault_write always tries to read before writing, even when update=false", "user": {"login": "adaphi", "id": 11859021, "node_id": "MDQ6VXNlcjExODU5MDIx", "avatar_url": "https://avatars0.githubusercontent.com/u/11859021?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adaphi", "html_url": "https://github.com/adaphi", "followers_url": "https://api.github.com/users/adaphi/followers", "following_url": "https://api.github.com/users/adaphi/following{/other_user}", "gists_url": "https://api.github.com/users/adaphi/gists{/gist_id}", "starred_url": "https://api.github.com/users/adaphi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adaphi/subscriptions", "organizations_url": "https://api.github.com/users/adaphi/orgs", "repos_url": "https://api.github.com/users/adaphi/repos", "events_url": "https://api.github.com/users/adaphi/events{/privacy}", "received_events_url": "https://api.github.com/users/adaphi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-22T14:10:13Z", "updated_at": "2018-02-22T17:00:52Z", "closed_at": "2018-02-22T16:19:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey,\r\n\r\nAs the title says. I can see this was changed recently but it actually breaks a number of things.\r\n\r\nOne example is the aws secret backend, which is configured at the path `aws/config/root`. But this path is write-only, so trying to read first throws an error.\r\n\r\nLikewise for approles, you can generate a secret-id by writing to `auth/approle/role/my-role/secret-id`, but attempting to read from this path is an error.\r\n\r\nIt also fails if you simply don't have permission to read the endpoint you're trying to write to (entirely possible for automated scripts)\r\n\r\nCan you revert the change please? Or find a way of doing the same that doesn't error in these cases?", "performed_via_github_app": null, "score": 1.0}]}