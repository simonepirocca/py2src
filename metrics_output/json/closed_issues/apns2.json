{"total_count": 57, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/114", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/114/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/114/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/114", "id": 669319311, "node_id": "MDU6SXNzdWU2NjkzMTkzMTE=", "number": 114, "title": "Bytes Warning caused failure in importing APNsClient, NotificationType", "user": {"login": "chaofanhan", "id": 60412356, "node_id": "MDQ6VXNlcjYwNDEyMzU2", "avatar_url": "https://avatars2.githubusercontent.com/u/60412356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chaofanhan", "html_url": "https://github.com/chaofanhan", "followers_url": "https://api.github.com/users/chaofanhan/followers", "following_url": "https://api.github.com/users/chaofanhan/following{/other_user}", "gists_url": "https://api.github.com/users/chaofanhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chaofanhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chaofanhan/subscriptions", "organizations_url": "https://api.github.com/users/chaofanhan/orgs", "repos_url": "https://api.github.com/users/chaofanhan/repos", "events_url": "https://api.github.com/users/chaofanhan/events{/privacy}", "received_events_url": "https://api.github.com/users/chaofanhan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-31T01:19:24Z", "updated_at": "2020-08-04T20:43:58Z", "closed_at": "2020-08-04T20:43:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have code `from apns2.client import APNsClient, NotificationType`. But the import failed because of `BytesWarning`. The error message is `Comparison between bytes and string`. I found that `APNsClient, NotificationType` are both undefined because of import failure. May I ask if anyone could help to fix this issue?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/102", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/102/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/102/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/102", "id": 545619188, "node_id": "MDU6SXNzdWU1NDU2MTkxODg=", "number": 102, "title": "BadDeviceToken after upgrading to 0.7.1 and Python 3.5", "user": {"login": "knawwxbackme", "id": 24592777, "node_id": "MDQ6VXNlcjI0NTkyNzc3", "avatar_url": "https://avatars1.githubusercontent.com/u/24592777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/knawwxbackme", "html_url": "https://github.com/knawwxbackme", "followers_url": "https://api.github.com/users/knawwxbackme/followers", "following_url": "https://api.github.com/users/knawwxbackme/following{/other_user}", "gists_url": "https://api.github.com/users/knawwxbackme/gists{/gist_id}", "starred_url": "https://api.github.com/users/knawwxbackme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/knawwxbackme/subscriptions", "organizations_url": "https://api.github.com/users/knawwxbackme/orgs", "repos_url": "https://api.github.com/users/knawwxbackme/repos", "events_url": "https://api.github.com/users/knawwxbackme/events{/privacy}", "received_events_url": "https://api.github.com/users/knawwxbackme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-06T09:09:36Z", "updated_at": "2020-07-29T00:08:11Z", "closed_at": "2020-07-29T00:08:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there! I just updated to python 3.5 and needed to update to 0.7.1 and after I've done that it seems as though it keeps giving me back a BadDeviceToken response. I haven't changed any of the code or the device tokens. I could really use some help with this. Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/101", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/101/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/101/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/101", "id": 543819122, "node_id": "MDU6SXNzdWU1NDM4MTkxMjI=", "number": 101, "title": "filedescriptor out of range in select()", "user": {"login": "liminkai", "id": 15642592, "node_id": "MDQ6VXNlcjE1NjQyNTky", "avatar_url": "https://avatars0.githubusercontent.com/u/15642592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liminkai", "html_url": "https://github.com/liminkai", "followers_url": "https://api.github.com/users/liminkai/followers", "following_url": "https://api.github.com/users/liminkai/following{/other_user}", "gists_url": "https://api.github.com/users/liminkai/gists{/gist_id}", "starred_url": "https://api.github.com/users/liminkai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liminkai/subscriptions", "organizations_url": "https://api.github.com/users/liminkai/orgs", "repos_url": "https://api.github.com/users/liminkai/repos", "events_url": "https://api.github.com/users/liminkai/events{/privacy}", "received_events_url": "https://api.github.com/users/liminkai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-30T09:56:46Z", "updated_at": "2020-07-07T00:07:01Z", "closed_at": "2020-07-07T00:07:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "filedescriptor out of range in select()", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/100", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/100/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/100/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/100", "id": 543799881, "node_id": "MDU6SXNzdWU1NDM3OTk4ODE=", "number": 100, "title": "Help  -->   [Errno 32] Broken pipe", "user": {"login": "zusrsoft", "id": 26666544, "node_id": "MDQ6VXNlcjI2NjY2NTQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/26666544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zusrsoft", "html_url": "https://github.com/zusrsoft", "followers_url": "https://api.github.com/users/zusrsoft/followers", "following_url": "https://api.github.com/users/zusrsoft/following{/other_user}", "gists_url": "https://api.github.com/users/zusrsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/zusrsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zusrsoft/subscriptions", "organizations_url": "https://api.github.com/users/zusrsoft/orgs", "repos_url": "https://api.github.com/users/zusrsoft/repos", "events_url": "https://api.github.com/users/zusrsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/zusrsoft/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-30T08:52:27Z", "updated_at": "2020-07-07T00:07:02Z", "closed_at": "2020-07-07T00:07:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "![image](https://user-images.githubusercontent.com/26666544/71574522-0ae7c580-2b24-11ea-8469-dd5da33e7cd7.png)\r\n\r\n![image](https://user-images.githubusercontent.com/26666544/71574567-42ef0880-2b24-11ea-8d2a-edf7b56bab08.png)\r\n\r\n![image](https://user-images.githubusercontent.com/26666544/71574637-9feabe80-2b24-11ea-938b-692870e503dd.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/99", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/99/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/99/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/99", "id": 540084599, "node_id": "MDU6SXNzdWU1NDAwODQ1OTk=", "number": 99, "title": "typo in readme", "user": {"login": "tianzhuqiao", "id": 12435643, "node_id": "MDQ6VXNlcjEyNDM1NjQz", "avatar_url": "https://avatars1.githubusercontent.com/u/12435643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tianzhuqiao", "html_url": "https://github.com/tianzhuqiao", "followers_url": "https://api.github.com/users/tianzhuqiao/followers", "following_url": "https://api.github.com/users/tianzhuqiao/following{/other_user}", "gists_url": "https://api.github.com/users/tianzhuqiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/tianzhuqiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tianzhuqiao/subscriptions", "organizations_url": "https://api.github.com/users/tianzhuqiao/orgs", "repos_url": "https://api.github.com/users/tianzhuqiao/repos", "events_url": "https://api.github.com/users/tianzhuqiao/events{/privacy}", "received_events_url": "https://api.github.com/users/tianzhuqiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-19T05:20:35Z", "updated_at": "2020-06-24T23:02:23Z", "closed_at": "2020-06-24T23:02:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**TokensCredentials** shall be **TokenCredentials**.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/98", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/98/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/98/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/98", "id": 526385525, "node_id": "MDU6SXNzdWU1MjYzODU1MjU=", "number": 98, "title": "can not choice push host at develpoment or production ", "user": {"login": "liansheng", "id": 16658011, "node_id": "MDQ6VXNlcjE2NjU4MDEx", "avatar_url": "https://avatars0.githubusercontent.com/u/16658011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liansheng", "html_url": "https://github.com/liansheng", "followers_url": "https://api.github.com/users/liansheng/followers", "following_url": "https://api.github.com/users/liansheng/following{/other_user}", "gists_url": "https://api.github.com/users/liansheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/liansheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liansheng/subscriptions", "organizations_url": "https://api.github.com/users/liansheng/orgs", "repos_url": "https://api.github.com/users/liansheng/repos", "events_url": "https://api.github.com/users/liansheng/events{/privacy}", "received_events_url": "https://api.github.com/users/liansheng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-21T06:08:53Z", "updated_at": "2019-11-21T11:05:17Z", "closed_at": "2019-11-21T11:05:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "server only  \r\n```python\r\nSANDBOX_SERVER = 'api.sandbox.push.apple.com'\r\nLIVE_SERVER = 'api.push.apple.com'\r\n```\r\ncan push to develpoment host", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/94", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/94/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/94/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/94", "id": 511653610, "node_id": "MDU6SXNzdWU1MTE2NTM2MTA=", "number": 94, "title": "h2.exceptions.ProtocolError", "user": {"login": "SearchDream", "id": 72898, "node_id": "MDQ6VXNlcjcyODk4", "avatar_url": "https://avatars0.githubusercontent.com/u/72898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SearchDream", "html_url": "https://github.com/SearchDream", "followers_url": "https://api.github.com/users/SearchDream/followers", "following_url": "https://api.github.com/users/SearchDream/following{/other_user}", "gists_url": "https://api.github.com/users/SearchDream/gists{/gist_id}", "starred_url": "https://api.github.com/users/SearchDream/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SearchDream/subscriptions", "organizations_url": "https://api.github.com/users/SearchDream/orgs", "repos_url": "https://api.github.com/users/SearchDream/repos", "events_url": "https://api.github.com/users/SearchDream/events{/privacy}", "received_events_url": "https://api.github.com/users/SearchDream/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-24T01:37:15Z", "updated_at": "2019-10-24T10:45:51Z", "closed_at": "2019-10-24T10:45:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "h2.exceptions.ProtocolError: Received duplicate pseudo-header field b':path'\r\nAnyone know why sometimes got this error?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/93", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/93/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/93/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/93", "id": 506982314, "node_id": "MDU6SXNzdWU1MDY5ODIzMTQ=", "number": 93, "title": "Sandbox endpoint URL has changed", "user": {"login": "GamelyAnthony", "id": 46909300, "node_id": "MDQ6VXNlcjQ2OTA5MzAw", "avatar_url": "https://avatars0.githubusercontent.com/u/46909300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GamelyAnthony", "html_url": "https://github.com/GamelyAnthony", "followers_url": "https://api.github.com/users/GamelyAnthony/followers", "following_url": "https://api.github.com/users/GamelyAnthony/following{/other_user}", "gists_url": "https://api.github.com/users/GamelyAnthony/gists{/gist_id}", "starred_url": "https://api.github.com/users/GamelyAnthony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GamelyAnthony/subscriptions", "organizations_url": "https://api.github.com/users/GamelyAnthony/orgs", "repos_url": "https://api.github.com/users/GamelyAnthony/repos", "events_url": "https://api.github.com/users/GamelyAnthony/events{/privacy}", "received_events_url": "https://api.github.com/users/GamelyAnthony/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-15T03:28:36Z", "updated_at": "2020-04-19T16:57:08Z", "closed_at": "2020-04-19T16:57:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nIt appears that the Sandbox URL has changed in the latest [documentation](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html)\r\nIt is now `api.development.push.apple.com`\r\nThe URL currently used by the library continues to work, however, so this may be a backlog task.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/92", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/92/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/92/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/92", "id": 506143596, "node_id": "MDU6SXNzdWU1MDYxNDM1OTY=", "number": 92, "title": "Random crash when sending many notifications", "user": {"login": "aaugustin", "id": 788910, "node_id": "MDQ6VXNlcjc4ODkxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/788910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaugustin", "html_url": "https://github.com/aaugustin", "followers_url": "https://api.github.com/users/aaugustin/followers", "following_url": "https://api.github.com/users/aaugustin/following{/other_user}", "gists_url": "https://api.github.com/users/aaugustin/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaugustin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaugustin/subscriptions", "organizations_url": "https://api.github.com/users/aaugustin/orgs", "repos_url": "https://api.github.com/users/aaugustin/repos", "events_url": "https://api.github.com/users/aaugustin/events{/privacy}", "received_events_url": "https://api.github.com/users/aaugustin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-12T06:52:29Z", "updated_at": "2019-10-21T07:32:23Z", "closed_at": "2019-10-12T13:03:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm sending batches of ~1 million notifications. I need to send them fairly quickly, so I'm spreading the work to 10 distinct Python processes (not threads) with the multiprocessing module. Each process passes an iterator of ~100k tokens to `send_notification_batch`.\r\n\r\nThis used to work very well, but since a few days, I'm getting this exception:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/myapp/src/myapp/apns.py\", line 149, in _send_many\r\n    topic=settings.APNS_TOPIC,\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/apns2/client.py\", line 174, in send_notification_batch\r\n    priority, expiration, collapse_id)\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/apns2/client.py\", line 120, in send_notification_async\r\n    stream_id = self._connection.request('POST', url, json_payload, headers)  # type: int\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/src/hyper/hyper/http20/connection.py\", line 274, in request\r\n    self.endheaders(message_body=body, final=True, stream_id=stream_id)\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/src/hyper/hyper/http20/connection.py\", line 571, in endheaders\r\n    stream.send_headers(headers_only)\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/src/hyper/hyper/http20/stream.py\", line 98, in send_headers\r\n    conn.send_headers(self.stream_id, headers, end_stream)\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/h2/connection.py\", line 844, in send_headers\r\n    headers, self.encoder, end_stream\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/h2/stream.py\", line 913, in send_headers\r\n    headers, encoder, hf, hdr_validation_flags\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/h2/stream.py\", line 1306, in _build_headers_frames\r\n    encoded_headers = encoder.encode(headers)\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/hpack/hpack.py\", line 249, in encode\r\n    for header in headers:\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/h2/utilities.py\", line 474, in inner\r\n    for header in headers:\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/h2/utilities.py\", line 419, in _validate_host_authority_header\r\n    for header in headers:\r\n  File \"/home/ubuntu/.pyenv/versions/3.6.2/envs/myapp/lib/python3.6/site-packages/h2/utilities.py\", line 331, in _reject_pseudo_header_fields\r\n    \"Received duplicate pseudo-header field %s\" % header[0]\r\nh2.exceptions.ProtocolError: Received duplicate pseudo-header field b':path'\r\n```\r\n\r\nI think it's random. I haven't been able to reproduce it at a small scale. I haven't been able to figure out with what frequency it happens yet.\r\n\r\nI couldn't track down a change in a library that would cause this. It didn't start with a code deployment.\r\n\r\nHere are the versions I'm using:\r\n\r\n```\r\napns2 = 0.6.0\r\nhyper = https://github.com/Lukasa/hyper.git@18b629b8487169870235fe13387e2ae03c178b9f\r\nh2 = 2.6.2\r\n```\r\n\r\n----\r\n\r\nThe exception happens when we're preparing a request to send to APNS. If there's a bug, it's likely in hyper or h2, but hyper has been dead for 2 years, so there's no point filing a bug there.\r\n\r\nI'm not sure there's much you can do with the information I provided :-( I'm writing the bug report in case someone else has the same issue, mostly...\r\n\r\nIn the long run, I guess it will be best to switch to httpx, but I'm not sure it does what you need yet \u2014 namely https://github.com/encode/httpx/pull/52\r\n\r\n----\r\n\r\nFor now, I added debug code to try to figure out what happens:\r\n\r\n```diff\r\n--- apns2/client.py  2019-10-12 08:43:14.000000000 +0200\r\n+++ apns2/client.py   2019-10-12 08:42:21.000000000 +0200\r\n@@ -117,7 +117,13 @@\r\n             headers['apns-collapse-id'] = collapse_id\r\n\r\n         url = '/3/device/{}'.format(token_hex)\r\n-        stream_id = self._connection.request('POST', url, json_payload, headers)  # type: int\r\n+        try:\r\n+            stream_id = self._connection.request('POST', url, json_payload, headers)  # type: int\r\n+        except Exception:\r\n+            from myapp import logging as m_logging\r\n+            m_logger = m_logging.get_logger(\"apns2.debug\")\r\n+            m_logger.exception(\"Exception in send_notification_async\", code=\"apns2.send_notification_async\", url=url, json_payload=json_payload, headers=headers)\r\n+            raise\r\n         return stream_id\r\n\r\n     def get_notification_result(self, stream_id: int) -> Union[str, Tuple[str, str]]:\r\n@@ -170,8 +176,11 @@\r\n             self.update_max_concurrent_streams()\r\n             if next_notification is not None and len(open_streams) < self.__max_concurrent_streams:\r\n                 logger.info('Sending to token %s', next_notification.token)\r\n-                stream_id = self.send_notification_async(next_notification.token, next_notification.payload, topic,\r\n-                                                         priority, expiration, collapse_id)\r\n+                try:\r\n+                    stream_id = self.send_notification_async(next_notification.token, next_notification.payload, topic,\r\n+                                                             priority, expiration, collapse_id)\r\n+                except Exception:\r\n+                    results[next_notification.token] = 'Failed'\r\n                 open_streams.append(RequestStream(stream_id, next_notification.token))\r\n\r\n                 next_notification = next(notification_iterator, None)\r\n```\r\n\r\nI can't send a notification to 1 million people just for testing, though, so debugging will take time...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/91", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/91/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/91/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/91", "id": 505897983, "node_id": "MDU6SXNzdWU1MDU4OTc5ODM=", "number": 91, "title": "SyntaxError: invalid syntax", "user": {"login": "fbartolom", "id": 2322827, "node_id": "MDQ6VXNlcjIzMjI4Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2322827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fbartolom", "html_url": "https://github.com/fbartolom", "followers_url": "https://api.github.com/users/fbartolom/followers", "following_url": "https://api.github.com/users/fbartolom/following{/other_user}", "gists_url": "https://api.github.com/users/fbartolom/gists{/gist_id}", "starred_url": "https://api.github.com/users/fbartolom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fbartolom/subscriptions", "organizations_url": "https://api.github.com/users/fbartolom/orgs", "repos_url": "https://api.github.com/users/fbartolom/repos", "events_url": "https://api.github.com/users/fbartolom/events{/privacy}", "received_events_url": "https://api.github.com/users/fbartolom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-11T14:49:32Z", "updated_at": "2020-04-19T00:02:54Z", "closed_at": "2020-04-19T00:02:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to execute the script linking the library I get a syntax error:\r\n\r\nTraceback (most recent call last):\r\n  File \"remotenotifications.py\", line 1, in <module>\r\n    from apns2.client import APNsClient\r\n  File \"/var/www/html/iPhone/tags/apns2/client.py\", line 50\r\n    credentials: Union[Credentials, str],\r\n               ^\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/89", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/89/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/89/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/89", "id": 501979937, "node_id": "MDU6SXNzdWU1MDE5Nzk5Mzc=", "number": 89, "title": "Set delayed priority automatically", "user": {"login": "Kern3l", "id": 430658, "node_id": "MDQ6VXNlcjQzMDY1OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/430658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kern3l", "html_url": "https://github.com/Kern3l", "followers_url": "https://api.github.com/users/Kern3l/followers", "following_url": "https://api.github.com/users/Kern3l/following{/other_user}", "gists_url": "https://api.github.com/users/Kern3l/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kern3l/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kern3l/subscriptions", "organizations_url": "https://api.github.com/users/Kern3l/orgs", "repos_url": "https://api.github.com/users/Kern3l/repos", "events_url": "https://api.github.com/users/Kern3l/events{/privacy}", "received_events_url": "https://api.github.com/users/Kern3l/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-03T10:25:04Z", "updated_at": "2020-04-10T00:03:23Z", "closed_at": "2020-04-10T00:03:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "It may be important: https://onesignal.com/blog/ios-13-introduces-4-breaking-changes-to-notifications/#apns-priority-must-be-set-to-5-for-background-notifications", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/88", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/88/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/88/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/88", "id": 496855857, "node_id": "MDU6SXNzdWU0OTY4NTU4NTc=", "number": 88, "title": "ImportError: cannot import name 'Deque' in Python < 3.5.4", "user": {"login": "andersk", "id": 26471, "node_id": "MDQ6VXNlcjI2NDcx", "avatar_url": "https://avatars0.githubusercontent.com/u/26471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andersk", "html_url": "https://github.com/andersk", "followers_url": "https://api.github.com/users/andersk/followers", "following_url": "https://api.github.com/users/andersk/following{/other_user}", "gists_url": "https://api.github.com/users/andersk/gists{/gist_id}", "starred_url": "https://api.github.com/users/andersk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andersk/subscriptions", "organizations_url": "https://api.github.com/users/andersk/orgs", "repos_url": "https://api.github.com/users/andersk/repos", "events_url": "https://api.github.com/users/andersk/events{/privacy}", "received_events_url": "https://api.github.com/users/andersk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-23T00:51:22Z", "updated_at": "2019-10-08T19:49:47Z", "closed_at": "2019-10-08T19:49:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On Ubuntu 16.04, which has Python 3.5.2, `apns2.client` fails to import, because `typing.Deque` was not added until Python 3.5.4.\r\n\r\n```pycon\r\n>>> import apns2.client\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.5/dist-packages/apns2/client.py\", line 9, in <module>\r\n    from typing import Deque, Dict, Iterable, Optional, Tuple, Type, Union\r\nImportError: cannot import name 'Deque'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/87", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/87/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/87/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/87", "id": 496558867, "node_id": "MDU6SXNzdWU0OTY1NTg4Njc=", "number": 87, "title": "apns-push-type cannot be present with voip push", "user": {"login": "matthewh", "id": 247648, "node_id": "MDQ6VXNlcjI0NzY0OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/247648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewh", "html_url": "https://github.com/matthewh", "followers_url": "https://api.github.com/users/matthewh/followers", "following_url": "https://api.github.com/users/matthewh/following{/other_user}", "gists_url": "https://api.github.com/users/matthewh/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewh/subscriptions", "organizations_url": "https://api.github.com/users/matthewh/orgs", "repos_url": "https://api.github.com/users/matthewh/repos", "events_url": "https://api.github.com/users/matthewh/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-20T21:45:28Z", "updated_at": "2019-10-30T22:37:26Z", "closed_at": "2019-10-02T21:46:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting **InvalidPushType** when attempting to send a VOIP push with apns-push-type specified.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/86", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/86/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/86/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/86", "id": 492937675, "node_id": "MDU6SXNzdWU0OTI5Mzc2NzU=", "number": 86, "title": "TooManyStreamsError Exception occurred. Max outbound streams is 1000, 1000 open", "user": {"login": "Anant706", "id": 5978683, "node_id": "MDQ6VXNlcjU5Nzg2ODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5978683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anant706", "html_url": "https://github.com/Anant706", "followers_url": "https://api.github.com/users/Anant706/followers", "following_url": "https://api.github.com/users/Anant706/following{/other_user}", "gists_url": "https://api.github.com/users/Anant706/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anant706/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anant706/subscriptions", "organizations_url": "https://api.github.com/users/Anant706/orgs", "repos_url": "https://api.github.com/users/Anant706/repos", "events_url": "https://api.github.com/users/Anant706/events{/privacy}", "received_events_url": "https://api.github.com/users/Anant706/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-12T17:33:42Z", "updated_at": "2020-06-18T00:05:48Z", "closed_at": "2020-06-18T00:05:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am frequently getting \r\nTooManyStreamsError Exception occurred. Max outbound streams is 1000, 1000 open\r\n\r\nI am using apns2==0.5.0\r\n\r\napns_response = apns.get_notification_result(stream_id)\r\n  File \"/usr/local/lib/python3.6/site-packages/apns2/client.py\", line 116, in get_notification_result\r\n    with self._connection.get_response(stream_id) as response:\r\n  File \"/usr/local/lib/python3.6/site-packages/hyper/http20/connection.py\", line 311, in get_response\r\n    stream = self._get_stream(stream_id)\r\n  File \"/usr/local/lib/python3.6/site-packages/hyper/http20/connection.py\", line 289, in _get_stream\r\n    raise StreamResetError(\"Stream forcefully closed\")\r\nhyper.http20.exceptions.StreamResetError: Stream forcefully closed\" ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/85", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/85/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/85/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/85", "id": 491853328, "node_id": "MDU6SXNzdWU0OTE4NTMzMjg=", "number": 85, "title": "Exception: TooManyProviderTokenUpdates", "user": {"login": "Anant706", "id": 5978683, "node_id": "MDQ6VXNlcjU5Nzg2ODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5978683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anant706", "html_url": "https://github.com/Anant706", "followers_url": "https://api.github.com/users/Anant706/followers", "following_url": "https://api.github.com/users/Anant706/following{/other_user}", "gists_url": "https://api.github.com/users/Anant706/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anant706/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anant706/subscriptions", "organizations_url": "https://api.github.com/users/Anant706/orgs", "repos_url": "https://api.github.com/users/Anant706/repos", "events_url": "https://api.github.com/users/Anant706/events{/privacy}", "received_events_url": "https://api.github.com/users/Anant706/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-10T19:24:04Z", "updated_at": "2020-03-20T00:03:03Z", "closed_at": "2020-03-20T00:03:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "    def process_notification(message):\r\n\r\n    apns = apnsClient\r\n\r\n    apns_response = None\r\n\r\n    try:\r\n        stream_id = apns.send_notification_async(device_token, apns_payload, target_app)\r\n        apns_response = apns.get_notification_result(stream_id)\r\n    except e:\r\n       logging.error(f\"APNS server error occurred.Reason: {apns_response}\")\r\n\r\n    if __name__ == '__main__':\r\n\r\n    # To use token based authentication\r\n    auth_key_path = 'AuthKey.p8'\r\n    auth_file = os.path.join(sys.path[0], auth_key_path)\r\n    auth_key_id = '************'\r\n    team_id = '********'\r\n    token_credentials = TokenCredentials(auth_key_path=auth_file, auth_key_id=auth_key_id, team_id=team_id)\r\n    apnsClient = APNsClient(credentials=token_credentials, use_sandbox=False)\r\n    subscriber.subscribe(subscription_name, process_notification, auto_ack_on_received=False)\r\n    while True:\r\n        time.sleep(60)\r\n\r\n1. I have two PODS running in GCP.\r\n2. apns2==0.5.0\r\n\r\nGetting \"Exception: TooManyProviderTokenUpdates\" not very frequently but 3-4 times a day for continuous 1 hour.\r\n\r\nWhat's misconfiguration I have done that is causing the issue?\r\n\r\nCould anyone please assist me?\r\nThank you.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/83", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/83/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/83/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/83", "id": 480811930, "node_id": "MDU6SXNzdWU0ODA4MTE5MzA=", "number": 83, "title": "SyntaxError: invalid syntax", "user": {"login": "ghap16", "id": 7077561, "node_id": "MDQ6VXNlcjcwNzc1NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/7077561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghap16", "html_url": "https://github.com/ghap16", "followers_url": "https://api.github.com/users/ghap16/followers", "following_url": "https://api.github.com/users/ghap16/following{/other_user}", "gists_url": "https://api.github.com/users/ghap16/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghap16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghap16/subscriptions", "organizations_url": "https://api.github.com/users/ghap16/orgs", "repos_url": "https://api.github.com/users/ghap16/repos", "events_url": "https://api.github.com/users/ghap16/events{/privacy}", "received_events_url": "https://api.github.com/users/ghap16/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-14T18:00:45Z", "updated_at": "2019-08-14T20:51:14Z", "closed_at": "2019-08-14T20:51:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/Pr0Ger/PyAPNs2/blob/3409ff5bde7997b78147cc93b64e821b0ab093e0/apns2/client.py#L41", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/81", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/81/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/81/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/81", "id": 460525575, "node_id": "MDU6SXNzdWU0NjA1MjU1NzU=", "number": 81, "title": "Please clarify - sending multiple notifications", "user": {"login": "westofpluto", "id": 3218675, "node_id": "MDQ6VXNlcjMyMTg2NzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3218675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/westofpluto", "html_url": "https://github.com/westofpluto", "followers_url": "https://api.github.com/users/westofpluto/followers", "following_url": "https://api.github.com/users/westofpluto/following{/other_user}", "gists_url": "https://api.github.com/users/westofpluto/gists{/gist_id}", "starred_url": "https://api.github.com/users/westofpluto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/westofpluto/subscriptions", "organizations_url": "https://api.github.com/users/westofpluto/orgs", "repos_url": "https://api.github.com/users/westofpluto/repos", "events_url": "https://api.github.com/users/westofpluto/events{/privacy}", "received_events_url": "https://api.github.com/users/westofpluto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-25T16:32:50Z", "updated_at": "2020-01-01T00:04:15Z", "closed_at": "2020-01-01T00:04:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Suppose my server is running code that responds to various events and those events tell the server to send push notifications to various tokens at various times. So in real time, my server may want to send 1 or 2 or 20 or 200 push notifications to various tokens (various iOS devices). Because of the way the server code is structured, I will need to use the client.send_notification function instead of send_notfication_batch. My question is this: if we have some number of (token,payload) messages to send, should we loop through all those messages and create the APNsClient object each time, ie one for each message? Or is it best to create the APNsClient once and send all the messages on the same client? Please explain. Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/77", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/77/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/77/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/77", "id": 421390941, "node_id": "MDU6SXNzdWU0MjEzOTA5NDE=", "number": 77, "title": "Problems after 10 days of operation", "user": {"login": "ninwjf", "id": 26050583, "node_id": "MDQ6VXNlcjI2MDUwNTgz", "avatar_url": "https://avatars1.githubusercontent.com/u/26050583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ninwjf", "html_url": "https://github.com/ninwjf", "followers_url": "https://api.github.com/users/ninwjf/followers", "following_url": "https://api.github.com/users/ninwjf/following{/other_user}", "gists_url": "https://api.github.com/users/ninwjf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ninwjf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ninwjf/subscriptions", "organizations_url": "https://api.github.com/users/ninwjf/orgs", "repos_url": "https://api.github.com/users/ninwjf/repos", "events_url": "https://api.github.com/users/ninwjf/events{/privacy}", "received_events_url": "https://api.github.com/users/ninwjf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-15T07:42:08Z", "updated_at": "2019-03-18T05:05:30Z", "closed_at": "2019-03-18T05:05:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/76", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/76/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/76/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/76", "id": 420585435, "node_id": "MDU6SXNzdWU0MjA1ODU0MzU=", "number": 76, "title": "TooManyProviderTokenUpdates errors when sending push notifications with different topics around the same time", "user": {"login": "avium", "id": 39867, "node_id": "MDQ6VXNlcjM5ODY3", "avatar_url": "https://avatars2.githubusercontent.com/u/39867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avium", "html_url": "https://github.com/avium", "followers_url": "https://api.github.com/users/avium/followers", "following_url": "https://api.github.com/users/avium/following{/other_user}", "gists_url": "https://api.github.com/users/avium/gists{/gist_id}", "starred_url": "https://api.github.com/users/avium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avium/subscriptions", "organizations_url": "https://api.github.com/users/avium/orgs", "repos_url": "https://api.github.com/users/avium/repos", "events_url": "https://api.github.com/users/avium/events{/privacy}", "received_events_url": "https://api.github.com/users/avium/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-13T16:05:31Z", "updated_at": "2019-05-22T23:01:32Z", "closed_at": "2019-05-22T23:01:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using token authentication, APNs starts emitting `TooManyProviderTokenUpdates` errors if notifications with different topics are sent around the same time on the same connection. It looks like this happens because the `TokenCredentials` class creates and stores a different token for each topic by design, and APNs doesn't want a provider token to change on a single connection more often than once every 20 minutes.\r\n\r\nFrom [Apple's documentation](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/sending_notification_requests_to_apns#2947619):\r\n\r\n> The provider\u2019s authentication token is being updated too often. Update the authentication token no more than once every 20 minutes.\r\n\r\nPreliminarily, it seems like this problem can be worked around by forcing `TokenCredentials` to only ever use one JWT at a time, but this would seem to go against the intent of the library?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/73", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/73/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/73/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/73", "id": 384481117, "node_id": "MDU6SXNzdWUzODQ0ODExMTc=", "number": 73, "title": "PyPi version including the heartbeat_period commit", "user": {"login": "srcreigh", "id": 2747249, "node_id": "MDQ6VXNlcjI3NDcyNDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2747249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srcreigh", "html_url": "https://github.com/srcreigh", "followers_url": "https://api.github.com/users/srcreigh/followers", "following_url": "https://api.github.com/users/srcreigh/following{/other_user}", "gists_url": "https://api.github.com/users/srcreigh/gists{/gist_id}", "starred_url": "https://api.github.com/users/srcreigh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srcreigh/subscriptions", "organizations_url": "https://api.github.com/users/srcreigh/orgs", "repos_url": "https://api.github.com/users/srcreigh/repos", "events_url": "https://api.github.com/users/srcreigh/events{/privacy}", "received_events_url": "https://api.github.com/users/srcreigh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-26T19:41:29Z", "updated_at": "2019-05-07T16:05:08Z", "closed_at": "2019-05-07T16:05:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, the last version 0.4.1 was released in May, however I would like to use changes merged in July. Could you make a new release on PyPi (0.4.2)?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/72", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/72/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/72/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/72", "id": 384478297, "node_id": "MDU6SXNzdWUzODQ0NzgyOTc=", "number": 72, "title": "Recommended heartbeat_period value", "user": {"login": "srcreigh", "id": 2747249, "node_id": "MDQ6VXNlcjI3NDcyNDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2747249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srcreigh", "html_url": "https://github.com/srcreigh", "followers_url": "https://api.github.com/users/srcreigh/followers", "following_url": "https://api.github.com/users/srcreigh/following{/other_user}", "gists_url": "https://api.github.com/users/srcreigh/gists{/gist_id}", "starred_url": "https://api.github.com/users/srcreigh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srcreigh/subscriptions", "organizations_url": "https://api.github.com/users/srcreigh/orgs", "repos_url": "https://api.github.com/users/srcreigh/repos", "events_url": "https://api.github.com/users/srcreigh/events{/privacy}", "received_events_url": "https://api.github.com/users/srcreigh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-26T19:33:47Z", "updated_at": "2019-06-20T09:13:41Z", "closed_at": "2019-06-20T09:13:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, regarding the `heartbeat_period` method of keeping a connection from breaking during periods of inactivity, is there a recommended default value?\r\n\r\n@arthur-a in your PR you mentioned that \"when connection is not used for several minutes\" the connection may break. In your example you use 10 seconds. I imagine it may be safe to use 60s or 120s. What do you recommend?\r\n\r\nAlso, @Pr0Ger, would you accept a PR to enable the heartbeat_period by default, or a PR to update the README about its usage?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/71", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/71/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/71/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/71", "id": 380050536, "node_id": "MDU6SXNzdWUzODAwNTA1MzY=", "number": 71, "title": "greenlet.error: cannot switch to a different thread", "user": {"login": "ninwjf", "id": 26050583, "node_id": "MDQ6VXNlcjI2MDUwNTgz", "avatar_url": "https://avatars1.githubusercontent.com/u/26050583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ninwjf", "html_url": "https://github.com/ninwjf", "followers_url": "https://api.github.com/users/ninwjf/followers", "following_url": "https://api.github.com/users/ninwjf/following{/other_user}", "gists_url": "https://api.github.com/users/ninwjf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ninwjf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ninwjf/subscriptions", "organizations_url": "https://api.github.com/users/ninwjf/orgs", "repos_url": "https://api.github.com/users/ninwjf/repos", "events_url": "https://api.github.com/users/ninwjf/events{/privacy}", "received_events_url": "https://api.github.com/users/ninwjf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-13T04:04:58Z", "updated_at": "2019-02-20T03:17:10Z", "closed_at": "2019-02-20T03:17:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "An error occurs if the heartbeat_period parameter is set\uff1a\r\n\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/apns2-0.4.1-py3.6.egg/apns2/client.py\", line 179, in send_notification_batch\r\n    result = self.get_notification_result(pending_stream.stream_id)\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/apns2-0.4.1-py3.6.egg/apns2/client.py\", line 122, in get_notification_result\r\n    with self._connection.get_response(stream_id) as response:\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/hyper/http20/connection.py\", line 312, in get_response\r\n    return HTTP20Response(stream.getheaders(), stream)\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/hyper/http20/stream.py\", line 230, in getheaders\r\n    self._recv_cb(stream_id=self.stream_id)\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/hyper/http20/connection.py\", line 771, in _recv_cb\r\n    self._single_read()\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/hyper/http20/connection.py\", line 665, in _single_read\r\n    self._sock.fill()\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/hyper/common/bufsocket.py\", line 167, in fill\r\n    count = self._sck.recv_into(self._buffer_view[self._buffer_end:])\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/gevent/_ssl3.py\", line 503, in recv_into\r\n    return self.read(nbytes, buffer)\r\n  File \"/home/web/.py3env/lib/python3.6/site-packages/gevent/_ssl3.py\", line 332, in read\r\n    self._wait(self._read_event, timeout_exc=_SSLErrorReadTimeout)\r\n  File \"src/gevent/_hub_primitives.py\", line 265, in gevent.__hub_primitives.wait_on_socket\r\n    \r\n  File \"src/gevent/_hub_primitives.py\", line 266, in gevent.__hub_primitives.wait_on_socket\r\n    \r\n  File \"src/gevent/_hub_primitives.py\", line 252, in gevent.__hub_primitives._primitive_wait\r\n    \r\n  File \"src/gevent/_hub_primitives.py\", line 46, in gevent.__hub_primitives.WaitOperationsGreenlet.wait\r\n    \r\n  File \"src/gevent/_hub_primitives.py\", line 46, in gevent.__hub_primitives.WaitOperationsGreenlet.wait\r\n    \r\n  File \"src/gevent/_hub_primitives.py\", line 55, in gevent.__hub_primitives.WaitOperationsGreenlet.wait\r\n    \r\n  File \"src/gevent/_waiter.py\", line 151, in gevent.__waiter.Waiter.get\r\n    \r\n  File \"src/gevent/_greenlet_primitives.py\", line 59, in gevent.__greenlet_primitives.SwitchOutGreenletWithLoop.switch\r\n    \r\n  File \"src/gevent/_greenlet_primitives.py\", line 59, in gevent.__greenlet_primitives.SwitchOutGreenletWithLoop.switch\r\n    \r\n  File \"src/gevent/_greenlet_primitives.py\", line 63, in gevent.__greenlet_primitives.SwitchOutGreenletWithLoop.switch\r\n    \r\n  File \"src/gevent/__greenlet_primitives.pxd\", line 35, in gevent.__greenlet_primitives._greenlet_switch\r\n    \r\ngreenlet.error: cannot switch to a different thread", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/70", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/70/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/70/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/70", "id": 376438640, "node_id": "MDU6SXNzdWUzNzY0Mzg2NDA=", "number": 70, "title": "TopicDisallowed when using VoIP or Watch \"Complications\"", "user": {"login": "spditner", "id": 1382783, "node_id": "MDQ6VXNlcjEzODI3ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1382783?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spditner", "html_url": "https://github.com/spditner", "followers_url": "https://api.github.com/users/spditner/followers", "following_url": "https://api.github.com/users/spditner/following{/other_user}", "gists_url": "https://api.github.com/users/spditner/gists{/gist_id}", "starred_url": "https://api.github.com/users/spditner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spditner/subscriptions", "organizations_url": "https://api.github.com/users/spditner/orgs", "repos_url": "https://api.github.com/users/spditner/repos", "events_url": "https://api.github.com/users/spditner/events{/privacy}", "received_events_url": "https://api.github.com/users/spditner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-01T15:19:35Z", "updated_at": "2019-11-14T00:04:31Z", "closed_at": "2019-11-14T00:04:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Took a bit of time to figure out what this was supposed to be set to. I originally thought it was just the app id, i.e com.example.yourApp as noted in the README -- however for VoIP pushes, you have to add a .voip suffix (see \"APNs Provider Certificates\" in the [Apple Docs](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html)), same goes for Watch where you have to add a .complication suffix.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/67", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/67/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/67/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/67", "id": 340591651, "node_id": "MDU6SXNzdWUzNDA1OTE2NTE=", "number": 67, "title": "Broken pipe", "user": {"login": "omidontop", "id": 1851344, "node_id": "MDQ6VXNlcjE4NTEzNDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1851344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omidontop", "html_url": "https://github.com/omidontop", "followers_url": "https://api.github.com/users/omidontop/followers", "following_url": "https://api.github.com/users/omidontop/following{/other_user}", "gists_url": "https://api.github.com/users/omidontop/gists{/gist_id}", "starred_url": "https://api.github.com/users/omidontop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omidontop/subscriptions", "organizations_url": "https://api.github.com/users/omidontop/orgs", "repos_url": "https://api.github.com/users/omidontop/repos", "events_url": "https://api.github.com/users/omidontop/events{/privacy}", "received_events_url": "https://api.github.com/users/omidontop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-12T11:06:26Z", "updated_at": "2019-01-17T12:37:24Z", "closed_at": "2019-01-17T12:37:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "This seems to be a more serious issue which I have seen a couple of times and it does not go away with a resend and requires a restart of the daemon:\r\n\r\n```\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] HPACK encoding <generator object inner at 0x7f78a12cb4a0>\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Adding (':method', 'POST') to the header table\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Encoding 3 with 7 bits\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Adding (':scheme', 'https') to the header table\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Encoding 7 with 7 bits\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Adding (':authority', 'api.development.push.apple.com') to the header table\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Encoding 64 with 7 bits\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Adding (':path', '/3/device/************************* [HIDDEN] ***************************') to the header table\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Encoding 63 with 7 bits\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Adding ('apns-topic', 'com.organization.Application') to the header table\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Encoding 62 with 7 bits\r\n[2018-07-10 12:09:19 AM] [hpack.hpack              ] [DEBUG] Encoded header block to \ufffd\ufffd\ufffd\ufffd\ufffd\r\n[2018-07-10 12:09:19 AM] [root                     ] [ERROR] [Errno 32] Broken pipe\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/66", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/66/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/66/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/66", "id": 339407954, "node_id": "MDU6SXNzdWUzMzk0MDc5NTQ=", "number": 66, "title": "Stream forcefully closed", "user": {"login": "omidontop", "id": 1851344, "node_id": "MDQ6VXNlcjE4NTEzNDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1851344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omidontop", "html_url": "https://github.com/omidontop", "followers_url": "https://api.github.com/users/omidontop/followers", "following_url": "https://api.github.com/users/omidontop/following{/other_user}", "gists_url": "https://api.github.com/users/omidontop/gists{/gist_id}", "starred_url": "https://api.github.com/users/omidontop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omidontop/subscriptions", "organizations_url": "https://api.github.com/users/omidontop/orgs", "repos_url": "https://api.github.com/users/omidontop/repos", "events_url": "https://api.github.com/users/omidontop/events{/privacy}", "received_events_url": "https://api.github.com/users/omidontop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-07-09T11:18:30Z", "updated_at": "2019-02-16T13:42:05Z", "closed_at": "2019-02-16T13:42:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thank you for the great work, you saved me a ton of time! I have encountered an issue and sometimes I randomly get a ```Stream forcefully closed``` exception. This is definitely not because of a certificate issue as it works the majority of times. Here's the debug trace leading to the exception:\r\n\r\n```\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] HPACK encoding <generator object inner at 0x7f14f75b01f0>\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Adding (':method', 'POST') to the header table\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Encoding 3 with 7 bits\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Adding (':scheme', 'https') to the header table\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Encoding 7 with 7 bits\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Adding (':authority', 'api.development.push.apple.com') to the header table\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Encoding 64 with 7 bits\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Adding (':path', '/3/device/************************* [HIDDEN] ***************************') to the header table\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Encoding 63 with 7 bits\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Adding ('apns-topic', 'com.organization.Application') to the header table\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Encoding 62 with 7 bits\r\n[2018-07-09 01:00:43 PM] [hpack.hpack              ] [DEBUG] Encoded header block to \ufffd\ufffd\ufffd\ufffd\ufffd\r\n[2018-07-09 01:00:43 PM] [hyper.http20.connection  ] [DEBUG] recv for stream 3 with set([]) already present\r\n[2018-07-09 01:00:43 PM] [hyper.http20.connection  ] [DEBUG] Close stream 3\r\n[2018-07-09 01:00:43 PM] [hyper.http20.connection  ] [DEBUG] recv for stream 3 with set([]) already present\r\n[2018-07-09 01:00:43 PM] [root                     ] [ERROR] Stream forcefully closed\r\n```\r\n\r\nAny ideas where the problem might be?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/65", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/65/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/65/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/65", "id": 337197514, "node_id": "MDU6SXNzdWUzMzcxOTc1MTQ=", "number": 65, "title": "how to send batch notifications under pyapns2", "user": {"login": "markmark1", "id": 6416539, "node_id": "MDQ6VXNlcjY0MTY1Mzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/6416539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markmark1", "html_url": "https://github.com/markmark1", "followers_url": "https://api.github.com/users/markmark1/followers", "following_url": "https://api.github.com/users/markmark1/following{/other_user}", "gists_url": "https://api.github.com/users/markmark1/gists{/gist_id}", "starred_url": "https://api.github.com/users/markmark1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markmark1/subscriptions", "organizations_url": "https://api.github.com/users/markmark1/orgs", "repos_url": "https://api.github.com/users/markmark1/repos", "events_url": "https://api.github.com/users/markmark1/events{/privacy}", "received_events_url": "https://api.github.com/users/markmark1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-30T08:20:51Z", "updated_at": "2019-01-05T14:10:54Z", "closed_at": "2019-01-05T14:10:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "n_notifications =  [n] * len(n_push_tokens)        \r\n        pyapns.notify(\u2018app', n_push_tokens, n_notifications)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/64", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/64/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/64/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/64", "id": 329100523, "node_id": "MDU6SXNzdWUzMjkxMDA1MjM=", "number": 64, "title": "Socket timeouts", "user": {"login": "alemangui", "id": 1225929, "node_id": "MDQ6VXNlcjEyMjU5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1225929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alemangui", "html_url": "https://github.com/alemangui", "followers_url": "https://api.github.com/users/alemangui/followers", "following_url": "https://api.github.com/users/alemangui/following{/other_user}", "gists_url": "https://api.github.com/users/alemangui/gists{/gist_id}", "starred_url": "https://api.github.com/users/alemangui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alemangui/subscriptions", "organizations_url": "https://api.github.com/users/alemangui/orgs", "repos_url": "https://api.github.com/users/alemangui/repos", "events_url": "https://api.github.com/users/alemangui/events{/privacy}", "received_events_url": "https://api.github.com/users/alemangui/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-04T15:16:52Z", "updated_at": "2020-02-04T09:40:52Z", "closed_at": "2018-12-10T21:54:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to set a timeout for the APNS response? I couldn't find anything in the doc to confirm this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/62", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/62/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/62/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/62", "id": 312559150, "node_id": "MDU6SXNzdWUzMTI1NTkxNTA=", "number": 62, "title": "Request for new Release on pypi.org", "user": {"login": "ajans", "id": 3482744, "node_id": "MDQ6VXNlcjM0ODI3NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/3482744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajans", "html_url": "https://github.com/ajans", "followers_url": "https://api.github.com/users/ajans/followers", "following_url": "https://api.github.com/users/ajans/following{/other_user}", "gists_url": "https://api.github.com/users/ajans/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajans/subscriptions", "organizations_url": "https://api.github.com/users/ajans/orgs", "repos_url": "https://api.github.com/users/ajans/repos", "events_url": "https://api.github.com/users/ajans/events{/privacy}", "received_events_url": "https://api.github.com/users/ajans/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-04-09T14:41:06Z", "updated_at": "2018-05-08T07:17:12Z", "closed_at": "2018-05-07T16:57:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Could you please publish a new release to pypi.org?\r\nThere were some major improvements since last release 0.3.0 in May 2017.\r\nEspecially proxy-support and improvements to connection-handling are very needed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/61", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/61/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/61/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/61", "id": 303243709, "node_id": "MDU6SXNzdWUzMDMyNDM3MDk=", "number": 61, "title": "Unregistered Exception does not provide timestamp field", "user": {"login": "72squared", "id": 12319, "node_id": "MDQ6VXNlcjEyMzE5", "avatar_url": "https://avatars1.githubusercontent.com/u/12319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/72squared", "html_url": "https://github.com/72squared", "followers_url": "https://api.github.com/users/72squared/followers", "following_url": "https://api.github.com/users/72squared/following{/other_user}", "gists_url": "https://api.github.com/users/72squared/gists{/gist_id}", "starred_url": "https://api.github.com/users/72squared/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/72squared/subscriptions", "organizations_url": "https://api.github.com/users/72squared/orgs", "repos_url": "https://api.github.com/users/72squared/repos", "events_url": "https://api.github.com/users/72squared/events{/privacy}", "received_events_url": "https://api.github.com/users/72squared/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-07T20:14:32Z", "updated_at": "2018-05-09T17:07:52Z", "closed_at": "2018-05-07T16:30:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Referring to apple's spec here:\r\n\r\nhttps://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html#//apple_ref/doc/uid/TP40008194-CH11-SW16\r\n\r\n\r\n> If the value in the :status header is 410, the value of this key is the last time at which APNs confirmed that the device token was no longer valid for the topic.\r\n> \r\n> Stop pushing notifications until the device registers a token with a later timestamp with your provider.\r\n> \r\n\r\nIf you add the timestamp value to the exception then it would be possible to check the timestamp of when the push token was last provided by the client and whether or not it should in fact be removed.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/59", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/59/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/59/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/59", "id": 281391668, "node_id": "MDU6SXNzdWUyODEzOTE2Njg=", "number": 59, "title": "Connection with alternative port fails", "user": {"login": "PaulosV", "id": 4086023, "node_id": "MDQ6VXNlcjQwODYwMjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/4086023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PaulosV", "html_url": "https://github.com/PaulosV", "followers_url": "https://api.github.com/users/PaulosV/followers", "following_url": "https://api.github.com/users/PaulosV/following{/other_user}", "gists_url": "https://api.github.com/users/PaulosV/gists{/gist_id}", "starred_url": "https://api.github.com/users/PaulosV/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PaulosV/subscriptions", "organizations_url": "https://api.github.com/users/PaulosV/orgs", "repos_url": "https://api.github.com/users/PaulosV/repos", "events_url": "https://api.github.com/users/PaulosV/events{/privacy}", "received_events_url": "https://api.github.com/users/PaulosV/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-12T13:52:36Z", "updated_at": "2017-12-18T10:39:55Z", "closed_at": "2017-12-18T10:39:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When trying to connect to both development and production APNS HTTP/2 servers on the alternative port (2197), the connection is reset upon creation. When using the regular 443 port, the connection is established.\r\n\r\n**Expected behavior:** The connection should be successfully established using both ports, 443 and 2197.\r\n\r\n**Cause:** If a port different than 443 is used, then the `hyper` library does not create secure connection by default. Apple servers expect TLS connection. This behavior of `hyper` can be overriden by `secure=True` in the `HTTP20Connection` constructor.\r\n\r\n**Proposed solution:** I propose #58 which adds a `secure=True` to the `HTTP20Connection` initialization.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/57", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/57/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/57/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/57", "id": 279248320, "node_id": "MDU6SXNzdWUyNzkyNDgzMjA=", "number": 57, "title": "Tried to read after connection closed", "user": {"login": "geuben", "id": 6205575, "node_id": "MDQ6VXNlcjYyMDU1NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6205575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geuben", "html_url": "https://github.com/geuben", "followers_url": "https://api.github.com/users/geuben/followers", "following_url": "https://api.github.com/users/geuben/following{/other_user}", "gists_url": "https://api.github.com/users/geuben/gists{/gist_id}", "starred_url": "https://api.github.com/users/geuben/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geuben/subscriptions", "organizations_url": "https://api.github.com/users/geuben/orgs", "repos_url": "https://api.github.com/users/geuben/repos", "events_url": "https://api.github.com/users/geuben/events{/privacy}", "received_events_url": "https://api.github.com/users/geuben/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-05T05:10:10Z", "updated_at": "2018-11-30T17:52:52Z", "closed_at": "2018-11-30T17:52:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hyper has thrown this error a few times, I'm sending the same notification to ~450 users (I've batched them up)\r\n<img width=\"1486\" alt=\"screen shot 2017-12-05 at 18 09 02\" src=\"https://user-images.githubusercontent.com/6205575/33590963-668effb0-d9e7-11e7-9f3b-81d5cad53776.png\">\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/56", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/56/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/56/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/56", "id": 279248118, "node_id": "MDU6SXNzdWUyNzkyNDgxMTg=", "number": 56, "title": "SSL3_WRITE_PENDING 'bad write retry'", "user": {"login": "geuben", "id": 6205575, "node_id": "MDQ6VXNlcjYyMDU1NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6205575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geuben", "html_url": "https://github.com/geuben", "followers_url": "https://api.github.com/users/geuben/followers", "following_url": "https://api.github.com/users/geuben/following{/other_user}", "gists_url": "https://api.github.com/users/geuben/gists{/gist_id}", "starred_url": "https://api.github.com/users/geuben/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geuben/subscriptions", "organizations_url": "https://api.github.com/users/geuben/orgs", "repos_url": "https://api.github.com/users/geuben/repos", "events_url": "https://api.github.com/users/geuben/events{/privacy}", "received_events_url": "https://api.github.com/users/geuben/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-05T05:08:32Z", "updated_at": "2018-11-30T17:52:52Z", "closed_at": "2018-11-30T17:52:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "<img width=\"1463\" alt=\"screen shot 2017-12-05 at 18 02 58\" src=\"https://user-images.githubusercontent.com/6205575/33590814-8be8f898-d9e6-11e7-9ea9-cc31d73632fa.png\">\r\n\r\nCan you offer any help on this? I thought it was potentially because I was sending unicode (see https://github.com/shazow/urllib3/issues/855) but I see you are doing some unicode conversion and I made sure that my collapse IDs and tokens aren't unicode. \r\n\r\nAny help will be gratefully received as this is causing issue when I try and send push notifications to a lot of users at the same time.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/55", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/55/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/55/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/55", "id": 279247008, "node_id": "MDU6SXNzdWUyNzkyNDcwMDg=", "number": 55, "title": "TooManyStreamsError", "user": {"login": "geuben", "id": 6205575, "node_id": "MDQ6VXNlcjYyMDU1NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6205575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geuben", "html_url": "https://github.com/geuben", "followers_url": "https://api.github.com/users/geuben/followers", "following_url": "https://api.github.com/users/geuben/following{/other_user}", "gists_url": "https://api.github.com/users/geuben/gists{/gist_id}", "starred_url": "https://api.github.com/users/geuben/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geuben/subscriptions", "organizations_url": "https://api.github.com/users/geuben/orgs", "repos_url": "https://api.github.com/users/geuben/repos", "events_url": "https://api.github.com/users/geuben/events{/privacy}", "received_events_url": "https://api.github.com/users/geuben/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-05T05:02:18Z", "updated_at": "2018-11-30T17:52:51Z", "closed_at": "2018-11-30T17:52:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that the code to keep the number of streams to < 1000 doesn't work correctly\r\n<img width=\"1463\" alt=\"screen shot 2017-12-05 at 18 01 24\" src=\"https://user-images.githubusercontent.com/6205575/33590781-62f3fc26-d9e6-11e7-81d2-8e588c696597.png\">\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/54", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/54/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/54/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/54", "id": 266921586, "node_id": "MDU6SXNzdWUyNjY5MjE1ODY=", "number": 54, "title": "After sending a few silent notifications it starts to fail with ('SSL routines', 'ssl3_write_pending', 'bad write retry')", "user": {"login": "jeffsawatzky", "id": 421404, "node_id": "MDQ6VXNlcjQyMTQwNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/421404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffsawatzky", "html_url": "https://github.com/jeffsawatzky", "followers_url": "https://api.github.com/users/jeffsawatzky/followers", "following_url": "https://api.github.com/users/jeffsawatzky/following{/other_user}", "gists_url": "https://api.github.com/users/jeffsawatzky/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffsawatzky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffsawatzky/subscriptions", "organizations_url": "https://api.github.com/users/jeffsawatzky/orgs", "repos_url": "https://api.github.com/users/jeffsawatzky/repos", "events_url": "https://api.github.com/users/jeffsawatzky/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffsawatzky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-19T17:16:23Z", "updated_at": "2017-11-09T19:39:50Z", "closed_at": "2017-11-09T19:39:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "File \"/opt/pushapp/lib/python2.7/site-packages/apns2/client.py\", line 53, in send_notification    stream_id = self.send_notification_async(token_hex, notification, topic, priority, expiration, collapse_id)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/apns2/client.py\", line 78, in send_notification_async    stream_id = self._connection.request('POST', url, json_payload, headers)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/http20/connection.py\", line 281, in request    self.endheaders(message_body=body, final=True, stream_id=stream_id)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/http20/connection.py\", line 555, in endheaders    stream.send_headers(headers_only)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/http20/stream.py\", line 99, in send_headers    self._send_outstanding_data()\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/http20/connection.py\", line 466, in _send_outstanding_data    self._send_cb(data, tolerate_peer_gone=tolerate_peer_gone)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/http20/connection.py\", line 622, in _send_cb    self._sock.sendall(data)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/ssl_compat.py\", line 168, in sendall    return self._safe_ssl_call(False, self._conn.sendall, data, flags)\r\n    File \"/opt/pushapp/lib/python2.7/site-packages/hyper/ssl_compat.py\", line 130, in _safe_ssl_call    raise socket.error(e.args[0])error: [('SSL routines', 'ssl3_write_pending', 'bad write retry')]", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/53", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/53/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/53/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/53", "id": 254862650, "node_id": "MDU6SXNzdWUyNTQ4NjI2NTA=", "number": 53, "title": "Stream forcefully closed when trying to execute the sample code", "user": {"login": "Kianoosh76", "id": 13102646, "node_id": "MDQ6VXNlcjEzMTAyNjQ2", "avatar_url": "https://avatars1.githubusercontent.com/u/13102646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kianoosh76", "html_url": "https://github.com/Kianoosh76", "followers_url": "https://api.github.com/users/Kianoosh76/followers", "following_url": "https://api.github.com/users/Kianoosh76/following{/other_user}", "gists_url": "https://api.github.com/users/Kianoosh76/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kianoosh76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kianoosh76/subscriptions", "organizations_url": "https://api.github.com/users/Kianoosh76/orgs", "repos_url": "https://api.github.com/users/Kianoosh76/repos", "events_url": "https://api.github.com/users/Kianoosh76/events{/privacy}", "received_events_url": "https://api.github.com/users/Kianoosh76/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-03T09:05:14Z", "updated_at": "2018-04-16T20:59:35Z", "closed_at": "2018-04-16T20:59:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I tried to run the [sample code ](https://github.com/Pr0Ger/PyAPNs2#sample-usage) that is put in the readme file of the project but I faced this error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"//anaconda/envs/lyan/lib/python3.5/code.py\", line 91, in runcode\r\n    exec(code, self.locals)\r\n  File \"<console>\", line 1, in <module>\r\n  File \"//anaconda/envs/lyan/lib/python3.5/site-packages/apns2/client.py\", line 53, in send_notification\r\n    stream_id = self.send_notification_async(token_hex, notification, topic, priority, expiration, collapse_id)\r\n  File \"//anaconda/envs/lyan/lib/python3.5/site-packages/apns2/client.py\", line 78, in send_notification_async\r\n    stream_id = self._connection.request('POST', url, json_payload, headers)\r\n  File \"//anaconda/envs/lyan/lib/python3.5/site-packages/hyper/http20/connection.py\", line 281, in request\r\n    self.endheaders(message_body=body, final=True, stream_id=stream_id)\r\n  File \"//anaconda/envs/lyan/lib/python3.5/site-packages/hyper/http20/connection.py\", line 546, in endheaders\r\n    stream = self._get_stream(stream_id)\r\n  File \"//anaconda/envs/lyan/lib/python3.5/site-packages/hyper/http20/connection.py\", line 289, in _get_stream\r\n    raise StreamResetError(\"Stream forcefully closed\")\r\nhyper.http20.exceptions.StreamResetError: Stream forcefully closed\r\n```\r\n\r\nAny idea for solving this problem?\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/52", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/52/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/52/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/52", "id": 253627873, "node_id": "MDU6SXNzdWUyNTM2Mjc4NzM=", "number": 52, "title": "why different app", "user": {"login": "kaldown", "id": 3754017, "node_id": "MDQ6VXNlcjM3NTQwMTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3754017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaldown", "html_url": "https://github.com/kaldown", "followers_url": "https://api.github.com/users/kaldown/followers", "following_url": "https://api.github.com/users/kaldown/following{/other_user}", "gists_url": "https://api.github.com/users/kaldown/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaldown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaldown/subscriptions", "organizations_url": "https://api.github.com/users/kaldown/orgs", "repos_url": "https://api.github.com/users/kaldown/repos", "events_url": "https://api.github.com/users/kaldown/events{/privacy}", "received_events_url": "https://api.github.com/users/kaldown/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-08-29T11:49:29Z", "updated_at": "2017-08-29T12:36:53Z", "closed_at": "2017-08-29T12:36:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Why https://libraries.io/pypi/apns2 install block told us to `pip install apns2==0.3.0`\r\nin parallel to clone from repo and use it.\r\n\r\nThis two repositories are different.\r\nFor example `apns2/client.py`\r\n\r\nSo my questions are.\r\nCould I use PyAPNs2 this repo) in prodaction?\r\nAnd why this happens?\r\n\r\nThanks.\r\nSorry for noob Q.\r\n\r\nok, that was naming collision.\r\nActual app have a name `apns2-client`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/51", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/51/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/51/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/51", "id": 252246954, "node_id": "MDU6SXNzdWUyNTIyNDY5NTQ=", "number": 51, "title": "Certificate usage", "user": {"login": "velis74", "id": 5511919, "node_id": "MDQ6VXNlcjU1MTE5MTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5511919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/velis74", "html_url": "https://github.com/velis74", "followers_url": "https://api.github.com/users/velis74/followers", "following_url": "https://api.github.com/users/velis74/following{/other_user}", "gists_url": "https://api.github.com/users/velis74/gists{/gist_id}", "starred_url": "https://api.github.com/users/velis74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/velis74/subscriptions", "organizations_url": "https://api.github.com/users/velis74/orgs", "repos_url": "https://api.github.com/users/velis74/repos", "events_url": "https://api.github.com/users/velis74/events{/privacy}", "received_events_url": "https://api.github.com/users/velis74/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-23T11:19:59Z", "updated_at": "2017-08-23T14:13:09Z", "closed_at": "2017-08-23T14:12:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to establish this functionality, but failing miserably in certificate initialisation phase:\r\n\r\nI have generated a \"VoIP Services\" certificate.\r\nDownloaded it comes in .cer format. I convert it to .pem using OpenSSL:\r\n`openssl x509 -inform der -in ios.cer -out ios.pem`\r\n\r\nWhichever of these two certificates I try to use:\r\n```\r\n        client = APNsClient(os.path.join(settings.BASE_DIR, 'ScantronServer' ,'ios.cer'),\r\n                            use_sandbox=False, use_alternative_port=False)\r\n```\r\n\r\nI get a similar error:\r\nssl.SSLError: [SSL] PEM lib (_ssl.c:3288)  --> for .cer\r\nssl.SSLError: [SSL] PEM lib (_ssl.c:3309)  --> for .pem\r\n\r\nThe way I see it after much debugging is that the issue is in library trying to validate the entire certificate chain, which it does not have.\r\n\r\nAm I generating a wrong certificate type / converting it incorrectly?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/50", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/50/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/50/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/50", "id": 246510162, "node_id": "MDU6SXNzdWUyNDY1MTAxNjI=", "number": 50, "title": "'apns-expiration' header is not honoured", "user": {"login": "subhadipghoshal", "id": 8099518, "node_id": "MDQ6VXNlcjgwOTk1MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8099518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subhadipghoshal", "html_url": "https://github.com/subhadipghoshal", "followers_url": "https://api.github.com/users/subhadipghoshal/followers", "following_url": "https://api.github.com/users/subhadipghoshal/following{/other_user}", "gists_url": "https://api.github.com/users/subhadipghoshal/gists{/gist_id}", "starred_url": "https://api.github.com/users/subhadipghoshal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subhadipghoshal/subscriptions", "organizations_url": "https://api.github.com/users/subhadipghoshal/orgs", "repos_url": "https://api.github.com/users/subhadipghoshal/repos", "events_url": "https://api.github.com/users/subhadipghoshal/events{/privacy}", "received_events_url": "https://api.github.com/users/subhadipghoshal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-29T09:06:11Z", "updated_at": "2018-04-16T21:00:05Z", "closed_at": "2018-04-16T21:00:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have been using this client to send notifications through APNS to iPhones. \r\n\r\nHere is the client and the send_notification function\r\n\r\n`apns_client = APNsClient(settings.APNS_CERT_PATH, use_sandbox=True, use_alternative_port=False)`\r\n`results = apns_client.send_notification_batch(notifications, APPID_IOS, expiration=ttl, collapse_id=apns_collapse_id)`\r\n\r\nWe have a specific requirement where we require the notification to be expired 45 seconds post sending. However, the expiration time as such is not honoured. We ran a test scenario where we sent a notification to a device while it was offline, and we brought it up online after 55 seconds. The notification still reached, even though the expiration time was set at 45 seconds. \r\n\r\nAlong with that, we have also been experimenting with notifications with apns-expiration = 0. According to Apple's documentation\r\n\r\n> If the value is 0, APNs treats the notification as if it expires immediately and does not store the notification or attempt to redeliver it.\r\n\r\nHowever, when we sent out a notification to a device which we brought online 10 seconds after sending it out, the notification still reached, even though expiration was set to zero. \r\n\r\nIs there something we are missing? Or is it something on the side of APNS? Any help would be greatly appreciated.\r\n\r\nThanks in advance.\r\n\r\nPython Version - 3.5.1\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/49", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/49/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/49/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/49", "id": 244746154, "node_id": "MDU6SXNzdWUyNDQ3NDYxNTQ=", "number": 49, "title": "StreamResetError while running on VM", "user": {"login": "miteshnath", "id": 10214827, "node_id": "MDQ6VXNlcjEwMjE0ODI3", "avatar_url": "https://avatars3.githubusercontent.com/u/10214827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miteshnath", "html_url": "https://github.com/miteshnath", "followers_url": "https://api.github.com/users/miteshnath/followers", "following_url": "https://api.github.com/users/miteshnath/following{/other_user}", "gists_url": "https://api.github.com/users/miteshnath/gists{/gist_id}", "starred_url": "https://api.github.com/users/miteshnath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miteshnath/subscriptions", "organizations_url": "https://api.github.com/users/miteshnath/orgs", "repos_url": "https://api.github.com/users/miteshnath/repos", "events_url": "https://api.github.com/users/miteshnath/events{/privacy}", "received_events_url": "https://api.github.com/users/miteshnath/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-21T18:20:11Z", "updated_at": "2018-11-30T17:52:47Z", "closed_at": "2018-11-30T17:52:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, \r\nSo, we have a Django app which uses this library for push notifications. We have succesfully tested this on our local machine and its running fine. But on our production server after deployment, we  are getting StreamResetError .\r\n![error_apns](https://user-images.githubusercontent.com/10214827/28476832-1a2e9150-6e6f-11e7-977a-0323be950293.png) \r\nWhat's wrong?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/48", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/48/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/48/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/48", "id": 242190733, "node_id": "MDU6SXNzdWUyNDIxOTA3MzM=", "number": 48, "title": "check for credential string with is instance does not work correct in python 2", "user": {"login": "pfennema", "id": 1378714, "node_id": "MDQ6VXNlcjEzNzg3MTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1378714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pfennema", "html_url": "https://github.com/pfennema", "followers_url": "https://api.github.com/users/pfennema/followers", "following_url": "https://api.github.com/users/pfennema/following{/other_user}", "gists_url": "https://api.github.com/users/pfennema/gists{/gist_id}", "starred_url": "https://api.github.com/users/pfennema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pfennema/subscriptions", "organizations_url": "https://api.github.com/users/pfennema/orgs", "repos_url": "https://api.github.com/users/pfennema/repos", "events_url": "https://api.github.com/users/pfennema/events{/privacy}", "received_events_url": "https://api.github.com/users/pfennema/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-11T21:34:36Z", "updated_at": "2019-03-25T05:38:48Z", "closed_at": "2019-03-25T05:38:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "In python 2, the check whether the credential passed is a string or not is not correct as the string passed is a unicode string and hence the check will not pass. The end result leads to an attribute error in __init_connection. Offending code:\r\n\r\n    def __init__(self, credentials, use_sandbox=False, use_alternative_port=False, proto=None, json_encoder=None, password=None):\r\n        if credentials is None or isinstance(credentials, str):  # Should be either unicode or basestring for python 2\r\n            self.__credentials = CertificateCredentials(credentials, password)\r\n        else:\r\n            self.__credentials = credentials\r\n \r\n\r\nI changed it for now to test for unicode instance, however I get an IOError exception further down the road. Will investigate further.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/45", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/45/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/45/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/45", "id": 236844389, "node_id": "MDU6SXNzdWUyMzY4NDQzODk=", "number": 45, "title": "custom key", "user": {"login": "LarkinBTCC", "id": 29111324, "node_id": "MDQ6VXNlcjI5MTExMzI0", "avatar_url": "https://avatars3.githubusercontent.com/u/29111324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LarkinBTCC", "html_url": "https://github.com/LarkinBTCC", "followers_url": "https://api.github.com/users/LarkinBTCC/followers", "following_url": "https://api.github.com/users/LarkinBTCC/following{/other_user}", "gists_url": "https://api.github.com/users/LarkinBTCC/gists{/gist_id}", "starred_url": "https://api.github.com/users/LarkinBTCC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LarkinBTCC/subscriptions", "organizations_url": "https://api.github.com/users/LarkinBTCC/orgs", "repos_url": "https://api.github.com/users/LarkinBTCC/repos", "events_url": "https://api.github.com/users/LarkinBTCC/events{/privacy}", "received_events_url": "https://api.github.com/users/LarkinBTCC/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-06-19T10:20:30Z", "updated_at": "2017-10-02T11:12:56Z", "closed_at": "2017-10-02T09:58:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "how can i add custom keys to payload?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/44", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/44/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/44/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/44", "id": 231738828, "node_id": "MDU6SXNzdWUyMzE3Mzg4Mjg=", "number": 44, "title": "[Feature request] Connection pool", "user": {"login": "tamakisquare", "id": 538353, "node_id": "MDQ6VXNlcjUzODM1Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/538353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamakisquare", "html_url": "https://github.com/tamakisquare", "followers_url": "https://api.github.com/users/tamakisquare/followers", "following_url": "https://api.github.com/users/tamakisquare/following{/other_user}", "gists_url": "https://api.github.com/users/tamakisquare/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamakisquare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamakisquare/subscriptions", "organizations_url": "https://api.github.com/users/tamakisquare/orgs", "repos_url": "https://api.github.com/users/tamakisquare/repos", "events_url": "https://api.github.com/users/tamakisquare/events{/privacy}", "received_events_url": "https://api.github.com/users/tamakisquare/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-26T21:28:18Z", "updated_at": "2018-12-07T18:18:11Z", "closed_at": "2017-05-27T08:00:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Excerpt from the [official docs](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html) on _Best Practices for Managing Connections_,\r\n\r\n> **Keep your connections with APNs open across multiple notifications; do not repeatedly open and close connections. APNs treats rapid connection and disconnection as a denial-of-service attack**. You should leave a connection open unless you know it will be idle for an extended period of time\u2014for example, if you only send notifications to your users once a day, it is acceptable practice to use a new connection each day.\r\n\r\nI think it's the best for _apns2-client_ library to conform to this best practice, in order to avoid the possibility of having the services built with the library being seeing as a denial-of-service attack and thus interruption to those services. Therefore, I think we should add a connection pool for managing the reuse of open connections to this library.\r\n\r\nThanks for developing this library. It has been working great for me and its code is easy to read and follow.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/42", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/42/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/42/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/42", "id": 227045950, "node_id": "MDU6SXNzdWUyMjcwNDU5NTA=", "number": 42, "title": "Release with JWT support", "user": {"login": "olgeni", "id": 412031, "node_id": "MDQ6VXNlcjQxMjAzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/412031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olgeni", "html_url": "https://github.com/olgeni", "followers_url": "https://api.github.com/users/olgeni/followers", "following_url": "https://api.github.com/users/olgeni/following{/other_user}", "gists_url": "https://api.github.com/users/olgeni/gists{/gist_id}", "starred_url": "https://api.github.com/users/olgeni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olgeni/subscriptions", "organizations_url": "https://api.github.com/users/olgeni/orgs", "repos_url": "https://api.github.com/users/olgeni/repos", "events_url": "https://api.github.com/users/olgeni/events{/privacy}", "received_events_url": "https://api.github.com/users/olgeni/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-08T13:28:42Z", "updated_at": "2017-05-10T08:36:00Z", "closed_at": "2017-05-09T20:38:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nWould it be possible to have a tagged release with JWT support? :)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/39", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/39/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/39/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/39", "id": 223667192, "node_id": "MDU6SXNzdWUyMjM2NjcxOTI=", "number": 39, "title": "Support for JWT authentication tokens", "user": {"login": "shigmas", "id": 4945066, "node_id": "MDQ6VXNlcjQ5NDUwNjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/4945066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shigmas", "html_url": "https://github.com/shigmas", "followers_url": "https://api.github.com/users/shigmas/followers", "following_url": "https://api.github.com/users/shigmas/following{/other_user}", "gists_url": "https://api.github.com/users/shigmas/gists{/gist_id}", "starred_url": "https://api.github.com/users/shigmas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shigmas/subscriptions", "organizations_url": "https://api.github.com/users/shigmas/orgs", "repos_url": "https://api.github.com/users/shigmas/repos", "events_url": "https://api.github.com/users/shigmas/events{/privacy}", "received_events_url": "https://api.github.com/users/shigmas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-04-23T21:03:25Z", "updated_at": "2017-05-03T21:37:50Z", "closed_at": "2017-05-03T20:43:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This would make supporting multiple applications easier.\r\n\r\nIf it's alright, I'd like to add this. I don't know if it's overarchitecting, but I was thinking of replacing the cert_file parameter in APNsClient's __init__ with a new Credentials class instance. There would be two subclasses: the CertificateCredentials and TokenCredentials. (Since tokens are meant to be reused (currently, for up to an hour), clients could come and go, as long as someone is holding on to the credentials instance.) Both classes would implement get_connection and get_authentication_header methods.\r\n\r\nWe could keep the old API too, and create the credential class if that parameter is a string:\r\n\r\n    def __init__(self, credentials, use_sandbox=False,...\r\n    ...\r\n        if isinstance(credentials, str):\r\n          self.__credentials = CertificateCredentials(credentials)\r\n       else:\r\n          self.__credentials = credentials\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/36", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/36/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/36/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/36", "id": 214933353, "node_id": "MDU6SXNzdWUyMTQ5MzMzNTM=", "number": 36, "title": "Missing cert password in APNsClient", "user": {"login": "alphiii", "id": 13146946, "node_id": "MDQ6VXNlcjEzMTQ2OTQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/13146946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alphiii", "html_url": "https://github.com/alphiii", "followers_url": "https://api.github.com/users/alphiii/followers", "following_url": "https://api.github.com/users/alphiii/following{/other_user}", "gists_url": "https://api.github.com/users/alphiii/gists{/gist_id}", "starred_url": "https://api.github.com/users/alphiii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alphiii/subscriptions", "organizations_url": "https://api.github.com/users/alphiii/orgs", "repos_url": "https://api.github.com/users/alphiii/repos", "events_url": "https://api.github.com/users/alphiii/events{/privacy}", "received_events_url": "https://api.github.com/users/alphiii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-17T08:08:05Z", "updated_at": "2017-03-17T08:16:39Z", "closed_at": "2017-03-17T08:16:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "As I can see in your APNsClient constructor you dont have option to add cerf. password while in load_cer_chain method you have an option to add one. I will add pw option in constructor.  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/34", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/34/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/34/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/34", "id": 214054878, "node_id": "MDU6SXNzdWUyMTQwNTQ4Nzg=", "number": 34, "title": "without phrase parameter supporting?", "user": {"login": "erhuabushuo", "id": 1642364, "node_id": "MDQ6VXNlcjE2NDIzNjQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1642364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erhuabushuo", "html_url": "https://github.com/erhuabushuo", "followers_url": "https://api.github.com/users/erhuabushuo/followers", "following_url": "https://api.github.com/users/erhuabushuo/following{/other_user}", "gists_url": "https://api.github.com/users/erhuabushuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/erhuabushuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erhuabushuo/subscriptions", "organizations_url": "https://api.github.com/users/erhuabushuo/orgs", "repos_url": "https://api.github.com/users/erhuabushuo/repos", "events_url": "https://api.github.com/users/erhuabushuo/events{/privacy}", "received_events_url": "https://api.github.com/users/erhuabushuo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-14T12:21:18Z", "updated_at": "2017-05-09T20:31:32Z", "closed_at": "2017-05-09T20:31:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "without phrase parameter supporting?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/30", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/30/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/30/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/30", "id": 208035607, "node_id": "MDU6SXNzdWUyMDgwMzU2MDc=", "number": 30, "title": "ConnectionResetError raised from `hyper`", "user": {"login": "ryanwang520", "id": 3983408, "node_id": "MDQ6VXNlcjM5ODM0MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3983408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanwang520", "html_url": "https://github.com/ryanwang520", "followers_url": "https://api.github.com/users/ryanwang520/followers", "following_url": "https://api.github.com/users/ryanwang520/following{/other_user}", "gists_url": "https://api.github.com/users/ryanwang520/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanwang520/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanwang520/subscriptions", "organizations_url": "https://api.github.com/users/ryanwang520/orgs", "repos_url": "https://api.github.com/users/ryanwang520/repos", "events_url": "https://api.github.com/users/ryanwang520/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanwang520/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-16T06:56:25Z", "updated_at": "2020-01-19T03:16:33Z", "closed_at": "2018-05-15T06:06:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! \r\nIt seems that apple will disconnect the socket if the apns client does not send any message to the apns server for a while(maybe several hours)\uff0cand a `ConnectionResetError` would be raised from the underlying `hyper` package when you send message using the remotely closed socket.\r\nTo handle this, I just hack it like the code below, which I don't think is an elegant way.\r\n```python\r\napns = APNsClient()\r\ntry:\r\n    apns.send_notification(device_token, payload, topic=APNS_TOPIC)\r\nexcept hyper.common.exceptions.ConnectionResetError:\r\n    global apns\r\n    ## just init a new apns client instance\r\n    apns = APNsClient()\r\n    apns.send_notification(device_token, payload, topic=APNS_TOPIC)\r\n```\r\nThere may exist a good way to solve the *connection reset* problem just in the `pyapns2` package,  \r\nany ideas?\r\n\r\nThanks.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/29", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/29/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/29/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/29", "id": 205228586, "node_id": "MDU6SXNzdWUyMDUyMjg1ODY=", "number": 29, "title": "Stream forcefully closed error", "user": {"login": "bbernhard", "id": 5710631, "node_id": "MDQ6VXNlcjU3MTA2MzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5710631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bbernhard", "html_url": "https://github.com/bbernhard", "followers_url": "https://api.github.com/users/bbernhard/followers", "following_url": "https://api.github.com/users/bbernhard/following{/other_user}", "gists_url": "https://api.github.com/users/bbernhard/gists{/gist_id}", "starred_url": "https://api.github.com/users/bbernhard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bbernhard/subscriptions", "organizations_url": "https://api.github.com/users/bbernhard/orgs", "repos_url": "https://api.github.com/users/bbernhard/repos", "events_url": "https://api.github.com/users/bbernhard/events{/privacy}", "received_events_url": "https://api.github.com/users/bbernhard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-03T18:07:29Z", "updated_at": "2017-05-09T20:31:16Z", "closed_at": "2017-05-09T20:31:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\n\r\nfirst of all many thanks for the great package!\r\nI just tried the code snippet that's shown in the `README`, but whenever I execute it, I get the following error:\r\n\r\n```\r\n    client.send_notification(token, payload)\r\n  File \"/usr/local/lib/python3.4/dist-packages/apns2/client.py\", line 38, in send_notification\r\n    stream_id = self.__connection.request('POST', url, json_payload, headers)\r\n  File \"/usr/local/lib/python3.4/dist-packages/hyper/http20/connection.py\", line 281, in request\r\n    self.endheaders(message_body=body, final=True, stream_id=stream_id)\r\n  File \"/usr/local/lib/python3.4/dist-packages/hyper/http20/connection.py\", line 546, in endheaders\r\n    stream = self._get_stream(stream_id)\r\n  File \"/usr/local/lib/python3.4/dist-packages/hyper/http20/connection.py\", line 289, in _get_stream\r\n    raise StreamResetError(\"Stream forcefully closed\")\r\nhyper.http20.exceptions.StreamResetError: Stream forcefully closed\r\n\r\n\r\n```\r\n\r\nDoes anyone have an idea what I am doing wrong here? \r\n\r\nMany thanks!\r\n\r\nHave a nice day,\r\nBernhard", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/24", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/24/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/24/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/24", "id": 198203954, "node_id": "MDU6SXNzdWUxOTgyMDM5NTQ=", "number": 24, "title": "SSLError(1, u'[SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:590)')}", "user": {"login": "shashfrankenstien", "id": 10861277, "node_id": "MDQ6VXNlcjEwODYxMjc3", "avatar_url": "https://avatars2.githubusercontent.com/u/10861277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashfrankenstien", "html_url": "https://github.com/shashfrankenstien", "followers_url": "https://api.github.com/users/shashfrankenstien/followers", "following_url": "https://api.github.com/users/shashfrankenstien/following{/other_user}", "gists_url": "https://api.github.com/users/shashfrankenstien/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashfrankenstien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashfrankenstien/subscriptions", "organizations_url": "https://api.github.com/users/shashfrankenstien/orgs", "repos_url": "https://api.github.com/users/shashfrankenstien/repos", "events_url": "https://api.github.com/users/shashfrankenstien/events{/privacy}", "received_events_url": "https://api.github.com/users/shashfrankenstien/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1137960000, "node_id": "MDU6TGFiZWwxMTM3OTYwMDAw", "url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/labels/stale", "name": "stale", "color": "d37847", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-12-30T23:04:53Z", "updated_at": "2020-01-20T13:57:31Z", "closed_at": "2019-11-16T00:05:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running a server on Ubuntu. It was working fine until recently. I suspect that it happened when I ran an apt upgrade. I'd appreciate any information about this error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/20", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/20/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/20/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/20", "id": 196611885, "node_id": "MDU6SXNzdWUxOTY2MTE4ODU=", "number": 20, "title": "Memory leak", "user": {"login": "xfox", "id": 53267, "node_id": "MDQ6VXNlcjUzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/53267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xfox", "html_url": "https://github.com/xfox", "followers_url": "https://api.github.com/users/xfox/followers", "following_url": "https://api.github.com/users/xfox/following{/other_user}", "gists_url": "https://api.github.com/users/xfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/xfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xfox/subscriptions", "organizations_url": "https://api.github.com/users/xfox/orgs", "repos_url": "https://api.github.com/users/xfox/repos", "events_url": "https://api.github.com/users/xfox/events{/privacy}", "received_events_url": "https://api.github.com/users/xfox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-12-20T08:21:15Z", "updated_at": "2017-02-09T07:52:29Z", "closed_at": "2017-02-09T07:52:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! Thanks for your library.\r\n\r\nI've found memory leak in client.py: APNsClient. send_notification. \r\nAfter getting HTTP20Response you should call HTTP20Response.close() or wraps it with context. If you don't close response Stream objects will leak. It leaks slowly but my service sends millions of pushes daily and it takes 8GB ram for 2 days.\r\nPlease, fix it.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/18", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/18/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/18/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/18", "id": 188151900, "node_id": "MDU6SXNzdWUxODgxNTE5MDA=", "number": 18, "title": "What will be the effort to make this work for Python 2?", "user": {"login": "adukic", "id": 1081831, "node_id": "MDQ6VXNlcjEwODE4MzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1081831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adukic", "html_url": "https://github.com/adukic", "followers_url": "https://api.github.com/users/adukic/followers", "following_url": "https://api.github.com/users/adukic/following{/other_user}", "gists_url": "https://api.github.com/users/adukic/gists{/gist_id}", "starred_url": "https://api.github.com/users/adukic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adukic/subscriptions", "organizations_url": "https://api.github.com/users/adukic/orgs", "repos_url": "https://api.github.com/users/adukic/repos", "events_url": "https://api.github.com/users/adukic/events{/privacy}", "received_events_url": "https://api.github.com/users/adukic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-11-09T02:02:05Z", "updated_at": "2017-05-09T20:30:45Z", "closed_at": "2017-05-09T20:30:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/17", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/17/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/17/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/17", "id": 188003563, "node_id": "MDU6SXNzdWUxODgwMDM1NjM=", "number": 17, "title": "Can't get voip notifications to work ", "user": {"login": "ennisthemenace", "id": 15780932, "node_id": "MDQ6VXNlcjE1NzgwOTMy", "avatar_url": "https://avatars1.githubusercontent.com/u/15780932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ennisthemenace", "html_url": "https://github.com/ennisthemenace", "followers_url": "https://api.github.com/users/ennisthemenace/followers", "following_url": "https://api.github.com/users/ennisthemenace/following{/other_user}", "gists_url": "https://api.github.com/users/ennisthemenace/gists{/gist_id}", "starred_url": "https://api.github.com/users/ennisthemenace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ennisthemenace/subscriptions", "organizations_url": "https://api.github.com/users/ennisthemenace/orgs", "repos_url": "https://api.github.com/users/ennisthemenace/repos", "events_url": "https://api.github.com/users/ennisthemenace/events{/privacy}", "received_events_url": "https://api.github.com/users/ennisthemenace/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-08T14:20:06Z", "updated_at": "2017-05-09T20:30:24Z", "closed_at": "2017-05-09T20:30:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to send voip notifications so I need to change the server and port to use gateway.sandbox.push.apple.com  but when I do so I just get loads of errors I can't figure out if http2 is problem. \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/12", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/12/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/12/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/12", "id": 169778873, "node_id": "MDU6SXNzdWUxNjk3Nzg4NzM=", "number": 12, "title": "ConnectionResetError()", "user": {"login": "shashfrankenstien", "id": 10861277, "node_id": "MDQ6VXNlcjEwODYxMjc3", "avatar_url": "https://avatars2.githubusercontent.com/u/10861277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashfrankenstien", "html_url": "https://github.com/shashfrankenstien", "followers_url": "https://api.github.com/users/shashfrankenstien/followers", "following_url": "https://api.github.com/users/shashfrankenstien/following{/other_user}", "gists_url": "https://api.github.com/users/shashfrankenstien/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashfrankenstien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashfrankenstien/subscriptions", "organizations_url": "https://api.github.com/users/shashfrankenstien/orgs", "repos_url": "https://api.github.com/users/shashfrankenstien/repos", "events_url": "https://api.github.com/users/shashfrankenstien/events{/privacy}", "received_events_url": "https://api.github.com/users/shashfrankenstien/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-07T04:11:18Z", "updated_at": "2016-08-07T20:25:44Z", "closed_at": "2016-08-07T20:25:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "What might be the possible reasons for this error? I'm attempting to catch the exception at the end of the 'send_notification' method.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/11", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/11/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/11/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/11", "id": 163040216, "node_id": "MDU6SXNzdWUxNjMwNDAyMTY=", "number": 11, "title": "AttributeError: 'NoneType' object has no attribute 'fill'", "user": {"login": "72squared", "id": 12319, "node_id": "MDQ6VXNlcjEyMzE5", "avatar_url": "https://avatars1.githubusercontent.com/u/12319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/72squared", "html_url": "https://github.com/72squared", "followers_url": "https://api.github.com/users/72squared/followers", "following_url": "https://api.github.com/users/72squared/following{/other_user}", "gists_url": "https://api.github.com/users/72squared/gists{/gist_id}", "starred_url": "https://api.github.com/users/72squared/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/72squared/subscriptions", "organizations_url": "https://api.github.com/users/72squared/orgs", "repos_url": "https://api.github.com/users/72squared/repos", "events_url": "https://api.github.com/users/72squared/events{/privacy}", "received_events_url": "https://api.github.com/users/72squared/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-06-29T22:20:06Z", "updated_at": "2016-06-30T19:05:18Z", "closed_at": "2016-06-30T18:55:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We send out about 2.4 million APNS requests every day. Anywhere from 30 to 40 run into an exception with this backtrace:\n\n```\nTraceback (most recent call last): -- File /srv/sites/marcopolo/notify/push_apns.py, line 154, \n    in push_apns conn.send_notification(token_hex=push_token, notification=notification, topic=topic, expiration=expiry)\n    File /opt/venv-marcopolo/src/apns2/apns2/client.py, line 38, in send_notification resp = self.__connection.get_response(stream_id)\n    File /opt/venv-marcopolo/local/lib/python2.7/site-packages/hyper/http20/connection.py, line 293, in get_response return HTTP20Response(stream.getheaders(), stream)\n    File /opt/venv-marcopolo/local/lib/python2.7/site-packages/hyper/http20/stream.py, line 223, in getheaders self._recv_cb(stream_id=self.stream_id)\n    File /opt/venv-marcopolo/local/lib/python2.7/site-packages/hyper/http20/connection.py, line 744, in _recv_cb self._single_read()\n    /opt/venv-marcopolo/local/lib/python2.7/site-packages/hyper/http20/connection.py, line 644, in _single_read self._sock.fill()\n    AttributeError: 'NoneType' object has no attribute 'fill'\n```\n\nNot sure what causes it. Maybe some sort of race condition? This happens in a background job system which does use threads, so maybe there is a race condition in the library where it removes the self._sock objects from the connection in one thread and tries to use it in another? I'm not totally convinced that's the problem though because it happens in short bursts across multiple webservers. Maybe some sort of network disruption event causes it?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/8", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/8/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/8/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/8", "id": 153074480, "node_id": "MDU6SXNzdWUxNTMwNzQ0ODA=", "number": 8, "title": "assert proto in H2_NPN_PROTOCOLS or proto == H2C_PROTOCOL AssertionError", "user": {"login": "acecilia", "id": 7938671, "node_id": "MDQ6VXNlcjc5Mzg2NzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7938671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acecilia", "html_url": "https://github.com/acecilia", "followers_url": "https://api.github.com/users/acecilia/followers", "following_url": "https://api.github.com/users/acecilia/following{/other_user}", "gists_url": "https://api.github.com/users/acecilia/gists{/gist_id}", "starred_url": "https://api.github.com/users/acecilia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acecilia/subscriptions", "organizations_url": "https://api.github.com/users/acecilia/orgs", "repos_url": "https://api.github.com/users/acecilia/repos", "events_url": "https://api.github.com/users/acecilia/events{/privacy}", "received_events_url": "https://api.github.com/users/acecilia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-05-04T17:48:23Z", "updated_at": "2018-11-07T23:24:52Z", "closed_at": "2016-05-05T11:11:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\nWhile using PyAPNs2 I am facing an error from hyper. I searched but could not find any related information. Did this happen to you?\n\n`>>> from apns2.client import APNsClient\n\n> > > from apns2.payload import Payload\n> > > token_hex = 'theTokenNumbers'\n> > > payload = Payload(alert=\"Hello World!\", sound=\"default\", badge=1)\n> > > client = APNsClient('key.pem', use_sandbox=False, use_alternative_port=False)\n> > > client.send_notification(token_hex, payload)\n> > > Traceback (most recent call last):\n> > >  File \"<stdin>\", line 1, in <module>\n> > >  File \"/home/alejo/.virtualenvs/worktoday/lib/python2.7/site-packages/apns2/client.py\", line 34, in send_notification\n> > >    stream_id = self.__connection.request('POST', url, json_payload, headers)\n> > >  File \"/home/alejo/.virtualenvs/worktoday/lib/python2.7/site-packages/hyper/http20/connection.py\", line 188, in request\n> > >    self.endheaders(message_body=body, final=True, stream_id=stream_id)\n> > >  File \"/home/alejo/.virtualenvs/worktoday/lib/python2.7/site-packages/hyper/http20/connection.py\", line 374, in endheaders\n> > >    self.connect()\n> > >  File \"/home/alejo/.virtualenvs/worktoday/lib/python2.7/site-packages/hyper/http20/connection.py\", line 260, in connect\n> > >    assert proto in H2_NPN_PROTOCOLS or proto == H2C_PROTOCOL\n> > > AssertionError`\n\nThanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/7", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/7/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/7/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/7", "id": 149570093, "node_id": "MDU6SXNzdWUxNDk1NzAwOTM=", "number": 7, "title": "Provide instructions for generating key.pem certificate file", "user": {"login": "greencoder", "id": 239861, "node_id": "MDQ6VXNlcjIzOTg2MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/239861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greencoder", "html_url": "https://github.com/greencoder", "followers_url": "https://api.github.com/users/greencoder/followers", "following_url": "https://api.github.com/users/greencoder/following{/other_user}", "gists_url": "https://api.github.com/users/greencoder/gists{/gist_id}", "starred_url": "https://api.github.com/users/greencoder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greencoder/subscriptions", "organizations_url": "https://api.github.com/users/greencoder/orgs", "repos_url": "https://api.github.com/users/greencoder/repos", "events_url": "https://api.github.com/users/greencoder/events{/privacy}", "received_events_url": "https://api.github.com/users/greencoder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-04-19T20:09:19Z", "updated_at": "2016-04-20T07:42:18Z", "closed_at": "2016-04-19T20:30:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been trying to generate the `key.pem` certificate needed to create the connection to Apple's servers, but I haven't been able to get it working. Could you please provide the steps you used to generate a working file?\n\nUsing these instructions:\nhttps://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html#//apple_ref/doc/uid/TP40012582-CH26-SW11\n\nI've been able to export either a `.p12` file or a `.cer` file when selecting both the `Apple Push Services` certificate and the private key under Keychain Assistant > My Certificates.\n\nThanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/1", "repository_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2", "labels_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/1/comments", "events_url": "https://api.github.com/repos/Pr0Ger/PyAPNs2/issues/1/events", "html_url": "https://github.com/Pr0Ger/PyAPNs2/issues/1", "id": 141443064, "node_id": "MDU6SXNzdWUxNDE0NDMwNjQ=", "number": 1, "title": "TypeError: super() takes at least 1 argument (0 given)", "user": {"login": "danshev", "id": 3915359, "node_id": "MDQ6VXNlcjM5MTUzNTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/3915359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danshev", "html_url": "https://github.com/danshev", "followers_url": "https://api.github.com/users/danshev/followers", "following_url": "https://api.github.com/users/danshev/following{/other_user}", "gists_url": "https://api.github.com/users/danshev/gists{/gist_id}", "starred_url": "https://api.github.com/users/danshev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danshev/subscriptions", "organizations_url": "https://api.github.com/users/danshev/orgs", "repos_url": "https://api.github.com/users/danshev/repos", "events_url": "https://api.github.com/users/danshev/events{/privacy}", "received_events_url": "https://api.github.com/users/danshev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-03-17T00:49:22Z", "updated_at": "2016-03-18T09:11:35Z", "closed_at": "2016-03-17T03:03:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thank you for your work on this, I'm getting the following error:\n\n```\nFile \"/usr/local/lib/python2.7/dist-packages/apns2-0.1.0-py2.7.egg/apns2/payload.py\", line 48, in __init__\n    super().__init__()\nTypeError: super() takes at least 1 argument (0 given)\n```\n", "performed_via_github_app": null, "score": 1.0}]}