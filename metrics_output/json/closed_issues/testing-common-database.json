{"total_count": 11, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/23", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/23/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/23/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/23", "id": 561271551, "node_id": "MDU6SXNzdWU1NjEyNzE1NTE=", "number": 23, "title": "Resource Warning upon construction of testing.Redis.RedisServer()", "user": {"login": "choitomas66", "id": 13847033, "node_id": "MDQ6VXNlcjEzODQ3MDMz", "avatar_url": "https://avatars1.githubusercontent.com/u/13847033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/choitomas66", "html_url": "https://github.com/choitomas66", "followers_url": "https://api.github.com/users/choitomas66/followers", "following_url": "https://api.github.com/users/choitomas66/following{/other_user}", "gists_url": "https://api.github.com/users/choitomas66/gists{/gist_id}", "starred_url": "https://api.github.com/users/choitomas66/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/choitomas66/subscriptions", "organizations_url": "https://api.github.com/users/choitomas66/orgs", "repos_url": "https://api.github.com/users/choitomas66/repos", "events_url": "https://api.github.com/users/choitomas66/events{/privacy}", "received_events_url": "https://api.github.com/users/choitomas66/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-06T21:10:43Z", "updated_at": "2020-02-06T22:15:03Z", "closed_at": "2020-02-06T22:15:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using testing.Redis to mock Redis in my python unittests, but I get a Resource Warning:\r\n\r\n`ResourceWarning: unclosed <socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 65192), raddr=('127.0.0.1', 65191)>\r\n`\r\n\r\nI'm using python 3. The error arises immediately after constructing a testing.Redis.RedisServer() object:\r\n\r\n`\r\nimport testing.redis\r\nfrom redis import Redis\r\n\r\nclass MyTestCase(unittest.TestCase):\r\n\r\n    def test_basic(self) -> None:\r\n        server = testing.redis.RedisServer()\r\n        self.assertIsNotNone(server)\r\n       \r\n        # connect to redis\r\n        r = Redis(**server.dsn())\r\n        self.assertIsNotNone(r)\r\n        \r\n        ...\r\n`\r\n\r\nI did some pdb work, and am suspecting this line:\r\nhttps://github.com/tk0miya/testing.redis/blob/53e97d1dea7c0843721fb0a2501fe5f3f150c78b/src/testing/redis.py#L78\r\n\r\nWhy is Redis QUIT being called in `in_server_available()`? If it's not necessary, can we remove it?\r\n\r\nEdit: Sorry just realized why it's called. Can we close the connection here? \r\n\r\nEdit 2: I'm 99% sure the warning arises because r.execute('QUIT') is being called here. It takes a shortcut in closing the connection, and doesn't let redis.Redis close the connection the proper way. I propose we change this to something like:\r\n\r\n```\r\ndef is_server_available(self):\r\n    try:\r\n        r = Redis(**self.dsn())\r\n        r.flushdb()  # Or we if we really want to do execute_command, r.execute_command('FLUSHDB')\r\n        return True\r\n    except:\r\n        return False\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/20", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/20/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/20/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/20", "id": 248923369, "node_id": "MDU6SXNzdWUyNDg5MjMzNjk=", "number": 20, "title": "2.0.1 broken", "user": {"login": "jluttine", "id": 2195834, "node_id": "MDQ6VXNlcjIxOTU4MzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/2195834?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jluttine", "html_url": "https://github.com/jluttine", "followers_url": "https://api.github.com/users/jluttine/followers", "following_url": "https://api.github.com/users/jluttine/following{/other_user}", "gists_url": "https://api.github.com/users/jluttine/gists{/gist_id}", "starred_url": "https://api.github.com/users/jluttine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jluttine/subscriptions", "organizations_url": "https://api.github.com/users/jluttine/orgs", "repos_url": "https://api.github.com/users/jluttine/repos", "events_url": "https://api.github.com/users/jluttine/events{/privacy}", "received_events_url": "https://api.github.com/users/jluttine/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-09T05:49:13Z", "updated_at": "2017-10-08T03:59:01Z", "closed_at": "2017-10-08T03:59:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have used 2.0.0 for some time and upgrading to 2.0.1 broke all my db-based unit tests. The tests fail almost immediately with the following kind of error for each test:\r\n\r\n```\r\n    def wait_booting(self):\r\n        boot_timeout = self.settings.get('boot_timeout', self.DEFAULT_BOOT_TIMEOUT)\r\n        exec_at = datetime.now()\r\n        while True:\r\n            if self.child_process.poll() is not None:\r\n                raise RuntimeError(\"*** failed to launch %s ***\\n\" % self.name +\r\n>                                  self.read_bootlog())\r\nE               RuntimeError: *** failed to launch Postgresql ***\r\nE               FATAL:  lock file \"postmaster.pid\" already exists\r\nE               HINT:  Is another postmaster (PID 1933) running in data directory \"/tmp/tmpv9dv74gc/data\"?\r\n```\r\n\r\nI wasn't able to dig deeper into it. Do you need some more information and how do I get it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/17", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/17/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/17/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/17", "id": 243645510, "node_id": "MDU6SXNzdWUyNDM2NDU1MTA=", "number": 17, "title": "Please keep a changelog", "user": {"login": "underyx", "id": 1060436, "node_id": "MDQ6VXNlcjEwNjA0MzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1060436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/underyx", "html_url": "https://github.com/underyx", "followers_url": "https://api.github.com/users/underyx/followers", "following_url": "https://api.github.com/users/underyx/following{/other_user}", "gists_url": "https://api.github.com/users/underyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/underyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/underyx/subscriptions", "organizations_url": "https://api.github.com/users/underyx/orgs", "repos_url": "https://api.github.com/users/underyx/repos", "events_url": "https://api.github.com/users/underyx/events{/privacy}", "received_events_url": "https://api.github.com/users/underyx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-18T08:56:25Z", "updated_at": "2017-10-08T03:59:15Z", "closed_at": "2017-10-08T03:59:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "http://keepachangelog.com/en/1.0.0/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/16", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/16/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/16/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/16", "id": 243175048, "node_id": "MDU6SXNzdWUyNDMxNzUwNDg=", "number": 16, "title": "lock file \"postmaster.pid\" already exists", "user": {"login": "adelosa", "id": 8604267, "node_id": "MDQ6VXNlcjg2MDQyNjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/8604267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adelosa", "html_url": "https://github.com/adelosa", "followers_url": "https://api.github.com/users/adelosa/followers", "following_url": "https://api.github.com/users/adelosa/following{/other_user}", "gists_url": "https://api.github.com/users/adelosa/gists{/gist_id}", "starred_url": "https://api.github.com/users/adelosa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adelosa/subscriptions", "organizations_url": "https://api.github.com/users/adelosa/orgs", "repos_url": "https://api.github.com/users/adelosa/repos", "events_url": "https://api.github.com/users/adelosa/events{/privacy}", "received_events_url": "https://api.github.com/users/adelosa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-07-15T13:22:19Z", "updated_at": "2017-10-08T03:58:47Z", "closed_at": "2017-10-08T03:58:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "testing.common.database 2.0.1 is causing the following error in my build. \r\nTox is run within centos6 docker base image using testing.postgresql library.\r\nReran same job forcing use of testing.common.database 2.0.0 version and this error was not encountered.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/atlassian/pipelines/agent/build/test.py\", line 1, in setUp\r\n    self.postgresql = Postgresql()\r\n  File \"/opt/atlassian/pipelines/agent/build/.tox/py27/lib/python2.7/site-packages/testing/common/database.py\", line 57, in __call__\r\n    return self.target_class(**self.settings)\r\n  File \"/opt/atlassian/pipelines/agent/build/.tox/py27/lib/python2.7/site-packages/testing/common/database.py\", line 98, in __init__\r\n    self.start()\r\n  File \"/opt/atlassian/pipelines/agent/build/.tox/py27/lib/python2.7/site-packages/testing/common/database.py\", line 154, in start\r\n    self.wait_booting()\r\n  File \"/opt/atlassian/pipelines/agent/build/.tox/py27/lib/python2.7/site-packages/testing/common/database.py\", line 171, in wait_booting\r\n    self.read_bootlog())\r\nRuntimeError: *** failed to launch Postgresql ***\r\nFATAL:  lock file \"postmaster.pid\" already exists\r\nHINT:  Is another postmaster (PID 182) running in data directory \"/tmp/tmpwRIVFL/data\"?\r\n\r\n```\r\nLet me know what additional information you need me to provide. I use your library all the time and would be happy to assist in the resolution..", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/15", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/15/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/15/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/15", "id": 242342154, "node_id": "MDU6SXNzdWUyNDIzNDIxNTQ=", "number": 15, "title": "please merge and release", "user": {"login": "agroszer", "id": 350912, "node_id": "MDQ6VXNlcjM1MDkxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/350912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agroszer", "html_url": "https://github.com/agroszer", "followers_url": "https://api.github.com/users/agroszer/followers", "following_url": "https://api.github.com/users/agroszer/following{/other_user}", "gists_url": "https://api.github.com/users/agroszer/gists{/gist_id}", "starred_url": "https://api.github.com/users/agroszer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agroszer/subscriptions", "organizations_url": "https://api.github.com/users/agroszer/orgs", "repos_url": "https://api.github.com/users/agroszer/repos", "events_url": "https://api.github.com/users/agroszer/events{/privacy}", "received_events_url": "https://api.github.com/users/agroszer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-12T11:04:19Z", "updated_at": "2017-07-15T07:11:33Z", "closed_at": "2017-07-15T07:11:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Could we get #11 and #14 merged and a new release on pypi please?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/12", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/12/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/12/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/12", "id": 240129580, "node_id": "MDU6SXNzdWUyNDAxMjk1ODA=", "number": 12, "title": "get_path_of() doesn't work on some OS", "user": {"login": "jchildren", "id": 10930410, "node_id": "MDQ6VXNlcjEwOTMwNDEw", "avatar_url": "https://avatars2.githubusercontent.com/u/10930410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jchildren", "html_url": "https://github.com/jchildren", "followers_url": "https://api.github.com/users/jchildren/followers", "following_url": "https://api.github.com/users/jchildren/following{/other_user}", "gists_url": "https://api.github.com/users/jchildren/gists{/gist_id}", "starred_url": "https://api.github.com/users/jchildren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jchildren/subscriptions", "organizations_url": "https://api.github.com/users/jchildren/orgs", "repos_url": "https://api.github.com/users/jchildren/repos", "events_url": "https://api.github.com/users/jchildren/events{/privacy}", "received_events_url": "https://api.github.com/users/jchildren/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-03T10:21:26Z", "updated_at": "2017-07-14T14:31:48Z", "closed_at": "2017-07-14T14:31:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Likely a known issue, but currently `get_path_of()` for unix-like operating systems requires the `which` binary to be in an absolute location rather than the users path. This is fine for most installations, but some non-standard distros like NixOS use the path variable instead. \r\n\r\nIs it possible to use [`shutil.which`](https://docs.python.org/dev/library/shutil.html#shutil.which) instead?\r\n\r\nedit: It seems this is not available in python 2.7 which may be the reason why.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/9", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/9/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/9/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/9", "id": 202209043, "node_id": "MDU6SXNzdWUyMDIyMDkwNDM=", "number": 9, "title": "module 'os' has no attribute 'child_process'", "user": {"login": "xiaoling", "id": 474885, "node_id": "MDQ6VXNlcjQ3NDg4NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/474885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaoling", "html_url": "https://github.com/xiaoling", "followers_url": "https://api.github.com/users/xiaoling/followers", "following_url": "https://api.github.com/users/xiaoling/following{/other_user}", "gists_url": "https://api.github.com/users/xiaoling/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaoling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaoling/subscriptions", "organizations_url": "https://api.github.com/users/xiaoling/orgs", "repos_url": "https://api.github.com/users/xiaoling/repos", "events_url": "https://api.github.com/users/xiaoling/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaoling/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-20T18:25:03Z", "updated_at": "2017-01-21T11:33:52Z", "closed_at": "2017-01-21T11:33:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/tk0miya/testing.common.database/blob/master/src/testing/common/database.py#L216\r\n\r\nShall this be `self.child_process`? Thanks in advance.\r\n\r\npython 3.5 \r\nubuntu 14.04", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/7", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/7/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/7/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/7", "id": 180052646, "node_id": "MDU6SXNzdWUxODAwNTI2NDY=", "number": 7, "title": "Please sign release tarballs", "user": {"login": "Natureshadow", "id": 212972, "node_id": "MDQ6VXNlcjIxMjk3Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/212972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Natureshadow", "html_url": "https://github.com/Natureshadow", "followers_url": "https://api.github.com/users/Natureshadow/followers", "following_url": "https://api.github.com/users/Natureshadow/following{/other_user}", "gists_url": "https://api.github.com/users/Natureshadow/gists{/gist_id}", "starred_url": "https://api.github.com/users/Natureshadow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Natureshadow/subscriptions", "organizations_url": "https://api.github.com/users/Natureshadow/orgs", "repos_url": "https://api.github.com/users/Natureshadow/repos", "events_url": "https://api.github.com/users/Natureshadow/events{/privacy}", "received_events_url": "https://api.github.com/users/Natureshadow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-09-29T13:42:35Z", "updated_at": "2017-07-15T07:11:03Z", "closed_at": "2017-07-15T07:11:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nI am packaging testing.\\* for Debian.\n\nIt would be great if you could pgp sign your source tarballs uploaded to PyPI as of the next release \u263a!\n\nCheers,\nNik\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/4", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/4/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/4/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/4", "id": 166748318, "node_id": "MDU6SXNzdWUxNjY3NDgzMTg=", "number": 4, "title": "BOOT_TIMEOUT as parameter", "user": {"login": "cngkaygusuz", "id": 1507670, "node_id": "MDQ6VXNlcjE1MDc2NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1507670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cngkaygusuz", "html_url": "https://github.com/cngkaygusuz", "followers_url": "https://api.github.com/users/cngkaygusuz/followers", "following_url": "https://api.github.com/users/cngkaygusuz/following{/other_user}", "gists_url": "https://api.github.com/users/cngkaygusuz/gists{/gist_id}", "starred_url": "https://api.github.com/users/cngkaygusuz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cngkaygusuz/subscriptions", "organizations_url": "https://api.github.com/users/cngkaygusuz/orgs", "repos_url": "https://api.github.com/users/cngkaygusuz/repos", "events_url": "https://api.github.com/users/cngkaygusuz/events{/privacy}", "received_events_url": "https://api.github.com/users/cngkaygusuz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-21T06:41:44Z", "updated_at": "2016-08-20T06:11:47Z", "closed_at": "2016-08-20T06:11:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "We stumbled upon a case that required us to modify the boot timeout. Currently we are doing it by modifying class field itself (e.g. `Database.BOOT_TIMEOUT = 15`). We believe this functionality should be accomplished by an init parameter.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/3", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/3/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/3/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/3", "id": 142629396, "node_id": "MDU6SXNzdWUxNDI2MjkzOTY=", "number": 3, "title": "python3.4 test failed on debian build in chroot", "user": {"login": "Faunris", "id": 908762, "node_id": "MDQ6VXNlcjkwODc2Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/908762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Faunris", "html_url": "https://github.com/Faunris", "followers_url": "https://api.github.com/users/Faunris/followers", "following_url": "https://api.github.com/users/Faunris/following{/other_user}", "gists_url": "https://api.github.com/users/Faunris/gists{/gist_id}", "starred_url": "https://api.github.com/users/Faunris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Faunris/subscriptions", "organizations_url": "https://api.github.com/users/Faunris/orgs", "repos_url": "https://api.github.com/users/Faunris/repos", "events_url": "https://api.github.com/users/Faunris/events{/privacy}", "received_events_url": "https://api.github.com/users/Faunris/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-03-22T12:02:33Z", "updated_at": "2016-03-23T03:05:47Z", "closed_at": "2016-03-22T15:52:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\nI use this code for build deb package testing.posgresql:\n\ndebain/control:\n\n```\n#!/usr/bin/make -f\nexport PYBUILD_NAME=testing.common.database\n%:\n    dh $@ --with python2,python3 --buildsystem=pybuild\n```\n\nthis is debian jessie\ninstall dh_python, python3-nose, etc\n\nnose test on python 2.7 finish ok\nbut nose test on python 3.4 failed:\n\n```\n/usr/lib/python3.4/unittest/case.py:605: ResourceWarning: unclosed file <_io.TextIOWrapper name='/tmp/tmprcvrgg1s/Postgresql.log' mode='wt' encoding='ANSI_X3.4-1968'>\n  outcome.errors.clear()\n\nTraceback (most recent call last):\n  File \"/tmp/buildd/testing.postgresql-1.3.0/tests/test_postgresql.py\", line 142, in test_stop_on_child_process\n    pgsql = testing.postgresql.Postgresql()\n  File \"/usr/lib/python3/dist-packages/testing/common/database.py\", line 89, in __init__\n    self.start()\n  File \"/usr/lib/python3/dist-packages/testing/common/database.py\", line 136, in start\n    os.dup2(logger.fileno(), sys.__stdout__.fileno())\nValueError: underlying buffer has been detached\n```\n\nmaybe rewrite this code to subproccess?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/2", "repository_url": "https://api.github.com/repos/tk0miya/testing.common.database", "labels_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/2/comments", "events_url": "https://api.github.com/repos/tk0miya/testing.common.database/issues/2/events", "html_url": "https://github.com/tk0miya/testing.common.database/issues/2", "id": 134192599, "node_id": "MDU6SXNzdWUxMzQxOTI1OTk=", "number": 2, "title": ".pth breaks pip and other tools", "user": {"login": "georgevreilly", "id": 34297, "node_id": "MDQ6VXNlcjM0Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/34297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgevreilly", "html_url": "https://github.com/georgevreilly", "followers_url": "https://api.github.com/users/georgevreilly/followers", "following_url": "https://api.github.com/users/georgevreilly/following{/other_user}", "gists_url": "https://api.github.com/users/georgevreilly/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgevreilly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgevreilly/subscriptions", "organizations_url": "https://api.github.com/users/georgevreilly/orgs", "repos_url": "https://api.github.com/users/georgevreilly/repos", "events_url": "https://api.github.com/users/georgevreilly/events{/privacy}", "received_events_url": "https://api.github.com/users/georgevreilly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-02-17T06:34:44Z", "updated_at": "2016-02-19T04:50:45Z", "closed_at": "2016-02-19T04:50:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I upgraded from `testing.postgresql` 1.1.2 to 1.3.0 and my app no longer installs on [ElasticBeanstalk](https://aws.amazon.com/elasticbeanstalk/). I've narrowed it down to `testing.common.database-1.1.0-py2.7-nspkg.pth`:\n\n```\n[ec2-user@ip-redacted venv]$ ./bin/pip --version\npip 7.1.2 from /opt/python/run/venv/local/lib/python2.7/site-packages (python 2.7)\n\n[ec2-user@ip-redacted venv]$ sudo ./bin/pip install testing.common.database\nCollecting testing.common.database\n  Using cached testing.common.database-1.1.0-py2.py3-none-any.whl\nInstalling collected packages: testing.common.database\nSuccessfully installed testing.common.database-1.1.0\nYou are using pip version 7.1.2, however version 8.0.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n\n[ec2-user@ip-redacted venv]$ ./bin/pip --version\nTraceback (most recent call last):\n  File \"/opt/python/run/venv/lib64/python2.7/site.py\", line 890, in <module>\n    main()\n  File \"/opt/python/run/venv/lib64/python2.7/site.py\", line 848, in main\n    virtualenv_search_paths(sys.prefix)\n  File \"/opt/python/run/venv/lib64/python2.7/site.py\", line 638, in virtualenv_search_paths\n    addsitedir(sitedir, known_paths)\n  File \"/opt/python/run/venv/lib64/python2.7/site.py\", line 204, in addsitedir\n    addpackage(sitedir, name, known_paths)\n  File \"/opt/python/run/venv/lib64/python2.7/site.py\", line 173, in addpackage\n    exec(line)\n  File \"<string>\", line 1, in <module>\nKeyError: 'testing'\n\n[ec2-user@ip-redacted venv]$ sudo mv lib/python2.7/site-packages/testing.common.database-1.1.0-py2.7-nspkg.pth lib/python2.7/site-packages/testing.common.database-1.1.0-py2.7-nspkg.pth.bak\n\n[ec2-user@ip-redacted venv]$ ./bin/pip --version\npip 7.1.2 from /opt/python/run/venv/local/lib/python2.7/site-packages (python 2.7)\n```\n", "performed_via_github_app": null, "score": 1.0}]}