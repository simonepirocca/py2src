{"total_count": 49, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/kjd/idna/issues/84", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/84/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/84/events", "html_url": "https://github.com/kjd/idna/issues/84", "id": 639690756, "node_id": "MDU6SXNzdWU2Mzk2OTA3NTY=", "number": 84, "title": "IndexError: string index out of range", "user": {"login": "CrimsonGlory", "id": 649929, "node_id": "MDQ6VXNlcjY0OTkyOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/649929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CrimsonGlory", "html_url": "https://github.com/CrimsonGlory", "followers_url": "https://api.github.com/users/CrimsonGlory/followers", "following_url": "https://api.github.com/users/CrimsonGlory/following{/other_user}", "gists_url": "https://api.github.com/users/CrimsonGlory/gists{/gist_id}", "starred_url": "https://api.github.com/users/CrimsonGlory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CrimsonGlory/subscriptions", "organizations_url": "https://api.github.com/users/CrimsonGlory/orgs", "repos_url": "https://api.github.com/users/CrimsonGlory/repos", "events_url": "https://api.github.com/users/CrimsonGlory/events{/privacy}", "received_events_url": "https://api.github.com/users/CrimsonGlory/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-16T13:57:35Z", "updated_at": "2020-06-27T23:21:24Z", "closed_at": "2020-06-27T23:21:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm sorry I can't provide the input (I don't have it on the logs). Still, here is a stracktrace:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/myapp/src/my_script.py\", line 15, in host_is_a_valid_domain\r\n    idna_test = idna.decode(host)\r\n  File \"/usr/local/lib/python2.7/site-packages/idna/core.py\", line 391, in decode\r\n    s = ulabel(label)\r\n  File \"/usr/local/lib/python2.7/site-packages/idna/core.py\", line 303, in ulabel\r\n    if label.decode('ascii')[-1] == '-':\r\nIndexError: string index out of range\r\n```\r\n\r\nI' have added more logging so I can have the host variable next time.\r\n\r\n```\r\n# pip list | grep idna\r\nidna                          2.9\r\n```\r\n\r\n(I have thrown literally tens of millions of inputs at idna.decode, and this is the first time I see an IndexError. so the priority of this is low)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/82", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/82/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/82/events", "html_url": "https://github.com/kjd/idna/issues/82", "id": 580687170, "node_id": "MDU6SXNzdWU1ODA2ODcxNzA=", "number": 82, "title": "IndexError with new trailing hyphen check", "user": {"login": "john-kurkowski", "id": 299487, "node_id": "MDQ6VXNlcjI5OTQ4Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/299487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/john-kurkowski", "html_url": "https://github.com/john-kurkowski", "followers_url": "https://api.github.com/users/john-kurkowski/followers", "following_url": "https://api.github.com/users/john-kurkowski/following{/other_user}", "gists_url": "https://api.github.com/users/john-kurkowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/john-kurkowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/john-kurkowski/subscriptions", "organizations_url": "https://api.github.com/users/john-kurkowski/orgs", "repos_url": "https://api.github.com/users/john-kurkowski/repos", "events_url": "https://api.github.com/users/john-kurkowski/events{/privacy}", "received_events_url": "https://api.github.com/users/john-kurkowski/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-13T15:46:57Z", "updated_at": "2020-03-14T01:11:54Z", "closed_at": "2020-03-14T01:11:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "#64 introduced the following uncaught exception. Is this intended?\r\n\r\n```python\r\n>>> idna.ulabel('xn--')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/John/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/idna/core.py\", line 303, in ulabel\r\n    if label.decode('ascii')[-1] == '-':\r\nIndexError: string index out of range\r\n```\r\n\r\nI would've expected `UnicodeError` or `IDNAError`, which are more descriptive.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/80", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/80/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/80/events", "html_url": "https://github.com/kjd/idna/issues/80", "id": 566457323, "node_id": "MDU6SXNzdWU1NjY0NTczMjM=", "number": 80, "title": "Clarify future Python version support", "user": {"login": "sethmlarson", "id": 18519037, "node_id": "MDQ6VXNlcjE4NTE5MDM3", "avatar_url": "https://avatars0.githubusercontent.com/u/18519037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sethmlarson", "html_url": "https://github.com/sethmlarson", "followers_url": "https://api.github.com/users/sethmlarson/followers", "following_url": "https://api.github.com/users/sethmlarson/following{/other_user}", "gists_url": "https://api.github.com/users/sethmlarson/gists{/gist_id}", "starred_url": "https://api.github.com/users/sethmlarson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sethmlarson/subscriptions", "organizations_url": "https://api.github.com/users/sethmlarson/orgs", "repos_url": "https://api.github.com/users/sethmlarson/repos", "events_url": "https://api.github.com/users/sethmlarson/events{/privacy}", "received_events_url": "https://api.github.com/users/sethmlarson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-17T18:20:49Z", "updated_at": "2020-02-25T21:42:15Z", "closed_at": "2020-02-25T21:42:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is mostly a question for @kjd. I saw the `py3-only` branch and was wondering when that branch is going to be released and I'm assuming as a \"v3.0\"? When the question is answered feel free to close this issue. Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/72", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/72/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/72/events", "html_url": "https://github.com/kjd/idna/issues/72", "id": 437662192, "node_id": "MDU6SXNzdWU0Mzc2NjIxOTI=", "number": 72, "title": "The licences identifier", "user": {"login": "it-praktyk", "id": 4910261, "node_id": "MDQ6VXNlcjQ5MTAyNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/4910261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/it-praktyk", "html_url": "https://github.com/it-praktyk", "followers_url": "https://api.github.com/users/it-praktyk/followers", "following_url": "https://api.github.com/users/it-praktyk/following{/other_user}", "gists_url": "https://api.github.com/users/it-praktyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/it-praktyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/it-praktyk/subscriptions", "organizations_url": "https://api.github.com/users/it-praktyk/orgs", "repos_url": "https://api.github.com/users/it-praktyk/repos", "events_url": "https://api.github.com/users/it-praktyk/events{/privacy}", "received_events_url": "https://api.github.com/users/it-praktyk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-26T13:01:10Z", "updated_at": "2020-02-17T05:35:38Z", "closed_at": "2020-02-17T05:35:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thank you for your work to create and maintain the idna module.\r\n\r\nCan you consider to add an additional identifier of the license type to the [LICENSE.rst file](https://github.com/kjd/idna/blob/master/LICENSE.rst)?\r\n\r\nI've checked that it's [The 3-Clause BSD License](https://opensource.org/licenses/BSD-3-Clause) but that required an additional effort.\r\n\r\nThank you.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/69", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/69/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/69/events", "html_url": "https://github.com/kjd/idna/issues/69", "id": 412958642, "node_id": "MDU6SXNzdWU0MTI5NTg2NDI=", "number": 69, "title": "Bug:fail to encode domain(test_a.abc.com)", "user": {"login": "ZhaoQi99", "id": 25344334, "node_id": "MDQ6VXNlcjI1MzQ0MzM0", "avatar_url": "https://avatars3.githubusercontent.com/u/25344334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhaoQi99", "html_url": "https://github.com/ZhaoQi99", "followers_url": "https://api.github.com/users/ZhaoQi99/followers", "following_url": "https://api.github.com/users/ZhaoQi99/following{/other_user}", "gists_url": "https://api.github.com/users/ZhaoQi99/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhaoQi99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhaoQi99/subscriptions", "organizations_url": "https://api.github.com/users/ZhaoQi99/orgs", "repos_url": "https://api.github.com/users/ZhaoQi99/repos", "events_url": "https://api.github.com/users/ZhaoQi99/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhaoQi99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-21T14:41:44Z", "updated_at": "2019-03-26T09:59:53Z", "closed_at": "2019-03-26T09:59:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for your code,I find a bug when i use it.\r\nWhen I try to  eocode a underlined domain name(Such as:`test_a.abc.com`),I get a ERROR.Although it is lack of standardization,it can be used by some people.And it can work normaly in some occasions.So I think that it shouldn't be a error.What about you?\r\n\r\n```python\r\n>>> import idna\r\n>>> idna.encode('abc.com')\r\nb'abc.com'\r\n>>> idna.encode('test_1.abc.com')\r\nTraceback (most recent call last):\r\n  File \"D:\\Program Files\\Python37\\lib\\site-packages\\idna\\core.py\", line 263, in alabel\r\n    ulabel(label)\r\n  File \"D:\\Program Files\\Python37\\lib\\site-packages\\idna\\core.py\", line 299, in ulabel\r\n    check_label(label)\r\n  File \"D:\\Program Files\\Python37\\lib\\site-packages\\idna\\core.py\", line 253, in check_label\r\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value)\r\n, pos+1, repr(label)))\r\nidna.core.InvalidCodepoint: Codepoint U+005F at position 5 of 'test_1' not allowed\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"D:\\Program Files\\Python37\\lib\\site-packages\\idna\\core.py\", line 355, in encode\r\n    result.append(alabel(label))\r\n  File \"D:\\Program Files\\Python37\\lib\\site-packages\\idna\\core.py\", line 265, in alabel\r\n    raise IDNAError('The label {0} is not a valid A-label'.format(label))\r\nidna.core.IDNAError: The label b'test_1' is not a valid A-label", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/68", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/68/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/68/events", "html_url": "https://github.com/kjd/idna/issues/68", "id": 409764186, "node_id": "MDU6SXNzdWU0MDk3NjQxODY=", "number": 68, "title": "IndexError instead of IDNAError", "user": {"login": "suola", "id": 11820933, "node_id": "MDQ6VXNlcjExODIwOTMz", "avatar_url": "https://avatars0.githubusercontent.com/u/11820933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suola", "html_url": "https://github.com/suola", "followers_url": "https://api.github.com/users/suola/followers", "following_url": "https://api.github.com/users/suola/following{/other_user}", "gists_url": "https://api.github.com/users/suola/gists{/gist_id}", "starred_url": "https://api.github.com/users/suola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suola/subscriptions", "organizations_url": "https://api.github.com/users/suola/orgs", "repos_url": "https://api.github.com/users/suola/repos", "events_url": "https://api.github.com/users/suola/events{/privacy}", "received_events_url": "https://api.github.com/users/suola/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-13T11:43:05Z", "updated_at": "2020-02-25T22:10:45Z", "closed_at": "2020-02-25T22:10:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get `IndexError` instead of `idna.core.IDNAError` - if I understood correctly this is not what should happen:\r\n\r\n```python\r\n>>> import idna\r\n>>> idna.decode('xn--eckwd4c7c.xn--zckzah')\r\n'\u30c9\u30e1\u30a4\u30f3.\u30c6\u30b9\u30c8'\r\n>>> idna.decode('xn--eckwd4c7c.xn--zckzah ')\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/encodings/punycode.py\", line 207, in decode\r\n    res = punycode_decode(input, errors)\r\n  File \"/usr/local/lib/python3.6/encodings/punycode.py\", line 194, in punycode_decode\r\n    return insertion_sort(base, extended, errors)\r\n  File \"/usr/local/lib/python3.6/encodings/punycode.py\", line 165, in insertion_sort\r\n    bias, errors)\r\n  File \"/usr/local/lib/python3.6/encodings/punycode.py\", line 146, in decode_generalized_number\r\n    % extended[extpos])\r\nIndexError: string index out of range\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/site-packages/idna/core.py\", line 389, in decode\r\n    s = ulabel(label)\r\n  File \"/usr/local/lib/python3.6/site-packages/idna/core.py\", line 307, in ulabel\r\n    label = label.decode('punycode')\r\nIndexError: decoding with 'punycode' codec failed (IndexError: string index out of range)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/66", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/66/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/66/events", "html_url": "https://github.com/kjd/idna/issues/66", "id": 333056314, "node_id": "MDU6SXNzdWUzMzMwNTYzMTQ=", "number": 66, "title": "Wheel for 2.7 installs files with the wrong permissions", "user": {"login": "riconnon", "id": 1963938, "node_id": "MDQ6VXNlcjE5NjM5Mzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1963938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/riconnon", "html_url": "https://github.com/riconnon", "followers_url": "https://api.github.com/users/riconnon/followers", "following_url": "https://api.github.com/users/riconnon/following{/other_user}", "gists_url": "https://api.github.com/users/riconnon/gists{/gist_id}", "starred_url": "https://api.github.com/users/riconnon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/riconnon/subscriptions", "organizations_url": "https://api.github.com/users/riconnon/orgs", "repos_url": "https://api.github.com/users/riconnon/repos", "events_url": "https://api.github.com/users/riconnon/events{/privacy}", "received_events_url": "https://api.github.com/users/riconnon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-06-17T11:41:09Z", "updated_at": "2018-12-04T17:25:24Z", "closed_at": "2018-12-04T17:25:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "When idna is installed on alpine linux from the wheel from pypi the source files have 0700 permission meaning no-one except root can execute them.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/65", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/65/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/65/events", "html_url": "https://github.com/kjd/idna/issues/65", "id": 332708390, "node_id": "MDU6SXNzdWUzMzI3MDgzOTA=", "number": 65, "title": "2.7 regression (A-label validation)", "user": {"login": "romuald", "id": 113200, "node_id": "MDQ6VXNlcjExMzIwMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/113200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romuald", "html_url": "https://github.com/romuald", "followers_url": "https://api.github.com/users/romuald/followers", "following_url": "https://api.github.com/users/romuald/following{/other_user}", "gists_url": "https://api.github.com/users/romuald/gists{/gist_id}", "starred_url": "https://api.github.com/users/romuald/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romuald/subscriptions", "organizations_url": "https://api.github.com/users/romuald/orgs", "repos_url": "https://api.github.com/users/romuald/repos", "events_url": "https://api.github.com/users/romuald/events{/privacy}", "received_events_url": "https://api.github.com/users/romuald/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-15T09:36:25Z", "updated_at": "2018-12-04T16:35:47Z", "closed_at": "2018-12-04T16:35:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\r\n\r\nWe've encountered a regression with the 2.7 release and the additonal validation of A-labels\r\n\r\nI'm not certain if should be fixed but I just wanted to let you know.\r\n\r\n```python\r\n\r\n# Context, handling of DNS records\r\n\r\nhost = u'*.fo\u00f6.fi'\r\n\r\nreturn {'host_ulabel' : host,\r\n        'host_alabel' : idna.encode(host, uts46=True)}\r\n```\r\n\r\nWhich now raises `idna.core.IDNAError: The label * is not a valid A-label`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/61", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/61/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/61/events", "html_url": "https://github.com/kjd/idna/issues/61", "id": 313051393, "node_id": "MDU6SXNzdWUzMTMwNTEzOTM=", "number": 61, "title": "Failing domain names", "user": {"login": "aggiebill", "id": 8082637, "node_id": "MDQ6VXNlcjgwODI2Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/8082637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aggiebill", "html_url": "https://github.com/aggiebill", "followers_url": "https://api.github.com/users/aggiebill/followers", "following_url": "https://api.github.com/users/aggiebill/following{/other_user}", "gists_url": "https://api.github.com/users/aggiebill/gists{/gist_id}", "starred_url": "https://api.github.com/users/aggiebill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aggiebill/subscriptions", "organizations_url": "https://api.github.com/users/aggiebill/orgs", "repos_url": "https://api.github.com/users/aggiebill/repos", "events_url": "https://api.github.com/users/aggiebill/events{/privacy}", "received_events_url": "https://api.github.com/users/aggiebill/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-04-10T19:05:33Z", "updated_at": "2020-02-25T22:08:08Z", "closed_at": "2020-02-25T22:08:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been looking at IDNA domain registrations and using your library in conjunction with the built in python tools.  \r\n\r\n```python\r\n>>> domain = \"xn--53hy7af013i.ws\".encode(\"utf-8\")                                                                                     \r\n>>> domain.decode(\"idna\")         \r\n'\u2615\ud83e\udd8a\u2708.ws'\r\n```\r\n\r\nThe IDNA package is a HUGE life saver for me.  I monitored approximately over 111,000 IDNA domains being registered, and a small percentage of them failed.  I've attached the output that I thought you might find useful.\r\n\r\nAs you can see above, there is an uptick of registrations of emoji domains now.  Although it is not part of the specification, it would be very helpful if that was incorporated into this package.  \r\n\r\n[failed_output.txt](https://github.com/kjd/idna/files/1895993/failed_output.txt)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/60", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/60/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/60/events", "html_url": "https://github.com/kjd/idna/issues/60", "id": 310357150, "node_id": "MDU6SXNzdWUzMTAzNTcxNTA=", "number": 60, "title": "Getting exception for certain URLs that work with curl and other tools", "user": {"login": "erezsh", "id": 731464, "node_id": "MDQ6VXNlcjczMTQ2NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/731464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erezsh", "html_url": "https://github.com/erezsh", "followers_url": "https://api.github.com/users/erezsh/followers", "following_url": "https://api.github.com/users/erezsh/following{/other_user}", "gists_url": "https://api.github.com/users/erezsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/erezsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erezsh/subscriptions", "organizations_url": "https://api.github.com/users/erezsh/orgs", "repos_url": "https://api.github.com/users/erezsh/repos", "events_url": "https://api.github.com/users/erezsh/events{/privacy}", "received_events_url": "https://api.github.com/users/erezsh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-04-01T21:55:56Z", "updated_at": "2018-04-10T22:06:18Z", "closed_at": "2018-04-10T22:06:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not really sure how to describe this in idna terms. I never used idna directly.\r\n\r\nHere's the issue I opened for requests: https://github.com/requests/requests/issues/4569\r\n\r\nThey told me to hand it over to you (they're too lazy to do it themselves).\r\n\r\nAnyway, hope this is helpful. Sorry if not.\r\n\r\nP.S. here's the exception, just for convenience:\r\n\r\n    idna.core.IDNAError: The label b'xn--mn8ha4uc' is not a valid A-label", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/59", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/59/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/59/events", "html_url": "https://github.com/kjd/idna/issues/59", "id": 305484680, "node_id": "MDU6SXNzdWUzMDU0ODQ2ODA=", "number": 59, "title": "symbol '_' not allowed", "user": {"login": "404notfoundhard", "id": 9219437, "node_id": "MDQ6VXNlcjkyMTk0Mzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9219437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/404notfoundhard", "html_url": "https://github.com/404notfoundhard", "followers_url": "https://api.github.com/users/404notfoundhard/followers", "following_url": "https://api.github.com/users/404notfoundhard/following{/other_user}", "gists_url": "https://api.github.com/users/404notfoundhard/gists{/gist_id}", "starred_url": "https://api.github.com/users/404notfoundhard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/404notfoundhard/subscriptions", "organizations_url": "https://api.github.com/users/404notfoundhard/orgs", "repos_url": "https://api.github.com/users/404notfoundhard/repos", "events_url": "https://api.github.com/users/404notfoundhard/events{/privacy}", "received_events_url": "https://api.github.com/users/404notfoundhard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-15T10:02:41Z", "updated_at": "2018-03-15T13:25:03Z", "closed_at": "2018-03-15T12:10:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n\u0434_\u0440\u0443\u0433\u043e\u0439\u0442\u0435\u0441\u0442.\u0440\u0444\r\nCodepoint U+005F at position 2 of '\u0434_\u0440\u0443\u0433\u043e\u0439\u0442\u0435\u0441\u0442' not allowed\r\n```\r\n\r\nFull traceback:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/user/somedirectory/code.py\", line 34, in <module>\r\n    punnycode_to_replace = idna.encode(\"\u0434_\u0440\u0443\u0433\u043e\u0439\u0442\u0435\u0441\u0442.\u0440\u0444\")\r\n  File \"/usr/local/lib/python3.5/dist-packages/idna/core.py\", line 355, in encode\r\n    result.append(alabel(label))\r\n  File \"/usr/local/lib/python3.5/dist-packages/idna/core.py\", line 276, in alabel\r\n    check_label(label)\r\n  File \"/usr/local/lib/python3.5/dist-packages/idna/core.py\", line 253, in check_label\r\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\nidna.core.InvalidCodepoint: Codepoint U+005F at position 2 of '\u0434_\u0440\u0443\u0433\u043e\u0439\u0442\u0435\u0441\u0442' not allowed\r\n[Finished in 0.4s with exit code 1]\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/55", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/55/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/55/events", "html_url": "https://github.com/kjd/idna/issues/55", "id": 260544901, "node_id": "MDU6SXNzdWUyNjA1NDQ5MDE=", "number": 55, "title": "New package py_0 breaks conda update ", "user": {"login": "dhuebner", "id": 454322, "node_id": "MDQ6VXNlcjQ1NDMyMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/454322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhuebner", "html_url": "https://github.com/dhuebner", "followers_url": "https://api.github.com/users/dhuebner/followers", "following_url": "https://api.github.com/users/dhuebner/following{/other_user}", "gists_url": "https://api.github.com/users/dhuebner/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhuebner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhuebner/subscriptions", "organizations_url": "https://api.github.com/users/dhuebner/orgs", "repos_url": "https://api.github.com/users/dhuebner/repos", "events_url": "https://api.github.com/users/dhuebner/events{/privacy}", "received_events_url": "https://api.github.com/users/dhuebner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-26T08:59:19Z", "updated_at": "2018-03-22T12:08:07Z", "closed_at": "2018-03-22T12:08:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "| noarch/idna-2.6-py_0.tar.bz2\r\n\r\nFrom https://anaconda.org/conda-forge/idna/files\r\n\r\nBreaks `conda update conda`\r\n\r\n```\r\nPackage plan for installation in environment /opt/conda:\r\n\r\nThe following packages will be downloaded:\r\n\r\n    package                    |            build\r\n    ---------------------------|-----------------\r\n    conda-env-2.6.0            |                0         1017 B  conda-forge\r\n    libffi-3.2.1               |                3          47 KB  conda-forge\r\n    asn1crypto-0.22.0          |           py35_0         149 KB  conda-forge\r\n    certifi-2017.7.27.1        |           py35_0         204 KB  conda-forge\r\n    chardet-3.0.4              |           py35_0         189 KB  conda-forge\r\n    idna-2.6                   |             py_0          47 KB  conda-forge\r\n    pycparser-2.18             |           py35_0         169 KB  conda-forge\r\n    pysocks-1.6.7              |           py35_0          21 KB  conda-forge\r\n    cffi-1.10.0                |           py35_0         388 KB  conda-forge\r\n    cryptography-2.0.3         |           py35_0         853 KB  conda-forge\r\n    pyopenssl-17.2.0           |           py35_0          77 KB  conda-forge\r\n    urllib3-1.22               |           py35_0         155 KB  conda-forge\r\n    requests-2.18.4            |           py35_1          91 KB  conda-forge\r\n    conda-4.3.24               |           py35_0         514 KB  conda-forge\r\n    ------------------------------------------------------------\r\n                                           Total:         2.8 MB\r\n\r\nThe following NEW packages will be INSTALLED:\r\n\r\n    asn1crypto:   0.22.0-py35_0      conda-forge\r\n    certifi:      2017.7.27.1-py35_0 conda-forge\r\n    cffi:         1.10.0-py35_0      conda-forge\r\n    chardet:      3.0.4-py35_0       conda-forge\r\n    cryptography: 2.0.3-py35_0       conda-forge\r\n    idna:         2.6-py_0           conda-forge\r\n    libffi:       3.2.1-3            conda-forge\r\n    pycparser:    2.18-py35_0        conda-forge\r\n    pyopenssl:    17.2.0-py35_0      conda-forge\r\n    pysocks:      1.6.7-py35_0       conda-forge\r\n    urllib3:      1.22-py35_0        conda-forge\r\n\r\nThe following packages will be UPDATED:\r\n\r\n    conda:        4.1.11-py35_0                  --> 4.3.24-py35_0 conda-forge\r\n    conda-env:    2.5.2-py35_0                   --> 2.6.0-0       conda-forge\r\n    requests:     2.10.0-py35_0                  --> 2.18.4-py35_1 conda-forge\r\n\r\n\u001b[91mTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/exceptions.py\", line 634, in conda_exception_handler\r\n    return_value = func(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/cli/main.py\", line 114, in _main\r\n    imported = importlib.import_module(module)\r\n  File \"/opt/conda/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 665, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/cli/main_update.py\", line 10, in <module>\r\n    from .install import install\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/cli/install.py\", line 20, in <module>\r\n    from ..core.index import get_index, get_channel_priority_map\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/core/index.py\", line 8, in <module>\r\n    from .package_cache import PackageCache\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/core/package_cache.py\", line 9, in <module>\r\n    from .path_actions import CacheUrlAction, ExtractPackageAction\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/core/path_actions.py\", line 33, in <module>\r\n    from ..gateways.download import download\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/gateways/download.py\", line 10, in <module>\r\n    from requests.exceptions import ConnectionError, HTTPError, InvalidSchema, SSLError\r\n  File \"/opt/conda/lib/python3.5/site-packages/requests/__init__.py\", line 98, in <module>\r\n    from . import packages\r\n  File \"/opt/conda/lib/python3.5/site-packages/requests/packages.py\", line 7, in <module>\r\n    locals()[package] = __import__(package)\r\nImportError: No module named 'idna'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/bin/conda\", line 6, in <module>\r\n    sys.exit(conda.cli.main())\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/cli/main.py\", line 182, in main\r\n    return conda_exception_handler(_main, *args)\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/exceptions.py\", line 638, in conda_exception_handler\r\n    return handle_exception(e)\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/exceptions.py\", line 628, in handle_exception\r\n    print_unexpected_error_message(e)\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/exceptions.py\", line 590, in print_unexpected_error_message\r\n    stderrlogger.info(get_main_info_str(get_info_dict()))\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/cli/main_info.py\", line 162, in get_info_dict\r\n    from ..connection import user_agent\r\n  File \"/opt/conda/lib/python3.5/site-packages/conda/connection.py\", line 12, in <module>\r\n    from requests import Session, __version__ as REQUESTS_VERSION\r\n  File \"/opt/conda/lib/python3.5/site-packages/requests/__init__.py\", line 98, in <module>\r\n    from . import packages\r\n  File \"/opt/conda/lib/python3.5/site-packages/requests/packages.py\", line 7, in <module>\r\n    locals()[package] = __import__(package)\r\nImportError: No module named 'idna'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/54", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/54/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/54/events", "html_url": "https://github.com/kjd/idna/issues/54", "id": 254824772, "node_id": "MDU6SXNzdWUyNTQ4MjQ3NzI=", "number": 54, "title": "`uts46_remap` usage of 'std3_rules` is inverted", "user": {"login": "Arachnid", "id": 17865, "node_id": "MDQ6VXNlcjE3ODY1", "avatar_url": "https://avatars2.githubusercontent.com/u/17865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arachnid", "html_url": "https://github.com/Arachnid", "followers_url": "https://api.github.com/users/Arachnid/followers", "following_url": "https://api.github.com/users/Arachnid/following{/other_user}", "gists_url": "https://api.github.com/users/Arachnid/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arachnid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arachnid/subscriptions", "organizations_url": "https://api.github.com/users/Arachnid/orgs", "repos_url": "https://api.github.com/users/Arachnid/repos", "events_url": "https://api.github.com/users/Arachnid/events{/privacy}", "received_events_url": "https://api.github.com/users/Arachnid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251073, "node_id": "MDU6TGFiZWw0MTI1MTA3Mw==", "url": "https://api.github.com/repos/kjd/idna/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-02T17:24:06Z", "updated_at": "2018-03-22T12:07:18Z", "closed_at": "2018-03-22T12:07:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "AIUI, when `std3_rules` is True, invalid characters for a domain should be rejected. Instead, `uts46_remap` allows them unless `std3_rules` is False.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/53", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/53/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/53/events", "html_url": "https://github.com/kjd/idna/issues/53", "id": 248755560, "node_id": "MDU6SXNzdWUyNDg3NTU1NjA=", "number": 53, "title": "Failing domain 'xn--hjdarna07-b07a.cf'", "user": {"login": "szatkus", "id": 640848, "node_id": "MDQ6VXNlcjY0MDg0OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/640848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szatkus", "html_url": "https://github.com/szatkus", "followers_url": "https://api.github.com/users/szatkus/followers", "following_url": "https://api.github.com/users/szatkus/following{/other_user}", "gists_url": "https://api.github.com/users/szatkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/szatkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szatkus/subscriptions", "organizations_url": "https://api.github.com/users/szatkus/orgs", "repos_url": "https://api.github.com/users/szatkus/repos", "events_url": "https://api.github.com/users/szatkus/events{/privacy}", "received_events_url": "https://api.github.com/users/szatkus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-08T15:31:23Z", "updated_at": "2017-08-08T18:13:21Z", "closed_at": "2017-08-08T18:13:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI found an instance of domain which cannot be decoded by IDNA library.\r\n\r\n<pre>In [3]:  idna.decode('xn--hjdarna07-b07a.cf')\r\n\r\nInvalidCodepoint                          Traceback (most recent call last)\r\n<ipython-input-3-07b3c0da3e70> in <module>()\r\n----> 1 idna.decode('xn--hjdarna07-b07a.cf')\r\n\r\n/usr/local/lib/python2.7/dist-packages/idna/core.pyc in decode(s, strict, uts46, std3_rules)\r\n    382         trailing_dot = True\r\n    383     for label in labels:\r\n--> 384         result.append(ulabel(label))\r\n    385     if trailing_dot:\r\n    386         result.append(u'')\r\n\r\n/usr/local/lib/python2.7/dist-packages/idna/core.pyc in ulabel(label)\r\n    301 \r\n    302     label = label.decode('punycode')\r\n--> 303     check_label(label)\r\n    304     return label\r\n    305 \r\n\r\n/usr/local/lib/python2.7/dist-packages/idna/core.pyc in check_label(label)\r\n    251                 raise InvalidCodepointContext('Codepoint {0} not allowed at position {1} in {2}'.format(_unot(cp_value), pos+1, repr(label)))\r\n    252         else:\r\n--> 253             raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\n    254 \r\n    255     check_bidi(label)\r\n\r\nInvalidCodepoint: Codepoint U+10A5 at position 7 of u'hjdarn\\u10a5a07' not allowed</pre>\r\n\r\nThe excepted output is \"hjdarn\u10a5a07.cf\". The domain exists (http://xn--hjdarna07-b07a.cf/) and is correct IDNA code (http://unicode.org/cldr/utility/idna.jsp?a=hjdarn%E1%82%A5a07.cf).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/51", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/51/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/51/events", "html_url": "https://github.com/kjd/idna/issues/51", "id": 246887549, "node_id": "MDU6SXNzdWUyNDY4ODc1NDk=", "number": 51, "title": "Initial Update", "user": {"login": "pyup-bot", "id": 16239342, "node_id": "MDQ6VXNlcjE2MjM5MzQy", "avatar_url": "https://avatars0.githubusercontent.com/u/16239342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyup-bot", "html_url": "https://github.com/pyup-bot", "followers_url": "https://api.github.com/users/pyup-bot/followers", "following_url": "https://api.github.com/users/pyup-bot/following{/other_user}", "gists_url": "https://api.github.com/users/pyup-bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyup-bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyup-bot/subscriptions", "organizations_url": "https://api.github.com/users/pyup-bot/orgs", "repos_url": "https://api.github.com/users/pyup-bot/repos", "events_url": "https://api.github.com/users/pyup-bot/events{/privacy}", "received_events_url": "https://api.github.com/users/pyup-bot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-31T21:18:23Z", "updated_at": "2017-07-31T21:26:08Z", "closed_at": "2017-07-31T21:26:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi \ud83d\udc4a\n\nThis is my first visit to this fine repo, but it seems you have been working hard to keep all dependencies updated so far.\n\nOnce you have closed this issue, I'll create separate pull requests for every update as soon as I find one.\n\nThat's it for now!\n\nHappy merging! \ud83e\udd16\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/49", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/49/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/49/events", "html_url": "https://github.com/kjd/idna/issues/49", "id": 231774251, "node_id": "MDU6SXNzdWUyMzE3NzQyNTE=", "number": 49, "title": "add idna.__version__", "user": {"login": "ken-reitz", "id": 119893, "node_id": "MDQ6VXNlcjExOTg5Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/119893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ken-reitz", "html_url": "https://github.com/ken-reitz", "followers_url": "https://api.github.com/users/ken-reitz/followers", "following_url": "https://api.github.com/users/ken-reitz/following{/other_user}", "gists_url": "https://api.github.com/users/ken-reitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ken-reitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ken-reitz/subscriptions", "organizations_url": "https://api.github.com/users/ken-reitz/orgs", "repos_url": "https://api.github.com/users/ken-reitz/repos", "events_url": "https://api.github.com/users/ken-reitz/events{/privacy}", "received_events_url": "https://api.github.com/users/ken-reitz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-27T04:24:30Z", "updated_at": "2017-06-28T15:09:39Z", "closed_at": "2017-06-28T15:09:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "this would be great for Requests to have. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/48", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/48/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/48/events", "html_url": "https://github.com/kjd/idna/issues/48", "id": 220590851, "node_id": "MDU6SXNzdWUyMjA1OTA4NTE=", "number": 48, "title": "handling invalid domain name", "user": {"login": "pawelmhm", "id": 2700942, "node_id": "MDQ6VXNlcjI3MDA5NDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2700942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pawelmhm", "html_url": "https://github.com/pawelmhm", "followers_url": "https://api.github.com/users/pawelmhm/followers", "following_url": "https://api.github.com/users/pawelmhm/following{/other_user}", "gists_url": "https://api.github.com/users/pawelmhm/gists{/gist_id}", "starred_url": "https://api.github.com/users/pawelmhm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pawelmhm/subscriptions", "organizations_url": "https://api.github.com/users/pawelmhm/orgs", "repos_url": "https://api.github.com/users/pawelmhm/repos", "events_url": "https://api.github.com/users/pawelmhm/events{/privacy}", "received_events_url": "https://api.github.com/users/pawelmhm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-04-10T09:45:42Z", "updated_at": "2017-10-20T14:01:16Z", "closed_at": "2017-04-10T11:12:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello @kjd , I have url looking like this https://tjhughes_co_uk.secure-cdn.visualsoft.co.uk/images/4-pack-solar-path-finder-p6049-14413_image.jpg I use library that uses idna, and I encountered following failure:\r\n\r\n```python\r\nIn [1]: url = 'https://tjhughes_co_uk.secure-cdn.visualsoft.co.uk/images/4-pack-solar-path-finder-p6049-14413_image.jpg'\r\n   ...: \r\n\r\nIn [2]: import idna\r\n\r\nIn [3]: idna.encode(urlparse(url).netloc)\r\n---------------------------------------------------------------------------\r\nInvalidCodepoint                          Traceback (most recent call last)\r\n<ipython-input-3-f510d576e964> in <module>()\r\n----> 1 idna.encode(urlparse(url).netloc)\r\n\r\n/home/pawel/.virtualenvs/scrapy/local/lib/python2.7/site-packages/idna/core.pyc in encode(s, strict, uts46, std3_rules, transitional)\r\n    353         trailing_dot = True\r\n    354     for label in labels:\r\n--> 355         result.append(alabel(label))\r\n    356     if trailing_dot:\r\n    357         result.append(b'')\r\n\r\n/home/pawel/.virtualenvs/scrapy/local/lib/python2.7/site-packages/idna/core.pyc in alabel(label)\r\n    274 \r\n    275     label = unicode(label)\r\n--> 276     check_label(label)\r\n    277     label = _punycode(label)\r\n    278     label = _alabel_prefix + label\r\n\r\n/home/pawel/.virtualenvs/scrapy/local/lib/python2.7/site-packages/idna/core.pyc in check_label(label)\r\n    251                 raise InvalidCodepointContext('Codepoint {0} not allowed at position {1} in {2}'.format(_unot(cp_value), pos+1, repr(label)))\r\n    252         else:\r\n--> 253             raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\n    254 \r\n    255     check_bidi(label)\r\n\r\nInvalidCodepoint: Codepoint U+005F at position 9 of u'tjhughes_co_uk' not allowed\r\n```\r\n\r\nIn version 2.2 it complains about character c after underscore so I'm guessing underscores in domain name are invalid.\r\n\r\nIn vesion 2.5 of idna I get\r\n\r\n```python\r\nIn [7]: idna.encode(urlparse(a).netloc)\r\n---------------------------------------------------------------------------\r\nIDNAError                                 Traceback (most recent call last)\r\n<ipython-input-7-6f26ef5f0d17> in <module>()\r\n----> 1 idna.encode(urlparse(a).netloc)\r\n\r\n/home/pawel/.virtualenvs/scrapy/local/lib/python2.7/site-packages/idna/core.pyc in encode(s, strict, uts46, std3_rules, transitional)\r\n    353         trailing_dot = True\r\n    354     for label in labels:\r\n--> 355         result.append(alabel(label))\r\n    356     if trailing_dot:\r\n    357         result.append(b'')\r\n\r\n/home/pawel/.virtualenvs/scrapy/local/lib/python2.7/site-packages/idna/core.pyc in alabel(label)\r\n    263             ulabel(label)\r\n    264         except IDNAError:\r\n--> 265             raise IDNAError('The label {0} is not a valid A-label'.format(label))\r\n    266         if not valid_label_length(label):\r\n    267             raise IDNAError('Label too long')\r\n\r\nIDNAError: The label tjhughes_co_uk is not a valid A-label\r\n```\r\n\r\nI tried \r\n\r\n```python\r\nidna.encode(url, uts46=True, transitional=True)\r\n```\r\nbut  it still breaks. I'm using Python 2. I stumbled on this via Scrapy that uses Twisted. Twisted does following thing with idna https://github.com/twisted/twisted/blob/trunk/src/twisted/internet/_idna.py#L28 is that ok? \r\n\r\nIf this url is invalid according to idna specs (I'm not sure it is, is it invalid?) is there some way for me to encode it to idna? Or do we need to skip idna encoding on failures like this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/46", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/46/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/46/events", "html_url": "https://github.com/kjd/idna/issues/46", "id": 212287495, "node_id": "MDU6SXNzdWUyMTIyODc0OTU=", "number": 46, "title": "Overly restrictive rules for KATAKANA MIDDLE DOT", "user": {"login": "cornmander", "id": 129202, "node_id": "MDQ6VXNlcjEyOTIwMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/129202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cornmander", "html_url": "https://github.com/cornmander", "followers_url": "https://api.github.com/users/cornmander/followers", "following_url": "https://api.github.com/users/cornmander/following{/other_user}", "gists_url": "https://api.github.com/users/cornmander/gists{/gist_id}", "starred_url": "https://api.github.com/users/cornmander/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cornmander/subscriptions", "organizations_url": "https://api.github.com/users/cornmander/orgs", "repos_url": "https://api.github.com/users/cornmander/repos", "events_url": "https://api.github.com/users/cornmander/events{/privacy}", "received_events_url": "https://api.github.com/users/cornmander/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251073, "node_id": "MDU6TGFiZWw0MTI1MTA3Mw==", "url": "https://api.github.com/repos/kjd/idna/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-06T23:52:18Z", "updated_at": "2017-03-07T03:18:02Z", "closed_at": "2017-03-07T03:18:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "RFC5892 A.7 states that the KATAKANA MIDDLE DOT character https://tools.ietf.org/html/rfc5892#appendix-A.7 requires at least one character in the {Hiragana, Katakana, Han} scripts. The validation in this library requires that ALL characters in the label (besides the dot character itself) be in those scripts.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/44", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/44/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/44/events", "html_url": "https://github.com/kjd/idna/issues/44", "id": 210916938, "node_id": "MDU6SXNzdWUyMTA5MTY5Mzg=", "number": 44, "title": "Unicode version agility", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/6", "html_url": "https://github.com/kjd/idna/milestone/6", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/6/labels", "id": 2354548, "node_id": "MDk6TWlsZXN0b25lMjM1NDU0OA==", "number": 6, "title": "v2.x", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2017-02-28T22:06:10Z", "updated_at": "2020-02-25T22:12:14Z", "due_on": null, "closed_at": "2020-02-25T22:12:14Z"}, "comments": 0, "created_at": "2017-02-28T22:11:24Z", "updated_at": "2017-08-08T01:06:58Z", "closed_at": "2017-08-08T01:06:57Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Enable the ability to create IDNA and UTS46 data for any given version of Unicode, rather than the current version or the version that has been pegged by the IAB (see issue #8). The requires refactoring the build-idnadata.py support tool to accept a version argument, obtaining the relevant underlying data needed to implement RFC 5892, and generating IANA-style tables that are input to the existing methods.\r\n\r\nThis is useful for debugging, and also provides options for implementers who want to track to newer Unicode versions despite potential risks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/43", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/43/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/43/events", "html_url": "https://github.com/kjd/idna/issues/43", "id": 210902827, "node_id": "MDU6SXNzdWUyMTA5MDI4Mjc=", "number": 43, "title": "Change in exception hierarchy", "user": {"login": "reaperhulk", "id": 161495, "node_id": "MDQ6VXNlcjE2MTQ5NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/161495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reaperhulk", "html_url": "https://github.com/reaperhulk", "followers_url": "https://api.github.com/users/reaperhulk/followers", "following_url": "https://api.github.com/users/reaperhulk/following{/other_user}", "gists_url": "https://api.github.com/users/reaperhulk/gists{/gist_id}", "starred_url": "https://api.github.com/users/reaperhulk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reaperhulk/subscriptions", "organizations_url": "https://api.github.com/users/reaperhulk/orgs", "repos_url": "https://api.github.com/users/reaperhulk/repos", "events_url": "https://api.github.com/users/reaperhulk/events{/privacy}", "received_events_url": "https://api.github.com/users/reaperhulk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/5", "html_url": "https://github.com/kjd/idna/milestone/5", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/5/labels", "id": 2352341, "node_id": "MDk6TWlsZXN0b25lMjM1MjM0MQ==", "number": 5, "title": "v2.4", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2017-02-28T05:07:58Z", "updated_at": "2017-03-01T04:32:34Z", "due_on": "2017-03-01T08:00:00Z", "closed_at": "2017-03-01T04:32:34Z"}, "comments": 3, "created_at": "2017-02-28T21:09:00Z", "updated_at": "2017-03-01T06:00:25Z", "closed_at": "2017-03-01T04:31:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "The fix for #36 (https://github.com/kjd/idna/commit/ebefacd3134d0f5da4745878620a6a1cba86d130) changes the exception hierarchy and breaks several downstream dependencies (twisted, pyca/cryptography, possibly more). Looking at the diff, would it be possible to revert and simply catch `UnicodeEncodeError` rather than `UnicodeError`? `UnicodeEncodeError` will be raised by `encode`, which is what you're trying to catch, while you don't want to catch any of the IDNAErrors. Alternately, this ugly code (which could be improved) also passes the tests:\r\n\r\n```python\r\ndef alabel(label):\r\n\r\n    if not label:\r\n        raise IDNAError('No Input')\r\n\r\n    if not valid_label_length(label):\r\n        raise IDNAError('Label too long')\r\n\r\n    try:\r\n        label = label.encode('ascii')\r\n        encoded = True\r\n    except UnicodeError:\r\n        encoded = False\r\n\r\n    if encoded is True:\r\n        try:\r\n            ulabel(label)\r\n            return label\r\n        except IDNAError:\r\n            raise IDNAError('The label {0} is not a valid A-label'.format(label))\r\n\r\n    label = unicode(label)\r\n    check_label(label)\r\n    label = _punycode(label)\r\n    label = _alabel_prefix + label\r\n\r\n    if not valid_label_length(label):\r\n        raise IDNAError('Label too long')\r\n\r\n    return label\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/42", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/42/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/42/events", "html_url": "https://github.com/kjd/idna/issues/42", "id": 210297118, "node_id": "MDU6SXNzdWUyMTAyOTcxMTg=", "number": 42, "title": "Misleading error message: Codepoint U+0027 at position 2 of \"b'foo bar'\" not allowed", "user": {"login": "joernheissler", "id": 865592, "node_id": "MDQ6VXNlcjg2NTU5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/865592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joernheissler", "html_url": "https://github.com/joernheissler", "followers_url": "https://api.github.com/users/joernheissler/followers", "following_url": "https://api.github.com/users/joernheissler/following{/other_user}", "gists_url": "https://api.github.com/users/joernheissler/gists{/gist_id}", "starred_url": "https://api.github.com/users/joernheissler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joernheissler/subscriptions", "organizations_url": "https://api.github.com/users/joernheissler/orgs", "repos_url": "https://api.github.com/users/joernheissler/repos", "events_url": "https://api.github.com/users/joernheissler/events{/privacy}", "received_events_url": "https://api.github.com/users/joernheissler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251073, "node_id": "MDU6TGFiZWw0MTI1MTA3Mw==", "url": "https://api.github.com/repos/kjd/idna/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/4", "html_url": "https://github.com/kjd/idna/milestone/4", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/4/labels", "id": 2280956, "node_id": "MDk6TWlsZXN0b25lMjI4MDk1Ng==", "number": 4, "title": "v2.3", "description": null, "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2017-01-26T20:27:33Z", "updated_at": "2017-02-28T22:05:59Z", "due_on": null, "closed_at": "2017-02-28T22:05:59Z"}, "comments": 5, "created_at": "2017-02-26T08:06:23Z", "updated_at": "2017-02-27T10:41:56Z", "closed_at": "2017-02-27T10:41:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I accidentally passed a name with a blank to idna.encode; It seems to encode it to bytes and then complains about the apostrophe of b'foo bar'.\r\nPython2 correctly complains: `idna.core.InvalidCodepoint: Codepoint U+0020 at position 4 of u'foo bar' not allowed`\r\n\r\nTest case:\r\n```\r\nimport idna\r\nidna.encode('foo bar')\r\n```\r\n\r\nResult:\r\n```\r\n$ python3 foo.py\r\nTraceback (most recent call last):\r\n  File \"foo.py\", line 2, in <module>\r\n    idna.encode('foo bar')\r\n  File \"/home/joern/env/lib/python3.5/site-packages/idna/core.py\", line 355, in encode\r\n    result.append(alabel(label))\r\n  File \"/home/joern/env/lib/python3.5/site-packages/idna/core.py\", line 276, in alabel\r\n    check_label(label)\r\n  File \"/home/joern/env/lib/python3.5/site-packages/idna/core.py\", line 253, in check_label\r\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\nidna.core.InvalidCodepoint: Codepoint U+0027 at position 2 of \"b'foo bar'\" not allowed\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/40", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/40/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/40/events", "html_url": "https://github.com/kjd/idna/issues/40", "id": 208845701, "node_id": "MDU6SXNzdWUyMDg4NDU3MDE=", "number": 40, "title": "idna-2.2: idna.encode('\u2603') does not return 'xn--n3h'", "user": {"login": "jakeogh", "id": 53795, "node_id": "MDQ6VXNlcjUzNzk1", "avatar_url": "https://avatars0.githubusercontent.com/u/53795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakeogh", "html_url": "https://github.com/jakeogh", "followers_url": "https://api.github.com/users/jakeogh/followers", "following_url": "https://api.github.com/users/jakeogh/following{/other_user}", "gists_url": "https://api.github.com/users/jakeogh/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakeogh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakeogh/subscriptions", "organizations_url": "https://api.github.com/users/jakeogh/orgs", "repos_url": "https://api.github.com/users/jakeogh/repos", "events_url": "https://api.github.com/users/jakeogh/events{/privacy}", "received_events_url": "https://api.github.com/users/jakeogh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2017-02-20T10:54:46Z", "updated_at": "2017-03-15T07:24:30Z", "closed_at": "2017-02-20T10:59:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n>>> import idna\r\n>>> idna.encode('\u30c9\u30e1\u30a4\u30f3.\u30c6\u30b9\u30c8')\r\nb'xn--eckwd4c7c.xn--zckzah'\r\n>>> idna.encode('\u2603')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib64/python3.4/site-packages/idna/core.py\", line 355, in encode\r\n    result.append(alabel(label))\r\n  File \"/usr/lib64/python3.4/site-packages/idna/core.py\", line 276, in alabel\r\n    check_label(label)\r\n  File \"/usr/lib64/python3.4/site-packages/idna/core.py\", line 253, in check_label\r\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\nidna.core.InvalidCodepoint: Codepoint U+2603 at position 1 of '\u2603' not allowed\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/38", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/38/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/38/events", "html_url": "https://github.com/kjd/idna/issues/38", "id": 204567133, "node_id": "MDU6SXNzdWUyMDQ1NjcxMzM=", "number": 38, "title": "`except` without exception class specified makes IDNA-encoding non-threadsafe.", "user": {"login": "Crazy-Owl", "id": 179961, "node_id": "MDQ6VXNlcjE3OTk2MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/179961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Crazy-Owl", "html_url": "https://github.com/Crazy-Owl", "followers_url": "https://api.github.com/users/Crazy-Owl/followers", "following_url": "https://api.github.com/users/Crazy-Owl/following{/other_user}", "gists_url": "https://api.github.com/users/Crazy-Owl/gists{/gist_id}", "starred_url": "https://api.github.com/users/Crazy-Owl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Crazy-Owl/subscriptions", "organizations_url": "https://api.github.com/users/Crazy-Owl/orgs", "repos_url": "https://api.github.com/users/Crazy-Owl/repos", "events_url": "https://api.github.com/users/Crazy-Owl/events{/privacy}", "received_events_url": "https://api.github.com/users/Crazy-Owl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-01T12:08:07Z", "updated_at": "2017-02-13T18:52:35Z", "closed_at": "2017-02-13T18:52:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nWe have a python program with resident process running in separate thread. We make requests in said thread and when master thread spots a timeout, a custom exception is dispatched to child thread via OS signal. We use Requests 2.12.4.\r\n\r\nHowever, that exception is caught not by our handler (in child thread main loop), but by `except:` directive in `alabel` function deep in `idna/core.py`: https://github.com/kennethreitz/requests/blob/master/requests/packages/idna/core.py#L264 because that handler is an unconditional \"catch-all\" `except:` directive. That leads to very cryptic behaviour like child thread not stopping and trying to access urls with unnecessary IDNA-encoding (all our URLs are in plain ascii).\r\n\r\nExpected behaviour for that handler is not to catch everything, but to expect a specific exception class(es) and work just with them.\r\n\r\nRequests maintainer asked me to open this issue here, since apparently `requests` package uses `idna` package vendored without edits from this repo. Original issue: kennethreitz/requests#3843", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/36", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/36/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/36/events", "html_url": "https://github.com/kjd/idna/issues/36", "id": 203403609, "node_id": "MDU6SXNzdWUyMDM0MDM2MDk=", "number": 36, "title": "Length checks don't work and lead to funky errors", "user": {"login": "hynek", "id": 41240, "node_id": "MDQ6VXNlcjQxMjQw", "avatar_url": "https://avatars3.githubusercontent.com/u/41240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hynek", "html_url": "https://github.com/hynek", "followers_url": "https://api.github.com/users/hynek/followers", "following_url": "https://api.github.com/users/hynek/following{/other_user}", "gists_url": "https://api.github.com/users/hynek/gists{/gist_id}", "starred_url": "https://api.github.com/users/hynek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hynek/subscriptions", "organizations_url": "https://api.github.com/users/hynek/orgs", "repos_url": "https://api.github.com/users/hynek/repos", "events_url": "https://api.github.com/users/hynek/events{/privacy}", "received_events_url": "https://api.github.com/users/hynek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251073, "node_id": "MDU6TGFiZWw0MTI1MTA3Mw==", "url": "https://api.github.com/repos/kjd/idna/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/4", "html_url": "https://github.com/kjd/idna/milestone/4", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/4/labels", "id": 2280956, "node_id": "MDk6TWlsZXN0b25lMjI4MDk1Ng==", "number": 4, "title": "v2.3", "description": null, "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2017-01-26T20:27:33Z", "updated_at": "2017-02-28T22:05:59Z", "due_on": null, "closed_at": "2017-02-28T22:05:59Z"}, "comments": 1, "created_at": "2017-01-26T15:40:26Z", "updated_at": "2017-02-13T19:05:39Z", "closed_at": "2017-02-13T19:05:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nobserve:\r\n\r\n```pycon\r\n>>> idna.encode(\"x\" * 65)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/hynek/.virtualenvs/cust_ws/lib/python3.5/site-packages/idna/core.py\", line 355, in encode\r\n    result.append(alabel(label))\r\n  File \"/Users/hynek/.virtualenvs/cust_ws/lib/python3.5/site-packages/idna/core.py\", line 276, in alabel\r\n    check_label(label)\r\n  File \"/Users/hynek/.virtualenvs/cust_ws/lib/python3.5/site-packages/idna/core.py\", line 253, in check_label\r\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\nidna.core.InvalidCodepoint: Codepoint U+0027 at position 2 of \"b'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\" not allowed\r\nCodepoint U+0027 at position 2 of \"b'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\" not allowed\r\n```\r\n\r\nThe problem are the following [lines](https://github.com/kjd/idna/blob/master/idna/core.py#L266-L270).\r\n\r\nYou check the length of the label and you *do* raise an `IDNAError('Label too long')`, however there\u2019s an `except UnicodeError:` and `IDNAError` happens to be a subclass of `UnicodeError`.  I that\u2019s where I closed my pdb session. :)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/35", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/35/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/35/events", "html_url": "https://github.com/kjd/idna/issues/35", "id": 200886930, "node_id": "MDU6SXNzdWUyMDA4ODY5MzA=", "number": 35, "title": "Import error inside import hook.", "user": {"login": "llazzaro", "id": 568181, "node_id": "MDQ6VXNlcjU2ODE4MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/568181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llazzaro", "html_url": "https://github.com/llazzaro", "followers_url": "https://api.github.com/users/llazzaro/followers", "following_url": "https://api.github.com/users/llazzaro/following{/other_user}", "gists_url": "https://api.github.com/users/llazzaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/llazzaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llazzaro/subscriptions", "organizations_url": "https://api.github.com/users/llazzaro/orgs", "repos_url": "https://api.github.com/users/llazzaro/repos", "events_url": "https://api.github.com/users/llazzaro/events{/privacy}", "received_events_url": "https://api.github.com/users/llazzaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-01-15T18:59:01Z", "updated_at": "2017-01-17T00:06:21Z", "closed_at": "2017-01-16T23:49:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI recently upgraded to requests 2.12 which uses idna and I started to see this import error:\r\n\r\n> (Pdb) request('get', url, params=params, **kwargs)\r\n> *** ImportError: No module named uts46data\r\n\r\nLooking in the changes I saw that it was recently added idna. \r\nMy projects are using import hooks and inside of it the hook use requests, which uses idna.\r\n\r\nThe code of idna is doing an import inside the method `uts46_remap`, which is breaking my code.\r\nMoving the import uts46_remap outside fixes this issue.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/32", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/32/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/32/events", "html_url": "https://github.com/kjd/idna/issues/32", "id": 191108600, "node_id": "MDU6SXNzdWUxOTExMDg2MDA=", "number": 32, "title": "Label has disallowed hyphens", "user": {"login": "quantenschaum", "id": 3985599, "node_id": "MDQ6VXNlcjM5ODU1OTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/3985599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quantenschaum", "html_url": "https://github.com/quantenschaum", "followers_url": "https://api.github.com/users/quantenschaum/followers", "following_url": "https://api.github.com/users/quantenschaum/following{/other_user}", "gists_url": "https://api.github.com/users/quantenschaum/gists{/gist_id}", "starred_url": "https://api.github.com/users/quantenschaum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quantenschaum/subscriptions", "organizations_url": "https://api.github.com/users/quantenschaum/orgs", "repos_url": "https://api.github.com/users/quantenschaum/repos", "events_url": "https://api.github.com/users/quantenschaum/events{/privacy}", "received_events_url": "https://api.github.com/users/quantenschaum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251074, "node_id": "MDU6TGFiZWw0MTI1MTA3NA==", "url": "https://api.github.com/repos/kjd/idna/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}, {"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/6", "html_url": "https://github.com/kjd/idna/milestone/6", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/6/labels", "id": 2354548, "node_id": "MDk6TWlsZXN0b25lMjM1NDU0OA==", "number": 6, "title": "v2.x", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2017-02-28T22:06:10Z", "updated_at": "2020-02-25T22:12:14Z", "due_on": null, "closed_at": "2020-02-25T22:12:14Z"}, "comments": 1, "created_at": "2016-11-22T19:56:15Z", "updated_at": "2017-08-08T04:29:25Z", "closed_at": "2017-08-08T04:29:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Consider the following\r\n\r\n```\r\nPython 2.7.12 (default, Jul  1 2016, 15:12:24) \r\n[GCC 5.4.0 20160609] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import idna\r\n>>> idna.encode('r6---sn-i5onxoxu-cxgl.c.doc-0-0-sj.sj.googleusercontent.com')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python2.7/dist-packages/idna/core.py\", line 355, in encode\r\n    result.append(alabel(label))\r\n  File \"/usr/local/lib/python2.7/dist-packages/idna/core.py\", line 276, in alabel\r\n    check_label(label)\r\n  File \"/usr/local/lib/python2.7/dist-packages/idna/core.py\", line 239, in check_label\r\n    check_hyphen_ok(label)\r\n  File \"/usr/local/lib/python2.7/dist-packages/idna/core.py\", line 134, in check_hyphen_ok\r\n    raise IDNAError('Label has disallowed hyphens in 3rd and 4th position')\r\nidna.core.IDNAError: Label has disallowed hyphens in 3rd and 4th position\r\n```\r\n\r\nSame issue for decoding. The hostname is valid, so it should just pass without error.\r\n\r\nI came here because [requests](https://github.com/kennethreitz/requests/blob/22ec73d71a4b533b5c863733ecc60b0fb13531a9/requests/models.py#L373) unconditionally does idna encoding of the hostname.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/31", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/31/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/31/events", "html_url": "https://github.com/kjd/idna/issues/31", "id": 191096193, "node_id": "MDU6SXNzdWUxOTEwOTYxOTM=", "number": 31, "title": "Codepoint U+2010 not allowed", "user": {"login": "GoldenStake", "id": 810621, "node_id": "MDQ6VXNlcjgxMDYyMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/810621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GoldenStake", "html_url": "https://github.com/GoldenStake", "followers_url": "https://api.github.com/users/GoldenStake/followers", "following_url": "https://api.github.com/users/GoldenStake/following{/other_user}", "gists_url": "https://api.github.com/users/GoldenStake/gists{/gist_id}", "starred_url": "https://api.github.com/users/GoldenStake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GoldenStake/subscriptions", "organizations_url": "https://api.github.com/users/GoldenStake/orgs", "repos_url": "https://api.github.com/users/GoldenStake/repos", "events_url": "https://api.github.com/users/GoldenStake/events{/privacy}", "received_events_url": "https://api.github.com/users/GoldenStake/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-22T19:06:09Z", "updated_at": "2016-11-23T05:25:40Z", "closed_at": "2016-11-23T05:25:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n>>> idna.encode(\"one\u2010two.com\".decode(\"utf-8\"))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python2.7/dist-packages/idna/core.py\", line 354, in encode\r\n    result.append(alabel(label))\r\n  File \"/usr/lib/python2.7/dist-packages/idna/core.py\", line 275, in alabel\r\n    check_label(label)\r\n  File \"/usr/lib/python2.7/dist-packages/idna/core.py\", line 252, in check_label\r\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\r\nidna.core.InvalidCodepoint: Codepoint U+2010 at position 4 of u'one\\u2010two' not allowed\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/29", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/29/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/29/events", "html_url": "https://github.com/kjd/idna/issues/29", "id": 190808010, "node_id": "MDU6SXNzdWUxOTA4MDgwMTA=", "number": 29, "title": "Codepoint U+005B not allowed at position1 in '[::1]'", "user": {"login": "philbert", "id": 5618563, "node_id": "MDQ6VXNlcjU2MTg1NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5618563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philbert", "html_url": "https://github.com/philbert", "followers_url": "https://api.github.com/users/philbert/followers", "following_url": "https://api.github.com/users/philbert/following{/other_user}", "gists_url": "https://api.github.com/users/philbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/philbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philbert/subscriptions", "organizations_url": "https://api.github.com/users/philbert/orgs", "repos_url": "https://api.github.com/users/philbert/repos", "events_url": "https://api.github.com/users/philbert/events{/privacy}", "received_events_url": "https://api.github.com/users/philbert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-11-21T19:09:11Z", "updated_at": "2016-11-23T08:58:22Z", "closed_at": "2016-11-23T08:58:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I believe this to be a bug with idna rather than in requests but I think that @kennethreitz should probably be aware of this too:\r\n\r\nUsing python 3.4 and requests 2.12.1 I tried to get this URL:\r\n```requests.get('http://[::]:5000/files')```\r\n\r\nWhich returns this bunch of errors:\r\n```\r\npython3 fileclient.py\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/packages/idna/core.py\", line 327, in uts46_remap\r\n    raise IndexError()\r\nIndexError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/models.py\", line 370, in prepare_url\r\n    host = idna.encode(host, uts46=True).decode('utf-8')\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/packages/idna/core.py\", line 340, in encode\r\n    s = uts46_remap(s, std3_rules, transitional)\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/packages/idna/core.py\", line 332, in uts46_remap\r\n    _unot(code_point), pos + 1, repr(domain)))\r\nrequests.packages.idna.core.InvalidCodepoint: Codepoint U+005B not allowed at position1 in '[::1]'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"fileclient.py\", line 55, in <module>\r\n    buy_file()\r\n  File \"fileclient.py\", line 17, in buy_file\r\n    response = requests.get(url=server_url+'files')\r\n  File \"/usr/local/lib/python3.4/dist-packages/two1/bitrequests/bitrequests.py\", line 169, in get\r\n    return self.request('get', url, max_price, **kwargs)\r\n  File \"/usr/local/lib/python3.4/dist-packages/two1/bitrequests/bitrequests.py\", line 134, in request\r\n    response = requests.request(method, url, **kwargs)\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/api.py\", line 56, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/sessions.py\", line 474, in request\r\n    prep = self.prepare_request(req)\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/sessions.py\", line 407, in prepare_request\r\n    hooks=merge_hooks(request.hooks, self.hooks),\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/models.py\", line 302, in prepare\r\n    self.prepare_url(url, params)\r\n  File \"/usr/local/lib/python3.4/dist-packages/requests/models.py\", line 372, in prepare_url\r\n    raise InvalidURL('URL has an invalid label.')\r\nrequests.exceptions.InvalidURL: URL has an invalid label.\r\n```\r\n\r\nI downgraded to requests 2.11.1 ([prior to the idna update](http://docs.python-requests.org/en/master/community/updates/#updates)) and now my code works again.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/28", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/28/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/28/events", "html_url": "https://github.com/kjd/idna/issues/28", "id": 190547696, "node_id": "MDU6SXNzdWUxOTA1NDc2OTY=", "number": 28, "title": "Jython 2.7 cannot deal with the large uts46data structure", "user": {"login": "johnabooth", "id": 12439039, "node_id": "MDQ6VXNlcjEyNDM5MDM5", "avatar_url": "https://avatars1.githubusercontent.com/u/12439039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnabooth", "html_url": "https://github.com/johnabooth", "followers_url": "https://api.github.com/users/johnabooth/followers", "following_url": "https://api.github.com/users/johnabooth/following{/other_user}", "gists_url": "https://api.github.com/users/johnabooth/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnabooth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnabooth/subscriptions", "organizations_url": "https://api.github.com/users/johnabooth/orgs", "repos_url": "https://api.github.com/users/johnabooth/repos", "events_url": "https://api.github.com/users/johnabooth/events{/privacy}", "received_events_url": "https://api.github.com/users/johnabooth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/3", "html_url": "https://github.com/kjd/idna/milestone/3", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/3/labels", "id": 2165254, "node_id": "MDk6TWlsZXN0b25lMjE2NTI1NA==", "number": 3, "title": "v2.2", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-11-30T01:59:44Z", "updated_at": "2017-01-26T20:27:56Z", "due_on": "2016-12-23T08:00:00Z", "closed_at": "2017-01-26T20:27:56Z"}, "comments": 3, "created_at": "2016-11-20T09:11:28Z", "updated_at": "2016-12-21T05:07:11Z", "closed_at": "2016-12-20T23:56:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Modified core.py, build-uts46data.py, and uts46data.py to support 64kb Java Class limits.\r\nSee https://github.com/metavero/idna/pulls", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/27", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/27/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/27/events", "html_url": "https://github.com/kjd/idna/issues/27", "id": 184627802, "node_id": "MDU6SXNzdWUxODQ2Mjc4MDI=", "number": 27, "title": "IDNA Errors on \"https://r2---sn-huoa-cvhl.googlevideo.com/crossdomain.xml\" URL", "user": {"login": "Billy2011", "id": 3738717, "node_id": "MDQ6VXNlcjM3Mzg3MTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/3738717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Billy2011", "html_url": "https://github.com/Billy2011", "followers_url": "https://api.github.com/users/Billy2011/followers", "following_url": "https://api.github.com/users/Billy2011/following{/other_user}", "gists_url": "https://api.github.com/users/Billy2011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Billy2011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Billy2011/subscriptions", "organizations_url": "https://api.github.com/users/Billy2011/orgs", "repos_url": "https://api.github.com/users/Billy2011/repos", "events_url": "https://api.github.com/users/Billy2011/events{/privacy}", "received_events_url": "https://api.github.com/users/Billy2011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/6", "html_url": "https://github.com/kjd/idna/milestone/6", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/6/labels", "id": 2354548, "node_id": "MDk6TWlsZXN0b25lMjM1NDU0OA==", "number": 6, "title": "v2.x", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2017-02-28T22:06:10Z", "updated_at": "2020-02-25T22:12:14Z", "due_on": null, "closed_at": "2020-02-25T22:12:14Z"}, "comments": 1, "created_at": "2016-10-22T12:31:34Z", "updated_at": "2017-08-08T04:30:49Z", "closed_at": "2017-08-08T04:30:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "This URL works in Firefox but not in my App!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/26", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/26/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/26/events", "html_url": "https://github.com/kjd/idna/issues/26", "id": 184260967, "node_id": "MDU6SXNzdWUxODQyNjA5Njc=", "number": 26, "title": "Use relative imports", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/3", "html_url": "https://github.com/kjd/idna/milestone/3", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/3/labels", "id": 2165254, "node_id": "MDk6TWlsZXN0b25lMjE2NTI1NA==", "number": 3, "title": "v2.2", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-11-30T01:59:44Z", "updated_at": "2017-01-26T20:27:56Z", "due_on": "2016-12-23T08:00:00Z", "closed_at": "2017-01-26T20:27:56Z"}, "comments": 0, "created_at": "2016-10-20T15:24:13Z", "updated_at": "2016-12-21T03:27:00Z", "closed_at": "2016-12-21T03:27:00Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Some import statements do not use relative imports which makes vendoring more difficult.\n\n(see https://github.com/kennethreitz/requests/pull/3620)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/25", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/25/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/25/events", "html_url": "https://github.com/kjd/idna/issues/25", "id": 169969585, "node_id": "MDU6SXNzdWUxNjk5Njk1ODU=", "number": 25, "title": "\"codepoint not allowed\" (with existing name)", "user": {"login": "romuald", "id": 113200, "node_id": "MDQ6VXNlcjExMzIwMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/113200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romuald", "html_url": "https://github.com/romuald", "followers_url": "https://api.github.com/users/romuald/followers", "following_url": "https://api.github.com/users/romuald/following{/other_user}", "gists_url": "https://api.github.com/users/romuald/gists{/gist_id}", "starred_url": "https://api.github.com/users/romuald/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romuald/subscriptions", "organizations_url": "https://api.github.com/users/romuald/orgs", "repos_url": "https://api.github.com/users/romuald/repos", "events_url": "https://api.github.com/users/romuald/events{/privacy}", "received_events_url": "https://api.github.com/users/romuald/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-08-08T16:44:38Z", "updated_at": "2016-08-08T21:07:34Z", "closed_at": "2016-08-08T17:20:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\n\nGiven the string `u'\\u2709'` (or the encoded form `xn--4bi`)\n\nTrying to use encode / decode on that string will always raise the following error:\n\n_Codepoint U+2709 at position 1 of u'\\u2709' not allowed_\n\nThe domain in question exists and is resolving, the standard python idna module correctly encodes/decodes the string.\n\nIs this an issue with idna module or am I missing something?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/21", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/21/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/21/events", "html_url": "https://github.com/kjd/idna/issues/21", "id": 133369441, "node_id": "MDU6SXNzdWUxMzMzNjk0NDE=", "number": 21, "title": "Cannot encode u'sande.m\u00c3\u00b8re-og-romsdal.no'", "user": {"login": "jamesyli", "id": 126023, "node_id": "MDQ6VXNlcjEyNjAyMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/126023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesyli", "html_url": "https://github.com/jamesyli", "followers_url": "https://api.github.com/users/jamesyli/followers", "following_url": "https://api.github.com/users/jamesyli/following{/other_user}", "gists_url": "https://api.github.com/users/jamesyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesyli/subscriptions", "organizations_url": "https://api.github.com/users/jamesyli/orgs", "repos_url": "https://api.github.com/users/jamesyli/repos", "events_url": "https://api.github.com/users/jamesyli/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesyli/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-02-12T23:31:54Z", "updated_at": "2016-02-15T17:11:16Z", "closed_at": "2016-02-13T04:41:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\n>>> idna.encode(u'sande.m\u00c3\u00b8re-og-romsdal.no', uts46=True)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/idna/core.py\", line 339, in encode\n    s = uts46_remap(s, std3_rules, transitional)\n  File \"/usr/local/lib/python2.7/dist-packages/idna/core.py\", line 331, in uts46_remap\n    _unot(code_point), pos + 1, repr(domain)))\nidna.core.InvalidCodepoint: Codepoint U+00B8 not allowed at position 9 in u'sande.m\\xc3\\xb8re-og-romsdal.no'\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/20", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/20/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/20/events", "html_url": "https://github.com/kjd/idna/issues/20", "id": 133036971, "node_id": "MDU6SXNzdWUxMzMwMzY5NzE=", "number": 20, "title": "Tests fail on Python 2.6", "user": {"login": "rbu", "id": 65913, "node_id": "MDQ6VXNlcjY1OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/65913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rbu", "html_url": "https://github.com/rbu", "followers_url": "https://api.github.com/users/rbu/followers", "following_url": "https://api.github.com/users/rbu/following{/other_user}", "gists_url": "https://api.github.com/users/rbu/gists{/gist_id}", "starred_url": "https://api.github.com/users/rbu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rbu/subscriptions", "organizations_url": "https://api.github.com/users/rbu/orgs", "repos_url": "https://api.github.com/users/rbu/repos", "events_url": "https://api.github.com/users/rbu/events{/privacy}", "received_events_url": "https://api.github.com/users/rbu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/3", "html_url": "https://github.com/kjd/idna/milestone/3", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/3/labels", "id": 2165254, "node_id": "MDk6TWlsZXN0b25lMjE2NTI1NA==", "number": 3, "title": "v2.2", "description": "", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-11-30T01:59:44Z", "updated_at": "2017-01-26T20:27:56Z", "due_on": "2016-12-23T08:00:00Z", "closed_at": "2017-01-26T20:27:56Z"}, "comments": 7, "created_at": "2016-02-11T17:36:02Z", "updated_at": "2016-12-21T09:13:59Z", "closed_at": "2016-12-21T03:21:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is idna supposed to work on Python 2.6? The documentation does not explicitly state that 2.7 is required and 2.6 is not. There has been at least one commit to improve 2.6 compat as well.\n\nI've added to obvious fxes to the tests for 2.6 that, but I'm not exactly sure what the correct fix for the two remaining tests is.\n\nPatch:\n\n``` diff\ndiff --git a/tests/test_idna_codec.py b/tests/test_idna_codec.py\nindex fe3737a..2d0cd14 100755\n--- a/tests/test_idna_codec.py\n+++ b/tests/test_idna_codec.py\n@@ -24,7 +24,7 @@ class IDNACodecTests(unittest.TestCase):\n         )\n\n         for decoded, encoded in incremental_tests:\n-            if sys.version_info.major == 2:\n+            if sys.version_info[0] == 2:\n                 self.assertEqual(\"\".join(codecs.iterdecode(encoded, \"idna\")),\n                                 decoded)\n             else:\ndiff --git a/tests/test_idna_uts46.py b/tests/test_idna_uts46.py\nindex d8a2836..c93c0df 100755\n--- a/tests/test_idna_uts46.py\n+++ b/tests/test_idna_uts46.py\n@@ -51,6 +51,8 @@ class TestIdnaTest(unittest.TestCase):\n         return \"%s.%d\" % (super(TestIdnaTest, self).id(), self.lineno)\n\n     def shortDescription(self):\n+        if not self.fields:\n+            return \"\"\n         return \"IdnaTest.txt line %d: %r\" % (self.lineno,\n             u\"; \".join(self.fields))\n\n```\n\nFailures:\n\n``` shell\n======================================================================\nERROR: test_decode (tests.test_idna.IDNATests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/rbu/devel/code/idna/tests/test_idna.py\", line 258, in test_decode\n    self.assertEqual(idna.decode('xn---------90gglbagaar.aa'),\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 383, in decode\n    result.append(ulabel(label))\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 302, in ulabel\n    check_label(label)\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 254, in check_label\n    check_bidi(label)\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 70, in check_bidi\n    raise IDNABidiError('Unknown directionality in label {0} at position {1}'.format(repr(label), idx))\nIDNABidiError: Unknown directionality in label u'\\u0521\\u0525\\u0523-\\u0523\\u0523-----\\u0521\\u0523\\u0523\\u0523' at position 2\n\n======================================================================\nERROR: test_encode (tests.test_idna.IDNATests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/rbu/devel/code/idna/tests/test_idna.py\", line 244, in test_encode\n    self.assertEqual(idna.encode(u'\\u0521\\u0525\\u0523-\\u0523\\u0523-----\\u0521\\u0523\\u0523\\u0523.aa'),\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 354, in encode\n    result.append(alabel(label))\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 275, in alabel\n    check_label(label)\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 254, in check_label\n    check_bidi(label)\n  File \"/home/rbu/devel/code/idna/idna/core.py\", line 70, in check_bidi\n    raise IDNABidiError('Unknown directionality in label {0} at position {1}'.format(repr(label), idx))\nIDNABidiError: Unknown directionality in label u'\\u0521\\u0525\\u0523-\\u0523\\u0523-----\\u0521\\u0523\\u0523\\u0523' at position 2\n\n----------------------------------------------------------------------\nRan 17 tests in 0.007s\n\nFAILED (errors=2)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/19", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/19/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/19/events", "html_url": "https://github.com/kjd/idna/issues/19", "id": 119000460, "node_id": "MDU6SXNzdWUxMTkwMDA0NjA=", "number": 19, "title": "Unable to encode/decode U+1F52B", "user": {"login": "alexkiro", "id": 1538458, "node_id": "MDQ6VXNlcjE1Mzg0NTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1538458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexkiro", "html_url": "https://github.com/alexkiro", "followers_url": "https://api.github.com/users/alexkiro/followers", "following_url": "https://api.github.com/users/alexkiro/following{/other_user}", "gists_url": "https://api.github.com/users/alexkiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexkiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexkiro/subscriptions", "organizations_url": "https://api.github.com/users/alexkiro/orgs", "repos_url": "https://api.github.com/users/alexkiro/repos", "events_url": "https://api.github.com/users/alexkiro/events{/privacy}", "received_events_url": "https://api.github.com/users/alexkiro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-11-26T09:02:30Z", "updated_at": "2015-11-26T15:27:26Z", "closed_at": "2015-11-26T15:27:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that the U+1F52B PISTOL character added to Unicode in version 6.0 (2010) is not supported by the `idna` package:\n\n``` python\n>>> idna.encode(u'\\U0001f52b.test')\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/chirila/env/local/lib/python2.7/site-packages/idna/core.py\", line 354, in encode\n    result.append(alabel(label))\n  File \"/home/chirila/env/local/lib/python2.7/site-packages/idna/core.py\", line 275, in alabel\n    check_label(label)\n  File \"/home/chirila/env/local/lib/python2.7/site-packages/idna/core.py\", line 252, in check_label\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\nidna.core.InvalidCodepoint: Codepoint U+1F52B at position 1 of u'\\U0001f52b' not allowed\n>>> idna.decode('xn--bw8h.test')\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/chirila/env/local/lib/python2.7/site-packages/idna/core.py\", line 383, in decode\n    result.append(ulabel(label))\n  File \"/home/chirila/env/local/lib/python2.7/site-packages/idna/core.py\", line 302, in ulabel\n    check_label(label)\n  File \"/home/chirila/env/local/lib/python2.7/site-packages/idna/core.py\", line 252, in check_label\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\nidna.core.InvalidCodepoint: Codepoint U+1F52B at position 1 of u'\\U0001f52b' not allowed\n>>> \n```\n\nWhile the python standard library can indeed encode/decode the codepoint:\n\n``` python\n>>> u'\\U0001f52b.test'.encode(\"idna\")\n'xn--bw8h.test'\n>>> 'xn--bw8h.test'.decode(\"idna\")\nu'\\U0001f52b.test'\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/17", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/17/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/17/events", "html_url": "https://github.com/kjd/idna/issues/17", "id": 98841732, "node_id": "MDU6SXNzdWU5ODg0MTczMg==", "number": 17, "title": "idna is dissatisfied with underscores", "user": {"login": "bpicolo", "id": 2424701, "node_id": "MDQ6VXNlcjI0MjQ3MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/2424701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpicolo", "html_url": "https://github.com/bpicolo", "followers_url": "https://api.github.com/users/bpicolo/followers", "following_url": "https://api.github.com/users/bpicolo/following{/other_user}", "gists_url": "https://api.github.com/users/bpicolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpicolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpicolo/subscriptions", "organizations_url": "https://api.github.com/users/bpicolo/orgs", "repos_url": "https://api.github.com/users/bpicolo/repos", "events_url": "https://api.github.com/users/bpicolo/events{/privacy}", "received_events_url": "https://api.github.com/users/bpicolo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-08-03T21:28:29Z", "updated_at": "2015-08-04T15:20:18Z", "closed_at": "2015-08-04T15:20:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "``` python\nimport idna\n idna.encode('ex_ample.example.org')\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/nail/home/benp/pg/utils/bravado-promised/virtualenv_run/local/lib/python2.7/site-packages/idna/core.py\", line 354, in encode\n    result.append(alabel(label))\n  File \"/nail/home/benp/pg/utils/bravado-promised/virtualenv_run/local/lib/python2.7/site-packages/idna/core.py\", line 275, in alabel\n    check_label(label)\n  File \"/nail/home/benp/pg/utils/bravado-promised/virtualenv_run/local/lib/python2.7/site-packages/idna/core.py\", line 252, in check_label\n    raise InvalidCodepoint('Codepoint {0} at position {1} of {2} not allowed'.format(_unot(cp_value), pos+1, repr(label)))\nidna.core.InvalidCodepoint: Codepoint U+005F at position 3 of u'ex_ample' not allowed\n```\n\nSeems like underscores in hostname should be perfectly allowed? Can't find any RFC that suggests otherwise (and browsers seem happy with URLs in hostname).\n\nPerhaps this is more of a twisted bug where it shouldn't pass this sort of url to idna ever, not sure. This is just an issue I hit as an end user\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/16", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/16/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/16/events", "html_url": "https://github.com/kjd/idna/issues/16", "id": 81850046, "node_id": "MDU6SXNzdWU4MTg1MDA0Ng==", "number": 16, "title": "Please consider to upload a wheel to PyPI", "user": {"login": "hynek", "id": 41240, "node_id": "MDQ6VXNlcjQxMjQw", "avatar_url": "https://avatars3.githubusercontent.com/u/41240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hynek", "html_url": "https://github.com/hynek", "followers_url": "https://api.github.com/users/hynek/followers", "following_url": "https://api.github.com/users/hynek/following{/other_user}", "gists_url": "https://api.github.com/users/hynek/gists{/gist_id}", "starred_url": "https://api.github.com/users/hynek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hynek/subscriptions", "organizations_url": "https://api.github.com/users/hynek/orgs", "repos_url": "https://api.github.com/users/hynek/repos", "events_url": "https://api.github.com/users/hynek/events{/privacy}", "received_events_url": "https://api.github.com/users/hynek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-28T09:42:00Z", "updated_at": "2015-05-30T07:55:13Z", "closed_at": "2015-05-30T01:02:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nit would be great if you could upload a wheel of idna to PyPI which install much faster.\n\nThe current version of pip does it automatically but it would be nice if I could skip this step. :)\n\nIf you need any help, https://hynek.me/articles/sharing-your-labor-of-love-pypi-quick-and-dirty/ should get you started.\n\nThanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/15", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/15/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/15/events", "html_url": "https://github.com/kjd/idna/issues/15", "id": 76784378, "node_id": "MDU6SXNzdWU3Njc4NDM3OA==", "number": 15, "title": "InvalidCodepoint message formatting fails on python 2.6", "user": {"login": "alex", "id": 772, "node_id": "MDQ6VXNlcjc3Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex", "html_url": "https://github.com/alex", "followers_url": "https://api.github.com/users/alex/followers", "following_url": "https://api.github.com/users/alex/following{/other_user}", "gists_url": "https://api.github.com/users/alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex/subscriptions", "organizations_url": "https://api.github.com/users/alex/orgs", "repos_url": "https://api.github.com/users/alex/repos", "events_url": "https://api.github.com/users/alex/events{/privacy}", "received_events_url": "https://api.github.com/users/alex/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-15T16:44:59Z", "updated_at": "2015-05-18T21:09:10Z", "closed_at": "2015-05-18T21:06:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On python 2.6, messaging formatting like is found here: https://github.com/kjd/idna/blob/master/idna%2Fcore.py#L247-L254\n\nis an error, this is because 2.6 doesn't support the `{}` format, you have to explicitly name which value you want (e.g. `{0}`).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/14", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/14/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/14/events", "html_url": "https://github.com/kjd/idna/issues/14", "id": 72893963, "node_id": "MDU6SXNzdWU3Mjg5Mzk2Mw==", "number": 14, "title": "TR46 additions do not pass tests (Python 3)", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-05-04T01:19:44Z", "updated_at": "2015-05-18T21:37:07Z", "closed_at": "2015-05-18T21:37:07Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The tests do not pass according to Travis: https://travis-ci.org/kjd/idna/builds/61088615\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/13", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/13/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/13/events", "html_url": "https://github.com/kjd/idna/issues/13", "id": 72893875, "node_id": "MDU6SXNzdWU3Mjg5Mzg3NQ==", "number": 13, "title": "TR46 additions do not pass tests (Python 2)", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-05-04T01:19:25Z", "updated_at": "2015-05-18T21:37:15Z", "closed_at": "2015-05-18T21:37:15Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The tests do not pass according to Travis: https://travis-ci.org/kjd/idna/builds/61088615\n\nPython 2 exception seems to relate to assuming chr() is from Python 3. Mapping it to unichr() for Python 2 partially fixes it, but fails on a narrow Python build.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/12", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/12/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/12/events", "html_url": "https://github.com/kjd/idna/issues/12", "id": 72864749, "node_id": "MDU6SXNzdWU3Mjg2NDc0OQ==", "number": 12, "title": "implement UTS46", "user": {"login": "jribbens", "id": 350846, "node_id": "MDQ6VXNlcjM1MDg0Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/350846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jribbens", "html_url": "https://github.com/jribbens", "followers_url": "https://api.github.com/users/jribbens/followers", "following_url": "https://api.github.com/users/jribbens/following{/other_user}", "gists_url": "https://api.github.com/users/jribbens/gists{/gist_id}", "starred_url": "https://api.github.com/users/jribbens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jribbens/subscriptions", "organizations_url": "https://api.github.com/users/jribbens/orgs", "repos_url": "https://api.github.com/users/jribbens/repos", "events_url": "https://api.github.com/users/jribbens/events{/privacy}", "received_events_url": "https://api.github.com/users/jribbens/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2015-05-03T20:52:59Z", "updated_at": "2015-05-19T00:48:35Z", "closed_at": "2015-05-19T00:48:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have implemented UTS46, please see https://github.com/jribbens/idna\n\nIt passes 100% of the tests in IdnaTest.txt, except 34 which all contain 0x200c or 0x200d. I don't know what the problem is with those tests.\n\nCan you pull this please?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/11", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/11/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/11/events", "html_url": "https://github.com/kjd/idna/issues/11", "id": 72864639, "node_id": "MDU6SXNzdWU3Mjg2NDYzOQ==", "number": 11, "title": "implement checking of overall domain length", "user": {"login": "jribbens", "id": 350846, "node_id": "MDQ6VXNlcjM1MDg0Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/350846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jribbens", "html_url": "https://github.com/jribbens", "followers_url": "https://api.github.com/users/jribbens/followers", "following_url": "https://api.github.com/users/jribbens/following{/other_user}", "gists_url": "https://api.github.com/users/jribbens/gists{/gist_id}", "starred_url": "https://api.github.com/users/jribbens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jribbens/subscriptions", "organizations_url": "https://api.github.com/users/jribbens/orgs", "repos_url": "https://api.github.com/users/jribbens/repos", "events_url": "https://api.github.com/users/jribbens/events{/privacy}", "received_events_url": "https://api.github.com/users/jribbens/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-03T20:51:26Z", "updated_at": "2015-05-04T01:03:03Z", "closed_at": "2015-05-04T01:03:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Please see commit 2afd1a24eb21254f8c29e322a65df8b4a631a4be\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/10", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/10/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/10/events", "html_url": "https://github.com/kjd/idna/issues/10", "id": 72864568, "node_id": "MDU6SXNzdWU3Mjg2NDU2OA==", "number": 10, "title": "broken exception message template", "user": {"login": "jribbens", "id": 350846, "node_id": "MDQ6VXNlcjM1MDg0Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/350846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jribbens", "html_url": "https://github.com/jribbens", "followers_url": "https://api.github.com/users/jribbens/followers", "following_url": "https://api.github.com/users/jribbens/following{/other_user}", "gists_url": "https://api.github.com/users/jribbens/gists{/gist_id}", "starred_url": "https://api.github.com/users/jribbens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jribbens/subscriptions", "organizations_url": "https://api.github.com/users/jribbens/orgs", "repos_url": "https://api.github.com/users/jribbens/repos", "events_url": "https://api.github.com/users/jribbens/events{/privacy}", "received_events_url": "https://api.github.com/users/jribbens/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-03T20:50:55Z", "updated_at": "2015-05-04T01:03:20Z", "closed_at": "2015-05-04T01:03:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Please see commit ac7ea30d211b10953e40e14c6281cbe376f9abfa\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/9", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/9/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/9/events", "html_url": "https://github.com/kjd/idna/issues/9", "id": 71598657, "node_id": "MDU6SXNzdWU3MTU5ODY1Nw==", "number": 9, "title": "Document lowercase before encode?", "user": {"login": "JoshData", "id": 445875, "node_id": "MDQ6VXNlcjQ0NTg3NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/445875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoshData", "html_url": "https://github.com/JoshData", "followers_url": "https://api.github.com/users/JoshData/followers", "following_url": "https://api.github.com/users/JoshData/following{/other_user}", "gists_url": "https://api.github.com/users/JoshData/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoshData/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoshData/subscriptions", "organizations_url": "https://api.github.com/users/JoshData/orgs", "repos_url": "https://api.github.com/users/JoshData/repos", "events_url": "https://api.github.com/users/JoshData/events{/privacy}", "received_events_url": "https://api.github.com/users/JoshData/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-04-28T14:04:33Z", "updated_at": "2015-05-19T12:38:49Z", "closed_at": "2015-05-19T12:38:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nThe change from IDNA 2003 to 2008 (and from Python's built-in codec to the `idna` module) is a bit complicated for application developers. Some documentation about application-level requirements before calling `encode` might be handy, i.e. [RFC 5895](http://www.ietf.org/rfc/rfc5895.txt) section 2. I'm just working through it now so I'm not sure if I understand it all correctly, but I've got:\n\n>  1  Uppercase characters are mapped to their lowercase equivalents by\n>       using the algorithm for mapping case in Unicode characters.  This\n>       step was chosen because the output will behave more like ASCII\n>       host names behave.\n\n```\ndomain = domain.lower()\n```\n\n>   2  Fullwidth and halfwidth characters (those defined with\n>       Decomposition Types < wide > and < narrow >) are mapped to their\n>       decomposition mappings as shown in the Unicode character\n>       database.  This step was chosen because many input mechanisms,\n>       particularly in Asia, do not allow you to easily enter characters\n>       in the form used by IDNA2008.  Even if they do allow the correct\n>       character form, the user might not know which form they are\n>       entering.\n\n```\ndef wide_narrow(c):\n    decomp = unicodedata.decomposition(c)\n    m = re.match('<(?:narrow|wide)> ([A-Z0-9]+)$', decomp)\n    if m:\n        return chr_func(int(m.group(1), 16)) # chr in Py3, unichr in Py2\n    return c\n\ndomain = ''.join(wide_narrow(c) for c in domain)\n```\n\n>   3  All characters are mapped using Unicode Normalization Form C\n>       (NFC).  This step was chosen because it maps combinations of\n>       combining characters into canonical composed form.  As with the\n>       fullwidth/halfwidth mapping, users are not generally aware of the\n>       particular form of characters that they are entering, and\n>       IDNA2008 requires that only the canonical composed forms from NFC\n>       be used.\n\n```\ndomain = unicodedata.normalize(\"NFC\", domain)\n```\n\n>   4  [IDNA2008protocol] is specified such that the protocol acts on\n>       the individual labels of the domain name.  If an implementation\n>       of this mapping is also performing the step of separation of the\n>       parts of a domain name into labels by using the FULL STOP\n>       character (U+002E), the IDEOGRAPHIC FULL STOP character (U+3002)\n>       can be mapped to the FULL STOP before label separation occurs.\n>       There are other characters that are used as \"full stops\" that one\n>       could consider mapping as label separators, but their use as such\n>       has not been investigated thoroughly.  This step was chosen\n>       because some input mechanisms do not allow the user to easily\n>       enter proper label separators.  Only the IDEOGRAPHIC FULL STOP\n>       character (U+3002) is added in this mapping because the authors\n>       have not fully investigated the applicability of other characters\n>       and the environments where they should and should not be\n>       considered domain name label separators.\n\n```\ndomain = domain.replace('\\u3002', '.')\n```\n\n^ Seems to be handled by the `idna` module.\n\nDoes this look right?\n\nStep 2 is a bit awkward so maybe this all can be incorporated into the module?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/8", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/8/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/8/events", "html_url": "https://github.com/kjd/idna/issues/8", "id": 55650200, "node_id": "MDU6SXNzdWU1NTY1MDIwMA==", "number": 8, "title": "Implement IAB Guidance on Unicode 7.0.0", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-01-27T17:45:50Z", "updated_at": "2015-01-27T17:46:26Z", "closed_at": "2015-01-27T17:46:26Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Unicode 7.0.0 introduced support for the ARABIC LETTER BEH WITH HAMZA ABOVE (U+08A1) character which has been seen as controversial in some circles. While discussion continues on whether to amend the IDNA protocol or do some other kind of remediation for this character, IAB has recommended IANA essentially reverse publication of the 7.0.0 dataset on which the IDNA library relies. Therefore the library should revert to the next-to-last most recent data set which is from Unicode 6.3.0.\n\nSee https://www.iab.org/documents/correspondence-reports-documents/2015-2/iab-statement-on-identifiers-and-unicode-7-0-0/ for details.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/7", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/7/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/7/events", "html_url": "https://github.com/kjd/idna/issues/7", "id": 38916775, "node_id": "MDU6SXNzdWUzODkxNjc3NQ==", "number": 7, "title": "Implement Unicode compatibility processing (TR46)", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/2", "html_url": "https://github.com/kjd/idna/milestone/2", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/2/labels", "id": 734474, "node_id": "MDk6TWlsZXN0b25lNzM0NDc0", "number": 2, "title": "v2.0", "description": "Extended features not required by the IDNA specification.", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2014-07-28T18:12:36Z", "updated_at": "2015-05-19T00:42:44Z", "due_on": null, "closed_at": "2015-05-19T00:42:44Z"}, "comments": 1, "created_at": "2014-07-28T18:13:39Z", "updated_at": "2015-05-19T00:42:16Z", "closed_at": "2015-05-19T00:42:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/6", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/6/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/6/events", "html_url": "https://github.com/kjd/idna/issues/6", "id": 38916336, "node_id": "MDU6SXNzdWUzODkxNjMzNg==", "number": 6, "title": "Update Unicode data to 7.0.0", "user": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/kjd/idna/milestones/1", "html_url": "https://github.com/kjd/idna/milestone/1", "labels_url": "https://api.github.com/repos/kjd/idna/milestones/1/labels", "id": 734461, "node_id": "MDk6TWlsZXN0b25lNzM0NDYx", "number": 1, "title": "v1.0", "description": "Feature complete implementation of the IDNA 2008 standard with a comprehensive test suite.", "creator": {"login": "kjd", "id": 34589, "node_id": "MDQ6VXNlcjM0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/34589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjd", "html_url": "https://github.com/kjd", "followers_url": "https://api.github.com/users/kjd/followers", "following_url": "https://api.github.com/users/kjd/following{/other_user}", "gists_url": "https://api.github.com/users/kjd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjd/subscriptions", "organizations_url": "https://api.github.com/users/kjd/orgs", "repos_url": "https://api.github.com/users/kjd/repos", "events_url": "https://api.github.com/users/kjd/events{/privacy}", "received_events_url": "https://api.github.com/users/kjd/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2014-07-28T18:08:00Z", "updated_at": "2015-05-19T00:42:45Z", "due_on": null, "closed_at": "2015-05-19T00:42:45Z"}, "comments": 0, "created_at": "2014-07-28T18:08:50Z", "updated_at": "2014-10-12T18:17:23Z", "closed_at": "2014-10-12T18:17:23Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Regenerate the PVALID/CONTEXTO/CONTEXTJ data based on the Unicode 7 standard that was released recently. This is pending official publication of the 7.0.0 repertoire by IANA, which in turn is likely pending the resolution of the issue described in http://tools.ietf.org/html/draft-klensin-idna-5892upd-unicode70-00\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/5", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/5/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/5/events", "html_url": "https://github.com/kjd/idna/issues/5", "id": 37745870, "node_id": "MDU6SXNzdWUzNzc0NTg3MA==", "number": 5, "title": "Licensing unclear.", "user": {"login": "tomprince", "id": 283816, "node_id": "MDQ6VXNlcjI4MzgxNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/283816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomprince", "html_url": "https://github.com/tomprince", "followers_url": "https://api.github.com/users/tomprince/followers", "following_url": "https://api.github.com/users/tomprince/following{/other_user}", "gists_url": "https://api.github.com/users/tomprince/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomprince/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomprince/subscriptions", "organizations_url": "https://api.github.com/users/tomprince/orgs", "repos_url": "https://api.github.com/users/tomprince/repos", "events_url": "https://api.github.com/users/tomprince/events{/privacy}", "received_events_url": "https://api.github.com/users/tomprince/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251075, "node_id": "MDU6TGFiZWw0MTI1MTA3NQ==", "url": "https://api.github.com/repos/kjd/idna/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-07-13T17:39:30Z", "updated_at": "2014-07-28T18:14:49Z", "closed_at": "2014-07-14T21:35:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The only licensing information is `BSD-like` in `setup.py`.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/kjd/idna/issues/1", "repository_url": "https://api.github.com/repos/kjd/idna", "labels_url": "https://api.github.com/repos/kjd/idna/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/kjd/idna/issues/1/comments", "events_url": "https://api.github.com/repos/kjd/idna/issues/1/events", "html_url": "https://github.com/kjd/idna/issues/1", "id": 25158195, "node_id": "MDU6SXNzdWUyNTE1ODE5NQ==", "number": 1, "title": "Please release an 0.3.1 with correct trove identifiers", "user": {"login": "hynek", "id": 41240, "node_id": "MDQ6VXNlcjQxMjQw", "avatar_url": "https://avatars3.githubusercontent.com/u/41240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hynek", "html_url": "https://github.com/hynek", "followers_url": "https://api.github.com/users/hynek/followers", "following_url": "https://api.github.com/users/hynek/following{/other_user}", "gists_url": "https://api.github.com/users/hynek/gists{/gist_id}", "starred_url": "https://api.github.com/users/hynek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hynek/subscriptions", "organizations_url": "https://api.github.com/users/hynek/orgs", "repos_url": "https://api.github.com/users/hynek/repos", "events_url": "https://api.github.com/users/hynek/events{/privacy}", "received_events_url": "https://api.github.com/users/hynek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41251073, "node_id": "MDU6TGFiZWw0MTI1MTA3Mw==", "url": "https://api.github.com/repos/kjd/idna/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-01-07T10:21:40Z", "updated_at": "2014-07-28T18:14:28Z", "closed_at": "2014-01-07T17:37:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\n\nI just happily discovered that idna _has_ already been ported to Python 3! Would you mind to release a 0.3.1 so people can see it on PyPI too?\n\nThanks!\n", "performed_via_github_app": null, "score": 1.0}]}