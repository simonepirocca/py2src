{"total_count": 252, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/mozilla/bleach/issues/545", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/545/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/545/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/545/events", "html_url": "https://github.com/mozilla/bleach/issues/545", "id": 677732964, "node_id": "MDU6SXNzdWU2Nzc3MzI5NjQ=", "number": 545, "title": "Test failures in Python 3.9 due to change in urlparse behavior", "user": {"login": "tirkarthi", "id": 3972343, "node_id": "MDQ6VXNlcjM5NzIzNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/3972343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tirkarthi", "html_url": "https://github.com/tirkarthi", "followers_url": "https://api.github.com/users/tirkarthi/followers", "following_url": "https://api.github.com/users/tirkarthi/following{/other_user}", "gists_url": "https://api.github.com/users/tirkarthi/gists{/gist_id}", "starred_url": "https://api.github.com/users/tirkarthi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tirkarthi/subscriptions", "organizations_url": "https://api.github.com/users/tirkarthi/orgs", "repos_url": "https://api.github.com/users/tirkarthi/repos", "events_url": "https://api.github.com/users/tirkarthi/events{/privacy}", "received_events_url": "https://api.github.com/users/tirkarthi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-12T14:21:34Z", "updated_at": "2020-08-12T14:24:12Z", "closed_at": "2020-08-12T14:24:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "With respect to https://bugs.python.org/issue27657, in Python 3.9 and above there is below change in behavior for urlparse. This causes test case failures in Python 3.9\r\n\r\n```\r\npython3.8                     \r\nPython 3.8.0 (default, Oct 28 2019, 16:14:01) \r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from urllib.parse import urlparse\r\n>>> urlparse(\"example.com:8000\")\r\nParseResult(scheme='', netloc='', path='example.com:8000', params='', query='', fragment='')\r\n\r\n\u2717 python3.9                     \r\nPython 3.9.0b5 (default, Jul 20 2020, 20:46:56) \r\n[GCC 7.5.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from urllib.parse import urlparse\r\n>>> urlparse(\"example.com:8000\")\r\nParseResult(scheme='example.com', netloc='', path='8000', params='', query='', fragment='')\r\n```\r\n\r\n\r\n```\r\n=============================================================================== FAILURES ===============================================================================\r\n______________ tests/test_clean.py::test_uri_value_allowed_protocols[<a href=\"example::com:8000\">valid</a>-kwargs6-<a href=\"example::com:8000\">valid</a>] ______________\r\n\r\ndata = '<a href=\"example.com:8000\">valid</a>', kwargs = {'protocols': ['http']}, expected = '<a href=\"example.com:8000\">valid</a>'\r\n\r\n    @pytest.mark.parametrize('data, kwargs, expected', [\r\n        # javascript: is not allowed by default\r\n        (\r\n            '<a href=\"javascript:alert(\\'XSS\\')\">xss</a>',\r\n            {},\r\n            '<a>xss</a>'\r\n        ),\r\n    \r\n        # File protocol is not allowed by default\r\n        (\r\n            '<a href=\"file:///tmp/foo\">foo</a>',\r\n            {},\r\n            '<a>foo</a>'\r\n        ),\r\n    \r\n        # Specified protocols are allowed\r\n        (\r\n            '<a href=\"myprotocol://more_text\">allowed href</a>',\r\n            {'protocols': ['myprotocol']},\r\n            '<a href=\"myprotocol://more_text\">allowed href</a>'\r\n        ),\r\n    \r\n        # Unspecified protocols are not allowed\r\n        (\r\n            '<a href=\"http://example.com\">invalid href</a>',\r\n            {'protocols': ['myprotocol']},\r\n            '<a>invalid href</a>'\r\n        ),\r\n    \r\n        # Anchors are ok\r\n        (\r\n            '<a href=\"#example.com\">foo</a>',\r\n            {'protocols': []},\r\n            '<a href=\"#example.com\">foo</a>'\r\n        ),\r\n    \r\n        # Allow implicit http if allowed\r\n        (\r\n            '<a href=\"example.com\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"example.com\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"example.com:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"example.com:8000\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"localhost\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"localhost:8000\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"192.168.100.100\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"192.168.100.100:8000\">valid</a>'\r\n        ),\r\n    \r\n        # Disallow implicit http if disallowed\r\n        (\r\n            '<a href=\"example.com\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"example.com:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n    \r\n        # Disallowed protocols with sneaky character entities\r\n        (\r\n            '<a href=\"javas&#x09;cript:alert(1)\">alert</a>',\r\n            {},\r\n            '<a>alert</a>'\r\n        ),\r\n        (\r\n            '<a href=\"&#14;javascript:alert(1)\">alert</a>',\r\n            {},\r\n            '<a>alert</a>'\r\n        ),\r\n    \r\n        # Checking the uri should change it at all\r\n        (\r\n            '<a href=\"http://example.com/?foo&nbsp;bar\">foo</a>',\r\n            {},\r\n            '<a href=\"http://example.com/?foo&nbsp;bar\">foo</a>'\r\n        ),\r\n    ])\r\n    def test_uri_value_allowed_protocols(data, kwargs, expected):\r\n>       assert clean(data, **kwargs) == expected\r\nE       assert '<a>valid</a>' == '<a href=\"example.com:8000\">valid</a>'\r\nE         - <a href=\"example.com:8000\">valid</a>\r\nE         + <a>valid</a>\r\n\r\ntests/test_clean.py:678: AssertionError\r\n_________________ tests/test_clean.py::test_uri_value_allowed_protocols[<a href=\"localhost:8000\">valid</a>-kwargs8-<a href=\"localhost:8000\">valid</a>] _________________\r\n\r\ndata = '<a href=\"localhost:8000\">valid</a>', kwargs = {'protocols': ['http']}, expected = '<a href=\"localhost:8000\">valid</a>'\r\n\r\n    @pytest.mark.parametrize('data, kwargs, expected', [\r\n        # javascript: is not allowed by default\r\n        (\r\n            '<a href=\"javascript:alert(\\'XSS\\')\">xss</a>',\r\n            {},\r\n            '<a>xss</a>'\r\n        ),\r\n    \r\n        # File protocol is not allowed by default\r\n        (\r\n            '<a href=\"file:///tmp/foo\">foo</a>',\r\n            {},\r\n            '<a>foo</a>'\r\n        ),\r\n    \r\n        # Specified protocols are allowed\r\n        (\r\n            '<a href=\"myprotocol://more_text\">allowed href</a>',\r\n            {'protocols': ['myprotocol']},\r\n            '<a href=\"myprotocol://more_text\">allowed href</a>'\r\n        ),\r\n    \r\n        # Unspecified protocols are not allowed\r\n        (\r\n            '<a href=\"http://example.com\">invalid href</a>',\r\n            {'protocols': ['myprotocol']},\r\n            '<a>invalid href</a>'\r\n        ),\r\n    \r\n        # Anchors are ok\r\n        (\r\n            '<a href=\"#example.com\">foo</a>',\r\n            {'protocols': []},\r\n            '<a href=\"#example.com\">foo</a>'\r\n        ),\r\n    \r\n        # Allow implicit http if allowed\r\n        (\r\n            '<a href=\"example.com\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"example.com\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"example.com:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"example.com:8000\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"localhost\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"localhost:8000\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"192.168.100.100\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"192.168.100.100:8000\">valid</a>'\r\n        ),\r\n    \r\n        # Disallow implicit http if disallowed\r\n        (\r\n            '<a href=\"example.com\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"example.com:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n    \r\n        # Disallowed protocols with sneaky character entities\r\n        (\r\n            '<a href=\"javas&#x09;cript:alert(1)\">alert</a>',\r\n            {},\r\n            '<a>alert</a>'\r\n        ),\r\n        (\r\n            '<a href=\"&#14;javascript:alert(1)\">alert</a>',\r\n            {},\r\n            '<a>alert</a>'\r\n        ),\r\n    \r\n        # Checking the uri should change it at all\r\n        (\r\n            '<a href=\"http://example.com/?foo&nbsp;bar\">foo</a>',\r\n            {},\r\n            '<a href=\"http://example.com/?foo&nbsp;bar\">foo</a>'\r\n        ),\r\n    ])\r\n    def test_uri_value_allowed_protocols(data, kwargs, expected):\r\n>       assert clean(data, **kwargs) == expected\r\nE       assert '<a>valid</a>' == '<a href=\"localhost:8000\">valid</a>'\r\nE         - <a href=\"localhost:8000\">valid</a>\r\nE         + <a>valid</a>\r\n\r\ntests/test_clean.py:678: AssertionError\r\n_______ tests/test_clean.py::test_uri_value_allowed_protocols[<a href=\"192::168::100::100:8000\">valid</a>-kwargs10-<a href=\"192::168::100::100:8000\">valid</a>] ________\r\n\r\ndata = '<a href=\"192.168.100.100:8000\">valid</a>', kwargs = {'protocols': ['http']}, expected = '<a href=\"192.168.100.100:8000\">valid</a>'\r\n\r\n    @pytest.mark.parametrize('data, kwargs, expected', [\r\n        # javascript: is not allowed by default\r\n        (\r\n            '<a href=\"javascript:alert(\\'XSS\\')\">xss</a>',\r\n            {},\r\n            '<a>xss</a>'\r\n        ),\r\n    \r\n        # File protocol is not allowed by default\r\n        (\r\n            '<a href=\"file:///tmp/foo\">foo</a>',\r\n            {},\r\n            '<a>foo</a>'\r\n        ),\r\n    \r\n        # Specified protocols are allowed\r\n        (\r\n            '<a href=\"myprotocol://more_text\">allowed href</a>',\r\n            {'protocols': ['myprotocol']},\r\n            '<a href=\"myprotocol://more_text\">allowed href</a>'\r\n        ),\r\n    \r\n        # Unspecified protocols are not allowed\r\n        (\r\n            '<a href=\"http://example.com\">invalid href</a>',\r\n            {'protocols': ['myprotocol']},\r\n            '<a>invalid href</a>'\r\n        ),\r\n    \r\n        # Anchors are ok\r\n        (\r\n            '<a href=\"#example.com\">foo</a>',\r\n            {'protocols': []},\r\n            '<a href=\"#example.com\">foo</a>'\r\n        ),\r\n    \r\n        # Allow implicit http if allowed\r\n        (\r\n            '<a href=\"example.com\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"example.com\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"example.com:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"example.com:8000\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"localhost\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"localhost:8000\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"192.168.100.100\">valid</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100:8000\">valid</a>',\r\n            {'protocols': ['http']},\r\n            '<a href=\"192.168.100.100:8000\">valid</a>'\r\n        ),\r\n    \r\n        # Disallow implicit http if disallowed\r\n        (\r\n            '<a href=\"example.com\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"example.com:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"localhost:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n        (\r\n            '<a href=\"192.168.100.100:8000\">foo</a>',\r\n            {'protocols': []},\r\n            '<a>foo</a>'\r\n        ),\r\n    \r\n        # Disallowed protocols with sneaky character entities\r\n        (\r\n            '<a href=\"javas&#x09;cript:alert(1)\">alert</a>',\r\n            {},\r\n            '<a>alert</a>'\r\n        ),\r\n        (\r\n            '<a href=\"&#14;javascript:alert(1)\">alert</a>',\r\n            {},\r\n            '<a>alert</a>'\r\n        ),\r\n    \r\n        # Checking the uri should change it at all\r\n        (\r\n            '<a href=\"http://example.com/?foo&nbsp;bar\">foo</a>',\r\n            {},\r\n            '<a href=\"http://example.com/?foo&nbsp;bar\">foo</a>'\r\n        ),\r\n    ])\r\n    def test_uri_value_allowed_protocols(data, kwargs, expected):\r\n>       assert clean(data, **kwargs) == expected\r\nE       assert '<a>valid</a>' == '<a href=\"192.168.100.100:8000\">valid</a>'\r\nE         - <a href=\"192.168.100.100:8000\">valid</a>\r\nE         + <a>valid</a>\r\n\r\ntests/test_clean.py:678: AssertionError\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/537", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/537/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/537/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/537/events", "html_url": "https://github.com/mozilla/bleach/issues/537", "id": 626735368, "node_id": "MDU6SXNzdWU2MjY3MzUzNjg=", "number": 537, "title": "Support Cleaner.validate (verify, etc.)", "user": {"login": "DylanYoung", "id": 5795220, "node_id": "MDQ6VXNlcjU3OTUyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/5795220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DylanYoung", "html_url": "https://github.com/DylanYoung", "followers_url": "https://api.github.com/users/DylanYoung/followers", "following_url": "https://api.github.com/users/DylanYoung/following{/other_user}", "gists_url": "https://api.github.com/users/DylanYoung/gists{/gist_id}", "starred_url": "https://api.github.com/users/DylanYoung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DylanYoung/subscriptions", "organizations_url": "https://api.github.com/users/DylanYoung/orgs", "repos_url": "https://api.github.com/users/DylanYoung/repos", "events_url": "https://api.github.com/users/DylanYoung/events{/privacy}", "received_events_url": "https://api.github.com/users/DylanYoung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-28T18:53:23Z", "updated_at": "2020-06-19T19:19:30Z", "closed_at": "2020-06-19T19:11:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Enhancement:\r\n\r\nWe want to reject dirty input rather than cleaning it.  It seems painful to accomplish this by subclassing cleaner.\r\n\r\nCurious if this could be either built-in or a hook added \"on_content_change\" that would be called whenever the content is changed from the original value due to bleach rules (this probably isn't the best approach as it would slow down the other uses of bleach, maybe `on_first_change`, though I think it would be better to build this in).\r\n\r\nHappy to look into a patch if you're amenable :) ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/534", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/534/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/534/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/534/events", "html_url": "https://github.com/mozilla/bleach/issues/534", "id": 617686407, "node_id": "MDU6SXNzdWU2MTc2ODY0MDc=", "number": 534, "title": "Patch for sanitizer.py needs to also be applied to _vendor/html5lib/filters/sanitizer.py", "user": {"login": "brosenfi", "id": 28020181, "node_id": "MDQ6VXNlcjI4MDIwMTgx", "avatar_url": "https://avatars1.githubusercontent.com/u/28020181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brosenfi", "html_url": "https://github.com/brosenfi", "followers_url": "https://api.github.com/users/brosenfi/followers", "following_url": "https://api.github.com/users/brosenfi/following{/other_user}", "gists_url": "https://api.github.com/users/brosenfi/gists{/gist_id}", "starred_url": "https://api.github.com/users/brosenfi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brosenfi/subscriptions", "organizations_url": "https://api.github.com/users/brosenfi/orgs", "repos_url": "https://api.github.com/users/brosenfi/repos", "events_url": "https://api.github.com/users/brosenfi/events{/privacy}", "received_events_url": "https://api.github.com/users/brosenfi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-13T19:08:22Z", "updated_at": "2020-05-26T04:19:51Z", "closed_at": "2020-05-26T04:19:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "A patch was applied to fix CVE-2020-6817 with commit d6018f2539d271963c3e7f54f36ef11900363c69 - however this same vulnerable regex has been identified as also occurring in bleach/_vendor/html5lib/filters/sanitizer.py (by a Sonatype \"security research team\" - it's in one of their advisory deviation notices).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/528", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/528/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/528/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/528/events", "html_url": "https://github.com/mozilla/bleach/issues/528", "id": 590552788, "node_id": "MDU6SXNzdWU1OTA1NTI3ODg=", "number": 528, "title": "version <3.1.4 vulnerarble to Ubuntu Debian?", "user": {"login": "Apoorve73", "id": 55204045, "node_id": "MDQ6VXNlcjU1MjA0MDQ1", "avatar_url": "https://avatars3.githubusercontent.com/u/55204045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Apoorve73", "html_url": "https://github.com/Apoorve73", "followers_url": "https://api.github.com/users/Apoorve73/followers", "following_url": "https://api.github.com/users/Apoorve73/following{/other_user}", "gists_url": "https://api.github.com/users/Apoorve73/gists{/gist_id}", "starred_url": "https://api.github.com/users/Apoorve73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Apoorve73/subscriptions", "organizations_url": "https://api.github.com/users/Apoorve73/orgs", "repos_url": "https://api.github.com/users/Apoorve73/repos", "events_url": "https://api.github.com/users/Apoorve73/events{/privacy}", "received_events_url": "https://api.github.com/users/Apoorve73/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-30T19:57:54Z", "updated_at": "2020-03-31T15:10:13Z", "closed_at": "2020-03-31T14:42:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/527", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/527/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/527/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/527/events", "html_url": "https://github.com/mozilla/bleach/issues/527", "id": 589116461, "node_id": "MDU6SXNzdWU1ODkxMTY0NjE=", "number": 527, "title": "Request CVE for ReDoS fixed in 3.1.4?", "user": {"login": "hartwork", "id": 1577132, "node_id": "MDQ6VXNlcjE1NzcxMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1577132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartwork", "html_url": "https://github.com/hartwork", "followers_url": "https://api.github.com/users/hartwork/followers", "following_url": "https://api.github.com/users/hartwork/following{/other_user}", "gists_url": "https://api.github.com/users/hartwork/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartwork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartwork/subscriptions", "organizations_url": "https://api.github.com/users/hartwork/orgs", "repos_url": "https://api.github.com/users/hartwork/repos", "events_url": "https://api.github.com/users/hartwork/events{/privacy}", "received_events_url": "https://api.github.com/users/hartwork/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37900, "node_id": "MDU6TGFiZWwzNzkwMA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/security", "name": "security", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-27T12:59:04Z", "updated_at": "2020-03-30T19:42:28Z", "closed_at": "2020-03-30T19:39:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nThe [ReDoS](https://en.wikipedia.org/wiki/ReDoS) fixed in 3.1.4 does not seem to have a CVE. Have you considered requesting a CVE for this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/519", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/519/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/519/events", "html_url": "https://github.com/mozilla/bleach/issues/519", "id": 578904229, "node_id": "MDU6SXNzdWU1Nzg5MDQyMjk=", "number": 519, "title": "TLDS are not up to date", "user": {"login": "livid", "id": 11427, "node_id": "MDQ6VXNlcjExNDI3", "avatar_url": "https://avatars3.githubusercontent.com/u/11427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/livid", "html_url": "https://github.com/livid", "followers_url": "https://api.github.com/users/livid/followers", "following_url": "https://api.github.com/users/livid/following{/other_user}", "gists_url": "https://api.github.com/users/livid/gists{/gist_id}", "starred_url": "https://api.github.com/users/livid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/livid/subscriptions", "organizations_url": "https://api.github.com/users/livid/orgs", "repos_url": "https://api.github.com/users/livid/repos", "events_url": "https://api.github.com/users/livid/events{/privacy}", "received_events_url": "https://api.github.com/users/livid/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-10T22:45:19Z", "updated_at": "2020-03-18T14:25:03Z", "closed_at": "2020-03-18T14:25:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/mozilla/bleach/blob/e0ad450828832e9548d256f0938823a366337368/bleach/linkifier.py#L14\r\n\r\nCurrently, all the supported TLDs are defined as a global in linkifier.py, while IANA has a much longer list here:\r\n\r\nhttps://data.iana.org/TLD/tlds-alpha-by-domain.txt\r\n\r\nThus some new and popular TLDs cannot be recognized now, for example, .live .rocks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/517", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/517/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/517/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/517/events", "html_url": "https://github.com/mozilla/bleach/issues/517", "id": 568231715, "node_id": "MDU6SXNzdWU1NjgyMzE3MTU=", "number": 517, "title": "Upload Py2/Py3 wheel packages to PyPI for v3.1.1", "user": {"login": "atodorov", "id": 1002300, "node_id": "MDQ6VXNlcjEwMDIzMDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1002300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atodorov", "html_url": "https://github.com/atodorov", "followers_url": "https://api.github.com/users/atodorov/followers", "following_url": "https://api.github.com/users/atodorov/following{/other_user}", "gists_url": "https://api.github.com/users/atodorov/gists{/gist_id}", "starred_url": "https://api.github.com/users/atodorov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atodorov/subscriptions", "organizations_url": "https://api.github.com/users/atodorov/orgs", "repos_url": "https://api.github.com/users/atodorov/repos", "events_url": "https://api.github.com/users/atodorov/events{/privacy}", "received_events_url": "https://api.github.com/users/atodorov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T11:23:22Z", "updated_at": "2020-02-21T20:35:13Z", "closed_at": "2020-02-20T19:07:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Previous version was shipping wheel packages, please upload them fr the new 3.1.1 version as well.\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/504", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/504/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/504/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/504/events", "html_url": "https://github.com/mozilla/bleach/issues/504", "id": 541301445, "node_id": "MDU6SXNzdWU1NDEzMDE0NDU=", "number": 504, "title": "Fix simple typo: curren -> current", "user": {"login": "timgates42", "id": 47873678, "node_id": "MDQ6VXNlcjQ3ODczNjc4", "avatar_url": "https://avatars1.githubusercontent.com/u/47873678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timgates42", "html_url": "https://github.com/timgates42", "followers_url": "https://api.github.com/users/timgates42/followers", "following_url": "https://api.github.com/users/timgates42/following{/other_user}", "gists_url": "https://api.github.com/users/timgates42/gists{/gist_id}", "starred_url": "https://api.github.com/users/timgates42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timgates42/subscriptions", "organizations_url": "https://api.github.com/users/timgates42/orgs", "repos_url": "https://api.github.com/users/timgates42/repos", "events_url": "https://api.github.com/users/timgates42/events{/privacy}", "received_events_url": "https://api.github.com/users/timgates42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-21T08:32:56Z", "updated_at": "2019-12-23T15:00:22Z", "closed_at": "2019-12-23T15:00:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There is a small typo in tests/test_clean.py.\nShould read `current` rather than `curren`.\n\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/503", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/503/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/503/events", "html_url": "https://github.com/mozilla/bleach/issues/503", "id": 540967772, "node_id": "MDU6SXNzdWU1NDA5Njc3NzI=", "number": 503, "title": "Test suite fails with Python 3.8.1", "user": {"login": "Ma27", "id": 6025220, "node_id": "MDQ6VXNlcjYwMjUyMjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6025220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ma27", "html_url": "https://github.com/Ma27", "followers_url": "https://api.github.com/users/Ma27/followers", "following_url": "https://api.github.com/users/Ma27/following{/other_user}", "gists_url": "https://api.github.com/users/Ma27/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ma27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ma27/subscriptions", "organizations_url": "https://api.github.com/users/Ma27/orgs", "repos_url": "https://api.github.com/users/Ma27/repos", "events_url": "https://api.github.com/users/Ma27/events{/privacy}", "received_events_url": "https://api.github.com/users/Ma27/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-20T12:18:42Z", "updated_at": "2020-04-16T22:03:37Z", "closed_at": "2020-04-16T22:03:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "This happens since `urllib.parse` parses URLs like `path:80` as `scheme=path,path=80` (https://bugs.python.org/issue27657).\r\n\r\nWhich causes errors like this:\r\n\r\n```\r\ndef test_uri_value_allowed_protocols(data, kwargs, expected):\r\n>       assert clean(data, **kwargs) == expected\r\nE       assert '<a>valid</a>' == '<a href=\"192...00\">valid</a>'\r\nE         - <a>valid</a>\r\nE         + <a href=\"192.168.100.100:8000\">valid</a>\r\n\r\ntests/test_clean.py:676: AssertionError\r\n```\r\n\r\nCurrently preparing a patch for this :) ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/482", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/482/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/482/events", "html_url": "https://github.com/mozilla/bleach/issues/482", "id": 501505990, "node_id": "MDU6SXNzdWU1MDE1MDU5OTA=", "number": 482, "title": "remove IRC notes", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-02T13:56:03Z", "updated_at": "2019-11-11T16:36:25Z", "closed_at": "2019-11-11T16:36:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Mozilla's IRC instance is going away in a few months (I think that's the plan--it's definitely soon whatever it is). Given that #bleach is on irc.mozilla.org, we need to update the IRC notes.\r\n\r\nI think the options are:\r\n\r\n1. move #bleach to irc.freenode.net or some other IRC server, or\r\n2. remove them altogether\r\n\r\nThere hasn't been much conversation on IRC in the last year, so it's probably the case that we're done with that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/480", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/480/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/480/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/480/events", "html_url": "https://github.com/mozilla/bleach/issues/480", "id": 494586922, "node_id": "MDU6SXNzdWU0OTQ1ODY5MjI=", "number": 480, "title": "Bleach cleaning allowed tags", "user": {"login": "deltaGPhys", "id": 1823385, "node_id": "MDQ6VXNlcjE4MjMzODU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1823385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deltaGPhys", "html_url": "https://github.com/deltaGPhys", "followers_url": "https://api.github.com/users/deltaGPhys/followers", "following_url": "https://api.github.com/users/deltaGPhys/following{/other_user}", "gists_url": "https://api.github.com/users/deltaGPhys/gists{/gist_id}", "starred_url": "https://api.github.com/users/deltaGPhys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deltaGPhys/subscriptions", "organizations_url": "https://api.github.com/users/deltaGPhys/orgs", "repos_url": "https://api.github.com/users/deltaGPhys/repos", "events_url": "https://api.github.com/users/deltaGPhys/events{/privacy}", "received_events_url": "https://api.github.com/users/deltaGPhys/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-09-17T12:16:34Z", "updated_at": "2019-09-25T17:05:44Z", "closed_at": "2019-09-25T17:05:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've set, in `settings.py`:\r\n```\r\nbleach.sanitizer.ALLOWED_TAGS = ['p','br','b','u','ul','li','font']\r\nbleach.sanitizer.ALLOWED_ATTRIBUTES = {'font':['size']}\r\n```\r\n\r\n\r\nWhen I use it to clean up form input, as below, it uses the default list (in particular, removing `<font>` and `<br>`) of allowed tags, even though the last line correctly outputs the list above. Yes, I know that there's a bleach input field; I'm trying not to change my models.\r\n```\r\nif form.is_valid():\r\n                form.save()\r\n                this_standard.Description = bleach.clean(this_standard.Description)\r\n                this_standard.save()\r\n                print bleach.sanitizer.ALLOWED_TAGS\r\n```\r\nIf I manually pass the variables, it works:\r\n```\r\nthis_standard.Description = bleach.clean(this_standard.Description,tags=bleach.sanitizer.ALLOWED_TAGS, attributes=bleach.sanitizer.ALLOWED_ATTRIBUTES)\r\n                \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/479", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/479/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/479/events", "html_url": "https://github.com/mozilla/bleach/issues/479", "id": 493324324, "node_id": "MDU6SXNzdWU0OTMzMjQzMjQ=", "number": 479, "title": "add a SECURITY.md file", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-13T13:25:00Z", "updated_at": "2019-12-03T22:23:19Z", "closed_at": "2019-12-03T22:23:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Bleach has a responsible disclosure policy. GitHub supports a `SECURITY.md` file in the repository which shows that off. More details here:\r\n\r\nhttps://help.github.com/en/articles/adding-a-security-policy-to-your-repository\r\n\r\nI don't know what other systems will look for that file, but it's probably a good idea to add it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/475", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/475/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/475/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/475/events", "html_url": "https://github.com/mozilla/bleach/issues/475", "id": 489958372, "node_id": "MDU6SXNzdWU0ODk5NTgzNzI=", "number": 475, "title": "support pytest 5", "user": {"login": "g-k", "id": 226605, "node_id": "MDQ6VXNlcjIyNjYwNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/226605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g-k", "html_url": "https://github.com/g-k", "followers_url": "https://api.github.com/users/g-k/followers", "following_url": "https://api.github.com/users/g-k/following{/other_user}", "gists_url": "https://api.github.com/users/g-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/g-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g-k/subscriptions", "organizations_url": "https://api.github.com/users/g-k/orgs", "repos_url": "https://api.github.com/users/g-k/repos", "events_url": "https://api.github.com/users/g-k/events{/privacy}", "received_events_url": "https://api.github.com/users/g-k/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-05T19:34:39Z", "updated_at": "2019-12-03T18:45:37Z", "closed_at": "2019-12-03T18:45:37Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "per #474 and the removals section in\r\nhttps://docs.pytest.org/en/latest/changelog.html#pytest-5-0-0-2019-06-28:\r\n\r\n> #5412: ExceptionInfo objects (returned by pytest.raises) now have the same str representation as repr, which avoids some confusion when users use print(e) to inspect the object.\r\n>\r\n> This means code like:\r\n>\r\n> with pytest.raises(SomeException) as e:\r\n>     ...\r\n> assert \"some message\" in str(e)\r\n>\r\n> Needs to be changed to:\r\n>\r\n> with pytest.raises(SomeException) as e:\r\n>     ...\r\n> assert \"some message\" in str(e.value)\r\n\r\nDoing that gets tests passing for 3.6 and 3.7, but breaks Python 2.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/472", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/472/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/472/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/472/events", "html_url": "https://github.com/mozilla/bleach/issues/472", "id": 489895117, "node_id": "MDU6SXNzdWU0ODk4OTUxMTc=", "number": 472, "title": "add example using linkify with custom TLDs to docs", "user": {"login": "g-k", "id": 226605, "node_id": "MDQ6VXNlcjIyNjYwNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/226605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g-k", "html_url": "https://github.com/g-k", "followers_url": "https://api.github.com/users/g-k/followers", "following_url": "https://api.github.com/users/g-k/following{/other_user}", "gists_url": "https://api.github.com/users/g-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/g-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g-k/subscriptions", "organizations_url": "https://api.github.com/users/g-k/orgs", "repos_url": "https://api.github.com/users/g-k/repos", "events_url": "https://api.github.com/users/g-k/events{/privacy}", "received_events_url": "https://api.github.com/users/g-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 8314248, "node_id": "MDU6TGFiZWw4MzE0MjQ4", "url": "https://api.github.com/repos/mozilla/bleach/labels/docs", "name": "docs", "color": "0b02e1", "default": false, "description": null}, {"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "g-k", "id": 226605, "node_id": "MDQ6VXNlcjIyNjYwNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/226605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g-k", "html_url": "https://github.com/g-k", "followers_url": "https://api.github.com/users/g-k/followers", "following_url": "https://api.github.com/users/g-k/following{/other_user}", "gists_url": "https://api.github.com/users/g-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/g-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g-k/subscriptions", "organizations_url": "https://api.github.com/users/g-k/orgs", "repos_url": "https://api.github.com/users/g-k/repos", "events_url": "https://api.github.com/users/g-k/events{/privacy}", "received_events_url": "https://api.github.com/users/g-k/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "g-k", "id": 226605, "node_id": "MDQ6VXNlcjIyNjYwNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/226605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g-k", "html_url": "https://github.com/g-k", "followers_url": "https://api.github.com/users/g-k/followers", "following_url": "https://api.github.com/users/g-k/following{/other_user}", "gists_url": "https://api.github.com/users/g-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/g-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g-k/subscriptions", "organizations_url": "https://api.github.com/users/g-k/orgs", "repos_url": "https://api.github.com/users/g-k/repos", "events_url": "https://api.github.com/users/g-k/events{/privacy}", "received_events_url": "https://api.github.com/users/g-k/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-09-05T17:14:04Z", "updated_at": "2019-09-25T12:58:51Z", "closed_at": "2019-09-25T12:58:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "refs: #462 #223 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/467", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/467/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/467/events", "html_url": "https://github.com/mozilla/bleach/issues/467", "id": 481970237, "node_id": "MDU6SXNzdWU0ODE5NzAyMzc=", "number": 467, "title": "Test failure with pytest 5+", "user": {"login": "FRidh", "id": 2129135, "node_id": "MDQ6VXNlcjIxMjkxMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2129135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FRidh", "html_url": "https://github.com/FRidh", "followers_url": "https://api.github.com/users/FRidh/followers", "following_url": "https://api.github.com/users/FRidh/following{/other_user}", "gists_url": "https://api.github.com/users/FRidh/gists{/gist_id}", "starred_url": "https://api.github.com/users/FRidh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FRidh/subscriptions", "organizations_url": "https://api.github.com/users/FRidh/orgs", "repos_url": "https://api.github.com/users/FRidh/repos", "events_url": "https://api.github.com/users/FRidh/events{/privacy}", "received_events_url": "https://api.github.com/users/FRidh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-18T08:52:26Z", "updated_at": "2019-09-05T19:24:34Z", "closed_at": "2019-09-05T19:24:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.7.4, pytest-5.1.0, py-1.8.0, pluggy-0.12.0\r\nrootdir: /build/bleach-3.1.0\r\ncollected 311 items\r\n\r\ntests/test_callbacks.py ..........                                       [  3%]\r\ntests/test_clean.py .F.................................................. [ 19%]\r\n........................................................................ [ 43%]\r\n......................                                                   [ 50%]\r\ntests/test_css.py ........................                               [ 57%]\r\ntests/test_html5lib_shim.py ...................                          [ 63%]\r\ntests/test_linkify.py .................................................. [ 80%]\r\n..................................................                       [ 96%]\r\ntests/test_unicode.py .........                                          [ 99%]\r\ntests/test_utils.py ...                                                  [100%]\r\n\r\n=================================== FAILURES ===================================\r\n__________________________ test_only_text_is_cleaned ___________________________\r\n\r\n    def test_only_text_is_cleaned():\r\n        some_text = 'text'\r\n        some_type = int\r\n        no_type = None\r\n    \r\n        assert clean(some_text) == some_text\r\n    \r\n        with pytest.raises(TypeError) as e:\r\n            clean(some_type)\r\n>       assert \"argument cannot be of 'type' type\" in str(e)\r\nE       assert \"argument cannot be of 'type' type\" in '<ExceptionInfo TypeError tblen=3>'\r\nE        +  where '<ExceptionInfo TypeError tblen=3>' = str(<ExceptionInfo TypeError tblen=3>)\r\n\r\ntests/test_clean.py:25: AssertionError\r\n=============================== warnings summary ===============================\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/462", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/462/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/462/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/462/events", "html_url": "https://github.com/mozilla/bleach/issues/462", "id": 474017073, "node_id": "MDU6SXNzdWU0NzQwMTcwNzM=", "number": 462, "title": ".link domain not supported", "user": {"login": "savitha-suresh", "id": 19798961, "node_id": "MDQ6VXNlcjE5Nzk4OTYx", "avatar_url": "https://avatars3.githubusercontent.com/u/19798961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/savitha-suresh", "html_url": "https://github.com/savitha-suresh", "followers_url": "https://api.github.com/users/savitha-suresh/followers", "following_url": "https://api.github.com/users/savitha-suresh/following{/other_user}", "gists_url": "https://api.github.com/users/savitha-suresh/gists{/gist_id}", "starred_url": "https://api.github.com/users/savitha-suresh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/savitha-suresh/subscriptions", "organizations_url": "https://api.github.com/users/savitha-suresh/orgs", "repos_url": "https://api.github.com/users/savitha-suresh/repos", "events_url": "https://api.github.com/users/savitha-suresh/events{/privacy}", "received_events_url": "https://api.github.com/users/savitha-suresh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-29T12:13:56Z", "updated_at": "2019-09-05T17:12:13Z", "closed_at": "2019-09-05T17:12:13Z", "author_association": "NONE", "active_lock_reason": null, "body": ">>bleach.linkify('Test - http://uol.page.link/osAr1')\r\n>>u'Test - http://uol.page.link/osAr1'\r\nlinks with .link domain not recognized", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/459", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/459/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/459/events", "html_url": "https://github.com/mozilla/bleach/issues/459", "id": 467096707, "node_id": "MDU6SXNzdWU0NjcwOTY3MDc=", "number": 459, "title": "test error on py 3.6, 3.7 with pytest 5", "user": {"login": "jvanasco", "id": 204779, "node_id": "MDQ6VXNlcjIwNDc3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/204779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvanasco", "html_url": "https://github.com/jvanasco", "followers_url": "https://api.github.com/users/jvanasco/followers", "following_url": "https://api.github.com/users/jvanasco/following{/other_user}", "gists_url": "https://api.github.com/users/jvanasco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvanasco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvanasco/subscriptions", "organizations_url": "https://api.github.com/users/jvanasco/orgs", "repos_url": "https://api.github.com/users/jvanasco/repos", "events_url": "https://api.github.com/users/jvanasco/events{/privacy}", "received_events_url": "https://api.github.com/users/jvanasco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-11T20:42:16Z", "updated_at": "2019-12-03T18:45:37Z", "closed_at": "2019-12-03T18:45:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "i'm getting the following test error on py 3.6; I thought it was my branch - but I retested it with a fresh install of the current master.  this passes on py2.7; i did not test other py3.x versions.\r\n\r\n```\r\n_______________________________________________________________ tests/test_clean.py::test_only_text_is_cleaned _______________________________________________________________\r\n\r\n    def test_only_text_is_cleaned():\r\n        some_text = 'text'\r\n        some_type = int\r\n        no_type = None\r\n    \r\n        assert clean(some_text) == some_text\r\n    \r\n        with pytest.raises(TypeError) as e:\r\n            clean(some_type)\r\n>       assert \"argument cannot be of 'type' type\" in str(e)\r\nE       assert \"argument cannot be of 'type' type\" in '<ExceptionInfo TypeError tblen=3>'\r\nE        +  where '<ExceptionInfo TypeError tblen=3>' = str(<ExceptionInfo TypeError tblen=3>)\r\n\r\ntests/test_clean.py:27: AssertionError\r\n==================================================================== 1 failed, 311 passed in 5.98 seconds ====================================================================\r\nERROR: InvocationError: '/Users/jvanasco/webserver/os-projects-others-forks/bleach/.tox/py36/bin/pytest -v'\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/457", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/457/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/457/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/457/events", "html_url": "https://github.com/mozilla/bleach/issues/457", "id": 455588065, "node_id": "MDU6SXNzdWU0NTU1ODgwNjU=", "number": 457, "title": "Ability to turn relative URLs into absolute", "user": {"login": "vporton", "id": 2900574, "node_id": "MDQ6VXNlcjI5MDA1NzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2900574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vporton", "html_url": "https://github.com/vporton", "followers_url": "https://api.github.com/users/vporton/followers", "following_url": "https://api.github.com/users/vporton/following{/other_user}", "gists_url": "https://api.github.com/users/vporton/gists{/gist_id}", "starred_url": "https://api.github.com/users/vporton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vporton/subscriptions", "organizations_url": "https://api.github.com/users/vporton/orgs", "repos_url": "https://api.github.com/users/vporton/repos", "events_url": "https://api.github.com/users/vporton/events{/privacy}", "received_events_url": "https://api.github.com/users/vporton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-13T07:52:16Z", "updated_at": "2019-09-05T20:24:20Z", "closed_at": "2019-09-05T20:24:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Add the ability to turn relative URLs into absolute by adding a specified prefix.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/456", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/456/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/456/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/456/events", "html_url": "https://github.com/mozilla/bleach/issues/456", "id": 455443097, "node_id": "MDU6SXNzdWU0NTU0NDMwOTc=", "number": 456, "title": "Need to make bleach.clean() output XML", "user": {"login": "vporton", "id": 2900574, "node_id": "MDQ6VXNlcjI5MDA1NzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2900574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vporton", "html_url": "https://github.com/vporton", "followers_url": "https://api.github.com/users/vporton/followers", "following_url": "https://api.github.com/users/vporton/following{/other_user}", "gists_url": "https://api.github.com/users/vporton/gists{/gist_id}", "starred_url": "https://api.github.com/users/vporton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vporton/subscriptions", "organizations_url": "https://api.github.com/users/vporton/orgs", "repos_url": "https://api.github.com/users/vporton/repos", "events_url": "https://api.github.com/users/vporton/events{/privacy}", "received_events_url": "https://api.github.com/users/vporton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-12T21:59:22Z", "updated_at": "2019-09-05T20:26:40Z", "closed_at": "2019-09-05T20:26:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "`bleach.clean()` should have an option to return a well-formed XML fragment.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/442", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/442/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/442/events", "html_url": "https://github.com/mozilla/bleach/issues/442", "id": 427696162, "node_id": "MDU6SXNzdWU0Mjc2OTYxNjI=", "number": 442, "title": "harmonize code of conduct docs", "user": {"login": "g-k", "id": 226605, "node_id": "MDQ6VXNlcjIyNjYwNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/226605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/g-k", "html_url": "https://github.com/g-k", "followers_url": "https://api.github.com/users/g-k/followers", "following_url": "https://api.github.com/users/g-k/following{/other_user}", "gists_url": "https://api.github.com/users/g-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/g-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/g-k/subscriptions", "organizations_url": "https://api.github.com/users/g-k/orgs", "repos_url": "https://api.github.com/users/g-k/repos", "events_url": "https://api.github.com/users/g-k/events{/privacy}", "received_events_url": "https://api.github.com/users/g-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 8314248, "node_id": "MDU6TGFiZWw4MzE0MjQ4", "url": "https://api.github.com/repos/mozilla/bleach/labels/docs", "name": "docs", "color": "0b02e1", "default": false, "description": null}, {"id": 503741547, "node_id": "MDU6TGFiZWw1MDM3NDE1NDc=", "url": "https://api.github.com/repos/mozilla/bleach/labels/needs-your-help", "name": "needs-your-help", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-01T13:10:12Z", "updated_at": "2020-02-07T18:06:41Z", "closed_at": "2020-02-07T18:06:41Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "refs: https://github.com/mozilla/bleach/pull/441\r\n\r\nThe Code of Conduct `.md` file work with the `.rst` docs and have the same content.\r\n\r\n@willkg figured out a nice way to do this and wrote it up at https://bluesock.org/~willkg/blog/mozilla/code_of_conduct.html", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/440", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/440/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/440/events", "html_url": "https://github.com/mozilla/bleach/issues/440", "id": 426281607, "node_id": "MDU6SXNzdWU0MjYyODE2MDc=", "number": 440, "title": "CODE_OF_CONDUCT.md file missing", "user": {"login": "Mozilla-GitHub-Standards", "id": 48073334, "node_id": "MDQ6VXNlcjQ4MDczMzM0", "avatar_url": "https://avatars3.githubusercontent.com/u/48073334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mozilla-GitHub-Standards", "html_url": "https://github.com/Mozilla-GitHub-Standards", "followers_url": "https://api.github.com/users/Mozilla-GitHub-Standards/followers", "following_url": "https://api.github.com/users/Mozilla-GitHub-Standards/following{/other_user}", "gists_url": "https://api.github.com/users/Mozilla-GitHub-Standards/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mozilla-GitHub-Standards/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mozilla-GitHub-Standards/subscriptions", "organizations_url": "https://api.github.com/users/Mozilla-GitHub-Standards/orgs", "repos_url": "https://api.github.com/users/Mozilla-GitHub-Standards/repos", "events_url": "https://api.github.com/users/Mozilla-GitHub-Standards/events{/privacy}", "received_events_url": "https://api.github.com/users/Mozilla-GitHub-Standards/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-28T03:35:40Z", "updated_at": "2019-04-01T13:07:57Z", "closed_at": "2019-04-01T13:07:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\nAs of January 1 2019, Mozilla requires that all GitHub projects include this [CODE_OF_CONDUCT.md](https://github.com/mozilla/repo-templates/blob/master/templates/CODE_OF_CONDUCT.md) file in the project root. The file has two parts:\n\n1. Required Text - All text under the headings *Community Participation Guidelines and How to Report*, are required, and should not be altered.\n2. Optional Text - The Project Specific Etiquette heading provides a space to speak more specifically about ways people can work effectively and inclusively together. Some examples of those can be found on the [Firefox Debugger](https://github.com/devtools-html/debugger.html/blob/master/CODE_OF_CONDUCT.md) project, and [Common Voice](https://github.com/mozilla/voice-web/blob/master/CODE_OF_CONDUCT.md). (The optional part is commented out in the [raw template file](https://raw.githubusercontent.com/mozilla/repo-templates/blob/master/templates/CODE_OF_CONDUCT.md), and will not be visible until you modify and uncomment that part.)\n\nIf you have any questions about this file, or Code of Conduct policies and procedures, please reach out to Mozilla-GitHub-Standards+CoC@mozilla.com.\n\n_(Message COC001)_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/431", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/431/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/431/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/431/events", "html_url": "https://github.com/mozilla/bleach/issues/431", "id": 396937404, "node_id": "MDU6SXNzdWUzOTY5Mzc0MDQ=", "number": 431, "title": "AttributeError: 'InputStreamWithMemory' object has no attribute 'charEncoding'", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-08T14:44:09Z", "updated_at": "2019-01-08T17:00:16Z", "closed_at": "2019-01-08T17:00:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Using this code:\r\n\r\n```\r\nimport bleach\r\n\r\nTEXT = \"\"\"\\\r\n<html>\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n</head>\r\n<body>\r\n</body>\r\n</html>\r\n\"\"\"\r\nprint(bleach.clean(TEXT, tags=['html', 'head', 'meta', 'body']))\r\n```\r\n\r\nwe get this traceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"s.py\", line 12, in <module>\r\n    print(bleach.clean(TEXT, tags=['html', 'head', 'meta', 'body']))\r\n  File \"/home/willkg/mozilla/bleach/bleach/__init__.py\", line 84, in clean\r\n    return cleaner.clean(text)\r\n  File \"/home/willkg/mozilla/bleach/bleach/sanitizer.py\", line 169, in clean\r\n    dom = self.parser.parseFragment(text)\r\n  File \"/home/willkg/mozilla/bleach/bleach/_vendor/html5lib/html5parser.py\", line 317, in parseFragment\r\n    self._parse(stream, True, *args, **kwargs)\r\n  File \"/home/willkg/mozilla/bleach/bleach/html5lib_shim.py\", line 385, in _parse\r\n    self.mainLoop()\r\n  File \"/home/willkg/mozilla/bleach/bleach/_vendor/html5lib/html5parser.py\", line 241, in mainLoop\r\n    new_token = phase.processStartTag(new_token)\r\n  File \"/home/willkg/mozilla/bleach/bleach/_vendor/html5lib/html5parser.py\", line 472, in processStartTag\r\n    return self.startTagHandler[token[\"name\"]](token)\r\n  File \"/home/willkg/mozilla/bleach/bleach/_vendor/html5lib/html5parser.py\", line 1067, in startTagProcessInHead\r\n    return self.parser.phases[\"inHead\"].processStartTag(token)\r\n  File \"/home/willkg/mozilla/bleach/bleach/_vendor/html5lib/html5parser.py\", line 472, in processStartTag\r\n    return self.startTagHandler[token[\"name\"]](token)\r\n  File \"/home/willkg/mozilla/bleach/bleach/_vendor/html5lib/html5parser.py\", line 745, in startTagMeta\r\n    if self.parser.tokenizer.stream.charEncoding[1] == \"tentative\":\r\nAttributeError: 'InputStreamWithMemory' object has no attribute 'charEncoding'\r\n```\r\n\r\nThis is with Bleach from master tip (3.0.3.dev0) and Python 2.7.15.\r\n\r\nThis issue covers fixing that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/430", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/430/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/430/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/430/events", "html_url": "https://github.com/mozilla/bleach/issues/430", "id": 396848478, "node_id": "MDU6SXNzdWUzOTY4NDg0Nzg=", "number": 430, "title": "3.0.2 linkify", "user": {"login": "flintforge", "id": 17517290, "node_id": "MDQ6VXNlcjE3NTE3Mjkw", "avatar_url": "https://avatars3.githubusercontent.com/u/17517290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flintforge", "html_url": "https://github.com/flintforge", "followers_url": "https://api.github.com/users/flintforge/followers", "following_url": "https://api.github.com/users/flintforge/following{/other_user}", "gists_url": "https://api.github.com/users/flintforge/gists{/gist_id}", "starred_url": "https://api.github.com/users/flintforge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flintforge/subscriptions", "organizations_url": "https://api.github.com/users/flintforge/orgs", "repos_url": "https://api.github.com/users/flintforge/repos", "events_url": "https://api.github.com/users/flintforge/events{/privacy}", "received_events_url": "https://api.github.com/users/flintforge/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-08T10:44:25Z", "updated_at": "2019-01-08T14:00:26Z", "closed_at": "2019-01-08T14:00:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Bleach 2 performed correctly the \"linkification\".\r\nbut on 3.0.2 :\r\n```\r\nbleach.linkify( '<span> BBBB </span>')\r\n'&lt;span&gt; BBBB &lt;/span&gt;'\r\n```\r\nwhy ? Am I missing something ?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/426", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/426/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/426/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/426/events", "html_url": "https://github.com/mozilla/bleach/issues/426", "id": 394000921, "node_id": "MDU6SXNzdWUzOTQwMDA5MjE=", "number": 426, "title": "Style filter does not work correctly when supplied non-ASCII style attribute", "user": {"login": "sekineh", "id": 3956266, "node_id": "MDQ6VXNlcjM5NTYyNjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/3956266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sekineh", "html_url": "https://github.com/sekineh", "followers_url": "https://api.github.com/users/sekineh/followers", "following_url": "https://api.github.com/users/sekineh/following{/other_user}", "gists_url": "https://api.github.com/users/sekineh/gists{/gist_id}", "starred_url": "https://api.github.com/users/sekineh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sekineh/subscriptions", "organizations_url": "https://api.github.com/users/sekineh/orgs", "repos_url": "https://api.github.com/users/sekineh/repos", "events_url": "https://api.github.com/users/sekineh/events{/privacy}", "received_events_url": "https://api.github.com/users/sekineh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}, {"id": 503741547, "node_id": "MDU6TGFiZWw1MDM3NDE1NDc=", "url": "https://api.github.com/repos/mozilla/bleach/labels/needs-your-help", "name": "needs-your-help", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-12-25T10:15:03Z", "updated_at": "2019-07-11T07:23:18Z", "closed_at": "2019-01-18T15:18:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Environment\r\n\r\nWindows 10 Pro\r\nPython 3.7.1\r\nbleach         3.0.2\r\n\r\nI've setup so that `color` style will survive after clean() method like below:\r\n```\r\n>>> bleach.clean('<span style=\"font-family:consolas;color:red\">text</span>', tags = ['span'], attributes = {'span': ['style']}, styles = ['color'])\r\n'<span style=\"color: red;\">text</span>'\r\n```\r\n\r\n# Problem\r\n\r\nWhen it contains non-ASCII style description such as Japanese font names, the `color` style is omitted.\r\n```\r\n>>> bleach.clean('<span style=\"font-family:\u30e1\u30a4\u30ea\u30aa;color:red\">text</span>', tags = ['span'], attributes = {'span': ['style']}, styles = ['color'])\r\n'<span style=\"\">text</span>'\r\n```\r\nIt should retain the `color` style like below:\r\n```\r\n'<span style=\"color: red;\">text</span>'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/424", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/424/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/424/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/424/events", "html_url": "https://github.com/mozilla/bleach/issues/424", "id": 393226438, "node_id": "MDU6SXNzdWUzOTMyMjY0Mzg=", "number": 424, "title": "Type stubs for bleach", "user": {"login": "srittau", "id": 52799, "node_id": "MDQ6VXNlcjUyNzk5", "avatar_url": "https://avatars3.githubusercontent.com/u/52799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srittau", "html_url": "https://github.com/srittau", "followers_url": "https://api.github.com/users/srittau/followers", "following_url": "https://api.github.com/users/srittau/following{/other_user}", "gists_url": "https://api.github.com/users/srittau/gists{/gist_id}", "starred_url": "https://api.github.com/users/srittau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srittau/subscriptions", "organizations_url": "https://api.github.com/users/srittau/orgs", "repos_url": "https://api.github.com/users/srittau/repos", "events_url": "https://api.github.com/users/srittau/events{/privacy}", "received_events_url": "https://api.github.com/users/srittau/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-20T21:57:25Z", "updated_at": "2018-12-28T15:09:13Z", "closed_at": "2018-12-28T15:09:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "For my own use, I have written type stubs for bleach: https://github.com/srittau/python-stubs/tree/master/stubs/bleach. With your permission I would like to include them in [typeshed](https://github.com/python/typeshed) so they get included in future releases of type checkers like mypy.\r\n\r\nThe stubs are mostly complete, just the two html5lib filter classes are incomplete, partly because html5lib does not have type stubs, yet.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/422", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/422/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/422/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/422/events", "html_url": "https://github.com/mozilla/bleach/issues/422", "id": 390404557, "node_id": "MDU6SXNzdWUzOTA0MDQ1NTc=", "number": 422, "title": "LinkifyFilter with clean breaks links at &amp;", "user": {"login": "Deimos", "id": 9033, "node_id": "MDQ6VXNlcjkwMzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/9033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Deimos", "html_url": "https://github.com/Deimos", "followers_url": "https://api.github.com/users/Deimos/followers", "following_url": "https://api.github.com/users/Deimos/following{/other_user}", "gists_url": "https://api.github.com/users/Deimos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Deimos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Deimos/subscriptions", "organizations_url": "https://api.github.com/users/Deimos/orgs", "repos_url": "https://api.github.com/users/Deimos/repos", "events_url": "https://api.github.com/users/Deimos/events{/privacy}", "received_events_url": "https://api.github.com/users/Deimos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-12T20:54:15Z", "updated_at": "2019-01-04T23:07:14Z", "closed_at": "2019-01-04T23:07:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "(Split out to a new issue from [this comment](https://github.com/mozilla/bleach/issues/419#issuecomment-445056894))\r\n\r\nWhen using `LinkifyFilter` instead of the stand-alone `linkify`, links are broken at any `&amp;`, but not bare `&` characters.\r\n\r\nHere's a pretty minimal demonstration:\r\n\r\n```\r\nimport bleach\r\n\r\nbleach.linkify(\"https://www.youtube.com/watch?v=SkcucKDrbOI&amp;feature=youtu.be\")\r\n```\r\n\r\nResult (expected): `<a href=\"https://www.youtube.com/watch?v=SkcucKDrbOI&amp;feature=youtu.be\" rel=\"nofollow\">https://www.youtube.com/watch?v=SkcucKDrbOI&amp;feature=youtu.be</a>`\r\n\r\n```\r\nimport bleach\r\nfrom functools import partial\r\n\r\nbleach_linkifier = partial(bleach.linkifier.LinkifyFilter)\r\ncleaner = bleach.Cleaner(filters=[bleach_linkifier])\r\ncleaner.clean(\"https://www.youtube.com/watch?v=SkcucKDrbOI&amp;feature=youtu.be\")\r\n```\r\n\r\nResult (not expected, link stops at the `&amp;`): `<a href=\"https://www.youtube.com/watch?v=SkcucKDrbOI\">https://www.youtube.com/watch?v=SkcucKDrbOI</a>&amp;feature=<a href=\"http://youtu.be\">youtu.be</a>`\r\n\r\nIt works with just a bare `&` instead of the `&amp;`, like `https://www.youtube.com/watch?v=SkcucKDrbOI&feature=youtu.be`. In that case, the output of both methods is:\r\n\r\n```\r\n<a href=\"https://www.youtube.com/watch?v=SkcucKDrbOI&amp;feature=youtu.be\">https://www.youtube.com/watch?v=SkcucKDrbOI&amp;feature=youtu.be</a>\r\n```\r\n\r\n(with an additional `rel=\"nofollow\"` attr added by `linkify()` by default)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/419", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/419/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/419/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/419/events", "html_url": "https://github.com/mozilla/bleach/issues/419", "id": 379664062, "node_id": "MDU6SXNzdWUzNzk2NjQwNjI=", "number": 419, "title": "extra \" and ' get changed to attribute names", "user": {"login": "M1ha-Shvn", "id": 2315339, "node_id": "MDQ6VXNlcjIzMTUzMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2315339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/M1ha-Shvn", "html_url": "https://github.com/M1ha-Shvn", "followers_url": "https://api.github.com/users/M1ha-Shvn/followers", "following_url": "https://api.github.com/users/M1ha-Shvn/following{/other_user}", "gists_url": "https://api.github.com/users/M1ha-Shvn/gists{/gist_id}", "starred_url": "https://api.github.com/users/M1ha-Shvn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/M1ha-Shvn/subscriptions", "organizations_url": "https://api.github.com/users/M1ha-Shvn/orgs", "repos_url": "https://api.github.com/users/M1ha-Shvn/repos", "events_url": "https://api.github.com/users/M1ha-Shvn/events{/privacy}", "received_events_url": "https://api.github.com/users/M1ha-Shvn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-11-12T08:12:53Z", "updated_at": "2019-01-02T16:26:33Z", "closed_at": "2019-01-02T16:26:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\nI've found strange things in href escaping with `linkify`:\r\n1. `&` symbol is converted to `&amp;` if it is present in href link:\r\n```python\r\nlinkify('<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&utm_medium=ccc&utm_campaign=crosspromo-fw1819\">')\r\n#   '<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&amp;utm_medium=cc&amp;utm_campaign=crosspromo-fw1819\" rel=\"nofollow\"></a>'\r\n```\r\n\r\n2. Other html-escaped characters (`<` at link end) are not converted:\r\n```python\r\nlinkify('<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&utm_medium=cc&utm_campaign=crosspromo-fw1819<\">')\r\n# '<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&amp;utm_medium=cc&amp;utm_campaign=crosspromo-fw1819<\" rel=\"nofollow\"></a>'\r\n```\r\n\r\n3. Quote in link is converted to strange tag parameter (`\"=\"\"`):\r\n```python\r\nlinkify('<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&utm_medium=cc&utm_campaign=crosspromo-fw1819\\\"\">')\r\n# '<a \"=\"\" href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&amp;utm_medium=cc&amp;utm_campaign=crosspromo-fw1819\" rel=\"nofollow\"></a>'\r\n\r\nlinkify('<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&utm_medium=cc&utm_campaign=crosspromo-fw1819\\'\">')\r\n# '<a href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&amp;utm_medium=cc&amp;utm_campaign=crosspromo-fw1819\\'\" rel=\"nofollow\"></a>'\r\n\r\nlinkify('<a href=\"https://test.ru/ru/estcross-promo-fw2018?utm_source=popup&utm_medium=cc&utm_campaign=crosspromo-fw1819\\\"\\'\">')\r\n# '<a \\'\"=\"\" href=\"https://test.ru/ru/cross-promo-fw2018?utm_source=popup&amp;utm_medium=cc&amp;utm_campaign=crosspromo-fw1819\" rel=\"nofollow\"></a>'\r\n```\r\n\r\nHow can I get a correct href without any characters encoded?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/418", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/418/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/418/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/418/events", "html_url": "https://github.com/mozilla/bleach/issues/418", "id": 379148997, "node_id": "MDU6SXNzdWUzNzkxNDg5OTc=", "number": 418, "title": "v3.0.2 tag missing on GitHub", "user": {"login": "hairmare", "id": 116588, "node_id": "MDQ6VXNlcjExNjU4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/116588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hairmare", "html_url": "https://github.com/hairmare", "followers_url": "https://api.github.com/users/hairmare/followers", "following_url": "https://api.github.com/users/hairmare/following{/other_user}", "gists_url": "https://api.github.com/users/hairmare/gists{/gist_id}", "starred_url": "https://api.github.com/users/hairmare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hairmare/subscriptions", "organizations_url": "https://api.github.com/users/hairmare/orgs", "repos_url": "https://api.github.com/users/hairmare/repos", "events_url": "https://api.github.com/users/hairmare/events{/privacy}", "received_events_url": "https://api.github.com/users/hairmare/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-09T12:47:58Z", "updated_at": "2018-11-09T18:32:46Z", "closed_at": "2018-11-09T13:10:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "`3.0.2` is already available on PyPi: https://pypi.org/project/bleach/3.0.2/\r\n\r\nBut missing from the [GitHub Releases](https://github.com/mozilla/bleach/releases): https://github.com/mozilla/bleach/releases/tag/v3.0.2\r\n\r\nIt looks like it just needs to be Released on GitHub as well.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/409", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/409/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/409/events", "html_url": "https://github.com/mozilla/bleach/issues/409", "id": 368321373, "node_id": "MDU6SXNzdWUzNjgzMjEzNzM=", "number": 409, "title": "linkify is escaping valid HTML tags", "user": {"login": "Deimos", "id": 9033, "node_id": "MDQ6VXNlcjkwMzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/9033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Deimos", "html_url": "https://github.com/Deimos", "followers_url": "https://api.github.com/users/Deimos/followers", "following_url": "https://api.github.com/users/Deimos/following{/other_user}", "gists_url": "https://api.github.com/users/Deimos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Deimos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Deimos/subscriptions", "organizations_url": "https://api.github.com/users/Deimos/orgs", "repos_url": "https://api.github.com/users/Deimos/repos", "events_url": "https://api.github.com/users/Deimos/events{/privacy}", "received_events_url": "https://api.github.com/users/Deimos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-09T17:40:42Z", "updated_at": "2018-12-13T00:11:30Z", "closed_at": "2018-12-13T00:11:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Originally noticed here in relation to the `<abbr>` tag: https://github.com/mozilla/bleach/issues/400\r\n\r\nlinkify is now using a list of valid HTML tags that is largely built up from constants in html5lib, here: https://github.com/mozilla/bleach/blob/master/bleach/html5lib_shim.py#L49\r\n\r\nHowever, these constants don't seem to make up a complete list of valid tags&mdash;in addition to `<abbr>` (which is now being appended to the list by Bleach), there are also multiple other tags missing, including `del`, `ins`, `sub`, `sup`, and `span`.\r\n\r\nIt would probably be best to replace this combination of html5lib constants with a full list of valid tags. I can do a PR for this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/406", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/406/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/406/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/406/events", "html_url": "https://github.com/mozilla/bleach/issues/406", "id": 368052907, "node_id": "MDU6SXNzdWUzNjgwNTI5MDc=", "number": 406, "title": "Exception in bleach.linkify(): AttributeError: 'list' object has no attribute 'lower'", "user": {"login": "levkowetz", "id": 2189511, "node_id": "MDQ6VXNlcjIxODk1MTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2189511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/levkowetz", "html_url": "https://github.com/levkowetz", "followers_url": "https://api.github.com/users/levkowetz/followers", "following_url": "https://api.github.com/users/levkowetz/following{/other_user}", "gists_url": "https://api.github.com/users/levkowetz/gists{/gist_id}", "starred_url": "https://api.github.com/users/levkowetz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/levkowetz/subscriptions", "organizations_url": "https://api.github.com/users/levkowetz/orgs", "repos_url": "https://api.github.com/users/levkowetz/repos", "events_url": "https://api.github.com/users/levkowetz/events{/privacy}", "received_events_url": "https://api.github.com/users/levkowetz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-09T06:04:05Z", "updated_at": "2018-10-09T13:04:46Z", "closed_at": "2018-10-09T13:04:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Bleach 3.0.0 raises an exception within linkify for input that bleach 2.1.4 deals with:\r\n\r\n```Traceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/__init__.py\", line 131, in linkify\r\n    return linker.linkify(text)\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/linkifier.py\", line 151, in linkify\r\n    dom = self.parser.parseFragment(text)\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/_vendor/html5lib/html5parser.py\", line 317, in parseFragment\r\n    self._parse(stream, True, *args, **kwargs)\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/html5lib_shim.py\", line 257, in _parse\r\n    self.mainLoop()\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/_vendor/html5lib/html5parser.py\", line 205, in mainLoop\r\n    for token in self.normalizedTokens():\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/_vendor/html5lib/html5parser.py\", line 264, in normalizedTokens\r\n    for token in self.tokenizer:\r\n  File \"/opt/home/henrik/trunk/local/lib/python2.7/site-packages/bleach/html5lib_shim.py\", line 130, in __iter__\r\n    token_name = token['data'].lower().strip()\r\nAttributeError: 'list' object has no attribute 'lower'\r\n```\r\n\r\nThe input that triggered this is attached.\r\n\r\n[bleach-3.0.0-exception-input.txt](https://github.com/mozilla/bleach/files/2459035/bleach-3.0.0-exception-input.txt)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/403", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/403/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/403/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/403/events", "html_url": "https://github.com/mozilla/bleach/issues/403", "id": 367592928, "node_id": "MDU6SXNzdWUzNjc1OTI5Mjg=", "number": 403, "title": "Changing Cleaner.tags dynamically stopped working in 3.0.0", "user": {"login": "russellballestrini", "id": 909098, "node_id": "MDQ6VXNlcjkwOTA5OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/909098?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russellballestrini", "html_url": "https://github.com/russellballestrini", "followers_url": "https://api.github.com/users/russellballestrini/followers", "following_url": "https://api.github.com/users/russellballestrini/following{/other_user}", "gists_url": "https://api.github.com/users/russellballestrini/gists{/gist_id}", "starred_url": "https://api.github.com/users/russellballestrini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russellballestrini/subscriptions", "organizations_url": "https://api.github.com/users/russellballestrini/orgs", "repos_url": "https://api.github.com/users/russellballestrini/repos", "events_url": "https://api.github.com/users/russellballestrini/events{/privacy}", "received_events_url": "https://api.github.com/users/russellballestrini/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-07T20:54:32Z", "updated_at": "2018-10-08T14:33:03Z", "closed_at": "2018-10-08T14:27:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Previously in version 2.1.4 I would be able to do something like this:\r\n\r\n```\r\nimport bleach\r\ncleaner = bleach.Cleaner()\r\ncleaner.tags.append(\"script\")\r\n```\r\n\r\nNow in version 3.0.0, it seems like there was a refactor which causes `self.tags` to be used during `__init__` (to build html5lib parcer) so the appended tag doesn't propagate to another composed object.\r\n\r\nI think an easy fix would be changing this:\r\n\r\n```\r\n    self.parser = html5lib_shim.BleachHTMLParser(\r\n            tags=self.tags,\r\n            strip=self.strip,\r\n            consume_entities=False,\r\n            namespaceHTMLElements=False\r\n    )\r\n```\r\n\r\nTo something like this \r\n\r\n```\r\n    @property\r\n    def parser(self):\r\n        html5lib_shim.BleachHTMLParser(\r\n            tags=self.tags,\r\n            strip=self.strip,\r\n            consume_entities=False,\r\n            namespaceHTMLElements=False\r\n    )\r\n```\r\n\r\nWe could also use memoization to hold a copy of the parser as `self._parser` and test if it's `tags` and `strip` matches those set on the `Cleaner`, on match return `self._parser` else return a new `BleachHTMLParser`.\r\n\r\nLet me know if you would like me to try to PR this change.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/402", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/402/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/402/events", "html_url": "https://github.com/mozilla/bleach/issues/402", "id": 367459742, "node_id": "MDU6SXNzdWUzNjc0NTk3NDI=", "number": 402, "title": "AttributeError raised for a specific input", "user": {"login": "pv", "id": 35046, "node_id": "MDQ6VXNlcjM1MDQ2", "avatar_url": "https://avatars1.githubusercontent.com/u/35046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pv", "html_url": "https://github.com/pv", "followers_url": "https://api.github.com/users/pv/followers", "following_url": "https://api.github.com/users/pv/following{/other_user}", "gists_url": "https://api.github.com/users/pv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pv/subscriptions", "organizations_url": "https://api.github.com/users/pv/orgs", "repos_url": "https://api.github.com/users/pv/repos", "events_url": "https://api.github.com/users/pv/events{/privacy}", "received_events_url": "https://api.github.com/users/pv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-06T14:00:57Z", "updated_at": "2018-10-07T01:03:12Z", "closed_at": "2018-10-06T14:04:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "With bleach 3.0.0 (but not with 2.1.3), the following raises an error, which it probably should not do:\r\n```\r\nimport sys, bleach\r\nprint(sys.version_info)\r\nprint(bleach.__version__)\r\ncontent = '<img src=\"http://\" alt=\"\"id=\"\" /></'\r\nbleach.clean(content, tags=['img'])\r\n```\r\nPrints:\r\n```\r\nsys.version_info(major=3, minor=7, micro=0, releaselevel='final', serial=0)\r\n3.0.0\r\nTraceback (most recent call last):\r\n  File \"asd.py\", line 5, in <module>\r\n    bleach.clean(content, tags=['img'])\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/__init__.py\", line 84, in clean\r\n    return cleaner.clean(text)\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/sanitizer.py\", line 169, in clean\r\n    dom = self.parser.parseFragment(text)\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/_vendor/html5lib/html5parser.py\", line 317, in parseFragment\r\n    self._parse(stream, True, *args, **kwargs)\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/html5lib_shim.py\", line 257, in _parse\r\n    self.mainLoop()\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/_vendor/html5lib/html5parser.py\", line 205, in mainLoop\r\n    for token in self.normalizedTokens():\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/_vendor/html5lib/html5parser.py\", line 264, in normalizedTokens\r\n    for token in self.tokenizer:\r\n  File \"/tmp/env/lib64/python3.7/site-packages/bleach/html5lib_shim.py\", line 130, in __iter__\r\n    token_name = token['data'].lower().strip()\r\nAttributeError: 'list' object has no attribute 'lower'\r\n```\r\nwith\r\n```\r\n$ ./bin/pip list\r\nPackage      Version\r\n------------ -------\r\nbleach       3.0.0  \r\npip          18.0   \r\nsetuptools   40.4.3 \r\nsix          1.11.0 \r\nwebencodings 0.5.1  \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/400", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/400/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/400/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/400/events", "html_url": "https://github.com/mozilla/bleach/issues/400", "id": 367283950, "node_id": "MDU6SXNzdWUzNjcyODM5NTA=", "number": 400, "title": "abbr is escaped when using linkify", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-05T16:32:33Z", "updated_at": "2018-10-09T16:42:06Z", "closed_at": "2018-10-05T17:45:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From IRC:\r\n\r\n```\r\nwillkg: I'm doing the work to upgrade AMO to bleach3.0 but I may have found a\r\nregression with the linkify fix (?).\r\n`bleach.linkify('<abbr title=\"laugh out loud\">lol</abbr>', skip_tags=['abbr'])` escapes\r\nthe `<abbr>` tag.  Is there a way to have linkify _not_ do that?\r\n```\r\n\r\nLooks like `abbr` isn't in `HTML_TAGS`. We should add it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/398", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/398/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/398/events", "html_url": "https://github.com/mozilla/bleach/issues/398", "id": 366716801, "node_id": "MDU6SXNzdWUzNjY3MTY4MDE=", "number": 398, "title": "AttributeError: 'list' object has no attribute 'lower'", "user": {"login": "NicolasLM", "id": 7612656, "node_id": "MDQ6VXNlcjc2MTI2NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7612656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasLM", "html_url": "https://github.com/NicolasLM", "followers_url": "https://api.github.com/users/NicolasLM/followers", "following_url": "https://api.github.com/users/NicolasLM/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasLM/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasLM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasLM/subscriptions", "organizations_url": "https://api.github.com/users/NicolasLM/orgs", "repos_url": "https://api.github.com/users/NicolasLM/repos", "events_url": "https://api.github.com/users/NicolasLM/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasLM/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-04T10:11:45Z", "updated_at": "2018-10-04T20:26:23Z", "closed_at": "2018-10-04T19:11:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I upgraded to bleach 3.0.0 and noticed an error that happens from time to time: \r\n\r\n```\r\nAttributeError: 'list' object has no attribute 'lower'\r\n  File \"bleach/__init__.py\", line 84, in clean\r\n    return cleaner.clean(text)\r\n  File \"bleach/sanitizer.py\", line 169, in clean\r\n    dom = self.parser.parseFragment(text)\r\n  File \"bleach/_vendor/html5lib/html5parser.py\", line 317, in parseFragment\r\n    self._parse(stream, True, *args, **kwargs)\r\n  File \"bleach/html5lib_shim.py\", line 257, in _parse\r\n    self.mainLoop()\r\n  File \"bleach/_vendor/html5lib/html5parser.py\", line 205, in mainLoop\r\n    for token in self.normalizedTokens():\r\n  File \"bleach/_vendor/html5lib/html5parser.py\", line 264, in normalizedTokens\r\n    for token in self.tokenizer:\r\n  File \"bleach/html5lib_shim.py\", line 130, in __iter__\r\n    token_name = token['data'].lower().strip()\r\n```\r\n\r\nhttps://github.com/mozilla/bleach/blob/344df3acd1a52953a6006e9a7e066eabd614d28f/bleach/html5lib_shim.py#L130\r\n\r\nHere is the value of `token`:\r\n```python\r\ntoken = {'data': [['\"', ''], ['alt', ''], ['class', 'alignnone'], ['height', '100%'], ['src', 'https://foo.com/media/bar.jpg'], ['style', 'max-width: 100%; margin-left: auto; margin-right: auto;'], ['width', '100%']], 'name': 'img', 'selfClosing': True, 'selfClosingAcknowledged': False, 'type': 3}\r\n```\r\n\r\nNote that I have `html5lib==1.0.1` installed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/392", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/392/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/392/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/392/events", "html_url": "https://github.com/mozilla/bleach/issues/392", "id": 362811863, "node_id": "MDU6SXNzdWUzNjI4MTE4NjM=", "number": 392, "title": "linkify() \"fixes\" HTML by adding or removing tags", "user": {"login": "Deimos", "id": 9033, "node_id": "MDQ6VXNlcjkwMzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/9033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Deimos", "html_url": "https://github.com/Deimos", "followers_url": "https://api.github.com/users/Deimos/followers", "following_url": "https://api.github.com/users/Deimos/following{/other_user}", "gists_url": "https://api.github.com/users/Deimos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Deimos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Deimos/subscriptions", "organizations_url": "https://api.github.com/users/Deimos/orgs", "repos_url": "https://api.github.com/users/Deimos/repos", "events_url": "https://api.github.com/users/Deimos/events{/privacy}", "received_events_url": "https://api.github.com/users/Deimos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 3, "created_at": "2018-09-22T00:45:51Z", "updated_at": "2018-10-02T17:56:40Z", "closed_at": "2018-10-02T17:56:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Similar to the issue in https://github.com/mozilla/bleach/issues/280, `bleach.linkify()` seems to be \"fixing\" HTML by adding or removing tags if it interprets something as an HTML tag.\r\n\r\nFor example:\r\n\r\n```\r\n>>> bleach.linkify(\"insert <name> here\")\r\n'insert <name> here</name>'\r\n\r\n>>> bleach.linkify(\"Well that's just great</sarcasm>\")\r\n\"Well that's just great\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/386", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/386/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/386/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/386/events", "html_url": "https://github.com/mozilla/bleach/issues/386", "id": 354118369, "node_id": "MDU6SXNzdWUzNTQxMTgzNjk=", "number": 386, "title": "vendor html5lib", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 1, "created_at": "2018-08-26T18:53:18Z", "updated_at": "2018-08-28T15:22:50Z", "closed_at": "2018-08-28T15:22:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`pip` vendors html5lib and thus they don't have to support multiple html5lib APIs. Since html5lib 1.0.1 came out, there hasn't been much activity. We have issue #255 covering looking for alternatives. Any of those options is likely to be a big rewrite project.\r\n\r\nIn the meantime, we should vendor html5lib in the same way that pip does. That will simplify some code, reduce how long it takes to test, ease some problems with projects that use Bleach and other libraries that use html5lib, and generally make things better.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/384", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/384/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/384/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/384/events", "html_url": "https://github.com/mozilla/bleach/issues/384", "id": 349154433, "node_id": "MDU6SXNzdWUzNDkxNTQ0MzM=", "number": 384, "title": "bleach.clean() fails to decode some special characters", "user": {"login": "rudiad", "id": 6730460, "node_id": "MDQ6VXNlcjY3MzA0NjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6730460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rudiad", "html_url": "https://github.com/rudiad", "followers_url": "https://api.github.com/users/rudiad/followers", "following_url": "https://api.github.com/users/rudiad/following{/other_user}", "gists_url": "https://api.github.com/users/rudiad/gists{/gist_id}", "starred_url": "https://api.github.com/users/rudiad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rudiad/subscriptions", "organizations_url": "https://api.github.com/users/rudiad/orgs", "repos_url": "https://api.github.com/users/rudiad/repos", "events_url": "https://api.github.com/users/rudiad/events{/privacy}", "received_events_url": "https://api.github.com/users/rudiad/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-09T14:32:16Z", "updated_at": "2018-08-26T19:48:12Z", "closed_at": "2018-08-26T19:48:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Premise**\r\nI am not 100% sure how the clean method does its stuff (haven't sifted through the source code yet). However, it seems like it likely encodes the string, strips the offending tags / attributes, then decodes the string back for the final result.\r\n\r\n**Issue**\r\nThis seems to not be operating correctly for certain special characters.\r\n\r\nInput ```bleach.clean('!@#$%^&*()_+}{:\"<>?,./;'[]1234-=\\|`~');```\r\n\r\nOutput `!@#$%^&amp;*()_+}{:\"$lt;&gt;>?,./;'[]1234-=\\|`~`\r\n\r\nThat is a bit of a jumble of characters but you can see that `&` `<` and `>` are now represented by their HTML encoded entities. When using `bleach.clean()` I now end up having to do a follow up step of replacing those entities with their actual character if I am using the result for anything other than HTML parsing.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/381", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/381/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/381/events", "html_url": "https://github.com/mozilla/bleach/issues/381", "id": 341102332, "node_id": "MDU6SXNzdWUzNDExMDIzMzI=", "number": 381, "title": "KeyError raised on something that looks like HTML, but isn't", "user": {"login": "erickpeirson", "id": 3451594, "node_id": "MDQ6VXNlcjM0NTE1OTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/3451594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickpeirson", "html_url": "https://github.com/erickpeirson", "followers_url": "https://api.github.com/users/erickpeirson/followers", "following_url": "https://api.github.com/users/erickpeirson/following{/other_user}", "gists_url": "https://api.github.com/users/erickpeirson/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickpeirson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickpeirson/subscriptions", "organizations_url": "https://api.github.com/users/erickpeirson/orgs", "repos_url": "https://api.github.com/users/erickpeirson/repos", "events_url": "https://api.github.com/users/erickpeirson/events{/privacy}", "received_events_url": "https://api.github.com/users/erickpeirson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-13T17:38:44Z", "updated_at": "2018-07-16T14:37:49Z", "closed_at": "2018-07-16T14:25:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nName: bleach\r\nVersion: 2.1.3\r\nSummary: An easy safelist-based HTML-sanitizing tool.\r\nHome-page: http://github.com/mozilla/bleach\r\nAuthor: Will Kahn-Greene\r\nAuthor-email: willkg@mozilla.com\r\nLicense: Apache Software License\r\nLocation: ...\r\nRequires: html5lib, six\r\n```\r\n\r\nI work with user-generated text that contains equations, and sometimes need to sanitize that text for display. Bleach provides a simple way to remove unwanted HTML (so thanks for that!). I recently noticed some cases where Bleach gets confused; in short it appears that Bleach thinks that a fragment of an equation is an HTML tag, [some things happen], and a KeyError is raised. \r\n\r\nHere's a real-life example that reproduces the problem:\r\n\r\n```python\r\n>>> import bleach\r\n>>> bleach.clean(\"\\\\sum_{0<k_1<...<k_{n}<p}\\\\leg{p-k_{n}}{3} {(-1)^{k_{n}}\\\\over k_1... k_{n}}\\\\equiv\\n  {lll} -{2^{n+1}+2\\\\over 6^{n+1}} p B_{p-n-1}({1\\\\over 3}) &\\\\pmod{p^2} &{if $n$ is odd} -{2^{n+1}+4\\\\over n6^n} B_{p-n}({1\\\\over 3}) &\\\\pmod{p} &{if $n$ is even}. $$ where $n$ is a positive integer and $p$ is prime such that $p>\\\\max(n+1,3)\")\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/bleach/__init__.py\", line 99, in clean\r\n    return cleaner.clean(text)\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/bleach/sanitizer.py\", line 282, in clean\r\n    return self.serializer.render(filtered)\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/html5lib/serializer.py\", line 398, in render\r\n    return \"\".join(list(self.serialize(treewalker)))\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/bleach/sanitizer.py\", line 751, in serialize\r\n    for stoken in super(BleachHTMLSerializer, self).serialize(treewalker, encoding):\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/html5lib/serializer.py\", line 265, in serialize\r\n    for token in treewalker:\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/bleach/sanitizer.py\", line 439, in __iter__\r\n    ret = self.sanitize_token(token)\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/bleach/sanitizer.py\", line 479, in sanitize_token\r\n    return self.disallowed_token(token)\r\n  File \"/Users/brp53/.local/share/virtualenvs/arxiv-search-sJgjMA70/lib/python3.6/site-packages/bleach/sanitizer.py\", line 666, in disallowed_token\r\n    name if ns is None else \"%s:%s\" % (prefixes[ns], name),\r\nKeyError: '(-1)^{k_{n'\r\n```\r\n\r\nAfter some fiddling, it appears that this is the bit that Bleach thinks is HTML is:\r\n\r\n```\r\n\"<p}\\\\leg{p-k_{n}}{3} {(-1)^{k_{n}}\\\\over k_1... k_{n}}\\\\equiv\\n  {lll} -{2^{n+1}+2\\\\over 6^{n+1}} p B_{p-n-1}({1\\\\over 3}) &\\\\pmod{p^2} &{if $n$ is odd} -{2^{n+1}+4\\\\over n6^n} B_{p-n}({1\\\\over 3}) &\\\\pmod{p} &{if $n$ is even}. $$ where $n$ is a positive integer and $p$ is prime such that $p>\"\r\n```\r\n\r\nI guess it's reasonable to think that might be HTML. But I would not have expected the ``KeyError``. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/380", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/380/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/380/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/380/events", "html_url": "https://github.com/mozilla/bleach/issues/380", "id": 340316173, "node_id": "MDU6SXNzdWUzNDAzMTYxNzM=", "number": 380, "title": "bleach.sanitizer.ALLOWED_TAGS_EXTENDED", "user": {"login": "yoooooooooooooooooooooooo", "id": 38874621, "node_id": "MDQ6VXNlcjM4ODc0NjIx", "avatar_url": "https://avatars3.githubusercontent.com/u/38874621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoooooooooooooooooooooooo", "html_url": "https://github.com/yoooooooooooooooooooooooo", "followers_url": "https://api.github.com/users/yoooooooooooooooooooooooo/followers", "following_url": "https://api.github.com/users/yoooooooooooooooooooooooo/following{/other_user}", "gists_url": "https://api.github.com/users/yoooooooooooooooooooooooo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoooooooooooooooooooooooo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoooooooooooooooooooooooo/subscriptions", "organizations_url": "https://api.github.com/users/yoooooooooooooooooooooooo/orgs", "repos_url": "https://api.github.com/users/yoooooooooooooooooooooooo/repos", "events_url": "https://api.github.com/users/yoooooooooooooooooooooooo/events{/privacy}", "received_events_url": "https://api.github.com/users/yoooooooooooooooooooooooo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-11T16:26:24Z", "updated_at": "2020-03-12T20:31:31Z", "closed_at": "2018-07-16T14:20:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I open this feature request after a discussion on IRC in #bleach.\r\n\r\n`FEATURE REQUEST` Add a `bleach.sanitizer.ALLOWED_TAGS_EXTENDED` list to bleach. This list should be an extension of `bleach.sanitizer.ALLOWED_TAGS` and should contain more tags that are considered safe but are not an \"extremely minimal set of tags\" as described [in this issue](https://github.com/mozilla/bleach/issues/174#issuecomment-153032248).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/379", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/379/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/379/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/379/events", "html_url": "https://github.com/mozilla/bleach/issues/379", "id": 338360872, "node_id": "MDU6SXNzdWUzMzgzNjA4NzI=", "number": 379, "title": "Some HTML entities are no longer replaced with v2.1.2", "user": {"login": "cbautista1002", "id": 4519518, "node_id": "MDQ6VXNlcjQ1MTk1MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4519518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbautista1002", "html_url": "https://github.com/cbautista1002", "followers_url": "https://api.github.com/users/cbautista1002/followers", "following_url": "https://api.github.com/users/cbautista1002/following{/other_user}", "gists_url": "https://api.github.com/users/cbautista1002/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbautista1002/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbautista1002/subscriptions", "organizations_url": "https://api.github.com/users/cbautista1002/orgs", "repos_url": "https://api.github.com/users/cbautista1002/repos", "events_url": "https://api.github.com/users/cbautista1002/events{/privacy}", "received_events_url": "https://api.github.com/users/cbautista1002/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-04T19:22:33Z", "updated_at": "2018-08-06T14:44:44Z", "closed_at": "2018-08-06T14:44:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I'm currently using v2.0.0 and I have a unit test in my app that confirms that bleach works with my app as we expect. This tests confirms that given `'&eacute` a `\u00e9` is returned. Here's a code snippet:\r\n```python\r\n>>> import bleach\r\n>>> bleach.__version__\r\n'2.0.0'\r\n\r\n>>> bleach.clean('&eacute')\r\n'\u00e9'\r\n```\r\n\r\nThis is no longer that case with v2.1.3 which I'd like to upgrade to.\r\n```python\r\n>>> import bleach\r\n>>> bleach.__version__\r\n'2.1.3'\r\n\r\n>>> bleach.clean('&eacute')\r\n'&amp;eacute'\r\n```\r\n\r\nI checked the [release notes](https://bleach.readthedocs.io/en/latest/changes.html) but I don't see something that would explain this. Unless if #143 is related.\r\n\r\nI'm on python 3.6\r\n\r\nWas this an intentional change? If so, then is there some new doc that can explain what I can expect here? Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/377", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/377/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/377/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/377/events", "html_url": "https://github.com/mozilla/bleach/issues/377", "id": 336430593, "node_id": "MDU6SXNzdWUzMzY0MzA1OTM=", "number": 377, "title": "add support for Python 3.7", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-06-28T00:14:45Z", "updated_at": "2018-10-08T21:11:01Z", "closed_at": "2018-10-08T21:11:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Python 3.7 is out. We should make sure we support it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/376", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/376/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/376/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/376/events", "html_url": "https://github.com/mozilla/bleach/issues/376", "id": 336384286, "node_id": "MDU6SXNzdWUzMzYzODQyODY=", "number": 376, "title": "Error when invalid URL in href (ValueError: Invalid IPv6 URL)", "user": {"login": "antoineleclair", "id": 159290, "node_id": "MDQ6VXNlcjE1OTI5MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/159290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoineleclair", "html_url": "https://github.com/antoineleclair", "followers_url": "https://api.github.com/users/antoineleclair/followers", "following_url": "https://api.github.com/users/antoineleclair/following{/other_user}", "gists_url": "https://api.github.com/users/antoineleclair/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoineleclair/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoineleclair/subscriptions", "organizations_url": "https://api.github.com/users/antoineleclair/orgs", "repos_url": "https://api.github.com/users/antoineleclair/repos", "events_url": "https://api.github.com/users/antoineleclair/events{/privacy}", "received_events_url": "https://api.github.com/users/antoineleclair/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-06-27T20:56:04Z", "updated_at": "2018-07-16T14:12:14Z", "closed_at": "2018-07-16T14:12:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Using `bleach==2.1.3` and Python 3.6.5:\r\n\r\n```python\r\nPython 3.6.5 (default, Jun  6 2018, 19:19:24) \r\n[GCC 6.3.0 20170516] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import bleach\r\n>>> bleach.clean('<a href=\"http://example.com]\">boom</a>')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/__init__.py\", line 99, in clean\r\n    return cleaner.clean(text)\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/sanitizer.py\", line 282, in clean\r\n    return self.serializer.render(filtered)\r\n  File \"/usr/local/lib/python3.6/site-packages/html5lib/serializer.py\", line 398, in render\r\n    return \"\".join(list(self.serialize(treewalker)))\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/sanitizer.py\", line 751, in serialize\r\n    for stoken in super(BleachHTMLSerializer, self).serialize(treewalker, encoding):\r\n  File \"/usr/local/lib/python3.6/site-packages/html5lib/serializer.py\", line 265, in serialize\r\n    for token in treewalker:\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/sanitizer.py\", line 439, in __iter__\r\n    ret = self.sanitize_token(token)\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/sanitizer.py\", line 469, in sanitize_token\r\n    return self.allow_token(token)\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/sanitizer.py\", line 620, in allow_token\r\n    new_value = self.sanitize_uri_value(val, self.allowed_protocols)\r\n  File \"/usr/local/lib/python3.6/site-packages/bleach/sanitizer.py\", line 575, in sanitize_uri_value\r\n    parsed = urlparse(new_value)\r\n  File \"/usr/local/lib/python3.6/urllib/parse.py\", line 368, in urlparse\r\n    splitresult = urlsplit(url, scheme, allow_fragments)\r\n  File \"/usr/local/lib/python3.6/urllib/parse.py\", line 418, in urlsplit\r\n    raise ValueError(\"Invalid IPv6 URL\")\r\nValueError: Invalid IPv6 URL\r\n```\r\n\r\nThis works using `bleach==1.5.0` (that's the version we used before upgrading to 2.1.3).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/374", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/374/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/374/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/374/events", "html_url": "https://github.com/mozilla/bleach/issues/374", "id": 331444771, "node_id": "MDU6SXNzdWUzMzE0NDQ3NzE=", "number": 374, "title": "LinkifyFilter not working for URLs with ampersands", "user": {"login": "Alex3917", "id": 2438318, "node_id": "MDQ6VXNlcjI0MzgzMTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/2438318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alex3917", "html_url": "https://github.com/Alex3917", "followers_url": "https://api.github.com/users/Alex3917/followers", "following_url": "https://api.github.com/users/Alex3917/following{/other_user}", "gists_url": "https://api.github.com/users/Alex3917/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alex3917/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alex3917/subscriptions", "organizations_url": "https://api.github.com/users/Alex3917/orgs", "repos_url": "https://api.github.com/users/Alex3917/repos", "events_url": "https://api.github.com/users/Alex3917/events{/privacy}", "received_events_url": "https://api.github.com/users/Alex3917/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-06-12T05:43:32Z", "updated_at": "2018-10-11T13:03:29Z", "closed_at": "2018-10-11T13:03:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Example with bleach 2.1.3:\r\n\r\n```\r\nfrom bleach import Cleaner\r\nfrom bleach.linkifier import LinkifyFilter\r\n\r\nurl1 = 'http://a.co?b=1&c=2'\r\nurl2 = 'http://a.co?b=1&amp;c=2'\r\n\r\ncleaner = Cleaner(filters=[LinkifyFilter])\r\ncleaner.clean(url1)\r\ncleaner.clean(url2)\r\n```\r\n\r\nBoth result in `<a href=\"http://a.co?b=1\">http://a.co?b=1</a>&amp;c=2`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/373", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/373/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/373/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/373/events", "html_url": "https://github.com/mozilla/bleach/issues/373", "id": 331294455, "node_id": "MDU6SXNzdWUzMzEyOTQ0NTU=", "number": 373, "title": "drop easy_install instructions", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 0, "created_at": "2018-06-11T18:12:46Z", "updated_at": "2018-08-27T17:30:50Z", "closed_at": "2018-08-27T17:30:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`easy_install` is done and we don't test the installation instructions we have for that. We should drop any `easy_install` related instructions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/371", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/371/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/371/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/371/events", "html_url": "https://github.com/mozilla/bleach/issues/371", "id": 330342561, "node_id": "MDU6SXNzdWUzMzAzNDI1NjE=", "number": 371, "title": "Upgrade Twine?", "user": {"login": "brainwane", "id": 842790, "node_id": "MDQ6VXNlcjg0Mjc5MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/842790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brainwane", "html_url": "https://github.com/brainwane", "followers_url": "https://api.github.com/users/brainwane/followers", "following_url": "https://api.github.com/users/brainwane/following{/other_user}", "gists_url": "https://api.github.com/users/brainwane/gists{/gist_id}", "starred_url": "https://api.github.com/users/brainwane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brainwane/subscriptions", "organizations_url": "https://api.github.com/users/brainwane/orgs", "repos_url": "https://api.github.com/users/brainwane/repos", "events_url": "https://api.github.com/users/brainwane/events{/privacy}", "received_events_url": "https://api.github.com/users/brainwane/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-07T16:14:08Z", "updated_at": "2018-06-08T20:27:51Z", "closed_at": "2018-06-07T20:57:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I'm a [Twine](https://twine.readthedocs.io) maintainer; thanks for using Twine. I noticed you've pinned an old version of Twine in [your requirements file](https://github.com/mozilla/bleach/blob/master/requirements.txt#L13). Twine [has changes in 1.11.0](https://twine.readthedocs.io/en/latest/changelog.html) that you might find useful, and I hope you'll upgrade. If you have any trouble upgrading, please do [let us know](https://github.com/pypa/twine/issues).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/370", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/370/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/370/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/370/events", "html_url": "https://github.com/mozilla/bleach/issues/370", "id": 323312408, "node_id": "MDU6SXNzdWUzMjMzMTI0MDg=", "number": 370, "title": "AssertionError in html5lib treebuilder elementInScope()", "user": {"login": "sedrubal", "id": 5571650, "node_id": "MDQ6VXNlcjU1NzE2NTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5571650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sedrubal", "html_url": "https://github.com/sedrubal", "followers_url": "https://api.github.com/users/sedrubal/followers", "following_url": "https://api.github.com/users/sedrubal/following{/other_user}", "gists_url": "https://api.github.com/users/sedrubal/gists{/gist_id}", "starred_url": "https://api.github.com/users/sedrubal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sedrubal/subscriptions", "organizations_url": "https://api.github.com/users/sedrubal/orgs", "repos_url": "https://api.github.com/users/sedrubal/repos", "events_url": "https://api.github.com/users/sedrubal/events{/privacy}", "received_events_url": "https://api.github.com/users/sedrubal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-15T17:27:39Z", "updated_at": "2018-05-15T17:37:38Z", "closed_at": "2018-05-15T17:36:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We're using bleach to sanitize HTML after rendering markdown during a request. There are very many transient errors happening all the time, but we can't debug them / find out the reason. One of them is the following `AssertionError`. Sanitizing the same HTML manually does not crash. But it crashes very often (not always) on our production homepage.\r\n\r\n```py\r\nFile \"utils.py\" in clean_html\r\n  162.     return mark_safe(BLEACH_HTML_CLEANER.clean(untrusted_input))  # our code\r\n\r\nFile \".env/lib/python3.5/site-packages/bleach/sanitizer.py\" in clean\r\n  262.         dom = self.parser.parseFragment(text)\r\n\r\nFile \".env/lib/python3.5/site-packages/html5lib/html5parser.py\" in parseFragment\r\n  317.         self._parse(stream, True, *args, **kwargs)\r\n\r\nFile \".env/lib/python3.5/site-packages/bleach/sanitizer.py\" in _parse\r\n  158.             self.mainLoop()\r\n\r\nFile \".env/lib/python3.5/site-packages/html5lib/html5parser.py\" in mainLoop\r\n  243.                         new_token = phase.processEndTag(new_token)\r\n\r\nFile \".env/lib/python3.5/site-packages/html5lib/html5parser.py\" in processEndTag\r\n  485.             return self.endTagHandler[token[\"name\"]](token)\r\n\r\nFile \".env/lib/python3.5/site-packages/html5lib/html5parser.py\" in endTagHeading\r\n  1444.                 if self.tree.elementInScope(item):\r\n\r\nFile \".env/lib/python3.5/site-packages/html5lib/treebuilders/base.py\" in elementInScope\r\n  216.         assert False  # We should never reach this point\r\n```\r\n\r\n- Python 3.5.2+\r\n- bleach==2.1.3\r\n- html5lib==1.0.1\r\n- Django==1.11.12", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/368", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/368/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/368/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/368/events", "html_url": "https://github.com/mozilla/bleach/issues/368", "id": 318600276, "node_id": "MDU6SXNzdWUzMTg2MDAyNzY=", "number": 368, "title": "Localized TLDs are not parsed by linkify.", "user": {"login": "M1ha-Shvn", "id": 2315339, "node_id": "MDQ6VXNlcjIzMTUzMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2315339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/M1ha-Shvn", "html_url": "https://github.com/M1ha-Shvn", "followers_url": "https://api.github.com/users/M1ha-Shvn/followers", "following_url": "https://api.github.com/users/M1ha-Shvn/following{/other_user}", "gists_url": "https://api.github.com/users/M1ha-Shvn/gists{/gist_id}", "starred_url": "https://api.github.com/users/M1ha-Shvn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/M1ha-Shvn/subscriptions", "organizations_url": "https://api.github.com/users/M1ha-Shvn/orgs", "repos_url": "https://api.github.com/users/M1ha-Shvn/repos", "events_url": "https://api.github.com/users/M1ha-Shvn/events{/privacy}", "received_events_url": "https://api.github.com/users/M1ha-Shvn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}, {"id": 503741547, "node_id": "MDU6TGFiZWw1MDM3NDE1NDc=", "url": "https://api.github.com/repos/mozilla/bleach/labels/needs-your-help", "name": "needs-your-help", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-04-28T04:48:56Z", "updated_at": "2019-12-03T20:22:11Z", "closed_at": "2019-12-03T20:22:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Localized domains like `https://xn--80aaksdi3bpu.xn--p1ai/` are not parsed by linkify. Related issue: https://github.com/mozilla/bleach/issues/367", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/367", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/367/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/367/events", "html_url": "https://github.com/mozilla/bleach/issues/367", "id": 317855814, "node_id": "MDU6SXNzdWUzMTc4NTU4MTQ=", "number": 367, "title": "TLD 'fit' is not recognized", "user": {"login": "M1ha-Shvn", "id": 2315339, "node_id": "MDQ6VXNlcjIzMTUzMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2315339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/M1ha-Shvn", "html_url": "https://github.com/M1ha-Shvn", "followers_url": "https://api.github.com/users/M1ha-Shvn/followers", "following_url": "https://api.github.com/users/M1ha-Shvn/following{/other_user}", "gists_url": "https://api.github.com/users/M1ha-Shvn/gists{/gist_id}", "starred_url": "https://api.github.com/users/M1ha-Shvn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/M1ha-Shvn/subscriptions", "organizations_url": "https://api.github.com/users/M1ha-Shvn/orgs", "repos_url": "https://api.github.com/users/M1ha-Shvn/repos", "events_url": "https://api.github.com/users/M1ha-Shvn/events{/privacy}", "received_events_url": "https://api.github.com/users/M1ha-Shvn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-26T02:30:00Z", "updated_at": "2018-04-26T12:59:02Z", "closed_at": "2018-04-26T12:58:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, url 'http://starproject.fit' is not recognized as link, as 'fit' is not in TLDS list.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/366", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/366/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/366/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/366/events", "html_url": "https://github.com/mozilla/bleach/issues/366", "id": 314450947, "node_id": "MDU6SXNzdWUzMTQ0NTA5NDc=", "number": 366, "title": "Just test if string is a valid URL", "user": {"login": "josephernest", "id": 6168083, "node_id": "MDQ6VXNlcjYxNjgwODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/6168083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephernest", "html_url": "https://github.com/josephernest", "followers_url": "https://api.github.com/users/josephernest/followers", "following_url": "https://api.github.com/users/josephernest/following{/other_user}", "gists_url": "https://api.github.com/users/josephernest/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephernest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephernest/subscriptions", "organizations_url": "https://api.github.com/users/josephernest/orgs", "repos_url": "https://api.github.com/users/josephernest/repos", "events_url": "https://api.github.com/users/josephernest/events{/privacy}", "received_events_url": "https://api.github.com/users/josephernest/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-15T20:52:53Z", "updated_at": "2018-04-16T17:24:26Z", "closed_at": "2018-04-16T13:19:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to use `bleach` to just test if a string is a valid URL? (and not linkify anything but just check)\r\n\r\nExample:\r\n\r\n    bleach.isvalidurl('helloworld') #False\r\n    bleach.isvalidurl('http://helloworld.com/blah?id=127') #True\r\n    bleach.isvalidurl('www.helloworld.com') #False\r\n    bleach.isvalidurl('www.helloworld.com', permissive=True ) #True\r\n\r\nPS: I already use `bleach` for sanitizing/cleaning\r\n\r\nIt would give a definitive answer to this problem: https://stackoverflow.com/q/7160737/1422096 which doesn't really have a good answer (tested, maintained, etc.). (Currently it only has half-working recipes.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/365", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/365/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/365/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/365/events", "html_url": "https://github.com/mozilla/bleach/issues/365", "id": 310245575, "node_id": "MDU6SXNzdWUzMTAyNDU1NzU=", "number": 365, "title": "Hi, My use markdown_tags error", "user": {"login": "yika-aixi", "id": 22412994, "node_id": "MDQ6VXNlcjIyNDEyOTk0", "avatar_url": "https://avatars1.githubusercontent.com/u/22412994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yika-aixi", "html_url": "https://github.com/yika-aixi", "followers_url": "https://api.github.com/users/yika-aixi/followers", "following_url": "https://api.github.com/users/yika-aixi/following{/other_user}", "gists_url": "https://api.github.com/users/yika-aixi/gists{/gist_id}", "starred_url": "https://api.github.com/users/yika-aixi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yika-aixi/subscriptions", "organizations_url": "https://api.github.com/users/yika-aixi/orgs", "repos_url": "https://api.github.com/users/yika-aixi/repos", "events_url": "https://api.github.com/users/yika-aixi/events{/privacy}", "received_events_url": "https://api.github.com/users/yika-aixi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-31T14:42:47Z", "updated_at": "2018-03-31T15:13:04Z", "closed_at": "2018-03-31T15:12:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/363", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/363/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/363/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/363/events", "html_url": "https://github.com/mozilla/bleach/issues/363", "id": 307178175, "node_id": "MDU6SXNzdWUzMDcxNzgxNzU=", "number": 363, "title": "\"&quot;\" in styles should be considered as a valid value", "user": {"login": "lig", "id": 38705, "node_id": "MDQ6VXNlcjM4NzA1", "avatar_url": "https://avatars0.githubusercontent.com/u/38705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lig", "html_url": "https://github.com/lig", "followers_url": "https://api.github.com/users/lig/followers", "following_url": "https://api.github.com/users/lig/following{/other_user}", "gists_url": "https://api.github.com/users/lig/gists{/gist_id}", "starred_url": "https://api.github.com/users/lig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lig/subscriptions", "organizations_url": "https://api.github.com/users/lig/orgs", "repos_url": "https://api.github.com/users/lig/repos", "events_url": "https://api.github.com/users/lig/events{/privacy}", "received_events_url": "https://api.github.com/users/lig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-03-21T09:54:56Z", "updated_at": "2018-04-09T14:40:02Z", "closed_at": "2018-04-09T14:40:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "bleach 2.1.3\r\n\r\nStyle value like this `font-family: &quot;Droid Sans&quot;` is being treated as invalid.\r\n\r\nHowever, this works in most browsers and is, in fact, a common practice.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/359", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/359/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/359/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/359/events", "html_url": "https://github.com/mozilla/bleach/issues/359", "id": 303641081, "node_id": "MDU6SXNzdWUzMDM2NDEwODE=", "number": 359, "title": "bleach 2.1.3 raises KeyError on unknown entity in URI", "user": {"login": "jwhitlock", "id": 286017, "node_id": "MDQ6VXNlcjI4NjAxNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/286017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwhitlock", "html_url": "https://github.com/jwhitlock", "followers_url": "https://api.github.com/users/jwhitlock/followers", "following_url": "https://api.github.com/users/jwhitlock/following{/other_user}", "gists_url": "https://api.github.com/users/jwhitlock/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwhitlock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwhitlock/subscriptions", "organizations_url": "https://api.github.com/users/jwhitlock/orgs", "repos_url": "https://api.github.com/users/jwhitlock/repos", "events_url": "https://api.github.com/users/jwhitlock/events{/privacy}", "received_events_url": "https://api.github.com/users/jwhitlock/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-03-08T21:37:19Z", "updated_at": "2018-08-17T08:22:57Z", "closed_at": "2018-03-19T18:34:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n>>> import bleach\r\n>>> bleach.clean('<a href=\"&xx;https://foo.com\">')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/__init__.py\", line 99, in clean\r\n    return cleaner.clean(text)\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 282, in clean\r\n    return self.serializer.render(filtered)\r\n  File \"/usr/local/lib/python2.7/site-packages/html5lib/serializer.py\", line 398, in render\r\n    return \"\".join(list(self.serialize(treewalker)))\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 751, in serialize\r\n    for stoken in super(BleachHTMLSerializer, self).serialize(treewalker, encoding):\r\n  File \"/usr/local/lib/python2.7/site-packages/html5lib/serializer.py\", line 265, in serialize\r\n    for token in treewalker:\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 439, in __iter__\r\n    ret = self.sanitize_token(token)\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 469, in sanitize_token\r\n    return self.allow_token(token)\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 620, in allow_token\r\n    new_value = self.sanitize_uri_value(val, self.allowed_protocols)\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 557, in sanitize_uri_value\r\n    new_value = convert_entities(value)\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 123, in convert_entities\r\n    new_text.append(convert_entity(entity))\r\n  File \"/usr/local/lib/python2.7/site-packages/bleach/sanitizer.py\", line 101, in convert_entity\r\n    return ENTITIES[value]\r\nKeyError: u'xx'\r\n```\r\n\r\nFound by a developer.mozilla.org user trying out some XSS vectors. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/357", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/357/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/357/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/357/events", "html_url": "https://github.com/mozilla/bleach/issues/357", "id": 302471325, "node_id": "MDU6SXNzdWUzMDI0NzEzMjU=", "number": 357, "title": "\"make doctest\" kicks up lots of failures", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-05T21:32:49Z", "updated_at": "2019-01-09T14:54:30Z", "closed_at": "2019-01-09T14:54:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Running \"make doctest\" in either Python 2 or Python 3 yields a bunch of failures.\r\n\r\nThis issue covers figuring out why and fixing it and then updating the release process to specify which version of Python to run them in.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/352", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/352/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/352/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/352/events", "html_url": "https://github.com/mozilla/bleach/issues/352", "id": 298982263, "node_id": "MDU6SXNzdWUyOTg5ODIyNjM=", "number": 352, "title": "Exceptions on strange Html", "user": {"login": "cbeauchesne", "id": 11915659, "node_id": "MDQ6VXNlcjExOTE1NjU5", "avatar_url": "https://avatars2.githubusercontent.com/u/11915659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeauchesne", "html_url": "https://github.com/cbeauchesne", "followers_url": "https://api.github.com/users/cbeauchesne/followers", "following_url": "https://api.github.com/users/cbeauchesne/following{/other_user}", "gists_url": "https://api.github.com/users/cbeauchesne/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeauchesne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeauchesne/subscriptions", "organizations_url": "https://api.github.com/users/cbeauchesne/orgs", "repos_url": "https://api.github.com/users/cbeauchesne/repos", "events_url": "https://api.github.com/users/cbeauchesne/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeauchesne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-02-21T14:04:17Z", "updated_at": "2018-03-26T13:31:14Z", "closed_at": "2018-03-20T13:45:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nThis small pattern raises an exception : \r\n\r\n    \r\n    import bleach\r\n\r\n    bleach.clean(\"<d {c}>\")\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/351", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/351/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/351/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/351/events", "html_url": "https://github.com/mozilla/bleach/issues/351", "id": 296934952, "node_id": "MDU6SXNzdWUyOTY5MzQ5NTI=", "number": 351, "title": "Support data URIs", "user": {"login": "iurisilvio", "id": 105852, "node_id": "MDQ6VXNlcjEwNTg1Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/105852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iurisilvio", "html_url": "https://github.com/iurisilvio", "followers_url": "https://api.github.com/users/iurisilvio/followers", "following_url": "https://api.github.com/users/iurisilvio/following{/other_user}", "gists_url": "https://api.github.com/users/iurisilvio/gists{/gist_id}", "starred_url": "https://api.github.com/users/iurisilvio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iurisilvio/subscriptions", "organizations_url": "https://api.github.com/users/iurisilvio/orgs", "repos_url": "https://api.github.com/users/iurisilvio/repos", "events_url": "https://api.github.com/users/iurisilvio/events{/privacy}", "received_events_url": "https://api.github.com/users/iurisilvio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-02-14T00:25:11Z", "updated_at": "2018-08-27T13:07:23Z", "closed_at": "2018-08-27T12:10:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "My HTML has some images with data URIs (https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs).\r\n\r\nI can just add `'data'` to `allowed_protocols`, but `html5lib` handle it whitelisting data URI content types too. It is better than allowing any content type.\r\n\r\nI wrote PR #350 for that, copying how html5lib filter works.\r\n\r\nhttps://github.com/html5lib/html5lib-python/blob/f7708c43f86c6e912dd29f3d77bd17bc76695d51/html5lib/filters/sanitizer.py#L825\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/349", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/349/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/349/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/349/events", "html_url": "https://github.com/mozilla/bleach/issues/349", "id": 292476863, "node_id": "MDU6SXNzdWUyOTI0NzY4NjM=", "number": 349, "title": "Linkify with html5lib 1.0.1 not working?", "user": {"login": "ntucker", "id": 866147, "node_id": "MDQ6VXNlcjg2NjE0Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/866147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ntucker", "html_url": "https://github.com/ntucker", "followers_url": "https://api.github.com/users/ntucker/followers", "following_url": "https://api.github.com/users/ntucker/following{/other_user}", "gists_url": "https://api.github.com/users/ntucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/ntucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ntucker/subscriptions", "organizations_url": "https://api.github.com/users/ntucker/orgs", "repos_url": "https://api.github.com/users/ntucker/repos", "events_url": "https://api.github.com/users/ntucker/events{/privacy}", "received_events_url": "https://api.github.com/users/ntucker/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-29T16:41:28Z", "updated_at": "2018-02-12T20:39:52Z", "closed_at": "2018-02-12T20:39:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Starting with my code that calls linkify:\r\n```\r\n  File \"logos/discussion/tasks.py\", line 140, in create_youtube_topic\r\n    paragraphs = bleach.linkify(html.escape(description), callbacks=[external_site]).split('\\n\\n')\r\n  File \"bleach/__init__.py\", line 146, in linkify\r\n    return linker.linkify(text)\r\n  File \"bleach/linkifier.py\", line 157, in linkify\r\n    return self.serializer.render(filtered)\r\n  File \"html5lib/serializer.py\", line 398, in render\r\n    return \"\".join(list(self.serialize(treewalker)))\r\n  File \"html5lib/serializer.py\", line 301, in serialize\r\n    for (_, attr_name), attr_value in token[\"data\"].items():\r\n```\r\n\r\nIt seems like html5lib is expecting something a bit different. Not sure exactly what was going on here, but I have\r\n```\r\nbleach==2.1.2\r\nhtml5lib==1.0.1\r\n```\r\n\r\nin my pip requirements.\r\n\r\nDidn't trace the values all the way through manually so if I'm using this wrong, guidance would be appreciated. (html.escape is from django and should return a string, so it seems odd that my line would be the issue)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/348", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/348/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/348/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/348/events", "html_url": "https://github.com/mozilla/bleach/issues/348", "id": 290070120, "node_id": "MDU6SXNzdWUyOTAwNzAxMjA=", "number": 348, "title": "allow sanitization of attributes based on attribute value", "user": {"login": "inducer", "id": 352067, "node_id": "MDQ6VXNlcjM1MjA2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/352067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inducer", "html_url": "https://github.com/inducer", "followers_url": "https://api.github.com/users/inducer/followers", "following_url": "https://api.github.com/users/inducer/following{/other_user}", "gists_url": "https://api.github.com/users/inducer/gists{/gist_id}", "starred_url": "https://api.github.com/users/inducer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inducer/subscriptions", "organizations_url": "https://api.github.com/users/inducer/orgs", "repos_url": "https://api.github.com/users/inducer/repos", "events_url": "https://api.github.com/users/inducer/events{/privacy}", "received_events_url": "https://api.github.com/users/inducer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-01-19T18:43:17Z", "updated_at": "2018-02-21T14:11:54Z", "closed_at": "2018-01-23T05:19:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm following up from #346 (closed), which covered my need of letting some (but not all) `data:` URLs in `src` attributes pass the sanitizer. What that PR did was piggyback on attribute filters to determine when a value should be allowed to bypass [this logc](https://github.com/mozilla/bleach/blob/8706b5373b633407e804b1b2975edf8760067ff7/bleach/sanitizer.py#L511-L549) that is otherwise unconditionally applied.\r\n\r\nIn that PR, @willkg said:\r\n\r\n> I suspect you can achieve what you're trying to achieve without making a substantial behavior change to Bleach.\r\n\r\nUnless `data:` is added to the `allowed_protocols` (which seems risky), I don't see how this could be accomplished, but I would be happy to be educated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/347", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/347/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/347/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/347/events", "html_url": "https://github.com/mozilla/bleach/issues/347", "id": 289655486, "node_id": "MDU6SXNzdWUyODk2NTU0ODY=", "number": 347, "title": "Wrong output on passing \"<>\" to clean method", "user": {"login": "karthiksai19", "id": 35569230, "node_id": "MDQ6VXNlcjM1NTY5MjMw", "avatar_url": "https://avatars0.githubusercontent.com/u/35569230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karthiksai19", "html_url": "https://github.com/karthiksai19", "followers_url": "https://api.github.com/users/karthiksai19/followers", "following_url": "https://api.github.com/users/karthiksai19/following{/other_user}", "gists_url": "https://api.github.com/users/karthiksai19/gists{/gist_id}", "starred_url": "https://api.github.com/users/karthiksai19/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karthiksai19/subscriptions", "organizations_url": "https://api.github.com/users/karthiksai19/orgs", "repos_url": "https://api.github.com/users/karthiksai19/repos", "events_url": "https://api.github.com/users/karthiksai19/events{/privacy}", "received_events_url": "https://api.github.com/users/karthiksai19/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-18T14:50:43Z", "updated_at": "2018-01-19T14:18:31Z", "closed_at": "2018-01-19T14:18:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Imported Cleaner from bleach.sanitizer\r\nchlorine=Cleaner(tags=[], attributes=[], styles=[], protocols=[], strip=True, strip_comments=True)\r\nprint(cleaner.clean(\"<>\")) gives the output in the image\r\n\r\n![bleach](https://user-images.githubusercontent.com/35569230/35103795-f620db18-fc8c-11e7-9610-c9af9684ca34.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/344", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/344/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/344/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/344/events", "html_url": "https://github.com/mozilla/bleach/issues/344", "id": 283981478, "node_id": "MDU6SXNzdWUyODM5ODE0Nzg=", "number": 344, "title": "sources download link in pypi broken", "user": {"login": "scphantm", "id": 777850, "node_id": "MDQ6VXNlcjc3Nzg1MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/777850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scphantm", "html_url": "https://github.com/scphantm", "followers_url": "https://api.github.com/users/scphantm/followers", "following_url": "https://api.github.com/users/scphantm/following{/other_user}", "gists_url": "https://api.github.com/users/scphantm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scphantm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scphantm/subscriptions", "organizations_url": "https://api.github.com/users/scphantm/orgs", "repos_url": "https://api.github.com/users/scphantm/repos", "events_url": "https://api.github.com/users/scphantm/events{/privacy}", "received_events_url": "https://api.github.com/users/scphantm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-21T19:30:16Z", "updated_at": "2017-12-21T21:04:11Z", "closed_at": "2017-12-21T21:04:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "on pypi, the sources download for 2.1.2 is busted.  This is causing big problems for me.  the link on the pypi site is \r\n\r\nhttps://pypi.python.org/packages/b3/5f/0da670d30d3ffbc57cc97fa82947f81bbe3eab8d441e2d42e661f215baf2/bleach-2.1.2.tar.gz#md5=d0b14ae43a437ee0c650e04c6063eedd\r\n\r\nwhen you try to click that on a browser, i get a network error.  The wheel downloads fine, but i need the sources fixed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/340", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/340/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/340/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/340/events", "html_url": "https://github.com/mozilla/bleach/issues/340", "id": 280801170, "node_id": "MDU6SXNzdWUyODA4MDExNzA=", "number": 340, "title": "ImportError: cannot import name ReparseException", "user": {"login": "DudkinON", "id": 26848929, "node_id": "MDQ6VXNlcjI2ODQ4OTI5", "avatar_url": "https://avatars0.githubusercontent.com/u/26848929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DudkinON", "html_url": "https://github.com/DudkinON", "followers_url": "https://api.github.com/users/DudkinON/followers", "following_url": "https://api.github.com/users/DudkinON/following{/other_user}", "gists_url": "https://api.github.com/users/DudkinON/gists{/gist_id}", "starred_url": "https://api.github.com/users/DudkinON/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DudkinON/subscriptions", "organizations_url": "https://api.github.com/users/DudkinON/orgs", "repos_url": "https://api.github.com/users/DudkinON/repos", "events_url": "https://api.github.com/users/DudkinON/events{/privacy}", "received_events_url": "https://api.github.com/users/DudkinON/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-10T11:14:24Z", "updated_at": "2017-12-10T13:57:46Z", "closed_at": "2017-12-10T13:57:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to run the flask app with docker-compose. When I run docker container, I get following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 17, in <module>\r\n    from bleach import clean\r\n  File \"/usr/local/lib/python2.7/dist-packages/bleach/__init__.py\", line 11, in <module>\r\n    from bleach.sanitizer import (\r\n  File \"/usr/local/lib/python2.7/dist-packages/bleach/sanitizer.py\", line 10, in <module>\r\n    from html5lib.constants import (\r\nImportError: cannot import name ReparseException\r\n```\r\nCan someone help me solve this issue? Thanks in advance. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/339", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/339/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/339/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/339/events", "html_url": "https://github.com/mozilla/bleach/issues/339", "id": 280476452, "node_id": "MDU6SXNzdWUyODA0NzY0NTI=", "number": 339, "title": "Add upper limit to html5lib dependency", "user": {"login": "timster", "id": 173666, "node_id": "MDQ6VXNlcjE3MzY2Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/173666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timster", "html_url": "https://github.com/timster", "followers_url": "https://api.github.com/users/timster/followers", "following_url": "https://api.github.com/users/timster/following{/other_user}", "gists_url": "https://api.github.com/users/timster/gists{/gist_id}", "starred_url": "https://api.github.com/users/timster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timster/subscriptions", "organizations_url": "https://api.github.com/users/timster/orgs", "repos_url": "https://api.github.com/users/timster/repos", "events_url": "https://api.github.com/users/timster/events{/privacy}", "received_events_url": "https://api.github.com/users/timster/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-12-08T12:38:29Z", "updated_at": "2017-12-15T14:53:41Z", "closed_at": "2017-12-08T13:05:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "As you probably know, html5lib updating their version to 1.0.1 caused a problem for anyone trying to install bleach 2.1.1. This was solved quickly (thank you!) by releasing 2.1.2 with changes to support html5lib 1.0.1.\r\n\r\nWith something like this in `install_requires`, bleach 2.1.1 would have continuted to work.\r\n\r\n`html5lib>=0.99999999pre,<1`\r\n\r\nWIth the current dependency requirement, future releases of html5lib can break current versions of bleach.\r\n\r\nWould you consider adding an upper limit to the dependency going forward? Might be a little easier now that html5lib is on semver. Maybe something like this:\r\n\r\n`html5lib>=1.0.1,<1.1`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/337", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/337/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/337/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/337/events", "html_url": "https://github.com/mozilla/bleach/issues/337", "id": 280149952, "node_id": "MDU6SXNzdWUyODAxNDk5NTI=", "number": 337, "title": "Bleach breaks with latest html5lib release", "user": {"login": "rixx", "id": 2657547, "node_id": "MDQ6VXNlcjI2NTc1NDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2657547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rixx", "html_url": "https://github.com/rixx", "followers_url": "https://api.github.com/users/rixx/followers", "following_url": "https://api.github.com/users/rixx/following{/other_user}", "gists_url": "https://api.github.com/users/rixx/gists{/gist_id}", "starred_url": "https://api.github.com/users/rixx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rixx/subscriptions", "organizations_url": "https://api.github.com/users/rixx/orgs", "repos_url": "https://api.github.com/users/rixx/repos", "events_url": "https://api.github.com/users/rixx/events{/privacy}", "received_events_url": "https://api.github.com/users/rixx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-07T14:30:09Z", "updated_at": "2017-12-07T15:57:42Z", "closed_at": "2017-12-07T15:57:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Upgrading to `html5lib-1.0.1` breaks, as they made their `ReparseException` class private as per html5lib/html5lib-python#371. This breaks bleach *on import*:\r\n\r\n```\r\n  File \"/home/rixx/Projects/chaos/pretalx/src/pretalx/mail/models.py\", line 3, in <module>\r\n    import bleach\r\n  File \"/home/rixx/.virtualenvs/pretalx/lib/python3.6/site-packages/bleach/__init__.py\", line 11, in <module>\r\n    from bleach.sanitizer import (\r\n  File \"/home/rixx/.virtualenvs/pretalx/lib/python3.6/site-packages/bleach/sanitizer.py\", line 10, in <module>\r\n    from html5lib.constants import (\r\nImportError: cannot import name 'ReparseException'\r\n```\r\n\r\nbleach is also at its latest version. For all concerned: pinning html5lib to `html5lib==1.0b10` resolves the issue until a new (fixed) bleach release is out there, or manually install it with `pip install html5lib==1.0b10`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/334", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/334/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/334/events", "html_url": "https://github.com/mozilla/bleach/issues/334", "id": 274227680, "node_id": "MDU6SXNzdWUyNzQyMjc2ODA=", "number": 334, "title": "Cleaner.clean raises TypeError if text=None", "user": {"login": "j-i-l", "id": 5672798, "node_id": "MDQ6VXNlcjU2NzI3OTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5672798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j-i-l", "html_url": "https://github.com/j-i-l", "followers_url": "https://api.github.com/users/j-i-l/followers", "following_url": "https://api.github.com/users/j-i-l/following{/other_user}", "gists_url": "https://api.github.com/users/j-i-l/gists{/gist_id}", "starred_url": "https://api.github.com/users/j-i-l/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j-i-l/subscriptions", "organizations_url": "https://api.github.com/users/j-i-l/orgs", "repos_url": "https://api.github.com/users/j-i-l/repos", "events_url": "https://api.github.com/users/j-i-l/events{/privacy}", "received_events_url": "https://api.github.com/users/j-i-l/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-11-15T16:50:30Z", "updated_at": "2017-11-15T17:05:52Z", "closed_at": "2017-11-15T16:55:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/mozilla/bleach/blob/19dd5ba885e5429cef63a4531675a73ca668edcc/bleach/sanitizer.py#L186-L203\r\n\r\nThis can happen when running migration in Django (1.11) in Python 2.7 using the [html_sanitizer](https://github.com/ui/django-html_sanitizer) app. The model field in question is [SanitizedTextField](https://github.com/ui/django-html_sanitizer/blob/master/sanitizer/models.py#L32) although I doubt this is of importance here.\r\n\r\nNot sure if this is the desired behavior, if not the `if not text:` clause from L201 could simply be moved above the instance check.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/333", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/333/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/333/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/333/events", "html_url": "https://github.com/mozilla/bleach/issues/333", "id": 273242923, "node_id": "MDU6SXNzdWUyNzMyNDI5MjM=", "number": 333, "title": "cannot add 'rel' attribute to <a> tag; bleach deletes it", "user": {"login": "mikejohnsonjr", "id": 10016923, "node_id": "MDQ6VXNlcjEwMDE2OTIz", "avatar_url": "https://avatars3.githubusercontent.com/u/10016923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikejohnsonjr", "html_url": "https://github.com/mikejohnsonjr", "followers_url": "https://api.github.com/users/mikejohnsonjr/followers", "following_url": "https://api.github.com/users/mikejohnsonjr/following{/other_user}", "gists_url": "https://api.github.com/users/mikejohnsonjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikejohnsonjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikejohnsonjr/subscriptions", "organizations_url": "https://api.github.com/users/mikejohnsonjr/orgs", "repos_url": "https://api.github.com/users/mikejohnsonjr/repos", "events_url": "https://api.github.com/users/mikejohnsonjr/events{/privacy}", "received_events_url": "https://api.github.com/users/mikejohnsonjr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-12T16:23:22Z", "updated_at": "2017-11-13T02:06:52Z", "closed_at": "2017-11-13T02:06:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "See title. \r\n\r\n`In [30]: bleach.clean('<a href=\"test\" rel=\"testt\">Test</a>');\r\nOut[30]: u'<a href=\"test\">Test</a>'`\r\n\r\nHowever in your README, bleach allows rel tags through linkify. Please update code to allow rel attribute in <a> tags. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/330", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/330/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/330/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/330/events", "html_url": "https://github.com/mozilla/bleach/issues/330", "id": 265512254, "node_id": "MDU6SXNzdWUyNjU1MTIyNTQ=", "number": 330, "title": "Conditionally allow tag based on an attribute value?", "user": {"login": "russellballestrini", "id": 909098, "node_id": "MDQ6VXNlcjkwOTA5OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/909098?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russellballestrini", "html_url": "https://github.com/russellballestrini", "followers_url": "https://api.github.com/users/russellballestrini/followers", "following_url": "https://api.github.com/users/russellballestrini/following{/other_user}", "gists_url": "https://api.github.com/users/russellballestrini/gists{/gist_id}", "starred_url": "https://api.github.com/users/russellballestrini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russellballestrini/subscriptions", "organizations_url": "https://api.github.com/users/russellballestrini/orgs", "repos_url": "https://api.github.com/users/russellballestrini/repos", "events_url": "https://api.github.com/users/russellballestrini/events{/privacy}", "received_events_url": "https://api.github.com/users/russellballestrini/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-14T18:20:34Z", "updated_at": "2017-10-20T13:49:17Z", "closed_at": "2017-10-20T13:49:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to conditionally allow a `tag` based on an `attribute` `value`?\r\n\r\nFor example, I want to allow user generated MathJax rendering.  An example MathJax markup looks like this:\r\n\r\n```html\r\n<script type=\"math/tex; mode=display\">y=x^2</script> \r\n```\r\n\r\nI want to do something like refuse all `script` tags unless `allow_mathjax`:\r\n\r\n```python\r\n\r\nfrom markdown import markdown\r\n\r\nfrom bleach import clean\r\n\r\nfrom bleach_whitelist import (\r\n  markdown_tags,\r\n  markdown_attrs,\r\n  all_styles\r\n)\r\n\r\nmaybe_safe_tags = ['pre', 'table', 'tr', 'td']\r\n\r\ntags = markdown_tags + maybe_safe_tags\r\nattrs = markdown_attrs\r\n\r\nattrs['img'].append('width')\r\nattrs['span'] = ['class']\r\n\r\ndef allow_mathjax(tag, name, value):\r\n    return tag == 'script' and name == 'type' and value == 'math/tex; mode=display'\r\n\r\nattrs['script'] = allow_mathjax\r\n\r\ndef markdown_to_html(data):\r\n    \"\"\"Accepts a markdown string, sanitizes and returns HTML\"\"\"\r\n    raw_html = markdown(data,\r\n                   extensions = [\r\n                     'markdown.extensions.codehilite',\r\n                     'markdown.extensions.fenced_code',\r\n                     # python-markdown-math.\r\n                     'mdx_math',\r\n                   ])\r\n    return clean(raw_html, tags, attrs, all_styles)\r\n```\r\n\r\nThe problem is, as soon as I add `'script'` to `maybe_safe_tags` it starts allowing evil things like:\r\n\r\n```javascript\r\n\r\n<script>alert(document.cookie);</script>\r\n```\r\n\r\nDoes anyone have any hints?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/328", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/328/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/328/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/328/events", "html_url": "https://github.com/mozilla/bleach/issues/328", "id": 262169589, "node_id": "MDU6SXNzdWUyNjIxNjk1ODk=", "number": 328, "title": "drop support for python 3.3", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-02T17:52:58Z", "updated_at": "2018-06-07T18:26:09Z", "closed_at": "2018-06-07T18:26:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Python 3.3 is no longer supported by Python devs as of 2017-09-29:\r\n\r\nhttps://docs.python.org/devguide/index.html#status-of-python-branches\r\n\r\nNext major version of Bleach should drop support for it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/324", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/324/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/324/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/324/events", "html_url": "https://github.com/mozilla/bleach/issues/324", "id": 261471437, "node_id": "MDU6SXNzdWUyNjE0NzE0Mzc=", "number": 324, "title": "UnicodeDecodeError on setup", "user": {"login": "EP01", "id": 22454118, "node_id": "MDQ6VXNlcjIyNDU0MTE4", "avatar_url": "https://avatars1.githubusercontent.com/u/22454118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EP01", "html_url": "https://github.com/EP01", "followers_url": "https://api.github.com/users/EP01/followers", "following_url": "https://api.github.com/users/EP01/following{/other_user}", "gists_url": "https://api.github.com/users/EP01/gists{/gist_id}", "starred_url": "https://api.github.com/users/EP01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EP01/subscriptions", "organizations_url": "https://api.github.com/users/EP01/orgs", "repos_url": "https://api.github.com/users/EP01/repos", "events_url": "https://api.github.com/users/EP01/events{/privacy}", "received_events_url": "https://api.github.com/users/EP01/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/8", "html_url": "https://github.com/mozilla/bleach/milestone/8", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/8/labels", "id": 2802872, "node_id": "MDk6TWlsZXN0b25lMjgwMjg3Mg==", "number": 8, "title": "v2.1.1", "description": "Fix minor nits from 2.1.1.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2017-09-29T13:26:36Z", "updated_at": "2018-08-26T20:14:41Z", "due_on": "2017-10-07T07:00:00Z", "closed_at": "2018-08-26T20:14:41Z"}, "comments": 5, "created_at": "2017-09-28T21:47:58Z", "updated_at": "2017-10-03T07:38:51Z", "closed_at": "2017-10-02T17:50:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm seeing the following error when trying to compile version 2.1 of `bleach`.\r\n\r\n``` \r\npython3 setup.py build -b __py3_build\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 45, in <module>\r\n    long_description=get_long_desc(),\r\n  File \"setup.py\", line 30, in get_long_desc\r\n    desc += open('CHANGES').read()\r\n  File \"/usr/lib/python3.5/encodings/ascii.py\", line 26, in decode\r\n    return codecs.ascii_decode(input, self.errors)[0]\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 1236: ordinal not in range(128)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/322", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/322/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/322/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/322/events", "html_url": "https://github.com/mozilla/bleach/issues/322", "id": 260445908, "node_id": "MDU6SXNzdWUyNjA0NDU5MDg=", "number": 322, "title": "Linkify creates http link in mail addresses when host contains a hyphen", "user": {"login": "sedrubal", "id": 5571650, "node_id": "MDQ6VXNlcjU1NzE2NTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5571650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sedrubal", "html_url": "https://github.com/sedrubal", "followers_url": "https://api.github.com/users/sedrubal/followers", "following_url": "https://api.github.com/users/sedrubal/following{/other_user}", "gists_url": "https://api.github.com/users/sedrubal/gists{/gist_id}", "starred_url": "https://api.github.com/users/sedrubal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sedrubal/subscriptions", "organizations_url": "https://api.github.com/users/sedrubal/orgs", "repos_url": "https://api.github.com/users/sedrubal/repos", "events_url": "https://api.github.com/users/sedrubal/events{/privacy}", "received_events_url": "https://api.github.com/users/sedrubal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-25T23:30:34Z", "updated_at": "2019-09-05T20:32:28Z", "closed_at": "2019-09-05T20:32:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Linkify recognizes part of mail addresses with an hyphen (`-`) in the host part as link, (even) if `parse_email=False`:\r\n\r\n```python\r\n>>> linkify('foo@bar-baz.com')\r\n'foo@bar<a href=\"http://-baz.com\" rel=\"nofollow\">-baz.com</a>'\r\n```\r\n\r\nOne outcome of this is #300 which was fixed with #302.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/316", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/316/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/316/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/316/events", "html_url": "https://github.com/mozilla/bleach/issues/316", "id": 259162771, "node_id": "MDU6SXNzdWUyNTkxNjI3NzE=", "number": 316, "title": "move html5lib override code into separate \"html5lib shim\" module", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 0, "created_at": "2017-09-20T13:27:35Z", "updated_at": "2018-09-04T12:37:45Z", "closed_at": "2018-09-04T12:37:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We're increasingly subclassing html5lib classes and overriding behavior and that code is getting tangled with Bleach's behavior code. I'm concerned this is getting worse over time and it'll become increasingly more difficult to upgrade it to support new versions of html5lib.\r\n\r\nI think it behooves us to centralize and move the html5lib shim code into a separate module with a \"defined API\" and then change the Bleach code to sit on top of that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/313", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/313/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/313/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/313/events", "html_url": "https://github.com/mozilla/bleach/issues/313", "id": 259021257, "node_id": "MDU6SXNzdWUyNTkwMjEyNTc=", "number": 313, "title": "add code of conduct file", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-20T02:35:26Z", "updated_at": "2017-09-20T13:06:42Z", "closed_at": "2017-09-20T13:04:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We should add a code of conduct file so everyone participating has a clear understanding of what we expect in regards to how we treat one another.\r\n\r\nWe should probably copy the one that addons uses:\r\n\r\nhttps://github.com/mozilla/addons-server/blob/master/CODE_OF_CONDUCT.md", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/307", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/307/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/307/events", "html_url": "https://github.com/mozilla/bleach/issues/307", "id": 258916093, "node_id": "MDU6SXNzdWUyNTg5MTYwOTM=", "number": 307, "title": "rework versioning", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-19T18:19:39Z", "updated_at": "2017-09-19T19:09:05Z", "closed_at": "2017-09-19T19:09:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The way bleach stores the version is in `bleach/version.py` and it's done as a tuple of ints. That's kind of annoying for a few reasons:\r\n\r\n1. it makes it hard to do versions like `dev0` or anything that involves a non-int\r\n2. while a tuple of ints is comparable, it's better to do version strings and use `pkg_resources.parse_version` for things to compare with per the rules in PEP 440\r\n\r\nThis issue covers moving some things around and redoing that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/305", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/305/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/305/events", "html_url": "https://github.com/mozilla/bleach/issues/305", "id": 258040771, "node_id": "MDU6SXNzdWUyNTgwNDA3NzE=", "number": 305, "title": "Width style stripped from img tag", "user": {"login": "jeffoneill", "id": 166472, "node_id": "MDQ6VXNlcjE2NjQ3Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/166472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffoneill", "html_url": "https://github.com/jeffoneill", "followers_url": "https://api.github.com/users/jeffoneill/followers", "following_url": "https://api.github.com/users/jeffoneill/following{/other_user}", "gists_url": "https://api.github.com/users/jeffoneill/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffoneill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffoneill/subscriptions", "organizations_url": "https://api.github.com/users/jeffoneill/orgs", "repos_url": "https://api.github.com/users/jeffoneill/repos", "events_url": "https://api.github.com/users/jeffoneill/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffoneill/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-15T13:31:14Z", "updated_at": "2017-09-15T13:38:06Z", "closed_at": "2017-09-15T13:34:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using bleach 2.0 as indicated below.  Even though I allow width and height in styles, it is being stripped from the img tag.\r\n\r\nIs this a bug?\r\n\r\n```\r\n>>> tags = [\"p\", \"br\", \"img\", \"strong\", \"em\", \"u\", \"ol\", \"ul\", \"li\" ,\"a\",\r\n...         \"table\", \"caption\", \"tbody\", \"thead\", \"tfoot\", \"th\", \"td\", \"tr\", \"hr\"]\r\n>>> attrs = [\"src\", \"alt\", \"title\", \"colspan\", \"rowspan\", \"target\", \"href\",\r\n...              \"align\", \"border\", \"cellpadding\", \"cellspacing\", \"summary\",\r\n...              \"scope\"]\r\n>>> styles = [\"width\", \"height\", \"border-color\", \"background-color\",\r\n...               \"white-space\", \"vertical-align\", \"text-align\",\r\n...               \"border-style\", \"border-width\", \"float\", \"margin\",\r\n...               \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\"]\r\n>>> bleach.clean(\"\"\"<img src=\"https://www.example.com/a.jpg\" style=\"height:184px; width:180px\" />\"\"\", tags=tags,attributes=attrs, styles=styles) \r\nu'<img src=\"https://www.example.com/a.jpg\">'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/304", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/304/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/304/events", "html_url": "https://github.com/mozilla/bleach/issues/304", "id": 255171054, "node_id": "MDU6SXNzdWUyNTUxNzEwNTQ=", "number": 304, "title": "Cleaning comments in style-tags", "user": {"login": "rickardlindberg", "id": 341963, "node_id": "MDQ6VXNlcjM0MTk2Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/341963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickardlindberg", "html_url": "https://github.com/rickardlindberg", "followers_url": "https://api.github.com/users/rickardlindberg/followers", "following_url": "https://api.github.com/users/rickardlindberg/following{/other_user}", "gists_url": "https://api.github.com/users/rickardlindberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickardlindberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickardlindberg/subscriptions", "organizations_url": "https://api.github.com/users/rickardlindberg/orgs", "repos_url": "https://api.github.com/users/rickardlindberg/repos", "events_url": "https://api.github.com/users/rickardlindberg/events{/privacy}", "received_events_url": "https://api.github.com/users/rickardlindberg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-09-05T06:24:06Z", "updated_at": "2017-09-05T17:54:15Z", "closed_at": "2017-09-05T13:57:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the following snippet, I expected the comment in the style tag to be removed as well, but it is not. Is this expected behavior? How can I also get rid of the comments inside style tags?\r\n```\r\n>>> html = \"foo <strong>a <!-- what --> b</strong> <style type='text/css'>a <!-- what --> b</style> bar\"\r\n>>> bleach.clean(html, tags=[\"strong\", \"style\"], strip_comments=True)\r\n'foo <strong>a  b</strong> <style>a <!-- what --> b</style> bar'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/303", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/303/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/303/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/303/events", "html_url": "https://github.com/mozilla/bleach/issues/303", "id": 254810504, "node_id": "MDU6SXNzdWUyNTQ4MTA1MDQ=", "number": 303, "title": "clarify security-issue status for Bleach", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-02T13:04:37Z", "updated_at": "2017-09-19T14:52:21Z", "closed_at": "2017-09-19T14:52:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We have a proper security issue reporting process, but there's nothing in the documentation that covers what happens after that and what we promise.\r\n\r\nThis issue covers documenting that.\r\n\r\nPlus we should probably go through CHANGES and make sure it points out security fixes if there were any. Pretty sure I did an audit a while back, but it's worth doing again.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/300", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/300/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/300/events", "html_url": "https://github.com/mozilla/bleach/issues/300", "id": 251509021, "node_id": "MDU6SXNzdWUyNTE1MDkwMjE=", "number": 300, "title": "Linkify creates http link in mailto link when host contains a hyphen", "user": {"login": "sedrubal", "id": 5571650, "node_id": "MDQ6VXNlcjU1NzE2NTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5571650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sedrubal", "html_url": "https://github.com/sedrubal", "followers_url": "https://api.github.com/users/sedrubal/followers", "following_url": "https://api.github.com/users/sedrubal/following{/other_user}", "gists_url": "https://api.github.com/users/sedrubal/gists{/gist_id}", "starred_url": "https://api.github.com/users/sedrubal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sedrubal/subscriptions", "organizations_url": "https://api.github.com/users/sedrubal/orgs", "repos_url": "https://api.github.com/users/sedrubal/repos", "events_url": "https://api.github.com/users/sedrubal/events{/privacy}", "received_events_url": "https://api.github.com/users/sedrubal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}, {"id": 503741547, "node_id": "MDU6TGFiZWw1MDM3NDE1NDc=", "url": "https://api.github.com/repos/mozilla/bleach/labels/needs-your-help", "name": "needs-your-help", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/6", "html_url": "https://github.com/mozilla/bleach/milestone/6", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/6/labels", "id": 2778687, "node_id": "MDk6TWlsZXN0b25lMjc3ODY4Nw==", "number": 6, "title": "v2.1", "description": "Minor clean up for things. Some bug fixes.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2017-09-19T19:51:17Z", "updated_at": "2017-09-28T15:20:02Z", "due_on": "2017-09-30T07:00:00Z", "closed_at": "2017-09-28T15:20:02Z"}, "comments": 10, "created_at": "2017-08-20T19:26:25Z", "updated_at": "2017-09-25T23:31:14Z", "closed_at": "2017-09-19T17:29:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Linkify creates http links **in** mailto links if the mail host name contains a hyphen `-` (and `parse_email=True`). The http link starts with the hyphen, even if host names mustn't start with hyphens at all (https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames).\r\n\r\n```py\r\n>>> linkify('foo@exa-mple.com', parse_email=True)\r\n'<a href=\"mailto:foo@exa-mple.com\">foo@exa<a href=\"http://-mple.com\" rel=\"nofollow\">-mple.com</a></a>'\r\n```\r\nThis is what the link looks like: <a href=\"mailto:foo@exa-mple.com\">foo@exa<a href=\"http://-mple.com\" rel=\"nofollow\">-mple.com</a></a> :smile:", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/298", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/298/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/298/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/298/events", "html_url": "https://github.com/mozilla/bleach/issues/298", "id": 247849596, "node_id": "MDU6SXNzdWUyNDc4NDk1OTY=", "number": 298, "title": "Should bleach sanitize certain python escape characters?", "user": {"login": "jvanasco", "id": 204779, "node_id": "MDQ6VXNlcjIwNDc3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/204779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvanasco", "html_url": "https://github.com/jvanasco", "followers_url": "https://api.github.com/users/jvanasco/followers", "following_url": "https://api.github.com/users/jvanasco/following{/other_user}", "gists_url": "https://api.github.com/users/jvanasco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvanasco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvanasco/subscriptions", "organizations_url": "https://api.github.com/users/jvanasco/orgs", "repos_url": "https://api.github.com/users/jvanasco/repos", "events_url": "https://api.github.com/users/jvanasco/events{/privacy}", "received_events_url": "https://api.github.com/users/jvanasco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37900, "node_id": "MDU6TGFiZWwzNzkwMA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/security", "name": "security", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/6", "html_url": "https://github.com/mozilla/bleach/milestone/6", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/6/labels", "id": 2778687, "node_id": "MDk6TWlsZXN0b25lMjc3ODY4Nw==", "number": 6, "title": "v2.1", "description": "Minor clean up for things. Some bug fixes.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2017-09-19T19:51:17Z", "updated_at": "2017-09-28T15:20:02Z", "due_on": "2017-09-30T07:00:00Z", "closed_at": "2017-09-28T15:20:02Z"}, "comments": 6, "created_at": "2017-08-03T22:08:29Z", "updated_at": "2020-02-05T13:51:28Z", "closed_at": "2017-09-28T14:53:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "doing an audit and updating some tests, I decided to put bleach through some of python's escape characters.\r\n\r\n* https://docs.python.org/2/reference/lexical_analysis.html#string-literals\r\n* https://docs.python.org/3.6/reference/lexical_analysis.html#string-and-bytes-literals\r\n\r\nThese were largely left as-is, and probably should be sanitized:\r\n\r\n* bell\r\n* vertical tab\r\n* backspace\r\n* formfeed\r\n\r\nthere is also the `\\N{name}` (unicode decode swap), and `\\ooo` (octal), and `\\xhh` (hex) ways to drop in some of these chars as well.\r\n\r\n\r\n# questionable \r\n\r\nBell `\\a`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\ac\"))\r\nac\r\n>>> print(bleach.clean(\"a\\ac\")).__repr__()\r\nu'a\\x07c'\r\n```\r\n\r\nVertical Tab `\\v`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\vc\"))\r\na\r\n c\r\n>>> print(bleach.clean(\"a\\vc\")).__repr__()\r\nu'a\\x0bc'\r\n```\r\n\r\nBackspace `\\b`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\bc\"))\r\nc\r\n>>> print(bleach.clean(\"a\\bc\")).__repr__()\r\nu'a\\x08c'\r\n```\r\n\r\nFormfeed `\\f`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\fc\"))\r\nc\r\n>>> print(bleach.clean(\"a\\fc\")).__repr__()\r\nu'a\\x0cc'\r\n```\r\n\r\n# ok\r\n\r\nCarriage Return\t`\\r`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\rc\"))\r\na\r\nc\r\n>>> print(bleach.clean(\"a\\rc\")).__repr__()\r\nu'a\\nc'\r\n```\r\n\r\nLine Feed `\\n`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\nc\"))\r\na\r\nc\r\n>>> print(bleach.clean(\"a\\nc\")).__repr__()\r\nu'a\\nc'\r\n```\r\n\r\nTab `\\n`\r\n\r\n```\r\n>>> print(bleach.clean(\"a\\tc\"))\r\na\tc\r\n>>> print(bleach.clean(\"a\\tc\")).__repr__()\r\nu'a\\tc'\r\n```\t ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/297", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/297/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/297/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/297/events", "html_url": "https://github.com/mozilla/bleach/issues/297", "id": 247814592, "node_id": "MDU6SXNzdWUyNDc4MTQ1OTI=", "number": 297, "title": "option to collapse fully-sanitized lines when cleaning", "user": {"login": "jvanasco", "id": 204779, "node_id": "MDQ6VXNlcjIwNDc3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/204779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvanasco", "html_url": "https://github.com/jvanasco", "followers_url": "https://api.github.com/users/jvanasco/followers", "following_url": "https://api.github.com/users/jvanasco/following{/other_user}", "gists_url": "https://api.github.com/users/jvanasco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvanasco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvanasco/subscriptions", "organizations_url": "https://api.github.com/users/jvanasco/orgs", "repos_url": "https://api.github.com/users/jvanasco/repos", "events_url": "https://api.github.com/users/jvanasco/events{/privacy}", "received_events_url": "https://api.github.com/users/jvanasco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-08-03T19:42:55Z", "updated_at": "2018-10-16T05:39:02Z", "closed_at": "2017-09-05T13:52:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "(this is an idea brought up for discussion)\r\n\r\nBleach sanitizes content in-place, which is the ideal behavior for most situations, allowing a \"line for line\" comparison of input and output.\r\n\r\nIn certain situations, it may be desirable to omit those lines which become \"empty\" because of sanitization\r\n\r\n    >>> line = \"one\\ntwo\\n<!-- foo -->\\nthree\\n\\nfour\"\r\n    >>> bleach.clean(line)\r\n    u'one\\ntwo\\n\\nthree\\n\\nfour'\r\n\r\nIn the case above, a user might want the output to not include the `\\n\\n` between \"two\" and \"three\" as it was caused by a stripped node occurring both after & before a newline.\r\n\r\n    u'one\\ntwo\\nthree\\n\\nfour'\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/294", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/294/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/294/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/294/events", "html_url": "https://github.com/mozilla/bleach/issues/294", "id": 246556105, "node_id": "MDU6SXNzdWUyNDY1NTYxMDU=", "number": 294, "title": "escaping of URLs can causes issues in fragile context scenarios", "user": {"login": "jvanasco", "id": 204779, "node_id": "MDQ6VXNlcjIwNDc3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/204779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvanasco", "html_url": "https://github.com/jvanasco", "followers_url": "https://api.github.com/users/jvanasco/followers", "following_url": "https://api.github.com/users/jvanasco/following{/other_user}", "gists_url": "https://api.github.com/users/jvanasco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvanasco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvanasco/subscriptions", "organizations_url": "https://api.github.com/users/jvanasco/orgs", "repos_url": "https://api.github.com/users/jvanasco/repos", "events_url": "https://api.github.com/users/jvanasco/events{/privacy}", "received_events_url": "https://api.github.com/users/jvanasco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/6", "html_url": "https://github.com/mozilla/bleach/milestone/6", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/6/labels", "id": 2778687, "node_id": "MDk6TWlsZXN0b25lMjc3ODY4Nw==", "number": 6, "title": "v2.1", "description": "Minor clean up for things. Some bug fixes.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2017-09-19T19:51:17Z", "updated_at": "2017-09-28T15:20:02Z", "due_on": "2017-09-30T07:00:00Z", "closed_at": "2017-09-28T15:20:02Z"}, "comments": 4, "created_at": "2017-07-30T01:35:23Z", "updated_at": "2017-09-21T20:52:37Z", "closed_at": "2017-09-21T20:52:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "_This issue is forked from discussion in #143 and #293_ \r\n\r\nProblems can arise from the plaintext escaping of URLs by the parser and how it relates to `linkify`. This is magnified when `linkify` is applied to `clean` text, but can also have issues when dealing with \"replied\" content. \r\n \r\nThere are two variants of this issue, which concerns how the parser escapes the `&` character in a url into the HTML entity `&amp;` sequence of characters:\r\n\r\n* general behaviors and \"replied\" content\r\n* cases that involve a \"fragile syntax\" (using the W3C's terms)\r\n\r\n\r\nGeneral Behaviors\r\n\r\nFirst, I apologize to @willkg for wasting your time on the `&amp;` encoding.  I was going by RFCs on HTTP and didn't dive into the HTML specs, which define that a browser should decode the `&amp;` and will request the \"intended\" url.  modern gui browsers all do this; commandline browsers seem hit-or-miss in catching this.  sending the html encoded url may or may-not work, as both `&` and `;` are often configured as the default delimiters (w3c and large projects seem to be standardizing on `&` only).  My bad.  \r\n\r\n\r\nFragile Syntax\r\n\r\nThis is the w3c example in which `&amp;` must be pre-escaped, since `&copy;` is a named character reference.  the link `?art&copy` will render as `art\u00a9`\r\n\r\n    <a href=\"?art&amp;copy\">Art and Copy</a> <!-- the & has to be escaped, since &copy is a named character reference -->\r\n\r\nThe existing code and current candidate are both deficient in handling this.\r\n\r\nHere's a quick example script:\r\n\r\n\thtml = '<a href=\"?art&amp;copy\">Art and Copy</a>'\r\n\tprint bleach.clean(html)\r\n\tprint bleach.linkify(html)\r\n\tprint bleach.linkify(bleach.clean(html))\r\n\r\n\turl = 'http://example.com?art&amp;copy'\r\n\tprint bleach.clean(url)\r\n\tprint bleach.linkify(url)\r\n\tprint bleach.linkify(bleach.clean(url))\r\n\r\n\r\nAnd the results on `v1.4.3` and the current #293\r\n\r\n\t+ ok\r\n\tx bad\r\n\r\n\tBleach 1.4.3\r\n\t# html\r\n\t+ <a href=\"?art&amp;copy\">Art and Copy</a>\r\n\t+ <a href=\"?art&amp;copy\" rel=\"nofollow\">Art and Copy</a>\r\n\t+ <a href=\"?art&amp;copy\" rel=\"nofollow\">Art and Copy</a>\r\n\r\n\t# url\r\n\t+ http://example.com?art&amp;copy\r\n\tx <a href=\"http://example.com?art\u00a9\" rel=\"nofollow\">http://example.com?art\u00a9</a>\r\n\tx <a href=\"http://example.com?art\u00a9\" rel=\"nofollow\">http://example.com?art\u00a9</a>\r\n\r\n\t# Pull 293\r\n\t# html\r\n\tx <a href=\"?art&amp;amp;copy\">Art and Copy</a>\r\n\t+ <a href=\"?art&amp;copy\" rel=\"nofollow\">Art and Copy</a>\r\n\tx <a href=\"?art&amp;amp;copy\" rel=\"nofollow\">Art and Copy</a>\r\n\r\n\t# url\r\n\t+ http://example.com?art&amp;amp;copy\r\n\t+ <a href=\"http://example.com?art&amp;copy\" rel=\"nofollow\">http://example.com?art&amp;copy</a>\r\n\tx <a href=\"http://example.com?art&amp;amp;copy\" rel=\"nofollow\">http://example.com?art&amp;amp;copy</a>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/292", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/292/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/292/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/292/events", "html_url": "https://github.com/mozilla/bleach/issues/292", "id": 243973617, "node_id": "MDU6SXNzdWUyNDM5NzM2MTc=", "number": 292, "title": "bleach.linkify(None) returns u'None'", "user": {"login": "overfl0", "id": 1450333, "node_id": "MDQ6VXNlcjE0NTAzMzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/overfl0", "html_url": "https://github.com/overfl0", "followers_url": "https://api.github.com/users/overfl0/followers", "following_url": "https://api.github.com/users/overfl0/following{/other_user}", "gists_url": "https://api.github.com/users/overfl0/gists{/gist_id}", "starred_url": "https://api.github.com/users/overfl0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/overfl0/subscriptions", "organizations_url": "https://api.github.com/users/overfl0/orgs", "repos_url": "https://api.github.com/users/overfl0/repos", "events_url": "https://api.github.com/users/overfl0/events{/privacy}", "received_events_url": "https://api.github.com/users/overfl0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}, {"id": 37904, "node_id": "MDU6TGFiZWwzNzkwNA==", "url": "https://api.github.com/repos/mozilla/bleach/labels/linkify", "name": "linkify", "color": "a6ffd4", "default": false, "description": null}, {"id": 503741547, "node_id": "MDU6TGFiZWw1MDM3NDE1NDc=", "url": "https://api.github.com/repos/mozilla/bleach/labels/needs-your-help", "name": "needs-your-help", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-07-19T09:13:41Z", "updated_at": "2017-09-19T15:06:25Z", "closed_at": "2017-09-19T15:06:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like linkify is doing a repr(argument) somewhere in its code because I can pass it some other type arguments, like `int` (or even `type(int)` for extra amusement :) )\r\n\r\n`bleach.clean(None)`, on the other hand, returns `u''` which is a more sensible of an answer.\r\n\r\nHowever, for both of those functions, I would expect to either raise an exception or to return None, instead of returning an unicode string.\r\n\r\nbleach==2.0.0\r\nhtml5lib==0.999999999 (nine 9)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/291", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/291/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/291/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/291/events", "html_url": "https://github.com/mozilla/bleach/issues/291", "id": 240999476, "node_id": "MDU6SXNzdWUyNDA5OTk0NzY=", "number": 291, "title": "Cleaned URLs contains HTML entities", "user": {"login": "mmtr", "id": 1233880, "node_id": "MDQ6VXNlcjEyMzM4ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1233880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmtr", "html_url": "https://github.com/mmtr", "followers_url": "https://api.github.com/users/mmtr/followers", "following_url": "https://api.github.com/users/mmtr/following{/other_user}", "gists_url": "https://api.github.com/users/mmtr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmtr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmtr/subscriptions", "organizations_url": "https://api.github.com/users/mmtr/orgs", "repos_url": "https://api.github.com/users/mmtr/repos", "events_url": "https://api.github.com/users/mmtr/events{/privacy}", "received_events_url": "https://api.github.com/users/mmtr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-06T15:40:11Z", "updated_at": "2017-07-31T19:15:45Z", "closed_at": "2017-07-27T01:11:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "When cleaning an URL having a parameter that contains an HTML name, the sanitized URL will contain the HTML entity.\r\n\r\n```\r\nimport bleach\r\nbleach.clean('http://example.com?active=true&current=true')\r\n# Out: u'http://example.com?active=true\\xa4t=true'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/290", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/290/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/290/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/290/events", "html_url": "https://github.com/mozilla/bleach/issues/290", "id": 237253832, "node_id": "MDU6SXNzdWUyMzcyNTM4MzI=", "number": 290, "title": "Allowed tags are changed/deleted", "user": {"login": "joe42", "id": 328806, "node_id": "MDQ6VXNlcjMyODgwNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/328806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joe42", "html_url": "https://github.com/joe42", "followers_url": "https://api.github.com/users/joe42/followers", "following_url": "https://api.github.com/users/joe42/following{/other_user}", "gists_url": "https://api.github.com/users/joe42/gists{/gist_id}", "starred_url": "https://api.github.com/users/joe42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joe42/subscriptions", "organizations_url": "https://api.github.com/users/joe42/orgs", "repos_url": "https://api.github.com/users/joe42/repos", "events_url": "https://api.github.com/users/joe42/events{/privacy}", "received_events_url": "https://api.github.com/users/joe42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-06-20T15:33:03Z", "updated_at": "2017-06-21T12:41:43Z", "closed_at": "2017-06-21T12:41:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "The problem occurs inside the html5lib you use. For instance, the following code will strip the caption elements:\r\n\r\n`html5lib.serialize(html5lib.parseFragment(\u2018<caption>x</caption>\u2018))`\r\n\r\nSmallest \"not\" working example:\r\n\r\n\r\n```\r\nimport bleach\r\ntags = [\r\n        'a',\r\n        'blockquote',\r\n        'br',\r\n        'caption',\r\n        'del',\r\n        'div',\r\n        'em',\r\n        'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\r\n        'header',\r\n        'hr',\r\n        'img',\r\n        'li',\r\n        'ol',\r\n        'p',\r\n        'span',\r\n        'strong',\r\n        'sub',\r\n        'sup',\r\n        'table',\r\n        'tbody',\r\n        'td',\r\n        'tfoot',\r\n        'th',\r\n        'thead',\r\n        'tr',\r\n        'u',\r\n        'ul',\r\n    ]\r\nbleach.clean(\"<br></br><caption></caption><tbody></tbody><td></td><tfoot></tfoot><th></th><thead></thead><tr></tr>\", tags, [], [])\r\n```\r\n\r\nThis will produce \r\n\r\n> `<br><br>`\r\n\r\n\r\nThe expected result should show the complete input string without modifying it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/289", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/289/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/289/events", "html_url": "https://github.com/mozilla/bleach/issues/289", "id": 234021036, "node_id": "MDU6SXNzdWUyMzQwMjEwMzY=", "number": 289, "title": "maximum recursion depth exceeded while calling a Python object", "user": {"login": "erwinyusrizal", "id": 3752374, "node_id": "MDQ6VXNlcjM3NTIzNzQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/3752374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erwinyusrizal", "html_url": "https://github.com/erwinyusrizal", "followers_url": "https://api.github.com/users/erwinyusrizal/followers", "following_url": "https://api.github.com/users/erwinyusrizal/following{/other_user}", "gists_url": "https://api.github.com/users/erwinyusrizal/gists{/gist_id}", "starred_url": "https://api.github.com/users/erwinyusrizal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erwinyusrizal/subscriptions", "organizations_url": "https://api.github.com/users/erwinyusrizal/orgs", "repos_url": "https://api.github.com/users/erwinyusrizal/repos", "events_url": "https://api.github.com/users/erwinyusrizal/events{/privacy}", "received_events_url": "https://api.github.com/users/erwinyusrizal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-06T20:52:44Z", "updated_at": "2017-06-08T12:44:53Z", "closed_at": "2017-06-08T12:38:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I have this error when running\r\n```\r\nallowed_tags = ['a', 'abbr', 'acronym', 'b', 'em', 'i', 'li',\r\n                        'ol', 'strong', 'ul', 'h1', 'h2', 'h3', 'h4', 'h5', 'p']\r\ntarget.policy = bleach.clean(\r\n            value, tags=allowed_tags, strip=True\r\n)\r\n```\r\nI see it's fixed here https://github.com/mozilla/bleach/issues/69\r\n\r\nI use bleach v2.0.0, any idea to fix it?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/288", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/288/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/288/events", "html_url": "https://github.com/mozilla/bleach/issues/288", "id": 231163025, "node_id": "MDU6SXNzdWUyMzExNjMwMjU=", "number": 288, "title": "Stripping links with invalid protocols results in empty links", "user": {"login": "grote", "id": 244947, "node_id": "MDQ6VXNlcjI0NDk0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/244947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grote", "html_url": "https://github.com/grote", "followers_url": "https://api.github.com/users/grote/followers", "following_url": "https://api.github.com/users/grote/following{/other_user}", "gists_url": "https://api.github.com/users/grote/gists{/gist_id}", "starred_url": "https://api.github.com/users/grote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grote/subscriptions", "organizations_url": "https://api.github.com/users/grote/orgs", "repos_url": "https://api.github.com/users/grote/repos", "events_url": "https://api.github.com/users/grote/events{/privacy}", "received_events_url": "https://api.github.com/users/grote/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-24T20:34:05Z", "updated_at": "2017-07-28T14:05:17Z", "closed_at": "2017-07-28T14:05:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "When bleach encounters a protocol that is not allowed, it strips it as expected. However, it leaves an empty `<a/>` tag behind:\r\n\r\n```python\r\n>>> import bleach\r\n>>> bleach.clean('<a href=\"test://bla\">empty link</a>', strip=True)\r\n'<a>empty link</a>'\r\n```\r\n\r\nI would expect it to strip away the tag completely.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/287", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/287/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/287/events", "html_url": "https://github.com/mozilla/bleach/issues/287", "id": 230979303, "node_id": "MDU6SXNzdWUyMzA5NzkzMDM=", "number": 287, "title": "ImportError: cannot import name viewkeys", "user": {"login": "fengallan0", "id": 27322524, "node_id": "MDQ6VXNlcjI3MzIyNTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/27322524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fengallan0", "html_url": "https://github.com/fengallan0", "followers_url": "https://api.github.com/users/fengallan0/followers", "following_url": "https://api.github.com/users/fengallan0/following{/other_user}", "gists_url": "https://api.github.com/users/fengallan0/gists{/gist_id}", "starred_url": "https://api.github.com/users/fengallan0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fengallan0/subscriptions", "organizations_url": "https://api.github.com/users/fengallan0/orgs", "repos_url": "https://api.github.com/users/fengallan0/repos", "events_url": "https://api.github.com/users/fengallan0/events{/privacy}", "received_events_url": "https://api.github.com/users/fengallan0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-05-24T09:39:34Z", "updated_at": "2017-05-31T13:52:50Z", "closed_at": "2017-05-31T13:52:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nTraceback (most recent call last):\r\n  File \"/Users/shuhao/myproect/flask/manage.py\", line 5, in <module>\r\n    from app import  db, User, Role,create_app,Post\r\n  File \"/Users/shuhao/myproect/flask/app/__init__.py\", line 24, in <module>\r\n    from .models import User, Role,Post\r\n  File \"/Users/shuhao/myproect/flask/app/models.py\", line 11, in <module>\r\n    import bleach\r\n  File \"/Library/Python/2.7/site-packages/bleach/__init__.py\", line 5, in <module>\r\n    from bleach.linkifier import (\r\n  File \"/Library/Python/2.7/site-packages/bleach/linkifier.py\", line 4, in <module>\r\n    import html5lib\r\n  File \"/Library/Python/2.7/site-packages/html5lib/__init__.py\", line 16, in <module>\r\n    from .html5parser import HTMLParser, parse, parseFragment\r\n  File \"/Library/Python/2.7/site-packages/html5lib/html5parser.py\", line 2, in <module>\r\n    from six import with_metaclass, viewkeys, PY3\r\nImportError: cannot import name viewkeys\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/285", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/285/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/285/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/285/events", "html_url": "https://github.com/mozilla/bleach/issues/285", "id": 225857196, "node_id": "MDU6SXNzdWUyMjU4NTcxOTY=", "number": 285, "title": "Mangles unclosed tags", "user": {"login": "gavinwahl", "id": 421710, "node_id": "MDQ6VXNlcjQyMTcxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/421710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gavinwahl", "html_url": "https://github.com/gavinwahl", "followers_url": "https://api.github.com/users/gavinwahl/followers", "following_url": "https://api.github.com/users/gavinwahl/following{/other_user}", "gists_url": "https://api.github.com/users/gavinwahl/gists{/gist_id}", "starred_url": "https://api.github.com/users/gavinwahl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gavinwahl/subscriptions", "organizations_url": "https://api.github.com/users/gavinwahl/orgs", "repos_url": "https://api.github.com/users/gavinwahl/repos", "events_url": "https://api.github.com/users/gavinwahl/events{/privacy}", "received_events_url": "https://api.github.com/users/gavinwahl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-03T00:21:00Z", "updated_at": "2017-05-03T06:13:17Z", "closed_at": "2017-05-03T06:13:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "The string `<foo>` is getting cleaned to `&lt;foo&gt;&lt;/foo&gt;`. I expect it to be cleaned to `&lt;foo&gt;`.\r\n\r\nIt seems that the tag is getting closed before being entitized?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/282", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/282/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/282/events", "html_url": "https://github.com/mozilla/bleach/issues/282", "id": 224387190, "node_id": "MDU6SXNzdWUyMjQzODcxOTA=", "number": 282, "title": "empty result for <body> tag", "user": {"login": "pabloleo", "id": 9144047, "node_id": "MDQ6VXNlcjkxNDQwNDc=", "avatar_url": "https://avatars0.githubusercontent.com/u/9144047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pabloleo", "html_url": "https://github.com/pabloleo", "followers_url": "https://api.github.com/users/pabloleo/followers", "following_url": "https://api.github.com/users/pabloleo/following{/other_user}", "gists_url": "https://api.github.com/users/pabloleo/gists{/gist_id}", "starred_url": "https://api.github.com/users/pabloleo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pabloleo/subscriptions", "organizations_url": "https://api.github.com/users/pabloleo/orgs", "repos_url": "https://api.github.com/users/pabloleo/repos", "events_url": "https://api.github.com/users/pabloleo/events{/privacy}", "received_events_url": "https://api.github.com/users/pabloleo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-04-26T08:37:50Z", "updated_at": "2017-04-27T06:59:27Z", "closed_at": "2017-04-27T06:59:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys, I'm newbie for bleach. I noticed this:\r\nmy conf:\r\n- python ==2.7  \r\n- bleach==2.0.0\r\n- html5lib==0.999999999 (9 9s)\r\n\r\nthis is my code:\r\n\r\n```\r\nbleach.clean(u'<body class=\"foo\" style=\"color: red;\">',\r\n    tags=['body'],\r\n    attributes=['style'],\r\n    styles=['color']\r\n)\r\n```\r\n\r\nbut my result is `''` why?\r\nThank u for your time \r\nPaolo", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/281", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/281/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/281/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/281/events", "html_url": "https://github.com/mozilla/bleach/issues/281", "id": 223638053, "node_id": "MDU6SXNzdWUyMjM2MzgwNTM=", "number": 281, "title": "Should bleach balance disallowed tags?", "user": {"login": "jeffoneill", "id": 166472, "node_id": "MDQ6VXNlcjE2NjQ3Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/166472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffoneill", "html_url": "https://github.com/jeffoneill", "followers_url": "https://api.github.com/users/jeffoneill/followers", "following_url": "https://api.github.com/users/jeffoneill/following{/other_user}", "gists_url": "https://api.github.com/users/jeffoneill/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffoneill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffoneill/subscriptions", "organizations_url": "https://api.github.com/users/jeffoneill/orgs", "repos_url": "https://api.github.com/users/jeffoneill/repos", "events_url": "https://api.github.com/users/jeffoneill/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffoneill/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-23T14:04:19Z", "updated_at": "2017-04-24T11:51:07Z", "closed_at": "2017-04-24T11:51:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, sorry if this has been addressed before but I couldn't find it anywhere...\r\n\r\nThis is current behavior:\r\n\r\n`bleach.clean(\"<script>\")`\r\n`u'&lt;script&gt;&lt;/script&gt;'`\r\n\r\nIt seems weird to balance a tag that is not allowed.  Wouldn't it make more sense for the output to be:\r\n\r\n`u'&lt;script&gt;'`\r\n\r\nThough I suppose that even if that would be preferred behavior that it might be a complicated change...\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/280", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/280/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/280/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/280/events", "html_url": "https://github.com/mozilla/bleach/issues/280", "id": 223070721, "node_id": "MDU6SXNzdWUyMjMwNzA3MjE=", "number": 280, "title": "tags get added when tokenizing with bleach 2.0", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}, {"id": 588087216, "node_id": "MDU6TGFiZWw1ODgwODcyMTY=", "url": "https://api.github.com/repos/mozilla/bleach/labels/regression", "name": "regression", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 12, "created_at": "2017-04-20T13:39:06Z", "updated_at": "2018-09-22T00:42:33Z", "closed_at": "2018-09-19T20:05:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I redid Bleach to support html5lib >= 0.99999999 (8 9s), I rewrote the sanitizing code to operate as an html5lib filter rather than as a tokenizer. The result of this is that the tokenizer cleans up the HTML before Bleach gets a chance to work on it and the act of cleaning up the HTML sometimes changes or creates new tags.\r\n\r\nI wrote up this issue: https://github.com/html5lib/html5lib-python/issues/312\r\n\r\nFor example, if you had:\r\n```\r\nimport bleach\r\nbleach.clean('Yeah, sure. <sarcasm/>', strip=False)\r\n```\r\nit'd get turned into:\r\n```\r\n'Yeah, sure. &lt;sarcasm&gt;&lt;/sarcasm&gt;.'\r\n```\r\nand then that'd get escaped/dropped/whatever.\r\n\r\nAdding this as an issue to help catch other regressions and use cases so I can figure out if I want to spend more time looking into a fix.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/279", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/279/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/279/events", "html_url": "https://github.com/mozilla/bleach/issues/279", "id": 222874976, "node_id": "MDU6SXNzdWUyMjI4NzQ5NzY=", "number": 279, "title": "<isindex> tag being replaced with a string", "user": {"login": "timster", "id": 173666, "node_id": "MDQ6VXNlcjE3MzY2Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/173666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timster", "html_url": "https://github.com/timster", "followers_url": "https://api.github.com/users/timster/followers", "following_url": "https://api.github.com/users/timster/following{/other_user}", "gists_url": "https://api.github.com/users/timster/gists{/gist_id}", "starred_url": "https://api.github.com/users/timster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timster/subscriptions", "organizations_url": "https://api.github.com/users/timster/orgs", "repos_url": "https://api.github.com/users/timster/repos", "events_url": "https://api.github.com/users/timster/events{/privacy}", "received_events_url": "https://api.github.com/users/timster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}, {"id": 588087216, "node_id": "MDU6TGFiZWw1ODgwODcyMTY=", "url": "https://api.github.com/repos/mozilla/bleach/labels/regression", "name": "regression", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 6, "created_at": "2017-04-19T21:18:52Z", "updated_at": "2018-09-21T14:15:05Z", "closed_at": "2018-09-19T20:05:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "This seems to be a new thing in 2.0.0. In 1.5.0 the below snippet would return a blank string.\r\n\r\n```python\r\n>>> from bleach import clean\r\n>>> clean('<isindex>', tags=[], strip=True)\r\n'This is a searchable index. Enter search keywords: '\r\n```\r\n\r\nIs this intentional? Any way to tell bleach to strip it completely? I realize ``<isindex>`` is a deprecated tag, but it's present in data we're trying to clean coming from old third party software.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/277", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/277/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/277/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/277/events", "html_url": "https://github.com/mozilla/bleach/issues/277", "id": 219868687, "node_id": "MDU6SXNzdWUyMTk4Njg2ODc=", "number": 277, "title": "Please document difference between BleachSanitizerFilter and html5lib\u2019s sanitizer.Filter", "user": {"login": "stucox", "id": 1165817, "node_id": "MDQ6VXNlcjExNjU4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1165817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stucox", "html_url": "https://github.com/stucox", "followers_url": "https://api.github.com/users/stucox/followers", "following_url": "https://api.github.com/users/stucox/following{/other_user}", "gists_url": "https://api.github.com/users/stucox/gists{/gist_id}", "starred_url": "https://api.github.com/users/stucox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stucox/subscriptions", "organizations_url": "https://api.github.com/users/stucox/orgs", "repos_url": "https://api.github.com/users/stucox/repos", "events_url": "https://api.github.com/users/stucox/events{/privacy}", "received_events_url": "https://api.github.com/users/stucox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-06T11:32:29Z", "updated_at": "2017-04-13T12:25:48Z", "closed_at": "2017-04-13T12:25:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It\u2019s not clear what the difference is between using Bleach\u2019s sanitizer and the one which ships with html5lib.\r\n\r\n`BleachSanitizerFilter` inherits from `html5lib.filters.sanitizer.Filter` and overrides the `sanitize_token()`, `allow_token()` and `sanitize_css()` methods, but even reading the code isn\u2019t entirely obvious what the functional difference is.\r\n\r\nIt does have a slightly different API and different defaults \u2014 are they the only differences? Or given equivalent config (tags, attributes, etc), would they give the same output?\r\n\r\nIf not, in what way(s) is Bleach\u2019s version better?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/276", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/276/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/276/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/276/events", "html_url": "https://github.com/mozilla/bleach/issues/276", "id": 219011950, "node_id": "MDU6SXNzdWUyMTkwMTE5NTA=", "number": 276, "title": "Support whatsapp protocol in href attribute of `a` tag", "user": {"login": "rohit-taneja", "id": 4830487, "node_id": "MDQ6VXNlcjQ4MzA0ODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4830487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohit-taneja", "html_url": "https://github.com/rohit-taneja", "followers_url": "https://api.github.com/users/rohit-taneja/followers", "following_url": "https://api.github.com/users/rohit-taneja/following{/other_user}", "gists_url": "https://api.github.com/users/rohit-taneja/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohit-taneja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohit-taneja/subscriptions", "organizations_url": "https://api.github.com/users/rohit-taneja/orgs", "repos_url": "https://api.github.com/users/rohit-taneja/repos", "events_url": "https://api.github.com/users/rohit-taneja/events{/privacy}", "received_events_url": "https://api.github.com/users/rohit-taneja/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-03T17:53:00Z", "updated_at": "2017-04-04T06:09:49Z", "closed_at": "2017-04-04T06:09:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "version 1.4.2\r\n\r\nCurrently\r\n\r\n```\r\nbleach.clean(\"<a href=whatsapp://send?text=Hello>Call to Whatsapp</a>\")\r\n```\r\n\r\nis Giving Result:\r\n\r\n```\r\n<a>Call to Whatsapp</a>\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/275", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/275/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/275/events", "html_url": "https://github.com/mozilla/bleach/issues/275", "id": 216734847, "node_id": "MDU6SXNzdWUyMTY3MzQ4NDc=", "number": 275, "title": "doesn't work with python 2.6", "user": {"login": "jelmer", "id": 49032, "node_id": "MDQ6VXNlcjQ5MDMy", "avatar_url": "https://avatars3.githubusercontent.com/u/49032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jelmer", "html_url": "https://github.com/jelmer", "followers_url": "https://api.github.com/users/jelmer/followers", "following_url": "https://api.github.com/users/jelmer/following{/other_user}", "gists_url": "https://api.github.com/users/jelmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/jelmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jelmer/subscriptions", "organizations_url": "https://api.github.com/users/jelmer/orgs", "repos_url": "https://api.github.com/users/jelmer/repos", "events_url": "https://api.github.com/users/jelmer/events{/privacy}", "received_events_url": "https://api.github.com/users/jelmer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-24T10:28:05Z", "updated_at": "2017-03-24T12:31:33Z", "closed_at": "2017-03-24T12:31:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Bleach breaks with python2.6 because in currently relies on collections.OrderedDict, which is not available in 2.6.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/272", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/272/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/272/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/272/events", "html_url": "https://github.com/mozilla/bleach/issues/272", "id": 215098512, "node_id": "MDU6SXNzdWUyMTUwOTg1MTI=", "number": 272, "title": "Documentation issue - conflicting information on html5lib version support", "user": {"login": "twhetzel", "id": 2167174, "node_id": "MDQ6VXNlcjIxNjcxNzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2167174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twhetzel", "html_url": "https://github.com/twhetzel", "followers_url": "https://api.github.com/users/twhetzel/followers", "following_url": "https://api.github.com/users/twhetzel/following{/other_user}", "gists_url": "https://api.github.com/users/twhetzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/twhetzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twhetzel/subscriptions", "organizations_url": "https://api.github.com/users/twhetzel/orgs", "repos_url": "https://api.github.com/users/twhetzel/repos", "events_url": "https://api.github.com/users/twhetzel/events{/privacy}", "received_events_url": "https://api.github.com/users/twhetzel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-17T19:19:35Z", "updated_at": "2017-03-17T22:47:31Z", "closed_at": "2017-03-17T21:37:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the document here: https://bleach.readthedocs.io/en/latest/changes.html, at the top of the page it says \"Bleach no longer supports html5lib < 0.99999999 (8 9s).\" And also says \"If you\u2019re using 0.9999999 (7 9s) upgrade to 0.99999999 (8 9s) or higher.\"\r\n\r\nHowever, further down under the section \"Changes\" it also says \"Supports html5lib >= 0.99999999 (8 9s).\"\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/271", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/271/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/271/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/271/events", "html_url": "https://github.com/mozilla/bleach/issues/271", "id": 215077606, "node_id": "MDU6SXNzdWUyMTUwNzc2MDY=", "number": 271, "title": "unclosed script tag is escaped incorrectly", "user": {"login": "eviljeff", "id": 768592, "node_id": "MDQ6VXNlcjc2ODU5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/768592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eviljeff", "html_url": "https://github.com/eviljeff", "followers_url": "https://api.github.com/users/eviljeff/followers", "following_url": "https://api.github.com/users/eviljeff/following{/other_user}", "gists_url": "https://api.github.com/users/eviljeff/gists{/gist_id}", "starred_url": "https://api.github.com/users/eviljeff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eviljeff/subscriptions", "organizations_url": "https://api.github.com/users/eviljeff/orgs", "repos_url": "https://api.github.com/users/eviljeff/repos", "events_url": "https://api.github.com/users/eviljeff/events{/privacy}", "received_events_url": "https://api.github.com/users/eviljeff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37905, "node_id": "MDU6TGFiZWwzNzkwNQ==", "url": "https://api.github.com/repos/mozilla/bleach/labels/clean", "name": "clean", "color": "b5b5ff", "default": false, "description": null}, {"id": 588087216, "node_id": "MDU6TGFiZWw1ODgwODcyMTY=", "url": "https://api.github.com/repos/mozilla/bleach/labels/regression", "name": "regression", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mozilla/bleach/milestones/9", "html_url": "https://github.com/mozilla/bleach/milestone/9", "labels_url": "https://api.github.com/repos/mozilla/bleach/milestones/9/labels", "id": 3598962, "node_id": "MDk6TWlsZXN0b25lMzU5ODk2Mg==", "number": 9, "title": "v3.0.0", "description": "Medium-sized update that fixes regressions created in Bleach 2.0 and fixes some other things.", "creator": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2018-08-26T20:16:14Z", "updated_at": "2018-10-04T18:42:25Z", "due_on": "2018-10-05T07:00:00Z", "closed_at": "2018-10-04T18:42:25Z"}, "comments": 11, "created_at": "2017-03-17T17:53:55Z", "updated_at": "2018-12-12T21:27:57Z", "closed_at": "2018-09-19T20:05:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`bleach.clean('<ul><li><script></li></ul>')` used to (correctly, I would assume,) just escape the `<script>` and output `<ul><li>&lt;script&gt;</li></ul>`\r\n\r\nnow the output is `<ul><li>&lt;script&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/script&gt;</li></ul>`\r\n\r\nPreviously we were using Bleach 1.5.0 with html5lib 0.9999999; now we're using Bleach 2.0.0 with[ html5lib 0.999999999](https://pyup.io/changelogs/html5lib/#0.999999999)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/270", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/270/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/270/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/270/events", "html_url": "https://github.com/mozilla/bleach/issues/270", "id": 214121074, "node_id": "MDU6SXNzdWUyMTQxMjEwNzQ=", "number": 270, "title": "clean escapes tags found in a <script> even if they're allowed", "user": {"login": "GevatterGaul", "id": 4048676, "node_id": "MDQ6VXNlcjQwNDg2NzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/4048676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GevatterGaul", "html_url": "https://github.com/GevatterGaul", "followers_url": "https://api.github.com/users/GevatterGaul/followers", "following_url": "https://api.github.com/users/GevatterGaul/following{/other_user}", "gists_url": "https://api.github.com/users/GevatterGaul/gists{/gist_id}", "starred_url": "https://api.github.com/users/GevatterGaul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GevatterGaul/subscriptions", "organizations_url": "https://api.github.com/users/GevatterGaul/orgs", "repos_url": "https://api.github.com/users/GevatterGaul/repos", "events_url": "https://api.github.com/users/GevatterGaul/events{/privacy}", "received_events_url": "https://api.github.com/users/GevatterGaul/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-14T16:02:28Z", "updated_at": "2017-03-17T12:45:44Z", "closed_at": "2017-03-17T12:45:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "In bleach 1.5.0 clean would only filter not allowed tags:\r\n```\r\n>>> from bleach import clean\r\n>>> clean('<script><b>Hello</b></script>', ['b'])\r\n'&lt;script&gt;<b>Hello</b>&lt;/script&gt;'\r\n```\r\nbleach 2.0 doesn't honor the allowed tag when there are other tags:\r\n```\r\n>>> clean('<script><b>Hello</b></script>', ['b'])\r\n'&lt;script&gt;&lt;b&gt;Hello&lt;/b&gt;&lt;/script&gt;'\r\n>>> # But:\r\n>>> clean('<b>Hello</b>', ['b'])\r\n'<b>Hello</b>'\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/269", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/269/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/269/events", "html_url": "https://github.com/mozilla/bleach/issues/269", "id": 213750131, "node_id": "MDU6SXNzdWUyMTM3NTAxMzE=", "number": 269, "title": "bleach doesn't work with html5lib==1.0b9 either", "user": {"login": "ursomniac", "id": 485748, "node_id": "MDQ6VXNlcjQ4NTc0OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/485748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ursomniac", "html_url": "https://github.com/ursomniac", "followers_url": "https://api.github.com/users/ursomniac/followers", "following_url": "https://api.github.com/users/ursomniac/following{/other_user}", "gists_url": "https://api.github.com/users/ursomniac/gists{/gist_id}", "starred_url": "https://api.github.com/users/ursomniac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ursomniac/subscriptions", "organizations_url": "https://api.github.com/users/ursomniac/orgs", "repos_url": "https://api.github.com/users/ursomniac/repos", "events_url": "https://api.github.com/users/ursomniac/events{/privacy}", "received_events_url": "https://api.github.com/users/ursomniac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-13T12:18:45Z", "updated_at": "2017-03-13T16:45:55Z", "closed_at": "2017-03-13T16:45:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "same issue (cannot import name sanitizer).\r\n\r\nTimeframe for fix?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/268", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/268/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/268/events", "html_url": "https://github.com/mozilla/bleach/issues/268", "id": 212858001, "node_id": "MDU6SXNzdWUyMTI4NTgwMDE=", "number": 268, "title": "bleach doesn't work with html5lib==1.0b8", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 503741547, "node_id": "MDU6TGFiZWw1MDM3NDE1NDc=", "url": "https://api.github.com/repos/mozilla/bleach/labels/needs-your-help", "name": "needs-your-help", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-08T21:11:48Z", "updated_at": "2017-05-10T15:34:31Z", "closed_at": "2017-05-10T15:34:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "html5lib has two sets of version numbers that are equivalent to one another. html5lib 1.0b8 is the same as 0.9999999 (7 9s).\r\n\r\nUsers who are using html5lib 1.0b8 and upgrade Bleach to 2.0 and don't also explicitly upgrade to html5lib 1.0b9 or later end up in a busted state because pip doesn't know that html5lib 0.99999999 (8 9s) is not before 1.0b8.\r\n\r\nThis issue covers adding a note in the docs about that.\r\n\r\nFurther, if we can fix the version requirements in `setup.py` somehow to force pip to correctly upgrade html5lib to correct versions, that'd be cool. That's worth a 2.1 release.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/267", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/267/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/267/events", "html_url": "https://github.com/mozilla/bleach/issues/267", "id": 212846495, "node_id": "MDU6SXNzdWUyMTI4NDY0OTU=", "number": 267, "title": "ImportError: No module named base (bleach==2.0.0, html5lib==1.0b8)", "user": {"login": "bastbnl", "id": 5901491, "node_id": "MDQ6VXNlcjU5MDE0OTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5901491?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bastbnl", "html_url": "https://github.com/bastbnl", "followers_url": "https://api.github.com/users/bastbnl/followers", "following_url": "https://api.github.com/users/bastbnl/following{/other_user}", "gists_url": "https://api.github.com/users/bastbnl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bastbnl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bastbnl/subscriptions", "organizations_url": "https://api.github.com/users/bastbnl/orgs", "repos_url": "https://api.github.com/users/bastbnl/repos", "events_url": "https://api.github.com/users/bastbnl/events{/privacy}", "received_events_url": "https://api.github.com/users/bastbnl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-08T20:25:22Z", "updated_at": "2017-03-10T19:56:33Z", "closed_at": "2017-03-08T20:40:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nFirst of all, I'd like to thank you all for maintaining such a nice package. \r\n\r\nI updated bleach today to learn that it breaks with an `ImportError` when used within a Django project:\r\n```\r\n(env-brownpapersession)bastb@bastb-vps:/var/www/brownpapersession/dev/brownpapersession$ python manage.py shell\r\nTraceback (most recent call last):\r\n  File \"manage.py\", line 10, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/django/core/management/__init__.py\", line 367, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/django/core/management/__init__.py\", line 341, in execute\r\n    django.setup()\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/django/__init__.py\", line 27, in setup\r\n    apps.populate(settings.INSTALLED_APPS)\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/django/apps/registry.py\", line 108, in populate\r\n    app_config.import_models(all_models)\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/django/apps/config.py\", line 199, in import_models\r\n    self.models_module = import_module(models_module_name)\r\n  File \"/usr/lib/python2.7/importlib/__init__.py\", line 37, in import_module\r\n    __import__(name)\r\n  File \"/var/www/brownpapersession/dev/brownpapersession/invite/models.py\", line 24, in <module>\r\n    from app.util import build_then_send_message\r\n  File \"/var/www/brownpapersession/dev/brownpapersession/app/util.py\", line 25, in <module>\r\n    from bleach import clean\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/bleach/__init__.py\", line 5, in <module>\r\n    from bleach.linkifier import (\r\n  File \"/var/www/brownpapersession/dev/env-brownpapersession/local/lib/python2.7/site-packages/bleach/linkifier.py\", line 5, in <module>\r\n    from html5lib.filters.base import Filter\r\nImportError: No module named base\r\n```\r\n\r\nI didn't find updates to `html5lib`. I found a release note concerning a rewrite of `bleach.clean()`. Did I miss something?\r\n\r\nI rolled back to version 1.5.0. \r\n\r\nThanks! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/255", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/255/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/255/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/255/events", "html_url": "https://github.com/mozilla/bleach/issues/255", "id": 210792742, "node_id": "MDU6SXNzdWUyMTA3OTI3NDI=", "number": 255, "title": "look at alternatives to htm5lib", "user": {"login": "willkg", "id": 820826, "node_id": "MDQ6VXNlcjgyMDgyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/820826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willkg", "html_url": "https://github.com/willkg", "followers_url": "https://api.github.com/users/willkg/followers", "following_url": "https://api.github.com/users/willkg/following{/other_user}", "gists_url": "https://api.github.com/users/willkg/gists{/gist_id}", "starred_url": "https://api.github.com/users/willkg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willkg/subscriptions", "organizations_url": "https://api.github.com/users/willkg/orgs", "repos_url": "https://api.github.com/users/willkg/repos", "events_url": "https://api.github.com/users/willkg/events{/privacy}", "received_events_url": "https://api.github.com/users/willkg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-02-28T13:52:41Z", "updated_at": "2018-10-02T17:03:24Z", "closed_at": "2018-10-02T12:13:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "lxml has a `clean`:\r\n\r\nhttp://lxml.de/lxmlhtml.html#cleaning-up-html\r\n\r\nIt can also autolink.\r\n\r\nIt's worth finding or creating a comparison between bleach's `clean` and `linkify` and lxml.html's `clean` and `autolink`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/bleach/issues/252", "repository_url": "https://api.github.com/repos/mozilla/bleach", "labels_url": "https://api.github.com/repos/mozilla/bleach/issues/252/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/bleach/issues/252/comments", "events_url": "https://api.github.com/repos/mozilla/bleach/issues/252/events", "html_url": "https://github.com/mozilla/bleach/issues/252", "id": 210110955, "node_id": "MDU6SXNzdWUyMTAxMTA5NTU=", "number": 252, "title": "`bleach()` and `linkify()` should commute", "user": {"login": "kousu", "id": 987487, "node_id": "MDQ6VXNlcjk4NzQ4Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/987487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kousu", "html_url": "https://github.com/kousu", "followers_url": "https://api.github.com/users/kousu/followers", "following_url": "https://api.github.com/users/kousu/following{/other_user}", "gists_url": "https://api.github.com/users/kousu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kousu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kousu/subscriptions", "organizations_url": "https://api.github.com/users/kousu/orgs", "repos_url": "https://api.github.com/users/kousu/repos", "events_url": "https://api.github.com/users/kousu/events{/privacy}", "received_events_url": "https://api.github.com/users/kousu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-24T17:34:51Z", "updated_at": "2017-02-24T17:51:52Z", "closed_at": "2017-02-24T17:50:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "`linkify(clean(s)) != clean(linkify(s))` in all cases. `linkify` will undo at least some of the bleaching that `clean` did.\r\n\r\n```\r\n>>> import bleach\r\n>>> bleach.__version__\r\nu'1.5.0'\r\n>>> s = '<p>http://example.com</p>'\r\n>>> bleach.clean(s)\r\nu'&lt;p&gt;http://example.com&lt;/p&gt;'\r\n>>> # it's eaten the <p>, good bleach\r\n... bleach.linkify(s)\r\nu'<p><a href=\"http://example.com\" rel=\"nofollow\">http://example.com</a></p>'\r\n>>> # it's made a link. good bleach!\r\n... bleach.clean(bleach.linkify(s))\r\nu'&lt;p&gt;<a href=\"http://example.com\">http://example.com</a>&lt;/p&gt;'\r\n>>> # it ate the <p> *and* it made a link. yum!\r\n... # but what was bleach.clean(s) again?\r\n>>> bleach.clean(s)\r\nu'&lt;p&gt;http://example.com&lt;/p&gt;'\r\n>>> bleach.linkify(bleach.clean(s))\r\nu'<p><a href=\"http://example.com\" rel=\"nofollow\">http://example.com</a></p>'\r\n>>> # it... put the <p> back\r\n```\r\n\r\nI expect this has something to do with `linkify()` calling an overeager-to-please `html5lib`. I'm on a slightly older version of that, if that makes a difference:\r\n\r\n```\r\n>>> import html5lib\r\n>>> html5lib.__version__\r\nu'0.9999999'\r\n```\r\n\r\nAnd this is my system python\r\n```\r\n>>> import sys                                   \r\n>>> sys.version\r\n'2.7.12 (default, Nov 19 2016, 06:48:10) \\n[GCC 5.4.0 20160609]'\r\n```", "performed_via_github_app": null, "score": 1.0}]}