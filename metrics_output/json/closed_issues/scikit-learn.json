{"total_count": 6177, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18171", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18171/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18171/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18171/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18171", "id": 679804522, "node_id": "MDU6SXNzdWU2Nzk4MDQ1MjI=", "number": 18171, "title": "Cross Validation Predict: __deepcopy__() is only available when eager execution is enabled.", "user": {"login": "tolandwehr", "id": 41265731, "node_id": "MDQ6VXNlcjQxMjY1NzMx", "avatar_url": "https://avatars0.githubusercontent.com/u/41265731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tolandwehr", "html_url": "https://github.com/tolandwehr", "followers_url": "https://api.github.com/users/tolandwehr/followers", "following_url": "https://api.github.com/users/tolandwehr/following{/other_user}", "gists_url": "https://api.github.com/users/tolandwehr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tolandwehr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tolandwehr/subscriptions", "organizations_url": "https://api.github.com/users/tolandwehr/orgs", "repos_url": "https://api.github.com/users/tolandwehr/repos", "events_url": "https://api.github.com/users/tolandwehr/events{/privacy}", "received_events_url": "https://api.github.com/users/tolandwehr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-16T18:43:38Z", "updated_at": "2020-08-18T06:44:00Z", "closed_at": "2020-08-17T09:16:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "For Neural-Network regression prediction task cross_val_predict throws the error (full error further below, below the model used)\r\n\r\n```\r\n__deepcopy__() is only available when eager execution is enabled.\r\n```\r\n\r\nwhen utilizing it with input data of form \r\n\r\n```\r\nX_train.shape=1200,18,15 \r\ny_train.shape=1200,18,1 \r\n```\r\n\r\nand the following in NN\r\n\r\n```\r\ndef twds_model(layer1=32, layer2=32, layer3=16, dropout_rate=0.5, optimizer='Adam'\r\n                    , learning_rate=0.001, activation='relu', loss='mse'):#, n_jobs=1):layer3=80, \r\n    \r\n    model = Sequential()\r\n    model.add(Bidirectional(GRU(layer1, return_sequences=True),input_shape=(X_train.shape[1],X_train.shape[2])))\r\n    model.add(AveragePooling1D(2))\r\n    model.add(Conv1D(layer2, 3, activation=activation, padding='same', \r\n               name='extractor'))\r\n    model.add(Flatten())\r\n    model.add(Dense(layer3,activation=activation))\r\n    model.add(Dropout(dropout_rate))\r\n    model.add(Dense(1))\r\n    model.compile(optimizer=optimizer,loss=loss)\r\n    return model\r\n\r\ntwds_model=twds_model()\r\nprint(twds_model.summary())\r\n```\r\n\r\n```\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\nbidirectional_4 (Bidirection (None, 18, 64)            9216      \r\n_________________________________________________________________\r\naverage_pooling1d_1 (Average (None, 9, 64)             0         \r\n_________________________________________________________________\r\nextractor (Conv1D)           (None, 9, 32)             6176      \r\n_________________________________________________________________\r\nflatten_1 (Flatten)          (None, 288)               0         \r\n_________________________________________________________________\r\ndense_3 (Dense)              (None, 16)                4624      \r\n_________________________________________________________________\r\ndropout_4 (Dropout)          (None, 16)                0         \r\n_________________________________________________________________\r\ndense_4 (Dense)              (None, 1)                 17        \r\n=================================================================\r\nTotal params: 20,033\r\nTrainable params: 20,033\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\nNone\r\n```\r\n\r\nand \r\n\r\n```\r\nmodel_twds=KerasRegressor(build_fn=twds_model, batch_size=144,epochs=6)#12\r\n```\r\n\r\nThe complete error: \r\n```\r\n[Parallel(n_jobs=1)]: Using backend SequentialBackend with 1 concurrent workers.\r\n\r\n---------------------------------------------------------------------------\r\nNotImplementedError                       Traceback (most recent call last)\r\n<ipython-input-28-b2465d2e01ce> in <module>\r\n      4                n_jobs=1,\r\n      5                cv=4,\r\n----> 6                verbose=2)\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\utils\\validation.py in inner_f(*args, **kwargs)\r\n     70                           FutureWarning)\r\n     71         kwargs.update({k: arg for k, arg in zip(sig.parameters, args)})\r\n---> 72         return f(**kwargs)\r\n     73     return inner_f\r\n     74 \r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\model_selection\\_validation.py in cross_val_predict(estimator, X, y, groups, cv, n_jobs, verbose, fit_params, pre_dispatch, method)\r\n    771     prediction_blocks = parallel(delayed(_fit_and_predict)(\r\n    772         clone(estimator), X, y, train, test, verbose, fit_params, method)\r\n--> 773         for train, test in cv.split(X, y, groups))\r\n    774 \r\n    775     # Concatenate the predictions\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\joblib\\parallel.py in __call__(self, iterable)\r\n    919             # remaining jobs.\r\n    920             self._iterating = False\r\n--> 921             if self.dispatch_one_batch(iterator):\r\n    922                 self._iterating = self._original_iterator is not None\r\n    923 \r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\joblib\\parallel.py in dispatch_one_batch(self, iterator)\r\n    752             tasks = BatchedCalls(itertools.islice(iterator, batch_size),\r\n    753                                  self._backend.get_nested_backend(),\r\n--> 754                                  self._pickle_cache)\r\n    755             if len(tasks) == 0:\r\n    756                 # No more tasks available in the iterator: tell caller to stop.\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\joblib\\parallel.py in __init__(self, iterator_slice, backend_and_jobs, pickle_cache)\r\n    208 \r\n    209     def __init__(self, iterator_slice, backend_and_jobs, pickle_cache=None):\r\n--> 210         self.items = list(iterator_slice)\r\n    211         self._size = len(self.items)\r\n    212         if isinstance(backend_and_jobs, tuple):\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\model_selection\\_validation.py in <genexpr>(.0)\r\n    771     prediction_blocks = parallel(delayed(_fit_and_predict)(\r\n    772         clone(estimator), X, y, train, test, verbose, fit_params, method)\r\n--> 773         for train, test in cv.split(X, y, groups))\r\n    774 \r\n    775     # Concatenate the predictions\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\utils\\validation.py in inner_f(*args, **kwargs)\r\n     70                           FutureWarning)\r\n     71         kwargs.update({k: arg for k, arg in zip(sig.parameters, args)})\r\n---> 72         return f(**kwargs)\r\n     73     return inner_f\r\n     74 \r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\base.py in clone(estimator, safe)\r\n     85     new_object_params = estimator.get_params(deep=False)\r\n     86     for name, param in new_object_params.items():\r\n---> 87         new_object_params[name] = clone(param, safe=False)\r\n     88     new_object = klass(**new_object_params)\r\n     89     params_set = new_object.get_params(deep=False)\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\utils\\validation.py in inner_f(*args, **kwargs)\r\n     70                           FutureWarning)\r\n     71         kwargs.update({k: arg for k, arg in zip(sig.parameters, args)})\r\n---> 72         return f(**kwargs)\r\n     73     return inner_f\r\n     74 \r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\sklearn\\base.py in clone(estimator, safe)\r\n     69     elif not hasattr(estimator, 'get_params') or isinstance(estimator, type):\r\n     70         if not safe:\r\n---> 71             return copy.deepcopy(estimator)\r\n     72         else:\r\n     73             if isinstance(estimator, type):\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in deepcopy(x, memo, _nil)\r\n    178                     y = x\r\n    179                 else:\r\n--> 180                     y = _reconstruct(x, memo, *rv)\r\n    181 \r\n    182     # If is its own copy, don't memoize.\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in _reconstruct(x, memo, func, args, state, listiter, dictiter, deepcopy)\r\n    278     if state is not None:\r\n    279         if deep:\r\n--> 280             state = deepcopy(state, memo)\r\n    281         if hasattr(y, '__setstate__'):\r\n    282             y.__setstate__(state)\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in deepcopy(x, memo, _nil)\r\n    148     copier = _deepcopy_dispatch.get(cls)\r\n    149     if copier:\r\n--> 150         y = copier(x, memo)\r\n    151     else:\r\n    152         try:\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in _deepcopy_dict(x, memo, deepcopy)\r\n    238     memo[id(x)] = y\r\n    239     for key, value in x.items():\r\n--> 240         y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n    241     return y\r\n    242 d[dict] = _deepcopy_dict\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in deepcopy(x, memo, _nil)\r\n    178                     y = x\r\n    179                 else:\r\n--> 180                     y = _reconstruct(x, memo, *rv)\r\n    181 \r\n    182     # If is its own copy, don't memoize.\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in _reconstruct(x, memo, func, args, state, listiter, dictiter, deepcopy)\r\n    278     if state is not None:\r\n    279         if deep:\r\n--> 280             state = deepcopy(state, memo)\r\n    281         if hasattr(y, '__setstate__'):\r\n    282             y.__setstate__(state)\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in deepcopy(x, memo, _nil)\r\n    148     copier = _deepcopy_dispatch.get(cls)\r\n    149     if copier:\r\n--> 150         y = copier(x, memo)\r\n    151     else:\r\n    152         try:\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in _deepcopy_dict(x, memo, deepcopy)\r\n    238     memo[id(x)] = y\r\n    239     for key, value in x.items():\r\n--> 240         y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n    241     return y\r\n    242 d[dict] = _deepcopy_dict\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in deepcopy(x, memo, _nil)\r\n    148     copier = _deepcopy_dispatch.get(cls)\r\n    149     if copier:\r\n--> 150         y = copier(x, memo)\r\n    151     else:\r\n    152         try:\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in _deepcopy_list(x, memo, deepcopy)\r\n    213     append = y.append\r\n    214     for a in x:\r\n--> 215         append(deepcopy(a, memo))\r\n    216     return y\r\n    217 d[list] = _deepcopy_list\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\copy.py in deepcopy(x, memo, _nil)\r\n    159             copier = getattr(x, \"__deepcopy__\", None)\r\n    160             if copier:\r\n--> 161                 y = copier(memo)\r\n    162             else:\r\n    163                 reductor = dispatch_table.get(cls)\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\tensorflow\\python\\ops\\resource_variable_ops.py in __deepcopy__(self, memo)\r\n    574     if not context.executing_eagerly():\r\n    575       raise NotImplementedError(\r\n--> 576           \"__deepcopy__() is only available when eager execution is enabled.\")\r\n    577     copied_variable = ResourceVariable(\r\n    578         initial_value=self.read_value(),\r\n\r\nNotImplementedError: __deepcopy__() is only available when eager execution is enabled\r\n```\r\n\r\nA pure LSTM/GRU-Model, on the contrary, works as expected. The upper model furthermore throws the following error when utilized with a normal tensorflow .fit. Maybe this is connected.\r\n\r\n```\r\nTrain on 10420 samples, validate on 1697 samples\r\nEpoch 1/8\r\n\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-30-3f5256ff03ec> in <module>\r\n----> 1 Test_tdws=twds_model.fit(X_train, y_train, epochs=8, batch_size=144, verbose=2, validation_split=(0.14), shuffle=False) #callbacks=[tensorboard])\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    878           initial_epoch=initial_epoch,\r\n    879           steps_per_epoch=steps_per_epoch,\r\n--> 880           validation_steps=validation_steps)\r\n    881 \r\n    882   def evaluate(self,\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training_arrays.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, mode, validation_in_fit, **kwargs)\r\n    327 \r\n    328         # Get outputs.\r\n--> 329         batch_outs = f(ins_batch)\r\n    330         if not isinstance(batch_outs, list):\r\n    331           batch_outs = [batch_outs]\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\backend.py in __call__(self, inputs)\r\n   3074 \r\n   3075     fetched = self._callable_fn(*array_vals,\r\n-> 3076                                 run_metadata=self.run_metadata)\r\n   3077     self._call_fetch_callbacks(fetched[-len(self._fetches):])\r\n   3078     return nest.pack_sequence_as(self._outputs_structure,\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py in __call__(self, *args, **kwargs)\r\n   1437           ret = tf_session.TF_SessionRunCallable(\r\n   1438               self._session._session, self._handle, args, status,\r\n-> 1439               run_metadata_ptr)\r\n   1440         if run_metadata:\r\n   1441           proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\n~\\Anaconda3\\envs\\Tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py in __exit__(self, type_arg, value_arg, traceback_arg)\r\n    526             None, None,\r\n    527             compat.as_text(c_api.TF_Message(self.status.status)),\r\n--> 528             c_api.TF_GetCode(self.status.status))\r\n    529     # Delete the underlying status object from memory otherwise it stays alive\r\n    530     # as there is a reference to status from this from the traceback due to\r\n\r\nInvalidArgumentError: Incompatible shapes: [144,1] vs. [144,18,1]\r\n\t [[{{node loss_2/dense_4_loss/sub}}]]\r\n\t [[{{node loss_2/mul}}]]\r\n```\r\n\r\nUtilized versions are:\r\n\r\n```\r\nPackage                Version\r\n---------------------- --------------------\r\n-                      nsorflow-gpu\r\n-ensorflow-gpu         1.13.1\r\n-rotobuf               3.11.3\r\n-umpy                  1.18.1\r\nabsl-py                0.9.0\r\nantlr4-python3-runtime 4.8\r\nasn1crypto             1.3.0\r\nastor                  0.7.1\r\nastropy                3.2.1\r\nastunparse             1.6.3\r\nattrs                  19.3.0\r\naudioread              2.1.8\r\nautopep8               1.5.3\r\nbackcall               0.1.0\r\nbeautifulsoup4         4.9.0\r\nbezier                 0.8.0\r\nbkcharts               0.2\r\nbleach                 3.1.4\r\nblis                   0.2.4\r\nbokeh                  1.1.0\r\nboto3                  1.9.253\r\nbotocore               1.12.253\r\nBottleneck             1.3.2\r\ncachetools             4.1.0\r\ncertifi                2020.4.5.1\r\ncffi                   1.14.0\r\nchardet                3.0.4\r\nclick                  6.7\r\ncloudpickle            0.5.3\r\ncmdstanpy              0.4.0\r\ncolor                  0.1\r\ncolorama               0.4.3\r\ncolorcet               0.9.1\r\nconvertdate            2.2.1\r\ncopulas                0.2.5\r\ncryptography           2.8\r\nctgan                  0.2.1\r\ncycler                 0.10.0\r\ncymem                  2.0.2\r\nCython                 0.29.17\r\ndash                   0.26.0\r\ndash-core-components   0.27.2\r\ndash-html-components   0.11.0\r\ndash-renderer          0.13.2\r\ndask                   0.18.1\r\ndataclasses            0.6\r\ndatashader             0.7.0\r\ndatashape              0.5.2\r\ndatawig                0.1.10\r\ndeap                   1.3.0\r\ndecorator              4.4.2\r\ndefusedxml             0.6.0\r\ndeltapy                0.1.1\r\ndill                   0.2.9\r\ndistributed            1.22.1\r\ndocutils               0.14\r\nentrypoints            0.3\r\nephem                  3.7.7.1\r\net-xmlfile             1.0.1\r\nexrex                  0.10.5\r\nFaker                  4.0.3\r\nfastai                 1.0.60\r\nfastprogress           0.2.2\r\nfbprophet              0.6\r\nfire                   0.3.1\r\nFlask                  1.0.2\r\nFlask-Compress         1.4.0\r\nfuture                 0.17.1\r\ngast                   0.3.3\r\ngeojson                2.4.1\r\ngeomet                 0.2.0.post2\r\ngoogle-auth            1.14.0\r\ngoogle-auth-oauthlib   0.4.1\r\ngoogle-pasta           0.2.0\r\ngplearn                0.4.1\r\ngraphviz               0.13.2\r\ngrpcio                 1.29.0\r\nh5py                   2.10.0\r\nHeapDict               1.0.0\r\nholidays               0.10.2\r\nholoviews              1.12.1\r\nhtml2text              2018.1.9\r\nhyperas                0.4.1\r\nhyperopt               0.1.2\r\nidna                   2.6\r\nimageio                2.5.0\r\nimbalanced-learn       0.3.3\r\nimblearn               0.0\r\nimportlib-metadata     1.5.0\r\nimpyute                0.0.8\r\nipykernel              5.1.4\r\nipython                7.13.0\r\nipython-genutils       0.2.0\r\nipywidgets             7.5.1\r\nitsdangerous           0.24\r\njdcal                  1.4\r\njedi                   0.16.0\r\nJinja2                 2.11.1\r\njmespath               0.9.5\r\njoblib                 0.13.2\r\njsonschema             3.2.0\r\njupyter                1.0.0\r\njupyter-client         6.1.2\r\njupyter-console        6.0.0\r\njupyter-core           4.6.3\r\nKeras                  2.2.5\r\nKeras-Applications     1.0.8\r\nKeras-Preprocessing    1.1.2\r\nkeras-rectified-adam   0.17.0\r\nkiwisolver             1.2.0\r\nkorean-lunar-calendar  0.2.1\r\nlibrosa                0.7.2\r\nllvmlite               0.32.1\r\nlml                    0.0.1\r\nlocket                 0.2.0\r\nLunarCalendar          0.0.9\r\nMarkdown               2.6.11\r\nMarkupSafe             1.1.1\r\nmatplotlib             3.2.1\r\nmissingpy              0.2.0\r\nmistune                0.8.4\r\nmkl-fft                1.0.15\r\nmkl-random             1.1.0\r\nmkl-service            2.3.0\r\nmock                   4.0.2\r\nmsgpack                0.5.6\r\nmultipledispatch       0.6.0\r\nmurmurhash             1.0.2\r\nmxnet                  1.4.1\r\nnb-conda               2.2.1\r\nnb-conda-kernels       2.2.3\r\nnbconvert              5.6.1\r\nnbformat               5.0.4\r\nnbstripout             0.3.7\r\nnetworkx               2.1\r\nnotebook               6.0.3\r\nnumba                  0.49.1\r\nnumexpr                2.7.1\r\nnumpy                  1.19.0\r\noauthlib               3.1.0\r\nolefile                0.46\r\nopencv-python          4.2.0.34\r\nopenpyxl               2.5.5\r\nopt-einsum             3.2.1\r\npackaging              20.3\r\npandas                 1.0.3\r\npandasvault            0.0.3\r\npandocfilters          1.4.2\r\nparam                  1.9.0\r\nparso                  0.6.2\r\npartd                  0.3.8\r\npatsy                  0.5.1\r\npbr                    5.1.3\r\npickleshare            0.7.5\r\nPillow                 7.0.0\r\npip                    20.0.2\r\nplac                   0.9.6\r\nplotly                 4.7.1\r\nplotly-express         0.4.1\r\npreshed                2.0.1\r\nprometheus-client      0.7.1\r\nprompt-toolkit         3.0.4\r\nprotobuf               3.11.3\r\npsutil                 5.4.7\r\npy                     1.8.0\r\npyasn1                 0.4.8\r\npyasn1-modules         0.2.8\r\npycodestyle            2.6.0\r\npycparser              2.20\r\npyct                   0.4.5\r\npyensae                1.3.839\r\npyexcel                0.5.8\r\npyexcel-io             0.5.7\r\nPygments               2.6.1\r\npykalman               0.9.5\r\nPyMeeus                0.3.7\r\npymongo                3.8.0\r\npyOpenSSL              19.1.0\r\npyparsing              2.4.7\r\npypi                   2.1\r\npyquickhelper          1.9.3418\r\npyrsistent             0.16.0\r\nPySocks                1.7.1\r\npystan                 2.19.1.1\r\npython-dateutil        2.8.1\r\npytz                   2019.3\r\npyviz-comms            0.7.2\r\nPyWavelets             0.5.2\r\npywin32                227\r\npywinpty               0.5.7\r\nPyYAML                 5.3.1\r\npyzmq                  18.1.1\r\nqtconsole              4.4.4\r\nrdt                    0.2.1\r\nRegscorePy             1.1\r\nrequests               2.23.0\r\nrequests-oauthlib      1.3.0\r\nresampy                0.2.2\r\nretrying               1.3.3\r\nrsa                    4.0\r\ns3transfer             0.2.1\r\nscikit-image           0.15.0\r\nscikit-learn           0.23.2\r\nscipy                  1.4.1\r\nsdv                    0.3.2\r\nseaborn                0.9.0\r\nseasonal               0.3.1\r\nSend2Trash             1.5.0\r\nsentinelsat            0.12.2\r\nsetuptools             46.3.0\r\nsetuptools-git         1.2\r\nsix                    1.14.0\r\nsklearn                0.0\r\nsortedcontainers       2.0.4\r\nSoundFile              0.10.3.post1\r\nsoupsieve              2.0\r\nspacy                  2.1.8\r\nsrsly                  0.1.0\r\nstatsmodels            0.9.0\r\nstopit                 1.1.2\r\nsugartensor            1.0.0.2\r\nta                     0.5.25\r\ntb-nightly             1.14.0a20190603\r\ntblib                  1.3.2\r\ntensorboard            1.13.1\r\ntensorboard-plugin-wit 1.6.0.post3\r\ntensorflow-estimator   1.13.0\r\ntensorflow-gpu         1.13.1\r\ntermcolor              1.1.0\r\nterminado              0.8.3\r\ntestpath               0.4.4\r\ntext-unidecode         1.3\r\ntexttable              1.4.0\r\ntf-estimator-nightly   1.14.0.dev2019060501\r\nTheano                 1.0.4\r\nthinc                  7.0.8\r\nthreadpoolctl          2.1.0\r\ntoml                   0.10.1\r\ntoolz                  0.10.0\r\ntorch                  1.4.0\r\ntorchvision            0.5.0\r\ntornado                6.0.4\r\nTPOT                   0.10.2\r\ntqdm                   4.45.0\r\ntraitlets              4.3.3\r\ntransforms3d           0.3.1\r\ntsaug                  0.2.1\r\ntypeguard              2.7.1\r\ntyping                 3.6.6\r\nupdate-checker         0.16\r\nurllib3                1.22\r\nutm                    0.4.2\r\nwasabi                 0.2.2\r\nwcwidth                0.1.9\r\nwebencodings           0.5.1\r\nWerkzeug               1.0.1\r\nwheel                  0.34.2\r\nwidgetsnbextension     3.5.1\r\nwin-inet-pton          1.1.0\r\nwincertstore           0.2\r\nwrapt                  1.11.2\r\nxarray                 0.10.8\r\nxlrd                   1.1.0\r\nyahoo-historical       0.3.2\r\nzict                   0.1.3\r\nzipp                   2.2.0\r\n```\r\n\r\nA lot of thanks beforehand for every hint that points towards a running code ;-)!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18165", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18165/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18165/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18165/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18165", "id": 679534404, "node_id": "MDU6SXNzdWU2Nzk1MzQ0MDQ=", "number": 18165, "title": "'SimpleImputer' object has no attribute 'statistics_'  error when using make_column_selector", "user": {"login": "alkaest2002", "id": 1260048, "node_id": "MDQ6VXNlcjEyNjAwNDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1260048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alkaest2002", "html_url": "https://github.com/alkaest2002", "followers_url": "https://api.github.com/users/alkaest2002/followers", "following_url": "https://api.github.com/users/alkaest2002/following{/other_user}", "gists_url": "https://api.github.com/users/alkaest2002/gists{/gist_id}", "starred_url": "https://api.github.com/users/alkaest2002/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alkaest2002/subscriptions", "organizations_url": "https://api.github.com/users/alkaest2002/orgs", "repos_url": "https://api.github.com/users/alkaest2002/repos", "events_url": "https://api.github.com/users/alkaest2002/events{/privacy}", "received_events_url": "https://api.github.com/users/alkaest2002/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-15T09:33:19Z", "updated_at": "2020-08-17T05:54:56Z", "closed_at": "2020-08-17T05:54:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "**1. Describe the bug**\r\n\r\nError while trying to access attributes of a transformer when using make_column_selector\r\n\r\n**2. Steps/Code to Reproduce**\r\n\r\n_2.1 dataset info_\r\n\r\n<table border=\"1\" class=\"dataframe\">  <thead>  <tr style=\"text-align: right;\">  <th>#</th>  <th>Column</th>  <th>Non-Null Count</th>  <th>Dtype</th>  </tr>  </thead>  <tbody>  <tr>  <td>0.0</td>  <td>longitude</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>1.0</td>  <td>latitude</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>2.0</td>  <td>housing_median_age</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>3.0</td>  <td>total_rooms</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>4.0</td>  <td>total_bedrooms</td>  <td>16354 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>5.0</td>  <td>population</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>6.0</td>  <td>households</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>7.0</td>  <td>median_income</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>8.0</td>  <td>rooms_per_household</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>9.0</td>  <td>bedrooms_per_rooms</td>  <td>16354 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>10.0</td>  <td>pop_per_househols</td>  <td>16512 non-null</td>  <td>float64</td>  </tr>  <tr>  <td>11.0</td>  <td>ocean_proximity</td>  <td>16512 non-null</td>  <td>object</td>  </tr>  </tbody> </table>\r\n\r\n-------------------------------------------\r\n\r\n_2.2 Scenario: using list for selecting columns_\r\n\r\nI <ins>can access</ins> the statistics_ attribute\r\n\r\n```Python\r\nmedian_imputer = SimpleImputer(strategy = \"median\")\r\npipe = Pipeline(\r\n    steps = [\r\n        (\"imputer\", ColumnTransformer(\r\n            transformers = [\r\n                # LINE TO FOCUS ON\r\n                (\"number_imputer\", median_imputer, list(range(0,11))) \r\n            ],\r\n            remainder=\"passthrough\")\r\n        )\r\n    ]\r\n)\r\ndata = pipe.fit_transform(housing)\r\npipe.named_steps.imputer.named_transformers_.number_imputer.statistics_\r\n```\r\n```\r\narray([-1.18510000e+02,  3.42600000e+01,  2.90000000e+01,  2.11950000e+03,\r\n        4.33000000e+02,  1.16400000e+03,  4.08000000e+02,  3.54090000e+00,\r\n        5.23228423e+00,  2.03031374e-01,  2.81765270e+00])\r\n```\r\n-------------------------------------------------\r\n\r\n_2.3 Scenario: using make_columns_selector for selecting columns_\r\n\r\nI <ins>can't access</ins> the statistics_ attribute\r\n\r\n```Python\r\nmedian_imputer = SimpleImputer(strategy = \"median\")\r\npipe = Pipeline(\r\n    steps = [\r\n        (\"imputer\", ColumnTransformer(\r\n            transformers = [\r\n                # LINE TO FOCUS ON\r\n                (\"number_imputer\", median_imputer, make_column_selector(dtype_include = np.number)) \r\n            ],\r\n            remainder=\"passthrough\")\r\n        )\r\n    ]\r\n)\r\ndata = pipe.fit_transform(housing)\r\npipe.named_steps.imputer.named_transformers_.number_imputer.statistics\r\n```\r\n\r\n```\r\n----------------------------------------------------------------\r\nAttributeError                 Traceback (most recent call last)\r\n<ipython-input-14-b19253048e74> in <module>\r\n     14 \r\n     15 data = pipe.fit_transform(housing)\r\n---> 16 pipe.named_steps.imputer.named_transformers_.number_imputer.statistics\r\n\r\nAttributeError: 'SimpleImputer' object has no attribute 'statistics'\r\n\r\n```\r\n\r\n\r\n**3. Expected Results**\r\n\r\nBeing able to access statistics_ attribute of SimpleImputer in both scenarios\r\n\r\n\r\n**4. Actual Results**\r\n\r\nError is thrown in scenario 2.3\r\n\r\n\r\n**5. Versions**\r\n\r\nPython 3.8.2\r\nScikit-learn 0.23.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18148", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18148/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18148/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18148/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18148", "id": 678058504, "node_id": "MDU6SXNzdWU2NzgwNTg1MDQ=", "number": 18148, "title": "LogisticRegression 1/(1+np.exp(-lr.decision_function(X)) does not match lr.predict_proba", "user": {"login": "PythonRSAS", "id": 55716359, "node_id": "MDQ6VXNlcjU1NzE2MzU5", "avatar_url": "https://avatars0.githubusercontent.com/u/55716359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PythonRSAS", "html_url": "https://github.com/PythonRSAS", "followers_url": "https://api.github.com/users/PythonRSAS/followers", "following_url": "https://api.github.com/users/PythonRSAS/following{/other_user}", "gists_url": "https://api.github.com/users/PythonRSAS/gists{/gist_id}", "starred_url": "https://api.github.com/users/PythonRSAS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PythonRSAS/subscriptions", "organizations_url": "https://api.github.com/users/PythonRSAS/orgs", "repos_url": "https://api.github.com/users/PythonRSAS/repos", "events_url": "https://api.github.com/users/PythonRSAS/events{/privacy}", "received_events_url": "https://api.github.com/users/PythonRSAS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-13T00:23:39Z", "updated_at": "2020-08-13T15:08:22Z", "closed_at": "2020-08-13T07:15:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nAccording to documentation, decision_function is the signed distance to the hyperplane, which is the dot product of X and features plus the intercept. \r\nIf so, 1/(1+np.exp(-lr.decision_function(X)) should match lr.predict_proba.  I have tested this for both binary and multi-class cases. \r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\n>>> from scipy.special import expit\r\n>>> from sklearn.linear_model import LogisticRegression\r\n>>> from sklearn.datasets import load_iris\r\n>>> iris = load_iris()\r\n>>> idx = iris.target != 2\r\n>>> iris_features = iris.data[idx,:2]\r\n>>> iris_target = iris.target[idx]\r\n>>> RANDOM_STATE = 1234\r\n>>> np.random.seed(RANDOM_STATE)  # makes the process repeatable\r\n>>> train = np.random.random(len(iris_features)) > 0.5 # nearly half of the data\r\n>>> lr1 = LogisticRegression(random_state=RANDOM_STATE, max_iter=10000).fit(iris_features[train], iris_target[train])\r\n\r\n### comparsion\r\n# decison_function\r\nt2=lr1.predict_proba(iris_features[train])\r\nt1 =expit(lr1.decision_function(iris_features[train]))\r\nt3=1/(1+np.exp(-lr1.decision_function(iris_features[train])))\r\n\r\n```\r\nt1 and t3 match as they should.  But t2 does not match with them. \r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18146", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18146/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18146/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18146/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18146", "id": 677885613, "node_id": "MDU6SXNzdWU2Nzc4ODU2MTM=", "number": 18146, "title": "Something goes wrong with KernelPCA with 32 bits input data", "user": {"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-12T18:17:45Z", "updated_at": "2020-08-13T11:57:05Z", "closed_at": "2020-08-13T11:57:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When given 32 bits input, KernelPCA succeed to transform the data into a 17-dimensional feature space while the original space was 3 features. I did not debug yet but this seems really unlikely.\r\n\r\n```python\r\n# %%\r\nfrom sklearn.datasets import make_blobs\r\nfrom sklearn.preprocessing import StandardScaler\r\n\r\nX, y = make_blobs(\r\n    n_samples=30,\r\n    centers=[[0, 0, 0], [1, 1, 1]],\r\n    random_state=0,\r\n    cluster_std=0.1\r\n)\r\nX = StandardScaler().fit_transform(X)\r\nX -= X.min()\r\n\r\n# %%\r\nimport numpy as np\r\nfrom sklearn.decomposition import KernelPCA\r\n\r\nkpca = KernelPCA()\r\nprint(kpca.fit_transform(X).shape)\r\nprint(kpca.fit_transform(X.astype(np.float32)).shape)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18145", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18145/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18145/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18145/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18145", "id": 677849678, "node_id": "MDU6SXNzdWU2Nzc4NDk2Nzg=", "number": 18145, "title": "Add more specific `type_of_target` for binary indicator matrices returned by LabelBinarizer", "user": {"login": "joshuacwnewton", "id": 16181459, "node_id": "MDQ6VXNlcjE2MTgxNDU5", "avatar_url": "https://avatars1.githubusercontent.com/u/16181459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshuacwnewton", "html_url": "https://github.com/joshuacwnewton", "followers_url": "https://api.github.com/users/joshuacwnewton/followers", "following_url": "https://api.github.com/users/joshuacwnewton/following{/other_user}", "gists_url": "https://api.github.com/users/joshuacwnewton/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshuacwnewton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshuacwnewton/subscriptions", "organizations_url": "https://api.github.com/users/joshuacwnewton/orgs", "repos_url": "https://api.github.com/users/joshuacwnewton/repos", "events_url": "https://api.github.com/users/joshuacwnewton/events{/privacy}", "received_events_url": "https://api.github.com/users/joshuacwnewton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-12T17:12:02Z", "updated_at": "2020-08-12T23:25:15Z", "closed_at": "2020-08-12T23:25:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n### Describe the workflow you want to enable\r\n\r\n[`LabelBinarizer`](https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelBinarizer.html) returns a label indicator matrix that is used for multiclass classification. \r\n```python\r\nfrom sklearn.preprocessing import LabelBinarizer\r\nlb = LabelBinarizer()\r\nlb.fit([1, 2, 6, 4, 2])\r\nprint(lb.classes_)\r\n# array([1, 2, 4, 6])\r\ny = lb.transform([1, 6])\r\nprint(y)\r\n# array([[1, 0, 0, 0]\r\n#        [0, 0, 0, 1]])\r\n```\r\n\r\nHowever, when calling [`type_of_target`](https://scikit-learn.org/stable/modules/generated/sklearn.utils.multiclass.type_of_target.html):\r\n\r\n```python\r\nfrom sklearn.utils.multiclass import type_of_target\r\nprint(type_of_target(y))\r\n# multilabel-indicator\r\n```\r\n\r\nThis target type is confusing from a UX perspective. The user wants to perform \"multiclass classification\" but are told their labels are for \"multilabel\" instead. This discrepancy has come up in discussions for the relevant documentation, see here: https://github.com/scikit-learn/scikit-learn/pull/17811#discussion_r467339204 This quirk has also been acknowledged in the past, e.g. https://github.com/scikit-learn/scikit-learn/issues/2451#issuecomment-24636259\r\n\r\n`'multilabel-indicator'` is the general type returned when [\"`y` is a label indicator matrix, an array of two dimensions with at least two columns, and at most 2 unique values.\"](https://scikit-learn.org/stable/modules/generated/sklearn.utils.multiclass.type_of_target.html#sklearn-utils-multiclass-type-of-target) The key here, though, is that `LabelBinarizer` returns a **more specific case** of label indicator matrix where there is only one non-zero label per row. \r\n\r\nI think we could have a slightly more specific target type to differentiate the specific case from the general `'multilabel-indicator'` case. This would also be in line with [the purpose of `type_of_target`](https://scikit-learn.org/stable/modules/generated/sklearn.utils.multiclass.type_of_target.html):\r\n\r\n> \"Note that this type is the most specific type that can be inferred.\" \r\n\r\n### Describe your proposed solution\r\n\r\n- [ ] Brainstorm names for this narrower case of label indicator matrix.\r\n    * `multilabel-or-multiclass-indicator` (because it can be used for either!)\r\n    * Something along the same lines, but more concise.\r\n- [ ] Modify `type_of_target` to return this instead. The relevant area is:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/01d21c9ca1144dc1221d76900c381686e7db9bda/sklearn/utils/multiclass.py#L247-L248\r\n\r\n- [ ] Modify relevant areas of the codebase that depend on checks for `type_of_target=='multilabel-indicator'`.\r\n    * There are many!\r\n- [ ] Modify the glossary for [label indicator matrix](https://scikit-learn.org/stable/glossary.html#term-label-indicator-matrix) to indicate a special case.\r\n- [ ] Modify relevant sections of the user guide. This would sync up with #17811 which I'm currently working on.\r\n\r\n### Describe alternatives you've considered, if relevant\r\n\r\nBecause of the prevalence of `'multilabel-indicator'`, this would be a moderately-sized change. To reduce workload, we could avoid making any changes to the codebase by instead simply explaining in documentation that it's possible to use `'multilabel-indicator'` for multiclass classification. See https://github.com/scikit-learn/scikit-learn/pull/17811#discussion_r467346861\r\n\r\nTo me, it doesn't feel ideal to explain away unintuitive behavior in documentation, but it would certainly be more pragmatic in the short-term.\r\n\r\n### Additional context\r\n\r\nCreating a more specific type would also allow for more specific input validation for multiclass classifiers, where we would want to allow the narrower case but disallow the general case. This could be useful for input validation here, for example:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/e217b68fd00bb7c54b81a492ee6f9db6498517fa/sklearn/multiclass.py#L231", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18138", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18138/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18138/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18138/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18138", "id": 676673523, "node_id": "MDU6SXNzdWU2NzY2NzM1MjM=", "number": 18138, "title": "pca.fit_transform returns error: array must not contain infs or NaNs", "user": {"login": "lukemao", "id": 13696194, "node_id": "MDQ6VXNlcjEzNjk2MTk0", "avatar_url": "https://avatars1.githubusercontent.com/u/13696194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukemao", "html_url": "https://github.com/lukemao", "followers_url": "https://api.github.com/users/lukemao/followers", "following_url": "https://api.github.com/users/lukemao/following{/other_user}", "gists_url": "https://api.github.com/users/lukemao/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukemao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukemao/subscriptions", "organizations_url": "https://api.github.com/users/lukemao/orgs", "repos_url": "https://api.github.com/users/lukemao/repos", "events_url": "https://api.github.com/users/lukemao/events{/privacy}", "received_events_url": "https://api.github.com/users/lukemao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-08-11T08:09:53Z", "updated_at": "2020-08-17T09:52:20Z", "closed_at": "2020-08-17T09:51:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n\r\nWhen I call PCA's fit_transform method I am getting error array must not contain infs or NaNs\r\n\r\n\r\nActual code:\r\n`\r\nsklearn_pca = PCA(n_components = 3)\r\ninput_vec = sklearn_pca.fit_transform(normalised_tfidf)\r\n`\r\n\r\n```\r\nTraceback (most recent call last):\r\n\r\n  File \"C:\\Users\\User\\workspace\\caseStudy\\main.py\", line 135, in <module>\r\n    input_vec = sklearn_pca.fit_transform(normalised_tfidf)\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\sklearn\\decomposition\\_pca.py\", line 369, in fit_transform\r\n    U, S, V = self._fit(X)\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\sklearn\\decomposition\\_pca.py\", line 418, in _fit\r\n    return self._fit_truncated(X, n_components, self._fit_svd_solver)\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\sklearn\\decomposition\\_pca.py\", line 532, in _fit_truncated\r\n    U, S, V = randomized_svd(X, n_components=n_components,\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\sklearn\\utils\\extmath.py\", line 354, in randomized_svd\r\n    Uhat, s, V = linalg.svd(B, full_matrices=False)\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\scipy\\linalg\\decomp_svd.py\", line 109, in svd\r\n    a1 = _asarray_validated(a, check_finite=check_finite)\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\scipy\\_lib\\_util.py\", line 246, in _asarray_validated\r\n    a = toarray(a)\r\n\r\n  File \"C:\\Users\\User\\anaconda3\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 498, in asarray_chkfinite\r\n    raise ValueError(\r\n\r\nValueError: array must not contain infs or NaNs\r\n```\r\nChecked if there are infs and NaNs in the input array:\r\nnp.any(np.**isnan**(normalised_tfidf))\r\nOut[2]: False\r\n\r\nnp.any(np.**isinf**(normalised_tfidf))\r\nOut[3]: False\r\n\r\nVersions:\r\nPython: 3.8\r\nAnaconda: 1.9.12\r\nSklearn: 0.23.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18137", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18137/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18137/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18137/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18137", "id": 676502875, "node_id": "MDU6SXNzdWU2NzY1MDI4NzU=", "number": 18137, "title": ".to_pandas() produces unexpected behavior.", "user": {"login": "drobison00", "id": 5256797, "node_id": "MDQ6VXNlcjUyNTY3OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5256797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drobison00", "html_url": "https://github.com/drobison00", "followers_url": "https://api.github.com/users/drobison00/followers", "following_url": "https://api.github.com/users/drobison00/following{/other_user}", "gists_url": "https://api.github.com/users/drobison00/gists{/gist_id}", "starred_url": "https://api.github.com/users/drobison00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drobison00/subscriptions", "organizations_url": "https://api.github.com/users/drobison00/orgs", "repos_url": "https://api.github.com/users/drobison00/repos", "events_url": "https://api.github.com/users/drobison00/events{/privacy}", "received_events_url": "https://api.github.com/users/drobison00/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-11T00:55:22Z", "updated_at": "2020-08-11T17:28:06Z", "closed_at": "2020-08-11T17:28:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nConverting cuDf DataFrame to pandas returns a Pandas DataFrame with data types that may not be consistent with expectation, and may not correctly convert to the expected numpy type. The DataFrame dtypes also appear to be inconsistent with the Series dtype.\r\n\r\n#### Steps/Code to Reproduce\r\n\r\nExample:\r\n```python\r\nimport cudf\r\nimport numpy as np\r\nfrom sklearn.feature_selection import chi2 # Just to exercise the SKlearn data preprocessing functions.\r\n\r\nX = cudf.DataFrame(np.arange(9).reshape(3,3))\r\ny = cudf.Series([1, 0, 1])\r\n\r\nXp = X.to_pandas()\r\nyp = y.to_pandas()\r\n```\r\n```shell script\r\n>>> Xp.dtypes\r\n0    Int64\r\n1    Int64\r\n2    Int64\r\ndtype: object\r\n>>> yp.dtype\r\nInt64Dtype()\r\n>>>\r\n>>> chi2(Xp, yp)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"~/python3.7/site-packages/sklearn/feature_selection/_univariate_selection.py\", line 219, in chi2\r\n    Y = LabelBinarizer().fit_transform(y)\r\n  File \"~/python3.7/site-packages/sklearn/preprocessing/_label.py\", line 460, in fit_transform\r\n    return self.fit(y).transform(y)\r\n  File \"~/python3.7/site-packages/sklearn/preprocessing/_label.py\", line 437, in fit\r\n    self.classes_ = unique_labels(y)\r\n  File \"~/python3.7/site-packages/sklearn/utils/multiclass.py\", line 97, in unique_labels\r\n    raise ValueError(\"Unknown label type: %s\" % repr(ys))\r\nValueError: Unknown label type: (0    1\r\n1    0\r\n2    1\r\ndtype: Int64,)\r\n\r\n>>> chi2(Xp, yp.astype('int64'))\r\n(array([0., 0., 0.]), array([1., 1., 1.]))\r\n```\r\n#### Expected Results\r\nNo error should be thrown, as with the ```chi2(Xp, yp.astype('int64'))``` call.\r\n\r\n#### Actual Results\r\nAs seen above with the ```chi2(Xp, yp)``` call.\r\n\r\n#### Additional Info\r\nThe breaking change looks to be related to https://github.com/rapidsai/cudf/pull/5645\r\n\r\nThe SKlearn array conversion then fails, here: https://github.com/scikit-learn/scikit-learn/blob/1ac9d6817da4d54d07f11e538d3447290cedfca3/sklearn/utils/validation.py#L587\r\n\r\n#### Versions\r\nClean Anaconda environment with RAPIDS 0.15", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18134", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18134/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18134/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18134/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18134", "id": 675933412, "node_id": "MDU6SXNzdWU2NzU5MzM0MTI=", "number": 18134, "title": "Predict func crash the kernel and the program", "user": {"login": "snirbenyosef", "id": 69154995, "node_id": "MDQ6VXNlcjY5MTU0OTk1", "avatar_url": "https://avatars1.githubusercontent.com/u/69154995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snirbenyosef", "html_url": "https://github.com/snirbenyosef", "followers_url": "https://api.github.com/users/snirbenyosef/followers", "following_url": "https://api.github.com/users/snirbenyosef/following{/other_user}", "gists_url": "https://api.github.com/users/snirbenyosef/gists{/gist_id}", "starred_url": "https://api.github.com/users/snirbenyosef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snirbenyosef/subscriptions", "organizations_url": "https://api.github.com/users/snirbenyosef/orgs", "repos_url": "https://api.github.com/users/snirbenyosef/repos", "events_url": "https://api.github.com/users/snirbenyosef/events{/privacy}", "received_events_url": "https://api.github.com/users/snirbenyosef/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 2265802023, "node_id": "MDU6TGFiZWwyMjY1ODAyMDIz", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/segfault", "name": "segfault", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-10T07:37:12Z", "updated_at": "2020-08-10T09:33:23Z", "closed_at": "2020-08-10T09:22:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nI have a problem with predict func .\r\nmy dataframe Z_jor[something] is empty. And I try to use it in the predict func. I want it to continue but it just reset my kernel on jupiter notebook. I also  run my code from shell I get this error:\r\n```python\r\nNo objects info loaded \r\nFloating point exception (core dumped)\r\n```\r\n#### Steps/Code to Reproduce\r\n\r\nExample:\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\nimport pickle\r\nimport warnings\r\nimport matplotlib.pyplot as plt\r\nimport os\r\nimport datetime\r\nfrom sklearn.preprocessing import LabelEncoder\r\n\r\nmodel_path = my model path\r\nz_jor = some data frame \r\n\r\nregressor = pickle.load(open(model_path, 'rb'))['model']\r\n\r\nregressor.predict(z_jor[something]) ## this crash the kernal\r\n```\r\n\r\n\r\n\r\n#### Expected Results\r\nNot Crashing the kernel or show warrning  or clear error\r\n\r\n#### Actual Results\r\n1) from jupiter notebook>> just restart the kernel\r\n2) from shell >>\r\n```python\r\nNo objects info loaded \r\nFloating point exception (core dumped)\r\n```\r\n\r\n#### Versions\r\n```\r\nSystem:\r\n    python: 3.6.9 (default, Jul 17 2020, 12:50:27)  [GCC 8.4.0]\r\nexecutable: /usr/bin/python3\r\n   machine: Linux-4.15.0-1083-azure-x86_64-with-Ubuntu-18.04-bionic\r\n\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 49.2.0\r\n      sklearn: 0.23.1\r\n        numpy: 1.19.1\r\n        scipy: 1.5.2\r\n       Cython: None\r\n       pandas: 1.0.5\r\n   matplotlib: 3.3.0\r\n       joblib: 0.16.0\r\nthreadpoolctl: 2.1.0\r\n\r\n```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18131", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18131/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18131/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18131/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18131", "id": 675738473, "node_id": "MDU6SXNzdWU2NzU3Mzg0NzM=", "number": 18131, "title": "sklearn.preprocessing.Normalizer should have an inverse_transform", "user": {"login": "turian", "id": 65918, "node_id": "MDQ6VXNlcjY1OTE4", "avatar_url": "https://avatars3.githubusercontent.com/u/65918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/turian", "html_url": "https://github.com/turian", "followers_url": "https://api.github.com/users/turian/followers", "following_url": "https://api.github.com/users/turian/following{/other_user}", "gists_url": "https://api.github.com/users/turian/gists{/gist_id}", "starred_url": "https://api.github.com/users/turian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/turian/subscriptions", "organizations_url": "https://api.github.com/users/turian/orgs", "repos_url": "https://api.github.com/users/turian/repos", "events_url": "https://api.github.com/users/turian/events{/privacy}", "received_events_url": "https://api.github.com/users/turian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-09T17:26:20Z", "updated_at": "2020-08-12T11:28:23Z", "closed_at": "2020-08-12T11:28:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\n\r\nsklearn.preprocessing.Normalizer should be invertible, so the original scales are recovered.\r\n\r\n#### Describe your proposed solution\r\n\r\nUnknown.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nCaching the unnormalized values.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18117", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18117/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18117/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18117/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18117", "id": 674960237, "node_id": "MDU6SXNzdWU2NzQ5NjAyMzc=", "number": 18117, "title": "why is brier score for grid search now 'neg_brier_score'? ", "user": {"login": "zahs123", "id": 23192374, "node_id": "MDQ6VXNlcjIzMTkyMzc0", "avatar_url": "https://avatars3.githubusercontent.com/u/23192374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zahs123", "html_url": "https://github.com/zahs123", "followers_url": "https://api.github.com/users/zahs123/followers", "following_url": "https://api.github.com/users/zahs123/following{/other_user}", "gists_url": "https://api.github.com/users/zahs123/gists{/gist_id}", "starred_url": "https://api.github.com/users/zahs123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zahs123/subscriptions", "organizations_url": "https://api.github.com/users/zahs123/orgs", "repos_url": "https://api.github.com/users/zahs123/repos", "events_url": "https://api.github.com/users/zahs123/events{/privacy}", "received_events_url": "https://api.github.com/users/zahs123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-07T11:43:54Z", "updated_at": "2020-08-07T11:47:02Z", "closed_at": "2020-08-07T11:47:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18116", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18116/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18116/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18116/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18116", "id": 674945086, "node_id": "MDU6SXNzdWU2NzQ5NDUwODY=", "number": 18116, "title": "Default hyperparameter ranges", "user": {"login": "rohan-gt", "id": 2353212, "node_id": "MDQ6VXNlcjIzNTMyMTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/2353212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan-gt", "html_url": "https://github.com/rohan-gt", "followers_url": "https://api.github.com/users/rohan-gt/followers", "following_url": "https://api.github.com/users/rohan-gt/following{/other_user}", "gists_url": "https://api.github.com/users/rohan-gt/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan-gt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan-gt/subscriptions", "organizations_url": "https://api.github.com/users/rohan-gt/orgs", "repos_url": "https://api.github.com/users/rohan-gt/repos", "events_url": "https://api.github.com/users/rohan-gt/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan-gt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995770, "node_id": "MDU6TGFiZWwxMjk5NTc3MA==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Documentation", "name": "Documentation", "color": "0b02e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-07T11:13:07Z", "updated_at": "2020-08-07T13:52:34Z", "closed_at": "2020-08-07T13:52:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to add good default ranges for hyperparameter tuning of each algorithm and maybe also a shortlist of the most impactful ones in the documentation? I know the ranges are generally dependent on the dataset shape (no. of observations and features) but if it's possible to have default conservative ranges (all possible values within reason) that can be used for something like Bayesian optimization where every value in the grid doesn't necessarily need to be traversed would be very useful", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18113", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18113/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18113/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18113/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18113", "id": 674720898, "node_id": "MDU6SXNzdWU2NzQ3MjA4OTg=", "number": 18113, "title": "Why can't SVM run in parallel?", "user": {"login": "kaimingkuang", "id": 62201355, "node_id": "MDQ6VXNlcjYyMjAxMzU1", "avatar_url": "https://avatars0.githubusercontent.com/u/62201355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaimingkuang", "html_url": "https://github.com/kaimingkuang", "followers_url": "https://api.github.com/users/kaimingkuang/followers", "following_url": "https://api.github.com/users/kaimingkuang/following{/other_user}", "gists_url": "https://api.github.com/users/kaimingkuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaimingkuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaimingkuang/subscriptions", "organizations_url": "https://api.github.com/users/kaimingkuang/orgs", "repos_url": "https://api.github.com/users/kaimingkuang/repos", "events_url": "https://api.github.com/users/kaimingkuang/events{/privacy}", "received_events_url": "https://api.github.com/users/kaimingkuang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-07T03:00:40Z", "updated_at": "2020-08-07T08:03:08Z", "closed_at": "2020-08-07T08:03:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I notice that unlike other models available in sklearn, sklearn.svm.SVC doesn't have the n_jobs parameter. Is there a reason why SVM can't run in parallel?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18112", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18112/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18112/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18112/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18112", "id": 674600609, "node_id": "MDU6SXNzdWU2NzQ2MDA2MDk=", "number": 18112, "title": "Typo", "user": {"login": "pawarbi", "id": 62612119, "node_id": "MDQ6VXNlcjYyNjEyMTE5", "avatar_url": "https://avatars0.githubusercontent.com/u/62612119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pawarbi", "html_url": "https://github.com/pawarbi", "followers_url": "https://api.github.com/users/pawarbi/followers", "following_url": "https://api.github.com/users/pawarbi/following{/other_user}", "gists_url": "https://api.github.com/users/pawarbi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pawarbi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pawarbi/subscriptions", "organizations_url": "https://api.github.com/users/pawarbi/orgs", "repos_url": "https://api.github.com/users/pawarbi/repos", "events_url": "https://api.github.com/users/pawarbi/events{/privacy}", "received_events_url": "https://api.github.com/users/pawarbi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-06T21:04:46Z", "updated_at": "2020-08-06T21:06:38Z", "closed_at": "2020-08-06T21:06:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was fitting a RandomForestRegressor() to a model and got following error:\r\n\r\n_Invalid parameter **creiterion** for estimator RandomForestRegressor(). Check the list of available parameters with `estimator.get_params().keys()`._\r\n\r\nNote that that criterion is spelled incorrectly. easy fix. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18111", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18111/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18111/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18111/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18111", "id": 674590816, "node_id": "MDU6SXNzdWU2NzQ1OTA4MTY=", "number": 18111, "title": "Pickling error with pipeline caching, a parallel backend, and custom transformers", "user": {"login": "bagley2014", "id": 27376138, "node_id": "MDQ6VXNlcjI3Mzc2MTM4", "avatar_url": "https://avatars2.githubusercontent.com/u/27376138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bagley2014", "html_url": "https://github.com/bagley2014", "followers_url": "https://api.github.com/users/bagley2014/followers", "following_url": "https://api.github.com/users/bagley2014/following{/other_user}", "gists_url": "https://api.github.com/users/bagley2014/gists{/gist_id}", "starred_url": "https://api.github.com/users/bagley2014/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bagley2014/subscriptions", "organizations_url": "https://api.github.com/users/bagley2014/orgs", "repos_url": "https://api.github.com/users/bagley2014/repos", "events_url": "https://api.github.com/users/bagley2014/events{/privacy}", "received_events_url": "https://api.github.com/users/bagley2014/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-06T20:45:41Z", "updated_at": "2020-08-07T08:02:34Z", "closed_at": "2020-08-07T08:02:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nI get a pickling error when I have all three of:\r\n- A pipeline with the memory parameter passed\r\n- A custom transformer in the pipeline\r\n- n_jobs != 1 (in either a GridSearchCV or cross_validate)\r\n\r\nIf any one of those three is missing, I don't get the error. I can't tell what interaction is causing it. I'm working in a Jupyter notebook and have not tried the code elsewhere.\r\n#### Steps/Code to Reproduce\r\n```\r\nimport pandas as pd\r\n\r\nfrom sklearn.base import BaseEstimator, TransformerMixin\r\nfrom sklearn.pipeline import Pipeline\r\nfrom tempfile import TemporaryDirectory\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.model_selection import cross_validate\r\nfrom sklearn.datasets import load_iris\r\n\r\ntmpdir = TemporaryDirectory(prefix=\"sklearn_cache_\")\r\n\r\nX, y = load_iris(return_X_y=True,as_frame=True)\r\n\r\nclass CustomTransformer(BaseEstimator, TransformerMixin):\r\n    def __init__(self):\r\n        pass\r\n\r\n    def fit(self, *args, **kwargs):\r\n        return self\r\n\r\n    def transform(self, X, **transform_params):\r\n        return X.drop(X.columns[0], axis=1)\r\n\r\npipeline = Pipeline(steps=[\r\n    (\"dropcolumn1\",CustomTransformer()),\r\n    (\"classify\", RandomForestClassifier())\r\n],verbose=True, memory=tmpdir.name)\r\n\r\ncross_validate(pipeline, X, y, n_jobs=-1, error_score='raise')\r\n```\r\n\r\n#### Expected Results\r\nNo error is thrown.\r\n\r\n#### Actual Results\r\nPicklingError: (\"Can't pickle <class '__main__.CustomTransformer'>: it's not found as __main__.CustomTransformer\"\r\n\r\n#### Versions\r\nSystem:\r\n    python: 3.7.7 (default, May  6 2020, 11:45:54) [MSC v.1916 64 bit (AMD64)]\r\nexecutable: C:\\Users\\Daryl\\Anaconda3\\python.exe\r\n   machine: Windows-10-10.0.18362-SP0\r\n\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 49.2.0.post20200714\r\n      sklearn: 0.23.1\r\n        numpy: 1.17.0\r\n        scipy: 1.5.0\r\n       Cython: 0.29.21\r\n       pandas: 1.0.5\r\n   matplotlib: 3.2.2\r\n       joblib: 0.16.0\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18102", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18102/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18102/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18102/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18102", "id": 673860583, "node_id": "MDU6SXNzdWU2NzM4NjA1ODM=", "number": 18102, "title": "Does percentile in SelectPercentile really only accept integers or floats too?", "user": {"login": "kylegilde", "id": 7219071, "node_id": "MDQ6VXNlcjcyMTkwNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/7219071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylegilde", "html_url": "https://github.com/kylegilde", "followers_url": "https://api.github.com/users/kylegilde/followers", "following_url": "https://api.github.com/users/kylegilde/following{/other_user}", "gists_url": "https://api.github.com/users/kylegilde/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylegilde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylegilde/subscriptions", "organizations_url": "https://api.github.com/users/kylegilde/orgs", "repos_url": "https://api.github.com/users/kylegilde/repos", "events_url": "https://api.github.com/users/kylegilde/events{/privacy}", "received_events_url": "https://api.github.com/users/kylegilde/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 169405827, "node_id": "MDU6TGFiZWwxNjk0MDU4Mjc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Question", "name": "Question", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T21:32:07Z", "updated_at": "2020-08-06T12:37:11Z", "closed_at": "2020-08-06T12:37:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "The docs indicate that percentile in SelectPercentile only accepts integers. Does the class correctly handle floats too?\r\n\r\nhttps://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.SelectPercentile.html", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18095", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18095/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18095/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18095/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18095", "id": 673292262, "node_id": "MDU6SXNzdWU2NzMyOTIyNjI=", "number": 18095, "title": "test_rfe_wrapped_estimator is sometimes failing", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 12995769, "node_id": "MDU6TGFiZWwxMjk5NTc2OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Easy", "name": "Easy", "color": "02d7e1", "default": false, "description": null}, {"id": 723599497, "node_id": "MDU6TGFiZWw3MjM1OTk0OTc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T06:36:25Z", "updated_at": "2020-08-06T10:07:51Z", "closed_at": "2020-08-06T10:07:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This test for some recently merged functionality appears to be failing at random. For example: \r\nhttps://dev.azure.com/scikit-learn/scikit-learn/_build/results?buildId=20690&view=logs&j=a6cab404-c1f6-57d5-4b70-9cd2d686bb64&t=3e7c72d0-6c8f-51a1-c688-f0cb68431685&l=609 reports\r\n```\r\n\r\n=================================== FAILURES ===================================\r\n_____________ test_rfe_wrapped_estimator[RFECV-4-regressor_.coef_] _____________\r\n\r\nimportance_getter = 'regressor_.coef_'\r\nselector = RFECV(estimator=TransformedTargetRegressor(func=<ufunc 'log'>,\r\n                                           inverse_func... 'exp'>,\r\n                                           regressor=LinearSVR()),\r\n      importance_getter='regressor_.coef_')\r\nexpected_n_features = 4\r\n\r\n    @pytest.mark.parametrize(\r\n        'importance_getter',\r\n        [attrgetter('regressor_.coef_'), 'regressor_.coef_'])\r\n    @pytest.mark.parametrize('selector, expected_n_features',\r\n                             [(RFE, 5), (RFECV, 4)])\r\n    def test_rfe_wrapped_estimator(importance_getter, selector,\r\n                                   expected_n_features):\r\n        # Non-regression test for\r\n        # https://github.com/scikit-learn/scikit-learn/issues/15312\r\n        X, y = make_friedman1(n_samples=50, n_features=10, random_state=0)\r\n        estimator = LinearSVR()\r\n    \r\n        log_estimator = TransformedTargetRegressor(regressor=estimator,\r\n                                                   func=np.log,\r\n                                                   inverse_func=np.exp)\r\n    \r\n        selector = selector(log_estimator, importance_getter=importance_getter)\r\n        sel = selector.fit(X, y)\r\n>       assert sel.support_.sum() == expected_n_features\r\nE       AssertionError: assert 6 == 4\r\nE        +  where 6 = <built-in method sum of numpy.ndarray object at 0x7f21a1b791c0>()\r\nE        +    where <built-in method sum of numpy.ndarray object at 0x7f21a1b791c0> = array([ True,  True,  True,  True,  True, False, False,  True, False, False], dtype=bool).sum\r\nE        +      where array([ True,  True,  True,  True,  True, False, False,  True, False, False], dtype=bool) = RFECV(estimator=TransformedTargetRegressor(func=<ufunc 'log'>,\\n                                           inverse_func... 'exp'>,\\n                                           regressor=LinearSVR()),\\n      importance_getter='regressor_.coef_').support_\r\n\r\nX          = array([[ 0.5488135 ,  0.71518937,  0.60276338,  0.54488318,  0.4236548 ,\r\n         0.64589411,  0.43758721,  0.891773  ...3042,  0.89676116,  0.40673335,  0.55207828,\r\n         0.27165277,  0.45544415,  0.40171354,  0.24841347,  0.50586638]])\r\n\r\n\r\n```\r\n\r\nI note that LinearSVR is used in this, without random_state being fixed. This could be the cause of random failure", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18088", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18088/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18088/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18088/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18088", "id": 672891606, "node_id": "MDU6SXNzdWU2NzI4OTE2MDY=", "number": 18088, "title": "Error: Missing vcomp140.dll", "user": {"login": "OUStudent", "id": 59944082, "node_id": "MDQ6VXNlcjU5OTQ0MDgy", "avatar_url": "https://avatars0.githubusercontent.com/u/59944082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OUStudent", "html_url": "https://github.com/OUStudent", "followers_url": "https://api.github.com/users/OUStudent/followers", "following_url": "https://api.github.com/users/OUStudent/following{/other_user}", "gists_url": "https://api.github.com/users/OUStudent/gists{/gist_id}", "starred_url": "https://api.github.com/users/OUStudent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OUStudent/subscriptions", "organizations_url": "https://api.github.com/users/OUStudent/orgs", "repos_url": "https://api.github.com/users/OUStudent/repos", "events_url": "https://api.github.com/users/OUStudent/events{/privacy}", "received_events_url": "https://api.github.com/users/OUStudent/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-08-04T15:42:26Z", "updated_at": "2020-08-05T06:50:21Z", "closed_at": "2020-08-05T06:50:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I imported sklearn into my python script, which runs fine from my terminal; but I wanted to make it into an executable through PyInstaller; now when running the created executable I get the following error:\r\n\r\n![image](https://user-images.githubusercontent.com/59944082/89313778-8ff90700-d63e-11ea-8b0b-9246a17e37d4.png)\r\n\r\nI'm aware that this problem has been ongoing for a while: https://github.com/scikit-learn/scikit-learn/issues/15899, the error seems to deal with OpenMp being used in the __init__ with later versions; but after reading this previous issue the contributors made it sound that they were going to fix this problem with the new updates. To my knowledge, OpenMp comes with Visual Studio; to which I have VS 2019. Do I need to install something or move some files around for this to work? Or should I just use older versions of sklearn?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18084", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18084/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18084/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18084/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18084", "id": 672711175, "node_id": "MDU6SXNzdWU2NzI3MTExNzU=", "number": 18084, "title": "Failing tests on 32-bit archtectures from use of numpy.int", "user": {"login": "ckastner", "id": 15859947, "node_id": "MDQ6VXNlcjE1ODU5OTQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/15859947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ckastner", "html_url": "https://github.com/ckastner", "followers_url": "https://api.github.com/users/ckastner/followers", "following_url": "https://api.github.com/users/ckastner/following{/other_user}", "gists_url": "https://api.github.com/users/ckastner/gists{/gist_id}", "starred_url": "https://api.github.com/users/ckastner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ckastner/subscriptions", "organizations_url": "https://api.github.com/users/ckastner/orgs", "repos_url": "https://api.github.com/users/ckastner/repos", "events_url": "https://api.github.com/users/ckastner/events{/privacy}", "received_events_url": "https://api.github.com/users/ckastner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-04T11:14:22Z", "updated_at": "2020-08-07T06:46:54Z", "closed_at": "2020-08-07T06:46:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On Debian build hosts, the test `test_toy_dataset_as_frame` fails for all datasets that use `sklearn.datasets._base.load_data`, for example:\r\n\r\n```python\r\n\r\n_________ test_toy_dataset_as_frame[load_breast_cancer-float64-int64] __________\r\n\r\nloader_func = <function load_breast_cancer at 0xf38a46e8>\r\ndata_dtype = <class 'numpy.float64'>, target_dtype = <class 'numpy.int64'>\r\n\r\n    @pytest.mark.parametrize(\"loader_func, data_dtype, target_dtype\", [\r\n        (load_breast_cancer, np.float64, np.int64),\r\n        (load_diabetes, np.float64, np.float64),\r\n        (load_digits, np.float64, np.int64),\r\n        (load_iris, np.float64, np.int64),\r\n        (load_linnerud, np.float64, np.float64),\r\n        (load_wine, np.float64, np.int64),\r\n    ])\r\n    def test_toy_dataset_as_frame(loader_func, data_dtype, target_dtype):\r\n        default_result = loader_func()\r\n>       check_as_frame(default_result, partial(loader_func),\r\n                       expected_data_dtype=data_dtype,\r\n                       expected_target_dtype=target_dtype)\r\n\r\nsklearn/datasets/tests/test_base.py:246: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nbunch = {'data': array([[1.799e+01, 1.038e+01, 1.228e+02, ..., 2.654e-01, 4.601e-01,\r\n        1.189e-01],\r\n       [2.057e+01, 1....: '/<<PKGBUILDDIR>>/.pybuild/cpython3_3.8/build/sklearn/datasets/data/breast_cancer.csv'}\r\nfetch_func_partial = functools.partial(<function load_breast_cancer at 0xf38a46e8>)\r\nexpected_data_dtype = <class 'numpy.float64'>\r\nexpected_target_dtype = <class 'numpy.int64'>\r\n\r\n    def check_as_frame(bunch, fetch_func_partial,\r\n                       expected_data_dtype=None, expected_target_dtype=None):\r\n        pd = pytest.importorskip('pandas')\r\n        frame_bunch = fetch_func_partial(as_frame=True)\r\n        assert hasattr(frame_bunch, 'frame')\r\n        assert isinstance(frame_bunch.frame, pd.DataFrame)\r\n        assert isinstance(frame_bunch.data, pd.DataFrame)\r\n        assert frame_bunch.data.shape == bunch.data.shape\r\n        if frame_bunch.target.ndim > 1:\r\n            assert isinstance(frame_bunch.target, pd.DataFrame)\r\n        else:\r\n            assert isinstance(frame_bunch.target, pd.Series)\r\n        assert frame_bunch.target.shape[0] == bunch.target.shape[0]\r\n        if expected_data_dtype is not None:\r\n            assert np.all(frame_bunch.data.dtypes == expected_data_dtype)\r\n        if expected_target_dtype is not None:\r\n>           assert np.all(frame_bunch.target.dtypes == expected_target_dtype)\r\nE           AssertionError: assert False\r\nE            +  where False = <function all at 0xf64a80b8>(dtype('int32') == <class 'numpy.int64'>\r\nE            +    where <function all at 0xf64a80b8> = np.all\r\nE               -dtype('int32')\r\nE               +<class 'numpy.int64'>)\r\n\r\nsklearn/datasets/tests/test_common.py:43: AssertionError\r\n```\r\nThis appears to be because of the use of `np.int` as dtype:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/8f09e332b663768f23a75448f7e71c47cd14a785/sklearn/datasets/_base.py#L267\r\n\r\nOn 32-bit hosts:\r\n```python\r\n>>> import numpy as np\r\n>>> np.empty(1, dtype=np.int).dtype\r\ndtype('int32')\r\n```\r\nOn 64-bit hosts:\r\n```python\r\n>>> import numpy as np\r\n>>> np.empty(1, dtype=np.int).dtype\r\ndtype('int64')\r\n```\r\nA simple solution would be to change the expected result from `np.int64` to `np.int` in:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/8f09e332b663768f23a75448f7e71c47cd14a785/sklearn/datasets/tests/test_base.py#L188-L194\r\n\r\nPlease let me know if you'd like a PR to that effect.\r\n\r\n#### Versions\r\nSystem:\r\n    python: 3.8.5 (default, Aug  2 2020, 15:09:07)  [GCC 10.2.0]\r\nexecutable: /usr/bin/python3\r\n   machine: Linux-4.19.0-10-amd64-i686-with-glibc2.29\r\n\r\nPython dependencies:\r\n          pip: None\r\n   setuptools: 46.1.3\r\n      sklearn: 0.23.1\r\n        numpy: 1.19.1\r\n        scipy: 1.5.2\r\n       Cython: 0.29.21\r\n       pandas: 1.0.4\r\n   matplotlib: 3.3.0\r\n       joblib: 0.14.0\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18080", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18080/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18080/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18080/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18080", "id": 672458460, "node_id": "MDU6SXNzdWU2NzI0NTg0NjA=", "number": 18080, "title": "Check estimator error: Using tags, e.g. 'poor_score' causes KeyError: 'X_types'", "user": {"login": "j2slab", "id": 20120789, "node_id": "MDQ6VXNlcjIwMTIwNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/20120789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j2slab", "html_url": "https://github.com/j2slab", "followers_url": "https://api.github.com/users/j2slab/followers", "following_url": "https://api.github.com/users/j2slab/following{/other_user}", "gists_url": "https://api.github.com/users/j2slab/gists{/gist_id}", "starred_url": "https://api.github.com/users/j2slab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j2slab/subscriptions", "organizations_url": "https://api.github.com/users/j2slab/orgs", "repos_url": "https://api.github.com/users/j2slab/repos", "events_url": "https://api.github.com/users/j2slab/events{/privacy}", "received_events_url": "https://api.github.com/users/j2slab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-04T02:29:54Z", "updated_at": "2020-08-04T08:00:07Z", "closed_at": "2020-08-04T08:00:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nUsing tags, for instance 'poor_score' in _get_tags() method, causes a KeyError on 'X_types'. Adding tags['X_types'] = '2darray' causes a KeyError on '_skip_tests'. \r\n\r\n#### Steps/Code to Reproduce\r\n```\r\nimport numpy as np\r\nimport pytest\r\nfrom pytest import mark\r\nfrom sklearn.utils.validation import check_X_y, check_array, check_is_fitted\r\nfrom sklearn.base import BaseEstimator, RegressorMixin\r\nfrom sklearn.utils.estimator_checks import check_estimator, parametrize_with_checks\r\nclass SampleRegressor(BaseEstimator, RegressorMixin):\r\n\r\n    def __init__(self, demo_param='demo'):\r\n         self.demo_param = demo_param\r\n\r\n    def _get_tags(self):\r\n        tags = {}\r\n        tags['poor_score'] = True\r\n        return tags\r\n\r\n    def fit(self, X, y):\r\n\r\n         # Check that X and y have correct shape\r\n         X, y = check_X_y(X, y)\r\n         self.X_ = X\r\n         self.y_ = y\r\n         # Return the REGRESSOR\r\n         return self\r\n\r\n    def predict(self, X):\r\n\r\n         # Check is fit had been called\r\n         check_is_fitted(self)\r\n\r\n         # Input validation\r\n         X = check_array(X)\r\n         self.y_ = X * 5\r\n         return self.y_\r\n\r\n@mark.sklearn_estimator_checks\r\n@parametrize_with_checks([SampleRegressor()])\r\ndef test_sklearn_compatible_estimator(estimator, check):\r\n    check(estimator)\r\n\r\n```\r\n\r\nExample:\r\n```python\r\npytest -s -m sklearn_estimator_checks\r\n```\r\n\r\n```\r\nSample code to reproduce the problem\r\n```\r\n\r\n#### Expected Results\r\nNo KeyError thrown.\r\n\r\n#### Actual Results\r\n```\r\n\r\n======================== ERRORS ========================\r\n_ ERROR collecting tests/test_support/test_scikit-learn/test_skip_test.py _\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\hooks.py:286: in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\manager.py:93: in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)   \r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\manager.py:84: in <lambda>\r\n    self._inner_hookexec = lambda hook, methods, kwargs: \r\nhook.multicall(\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\python.py:246: in pytest_pycollect_makeitem     \r\n    res = list(collector._genfunctions(name, obj))       \r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\python.py:413: in _genfunctions\r\n    self.ihook.pytest_generate_tests.call_extra(methods, \r\ndict(metafunc=metafunc))\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\hooks.py:324: in call_extra\r\n    return self(**kwargs)\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\hooks.py:286: in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\manager.py:93: in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)   \r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\pluggy\\manager.py:84: in <lambda>\r\n    self._inner_hookexec = lambda hook, methods, kwargs: \r\nhook.multicall(\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\python.py:139: in pytest_generate_tests\r\n    metafunc.parametrize(*marker.args, **marker.kwargs, _param_mark=marker)  # type: ignore[misc] # noqa: F821    \r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\python.py:915: in parametrize\r\n    argnames, parameters = ParameterSet._for_parametrize(\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\mark\\structures.py:108: in _for_parametrize     \r\n    parameters = cls._parse_parametrize_parameters(argvalues, force_tuple)\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\mark\\structures.py:101: in _parse_parametrize_parameters\r\n    return [\r\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python38\\site-packages\\_pytest\\mark\\structures.py:101: in <listcomp>\r\n    return [\r\n..\\..\\..\\..\\anaconda3\\envs\\mlstudio\\lib\\site-packages\\sklearn\\utils\\estimator_checks.py:426: in <genexpr>\r\n    checks_with_marks = (\r\n..\\..\\..\\..\\anaconda3\\envs\\mlstudio\\lib\\site-packages\\sklearn\\utils\\estimator_checks.py:340: in _generate_instance_checks\r\n    yield from ((estimator, partial(check, name))        \r\n..\\..\\..\\..\\anaconda3\\envs\\mlstudio\\lib\\site-packages\\sklearn\\utils\\estimator_checks.py:340: in <genexpr>\r\n    yield from ((estimator, partial(check, name))        \r\n..\\..\\..\\..\\anaconda3\\envs\\mlstudio\\lib\\site-packages\\sklearn\\utils\\estimator_checks.py:233: in _yield_all_checks \r\n    if \"2darray\" not in tags[\"X_types\"]:\r\nE   KeyError: 'X_types'\r\n=============== short test summary info ================ \r\nERROR tests/test_support/test_scikit-learn/test_skip_test.py\r\n!!!!!!!! Interrupted: 1 error during collection !!!!!!!! \r\n=========== 100 deselected, 1 error in 3.10s =========== \r\n\r\n\r\n```\r\n#### Versions\r\n```\r\n\r\nimport sklearn; sklearn.show_versions()\r\n\r\nSystem:\r\n    python: 3.8.3 (default, May 19 2020, 06:50:17) [MSC v.1916 64 bit (AMD64)]\r\nexecutable: C:\\Users\\John\\anaconda3\\envs\\mlstudio\\python.exe\r\n   machine: Windows-10-10.0.18362-SP0\r\n\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 47.1.1\r\n      sklearn: 0.23.1\r\n        numpy: 1.18.5\r\n        scipy: 1.4.1\r\n       Cython: None\r\n       pandas: 1.0.4\r\n   matplotlib: 3.2.1\r\n       joblib: 0.15.1\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\n\r\n\r\n```\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18079", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18079/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18079/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18079/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18079", "id": 672455217, "node_id": "MDU6SXNzdWU2NzI0NTUyMTc=", "number": 18079, "title": "RidgeCV doesn't use Generalized Cross-Validation as claimed", "user": {"login": "rnburn", "id": 1923871, "node_id": "MDQ6VXNlcjE5MjM4NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1923871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rnburn", "html_url": "https://github.com/rnburn", "followers_url": "https://api.github.com/users/rnburn/followers", "following_url": "https://api.github.com/users/rnburn/following{/other_user}", "gists_url": "https://api.github.com/users/rnburn/gists{/gist_id}", "starred_url": "https://api.github.com/users/rnburn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rnburn/subscriptions", "organizations_url": "https://api.github.com/users/rnburn/orgs", "repos_url": "https://api.github.com/users/rnburn/repos", "events_url": "https://api.github.com/users/rnburn/events{/privacy}", "received_events_url": "https://api.github.com/users/rnburn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}, {"id": 12995770, "node_id": "MDU6TGFiZWwxMjk5NTc3MA==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Documentation", "name": "Documentation", "color": "0b02e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-04T02:20:34Z", "updated_at": "2020-08-18T09:32:22Z", "closed_at": "2020-08-18T09:32:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe documentation for [RidgeCV](https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.RidgeCV.html) says the following:\r\n> By default, it performs Generalized Cross-Validation, which is a form of efficient Leave-One-Out cross-validation.\r\n\r\nBut 1) it's using the LOOCV not the GCV and 2) GCV isn't \"an efficient form of LOOCV\".\r\n\r\nGCV is the leave-one-out cross-validation of a rotation of the original regression problem\r\n```\r\nX' = Q X\r\ny' = Q y\r\n```\r\nwhere Q is a unitary rotation matrix\r\n```\r\nQ Q^H = I\r\n```\r\nchosen so as to circularize the matrix `X' X'^H`\r\n\r\nSee \r\n> Golub G., Heath M., and Wahba G., [Generalized Cross-Validation as a Method for Choosing a Good Ridge Parameter](http://pages.stat.wisc.edu/~wahba/stat860public/pdf1/golub.heath.wahba.pdf) (1979), TECHNOMETRICS, Vol 21, No 2\r\n\r\nor this [blog post](https://medium.com/p/what-form-of-cross-validation-should-you-use-76aaecc45c75?source=email-f55ad0a8217--writer.postDistributed&sk=a63ac2a04e49a12e7aa4c12a75b18502).\r\n\r\nThere are efficient ways to compute the LOOCV, but GCV is a different metric and the rotation is designed to handle certain problem cases with performing LOOCV on X and y directly (See the cited sources for an example where LOOCV is problematic).\r\n\r\n#### Steps/Code to Reproduce\r\nWe can confirm that RidgeCV isn't using GCV by putting together an example.\r\n\r\n1.  We add some code to compute the LOOCV. (Note uses an inefficient brute-force approach for simplicity).\r\n```python\r\ndef compute_l_matrix(X, alpha):\r\n    R = scipy.linalg.qr(X, mode='r')[0]\r\n    E = np.dot(np.conj(R.T), R) + np.diag(alpha)\r\n    return np.linalg.cholesky(E)\r\n\r\ndef compute_ridge_regression_prediction(X, y, alpha, X_test):\r\n    z = np.dot(np.conj(X.T), y)\r\n    L = compute_l_matrix(X, alpha)\r\n    beta = scipy.linalg.solve_triangular(L, z, lower=True)\r\n    beta = scipy.linalg.solve_triangular(np.conj(L.T), beta, lower=False)\r\n    return np.dot(X_test, beta)\r\n\r\ndef compute_loocv_impl(X, y, alpha):\r\n    result = 0\r\n    for train_indexes, test_indexes in LeaveOneOut().split(X):\r\n        X_train, X_test = X[train_indexes], X[test_indexes]\r\n        y_train, y_test = y[train_indexes], y[test_indexes]\r\n        y_pred = compute_ridge_regression_prediction(X_train, y_train, alpha, X_test)\r\n        result += np.abs(y_test[0] - y_pred[0])**2\r\n    return result / len(y)\r\n\r\ndef compute_loocv(X, y, alpha, fit_intercept=True):\r\n    n, k = X.shape\r\n    if fit_intercept:\r\n        alpha = np.array([alpha]*k + [0])\r\n        X = np.hstack((X, np.ones((n, 1))))\r\n        k +=1\r\n    else:\r\n        alpha = np.ones(k)*alpha\r\n    return compute_loocv_impl(X, y, alpha)\r\n```\r\n2. We add this function to compute the GCV \r\n```python\r\ndef compute_gcv(X, y, alpha, fit_intercept=True):\r\n    n, k = X.shape\r\n    if fit_intercept:\r\n        alpha = np.array([alpha]*k + [0])\r\n        X = np.hstack((X, np.ones((n, 1))))\r\n        k +=1\r\n    else:\r\n        alpha = np.ones(k)*alpha\r\n    U, S, Vt = np.linalg.svd(X)\r\n    S = np.vstack((np.diag(S), np.zeros((n-k, k))))\r\n    # Note: the rotation for GCV can be computed much more efficiently with a FFT, but this \r\n    # keeps things simple.\r\n    W = np.array([[np.exp(2j*np.pi*i*j/n) / np.sqrt(n) for j in range(n)] for i in range(n)])\r\n    X_prime = np.dot(W, np.dot(S, Vt))\r\n    y_prime = np.dot(W, np.dot(U.T, y))\r\n    return compute_loocv_impl(X_prime, y_prime, alpha)\r\n```\r\nNote: depending on how you treat the intercept, this function will be equivalent to this more common formula for GCV\r\n```\r\n1/n || (I - A) y ||^2 / [1/nTr(I - A)]^2\r\nwhere\r\nA = X(X^T X + n lambda )^-1 X^T\r\n```\r\n3. We load an example dataset. This is taken from \r\n> McDonald and Schwing (1973), \"Instabilities of Regression Estimates Relating Air Pollution to Mortality,\" Technometrics, 15, 463-481\r\n\r\nand is available at [NCSU](https://www4.stat.ncsu.edu/~boos/var.select/pollution.html)\r\n```python\r\ndf = pd.read_csv('pollution.tsv', \r\n                 header=0, delim_whitespace=True)\r\nX = np.array(df.iloc[:, :-1].values, dtype=float)\r\ny = np.array(df.iloc[:,-1].values, dtype=float)\r\nX = StandardScaler().fit_transform(X)\r\n```\r\n4. We'll use this [package](https://github.com/rnburn/peak-engines) to find the optimum alpha for LOOCV and GCV and verify they're different\r\n```python\r\nimport peak_engines\r\nloocv_alpha_best = peak_engines.RidgeRegressionModel(score='loocv').fit(X, y).alpha_\r\ngcv_alpha_best = peak_engines.RidgeRegressionModel(score='gcv').fit(X, y).alpha_\r\nprint(\"loocv_alpha_best = \", loocv_alpha_best)\r\nprint(\"gcv_alpha_best = \", gcv_alpha_best)\r\n```\r\noutputs:\r\n```\r\nloocv_alpha_best =  8.437006486935175\r\ngcv_alpha_best =  7.095235374911837\r\n```\r\n5. Plot the functions across a range of alphas.\r\n```python\r\nalphas = np.arange(0.1, 20, .1)\r\nloocv_scores = [compute_loocv(X, y, alpha) for alpha in alphas]\r\ngcv_scores = [compute_gcv(X, y, alpha) for alpha in alphas]\r\nplt.xlabel('Alpha')\r\nplt.ylabel('Mean Squared Error')\r\nplt.plot(alphas, loocv_scores, label='LOOCV')\r\nplt.axvline(loocv_alpha_best, color='tab:green', label='LOOCV Alpha Best')\r\nplt.plot(alphas, gcv_scores, label='GCV')\r\nplt.axvline(gcv_alpha_best, color='tab:red', label='GCV Alpha Best')\r\nplt.title('CV Error on Pollution Dataset')\r\nplt.legend(loc='upper right')\r\n```\r\noutputs:\r\n![image](https://user-images.githubusercontent.com/1923871/89242604-cbe88980-d5b6-11ea-8688-366b520e140e.png)\r\n\r\n6. Build a RidgeCV model and confirm it's using LOOCV not GCV\r\n```python\r\nmodel = RidgeCV(list(alphas) + [loocv_alpha_best, gcv_alpha_best])\r\nmodel.fit(X, y)\r\nprint(model.alpha_, loocv_alpha_best)\r\nprint(model.best_score_, compute_loocv(X, y, loocv_alpha_best))\r\n```\r\noutputs:\r\n```\r\n8.437006486935175 8.437006486935175\r\n-1631.3585649228744 1631.3585649228833\r\n```\r\n\r\nI also put together this [notebook](https://github.com/rnburn/peak-engines/blob/master/example/ridge_regression/gcv_vs_loocv_pollution.ipynb) that combines all the steps.\r\n#### Expected Results\r\n\r\nIf RidgeCV used GCV as claimed, step 6 would print `7.095235374911837`.\r\n\r\n#### Actual Results\r\n\r\nIt printed 8.437006486935175 the LOOCV optimum.\r\n\r\n#### Versions\r\n\r\nSystem:\r\n    python: 3.7.5 (default, Nov 20 2019, 09:21:52)  [GCC 9.2.1 20191008]\r\nexecutable: /usr/bin/python3\r\n   machine: Linux-4.9.125-linuxkit-x86_64-with-Ubuntu-19.10-eoan\r\n\r\nPython dependencies:\r\n          pip: 18.1\r\n   setuptools: 47.1.1\r\n      sklearn: 0.23.1\r\n        numpy: 1.16.3\r\n        scipy: 1.2.1\r\n       Cython: None\r\n       pandas: 0.24.2\r\n   matplotlib: 3.1.1\r\n       joblib: 0.16.0\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18077", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18077/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18077/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18077/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18077", "id": 672367624, "node_id": "MDU6SXNzdWU2NzIzNjc2MjQ=", "number": 18077, "title": "ValueError raised from utils.validation.check_array when array has dim 3 and ensure_2d is False", "user": {"login": "KaiHicks", "id": 11860169, "node_id": "MDQ6VXNlcjExODYwMTY5", "avatar_url": "https://avatars1.githubusercontent.com/u/11860169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaiHicks", "html_url": "https://github.com/KaiHicks", "followers_url": "https://api.github.com/users/KaiHicks/followers", "following_url": "https://api.github.com/users/KaiHicks/following{/other_user}", "gists_url": "https://api.github.com/users/KaiHicks/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaiHicks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaiHicks/subscriptions", "organizations_url": "https://api.github.com/users/KaiHicks/orgs", "repos_url": "https://api.github.com/users/KaiHicks/repos", "events_url": "https://api.github.com/users/KaiHicks/events{/privacy}", "received_events_url": "https://api.github.com/users/KaiHicks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-03T21:59:02Z", "updated_at": "2020-08-03T23:16:02Z", "closed_at": "2020-08-03T23:16:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\nWhen calling StratifiedKFold.split(X, Y) with 3d X and 2d Y, I received `ValueError: Found array with dim 3. Estimator expected <= 2.`. \r\n\r\nI found this strange so I checked the source code and in StratifiedKFold.split(...), the call to check_array(...) has `ensure_2d=False`. \r\n\r\n#### Steps/Code to Reproduce\r\n\r\n```\r\nPython 3.8.0 (default, Oct 28 2019, 16:14:01)\r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import numpy as np\r\n>>> from sklearn.model_selection import StratifiedKFold\r\n>>> \r\n>>> # shapes chosen arbitrarily. The only thing that matters are their dims. \r\n>>> X = np.normal(size=(2, 3, 4))\r\n>>> Y = np.normal(size=(2, 3, 1))\r\n>>> \r\n>>> cv = StratifiedKFold()\r\n>>> cv.split(X, Y)\r\n```\r\n\r\n#### Expected Results\r\nI expected that the `ensure_2d=False` in the call to `check_array(...)` in `StratifiedKFold.split(...)` would [prevent the exception from being raised](https://github.com/scikit-learn/scikit-learn/blob/cf30ec876c38894a52f0bedcf461ca31df79f356/sklearn/utils/validation.py#L460). \r\n\r\n#### Actual Results\r\nHere was the actual output from `cv.split(X, Y)`\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  ...\r\nValueError: Found array with dim 3. Estimator expected <= 2.\r\n>>> \r\n```\r\n\r\n#### Versions\r\n<!--\r\nPlease run the following snippet and paste the output below.\r\nFor scikit-learn >= 0.20:\r\nimport sklearn; sklearn.show_versions()\r\nFor scikit-learn < 0.20:\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nimport imblearn; print(\"Imbalanced-Learn\", imblearn.__version__)\r\n-->\r\n```\r\nPython 3.8.0 (default, Oct 28 2019, 16:14:01) \r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import sklearn; sklearn.show_versions()\r\n\r\nSystem:\r\n    python: 3.8.0 (default, Oct 28 2019, 16:14:01)  [GCC 8.3.0]\r\nexecutable: /usr/bin/python3\r\n   machine: Linux-4.19.121-microsoft-standard-x86_64-with-glibc2.27\r\n\r\nPython dependencies:\r\n       pip: 9.0.1\r\nsetuptools: 49.2.0\r\n   sklearn: 0.22.2.post1\r\n     numpy: 1.19.1\r\n     scipy: 1.4.1\r\n    Cython: None\r\n    pandas: 1.0.5\r\nmatplotlib: None\r\n    joblib: 0.14.1\r\n\r\nBuilt with OpenMP: True\r\n>>> \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18067", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18067/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18067/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18067/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18067", "id": 671832582, "node_id": "MDU6SXNzdWU2NzE4MzI1ODI=", "number": 18067, "title": "Support distributed computing for big data with sklearn.preprocessing.", "user": {"login": "brightcoder01", "id": 55301748, "node_id": "MDQ6VXNlcjU1MzAxNzQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/55301748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brightcoder01", "html_url": "https://github.com/brightcoder01", "followers_url": "https://api.github.com/users/brightcoder01/followers", "following_url": "https://api.github.com/users/brightcoder01/following{/other_user}", "gists_url": "https://api.github.com/users/brightcoder01/gists{/gist_id}", "starred_url": "https://api.github.com/users/brightcoder01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brightcoder01/subscriptions", "organizations_url": "https://api.github.com/users/brightcoder01/orgs", "repos_url": "https://api.github.com/users/brightcoder01/repos", "events_url": "https://api.github.com/users/brightcoder01/events{/privacy}", "received_events_url": "https://api.github.com/users/brightcoder01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-03T06:35:25Z", "updated_at": "2020-08-03T09:13:26Z", "closed_at": "2020-08-03T09:13:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\nsklearn.preprocessing provides many useful functions to preprocess the data for the following model training/prediction. But it's suitable for the data which can fit into one single process. It will be very useful that sklearn.preprocess can process the big data in a distributed cluster\r\n\r\n#### Describe your proposed solution\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18059", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18059/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18059/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18059/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18059", "id": 671221045, "node_id": "MDU6SXNzdWU2NzEyMjEwNDU=", "number": 18059, "title": "Setting sample_weight in Poisson regression example", "user": {"login": "thomasjpfan", "id": 5402633, "node_id": "MDQ6VXNlcjU0MDI2MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5402633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasjpfan", "html_url": "https://github.com/thomasjpfan", "followers_url": "https://api.github.com/users/thomasjpfan/followers", "following_url": "https://api.github.com/users/thomasjpfan/following{/other_user}", "gists_url": "https://api.github.com/users/thomasjpfan/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasjpfan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasjpfan/subscriptions", "organizations_url": "https://api.github.com/users/thomasjpfan/orgs", "repos_url": "https://api.github.com/users/thomasjpfan/repos", "events_url": "https://api.github.com/users/thomasjpfan/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasjpfan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995770, "node_id": "MDU6TGFiZWwxMjk5NTc3MA==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Documentation", "name": "Documentation", "color": "0b02e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-01T21:38:43Z", "updated_at": "2020-08-16T19:08:39Z", "closed_at": "2020-08-16T19:08:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the issue linked to the documentation\r\n\r\n<!--\r\nTell us about the confusion introduced in the documentation.\r\n-->\r\nIn the [Poisson regression and non-normal loss](https://scikit-learn.org/stable/auto_examples/linear_model/plot_poisson_regression_non_normal_loss.html#sphx-glr-auto-examples-linear-model-plot-poisson-regression-non-normal-loss-py) example, we set the sample weight to the exposure, when we divided the count data by the exposure. We had this discussion regarding this here: https://github.com/scikit-learn/scikit-learn/pull/14300/files#r386066958\r\n\r\nWhen looking at the [reference paper (page 16)](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3164764) the example was based on, it handles this by using an offset:\r\n\r\n```r\r\nglm(formula = ClaimNb ~ VehPowerGLM + VehAgeGLM + DrivAgeGLM +\r\n\tBonusMalusGLM + VehBrand + VehGas + DensityGLM + Region +\r\n \tAreaGLM, family = poisson(), data = learn, offset = log(Exposure))\r\n```\r\n\r\nWhich I think is the same as:\r\n\r\n<img width=\"663\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5402633/89111606-dd4e5c00-d425-11ea-8111-326bde318edc.png\">\r\n\r\nwhere `l` is the exposure. In our example, the target has been already divided by the exposure. If we want to match the narrative by the paper, is the `sample_weight` required?\r\n\r\n**Edit:** I guess we are treating 4 event in 8 years to have a higher weight than 1 event in 2 years.\r\n\r\nCC @lorentzenchr @rth", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18041", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18041/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18041/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18041/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18041", "id": 669472744, "node_id": "MDU6SXNzdWU2Njk0NzI3NDQ=", "number": 18041, "title": "K-fold Cross Validation error in Tensorflow sklearn", "user": {"login": "ahmedeqbal", "id": 7148894, "node_id": "MDQ6VXNlcjcxNDg4OTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/7148894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahmedeqbal", "html_url": "https://github.com/ahmedeqbal", "followers_url": "https://api.github.com/users/ahmedeqbal/followers", "following_url": "https://api.github.com/users/ahmedeqbal/following{/other_user}", "gists_url": "https://api.github.com/users/ahmedeqbal/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahmedeqbal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahmedeqbal/subscriptions", "organizations_url": "https://api.github.com/users/ahmedeqbal/orgs", "repos_url": "https://api.github.com/users/ahmedeqbal/repos", "events_url": "https://api.github.com/users/ahmedeqbal/events{/privacy}", "received_events_url": "https://api.github.com/users/ahmedeqbal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-31T06:43:58Z", "updated_at": "2020-08-11T06:56:03Z", "closed_at": "2020-08-11T06:56:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using following code for semantic segmentation (image, and mask), this code was working fine with simple training and testing, but when i tried to implement k-fold cross validation. this code has shown error, please check my code and let me know what is wrong, and how i can fix this!\r\n\r\n```\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, Flatten, Conv2D, MaxPooling2D\r\nfrom tensorflow.keras.losses import sparse_categorical_crossentropy\r\nfrom tensorflow.keras.optimizers import Adam\r\nfrom sklearn.model_selection import KFold\r\nimport numpy as np\r\n\r\ndef tf_parse(x, y):\r\n    def _parse(x, y):\r\n        x = read_image(x)\r\n        y = read_mask(y)\r\n        return x, y\r\n\r\n    x, y = tf.numpy_function(_parse, [x, y], [tf.float64, tf.float64])\r\n    x.set_shape([224, 224, 3])\r\n    y.set_shape([224, 224, 1])\r\n    return x, y\r\n\r\ndef tf_dataset(x, y, batch=8):\r\n    dataset = tf.data.Dataset.from_tensor_slices((x, y))\r\n    dataset = dataset.map(tf_parse)\r\n    dataset = dataset.batch(batch)\r\n    dataset = dataset.repeat()\r\n    return dataset\r\n\r\ntrain_dataset = tf_dataset(train_x, train_y, batch=batch_size)\r\nvalid_dataset = tf_dataset(valid_x, valid_y, batch=batch_size)\r\n\r\nnum_folds = 10\r\n\r\n# Define per-fold score containers\r\nacc_per_fold = []\r\nloss_per_fold = []\r\n\r\n# Define the K-fold Cross Validator\r\nkfold = KFold(n_splits=num_folds, shuffle=True)\r\n\r\n# K-fold Cross Validation model evaluation\r\nfold_no = 1\r\n\r\nfor train, valid in kfold.split(train_dataset, valid_dataset):\r\n  \r\n  optimizer = tf.keras.optimizers.Adam(lr)\r\n  metrics = ['accuracy']\r\n  model.compile(loss='binary_crossentropy', optimizer=optimizer, metrics=metrics)\r\n\r\n  callbacks = [ReduceLROnPlateau(monitor='val_loss', factor=0.1, patience=4),\r\n              EarlyStopping(monitor='val_loss', patience=10, restore_best_weights=False)]\r\n\r\n  train_steps = len(train_x) // batch_size\r\n  valid_steps = len(valid_x) // batch_size\r\n\r\n  if len(train_x) % batch_size != 0:\r\n    train_steps += 1\r\n  if len(valid_x) % batch_size != 0:\r\n    valid_steps += 1\r\n\r\n\r\n  # Generate a print\r\n  print('------------------------------------------------------------------------')\r\n  print(f'Training for fold {fold_no} ...')\r\n\r\n  model.fit(train_dataset[train], valid_dataset[train],\r\n            epochs=epochs,\r\n            steps_per_epoch=train_steps,\r\n            validation_steps=valid_steps,\r\n            callbacks=callbacks)\r\n\r\n  # Generate generalization metrics\r\n  scores = model.evaluate(train_dataset[valid], valid_dataset[valid], verbose=0)\r\n  print(f'Score for fold {fold_no}: {model.metrics_names[0]} of {scores[0]}; {model.metrics_names[1]} of {scores[1]*100}%')\r\n  acc_per_fold.append(scores[1] * 100)\r\n  loss_per_fold.append(scores[0])\r\n\r\n  # Increase fold number\r\n  fold_no = fold_no + 1\r\n\r\n# == Provide average scores ==\r\nprint('------------------------------------------------------------------------')\r\nprint('Score per fold')\r\nfor i in range(0, len(acc_per_fold)):\r\n  print('------------------------------------------------------------------------')\r\n  print(f'> Fold {i+1} - Loss: {loss_per_fold[i]} - Accuracy: {acc_per_fold[i]}%')\r\nprint('------------------------------------------------------------------------')\r\nprint('Average scores for all folds:')\r\nprint(f'> Accuracy: {np.mean(acc_per_fold)} (+- {np.std(acc_per_fold)})')\r\nprint(f'> Loss: {np.mean(loss_per_fold)}')\r\nprint('------------------------------------------------------------------------')\r\n```\r\n\r\n**Error**\r\n\r\n\r\n```\r\n> --------------------------------------------------------------------------- TypeError Traceback (most recent call last) in () 12 # K-fold Cross Validation model evaluation 13 fold_no = 1 ---> 14 for train, valid in kfold.split(train_dataset, valid_dataset): 15 16 optimizer = tf.keras.optimizers.Adam(lr)\r\n> \r\n> 4 frames /usr/local/lib/python3.6/dist-packages/sklearn/utils/validation.py in _num_samples(x) 150 if len(x.shape) == 0: 151 raise TypeError(\"Singleton array %r cannot be considered\" --> 152 \" a valid collection.\" % x) 153 # Check that shape is returning an integer or default to len 154 # Dask dataframes may not return numeric shape[0] value\r\n> \r\n> TypeError: Singleton array array(<RepeatDataset shapes: ((None, 224, 224, 3), (None, 224, 224, 1)), types: (tf.float64, tf.float64)>, dtype=object) cannot be considered a valid collection.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18032", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18032/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18032/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18032/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18032", "id": 668802965, "node_id": "MDU6SXNzdWU2Njg4MDI5NjU=", "number": 18032, "title": "Add the predict_proba method to LinearSVC", "user": {"login": "LuisVilarBarbosa", "id": 16047440, "node_id": "MDQ6VXNlcjE2MDQ3NDQw", "avatar_url": "https://avatars0.githubusercontent.com/u/16047440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LuisVilarBarbosa", "html_url": "https://github.com/LuisVilarBarbosa", "followers_url": "https://api.github.com/users/LuisVilarBarbosa/followers", "following_url": "https://api.github.com/users/LuisVilarBarbosa/following{/other_user}", "gists_url": "https://api.github.com/users/LuisVilarBarbosa/gists{/gist_id}", "starred_url": "https://api.github.com/users/LuisVilarBarbosa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LuisVilarBarbosa/subscriptions", "organizations_url": "https://api.github.com/users/LuisVilarBarbosa/orgs", "repos_url": "https://api.github.com/users/LuisVilarBarbosa/repos", "events_url": "https://api.github.com/users/LuisVilarBarbosa/events{/privacy}", "received_events_url": "https://api.github.com/users/LuisVilarBarbosa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-30T14:35:42Z", "updated_at": "2020-07-31T14:10:54Z", "closed_at": "2020-07-31T14:10:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n**LinearSVC** allows using the *predict* method and this is enough to obtain a prediction, but I wanted to obtain probabilities in order to obtain a ranking.\r\nAfter a lot of research, I decided to use **SVC** instead of **LinearSVC** to use the *predict_proba* method, but the downside was the huge amount of time needed to process the information. It was a difference of something like 7 seconds for **LinearSVC** and 30 hours for **SVC**.\r\nFor this reason, I wanted to enable the use of the *predict_proba* method for **LinearSVC**. I wanted the method to have the same name as for other classifiers so that I could use the same code for several classifiers.\r\n\r\n#### Describe your proposed solution\r\nI stuck for some time with **SVC**, until I was lucky enough to find \"https://erogol.com/predict-probabilities-sklearn-linearsvc/\", which showed an implementation of *predict_proba* for **LinearSVC**, instead of only showing the theoretical approach, which was somewhat confusing and therefore unreliable to implement.\r\nI propose to implement the code present in \"https://github.com/LuisVilarBarbosa/TextCategorizer/blob/b1e1ae882aaf196308bc4fb0a2130ba19ac78185/text_categorizer/LinearSVC_proba.py\" in the **LinearSVC** class. The code present in this last URL is an improvement over the code of the first URL.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nA possible alternative was to use **CalibratedClassifierCV** to encapsulate **LinearSVC**, but that did not meet my needs.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18031", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18031/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18031/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18031/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18031", "id": 668762673, "node_id": "MDU6SXNzdWU2Njg3NjI2NzM=", "number": 18031, "title": "Test test_assess_dimesion_rank_one fails on multiple architectures", "user": {"login": "ckastner", "id": 15859947, "node_id": "MDQ6VXNlcjE1ODU5OTQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/15859947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ckastner", "html_url": "https://github.com/ckastner", "followers_url": "https://api.github.com/users/ckastner/followers", "following_url": "https://api.github.com/users/ckastner/following{/other_user}", "gists_url": "https://api.github.com/users/ckastner/gists{/gist_id}", "starred_url": "https://api.github.com/users/ckastner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ckastner/subscriptions", "organizations_url": "https://api.github.com/users/ckastner/orgs", "repos_url": "https://api.github.com/users/ckastner/repos", "events_url": "https://api.github.com/users/ckastner/events{/privacy}", "received_events_url": "https://api.github.com/users/ckastner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-30T14:02:12Z", "updated_at": "2020-08-01T08:00:29Z", "closed_at": "2020-08-01T08:00:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When building 0.23.1 packages for Debian, we are observing failures of `test_assess_dimesion_rank_one` on PowerPC (ppc64le), RISC-V (riscv64), and s390x architectures:\r\n\r\n```python\r\n=================================== FAILURES ===================================\r\n________________________ test_assess_dimesion_rank_one _________________________\r\n\r\n    def test_assess_dimesion_rank_one():\r\n        # Make sure assess_dimension works properly on a matrix of rank 1\r\n        n_samples, n_features = 9, 6\r\n        X = np.ones((n_samples, n_features))  # rank 1 matrix\r\n        _, s, _ = np.linalg.svd(X, full_matrices=True)\r\n>       assert sum(s[1:]) == 0  # except for rank 1, all eigenvalues are 0\r\nE       assert 1.433291761649753e-16 == 0\r\nE         -1.433291761649753e-16\r\nE         +0\r\n\r\nsklearn/decomposition/tests/test_pca.py:636: AssertionError\r\n```\r\n\r\nNot the most frequently used architectures, but nevertheless fairly independent ones, so harder to discount as some architecture-specific quirk.\r\n\r\n#### Versions\r\n```System:\r\n    python: 3.8.5 (default, Jul 20 2020, 18:32:44)  [GCC 9.3.0]\r\nexecutable: /usr/bin/python3.8\r\n   machine: Linux-4.19.0-9-powerpc64le-ppc64le-with-glibc2.29\r\n\r\nPython dependencies:\r\n          pip: None\r\n   setuptools: 46.1.3\r\n      sklearn: 0.23.1\r\n        numpy: 1.19.1\r\n        scipy: 1.4.1\r\n       Cython: 0.29.21\r\n       pandas: 0.25.32\r\n   matplotlib: 3.3.0\r\n       joblib: 0.14.0\r\nthreadpoolctl: 2.0.0\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18009", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18009/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18009/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18009/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18009", "id": 666256661, "node_id": "MDU6SXNzdWU2NjYyNTY2NjE=", "number": 18009, "title": "`plot_topics` visualization for decomposition in text data ", "user": {"login": "venkyyuvy", "id": 20812407, "node_id": "MDQ6VXNlcjIwODEyNDA3", "avatar_url": "https://avatars2.githubusercontent.com/u/20812407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/venkyyuvy", "html_url": "https://github.com/venkyyuvy", "followers_url": "https://api.github.com/users/venkyyuvy/followers", "following_url": "https://api.github.com/users/venkyyuvy/following{/other_user}", "gists_url": "https://api.github.com/users/venkyyuvy/gists{/gist_id}", "starred_url": "https://api.github.com/users/venkyyuvy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/venkyyuvy/subscriptions", "organizations_url": "https://api.github.com/users/venkyyuvy/orgs", "repos_url": "https://api.github.com/users/venkyyuvy/repos", "events_url": "https://api.github.com/users/venkyyuvy/events{/privacy}", "received_events_url": "https://api.github.com/users/venkyyuvy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-27T12:29:59Z", "updated_at": "2020-07-30T14:22:27Z", "closed_at": "2020-07-27T13:28:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n\r\n\r\n#### Describe your proposed solution\r\nJust like `plot_tree` for decision tree, \r\ncan we have a feature for `plot_topics` for LDA, PCA, NMF, etc. \r\n\r\nPlot would be something like this one, which we have in [this](https://scikit-learn.org/dev/auto_examples/applications/plot_topics_extraction_with_nmf_lda.html#sphx-glr-auto-examples-applications-plot-topics-extraction-with-nmf-lda-py) example. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18007", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18007/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18007/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18007/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18007", "id": 666179094, "node_id": "MDU6SXNzdWU2NjYxNzkwOTQ=", "number": 18007, "title": "spectral_clustering largest/smallest eigenvalues mistake?", "user": {"login": "mzmey37", "id": 9392265, "node_id": "MDQ6VXNlcjkzOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/9392265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzmey37", "html_url": "https://github.com/mzmey37", "followers_url": "https://api.github.com/users/mzmey37/followers", "following_url": "https://api.github.com/users/mzmey37/following{/other_user}", "gists_url": "https://api.github.com/users/mzmey37/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzmey37/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzmey37/subscriptions", "organizations_url": "https://api.github.com/users/mzmey37/orgs", "repos_url": "https://api.github.com/users/mzmey37/repos", "events_url": "https://api.github.com/users/mzmey37/events{/privacy}", "received_events_url": "https://api.github.com/users/mzmey37/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-27T10:29:02Z", "updated_at": "2020-07-27T16:57:38Z", "closed_at": "2020-07-27T16:57:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\nI was studying spectral clustering and found a place in code, that confused me. As I understood, in spectral clustering we pick first k eigenvectors corresponding to first k smallest eignvalues. I saw it [here](https://www.cs.cmu.edu/~aarti/Class/10701/readings/Luxburg06_TR.pdf) on page 3 _By \u201cthe first k eigenvectors\u201d we refer to the eigenvectors corresponding to the k smallest eigenvalues._ and page 5 in algorithm definition.\r\n\r\nBut [here](https://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/manifold/_spectral_embedding.py#L271) we seem to calculate eigenvectors for largest eigenvalues(which='LM').\r\n\r\nAt the same time [here](https://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/manifold/_spectral_embedding.py#L311) with different solver we calculate it for smallest eigenvalues(largest=False).\r\n\r\nDo I miss something here?\r\n\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\n#### Steps/Code to Reproduce\r\nI guess, this is more theoretical issue, sorry, no code here.\r\n\r\n<!--\r\nPlease add a minimal example that we can reproduce the error by running the\r\ncode. Be as succinct as possible, do not depend on external data. In short, we\r\nare going to copy-paste your code and we expect to get the same\r\nresult as you.\r\n\r\nExample:\r\n```python\r\nfrom sklearn.feature_extraction.text import CountVectorizer\r\nfrom sklearn.decomposition import LatentDirichletAllocation\r\ndocs = [\"Help I have a bug\" for i in range(1000)]\r\nvectorizer = CountVectorizer(input=docs, analyzer='word')\r\nlda_features = vectorizer.fit_transform(docs)\r\nlda_model = LatentDirichletAllocation(\r\n    n_topics=10,\r\n    learning_method='online',\r\n    evaluate_every=10,\r\n    n_jobs=4,\r\n)\r\nmodel = lda_model.fit(lda_features)\r\n```\r\nIf the code is too long, feel free to put it in a public gist and link\r\nit in the issue: https://gist.github.com\r\n-->\r\n\r\n```\r\nSample code to reproduce the problem\r\n```\r\n\r\n#### Expected Results\r\n<!-- Example: No error is thrown. Please paste or describe the expected results.-->\r\n\r\n#### Actual Results\r\n<!-- Please paste or specifically describe the actual output or traceback. -->\r\n\r\n#### Versions\r\n<!--\r\nPlease run the following snippet and paste the output below.\r\nFor scikit-learn >= 0.20:\r\nimport sklearn; sklearn.show_versions()\r\nFor scikit-learn < 0.20:\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nimport imblearn; print(\"Imbalanced-Learn\", imblearn.__version__)\r\n-->\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18006", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18006/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18006/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/18006/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/18006", "id": 666144338, "node_id": "MDU6SXNzdWU2NjYxNDQzMzg=", "number": 18006, "title": "calibratedclassifercv is not giving correct calibration curve plot", "user": {"login": "zahs123", "id": 23192374, "node_id": "MDQ6VXNlcjIzMTkyMzc0", "avatar_url": "https://avatars3.githubusercontent.com/u/23192374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zahs123", "html_url": "https://github.com/zahs123", "followers_url": "https://api.github.com/users/zahs123/followers", "following_url": "https://api.github.com/users/zahs123/following{/other_user}", "gists_url": "https://api.github.com/users/zahs123/gists{/gist_id}", "starred_url": "https://api.github.com/users/zahs123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zahs123/subscriptions", "organizations_url": "https://api.github.com/users/zahs123/orgs", "repos_url": "https://api.github.com/users/zahs123/repos", "events_url": "https://api.github.com/users/zahs123/events{/privacy}", "received_events_url": "https://api.github.com/users/zahs123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-07-27T09:44:05Z", "updated_at": "2020-07-30T08:22:32Z", "closed_at": "2020-07-30T08:22:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi all, \r\n\r\ni am using xgboost and since the model outputs scores i need to calibrate model. i have read the sklearn documentation and have ensured i've adhered to the requirements in using calaibratedclassifer. my mode is as below: \r\n\r\n```\r\nmodel = XGBClassifier()\r\npipeline = make_pipeline(model)\r\n\r\n```\r\n```\r\nkfolds = StratifiedKFold(3)\r\nclf = GridSearchCV(pipeline, parameters, cv=kfolds.split(x_train, y_train),\r\n                           scoring='roc_auc', return_train_score=True)\r\n\r\nclf.fit(x_train, y_train)\r\n\r\nmodel = clf.best_estimator_\r\n\r\ny_test_uncalibrated = model.predict_proba(x_test)[:, 1]\r\nfraction_of_positives, mean_predicted_value=calibration_curve(y_test,y_test_uncalibrated,n_bins=10)\r\n\r\nplt.plot(mean_predicted_value, fraction_of_positives, 's-', label='Uncalibrated')\r\n    \r\nclf_isotonic = CalibratedClassifierCV(model, cv='prefit', method='isotonic')\r\nclf_isotonic.fit(x_valid, y_valid) #ensuring disjoint\r\ny_test_iso = clf_isotonic.predict_proba(x_test)[:, 1]\r\nfraction_of_positives, mean_predicted_value = calibration_curve(y_test, y_test_iso, n_bins=10)\r\n    \r\nplt.plot(mean_predicted_value, fraction_of_positives, 's-', color='red', label='Calibrated (Isotonic)')\r\n```\r\n\r\n\r\nthen doing above for platts also i get:\r\n![Screenshot 2020-07-24 at 11 02 39 AM](https://user-images.githubusercontent.com/23192374/88528010-f3a78280-cff5-11ea-98a2-6d4e26c3db12.png)\r\n\r\n\r\nwhy do my isotonic and platts plots have less points?? i do not understand what is going on. \r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17983", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17983/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17983/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17983/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17983", "id": 665537930, "node_id": "MDU6SXNzdWU2NjU1Mzc5MzA=", "number": 17983, "title": "ImportError: DLL load failed: The specified procedure could not be found.", "user": {"login": "GuptaTanay", "id": 20955865, "node_id": "MDQ6VXNlcjIwOTU1ODY1", "avatar_url": "https://avatars0.githubusercontent.com/u/20955865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuptaTanay", "html_url": "https://github.com/GuptaTanay", "followers_url": "https://api.github.com/users/GuptaTanay/followers", "following_url": "https://api.github.com/users/GuptaTanay/following{/other_user}", "gists_url": "https://api.github.com/users/GuptaTanay/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuptaTanay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuptaTanay/subscriptions", "organizations_url": "https://api.github.com/users/GuptaTanay/orgs", "repos_url": "https://api.github.com/users/GuptaTanay/repos", "events_url": "https://api.github.com/users/GuptaTanay/events{/privacy}", "received_events_url": "https://api.github.com/users/GuptaTanay/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-25T07:46:09Z", "updated_at": "2020-08-03T15:35:10Z", "closed_at": "2020-08-03T15:35:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "My OS is windows 10 and using jupyter notebook in my venv.  sklearn is installed successfully using the command:\r\n`pip install scikit-learn`\r\n\r\nAfter importing the package using the below command:\r\n`from sklearn.model_selection import train_test_split`\r\nI am getting below error:\r\n\r\n```\r\n--------------------------------------------------------------------------\r\nImportError                               Traceback (most recent call last)\r\n<ipython-input-4-655c8168ea58> in <module>\r\n      2 import tarfile\r\n      3 from six.moves import urllib\r\n----> 4 from sklearn.model_selection import train_test_split\r\n      5 import pandas as pd\r\n      6 import matplotlib.pyplot as plt\r\n\r\n~\\Anaconda3\\lib\\site-packages\\sklearn\\__init__.py in <module>\r\n     74 else:\r\n     75     from . import __check_build\r\n---> 76     from .base import clone\r\n     77     from .utils._show_versions import show_versions\r\n     78 \r\n\r\n~\\Anaconda3\\lib\\site-packages\\sklearn\\base.py in <module>\r\n     14 \r\n     15 from . import __version__\r\n---> 16 from .utils import _IS_32BIT\r\n     17 \r\n     18 _DEFAULT_TAGS = {\r\n\r\n~\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\__init__.py in <module>\r\n     18 from ..exceptions import DataConversionWarning\r\n     19 from .deprecation import deprecated\r\n---> 20 from .validation import (as_float_array,\r\n     21                          assert_all_finite,\r\n     22                          check_random_state, column_or_1d, check_array,\r\n\r\n~\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\validation.py in <module>\r\n     19 from numpy.core.numeric import ComplexWarning\r\n     20 \r\n---> 21 from .fixes import _object_dtype_isnan\r\n     22 from .. import get_config as _get_config\r\n     23 from ..exceptions import NonBLASDotWarning\r\n\r\n~\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\fixes.py in <module>\r\n     16 import scipy.sparse as sp\r\n     17 import scipy\r\n---> 18 from scipy.sparse.linalg import lsqr as sparse_lsqr  # noqa\r\n     19 \r\n     20 \r\n\r\n~\\Anaconda3\\lib\\site-packages\\scipy\\sparse\\linalg\\__init__.py in <module>\r\n    114 from .dsolve import *\r\n    115 from .interface import *\r\n--> 116 from .eigen import *\r\n    117 from .matfuncs import *\r\n    118 from ._onenormest import *\r\n\r\n~\\Anaconda3\\lib\\site-packages\\scipy\\sparse\\linalg\\eigen\\__init__.py in <module>\r\n      9 from __future__ import division, print_function, absolute_import\r\n     10 \r\n---> 11 from .arpack import *\r\n     12 from .lobpcg import *\r\n     13 \r\n\r\n~\\Anaconda3\\lib\\site-packages\\scipy\\sparse\\linalg\\eigen\\arpack\\__init__.py in <module>\r\n     20 from __future__ import division, print_function, absolute_import\r\n     21 \r\n---> 22 from .arpack import *\r\n\r\n~\\Anaconda3\\lib\\site-packages\\scipy\\sparse\\linalg\\eigen\\arpack\\arpack.py in <module>\r\n     43 __all__ = ['eigs', 'eigsh', 'svds', 'ArpackError', 'ArpackNoConvergence']\r\n     44 \r\n---> 45 from . import _arpack\r\n     46 import numpy as np\r\n     47 import warnings\r\n\r\nImportError: DLL load failed: The specified procedure could not be found.``\r\n-------------------------------------------------------------------------------------------------------'\r\n\r\n\r\n\r\nI have re-installed the package twice after getting this option with no-cache pip command as well.\r\nPlease sugest.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17980", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17980/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17980/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17980/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17980", "id": 665202565, "node_id": "MDU6SXNzdWU2NjUyMDI1NjU=", "number": 17980, "title": "sklearn/gaussian_process/tests/test_gpr.py:test_sample_statistics segfaults with libopenblas 0.3.10", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1815443556, "node_id": "MDU6TGFiZWwxODE1NDQzNTU2", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/module:gaussian_process", "name": "module:gaussian_process", "color": "151e91", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-07-24T14:21:45Z", "updated_at": "2020-07-25T13:02:37Z", "closed_at": "2020-07-25T13:02:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Steps to reproduce:\r\n\r\n```bash\r\nconda create -n cf -y -c conda-forge cython pillow numpy scipy pytest joblib threadpoolctl\r\nconda activate cf\r\npip install -e . --no-build-isolation\r\n```\r\n\r\nThen:\r\n\r\n```\r\n$ pytest -vlk test_sample_statistics sklearn/gaussian_process\r\n============================================================================================== test session starts ==============================================================================================\r\nplatform linux -- Python 3.8.5, pytest-5.4.3, py-1.9.0, pluggy-0.13.1 -- /home/ogrisel/miniconda3/envs/cf/bin/python\r\ncachedir: .pytest_cache\r\nrootdir: /home/ogrisel/code/scikit-learn, inifile: setup.cfg\r\ncollected 422 items / 416 deselected / 6 selected                                                                                                                                                               \r\n\r\nsklearn/gaussian_process/tests/test_gpr.py::test_sample_statistics[kernel0] Fatal Python error: Segmentation fault\r\n\r\nCurrent thread 0x00007fe741e14740 (most recent call first):\r\n  File \"<__array_function__ internals>\", line 5 in dot\r\n  File \"/home/ogrisel/code/scikit-learn/sklearn/gaussian_process/_gpr.py\", line 410 in sample_y\r\n  File \"/home/ogrisel/code/scikit-learn/sklearn/gaussian_process/tests/test_gpr.py\", line 171 in test_sample_statistics\r\n  File \"/home/ogrisel/miniconda3/envs/cf/lib/python3.8/site-packages/_pytest/python.py\", line 182 in pytest_pyfunc_call\r\nSegmentation fault (core dumped)\r\n```\r\n\r\n<details>\r\n\r\n```\r\n$ conda list\r\n# packages in environment at /home/ogrisel/miniconda3/envs/cf:\r\n#\r\n# Name                    Version                   Build  Channel\r\n_libgcc_mutex             0.1                 conda_forge    conda-forge\r\n_openmp_mutex             4.5                       0_gnu    conda-forge\r\nattrs                     19.3.0                     py_0    conda-forge\r\nca-certificates           2020.6.20            hecda079_0    conda-forge\r\ncertifi                   2020.6.20        py38h32f6830_0    conda-forge\r\ncython                    0.29.21          py38h950e882_0    conda-forge\r\nfreetype                  2.10.2               he06d7ca_0    conda-forge\r\njoblib                    0.16.0                     py_0    conda-forge\r\njpeg                      9d                   h516909a_0    conda-forge\r\nlcms2                     2.11                 hbd6801e_0    conda-forge\r\nld_impl_linux-64          2.34                 h53a641e_7    conda-forge\r\nlibblas                   3.8.0               17_openblas    conda-forge\r\nlibcblas                  3.8.0               17_openblas    conda-forge\r\nlibffi                    3.2.1             he1b5a44_1007    conda-forge\r\nlibgcc-ng                 9.2.0                h24d8f2e_2    conda-forge\r\nlibgfortran-ng            7.5.0                hdf63c60_6    conda-forge\r\nlibgomp                   9.2.0                h24d8f2e_2    conda-forge\r\nliblapack                 3.8.0               17_openblas    conda-forge\r\nlibopenblas               0.3.10          pthreads_hb3c22a3_3    conda-forge\r\nlibpng                    1.6.37               hed695b0_1    conda-forge\r\nlibstdcxx-ng              9.2.0                hdf63c60_2    conda-forge\r\nlibtiff                   4.1.0                hc7e4089_6    conda-forge\r\nlibwebp-base              1.1.0                h516909a_3    conda-forge\r\nlz4-c                     1.9.2                he1b5a44_1    conda-forge\r\nmore-itertools            8.4.0                      py_0    conda-forge\r\nncurses                   6.2                  he1b5a44_1    conda-forge\r\nnumpy                     1.19.1           py38h8854b6b_0    conda-forge\r\nolefile                   0.46                       py_0    conda-forge\r\nopenssl                   1.1.1g               h516909a_0    conda-forge\r\npackaging                 20.4               pyh9f0ad1d_0    conda-forge\r\npillow                    7.2.0            py38h9776b28_1    conda-forge\r\npip                       20.1.1                     py_1    conda-forge\r\npluggy                    0.13.1           py38h32f6830_2    conda-forge\r\npy                        1.9.0              pyh9f0ad1d_0    conda-forge\r\npyparsing                 2.4.7              pyh9f0ad1d_0    conda-forge\r\npytest                    5.4.3            py38h32f6830_0    conda-forge\r\npython                    3.8.5           h425cb1d_1_cpython    conda-forge\r\npython_abi                3.8                      1_cp38    conda-forge\r\nreadline                  8.0                  he28a2e2_2    conda-forge\r\nscikit-learn              0.24.dev0                 dev_0    <develop>\r\nscipy                     1.5.2            py38h8c5af15_0    conda-forge\r\nsetuptools                49.2.0           py38h32f6830_0    conda-forge\r\nsix                       1.15.0             pyh9f0ad1d_0    conda-forge\r\nsqlite                    3.32.3               hcee41ef_1    conda-forge\r\nthreadpoolctl             2.1.0              pyh5ca1d4c_0    conda-forge\r\ntk                        8.6.10               hed695b0_0    conda-forge\r\nwcwidth                   0.2.5              pyh9f0ad1d_0    conda-forge\r\nwheel                     0.34.2                     py_1    conda-forge\r\nxz                        5.2.5                h516909a_1    conda-forge\r\nzlib                      1.2.11            h516909a_1006    conda-forge\r\nzstd                      1.4.5                h6597ccf_1    conda-forge\r\n```\r\n\r\n</details>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17977", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17977/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17977/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17977/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17977", "id": 664613144, "node_id": "MDU6SXNzdWU2NjQ2MTMxNDQ=", "number": 17977, "title": "Unpickling PCA in 0.21.3 that was pickled in 0.22.2.post1", "user": {"login": "pasztorlacos", "id": 55025606, "node_id": "MDQ6VXNlcjU1MDI1NjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/55025606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pasztorlacos", "html_url": "https://github.com/pasztorlacos", "followers_url": "https://api.github.com/users/pasztorlacos/followers", "following_url": "https://api.github.com/users/pasztorlacos/following{/other_user}", "gists_url": "https://api.github.com/users/pasztorlacos/gists{/gist_id}", "starred_url": "https://api.github.com/users/pasztorlacos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pasztorlacos/subscriptions", "organizations_url": "https://api.github.com/users/pasztorlacos/orgs", "repos_url": "https://api.github.com/users/pasztorlacos/repos", "events_url": "https://api.github.com/users/pasztorlacos/events{/privacy}", "received_events_url": "https://api.github.com/users/pasztorlacos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-23T16:29:07Z", "updated_at": "2020-08-03T14:31:52Z", "closed_at": "2020-08-03T14:31:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "PCA pickled in Colab with version 0.22.2.post1 cannot be loaded in version 0.21.3 that QuantConnect uses. ModuleNotFoundError : No module named 'sklearn.decomposition._pca'. Is there any workaround? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17972", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17972/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17972/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17972/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17972", "id": 663940636, "node_id": "MDU6SXNzdWU2NjM5NDA2MzY=", "number": 17972, "title": "fit_transform() method of LabelEncoder() return a new line after 37 len(string) value", "user": {"login": "ebonat", "id": 5694881, "node_id": "MDQ6VXNlcjU2OTQ4ODE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5694881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebonat", "html_url": "https://github.com/ebonat", "followers_url": "https://api.github.com/users/ebonat/followers", "following_url": "https://api.github.com/users/ebonat/following{/other_user}", "gists_url": "https://api.github.com/users/ebonat/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebonat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebonat/subscriptions", "organizations_url": "https://api.github.com/users/ebonat/orgs", "repos_url": "https://api.github.com/users/ebonat/repos", "events_url": "https://api.github.com/users/ebonat/events{/privacy}", "received_events_url": "https://api.github.com/users/ebonat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-22T17:48:13Z", "updated_at": "2020-07-23T00:09:06Z", "closed_at": "2020-07-22T23:47:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nThe fit_transform() method of LabelEncoder() return a new line after 37 len(string) value. Below is the code:\r\n\r\n```\r\nfrom sklearn.preprocessing import LabelEncoder\r\nlabel_encoder = LabelEncoder()  \r\nsequence = \"CCGAGGGCTATGGTTTGGAAGTTAGAACCCTGGGGCTTCTCGCGGACACC\"\r\nprint(len(sequence))\r\ninteger_encoded = label_encoder.fit_transform(list(sequence))\r\nprint(integer_encoded)\r\n```\r\n\r\nResults:\r\n\r\n```\r\n50\r\n[1 1 2 0 2 2 2 1 3 0 3 2 2 3 3 3 2 2 0 0 2 3 3 0 2 0 0 1 1 1 3 2 2 2 2 1 3\r\n 3 1 3 1 2 1 2 2 0 1 0 1 1]\r\n\r\n37\r\n[1 1 2 0 2 2 2 1 3 0 3 2 2 3 3 3 2 2 0 0 2 3 3 0 2 0 0 1 1 1 3 2 2 2 2 1 3]\r\n```\r\n\r\nIs anyone knows why? any work around to fix this issue?\r\n\r\nthank you for your help,\r\n\r\n-ernest\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17969", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17969/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17969/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17969/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17969", "id": 663350999, "node_id": "MDU6SXNzdWU2NjMzNTA5OTk=", "number": 17969, "title": "Verbose debugging for spectral clustering", "user": {"login": "sstalley", "id": 51347105, "node_id": "MDQ6VXNlcjUxMzQ3MTA1", "avatar_url": "https://avatars2.githubusercontent.com/u/51347105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sstalley", "html_url": "https://github.com/sstalley", "followers_url": "https://api.github.com/users/sstalley/followers", "following_url": "https://api.github.com/users/sstalley/following{/other_user}", "gists_url": "https://api.github.com/users/sstalley/gists{/gist_id}", "starred_url": "https://api.github.com/users/sstalley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sstalley/subscriptions", "organizations_url": "https://api.github.com/users/sstalley/orgs", "repos_url": "https://api.github.com/users/sstalley/repos", "events_url": "https://api.github.com/users/sstalley/events{/privacy}", "received_events_url": "https://api.github.com/users/sstalley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-21T22:35:27Z", "updated_at": "2020-08-07T21:05:33Z", "closed_at": "2020-08-07T21:05:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\nI want to be able to enable verbose debugging messages for spectral clustering to make it easier to find problems and debug. \r\n\r\n#### Describe your proposed solution\r\nAdd a 'verbose' optional argument to the spectral_clustering() function that gets passed into the underlying k_means() call.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nThere may be additional places in the spectral clustering algorithm where it would make sense to add a debug message.\r\nThat said, just getting the messages from k means was enough for me to debug my problems, and is a big step up from no print messages at all.\r\n\r\n#### Additional context\r\nI have been using sklearn for the past year or so and would like to learn how to contribute to the project.\r\nI noticed that spectral clustering was missing verbose debugging (a feature present in a lot of the other clustering algorithms in sklearn), and I thought that adding this feature would be a good way to get familiar with the sklearn workflow.\r\n\r\nMostly I am testing the waters to see if this feature is something that would be valuable to the community and accepted by the maintainers.\r\nI am a former software engineer (and current ML research assistant) who has contributed to open source projects in the past (like wireshark and the linux kernel).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17967", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17967/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17967/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17967/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17967", "id": 663289365, "node_id": "MDU6SXNzdWU2NjMyODkzNjU=", "number": 17967, "title": "neighbors/_quad_tree.pyx contains test", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-21T20:31:12Z", "updated_at": "2020-07-22T09:56:30Z", "closed_at": "2020-07-22T09:56:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There's a test_summarize static method, which I feel should not be in the main cython code.\r\nWe don't have any other tests in Cython so this might need a new cython test file? I'm not sure.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17963", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17963/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17963/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17963/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17963", "id": 663006196, "node_id": "MDU6SXNzdWU2NjMwMDYxOTY=", "number": 17963, "title": "Give us the output of", "user": {"login": "dhruvshah0803", "id": 63180661, "node_id": "MDQ6VXNlcjYzMTgwNjYx", "avatar_url": "https://avatars0.githubusercontent.com/u/63180661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhruvshah0803", "html_url": "https://github.com/dhruvshah0803", "followers_url": "https://api.github.com/users/dhruvshah0803/followers", "following_url": "https://api.github.com/users/dhruvshah0803/following{/other_user}", "gists_url": "https://api.github.com/users/dhruvshah0803/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhruvshah0803/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhruvshah0803/subscriptions", "organizations_url": "https://api.github.com/users/dhruvshah0803/orgs", "repos_url": "https://api.github.com/users/dhruvshah0803/repos", "events_url": "https://api.github.com/users/dhruvshah0803/events{/privacy}", "received_events_url": "https://api.github.com/users/dhruvshah0803/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-07-21T13:17:19Z", "updated_at": "2020-08-03T14:33:56Z", "closed_at": "2020-08-03T14:33:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Give us the output of\r\n\r\n``` python\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\n```\r\nthe output is \r\n\r\n```pytb\r\nWindows-10-10.0.19041-SP0\r\nPython 3.8.3 (tags/v3.8.3:6f8c832, May 13 2020, 22:37:02) [MSC v.1924 64 bit (AMD64)]\r\nNumPy 1.18.5\r\nSciPy 1.5.1\r\nTraceback (most recent call last):\r\n  File \"d:\\3.PROGRAMS\\Python\\ch1\\myfirst.py\", line 5, in <module>\r\n    import sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\n  File \"C:\\Users\\dhruv\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\sklearn\\__init__.py\", line 79, in <module>\r\n    from . import __check_build  # noqa: F401\r\nImportError: cannot import name '__check_build' from partially initialized module 'sklearn' (most likely due to a circular import) (C:\\Users\\dhruv\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\sklearn\\__init__.py)\r\n```\r\n\r\n_Originally posted by @glemaitre in https://github.com/scikit-learn/scikit-learn/issues/8754#issuecomment-294817324_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17961", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17961/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17961/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17961/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17961", "id": 662735189, "node_id": "MDU6SXNzdWU2NjI3MzUxODk=", "number": 17961, "title": "Class_weight and sample_weight  in LogisticRegression", "user": {"login": "binxixi", "id": 65208806, "node_id": "MDQ6VXNlcjY1MjA4ODA2", "avatar_url": "https://avatars1.githubusercontent.com/u/65208806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binxixi", "html_url": "https://github.com/binxixi", "followers_url": "https://api.github.com/users/binxixi/followers", "following_url": "https://api.github.com/users/binxixi/following{/other_user}", "gists_url": "https://api.github.com/users/binxixi/gists{/gist_id}", "starred_url": "https://api.github.com/users/binxixi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binxixi/subscriptions", "organizations_url": "https://api.github.com/users/binxixi/orgs", "repos_url": "https://api.github.com/users/binxixi/repos", "events_url": "https://api.github.com/users/binxixi/events{/privacy}", "received_events_url": "https://api.github.com/users/binxixi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 169405827, "node_id": "MDU6TGFiZWwxNjk0MDU4Mjc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Question", "name": "Question", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-21T08:19:27Z", "updated_at": "2020-07-21T13:17:56Z", "closed_at": "2020-07-21T13:17:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "hello, why class_weight and sample_weight dosen't work well? hope for you guidance,thks.\r\n\r\nI train some unbalanced data , which the ratio of bad to good is 1:10 .  \r\nSo I  use class_weight = 'balanced', but the ks/ F1 score /auc dosen't prove or change little .\r\nSo I  use sample_weight = data['is_bad'],  but the ks/auc decline ,and F1 score turn to zero . \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17950", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17950/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17950/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17950/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17950", "id": 660733397, "node_id": "MDU6SXNzdWU2NjA3MzMzOTc=", "number": 17950, "title": "Missing members after `fit` call when using `TransformedTargetRegressor` object.", "user": {"login": "jlandercy", "id": 20479241, "node_id": "MDQ6VXNlcjIwNDc5MjQx", "avatar_url": "https://avatars0.githubusercontent.com/u/20479241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlandercy", "html_url": "https://github.com/jlandercy", "followers_url": "https://api.github.com/users/jlandercy/followers", "following_url": "https://api.github.com/users/jlandercy/following{/other_user}", "gists_url": "https://api.github.com/users/jlandercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlandercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlandercy/subscriptions", "organizations_url": "https://api.github.com/users/jlandercy/orgs", "repos_url": "https://api.github.com/users/jlandercy/repos", "events_url": "https://api.github.com/users/jlandercy/events{/privacy}", "received_events_url": "https://api.github.com/users/jlandercy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-19T09:55:06Z", "updated_at": "2020-07-21T12:57:21Z", "closed_at": "2020-07-19T16:33:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nUsing `TransformedTargetRegressor` object does not allow to access `fit` created members such as `coef_` from `LinearRegression`.\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\n\r\nfrom sklearn import base\r\nfrom sklearn.linear_model import LinearRegression\r\nfrom sklearn.pipeline import Pipeline\r\nfrom sklearn.compose import TransformedTargetRegressor\r\nfrom sklearn.preprocessing import StandardScaler, FunctionTransformer\r\n\r\n# Create synthetic dataset:\r\ndef MichaelisMenten(S, vmax=1e-2, Km=5e-3):\r\n    return vmax*S/(Km+S)\r\n\r\nSlin = np.linspace(1e-4, 1e-1, 101)\r\nvSlin = MichaelisMenten(Slin)\r\ndf = pd.DataFrame({'S': Slin, 'v': vSlin})\r\n\r\ndef inverse(x):\r\n    return 1/x\r\n\r\n# Create complete regressor pipeline to implement Lineweaver-Burk methodology:\r\ntransformer = FunctionTransformer(func=inverse, inverse_func=inverse, check_inverse=True)\r\nscaler = Pipeline(steps=[('Inverser', transformer), ('Standardizer', StandardScaler())])\r\nmodel = Pipeline([('InverserStandardizer', base.clone(scaler)), ('OLS', LinearRegression())])\r\nregressor = TransformedTargetRegressor(regressor=model, transformer=base.clone(scaler))\r\n\r\n# Fit dataset:\r\nmmreg = base.clone(regressor)\r\nmmreg.fit(df[['S']], df['v'])\r\nmmreg.score(df[['S']], df['v']) # 1.0\r\n\r\n# Predict data (work as expected):\r\nmmreg.predict(dfs[['S']])\r\n\r\n# Missing coef_ and intercept_ members:\r\nols = mmreg.regressor.named_steps['OLS'] # Fetch regressor\r\na1, b1 = ols.coef_[0][0], ols.intercept_[0]\r\n\r\n# Missing mean_ and scale_ members:\r\nxScaler = mmreg.regressor.named_steps[\"InverserStandardizer\"].named_steps[\"Standardizer\"] # Fetch x scaler\r\nyScaler = mmreg.transformer.named_steps[\"Standardizer\"] # Fetch y scaler\r\nxm, sx = xScaler.mean_[0], xScaler.scale_[0]\r\nym, sy = yScaler.mean_[0], yScaler.scale_[0]\r\n```\r\n\r\nIt seems fit method does not create expected members, because it returns `AttributeError`:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-18-9ee2b2fb998e> in <module>\r\n----> 1 a1, b1 = ols.coef_[0][0], ols.intercept_[0]\r\n\r\nAttributeError: 'LinearRegression' object has no attribute 'coef_'\r\n```\r\n\r\nOr:\r\n\r\n```\r\nAttributeError: 'StandardScaler' object has no attribute 'mean_'\r\n```\r\n\r\n#### Expected Results\r\n\r\nI would have expected:\r\n\r\n - `coef_` and `intercept_` members to be created in `mmreg.regressor.named_steps['OLS']` (`LinearRegression`)\r\n - `mean_` and `scale_` members to be created in `mmreg.regressor.named_steps[\"InverserStandardizer\"].named_steps[\"Standardizer\"]` and `mmreg.transformer.named_steps[\"Standardizer\"]` (`StandardScaler`).\r\n\r\n#### Actual Results\r\n\r\nMembers cited above are not created after the `TransformedTargetRegressor.fit` call. User can compute score and predict value, but it cannot access model information. This is an annoying limitation as those coefficients are of interest.\r\n\r\n#### Versions\r\n\r\n```\r\nSystem:\r\n    python: 3.7.6 (default, Jan  8 2020, 20:23:39) [MSC v.1916 64 bit (AMD64)]\r\nexecutable: C:\\Users\\jlanderc\\Anaconda3\\python.exe\r\n   machine: Windows-10-10.0.18362-SP0\r\n\r\nPython dependencies:\r\n          pip: 20.0.2\r\n   setuptools: 45.2.0.post20200210\r\n      sklearn: 0.23.1\r\n        numpy: 1.18.1\r\n        scipy: 1.4.1\r\n       Cython: 0.29.15\r\n       pandas: 1.0.5\r\n   matplotlib: 3.1.3\r\n       joblib: 0.14.1\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\n```\r\n\r\nThank you very much for this great package, the new API is pure happiness. Your work is very much appreciated. Let me know how I can help.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17944", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17944/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17944/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17944/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17944", "id": 659233210, "node_id": "MDU6SXNzdWU2NTkyMzMyMTA=", "number": 17944, "title": "KMeans algorithm random_state doesn't fix behavior", "user": {"login": "LionelMassoulard", "id": 48184007, "node_id": "MDQ6VXNlcjQ4MTg0MDA3", "avatar_url": "https://avatars2.githubusercontent.com/u/48184007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LionelMassoulard", "html_url": "https://github.com/LionelMassoulard", "followers_url": "https://api.github.com/users/LionelMassoulard/followers", "following_url": "https://api.github.com/users/LionelMassoulard/following{/other_user}", "gists_url": "https://api.github.com/users/LionelMassoulard/gists{/gist_id}", "starred_url": "https://api.github.com/users/LionelMassoulard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LionelMassoulard/subscriptions", "organizations_url": "https://api.github.com/users/LionelMassoulard/orgs", "repos_url": "https://api.github.com/users/LionelMassoulard/repos", "events_url": "https://api.github.com/users/LionelMassoulard/events{/privacy}", "received_events_url": "https://api.github.com/users/LionelMassoulard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-17T12:53:43Z", "updated_at": "2020-07-20T15:09:28Z", "closed_at": "2020-07-20T15:09:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Even when the random_state is setted KMeans algorithm results are changing.\r\n\r\nCode to reproduce :\r\n\r\n```\r\nfrom sklearn.cluster import KMeans\r\nfrom sklearn.datasets.samples_generator import make_blobs\r\n\r\ndef test_KMeans_fix_seed():\r\n    Xtrain, cl = make_blobs(n_samples=1000, n_features=10, centers=5, random_state=123)\r\n    first_label = []\r\n    for i in range(100):\r\n        kmeans = KMeans(n_clusters=5, random_state=123)\r\n        kmeans.fit(Xtrain)\r\n        first_label.append(kmeans.labels_[0])\r\n    assert len(set(first_label)) == 1 # should always be the same ...\r\n```\r\n\r\nThe first label should always be the same but it is not the case.\r\n\r\n#### Versions\r\nSystem:\r\n    python: 3.7.4 (default, Aug  9 2019, 18:34:13) [MSC v.1915 64 bit (AMD64)]\r\nexecutable: C:\\**\\**\\Anaconda3\\pythonw.exe\r\n   machine: Windows-10-10.0.***-SP0\r\n\r\nPython dependencies:\r\n          pip: 19.2.3\r\n   setuptools: 41.4.0\r\n      sklearn: 0.23.1\r\n        numpy: 1.16.5\r\n        scipy: 1.3.1\r\n       Cython: 0.29.13\r\n       pandas: 1.0.5\r\n   matplotlib: 3.1.1\r\n       joblib: 0.13.2\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\nWindows-10-10.0.**-SP0\r\nPython 3.7.4 (default, Aug  9 2019, 18:34:13) [MSC v.1915 64 bit (AMD64)]\r\nNumPy 1.16.5\r\nSciPy 1.3.1\r\nScikit-Learn 0.23.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17943", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17943/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17943/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17943/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17943", "id": 659161917, "node_id": "MDU6SXNzdWU2NTkxNjE5MTc=", "number": 17943, "title": "Documentation CI failing", "user": {"login": "adrinjalali", "id": 1663864, "node_id": "MDQ6VXNlcjE2NjM4NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1663864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrinjalali", "html_url": "https://github.com/adrinjalali", "followers_url": "https://api.github.com/users/adrinjalali/followers", "following_url": "https://api.github.com/users/adrinjalali/following{/other_user}", "gists_url": "https://api.github.com/users/adrinjalali/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrinjalali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrinjalali/subscriptions", "organizations_url": "https://api.github.com/users/adrinjalali/orgs", "repos_url": "https://api.github.com/users/adrinjalali/repos", "events_url": "https://api.github.com/users/adrinjalali/events{/privacy}", "received_events_url": "https://api.github.com/users/adrinjalali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995770, "node_id": "MDU6TGFiZWwxMjk5NTc3MA==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Documentation", "name": "Documentation", "color": "0b02e1", "default": false, "description": null}, {"id": 1815443556, "node_id": "MDU6TGFiZWwxODE1NDQzNTU2", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/module:gaussian_process", "name": "module:gaussian_process", "color": "151e91", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-17T11:14:28Z", "updated_at": "2020-07-18T09:28:51Z", "closed_at": "2020-07-18T09:27:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "CI on master seems to be [failing](https://app.circleci.com/pipelines/github/scikit-learn/scikit-learn/5691/workflows/21711b7f-046a-493c-b0e5-3b099b2ad787/jobs/112998):\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx/cmd/build.py\", line 280, in build_main\r\n\r\n    app.build(args.force_all, filenames)\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx/application.py\", line 385, in build\r\n\r\n    self.events.emit('build-finished', None)\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx/events.py\", line 107, in emit\r\n\r\n    results.append(listener.handler(self.app, *args))\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_gallery.py\", line 640, in summarize_failing_examples\r\n\r\n    raise ExtensionError(\r\n\r\nsphinx.errors.ExtensionError: Here is a summary of the problems encountered when running the examples\r\n\r\n\r\n\r\nUnexpected failing examples:\r\n\r\n/home/circleci/project/examples/gaussian_process/plot_gpr_co2.py failed leaving traceback:\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_gallery.py\", line 159, in call_memory\r\n\r\n    return 0., func()\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_rst.py\", line 466, in __call__\r\n\r\n    exec(self.code, self.fake_main.__dict__)\r\n\r\n  File \"/home/circleci/project/examples/gaussian_process/plot_gpr_co2.py\", line 137, in <module>\r\n\r\n    gp.fit(X, y)\r\n\r\n  File \"/home/circleci/project/sklearn/gaussian_process/_gpr.py\", line 254, in fit\r\n\r\n    self.kernel_._check_bounds_params()\r\n\r\n  File \"/home/circleci/project/sklearn/gaussian_process/kernels.py\", line 399, in _check_bounds_params\r\n\r\n    if list_close[idx, 0]:\r\n\r\nIndexError: index 11 is out of bounds for axis 0 with size 11\r\n\r\n\r\n\r\n\r\n\r\n-------------------------------------------------------------------------------\r\n\r\n\r\n\r\nExtension error:\r\n\r\nHere is a summary of the problems encountered when running the examples\r\n\r\n\r\n\r\nUnexpected failing examples:\r\n\r\n/home/circleci/project/examples/gaussian_process/plot_gpr_co2.py failed leaving traceback:\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_gallery.py\", line 159, in call_memory\r\n\r\n    return 0., func()\r\n\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_rst.py\", line 466, in __call__\r\n\r\n    exec(self.code, self.fake_main.__dict__)\r\n\r\n  File \"/home/circleci/project/examples/gaussian_process/plot_gpr_co2.py\", line 137, in <module>\r\n\r\n    gp.fit(X, y)\r\n\r\n  File \"/home/circleci/project/sklearn/gaussian_process/_gpr.py\", line 254, in fit\r\n\r\n    self.kernel_._check_bounds_params()\r\n\r\n  File \"/home/circleci/project/sklearn/gaussian_process/kernels.py\", line 399, in _check_bounds_params\r\n\r\n    if list_close[idx, 0]:\r\n\r\nIndexError: index 11 is out of bounds for axis 0 with size 11\r\n\r\n\r\n\r\n\r\n\r\n-------------------------------------------------------------------------------\r\n\r\nMakefile:43: recipe for target 'html' failed\r\n\r\nmake: *** [html] Error 2\r\n\r\n\r\nExited with code exit status 2\r\n\r\nCircleCI received exit code 2\r\n```\r\n\r\n@marenwestermann would you like to have a look?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17941", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17941/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17941/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17941/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17941", "id": 659094210, "node_id": "MDU6SXNzdWU2NTkwOTQyMTA=", "number": 17941, "title": "predict proba problem", "user": {"login": "Foreist", "id": 46616734, "node_id": "MDQ6VXNlcjQ2NjE2NzM0", "avatar_url": "https://avatars3.githubusercontent.com/u/46616734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Foreist", "html_url": "https://github.com/Foreist", "followers_url": "https://api.github.com/users/Foreist/followers", "following_url": "https://api.github.com/users/Foreist/following{/other_user}", "gists_url": "https://api.github.com/users/Foreist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Foreist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Foreist/subscriptions", "organizations_url": "https://api.github.com/users/Foreist/orgs", "repos_url": "https://api.github.com/users/Foreist/repos", "events_url": "https://api.github.com/users/Foreist/events{/privacy}", "received_events_url": "https://api.github.com/users/Foreist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 169405827, "node_id": "MDU6TGFiZWwxNjk0MDU4Mjc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Question", "name": "Question", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-17T09:57:24Z", "updated_at": "2020-07-20T11:50:57Z", "closed_at": "2020-07-20T11:50:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\n**If your issue is a usage question, please submit it in one of these other channels instead:**\r\n- **StackOverflow with the scikit-learn tag: https://stackoverflow.com/questions/tagged/scikit-learn**\r\n- **Mailing List: https://mail.python.org/mailman/listinfo/scikit-learn**\r\n- **Gitter: https://gitter.im/scikit-learn/scikit-learn**\r\n- **For more information, see User Questions: http://scikit-learn.org/stable/support.html#user-question**\r\n\r\nThe issue tracker is used only to report issues and feature requests. For\r\nquestions, please use either of the above platforms. Most question issues are\r\nclosed without an answer on this issue tracker. Thanks for your understanding.\r\n-->Hi sometimes when using predict_proba function , the value comes out like \r\n\r\n```\r\narray([[0.9512987, 0.0487013]]),\r\n array([[0.94480519, 0.05519481]]),\r\n array([[0.98051948, 0.01948052]]),\r\n array([[0.91558442, 0.08441558]]),\r\n array([[1.]]),\r\n array([[1., 0.]]),\r\n```\r\n\r\nIn this case, what does 5 row([[1.]]) mean by [[0., 1.,]]?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17940", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17940/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17940/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17940/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17940", "id": 658708258, "node_id": "MDU6SXNzdWU2NTg3MDgyNTg=", "number": 17940, "title": "Return Bunchs everywhere", "user": {"login": "thomasjpfan", "id": 5402633, "node_id": "MDQ6VXNlcjU0MDI2MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5402633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasjpfan", "html_url": "https://github.com/thomasjpfan", "followers_url": "https://api.github.com/users/thomasjpfan/followers", "following_url": "https://api.github.com/users/thomasjpfan/following{/other_user}", "gists_url": "https://api.github.com/users/thomasjpfan/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasjpfan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasjpfan/subscriptions", "organizations_url": "https://api.github.com/users/thomasjpfan/orgs", "repos_url": "https://api.github.com/users/thomasjpfan/repos", "events_url": "https://api.github.com/users/thomasjpfan/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasjpfan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-17T00:49:41Z", "updated_at": "2020-07-17T14:28:00Z", "closed_at": "2020-07-17T14:27:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Recently, scipy has added an Bunch object that is compatible with tuples: https://github.com/scipy/scipy/pull/12323\r\n\r\nWe can use this Bunch object for the remaining functions that return tuples, such as `learning_curve`, etc.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17939", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17939/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17939/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17939/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17939", "id": 658660344, "node_id": "MDU6SXNzdWU2NTg2NjAzNDQ=", "number": 17939, "title": "Diff in CountVectorizer between versions 0.22 and 0.23", "user": {"login": "assaftibm", "id": 28494432, "node_id": "MDQ6VXNlcjI4NDk0NDMy", "avatar_url": "https://avatars0.githubusercontent.com/u/28494432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/assaftibm", "html_url": "https://github.com/assaftibm", "followers_url": "https://api.github.com/users/assaftibm/followers", "following_url": "https://api.github.com/users/assaftibm/following{/other_user}", "gists_url": "https://api.github.com/users/assaftibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/assaftibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/assaftibm/subscriptions", "organizations_url": "https://api.github.com/users/assaftibm/orgs", "repos_url": "https://api.github.com/users/assaftibm/repos", "events_url": "https://api.github.com/users/assaftibm/events{/privacy}", "received_events_url": "https://api.github.com/users/assaftibm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 705180365, "node_id": "MDU6TGFiZWw3MDUxODAzNjU=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Regression", "name": "Regression", "color": "b60205", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/milestones/40", "html_url": "https://github.com/scikit-learn/scikit-learn/milestone/40", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/milestones/40/labels", "id": 5441289, "node_id": "MDk6TWlsZXN0b25lNTQ0MTI4OQ==", "number": 40, "title": "0.23.2", "description": "", "creator": {"login": "adrinjalali", "id": 1663864, "node_id": "MDQ6VXNlcjE2NjM4NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1663864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrinjalali", "html_url": "https://github.com/adrinjalali", "followers_url": "https://api.github.com/users/adrinjalali/followers", "following_url": "https://api.github.com/users/adrinjalali/following{/other_user}", "gists_url": "https://api.github.com/users/adrinjalali/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrinjalali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrinjalali/subscriptions", "organizations_url": "https://api.github.com/users/adrinjalali/orgs", "repos_url": "https://api.github.com/users/adrinjalali/repos", "events_url": "https://api.github.com/users/adrinjalali/events{/privacy}", "received_events_url": "https://api.github.com/users/adrinjalali/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2020-05-19T19:35:37Z", "updated_at": "2020-08-10T08:32:34Z", "due_on": null, "closed_at": "2020-08-10T08:32:34Z"}, "comments": 11, "created_at": "2020-07-16T23:26:25Z", "updated_at": "2020-07-28T11:49:32Z", "closed_at": "2020-07-28T11:49:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the transition between scikit-learn 0.22.2.post1 and 0.23.0 I noticed that I get different results from CountVectorizer for the same input text when I limit the feature set. I couldn't find a documentation of this change and I don't know if this change is expected or not. \r\n\r\nI'm running on Windows 10 64bit with Python 3.6. \r\n\r\nThe following code will reproduce the problem:\r\n```python\r\nfrom sklearn.feature_extraction.text import CountVectorizer\r\nfrom sklearn.datasets import fetch_20newsgroups\r\n\r\n\r\ndataset = fetch_20newsgroups(subset='all', categories=None,\r\n                             shuffle=True, random_state=256)\r\nvectorizer = CountVectorizer(max_features=10000)\r\nvectors = vectorizer.fit_transform(dataset.data)\r\n\r\nwith open(\"texts.txt\", \"wt\", encoding='utf-8') as f:\r\n    for text in dataset.data:\r\n        f.write(\"%s\\n\" % text.replace(\"\\n\", \"\").replace(\"\\r\", \"\"))\r\n\r\nwith open(\"vectors.txt\", \"wt\") as f:\r\n    for value in vectors.data:\r\n        f.write(\"%.8f\\n\" % value)\r\n\r\nwith open(\"features.txt\", \"wt\", encoding='utf-8') as f:\r\n    for value in vectorizer.get_feature_names():\r\n        f.write(\"%s\\n\" % value)\r\n```\r\n\r\nIf you run it once with version 0.22.2.post1 and once with 0.23.0 you'll see that:\r\n1. the texts are identical\r\n2. the features are different\r\n3. the vectors are different (probably a consequence of 2)\r\n\r\n(make sure to rename the files to avoid overwrite)\r\n\r\nI'm attaching here the feature files that I got.\r\n[features.zip](https://github.com/scikit-learn/scikit-learn/files/4934875/features.zip)\r\n\r\nTo illustrate the differences, the feature 'bridge' appears in the feature set of 0.22.2.post1 but does not appear in the feature set of 0.23.0. The feature 'aliens' doesn't appear in the feature set of 0.22.2.post1 but appears in 0.23.0.\r\n\r\nWhen I remove the max_features limitation from the CountVectorizer constructor, I get identical results. This suggests that the diff between 0.22.2.post1 and 0.23.0 is related to feature selection. \r\n\r\nCould anyone provide a confirmation / explanation for this? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17933", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17933/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17933/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17933/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17933", "id": 658020175, "node_id": "MDU6SXNzdWU2NTgwMjAxNzU=", "number": 17933, "title": "Customisable formulations of TF-IDF", "user": {"login": "justachetan", "id": 30755871, "node_id": "MDQ6VXNlcjMwNzU1ODcx", "avatar_url": "https://avatars1.githubusercontent.com/u/30755871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justachetan", "html_url": "https://github.com/justachetan", "followers_url": "https://api.github.com/users/justachetan/followers", "following_url": "https://api.github.com/users/justachetan/following{/other_user}", "gists_url": "https://api.github.com/users/justachetan/gists{/gist_id}", "starred_url": "https://api.github.com/users/justachetan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justachetan/subscriptions", "organizations_url": "https://api.github.com/users/justachetan/orgs", "repos_url": "https://api.github.com/users/justachetan/repos", "events_url": "https://api.github.com/users/justachetan/events{/privacy}", "received_events_url": "https://api.github.com/users/justachetan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-16T09:24:11Z", "updated_at": "2020-07-20T11:50:10Z", "closed_at": "2020-07-20T11:50:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nHi,\r\n\r\nI have been using TF-IDF a lot in my research workflow. Depending on the nature of the dataset that I have, some times, it makes sense to use a different formulation of TF-IDF, rather than the sklearn default.\r\n\r\nFor instance, one might want to use the Lucene formulation of IDF rewriting, given by:\r\n\r\n```\r\nscore = tf * (idf**2 + 1)\r\n```\r\n\r\nOr they might want to change the exact way the IDF is calculated. What I would like to propose is to enable away, to provide callables as an input to the class constructor for TfidfTransformer (and by extension, TfidfVectorizer), which can allow the user to describe on their own the exact way in which they want to reweight the TFs by the IDFs, or even the way they want to calculate the IDF.\r\n\r\nThis would also help with experiment tracking, as one could simply pickle the TFIDF object and on loading it again, could take a look at the exact callable that was used for the construction of the feature matrix.\r\n\r\n#### Describe your proposed solution\r\n\r\nI have not yet charted out all the specifics, but it seems to me that having a callable input parameter for the constructor of TfidfTransformer, that takes in the TF matrix and the DF (Document Frequency) vector as input would be able to handle this.\r\n\r\nThe default behavior would remain the same as right now.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nUsually, I just use CountVectorizer along with TfidfTransformer whenever I want more control over the feature extraction. However, this is clumsy and creates some amount of difficulty in the experiment tracking, as there is no record of what transformation I am applying on the TF matrix and the IDF vector.\r\n\r\n#### Additional context\r\n\r\nI would love to discuss this with the maintainers and other contributors in more detail. I am not sure if this would break things somewhere else, or makes sense from a design perspective. This request is more a result of my own frustrations while keeping track of what experiments I have tried.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17923", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17923/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17923/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17923/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17923", "id": 657055592, "node_id": "MDU6SXNzdWU2NTcwNTU1OTI=", "number": 17923, "title": "requires_y Tag Missing from DummyClassifier", "user": {"login": "crawftv", "id": 16263020, "node_id": "MDQ6VXNlcjE2MjYzMDIw", "avatar_url": "https://avatars3.githubusercontent.com/u/16263020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crawftv", "html_url": "https://github.com/crawftv", "followers_url": "https://api.github.com/users/crawftv/followers", "following_url": "https://api.github.com/users/crawftv/following{/other_user}", "gists_url": "https://api.github.com/users/crawftv/gists{/gist_id}", "starred_url": "https://api.github.com/users/crawftv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crawftv/subscriptions", "organizations_url": "https://api.github.com/users/crawftv/orgs", "repos_url": "https://api.github.com/users/crawftv/repos", "events_url": "https://api.github.com/users/crawftv/events{/privacy}", "received_events_url": "https://api.github.com/users/crawftv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-15T04:43:09Z", "updated_at": "2020-07-15T15:03:59Z", "closed_at": "2020-07-15T15:03:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\nThe `requires_y` tag is missing from the `DummyClassifier` when I run `DummyClassifier()._get_tags() `.\r\nI don't think this is a big deal but it seems weird. \r\nThe other tags from the other SuperClasses in the DummyClassifier show up.\r\n1. multioutput : True\r\n2. poor_score : True\r\n3. no_validation : True\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.dummy import DummyClassifier\r\nDummyClassifier()._get_tags()\r\n```\r\n#### Expected Results\r\n```python \r\n{'X_types': ['2darray'],\r\n '_skip_test': False,\r\n 'allow_nan': False,\r\n 'binary_only': False,\r\n 'multilabel': False,\r\n 'multioutput': True,\r\n 'multioutput_only': False,\r\n 'no_validation': True,\r\n 'non_deterministic': False,\r\n 'poor_score': True,\r\n 'requires_fit': True,\r\n 'requires_positive_X': False,\r\n 'requires_positive_y': False,\r\n 'requires_y':True,\r\n 'stateless': False}\r\n```\r\n#### Actual Results\r\n``` python \r\n{'X_types': ['2darray'],\r\n '_skip_test': False,\r\n 'allow_nan': False,\r\n 'binary_only': False,\r\n 'multilabel': False,\r\n 'multioutput': True,\r\n 'multioutput_only': False,\r\n 'no_validation': True,\r\n 'non_deterministic': False,\r\n 'poor_score': True,\r\n 'requires_fit': True,\r\n 'requires_positive_X': False,\r\n 'requires_positive_y': False,\r\n 'stateless': False}\r\n```\r\n### ClassifierMixin\r\nI did a little sleuthing and think I traced it back to the ClassifierMixin\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.base import ClassifierMixin\r\nClassifierMixin()._more_tags()\r\n```\r\n#### Expected Results\r\nsee [DummyClassifier Link](https://github.com/scikit-learn/scikit-learn/blob/94a9f9a0b04703ae98d61a7e9a98a4dcaac548e8/sklearn/base.py#L497)\r\n```python\r\n{'requires_y':True}\r\n```\r\n#### Actual Results\r\n```python\r\nAttributeError: type object 'ClassifierMixin' has no attribute '_more_tags'\r\n```\r\n#### Versions\r\nRan this on Google Colab\r\n` scikit-learn in /usr/local/lib/python3.6/dist-packages (0.22.2.post1)`\r\nhttps://colab.research.google.com/drive/1E_U_TsvoufIVv1fFMclxKUnBAgU-wt7K?usp=sharing\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17920", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17920/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17920/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17920/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17920", "id": 656451031, "node_id": "MDU6SXNzdWU2NTY0NTEwMzE=", "number": 17920, "title": "RELEASE 0.23.2", "user": {"login": "adrinjalali", "id": 1663864, "node_id": "MDQ6VXNlcjE2NjM4NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1663864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrinjalali", "html_url": "https://github.com/adrinjalali", "followers_url": "https://api.github.com/users/adrinjalali/followers", "following_url": "https://api.github.com/users/adrinjalali/following{/other_user}", "gists_url": "https://api.github.com/users/adrinjalali/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrinjalali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrinjalali/subscriptions", "organizations_url": "https://api.github.com/users/adrinjalali/orgs", "repos_url": "https://api.github.com/users/adrinjalali/repos", "events_url": "https://api.github.com/users/adrinjalali/events{/privacy}", "received_events_url": "https://api.github.com/users/adrinjalali/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/milestones/40", "html_url": "https://github.com/scikit-learn/scikit-learn/milestone/40", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/milestones/40/labels", "id": 5441289, "node_id": "MDk6TWlsZXN0b25lNTQ0MTI4OQ==", "number": 40, "title": "0.23.2", "description": "", "creator": {"login": "adrinjalali", "id": 1663864, "node_id": "MDQ6VXNlcjE2NjM4NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1663864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrinjalali", "html_url": "https://github.com/adrinjalali", "followers_url": "https://api.github.com/users/adrinjalali/followers", "following_url": "https://api.github.com/users/adrinjalali/following{/other_user}", "gists_url": "https://api.github.com/users/adrinjalali/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrinjalali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrinjalali/subscriptions", "organizations_url": "https://api.github.com/users/adrinjalali/orgs", "repos_url": "https://api.github.com/users/adrinjalali/repos", "events_url": "https://api.github.com/users/adrinjalali/events{/privacy}", "received_events_url": "https://api.github.com/users/adrinjalali/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2020-05-19T19:35:37Z", "updated_at": "2020-08-10T08:32:34Z", "due_on": null, "closed_at": "2020-08-10T08:32:34Z"}, "comments": 1, "created_at": "2020-07-14T08:59:59Z", "updated_at": "2020-08-04T13:09:55Z", "closed_at": "2020-08-04T13:09:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "cc: @scikit-learn/core-devs \r\n\r\nHere's the issue to figure what's left and push the 0.23.2 release out.\r\n\r\nAny volunteers to work on the release? Otherwise I'm happy to create the PR.\r\n\r\n* [x] update news and what's new date in master and release branch\r\n* [x] create tag\r\n* [x] update dependencies and release tag at\r\n  https://github.com/MacPython/scikit-learn-wheels (see https://github.com/MacPython/scikit-learn-wheels/pull/63)\r\n* [x] twine the wheels to PyPI when that's green\r\n* [x] https://github.com/scikit-learn/scikit-learn/releases draft\r\n* [x] confirm bot detected at\r\n  https://github.com/conda-forge/scikit-learn-feedstock and wait for merge\r\n* [x] https://github.com/scikit-learn/scikit-learn/releases publish\r\n* [x] fix the binder release version in ``.binder/requirement.txt`` (see\r\n  #15847)\r\n* [x] announce on mailing list and on twitter", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17917", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17917/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17917/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17917/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17917", "id": 656138134, "node_id": "MDU6SXNzdWU2NTYxMzgxMzQ=", "number": 17917, "title": "TruncatedSVD `fit` calls fit_transform and therefore has some excess computation", "user": {"login": "zachmayer", "id": 581590, "node_id": "MDQ6VXNlcjU4MTU5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/581590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zachmayer", "html_url": "https://github.com/zachmayer", "followers_url": "https://api.github.com/users/zachmayer/followers", "following_url": "https://api.github.com/users/zachmayer/following{/other_user}", "gists_url": "https://api.github.com/users/zachmayer/gists{/gist_id}", "starred_url": "https://api.github.com/users/zachmayer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zachmayer/subscriptions", "organizations_url": "https://api.github.com/users/zachmayer/orgs", "repos_url": "https://api.github.com/users/zachmayer/repos", "events_url": "https://api.github.com/users/zachmayer/events{/privacy}", "received_events_url": "https://api.github.com/users/zachmayer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-13T21:05:41Z", "updated_at": "2020-07-14T19:09:23Z", "closed_at": "2020-07-14T19:09:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\nRight now, `fit` simple calls `fit_transform`: https://github.com/scikit-learn/scikit-learn/blob/4746e2117a5a05bac0c6d4e67486b0db93f11417/sklearn/decomposition/_truncated_svd.py#L145\r\n\r\nHowever, this includes the calculation to return `X_transformed`: `X_transformed = U * Sigma`\r\n\r\nSince the fit step returns `self` (and not `X_transformed`), this step is unnecessary computation.\r\n\r\n#### Describe your proposed solution\r\nMove most of `fit_transform` to the `fit` function.\r\n\r\nThen have `fit_transform` call `fit`, followed by `X_transformed = U * Sigma` and the additional steps needed to return `X_transformed`.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nNot worrying about a little extra CPU usage \ud83d\ude01 \r\n\r\n#### Additional context\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17910", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17910/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17910/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17910/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17910", "id": 655453408, "node_id": "MDU6SXNzdWU2NTU0NTM0MDg=", "number": 17910, "title": "Is this plot(same dataset to perform with PCA and LDA) reasonable or something may be wrong?", "user": {"login": "lavendercmt", "id": 52583754, "node_id": "MDQ6VXNlcjUyNTgzNzU0", "avatar_url": "https://avatars3.githubusercontent.com/u/52583754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lavendercmt", "html_url": "https://github.com/lavendercmt", "followers_url": "https://api.github.com/users/lavendercmt/followers", "following_url": "https://api.github.com/users/lavendercmt/following{/other_user}", "gists_url": "https://api.github.com/users/lavendercmt/gists{/gist_id}", "starred_url": "https://api.github.com/users/lavendercmt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lavendercmt/subscriptions", "organizations_url": "https://api.github.com/users/lavendercmt/orgs", "repos_url": "https://api.github.com/users/lavendercmt/repos", "events_url": "https://api.github.com/users/lavendercmt/events{/privacy}", "received_events_url": "https://api.github.com/users/lavendercmt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-12T18:37:32Z", "updated_at": "2020-07-13T00:12:24Z", "closed_at": "2020-07-13T00:12:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nI am really confused about this result..\r\nthe same dataset for 2 classes\r\nand the result from PCA and LDA..\r\nis it reasonable or something may be wrong?\r\n\r\nThanks for any answering!\r\n\r\n![\u63d0\u95ee](https://user-images.githubusercontent.com/52583754/87253978-74577200-c47f-11ea-9f53-9aec9eb51f60.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17899", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17899/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17899/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17899/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17899", "id": 655252464, "node_id": "MDU6SXNzdWU2NTUyNTI0NjQ=", "number": 17899, "title": "default value for y in sklearn.kernel_ridge.KernelRidge.fit()", "user": {"login": "mikeaalv", "id": 17756999, "node_id": "MDQ6VXNlcjE3NzU2OTk5", "avatar_url": "https://avatars3.githubusercontent.com/u/17756999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikeaalv", "html_url": "https://github.com/mikeaalv", "followers_url": "https://api.github.com/users/mikeaalv/followers", "following_url": "https://api.github.com/users/mikeaalv/following{/other_user}", "gists_url": "https://api.github.com/users/mikeaalv/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikeaalv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikeaalv/subscriptions", "organizations_url": "https://api.github.com/users/mikeaalv/orgs", "repos_url": "https://api.github.com/users/mikeaalv/repos", "events_url": "https://api.github.com/users/mikeaalv/events{/privacy}", "received_events_url": "https://api.github.com/users/mikeaalv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-11T18:00:09Z", "updated_at": "2020-07-13T12:44:42Z", "closed_at": "2020-07-13T12:44:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the issue linked to the documentation\r\n\r\nKernel ridge is a regression method but the documents for sklearn.kernel_ridge.KernelRidge.fit() states default value of y=None ([here](https://scikit-learn.org/stable/modules/generated/sklearn.kernel_ridge.KernelRidge.html#sklearn.kernel_ridge.KernelRidge.fit)). \r\nI tested the function when y value is not given:\r\n\r\n```\r\nfrom sklearn.kernel_ridge import KernelRidge\r\nimport numpy as np\r\nn_samples, n_features = 10, 5\r\nrng = np.random.RandomState(0)\r\nX = rng.randn(n_samples, n_features)\r\nclf = KernelRidge(alpha=1.0)\r\nclf.fit(X)\r\n```\r\n\r\nThere is the following error messsage:\r\n\r\n```\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-1-1abae49d0cd5> in <module>\r\n      5 X = rng.randn(n_samples, n_features)\r\n      6 clf = KernelRidge(alpha=1.0)\r\n----> 7 clf.fit(X)\r\n\r\n~/GitHub/scikit-learn/sklearn/kernel_ridge.py in fit(self, X, y, sample_weight)\r\n    159         \"\"\"\r\n    160         # Convert data\r\n--> 161         X, y = self._validate_data(X, y, accept_sparse=(\"csr\", \"csc\"),\r\n    162                                    multi_output=True, y_numeric=True)\r\n    163         if sample_weight is not None and not isinstance(sample_weight, float):\r\n\r\n~/GitHub/scikit-learn/sklearn/base.py in _validate_data(self, X, y, reset, validate_separately, **check_params)\r\n    410         if y is None:\r\n    411             if self._get_tags()['requires_y']:\r\n--> 412                 raise ValueError(\r\n    413                     f\"This {self.__class__.__name__} estimator \"\r\n    414                     f\"requires y to be passed, but the target y is None.\"\r\n\r\nValueError: This KernelRidge estimator requires y to be passed, but the target y is None.\r\n```\r\n\r\nThere seems something similar in _get_kernel() though I'm not sure that need change or not\r\n\r\n\r\n#### Suggest a potential alternative/fix\r\n\r\ncorrect the default value in fit()\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17892", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17892/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17892/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17892/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17892", "id": 655215730, "node_id": "MDU6SXNzdWU2NTUyMTU3MzA=", "number": 17892, "title": "using sklearn.metrics.normalized_mutual_info_score for continuous data does not return a warning", "user": {"login": "bfiranski", "id": 49483810, "node_id": "MDQ6VXNlcjQ5NDgzODEw", "avatar_url": "https://avatars1.githubusercontent.com/u/49483810?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bfiranski", "html_url": "https://github.com/bfiranski", "followers_url": "https://api.github.com/users/bfiranski/followers", "following_url": "https://api.github.com/users/bfiranski/following{/other_user}", "gists_url": "https://api.github.com/users/bfiranski/gists{/gist_id}", "starred_url": "https://api.github.com/users/bfiranski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bfiranski/subscriptions", "organizations_url": "https://api.github.com/users/bfiranski/orgs", "repos_url": "https://api.github.com/users/bfiranski/repos", "events_url": "https://api.github.com/users/bfiranski/events{/privacy}", "received_events_url": "https://api.github.com/users/bfiranski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995769, "node_id": "MDU6TGFiZWwxMjk5NTc2OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Easy", "name": "Easy", "color": "02d7e1", "default": false, "description": null}, {"id": 723598741, "node_id": "MDU6TGFiZWw3MjM1OTg3NDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-11T14:10:42Z", "updated_at": "2020-07-30T21:19:24Z", "closed_at": "2020-07-30T21:19:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have been informed that using sklearn.metrics.normalized_mutual_info_score to estimate a normalized mutual information score on continuous data should have returned at least a warning that this module is for use only on discrete data; and error on floats.\r\n\r\nan example of test data:\r\n```\r\nnoise=np.random.rand(500)\r\nwavelength=np.linspace(0.01,1,500)*1e-6\r\n\r\n# testing the normalized MI score between wavelength and noise - should return near zero for totally unrelated data sets\r\nconstant_normalized_mi=normalized_mutual_info_score(wavelength,noise)\r\n```\r\noutput:\r\n1.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17874", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17874/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17874/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17874/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17874", "id": 654188761, "node_id": "MDU6SXNzdWU2NTQxODg3NjE=", "number": 17874, "title": "cross_validate | TypeError: __call__() missing 1 required positional argument: 'inputs'", "user": {"login": "Neetu162", "id": 36192867, "node_id": "MDQ6VXNlcjM2MTkyODY3", "avatar_url": "https://avatars1.githubusercontent.com/u/36192867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Neetu162", "html_url": "https://github.com/Neetu162", "followers_url": "https://api.github.com/users/Neetu162/followers", "following_url": "https://api.github.com/users/Neetu162/following{/other_user}", "gists_url": "https://api.github.com/users/Neetu162/gists{/gist_id}", "starred_url": "https://api.github.com/users/Neetu162/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Neetu162/subscriptions", "organizations_url": "https://api.github.com/users/Neetu162/orgs", "repos_url": "https://api.github.com/users/Neetu162/repos", "events_url": "https://api.github.com/users/Neetu162/events{/privacy}", "received_events_url": "https://api.github.com/users/Neetu162/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-09T16:19:45Z", "updated_at": "2020-07-10T01:32:51Z", "closed_at": "2020-07-10T01:32:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "After raising issue #17830 and #17831, I went to tensorflow team to help me in resolving the issue. I raised issue https://github.com/tensorflow/tensorflow/issues/41067\r\n\r\nThe tensorflow team helped and created a jupyter notebook in order to help with resolution of the issue. They fixed the imports and other issues and now the issue that I am now getting is ```TypeError: __call__() missing 1 required positional argument: 'inputs'``` while calling the cross_validate method.\r\n\r\nThis is the link to jupyter notebook to see the issue: https://colab.research.google.com/gist/Neetu162/236c9a8e18c3fa3fdb8b4b54bce8cef8/copy-of-untitled263.ipynb\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17870", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17870/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17870/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17870/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17870", "id": 653634063, "node_id": "MDU6SXNzdWU2NTM2MzQwNjM=", "number": 17870, "title": "HistGradientBoostingClassifier n_iter_no_change incompatible change", "user": {"login": "amueller", "id": 449558, "node_id": "MDQ6VXNlcjQ0OTU1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/449558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amueller", "html_url": "https://github.com/amueller", "followers_url": "https://api.github.com/users/amueller/followers", "following_url": "https://api.github.com/users/amueller/following{/other_user}", "gists_url": "https://api.github.com/users/amueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/amueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amueller/subscriptions", "organizations_url": "https://api.github.com/users/amueller/orgs", "repos_url": "https://api.github.com/users/amueller/repos", "events_url": "https://api.github.com/users/amueller/events{/privacy}", "received_events_url": "https://api.github.com/users/amueller/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-08T22:23:32Z", "updated_at": "2020-07-09T17:56:10Z", "closed_at": "2020-07-09T17:56:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``HistGradientBoostingClassifier`` allowed ``n_iter_no_change`` to be ``None`` in 0.22 (it was the default) but that's forbidden in 0.23.\r\nThat means that if someone, say me and my student, recorded the parameters in 0.22 and then tried to use them in 0.23, it breaks:\r\nhttps://github.com/dabl/dabl/issues/238\r\n\r\nIt's a minor nitpick but usually we deprecate parameter values that become illegal :-/\r\ncc @NicolasHug ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17869", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17869/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17869/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17869/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17869", "id": 653601191, "node_id": "MDU6SXNzdWU2NTM2MDExOTE=", "number": 17869, "title": "Literature on decision tree sample weighting ", "user": {"login": "dafriedman97", "id": 41458150, "node_id": "MDQ6VXNlcjQxNDU4MTUw", "avatar_url": "https://avatars0.githubusercontent.com/u/41458150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dafriedman97", "html_url": "https://github.com/dafriedman97", "followers_url": "https://api.github.com/users/dafriedman97/followers", "following_url": "https://api.github.com/users/dafriedman97/following{/other_user}", "gists_url": "https://api.github.com/users/dafriedman97/gists{/gist_id}", "starred_url": "https://api.github.com/users/dafriedman97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dafriedman97/subscriptions", "organizations_url": "https://api.github.com/users/dafriedman97/orgs", "repos_url": "https://api.github.com/users/dafriedman97/repos", "events_url": "https://api.github.com/users/dafriedman97/events{/privacy}", "received_events_url": "https://api.github.com/users/dafriedman97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995770, "node_id": "MDU6TGFiZWwxMjk5NTc3MA==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Documentation", "name": "Documentation", "color": "0b02e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-08T21:13:34Z", "updated_at": "2020-07-09T09:58:23Z", "closed_at": "2020-07-09T09:58:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am looking into ways to weight samples in decision trees (for the purpose of AdaBoost-ing) and it seems scikit-learn uses the following.\r\n\r\n<img width=\"541\" alt=\"Screen Shot 2020-07-08 at 5 13 02 PM\" src=\"https://user-images.githubusercontent.com/41458150/86970951-4a7c1380-c13e-11ea-9cae-2ac951731671.png\">\r\n\r\nI'm curious if there is any relevant literature suggesting this method for observation weighting? Thank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17862", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17862/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17862/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17862/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17862", "id": 653198024, "node_id": "MDU6SXNzdWU2NTMxOTgwMjQ=", "number": 17862, "title": "Cannot open the page with Python Scientific Lecture Notes ", "user": {"login": "Den0702", "id": 30319035, "node_id": "MDQ6VXNlcjMwMzE5MDM1", "avatar_url": "https://avatars1.githubusercontent.com/u/30319035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Den0702", "html_url": "https://github.com/Den0702", "followers_url": "https://api.github.com/users/Den0702/followers", "following_url": "https://api.github.com/users/Den0702/following{/other_user}", "gists_url": "https://api.github.com/users/Den0702/gists{/gist_id}", "starred_url": "https://api.github.com/users/Den0702/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Den0702/subscriptions", "organizations_url": "https://api.github.com/users/Den0702/orgs", "repos_url": "https://api.github.com/users/Den0702/repos", "events_url": "https://api.github.com/users/Den0702/events{/privacy}", "received_events_url": "https://api.github.com/users/Den0702/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-08T10:58:13Z", "updated_at": "2020-07-20T12:31:57Z", "closed_at": "2020-07-08T11:25:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\n\r\nThis page https://www.scipy-lectures.org/ doesn't work\r\n![ice_screenshot_20200708-125136](https://user-images.githubusercontent.com/30319035/86910736-738aad00-c11a-11ea-9707-83c17f0826ee.png)\r\n\r\n#### Steps/Code to Reproduce\r\n<!--\r\nPlease add a minimal example that we can reproduce the error by running the\r\ncode. Be as succinct as possible, do not depend on external data. In short, we\r\nare going to copy-paste your code and we expect to get the same\r\nresult as you.\r\n\r\nExample:\r\n```python\r\nfrom sklearn.feature_extraction.text import CountVectorizer\r\nfrom sklearn.decomposition import LatentDirichletAllocation\r\ndocs = [\"Help I have a bug\" for i in range(1000)]\r\nvectorizer = CountVectorizer(input=docs, analyzer='word')\r\nlda_features = vectorizer.fit_transform(docs)\r\nlda_model = LatentDirichletAllocation(\r\n    n_topics=10,\r\n    learning_method='online',\r\n    evaluate_every=10,\r\n    n_jobs=4,\r\n)\r\nmodel = lda_model.fit(lda_features)\r\n```\r\nIf the code is too long, feel free to put it in a public gist and link\r\nit in the issue: https://gist.github.com\r\n-->\r\n\r\n```\r\nSample code to reproduce the problem\r\n```\r\n\r\n#### Expected Results\r\n<!-- Example: No error is thrown. Please paste or describe the expected results.-->\r\n\r\n#### Actual Results\r\n<!-- Please paste or specifically describe the actual output or traceback. -->\r\n\r\n#### Versions\r\n<!--\r\nPlease run the following snippet and paste the output below.\r\nFor scikit-learn >= 0.20:\r\nimport sklearn; sklearn.show_versions()\r\nFor scikit-learn < 0.20:\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nimport imblearn; print(\"Imbalanced-Learn\", imblearn.__version__)\r\n-->\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17855", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17855/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17855/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17855/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17855", "id": 651886200, "node_id": "MDU6SXNzdWU2NTE4ODYyMDA=", "number": 17855, "title": "ClassifierChain -- `predict` and `predict_proba` throw error when `order` is a tuple", "user": {"login": "boldloop", "id": 28285028, "node_id": "MDQ6VXNlcjI4Mjg1MDI4", "avatar_url": "https://avatars1.githubusercontent.com/u/28285028?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boldloop", "html_url": "https://github.com/boldloop", "followers_url": "https://api.github.com/users/boldloop/followers", "following_url": "https://api.github.com/users/boldloop/following{/other_user}", "gists_url": "https://api.github.com/users/boldloop/gists{/gist_id}", "starred_url": "https://api.github.com/users/boldloop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boldloop/subscriptions", "organizations_url": "https://api.github.com/users/boldloop/orgs", "repos_url": "https://api.github.com/users/boldloop/repos", "events_url": "https://api.github.com/users/boldloop/events{/privacy}", "received_events_url": "https://api.github.com/users/boldloop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 12997289, "node_id": "MDU6TGFiZWwxMjk5NzI4OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Moderate", "name": "Moderate", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-06T23:49:31Z", "updated_at": "2020-08-17T18:30:15Z", "closed_at": "2020-08-17T18:30:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "When you pass a tuple to ClassifierChain's order parameter, `predict` and `predict_proba` throw an `IndexError`:\r\n\r\n```python\r\nimport numpy as np\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.multioutput import ClassifierChain\r\n\r\nX = Y = np.ones((10, 10))\r\n\r\nchain = ClassifierChain(RandomForestClassifier(), order=tuple(range(10)))\r\n\r\nchain.fit(X, Y)\r\n\r\nchain.predict(X)\r\n```\r\ngives\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"tmp.py\", line 11, in <module>\r\n    chain.predict(X)\r\n  File \"/Users/augustbrocchini/anaconda3/lib/python3.6/site-packages/sklearn/multioutput.py\", line 528, in predict\r\n    inv_order[self.order_] = np.arange(len(self.order_))\r\nIndexError: too many indices for array\r\n```\r\nThe problem is in [these](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/multioutput.py#L529-L530) lines in `sklearn/multioutput.py`:\r\n```python\r\n529        inv_order = np.empty_like(self.order_)\r\n530        inv_order[self.order_] = np.arange(len(self.order_))\r\n```\r\n\r\nIn the index on line 530, the tuple gets interpreted as 10d coordinates in the new array, instead of as 10 1d coordinates.\r\n\r\nThe problem also exists in [`predict_proba`](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/multioutput.py#L679-L680).\r\n\r\n#### Versions\r\n```\r\nDarwin-18.6.0-x86_64-i386-64bit\r\nPython 3.6.10 |Anaconda, Inc.| (default, Jan  7 2020, 15:01:53)\r\n[GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\r\nNumPy 1.18.1\r\nSciPy 1.3.2\r\nScikit-Learn 0.22.1\r\n```\r\nimblearn is not installed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17853", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17853/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17853/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17853/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17853", "id": 651717544, "node_id": "MDU6SXNzdWU2NTE3MTc1NDQ=", "number": 17853, "title": "Feature request: add absolute=True/False to regression metric mean_absolute_error", "user": {"login": "raybellwaves", "id": 17162724, "node_id": "MDQ6VXNlcjE3MTYyNzI0", "avatar_url": "https://avatars0.githubusercontent.com/u/17162724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raybellwaves", "html_url": "https://github.com/raybellwaves", "followers_url": "https://api.github.com/users/raybellwaves/followers", "following_url": "https://api.github.com/users/raybellwaves/following{/other_user}", "gists_url": "https://api.github.com/users/raybellwaves/gists{/gist_id}", "starred_url": "https://api.github.com/users/raybellwaves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raybellwaves/subscriptions", "organizations_url": "https://api.github.com/users/raybellwaves/orgs", "repos_url": "https://api.github.com/users/raybellwaves/repos", "events_url": "https://api.github.com/users/raybellwaves/events{/privacy}", "received_events_url": "https://api.github.com/users/raybellwaves/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-06T17:50:05Z", "updated_at": "2020-07-06T20:28:30Z", "closed_at": "2020-07-06T20:28:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\nApologies if this has been brought up before. I did have a quick check of https://github.com/scikit-learn/scikit-learn/issues?q=is%3Aissue+sort%3Aupdated-desc+mean+error+is%3Aclosed+label%3Amodule%3Ametrics\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nI am interested in the sign of the error and if possible I would rather do it in scikit-learn than numpy.\r\n\r\n`mean_absolute_error(y_true, y_pred, absolute=False)` to return `np.average(y_pred - y_true)`\r\n`mean_absolute_error(y_true, y_pred)` returns same as before \r\n\r\n#### Describe your proposed solution\r\n\r\nAdding the `absolute=False` will update https://github.com/scikit-learn/scikit-learn/blob/fd237278e/sklearn/metrics/_regression.py#L122L190 to be\r\n\r\n```def mean_absolute_error(y_true, y_pred, *,\r\n                           absolute=True, sample_weight=None,\r\n                           multioutput='uniform_average'):\r\n...\r\n    Parameters\r\n    ----------\r\n    absolute: bool\r\n        Return MAE or ME.\r\n...\r\n    if absolute:\r\n        output_errors = np.average(np.abs(y_pred - y_true),\r\n                                   weights=sample_weight, axis=0)\r\n    else:\r\n        output_errors = np.average(y_pred - y_true,\r\n                                   weights=sample_weight, axis=0)\r\n```\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nNot sure if a new metric is needed i.e. `mean_error`.\r\n\r\nI believe this approach of a new argument was applied to `mean_squared_error` (`squared=True`). See https://github.com/scikit-learn/scikit-learn/issues/12895\r\n\r\n#### Additional context\r\n\r\nIf this is of interest I'll be happy to work on this during the scipy sprint.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17852", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17852/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17852/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17852/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17852", "id": 651706280, "node_id": "MDU6SXNzdWU2NTE3MDYyODA=", "number": 17852, "title": "Add Timeout to RandomizedSearchCV", "user": {"login": "corynezin", "id": 30993572, "node_id": "MDQ6VXNlcjMwOTkzNTcy", "avatar_url": "https://avatars1.githubusercontent.com/u/30993572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corynezin", "html_url": "https://github.com/corynezin", "followers_url": "https://api.github.com/users/corynezin/followers", "following_url": "https://api.github.com/users/corynezin/following{/other_user}", "gists_url": "https://api.github.com/users/corynezin/gists{/gist_id}", "starred_url": "https://api.github.com/users/corynezin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corynezin/subscriptions", "organizations_url": "https://api.github.com/users/corynezin/orgs", "repos_url": "https://api.github.com/users/corynezin/repos", "events_url": "https://api.github.com/users/corynezin/events{/privacy}", "received_events_url": "https://api.github.com/users/corynezin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-06T17:28:43Z", "updated_at": "2020-07-09T11:21:54Z", "closed_at": "2020-07-09T11:21:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\n\r\nWhen running large search, I would like some way to ensure it is complete in a timely manner, say 1 day.  In some of my recent search jobs, some hyperparamter combinations unpredictably result in very large training times (3+ hours) while others complete in minutes, making the overall time very hard to predict.\r\n\r\n#### Describe your proposed solution\r\n\r\nI propose that we add a new parameter to RandomizedSearchCV `job_timeout` which is the maximum number of seconds a job can run until abandoned.  This would allow me to have some confidence that my search would be done in a timely manner, even if some combinations are untested.  \r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nOne possible alternative on the user side is to implement their own search and launch individual jobs with multiprocessing and handle killing long running jobs.  \r\n\r\n#### Additional context\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17845", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17845/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17845/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17845/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17845", "id": 651198672, "node_id": "MDU6SXNzdWU2NTExOTg2NzI=", "number": 17845, "title": "TimeSeriesSplit extension", "user": {"login": "tomaszps", "id": 41022864, "node_id": "MDQ6VXNlcjQxMDIyODY0", "avatar_url": "https://avatars2.githubusercontent.com/u/41022864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomaszps", "html_url": "https://github.com/tomaszps", "followers_url": "https://api.github.com/users/tomaszps/followers", "following_url": "https://api.github.com/users/tomaszps/following{/other_user}", "gists_url": "https://api.github.com/users/tomaszps/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomaszps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomaszps/subscriptions", "organizations_url": "https://api.github.com/users/tomaszps/orgs", "repos_url": "https://api.github.com/users/tomaszps/repos", "events_url": "https://api.github.com/users/tomaszps/events{/privacy}", "received_events_url": "https://api.github.com/users/tomaszps/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-06T02:06:40Z", "updated_at": "2020-07-06T13:39:26Z", "closed_at": "2020-07-06T13:39:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\nAt present, the timeseries splitter is intended to be used with data which occur at a specific point in time. I would like to propose (and implement) an extended version of the splitter which handles temporal splits for extended duration events- specifically with support for preventing any overlap of train and test set events.\r\n\r\nThe scenario I have is that it is impossible to extract data from the events before they finish, so I want the training sets used for cross validation to look like the training set I eventually use for training.\r\n\r\n#### Describe your proposed solution\r\nI see this behaving near exactly like timeseriessplit. As a first pass at solving the problem, I can imagine breaking the train and test set up using timeseries split, and then decimating events which spill into the test sets. I'm happy to put more thought into how the implementation should look, I just wanted to know if there was any interest first.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nI can't really think of any that could be implemented already using functionality already available. If there's not enough interest I could try to find a different package to add this to, but looking over the [related packages](https://scikit-learn.org/stable/related_projects.html) I don't see anything very promising.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17836", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17836/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17836/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17836/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17836", "id": 651037861, "node_id": "MDU6SXNzdWU2NTEwMzc4NjE=", "number": 17836, "title": "Wrong estimator tags for LogisticRegression", "user": {"login": "alfaro96", "id": 32649176, "node_id": "MDQ6VXNlcjMyNjQ5MTc2", "avatar_url": "https://avatars1.githubusercontent.com/u/32649176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alfaro96", "html_url": "https://github.com/alfaro96", "followers_url": "https://api.github.com/users/alfaro96/followers", "following_url": "https://api.github.com/users/alfaro96/following{/other_user}", "gists_url": "https://api.github.com/users/alfaro96/gists{/gist_id}", "starred_url": "https://api.github.com/users/alfaro96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alfaro96/subscriptions", "organizations_url": "https://api.github.com/users/alfaro96/orgs", "repos_url": "https://api.github.com/users/alfaro96/repos", "events_url": "https://api.github.com/users/alfaro96/events{/privacy}", "received_events_url": "https://api.github.com/users/alfaro96/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-05T09:51:45Z", "updated_at": "2020-07-05T11:52:43Z", "closed_at": "2020-07-05T11:52:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nThe estimator tags for `sklearn.linear_model.LogisticRegression` are wrong because the `_get_tags` method uses the following resolution order for this estimator:\r\n\r\n```python\r\nfrom sklearn.linear_model import LogisticRegression\r\nimport inspect\r\nlist(reversed(inspect.getmro(LogisticRegression)))\r\n[<class 'object'>, <class 'sklearn.linear_model._base.SparseCoefMixin'>, <class 'sklearn.base.ClassifierMixin'>, <class 'sklearn.linear_model._base.LinearClassifierMixin'>, <class 'sklearn.base.BaseEstimator'>, <class 'sklearn.linear_model._logistic.LogisticRegression'>]\r\n```\r\n\r\nThus, `sklearn.base.BaseEstimator` is replacing the estimator tags defined in `sklearn.base.ClassifierMixin` (e.g., `requires_y`).\r\n\r\n#### Steps/Code to Reproduce\r\n\r\n```python\r\nfrom sklearn.linear_model import LogisticRegression\r\nLogisticRegression()._get_tags()\r\n{'requires_y': False, 'non_deterministic': False, 'requires_positive_X': False, 'requires_positive_y': False, 'X_types': ['2darray'], 'poor_score': False, 'no_validation': False, 'multioutput': False, 'allow_nan': False, 'stateless': False, 'multilabel': False, '_skip_test': False, '_xfail_checks': False, 'multioutput_only': False, 'binary_only': False, 'requires_fit': True}\r\n```\r\n\r\n#### Expected Results\r\n\r\n```python\r\n{'requires_y': True, 'non_deterministic': False, 'requires_positive_X': False, 'requires_positive_y': False, 'X_types': ['2darray'], 'poor_score': False, 'no_validation': False, 'multioutput': False, 'allow_nan': False, 'stateless': False, 'multilabel': False, '_skip_test': False, '_xfail_checks': False, 'multioutput_only': False, 'binary_only': False, 'requires_fit': True}\r\n```\r\n\r\n#### Actual Results\r\n\r\n```python\r\n{'requires_y': False, 'non_deterministic': False, 'requires_positive_X': False, 'requires_positive_y': False, 'X_types': ['2darray'], 'poor_score': False, 'no_validation': False, 'multioutput': False, 'allow_nan': False, 'stateless': False, 'multilabel': False, '_skip_test': False, '_xfail_checks': False, 'multioutput_only': False, 'binary_only': False, 'requires_fit': True}\r\n```\r\n\r\n#### Versions\r\n\r\n```python\r\nimport sklearn; sklearn.show_versions()\r\n\r\nSystem:\r\n    python: 3.6.10 (default, Jun  9 2020, 18:45:00)  [GCC 8.3.0]\r\nexecutable: /usr/local/bin/python\r\n   machine: Linux-4.19.76-linuxkit-x86_64-with-debian-10.4\r\n\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 47.1.1\r\n      sklearn: 0.24.dev0\r\n        numpy: 1.18.4\r\n        scipy: 1.4.1\r\n       Cython: 0.29.18\r\n       pandas: 1.0.3\r\n   matplotlib: 3.2.1\r\n       joblib: 0.15.1\r\nthreadpoolctl: 2.0.0\r\n\r\nBuilt with OpenMP: True\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17832", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17832/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17832/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17832/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17832", "id": 650867813, "node_id": "MDU6SXNzdWU2NTA4Njc4MTM=", "number": 17832, "title": "os error, winerror196 'sklearn' not working properly", "user": {"login": "abhimanyunegi", "id": 67451509, "node_id": "MDQ6VXNlcjY3NDUxNTA5", "avatar_url": "https://avatars2.githubusercontent.com/u/67451509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhimanyunegi", "html_url": "https://github.com/abhimanyunegi", "followers_url": "https://api.github.com/users/abhimanyunegi/followers", "following_url": "https://api.github.com/users/abhimanyunegi/following{/other_user}", "gists_url": "https://api.github.com/users/abhimanyunegi/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhimanyunegi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhimanyunegi/subscriptions", "organizations_url": "https://api.github.com/users/abhimanyunegi/orgs", "repos_url": "https://api.github.com/users/abhimanyunegi/repos", "events_url": "https://api.github.com/users/abhimanyunegi/events{/privacy}", "received_events_url": "https://api.github.com/users/abhimanyunegi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-04T10:29:34Z", "updated_at": "2020-07-05T08:48:18Z", "closed_at": "2020-07-05T08:48:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, everyone, I am a beginner in python and I was just learning and doing some machine learning project but, it prompts this:-  \r\n    from sklearn import linear_model\r\n  File \"C:\\Users\\abhim\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\sklearn\\__init__.py\", line 80, in <module>\r\n    from .base import clone\r\n  File \"C:\\Users\\abhim\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\sklearn\\base.py\", line 21, in <module>\r\n    from .utils import _IS_32BIT\r\n  File \"C:\\Users\\abhim\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\sklearn\\utils\\__init__.py\", line 20, in <module>\r\n    from scipy.sparse import issparse\r\n  File \"C:\\Users\\abhim\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\scipy\\__init__.py\", line 106, in <module>\r\n    from . import _distributor_init\r\n  File \"C:\\Users\\abhim\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\scipy\\_distributor_init.py\", line 26, in <module>\r\n    WinDLL(os.path.abspath(filename))\r\n  File \"C:\\Users\\abhim\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\ctypes\\__init__.py\", line 373, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\nOSError: [WinError 193] %1 is not a valid Win32 application\r\n\r\nany clue regarding this?\r\npls mail at abhimanyu.uk@outlook.com", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17831", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17831/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17831/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17831/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17831", "id": 650782999, "node_id": "MDU6SXNzdWU2NTA3ODI5OTk=", "number": 17831, "title": "cross_validate and ValueError: The first argument to `Layer.call` must always be passed.", "user": {"login": "Neetu162", "id": 36192867, "node_id": "MDQ6VXNlcjM2MTkyODY3", "avatar_url": "https://avatars1.githubusercontent.com/u/36192867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Neetu162", "html_url": "https://github.com/Neetu162", "followers_url": "https://api.github.com/users/Neetu162/followers", "following_url": "https://api.github.com/users/Neetu162/following{/other_user}", "gists_url": "https://api.github.com/users/Neetu162/gists{/gist_id}", "starred_url": "https://api.github.com/users/Neetu162/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Neetu162/subscriptions", "organizations_url": "https://api.github.com/users/Neetu162/orgs", "repos_url": "https://api.github.com/users/Neetu162/repos", "events_url": "https://api.github.com/users/Neetu162/events{/privacy}", "received_events_url": "https://api.github.com/users/Neetu162/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-03T22:28:02Z", "updated_at": "2020-07-06T01:38:50Z", "closed_at": "2020-07-05T08:49:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am trying to use cross_validate. I had initial hiccup due to pickable and was to get past that. Still I am not able to get the cross_validate to work.\r\n\r\nGit Link: https://github.com/Neetu162/DeepLearningResearch/blob/76675a79a4922b8bd0d722ab2e4cad448a8d8c76/Demo/classify_demo.py#L106\r\n\r\nError:\r\n\r\n```\r\n\r\nAverage recall value is: 0.9453125\r\ncreating the loaded model\r\ncalling the cross_validate method\r\n/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/model_selection/_validation.py:552: FitFailedWarning: Estimator fit failed. The score on this train-test partition for these parameters will be set to nan. Details: \r\nTraceback (most recent call last):\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/model_selection/_validation.py\", line 531, in _fit_and_score\r\n    estimator.fit(X_train, y_train, **fit_params)\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/wrappers/scikit_learn.py\", line 223, in fit\r\n    return super(KerasClassifier, self).fit(x, y, **kwargs)\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/wrappers/scikit_learn.py\", line 155, in fit\r\n    **self.filter_sk_params(self.build_fn.__call__))\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 800, in __call__\r\n    'The first argument to `Layer.call` must always be passed.')\r\nValueError: The first argument to `Layer.call` must always be passed.\r\n\r\n  FitFailedWarning)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17830", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17830/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17830/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17830/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17830", "id": 650734782, "node_id": "MDU6SXNzdWU2NTA3MzQ3ODI=", "number": 17830, "title": "TypeError: can't pickle _thread.RLock objects while using cross_validate", "user": {"login": "Neetu162", "id": 36192867, "node_id": "MDQ6VXNlcjM2MTkyODY3", "avatar_url": "https://avatars1.githubusercontent.com/u/36192867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Neetu162", "html_url": "https://github.com/Neetu162", "followers_url": "https://api.github.com/users/Neetu162/followers", "following_url": "https://api.github.com/users/Neetu162/following{/other_user}", "gists_url": "https://api.github.com/users/Neetu162/gists{/gist_id}", "starred_url": "https://api.github.com/users/Neetu162/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Neetu162/subscriptions", "organizations_url": "https://api.github.com/users/Neetu162/orgs", "repos_url": "https://api.github.com/users/Neetu162/repos", "events_url": "https://api.github.com/users/Neetu162/events{/privacy}", "received_events_url": "https://api.github.com/users/Neetu162/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-03T19:06:38Z", "updated_at": "2020-07-03T22:30:00Z", "closed_at": "2020-07-03T22:29:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "HI,\r\n\r\nI am getting this error while using the cross_validate function @ https://github.com/Neetu162/DeepLearningResearch/blob/677d1ddeb6f345716a457b977c26cbe14efa7bb0/Demo/classify_demo.py#L83\r\n\r\n```\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/joblib/parallel.py\", line 797, in dispatch_one_batch\r\n    tasks = self._ready_batches.get(block=False)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/queue.py\", line 167, in get\r\n    raise Empty\r\n\r\nEmpty\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/home/osboxes/DeepLearningResearch/Demo/classify_demo.py\", line 171, in <module>\r\n    main()\r\n\r\n  File \"/home/osboxes/DeepLearningResearch/Demo/classify_demo.py\", line 83, in main\r\n    cv_result = cross_validate(model, perm_inputs_1, cv=5, return_train_score=True, n_jobs=1)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/utils/validation.py\", line 73, in inner_f\r\n    return f(**kwargs)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/model_selection/_validation.py\", line 248, in cross_validate\r\n    for train, test in cv.split(X, y, groups))\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/joblib/parallel.py\", line 1004, in __call__\r\n    if self.dispatch_one_batch(iterator):\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/joblib/parallel.py\", line 808, in dispatch_one_batch\r\n    islice = list(itertools.islice(iterator, big_batch_size))\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/model_selection/_validation.py\", line 248, in <genexpr>\r\n    for train, test in cv.split(X, y, groups))\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/utils/validation.py\", line 73, in inner_f\r\n    return f(**kwargs)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/base.py\", line 87, in clone\r\n    new_object_params[name] = clone(param, safe=False)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/utils/validation.py\", line 73, in inner_f\r\n    return f(**kwargs)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/site-packages/sklearn/base.py\", line 71, in clone\r\n    return copy.deepcopy(estimator)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n\r\n  File \"/home/osboxes/anaconda3/lib/python3.7/copy.py\", line 169, in deepcopy\r\n    rv = reductor(4)\r\n\r\nTypeError: can't pickle _thread.RLock objects\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17829", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17829/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17829/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17829/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17829", "id": 650727304, "node_id": "MDU6SXNzdWU2NTA3MjczMDQ=", "number": 17829, "title": "Both braches of an if-else statement yield the same thing", "user": {"login": "chkoar", "id": 11897937, "node_id": "MDQ6VXNlcjExODk3OTM3", "avatar_url": "https://avatars0.githubusercontent.com/u/11897937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chkoar", "html_url": "https://github.com/chkoar", "followers_url": "https://api.github.com/users/chkoar/followers", "following_url": "https://api.github.com/users/chkoar/following{/other_user}", "gists_url": "https://api.github.com/users/chkoar/gists{/gist_id}", "starred_url": "https://api.github.com/users/chkoar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chkoar/subscriptions", "organizations_url": "https://api.github.com/users/chkoar/orgs", "repos_url": "https://api.github.com/users/chkoar/repos", "events_url": "https://api.github.com/users/chkoar/events{/privacy}", "received_events_url": "https://api.github.com/users/chkoar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-03T18:40:34Z", "updated_at": "2020-07-24T13:26:55Z", "closed_at": "2020-07-09T11:23:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nIn  the `_iter` method `Pipeleine` we yield the same thing in the two braches of the if-esle statement.\r\n\r\n#### Steps/Code to Reproduce\r\nhttps://github.com/scikit-learn/scikit-learn/blob/ffbb1b4a0bbb58fdca34a30856c6f7faace87c67/sklearn/pipeline.py#L182-L186\r\n\r\n#### Expected Results\r\n<!-- Example: No error is thrown. Please paste or describe the expected results.-->\r\n\r\n#### Actual Results\r\n<!-- Please paste or specifically describe the actual output or traceback. -->\r\n\r\n#### Versions\r\n<!--\r\nPlease run the following snippet and paste the output below.\r\nFor scikit-learn >= 0.20:\r\nimport sklearn; sklearn.show_versions()\r\nFor scikit-learn < 0.20:\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nimport imblearn; print(\"Imbalanced-Learn\", imblearn.__version__)\r\n-->\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17827", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17827/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17827/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17827/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17827", "id": 650686017, "node_id": "MDU6SXNzdWU2NTA2ODYwMTc=", "number": 17827, "title": "BUG CalibratedClassiferCV when train has less classes than test", "user": {"login": "lucyleeow", "id": 23182829, "node_id": "MDQ6VXNlcjIzMTgyODI5", "avatar_url": "https://avatars0.githubusercontent.com/u/23182829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucyleeow", "html_url": "https://github.com/lucyleeow", "followers_url": "https://api.github.com/users/lucyleeow/followers", "following_url": "https://api.github.com/users/lucyleeow/following{/other_user}", "gists_url": "https://api.github.com/users/lucyleeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucyleeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucyleeow/subscriptions", "organizations_url": "https://api.github.com/users/lucyleeow/orgs", "repos_url": "https://api.github.com/users/lucyleeow/repos", "events_url": "https://api.github.com/users/lucyleeow/events{/privacy}", "received_events_url": "https://api.github.com/users/lucyleeow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-03T16:25:15Z", "updated_at": "2020-07-09T16:32:13Z", "closed_at": "2020-07-03T16:35:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\nThis may be very uncommon and not a big problem.\r\n\r\nFor `CalibratedClassiferCV`, if the training subset has less classes than the test subset in a cv, e.g.,:\r\n```\r\ny_test = [1 1 2 2 3 3]\r\ny train = [1 1 1 2 2 2]\r\n```\r\nthis classifier (from the ensemble) will only be fit for 2 classes. At prediction time, the output of this classifier will have shape (n_samples, 2) as it can only predict 2 classes. The 3rd class proba's will be filled with 0's, see line:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/calibration.py#L367\r\n\r\nresulting in lower proba than expected. We also average the probas from the ensemble of classifier/calibrators by dividing by the number of classifier/calibrators in the ensemble, see:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/calibration.py#L214\r\n\r\nThis also gives a lower proba than expected, as one of the ensemble just gave all 0's.\r\n\r\n#### Steps/Code to Reproduce\r\nI am not sure of the best way to reproduce, but the code below results in a lower proba for class 3 than you would expect:\r\n```Python\r\nfrom sklearn.datasets import make_classification\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.model_selection import KFold\r\nfrom sklearn.calibration import CalibratedClassifierCV\r\n\r\n\r\nX, _ = make_classification(n_samples=12, n_features=4, n_classes=3,\r\n                           n_clusters_per_class=1, random_state=7)\r\ny = [1,1,1,2,2,2,1,1,2,2,3,3]\r\n# Make class 3 easier to predict\r\nX[-2:,:] = np.abs(X[-2:,:]) * 10\r\nclf = RandomForestClassifier()\r\nsplits = 2\r\nkfold = KFold(n_splits=2)\r\ncalb_clf = CalibratedClassifierCV(clf, cv=kfold)\r\ncalb_clf.fit(X,y)\r\n# Predict the last sample in X\r\ncalb_clf.predict_proba(X[-1,:].reshape((1,-1)))\r\n```\r\nGives:\r\n`[[0.31342392 0.61173178 0.0748443 ]]`\r\n\r\nI would suggest maybe adding a warning whenever the train subset does not contain all the classes in `y`. Again not sure how much of a problem this is as it is probably uncommon to have less classes in train than the full present in `y` .\r\n\r\ncc @NicolasHug @ogrisel who have been reviewing other calibrator stuff.\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17824", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17824/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17824/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17824/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17824", "id": 650636411, "node_id": "MDU6SXNzdWU2NTA2MzY0MTE=", "number": 17824, "title": "Saving estimators with ALL parameters", "user": {"login": "nilslacroix", "id": 56065345, "node_id": "MDQ6VXNlcjU2MDY1MzQ1", "avatar_url": "https://avatars2.githubusercontent.com/u/56065345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nilslacroix", "html_url": "https://github.com/nilslacroix", "followers_url": "https://api.github.com/users/nilslacroix/followers", "following_url": "https://api.github.com/users/nilslacroix/following{/other_user}", "gists_url": "https://api.github.com/users/nilslacroix/gists{/gist_id}", "starred_url": "https://api.github.com/users/nilslacroix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nilslacroix/subscriptions", "organizations_url": "https://api.github.com/users/nilslacroix/orgs", "repos_url": "https://api.github.com/users/nilslacroix/repos", "events_url": "https://api.github.com/users/nilslacroix/events{/privacy}", "received_events_url": "https://api.github.com/users/nilslacroix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-03T14:37:59Z", "updated_at": "2020-07-05T11:25:45Z", "closed_at": "2020-07-05T11:25:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\nI want to save estimators (for example the best estimator of GridSearchCV) with ALL paramters.\r\n\r\nWhen I save estimators at the moment like this:\r\n\r\ngscv = GridSearchCV(estimator = pipeline, ...)\r\nest = gscv.best_estimator_\r\n\r\nThe variable \"est\" will only inherit those values from .best_estimator_ which are different to the default value.\r\nIf I use a kernel 'rbf' for SVC() for example, there won't be a parameter in est for it.\r\n\r\nThis is a problem, because sometimes default parameters change in sci-kit and suddenly old estimators perform\r\ndifferently, because they use the new 'defaults'.\r\n\r\n#### Describe your proposed solution\r\nThe solution is easy. Give all estimators the 'default' values in the model. It would also be nice to have a numerical value for things like gamma='auto' in case they change.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17821", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17821/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17821/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17821/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17821", "id": 650582436, "node_id": "MDU6SXNzdWU2NTA1ODI0MzY=", "number": 17821, "title": "Stacking does not adhere to scikit-learn conventions", "user": {"login": "a-wozniakowski", "id": 41350659, "node_id": "MDQ6VXNlcjQxMzUwNjU5", "avatar_url": "https://avatars3.githubusercontent.com/u/41350659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-wozniakowski", "html_url": "https://github.com/a-wozniakowski", "followers_url": "https://api.github.com/users/a-wozniakowski/followers", "following_url": "https://api.github.com/users/a-wozniakowski/following{/other_user}", "gists_url": "https://api.github.com/users/a-wozniakowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-wozniakowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-wozniakowski/subscriptions", "organizations_url": "https://api.github.com/users/a-wozniakowski/orgs", "repos_url": "https://api.github.com/users/a-wozniakowski/repos", "events_url": "https://api.github.com/users/a-wozniakowski/events{/privacy}", "received_events_url": "https://api.github.com/users/a-wozniakowski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-03T13:00:18Z", "updated_at": "2020-07-03T17:40:02Z", "closed_at": "2020-07-03T17:40:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I test either ```MLPClassifier``` or ```MLPRegressor``` with ```check_estimator```, then there is no issue. However, these neural networks cause ```StackingClassifier``` and ```StackingRegressor``` to fail the estimator check.\r\n\r\nHere is the simplest code with which I encounter the issue:\r\n```\r\nfrom sklearn.neural_network import MLPClassifier, MLPRegressor\r\nfrom sklearn.ensemble import StackingClassifier, StackingRegressor\r\nfrom sklearn.utils.estimator_checks import check_estimator\r\n\r\nclf = StackingClassifier(estimators=[('mlp', MLPClassifier())],\r\n                         final_estimator=MLPClassifier())\r\ncheck_estimator(clf)\r\n\r\nreg = StackingRegressor(estimators=[('mlp', MLPRegressor())],\r\n                        final_estimator=MLPRegressor())\r\ncheck_estimator(reg)\r\n```\r\n\r\nNote that the neural networks will cause an issue as either argument, so I used them as both the first and second stacking layers for simplicity. \r\n\r\nWithin ```check_estimator``` the issue arises when the test ```check_sample_weights_pandas_series``` tries to fit with sample weights:\r\nhttps://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/utils/estimator_checks.py#L790-L791\r\n\r\nEventually this leads to a ```TypeError``` as fit gets an unexpected keyword ```sample_weight``` from\r\nhttps://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/ensemble/_base.py#L24-L30\r\n\r\nAny solutions?\r\n\r\n\r\n#### Versions\r\n```\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 47.3.1.post20200616\r\n      sklearn: 0.23.1\r\n        numpy: 1.17.5\r\n        scipy: 1.4.1\r\n       Cython: 0.29.20\r\n       pandas: 1.0.5\r\n   matplotlib: 3.2.1\r\n       joblib: 0.15.1\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17814", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17814/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17814/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17814/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17814", "id": 649973402, "node_id": "MDU6SXNzdWU2NDk5NzM0MDI=", "number": 17814, "title": "l1_ratio in sklearn.linear_model's ElasticNet greater than 1?", "user": {"login": "gimseng", "id": 26968986, "node_id": "MDQ6VXNlcjI2OTY4OTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/26968986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gimseng", "html_url": "https://github.com/gimseng", "followers_url": "https://api.github.com/users/gimseng/followers", "following_url": "https://api.github.com/users/gimseng/following{/other_user}", "gists_url": "https://api.github.com/users/gimseng/gists{/gist_id}", "starred_url": "https://api.github.com/users/gimseng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gimseng/subscriptions", "organizations_url": "https://api.github.com/users/gimseng/orgs", "repos_url": "https://api.github.com/users/gimseng/repos", "events_url": "https://api.github.com/users/gimseng/events{/privacy}", "received_events_url": "https://api.github.com/users/gimseng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-02T14:25:27Z", "updated_at": "2020-07-08T13:12:12Z", "closed_at": "2020-07-08T13:12:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I accidentally ran ElasticNet (from sklearn.linear_model) for l1_ratio >1, and no error or warning was raised. From the docsstring, it says that ``0 < l1_ratio < 1``. Should we raise a ValueError or something? Found this with @mathurinm.\r\n\r\nIf this turns out to be something to be done, I could help out if someone could point me towards the right direction. Thanks !\r\n\r\np/s: Not sure if this should be under bugs/documentations/others, so I listed it under others. Sklearn version is 0.22.1.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17810", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17810/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17810/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17810/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17810", "id": 649550836, "node_id": "MDU6SXNzdWU2NDk1NTA4MzY=", "number": 17810, "title": "Why not random matrix draw from  the 1.0 / n_feature scale?", "user": {"login": "yangfeiran", "id": 16400009, "node_id": "MDQ6VXNlcjE2NDAwMDA5", "avatar_url": "https://avatars3.githubusercontent.com/u/16400009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yangfeiran", "html_url": "https://github.com/yangfeiran", "followers_url": "https://api.github.com/users/yangfeiran/followers", "following_url": "https://api.github.com/users/yangfeiran/following{/other_user}", "gists_url": "https://api.github.com/users/yangfeiran/gists{/gist_id}", "starred_url": "https://api.github.com/users/yangfeiran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yangfeiran/subscriptions", "organizations_url": "https://api.github.com/users/yangfeiran/orgs", "repos_url": "https://api.github.com/users/yangfeiran/repos", "events_url": "https://api.github.com/users/yangfeiran/events{/privacy}", "received_events_url": "https://api.github.com/users/yangfeiran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 169405827, "node_id": "MDU6TGFiZWwxNjk0MDU4Mjc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Question", "name": "Question", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-02T02:34:21Z", "updated_at": "2020-07-02T07:56:16Z", "closed_at": "2020-07-02T07:56:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "As can be seen from here: https://github.com/scikit-learn/scikit-learn/blob/fd237278e895b42abe8d8d09105cbb82dc2cbba7/sklearn/random_projection.py#L163\r\n\r\nIt says:\r\nThe components of the random matrix are drawn from\r\n        N(0, 1.0 / n_components).\r\n\r\nI wonder why the scale is not according to the Dimensionality of the original source space. But it is related to the Dimensionality of the target projection space, which means the higher dimension the target space is, the smaller the l2 of random matrix vector should be.\r\n\r\nIt doesn't really make sense to me. I think it should relate to the Dimensionality of the original source space and draw from the 1.0 / n_feature.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17809", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17809/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17809/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17809/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17809", "id": 649429281, "node_id": "MDU6SXNzdWU2NDk0MjkyODE=", "number": 17809, "title": "CircleCI Build Broken", "user": {"login": "rithvikrao", "id": 7961373, "node_id": "MDQ6VXNlcjc5NjEzNzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7961373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rithvikrao", "html_url": "https://github.com/rithvikrao", "followers_url": "https://api.github.com/users/rithvikrao/followers", "following_url": "https://api.github.com/users/rithvikrao/following{/other_user}", "gists_url": "https://api.github.com/users/rithvikrao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rithvikrao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rithvikrao/subscriptions", "organizations_url": "https://api.github.com/users/rithvikrao/orgs", "repos_url": "https://api.github.com/users/rithvikrao/repos", "events_url": "https://api.github.com/users/rithvikrao/events{/privacy}", "received_events_url": "https://api.github.com/users/rithvikrao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-01T23:59:59Z", "updated_at": "2020-07-02T01:04:03Z", "closed_at": "2020-07-02T01:03:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\n[build_doc.sh](https://github.com/scikit-learn/scikit-learn/blob/master/build_tools/circle/build_doc.sh) is throwing an error for CircleCI checks, like in #17560. Output for this workflow can be found [here](https://app.circleci.com/pipelines/github/scikit-learn/scikit-learn/5025/workflows/8130dc23-2049-427f-bd3b-3c042107ed1d/jobs/110802/steps), and this contains the full traceback.\r\n\r\n#### Steps/Code to Reproduce\r\n<!--\r\nPlease add a minimal example that we can reproduce the error by running the\r\ncode. Be as succinct as possible, do not depend on external data. In short, we\r\nare going to copy-paste your code and we expect to get the same\r\nresult as you.\r\n\r\nExample:\r\n```python\r\nfrom sklearn.feature_extraction.text import CountVectorizer\r\nfrom sklearn.decomposition import LatentDirichletAllocation\r\ndocs = [\"Help I have a bug\" for i in range(1000)]\r\nvectorizer = CountVectorizer(input=docs, analyzer='word')\r\nlda_features = vectorizer.fit_transform(docs)\r\nlda_model = LatentDirichletAllocation(\r\n    n_topics=10,\r\n    learning_method='online',\r\n    evaluate_every=10,\r\n    n_jobs=4,\r\n)\r\nmodel = lda_model.fit(lda_features)\r\n```\r\nIf the code is too long, feel free to put it in a public gist and link\r\nit in the issue: https://gist.github.com\r\n-->\r\n\r\nI am not sure if this is occurring for arbitrary pushes to a PR, but it is happening for my pushes. \r\n\r\nEdit: merging `upstream/master` with my feature branch fixed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17801", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17801/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17801/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17801/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17801", "id": 648765499, "node_id": "MDU6SXNzdWU2NDg3NjU0OTk=", "number": 17801, "title": "cross_val_predict predictions per fold in GroupKfold", "user": {"login": "Armannas", "id": 6339503, "node_id": "MDQ6VXNlcjYzMzk1MDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6339503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Armannas", "html_url": "https://github.com/Armannas", "followers_url": "https://api.github.com/users/Armannas/followers", "following_url": "https://api.github.com/users/Armannas/following{/other_user}", "gists_url": "https://api.github.com/users/Armannas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Armannas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Armannas/subscriptions", "organizations_url": "https://api.github.com/users/Armannas/orgs", "repos_url": "https://api.github.com/users/Armannas/repos", "events_url": "https://api.github.com/users/Armannas/events{/privacy}", "received_events_url": "https://api.github.com/users/Armannas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-01T08:05:13Z", "updated_at": "2020-07-09T11:28:49Z", "closed_at": "2020-07-09T11:28:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nCurrently, cross_val_predict returns an ndarray with all cross-validated predictions. It cannot be traced back which predictions originated from which fold and group.\r\n#### Describe your proposed solution\r\nIs it possible to return the cross-validated predictions per fold with information on which group it originated from? From this, the scores per fold can also be computed. Say, a dict with folds as keys and corresponding prediction arrays as values? preferably also what group a prediction is assigned.\r\n#### Describe alternatives you've considered, if relevant\r\nSplit the groupKfold manually and call the predict method  for each fold. From there the score can be computed. This works but the parallelization and gridsearching must then be taken care of by the user, instead of using already existing functions for that.\r\n#### Additional context\r\nI want to trace back/explain why certain folds perform very poorly and I need to find the corresponding predictions in those fold. Then, I want to trace back the index of the feature vectors so I can visually look at my time series where the misclassifications originated from.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17800", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17800/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17800/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17800/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17800", "id": 648695926, "node_id": "MDU6SXNzdWU2NDg2OTU5MjY=", "number": 17800, "title": "Wheel support for aarch64", "user": {"login": "odidev", "id": 40816837, "node_id": "MDQ6VXNlcjQwODE2ODM3", "avatar_url": "https://avatars2.githubusercontent.com/u/40816837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odidev", "html_url": "https://github.com/odidev", "followers_url": "https://api.github.com/users/odidev/followers", "following_url": "https://api.github.com/users/odidev/following{/other_user}", "gists_url": "https://api.github.com/users/odidev/gists{/gist_id}", "starred_url": "https://api.github.com/users/odidev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odidev/subscriptions", "organizations_url": "https://api.github.com/users/odidev/orgs", "repos_url": "https://api.github.com/users/odidev/repos", "events_url": "https://api.github.com/users/odidev/events{/privacy}", "received_events_url": "https://api.github.com/users/odidev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-01T05:56:15Z", "updated_at": "2020-07-16T16:39:54Z", "closed_at": "2020-07-01T08:36:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Summary**\r\nInstalling scikit-learn on aarch64 via pip using command \"pip3 install scikit-learn\" tries to build wheel from source code\r\n\r\n**Problem description**\r\nscikit-learn don't have wheel for aarch64 on PyPI repository. So, while installing scikit-learn via pip on aarch64, pip builds wheel for same resulting in it takes more time to install scikit-learn. Making wheel available for aarch64 will benefit aarch64 users by minimizing scikit-learn installation time.\r\n\r\n**Expected Output**\r\nPip should be able to download scikit-learn wheel from PyPI repository rather than building it from source code.\r\n\r\n@scikit-learn-team, please let me know if I can help you building wheel/uploading to PyPI repository. I am curious to make scikit-learn wheel available for aarch64. It will be a great opportunity for me to work with you.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17796", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17796/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17796/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17796/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17796", "id": 648587570, "node_id": "MDU6SXNzdWU2NDg1ODc1NzA=", "number": 17796, "title": "[0.23.1] test_float_precision[True-KMeans] failes on arm(rhel) processors", "user": {"login": "murata-yu", "id": 67666318, "node_id": "MDQ6VXNlcjY3NjY2MzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/67666318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/murata-yu", "html_url": "https://github.com/murata-yu", "followers_url": "https://api.github.com/users/murata-yu/followers", "following_url": "https://api.github.com/users/murata-yu/following{/other_user}", "gists_url": "https://api.github.com/users/murata-yu/gists{/gist_id}", "starred_url": "https://api.github.com/users/murata-yu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/murata-yu/subscriptions", "organizations_url": "https://api.github.com/users/murata-yu/orgs", "repos_url": "https://api.github.com/users/murata-yu/repos", "events_url": "https://api.github.com/users/murata-yu/events{/privacy}", "received_events_url": "https://api.github.com/users/murata-yu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-01T00:38:54Z", "updated_at": "2020-07-04T09:24:30Z", "closed_at": "2020-07-04T09:24:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nOn arm processors (AWS:gravition2, rhel), I get the following failure in version 0.23.1\r\n```\r\nEstimator = <class 'sklearn.cluster._kmeans.KMeans'>, is_sparse = True\r\n\r\n    @pytest.mark.parametrize('Estimator', [KMeans, MiniBatchKMeans])\r\n    @pytest.mark.parametrize('is_sparse', [False, True])\r\n    def test_float_precision(Estimator, is_sparse):\r\n    \r\n        estimator = Estimator(n_init=1, random_state=30)\r\n    \r\n        inertia = {}\r\n        X_new = {}\r\n        centers = {}\r\n    \r\n        for dtype in [np.float64, np.float32]:\r\n            if is_sparse:\r\n                X_test = sp.csr_matrix(X_csr, dtype=dtype)\r\n            else:\r\n                X_test = X.astype(dtype)\r\n            estimator.fit(X_test)\r\n            # dtype of cluster centers has to be the dtype of the input\r\n            # data\r\n            assert estimator.cluster_centers_.dtype == dtype\r\n            inertia[dtype] = estimator.inertia_\r\n            X_new[dtype] = estimator.transform(X_test)\r\n            centers[dtype] = estimator.cluster_centers_\r\n            # ensure the extracted row is a 2d array\r\n            assert estimator.predict(X_test[:1]) == estimator.labels_[0]\r\n            if hasattr(estimator, 'partial_fit'):\r\n                estimator.partial_fit(X_test[0:3])\r\n                # dtype of cluster centers has to stay the same after\r\n                # partial_fit\r\n                assert estimator.cluster_centers_.dtype == dtype\r\n    \r\n        # compare arrays with low precision since the difference between\r\n        # 32 and 64 bit sometimes makes a difference up to the 4th decimal\r\n        # place\r\n        assert_array_almost_equal(inertia[np.float32], inertia[np.float64],\r\n>                                 decimal=4)\r\nE       AssertionError: \r\nE       Arrays are not almost equal to 4 decimals\r\nE       \r\nE       (mismatch 100.0%)\r\nE        x: array(325.9395)\r\nE        y: array(325.9393)\r\n\r\nsklearn/cluster/tests/test_k_means.py:863: AssertionError\r\n```\r\n\r\n#### Steps/Code to Reproduce\r\n`pytest -v sklearn/cluster/tests/test_k_means.py::test_float_precision[True-KMeans]`\r\n\r\n#### Expected Results\r\nPASSED is thrown. \r\n\r\n#### Actual Results\r\nFAILED is thrown.\r\n```\r\n        assert_array_almost_equal(inertia[np.float32], inertia[np.float64],\r\n>                                 decimal=4)\r\nE       AssertionError: \r\nE       Arrays are not almost equal to 4 decimals\r\nE       \r\nE       (mismatch 100.0%)\r\nE        x: array(325.9395)\r\nE        y: array(325.9393)\r\n```\r\n\r\n#### Versions\r\n```\r\nSystem:\r\n    python: 3.6.8 (default, Dec  5 2019, 16:02:25)  [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\nexecutable: /usr/bin/python3\r\n   machine: Linux-4.18.0-193.1.2.el8_2.aarch64-aarch64-with-redhat-8.2-Ootpa\r\n\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 39.2.0\r\n      sklearn: 0.23.1\r\n        numpy: 1.14.3\r\n        scipy: 1.0.0\r\n       Cython: 0.29\r\n       pandas: 1.0.5\r\n   matplotlib: 3.2.1\r\n       joblib: 0.14.0\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\nLinux-4.18.0-193.1.2.el8_2.aarch64-aarch64-with-redhat-8.2-Ootpa\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 3, in <module>\r\nNameError: name 'Python' is not defined\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17793", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17793/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17793/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17793/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17793", "id": 648445650, "node_id": "MDU6SXNzdWU2NDg0NDU2NTA=", "number": 17793, "title": "add check_is_fitted to sklearn.preprocessing._function_transformer.py", "user": {"login": "steut001", "id": 67657326, "node_id": "MDQ6VXNlcjY3NjU3MzI2", "avatar_url": "https://avatars0.githubusercontent.com/u/67657326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steut001", "html_url": "https://github.com/steut001", "followers_url": "https://api.github.com/users/steut001/followers", "following_url": "https://api.github.com/users/steut001/following{/other_user}", "gists_url": "https://api.github.com/users/steut001/gists{/gist_id}", "starred_url": "https://api.github.com/users/steut001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steut001/subscriptions", "organizations_url": "https://api.github.com/users/steut001/orgs", "repos_url": "https://api.github.com/users/steut001/repos", "events_url": "https://api.github.com/users/steut001/events{/privacy}", "received_events_url": "https://api.github.com/users/steut001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-30T19:43:12Z", "updated_at": "2020-07-03T17:42:19Z", "closed_at": "2020-07-03T17:42:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to propose adding in the feature to have the FunctionTransformer perform sklearn.utils.validation.check_is_fitted during the transform step. Perhaps an attribute like self.fit_=True can be set during the fit step in order to generate an attribute that ends with an underscore. This way, a NotFittedError is raised at the appropriate time when this Function is used.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17789", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17789/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17789/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17789/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17789", "id": 648126104, "node_id": "MDU6SXNzdWU2NDgxMjYxMDQ=", "number": 17789, "title": "lars_path should not overwrite X when copy_X=True and Gram='auto'", "user": {"login": "FloWPs", "id": 46440769, "node_id": "MDQ6VXNlcjQ2NDQwNzY5", "avatar_url": "https://avatars0.githubusercontent.com/u/46440769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FloWPs", "html_url": "https://github.com/FloWPs", "followers_url": "https://api.github.com/users/FloWPs/followers", "following_url": "https://api.github.com/users/FloWPs/following{/other_user}", "gists_url": "https://api.github.com/users/FloWPs/gists{/gist_id}", "starred_url": "https://api.github.com/users/FloWPs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FloWPs/subscriptions", "organizations_url": "https://api.github.com/users/FloWPs/orgs", "repos_url": "https://api.github.com/users/FloWPs/repos", "events_url": "https://api.github.com/users/FloWPs/events{/privacy}", "received_events_url": "https://api.github.com/users/FloWPs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-30T12:18:59Z", "updated_at": "2020-07-15T20:44:59Z", "closed_at": "2020-07-15T20:44:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\nHello, when calling the lars_path from _sklearn.linear_model_ with ``` copy_X=True```  and ``` Gram='auto'``` , my input X was overwritten when it shouldn't have been.  For the record, the problem doesn't seem to occur for all matrices.\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nimport numpy as np\r\nfrom sklearn.linear_model import lars_path\r\n\r\nX = np.array([[ 0.45731785,  0.24077938, -0.16996877, -0.54960156, -0.16447963,  0.05379894],\r\n              [ 0.17445885, -0.02818431, 0.58776958,  0.30324369, -0.2654244,   0.55457071],\r\n              [-0.68800377, -0.20805203, -0.18692937,  0.57843245,  0.17139153, -0.66853442],\r\n              [-0.34970557, -0.67232188, -0.64649322,  0.16279436,  0.77721725,  0.37707578],\r\n              [ 0.40593265,  0.66777884,  0.41562178, -0.49486895, -0.51870475, -0.316911  ]])\r\ny = np.array([  5.25860129,   6.19561146, -11.19422776, -13.73239641,  13.47241143])\r\n\r\nprint(\"X before:\")\r\nprint(X)\r\nlars_path(X, y, Xy=None, Gram='auto', max_iter=500, alpha_min=0.3204066641916272,\r\n         method='lasso', copy_X=True, verbose=0,\r\n         eps=np.finfo(np.float).eps, return_path=True,\r\n         copy_Gram=False, return_n_iter=True)\r\nprint(\"X after:\")\r\nprint(X)\r\n```\r\n\r\n#### Expected Results\r\nX is not overwritten.\r\n```python\r\nX before:\r\n[[ 0.45731785  0.24077938 -0.16996877 -0.54960156 -0.16447963  0.05379894]\r\n [ 0.17445885 -0.02818431  0.58776958  0.30324369 -0.2654244   0.55457071]\r\n [-0.68800377 -0.20805203 -0.18692937  0.57843245  0.17139153 -0.66853442]\r\n [-0.34970557 -0.67232188 -0.64649322  0.16279436  0.77721725  0.37707578]\r\n [ 0.40593265  0.66777884  0.41562178 -0.49486895 -0.51870475 -0.316911  ]]\r\nX after:\r\n[[ 0.45731785  0.24077938 -0.16996877 -0.54960156 -0.16447963  0.05379894]\r\n [ 0.17445885 -0.02818431  0.58776958  0.30324369 -0.2654244   0.55457071]\r\n [-0.68800377 -0.20805203 -0.18692937  0.57843245  0.17139153 -0.66853442]\r\n [-0.34970557 -0.67232188 -0.64649322  0.16279436  0.77721725  0.37707578]\r\n [ 0.40593265  0.66777884  0.41562178 -0.49486895 -0.51870475 -0.316911  ]]\r\n```\r\n#### Actual Results\r\nX is overwritten (columns are actually swapped).\r\n```python\r\nX before:\r\n[[ 0.45731785  0.24077938 -0.16996877 -0.54960156 -0.16447963  0.05379894]\r\n [ 0.17445885 -0.02818431  0.58776958  0.30324369 -0.2654244   0.55457071]\r\n [-0.68800377 -0.20805203 -0.18692937  0.57843245  0.17139153 -0.66853442]\r\n [-0.34970557 -0.67232188 -0.64649322  0.16279436  0.77721725  0.37707578]\r\n [ 0.40593265  0.66777884  0.41562178 -0.49486895 -0.51870475 -0.316911  ]]\r\nX after:\r\n[[ 0.45731785 -0.16996877  0.24077938 -0.16447963 -0.54960156  0.05379894]\r\n [ 0.17445885  0.58776958 -0.02818431 -0.2654244   0.30324369  0.55457071]\r\n [-0.68800377 -0.18692937 -0.20805203  0.17139153  0.57843245 -0.66853442]\r\n [-0.34970557 -0.64649322 -0.67232188  0.77721725  0.16279436  0.37707578]\r\n [ 0.40593265  0.41562178  0.66777884 -0.51870475 -0.49486895 -0.316911  ]]\r\n```\r\n\r\n#### Versions\r\nSystem:\r\n    python: 3.7.6 (default, Jan  8 2020, 20:23:39) [MSC v.1916 64 bit (AMD64)]\r\nexecutable: C:\\Users\\uic76008\\Anaconda3\\python.exe\r\n   machine: Windows-10-10.0.17763-SP0\r\n\r\nPython dependencies:\r\n          pip: 20.0.2\r\n   setuptools: 45.2.0.post20200210\r\n      sklearn: 0.23.1\r\n        numpy: 1.18.1\r\n        scipy: 1.4.1\r\n       Cython: 0.29.15\r\n       pandas: 1.0.1\r\n   matplotlib: 3.1.3\r\n       joblib: 0.14.1\r\nthreadpoolctl: 2.0.0\r\n\r\nBuilt with OpenMP: True\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17786", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17786/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17786/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17786/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17786", "id": 648018859, "node_id": "MDU6SXNzdWU2NDgwMTg4NTk=", "number": 17786, "title": "Gaussian Process regressor - Sklearn 0.23 version", "user": {"login": "shriyakak", "id": 50957216, "node_id": "MDQ6VXNlcjUwOTU3MjE2", "avatar_url": "https://avatars0.githubusercontent.com/u/50957216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shriyakak", "html_url": "https://github.com/shriyakak", "followers_url": "https://api.github.com/users/shriyakak/followers", "following_url": "https://api.github.com/users/shriyakak/following{/other_user}", "gists_url": "https://api.github.com/users/shriyakak/gists{/gist_id}", "starred_url": "https://api.github.com/users/shriyakak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shriyakak/subscriptions", "organizations_url": "https://api.github.com/users/shriyakak/orgs", "repos_url": "https://api.github.com/users/shriyakak/repos", "events_url": "https://api.github.com/users/shriyakak/events{/privacy}", "received_events_url": "https://api.github.com/users/shriyakak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-30T09:26:49Z", "updated_at": "2020-07-10T09:21:02Z", "closed_at": "2020-07-10T09:21:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Q1)  I using Gaussian process regressor on sensor data to estimate human pose.  while predicting on the test data I am getting std deviation same for all the values. Is it normal to get standard deviation same as I have used Standscaler() for scaling the data. \r\n\r\nQ2) Secondly, I want to improve my score on test data, currently it performs poorly with score 0.27. \r\nwhenever I am trying to use mixture of kernel my process gets stuck and never returns. Any suggestion, how to resolve this issue.\r\n\r\nBelow is the code. \r\n\r\nscaler_x = StandardScaler()\r\nscaler_y = StandardScaler()\r\n\r\nstance_train = scaler_x.fit_transform(stance_train)\r\nstance_label = scaler_y.fit_transform(stance_label)\r\nstance_test = scaler_x.transform(stance_test)\r\nstance_test_label = scaler_y.transform(stance_test_label)\r\nkernel = RBF(length_scale=3.0, length_scale_bounds=(10,1e-02))\r\ngpr1 = GaussianProcessRegressor(kernel=kernel, random_state=0, n_restarts_optimizer=500, normalize_y=True, alpha=0.01).fit(stance_train,stance_label)\r\n\r\nres1 = gpr1.score(stance_test, stance_test_label)\r\nprint(res1)\r\n\r\nmean, sigma = gpr1.predict(stance_test[:1], return_std=True)\r\nprint(sigma)\r\n[0.10220269 0.10220269 0.10220269 0.10220269 0.10220269 0.10220269\r\n 0.10220269 0.10220269 0.10220269 0.10220269 0.10220269 0.10220269\r\n 0.10220269 0.10220269 0.10220269 0.10220269 0.10220269 0.10220269]\r\nprint(mean)\r\n[[-0.32279146 -1.36695596 -0.09067824 -1.46859509  0.71355078  0.76069065\r\n  -1.32083008  0.13645212 -0.13363496 -0.12042919  0.65796758  0.04662945\r\n  -0.7011215  -1.28839211 -0.17705824  0.37084057 -0.46027648  0.33293756]]\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17778", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17778/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17778/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17778/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17778", "id": 647635214, "node_id": "MDU6SXNzdWU2NDc2MzUyMTQ=", "number": 17778, "title": "NB can  not treat new values in test data", "user": {"login": "Sandy4321", "id": 11426119, "node_id": "MDQ6VXNlcjExNDI2MTE5", "avatar_url": "https://avatars0.githubusercontent.com/u/11426119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sandy4321", "html_url": "https://github.com/Sandy4321", "followers_url": "https://api.github.com/users/Sandy4321/followers", "following_url": "https://api.github.com/users/Sandy4321/following{/other_user}", "gists_url": "https://api.github.com/users/Sandy4321/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sandy4321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sandy4321/subscriptions", "organizations_url": "https://api.github.com/users/Sandy4321/orgs", "repos_url": "https://api.github.com/users/Sandy4321/repos", "events_url": "https://api.github.com/users/Sandy4321/events{/privacy}", "received_events_url": "https://api.github.com/users/Sandy4321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-29T20:14:05Z", "updated_at": "2020-06-29T22:13:45Z", "closed_at": "2020-06-29T22:13:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n#### Describe the bug\r\nhttps://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.CategoricalNB.html#sklearn.naive_bayes.CategoricalNB\r\n\r\nNB can  not treat new values in test data\r\nit is bug since real data has new values \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17771", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17771/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17771/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17771/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17771", "id": 647400577, "node_id": "MDU6SXNzdWU2NDc0MDA1Nzc=", "number": 17771, "title": "Sphinx issue with autosummary", "user": {"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-29T13:57:47Z", "updated_at": "2020-07-01T11:18:04Z", "closed_at": "2020-07-01T11:18:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@thomasjpfan By building the documentation from scratch I have the following issue:\r\n\r\n```\r\nARNING: the custom_autosummary_new_suffix extension does not declare if it is safe for parallel reading, assuming it isn't - please ask the extension author to check and make it explicit\r\nWARNING: doing serial read\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/modules/classes.rst.rst:115: WARNING: autosummary: stub file not found 'sklearn.cluster.dbscan'. Check your autosummary_generate setting.\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/modules/classes.rst.rst:184: WARNING: autosummary: stub file not found 'sklearn.covariance.oas'. Check your autosummary_generate setting.\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/modules/classes.rst.rst:325: WARNING: autosummary: stub file not found 'sklearn.decomposition.fastica'. Check your autosummary_generate setting.\r\nlooking for now-outdated files... none found\r\npickling environment... done\r\nchecking consistency... /home/glemaitre/Documents/packages/scikit-learn/doc/modules/generated/sklearn.cluster.dbscan-lowercase.rst: WARNING: document isn't included in any toctree\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/modules/generated/sklearn.covariance.oas-lowercase.rst: WARNING: document isn't included in any toctree\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/modules/generated/sklearn.decomposition.fastica-lowercase.rst: WARNING: document isn't included in any toctree\r\ndone\r\npreparing documents... done\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/glossary.rst:502: WARNING: term Unlabeled data not found in case sensitive match.made a reference to unlabeled data instead.\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/glossary.rst:975: WARNING: term Estimator not found in case sensitive match.made a reference to estimator instead.\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/glossary.rst:1201: WARNING: term Transductive not found in case sensitive match.made a reference to transductive instead.\r\n/home/glemaitre/Documents/packages/scikit-learn/doc/glossary.rst:1297: WARNING: term Multilabel not found in case sensitive match.made a reference to multilabel instead.\r\n```\r\nSince we are only reporting diff of change file, not all PRs are failing but the following is an example: https://github.com/scikit-learn/scikit-learn/pull/17743\r\n\r\nIn the PR there are no changes regarding fastica/oas.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17765", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17765/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17765/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17765/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17765", "id": 647157146, "node_id": "MDU6SXNzdWU2NDcxNTcxNDY=", "number": 17765, "title": "A bug in the tests of forests", "user": {"login": "chkoar", "id": 11897937, "node_id": "MDQ6VXNlcjExODk3OTM3", "avatar_url": "https://avatars0.githubusercontent.com/u/11897937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chkoar", "html_url": "https://github.com/chkoar", "followers_url": "https://api.github.com/users/chkoar/followers", "following_url": "https://api.github.com/users/chkoar/following{/other_user}", "gists_url": "https://api.github.com/users/chkoar/gists{/gist_id}", "starred_url": "https://api.github.com/users/chkoar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chkoar/subscriptions", "organizations_url": "https://api.github.com/users/chkoar/orgs", "repos_url": "https://api.github.com/users/chkoar/repos", "events_url": "https://api.github.com/users/chkoar/events{/privacy}", "received_events_url": "https://api.github.com/users/chkoar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995769, "node_id": "MDU6TGFiZWwxMjk5NTc2OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Easy", "name": "Easy", "color": "02d7e1", "default": false, "description": null}, {"id": 723598741, "node_id": "MDU6TGFiZWw3MjM1OTg3NDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-29T06:37:54Z", "updated_at": "2020-06-29T18:08:48Z", "closed_at": "2020-06-29T18:08:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nIt seems that there is a bug in the unit tests of forests. In [`check_oob_score`](https://github.com/scikit-learn/scikit-learn/blob/430c2080e81dbf9aacc99dfd83d958030a7c4d07/sklearn/ensemble/tests/test_forest.py#L374) the same thing is been checked twice in the if and the else blocks. \r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\n    if name in FOREST_CLASSIFIERS:\r\n        assert abs(test_score - est.oob_score_) < 0.1\r\n    else:\r\n        assert abs(test_score - est.oob_score_) < 0.1\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17763", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17763/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17763/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17763/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17763", "id": 646918138, "node_id": "MDU6SXNzdWU2NDY5MTgxMzg=", "number": 17763, "title": "Problems with the parameter `learning_rate` in HistGradientBoostingClassifier", "user": {"login": "AaronX121", "id": 22359569, "node_id": "MDQ6VXNlcjIyMzU5NTY5", "avatar_url": "https://avatars2.githubusercontent.com/u/22359569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AaronX121", "html_url": "https://github.com/AaronX121", "followers_url": "https://api.github.com/users/AaronX121/followers", "following_url": "https://api.github.com/users/AaronX121/following{/other_user}", "gists_url": "https://api.github.com/users/AaronX121/gists{/gist_id}", "starred_url": "https://api.github.com/users/AaronX121/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AaronX121/subscriptions", "organizations_url": "https://api.github.com/users/AaronX121/orgs", "repos_url": "https://api.github.com/users/AaronX121/repos", "events_url": "https://api.github.com/users/AaronX121/events{/privacy}", "received_events_url": "https://api.github.com/users/AaronX121/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-28T13:16:26Z", "updated_at": "2020-06-29T15:54:57Z", "closed_at": "2020-06-29T15:54:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\nSetting the argument learning_rate to a value larger than 0.1 in HistGradientBoostingClassifier encounters large performance degradation.\r\n\r\n#### Steps/Code to Reproduce\r\n<!--\r\nPlease add a minimal example that we can reproduce the error by running the\r\ncode. Be as succinct as possible, do not depend on external data. In short, we\r\nare going to copy-paste your code and we expect to get the same\r\nresult as you.\r\n\r\nExample:\r\n\r\n```py\r\nfrom sklearn.feature_extraction.text import CountVectorizer\r\nfrom sklearn.decomposition import LatentDirichletAllocation\r\ndocs = [\"Help I have a bug\" for i in range(1000)]\r\nvectorizer = CountVectorizer(input=docs, analyzer='word')\r\nlda_features = vectorizer.fit_transform(docs)\r\nlda_model = LatentDirichletAllocation(\r\n    n_topics=10,\r\n    learning_method='online',\r\n    evaluate_every=10,\r\n    n_jobs=4,\r\n)\r\nmodel = lda_model.fit(lda_features)\r\n```\r\nIf the code is too long, feel free to put it in a public gist and link\r\nit in the issue: https://gist.github.com\r\n-->\r\n\r\n```py\r\n\r\nimport time\r\nimport numpy as np\r\nfrom sklearn.metrics import accuracy_score\r\nfrom sklearn.datasets import load_svmlight_file\r\n\r\nfrom xgboost import XGBClassifier\r\nfrom lightgbm import LGBMClassifier\r\nfrom sklearn.experimental import enable_hist_gradient_boosting\r\nfrom sklearn.ensemble import HistGradientBoostingClassifier\r\n\r\nif __name__ == '__main__':\r\n    \r\n    n_estimators = 100\r\n    learning_rate = 0.1\r\n    \r\n    seed = 0\r\n    n_jobs =6\r\n    \r\n    train = load_svmlight_file('../../../Dataset/libsvm/letter_training')\r\n    test = load_svmlight_file('../../../Dataset/libsvm/letter_testing')\r\n    \r\n    X_train, y_train = np.asanyarray(train[0].toarray(), order='F'), train[1]-1\r\n    X_test, y_test = np.asanyarray(test[0].toarray(), order='C'), test[1]-1\r\n\r\n    \"\"\" XGBoost (Ver==1.1.1) \"\"\"\r\n    model = XGBClassifier(n_estimators=n_estimators,\r\n                          learning_rate=learning_rate,\r\n                          objective='multi:softmax',\r\n                          random_state=seed,\r\n                          n_jobs=n_jobs)\r\n    \r\n    tic = time.time()\r\n    model.fit(X_train, y_train)\r\n    toc = time.time()\r\n    training_time = toc - tic\r\n    \r\n    tic = time.time()\r\n    y_pred = model.predict(X_test)\r\n    toc = time.time()\r\n    evaluating_time = toc - tic\r\n    \r\n    acc = accuracy_score(y_test, y_pred)\r\n    \r\n    print('XGBoost Testing Acc: {:.4f}%'.format(100.*acc))\r\n    print('XGBoost Training Time: {:.4f} s'.format(training_time))\r\n    print('XGBoost Evaluating Time: {:.4f} s\\n'.format(evaluating_time))\r\n    \r\n    \"\"\" LightGBM (Ver==2.3.1) \"\"\"\r\n    model = LGBMClassifier(n_estimators=n_estimators,\r\n                           learning_rate=learning_rate,\r\n                           objective='multiclass',\r\n                           random_state=seed,\r\n                           n_jobs=n_jobs)\r\n    \r\n    tic = time.time()\r\n    model.fit(X_train, y_train)\r\n    toc = time.time()\r\n    training_time = toc - tic\r\n    \r\n    tic = time.time()\r\n    y_pred = model.predict(X_test)\r\n    toc = time.time()\r\n    evaluating_time = toc - tic\r\n    \r\n    acc = accuracy_score(y_test, y_pred)\r\n    \r\n    print('LightGBM Testing Acc: {:.4f}%'.format(100.*acc))\r\n    print('LightGBM Training Time: {:.4f} s'.format(training_time))\r\n    print('LightGBM Evaluating Time: {:.4f} s\\n'.format(evaluating_time))\r\n\r\n    \"\"\" Sklearn-GBDT (Ver==0.22.1) \"\"\"\r\n    model = HistGradientBoostingClassifier(max_iter=n_estimators,\r\n                                           learning_rate=learning_rate,\r\n                                           validation_fraction=None,\r\n                                           random_state=seed)\r\n    \r\n    tic = time.time()\r\n    model.fit(X_train, y_train)\r\n    toc = time.time()\r\n    training_time = toc - tic\r\n    \r\n    tic = time.time()\r\n    y_pred = model.predict(X_test)\r\n    toc = time.time()\r\n    evaluating_time = toc - tic\r\n    \r\n    acc = accuracy_score(y_test, y_pred)\r\n    \r\n    print('Sklearn Testing Acc: {:.4f}%'.format(100.*acc))\r\n    print('Sklearn Training Time: {:.4f} s'.format(training_time))\r\n    print('Sklearn Evaluating Time: {:.4f} s'.format(evaluating_time))\r\n\r\n```\r\n\r\n#### Expected Results\r\nI expect the performance of HistGradientBoostingClassifier with learning_rate=0.3 to be slightly different from the case with learning_rate=0.1, either better or worse, instead of a huge degradation.\r\n\r\n#### Actual Results\r\nOn the letter dataset publicly available in LIBSVM dataset, HistGradientBoostingClassifier achieves a testing accuracy of **95.74%** with learning_rate=**0.1**, yet the accuracy is **6.16%** and **6.06%** with learning_rate=**0.3** and **0.5**, separately. Similar situations on other datasets like USPS.\r\n\r\n#### Versions\r\n<!--\r\nPlease run the following snippet and paste the output below.\r\nFor scikit-learn >= 0.20:\r\nimport sklearn; sklearn.show_versions()\r\nFor scikit-learn < 0.20:\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nimport imblearn; print(\"Imbalanced-Learn\", imblearn.__version__)\r\n-->\r\n   sklearn: 0.22.1\r\n     numpy: 1.18.1\r\n     scipy: 1.4.1\r\n    Cython: 0.29.15\r\n    pandas: 1.0.1\r\nmatplotlib: 3.1.3\r\n    joblib: 0.14.1\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17760", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17760/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17760/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17760/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17760", "id": 646813960, "node_id": "MDU6SXNzdWU2NDY4MTM5NjA=", "number": 17760, "title": "import nltk gives TypeError: an integer is required (got type bytes) when scikit-learn is installed", "user": {"login": "lucaszanella", "id": 6632321, "node_id": "MDQ6VXNlcjY2MzIzMjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6632321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucaszanella", "html_url": "https://github.com/lucaszanella", "followers_url": "https://api.github.com/users/lucaszanella/followers", "following_url": "https://api.github.com/users/lucaszanella/following{/other_user}", "gists_url": "https://api.github.com/users/lucaszanella/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucaszanella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucaszanella/subscriptions", "organizations_url": "https://api.github.com/users/lucaszanella/orgs", "repos_url": "https://api.github.com/users/lucaszanella/repos", "events_url": "https://api.github.com/users/lucaszanella/events{/privacy}", "received_events_url": "https://api.github.com/users/lucaszanella/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-28T02:01:05Z", "updated_at": "2020-07-10T09:25:36Z", "closed_at": "2020-07-10T09:25:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "importing nltk when scikit-learn (latest, 0.23.1 but also tried 0.21-2) is installed gives this:\r\n\r\n```\r\nroot@55ee48c4633f:/home/project# python3\r\nPython 3.8.2 (default, Apr 27 2020, 15:53:34) \r\n[GCC 9.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import nltk\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.8/dist-packages/nltk/__init__.py\", line 142, in <module>\r\n    from nltk.chunk import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/nltk/chunk/__init__.py\", line 157, in <module>\r\n    from nltk.chunk.api import ChunkParserI\r\n  File \"/usr/local/lib/python3.8/dist-packages/nltk/chunk/api.py\", line 13, in <module>\r\n    from nltk.parse import ParserI\r\n  File \"/usr/local/lib/python3.8/dist-packages/nltk/parse/__init__.py\", line 100, in <module>\r\n    from nltk.parse.transitionparser import TransitionParser\r\n  File \"/usr/local/lib/python3.8/dist-packages/nltk/parse/transitionparser.py\", line 19, in <module>\r\n    from sklearn.datasets import load_svmlight_file\r\n  File \"/usr/local/lib/python3.8/dist-packages/sklearn/__init__.py\", line 80, in <module>\r\n    from .base import clone\r\n  File \"/usr/local/lib/python3.8/dist-packages/sklearn/base.py\", line 21, in <module>\r\n    from .utils import _IS_32BIT\r\n  File \"/usr/local/lib/python3.8/dist-packages/sklearn/utils/__init__.py\", line 23, in <module>\r\n    from .class_weight import compute_class_weight, compute_sample_weight\r\n  File \"/usr/local/lib/python3.8/dist-packages/sklearn/utils/class_weight.py\", line 7, in <module>\r\n    from .validation import _deprecate_positional_args\r\n  File \"/usr/local/lib/python3.8/dist-packages/sklearn/utils/validation.py\", line 22, in <module>\r\n    import joblib\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/__init__.py\", line 119, in <module>\r\n    from .parallel import Parallel\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/parallel.py\", line 28, in <module>\r\n    from ._parallel_backends import (FallbackToBackend, MultiprocessingBackend,\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/_parallel_backends.py\", line 22, in <module>\r\n    from .executor import get_memmapping_executor\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/executor.py\", line 14, in <module>\r\n    from .externals.loky.reusable_executor import get_reusable_executor\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/externals/loky/__init__.py\", line 12, in <module>\r\n    from .backend.reduction import set_loky_pickler\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/externals/loky/backend/reduction.py\", line 125, in <module>\r\n    from joblib.externals import cloudpickle  # noqa: F401\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/externals/cloudpickle/__init__.py\", line 3, in <module>\r\n    from .cloudpickle import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/externals/cloudpickle/cloudpickle.py\", line 152, in <module>\r\n    _cell_set_template_code = _make_cell_set_template_code()\r\n  File \"/usr/local/lib/python3.8/dist-packages/joblib/externals/cloudpickle/cloudpickle.py\", line 133, in _make_cell_set_template_code\r\n    return types.CodeType(\r\nTypeError: an integer is required (got type bytes)\r\n\r\n```\r\n\r\nSteps to reproduce: Docker:\r\n\r\n```\r\nFROM ubuntu:latest\r\n\r\nWORKDIR /home/project\r\n\r\nRUN apt update && apt-get install -y python3 python3-pip build-essential \r\n\r\nRUN pip3 install Cython && pip3 install -r requirements.txt && pip3 uninstall scikit-learn\r\n```\r\n\r\nthen run \r\n\r\n`sudo docker run -it docker_image_name /bin/bash python3`\r\n\r\nthen simply do\r\n\r\n`import nltk`\r\n\r\nto get import error `... TypeError: an integer is required (got type bytes) `\r\n\r\nSimply do `pip3 uninstall scikit-learn` fix the error", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17756", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17756/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17756/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17756/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17756", "id": 646684945, "node_id": "MDU6SXNzdWU2NDY2ODQ5NDU=", "number": 17756, "title": "Init parameter check of estimator_checks overly restrictive", "user": {"login": "timokau", "id": 3799330, "node_id": "MDQ6VXNlcjM3OTkzMzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/3799330?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timokau", "html_url": "https://github.com/timokau", "followers_url": "https://api.github.com/users/timokau/followers", "following_url": "https://api.github.com/users/timokau/following{/other_user}", "gists_url": "https://api.github.com/users/timokau/gists{/gist_id}", "starred_url": "https://api.github.com/users/timokau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timokau/subscriptions", "organizations_url": "https://api.github.com/users/timokau/orgs", "repos_url": "https://api.github.com/users/timokau/repos", "events_url": "https://api.github.com/users/timokau/events{/privacy}", "received_events_url": "https://api.github.com/users/timokau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-06-27T13:41:10Z", "updated_at": "2020-08-07T07:15:28Z", "closed_at": "2020-08-07T07:15:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nI'm working on a custom estimator that needs an optimizer as one of its hyperparameters. I'm using the pattern of passing in an uninitialized optimizer and its parameters separately, i.e.\r\n\r\n```\r\nmy_estimator = MyEstimator(optimizer=SGD, optimizer__lr=1e-5)\r\n```\r\n\r\nwhich will then initialize the optimizer as needed. I'm attempting to verify this with the `check_parameters_default_constructible` test, but it fails due to this assertion:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/cf4fa5c771789ed569b1b40787d9118f4be79737/sklearn/utils/estimator_checks.py#L2624\r\n\r\nwhich restricts type arguments to numpy floats or numpy ints. I don't understand why this restriction is necessary. With some digging through the history, I found that the general type checks were added in 90d5ef17f88916fb8f2ab6e27d6b681bf3b011ec to verify that all parameters are of immutable types. This was then extended by the restriction on type parameters in ab2f539a32b8099a941cefc598c9625e830ecfe4, as a drive-by change without explanation. Since types are immutable, I don't understand why this was necessary.\r\n\r\nI'm not sure if this is a bug or I am missing something. CC @amueller who added that check originally.\r\n\r\n#### Steps/Code to Reproduce\r\n\r\nDefine an estimator such as\r\n\r\n```python\r\nfrom keras.optimizers import SGD\r\nfrom sklearn.base import BaseEstimator\r\nfrom sklearn.utils.estimator_checks import check_parameters_default_constructible\r\n\r\nclass MyEstimator(BaseEstimator):\r\n\tdef __init__(self, optimizer=SGD, **kwargs):\r\n\t\tself.optimizer=optimizer\r\n\r\ncheck_parameters_default_constructible(\"default_constructible\", MyEstimator)\r\n```\r\n\r\n#### Expected Results\r\n\r\nThe test passes since the estimator is default constructible and all arguments are of immutable type (the optimizer itself is of course not immutable, but the type is).\r\n\r\n#### Actual Results\r\n\r\n```\r\n$ python3 example.py\r\nUsing TensorFlow backend.\r\nWARNING:root:Limited tf.compat.v2.summary API due to missing TensorBoard installation.\r\nTraceback (most recent call last):\r\n  File \"tmp.py\", line 9, in <module>\r\n    check_parameters_default_constructible(\"default_constructible\", MyEstimator)\r\n  File \"/nix/store/isa1ilgb10xpkm6hjxaaw9m7g1xiiqp1-python3-3.7.7-env/lib/python3.7/site-packages/sklearn/utils/estimator_checks.py\", line 2533, in check_parameters_default_constructible\r\n    assert init_param.default in [np.float64, np.int64]\r\nAssertionError\r\n```\r\n\r\n\r\n#### Versions\r\n\r\n```\r\nSystem:\r\n    python: 3.7.7 (default, Mar 10 2020, 06:34:06)  [GCC 9.3.0]\r\nexecutable: /nix/store/isa1ilgb10xpkm6hjxaaw9m7g1xiiqp1-python3-3.7.7-env/bin/python3.7\r\n   machine: Linux-5.4.46-x86_64-with\r\n\r\nPython dependencies:\r\n       pip: None\r\nsetuptools: 45.2.0.post20200508\r\n   sklearn: 0.22.2.post1\r\n     numpy: 1.18.3\r\n     scipy: 1.4.1\r\n    Cython: None\r\n    pandas: 1.0.3\r\nmatplotlib: 3.2.1\r\n    joblib: 0.14.1\r\n\r\nBuilt with OpenMP: True\r\n```\r\n\r\n(the relevant code hasn't changed in current sklearn master though).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17752", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17752/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17752/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17752/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17752", "id": 646479642, "node_id": "MDU6SXNzdWU2NDY0Nzk2NDI=", "number": 17752, "title": "FileNotFoundError for `-lowercase.rst` when building docs locally", "user": {"login": "joshuacwnewton", "id": 16181459, "node_id": "MDQ6VXNlcjE2MTgxNDU5", "avatar_url": "https://avatars1.githubusercontent.com/u/16181459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshuacwnewton", "html_url": "https://github.com/joshuacwnewton", "followers_url": "https://api.github.com/users/joshuacwnewton/followers", "following_url": "https://api.github.com/users/joshuacwnewton/following{/other_user}", "gists_url": "https://api.github.com/users/joshuacwnewton/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshuacwnewton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshuacwnewton/subscriptions", "organizations_url": "https://api.github.com/users/joshuacwnewton/orgs", "repos_url": "https://api.github.com/users/joshuacwnewton/repos", "events_url": "https://api.github.com/users/joshuacwnewton/events{/privacy}", "received_events_url": "https://api.github.com/users/joshuacwnewton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-26T19:54:56Z", "updated_at": "2020-06-26T20:26:50Z", "closed_at": "2020-06-26T20:09:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nBuilding the documentation raises a FileNotFound error.\r\n\r\n#### Steps/Code to Reproduce\r\n\r\n* Checkout 563257a14119dbb3c45945dc9369392cf0ae1082 (or any recent commit, but this was where I branched from when I encountered the error)\r\n* `cd doc`\r\n* `make`\r\n\r\n#### Expected Results\r\n\r\nThe documentation builds successfully.\r\n\r\n#### Actual Results\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/joshua/repos/scikit-learn/venv/lib/python3.8/site-packages/sphinx/events.py\", line 110, in emit\r\n    results.append(listener.handler(self.app, *args))\r\n  File \"/home/joshua/repos/scikit-learn/doc/sphinxext/custom_autosummary_new_suffix.py\", line 60, in process_generate_options_custom_files\r\n    process_generate_options(app)\r\n  File \"/home/joshua/repos/scikit-learn/venv/lib/python3.8/site-packages/sphinx/ext/autosummary/__init__.py\", line 756, in process_generate_options\r\n    generate_autosummary_docs(genfiles, suffix=suffix, base_path=app.srcdir,\r\n  File \"/home/joshua/repos/scikit-learn/venv/lib/python3.8/site-packages/sphinx/ext/autosummary/generate.py\", line 388, in generate_autosummary_docs\r\n    items = find_autosummary_in_files(sources)\r\n  File \"/home/joshua/repos/scikit-learn/venv/lib/python3.8/site-packages/sphinx/ext/autosummary/generate.py\", line 450, in find_autosummary_in_files\r\n    with open(filename, encoding='utf-8', errors='ignore') as f:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/joshua/repos/scikit-learn/doc/modules/generated/sklearn.covariance.oas-lowercase.rst'\r\n```\r\n\r\n#### Versions\r\n\r\n```\r\nSystem:\r\n    python: 3.8.2 (default, Apr 27 2020, 15:53:34)  [GCC 9.3.0]\r\nexecutable: /home/joshua/repos/scikit-learn/venv/bin/python\r\n   machine: Linux-5.4.0-7634-generic-x86_64-with-glibc2.29\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 47.3.1\r\n      sklearn: 0.24.dev0\r\n        numpy: 1.18.5\r\n        scipy: 1.4.1\r\n       Cython: 0.29.20\r\n       pandas: 1.0.5\r\n   matplotlib: 3.2.2\r\n       joblib: 0.15.1\r\nthreadpoolctl: 2.1.0\r\nBuilt with OpenMP: True\r\n```\r\n\r\n#### Suspected cause\r\n\r\nI believe this has to do with the recent changes made by #13022. But, I'm running into a different error than what @jnothman has pointed out.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17751", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17751/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17751/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17751/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17751", "id": 646452257, "node_id": "MDU6SXNzdWU2NDY0NTIyNTc=", "number": 17751, "title": "MNT MatplotlibDeprecationWarning by using `use`", "user": {"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995769, "node_id": "MDU6TGFiZWwxMjk5NTc2OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Easy", "name": "Easy", "color": "02d7e1", "default": false, "description": null}, {"id": 723599497, "node_id": "MDU6TGFiZWw3MjM1OTk0OTc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-26T18:57:08Z", "updated_at": "2020-07-06T12:15:11Z", "closed_at": "2020-07-06T12:15:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I just saw locally that we have a `MatplotlibDeprecationWarning`:\r\n\r\n```\r\n  /home/glemaitre/Documents/packages/scikit-learn/sklearn/conftest.py:23: MatplotlibDeprecationWarning: The 'warn' parameter of use() is deprecated since Matplotlib 3.1 and will be removed in 3.3.  If any parameter follows 'warn', they should be pass as keyword, not positionally.\r\n    matplotlib.use('agg', warn=False, force=True)\r\n```\r\n\r\nWe might need to edit our `conftest` to handle this deprecation to avoid some surprises.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17741", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17741/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17741/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17741/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17741", "id": 646171663, "node_id": "MDU6SXNzdWU2NDYxNzE2NjM=", "number": 17741, "title": "AttributeError: 'ColumnTransformer' object has no attribute '_check_n_features'", "user": {"login": "Blessing988", "id": 59713495, "node_id": "MDQ6VXNlcjU5NzEzNDk1", "avatar_url": "https://avatars3.githubusercontent.com/u/59713495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Blessing988", "html_url": "https://github.com/Blessing988", "followers_url": "https://api.github.com/users/Blessing988/followers", "following_url": "https://api.github.com/users/Blessing988/following{/other_user}", "gists_url": "https://api.github.com/users/Blessing988/gists{/gist_id}", "starred_url": "https://api.github.com/users/Blessing988/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Blessing988/subscriptions", "organizations_url": "https://api.github.com/users/Blessing988/orgs", "repos_url": "https://api.github.com/users/Blessing988/repos", "events_url": "https://api.github.com/users/Blessing988/events{/privacy}", "received_events_url": "https://api.github.com/users/Blessing988/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-26T10:37:06Z", "updated_at": "2020-06-29T08:27:36Z", "closed_at": "2020-06-29T08:27:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am a beginner and started learning data science some days ago. My  feature data set has some categorical features and I was trying to preprocess in order to convert them into numbers.  I was trying to use the **ColumnTransformer** from the sklearn compose module but had an error when  I used the **fit_transform( )** parameter>\r\n\r\n```python\r\n# Turn our categories into numbers \r\n\r\nfrom sklearn.preprocessing import OneHotEncoder\r\nfrom sklearn.compose import ColumnTransformer               \r\n\r\ncategorical_features = [\"Make\", \"Colour\", \"Doors\"]\r\n\r\none_hot = OneHotEncoder()\r\n\r\ntransformer = ColumnTransformer([(\"one_hot\", \r\n                                  one_hot, \r\n                                  categorical_features)],\r\n                                  remainder = \"passthrough\")\r\ntransformed_X= transformer.fit_transform(X)\r\n```\r\n\r\n## These are the details of the error:\r\n\r\n```pytb\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-179-9955bb392ac9> in <module>\r\n     12                                   categorical_features)],\r\n     13                                   remainder = \"passthrough\")\r\n---> 14 transformed_X= transformer.fit_transform(X)\r\n\r\n~\\Desktop\\sample_project1\\env\\lib\\site-packages\\sklearn\\compose\\_column_transformer.py in fit_transform(self, X, y)\r\n    524         X = _check_X(X)\r\n    525         # set n_features_in_ attribute\r\n--> 526         self._check_n_features(X, reset=True)\r\n    527         self._validate_transformers()\r\n    528         self._validate_column_callables(X)\r\n\r\nAttributeError: 'ColumnTransformer' object has no attribute '_check_n_features'*\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17735", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17735/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17735/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17735/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17735", "id": 645939105, "node_id": "MDU6SXNzdWU2NDU5MzkxMDU=", "number": 17735, "title": "Actions: Label new Pull Request with \"Documentation\" if it contains /\\bDOC\\b/", "user": {"login": "jnothman", "id": 78827, "node_id": "MDQ6VXNlcjc4ODI3", "avatar_url": "https://avatars2.githubusercontent.com/u/78827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnothman", "html_url": "https://github.com/jnothman", "followers_url": "https://api.github.com/users/jnothman/followers", "following_url": "https://api.github.com/users/jnothman/following{/other_user}", "gists_url": "https://api.github.com/users/jnothman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnothman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnothman/subscriptions", "organizations_url": "https://api.github.com/users/jnothman/orgs", "repos_url": "https://api.github.com/users/jnothman/repos", "events_url": "https://api.github.com/users/jnothman/events{/privacy}", "received_events_url": "https://api.github.com/users/jnothman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-26T01:08:04Z", "updated_at": "2020-08-18T06:56:20Z", "closed_at": "2020-08-18T06:56:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We'd need to use a different PR labeller to the current one, such as https://github.com/marketplace/actions/condition-based-pull-request-labeler when it supports file-based labelling, hopefully in version 0.3 (it has a PR open).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17733", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17733/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17733/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17733/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17733", "id": 645873264, "node_id": "MDU6SXNzdWU2NDU4NzMyNjQ=", "number": 17733, "title": "Dataset Request: Heart Disease Dataset", "user": {"login": "acharles7", "id": 17268094, "node_id": "MDQ6VXNlcjE3MjY4MDk0", "avatar_url": "https://avatars2.githubusercontent.com/u/17268094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acharles7", "html_url": "https://github.com/acharles7", "followers_url": "https://api.github.com/users/acharles7/followers", "following_url": "https://api.github.com/users/acharles7/following{/other_user}", "gists_url": "https://api.github.com/users/acharles7/gists{/gist_id}", "starred_url": "https://api.github.com/users/acharles7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acharles7/subscriptions", "organizations_url": "https://api.github.com/users/acharles7/orgs", "repos_url": "https://api.github.com/users/acharles7/repos", "events_url": "https://api.github.com/users/acharles7/events{/privacy}", "received_events_url": "https://api.github.com/users/acharles7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-25T21:52:52Z", "updated_at": "2020-06-26T11:32:54Z", "closed_at": "2020-06-26T11:32:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\n[Heart Disease Dataset](http://archive.ics.uci.edu/ml/datasets/Heart+Disease)\r\nThis dataset contains 13 attributes and labels of heart disease from 303 participants from Cleveland.\r\n\r\nThis dataset featured in many ML and DS tutorials, one of them, [StatQuest with Josh Starmer](https://www.youtube.com/watch?v=q90UDEgYqeI&t=460s) (a famous machine learning youtube channel). It would be great for the community to have this dataset in scikit-learn. \r\n\r\n#### Describe your proposed solution\r\nAdd `load_heart_disease()` in [sklearn/datasets](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/_base.py)\r\n\r\n#### Additional context\r\nUseful for playing with `Decision tree`, `Random Forest`, etc. and occupy less memory **(20kb)**\r\n\r\nIf it's a good idea then please let me know so, I can make PR.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17729", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17729/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17729/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17729/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17729", "id": 645749775, "node_id": "MDU6SXNzdWU2NDU3NDk3NzU=", "number": 17729, "title": "Add Feature Importance to logistic regression", "user": {"login": "hsorsky", "id": 36887638, "node_id": "MDQ6VXNlcjM2ODg3NjM4", "avatar_url": "https://avatars3.githubusercontent.com/u/36887638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hsorsky", "html_url": "https://github.com/hsorsky", "followers_url": "https://api.github.com/users/hsorsky/followers", "following_url": "https://api.github.com/users/hsorsky/following{/other_user}", "gists_url": "https://api.github.com/users/hsorsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/hsorsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hsorsky/subscriptions", "organizations_url": "https://api.github.com/users/hsorsky/orgs", "repos_url": "https://api.github.com/users/hsorsky/repos", "events_url": "https://api.github.com/users/hsorsky/events{/privacy}", "received_events_url": "https://api.github.com/users/hsorsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-25T17:58:30Z", "updated_at": "2020-07-10T09:45:20Z", "closed_at": "2020-07-10T09:45:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the workflow you want to enable\r\nAdd ``feature_importances_`` attribute to the ``LogisticRegression`` class, similar to the one in ``RandomForestClassifier`` and ``RandomForestRegressor``.\r\n\r\n#### Describe your proposed solution\r\nUse the coefficient magnitude, normalized by the relevant variable's standard deviation.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nN/A\r\n\r\n#### Additional context\r\nN/A\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17727", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17727/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17727/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17727/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17727", "id": 645687411, "node_id": "MDU6SXNzdWU2NDU2ODc0MTE=", "number": 17727, "title": "Error in  sklearn.cluster import MeanShift when bin_seeding  is true ", "user": {"login": "morawi", "id": 36924479, "node_id": "MDQ6VXNlcjM2OTI0NDc5", "avatar_url": "https://avatars3.githubusercontent.com/u/36924479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morawi", "html_url": "https://github.com/morawi", "followers_url": "https://api.github.com/users/morawi/followers", "following_url": "https://api.github.com/users/morawi/following{/other_user}", "gists_url": "https://api.github.com/users/morawi/gists{/gist_id}", "starred_url": "https://api.github.com/users/morawi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morawi/subscriptions", "organizations_url": "https://api.github.com/users/morawi/orgs", "repos_url": "https://api.github.com/users/morawi/repos", "events_url": "https://api.github.com/users/morawi/events{/privacy}", "received_events_url": "https://api.github.com/users/morawi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-25T16:11:56Z", "updated_at": "2020-07-10T10:32:35Z", "closed_at": "2020-07-10T10:32:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "** bin_seeding = True causes a problem;  bin_seeding = False is OK. Just try this simple code:** \r\n\r\n```\r\nfrom sklearn.cluster import MeanShift\r\n\r\nx = np.array([107., 107., 107., 108., 108., 108., 109., 109.]).reshape(-1,1)\r\nms = MeanShift(bandwidth=bw, bin_seeding=True) # bin_seeding = True causes a problem;  bin_seeding = False is OK!\r\nms.fit(x) \r\n\r\n```\r\n**Generated Error:**\r\nms.fit(zz)\r\nC:\\ProgramData\\Anaconda3\\envs\\Pytorch\\lib\\site-packages\\sklearn\\cluster\\_mean_shift.py:223: RuntimeWarning: divide by zero encountered in true_divide\r\n  binned_point = np.round(point / bin_size)\r\nC:\\ProgramData\\Anaconda3\\envs\\Pytorch\\lib\\site-packages\\sklearn\\cluster\\_mean_shift.py:233: RuntimeWarning: invalid value encountered in multiply\r\n  bin_seeds = bin_seeds * bin_size\r\n*** ValueError: Input contains NaN, infinity or a value too large for dtype('float32').\r\n\r\n**Versions:**\r\n`sklearn.__version__`\r\n'0.22.1'\r\nPython 3.7.6 (default, Jan  8 2020, 20:23:39) [MSC v.1916 64 bit (AMD64)]\r\nType \"copyright\", \"credits\" or \"license\" for more information.\r\n\r\nIPython 7.13.0 -- An enhanced Interactive Python.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17714", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17714/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17714/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17714/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17714", "id": 645146711, "node_id": "MDU6SXNzdWU2NDUxNDY3MTE=", "number": 17714, "title": "Upgrade jQuery to version 3.5 to solve CVE-2020-11022", "user": {"login": "ponnsundar", "id": 10121871, "node_id": "MDQ6VXNlcjEwMTIxODcx", "avatar_url": "https://avatars2.githubusercontent.com/u/10121871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ponnsundar", "html_url": "https://github.com/ponnsundar", "followers_url": "https://api.github.com/users/ponnsundar/followers", "following_url": "https://api.github.com/users/ponnsundar/following{/other_user}", "gists_url": "https://api.github.com/users/ponnsundar/gists{/gist_id}", "starred_url": "https://api.github.com/users/ponnsundar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ponnsundar/subscriptions", "organizations_url": "https://api.github.com/users/ponnsundar/orgs", "repos_url": "https://api.github.com/users/ponnsundar/repos", "events_url": "https://api.github.com/users/ponnsundar/events{/privacy}", "received_events_url": "https://api.github.com/users/ponnsundar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-25T04:45:03Z", "updated_at": "2020-08-14T08:19:19Z", "closed_at": "2020-08-14T08:19:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "In jQuery versions greater than or equal to 1.2 and before 3.5.0, passing HTML from untrusted sources - even after sanitizing it - to one of jQuery's DOM manipulation methods (i.e. .html(), .append(), and others) may execute untrusted code. This problem is patched in jQuery 3.5.0.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17700", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17700/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17700/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17700/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17700", "id": 644550160, "node_id": "MDU6SXNzdWU2NDQ1NTAxNjA=", "number": 17700, "title": "Add 32 bit support to neural_network module", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 705180250, "node_id": "MDU6TGFiZWw3MDUxODAyNTA=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Performance", "name": "Performance", "color": "d93f0b", "default": false, "description": null}, {"id": 408935341, "node_id": "MDU6TGFiZWw0MDg5MzUzNDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Sprint", "name": "Sprint", "color": "006b75", "default": false, "description": null}, {"id": 723598741, "node_id": "MDU6TGFiZWw3MjM1OTg3NDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-24T11:45:51Z", "updated_at": "2020-07-04T08:55:39Z", "closed_at": "2020-07-04T08:55:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Related to https://github.com/scikit-learn/scikit-learn/issues/11000 it would be good to add support for 32 bit computations for estimators in the `neural_network` module. This was done for `BernoulliRBM` in https://github.com/scikit-learn/scikit-learn/pull/16352  Because performance is bound by the dot product this is going to have a large impact (cf https://github.com/scikit-learn/scikit-learn/pull/17641#issuecomment-646879638)\r\n\r\nI would even argue that unlike other models, it could make sense to add a `dtype=np.float32` parameter and make calculations in 32 bit by default regardless  of `X.dtypes`.   We could also consider supporting `dtype=np.float16`.  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17693", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17693/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17693/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17693/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17693", "id": 644442497, "node_id": "MDU6SXNzdWU2NDQ0NDI0OTc=", "number": 17693, "title": "Incremental PCA - ValueError: array must not contain infs or NaNs", "user": {"login": "Lyonid", "id": 53096594, "node_id": "MDQ6VXNlcjUzMDk2NTk0", "avatar_url": "https://avatars2.githubusercontent.com/u/53096594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lyonid", "html_url": "https://github.com/Lyonid", "followers_url": "https://api.github.com/users/Lyonid/followers", "following_url": "https://api.github.com/users/Lyonid/following{/other_user}", "gists_url": "https://api.github.com/users/Lyonid/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lyonid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lyonid/subscriptions", "organizations_url": "https://api.github.com/users/Lyonid/orgs", "repos_url": "https://api.github.com/users/Lyonid/repos", "events_url": "https://api.github.com/users/Lyonid/events{/privacy}", "received_events_url": "https://api.github.com/users/Lyonid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 12995769, "node_id": "MDU6TGFiZWwxMjk5NTc2OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Easy", "name": "Easy", "color": "02d7e1", "default": false, "description": null}, {"id": 723598741, "node_id": "MDU6TGFiZWw3MjM1OTg3NDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-06-24T08:57:26Z", "updated_at": "2020-07-26T00:34:09Z", "closed_at": "2020-07-26T00:34:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use IncrementalPCA from sklearn.decomposition. My code couldn't really be simpler:\r\n\r\n```\r\nfrom sklearn.decomposition import IncrementalPCA\r\nimport pandas as pd\r\n\r\nwith open('C:/My/File/Path/file.csv', 'r') as fp:\r\n    data = pd.read_csv(fp)\r\n\r\nipca = IncrementalPCA(n_components=4)\r\nipca.fit(data)\r\n```\r\nbut this is how it finishes when launched:\r\n\r\n```\r\nC:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\sklearn\\decomposition\\_incremental_pca.py:293: RuntimeWarning: overflow encountered in long_scalars\r\n  np.sqrt((self.n_samples_seen_ * n_samples) /\r\nC:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\sklearn\\decomposition\\_incremental_pca.py:293: RuntimeWarning: invalid value encountered in sqrt\r\n  np.sqrt((self.n_samples_seen_ * n_samples) /\r\nTraceback (most recent call last):\r\nFile \"C:/Users/myuser/AppData/Roaming/JetBrains/PyCharmCE2020.1/scratches/scratch_9.py\", line 6, in <module>\r\n  ipca.fit(data)\r\nFile \"C:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\sklearn\\decomposition\\_incremental_pca.py\", line 215, in fit\r\n  self.partial_fit(X_batch, check_input=False)\r\nFile \"C:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\sklearn\\decomposition\\_incremental_pca.py\", line 298, in partial_fit\r\n  U, S, V = linalg.svd(X, full_matrices=False)\r\nFile \"C:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\scipy\\linalg\\decomp_svd.py\", line 106, in svd\r\n  a1 = _asarray_validated(a, check_finite=check_finite)\r\nFile \"C:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\scipy\\_lib\\_util.py\", line 263, in _asarray_validated\r\n  a = toarray(a)\r\nFile \"C:\\Users\\myuser\\PycharmProjects\\mushu\\venv\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 498, in asarray_chkfinite\r\n  raise ValueError(\r\nValueError: array must not contain infs or NaNs\r\n\r\nProcess finished with exit code 1\r\n```\r\nI already checked:\r\n\r\n- There is no NaN, infinite or negative anywhere in my data\r\n- I had scikit-learn v0.22.2.post1, I updated to 0.23.1, no difference\r\n- If I use PCA instead of IncrementalPCA leaving everything else the same, everything works fine, no warnings, no errors, all good\r\n- Tried using both\r\n`data = pd.read_csv(fp, dtype = 'Int64')`\r\nand\r\n`data = pd.read_csv(fp, dtype = np.float64)`\r\nwith no difference in results.\r\n- There were similar issues in previous versions, but they refer to versions around 0.16/0.17, most were with more complex code and afaik all were fixed around those versions\r\n\r\nMy data, exactly as I feed them to the above code. This are really just 243 columns x 2.000.000 rows of 0s and 1s. https://drive.google.com/file/d/1JBIliADt9TViTk8qjnmIS3RFEO934dY6/view?usp=sharing\r\n\r\n**Update**\r\nSeems like the issue is related with the dataset size. If I try fitting to a smaller portion everything works fine. This is until I get around 1800000 rows. That's where the error starts showing.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17690", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17690/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17690/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17690/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17690", "id": 644404848, "node_id": "MDU6SXNzdWU2NDQ0MDQ4NDg=", "number": 17690, "title": "Documentation failing on master (most likely because of scipy 1.5.0)", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 408935341, "node_id": "MDU6TGFiZWw0MDg5MzUzNDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Sprint", "name": "Sprint", "color": "006b75", "default": false, "description": null}, {"id": 723598741, "node_id": "MDU6TGFiZWw3MjM1OTg3NDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-06-24T07:59:06Z", "updated_at": "2020-06-24T10:35:30Z", "closed_at": "2020-06-24T10:35:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Documentation on master has been failing for a few builds\r\n[Failing build log](https://app.circleci.com/pipelines/github/scikit-learn/scikit-learn/4338/workflows/72a4aca6-37bb-49fb-a5cb-5a79c9ea3542/jobs/108734)\r\nscipy 1.5.0\r\n\r\n[Succesful build log](https://app.circleci.com/pipelines/github/scikit-learn/scikit-learn/4313/workflows/6852667f-d82e-4f9a-9629-395fb4d6f192/jobs/108656) 16 hours ago.\r\nscipy 1.4.1\r\n\r\nThis happens in `examples/inspection/plot_permutation_importance_multicollinear.py`.\r\n\r\nError:\r\n```\r\nUnexpected failing examples:\r\n/home/circleci/project/examples/inspection/plot_permutation_importance_multicollinear.py failed leaving traceback:\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_gallery.py\", line 159, in call_memory\r\n    return 0., func()\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/sphinx_gallery/gen_rst.py\", line 466, in __call__\r\n    exec(self.code, self.fake_main.__dict__)\r\n  File \"/home/circleci/project/examples/inspection/plot_permutation_importance_multicollinear.py\", line 83, in <module>\r\n    dendro = hierarchy.dendrogram(corr_linkage, labels=data.feature_names, ax=ax1,\r\n  File \"/home/circleci/miniconda/envs/testenv/lib/python3.8/site-packages/scipy/cluster/hierarchy.py\", line 3277, in dendrogram\r\n    if labels and Z.shape[0] + 1 != len(labels):\r\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17681", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17681/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17681/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17681/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17681", "id": 644014691, "node_id": "MDU6SXNzdWU2NDQwMTQ2OTE=", "number": 17681, "title": "pairwise_kernel and SpectralClustering.affinity_matrix_ give different answers", "user": {"login": "mottese", "id": 67335768, "node_id": "MDQ6VXNlcjY3MzM1NzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/67335768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mottese", "html_url": "https://github.com/mottese", "followers_url": "https://api.github.com/users/mottese/followers", "following_url": "https://api.github.com/users/mottese/following{/other_user}", "gists_url": "https://api.github.com/users/mottese/gists{/gist_id}", "starred_url": "https://api.github.com/users/mottese/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mottese/subscriptions", "organizations_url": "https://api.github.com/users/mottese/orgs", "repos_url": "https://api.github.com/users/mottese/repos", "events_url": "https://api.github.com/users/mottese/events{/privacy}", "received_events_url": "https://api.github.com/users/mottese/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-23T17:24:37Z", "updated_at": "2020-06-24T13:58:30Z", "closed_at": "2020-06-24T13:54:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nBefore submitting a bug, please make sure the issue hasn't been already\r\naddressed by searching through the past issues.\r\n-->\r\n\r\n#### Describe the bug\r\n`SpectralClustering` uses `pairwise_kernels` to compute an affinity matrix. However, the `affinity_matrix_` stored in an instance of `SpectralClustering` after calling `fit` is different than the matrix that results from calling `pairwise_kernels` directly.\r\n\r\n#### Steps/Code to Reproduce\r\nExample:\r\n```python\r\nfrom sklearn.cluster import SpectralClustering\r\nfrom sklearn.metrics.pairwise import pairwise_kernels\r\nimport numpy as np\r\n\r\ndata = [[1, 1],\r\n        [2, 2],\r\n        [4, 4]]\r\n\r\nsc = SpectralClustering(n_clusters=1, affinity=\"rbf\", random_state=0)\r\nsc.fit(data)\r\n\r\nsc_am = sc.affinity_matrix_\r\n\r\n# This is the exact set of calls that is made by SpectralClustering.fit(...)\r\nparams = {}\r\ndata = sc._validate_data(data, accept_sparse=['csr', 'csc', 'coo'],\r\n                         dtype=np.float64, ensure_min_samples=2)\r\npk_am = pairwise_kernels(data, metric=sc.affinity,\r\n                         filter_params=True,\r\n                         **params)\r\n\r\nprint(\"SpectralClustering.affinity_matrix_\\n\", sc_am)\r\nprint()\r\nprint(\"pairwise_kernels\\n\", pk_am)\r\n```\r\n\r\n#### Expected Results\r\nI would expect the `sc_am` and `pk_am` variables to contain the same results. I expect this because according to these lines of code:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/blob/fd237278e/sklearn/cluster/_spectral.py#L479\r\nhttps://github.com/scikit-learn/scikit-learn/blob/fd237278e/sklearn/cluster/_spectral.py#L510\r\n\r\n`affinity_matrix_` is computed by making the same calls to `_validate_data` and `pairwise_kernels` that I am making in my example.\r\n\r\n#### Actual Results\r\n```\r\nSpectralClustering.affinity_matrix_\r\n [[1.00000000e+00 1.35335283e-01 1.52299797e-08]\r\n [1.35335283e-01 1.00000000e+00 3.35462628e-04]\r\n [1.52299797e-08 3.35462628e-04 1.00000000e+00]]\r\n\r\npairwise_kernels\r\n [[1.00000000e+00 3.67879441e-01 1.23409804e-04]\r\n [3.67879441e-01 1.00000000e+00 1.83156389e-02]\r\n [1.23409804e-04 1.83156389e-02 1.00000000e+00]]\r\n```\r\n\r\n#### Versions\r\n```\r\nSystem:\r\n    python: 3.6.9 (default, Apr 18 2020, 01:56:04)  [GCC 8.4.0]\r\nexecutable: /usr/bin/python\r\n   machine: Linux-4.4.0-17134-Microsoft-x86_64-with-Ubuntu-18.04-bionic\r\n\r\nPython dependencies:\r\n          pip: 9.0.1\r\n   setuptools: 46.3.0\r\n      sklearn: 0.23.1\r\n        numpy: 1.19.0\r\n        scipy: 1.5.0\r\n       Cython: None\r\n       pandas: None\r\n   matplotlib: None\r\n       joblib: 0.15.1\r\nthreadpoolctl: 2.1.0\r\n\r\nBuilt with OpenMP: True\r\n```\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17680", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17680/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17680/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17680/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17680", "id": 644013677, "node_id": "MDU6SXNzdWU2NDQwMTM2Nzc=", "number": 17680, "title": "Tests in \"datasets\" module are not skipped if pillow and pandas are not installed", "user": {"login": "alfaro96", "id": 32649176, "node_id": "MDQ6VXNlcjMyNjQ5MTc2", "avatar_url": "https://avatars1.githubusercontent.com/u/32649176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alfaro96", "html_url": "https://github.com/alfaro96", "followers_url": "https://api.github.com/users/alfaro96/followers", "following_url": "https://api.github.com/users/alfaro96/following{/other_user}", "gists_url": "https://api.github.com/users/alfaro96/gists{/gist_id}", "starred_url": "https://api.github.com/users/alfaro96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alfaro96/subscriptions", "organizations_url": "https://api.github.com/users/alfaro96/orgs", "repos_url": "https://api.github.com/users/alfaro96/repos", "events_url": "https://api.github.com/users/alfaro96/events{/privacy}", "received_events_url": "https://api.github.com/users/alfaro96/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874569138, "node_id": "MDU6TGFiZWwxODc0NTY5MTM4", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug:%20triage", "name": "Bug: triage", "color": "eaa39d", "default": false, "description": "Reported bugs that are not confirmed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-23T17:23:00Z", "updated_at": "2020-06-26T18:41:38Z", "closed_at": "2020-06-26T18:41:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nThe `sklearn/datasets/tests/test_common.py::test_common_check_return_X_y[fetch_lfw_people-fetch_lfw_people]`  and `sklearn/datasets/tests/test_covtype.py::test_fetch_asframe` tests are not skipped if `pillow` and `pandas` are not installed, respectively.\r\n\r\nThis gives raise to the [wheel builder](https://dev.azure.com/scikit-learn/scikit-learn/_build?definitionId=3) to fail because `pillow` and `pandas` are not installed to run these tests.\r\n\r\n#### Steps/Code to Reproduce\r\n\r\n```\r\npytest sklearn/datasets/tests/test_common.py::test_common_check_return_X_y[fetch_lfw_people-fetch_lfw_people]\r\n```\r\n\r\n```\r\npytest sklearn/datasets/tests/test_covtype.py::test_fetch_asframe\r\n```\r\n#### Expected Results\r\n\r\nNo error is thrown.\r\n\r\n#### Actual Results\r\n\r\n```\r\n=============================================================================================================================== test session starts ================================================================================================================================\r\nplatform linux -- Python 3.6.10, pytest-4.6.2, py-1.8.1, pluggy-0.13.1\r\nrootdir: /home/scikit-learn/workspace, inifile: setup.cfg\r\nplugins: cov-2.8.0\r\ncollected 1 item                                                                                                                                                                                                                                                                   \r\n\r\nsklearn/datasets/tests/test_common.py F                                                                                                                                                                                                                                      [100%]\r\n\r\n===================================================================================================================================== FAILURES =====================================================================================================================================\r\n_________________________________________________________________________________________________________ test_common_check_return_X_y[fetch_lfw_people-fetch_lfw_people] __________________________________________________________________________________________________________\r\n\r\nname = 'fetch_lfw_people', dataset_func = <function fetch_lfw_people at 0x7f1ff98d2e18>\r\n\r\n    @pytest.mark.parametrize(\r\n        \"name, dataset_func\", _generate_func_supporting_param(\"return_X_y\")\r\n    )\r\n    def test_common_check_return_X_y(name, dataset_func):\r\n>       bunch = dataset_func()\r\n\r\nsklearn/datasets/tests/test_common.py:94: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nsklearn/utils/validation.py:74: in inner_f\r\n    return f(**kwargs)\r\nsklearn/datasets/_lfw.py:317: in fetch_lfw_people\r\n    min_faces_per_person=min_faces_per_person, color=color, slice_=slice_)\r\n../.local/lib/python3.6/site-packages/joblib/memory.py:565: in __call__\r\n    return self._cached_call(args, kwargs)[0]\r\n../.local/lib/python3.6/site-packages/joblib/memory.py:531: in _cached_call\r\n    out, metadata = self.call(*args, **kwargs)\r\n../.local/lib/python3.6/site-packages/joblib/memory.py:727: in call\r\n    output = self.func(*args, **kwargs)\r\nsklearn/datasets/_lfw.py:206: in _fetch_lfw_people\r\n    faces = _load_imgs(file_paths, slice_, color, resize)\r\nsklearn/datasets/_lfw.py:154: in _load_imgs\r\n    img = imread(file_path)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nname = '/home/scikit-learn/scikit_learn_data/lfw_home/lfw_funneled/AJ_Cook/AJ_Cook_0001.jpg', flatten = False, mode = None\r\n\r\n    def imread(name, flatten=False, mode=None):\r\n        \"\"\"\r\n        Read an image from a file as an array.\r\n    \r\n        This function is only available if Python Imaging Library (PIL) is installed.\r\n    \r\n        Parameters\r\n        ----------\r\n        name : str or file object\r\n            The file name or file object to be read.\r\n        flatten : bool, optional\r\n            If True, flattens the color layers into a single gray-scale layer.\r\n        mode : str, optional\r\n            Mode to convert image to, e.g. ``'RGB'``.  See the Notes for more\r\n            details.\r\n    \r\n        Returns\r\n        -------\r\n        imread : ndarray\r\n            The array obtained by reading the image.\r\n    \r\n        Notes\r\n        -----\r\n        `imread` uses the Python Imaging Library (PIL) to read an image.\r\n        The following notes are from the PIL documentation.\r\n    \r\n        `mode` can be one of the following strings:\r\n    \r\n        * 'L' (8-bit pixels, black and white)\r\n        * 'P' (8-bit pixels, mapped to any other mode using a color palette)\r\n        * 'RGB' (3x8-bit pixels, true color)\r\n        * 'RGBA' (4x8-bit pixels, true color with transparency mask)\r\n        * 'CMYK' (4x8-bit pixels, color separation)\r\n        * 'YCbCr' (3x8-bit pixels, color video format)\r\n        * 'I' (32-bit signed integer pixels)\r\n        * 'F' (32-bit floating point pixels)\r\n    \r\n        PIL also provides limited support for a few special modes, including\r\n        'LA' ('L' with alpha), 'RGBX' (true color with padding) and 'RGBa'\r\n        (true color with premultiplied alpha).\r\n    \r\n        When translating a color image to black and white (mode 'L', 'I' or\r\n        'F'), the library uses the ITU-R 601-2 luma transform::\r\n    \r\n            L = R * 299/1000 + G * 587/1000 + B * 114/1000\r\n    \r\n        When `flatten` is True, the image is converted using mode 'F'.\r\n        When `mode` is not None and `flatten` is True, the image is first\r\n        converted according to `mode`, and the result is then flattened using\r\n        mode 'F'.\r\n    \r\n        \"\"\"\r\n        if not pillow_installed:\r\n>           raise ImportError(PILLOW_ERROR_MESSAGE)\r\nE           ImportError: The Python Imaging Library (PIL) is required to load data from jpeg files. Please refer to https://pillow.readthedocs.io/en/stable/installation.html for installing PIL.\r\n\r\nsklearn/externals/_pilutil.py:204: ImportError\r\n======================================================================================================================= 1 failed, 1 warnings in 0.55 seconds =======================================================================================================================\r\n```\r\n\r\nand\r\n\r\n```\r\n=============================================================================================================================== test session starts ================================================================================================================================\r\nplatform linux -- Python 3.6.10, pytest-4.6.2, py-1.8.1, pluggy-0.13.1\r\nrootdir: /home/scikit-learn/workspace, inifile: setup.cfg\r\nplugins: cov-2.8.0\r\ncollected 1 item                                                                                                                                                                                                                                                                   \r\n\r\nsklearn/datasets/tests/test_covtype.py F                                                                                                                                                                                                                                     [100%]\r\n\r\n===================================================================================================================================== FAILURES =====================================================================================================================================\r\n________________________________________________________________________________________________________________________________ test_fetch_asframe ________________________________________________________________________________________________________________________________\r\n\r\ncaller_name = 'fetch_covtype with as_frame=True'\r\n\r\n    def check_pandas_support(caller_name):\r\n        \"\"\"Raise ImportError with detailed error message if pandsa is not\r\n        installed.\r\n    \r\n        Plot utilities like :func:`fetch_openml` should lazily import\r\n        pandas and call this helper before any computation.\r\n    \r\n        Parameters\r\n        ----------\r\n        caller_name : str\r\n            The name of the caller that requires pandas.\r\n        \"\"\"\r\n        try:\r\n>           import pandas  # noqa\r\nE           ModuleNotFoundError: No module named 'pandas'\r\n\r\nsklearn/utils/__init__.py:1086: ModuleNotFoundError\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nfetch_covtype_fxt = <function _wrapped_fetch.<locals>.wrapped at 0x7f9e3af3e9d8>\r\n\r\n    def test_fetch_asframe(fetch_covtype_fxt):\r\n>       bunch = fetch_covtype_fxt(as_frame=True)\r\n\r\nsklearn/datasets/tests/test_covtype.py:29: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nsklearn/datasets/tests/conftest.py:22: in wrapped\r\n    return f(*args, **kwargs)\r\nsklearn/utils/validation.py:74: in inner_f\r\n    return f(**kwargs)\r\nsklearn/datasets/_covtype.py:185: in fetch_covtype\r\n    target_names=TARGET_NAMES)\r\nsklearn/datasets/_base.py:73: in _convert_data_dataframe\r\n    pd = check_pandas_support('{} with as_frame=True'.format(caller_name))\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\ncaller_name = 'fetch_covtype with as_frame=True'\r\n\r\n    def check_pandas_support(caller_name):\r\n        \"\"\"Raise ImportError with detailed error message if pandsa is not\r\n        installed.\r\n    \r\n        Plot utilities like :func:`fetch_openml` should lazily import\r\n        pandas and call this helper before any computation.\r\n    \r\n        Parameters\r\n        ----------\r\n        caller_name : str\r\n            The name of the caller that requires pandas.\r\n        \"\"\"\r\n        try:\r\n            import pandas  # noqa\r\n            return pandas\r\n        except ImportError as e:\r\n            raise ImportError(\r\n                \"{} requires pandas.\".format(caller_name)\r\n>           ) from e\r\nE           ImportError: fetch_covtype with as_frame=True requires pandas.\r\n\r\nsklearn/utils/__init__.py:1091: ImportError\r\n============================================================================================================================= 1 failed in 0.80 seconds =============================================================================================================================\r\n```\r\n\r\n#### Versions\r\n\r\n```\r\nSystem:\r\n    python: 3.6.10 (default, May 20 2020, 21:54:39)  [GCC 8.3.0]\r\nexecutable: /usr/local/bin/python\r\n   machine: Linux-4.19.76-linuxkit-x86_64-with-debian-10.4\r\n\r\nPython dependencies:\r\n          pip: 20.1.1\r\n   setuptools: 46.4.0\r\n      sklearn: 0.24.dev0\r\n        numpy: 1.18.4\r\n        scipy: 1.4.1\r\n       Cython: 0.29.18\r\n       pandas: None\r\n   matplotlib: 3.2.1\r\n       joblib: 0.15.1\r\nthreadpoolctl: 2.0.0\r\n\r\nBuilt with OpenMP: False\r\n```\r\n\r\n#### Any other comments\r\n\r\nI may work on this issue, but I think that @glemaitre that previously worked with these tests surely provides a better and faster solution.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17674", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17674/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17674/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17674/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17674", "id": 643925750, "node_id": "MDU6SXNzdWU2NDM5MjU3NTA=", "number": 17674, "title": "Some Scipy version checks for old Scipy version should be removed", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 408935341, "node_id": "MDU6TGFiZWw0MDg5MzUzNDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Sprint", "name": "Sprint", "color": "006b75", "default": false, "description": null}, {"id": 723598741, "node_id": "MDU6TGFiZWw3MjM1OTg3NDE=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}, {"id": 723599497, "node_id": "MDU6TGFiZWw3MjM1OTk0OTc=", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-23T15:12:57Z", "updated_at": "2020-06-24T19:12:18Z", "closed_at": "2020-06-24T19:12:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Minimum Scipy supported version is 0.19.1. We have some code that tests against older versions:\r\n\r\nHere are is an excerpt from a git grep command showing at least two matches\r\n```\r\n$ git grep sp_version\r\n\r\nsklearn/feature_extraction/_hashing_fast.pyx:        if sp_version < (0, 14):\r\nsklearn/model_selection/tests/test_search.py:    if sp_version >= (0, 16):\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17673", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17673/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17673/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17673/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17673", "id": 643911222, "node_id": "MDU6SXNzdWU2NDM5MTEyMjI=", "number": 17673, "title": "Deprecate n_classes_ in GradientBoostingRegressor", "user": {"login": "glemaitre", "id": 7454015, "node_id": "MDQ6VXNlcjc0NTQwMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7454015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glemaitre", "html_url": "https://github.com/glemaitre", "followers_url": "https://api.github.com/users/glemaitre/followers", "following_url": "https://api.github.com/users/glemaitre/following{/other_user}", "gists_url": "https://api.github.com/users/glemaitre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glemaitre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glemaitre/subscriptions", "organizations_url": "https://api.github.com/users/glemaitre/orgs", "repos_url": "https://api.github.com/users/glemaitre/repos", "events_url": "https://api.github.com/users/glemaitre/events{/privacy}", "received_events_url": "https://api.github.com/users/glemaitre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995755, "node_id": "MDU6TGFiZWwxMjk5NTc1NQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 12995769, "node_id": "MDU6TGFiZWwxMjk5NTc2OQ==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/Easy", "name": "Easy", "color": "02d7e1", "default": false, "description": null}, {"id": 1815440243, "node_id": "MDU6TGFiZWwxODE1NDQwMjQz", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/module:ensemble", "name": "module:ensemble", "color": "151e91", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-23T14:54:40Z", "updated_at": "2020-08-13T17:25:56Z", "closed_at": "2020-08-13T17:25:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Working on https://github.com/scikit-learn/scikit-learn/pull/17671, it appears that `GradientBoostingRegressor` has an attribute `n_classes_` which does not make any sense. We already had something similar in `DecisionTreeRegressor` some time ago and we deprecate it. I think that we should do something similar here to be sure that we don't have `n_classes_` in regressor.\r\nI would almost think that our common test could check this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17663", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17663/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17663/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17663/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17663", "id": 643505605, "node_id": "MDU6SXNzdWU2NDM1MDU2MDU=", "number": 17663, "title": "Requires-Python is missing in PKG-INFO of the version 0.23.1", "user": {"login": "zbw0046", "id": 11980692, "node_id": "MDQ6VXNlcjExOTgwNjky", "avatar_url": "https://avatars3.githubusercontent.com/u/11980692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zbw0046", "html_url": "https://github.com/zbw0046", "followers_url": "https://api.github.com/users/zbw0046/followers", "following_url": "https://api.github.com/users/zbw0046/following{/other_user}", "gists_url": "https://api.github.com/users/zbw0046/gists{/gist_id}", "starred_url": "https://api.github.com/users/zbw0046/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zbw0046/subscriptions", "organizations_url": "https://api.github.com/users/zbw0046/orgs", "repos_url": "https://api.github.com/users/zbw0046/repos", "events_url": "https://api.github.com/users/zbw0046/events{/privacy}", "received_events_url": "https://api.github.com/users/zbw0046/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-23T03:40:34Z", "updated_at": "2020-06-26T22:52:03Z", "closed_at": "2020-06-26T22:52:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the version 0.23.1, `Requires-Python` is missing in the `PKG-INFO` file in `scikit-learn-0.23.1.tar.gz` (https://bytedpypi.byted.org/tos/pkg/pypi/scikit-learn/scikit-learn-0.23.1.tar.gz#sha256=e3fec1c8831f8f93ad85581ca29ca1bb88e2da377fb097cf8322aa89c21bc9b8). \r\n\r\nThis behavior violates [PEP508](https://www.python.org/dev/peps/pep-0508/#environment-markers) and will cause that some package manager incorrectly pick this version for older `python` distributions (such as 2.6).\r\n\r\nan example: https://github.com/python-poetry/poetry/issues/2588\r\n\r\nSo please add this information to that file. Thank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17659", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17659/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17659/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17659/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17659", "id": 643384752, "node_id": "MDU6SXNzdWU2NDMzODQ3NTI=", "number": 17659, "title": "[Feature Request] Custom loss functions for GradientBoostingRegressor/Classifier and HistGradientBoostingRegressor/Classifier ", "user": {"login": "zachmayer", "id": 581590, "node_id": "MDQ6VXNlcjU4MTU5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/581590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zachmayer", "html_url": "https://github.com/zachmayer", "followers_url": "https://api.github.com/users/zachmayer/followers", "following_url": "https://api.github.com/users/zachmayer/following{/other_user}", "gists_url": "https://api.github.com/users/zachmayer/gists{/gist_id}", "starred_url": "https://api.github.com/users/zachmayer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zachmayer/subscriptions", "organizations_url": "https://api.github.com/users/zachmayer/orgs", "repos_url": "https://api.github.com/users/zachmayer/repos", "events_url": "https://api.github.com/users/zachmayer/events{/privacy}", "received_events_url": "https://api.github.com/users/zachmayer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 12995756, "node_id": "MDU6TGFiZWwxMjk5NTc1Ng==", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/New%20Feature", "name": "New Feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-22T21:55:12Z", "updated_at": "2020-06-23T22:23:19Z", "closed_at": "2020-06-23T22:23:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nIn Xgboost and LightGBM, you can specify a custom objective function (as well as gradients for that objective): https://xgboost.readthedocs.io/en/latest/tutorials/custom_metric_obj.html\r\n\r\nIt would be pretty cool if Sklearn supported that too\r\n\r\n#### Describe your proposed solution\r\nUse Xgboost / LightGBM instead of sklearn, but who wants to do that \ud83d\ude01 \r\n\r\n#### Describe alternatives you've considered, if relevant\r\nXgboost / LightGBM\r\n\r\n#### Additional context\r\nIf you have a problem-specific objective function, it can be really useful to boost directly on that function.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17654", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17654/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17654/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17654/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17654", "id": 642863032, "node_id": "MDU6SXNzdWU2NDI4NjMwMzI=", "number": 17654, "title": "Polynomial regression with big numbers changes the model", "user": {"login": "kilianshi", "id": 15977797, "node_id": "MDQ6VXNlcjE1OTc3Nzk3", "avatar_url": "https://avatars1.githubusercontent.com/u/15977797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kilianshi", "html_url": "https://github.com/kilianshi", "followers_url": "https://api.github.com/users/kilianshi/followers", "following_url": "https://api.github.com/users/kilianshi/following{/other_user}", "gists_url": "https://api.github.com/users/kilianshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kilianshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kilianshi/subscriptions", "organizations_url": "https://api.github.com/users/kilianshi/orgs", "repos_url": "https://api.github.com/users/kilianshi/repos", "events_url": "https://api.github.com/users/kilianshi/events{/privacy}", "received_events_url": "https://api.github.com/users/kilianshi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-22T08:23:30Z", "updated_at": "2020-06-23T09:23:45Z", "closed_at": "2020-06-22T14:29:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using `PolynomialFeatures` and `LinearRegression` to create a polynomial regression, the result is different if the predictors are too big or too small.\r\n\r\nThen this leads people to say that scaling is necessary (as we can read [here](https://www.robertoreif.com/blog/2017/12/16/importance-of-feature-scaling-in-data-modeling-part-1-h8nla)), whereas in theory, it should have no effect.\r\n\r\nI have this example for testing.\r\nFirst, I created a polynomial regression with the following code:\r\n\r\n```\r\nimport pandas as pd\r\n\r\nxdic={'X': {11: 300, 12: 170, 13: 288, 14: 360, 15: 319, 16: 330, 17: 520, 18: 345, 19: 399, 20: 479}}\r\nydic={'y': {11: 305000, 12: 270000, 13: 360000, 14: 370000, 15: 379000, 16: 405000, 17: 407500, 18: 450000, 19: 450000, 20: 485000}}\r\n\r\nX=pd.DataFrame.from_dict(xdic)\r\ny=pd.DataFrame.from_dict(ydic)\r\nimport numpy as np\r\nX_seq = np.linspace(X.min(),X.max(),300).reshape(-1,1)\r\n\r\nfrom sklearn.preprocessing import PolynomialFeatures\r\nfrom sklearn.pipeline import make_pipeline\r\nfrom sklearn.linear_model import LinearRegression\r\n\r\npoly = preprocessing.PolynomialFeatures(degree=60, include_bias=False)\r\n\r\ndegree=9\r\n\r\npolyreg=make_pipeline(PolynomialFeatures(degree),\r\n                      LinearRegression())\r\npolyreg.fit(X,y)\r\n\r\nimport matplotlib.pyplot as plt\r\n\r\nplt.figure()\r\nplt.scatter(X,y)\r\nplt.plot(X_seq,polyreg.predict(X_seq),color=\"black\")\r\nplt.show()\r\n```\r\nWe can see that the model doesn't fit the initial points very well, whereas it should since the degree is 9, and we only have 10 points.\r\n\r\n\r\nThen if the predictors are divided by 1000 for example\r\n\r\n```\r\nX=pd.DataFrame.from_dict(xdic)/1000\r\ny=pd.DataFrame.from_dict(ydic)/1000\r\n```\r\n\r\nWe then can see that the model is fitting well the training data, which is true according to the theory.\r\n\r\n\r\nAnd this issue doesn't exist with `polyfit` from `numpy`. So I am wondering if there is maybe a difference in terms of methodology, or it is just the handling of big or small numbers.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17621", "repository_url": "https://api.github.com/repos/scikit-learn/scikit-learn", "labels_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17621/labels{/name}", "comments_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17621/comments", "events_url": "https://api.github.com/repos/scikit-learn/scikit-learn/issues/17621/events", "html_url": "https://github.com/scikit-learn/scikit-learn/issues/17621", "id": 640556740, "node_id": "MDU6SXNzdWU2NDA1NTY3NDA=", "number": 17621, "title": "Error in Graphical Lasso implementation", "user": {"login": "amsinha9", "id": 40860467, "node_id": "MDQ6VXNlcjQwODYwNDY3", "avatar_url": "https://avatars3.githubusercontent.com/u/40860467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amsinha9", "html_url": "https://github.com/amsinha9", "followers_url": "https://api.github.com/users/amsinha9/followers", "following_url": "https://api.github.com/users/amsinha9/following{/other_user}", "gists_url": "https://api.github.com/users/amsinha9/gists{/gist_id}", "starred_url": "https://api.github.com/users/amsinha9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amsinha9/subscriptions", "organizations_url": "https://api.github.com/users/amsinha9/orgs", "repos_url": "https://api.github.com/users/amsinha9/repos", "events_url": "https://api.github.com/users/amsinha9/events{/privacy}", "received_events_url": "https://api.github.com/users/amsinha9/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1815436586, "node_id": "MDU6TGFiZWwxODE1NDM2NTg2", "url": "https://api.github.com/repos/scikit-learn/scikit-learn/labels/module:covariance", "name": "module:covariance", "color": "151e91", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-17T15:56:18Z", "updated_at": "2020-07-10T14:51:56Z", "closed_at": "2020-07-10T11:02:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nGraphical Lasso implementation in scikit-learn 0.23.1 seems off.\r\n\r\n\r\n#### Steps/Code to Reproduce\r\n``` python\r\nimport numpy as np\r\nfrom sklearn.covariance import GraphicalLasso\r\n\r\ntest = np.eye(3)\r\nglasso = GraphicalLasso(alpha=0.01, mode='cd', verbose=True).fit(test)\r\ngl_covmat = glasso.covariance_\r\ngl_precisionmat = glasso.precision_\r\n\r\ngl_covmat\r\n```\r\n\r\n#### Expected Results\r\nEstimated covariance matrix should be same as covariance of identity matrix\r\n\r\n#### Actual Results\r\nEstimated covariance matrix elements don't match covariance of identity matrix\r\n\r\nOutput:\r\n\r\n```\r\n[graphical_lasso] Iteration   0, cost  8.37e+00, dual gap 1.573e+00\r\n[graphical_lasso] Iteration   1, cost  7.86e+00, dual gap 1.602e-04\r\n[graphical_lasso] Iteration   2, cost  7.86e+00, dual gap -1.446e-04\r\n[graphical_lasso] Iteration   3, cost  7.86e+00, dual gap 1.442e-05\r\narray([[ 0.22222222, -0.10111191, -0.10111197],\r\n       [-0.10111191,  0.22222222, -0.10111111],\r\n       [-0.10111197, -0.10111111,  0.22222222]])\r\n```\r\n#### Versions\r\n\r\nPython dependencies:\r\n\r\nPython 3.6.5 : : Anaconda Inc\r\nNumPy 1.14.3\r\nScikit-Learn 0.23.1\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}]}