{"total_count": 20, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/48", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/48/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/48/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/48", "id": 619074183, "node_id": "MDU6SXNzdWU2MTkwNzQxODM=", "number": 48, "title": "AttributeError: 'NoneType' object has no attribute '_instantiate_plugins'", "user": {"login": "JoyVehmeijer", "id": 64010404, "node_id": "MDQ6VXNlcjY0MDEwNDA0", "avatar_url": "https://avatars2.githubusercontent.com/u/64010404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoyVehmeijer", "html_url": "https://github.com/JoyVehmeijer", "followers_url": "https://api.github.com/users/JoyVehmeijer/followers", "following_url": "https://api.github.com/users/JoyVehmeijer/following{/other_user}", "gists_url": "https://api.github.com/users/JoyVehmeijer/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoyVehmeijer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoyVehmeijer/subscriptions", "organizations_url": "https://api.github.com/users/JoyVehmeijer/orgs", "repos_url": "https://api.github.com/users/JoyVehmeijer/repos", "events_url": "https://api.github.com/users/JoyVehmeijer/events{/privacy}", "received_events_url": "https://api.github.com/users/JoyVehmeijer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-15T15:51:28Z", "updated_at": "2020-05-15T16:09:10Z", "closed_at": "2020-05-15T16:02:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to run a python file for a lecture, but I keep getting an error:\r\n\r\n```\r\nAirvanGruiker18:src3 gebruiker$ python list.py\r\nTraceback (most recent call last):\r\n  File \"list.py\", line 6, in <module>\r\n    engine = create_engine(os.getenv(\"DATABASE_URL\"))\r\n  File \"/Users/gebruiker/Library/Python/2.7/lib/python/site-packages/sqlalchemy/engine/__init__.py\", line 488, in create_engine\r\n    return strategy.create(*args, **kwargs)\r\n  File \"/Users/gebruiker/Library/Python/2.7/lib/python/site-packages/sqlalchemy/engine/strategies.py\", line 56, in create\r\n    plugins = u._instantiate_plugins(kwargs)\r\nAttributeError: 'NoneType' object has no attribute '_instantiate_plugins'\r\n```\r\n\r\nDoes anybody know what the problem is and how I can fix it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/37", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/37/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/37/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/37", "id": 508754133, "node_id": "MDU6SXNzdWU1MDg3NTQxMzM=", "number": 37, "title": "cannot import zope.sqlalchemy.ZopeTransactionExtension", "user": {"login": "hemna", "id": 672207, "node_id": "MDQ6VXNlcjY3MjIwNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/672207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hemna", "html_url": "https://github.com/hemna", "followers_url": "https://api.github.com/users/hemna/followers", "following_url": "https://api.github.com/users/hemna/following{/other_user}", "gists_url": "https://api.github.com/users/hemna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hemna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hemna/subscriptions", "organizations_url": "https://api.github.com/users/hemna/orgs", "repos_url": "https://api.github.com/users/hemna/repos", "events_url": "https://api.github.com/users/hemna/events{/privacy}", "received_events_url": "https://api.github.com/users/hemna/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-17T22:33:23Z", "updated_at": "2019-12-09T12:42:16Z", "closed_at": "2019-12-09T12:42:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Just upgraded zope.sqlalchemy from pip and it broke the world.\r\n\r\n```\r\n    from zope.sqlalchemy import ZopeTransactionExtension\r\nImportError: cannot import name 'ZopeTransactionExtension' from 'zope.sqlalchemy'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/36", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/36/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/36/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/36", "id": 508489449, "node_id": "MDU6SXNzdWU1MDg0ODk0NDk=", "number": 36, "title": "Use SemVer for packaging (eg. 1.2 should have been 2.0)", "user": {"login": "leplatrem", "id": 546692, "node_id": "MDQ6VXNlcjU0NjY5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/546692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leplatrem", "html_url": "https://github.com/leplatrem", "followers_url": "https://api.github.com/users/leplatrem/followers", "following_url": "https://api.github.com/users/leplatrem/following{/other_user}", "gists_url": "https://api.github.com/users/leplatrem/gists{/gist_id}", "starred_url": "https://api.github.com/users/leplatrem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leplatrem/subscriptions", "organizations_url": "https://api.github.com/users/leplatrem/orgs", "repos_url": "https://api.github.com/users/leplatrem/repos", "events_url": "https://api.github.com/users/leplatrem/events{/privacy}", "received_events_url": "https://api.github.com/users/leplatrem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 26572329, "node_id": "MDU6TGFiZWwyNjU3MjMyOQ==", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-10-17T13:49:36Z", "updated_at": "2019-12-09T12:43:35Z", "closed_at": "2019-12-09T12:43:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Version 1.2 was released with a number of breaking changes, breaking projects (eg. https://github.com/Kinto/kinto/pull/2296)\r\n\r\n(*Drop support for Python 3.4*, *renamed the ZopeTransactionExtension class to ZopeTransactionEvents*)\r\n\r\nWould you mind following SemVer for following releases please?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/31", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/31/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/31/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/31", "id": 384002266, "node_id": "MDU6SXNzdWUzODQwMDIyNjY=", "number": 31, "title": "zope.sqlalchemy is still using SessionExtension", "user": {"login": "zzzeek", "id": 128223, "node_id": "MDQ6VXNlcjEyODIyMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/128223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzzeek", "html_url": "https://github.com/zzzeek", "followers_url": "https://api.github.com/users/zzzeek/followers", "following_url": "https://api.github.com/users/zzzeek/following{/other_user}", "gists_url": "https://api.github.com/users/zzzeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzzeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzzeek/subscriptions", "organizations_url": "https://api.github.com/users/zzzeek/orgs", "repos_url": "https://api.github.com/users/zzzeek/repos", "events_url": "https://api.github.com/users/zzzeek/events{/privacy}", "received_events_url": "https://api.github.com/users/zzzeek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 26572326, "node_id": "MDU6TGFiZWwyNjU3MjMyNg==", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 1536220581, "node_id": "MDU6TGFiZWwxNTM2MjIwNTgx", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/help%20wanted", "name": "help wanted", "color": "c2e0c6", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ctheune", "id": 1220572, "node_id": "MDQ6VXNlcjEyMjA1NzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1220572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctheune", "html_url": "https://github.com/ctheune", "followers_url": "https://api.github.com/users/ctheune/followers", "following_url": "https://api.github.com/users/ctheune/following{/other_user}", "gists_url": "https://api.github.com/users/ctheune/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctheune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctheune/subscriptions", "organizations_url": "https://api.github.com/users/ctheune/orgs", "repos_url": "https://api.github.com/users/ctheune/repos", "events_url": "https://api.github.com/users/ctheune/events{/privacy}", "received_events_url": "https://api.github.com/users/ctheune/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ctheune", "id": 1220572, "node_id": "MDQ6VXNlcjEyMjA1NzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1220572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctheune", "html_url": "https://github.com/ctheune", "followers_url": "https://api.github.com/users/ctheune/followers", "following_url": "https://api.github.com/users/ctheune/following{/other_user}", "gists_url": "https://api.github.com/users/ctheune/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctheune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctheune/subscriptions", "organizations_url": "https://api.github.com/users/ctheune/orgs", "repos_url": "https://api.github.com/users/ctheune/repos", "events_url": "https://api.github.com/users/ctheune/events{/privacy}", "received_events_url": "https://api.github.com/users/ctheune/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-24T16:24:07Z", "updated_at": "2019-10-16T06:49:44Z", "closed_at": "2019-10-16T06:49:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi there -\r\n\r\nFigured I'd take a look at this to see what the story is.   So, part of the blame is on me since apparently I haven't had SessionExtension / MapperExtension / etc. emit deprecation warnings, I'm going to see if I can get that in for 1.3.  However the Extension classes have been [documented as deprecated since 2012](https://github.com/zzzeek/sqlalchemy/commit/924819da79c).   \r\n\r\nIt looks like, and I think I probably helped with this, that you have built up the [register](https://github.com/zopefoundation/zope.sqlalchemy/blob/master/src/zope/sqlalchemy/datamanager.py#L258) system that uses the (not really new anymore) event API.   So, that has to be where this goes, because `SessionExtension` as well as the `extension` parameter on `Session` will go away in a future relase, (I don't want to say what release, but there is a rumor that it may not include the digit \"1\" inside of it).\r\n\r\nSo I think the methods of `ZopeTransactionExtension` need to be separated off of `SessionExtension` so you can still use them in `register`, then the actual `ZopeTransactionExtension` can be isolated from it.    Then you will want to update your README to document the `register()` version of things as how people should be doing it (which has been for six years now :) ).   Again I hope to get some deprecation warnings in 1.3 to help this all along.     \r\n\r\nBlame is on me for not emitting deprecation warnings for the `extension` parameter as well as use of `SessionExtension` etc., I'm going to add that to my list of todos.    ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/28", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/28/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/28/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/28", "id": 327674470, "node_id": "MDU6SXNzdWUzMjc2NzQ0NzA=", "number": 28, "title": "ECCN for zope.sqlalchemy", "user": {"login": "kkabhi", "id": 36743642, "node_id": "MDQ6VXNlcjM2NzQzNjQy", "avatar_url": "https://avatars1.githubusercontent.com/u/36743642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkabhi", "html_url": "https://github.com/kkabhi", "followers_url": "https://api.github.com/users/kkabhi/followers", "following_url": "https://api.github.com/users/kkabhi/following{/other_user}", "gists_url": "https://api.github.com/users/kkabhi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkabhi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkabhi/subscriptions", "organizations_url": "https://api.github.com/users/kkabhi/orgs", "repos_url": "https://api.github.com/users/kkabhi/repos", "events_url": "https://api.github.com/users/kkabhi/events{/privacy}", "received_events_url": "https://api.github.com/users/kkabhi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-30T10:43:20Z", "updated_at": "2018-05-30T14:38:46Z", "closed_at": "2018-05-30T14:38:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nIf you do not have your software classified with an ECCN, please kindly answer the following questions so that we may self-assess if there may be any prohibition or restriction for export or re-export of this product.\r\n\uf076\tDoes the Software perform any encryption or utilize any encryption processes?  Y/N\r\nI.\tIf the answer is YES to question (i), please indicate if the encryption is coded into the application or separately called (such as using SSL)\r\nII.\tIf the answer is YES to question (i), please indicate what function(s) the cryptography/encryption serves\r\nA.\tCopyright protection purposes (Includes using a license key/code)\r\nB.\tUser authentication purposes\r\nC.\tA core part of the functionality such as to encrypt databases\r\nD.\tTo encrypt communications between the software and a host system.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/27", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/27/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/27/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/27", "id": 319974315, "node_id": "MDU6SXNzdWUzMTk5NzQzMTU=", "number": 27, "title": "Link to Zope Transactions Outdated", "user": {"login": "lucas993", "id": 15216785, "node_id": "MDQ6VXNlcjE1MjE2Nzg1", "avatar_url": "https://avatars3.githubusercontent.com/u/15216785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucas993", "html_url": "https://github.com/lucas993", "followers_url": "https://api.github.com/users/lucas993/followers", "following_url": "https://api.github.com/users/lucas993/following{/other_user}", "gists_url": "https://api.github.com/users/lucas993/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucas993/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucas993/subscriptions", "organizations_url": "https://api.github.com/users/lucas993/orgs", "repos_url": "https://api.github.com/users/lucas993/repos", "events_url": "https://api.github.com/users/lucas993/events{/privacy}", "received_events_url": "https://api.github.com/users/lucas993/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-03T15:38:40Z", "updated_at": "2018-09-21T05:57:46Z", "closed_at": "2018-09-21T05:57:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "`src/zope/sqlalchemy/README.rst` should link to `http://www.zodb.org/en/latest/#transactions` rather than `http://www.zodb.org/zodbbook/transactions.html`\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/21", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/21/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/21/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/21", "id": 216016657, "node_id": "MDU6SXNzdWUyMTYwMTY2NTc=", "number": 21, "title": "Support newer Python 3 versions.", "user": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 26572326, "node_id": "MDU6TGFiZWwyNjU3MjMyNg==", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-03-22T10:32:59Z", "updated_at": "2017-05-15T11:31:52Z", "closed_at": "2017-05-15T11:31:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently only 3.3 is officially supported and tested.\r\n\r\nAfter #19 is merged new versions can be added.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/20", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/20/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/20/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/20", "id": 216016183, "node_id": "MDU6SXNzdWUyMTYwMTYxODM=", "number": 20, "title": "Support transaction >= 1.5", "user": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 26572326, "node_id": "MDU6TGFiZWwyNjU3MjMyNg==", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-22T10:31:15Z", "updated_at": "2018-01-26T12:14:07Z", "closed_at": "2018-01-26T12:14:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Newer versions fail with some errors, see #17", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/18", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/18/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/18/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/18", "id": 211407057, "node_id": "MDU6SXNzdWUyMTE0MDcwNTc=", "number": 18, "title": "'SessionTransaction' object has no attribute '_iterate_parents'", "user": {"login": "SysAd-WI", "id": 7627655, "node_id": "MDQ6VXNlcjc2Mjc2NTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/7627655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SysAd-WI", "html_url": "https://github.com/SysAd-WI", "followers_url": "https://api.github.com/users/SysAd-WI/followers", "following_url": "https://api.github.com/users/SysAd-WI/following{/other_user}", "gists_url": "https://api.github.com/users/SysAd-WI/gists{/gist_id}", "starred_url": "https://api.github.com/users/SysAd-WI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SysAd-WI/subscriptions", "organizations_url": "https://api.github.com/users/SysAd-WI/orgs", "repos_url": "https://api.github.com/users/SysAd-WI/repos", "events_url": "https://api.github.com/users/SysAd-WI/events{/privacy}", "received_events_url": "https://api.github.com/users/SysAd-WI/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 26572324, "node_id": "MDU6TGFiZWwyNjU3MjMyNA==", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-02T14:29:52Z", "updated_at": "2017-03-02T16:16:59Z", "closed_at": "2017-03-02T16:16:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting following error. Already upgraded zope.sqlalchemy...\r\n```\r\n2017-03-02 15:18:30,463  ERROR    1e5d84d7146d44d7  indico.wsgi               'SessionTransaction' object has no attribute '_iterate_parents'\r\nTraceback (most recent call last):\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/flask/app.py\", line 1639, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/flask/app.py\", line 1625, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/indico-1.9.9-py2.7.egg/indico/web/assets/blueprint.py\", line 47, in js_vars_global\r\n    data = generate_global_file(config)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/indico-1.9.9-py2.7.egg/indico/web/assets/vars_js.py\", line 33, in generate_global_file\r\n    locations = Location.find_all() if config.getIsRoomBookingActive() else []\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/indico-1.9.9-py2.7.egg/indico/core/db/sqlalchemy/util/models.py\", line 99, in find_all\r\n    return cls.find(*args, **kwargs).all()\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2679, in all\r\n    return list(self)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2831, in __iter__\r\n    return self._execute_and_instances(context)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2852, in _execute_and_instances\r\n    close_with_result=True)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2861, in _get_bind_args\r\n    **kw\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2843, in _connection_from_session\r\n    conn = self.session.connection(**kw)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 966, in connection\r\n    execution_options=execution_options)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 971, in _connection_for_bind\r\n    engine, execution_options)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 417, in _connection_for_bind\r\n    self.session.dispatch.after_begin(self.session, self, conn)\r\n  File \"/var/www/indicoenv/lib/python2.7/site-packages/sqlalchemy/event/attr.py\", line 256, in __call__\r\n    fn(*args, **kw)\r\n  File \"/usr/lib/python2.7/site-packages/zope/sqlalchemy/datamanager.py\", line 231, in after_begin\r\n    join_transaction(session, self.initial_state, self.transaction_manager, self.keep_session)\r\n  File \"/usr/lib/python2.7/site-packages/zope/sqlalchemy/datamanager.py\", line 205, in join_transaction\r\n    DataManager(session, initial_state, transaction_manager, keep_session=keep_session)\r\n  File \"/usr/lib/python2.7/site-packages/zope/sqlalchemy/datamanager.py\", line 65, in __init__\r\n    self.tx = session.transaction._iterate_parents()[-1]\r\nAttributeError: 'SessionTransaction' object has no attribute '_iterate_parents'\r\n```\r\n\r\nAny suggestions or workaround here?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/17", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/17/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/17/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/17", "id": 198465778, "node_id": "MDU6SXNzdWUxOTg0NjU3Nzg=", "number": 17, "title": "Tests fail with AssertionError: Not joined transaction", "user": {"login": "mgedmin", "id": 159967, "node_id": "MDQ6VXNlcjE1OTk2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/159967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgedmin", "html_url": "https://github.com/mgedmin", "followers_url": "https://api.github.com/users/mgedmin/followers", "following_url": "https://api.github.com/users/mgedmin/following{/other_user}", "gists_url": "https://api.github.com/users/mgedmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgedmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgedmin/subscriptions", "organizations_url": "https://api.github.com/users/mgedmin/orgs", "repos_url": "https://api.github.com/users/mgedmin/repos", "events_url": "https://api.github.com/users/mgedmin/events{/privacy}", "received_events_url": "https://api.github.com/users/mgedmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 26572325, "node_id": "MDU6TGFiZWwyNjU3MjMyNQ==", "url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-01-03T12:35:19Z", "updated_at": "2017-03-22T10:31:49Z", "closed_at": "2017-03-22T10:31:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://travis-ci.org/zopefoundation/zope.sqlalchemy/builds/139672322:\r\n\r\n```\r\nFailure in test testTransactionJoining (zope.sqlalchemy.tests.ZopeSQLAlchemyTests)\r\nTraceback (most recent call last):\r\n  File \"/opt/python/3.3.6/lib/python3.3/unittest/case.py\", line 384, in _executeTestPart\r\n    function()\r\n  File \"/home/travis/build/zopefoundation/zope.sqlalchemy/src/zope/sqlalchemy/tests.py\", line 344, in testTransactionJoining\r\n    \"Not joined transaction\")\r\n  File \"/opt/python/3.3.6/lib/python3.3/unittest/case.py\", line 520, in assertTrue\r\n    raise self.failureException(msg)\r\nAssertionError: [] is not true : Not joined transaction\r\n```\r\n\r\n(and a few other test failures with the same assertion error)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/15", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/15/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/15/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/15", "id": 148945816, "node_id": "MDU6SXNzdWUxNDg5NDU4MTY=", "number": 15, "title": "Issue with upcoming release of SQLAlchemy 1.1", "user": {"login": "Cito", "id": 464599, "node_id": "MDQ6VXNlcjQ2NDU5OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/464599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cito", "html_url": "https://github.com/Cito", "followers_url": "https://api.github.com/users/Cito/followers", "following_url": "https://api.github.com/users/Cito/following{/other_user}", "gists_url": "https://api.github.com/users/Cito/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cito/subscriptions", "organizations_url": "https://api.github.com/users/Cito/orgs", "repos_url": "https://api.github.com/users/Cito/repos", "events_url": "https://api.github.com/users/Cito/events{/privacy}", "received_events_url": "https://api.github.com/users/Cito/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-04-17T12:09:25Z", "updated_at": "2016-06-23T05:12:09Z", "closed_at": "2016-06-23T05:12:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Zope.sqlalchemy is calling `session.transaction._iterate_parents()` in [datamanger.py](https://github.com/zopefoundation/zope.sqlalchemy/blob/88fc88370a909822c14860a86ce7ad6b87109fc4/src/zope/sqlalchemy/datamanager.py#L65). Unfortunately, this method has been renamed to `_iterate_self_and_parents()` in SQLAlchemy 1.1 ([see here](https://github.com/zzzeek/sqlalchemy/commit/0a29071b16e1844b5e1d71aead0e8a1ae83b48d0)).\n\nSo this should be fixed somehow or things will break when SQLAlchemy 1.1 will be release (soon).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/14", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/14/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/14/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/14", "id": 108173650, "node_id": "MDU6SXNzdWUxMDgxNzM2NTA=", "number": 14, "title": "No session.rollback() when transaction.abort() is called.", "user": {"login": "groner", "id": 47317, "node_id": "MDQ6VXNlcjQ3MzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/47317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/groner", "html_url": "https://github.com/groner", "followers_url": "https://api.github.com/users/groner/followers", "following_url": "https://api.github.com/users/groner/following{/other_user}", "gists_url": "https://api.github.com/users/groner/gists{/gist_id}", "starred_url": "https://api.github.com/users/groner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/groner/subscriptions", "organizations_url": "https://api.github.com/users/groner/orgs", "repos_url": "https://api.github.com/users/groner/repos", "events_url": "https://api.github.com/users/groner/events{/privacy}", "received_events_url": "https://api.github.com/users/groner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-09-24T17:12:41Z", "updated_at": "2015-09-24T20:43:19Z", "closed_at": "2015-09-24T20:43:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "When the default setting of `keep_session=False` is used this isn't an issue, because the connection pool will reset the connection before it is used again.  It seems like the session would need to be rolled back when `keep_session=True` is used.\n\nI see that the two phase data manager issues a rollback in `tpc_abort()`.\n\nIs this (`keep_session=True, twophase=True`) just a configuration that nobody uses (perhaps for some reason I've overlooked)?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/13", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/13/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/13/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/13", "id": 51270058, "node_id": "MDU6SXNzdWU1MTI3MDA1OA==", "number": 13, "title": "Newbie-friendly README clarifications", "user": {"login": "miohtama", "id": 49922, "node_id": "MDQ6VXNlcjQ5OTIy", "avatar_url": "https://avatars1.githubusercontent.com/u/49922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miohtama", "html_url": "https://github.com/miohtama", "followers_url": "https://api.github.com/users/miohtama/followers", "following_url": "https://api.github.com/users/miohtama/following{/other_user}", "gists_url": "https://api.github.com/users/miohtama/gists{/gist_id}", "starred_url": "https://api.github.com/users/miohtama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miohtama/subscriptions", "organizations_url": "https://api.github.com/users/miohtama/orgs", "repos_url": "https://api.github.com/users/miohtama/repos", "events_url": "https://api.github.com/users/miohtama/events{/privacy}", "received_events_url": "https://api.github.com/users/miohtama/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-12-08T08:50:39Z", "updated_at": "2015-09-24T20:45:12Z", "closed_at": "2015-09-24T20:45:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Motivation: Currently `zope.sqlalchemy` is included in Pyramid scaffold if you generate a new SQLAlchemy-based project.\n\nThe current README is written from Zope/SQLAlchemy experts to Zope/SQLAlchemy experts, referring to the history of Zope, SQLAlchemy and various web frameworks. I appreciate the fact that the authors make it upfront clear in README that you need all this information in order to understand the README.\n\nHowever, most of web developers are not privileged to know the decade of history of various Python-based transaction management solutions. `zope.sqlalchemy` is obviously solving some problem for them, because it is included in the default scaffolds, but it still leaves a lot of questions open and this might result building misbehaving applications due to misunderstanding how transaction management works. Also if one is writing an application based on plain SQLAlchemy, there should a pitch what `zope.sqlalchemy` could do for them. \n\nSo I hope if the authors could clarify the points below and I could update the README on this input, so that the new developers can get aboard faster.\n\n1) What is a transaction manager\n\n2) Why web applications need transactions (ok, this part I can do myself)\n\n3) How Zope transaction manager is related to SQLAlchemy transactions, and thus underlying database transactions? What is two-phase commit? Is it different from a databse commit?\n\n4) When to use Zope transaction manager and why? \n\n5) When not to use Zope transaction manager and e.g. use plain SQLAlchemy sessions\n\n6) What database considerations there are (PostgreSQL, SQLite)\n\n7) What are retries and how to use them \n\nThanks for a great package!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/11", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/11/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/11/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/11", "id": 38525422, "node_id": "MDU6SXNzdWUzODUyNTQyMg==", "number": 11, "title": "AttributeError: 'NoneType' object has no attribute '_iterate_parents'", "user": {"login": "mindbrave", "id": 3480685, "node_id": "MDQ6VXNlcjM0ODA2ODU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3480685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mindbrave", "html_url": "https://github.com/mindbrave", "followers_url": "https://api.github.com/users/mindbrave/followers", "following_url": "https://api.github.com/users/mindbrave/following{/other_user}", "gists_url": "https://api.github.com/users/mindbrave/gists{/gist_id}", "starred_url": "https://api.github.com/users/mindbrave/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mindbrave/subscriptions", "organizations_url": "https://api.github.com/users/mindbrave/orgs", "repos_url": "https://api.github.com/users/mindbrave/repos", "events_url": "https://api.github.com/users/mindbrave/events{/privacy}", "received_events_url": "https://api.github.com/users/mindbrave/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-07-23T12:47:41Z", "updated_at": "2017-01-16T14:26:28Z", "closed_at": "2014-07-31T23:25:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get this error rarely, but it happens. I have no idea how to debug it.\n\n```\ndatabaselayer/blog.py\", line 449, in set_notifications_as_read\n).limit(limit).update({'is_read': True})\nlocal/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2735, in update\nupdate_op.exec_()\nlocal/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py\", line 868, in exec_\nself._do_post()\nlocal/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py\", line 968, in _do_post\nsession.dispatch.after_bulk_update(self)\nlocal/lib/python2.7/site-packages/sqlalchemy/event/attr.py\", line 257, in __call__\nfn(*args, **kw)\nlocal/lib/python2.7/site-packages/sqlalchemy/event/legacy.py\", line 36, in wrap_leg\nreturn fn(*conv(*args))\nlocal/lib/python2.7/site-packages/zope.sqlalchemy-0.7.4-py2.7.egg/zope/sqlalchemy/datamanager.py\", line 237, in after_bulk_update\nmark_changed(session, self.transaction_manager, self.keep_session)\nlocal/lib/python2.7/site-packages/zope.sqlalchemy-0.7.4-py2.7.egg/zope/sqlalchemy/datamanager.py\", line 210, in mark_changed\njoin_transaction(session, STATUS_CHANGED, transaction_manager, keep_session)\nlocal/lib/python2.7/site-packages/zope.sqlalchemy-0.7.4-py2.7.egg/zope/sqlalchemy/datamanager.py\", line 202, in join_transaction\nDataManager(session, initial_state, transaction_manager, keep_session=keep_session)\nlocal/lib/python2.7/site-packages/zope.sqlalch\nlocal/lib/python2.7/site-packages/zope.sqlalchemy-0.7.4-   py2.7.egg/zope/sqlalchemy/datamanager.py\", line 65, in __init__\nself.tx = session.transaction._iterate_parents()[-1]\nAttributeError: 'NoneType' object has no attribute '_iterate_parents'\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/10", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/10/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/10/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/10", "id": 38296059, "node_id": "MDU6SXNzdWUzODI5NjA1OQ==", "number": 10, "title": "All mapped objects are expired on commit", "user": {"login": "dwt", "id": 57199, "node_id": "MDQ6VXNlcjU3MTk5", "avatar_url": "https://avatars1.githubusercontent.com/u/57199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwt", "html_url": "https://github.com/dwt", "followers_url": "https://api.github.com/users/dwt/followers", "following_url": "https://api.github.com/users/dwt/following{/other_user}", "gists_url": "https://api.github.com/users/dwt/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwt/subscriptions", "organizations_url": "https://api.github.com/users/dwt/orgs", "repos_url": "https://api.github.com/users/dwt/repos", "events_url": "https://api.github.com/users/dwt/events{/privacy}", "received_events_url": "https://api.github.com/users/dwt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-07-21T11:51:30Z", "updated_at": "2014-10-16T13:51:40Z", "closed_at": "2014-07-31T23:25:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just had a very stressfull weekend because an update to zope.sqlalchemy slipped our quality control and horribly broke our production application.\n\nTurns out the reason was that #8 introduced a new 'feature' that seems like it's very wrong.\n\nHere's a testcase:\n\n``` python\nfrom sqlalchemy.engine import engine_from_config\nfrom sqlalchemy.orm import scoped_session\nfrom zope.sqlalchemy import ZopeTransactionExtension\nfrom sqlalchemy.orm.session import sessionmaker\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.schema import Column\nfrom sqlalchemy import ForeignKey, Integer, String\nfrom sqlalchemy.orm import relationship, backref\nimport transaction\n\nimport sys\n\ndemonstrate_error_with_zope_sqlalchemy = len(sys.argv) == 1 and sys.argv[1] == '--demonstrate-error'\n\nsettings = {\n    # works also on postgresql (and probably any other db server)\n    #'sqlalchemy.url': \"postgresql://user:pass@localhost/db-dev\",\n    'sqlalchemy.url': \"sqlite:///:memory:\",\n    'sqlalchemy.echo': True}\n\nif demonstrate_error_with_zope_sqlalchemy:\n    DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))\nelse:\n    DBSession = scoped_session(sessionmaker())\n\nBase = declarative_base()\n\n\nclass Tree(Base):\n    __tablename__ = \"tree\"\n    id = Column(Integer, primary_key=True)\n    parent_id = Column(Integer, ForeignKey(id))\n    children = relationship('Tree', backref=backref('parent', remote_side=[id]))\n\n# setup sqlalchemy\nengine = engine_from_config(settings)\nBase.metadata.create_all(engine)\nDBSession.configure(bind=engine)\nBase.metadata.bind = engine\n\n# create one record in our test table\nsession = DBSession()\nroot = Tree(children=[Tree(), Tree()])\nsession.add(root)\nsession.flush()\nif demonstrate_error_with_zope_sqlalchemy:\n    transaction.commit()\nelse:\n    session.commit()\n\n# now access the children\nprint root.children[0]\n```\n\nIf you call this script with --demonstrate-error, it will throw on the last line a\n`sqlalchemy.orm.exc.DetachedInstanceError: Parent instance <Tree at 0x10430e7d0> is not bound to a Session; lazy load operation of attribute 'children' cannot proceed`\n\nThe problem, as far as I understand it for now, is that I transaction.commit() behaves differently than session.commit() does.\n\nNow maybe there is a rationale behind this why it should behave differently, but then I don't get it. Why should I not be able to use the object I have already loaded to change / get something from it again after the first commit? Maybe read some data out from it to display it on the website that is displayed after the successful commit?\n\nIf there is no overarching reason for this, then the fix for #8 is probably not the right fix and a new one needs to be found. (Sorry, I'm not so deep in sqlalchemy that I know what that would be).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/8", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/8/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/8/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/8", "id": 35938195, "node_id": "MDU6SXNzdWUzNTkzODE5NQ==", "number": 8, "title": "ZopeTransactionExtension breaks sqlalchemy's .merge() when no changes are made", "user": {"login": "yundatm", "id": 7917457, "node_id": "MDQ6VXNlcjc5MTc0NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7917457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yundatm", "html_url": "https://github.com/yundatm", "followers_url": "https://api.github.com/users/yundatm/followers", "following_url": "https://api.github.com/users/yundatm/following{/other_user}", "gists_url": "https://api.github.com/users/yundatm/gists{/gist_id}", "starred_url": "https://api.github.com/users/yundatm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yundatm/subscriptions", "organizations_url": "https://api.github.com/users/yundatm/orgs", "repos_url": "https://api.github.com/users/yundatm/repos", "events_url": "https://api.github.com/users/yundatm/events{/privacy}", "received_events_url": "https://api.github.com/users/yundatm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-06-17T22:27:34Z", "updated_at": "2014-07-21T11:51:30Z", "closed_at": "2014-06-18T00:52:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\nI found a very disturbing problem in multi-threaded application. What happens:\n1. Threads 1 and 2 both read record A.\n2. Thread 1 updates record A and commits\n3. Thread 2 calls session.merge() - to read an updated version of record A\n4. BUT! when transaction.commit() is called in Thread 2, record A is updated back to the previous state, essentially reverting all changes made by Thread 1.\n\nThis doesn't happen when not using ZopeTransactionExtension (i.e. using only SQLAlchemy and it's session.commit()). Also using ZopeTransactionExtension('changed') fixes the problem.\nSample code below demonstrates the problem (see comments in function thread_2). Only dependencies are sqlalchemy and zope.sqlalchemy, it uses in-memory slqite.\nThe problem was observed on SQLAlchemy 8.1 and also the latest 9.4 (haven't tested any other versions), Zope version 0.7.2 and latest 0.7.4.\nSQLite is used in the example, but the same problem happens on postgresql, too.\n\n``` python\nimport transaction\nfrom time import sleep\nfrom sqlalchemy.engine import engine_from_config\nfrom sqlalchemy.orm.scoping import scoped_session\nfrom zope.sqlalchemy.datamanager import ZopeTransactionExtension\nfrom sqlalchemy.orm.session import sessionmaker\nfrom sqlalchemy.ext.declarative.api import declarative_base\nfrom threading import Thread\nfrom sqlalchemy.schema import Column, Sequence\nfrom sqlalchemy.types import Integer, String\n\n\nsettings = {\n    # works also on postgresql (and probably any other db server)\n    #'sqlalchemy.url': \"postgresql://user:pass@localhost/db-dev\",\n    'sqlalchemy.url': \"sqlite:///memory:\",\n    'sqlalchemy.echo': True}\n\nDBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))\n# using the below definition fixes the problem (with some side-effects though)\n#DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension('changed')))\nBase = declarative_base()\n\n\nclass TestTable(Base):\n    __tablename__ = \"test_table\"\n    test_id = Column(Integer, Sequence('test_table_id_seq'), primary_key=True)\n    value = Column(String)\n    unrelated = Column(String)\n\n\ndef thread_1(test_id):\n    dbs = DBSession()\n    o = dbs.query(TestTable).get(test_id)\n    sleep(0.5)  # update after 0.5s -> enough time for the second thread to read from database\n    o.value = '123'\n    transaction.commit()\n\n\ndef thread_2(test_id):\n    dbs = DBSession()\n    o = dbs.query(TestTable).get(test_id)\n    sleep(1)  # by this time thread 1 should be finished and changes committed in the db\n\n    # if anything (unrelated) gets updated, the problem doesn't happen\n    # try uncommenting the below line and see the different output\n    #o.unrelated = '456'\n    transaction.commit()\n    dbs = DBSession()\n    o = dbs.merge(o)\n    print \"order num after merge \" + o.value  # this should print \"123\", but prints \"initial\" <- that's wrong!\n    transaction.commit()  # and then it updates value \"123\" back to \"initial\" (!!!)\n\n\nif __name__ == '__main__':\n    # setup sqlalchemy\n    engine = engine_from_config(settings)\n    Base.metadata.create_all(engine)\n    DBSession.configure(bind=engine)\n    Base.metadata.bind = engine\n\n    # create one record in our test table\n    dbs = DBSession()\n    rec = TestTable(value='initial', unrelated='initial')\n    dbs.add(rec)\n    dbs.flush()\n    test_id = rec.test_id\n    transaction.commit()\n\n    # now run two threads parallelly\n    t1 = Thread(target=thread_1, args=(test_id,))\n    t2 = Thread(target=thread_2, args=(test_id,))\n    t1.start()\n    t2.start()\n\n    # wait for both of them to finish\n    t1.join()\n    t2.join()\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/7", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/7/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/7/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/7", "id": 25407868, "node_id": "MDU6SXNzdWUyNTQwNzg2OA==", "number": 7, "title": "problems with nested sqlalchemy transactions", "user": {"login": "tisdall", "id": 4029388, "node_id": "MDQ6VXNlcjQwMjkzODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/4029388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tisdall", "html_url": "https://github.com/tisdall", "followers_url": "https://api.github.com/users/tisdall/followers", "following_url": "https://api.github.com/users/tisdall/following{/other_user}", "gists_url": "https://api.github.com/users/tisdall/gists{/gist_id}", "starred_url": "https://api.github.com/users/tisdall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tisdall/subscriptions", "organizations_url": "https://api.github.com/users/tisdall/orgs", "repos_url": "https://api.github.com/users/tisdall/repos", "events_url": "https://api.github.com/users/tisdall/events{/privacy}", "received_events_url": "https://api.github.com/users/tisdall/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-01-10T17:04:30Z", "updated_at": "2014-01-15T19:39:03Z", "closed_at": "2014-01-15T19:39:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know a release was just made a few days ago to deal with issues of nested sqlalchemy transactions, but I think there are still a few cases that need to be addressed (though I'm not sure if they should be done here or in sqlalchemy).\n\nOne issue is with creating the save point through the transaction manager instead of with sqlalchemy's `begin_nested()` function.  I'm not really familiar with how the two differ except for this particular issue:\n\nIf I use `transaction.savepoint()` and then any subsequent sqlalchemy DB calls which result in an `IntegrityError` cause an immediate `ROLLBACK` without referring to the savepoint.  If I use the `session.begin_nested` instead, sqlalchemy recognizes it's in the middle of a sub-transaction and rolls back to the appropriate savepoint.\n\nThe most recent release now makes it so after a `session.begin_nested()` you can actually call `session.commit()` (I think, I haven't tested it yet), but there still exists an issue when using `transaction.savepoint`.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/5", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/5/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/5/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/5", "id": 24952411, "node_id": "MDU6SXNzdWUyNDk1MjQxMQ==", "number": 5, "title": "Configurable life time of session bug", "user": {"login": "fangpenlin", "id": 201615, "node_id": "MDQ6VXNlcjIwMTYxNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/201615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fangpenlin", "html_url": "https://github.com/fangpenlin", "followers_url": "https://api.github.com/users/fangpenlin/followers", "following_url": "https://api.github.com/users/fangpenlin/following{/other_user}", "gists_url": "https://api.github.com/users/fangpenlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/fangpenlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fangpenlin/subscriptions", "organizations_url": "https://api.github.com/users/fangpenlin/orgs", "repos_url": "https://api.github.com/users/fangpenlin/repos", "events_url": "https://api.github.com/users/fangpenlin/events{/privacy}", "received_events_url": "https://api.github.com/users/fangpenlin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-01-02T05:56:18Z", "updated_at": "2014-01-02T08:01:17Z", "closed_at": "2014-01-02T08:01:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A simple script to reproduce\n\n``` python\nimport transaction\nfrom sqlalchemy import create_engine\nfrom sqlalchemy import Column\nfrom sqlalchemy import Integer\nfrom sqlalchemy import String\nfrom sqlalchemy.orm import scoped_session\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom zope.sqlalchemy import ZopeTransactionExtension\n\nengine = create_engine('sqlite:///')\n\nsession = scoped_session(sessionmaker(\n    autocommit=False,\n    autoflush=False,\n    bind=engine,\n    extension=ZopeTransactionExtension(keep_session=True)\n))\n\nBase = declarative_base()\n\n\nclass Foobar(Base):\n    __tablename__ = 'foobar'\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n\nBase.metadata.bind = engine\nBase.metadata.create_all()\n\n\nwith transaction.manager:\n    foobar = Foobar(id=1, name='john')\n    session.add(foobar)\n\nfoobar = session.query(Foobar).get(1)\n\nwith transaction.manager:\n    foobar.name = 'jackson'\n    session.flush()\n\n# boom! sqlalchemy.orm.exc.DetachedInstanceError will be raised\nprint foobar.name\n\n```\n\nAfter looking into the code, this is caused by `join_transaction` in `mark_changed` method doesn't take `keep_session` and pass along properly.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/3", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/3/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/3/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/3", "id": 19695990, "node_id": "MDU6SXNzdWUxOTY5NTk5MA==", "number": 3, "title": "Request a release", "user": {"login": "tdesvenain", "id": 342007, "node_id": "MDQ6VXNlcjM0MjAwNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/342007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdesvenain", "html_url": "https://github.com/tdesvenain", "followers_url": "https://api.github.com/users/tdesvenain/followers", "following_url": "https://api.github.com/users/tdesvenain/following{/other_user}", "gists_url": "https://api.github.com/users/tdesvenain/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdesvenain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdesvenain/subscriptions", "organizations_url": "https://api.github.com/users/tdesvenain/orgs", "repos_url": "https://api.github.com/users/tdesvenain/repos", "events_url": "https://api.github.com/users/tdesvenain/events{/privacy}", "received_events_url": "https://api.github.com/users/tdesvenain/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-09-18T16:34:04Z", "updated_at": "2013-09-26T07:27:16Z", "closed_at": "2013-09-25T20:57:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, can we have a 0.7.3 release please. Last change is very important.\nThanks\n\nThomas\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/2", "repository_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy", "labels_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/2/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.sqlalchemy/issues/2/events", "html_url": "https://github.com/zopefoundation/zope.sqlalchemy/issues/2", "id": 18559090, "node_id": "MDU6SXNzdWUxODU1OTA5MA==", "number": 2, "title": "A failed join leaves zope.sqlalchemy in an inconsistent state", "user": {"login": "hgarus", "id": 4396799, "node_id": "MDQ6VXNlcjQzOTY3OTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4396799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hgarus", "html_url": "https://github.com/hgarus", "followers_url": "https://api.github.com/users/hgarus/followers", "following_url": "https://api.github.com/users/hgarus/following{/other_user}", "gists_url": "https://api.github.com/users/hgarus/gists{/gist_id}", "starred_url": "https://api.github.com/users/hgarus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hgarus/subscriptions", "organizations_url": "https://api.github.com/users/hgarus/orgs", "repos_url": "https://api.github.com/users/hgarus/repos", "events_url": "https://api.github.com/users/hgarus/events{/privacy}", "received_events_url": "https://api.github.com/users/hgarus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-08-26T16:30:53Z", "updated_at": "2013-08-30T11:14:11Z", "closed_at": "2013-08-30T02:17:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am not entirely sure if this is a bug, but the current behavior could at least be considered suboptimal:\n\nWhen the `ZopeTransactionExtension` triggers a `join`, while the state of the zope transaction is `COMMITFAILED` a `TransactionFailedError` will be raised and the `_SESSION_STATE` entry of the sqlalchemy session will be left behind. \n\nIf the sqlalchemy session is reused in the future (ie because it is threadscoped) it won't be joined to the zope transaction at all, since it already has a corresponding entry in `_SESSION_STATE`. This causes the sqlalchemy transaction to remain open, which can lead to a database transaction being \"wedged\" until it is closed due to a database timeout or a restart of the zope instance.\n\nI am not sure if a join should even be attempted if the transaction is in `COMMITFAILED`. Doing operations on the sqlalchemy session while the zope transaction is in this state could probably be considerer a bug on the user's side. But I believe this should be addressed in some way.\n", "performed_via_github_app": null, "score": 1.0}]}