{"total_count": 632, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/pallets/jinja/issues/1280", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1280/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1280/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1280/events", "html_url": "https://github.com/pallets/jinja/issues/1280", "id": 679217774, "node_id": "MDU6SXNzdWU2NzkyMTc3NzQ=", "number": 1280, "title": "HTML comments are processed by Jinja", "user": {"login": "Jakejamesreid", "id": 27356828, "node_id": "MDQ6VXNlcjI3MzU2ODI4", "avatar_url": "https://avatars2.githubusercontent.com/u/27356828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jakejamesreid", "html_url": "https://github.com/Jakejamesreid", "followers_url": "https://api.github.com/users/Jakejamesreid/followers", "following_url": "https://api.github.com/users/Jakejamesreid/following{/other_user}", "gists_url": "https://api.github.com/users/Jakejamesreid/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jakejamesreid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jakejamesreid/subscriptions", "organizations_url": "https://api.github.com/users/Jakejamesreid/orgs", "repos_url": "https://api.github.com/users/Jakejamesreid/repos", "events_url": "https://api.github.com/users/Jakejamesreid/events{/privacy}", "received_events_url": "https://api.github.com/users/Jakejamesreid/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-14T15:02:18Z", "updated_at": "2020-08-14T15:26:03Z", "closed_at": "2020-08-14T15:03:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\nI added an HTML comment that contained some old Jinja code.\r\n\r\n## Expected Behavior\r\nThe statement would be ignored as it is an HTML comment.\r\n\r\n## Actual Behavior\r\nJinja threw the following exception:\r\njinja2.exceptions.UndefinedError: 'form' is undefined\r\n\r\nI would not have expected an HTML comment to be processed at all.\r\n\r\nThis exception was thrown because the form variable was removed in my code so it was an undefined variable. Oddly if I put a valid Jinja statement in an HTML comment then Jinja does not act on that statement. It is like Jinja reads the statement and then checks to see that it is in an HTML comment so no action should be taken. The issue with this is if the Jinja statement is invalid then an exception will be thrown even though it is in a comment\r\n\r\n## Template Code\r\n```jinja\r\n<!-- {{ form.rating }}  -->\r\n\r\n```\r\nWhere form is not defined in the code\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 2464, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 2450, in wsgi_app\r\n    response = self.handle_exception(e)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 1867, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\_compat.py\", line 39, in reraise\r\n    raise value\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 2447, in wsgi_app\r\n    response = self.full_dispatch_request()\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 1952, in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 1821, in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\_compat.py\", line 39, in reraise\r\n    raise value\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 1950, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\app.py\", line 1936, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"c:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\app.py\", line 65, in game_media\r\n    return render_template(\"media.html\", media = game_with_rating[0], category=\"Games\", form=form)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\templating.py\", line 140, in render_template\r\n    ctx.app,\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\flask\\templating.py\", line 120, in _render\r\n    rv = template.render(context)\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\jinja2\\environment.py\", line 1090, in render\r\n    self.environment.handle_exception()\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\jinja2\\environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\jinja2\\_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"c:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\templates\\media.html\", line 2, in top-level template code\r\n    {% from \"_render_field.html\" import render_field %}\r\n  File \"c:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\templates\\base.html\", line 42, in top-level template code\r\n    {% block content %}{% endblock %}\r\n  File \"c:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\templates\\media.html\", line 83, in block \"content\"\r\n    {{ render_field(form.name) }}\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\jinja2\\runtime.py\", line 679, in _invoke\r\n    rv = self._func(*arguments)\r\n  File \"c:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\templates\\_render_field.html\", line 2, in template\r\n    <!-- {{ form.rating }}  -->\r\n  File \"C:\\Users\\Jake\\OneDrive\\Development\\Media Review Website\\media\\lib\\site-packages\\jinja2\\environment.py\", line 471, in getattr\r\n    return getattr(obj, attribute)\r\njinja2.exceptions.UndefinedError: 'form' is undefined\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.3\r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1278", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1278/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1278/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1278/events", "html_url": "https://github.com/pallets/jinja/issues/1278", "id": 675628281, "node_id": "MDU6SXNzdWU2NzU2MjgyODE=", "number": 1278, "title": "unable to update templates nor do certain elements appear", "user": {"login": "nyck33", "id": 25189545, "node_id": "MDQ6VXNlcjI1MTg5NTQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/25189545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nyck33", "html_url": "https://github.com/nyck33", "followers_url": "https://api.github.com/users/nyck33/followers", "following_url": "https://api.github.com/users/nyck33/following{/other_user}", "gists_url": "https://api.github.com/users/nyck33/gists{/gist_id}", "starred_url": "https://api.github.com/users/nyck33/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nyck33/subscriptions", "organizations_url": "https://api.github.com/users/nyck33/orgs", "repos_url": "https://api.github.com/users/nyck33/repos", "events_url": "https://api.github.com/users/nyck33/events{/privacy}", "received_events_url": "https://api.github.com/users/nyck33/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-09T03:27:13Z", "updated_at": "2020-08-09T04:40:30Z", "closed_at": "2020-08-09T04:06:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\nIf you clone this repo: https://github.com/nyck33/canadian-nutrient-file and use command `bin/cnf runserver`, you should be able to replicate the issue.  \r\n---\r\n\r\n## Expected Behavior\r\nThe <h1> element in `index.html` should appear when the app is run.  Changes made to layout.html, i.e. adding a bootstrap navbar should show up in `index.html` and `show.html`.  \r\n\r\n## Actual Behavior\r\nTell us what happens instead\r\n\r\nWell, the <h1> element in `index.html` below does not appear, neither does the `<p>hello</p>` that I inserted just for testing purposes.  It is a buildout project so I run `bin/buildout` after I make changes but it seems to have no effect.  I tried contacting the repo owner but he has abandoned the project.  \r\nI have no idea where the heading \"Food Standards\" in the screenshot below comes from either based on `index.html`.  \r\n\r\n![image](https://user-images.githubusercontent.com/25189545/89724254-785ead00-d9b5-11ea-805a-7cd7978a91e3.png)\r\n\r\n\r\n## Template Code\r\nHere is a link to `index.html` shown below: https://github.com/nyck33/canadian-nutrient-file/blob/master/cnf/templates/index.html\r\n`show.html`: https://github.com/nyck33/canadian-nutrient-file/blob/master/cnf/templates/show.html\r\n```jinja\r\n{% extends 'layout.html' %}\r\n{% block content %}\r\n<div class=\"container pt-4\">\r\n  <div class=\"row py-4\">\r\n    <div class=\"col text-center\">\r\n      <h1>Canadian Nutrient File Food Search</h1>\r\n        <p>\r\n            hello\r\n        </p>\r\n    </div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col\">\r\n      <form method='GET'>\r\n        <input class=\"form-control\" name=\"q\" value=\"{{ q|default('', True) }}\" />\r\n      </form>\r\n    </div>\r\n    {% if foods %}\r\n    <div class=\"col\">\r\n      <ul>\r\n        {% for food in foods %}\r\n        <li><a href=\"{{ url_for('cnf.show', food_id=food.id) }}\">{{ food.description }}</a></li>\r\n        {% endfor %}\r\n      </ul>\r\n    </div>\r\n    {% endif %}\r\n  </div>\r\n</div>\r\n{% endblock %}\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nPaste the full traceback in case there is an exception\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version:3.7.7\r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1275", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1275/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1275/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1275/events", "html_url": "https://github.com/pallets/jinja/issues/1275", "id": 673663363, "node_id": "MDU6SXNzdWU2NzM2NjMzNjM=", "number": 1275, "title": "docs: examples for `list` filter", "user": {"login": "bukowa", "id": 38087302, "node_id": "MDQ6VXNlcjM4MDg3MzAy", "avatar_url": "https://avatars1.githubusercontent.com/u/38087302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bukowa", "html_url": "https://github.com/bukowa", "followers_url": "https://api.github.com/users/bukowa/followers", "following_url": "https://api.github.com/users/bukowa/following{/other_user}", "gists_url": "https://api.github.com/users/bukowa/gists{/gist_id}", "starred_url": "https://api.github.com/users/bukowa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bukowa/subscriptions", "organizations_url": "https://api.github.com/users/bukowa/orgs", "repos_url": "https://api.github.com/users/bukowa/repos", "events_url": "https://api.github.com/users/bukowa/events{/privacy}", "received_events_url": "https://api.github.com/users/bukowa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T16:05:42Z", "updated_at": "2020-08-05T16:12:27Z", "closed_at": "2020-08-05T16:12:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://jinja.palletsprojects.com/en/2.11.x/templates/#list\r\n\r\nCould someone please provide examples? Docs say: `Convert the value into a list. If it was a string the returned list will be a list of characters.`\r\n\r\nWhat other value can be passed then? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1270", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1270/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1270/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1270/events", "html_url": "https://github.com/pallets/jinja/issues/1270", "id": 669302399, "node_id": "MDU6SXNzdWU2NjkzMDIzOTk=", "number": 1270, "title": "templates not updating in Flask app", "user": {"login": "nyck33", "id": 25189545, "node_id": "MDQ6VXNlcjI1MTg5NTQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/25189545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nyck33", "html_url": "https://github.com/nyck33", "followers_url": "https://api.github.com/users/nyck33/followers", "following_url": "https://api.github.com/users/nyck33/following{/other_user}", "gists_url": "https://api.github.com/users/nyck33/gists{/gist_id}", "starred_url": "https://api.github.com/users/nyck33/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nyck33/subscriptions", "organizations_url": "https://api.github.com/users/nyck33/orgs", "repos_url": "https://api.github.com/users/nyck33/repos", "events_url": "https://api.github.com/users/nyck33/events{/privacy}", "received_events_url": "https://api.github.com/users/nyck33/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-31T00:33:10Z", "updated_at": "2020-08-09T03:34:04Z", "closed_at": "2020-07-31T00:43:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nTell us what should happen\r\n\r\nI want the templates to be updated when I make changes to them.\r\n\r\n## Actual Behavior\r\nTell us what happens instead\r\nNo changes are reflected.\r\n\r\n## Template Code\r\n```jinja\r\nPaste the template code (ideally a minimal example) that causes the issue\r\n{% extends 'layout.html' %}\r\n{% block content %}\r\n<div class=\"container pt-4\">\r\n  <div class=\"row py-4\">\r\n    <div class=\"col text-center\">\r\n      <h1>Canadian Nutrient File Food Search</h1>\r\n        <p>\r\n            hello\r\n        </p>\r\n    </div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col\">\r\n      <form method='GET'>\r\n        <input class=\"form-control\" name=\"q\" value=\"{{ q|default('', True) }}\" />\r\n      </form>\r\n    </div>\r\n    {% if foods %}\r\n    <div class=\"col\">\r\n      <ul>\r\n        {% for food in foods %}\r\n        <li><a href=\"{{ url_for('cnf.show', food_id=food.id) }}\">{{ food.description }}</a></li>\r\n        {% endfor %}\r\n      </ul>\r\n    </div>\r\n    {% endif %}\r\n  </div>\r\n</div>\r\n{% endblock %}\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nPaste the full traceback in case there is an exception\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.7\r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1265", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1265/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1265/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1265/events", "html_url": "https://github.com/pallets/jinja/issues/1265", "id": 665239946, "node_id": "MDU6SXNzdWU2NjUyMzk5NDY=", "number": 1265, "title": "Jinja renderization doesn't ignore files that are in %include% tag inside HTML comments", "user": {"login": "nachokhan", "id": 984137, "node_id": "MDQ6VXNlcjk4NDEzNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/984137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nachokhan", "html_url": "https://github.com/nachokhan", "followers_url": "https://api.github.com/users/nachokhan/followers", "following_url": "https://api.github.com/users/nachokhan/following{/other_user}", "gists_url": "https://api.github.com/users/nachokhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/nachokhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nachokhan/subscriptions", "organizations_url": "https://api.github.com/users/nachokhan/orgs", "repos_url": "https://api.github.com/users/nachokhan/repos", "events_url": "https://api.github.com/users/nachokhan/events{/privacy}", "received_events_url": "https://api.github.com/users/nachokhan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-24T15:19:37Z", "updated_at": "2020-07-24T16:08:32Z", "closed_at": "2020-07-24T15:23:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n_**{% include '/yyyyy.html' %}**_ should be ignored because it is inside a comment.\r\n\r\n## Actual Behavior\r\nThe file '_yyyyy.html_' is being included although it is inside a comment (independently of multi- or single line comment)\r\n\r\n## Template Code\r\n```\r\n<div class=\"row\">\r\n      <div class=\"col\">\r\n            {% include '/xxxxx.html' %}\r\n      </div>\r\n      <!-- <div class=\"col\">\r\n            {% include '/yyyyy.html' %}\r\n      </div> -->\r\n</div>\r\n```\r\n\r\n## Full Traceback\r\n```\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7\r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1264", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1264/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1264/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1264/events", "html_url": "https://github.com/pallets/jinja/issues/1264", "id": 665053920, "node_id": "MDU6SXNzdWU2NjUwNTM5MjA=", "number": 1264, "title": "Jinja2 is sinle quoting while using the Template function + render", "user": {"login": "rzvn2600", "id": 29975766, "node_id": "MDQ6VXNlcjI5OTc1NzY2", "avatar_url": "https://avatars2.githubusercontent.com/u/29975766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rzvn2600", "html_url": "https://github.com/rzvn2600", "followers_url": "https://api.github.com/users/rzvn2600/followers", "following_url": "https://api.github.com/users/rzvn2600/following{/other_user}", "gists_url": "https://api.github.com/users/rzvn2600/gists{/gist_id}", "starred_url": "https://api.github.com/users/rzvn2600/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rzvn2600/subscriptions", "organizations_url": "https://api.github.com/users/rzvn2600/orgs", "repos_url": "https://api.github.com/users/rzvn2600/repos", "events_url": "https://api.github.com/users/rzvn2600/events{/privacy}", "received_events_url": "https://api.github.com/users/rzvn2600/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-24T09:47:53Z", "updated_at": "2020-07-24T13:30:41Z", "closed_at": "2020-07-24T13:30:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nDouble quotining \r\n## Actual Behavior\r\nSingle quoting\r\n## Template Code\r\n```jinja\r\nPaste the template code (ideally a minimal example) that causes the issue\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nPaste the full traceback in case there is an exception\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7 \r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1261", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1261/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1261/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1261/events", "html_url": "https://github.com/pallets/jinja/issues/1261", "id": 661776439, "node_id": "MDU6SXNzdWU2NjE3NzY0Mzk=", "number": 1261, "title": "Access to the variable name from a filter", "user": {"login": "mohovkm", "id": 24266117, "node_id": "MDQ6VXNlcjI0MjY2MTE3", "avatar_url": "https://avatars0.githubusercontent.com/u/24266117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohovkm", "html_url": "https://github.com/mohovkm", "followers_url": "https://api.github.com/users/mohovkm/followers", "following_url": "https://api.github.com/users/mohovkm/following{/other_user}", "gists_url": "https://api.github.com/users/mohovkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohovkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohovkm/subscriptions", "organizations_url": "https://api.github.com/users/mohovkm/orgs", "repos_url": "https://api.github.com/users/mohovkm/repos", "events_url": "https://api.github.com/users/mohovkm/events{/privacy}", "received_events_url": "https://api.github.com/users/mohovkm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-20T12:41:12Z", "updated_at": "2020-07-20T13:33:18Z", "closed_at": "2020-07-20T13:33:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\nIs it possible, to access the variable name from a filter?\r\n\r\nstructure: `{\"foo\":{\"bar\":123, :\"baz\":\"\"}}`\r\n\r\nfilter: `env.filters['my_filter'] = my_filter`\r\n\r\ntemplate: `{{ foo.baz|my_filter }}`\r\n\r\n```\r\ndef my_filter(number: str):\r\n    if number == '':\r\n        #  and here I want to print the name, \r\n        # in this case its \"foo.baz\"\r\n        raise Exception(f'You pass an empty string to the [VARIABLE_NAME]') # <--- how to access VARIABLE_NAME ?\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1258", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1258/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1258/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1258/events", "html_url": "https://github.com/pallets/jinja/issues/1258", "id": 655279875, "node_id": "MDU6SXNzdWU2NTUyNzk4NzU=", "number": 1258, "title": "2.11.2: test suite is failing", "user": {"login": "kloczek", "id": 31284574, "node_id": "MDQ6VXNlcjMxMjg0NTc0", "avatar_url": "https://avatars0.githubusercontent.com/u/31284574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kloczek", "html_url": "https://github.com/kloczek", "followers_url": "https://api.github.com/users/kloczek/followers", "following_url": "https://api.github.com/users/kloczek/following{/other_user}", "gists_url": "https://api.github.com/users/kloczek/gists{/gist_id}", "starred_url": "https://api.github.com/users/kloczek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kloczek/subscriptions", "organizations_url": "https://api.github.com/users/kloczek/orgs", "repos_url": "https://api.github.com/users/kloczek/repos", "events_url": "https://api.github.com/users/kloczek/events{/privacy}", "received_events_url": "https://api.github.com/users/kloczek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-11T21:09:46Z", "updated_at": "2020-07-12T02:05:04Z", "closed_at": "2020-07-11T21:40:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n+ tox --skip-missing-interpreters\r\nGLOB sdist-make: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/setup.py\r\npy38 create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/py38\r\npy38 installdeps: pytest\r\npy38 inst: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/.tmp/package/1/Jinja2-2.11.2.zip\r\npy38 installed: attrs==19.3.0,Jinja2==2.11.2,MarkupSafe==1.1.1,more-itertools==8.4.0,packaging==20.4,pluggy==0.13.1,py==1.9.0,pyparsing==2.4.7,pytest==5.4.3,six==1.15.0,wcwidth==0.2.5\r\npy38 run-test-pre: PYTHONHASHSEED='3669172370'\r\npy38 run-test: commands[0] | pytest --tb=short --basetemp=/home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/py38/tmp\r\n========================================================================================= test session starts ==========================================================================================\r\nplatform linux -- Python 3.8.3, pytest-5.4.3, py-1.9.0, pluggy-0.13.1\r\ncachedir: .tox/py38/.pytest_cache\r\nrootdir: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2, inifile: setup.cfg, testpaths: tests\r\ncollected 750 items\r\n\r\ntests/test_api.py .................................                                                                                                                                              [  4%]\r\ntests/test_async.py ..................................................                                                                                                                           [ 11%]\r\ntests/test_asyncfilters.py ......................................                                                                                                                                [ 16%]\r\ntests/test_bytecode_cache.py ...                                                                                                                                                                 [ 16%]\r\ntests/test_core_tags.py ..............................................................                                                                                                           [ 24%]\r\ntests/test_debug.py .......                                                                                                                                                                      [ 25%]\r\ntests/test_ext.py ............................................                                                                                                                                   [ 31%]\r\ntests/test_features.py .s                                                                                                                                                                        [ 31%]\r\ntests/test_filters.py ...............................................................................................................                                                            [ 46%]\r\ntests/test_idtracking.py .....                                                                                                                                                                   [ 47%]\r\ntests/test_imports.py ...........                                                                                                                                                                [ 48%]\r\ntests/test_inheritance.py ................                                                                                                                                                       [ 50%]\r\ntests/test_lexnparse.py ................................................................................................................................                                         [ 68%]\r\ntests/test_loader.py .......................s....                                                                                                                                                [ 71%]\r\ntests/test_nativetypes.py ........................                                                                                                                                               [ 74%]\r\ntests/test_regression.py .................s.........................                                                                                                                             [ 80%]\r\ntests/test_runtime.py .......                                                                                                                                                                    [ 81%]\r\ntests/test_security.py ...............                                                                                                                                                           [ 83%]\r\ntests/test_tests.py ......................................................................................................                                                                       [ 97%]\r\ntests/test_utils.py .....................                                                                                                                                                        [100%]\r\n\r\n==================================================================================== 747 passed, 3 skipped in 3.21s ====================================================================================\r\npy37 create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/py37\r\nSKIPPED: InterpreterNotFound: python3.7\r\npy36 create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/py36\r\nSKIPPED: InterpreterNotFound: python3.6\r\npy35 create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/py35\r\nSKIPPED: InterpreterNotFound: python3.5\r\npy27 create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/py27\r\nSKIPPED: InterpreterNotFound: python2.7\r\npypy3 create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/pypy3\r\nSKIPPED: InterpreterNotFound: pypy3\r\npypy create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/pypy\r\nSKIPPED: InterpreterNotFound: pypy\r\nstyle create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/style\r\nstyle installdeps: pre-commit\r\nstyle installed: appdirs==1.4.4,cfgv==3.1.0,distlib==0.3.1,filelock==3.0.12,identify==1.4.23,nodeenv==1.4.0,pre-commit==2.6.0,PyYAML==5.3.1,six==1.15.0,toml==0.10.1,virtualenv==20.0.26\r\nstyle run-test-pre: PYTHONHASHSEED='3669172370'\r\nstyle run-test: commands[0] | pre-commit run --all-files --show-diff-on-failure\r\nAn error has occurred: FatalError: git failed. Is it installed, and are you in a Git repository directory?\r\nCheck the log at /home/tkloczko/.cache/pre-commit/pre-commit.log\r\nERROR: InvocationError for command /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/style/bin/pre-commit run --all-files --show-diff-on-failure (exited with code 1)\r\ndocs create: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/docs\r\ndocs installdeps: -rdocs/requirements.txt\r\ndocs inst: /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/.tmp/package/1/Jinja2-2.11.2.zip\r\ndocs installed: alabaster==0.7.12,Babel==2.8.0,certifi==2020.6.20,chardet==3.0.4,docutils==0.16,idna==2.10,imagesize==1.2.0,Jinja2==2.11.2,MarkupSafe==1.1.1,packaging==20.4,Pallets-Sphinx-Themes==1.2.3,Pygments==2.6.1,pyparsing==2.4.7,pytz==2020.1,requests==2.24.0,six==1.15.0,snowballstemmer==2.0.0,Sphinx==2.1.2,sphinx-issues==1.2.0,sphinxcontrib-applehelp==1.0.2,sphinxcontrib-devhelp==1.0.2,sphinxcontrib-htmlhelp==1.0.3,sphinxcontrib-jsmath==1.0.1,sphinxcontrib-log-cabinet==1.0.1,sphinxcontrib-qthelp==1.0.3,sphinxcontrib-serializinghtml==1.1.4,urllib3==1.25.9\r\ndocs run-test-pre: PYTHONHASHSEED='3669172370'\r\ndocs run-test: commands[0] | sphinx-build -W -b html -d /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/docs/tmp/doctrees docs /home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/docs/tmp/html\r\nRunning Sphinx v2.1.2\r\nmaking output directory... done\r\nloading intersphinx inventory from https://docs.python.org/3/objects.inv...\r\nbuilding [mo]: targets for 0 po files that are out of date\r\nbuilding [html]: targets for 12 source files that are out of date\r\nupdating environment: 12 added, 0 changed, 0 removed\r\nreading sources... [  8%] api\r\n/home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/docs/lib/python3.8/site-packages/sphinx/util/nodes.py:151: FutureWarning:\r\n   The iterable returned by Node.traverse()\r\n   will become an iterator instead of a list in Docutils > 0.16.\r\n  for classifier in reversed(node.parent.traverse(nodes.classifier)):\r\nreading sources... [ 16%] changelog\r\nreading sources... [ 25%] extensions\r\nreading sources... [ 33%] faq\r\nreading sources... [ 41%] index\r\nreading sources... [ 50%] integration\r\nreading sources... [ 58%] intro\r\nreading sources... [ 66%] nativetypes\r\nreading sources... [ 75%] sandbox\r\nreading sources... [ 83%] switching\r\n/home/tkloczko/rpmbuild/BUILD/Jinja2-2.11.2/.tox/docs/lib/python3.8/site-packages/sphinx/util/nodes.py:151: FutureWarning:\r\n   The iterable returned by Node.traverse()\r\n   will become an iterator instead of a list in Docutils > 0.16.\r\n  for classifier in reversed(node.parent.traverse(nodes.classifier)):\r\nreading sources... [ 91%] templates\r\nreading sources... [100%] tricks\r\n\r\nlooking for now-outdated files... none found\r\npickling environment... done\r\nchecking consistency... done\r\npreparing documents... done\r\nwriting output... [  8%] api\r\nwriting output... [ 16%] changelog\r\nwriting output... [ 25%] extensions\r\nwriting output... [ 33%] faq\r\nwriting output... [ 41%] index\r\nwriting output... [ 50%] integration\r\nwriting output... [ 58%] intro\r\nwriting output... [ 66%] nativetypes\r\nwriting output... [ 75%] sandbox\r\nwriting output... [ 83%] switching\r\nwriting output... [ 91%] templates\r\nwriting output... [100%] tricks\r\n\r\ngenerating indices... genindex py-modindex\r\nwriting additional pages... search\r\ncopying images... [100%] _static/jinja-logo.png\r\n\r\ncopying static files... done\r\ncopying extra files... done\r\ndumping search index in English (code: en) ... done\r\ndumping object inventory... done\r\nbuild succeeded.\r\n\r\nThe HTML pages are in .tox/docs/tmp/html.\r\n_______________________________________________________________________________________________ summary ________________________________________________________________________________________________\r\n  py38: commands succeeded\r\nSKIPPED:  py37: InterpreterNotFound: python3.7\r\nSKIPPED:  py36: InterpreterNotFound: python3.6\r\nSKIPPED:  py35: InterpreterNotFound: python3.5\r\nSKIPPED:  py27: InterpreterNotFound: python2.7\r\nSKIPPED:  pypy3: InterpreterNotFound: pypy3\r\nSKIPPED:  pypy: InterpreterNotFound: pypy\r\nERROR:   style: commands failed\r\n  docs: commands succeeded\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1257", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1257/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1257/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1257/events", "html_url": "https://github.com/pallets/jinja/issues/1257", "id": 655059149, "node_id": "MDU6SXNzdWU2NTUwNTkxNDk=", "number": 1257, "title": "[Question] Can someone point me in the direction regex for checking jinja syntax?", "user": {"login": "mmoore-3lc", "id": 57560358, "node_id": "MDQ6VXNlcjU3NTYwMzU4", "avatar_url": "https://avatars2.githubusercontent.com/u/57560358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmoore-3lc", "html_url": "https://github.com/mmoore-3lc", "followers_url": "https://api.github.com/users/mmoore-3lc/followers", "following_url": "https://api.github.com/users/mmoore-3lc/following{/other_user}", "gists_url": "https://api.github.com/users/mmoore-3lc/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmoore-3lc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmoore-3lc/subscriptions", "organizations_url": "https://api.github.com/users/mmoore-3lc/orgs", "repos_url": "https://api.github.com/users/mmoore-3lc/repos", "events_url": "https://api.github.com/users/mmoore-3lc/events{/privacy}", "received_events_url": "https://api.github.com/users/mmoore-3lc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-10T22:01:53Z", "updated_at": "2020-07-10T22:07:26Z", "closed_at": "2020-07-10T22:07:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an application that has a requirement to parse jinja syntax to determine correct structure before the template is sent up to the server for processing. If the expression is ill-formed, the user is to be notified so they can correct it.\r\n\r\nCan someone point me toward a class in the Jinja source that implements something similar, or a couple of regular expressions I can implement in code? Anything along these lines would be helpful, thanks in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1256", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1256/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1256/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1256/events", "html_url": "https://github.com/pallets/jinja/issues/1256", "id": 654512958, "node_id": "MDU6SXNzdWU2NTQ1MTI5NTg=", "number": 1256, "title": "Custom Loader based on BaseLoader code comments seems not to work", "user": {"login": "tenuki", "id": 58698, "node_id": "MDQ6VXNlcjU4Njk4", "avatar_url": "https://avatars3.githubusercontent.com/u/58698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tenuki", "html_url": "https://github.com/tenuki", "followers_url": "https://api.github.com/users/tenuki/followers", "following_url": "https://api.github.com/users/tenuki/following{/other_user}", "gists_url": "https://api.github.com/users/tenuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/tenuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tenuki/subscriptions", "organizations_url": "https://api.github.com/users/tenuki/orgs", "repos_url": "https://api.github.com/users/tenuki/repos", "events_url": "https://api.github.com/users/tenuki/events{/privacy}", "received_events_url": "https://api.github.com/users/tenuki/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-10T05:06:03Z", "updated_at": "2020-07-10T05:14:52Z", "closed_at": "2020-07-10T05:14:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nI could write a simple Loader with a fixed template subclassing BaseLoader.\r\n\r\nI was using this with no problems:\r\n```python\r\ndef render_template(file_name, **context):\r\n    return jinja2.Environment(\r\n        loader=jinja2.FileSystemLoader('templates/')\r\n    ).get_template(file_name).render(context)\r\n```\r\n\r\nBut I wanted to embed my templates with my source-code, so I changed took one basic base template with no dependencies and put it in code and try to use this loader:\r\n\r\n```python\r\nclass MyLoader(BaseLoader):\r\n    def get_source(self, environment, template):\r\n        fname = \"template.html\"\r\n        if template!=fname:\r\n            print(\"looknig for: \", template)\r\n            raise TemplateNotFound(template)\r\n        return Template(TEMPLATE_DATA), fname, False\r\n        # return TEMPLATE, fname, False\r\n\r\ndef render_template(file_name, **context):\r\n    env = jinja2.Environment(loader=MyLoader)\r\n    tempalte = env.get_template(file_name)\r\n    return tempalte.render(context)\r\n```\r\nand it failed with the exception below.\r\n\r\n\r\nWhen I checked BaseLoader code it shows this code, I assumed it would work, and I adapted to my case: \r\n\r\n```python\r\nclass MyLoader(BaseLoader):\r\n    def __init__(self, path):\r\n        self.path = path\r\n\r\n    def get_source(self, environment, template):\r\n        fname = \"template.html\"\r\n        if template!=fname:\r\n            print(\"looknig for: \", template)\r\n            raise TemplateNotFound(template)\r\n        path = '/home/aweil/xxtest/templates/template.html'\r\n        mtime = getmtime(path)\r\n        with file(path) as f:\r\n            source = f.read().decode('utf-8')\r\n        return source, path, lambda: mtime == getmtime(path)\r\n```\r\n\r\nBut it returns the same error.  What would be a minimal Loader and which would be the proper way to use it \"outside\" flask?\r\nthanks\r\n\r\n## Actual Behavior\r\nWhen I try to use that, following given code, I get: \r\nAttributeError: 'Environment' object has no attribute 'get_source'\r\n\r\n\r\n## Template Code\r\nIn this case template doesn't matter.. \r\n```jinja\r\nTEMPLATE_DATA = \"\"\"<!DOCTYPE html><html>\r\n<head>\r\n<title>{{title}}</title>\r\n</head>\r\n</html>\r\n\"\"\"\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nPaste the full traceback in case there is an exception\r\nTraceback (most recent call last):\r\n  File \"wrap.py\", line 96, in <module>\r\n    print(render_template('template.html', **data))\r\n  File \"wrap.py\", line 67, in render_template\r\n    tempalte = env.get_template(file_name)\r\n  File \"/home/aweil/xxtest/venv/lib/python3.7/site-packages/jinja2/environment.py\", line 883, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"/home/aweil/xxtest/venv/lib/python3.7/site-packages/jinja2/environment.py\", line 857, in _load_template\r\n    template = self.loader.load(self, name, globals)\r\n  File \"/home/aweil/xxtest/venv/lib/python3.7/site-packages/jinja2/loaders.py\", line 115, in load\r\n    source, filename, uptodate = self.get_source(environment, name)\r\nAttributeError: 'Environment' object has no attribute 'get_source'\r\n```\r\n\r\n## Your Environment\r\n* Python version:\r\nPython 3.7.2\r\n\r\n* Jinja version:\r\nJinja2==2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1245", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1245/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1245/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1245/events", "html_url": "https://github.com/pallets/jinja/issues/1245", "id": 644234371, "node_id": "MDU6SXNzdWU2NDQyMzQzNzE=", "number": 1245, "title": "Extracting set variables from template", "user": {"login": "edublancas", "id": 989250, "node_id": "MDQ6VXNlcjk4OTI1MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/989250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edublancas", "html_url": "https://github.com/edublancas", "followers_url": "https://api.github.com/users/edublancas/followers", "following_url": "https://api.github.com/users/edublancas/following{/other_user}", "gists_url": "https://api.github.com/users/edublancas/gists{/gist_id}", "starred_url": "https://api.github.com/users/edublancas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edublancas/subscriptions", "organizations_url": "https://api.github.com/users/edublancas/orgs", "repos_url": "https://api.github.com/users/edublancas/repos", "events_url": "https://api.github.com/users/edublancas/events{/privacy}", "received_events_url": "https://api.github.com/users/edublancas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-24T00:36:03Z", "updated_at": "2020-06-24T00:57:40Z", "closed_at": "2020-06-24T00:57:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n\r\nHi,\r\n\r\nI'm working on a program to extract variables from jinja templates.\r\n\r\nSo far this works fine:\r\n\r\n```python\r\nfrom jinja2 import Environment\r\nfrom jinja2.nodes import Assign\r\n\r\ntemplate = \"{% set x = 1%}\"\r\nenv = Environment()\r\nast = env.parse(template)\r\n\r\nassert {n.target.name: n.node.as_const() for n in ast.find_all(Assign)} == {'x': 1}\r\n```\r\n\r\nBut users might use custom classes that have certain formatting logic, so I attemped  passing `Custom` to `env.globals` like this:\r\n\r\n```python\r\nfrom jinja2 import Environment\r\nfrom jinja2.nodes import Assign\r\n\r\nclass Custom:\r\n    def __init__(self, value):\r\n        return self.value\r\n\r\n    def __str__(self):\r\n        return str(self.value)\r\n\r\ntemplate = \"{% set x = Custom(1) %}\"\r\nenv = Environment()\r\nenv.globals['Custom'] = Custom\r\nast = env.parse(template)\r\n\r\n{n.target.name: n.node.as_const() for n in ast.find_all(Assign)} \r\n# I'd like this to be: {'x': Custom(1)}\r\n```\r\n\r\n## Actual Behavior\r\n\r\nBut I get this error:\r\n\r\n```pytb\r\n~/miniconda3/envs/ploomber/lib/python3.6/site-packages/jinja2/nodes.py in as_const(self, eval_ctx)\r\n    416            the `eval_ctx` parameter was added.\r\n    417         \"\"\"\r\n--> 418         raise Impossible()\r\n    419\r\n    420     def can_assign(self):\r\n\r\nImpossible:\r\n```\r\nI also tried passing `Custom` to `eval_ctx` in the `as_const()` function, but I get the same error.\r\n\r\nWhat is the appropriate way to make `Environment` aware of `Custom`?\r\n\r\nThanks!\r\n\r\n## Your Environment\r\n* Python version: 3.6.10\r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1220", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1220/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1220/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1220/events", "html_url": "https://github.com/pallets/jinja/issues/1220", "id": 621323423, "node_id": "MDU6SXNzdWU2MjEzMjM0MjM=", "number": 1220, "title": "Macro documentation unclear about macros/call", "user": {"login": "Chealer", "id": 486141, "node_id": "MDQ6VXNlcjQ4NjE0MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/486141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chealer", "html_url": "https://github.com/Chealer", "followers_url": "https://api.github.com/users/Chealer/followers", "following_url": "https://api.github.com/users/Chealer/following{/other_user}", "gists_url": "https://api.github.com/users/Chealer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chealer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chealer/subscriptions", "organizations_url": "https://api.github.com/users/Chealer/orgs", "repos_url": "https://api.github.com/users/Chealer/repos", "events_url": "https://api.github.com/users/Chealer/events{/privacy}", "received_events_url": "https://api.github.com/users/Chealer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 193352435, "node_id": "MDU6TGFiZWwxOTMzNTI0MzU=", "url": "https://api.github.com/repos/pallets/jinja/labels/docs", "name": "docs", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-19T22:26:07Z", "updated_at": "2020-05-23T18:08:57Z", "closed_at": "2020-05-23T18:08:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am having a hard time understanding the _call_ control structure. The first example in [its documentation](https://jinja.palletsprojects.com/en/2.11.x/templates/#call) uses the _caller_ variable. The only documentation about caller is:\r\n\r\n> If the macro was called from a call tag, the caller is stored in this variable as a callable macro.\r\n\r\n...which makes me wonder if I even understand macros properly. Please clarify which macros are not callable (or callable).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1219", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1219/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1219/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1219/events", "html_url": "https://github.com/pallets/jinja/issues/1219", "id": 621027685, "node_id": "MDU6SXNzdWU2MjEwMjc2ODU=", "number": 1219, "title": "QUESTION: how do relative paths work on Windows?", "user": {"login": "AdamJel", "id": 33990009, "node_id": "MDQ6VXNlcjMzOTkwMDA5", "avatar_url": "https://avatars1.githubusercontent.com/u/33990009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdamJel", "html_url": "https://github.com/AdamJel", "followers_url": "https://api.github.com/users/AdamJel/followers", "following_url": "https://api.github.com/users/AdamJel/following{/other_user}", "gists_url": "https://api.github.com/users/AdamJel/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdamJel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdamJel/subscriptions", "organizations_url": "https://api.github.com/users/AdamJel/orgs", "repos_url": "https://api.github.com/users/AdamJel/repos", "events_url": "https://api.github.com/users/AdamJel/events{/privacy}", "received_events_url": "https://api.github.com/users/AdamJel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-19T14:33:42Z", "updated_at": "2020-06-09T16:45:36Z", "closed_at": "2020-06-09T16:45:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I have a problem with templates folder loading on Windows 10. Basically, all works if I use absolute path for `jinja2.FileSystemLoader`. But nothing works, if I use just relative path. More details below.\r\n\r\nAlso, this behaviour is only if I run the program from IDE (I tried vscode - my native and Spyder). But if I run it from cmd, then it works.\r\n\r\nMy question 1 is, what am I doing wrong, or what should I tweak in order to make it work.\r\n\r\nQuestion 2 is, why is `jinja2.exceptions.TemplateNotFound:` raised instead of some actually useful exception? I mean, there is problem with path, clearly, but error is about template file.. Even if I try with nonsense path (like `'foo\\\\\\\\bar'`), it raises the same error, which is simply not helpful. \r\n\r\n---\r\n\r\n## Expected Behavior\r\nTemplate `test.html` should be loaded using relative path just as in [docs](url)\r\n\r\n## Actual Behavior\r\nException `jinja2.exceptions.TemplateNotFound:` is raised.\r\n\r\n## Template Code\r\nfolder structure is this:\r\ngeomacc\r\n |-templates\r\n |  |-test.html\r\n |\r\n |-run.py\r\n\r\n```python\r\nimport jinja2 as jnj\r\n\r\ndef foo():\r\n    env = jnj.Environment(\r\n        # WORKS\r\n        loader = jnj.FileSystemLoader(searchpath='C:/Users/jelinek/xxx/app/geomacc/templates'),\r\n        \r\n        # DOES NOT WORK\r\n        loader = jnj.FileSystemLoader('/templates/'),\r\n        loader = jnj.FileSystemLoader('./templates'),\r\n        loader = jnj.FileSystemLoader('/templates'),\r\n        loader = jnj.FileSystemLoader('templates/'),\r\n        loader = jnj.FileSystemLoader('templates'),\r\n        \r\n        autoescape=jnj.select_autoescape(['html']),\r\n    )\r\n    template = env.get_template('test.html')\r\n\r\n    output = template.render(\r\n        table_number='does not work from IDE',\r\n    )\r\n    print(output)\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\n  File \"c:\\Users\\jelinek\\xxx\\app\\geomacc\\templating.py\", line 19, in <module>\r\n    foo()\r\n  File \"c:\\Users\\jelinek\\xxx\\app\\geomacc\\templating.py\", line 12, in foo\r\n    template = env.get_template('compensations.mpf.jinja')\r\n  File \"C:\\tools\\miniconda3\\envs\\playground\\lib\\site-packages\\jinja2\\environment.py\", line 883, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"C:\\tools\\miniconda3\\envs\\playground\\lib\\site-packages\\jinja2\\environment.py\", line 857, in _load_template\r\n    template = self.loader.load(self, name, globals)\r\n  File \"C:\\tools\\miniconda3\\envs\\playground\\lib\\site-packages\\jinja2\\loaders.py\", line 115, in load\r\n    source, filename, uptodate = self.get_source(environment, name)\r\n  File \"C:\\tools\\miniconda3\\envs\\playground\\lib\\site-packages\\jinja2\\loaders.py\", line 197, in get_source\r\n    raise TemplateNotFound(template)\r\njinja2.exceptions.TemplateNotFound: compensations.mpf.jinja\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.6\r\n* Jinja version: 2.11.2\r\n* Windows: 1909.18363.836\r\n* vscode: 1.45.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1218", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1218/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1218/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1218/events", "html_url": "https://github.com/pallets/jinja/issues/1218", "id": 620803825, "node_id": "MDU6SXNzdWU2MjA4MDM4MjU=", "number": 1218, "title": "why index page has \u795e\u793e\uff1fwhat this mean?", "user": {"login": "yxxhero", "id": 11087727, "node_id": "MDQ6VXNlcjExMDg3NzI3", "avatar_url": "https://avatars3.githubusercontent.com/u/11087727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yxxhero", "html_url": "https://github.com/yxxhero", "followers_url": "https://api.github.com/users/yxxhero/followers", "following_url": "https://api.github.com/users/yxxhero/following{/other_user}", "gists_url": "https://api.github.com/users/yxxhero/gists{/gist_id}", "starred_url": "https://api.github.com/users/yxxhero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yxxhero/subscriptions", "organizations_url": "https://api.github.com/users/yxxhero/orgs", "repos_url": "https://api.github.com/users/yxxhero/repos", "events_url": "https://api.github.com/users/yxxhero/events{/privacy}", "received_events_url": "https://api.github.com/users/yxxhero/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-19T08:58:56Z", "updated_at": "2020-05-21T01:51:39Z", "closed_at": "2020-05-19T09:00:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "why index page has \u795e\u793e\uff1fwhat this mean?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1217", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1217/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1217/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1217/events", "html_url": "https://github.com/pallets/jinja/issues/1217", "id": 620553981, "node_id": "MDU6SXNzdWU2MjA1NTM5ODE=", "number": 1217, "title": "Your .dependabot/config.yml contained invalid details", "user": {"login": "dependabot-preview[bot]", "id": 27856297, "node_id": "MDM6Qm90Mjc4NTYyOTc=", "avatar_url": "https://avatars3.githubusercontent.com/in/2141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot-preview%5Bbot%5D", "html_url": "https://github.com/apps/dependabot-preview", "followers_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-18T22:53:11Z", "updated_at": "2020-05-18T22:56:33Z", "closed_at": "2020-05-18T22:56:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dependabot encountered the following error when parsing your `.dependabot/config.yml`:\n\n```\nThe property '#/update_configs/0/ignored_updates/0' contains additional properties [\"dependency_name\"] outside of the schema when none are allowed\nThe property '#/update_configs/0/ignored_updates/0' did not contain a required property of 'match'\n```\n\nPlease update the config file to conform with Dependabot's specification using our [docs](https://dependabot.com/docs/config-file/) and [online validator](https://dependabot.com/docs/config-file/validator/).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1215", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1215/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1215/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1215/events", "html_url": "https://github.com/pallets/jinja/issues/1215", "id": 620546157, "node_id": "MDU6SXNzdWU2MjA1NDYxNTc=", "number": 1215, "title": "Dependabot couldn't fetch all your path-based dependencies", "user": {"login": "dependabot-preview[bot]", "id": 27856297, "node_id": "MDM6Qm90Mjc4NTYyOTc=", "avatar_url": "https://avatars3.githubusercontent.com/in/2141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot-preview%5Bbot%5D", "html_url": "https://github.com/apps/dependabot-preview", "followers_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-18T22:32:56Z", "updated_at": "2020-05-23T17:58:46Z", "closed_at": "2020-05-23T17:58:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dependabot couldn't fetch one or more of your project's path-based Python dependencies. The affected dependencies were `file:./setup.py` and `file:./setup.py`.\n\nTo use path-based dependencies with Dependabot the paths must be relative and resolve to a directory in this project's source code.\n\n[View the update logs](https://app.dependabot.com/accounts/pallets/update-logs/33636651).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1212", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1212/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1212/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1212/events", "html_url": "https://github.com/pallets/jinja/issues/1212", "id": 620419155, "node_id": "MDU6SXNzdWU2MjA0MTkxNTU=", "number": 1212, "title": "adding number to a itself inside for loop in jinja", "user": {"login": "sarikkhan", "id": 52139546, "node_id": "MDQ6VXNlcjUyMTM5NTQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/52139546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarikkhan", "html_url": "https://github.com/sarikkhan", "followers_url": "https://api.github.com/users/sarikkhan/followers", "following_url": "https://api.github.com/users/sarikkhan/following{/other_user}", "gists_url": "https://api.github.com/users/sarikkhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarikkhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarikkhan/subscriptions", "organizations_url": "https://api.github.com/users/sarikkhan/orgs", "repos_url": "https://api.github.com/users/sarikkhan/repos", "events_url": "https://api.github.com/users/sarikkhan/events{/privacy}", "received_events_url": "https://api.github.com/users/sarikkhan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-18T18:32:48Z", "updated_at": "2020-05-18T18:40:50Z", "closed_at": "2020-05-18T18:40:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "         {% set p= 200| int %}\r\n         {% set o= 0|int %}\r\n         {% for i in range(2) %}\r\n             {% set o= o +p  %}\r\n         <div class= \"column_1\" style= \"top:{{o}}px\">\r\n            <div style = \"color:red\">{{jname[i]}} </div>\r\n            <div style = \"color:blue\">{{j[i]}}</div>\r\n          </div>\r\n            {% endfor %}\r\n\r\n\r\nthis is  not adding o and p together. what should i do", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1211", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1211/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1211/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1211/events", "html_url": "https://github.com/pallets/jinja/issues/1211", "id": 619595766, "node_id": "MDU6SXNzdWU2MTk1OTU3NjY=", "number": 1211, "title": "docs: unclear what is the recommended way to load templates?", "user": {"login": "mhansen", "id": 105529, "node_id": "MDQ6VXNlcjEwNTUyOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/105529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhansen", "html_url": "https://github.com/mhansen", "followers_url": "https://api.github.com/users/mhansen/followers", "following_url": "https://api.github.com/users/mhansen/following{/other_user}", "gists_url": "https://api.github.com/users/mhansen/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhansen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhansen/subscriptions", "organizations_url": "https://api.github.com/users/mhansen/orgs", "repos_url": "https://api.github.com/users/mhansen/repos", "events_url": "https://api.github.com/users/mhansen/events{/privacy}", "received_events_url": "https://api.github.com/users/mhansen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 193352435, "node_id": "MDU6TGFiZWwxOTMzNTI0MzU=", "url": "https://api.github.com/repos/pallets/jinja/labels/docs", "name": "docs", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-17T02:41:45Z", "updated_at": "2020-06-17T08:21:10Z", "closed_at": "2020-05-23T19:30:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there! This is an experience report of a first-time integrator with jinja2, I'm not sure what the solution should be, but I'll share a confusing bit - trying to get hello world of templates working.\r\n\r\nA bunch of this is perhaps silly mistakes but I'm imagining if I'm having trouble with this probably others might be too?\r\n\r\nI came to https://jinja.palletsprojects.com/en/2.11.x/api/ and - yay! There's an example at the top:\r\n\r\n```\r\nfrom jinja2 import Environment, PackageLoader, select_autoescape\r\nenv = Environment(\r\n    loader=PackageLoader('yourapplication', 'templates'),\r\n    autoescape=select_autoescape(['html', 'xml'])\r\n)\r\n```\r\n\r\nSo I pasted this into my file `infosrc/make_output.py`:\r\n```\r\n#!/usr/bin/env python3\r\nimport jinja2\r\nenv = jinja2.Environment(\r\n    loader=jinja2.PackageLoader('yourapplication', 'templates'),\r\n    autoescape=jinja2.select_autoescape(['html.j2']),\r\n)\r\ntemplate = env.get_template('output.html.j2')\r\nprint(template.render(formats={}, descriptions={}))\r\n```\r\n\r\nAnd I ran it with `./make_output.py`, but got this error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 360, in get_provider\r\n    module = sys.modules[moduleOrReq]\r\nKeyError: 'yourapplication'\r\n```\r\n\r\nI don't really have an application name - it's just this python script.\r\n\r\nI did a search, found a [StackOverflow where someone else is confused by this](https://stackoverflow.com/questions/14276829/html-templating-using-jinja2-lost), and the accepted answer is to use the folder name.\r\n\r\nSo I set it to the directory name `infosrc`:\r\n\r\n```\r\n    loader=jinja2.PackageLoader('infosrc', 'templates'),\r\n```\r\n\r\nI get the same error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 360, in get_provider\r\n    module = sys.modules[moduleOrReq]\r\nKeyError: 'infosrc'\r\n```\r\n\r\nI thought, maybe I need a `__init__.py` file in the directory? So I added one, and reran again, getting the same error.\r\n\r\nI looked again at the docs:\r\n\r\n> This will create a template environment with the default settings and a loader that looks up the templates in the templates folder inside the yourapplication python package. Different loaders are available and you can also write your own if you want to load templates from a database or other resources.\r\n\r\nI'm still pretty confused - I don't have any python packages, I only have a one-file script.\r\n\r\nI tried using the filename of the script directly - `make_output` - and then my template was output twice! I wondered, maybe `template.render` defaults to printing to stdout, and then I'm printing it again? Docs say no. This honestly had me doubting my sanity - later I figured out that it was because the `PackageLoader` was re-importing and thus re-running the script.\r\n\r\nSo I thought I'd try the other loaders. The second stackoverflow (non-accepted) actually has more upvotes: to just use `FileSystemLoader` instead. So I did - I got `FileSystemLoader` working because it didn't require me to specify a package. Fantastic! But it was a bit of a bumpy start for hello world :-)\r\n\r\nAnd I got a bit confused at which Loader to use:\r\n\r\n* `PackageLoader` [is advertised as](https://jinja.palletsprojects.com/en/2.11.x/api/#basics) \"The simplest way to configure Jinja to load templates for your application\", but `FileSystemLoader` has fewer params you need to get right, so `FileSystemLoader` seems simpler to me? I'm not clear on what benefits `PackageLoader` has over `FileSystemLoader`. Maybe it doesn't depend on current working directory?\r\n\r\n* `FileSystemLoader`'s docs say \"This loader can find templates in folders on the file system and is the preferred way to load them.\" -- does that mean `FileSystemLoader` is preferred over `PackageLoader` for loading from a 'templates' directory? It seems not, because the recommendation at the [top of the page](https://jinja.palletsprojects.com/en/2.11.x/api/#basics) is to use `PackageLoader`.\r\n\r\nI think there's some opportunities to make hello world easier here. Here's some ideas:\r\n\r\n* Perhaps in the first example note that the file is `yourapplication.py`?\r\n* Perhaps use `FilesystemLoader` as the simplest example, or remove the \"The simplest way\" text?\r\n* Maybe add some discussion about when to use `FileSystemLoader` vs `PackageLoader` - what are the benefits of loading from packages vs filesystem? CWD-independence maybe?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1206", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1206/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1206/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1206/events", "html_url": "https://github.com/pallets/jinja/issues/1206", "id": 618009859, "node_id": "MDU6SXNzdWU2MTgwMDk4NTk=", "number": 1206, "title": "tests.test_number validates to True for NaN", "user": {"login": "phryk", "id": 1021513, "node_id": "MDQ6VXNlcjEwMjE1MTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1021513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phryk", "html_url": "https://github.com/phryk", "followers_url": "https://api.github.com/users/phryk/followers", "following_url": "https://api.github.com/users/phryk/following{/other_user}", "gists_url": "https://api.github.com/users/phryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/phryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phryk/subscriptions", "organizations_url": "https://api.github.com/users/phryk/orgs", "repos_url": "https://api.github.com/users/phryk/repos", "events_url": "https://api.github.com/users/phryk/events{/privacy}", "received_events_url": "https://api.github.com/users/phryk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-14T07:56:39Z", "updated_at": "2020-05-16T15:06:39Z", "closed_at": "2020-05-16T15:06:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "`float('nan')` explicitly represents \"**Not** a Number\" and is used as such by numpy and pandas, but is a number according to jinja2's `number` test.\r\n\r\n## Expected Behavior\r\n`jinja2.tests.test_number(float('nan')) -> False`\r\n\r\n## Actual Behavior\r\n`jinja2.tests.test_number(float('nan')) -> True`\r\n\r\n\r\n## Environment\r\n* Python version: any\r\n* Jinja version: at least 2.11.1 and up, most likely any\r\n\r\n## Fix\r\nThis will need its own explicit check \u2013 append `and not math.isnan(value)` to the boolean expression in `test_number`. *Please note that `==` and `!=` **don't** work as expected with `float('nan')`.*\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1205", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1205/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1205/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1205/events", "html_url": "https://github.com/pallets/jinja/issues/1205", "id": 616387635, "node_id": "MDU6SXNzdWU2MTYzODc2MzU=", "number": 1205, "title": "FileExistsError with FileSystemBytecodeCache", "user": {"login": "fili", "id": 115263, "node_id": "MDQ6VXNlcjExNTI2Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/115263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fili", "html_url": "https://github.com/fili", "followers_url": "https://api.github.com/users/fili/followers", "following_url": "https://api.github.com/users/fili/following{/other_user}", "gists_url": "https://api.github.com/users/fili/gists{/gist_id}", "starred_url": "https://api.github.com/users/fili/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fili/subscriptions", "organizations_url": "https://api.github.com/users/fili/orgs", "repos_url": "https://api.github.com/users/fili/repos", "events_url": "https://api.github.com/users/fili/events{/privacy}", "received_events_url": "https://api.github.com/users/fili/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-12T06:10:27Z", "updated_at": "2020-07-08T13:04:28Z", "closed_at": "2020-07-06T06:34:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to utilize [jinja2.FileSystemBytecodeCache](https://jinja.palletsprojects.com/en/2.11.x/api/#jinja2.FileSystemBytecodeCache) in Flask\r\n\r\n## Expected Behavior\r\nI expected it to work without throwing exceptions. \r\n\r\nCaches should assist the user in getting the content faster, not prevent the user from getting the content in the first place. I had this error now several times in the last few weeks across several different GAE instances on python 3.8 and users are given a 500 error. \r\n\r\n## Actual Behavior\r\nIt throws a FileExistsError, which ironically is what a cache is all about ;) Still, I would expect maybe an except situation in the codebase here to avoid a 500 error to the end user. \r\n\r\n## Flask Code\r\n```\r\napp.jinja_env.bytecode_cache = FileSystemBytecodeCache('/tmp', '__jinja2_%s.cache')\r\n```\r\n\r\n## Full Traceback\r\n```\r\n  File \"/layers/google.python.pip/pip/flask/templating.py\", line 138, in render_template\r\n    ctx.app.jinja_env.get_or_select_template(template_name_or_list),\r\n  File \"/layers/google.python.pip/pip/jinja2/environment.py\", line 930, in get_or_select_template\r\n    return self.get_template(template_name_or_list, parent, globals)\r\n  File \"/layers/google.python.pip/pip/jinja2/environment.py\", line 883, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"/layers/google.python.pip/pip/jinja2/environment.py\", line 857, in _load_template\r\n    template = self.loader.load(self, name, globals)\r\n  File \"/layers/google.python.pip/pip/jinja2/loaders.py\", line 134, in load\r\n    bcc.set_bucket(bucket)\r\n  File \"/layers/google.python.pip/pip/jinja2/bccache.py\", line 169, in set_bucket\r\n    self.dump_bytecode(bucket)\r\n  File \"/layers/google.python.pip/pip/jinja2/bccache.py\", line 255, in dump_bytecode\r\n    f = open(self._get_cache_filename(bucket), \"wb\")\r\nFileExistsError: [Errno 17] File exists: '/tmp/__jinja2_25b991d3c43c9d1d74bf5439fde5a14250a2b526.cache'\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.8 on GAE Standard\r\n* Jinja version: 2.11\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1200", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1200/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1200/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1200/events", "html_url": "https://github.com/pallets/jinja/issues/1200", "id": 607601334, "node_id": "MDU6SXNzdWU2MDc2MDEzMzQ=", "number": 1200, "title": "casting to string via the string filter does not work when using NativeEnvironment", "user": {"login": "mkrizek", "id": 1215518, "node_id": "MDQ6VXNlcjEyMTU1MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1215518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkrizek", "html_url": "https://github.com/mkrizek", "followers_url": "https://api.github.com/users/mkrizek/followers", "following_url": "https://api.github.com/users/mkrizek/following{/other_user}", "gists_url": "https://api.github.com/users/mkrizek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkrizek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkrizek/subscriptions", "organizations_url": "https://api.github.com/users/mkrizek/orgs", "repos_url": "https://api.github.com/users/mkrizek/repos", "events_url": "https://api.github.com/users/mkrizek/events{/privacy}", "received_events_url": "https://api.github.com/users/mkrizek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-27T14:34:49Z", "updated_at": "2020-04-27T16:05:35Z", "closed_at": "2020-04-27T16:05:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think the following test case should pass:\r\n```python\r\ndef test_cast_string(env):\r\n    t = env.from_string(\"{{ value|string }}\")\r\n    result = t.render(value=3)\r\n    assert isinstance(result, str)\r\n    assert result == \"3\"\r\n```\r\n\r\nHowever it fails because the string filter is applied before nodes enter `native_concat`. So although the string is returned from the filter, in `native_concat` `\"3\"` is run through `literal_eval` which is of course evaluated to an integer value of `3` which in the end makes the `string` filter seem to be a NOOP.\r\n\r\n```\r\nenv = <jinja2.nativetypes.NativeEnvironment object at 0x7fa893b55d00>\r\n\r\n    def test_cast_string(env):\r\n        t = env.from_string(\"{{ value|string }}\")\r\n        result = t.render(value=3)\r\n>       assert isinstance(result, str)\r\nE       assert False\r\nE        +  where False = isinstance(3, str)\r\n\r\ntests/test_nativetypes.py:43: AssertionError\r\n```\r\n\r\nFirst thought I had was to overwrite the `string` filter for `NativeEnvironment` to add additional quotes around the value so `literal_eval` evaluates it to string.\r\n\r\nInitially I thought this was a result of us removing `preserve_quotes` but it appears to be a different issue and the test case has never worked.\r\n\r\n## Your Environment\r\n* Python version: 3.8.2\r\n* Jinja version: master\r\n\r\ncc @jctanner ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1197", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1197/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1197/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1197/events", "html_url": "https://github.com/pallets/jinja/issues/1197", "id": 604119036, "node_id": "MDU6SXNzdWU2MDQxMTkwMzY=", "number": 1197, "title": "Remove sandbox Python < 3.5 compat", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/1", "html_url": "https://github.com/pallets/jinja/milestone/1", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/1/labels", "id": 1699763, "node_id": "MDk6TWlsZXN0b25lMTY5OTc2Mw==", "number": 1, "title": "3.0.0", "description": "", "creator": {"login": "jeffwidman", "id": 483314, "node_id": "MDQ6VXNlcjQ4MzMxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffwidman", "html_url": "https://github.com/jeffwidman", "followers_url": "https://api.github.com/users/jeffwidman/followers", "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}", "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions", "organizations_url": "https://api.github.com/users/jeffwidman/orgs", "repos_url": "https://api.github.com/users/jeffwidman/repos", "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffwidman/received_events", "type": "User", "site_admin": false}, "open_issues": 4, "closed_issues": 10, "state": "open", "created_at": "2016-04-12T07:31:20Z", "updated_at": "2020-06-22T17:34:41Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-04-21T16:36:23Z", "updated_at": "2020-06-15T18:08:48Z", "closed_at": "2020-06-15T18:08:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Sandbox includes some code to address a Python bug, https://bugs.python.org/issue13598. That issue appears to have been fixed in Python 3.5. Check if `sandbox._MagicFormatMapping` is still needed and remove it.\r\n\r\nhttps://github.com/pallets/jinja/blob/6478c22f29bb85b2bae635602148d95df5e5c7ce/src/jinja2/sandbox.py#L78-L106", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1193", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1193/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1193/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1193/events", "html_url": "https://github.com/pallets/jinja/issues/1193", "id": 600867918, "node_id": "MDU6SXNzdWU2MDA4Njc5MTg=", "number": 1193, "title": "Support python f-strings", "user": {"login": "septatrix", "id": 24257556, "node_id": "MDQ6VXNlcjI0MjU3NTU2", "avatar_url": "https://avatars2.githubusercontent.com/u/24257556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/septatrix", "html_url": "https://github.com/septatrix", "followers_url": "https://api.github.com/users/septatrix/followers", "following_url": "https://api.github.com/users/septatrix/following{/other_user}", "gists_url": "https://api.github.com/users/septatrix/gists{/gist_id}", "starred_url": "https://api.github.com/users/septatrix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/septatrix/subscriptions", "organizations_url": "https://api.github.com/users/septatrix/orgs", "repos_url": "https://api.github.com/users/septatrix/repos", "events_url": "https://api.github.com/users/septatrix/events{/privacy}", "received_events_url": "https://api.github.com/users/septatrix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-16T08:58:46Z", "updated_at": "2020-04-16T13:22:22Z", "closed_at": "2020-04-16T13:16:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://docs.python.org/3/whatsnew/3.6.html#pep-498-formatted-string-literals\r\n\r\n## Expected Behavior\r\nJinja should parse f-strings in templates\r\n\r\n## Actual Behavior\r\nJinja raises a syntax error\r\n\r\n## Template Code\r\n```jinja\r\n{{ f\"\" }}\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nSyntax error in jinja2 template: expected token 'end of print statement', got 'string'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1192", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1192/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1192/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1192/events", "html_url": "https://github.com/pallets/jinja/issues/1192", "id": 600747026, "node_id": "MDU6SXNzdWU2MDA3NDcwMjY=", "number": 1192, "title": "No module named 'pkg_resources'", "user": {"login": "toddmowen", "id": 370691, "node_id": "MDQ6VXNlcjM3MDY5MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/370691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/toddmowen", "html_url": "https://github.com/toddmowen", "followers_url": "https://api.github.com/users/toddmowen/followers", "following_url": "https://api.github.com/users/toddmowen/following{/other_user}", "gists_url": "https://api.github.com/users/toddmowen/gists{/gist_id}", "starred_url": "https://api.github.com/users/toddmowen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/toddmowen/subscriptions", "organizations_url": "https://api.github.com/users/toddmowen/orgs", "repos_url": "https://api.github.com/users/toddmowen/repos", "events_url": "https://api.github.com/users/toddmowen/events{/privacy}", "received_events_url": "https://api.github.com/users/toddmowen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-16T04:54:36Z", "updated_at": "2020-04-16T15:16:14Z", "closed_at": "2020-04-16T15:16:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I suspect that #1169 might not have been reverted cleanly in #1182, since some behaviour has changed for me between 2.11.1 and 2.11.2. No doubt this bites me early and hard because I'm using [pex](https://github.com/pantsbuild/pex) to package my application. But if the issue is similar to pantsbuild/pex#631, then it would be caused by Jinja2 not explicitly declaring the dependency on `setuptools`.\r\n\r\nAnyway, concrete details as per template...\r\n\r\n## Expected Behavior\r\n\r\nMy application was running without exceptions with 2.11.1.\r\n\r\n## Actual Behavior\r\n\r\nBuilt with 2.11.2, when the application is run I encounter:\r\n\r\n```\r\nModuleNotFoundError: No module named 'pkg_resources'\r\n```\r\n\r\n## Template Code\r\n\r\nN/A\r\n\r\n## Full Traceback\r\n\r\n```\r\n[18:13:41][Step 1/1] Traceback (most recent call last):\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/.bootstrap/pex/pex.py\", line 396, in execute\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/.bootstrap/pex/pex.py\", line 328, in _wrap_coverage\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/.bootstrap/pex/pex.py\", line 359, in _wrap_profiling\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/.bootstrap/pex/pex.py\", line 447, in _execute\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/.bootstrap/pex/pex.py\", line 544, in execute_entry\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/.bootstrap/pex/pex.py\", line 551, in execute_module\r\n[18:13:41][Step 1/1]   File \"/usr/local/lib/python3.7/runpy.py\", line 208, in run_module\r\n[18:13:41][Step 1/1]     return _run_code(code, {}, init_globals, run_name, mod_spec)\r\n[18:13:41][Step 1/1]   File \"/usr/local/lib/python3.7/runpy.py\", line 85, in _run_code\r\n[18:13:41][Step 1/1]     exec(code, run_globals)\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/myservice2prod.py\", line 11, in <module>\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/lib/main.py\", line 16, in main\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/lib/main.py\", line 34, in readiness_report\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/lib/main.py\", line 52, in create_report\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/lib/readiness.py\", line 27, in format_readiness_report\r\n[18:13:41][Step 1/1]   File \"/mnt/app/work/71de4152dc3eb41f/myservice2prod-cp37-cp37m-linux_x86_64.pex/lib/readiness.py\", line 15, in format_report\r\n[18:13:41][Step 1/1]   File \"/root/.pex/installed_wheels/d2252becc26cb1cd2188f5504f8ba31b5d69b513/Jinja2-2.11.2-py2.py3-none-any.whl/jinja2/loaders.py\", line 233, in __init__\r\n[18:13:41][Step 1/1]     from pkg_resources import DefaultProvider\r\n[18:13:41][Step 1/1] ModuleNotFoundError: No module named 'pkg_resources'\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.2\r\n* Jinja version: 2.11.2\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1187", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1187/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1187/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1187/events", "html_url": "https://github.com/pallets/jinja/issues/1187", "id": 597712722, "node_id": "MDU6SXNzdWU1OTc3MTI3MjI=", "number": 1187, "title": "Can't handle 'list' and 'dict' typed value in the 'unique' filter", "user": {"login": "userlocalhost", "id": 469934, "node_id": "MDQ6VXNlcjQ2OTkzNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/469934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/userlocalhost", "html_url": "https://github.com/userlocalhost", "followers_url": "https://api.github.com/users/userlocalhost/followers", "following_url": "https://api.github.com/users/userlocalhost/following{/other_user}", "gists_url": "https://api.github.com/users/userlocalhost/gists{/gist_id}", "starred_url": "https://api.github.com/users/userlocalhost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/userlocalhost/subscriptions", "organizations_url": "https://api.github.com/users/userlocalhost/orgs", "repos_url": "https://api.github.com/users/userlocalhost/repos", "events_url": "https://api.github.com/users/userlocalhost/events{/privacy}", "received_events_url": "https://api.github.com/users/userlocalhost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-10T05:59:02Z", "updated_at": "2020-04-12T16:42:57Z", "closed_at": "2020-04-12T16:42:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to let you know that `TypeError` exception would be happened when `list` and `dict` typed value would be passed to the `unique` filter.\r\n\r\nThis is a test code that passes variety of typed value to the `unique` filter. When it's run, the last two processes would be fault.\r\n```\r\nimport jinja2\r\n\r\nexpression = \"\"\"\r\n{%- for val in values|unique -%}\r\n  {{ val }}\r\n{%- endfor %}\r\n\"\"\"\r\n\r\nenv = jinja2.Environment()\r\n\r\nenv.from_string(expression).render(values=[1,2,3,1])                  # PASS\r\nenv.from_string(expression).render(values=['a','b','c','a'])          # PASS\r\nenv.from_string(expression).render(values=[(1,), (2,), (3,), (1,)])   # PASS\r\nenv.from_string(expression).render(values=[[1], [2], [3], [1]])       # NG\r\nenv.from_string(expression).render(values=[{'a':1},{'b':2},{'a':1}])  # NG\r\n```\r\n\r\n## Expected Behavior\r\n```\r\n>>> env.from_string(expression).render(values=[[1], [2], [3], [1]])\r\n'[1][2][3]'\r\n```\r\n```\r\n>>> env.from_string(expression).render(values=[{'a':1},{'b':2},{'a':1}])\r\n\"{'a': 1}{'b': 2}\"\r\n>>> \r\n```\r\n\r\n## Actual Behavior\r\n```\r\n>>> env.from_string(expression).render(values=[[1], [2], [3], [1]])\r\n...\r\nTypeError: unhashable type: 'list'\r\n```\r\n```\r\n>> env.from_string(expression).render(values=[{'a':1},{'b':2},{'a':1}])\r\n...\r\nTypeError: unhashable type: 'dict'\r\n```\r\n\r\n## Full Traceback\r\nThis is an execution result of above code.\r\n```\r\nPython 3.6.9 (default, Nov  7 2019, 10:44:02) \r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import jinja2\r\n>>> \r\n>>> jinja2.__version__\r\n'3.0.0a1'\r\n>>> \r\n>>> expression = \"\"\"\r\n... {%- for val in values|unique -%}\r\n...   {{ val }}\r\n... {%- endfor %}\r\n... \"\"\"\r\n>>> \r\n>>> env = jinja2.Environment()\r\n>>> \r\n>>> env.from_string(expression).render(values=[1,2,3,1])                  # PASS\r\n'123'\r\n>>> env.from_string(expression).render(values=['a','b','c','a'])          # PASS\r\n'abc'\r\n>>> env.from_string(expression).render(values=[(1,), (2,), (3,), (1,)])   # PASS\r\n'(1,)(2,)(3,)'\r\n>>> env.from_string(expression).render(values=[[1], [2], [3], [1]])       # NG\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/vagrant/dev/jinja/.tox/py36/lib/python3.6/site-packages/jinja2/environment.py\", line 1045, in render\r\n    self.environment.handle_exception()\r\n  File \"/home/vagrant/dev/jinja/.tox/py36/lib/python3.6/site-packages/jinja2/environment.py\", line 787, in handle_exception\r\n    raise rewrite_traceback_stack(source=source)\r\n  File \"<template>\", line 2, in top-level template code\r\n  File \"/home/vagrant/dev/jinja/.tox/py36/lib/python3.6/site-packages/jinja2/filters.py\", line 367, in do_unique\r\n    if key not in seen:\r\nTypeError: unhashable type: 'list'\r\n>>> env.from_string(expression).render(values=[{'a':1},{'b':2},{'a':1}])  # NG\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/vagrant/dev/jinja/.tox/py36/lib/python3.6/site-packages/jinja2/environment.py\", line 1045, in render\r\n    self.environment.handle_exception()\r\n  File \"/home/vagrant/dev/jinja/.tox/py36/lib/python3.6/site-packages/jinja2/environment.py\", line 787, in handle_exception\r\n    raise rewrite_traceback_stack(source=source)\r\n  File \"<template>\", line 2, in top-level template code\r\n  File \"/home/vagrant/dev/jinja/.tox/py36/lib/python3.6/site-packages/jinja2/filters.py\", line 367, in do_unique\r\n    if key not in seen:\r\nTypeError: unhashable type: 'dict'\r\n>>> \r\n```\r\n\r\n## Your Environment\r\nPython version: 3.6\r\nJinja version: 3.0.0a1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1186", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1186/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1186/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1186/events", "html_url": "https://github.com/pallets/jinja/issues/1186", "id": 597003142, "node_id": "MDU6SXNzdWU1OTcwMDMxNDI=", "number": 1186, "title": "NativeEnv evals constants twice", "user": {"login": "Qhesz", "id": 5576331, "node_id": "MDQ6VXNlcjU1NzYzMzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5576331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qhesz", "html_url": "https://github.com/Qhesz", "followers_url": "https://api.github.com/users/Qhesz/followers", "following_url": "https://api.github.com/users/Qhesz/following{/other_user}", "gists_url": "https://api.github.com/users/Qhesz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qhesz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qhesz/subscriptions", "organizations_url": "https://api.github.com/users/Qhesz/orgs", "repos_url": "https://api.github.com/users/Qhesz/repos", "events_url": "https://api.github.com/users/Qhesz/events{/privacy}", "received_events_url": "https://api.github.com/users/Qhesz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/5", "html_url": "https://github.com/pallets/jinja/milestone/5", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/5/labels", "id": 5061977, "node_id": "MDk6TWlsZXN0b25lNTA2MTk3Nw==", "number": 5, "title": "2.11.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-02-01T03:36:56Z", "updated_at": "2020-04-13T16:16:51Z", "due_on": null, "closed_at": "2020-04-13T16:16:51Z"}, "comments": 9, "created_at": "2020-04-09T03:58:34Z", "updated_at": "2020-04-27T13:34:22Z", "closed_at": "2020-04-13T15:56:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Rendering in native mode performs ```literal_eval``` twice on constant values, which leads to unexpected behaviour.\r\n\r\n## Expected Behavior\r\n```>>> from jinja2.nativetypes import NativeEnvironment\r\n>>> NativeEnvironment().from_string(r'''0.000{{ a }}''').render({\"a\":7})\r\n0.0007\r\n>>> NativeEnvironment().from_string(r'''0.000{{ 7 }}''').render({\"a\":7})\r\n0.0007\r\n```\r\nTemplates should behave the same way with constants as they do with dynamic variables.\r\n\r\nNothing should be eval'd before the entire template is finished.\r\n\r\n## Actual Behavior\r\n```>>> from jinja2.nativetypes import NativeEnvironment\r\n>>> NativeEnvironment().from_string(r'''0.000{{ a }}''').render({\"a\":7})\r\n0.07\r\n>>> NativeEnvironment().from_string(r'''0.000{{ 7 }}''').render({\"a\":7})\r\n0.0007\r\n>>> NativeEnvironment().from_string(r'''{{b}}{{ a }}''').render({\"a\":7,\"b\":\"0.000\"})\r\n0.0007\r\n```\r\n\r\nIn the first case the constant ```0.000``` gets eval'd at template compile time, and truncated to ```0.0``` before the entire template has been rendered with dynamic data. The template gets eval'd a second time at render time, meaning the constant value has been double eval'd.\r\n\r\nIn the second case the whole template is constant, and gets eval'd in one go at compile time producing different results.\r\n\r\nIn the third case the whole template is dynamic, and gets eval'd in one go at render time.\r\n\r\n\r\n\r\n## Your Environment\r\n* Python version: 3.7.6\r\n* Jinja version: 2.11.1\r\n\r\n## Suggested solution\r\n\r\n\r\n```_output_const_repr()``` should not perform any evals, only ```render()``` should perform one eval at the very end. This seems to me like the only sane way to prevent weird double-eval issues like this one.\r\n\r\nThe ```preserve_quotes``` workaround in ```native_concat``` would no longer be needed with this change. It appears to have been a previous attempt at fixing this class of problems.\r\n\r\nFixing it this way would also fix the same problem in the underlying ```root_render_func``` api:\r\n```\r\n>>> t = NativeEnvironment().from_string(r'''{{ a }}''')\r\n>>> list(t.root_render_func(t.new_context({\"a\":\"7\"}))) \r\n['7']\r\n>>> t = NativeEnvironment().from_string(r'''{{\"7\"}}''')\r\n>>> list(t.root_render_func(t.new_context({\"a\":\"7\"}))) \r\n[7]\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1180", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1180/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1180/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1180/events", "html_url": "https://github.com/pallets/jinja/issues/1180", "id": 589601037, "node_id": "MDU6SXNzdWU1ODk2MDEwMzc=", "number": 1180, "title": "Using namespaces asynchronously raises fatal AttributeError", "user": {"login": "bartfeenstra", "id": 376735, "node_id": "MDQ6VXNlcjM3NjczNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/376735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bartfeenstra", "html_url": "https://github.com/bartfeenstra", "followers_url": "https://api.github.com/users/bartfeenstra/followers", "following_url": "https://api.github.com/users/bartfeenstra/following{/other_user}", "gists_url": "https://api.github.com/users/bartfeenstra/gists{/gist_id}", "starred_url": "https://api.github.com/users/bartfeenstra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bartfeenstra/subscriptions", "organizations_url": "https://api.github.com/users/bartfeenstra/orgs", "repos_url": "https://api.github.com/users/bartfeenstra/repos", "events_url": "https://api.github.com/users/bartfeenstra/events{/privacy}", "received_events_url": "https://api.github.com/users/bartfeenstra/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/5", "html_url": "https://github.com/pallets/jinja/milestone/5", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/5/labels", "id": 5061977, "node_id": "MDk6TWlsZXN0b25lNTA2MTk3Nw==", "number": 5, "title": "2.11.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-02-01T03:36:56Z", "updated_at": "2020-04-13T16:16:51Z", "due_on": null, "closed_at": "2020-04-13T16:16:51Z"}, "comments": 0, "created_at": "2020-03-28T15:42:40Z", "updated_at": "2020-03-30T18:34:23Z", "closed_at": "2020-03-30T18:34:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When asynchronously rendering templates that make use of namespaces, rendering fails on `AttributeError: __class__`.\r\n\r\n## Expected Behavior\r\nNo error is raised.\r\n\r\n## Actual Behavior\r\nUsing namespaces when rendering templates asynchronously fails on the `isawaitable()` check performed on `Namespace`.\r\n\r\n## Template Code\r\n```jinja\r\n{% set ns = namespace(foo=[]) %}\r\n```\r\n\r\n## Reproduction:\r\n```python\r\nimport asyncio\r\n\r\nfrom jinja2 import Environment\r\n\r\nasync def main():\r\n    environment = Environment(\r\n        enable_async=True\r\n    )\r\n    template = '{% set ns = namespace(foo=[]) %}'\r\n    await environment.from_string(template).render_async()\r\n\r\nasyncio.get_event_loop().run_until_complete(main())\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/utils.py\", line 699, in __getattribute__\r\n    return self.__attrs[name]\r\nKeyError: '__class__'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"namespace.py\", line 12, in <module>\r\n    asyncio.get_event_loop().run_until_complete(main())\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 616, in run_until_complete\r\n    return future.result()\r\n  File \"namespace.py\", line 10, in main\r\n    await environment.from_string(template).render_async()\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 65, in render_async\r\n    return self.environment.handle_exception()\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 25, in concat_async\r\n    await collect()\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 22, in collect\r\n    async for event in async_gen:\r\n  File \"<template>\", line 1, in top-level template code\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 173, in auto_await\r\n    if inspect.isawaitable(value):\r\n  File \"/usr/lib/python3.8/inspect.py\", line 234, in isawaitable\r\n    isinstance(object, collections.abc.Awaitable))\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/abc.py\", line 98, in __instancecheck__\r\n    return _abc_instancecheck(cls, instance)\r\n  File \"/home/bart/tmp/jinja2-async-namespacce/venv/lib/python3.8/site-packages/jinja2/utils.py\", line 701, in __getattribute__\r\n    raise AttributeError(name)\r\nAttributeError: __class__\r\n```\r\n\r\n## Your Environment\r\n* Python version: Python 3.8\r\n* Jinja version: 2.11.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1177", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1177/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1177/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1177/events", "html_url": "https://github.com/pallets/jinja/issues/1177", "id": 587921936, "node_id": "MDU6SXNzdWU1ODc5MjE5MzY=", "number": 1177, "title": "Infinite recursion when using with Django SimpleLazyObject", "user": {"login": "rkashapov", "id": 3455996, "node_id": "MDQ6VXNlcjM0NTU5OTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/3455996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rkashapov", "html_url": "https://github.com/rkashapov", "followers_url": "https://api.github.com/users/rkashapov/followers", "following_url": "https://api.github.com/users/rkashapov/following{/other_user}", "gists_url": "https://api.github.com/users/rkashapov/gists{/gist_id}", "starred_url": "https://api.github.com/users/rkashapov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rkashapov/subscriptions", "organizations_url": "https://api.github.com/users/rkashapov/orgs", "repos_url": "https://api.github.com/users/rkashapov/repos", "events_url": "https://api.github.com/users/rkashapov/events{/privacy}", "received_events_url": "https://api.github.com/users/rkashapov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/5", "html_url": "https://github.com/pallets/jinja/milestone/5", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/5/labels", "id": 5061977, "node_id": "MDk6TWlsZXN0b25lNTA2MTk3Nw==", "number": 5, "title": "2.11.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-02-01T03:36:56Z", "updated_at": "2020-04-13T16:16:51Z", "due_on": null, "closed_at": "2020-04-13T16:16:51Z"}, "comments": 2, "created_at": "2020-03-25T19:00:27Z", "updated_at": "2020-03-27T17:48:05Z", "closed_at": "2020-03-27T17:05:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI use an object of type `django.utils.functional.SimpleLazyObject` as a template variable.\r\nWhen an `AttributeError` happens in the inner of a lazy object the template rendering falls into infinite recursion.\r\n\r\n## Expected Behavior\r\nA traceback about the attribute error is displayed.\r\n\r\n## Actual Behavior\r\nTemplate rendering falls into infinite recursion.\r\n\r\n## Minimal Code To Reproduce\r\n```python\r\nfrom django.utils.functional import SimpleLazyObject\r\nimport jinja2\r\n\r\ndef raises_attribute_error():\r\n      raise AttributeError()\r\n\r\ntemplate = jinja2.Template('{{ obj.hello.recursion }}')\r\ntemplate.render(obj=SimpleLazyObject(lambda: raises_attribute_error()))\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 10, in <module>\r\n    template.render(obj=SimpleLazyObject(lambda: raises_attribute_error()))\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/jinja2/environment.py\", line 1090, in render\r\n    self.environment.handle_exception()\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"<template>\", line 1, in top-level template code\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/jinja2/environment.py\", line 471, in getattr\r\n    return getattr(obj, attribute)\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/jinja2/runtime.py\", line 738, in _undefined_message\r\n    object_type_repr(self._undefined_obj),\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/jinja2/utils.py\", line 169, in object_type_repr\r\n    if obj.__class__.__module__ in (\"__builtin__\", \"builtins\"):\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/django/utils/functional.py\", line 224, in inner\r\n    self._setup()\r\n  File \"/Users/rkashapov/Library/Python/3.7/lib/python/site-packages/django/utils/functional.py\", line 360, in _setup\r\n    self._wrapped = self._setupfunc()\r\n  File \"main.py\", line 10, in <lambda>\r\n    template.render(obj=SimpleLazyObject(lambda: raises_attribute_error()))\r\n  File \"main.py\", line 6, in raises_attribute_error\r\n    raise AttributeError()\r\nRecursionError: maximum recursion depth exceeded while calling a Python object\r\n```\r\n\r\n## Your Environment\r\n* Python version:  3.7.3\r\n* Jinja version: 2.11.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1176", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1176/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1176/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1176/events", "html_url": "https://github.com/pallets/jinja/issues/1176", "id": 586242823, "node_id": "MDU6SXNzdWU1ODYyNDI4MjM=", "number": 1176, "title": "Cannot set dictionary keys", "user": {"login": "TheLastProject", "id": 1885159, "node_id": "MDQ6VXNlcjE4ODUxNTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1885159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheLastProject", "html_url": "https://github.com/TheLastProject", "followers_url": "https://api.github.com/users/TheLastProject/followers", "following_url": "https://api.github.com/users/TheLastProject/following{/other_user}", "gists_url": "https://api.github.com/users/TheLastProject/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheLastProject/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheLastProject/subscriptions", "organizations_url": "https://api.github.com/users/TheLastProject/orgs", "repos_url": "https://api.github.com/users/TheLastProject/repos", "events_url": "https://api.github.com/users/TheLastProject/events{/privacy}", "received_events_url": "https://api.github.com/users/TheLastProject/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-03-23T14:15:54Z", "updated_at": "2020-03-23T14:57:30Z", "closed_at": "2020-03-23T14:17:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used [j2cli](https://pypi.org/project/j2cli/) to run my example, hope that's okay.\r\n\r\nI've looked through the documentation but I couldn't find something explaining this would not be possible. I also found no other issues reporting this. As this is a valid Python operation, I would expect this to work.\r\n\r\n## Expected Behavior\r\nSetting a dictionary key with `set` should update that dictionary key\r\n\r\n## Actual Behavior\r\nJinja2 returns a `TemplateSyntaxError`\r\n\r\n## Template Code\r\n```jinja\r\n{% set data = {\"foo\": \"bar\"} %}\r\ndata should be {\"foo\": \"bar\"}: \"{{ data }}\" {# succesful #}\r\n{% set data2 = data[\"foo\"] %}\r\nassigning a key's value to a variable goes fine: \"{{ data2 }}\"\r\n{% set data[\"foo\"] = \"barbar\" %} {# assigning a variable to a key causes a crash #}\r\n\"{{ data }}\"\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/j2\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/j2cli/cli.py\", line 206, in main\r\n    sys.argv[1:]\r\n  File \"/usr/local/lib/python3.7/site-packages/j2cli/cli.py\", line 186, in render_command\r\n    result = renderer.render(args.template, context)\r\n  File \"/usr/local/lib/python3.7/site-packages/j2cli/cli.py\", line 86, in render\r\n    .get_template(template_path) \\\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/environment.py\", line 883, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/environment.py\", line 857, in _load_template\r\n    template = self.loader.load(self, name, globals)\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/loaders.py\", line 129, in load\r\n    code = environment.compile(source, name, filename)\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/environment.py\", line 638, in compile\r\n    self.handle_exception(source=source_hint)\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/Users/sylviavanos/minimal_example.j2\", line 3, in template\r\n    {% set data[\"foo\"] = \"barbar\" %} {# crash! #}\r\njinja2.exceptions.TemplateSyntaxError: expected token 'end of statement block', got '['\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7\r\n* Jinja version: 2.11.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1175", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1175/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1175/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1175/events", "html_url": "https://github.com/pallets/jinja/issues/1175", "id": 585816175, "node_id": "MDU6SXNzdWU1ODU4MTYxNzU=", "number": 1175, "title": "Allow xmlattr to generate HTML boolean attributes", "user": {"login": "septatrix", "id": 24257556, "node_id": "MDQ6VXNlcjI0MjU3NTU2", "avatar_url": "https://avatars2.githubusercontent.com/u/24257556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/septatrix", "html_url": "https://github.com/septatrix", "followers_url": "https://api.github.com/users/septatrix/followers", "following_url": "https://api.github.com/users/septatrix/following{/other_user}", "gists_url": "https://api.github.com/users/septatrix/gists{/gist_id}", "starred_url": "https://api.github.com/users/septatrix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/septatrix/subscriptions", "organizations_url": "https://api.github.com/users/septatrix/orgs", "repos_url": "https://api.github.com/users/septatrix/repos", "events_url": "https://api.github.com/users/septatrix/events{/privacy}", "received_events_url": "https://api.github.com/users/septatrix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-22T21:26:08Z", "updated_at": "2020-04-21T17:09:10Z", "closed_at": "2020-04-21T17:09:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Expected Behavior\r\nPassing a dict with boolean values to `xmlattr` should add them as HTML boolean attributes i.e. without a value or with its name as a value\r\n\r\n## Actual Behavior\r\nThe attribute gets inserted with `True` respectively `False` as its value\r\n\r\n## Template Code\r\n```jinja\r\n{{ {'hidden': True}|xmlattr }}\r\n```\r\n\r\n## Proposal\r\nAdd an option (e.g. `html_style`) to the `xmlattr` filter or create a new filter called `htmlattr`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1173", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1173/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1173/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1173/events", "html_url": "https://github.com/pallets/jinja/issues/1173", "id": 585187519, "node_id": "MDU6SXNzdWU1ODUxODc1MTk=", "number": 1173, "title": "Render datetime.datetime as string when in object.", "user": {"login": "comtihon", "id": 1421547, "node_id": "MDQ6VXNlcjE0MjE1NDc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1421547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comtihon", "html_url": "https://github.com/comtihon", "followers_url": "https://api.github.com/users/comtihon/followers", "following_url": "https://api.github.com/users/comtihon/following{/other_user}", "gists_url": "https://api.github.com/users/comtihon/gists{/gist_id}", "starred_url": "https://api.github.com/users/comtihon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comtihon/subscriptions", "organizations_url": "https://api.github.com/users/comtihon/orgs", "repos_url": "https://api.github.com/users/comtihon/repos", "events_url": "https://api.github.com/users/comtihon/events{/privacy}", "received_events_url": "https://api.github.com/users/comtihon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-20T16:29:26Z", "updated_at": "2020-03-20T17:03:16Z", "closed_at": "2020-03-20T16:32:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I faced an issue with datetime.datetime being rendered as string when in object.\r\nThis works fine:\r\n```\r\ntemplate = Template(source)\r\ntemplate.render('{{ date }}', dict(date=datetime.datetime.now()))\r\n```\r\nreturns `'2020-03-20 17:25:12.964967'`\r\n\r\nThis renders date as string:\r\n```\r\ntemplate = Template(source)\r\ntemplate.render('{{ object_with_date }}', dict(object_with_date={'date': datetime.datetime.now()}))\r\n```\r\nexpected:\r\n`'{\\'object\\':\\'2020-03-20 17:25:12.964967\\'}`\r\n\r\ngot:\r\n`'{\\'object\\': datetime.datetime(2020, 3, 20, 17, 25, 12, 964967)}'`\r\n\r\npython version: 3.7\r\njinja version: 2.11.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1168", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1168/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1168/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1168/events", "html_url": "https://github.com/pallets/jinja/issues/1168", "id": 578529847, "node_id": "MDU6SXNzdWU1Nzg1Mjk4NDc=", "number": 1168, "title": "jinja2 no longer supports the pytest loader", "user": {"login": "gaborbernat", "id": 690238, "node_id": "MDQ6VXNlcjY5MDIzOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/690238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaborbernat", "html_url": "https://github.com/gaborbernat", "followers_url": "https://api.github.com/users/gaborbernat/followers", "following_url": "https://api.github.com/users/gaborbernat/following{/other_user}", "gists_url": "https://api.github.com/users/gaborbernat/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaborbernat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaborbernat/subscriptions", "organizations_url": "https://api.github.com/users/gaborbernat/orgs", "repos_url": "https://api.github.com/users/gaborbernat/repos", "events_url": "https://api.github.com/users/gaborbernat/events{/privacy}", "received_events_url": "https://api.github.com/users/gaborbernat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/1", "html_url": "https://github.com/pallets/jinja/milestone/1", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/1/labels", "id": 1699763, "node_id": "MDk6TWlsZXN0b25lMTY5OTc2Mw==", "number": 1, "title": "3.0.0", "description": "", "creator": {"login": "jeffwidman", "id": 483314, "node_id": "MDQ6VXNlcjQ4MzMxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffwidman", "html_url": "https://github.com/jeffwidman", "followers_url": "https://api.github.com/users/jeffwidman/followers", "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}", "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions", "organizations_url": "https://api.github.com/users/jeffwidman/orgs", "repos_url": "https://api.github.com/users/jeffwidman/repos", "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffwidman/received_events", "type": "User", "site_admin": false}, "open_issues": 4, "closed_issues": 10, "state": "open", "created_at": "2016-04-12T07:31:20Z", "updated_at": "2020-06-22T17:34:41Z", "due_on": null, "closed_at": null}, "comments": 18, "created_at": "2020-03-10T12:01:15Z", "updated_at": "2020-04-13T16:19:29Z", "closed_at": "2020-03-30T20:03:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently, jinja2 expects either _path defined or get_filenames: https://github.com/pallets/jinja/blob/master/src/jinja2/loaders.py#L262-L281\r\n\r\nThe pytest assertion rewriter defines neither (see https://github.com/pytest-dev/pytest/blob/master/src/_pytest/assertion/rewrite.py#L48), and as such running a test suite on a source code that has the following global:\r\n\r\n```python\r\nfrom jinja2 import PackageLoader\r\nLOADER = PackageLoader(__name__, \"templates\")\r\n```\r\n\r\nwill fail with:\r\n\r\n```\r\n    raise ValueError(\r\nE   ValueError: The 'xxx' package was not installed in a way that PackageLoader understands.\r\n```\r\n\r\nNot sure if here jinja2 needs to support more ways to get the template rooot, or pytest loader is missing some methods.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1165", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1165/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1165/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1165/events", "html_url": "https://github.com/pallets/jinja/issues/1165", "id": 578007647, "node_id": "MDU6SXNzdWU1NzgwMDc2NDc=", "number": 1165, "title": "How can I break a long Jinja if expression???", "user": {"login": "larryw3i", "id": 24457116, "node_id": "MDQ6VXNlcjI0NDU3MTE2", "avatar_url": "https://avatars0.githubusercontent.com/u/24457116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larryw3i", "html_url": "https://github.com/larryw3i", "followers_url": "https://api.github.com/users/larryw3i/followers", "following_url": "https://api.github.com/users/larryw3i/following{/other_user}", "gists_url": "https://api.github.com/users/larryw3i/gists{/gist_id}", "starred_url": "https://api.github.com/users/larryw3i/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larryw3i/subscriptions", "organizations_url": "https://api.github.com/users/larryw3i/orgs", "repos_url": "https://api.github.com/users/larryw3i/repos", "events_url": "https://api.github.com/users/larryw3i/events{/privacy}", "received_events_url": "https://api.github.com/users/larryw3i/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-09T15:49:55Z", "updated_at": "2020-03-14T21:15:49Z", "closed_at": "2020-03-09T15:51:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nHow can I break a long Jinja if expression???\r\n\r\n```jinja\r\n{% if request.GET.filter == 'aaaaaaaa' or bbbbb.paginator.num_pages > ccccc.paginator.num_pages %}\r\n```\r\nwhich more than 80 words.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1159", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1159/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1159/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1159/events", "html_url": "https://github.com/pallets/jinja/issues/1159", "id": 572216439, "node_id": "MDU6SXNzdWU1NzIyMTY0Mzk=", "number": 1159, "title": "Weird behavior of NativeEnvironment which causes duplicated elements in Jinja 2.10.x", "user": {"login": "tonyseek", "id": 624598, "node_id": "MDQ6VXNlcjYyNDU5OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/624598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tonyseek", "html_url": "https://github.com/tonyseek", "followers_url": "https://api.github.com/users/tonyseek/followers", "following_url": "https://api.github.com/users/tonyseek/following{/other_user}", "gists_url": "https://api.github.com/users/tonyseek/gists{/gist_id}", "starred_url": "https://api.github.com/users/tonyseek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tonyseek/subscriptions", "organizations_url": "https://api.github.com/users/tonyseek/orgs", "repos_url": "https://api.github.com/users/tonyseek/repos", "events_url": "https://api.github.com/users/tonyseek/events{/privacy}", "received_events_url": "https://api.github.com/users/tonyseek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-27T16:54:40Z", "updated_at": "2020-03-10T14:58:56Z", "closed_at": "2020-03-10T14:58:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n```\r\n>>> print(NativeEnvironment().from_string('{{ \"tr\" }} ue').render())\r\ntr ue\r\n```\r\n\r\n## Actual Behavior\r\n\r\nIn Jinja2 `2.10.1` (the version used by [kubespray](https://github.com/kubernetes-sigs/kubespray)) and `2.10.3` (the latest version of 2.10.x)\r\n\r\n```\r\n>>> print(NativeEnvironment().from_string('{{ \"tr\" }} ue').render())\r\ntr uetr ue\r\n```\r\n\r\nNevertheless, everything works as expected in Jinja2 `2.11.1` (the latest major version).\r\n\r\n## Template Code\r\n``` python\r\nPython 3.7.3 (default, Dec 13 2019, 19:58:14)\r\n[Clang 11.0.0 (clang-1100.0.33.17)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import jinja2\r\n>>> from jinja2.nativetypes import NativeEnvironment\r\n>>>\r\n>>> print(jinja2.__version__)\r\n2.10.3\r\n\r\nenv = NativeEnvironment()\r\nprint(env.from_string('{{ \"tr\" }} ue').render()) >>>\r\n>>> env = NativeEnvironment()\r\n>>> print(env.from_string('{{ \"tr\" }} ue').render())\r\ntr uetr ue\r\n>>>\r\n```\r\n\r\n## Full Traceback\r\n\r\nNone\r\n\r\n## Your Environment\r\n* Python version: 3.7.3\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1162", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1162/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1162/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1162/events", "html_url": "https://github.com/pallets/jinja/issues/1162", "id": 572912025, "node_id": "MDU6SXNzdWU1NzI5MTIwMjU=", "number": 1162, "title": "Traceback formatting in Python 3.6 32-bit Windows causes hang", "user": {"login": "samuelchen", "id": 22304, "node_id": "MDQ6VXNlcjIyMzA0", "avatar_url": "https://avatars0.githubusercontent.com/u/22304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuelchen", "html_url": "https://github.com/samuelchen", "followers_url": "https://api.github.com/users/samuelchen/followers", "following_url": "https://api.github.com/users/samuelchen/following{/other_user}", "gists_url": "https://api.github.com/users/samuelchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuelchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuelchen/subscriptions", "organizations_url": "https://api.github.com/users/samuelchen/orgs", "repos_url": "https://api.github.com/users/samuelchen/repos", "events_url": "https://api.github.com/users/samuelchen/events{/privacy}", "received_events_url": "https://api.github.com/users/samuelchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 357062399, "node_id": "MDU6TGFiZWwzNTcwNjIzOTk=", "url": "https://api.github.com/repos/pallets/jinja/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/5", "html_url": "https://github.com/pallets/jinja/milestone/5", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/5/labels", "id": 5061977, "node_id": "MDk6TWlsZXN0b25lNTA2MTk3Nw==", "number": 5, "title": "2.11.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-02-01T03:36:56Z", "updated_at": "2020-04-13T16:16:51Z", "due_on": null, "closed_at": "2020-04-13T16:16:51Z"}, "comments": 12, "created_at": "2020-02-27T09:32:08Z", "updated_at": "2020-02-29T03:08:22Z", "closed_at": "2020-02-29T03:08:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI was facing an issue when using incorrect variable name in `Flask` template. An dash \"-\" linked variable name in template cause Flask to hang without throwing any exception.\r\n\r\nAt first I doubt it's `Jinja` issue but I found Jinja raised the exception and `Werkzeug` handled it.\r\n\r\nEventually, I found an endless loop in `Python\\Lib\\traceback.py` to walk trackback stacks. The \r\ntrackbacks are stored in a link which nodes point to next. In `flask\\templating.py`, \r\n`flask\\app.py` and `werkzeug\\debug\\tbtools.py`, the exception was catched. In \r\n`handle_exception()` of `flask\\app.py`, `Werkzeug` wants to log it and print it out. \r\n\r\nThe trackback link has looped reference as below picture.\r\n\r\n![](http://blog.samuelchen.net/Flask-Werkzeug-templating-caused-trackback-loop-issue/flask_tb_next_loop_ref.png)\r\n\r\nHope its helpful. Thanks you.\r\n\r\n### Expected Behavior\r\nRender variable out or throw exception out.\r\n\r\n```python\r\nimport sys\r\nfrom flask import Flask, request, render_template_string, make_response, url_for, redirect\r\n\r\n### {{ font-size }} causes app hang ###\r\n\r\napp = Flask(__name__)\r\n\r\ntemplate_page = '''\r\n<html>\r\n<head>\r\n<meta charset=\"{{ encoding }}\" />\r\n<meta http-equiv=\"content-type\" content=\"text/html; charset={{ encoding }}\" />\r\n<style type=\"text/css\">\r\n  body, pre, p, div, input, h1,h2,h3,h4,h5 {\r\n    font-family : Consolas, Courier New;\r\n  }\r\n</style>\r\n</head>\r\n<body>\r\n    <div id=\"wrapper\" style=\"font-size:{{ font-size }}em\">\r\n        {{ content | safe }}\r\n    </div>\r\n</body>'''\r\n\r\n\r\n@app.route('/', methods=['GET'])\r\ndef index():\r\n    context = {\r\n        \"encoding\": 'utf-8',\r\n        \"font-size\": 0.9,\r\n        \"content\": 'hello flask'\r\n    }\r\n    resp = make_response(render_template_string(template_page, **context))\r\n    resp.headers['Content-Type'] = 'text/html; charset=utf-8'\r\n    return resp\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    # app.run(debug=True, host='0.0.0.0', port=8080)\r\n\r\n    app.run()\r\n```\r\n\r\n### Actual Behavior\r\nApp hangs.\r\n\r\n```pytb\r\nN/A\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 3.6.8\r\n* Flask version: 1.1.1\r\n* Werkzeug version: 0.16.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1158", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1158/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1158/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1158/events", "html_url": "https://github.com/pallets/jinja/issues/1158", "id": 569778925, "node_id": "MDU6SXNzdWU1Njk3Nzg5MjU=", "number": 1158, "title": "Tests are causing segmentation fault on python 2.7 32bit", "user": {"login": "rnhmjoj", "id": 2817565, "node_id": "MDQ6VXNlcjI4MTc1NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2817565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rnhmjoj", "html_url": "https://github.com/rnhmjoj", "followers_url": "https://api.github.com/users/rnhmjoj/followers", "following_url": "https://api.github.com/users/rnhmjoj/following{/other_user}", "gists_url": "https://api.github.com/users/rnhmjoj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rnhmjoj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rnhmjoj/subscriptions", "organizations_url": "https://api.github.com/users/rnhmjoj/orgs", "repos_url": "https://api.github.com/users/rnhmjoj/repos", "events_url": "https://api.github.com/users/rnhmjoj/events{/privacy}", "received_events_url": "https://api.github.com/users/rnhmjoj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T10:56:09Z", "updated_at": "2020-02-24T13:36:08Z", "closed_at": "2020-02-24T13:36:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know, this setup is pretty obsoleted but on NixOS we build and run tests for all python packages on both x86_64 and i686 and this one is causing many failures. It would be good to know what's the issue before disabling the tests.\r\n\r\nThe first failing test is `test_elif_deep`, there are others but I haven't investigated them.\r\nThe segfault appears to be in the python garbage collector, so my best guess is some C library has left a corrupted python object around.\r\n\r\n## Valgrind trace\r\n\r\n`valgrind --tool=memcheck --leak-check=full python -m pytest -v`\r\n\r\n```valgrind\r\ntests/test_core_tags.py::TestIfCondition::test_elif_deep ==44== Invalid read of size 1\r\n==44==    at 0x418A6BB: visit_decref (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x417D97C: tb_traverse (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x418AAAF: collect (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x418B93D: _PyObject_GC_Malloc (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x418B99B: _PyObject_GC_New (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x40FB31A: tuple_iter (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x409C279: PyObject_GetIter (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x509A3DA: izip_new (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/python2.7/lib-dynload/itertools.so)\r\n==44==    by 0x4101E12: type_call (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x409AAAC: PyObject_Call (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x414873D: PyEval_EvalFrameEx (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x414F88F: PyEval_EvalCodeEx (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==  Address 0x55 is not stack'd, malloc'd or (recently) free'd\r\n==44==\r\n==44==\r\n==44== Process terminating with default action of signal 11 (SIGSEGV)\r\n==44==  Access not within mapped region at address 0x55\r\n==44==    at 0x418A6BB: visit_decref (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x417D97C: tb_traverse (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x418AAAF: collect (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x418B93D: _PyObject_GC_Malloc (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x418B99B: _PyObject_GC_New (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x40FB31A: tuple_iter (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x409C279: PyObject_GetIter (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x509A3DA: izip_new (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/python2.7/lib-dynload/itertools.so)\r\n==44==    by 0x4101E12: type_call (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x409AAAC: PyObject_Call (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x414873D: PyEval_EvalFrameEx (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n==44==    by 0x414F88F: PyEval_EvalCodeEx (in /nix/store/4kn3zpmb1j091lp95n63wwhsnjcbrw5g-python-2.7.17/lib/libpython2.7.so.1.0)\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: python 2.7.17\r\n* Jinja version: 2.11 or later\r\n* Markupsafe: 1.0, 1.1.0, 1.1.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1157", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1157/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1157/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1157/events", "html_url": "https://github.com/pallets/jinja/issues/1157", "id": 567161904, "node_id": "MDU6SXNzdWU1NjcxNjE5MDQ=", "number": 1157, "title": "filter: titlecase() - alternative to title()", "user": {"login": "joedf", "id": 3848219, "node_id": "MDQ6VXNlcjM4NDgyMTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/3848219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joedf", "html_url": "https://github.com/joedf", "followers_url": "https://api.github.com/users/joedf/followers", "following_url": "https://api.github.com/users/joedf/following{/other_user}", "gists_url": "https://api.github.com/users/joedf/gists{/gist_id}", "starred_url": "https://api.github.com/users/joedf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joedf/subscriptions", "organizations_url": "https://api.github.com/users/joedf/orgs", "repos_url": "https://api.github.com/users/joedf/repos", "events_url": "https://api.github.com/users/joedf/events{/privacy}", "received_events_url": "https://api.github.com/users/joedf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-18T21:13:56Z", "updated_at": "2020-02-18T22:07:36Z", "closed_at": "2020-02-18T21:25:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Suggestion for<sup>1</sup> the<sup>1</sup> Current Implementation\r\nThis isn't really a bug, more of an observation with a proposed alternative. \r\nThe current title() filter is not very useful. Since all words are capitalized (including short words like of, the, to, etc.) and its effects can be achieved with a simple css rule:\r\n```css\r\ntext-transform: capitalize;\r\n```\r\n**1**: see what I did there? ;)\r\n\r\n## Current Behaviour\r\n`the foo of the bar` -> `The Foo Of The Bar`\r\n\r\n## Expected Behaviour\r\n`the foo of the bar` -> `The Foo of the Bar`\r\n\r\n## Alternative Implementation\r\nCurrently, a \"truer\" titlecase, in webdev, is usually achieved with javascript or something else (as far as I know), which kind of defeats the purpose of using jinja for this particular case. That said, custom filters allow for flexibility around this. \ud83d\udc4d \r\n\r\nA common alternative in python is: https://pypi.org/project/titlecase/\r\nHowever, I've written a shorter alternative: https://gist.github.com/joedf/e94fe2a9ef949a289737dd5a4bca4e3a\r\n\r\n## Environment\r\n* Python version: 3.7.3 x64\r\n* Jinja version: 2.11.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1155", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1155/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1155/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1155/events", "html_url": "https://github.com/pallets/jinja/issues/1155", "id": 566422685, "node_id": "MDU6SXNzdWU1NjY0MjI2ODU=", "number": 1155, "title": "{% extends template_obj %} not supported as documentation claims", "user": {"login": "UmbrellaDish", "id": 5980898, "node_id": "MDQ6VXNlcjU5ODA4OTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5980898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/UmbrellaDish", "html_url": "https://github.com/UmbrellaDish", "followers_url": "https://api.github.com/users/UmbrellaDish/followers", "following_url": "https://api.github.com/users/UmbrellaDish/following{/other_user}", "gists_url": "https://api.github.com/users/UmbrellaDish/gists{/gist_id}", "starred_url": "https://api.github.com/users/UmbrellaDish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/UmbrellaDish/subscriptions", "organizations_url": "https://api.github.com/users/UmbrellaDish/orgs", "repos_url": "https://api.github.com/users/UmbrellaDish/repos", "events_url": "https://api.github.com/users/UmbrellaDish/events{/privacy}", "received_events_url": "https://api.github.com/users/UmbrellaDish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-17T16:59:26Z", "updated_at": "2020-02-18T09:11:25Z", "closed_at": "2020-02-17T17:17:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n\r\n[Documentation](https://github.com/pallets/jinja/blob/master/docs/templates.rst#template-objects) reads it is possible to pass a template object to extends-clause that is used as parent template.\r\n\r\n## Actual Behavior\r\n\r\nJinja still evaluates that reference as a string and tries to split it into separate path segments. Apparently extends clause does not call `get_template()` from environment instance but `_load_template()`. Only the former has pass-through functionality for cases where a template object is passed.\r\n\r\n## Template Code\r\n```jinja\r\n{% extends layout %}\r\n{% block content %}\r\n...\r\n{% endblock %}\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\n  File \".../django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \".../django/core/handlers/base.py\", line 115, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \".../django/core/handlers/base.py\", line 113, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \".../myapp/myapp/views.py\", line 16, in htmlpage\r\n    return HttpResponse(template.render(context, request))\r\n  File \".../django/template/backends/jinja2.py\", line 71, in render\r\n    return self.template.render(context)\r\n  File \".../jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \".../jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \".../jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \".../jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"templates/test.html\", line 1, in top-level template code\r\n    {% extends layout %}\r\n  File \".../jinja2/loaders.py\", line 168, in get_source\r\n    pieces = split_template_path(template)\r\n  File \".../jinja2/loaders.py\", line 27, in split_template_path\r\n    for piece in template.split('/'):\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.6.9\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1154", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1154/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1154/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1154/events", "html_url": "https://github.com/pallets/jinja/issues/1154", "id": 565979294, "node_id": "MDU6SXNzdWU1NjU5NzkyOTQ=", "number": 1154, "title": "3.0.0a1 fails to install on python 3.4, 3.5, and 2.7", "user": {"login": "wumpus", "id": 2142266, "node_id": "MDQ6VXNlcjIxNDIyNjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/2142266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wumpus", "html_url": "https://github.com/wumpus", "followers_url": "https://api.github.com/users/wumpus/followers", "following_url": "https://api.github.com/users/wumpus/following{/other_user}", "gists_url": "https://api.github.com/users/wumpus/gists{/gist_id}", "starred_url": "https://api.github.com/users/wumpus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wumpus/subscriptions", "organizations_url": "https://api.github.com/users/wumpus/orgs", "repos_url": "https://api.github.com/users/wumpus/repos", "events_url": "https://api.github.com/users/wumpus/events{/privacy}", "received_events_url": "https://api.github.com/users/wumpus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-16T22:09:57Z", "updated_at": "2020-02-16T22:29:40Z", "closed_at": "2020-02-16T22:28:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\ninstalling jinja2 with python 2.7, 3.4, and 3.5 should get a valid package\r\n\r\n## Actual Behavior\r\nI got Jinja2 3.0.0a1, which has f-strings on Python 3.4 and Python 3.5, and setuptools failed on 2.7 with an encoding= keyword problem.\r\n\r\nFull details in https://travis-ci.org/wumpus/warcio/builds/651237313", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1153", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1153/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1153/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1153/events", "html_url": "https://github.com/pallets/jinja/issues/1153", "id": 565500497, "node_id": "MDU6SXNzdWU1NjU1MDA0OTc=", "number": 1153, "title": "0-prefixed attribute in sum causes bad lookup", "user": {"login": "nwg", "id": 423758, "node_id": "MDQ6VXNlcjQyMzc1OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/423758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nwg", "html_url": "https://github.com/nwg", "followers_url": "https://api.github.com/users/nwg/followers", "following_url": "https://api.github.com/users/nwg/following{/other_user}", "gists_url": "https://api.github.com/users/nwg/gists{/gist_id}", "starred_url": "https://api.github.com/users/nwg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nwg/subscriptions", "organizations_url": "https://api.github.com/users/nwg/orgs", "repos_url": "https://api.github.com/users/nwg/repos", "events_url": "https://api.github.com/users/nwg/events{/privacy}", "received_events_url": "https://api.github.com/users/nwg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-14T18:58:35Z", "updated_at": "2020-02-15T18:22:35Z", "closed_at": "2020-02-15T18:22:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nTell us what should happen\r\n1\r\n\r\n## Actual Behavior\r\nTell us what happens instead\r\njinja2.exceptions.UndefinedError: dict object has no element 2\r\n\r\n## Template Code\r\n```jinja\r\njinja2.Template(\"\"\"{{blah | sum(attribute='02')}}\"\"\").render(blah=[{'02': 1}])\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/griswold/.local/share/virtualenvs/racine-schools-aIzBBckh/lib/python3.7/site-packages/jinja2/environment.py\", line 1090, in render\r\n    self.environment.handle_exception()\r\n  File \"/Users/griswold/.local/share/virtualenvs/racine-schools-aIzBBckh/lib/python3.7/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/Users/griswold/.local/share/virtualenvs/racine-schools-aIzBBckh/lib/python3.7/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"<template>\", line 1, in top-level template code\r\n  File \"/Users/griswold/.local/share/virtualenvs/racine-schools-aIzBBckh/lib/python3.7/site-packages/jinja2/filters.py\", line 1009, in do_sum\r\n    return sum(iterable, start)\r\njinja2.exceptions.UndefinedError: dict object has no element 2\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.6\r\n* Jinja version: 2.11.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1151", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1151/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1151/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1151/events", "html_url": "https://github.com/pallets/jinja/issues/1151", "id": 562238940, "node_id": "MDU6SXNzdWU1NjIyMzg5NDA=", "number": 1151, "title": "parentadd2 route should be parentadd", "user": {"login": "ronjohn4", "id": 3393772, "node_id": "MDQ6VXNlcjMzOTM3NzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3393772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronjohn4", "html_url": "https://github.com/ronjohn4", "followers_url": "https://api.github.com/users/ronjohn4/followers", "following_url": "https://api.github.com/users/ronjohn4/following{/other_user}", "gists_url": "https://api.github.com/users/ronjohn4/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronjohn4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronjohn4/subscriptions", "organizations_url": "https://api.github.com/users/ronjohn4/orgs", "repos_url": "https://api.github.com/users/ronjohn4/repos", "events_url": "https://api.github.com/users/ronjohn4/events{/privacy}", "received_events_url": "https://api.github.com/users/ronjohn4/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-09T21:04:16Z", "updated_at": "2020-02-09T21:05:15Z", "closed_at": "2020-02-09T21:05:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nTell us what should happen\r\n\r\n## Actual Behavior\r\nTell us what happens instead\r\n\r\n## Template Code\r\n```jinja\r\nPaste the template code (ideally a minimal example) that causes the issue\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nPaste the full traceback in case there is an exception\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version:\r\n* Jinja version:\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1150", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1150/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1150/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1150/events", "html_url": "https://github.com/pallets/jinja/issues/1150", "id": 561734460, "node_id": "MDU6SXNzdWU1NjE3MzQ0NjA=", "number": 1150, "title": "generate_async() doesn't return an async iterator", "user": {"login": "davidbrochart", "id": 4711805, "node_id": "MDQ6VXNlcjQ3MTE4MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4711805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidbrochart", "html_url": "https://github.com/davidbrochart", "followers_url": "https://api.github.com/users/davidbrochart/followers", "following_url": "https://api.github.com/users/davidbrochart/following{/other_user}", "gists_url": "https://api.github.com/users/davidbrochart/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidbrochart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidbrochart/subscriptions", "organizations_url": "https://api.github.com/users/davidbrochart/orgs", "repos_url": "https://api.github.com/users/davidbrochart/repos", "events_url": "https://api.github.com/users/davidbrochart/events{/privacy}", "received_events_url": "https://api.github.com/users/davidbrochart/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-07T16:15:11Z", "updated_at": "2020-02-07T22:49:18Z", "closed_at": "2020-02-07T21:44:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Expected Behavior\r\n`generate_async` should return an async iterator.\r\n\r\n## Actual Behavior\r\nIt seems to return a generator.\r\n\r\n## Template Code\r\n```python\r\nimport jinja2\r\nimport asyncio\r\n\r\njinja2.Environment(enable_async=True)\r\n\r\nasync def gen_i():\r\n    for i in range(3):\r\n        yield i\r\n        await asyncio.sleep(0.1)\r\n\r\ntpl = jinja2.Template(\"\"\"\\\r\n{% for i in gen_i() %}\r\n{{ i }}\r\n{% endfor %}\r\n\"\"\")\r\n\r\nasync def generate():\r\n    async for m in tpl.generate_async(gen_i=gen_i):\r\n        print(m, end='')\r\n\r\nasyncio.run(generate())\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"async.py\", line 22, in <module>\r\n    asyncio.run(generate())\r\n  File \"/home/david/miniconda3/envs/jinja/lib/python3.8/asyncio/runners.py\", line 43, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/home/david/miniconda3/envs/jinja/lib/python3.8/asyncio/base_events.py\", line 612, in run_until_complete\r\n    return future.result()\r\n  File \"async.py\", line 19, in generate\r\n    async for m in tpl.generate_async(gen_i=gen_i):\r\n  File \"/home/david/miniconda3/envs/jinja/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 35, in generate_async\r\n    yield self.environment.handle_exception()\r\n  File \"/home/david/miniconda3/envs/jinja/lib/python3.8/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/home/david/miniconda3/envs/jinja/lib/python3.8/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\nTypeError: 'async for' requires an object with __aiter__ method, got generator\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.8.1\r\n* Jinja version: 2.11.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1148", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1148/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1148/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1148/events", "html_url": "https://github.com/pallets/jinja/issues/1148", "id": 561511559, "node_id": "MDU6SXNzdWU1NjE1MTE1NTk=", "number": 1148, "title": "Regression: package was not installed in a way that PackageLoader understands.", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-02-07T09:14:14Z", "updated_at": "2020-03-22T15:24:23Z", "closed_at": "2020-03-22T15:24:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nPackageLoader should continue to load from a namespace package even under pytest.\r\n\r\n## Actual Behavior\r\nStarting with jinja2 2.11, the tests for pmxbot have [started failing](https://travis-ci.org/yougov/pmxbot/jobs/647234617?utm_medium=notification&utm_source=github_status). They fail when pytest attempts to rewrite the modules for running under test and in doing so, cause the `jinja2.loaders.PackageLoader` not to recognize the 'pmxbot.web' package. Note that `pmxbot` is a setuptools namespace package.\r\n\r\n## Full Traceback\r\n```pytb\r\npmxbot/web/__main__.py:1: in <module>\r\n    import pmxbot.web.viewer\r\n<frozen importlib._bootstrap>:991: in _find_and_load\r\n    ???\r\n<frozen importlib._bootstrap>:975: in _find_and_load_unlocked\r\n    ???\r\n<frozen importlib._bootstrap>:671: in _load_unlocked\r\n    ???\r\n.tox/python/lib/python3.8/site-packages/_pytest/assertion/rewrite.py:143: in exec_module\r\n    exec(co, module.__dict__)\r\npmxbot/web/viewer.py:24: in <module>\r\n    jenv = jinja2.Environment(loader=jinja2.loaders.PackageLoader('pmxbot.web'))\r\n.tox/python/lib/python3.8/site-packages/jinja2/loaders.py:288: in __init__\r\n    raise ValueError(\r\nE   ValueError: The 'pmxbot.web' package was not installed in a way that PackageLoader understands.\r\n```\r\n\r\nThe error is not triggered when simply importing the package naturally; it only seems to happen during the pytest rewrite.\r\n\r\n## Your Environment\r\n* Python version: 3.8.1\r\n* Jinja version: 2.11.x\r\n\r\nDowngrading to Jinja 2.10.3 works around the failure. I suspect #970 is implicated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1145", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1145/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1145/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1145/events", "html_url": "https://github.com/pallets/jinja/issues/1145", "id": 559344372, "node_id": "MDU6SXNzdWU1NTkzNDQzNzI=", "number": 1145, "title": "Check that contextfunction, etc. is True", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 393940080, "node_id": "MDU6TGFiZWwzOTM5NDAwODA=", "url": "https://api.github.com/repos/pallets/jinja/labels/good%20first%20issue", "name": "good first issue", "color": "0e8a16", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/5", "html_url": "https://github.com/pallets/jinja/milestone/5", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/5/labels", "id": 5061977, "node_id": "MDk6TWlsZXN0b25lNTA2MTk3Nw==", "number": 5, "title": "2.11.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-02-01T03:36:56Z", "updated_at": "2020-04-13T16:16:51Z", "due_on": null, "closed_at": "2020-04-13T16:16:51Z"}, "comments": 2, "created_at": "2020-02-03T21:26:22Z", "updated_at": "2020-02-04T17:02:00Z", "closed_at": "2020-02-04T17:02:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In order to determine if the context should be passed to a function or filter, Jinja has the `contextfunction` and `contextfilter` decorators which set corresponding attributes on the functions. However, they're checked with `if getattr(f, \"contextfunction\", 0)`, which causes issues for objects that are callable and have permissive `__getattr__` functions, such as `Mock`.\r\n\r\nChanging everything to default to `False` and check `is True`, would be good for consistency. \r\n\r\nThe full list is `contextfunction`, `evalcontextfunction`, `environmentfunction`, `contextfilter`, `evalcontextfilter`, and `environmentcontextfilter`.\r\n\r\n_Extracted from https://github.com/pallets/jinja/issues/1139_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1144", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1144/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1144/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1144/events", "html_url": "https://github.com/pallets/jinja/issues/1144", "id": 559160138, "node_id": "MDU6SXNzdWU1NTkxNjAxMzg=", "number": 1144, "title": "ImportError: cannot import name 'ASYNC_FILTERS' from partially initialized module 'jinja2.asyncfilters'", "user": {"login": "sscherfke", "id": 511179, "node_id": "MDQ6VXNlcjUxMTE3OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/511179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sscherfke", "html_url": "https://github.com/sscherfke", "followers_url": "https://api.github.com/users/sscherfke/followers", "following_url": "https://api.github.com/users/sscherfke/following{/other_user}", "gists_url": "https://api.github.com/users/sscherfke/gists{/gist_id}", "starred_url": "https://api.github.com/users/sscherfke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sscherfke/subscriptions", "organizations_url": "https://api.github.com/users/sscherfke/orgs", "repos_url": "https://api.github.com/users/sscherfke/repos", "events_url": "https://api.github.com/users/sscherfke/events{/privacy}", "received_events_url": "https://api.github.com/users/sscherfke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-03T15:34:58Z", "updated_at": "2020-02-03T15:58:15Z", "closed_at": "2020-02-03T15:49:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n`jinja2.asyncfilters` should be importable.\r\n\r\n## Actual Behavior\r\nThe import fails tue to circular dependencies (see next section).\r\n\r\n## Template Code\r\n\u2014\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"$PREFIX/lib/python3.8/site-packages/jinja2/asyncfilters.py\", line 4, in <module>\r\n    from .asyncsupport import auto_aiter\r\n  File \"$PREFIX/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 264, in <module>\r\n    patch_all()\r\n  File \"$PREFIX/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 169, in patch_all\r\n    patch_filters()\r\n  File \"$PREFIX/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 161, in patch_filters\r\n    from .asyncfilters import ASYNC_FILTERS\r\nImportError: cannot import name 'ASYNC_FILTERS' from partially initialized module 'jinja2.asyncfilters' (most likely due to a circular import) ($PREFIX/lib/python3.8/site-packages/jinja2/asyncfilters.py)\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7 and 3.8 on Linux and macOS\r\n* Jinja version: 2.11.*\r\n\r\nThe import works fine in 2.10 but fails in 2.11.0 and 2.11.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1142", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1142/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1142/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1142/events", "html_url": "https://github.com/pallets/jinja/issues/1142", "id": 557558321, "node_id": "MDU6SXNzdWU1NTc1NTgzMjE=", "number": 1142, "title": "Unable to refer to key names that use dot-notation", "user": {"login": "morcef", "id": 15701746, "node_id": "MDQ6VXNlcjE1NzAxNzQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/15701746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morcef", "html_url": "https://github.com/morcef", "followers_url": "https://api.github.com/users/morcef/followers", "following_url": "https://api.github.com/users/morcef/following{/other_user}", "gists_url": "https://api.github.com/users/morcef/gists{/gist_id}", "starred_url": "https://api.github.com/users/morcef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morcef/subscriptions", "organizations_url": "https://api.github.com/users/morcef/orgs", "repos_url": "https://api.github.com/users/morcef/repos", "events_url": "https://api.github.com/users/morcef/events{/privacy}", "received_events_url": "https://api.github.com/users/morcef/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-30T15:10:59Z", "updated_at": "2020-01-30T16:12:13Z", "closed_at": "2020-01-30T16:12:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have generated this bug specifically using the `groupby()` filter, but this seems to be a general problem for all filters that use `_prepare_attribute_parts()`. Because of the `split(\".\")` in `_prepare_attribute_parts()`, one cannot use filters on dicts with key names that contain dot-notation. At least not by passing a string as attribute. https://github.com/pallets/jinja/blob/4b8d839e1ec7ac4c7e42241e9e4279826bcc3580/src/jinja2/filters.py#L125\r\n\r\n## Expected Behavior\r\nInput:\r\n```input\r\ndata = [{'properties': {'first.name': 'John', 'last.name': 'Smith'}}, {'properties': {'first.name': 'Jane', 'last.name': 'Smith'}}]\r\n```\r\nWith this input I would expect the following output:\r\n```output\r\nSmith\r\n```\r\n\r\nThis expected behaviour works with itertools.groupby:\r\n```\r\n>>> people = []\r\n>>> last_names = []\r\n>>> for k, g in itertools.groupby(data, lambda x:x['properties']['last.name']):\r\n...     people.append(list(g))\r\n...     last_names.append(k)\r\n... \r\n>>> last_names\r\n['Smith']\r\n>>> people\r\n[[{'properties': {'first.name': 'John', 'last.name': 'Smith'}}, {'properties': {'first.name': 'Jane', 'last.name': 'Smith'}}]]\r\n```\r\n\r\n## Actual Behavior\r\n\r\nRaises `jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'last'`.\r\n\r\n## Template Code\r\n\r\n```jinja\r\n{% for last_name, people in data|groupby(attribute='properties.last.name') %} \r\n{{ last_name }} \r\n{% endfor %}\r\n```\r\n\r\n## Full Traceback\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/environment.py\", line 1090, in render\r\n    self.environment.handle_exception()\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"<template>\", line 1, in top-level template code\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/filters.py\", line 987, in do_groupby\r\n    for key, values in groupby(sorted(value, key=expr), expr)\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/filters.py\", line 74, in attrgetter\r\n    item = environment.getitem(item, part)\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/environment.py\", line 452, in getitem\r\n    return obj[argument]\r\njinja2.exceptions.UndefinedError: 'dict object' has no attribute 'last'\r\n```\r\n\r\n## Your Environment\r\n\r\n* Python version: 3.7.2\r\n* Jinja version: 2.11.0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1141", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1141/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1141/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1141/events", "html_url": "https://github.com/pallets/jinja/issues/1141", "id": 557509910, "node_id": "MDU6SXNzdWU1NTc1MDk5MTA=", "number": 1141, "title": "'coroutine' object is not subscriptable in async template", "user": {"login": "ddelange", "id": 14880945, "node_id": "MDQ6VXNlcjE0ODgwOTQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/14880945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ddelange", "html_url": "https://github.com/ddelange", "followers_url": "https://api.github.com/users/ddelange/followers", "following_url": "https://api.github.com/users/ddelange/following{/other_user}", "gists_url": "https://api.github.com/users/ddelange/gists{/gist_id}", "starred_url": "https://api.github.com/users/ddelange/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ddelange/subscriptions", "organizations_url": "https://api.github.com/users/ddelange/orgs", "repos_url": "https://api.github.com/users/ddelange/repos", "events_url": "https://api.github.com/users/ddelange/events{/privacy}", "received_events_url": "https://api.github.com/users/ddelange/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1814542669, "node_id": "MDU6TGFiZWwxODE0NTQyNjY5", "url": "https://api.github.com/repos/pallets/jinja/labels/async", "name": "async", "color": "b489d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/4", "html_url": "https://github.com/pallets/jinja/milestone/4", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/4/labels", "id": 5053048, "node_id": "MDk6TWlsZXN0b25lNTA1MzA0OA==", "number": 4, "title": "2.11.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-01-29T14:36:19Z", "updated_at": "2020-01-30T18:10:28Z", "due_on": null, "closed_at": "2020-01-30T18:10:28Z"}, "comments": 13, "created_at": "2020-01-30T13:55:00Z", "updated_at": "2020-01-30T18:10:15Z", "closed_at": "2020-01-30T17:56:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nRendering was succesfull with Jinja2 2.10.3\r\n\r\n## Actual Behavior\r\nWhen upgrading from 2.10.3 to 2.11.0, our async Quart application breaks, HTTP ERROR 500 thrown at user.\r\n\r\n## Template Code\r\nhere, Candidate is a Quart Model which we loop over to show all Candidates in a Demand. I tried extracting the relevant part of the template:\r\n\r\n`simple.html`\r\n```jinja\r\n{% extends \"base.html\" %}\r\n\r\nPaste the template code (ideally a minimal example) that causes the issue\r\n {% for item in candidates %}\r\n <form>\r\n   <div class=\"row result-row\">\r\n   <div class=\"col-6\">\r\n     <h4>\r\n         <a href=\"{{ item.domain }}\" target=\"_blank\">{{ item.unified_domain }}</a>\r\n        <span class=\"badge badge-primary\" title=\"Relevance Score. {{ item.score_message }}\"><small>{{ item.score|round|int }}</small></span>\r\n     </h4>\r\n     <div>\r\n\r\n         {% if item.data['findings'] %}\r\n         <span class=\"badge badge-info\" title=\"Matches\"><small>Google Matches ({{ item.data['findings']|length }})</small></span>\r\n         {% endif  %}\r\n     </div>\r\n\r\n     <div style=\"overflow: hidden; margin-bottom: 10px;\">\r\n\r\n      {% for finding in item.data['findings'][:1] %}\r\n        <b>{{ finding['title'] }}</b>\r\n        <br/>\r\n        <a  target=\"_blank\" href=\"{{ finding['url'] }}\"><small>{{ finding['url'] }}</small></a>\r\n        <br/>\r\n        <p class=\"text-muted\">{{ finding['description'] }}</p>\r\n      {% endfor %}\r\n\r\n     </div>\r\n\r\n   </div>\r\n   </div>\r\n   </form>\r\n {% endfor %}\r\n```\r\n\r\ncalled in Quart via [`quart.render_template`](https://github.com/pgjones/quart/blob/0.10.0/quart/templating.py#L79)\r\n```py\r\nreturn await quart.render_template(\r\n    \"simple.html\",\r\n    demand=demand,\r\n    candidates=candidates,\r\n)\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\n//templates/simple.html:178: RuntimeWarning: coroutine 'auto_await' was never awaited\r\n\r\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\r\nERROR:quart.app:Exception on request GET /demand/96\r\nTraceback (most recent call last):\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/app.py\", line 1524, in handle_request\r\nreturn await self.full_dispatch_request(request_context)\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/app.py\", line 1546, in full_dispatch_request\r\nresult = await self.handle_user_exception(error)\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/app.py\", line 957, in handle_user_exception\r\nraise error\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/app.py\", line 1544, in full_dispatch_request\r\nresult = await self.dispatch_request(request_context)\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/app.py\", line 1592, in dispatch_request\r\nreturn await handler(**request_.view_args)\r\nFile \"server.py\", line 318, in view_demand\r\nall_score_keywords=[x.strip() for x in demand.score_keywords.split(\"\\n\")],\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/templating.py\", line 89, in render_template\r\nreturn await _render(template, context)\r\nFile \"/usr/local/lib/python3.7/site-packages/quart/templating.py\", line 107, in _render\r\nrendered_template = await template.render_async(context)\r\nFile \"/usr/local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 65, in render_async\r\nreturn self.environment.handle_exception()\r\nFile \"/usr/local/lib/python3.7/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\nreraise(*rewrite_traceback_stack(source=source))\r\nFile \"/usr/local/lib/python3.7/site-packages/jinja2/_compat.py\", line 28, in reraise\r\nraise value.with_traceback(tb)\r\nFile \"/usr/local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 25, in concat_async\r\nawait collect()\r\nFile \"/usr/local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 22, in collect\r\nasync for event in async_gen:\r\nFile \"//templates/simple.html\", line 1, in top-level template code\r\n{% extends \"base.html\" %}\r\nFile \"//templates/base.html\", line 43, in top-level template code\r\n{% block content %}\r\nFile \"//templates/simple.html\", line 286, in block \"content\"\r\n{% for finding in item.data['findings'][:1] %}\r\nTypeError: 'coroutine' object is not subscriptable\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.5\r\n* Jinja version: 2.11.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1140", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1140/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1140/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1140/events", "html_url": "https://github.com/pallets/jinja/issues/1140", "id": 557324554, "node_id": "MDU6SXNzdWU1NTczMjQ1NTQ=", "number": 1140, "title": "why jinja2 can not retrieve missing variables when my template start and end strings are different from {{ and }} ?", "user": {"login": "eurydice76", "id": 31923550, "node_id": "MDQ6VXNlcjMxOTIzNTUw", "avatar_url": "https://avatars3.githubusercontent.com/u/31923550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eurydice76", "html_url": "https://github.com/eurydice76", "followers_url": "https://api.github.com/users/eurydice76/followers", "following_url": "https://api.github.com/users/eurydice76/following{/other_user}", "gists_url": "https://api.github.com/users/eurydice76/gists{/gist_id}", "starred_url": "https://api.github.com/users/eurydice76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eurydice76/subscriptions", "organizations_url": "https://api.github.com/users/eurydice76/orgs", "repos_url": "https://api.github.com/users/eurydice76/repos", "events_url": "https://api.github.com/users/eurydice76/events{/privacy}", "received_events_url": "https://api.github.com/users/eurydice76/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-30T07:56:42Z", "updated_at": "2020-01-30T19:10:03Z", "closed_at": "2020-01-30T08:38:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have the following template:\r\n\r\n```python\r\ns = \"\"\"\r\n- \"preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }} \"\r\n- \"no_proxy==[[ no_proxy ]] \"\r\ndisk_size: \"[[ disk_size ]]\"\r\n```\r\n\r\nI use `[[` and `]]` instead of `{{` and `}}` because I do not want `.HTTPIP` and `.HTTPORT` to be rendered.\r\nBased on this, I would like to use `jinja2` to render that string and check that every variable has been actually rendered.\r\n\r\nHere is my code:\r\n\r\n```python\r\nimport jinja2\r\nfrom jinja2.meta import find_undeclared_variables\r\n\r\ns = \"\"\"\r\n- \"preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }} \"\r\n- \"no_proxy==[[ no_proxy ]] \"\r\ndisk_size: \"[[ disk_size ]]\"\r\n\"\"\"\r\n\r\nenv = jinja2.Environment(undefined=jinja2.DebugUndefined, variable_start_string=\"[[\", variable_end_string=\"]]\")\r\ntemplate = env.from_string(s)\r\n\r\nenvironment = {\"disk_size\":1000}\r\n\r\n# Render template without passing all variables\r\nrendered = template.render(**environment)\r\n\r\nprint(rendered)\r\n\r\n# Check if rendering was done correctly\r\nast = env.parse(rendered)\r\nundefined = find_undeclared_variables(ast)  # {'bar', 'baz'}\r\nif undefined:\r\n    print(f'The following variables are undefined: {undefined!r}')\r\n```\r\n\r\nSurprinsingly, I do not get any print message about missing variable while it should be the case for variable `no_proxy`. \r\n\r\nLooking deeper, I realized that after rendering the rendered string is:\r\n\r\n```jinja\r\n- \"preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }} \"\r\n- \"no_proxy=={{ no_proxy }}\"\r\ndisk_size: 1000\r\n```\r\n\r\nSo we can see that the missing variable (`no_proxy`) is not anymore surrounded by `[[` and `]]` but by `{{` and `}}` which might explained why there is no complaint about missing variable.\r\n\r\nIs that a bug or am I doing something wrongly ?\r\n\r\nthanks for your help", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1139", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1139/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1139/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1139/events", "html_url": "https://github.com/pallets/jinja/issues/1139", "id": 556875216, "node_id": "MDU6SXNzdWU1NTY4NzUyMTY=", "number": 1139, "title": "Unexpected interaction with mocks", "user": {"login": "bbc2", "id": 1645335, "node_id": "MDQ6VXNlcjE2NDUzMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1645335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bbc2", "html_url": "https://github.com/bbc2", "followers_url": "https://api.github.com/users/bbc2/followers", "following_url": "https://api.github.com/users/bbc2/following{/other_user}", "gists_url": "https://api.github.com/users/bbc2/gists{/gist_id}", "starred_url": "https://api.github.com/users/bbc2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bbc2/subscriptions", "organizations_url": "https://api.github.com/users/bbc2/orgs", "repos_url": "https://api.github.com/users/bbc2/repos", "events_url": "https://api.github.com/users/bbc2/events{/privacy}", "received_events_url": "https://api.github.com/users/bbc2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-29T13:50:58Z", "updated_at": "2020-02-03T21:22:17Z", "closed_at": "2020-01-29T15:40:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "The bug only affects 2.11.0.  It doesn't occur on 2.10.3.\r\n\r\n```python\r\nfrom unittest import mock\r\n\r\nimport jinja2\r\n\r\nfoo = mock.Mock()\r\nfoo.return_value = \"bar\"\r\ntemplate = jinja2.Template(\"{{ foo() }}\")\r\nprint(template.render(foo=foo))\r\nfoo.assert_called_with()\r\n```\r\n\r\n## Expected Behavior\r\n\r\n```\r\n> python foo.py\r\nbar\r\n```\r\n\r\n## Actual Behavior\r\n\r\n```\r\n> python foo.py\r\nbar\r\nTraceback (most recent call last):\r\n  File \"foo.py\", line 9, in <module>\r\n    foo.assert_called_with()\r\n  File \"/usr/lib/python3.8/unittest/mock.py\", line 907, in assert_called_with\r\n    raise AssertionError(_error_message()) from cause\r\nAssertionError: expected call not found.\r\nExpected: mock()\r\nActual: mock(<Context {'range': <class 'range'>, 'dict': <class 'dict'>, 'lipsum': <function generate_lorem_ipsum at 0x7f8db9caa940>, 'cycler': <class 'jinja2.utils.Cycler'>, 'joiner': <class 'jinja2.utils.Joiner'>, 'namespace': <class 'jinja2.utils.Namespace'>, 'foo': <Mock id='140246696713376'>} of None>)\r\n```\r\n\r\n## Your Environment\r\n\r\n* Python version: 3.8.1\r\n* Jinja version: 2.11.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1138", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1138/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1138/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1138/events", "html_url": "https://github.com/pallets/jinja/issues/1138", "id": 556854670, "node_id": "MDU6SXNzdWU1NTY4NTQ2NzA=", "number": 1138, "title": "lstrip_blocks doesn't preserve space before end block on the same line", "user": {"login": "imphil", "id": 1467123, "node_id": "MDQ6VXNlcjE0NjcxMjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1467123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imphil", "html_url": "https://github.com/imphil", "followers_url": "https://api.github.com/users/imphil/followers", "following_url": "https://api.github.com/users/imphil/following{/other_user}", "gists_url": "https://api.github.com/users/imphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/imphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imphil/subscriptions", "organizations_url": "https://api.github.com/users/imphil/orgs", "repos_url": "https://api.github.com/users/imphil/repos", "events_url": "https://api.github.com/users/imphil/events{/privacy}", "received_events_url": "https://api.github.com/users/imphil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 357062399, "node_id": "MDU6TGFiZWwzNTcwNjIzOTk=", "url": "https://api.github.com/repos/pallets/jinja/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/5", "html_url": "https://github.com/pallets/jinja/milestone/5", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/5/labels", "id": 5061977, "node_id": "MDk6TWlsZXN0b25lNTA2MTk3Nw==", "number": 5, "title": "2.11.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-02-01T03:36:56Z", "updated_at": "2020-04-13T16:16:51Z", "due_on": null, "closed_at": "2020-04-13T16:16:51Z"}, "comments": 13, "created_at": "2020-01-29T13:15:06Z", "updated_at": "2020-04-13T16:19:51Z", "closed_at": "2020-04-13T14:09:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Look at the following template code:\r\n\r\n```jinja2\r\nset_property verilog_define {\r\n  {%- for k, v in vlogdefine.items() %}{{ k }}={{ v|param_value_str }} {% endfor -%}\r\n  } [get_filesets sources_1]\r\n```\r\n\r\nhttps://github.com/olofk/edalize/blob/bdb6c9ccc666e9f60333279ad53ed09cda88b3dc/edalize/templates/vivado/vivado-project.tcl.j2#L27-L29\r\n\r\nUp to Jinja2 2.10.3 this would result in something like\r\n\r\n```\r\nset_property verilog_define {vlogdefine_bool=1 vlogdefine_int=42 vlogdefine_str=hello } [get_filesets sources_1]\r\n```\r\nhttps://github.com/olofk/edalize/blob/bdb6c9ccc666e9f60333279ad53ed09cda88b3dc/tests/test_vivado/test_vivado_0.tcl#L10\r\n\r\n[The code](https://github.com/olofk/edalize/blob/bdb6c9ccc666e9f60333279ad53ed09cda88b3dc/edalize/edatool.py#L81) has `lstrip_blocks = True`.\r\n\r\nNow with 2.11.0 the code is rendered like this:\r\n\r\n```\r\nset_property verilog_define {vlogdefine_bool=1vlogdefine_int=42vlogdefine_str=hello} [get_filesets sources_1]\r\n```\r\n\r\n@towoe bisected the behavior change down to https://github.com/pallets/jinja/commit/7d00a40465c89bee141ab5a3db545a20e7d30509 (by @petee-d in https://github.com/pallets/jinja/issues/857)\r\n\r\nAccording to the [documentation](https://jinja.palletsprojects.com/en/2.11.x/api/)\r\n\r\n> lstrip_blocks\r\n>    If this is set to True leading spaces and tabs are stripped from the start of a line to a block. Defaults to False.\r\n\r\nI don't think the whitespace should be removed before the `endfor`, since that's not whitespace \"from the beginning of the line\". Am I misunderstanding that, or does the new version introduce an unexpected change in behavior?\r\n\r\nPython 3.7.3 (but also happens on 3.5 in CI)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1137", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1137/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1137/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1137/events", "html_url": "https://github.com/pallets/jinja/issues/1137", "id": 556825143, "node_id": "MDU6SXNzdWU1NTY4MjUxNDM=", "number": 1137, "title": "async def in asyncfilters.py", "user": {"login": "svaningelgem", "id": 199434, "node_id": "MDQ6VXNlcjE5OTQzNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/199434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svaningelgem", "html_url": "https://github.com/svaningelgem", "followers_url": "https://api.github.com/users/svaningelgem/followers", "following_url": "https://api.github.com/users/svaningelgem/following{/other_user}", "gists_url": "https://api.github.com/users/svaningelgem/gists{/gist_id}", "starred_url": "https://api.github.com/users/svaningelgem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svaningelgem/subscriptions", "organizations_url": "https://api.github.com/users/svaningelgem/orgs", "repos_url": "https://api.github.com/users/svaningelgem/repos", "events_url": "https://api.github.com/users/svaningelgem/events{/privacy}", "received_events_url": "https://api.github.com/users/svaningelgem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-29T12:17:21Z", "updated_at": "2020-01-29T12:20:29Z", "closed_at": "2020-01-29T12:20:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nDon't give errors\r\n\r\n## Actual Behavior\r\n```\r\npyc file failed to compile successfully (run_command failed)\r\npython_exe_full_path: /home/jenkins/workspace/DQS/StevenVIs_build_tests/conda/bin/python2.7\r\npy_full_path: /home/jenkins/workspace/DQS/StevenVIs_build_tests/conda/lib/python2.7/site-packages/jinja2/ext.py\r\npyc_full_path: /home/jenkins/workspace/DQS/StevenVIs_build_tests/conda/lib/python2.7/site-packages/jinja2/asyncfilters.pyc\r\ncompile rc: 1\r\ncompile stdout: Compiling lib/python2.7/site-packages/jinja2/asyncsupport.py ...\r\n  File \"lib/python2.7/site-packages/jinja2/asyncsupport.py\", line 22\r\n    async def concat_async(async_gen):\r\n            ^\r\nSyntaxError: invalid syntax\r\n \r\nCompiling lib/python2.7/site-packages/jinja2/asyncfilters.py ...\r\n  File \"lib/python2.7/site-packages/jinja2/asyncfilters.py\", line 7\r\n    async def auto_to_seq(value):\r\n            ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\n## Your Environment\r\n* Python version: 2.7\r\n* Jinja version: jinja2-2.10.3\r\n\r\n\r\n## Proposed solution:\r\nRemove 2.7 from the supported Python versions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1135", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1135/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1135/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1135/events", "html_url": "https://github.com/pallets/jinja/issues/1135", "id": 555956184, "node_id": "MDU6SXNzdWU1NTU5NTYxODQ=", "number": 1135, "title": "coroutine object is not iterable error", "user": {"login": "autumnjolitz", "id": 270476, "node_id": "MDQ6VXNlcjI3MDQ3Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/270476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/autumnjolitz", "html_url": "https://github.com/autumnjolitz", "followers_url": "https://api.github.com/users/autumnjolitz/followers", "following_url": "https://api.github.com/users/autumnjolitz/following{/other_user}", "gists_url": "https://api.github.com/users/autumnjolitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/autumnjolitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/autumnjolitz/subscriptions", "organizations_url": "https://api.github.com/users/autumnjolitz/orgs", "repos_url": "https://api.github.com/users/autumnjolitz/repos", "events_url": "https://api.github.com/users/autumnjolitz/events{/privacy}", "received_events_url": "https://api.github.com/users/autumnjolitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1814542669, "node_id": "MDU6TGFiZWwxODE0NTQyNjY5", "url": "https://api.github.com/repos/pallets/jinja/labels/async", "name": "async", "color": "b489d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-28T03:05:54Z", "updated_at": "2020-01-29T07:20:34Z", "closed_at": "2020-01-29T07:12:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nI have a Jinja template that does an if-check and a for loop over a `list`-like (technically it inherits list, proxies several methods) object -- it does not define `__aiter__` at all. \r\n\r\nThis was a simple upgrade from 2.10.3 to 2.11.0. I expected there to be no behavioral differences (async support has been opted into via the following) -\r\n```\r\n@background.on_start\r\nasync def setup_jinja(app, loop):\r\n    app.jinja_env = env = Environment(enable_async=True)\r\n    loader = PackageLoader(\"minions\", \"templates\")\r\n    env.loader = loader\r\n    ...\r\n```\r\n\r\nA variety of synchronous function filters are provided.\r\n\r\n## Actual Behavior\r\nA cryptic `'coroutine' object not iterable` error is thrown. Only wholesale removal of the `{% for ...` and `{% if ` statements avoids any errors.\r\n\r\n## Template Code\r\n```jinja\r\n{%- if training.annotations | map(attribute='type') | to_set | intersects(annotation_types) %}\r\nLast two annotations:\r\n{%- for annotation in training.annotations[-2:] %}\r\n- [{{annotation.type.name}}] {{annotation.message | truncate(200)}}\r\n{%- endfor %}\r\n{%- endif %}\r\n```\r\n\r\nIf I reduce it to just \r\n```jinja\r\nLast two annotations:\r\n{%- for annotation in training.annotations[-2:] %}\r\n- [{{annotation.type.name}}] {{annotation.message | truncate(200)}}\r\n{%- endfor %}\r\n```\r\n\r\nI still get the same error, except the line that is errored is \"Last two annotations\" (which is even more confusing) instead of `{%- if training.annotations | map(attribute='type') | to_set | intersects(annotation_types) %}` as the errored line.\r\n\r\nto_set, intersects are defined and injected with the functions:\r\n\r\n```\r\ndef intersects(item, other):\r\n    if not isinstance(item, (frozenset, set)):\r\n        item = frozenset(item)\r\n    if not isinstance(other, (frozenset, set)):\r\n        other = frozenset(other)\r\n    return item & other\r\n\r\ndef to_set(iterable):\r\n    return frozenset(iterable)\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/worker.py\", line 1116, in _run_task\r\n    task_result = await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/worker.py\", line 281, in __call__\r\n    result = await result\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/training.py\", line 1773, in handle_training_failure\r\n    raise exception\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/worker.py\", line 274, in __call__\r\n    result = await self.func(context, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/training.py\", line 2810, in monitor_validate_stack\r\n    context.jinja_env,\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/training.py\", line 1237, in abort_read_headers\r\n    annotation_types=(AnnotationType.WARNING, AnnotationType.ERROR),\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/utils.py\", line 199, in render_template_raw\r\n    return await template.render_async(context)\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 65, in render_async\r\n    return self.environment.handle_exception()\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 25, in concat_async\r\n    await collect()\r\n  File \"/usr/local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 22, in collect\r\n    async for event in async_gen:\r\n  File \"/usr/local/lib/python3.7/site-packages/minions/templates/training/training_validate_end.jinja\", line 10, in top-level template code\r\n    {%- if training.annotations | map(attribute='type') | to_set | intersects(annotation_types) %}\r\nTypeError: 'coroutine' object is not subscriptable\r\n```\r\n\r\nIf I dump the `f_locals` for the erroring frame via `print(e.__traceback__.tb_next.tb_frame.f_locals)`, I see:\r\n\r\n```\r\n{\r\n    'jinja_environment': <jinja2.environment.Environment object at 0x7f3a5acffb10>,\r\n    'template_name': 'training/training_validate_end.jinja',\r\n    'context': {\r\n        'training': Training(\r\n            annotations=ListInterceptor([\r\n                Annotation(type=<AnnotationType.WARNING: 'warning'>, message='Watch your language! Column at index 0 is rude!', scope='labels', created_date=datetime.datetime(2020, 1, 28, 2, 53, 38))\r\n            ]), ),\r\n        'annotation_types': (<AnnotationType.WARNING: 'warning'>, <AnnotationType.ERROR: 'error'>)\r\n    }, 'template': <Template 'training/training_validate_end.jinja'>\r\n}\r\n```\r\n\r\n## Your Environment\r\n* Python version: Python 3.7.5 (provided via `python:3.7-alpine` docker image)\r\n* Jinja version: 2.11.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1134", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1134/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1134/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1134/events", "html_url": "https://github.com/pallets/jinja/issues/1134", "id": 555876641, "node_id": "MDU6SXNzdWU1NTU4NzY2NDE=", "number": 1134, "title": "Potential indentation issue obscured by error handling?", "user": {"login": "KyKoPho", "id": 7452787, "node_id": "MDQ6VXNlcjc0NTI3ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/7452787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KyKoPho", "html_url": "https://github.com/KyKoPho", "followers_url": "https://api.github.com/users/KyKoPho/followers", "following_url": "https://api.github.com/users/KyKoPho/following{/other_user}", "gists_url": "https://api.github.com/users/KyKoPho/gists{/gist_id}", "starred_url": "https://api.github.com/users/KyKoPho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KyKoPho/subscriptions", "organizations_url": "https://api.github.com/users/KyKoPho/orgs", "repos_url": "https://api.github.com/users/KyKoPho/repos", "events_url": "https://api.github.com/users/KyKoPho/events{/privacy}", "received_events_url": "https://api.github.com/users/KyKoPho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-27T22:39:40Z", "updated_at": "2020-01-27T22:58:47Z", "closed_at": "2020-01-27T22:56:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nIt looks like there might be a problem on the line referenced below.  I think, and I could be mistaken, that the `else` on this line is indented one level too deeply. This line has been causing problems when I access properties, albeit only sometimes.  When I outdented the line in my virtual environment, it appears to fix the problem.\r\n\r\nhttps://github.com/pallets/jinja/blob/bbdafe33ce9f47e3cbfb9415619e354349f11243/src/jinja2/environment.py#L459", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1131", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1131/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1131/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1131/events", "html_url": "https://github.com/pallets/jinja/issues/1131", "id": 555052102, "node_id": "MDU6SXNzdWU1NTUwNTIxMDI=", "number": 1131, "title": "Revert \"Rename to Jinja\"", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 0, "created_at": "2020-01-25T06:56:08Z", "updated_at": "2020-01-27T05:22:29Z", "closed_at": "2020-01-27T05:22:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There has been a lot of internal discussion about the rename during and after #752 and #1121. After some reflection and discussion with the other core maintainers, I've decided to revert the rename.\r\n\r\nThe package name will continue to be \"Jinja2\" and the imports will continue to be `jinja2`. The next release will be Jinja2 2.11, followed by Jinja2 3.0.\r\n\r\nMy initial reasons for going ahead with the rename were for consistency as new major versions were released, and to reduce confusion where users mistakenly depend on, install, or import \"jinja\". After some work, I landed on a compatibility solution I was happy with, where depending on and importing \"jinja2\" would continue to work for the forseable future, so changes could happen incrementally. However, at this point the Jinja community is so established that accomplishing the change, even incrementally, is not worth the time developers could spend on more important issues.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1130", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1130/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1130/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1130/events", "html_url": "https://github.com/pallets/jinja/issues/1130", "id": 554585992, "node_id": "MDU6SXNzdWU1NTQ1ODU5OTI=", "number": 1130, "title": "Template coverage discussion", "user": {"login": "Thomasb81", "id": 1123617, "node_id": "MDQ6VXNlcjExMjM2MTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1123617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thomasb81", "html_url": "https://github.com/Thomasb81", "followers_url": "https://api.github.com/users/Thomasb81/followers", "following_url": "https://api.github.com/users/Thomasb81/following{/other_user}", "gists_url": "https://api.github.com/users/Thomasb81/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thomasb81/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thomasb81/subscriptions", "organizations_url": "https://api.github.com/users/Thomasb81/orgs", "repos_url": "https://api.github.com/users/Thomasb81/repos", "events_url": "https://api.github.com/users/Thomasb81/events{/privacy}", "received_events_url": "https://api.github.com/users/Thomasb81/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-01-24T07:33:29Z", "updated_at": "2020-01-24T23:45:13Z", "closed_at": "2020-01-24T18:00:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\r\nI probably may not use the issue tracking as expected. Sorry about this.\r\n\r\nIn reference to:\r\nhttps://github.com/pallets/jinja/pull/674#issuecomment-549373909\r\nhttps://github.com/pallets/jinja/issues/408#issuecomment-556501327\r\n\r\nGiven following template, helloWorld.text:\r\n```\r\n1\r\n2\r\n3  {% block block1 %}\r\n4     {% if poli %}\r\n5  Hello World\r\n6      {% else %}\r\n7\r\n8\r\n9\r\n10     {% endif %}\r\n11  {% endblock %}\r\n12\r\n```\r\n\r\nProducing such runtime-code where I report the requirement pointed by @davidism  :\r\n- record the start and end line into node structure\r\n- make it appear in the AST \r\n\r\n```from __future__ import division, generator_stop\r\nfrom jinja.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, identity, TemplateNotFound, Namespace, Undefined\r\nname = 'helloWorld.text'\r\n\r\ndef root(context, missing=missing):\r\n    start_line = 1\r\n    end_line = 12\r\n    resolve = context.resolve_or_missing\r\n    undefined = environment.undefined\r\n    cond_expr_undefined = Undefined\r\n    if 0: yield None\r\n    pass\r\n    yield '1\\n2\\n3  '\r\n    yield from context.blocks['block1'][0](context)\r\n    yield '\\n12'\r\n\r\ndef block_block1(context, missing=missing):\r\n    start_line = 3\r\n    end_line = 11\r\n    resolve = context.resolve_or_missing\r\n    undefined = environment.undefined\r\n    cond_expr_undefined = Undefined\r\n    if 0: yield None\r\n    l_0_poli = resolve('poli')\r\n    pass\r\n    yield '\\n4     '\r\n    if (undefined(name='poli') if l_0_poli is missing else l_0_poli):\r\n        start_line = 4\r\n        end_line = 6\r\n        pass\r\n        yield '\\n5  Hello World\\n6      '\r\n    else:\r\n        start_line = 6\r\n        end_line = 10\r\n        pass\r\n        yield '\\n7\\n8\\n9\\n10     '\r\n    yield '\\n11  '\r\n\r\nblocks = {'block1': block_block1}\r\ndebug_info = '3=14&4=27'\r\n```\r\nDoes that match implementation criteria in order to progress on _template coverage support_ in jinja ?\r\nThanks\r\nThomas", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1129", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1129/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1129/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1129/events", "html_url": "https://github.com/pallets/jinja/issues/1129", "id": 552255685, "node_id": "MDU6SXNzdWU1NTIyNTU2ODU=", "number": 1129, "title": "jinja2.exceptions.TemplateSyntaxError can't be unpickled", "user": {"login": "ttencate", "id": 90930, "node_id": "MDQ6VXNlcjkwOTMw", "avatar_url": "https://avatars0.githubusercontent.com/u/90930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ttencate", "html_url": "https://github.com/ttencate", "followers_url": "https://api.github.com/users/ttencate/followers", "following_url": "https://api.github.com/users/ttencate/following{/other_user}", "gists_url": "https://api.github.com/users/ttencate/gists{/gist_id}", "starred_url": "https://api.github.com/users/ttencate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ttencate/subscriptions", "organizations_url": "https://api.github.com/users/ttencate/orgs", "repos_url": "https://api.github.com/users/ttencate/repos", "events_url": "https://api.github.com/users/ttencate/events{/privacy}", "received_events_url": "https://api.github.com/users/ttencate/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-20T11:57:54Z", "updated_at": "2020-01-20T15:55:44Z", "closed_at": "2020-01-20T13:04:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "```python\r\n>>> import jinja2\r\n>>> import pickle\r\n>>> try:\r\n...   jinja2.Template('{{')\r\n... except jinja2.exceptions.TemplateSyntaxError as e:\r\n...   ex = e\r\n...\r\n>>> p = pickle.dumps(ex)\r\n>>> pickle.loads(p)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: __init__() missing 1 required positional argument: 'lineno'\r\n```\r\n\r\nWhy should we care about pickling exceptions? Well, the `multiprocessing` module uses pickling to send them across thread boundaries.\r\n\r\nIt's also rather hard to debug: if a multiprocessing task raises this Jinja error, `multiprocessing` raises the above unpickling error without any indication that it's related to Jinja at all. I had to un-parallelize my code to get a proper stack trace to show up for this one.\r\n\r\n## Your Environment\r\n* Python version: 3.5.9, 3.8.1\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1128", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1128/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1128/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1128/events", "html_url": "https://github.com/pallets/jinja/issues/1128", "id": 551876100, "node_id": "MDU6SXNzdWU1NTE4NzYxMDA=", "number": 1128, "title": "Release 2.11 on PyPI", "user": {"login": "auvipy", "id": 6212603, "node_id": "MDQ6VXNlcjYyMTI2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6212603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/auvipy", "html_url": "https://github.com/auvipy", "followers_url": "https://api.github.com/users/auvipy/followers", "following_url": "https://api.github.com/users/auvipy/following{/other_user}", "gists_url": "https://api.github.com/users/auvipy/gists{/gist_id}", "starred_url": "https://api.github.com/users/auvipy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/auvipy/subscriptions", "organizations_url": "https://api.github.com/users/auvipy/orgs", "repos_url": "https://api.github.com/users/auvipy/repos", "events_url": "https://api.github.com/users/auvipy/events{/privacy}", "received_events_url": "https://api.github.com/users/auvipy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-19T06:46:59Z", "updated_at": "2020-01-19T13:35:15Z", "closed_at": "2020-01-19T13:35:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1127", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1127/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1127/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1127/events", "html_url": "https://github.com/pallets/jinja/issues/1127", "id": 550823135, "node_id": "MDU6SXNzdWU1NTA4MjMxMzU=", "number": 1127, "title": "lstrip_block global and {%+ have no effect", "user": {"login": "Tocard", "id": 6951742, "node_id": "MDQ6VXNlcjY5NTE3NDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/6951742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tocard", "html_url": "https://github.com/Tocard", "followers_url": "https://api.github.com/users/Tocard/followers", "following_url": "https://api.github.com/users/Tocard/following{/other_user}", "gists_url": "https://api.github.com/users/Tocard/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tocard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tocard/subscriptions", "organizations_url": "https://api.github.com/users/Tocard/orgs", "repos_url": "https://api.github.com/users/Tocard/repos", "events_url": "https://api.github.com/users/Tocard/events{/privacy}", "received_events_url": "https://api.github.com/users/Tocard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-16T13:55:57Z", "updated_at": "2020-02-01T04:04:41Z", "closed_at": "2020-02-01T04:03:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "After looking to [this documentation](https://jinja.palletsprojects.com/en/2.10.x/templates/#whitespace-control) I have tried some different configurations.\r\n\r\n## Expected Behavior\r\n\r\nI should get a file indented like this\r\n\r\n```jinja\r\n##  version my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\n\r\nmy_key=my_value\r\nmy_key=my_value\r\n\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\n\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\n```\r\n\r\n## Actual Behavior\r\n\r\nI'm actually getting that\r\n\r\n```jinja\r\n##  version my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\n\r\nmy_key=my_value\r\nmy_key=my_value\r\n\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n  my_key=my_value\r\n\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\nmy_key=my_value\r\n```\r\n\r\n## Template Code\r\n\r\n```jinja\r\n#jinja2: trim_blocks: True, lstrip_blocks: True\r\n##  version {{ my_value }}\r\nmy_key={{ my_value }}\r\nmy_key={{ my_value }}\r\nmy_key={{ my_value }}\r\n{% if whatever is defined %}\r\n    my_key={{ my_value }}\r\n{% endif %}\r\nmy_key={{ my_value }}\r\nmy_key={{ my_value }}\r\n{% if whatever is defined %}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    my_key={{ my_value }}\r\n    {% if whatever is defined -%}\r\n        {% for key, value in whatever.iteritems() -%}\r\n            my_key={{ my_value }}\r\n        {% endfor %}\r\n    {% endif %}\r\n{% endif %}\r\n```\r\n\r\n## Your Environment\r\n\r\n* Python version: 2.7\r\n* Jinja version: 2.10.1\r\n* Ansible: 2.8.3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1124", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1124/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1124/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1124/events", "html_url": "https://github.com/pallets/jinja/issues/1124", "id": 548129048, "node_id": "MDU6SXNzdWU1NDgxMjkwNDg=", "number": 1124, "title": "Reference_cos", "user": {"login": "imertcoskun", "id": 28576038, "node_id": "MDQ6VXNlcjI4NTc2MDM4", "avatar_url": "https://avatars3.githubusercontent.com/u/28576038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imertcoskun", "html_url": "https://github.com/imertcoskun", "followers_url": "https://api.github.com/users/imertcoskun/followers", "following_url": "https://api.github.com/users/imertcoskun/following{/other_user}", "gists_url": "https://api.github.com/users/imertcoskun/gists{/gist_id}", "starred_url": "https://api.github.com/users/imertcoskun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imertcoskun/subscriptions", "organizations_url": "https://api.github.com/users/imertcoskun/orgs", "repos_url": "https://api.github.com/users/imertcoskun/repos", "events_url": "https://api.github.com/users/imertcoskun/events{/privacy}", "received_events_url": "https://api.github.com/users/imertcoskun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-10T15:04:46Z", "updated_at": "2020-01-10T15:05:23Z", "closed_at": "2020-01-10T15:05:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/pallets/jinja/blob/8342180f3913daea28fcd6644a0ba4c69391b189/setup.py#L30", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1120", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1120/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1120/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1120/events", "html_url": "https://github.com/pallets/jinja/issues/1120", "id": 540755033, "node_id": "MDU6SXNzdWU1NDA3NTUwMzM=", "number": 1120, "title": "How to keep multilevel undefined variable not change when jinja2 render?", "user": {"login": "mumubin", "id": 1450440, "node_id": "MDQ6VXNlcjE0NTA0NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1450440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mumubin", "html_url": "https://github.com/mumubin", "followers_url": "https://api.github.com/users/mumubin/followers", "following_url": "https://api.github.com/users/mumubin/following{/other_user}", "gists_url": "https://api.github.com/users/mumubin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mumubin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mumubin/subscriptions", "organizations_url": "https://api.github.com/users/mumubin/orgs", "repos_url": "https://api.github.com/users/mumubin/repos", "events_url": "https://api.github.com/users/mumubin/events{/privacy}", "received_events_url": "https://api.github.com/users/mumubin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-20T04:46:10Z", "updated_at": "2019-12-20T07:25:42Z", "closed_at": "2019-12-20T07:25:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using jinja2 to render my configuration YAML, then ansible uses the YAML to deploy tasks.\r\nNow I meet one problem I can't handle. \r\n\r\nI have some a template like this:\r\n\r\n```yaml\r\nconsultPort: 8500\r\n\r\npool: \"{{ system.DCName.aa.bb }}-{{system.poolName}}\"\r\n\r\ndatabase:\r\n  username: \"{{ MSecret('helloworld-prod-aa','username') }}\"\r\n  password: \"{{ MSecret('helloworld-prod-aa','password') }}\"\r\n```\r\nAfter custom render MSecret, the MSecret function works fine ,but it report `system` undefined,Then I add myself PreservedUndefined to skip Undefined to not change, these Undefined variables will be added into the YAML when ansible deploying\r\n```py\r\n\r\ndef render(to_reader_text):\r\n    from jinja2 import Environment, BaseLoader\r\n    env = Environment(loader=BaseLoader,\r\n                      undefined=PreservedUndefined,\r\n                      )\r\n    context = {}\r\n    context['MSecret'] = MSecret\r\n    template = env.from_string(to_reader_text)\r\n    result = template.render(context)\r\n    return result\r\n\r\n\r\n\r\nSTART = \"{{ \"\r\nEND = \" }}\"\r\n\r\nclass PreservedUndefined(Undefined):\r\n\r\n    __slots__ = ()\r\n\r\n    def __init__(self, *args, **kwargs):\r\n        super(PreservedUndefined, self).__init__(**kwargs)\r\n    def __getitem__(self, key):\r\n\r\n        return self.__str__(key)\r\n\r\n    def __getattr__(self, key):\r\n        print \"name:\" + self._undefined_name\r\n        print \"key: \" + key\r\n        return self.__str__(key)\r\n\r\n    def __str__(self,key):\r\n        if self._undefined_hint is None:\r\n\r\n            if self._undefined_obj is missing:\r\n                return u'%s %s.%s %s' % (START, self._undefined_name, key, END)\r\n            return '%s no such element: %s[%r] %s' % (\r\n                START,\r\n                object_type_repr(self._undefined_obj),\r\n                self._undefined_name,\r\n                END\r\n            )\r\n        return u'%s undefined value printed: %s %s' % (self._undefined_hint , START, END)\r\n```\r\nbut it only work for only level `system.poolName` not work for `system.DCName.aa.bb`\r\nHow to handle `system.DCName.aa.bb`?\r\nI try to  use `ChainableUndefined` from [jinja](https://github.com/pallets/jinja) (maybe not compatiable with Jinja2==2.10.3), but I still can't get the whole name between \"{{\" and \"}}\"\r\n```yaml\r\nconsultPort: 8500\r\npool: '{{  no such element: unicode object[''aa'']  }}-{{  system.poolName  }}'\r\ndatabase:\r\n  username: hello\r\n  password: 123\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1119", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1119/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1119/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1119/events", "html_url": "https://github.com/pallets/jinja/issues/1119", "id": 538988662, "node_id": "MDU6SXNzdWU1Mzg5ODg2NjI=", "number": 1119, "title": "Support for Python 3.8", "user": {"login": "amotl", "id": 453543, "node_id": "MDQ6VXNlcjQ1MzU0Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/453543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amotl", "html_url": "https://github.com/amotl", "followers_url": "https://api.github.com/users/amotl/followers", "following_url": "https://api.github.com/users/amotl/following{/other_user}", "gists_url": "https://api.github.com/users/amotl/gists{/gist_id}", "starred_url": "https://api.github.com/users/amotl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amotl/subscriptions", "organizations_url": "https://api.github.com/users/amotl/orgs", "repos_url": "https://api.github.com/users/amotl/repos", "events_url": "https://api.github.com/users/amotl/events{/privacy}", "received_events_url": "https://api.github.com/users/amotl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-17T10:52:00Z", "updated_at": "2020-01-09T15:58:47Z", "closed_at": "2019-12-17T14:30:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear @mitsuhiko, @davidism, @ThiefMaster, @untitaker and the whole Jinja community,\r\n\r\nfirst things first: Thanks a bunch for conceiving and maintaining the excellent Jinja2 module.\r\n\r\nWe are currently working on https://github.com/jpmens/mqttwarn/issues/127, https://github.com/jpmens/mqttwarn/issues/332 and https://github.com/jpmens/mqttwarn/issues/336 and found that Jinja2 would still croak about things related to #867, #927 and #969 with the most current release version 2.10.3 available from PyPI.\r\n\r\nWhen reading the message `DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working`, one can assume that Jinja2 will not work on Python 3.8 yet?\r\n\r\nIs there anything we can do about it? Just recently, I've been seeing Python 3.8 landing on some machines I was working on or on machines of other people I was working together with.\r\n\r\nPlease let me know if you need any support for releasing this change within a (probably upcoming?) version 2.11.0. I can see @davidism is busy merging community contributions as well as pushing things from his own pen. Good luck, David!\r\n\r\nThanks already and with kind regards,\r\nAndreas.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1118", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1118/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1118/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1118/events", "html_url": "https://github.com/pallets/jinja/issues/1118", "id": 537943233, "node_id": "MDU6SXNzdWU1Mzc5NDMyMzM=", "number": 1118, "title": "Extra evaluation by NativeTemplate in Python 3.6", "user": {"login": "prescod", "id": 22091, "node_id": "MDQ6VXNlcjIyMDkx", "avatar_url": "https://avatars1.githubusercontent.com/u/22091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prescod", "html_url": "https://github.com/prescod", "followers_url": "https://api.github.com/users/prescod/followers", "following_url": "https://api.github.com/users/prescod/following{/other_user}", "gists_url": "https://api.github.com/users/prescod/gists{/gist_id}", "starred_url": "https://api.github.com/users/prescod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prescod/subscriptions", "organizations_url": "https://api.github.com/users/prescod/orgs", "repos_url": "https://api.github.com/users/prescod/repos", "events_url": "https://api.github.com/users/prescod/events{/privacy}", "received_events_url": "https://api.github.com/users/prescod/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-12-14T17:46:49Z", "updated_at": "2019-12-14T19:53:39Z", "closed_at": "2019-12-14T18:22:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n\r\nI would expect these four lines to be rendered the same way:\r\n\r\n```python\r\n>>> Template(\"{{date}}\").render(date=\"2012-01-02\")\r\n'2012-01-02'\r\n>>> NativeTemplate(\"{{date}}\").render(date=\"2012-01-02\")\r\n'2012-01-02'\r\n>>> Template(\"{{date}}\").render(date=\"2012-11-12\")\r\n'2012-11-12'\r\n>>> NativeTemplate(\"{{date}}\").render(date=\"2012-11-12\")\r\n'2012-11-12'\r\n```\r\n\r\n## Actual Behavior\r\n```python\r\n>>> Template(\"{{date}}\").render(date=\"2012-01-02\")\r\n'2012-01-02'\r\n>>> NativeTemplate(\"{{date}}\").render(date=\"2012-01-02\")\r\n'2012-01-02'\r\n>>> Template(\"{{date}}\").render(date=\"2012-11-12\")\r\n'2012-11-12'\r\n>>> NativeTemplate(\"{{date}}\").render(date=\"2012-11-12\")\r\n1989\r\n```\r\n\r\nThe last one goes through two stages of evaluation and generates an integer instead of a string or date object.\r\n\r\n## Template Code\r\n```python\r\nfrom jinja2.nativetypes import NativeTemplate\r\nNativeTemplate(\"{{date}}\").render(date=\"2012-11-12\")\r\n```\r\n\r\n## Your Environment\r\n* Python version: Python 3.6.9\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1116", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1116/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1116/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1116/events", "html_url": "https://github.com/pallets/jinja/issues/1116", "id": 534872204, "node_id": "MDU6SXNzdWU1MzQ4NzIyMDQ=", "number": 1116, "title": "Encountered unknown tag 'url'.", "user": {"login": "Esther-Thu", "id": 57469510, "node_id": "MDQ6VXNlcjU3NDY5NTEw", "avatar_url": "https://avatars2.githubusercontent.com/u/57469510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Esther-Thu", "html_url": "https://github.com/Esther-Thu", "followers_url": "https://api.github.com/users/Esther-Thu/followers", "following_url": "https://api.github.com/users/Esther-Thu/following{/other_user}", "gists_url": "https://api.github.com/users/Esther-Thu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Esther-Thu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Esther-Thu/subscriptions", "organizations_url": "https://api.github.com/users/Esther-Thu/orgs", "repos_url": "https://api.github.com/users/Esther-Thu/repos", "events_url": "https://api.github.com/users/Esther-Thu/events{/privacy}", "received_events_url": "https://api.github.com/users/Esther-Thu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-09T11:38:35Z", "updated_at": "2019-12-09T13:08:55Z", "closed_at": "2019-12-09T13:08:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nTell us what should happen\r\n\r\n## Actual Behavior\r\nTell us what happens instead\r\n\r\n## Template Code\r\n```jinja\r\nPaste the template code (ideally a minimal example) that causes the issue\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nPaste the full traceback in case there is an exception\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version:    {% for book in books %}\r\n        <li><a href=\"{% url 'myawork:detail' book.id %}\">{{ book.btitle }}</a></li>\r\n    {% endfor %}\r\n* Jinja version:\"Encountered unknown tag 'url'. Jinja was looking for the following tags: 'endfor' or 'else'. The innermost block that needs to be closed is 'for'.\",\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1106", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1106/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1106/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1106/events", "html_url": "https://github.com/pallets/jinja/issues/1106", "id": 523785249, "node_id": "MDU6SXNzdWU1MjM3ODUyNDk=", "number": 1106, "title": "FileSystemLoader Loader Constructs Incorrect Path", "user": {"login": "tbpassin", "id": 36974235, "node_id": "MDQ6VXNlcjM2OTc0MjM1", "avatar_url": "https://avatars1.githubusercontent.com/u/36974235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbpassin", "html_url": "https://github.com/tbpassin", "followers_url": "https://api.github.com/users/tbpassin/followers", "following_url": "https://api.github.com/users/tbpassin/following{/other_user}", "gists_url": "https://api.github.com/users/tbpassin/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbpassin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbpassin/subscriptions", "organizations_url": "https://api.github.com/users/tbpassin/orgs", "repos_url": "https://api.github.com/users/tbpassin/repos", "events_url": "https://api.github.com/users/tbpassin/events{/privacy}", "received_events_url": "https://api.github.com/users/tbpassin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-16T03:50:43Z", "updated_at": "2019-11-18T15:26:23Z", "closed_at": "2019-11-18T15:24:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "In loaders.py, there is code at line 68 that does not produce the desired path in Windows in some cases:\r\n```\r\ndef get_source(self, environment, template):\r\n    pieces = split_template_path(template)\r\n    for searchpath in self.searchpath:\r\n        filename = path.join(searchpath, *pieces)\r\n        # ...\r\n```\r\n\r\nThe function `split_template_path()` splits a full path into fragments like this: `['c:', 'xxx', 'yyy', 'zzz'txt']`.\r\n\r\nThe bug is that for this kind of split path, os.path.join() does not produce a proper path in Windows.  E.g.:\r\n```\r\nsep = '\\\\'\r\npieces = ['c:', 'xxx', 'yyy', 'zzz.txt']\r\nfilename = os.path.join(sep, *pieces) \r\n# gives 'c:xxx\\yyy\\zzz.txt', not the intended c:\\xxx\\yyy\\zzz.txt\r\n```\r\n\r\nI have observed cases where the full path to a template file is split by `split_template_path()`, then passed to `get_source` with `searchpath` = `\\`.  The intended output is obviously a fully qualified path since it gets passed to open_if_exists().  The result is that the template is never found.\r\n\r\nThis code may appear in other loaders too, but I have not checked this.\r\n\r\nThis joining behavior is actually the documented behavior for os.path.join().  So Jinja needs to work around it.  One way would be to check to see if the `template` string is an existing path.  This could look like the following:\r\n\r\n```\r\n    def get_source(self, environment, template):\r\n        pieces = split_template_path(template)\r\n        for searchpath in self.searchpath:\r\n            if os.path.exists(template):\r\n                filename = template\r\n            else:           \r\n                filename = path.join(searchpath, *pieces)\r\n            f = open_if_exists(filename)\r\n```\r\n\r\n\r\n---\r\n\r\n## Desired Behavior\r\nTo demonstrate, run the following code:\r\n```\r\nimport os\r\nfrom jinja2 import loaders\r\nPTH =  '\\\\'\r\nfqp = r'c:\\spam\\green\\eggs.txt'  # or 'spam\\green\\eggs.txt'\r\nsplitpath = loaders.split_template_path(fqp)\r\nif os.path.exists(fqp):\r\n    filename = fqp\r\nelse:\r\n   filename = os.path.join(PTH, *splitpath)\r\nprint filename \r\n# When fqp points to an actual file, observe filename = fqp\r\n# When fqp is not an absolute path to an actual file,  observe \r\n# that a proper path is constructed: \\spam\\green\\eggs.txt\r\n```\r\n\r\n## Actual Behavior\r\n```\r\nimport os\r\nfrom jinja2 import loaders\r\nPTH = '\\\\'\r\nfqp = r'c:\\spam\\green\\eggs.txt' \r\nsplitpath = loaders.split_template_path(fqp)\r\nprint splitpath # observe lack of \"\\\" after the \"c:\".\r\nfilename = os.path.join(PTH, *splitpath)\r\nprint filename \r\n# observe incorrect path c:spam\\green\\eggs.txt'\r\n```\r\n\r\n## Your Environment\r\n* Python version: 2.7\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1104", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1104/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1104/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1104/events", "html_url": "https://github.com/pallets/jinja/issues/1104", "id": 522158388, "node_id": "MDU6SXNzdWU1MjIxNTgzODg=", "number": 1104, "title": "Traceback line numbers broken on Jinja 2.10.2 and newer + Python 3.7", "user": {"login": "akx", "id": 58669, "node_id": "MDQ6VXNlcjU4NjY5", "avatar_url": "https://avatars2.githubusercontent.com/u/58669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akx", "html_url": "https://github.com/akx", "followers_url": "https://api.github.com/users/akx/followers", "following_url": "https://api.github.com/users/akx/following{/other_user}", "gists_url": "https://api.github.com/users/akx/gists{/gist_id}", "starred_url": "https://api.github.com/users/akx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akx/subscriptions", "organizations_url": "https://api.github.com/users/akx/orgs", "repos_url": "https://api.github.com/users/akx/repos", "events_url": "https://api.github.com/users/akx/events{/privacy}", "received_events_url": "https://api.github.com/users/akx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 5, "created_at": "2019-11-13T11:46:54Z", "updated_at": "2019-12-03T07:42:04Z", "closed_at": "2019-12-02T21:07:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "The 3a86ef3d72fdefb149c0c859e6e37035826f3557 commit breaks traceback line numbers on Python 3.7. (On Django, this breaks the debug traceback view altogether.)\r\n\r\nRefs:\r\n* Django-Jinja issue https://github.com/niwinz/django-jinja/issues/238\r\n* Django issue https://code.djangoproject.com/ticket/30405\r\n* Django mitigation https://github.com/django/django/pull/11886\r\n\r\nThanks to @tomhamiltonstubber for the original minimal example.\r\n\r\n## Expected Behavior\r\n\r\nTracebacks should have correct line numbers, and source lines should be retrievable.\r\n\r\n## Actual Behavior\r\n\r\nTracebacks within Jinja templates have incorrect line numbers, and source is not retrievable.\r\n\r\n## Python Code\r\n\r\n```python\r\nimport jinja2\r\n\r\nl = jinja2.FileSystemLoader('.')\r\ne = jinja2.Environment(loader=l)\r\nt = e.get_template('index.jinja')\r\nprint(t.render({'foo': [8]}))\r\n```\r\n\r\n## Template Code\r\n```jinja\r\n{% block content %}\r\n  {% for x, y in foo %}\r\n    {{ x }}\r\n  {% endfor %}\r\n{% endblock %}\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 7, in <module>\r\n    print(t.render({'foo': [8]}))\r\n  File \"jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"./index.jinja\", line 1, in top-level template code\r\n    {% block content %}\r\n  File \"jinja2/environment.py\", line 1005, in render\r\n    return concat(self.root_render_func(self.new_context(vars)))\r\n  File \"./index.jinja\", line 10, in root\r\n  File \"./index.jinja\", line 19, in block_content\r\nTypeError: cannot unpack non-iterable int object\r\n```\r\n\r\nThere are only 5 lines in `index.jinja` and the tracebacks point to line 10 and 19.\r\n\r\nIf one cheats Jinja to use the old hack on Python 3.7, things work:\r\n\r\n```python\r\nimport sys\r\nsys.version_info = (3, 6)  # don't do this at home\r\nimport jinja2\r\n\r\nl = jinja2.FileSystemLoader('.')\r\ne = jinja2.Environment(loader=l)\r\nt = e.get_template('index.jinja')\r\n\r\nprint(t.render({'foo': [8]}))\r\n```\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 9, in <module>\r\n    print(t.render({'foo': [8]}))\r\n  File \"jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"./index.jinja\", line 1, in top-level template code\r\n    {% block content %}\r\n  File \"./index.jinja\", line 2, in block \"content\"\r\n    {% for x, y in foo %}\r\nTypeError: cannot unpack non-iterable int object\r\n```\r\n\r\n## Your Environment\r\n* Python version: Python 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)] on darwin\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1103", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1103/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1103/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1103/events", "html_url": "https://github.com/pallets/jinja/issues/1103", "id": 522062296, "node_id": "MDU6SXNzdWU1MjIwNjIyOTY=", "number": 1103, "title": "Missing markupsafe dependency", "user": {"login": "matkoniecz", "id": 899988, "node_id": "MDQ6VXNlcjg5OTk4OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/899988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matkoniecz", "html_url": "https://github.com/matkoniecz", "followers_url": "https://api.github.com/users/matkoniecz/followers", "following_url": "https://api.github.com/users/matkoniecz/following{/other_user}", "gists_url": "https://api.github.com/users/matkoniecz/gists{/gist_id}", "starred_url": "https://api.github.com/users/matkoniecz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matkoniecz/subscriptions", "organizations_url": "https://api.github.com/users/matkoniecz/orgs", "repos_url": "https://api.github.com/users/matkoniecz/repos", "events_url": "https://api.github.com/users/matkoniecz/events{/privacy}", "received_events_url": "https://api.github.com/users/matkoniecz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-13T09:16:12Z", "updated_at": "2019-11-13T13:34:08Z", "closed_at": "2019-11-13T13:34:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nJinja installed as dependency should work.\r\n\r\n## Actual Behavior\r\nIt is not, crashing on `ModuleNotFoundError: No module named 'markupsafe'` (reported as https://github.com/fsfe/reuse-tool/issues/109 )\r\n\r\nCuriously https://github.com/pallets/jinja/blob/master/setup.py#L51 has it as install_requires.\r\n\r\nSo I would expect that it is installed ( https://packaging.python.org/discussions/install-requires-vs-requirements/ )\r\n\r\nNot sure what happens here and how to debug - maybe pip in general or my pip have problems? Or is `install_requires` somehow mangled in this `setup.py`?\r\n\r\n## Template Code\r\n\r\nI installed and run reuse tool, depending on Jinja \r\n```jinja\r\nPaste the template code (ideally a minimal example) that causes the issue\r\n(not available for now)\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/home/mateusz/.local/bin/reuse\", line 6, in <module>\r\n    from reuse._main import main\r\n  File \"/home/mateusz/.local/lib/python3.6/site-packages/reuse/_main.py\", line 13, in <module>\r\n    from . import (\r\n  File \"/home/mateusz/.local/lib/python3.6/site-packages/reuse/header.py\", line 18, in <module>\r\n    from jinja2 import Environment, FileSystemLoader, PackageLoader, Template\r\n  File \"/usr/lib/python3/dist-packages/jinja2/__init__.py\", line 33, in <module>\r\n    from jinja2.environment import Environment, Template\r\n  File \"/usr/lib/python3/dist-packages/jinja2/environment.py\", line 13, in <module>\r\n    from jinja2 import nodes\r\n  File \"/usr/lib/python3/dist-packages/jinja2/nodes.py\", line 19, in <module>\r\n    from jinja2.utils import Markup\r\n  File \"/usr/lib/python3/dist-packages/jinja2/utils.py\", line 531, in <module>\r\n    from markupsafe import Markup, escape, soft_unicode\r\nModuleNotFoundError: No module named 'markupsafe'\r\nError in sys.excepthook:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/apport_python_hook.py\", line 63, in apport_excepthook\r\n    from apport.fileutils import likely_packaged, get_recent_crashes\r\n  File \"/usr/lib/python3/dist-packages/apport/__init__.py\", line 5, in <module>\r\n    from apport.report import Report\r\n  File \"/usr/lib/python3/dist-packages/apport/report.py\", line 30, in <module>\r\n    import apport.fileutils\r\n  File \"/usr/lib/python3/dist-packages/apport/fileutils.py\", line 23, in <module>\r\n    from apport.packaging_impl import impl as packaging\r\n  File \"/usr/lib/python3/dist-packages/apport/packaging_impl.py\", line 23, in <module>\r\n    import apt\r\n  File \"/usr/lib/python3/dist-packages/apt/__init__.py\", line 23, in <module>\r\n    import apt_pkg\r\nModuleNotFoundError: No module named 'apt_pkg'\r\n\r\nOriginal exception was:\r\nTraceback (most recent call last):\r\n  File \"/home/mateusz/.local/bin/reuse\", line 6, in <module>\r\n    from reuse._main import main\r\n  File \"/home/mateusz/.local/lib/python3.6/site-packages/reuse/_main.py\", line 13, in <module>\r\n    from . import (\r\n  File \"/home/mateusz/.local/lib/python3.6/site-packages/reuse/header.py\", line 18, in <module>\r\n    from jinja2 import Environment, FileSystemLoader, PackageLoader, Template\r\n  File \"/usr/lib/python3/dist-packages/jinja2/__init__.py\", line 33, in <module>\r\n    from jinja2.environment import Environment, Template\r\n  File \"/usr/lib/python3/dist-packages/jinja2/environment.py\", line 13, in <module>\r\n    from jinja2 import nodes\r\n  File \"/usr/lib/python3/dist-packages/jinja2/nodes.py\", line 19, in <module>\r\n    from jinja2.utils import Markup\r\n  File \"/usr/lib/python3/dist-packages/jinja2/utils.py\", line 531, in <module>\r\n    from markupsafe import Markup, escape, soft_unicode\r\nModuleNotFoundError: No module named 'markupsafe'\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.6\r\n* Jinja version: `pip3.6 list | grep -i ji` give me Jinja2 2.8                   \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1102", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1102/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1102/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1102/events", "html_url": "https://github.com/pallets/jinja/issues/1102", "id": 521459533, "node_id": "MDU6SXNzdWU1MjE0NTk1MzM=", "number": 1102, "title": "Bad comparison parsing for constants", "user": {"login": "areebbeigh", "id": 15276828, "node_id": "MDQ6VXNlcjE1Mjc2ODI4", "avatar_url": "https://avatars3.githubusercontent.com/u/15276828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/areebbeigh", "html_url": "https://github.com/areebbeigh", "followers_url": "https://api.github.com/users/areebbeigh/followers", "following_url": "https://api.github.com/users/areebbeigh/following{/other_user}", "gists_url": "https://api.github.com/users/areebbeigh/gists{/gist_id}", "starred_url": "https://api.github.com/users/areebbeigh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/areebbeigh/subscriptions", "organizations_url": "https://api.github.com/users/areebbeigh/orgs", "repos_url": "https://api.github.com/users/areebbeigh/repos", "events_url": "https://api.github.com/users/areebbeigh/events{/privacy}", "received_events_url": "https://api.github.com/users/areebbeigh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 1, "created_at": "2019-11-12T10:24:05Z", "updated_at": "2019-11-20T14:58:21Z", "closed_at": "2019-11-20T14:58:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Comparisons in jinja don't behave like comparisons in Python.\r\n\r\n```python\r\ntemplate = '''{{4 < 2 < 3}}\r\n{{a < b < c}}'''\r\nt = Template(template)\r\nprint(t.render(a = 4, b = 2, c = 3))\r\n```\r\n### Expected output: \r\n```python\r\nFalse\r\nFalse\r\n```\r\n### Output: \r\n```python\r\nTrue\r\nFalse\r\n```\r\n\r\nPython code:\r\n```python\r\n4 < 2 < 3\r\n```\r\nOutput: `False`\r\n\r\nThe problem lies in https://github.com/pallets/jinja/blob/1af1205a9c9e884c49f74eb3e75dabbcee1b1967/jinja2/nodes.py#L775-L780\r\nwhere the result of the comparison depends only on the final operator result. \r\n\r\nI would like to submit a PR for this.\r\n\r\n* Python version: 3.6.7\r\n* Jinja version: 2.10\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1100", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1100/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1100/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1100/events", "html_url": "https://github.com/pallets/jinja/issues/1100", "id": 519304605, "node_id": "MDU6SXNzdWU1MTkzMDQ2MDU=", "number": 1100, "title": "Documentation written towards Python 2", "user": {"login": "alexbuzzbee", "id": 2061796, "node_id": "MDQ6VXNlcjIwNjE3OTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2061796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexbuzzbee", "html_url": "https://github.com/alexbuzzbee", "followers_url": "https://api.github.com/users/alexbuzzbee/followers", "following_url": "https://api.github.com/users/alexbuzzbee/following{/other_user}", "gists_url": "https://api.github.com/users/alexbuzzbee/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexbuzzbee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexbuzzbee/subscriptions", "organizations_url": "https://api.github.com/users/alexbuzzbee/orgs", "repos_url": "https://api.github.com/users/alexbuzzbee/repos", "events_url": "https://api.github.com/users/alexbuzzbee/events{/privacy}", "received_events_url": "https://api.github.com/users/alexbuzzbee/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-07T14:35:27Z", "updated_at": "2019-11-07T14:47:32Z", "closed_at": "2019-11-07T14:46:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "The documentation still seems to be largely written towards Python 2, particularly in sections discussing the `str` and `unicode` types, which is a distinction that only exists in Python 2. With the end of PSF support for Python 2 quickly approaching (less than two months as I write this), Jinja should focus its documentation mainly for Python 3 users and include Python 2-specific differences as side notes, if Python 2 is to be supported at all.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1097", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1097/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1097/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1097/events", "html_url": "https://github.com/pallets/jinja/issues/1097", "id": 516323718, "node_id": "MDU6SXNzdWU1MTYzMjM3MTg=", "number": 1097, "title": "PackageLoader fails on namespace packages", "user": {"login": "iomintz", "id": 538336, "node_id": "MDQ6VXNlcjUzODMzNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/538336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iomintz", "html_url": "https://github.com/iomintz", "followers_url": "https://api.github.com/users/iomintz/followers", "following_url": "https://api.github.com/users/iomintz/following{/other_user}", "gists_url": "https://api.github.com/users/iomintz/gists{/gist_id}", "starred_url": "https://api.github.com/users/iomintz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iomintz/subscriptions", "organizations_url": "https://api.github.com/users/iomintz/orgs", "repos_url": "https://api.github.com/users/iomintz/repos", "events_url": "https://api.github.com/users/iomintz/events{/privacy}", "received_events_url": "https://api.github.com/users/iomintz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 8, "created_at": "2019-11-01T20:14:19Z", "updated_at": "2020-03-30T16:44:57Z", "closed_at": "2019-12-05T15:25:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n\r\nIn the attached [jinja_namespace_bug.zip](https://github.com/pallets/jinja/files/3799437/jinja_namespace_bug.zip), app.py prints \"Hi\"\r\n\r\n\r\n## Actual Behavior\r\n\r\nA traceback occurs. This is due to [python3.7 namespace packages having their `__file__` attribute set to None](https://github.com/nedbat/coveragepy/commit/c9f4f661ccb7decb55055d80a1e9a1cbb825b27f).\r\n\r\n## Reproduction steps\r\n\r\nInstead of running the commands below, you can also extract the [attached zip file](https://github.com/pallets/jinja/files/3799437/jinja_namespace_bug.zip) and run app.py.\r\n```\r\nmkdir -p foo/bar\r\nmkdir foo/bar/templates\r\necho 'x = 1' > foo/bar/baz.py\r\necho 'Hi' > foo/bar/templates/test.html\r\ncat << 'EOF' > app.py\r\n#!/usr/bin/env python3\r\n\r\nimport jinja2\r\njinja_env = jinja2.Environment(loader=jinja2.PackageLoader('foo.bar', 'templates'))\r\nprint(jinja_env.get_template('test.html').render())\r\nEOF\r\nchmod +x app.py\r\n./app.py\r\n```\r\n\r\n## Full Traceback\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"./app.py\", line 5, in <module>\r\n    jinja_env = jinja2.Environment(loader=jinja2.PackageLoader('foo.bar', 'templates'))\r\n  File \"/home/io/code/language/python/3/snippets/.venv/lib/python3.7/site-packages/jinja2/loaders.py\", line 224, in __init__\r\n    provider = get_provider(package_name)\r\n  File \"/home/io/code/language/python/3/snippets/.venv/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 364, in get_provider\r\n    return _find_adapter(_provider_factories, loader)(module)\r\n  File \"/home/io/code/language/python/3/snippets/.venv/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 1392, in __init__\r\n    self.module_path = os.path.dirname(getattr(module, '__file__', ''))\r\n  File \"/usr/lib/python3.7/posixpath.py\", line 156, in dirname\r\n    p = os.fspath(p)\r\nTypeError: expected str, bytes or os.PathLike object, not NoneType\r\n```\r\n\r\n## Your Environment\r\n\r\n* Python version: 3.7.4\r\n* Jinja version: 2.10.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1094", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1094/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1094/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1094/events", "html_url": "https://github.com/pallets/jinja/issues/1094", "id": 513315922, "node_id": "MDU6SXNzdWU1MTMzMTU5MjI=", "number": 1094, "title": "Error with template errors with Django and debug", "user": {"login": "tomhamiltonstubber", "id": 8955690, "node_id": "MDQ6VXNlcjg5NTU2OTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/8955690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomhamiltonstubber", "html_url": "https://github.com/tomhamiltonstubber", "followers_url": "https://api.github.com/users/tomhamiltonstubber/followers", "following_url": "https://api.github.com/users/tomhamiltonstubber/following{/other_user}", "gists_url": "https://api.github.com/users/tomhamiltonstubber/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomhamiltonstubber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomhamiltonstubber/subscriptions", "organizations_url": "https://api.github.com/users/tomhamiltonstubber/orgs", "repos_url": "https://api.github.com/users/tomhamiltonstubber/repos", "events_url": "https://api.github.com/users/tomhamiltonstubber/events{/privacy}", "received_events_url": "https://api.github.com/users/tomhamiltonstubber/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-28T13:49:29Z", "updated_at": "2019-10-28T14:21:54Z", "closed_at": "2019-10-28T13:59:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Not sure if this should be here or in `django-jinja`, looks like here though.**\r\n\r\nThis error happens for Authenticated users, where there's an error in rendering the template.\r\n\r\n## Expected Behaviour\r\nError renders properly in browser with stacktrace\r\n\r\n## Actual Behaviour\r\n`A server error occurred.  Please contact the administrator.` is shown in the browser, and a long stacktrace in the console.\r\n\r\n## Template Code\r\nI created a repo with an easily replicated example:\r\n\r\nhttps://github.com/tomhamiltonstubber/jinja2-error-example\r\n\r\n## Full Traceback\r\n```pytb\r\n\r\n# The first error I'm deliberately causing\r\n\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/base.py\", line 115, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/base.py\", line 113, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/tom/repos/jinja-error-replication/JinjaError/main/views.py\", line 9, in index\r\n    return render(request, 'index.jinja', {'foo': 'Bar'})\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/shortcuts.py\", line 36, in render\r\n    content = loader.render_to_string(template_name, context, request, using=using)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/template/loader.py\", line 62, in render_to_string\r\n    return template.render(context, request)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django_jinja/backend.py\", line 106, in render\r\n    return mark_safe(self.template.render(context))\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"templates/index.jinja\", line 1, in top-level template code\r\n    {% extends 'base.jinja' %}\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/jinja2/environment.py\", line 1005, in render\r\n    return concat(self.root_render_func(self.new_context(vars)))\r\n  File \"templates/index.jinja\", line 14, in root\r\n  File \"templates/base.jinja\", line 11, in root\r\n  File \"templates/index.jinja\", line 23, in block_content\r\nValueError: not enough values to unpack (expected 2, got 1)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/utils/deprecation.py\", line 94, in __call__\r\n    response = response or self.get_response(request)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 36, in inner\r\n    response = response_for_exception(request, exc)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 90, in response_for_exception\r\n    response = handle_uncaught_exception(request, get_resolver(get_urlconf()), sys.exc_info())\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 125, in handle_uncaught_exception\r\n    return debug.technical_500_response(request, *exc_info)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/views/debug.py\", line 94, in technical_500_response\r\n    html = reporter.get_traceback_html()\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/views/debug.py\", line 333, in get_traceback_html\r\n    c = Context(self.get_traceback_data(), use_l10n=False)\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/views/debug.py\", line 264, in get_traceback_data\r\n    frames = self.get_traceback_frames()\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/views/debug.py\", line 422, in get_traceback_frames\r\n    filename, lineno, 7, loader, module_name,\r\n  File \"/home/tom/repos/jinja-error-replication/env/lib/python3.7/site-packages/django/views/debug.py\", line 383, in _get_lines_from_file\r\n    context_line = source[lineno]\r\nIndexError: list index out of range\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nAnd then the same thing * 7.\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7\r\n* Jinja version: 2.10.2+\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1091", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1091/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1091/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1091/events", "html_url": "https://github.com/pallets/jinja/issues/1091", "id": 512683551, "node_id": "MDU6SXNzdWU1MTI2ODM1NTE=", "number": 1091, "title": "Creating a NativeTemplate directly doesn't create a NativeEnvironment", "user": {"login": "cindyzwang", "id": 11622825, "node_id": "MDQ6VXNlcjExNjIyODI1", "avatar_url": "https://avatars3.githubusercontent.com/u/11622825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cindyzwang", "html_url": "https://github.com/cindyzwang", "followers_url": "https://api.github.com/users/cindyzwang/followers", "following_url": "https://api.github.com/users/cindyzwang/following{/other_user}", "gists_url": "https://api.github.com/users/cindyzwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cindyzwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cindyzwang/subscriptions", "organizations_url": "https://api.github.com/users/cindyzwang/orgs", "repos_url": "https://api.github.com/users/cindyzwang/repos", "events_url": "https://api.github.com/users/cindyzwang/events{/privacy}", "received_events_url": "https://api.github.com/users/cindyzwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 357062399, "node_id": "MDU6TGFiZWwzNTcwNjIzOTk=", "url": "https://api.github.com/repos/pallets/jinja/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 6, "created_at": "2019-10-25T19:32:11Z", "updated_at": "2019-10-28T16:06:01Z", "closed_at": "2019-10-28T16:06:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nCreate a dictionary with keys and values that are strings. I was able to do this correctly when I was doing `NativeTemplate(...).render(...)` so I would expect that the behavior would be the same if I used a `NativeEnvironment(...).from_string(...).render(...)`.\r\n\r\n## Actual Behavior\r\nI have some templates that create dictionaries. However, those tests error out because I expect to create a payload like `{'apples': 'bananas'}` but am instead creating `{'apples: bananas'}`.\r\n\r\nI dug around and saw that `preserve_quotes=False` [here](https://github.com/pallets/jinja/blob/master/jinja2/nativetypes.py#L226), which was odd because I thought the behavior should be the same if I was creating an environment or using the spontaneous environment. But it turns out the spontaneous environment is the base `Environment`.\r\n\r\n## Template Code\r\n```jinja\r\n>>> env = NativeEnvironment()\r\n>>> env.from_string('{ \"{{a}}\": \"{{b}}\" }').render(a='apple', b='banana')\r\n{'apple: banana'}\r\n>>> NativeTemplate('{ \"{{a}}\": \"{{b}}\" }').render(a='apple', b='banana')\r\n{'apple': 'banana'}\r\n>>> NativeTemplate('').environment\r\n<jinja2.environment.Environment object at 0x10a688cc0>\r\n```\r\n\r\n## Full Traceback\r\nNo traceback because it doesn't throw an error, this is just not the expected behavior\r\n\r\n\r\n## Your Environment\r\n* Python version: 3.6.6\r\n* Jinja version: 2.10\r\n\r\n## How I'm currently working around it\r\n```\r\nenv = Environment()\r\n... # set up globals & filters\r\nenv.template_class = NativeTemplate\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1088", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1088/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1088/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1088/events", "html_url": "https://github.com/pallets/jinja/issues/1088", "id": 511827059, "node_id": "MDU6SXNzdWU1MTE4MjcwNTk=", "number": 1088, "title": "Can't directly access loop variable in nested block", "user": {"login": "EpicWink", "id": 25142085, "node_id": "MDQ6VXNlcjI1MTQyMDg1", "avatar_url": "https://avatars3.githubusercontent.com/u/25142085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EpicWink", "html_url": "https://github.com/EpicWink", "followers_url": "https://api.github.com/users/EpicWink/followers", "following_url": "https://api.github.com/users/EpicWink/following{/other_user}", "gists_url": "https://api.github.com/users/EpicWink/gists{/gist_id}", "starred_url": "https://api.github.com/users/EpicWink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EpicWink/subscriptions", "organizations_url": "https://api.github.com/users/EpicWink/orgs", "repos_url": "https://api.github.com/users/EpicWink/repos", "events_url": "https://api.github.com/users/EpicWink/events{/privacy}", "received_events_url": "https://api.github.com/users/EpicWink/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-24T09:37:30Z", "updated_at": "2019-10-24T13:37:12Z", "closed_at": "2019-10-24T13:37:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to access the loop variable `loop` inside a nest block (even with the `scoped` argument) causes Jinja to report an undefined-error during rendering.\r\n\r\n## Template Code\r\n```jinja\r\nSpam\r\n{% for item in [\"a\", \"list\", \"of\", \"items\"] -%}\r\n{% block spamblock scoped -%}\r\nFoo {{ item }} {% if loop.last %}Bar{% endif %}\r\n{%- endblock spamblock %}\r\n{% endfor -%}\r\nEggs\r\n```\r\n\r\n## Expected Behavior\r\nAbility to access the loop variable in the nested block. The example above should produce:\r\n```\r\nSpam\r\nFoo a \r\nFoo list \r\nFoo of \r\nFoo items Bar\r\nEggs\r\n```\r\n\r\n## Actual Behavior\r\nJinja reports an undefined-error\r\n\r\n### Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"render.py\", line 6, in <module>\r\n    rendered = template.render()\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"./template.txt\", line 3, in top-level template code\r\n    {% block spamblock scoped -%}\r\n  File \"./template.txt\", line 4, in block \"spamblock\"\r\n    Foo {{ item }} {% if loop.last %}Bar{% endif %}\r\n  File \"~/.local/lib/python3.7/site-packages/jinja2/environment.py\", line 430, in getattr\r\n    return getattr(obj, attribute)\r\njinja2.exceptions.UndefinedError: 'loop' is undefined\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.7.3 [GCC 8.3.0] on linux\r\n* Jinja version: 2.10.1\r\n\r\n## Workaround\r\nSimply setting the loop variable to another, and using the other variable inside the nested block (and overrided blocks in inheriting child templates):\r\n```jinja\r\nSpam\r\n{% for item in [\"a\", \"list\", \"of\", \"items\"] -%}\r\n{% set loop_ = loop -%}\r\n{% block spamblock scoped -%}\r\nFoo {{ item }} {% if loop_.last %}Bar{% endif %}\r\n{%- endblock spamblock %}\r\n{% endfor -%}\r\nEggs\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1078", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1078/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1078/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1078/events", "html_url": "https://github.com/pallets/jinja/issues/1078", "id": 505608315, "node_id": "MDU6SXNzdWU1MDU2MDgzMTU=", "number": 1078, "title": "loop with conditions should be fully aware of filters in loop.length etc methods", "user": {"login": "i00", "id": 1435262, "node_id": "MDQ6VXNlcjE0MzUyNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1435262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/i00", "html_url": "https://github.com/i00", "followers_url": "https://api.github.com/users/i00/followers", "following_url": "https://api.github.com/users/i00/following{/other_user}", "gists_url": "https://api.github.com/users/i00/gists{/gist_id}", "starred_url": "https://api.github.com/users/i00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/i00/subscriptions", "organizations_url": "https://api.github.com/users/i00/orgs", "repos_url": "https://api.github.com/users/i00/repos", "events_url": "https://api.github.com/users/i00/events{/privacy}", "received_events_url": "https://api.github.com/users/i00/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-11T02:55:36Z", "updated_at": "2019-10-11T15:35:23Z", "closed_at": "2019-10-11T14:47:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have also posted this bug here:\r\nhttps://github.com/home-assistant/home-assistant/issues/27435\r\n\r\n---\r\n\r\n## Expected Behavior\r\nLooping through a set and calling loop.length should list the length within the filtered list\r\n\r\n## Actual Behavior\r\nThe loop.length reports the filtered list length only up to the first \"and\"\r\n\r\n## Template Code\r\n```jinja\r\n{% for state in states.sensor if 'seventeentrack_package_' in state.entity_id and state.state == 'Ready to be Picked Up' -%}{% if loop.first %}You have {{loop.length}} packages ready to pick up: {% else %}, {% endif %}{{state.name}}{% endfor %}\r\n```\r\nThe result is: \"You have 2 packages ready to pick up: Sense Energy Monitor\"\r\nI have 2 packages, of which only 1 is waiting to be picked up ... I have hundreds of sensors, so the first condition is working.\r\n\r\n## Your Environment\r\nHome Assistant (Docker image 0.99.3)\r\nhttps://hub.docker.com/r/homeassistant/home-assistant/\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1069", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1069/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1069/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1069/events", "html_url": "https://github.com/pallets/jinja/issues/1069", "id": 502786990, "node_id": "MDU6SXNzdWU1MDI3ODY5OTA=", "number": 1069, "title": "Regression with version 2.10.2", "user": {"login": "sbrunner", "id": 353872, "node_id": "MDQ6VXNlcjM1Mzg3Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/353872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbrunner", "html_url": "https://github.com/sbrunner", "followers_url": "https://api.github.com/users/sbrunner/followers", "following_url": "https://api.github.com/users/sbrunner/following{/other_user}", "gists_url": "https://api.github.com/users/sbrunner/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbrunner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbrunner/subscriptions", "organizations_url": "https://api.github.com/users/sbrunner/orgs", "repos_url": "https://api.github.com/users/sbrunner/repos", "events_url": "https://api.github.com/users/sbrunner/events{/privacy}", "received_events_url": "https://api.github.com/users/sbrunner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-10-04T18:42:29Z", "updated_at": "2019-10-04T18:56:22Z", "closed_at": "2019-10-04T18:54:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get the following error :-(\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/pkg_resources/__init__.py\", line 2332, in resolve\r\n    return functools.reduce(getattr, self.attrs, module)\r\nAttributeError: module 'jinja2.ext' has no attribute 'bable_extract'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/pot-create\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/dist-packages/lingua/extract.py\", line 308, in main\r\n    register_babel_plugins()\r\n  File \"/usr/local/lib/python3.7/dist-packages/lingua/extractors/babel.py\", line 51, in register_babel_plugins\r\n    extractor = entry_point.load(require=True)\r\n  File \"/usr/lib/python3/dist-packages/pkg_resources/__init__.py\", line 2324, in load\r\n    return self.resolve()\r\n  File \"/usr/lib/python3/dist-packages/pkg_resources/__init__.py\", line 2334, in resolve\r\n    raise ImportError(str(exc))\r\nImportError: module 'jinja2.ext' has no attribute 'bable_extract'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1068", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1068/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1068/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1068/events", "html_url": "https://github.com/pallets/jinja/issues/1068", "id": 501902201, "node_id": "MDU6SXNzdWU1MDE5MDIyMDE=", "number": 1068, "title": "Show some equivalent list comprehensions in filter examples", "user": {"login": "mdavis-xyz", "id": 7035647, "node_id": "MDQ6VXNlcjcwMzU2NDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7035647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdavis-xyz", "html_url": "https://github.com/mdavis-xyz", "followers_url": "https://api.github.com/users/mdavis-xyz/followers", "following_url": "https://api.github.com/users/mdavis-xyz/following{/other_user}", "gists_url": "https://api.github.com/users/mdavis-xyz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdavis-xyz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdavis-xyz/subscriptions", "organizations_url": "https://api.github.com/users/mdavis-xyz/orgs", "repos_url": "https://api.github.com/users/mdavis-xyz/repos", "events_url": "https://api.github.com/users/mdavis-xyz/events{/privacy}", "received_events_url": "https://api.github.com/users/mdavis-xyz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 193352435, "node_id": "MDU6TGFiZWwxOTMzNTI0MzU=", "url": "https://api.github.com/repos/pallets/jinja/labels/docs", "name": "docs", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-03T07:37:02Z", "updated_at": "2019-10-18T19:25:28Z", "closed_at": "2019-10-18T19:25:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm willing to write a pull-request for this, but I just want to see what people think before I write it.\r\n\r\nSo the issue is this.\r\nI'm very familiar with python.\r\nI'm new to Jinja2.\r\n\r\nOften I find myself with complex data structures in my Ansible playbook (e.g. list of dicts with a list inside that), and I want to do some basic filtering, mapping etc.\r\n\r\nI think\r\n\r\n> I could do this in one line in python. I'm sure it's possible in Jinja, but I just can't figure out how. \r\n\r\nLooking up how `map`, `selectattr` etc work, then playing around with trial and errors takes a long time, especially when you're combining them.\r\n\r\nSo what if we had a \"quick start\" page, or another FAQ answer, which just listed a few list comprehension statements in python, and their equivalent in Jinja?\r\n\r\nHow do people feel about that?\r\n(Feel free to correct my draft, or propose new examples.)\r\n\r\n# Draft\r\n\r\n## List Comprehension with a filter or getting the attribute\r\n\r\nIn python\r\n\r\n```\r\ndata = [\r\n    {\r\n        'c': 'A',\r\n        'x': 1\r\n    },\r\n    {\r\n        'c': 'B',\r\n        'x': 2\r\n    },\r\n    {\r\n        'c': 'C',\r\n        'x': 1\r\n    },\r\n    {\r\n        'c': 'D',\r\n        'x': 1\r\n    }\r\n]\r\n\r\n# filter out all elements not with x > 5\r\na = [el for el in data if el['x'] > 5]\r\n\r\n# get all the 'c' attributes as a list\r\nb = [el['c'] for el in data]\r\n\r\n# get all the 'c' attributes for the elements with x > 5\r\nc = [el['c'] for el in data if el['x'] > 5]\r\n```\r\n\r\nIn Jinja2:\r\n\r\n```\r\na: {{ data | selectattr('x', 'gt', 5) | list }}\r\nb: {{ data | map(attribute='c') | list }} \r\nc: {{ data | selectattr('x', 'gt', 5) | map(attribute='c') | list }} \r\n```\r\n\r\n## Reversing\r\n\r\nIn python \r\n\r\n```\r\nx = [1, 2, 3]\r\ny = x[::-1]\r\n```\r\n\r\nIn Ansible\r\n\r\n```\r\ny: {{ x | reverse }}\r\n```\r\n\r\n\r\n## Json and Yaml\r\n\r\nIn python:\r\n\r\n```\r\nimport json\r\nd = {'a':'b'}\r\ns = json.dumps(d)\r\nx = json.loads(s)\r\n```\r\n\r\nIn Jinja2, to convert to json, just print as string.\r\n\r\n```\r\n{{ d }}\r\n```\r\n\r\nTo convert to yaml use\r\n\r\n```\r\n{{ d | to_yaml }}\r\n```\r\n\r\nIn Jinja2, to load from json, just use \r\n\r\n```\r\n{{ d | from_json }}\r\n```\r\n\r\nIn Jinja2, to load from yaml, use\r\n\r\n```\r\n{{ d | from_yaml }}\r\n```\r\n\r\n## Load from file\r\n\r\nIn python\r\n\r\n```\r\nwith open('file.txt', 'r') as f:\r\n  s = f.read()\r\n```\r\n\r\nIn Jinja2:\r\n\r\n```\r\n{{ lookup('file', 'file.txt') }}\r\n```\r\n\r\nTo read a yaml file into a variable, use\r\n\r\n```\r\nx: {{ lookup('file', 'file.yaml') | from_yaml }}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1067", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1067/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1067/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1067/events", "html_url": "https://github.com/pallets/jinja/issues/1067", "id": 497310675, "node_id": "MDU6SXNzdWU0OTczMTA2NzU=", "number": 1067, "title": "Explain autoescaping ", "user": {"login": "jtrakk", "id": 43392409, "node_id": "MDQ6VXNlcjQzMzkyNDA5", "avatar_url": "https://avatars1.githubusercontent.com/u/43392409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtrakk", "html_url": "https://github.com/jtrakk", "followers_url": "https://api.github.com/users/jtrakk/followers", "following_url": "https://api.github.com/users/jtrakk/following{/other_user}", "gists_url": "https://api.github.com/users/jtrakk/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtrakk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtrakk/subscriptions", "organizations_url": "https://api.github.com/users/jtrakk/orgs", "repos_url": "https://api.github.com/users/jtrakk/repos", "events_url": "https://api.github.com/users/jtrakk/events{/privacy}", "received_events_url": "https://api.github.com/users/jtrakk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 193352435, "node_id": "MDU6TGFiZWwxOTMzNTI0MzU=", "url": "https://api.github.com/repos/pallets/jinja/labels/docs", "name": "docs", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-23T20:26:53Z", "updated_at": "2019-10-08T21:16:01Z", "closed_at": "2019-10-08T21:16:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "It'd be helpful to new users to have an explanation of what autoescaping is and when to use it. Currently the main autoescaping docs emphasize that it's built-in, rather than what it's for :-).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1066", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1066/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1066/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1066/events", "html_url": "https://github.com/pallets/jinja/issues/1066", "id": 496836762, "node_id": "MDU6SXNzdWU0OTY4MzY3NjI=", "number": 1066, "title": "Python 3 support wording", "user": {"login": "itdependsnetworks", "id": 9260483, "node_id": "MDQ6VXNlcjkyNjA0ODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9260483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itdependsnetworks", "html_url": "https://github.com/itdependsnetworks", "followers_url": "https://api.github.com/users/itdependsnetworks/followers", "following_url": "https://api.github.com/users/itdependsnetworks/following{/other_user}", "gists_url": "https://api.github.com/users/itdependsnetworks/gists{/gist_id}", "starred_url": "https://api.github.com/users/itdependsnetworks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itdependsnetworks/subscriptions", "organizations_url": "https://api.github.com/users/itdependsnetworks/orgs", "repos_url": "https://api.github.com/users/itdependsnetworks/repos", "events_url": "https://api.github.com/users/itdependsnetworks/events{/privacy}", "received_events_url": "https://api.github.com/users/itdependsnetworks/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-22T21:42:19Z", "updated_at": "2019-09-22T22:06:25Z", "closed_at": "2019-09-22T22:06:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nPython 3 openly supported. The wording on palletsprojects.com seems to indicate it is not fully supported. \r\n\r\n## Actual Behavior\r\n\r\nIn https://jinja.palletsprojects.com/en/2.10.x/intro/#experimental-python-3-support it states: Experimental Python 3 Support\r\n\r\n## Template Code\r\n```jinja\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.x\r\n* Jinja version: 2.10.x\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1062", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1062/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1062/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1062/events", "html_url": "https://github.com/pallets/jinja/issues/1062", "id": 494587438, "node_id": "MDU6SXNzdWU0OTQ1ODc0Mzg=", "number": 1062, "title": "tojson filter doesn't take safe into account when esacping", "user": {"login": "laurent-chriqui", "id": 40354867, "node_id": "MDQ6VXNlcjQwMzU0ODY3", "avatar_url": "https://avatars3.githubusercontent.com/u/40354867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laurent-chriqui", "html_url": "https://github.com/laurent-chriqui", "followers_url": "https://api.github.com/users/laurent-chriqui/followers", "following_url": "https://api.github.com/users/laurent-chriqui/following{/other_user}", "gists_url": "https://api.github.com/users/laurent-chriqui/gists{/gist_id}", "starred_url": "https://api.github.com/users/laurent-chriqui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laurent-chriqui/subscriptions", "organizations_url": "https://api.github.com/users/laurent-chriqui/orgs", "repos_url": "https://api.github.com/users/laurent-chriqui/repos", "events_url": "https://api.github.com/users/laurent-chriqui/events{/privacy}", "received_events_url": "https://api.github.com/users/laurent-chriqui/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-09-17T12:17:38Z", "updated_at": "2019-09-18T14:26:12Z", "closed_at": "2019-09-18T14:19:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n\r\n`{{ variable|safe|tojson }}` shouldn't escape characters\r\n\r\n## Actual Behavior\r\n\r\n    -   ``<``\r\n    -   ``>``\r\n    -   ``&``\r\n    -   ``'``\r\n\r\nare always escaped.\r\n\r\n## Your Environment\r\n\r\n* Python version: 3.6\r\n* Jinja version: 2.10\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1061", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1061/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1061/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1061/events", "html_url": "https://github.com/pallets/jinja/issues/1061", "id": 492794172, "node_id": "MDU6SXNzdWU0OTI3OTQxNzI=", "number": 1061, "title": "Line Statements always trimming whitespace", "user": {"login": "efirmar", "id": 54875597, "node_id": "MDQ6VXNlcjU0ODc1NTk3", "avatar_url": "https://avatars0.githubusercontent.com/u/54875597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/efirmar", "html_url": "https://github.com/efirmar", "followers_url": "https://api.github.com/users/efirmar/followers", "following_url": "https://api.github.com/users/efirmar/following{/other_user}", "gists_url": "https://api.github.com/users/efirmar/gists{/gist_id}", "starred_url": "https://api.github.com/users/efirmar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/efirmar/subscriptions", "organizations_url": "https://api.github.com/users/efirmar/orgs", "repos_url": "https://api.github.com/users/efirmar/repos", "events_url": "https://api.github.com/users/efirmar/events{/privacy}", "received_events_url": "https://api.github.com/users/efirmar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-12T13:06:42Z", "updated_at": "2019-09-15T12:38:48Z", "closed_at": "2019-09-15T12:38:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nWhen using line statements 'trim_blocks' should be followed \r\n\r\n## Actual Behavior\r\nWhen using line statements to include templates trailing new lines are always removed.\r\n\r\nWhen including with block templates the behavior is as expected.\r\n\r\n## Template Code\r\n```python\r\nmodel_jinja = Environment(\r\n\tloader=FileSystemLoader(<path to templates>),\r\n\tautoescape=False,\r\n\tkeep_trailing_newline=True,\r\n\ttrim_blocks=False,\r\n\tlstrip_blocks=True,\r\n\tline_statement_prefix='#!',\r\n)\r\n```\r\n\r\n```yaml\r\n# child_template.yml\r\nchild:\r\n  id: xyz789\r\nbb\r\n```\r\n\r\n```jinja\r\n#! include \"child_template.yml\"\r\n\r\nmodel:\r\n  id: abc123\r\n```\r\n\r\nRenders as: \r\n```jinja\r\nchild:\r\n  id: xyz789\r\nbbmodel:\r\n  id: abc123\r\n```\r\n\r\n## Your Environment\r\n* Python version: 2.7.16\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1060", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1060/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1060/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1060/events", "html_url": "https://github.com/pallets/jinja/issues/1060", "id": 491747936, "node_id": "MDU6SXNzdWU0OTE3NDc5MzY=", "number": 1060, "title": "Renamed LICENSE file is not included in MANIFEST.in", "user": {"login": "evertrol", "id": 735460, "node_id": "MDQ6VXNlcjczNTQ2MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/735460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evertrol", "html_url": "https://github.com/evertrol", "followers_url": "https://api.github.com/users/evertrol/followers", "following_url": "https://api.github.com/users/evertrol/following{/other_user}", "gists_url": "https://api.github.com/users/evertrol/gists{/gist_id}", "starred_url": "https://api.github.com/users/evertrol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evertrol/subscriptions", "organizations_url": "https://api.github.com/users/evertrol/orgs", "repos_url": "https://api.github.com/users/evertrol/repos", "events_url": "https://api.github.com/users/evertrol/events{/privacy}", "received_events_url": "https://api.github.com/users/evertrol/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-10T15:31:55Z", "updated_at": "2019-09-20T02:28:45Z", "closed_at": "2019-09-20T02:28:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "The renamed `LICENSE.rst` file (from plain `LICENSE`, [commit ac6131d9](https://github.com/pallets/jinja/commit/ac6131d9b70d3e42abef01f985c863d49b3812a7) is not included in `MANIFEST.in`. As a result, an installation directly from the GitHub master on a system that includes the `wheel` package will show a confusing, because `pip` automatically tries to build a wheel, but can't due to a missing file. The error message is confusing, because while the wheel build fails, Jinja2 is actually installed.\r\n\r\nHere's a test case:\r\n```\r\n$ python3 -m venv testjinja2\r\n\r\n$ source testjinja2/bin/activate\r\n(testjinja2) $ pip install wheel\r\nCollecting wheel\r\n  Using cached https://files.pythonhosted.org/packages/00/83/b4a77d044e78ad1a45610eb88f745be2fd2c6d658f9798a15e384b7d57c9/wheel-0.33.6-py2.py3-none-any.whl\r\nInstalling collected packages: wheel\r\nSuccessfully installed wheel-0.33.6\r\n\r\n(testjinja2) $ pip install --upgrade git+https://github.com/pallets/jinja.git\r\n<snipped output>\r\n  running install_egg_info\r\n  Copying Jinja2.egg-info to build/bdist.macosx-10.14-x86_64/wheel/Jinja2-2.11.dev0-py3.7.egg-info\r\n  running install_scripts\r\n  error: [Errno 2] No such file or directory: 'LICENSE'\r\n\r\n  ----------------------------------------\r\n  Failed building wheel for Jinja2\r\n  Running setup.py clean for Jinja2\r\nFailed to build Jinja2\r\nInstalling collected packages: MarkupSafe, Jinja2\r\n  Running setup.py install for Jinja2 ... done\r\n\r\n(testjinja2) $ pip list\r\nPackage    Version\r\n---------- ---------\r\nJinja2     2.11.dev0\r\nMarkupSafe 1.1.1\r\npip        19.0.3\r\nsetuptools 40.8.0\r\nwheel      0.33.6\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1058", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1058/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1058/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1058/events", "html_url": "https://github.com/pallets/jinja/issues/1058", "id": 488177662, "node_id": "MDU6SXNzdWU0ODgxNzc2NjI=", "number": 1058, "title": "Async generators for python 3.5", "user": {"login": "maartenbreddels", "id": 1765949, "node_id": "MDQ6VXNlcjE3NjU5NDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1765949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maartenbreddels", "html_url": "https://github.com/maartenbreddels", "followers_url": "https://api.github.com/users/maartenbreddels/followers", "following_url": "https://api.github.com/users/maartenbreddels/following{/other_user}", "gists_url": "https://api.github.com/users/maartenbreddels/gists{/gist_id}", "starred_url": "https://api.github.com/users/maartenbreddels/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maartenbreddels/subscriptions", "organizations_url": "https://api.github.com/users/maartenbreddels/orgs", "repos_url": "https://api.github.com/users/maartenbreddels/repos", "events_url": "https://api.github.com/users/maartenbreddels/events{/privacy}", "received_events_url": "https://api.github.com/users/maartenbreddels/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-02T12:57:04Z", "updated_at": "2019-10-08T17:08:51Z", "closed_at": "2019-10-08T17:08:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "This packages provides async generators for Python3.5:\r\nhttps://pypi.org/project/async_generator/\r\n\r\nIs there interest in using this? Let's say if I open a PR, would that make a change of being merged?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1054", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1054/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1054/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1054/events", "html_url": "https://github.com/pallets/jinja/issues/1054", "id": 486540308, "node_id": "MDU6SXNzdWU0ODY1NDAzMDg=", "number": 1054, "title": "Jinja import very slow on Ubuntu 18.04", "user": {"login": "alialavia", "id": 1111939, "node_id": "MDQ6VXNlcjExMTE5Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1111939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alialavia", "html_url": "https://github.com/alialavia", "followers_url": "https://api.github.com/users/alialavia/followers", "following_url": "https://api.github.com/users/alialavia/following{/other_user}", "gists_url": "https://api.github.com/users/alialavia/gists{/gist_id}", "starred_url": "https://api.github.com/users/alialavia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alialavia/subscriptions", "organizations_url": "https://api.github.com/users/alialavia/orgs", "repos_url": "https://api.github.com/users/alialavia/repos", "events_url": "https://api.github.com/users/alialavia/events{/privacy}", "received_events_url": "https://api.github.com/users/alialavia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-28T18:27:18Z", "updated_at": "2019-08-28T18:52:58Z", "closed_at": "2019-08-28T18:52:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n`import jinja2` should run instantaneously.\r\n\r\n## Actual Behavior\r\nOn Ubuntu 18.04, it takes more than 200ms to just import jinja2:\r\n\r\nOn Ubuntu 18.04 (ARM v8.2):\r\n``` \r\n$ time python3 -c \"import jinja2\"\r\n\r\nreal    0m0.291s\r\nuser    0m0.260s\r\nsys     0m0.024s\r\n```\r\n\r\nOn Mac OS Mojave (10.14.6)\r\n\r\n```\r\n$ time python3 -c \"import jinja2\"\r\n\r\npython3 -c \"import jinja2\"  0.09s user 0.02s system 95% cpu 0.116 total\r\n```\r\n\r\nThe PR discussed in https://github.com/pallets/jinja/issues/729 does not address the issue, as this appears in the latest version of Jinja2.\r\n\r\n## Your Environment\r\n* Python version: 3.6.7\r\n* Jinja version: '2.10.1'\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1052", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1052/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1052/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1052/events", "html_url": "https://github.com/pallets/jinja/issues/1052", "id": 485764783, "node_id": "MDU6SXNzdWU0ODU3NjQ3ODM=", "number": 1052, "title": "truncate filter can no longer truncate on the right side", "user": {"login": "galaxy4public", "id": 8364154, "node_id": "MDQ6VXNlcjgzNjQxNTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/8364154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galaxy4public", "html_url": "https://github.com/galaxy4public", "followers_url": "https://api.github.com/users/galaxy4public/followers", "following_url": "https://api.github.com/users/galaxy4public/following{/other_user}", "gists_url": "https://api.github.com/users/galaxy4public/gists{/gist_id}", "starred_url": "https://api.github.com/users/galaxy4public/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galaxy4public/subscriptions", "organizations_url": "https://api.github.com/users/galaxy4public/orgs", "repos_url": "https://api.github.com/users/galaxy4public/repos", "events_url": "https://api.github.com/users/galaxy4public/events{/privacy}", "received_events_url": "https://api.github.com/users/galaxy4public/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-08-27T11:57:00Z", "updated_at": "2019-11-05T18:32:49Z", "closed_at": "2019-11-05T18:32:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Before commit #610 it was possible to do right side truncation, e.g. if one wanted to split a month name into abbreviated (3 char long) and non-abbreviated form it would be possible to achieve with:\r\n```jinja\r\n\"November\"|truncate(3, True, '')\r\n\"November\"|reverse|truncate(-3, True, '')|reverse\r\n```\r\n\r\nThe above would produce \"Nov\" and \"ember\" due to the way how string functions work:\r\n```\r\n>>> s='123456789'\r\n>>> s[:3]\r\n'123'\r\n>>> s[:-3]\r\n'123456'\r\n>>>\r\n```\r\n\r\nI think that commit removed a very useful functionality that is no longer achievable with the current version of Jinja (due to an explicit `assert()` that requires a positive truncation length to be provided.  I would suggest to remove that assert to give the opportunity to truncate a string on any end using the truncate filter.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1050", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1050/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1050/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1050/events", "html_url": "https://github.com/pallets/jinja/issues/1050", "id": 482535905, "node_id": "MDU6SXNzdWU0ODI1MzU5MDU=", "number": 1050, "title": "update_refs: Assertion `_PyGCHead_REFS(gc) != 0' failed when running test_logging_undefined() of tests/test_api.py", "user": {"login": "vstinner", "id": 194129, "node_id": "MDQ6VXNlcjE5NDEyOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/194129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vstinner", "html_url": "https://github.com/vstinner", "followers_url": "https://api.github.com/users/vstinner/followers", "following_url": "https://api.github.com/users/vstinner/following{/other_user}", "gists_url": "https://api.github.com/users/vstinner/gists{/gist_id}", "starred_url": "https://api.github.com/users/vstinner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vstinner/subscriptions", "organizations_url": "https://api.github.com/users/vstinner/orgs", "repos_url": "https://api.github.com/users/vstinner/repos", "events_url": "https://api.github.com/users/vstinner/events{/privacy}", "received_events_url": "https://api.github.com/users/vstinner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/3", "html_url": "https://github.com/pallets/jinja/milestone/3", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/3/labels", "id": 4420484, "node_id": "MDk6TWlsZXN0b25lNDQyMDQ4NA==", "number": 3, "title": "2.10.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2019-06-18T15:21:43Z", "updated_at": "2019-10-04T18:26:07Z", "due_on": null, "closed_at": "2019-10-04T18:26:07Z"}, "comments": 2, "created_at": "2019-08-19T21:25:18Z", "updated_at": "2019-09-04T14:48:16Z", "closed_at": "2019-09-04T14:48:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nPython does crash when running Jinja2 test suite on a Python compiled in debug mode and Jinja2 **version 2.10.1**:\r\n\r\n```\r\nvstinner@apu$ /home/vstinner/myprojects/python-ci/work/jinja/venv/bin/python -bb -X dev -Werror::BytesWarning -m pytest --tb=short -s Jinja2-2.10.1/tests/test_api.py -k test_logging_undefined -v\r\n=============================================================================================== test session starts ===============================================================================================\r\nplatform linux -- Python 3.7.4+, pytest-5.0.1, py-1.8.0, pluggy-0.12.0 -- /home/vstinner/myprojects/python-ci/work/jinja/venv/bin/python\r\ncachedir: .pytest_cache\r\nrootdir: /home/vstinner/myprojects/python-ci/work/jinja/Jinja2-2.10.1, inifile: setup.cfg\r\ncollected 6 items / 5 deselected / 1 selected                                                                                                                                                                     \r\n\r\nJinja2-2.10.1/tests/test_api.py::TestUndefined::test_logging_undefined PASSED\r\n\r\n================================================================================================ warnings summary =================================================================================================\r\nvenv/lib/python3.7/site-packages/_pytest/mark/structures.py:332\r\n  /home/vstinner/myprojects/python-ci/work/jinja/venv/lib/python3.7/site-packages/_pytest/mark/structures.py:332: PytestUnknownMarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/latest/mark.html\r\n    PytestUnknownMarkWarning,\r\n\r\nvenv/lib/python3.7/site-packages/_pytest/mark/structures.py:332\r\n  /home/vstinner/myprojects/python-ci/work/jinja/venv/lib/python3.7/site-packages/_pytest/mark/structures.py:332: PytestUnknownMarkWarning: Unknown pytest.mark.undefined - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/latest/mark.html\r\n    PytestUnknownMarkWarning,\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n=============================================================================== 1 passed, 5 deselected, 2 warnings in 0.05 seconds ================================================================================\r\npython: Modules/gcmodule.c:262: update_refs: Assertion `_PyGCHead_REFS(gc) != 0' failed.\r\nAborted (core dumped)\r\n\r\nvstinner@apu$ echo $?\r\n134\r\n```\r\n\r\nI get the same crash on Python 3.7, 3.8 and master branch (future 3.9).\r\n\r\nAccording to gdb, the invalid object is a traceback object:\r\n\r\n```\r\n(gdb) up\r\n#4  0x00000000005c4638 in update_refs (containers=0x8197e0 <_PyRuntime+448>) at Modules/gcmodule.c:262\r\n262\t        assert(_PyGCHead_REFS(gc) != 0);\r\n\r\n(gdb) p *gc\r\n$1 = {\r\n  gc = {\r\n    gc_next = 0xc92da0, \r\n    gc_prev = 0xc95760, \r\n    gc_refs = 0\r\n  }, \r\n  dummy = <invalid float value>\r\n}\r\n\r\n$3 = (PyTracebackObject *) 0x7fffe91fe360\r\n(gdb) p *(PyTracebackObject*)(gc[1])\r\n$4 = {\r\n  ob_base = {\r\n    _ob_next = 0x7fffe924fd60, \r\n    _ob_prev = 0x7fffe91fe3e0, \r\n    ob_refcnt = 3, \r\n    ob_type = 0x7bb740 <PyTraceBack_Type>\r\n  }, \r\n  tb_next = 0x7fffe91fe2e0, \r\n  tb_frame = 0xc97d00, \r\n  tb_lasti = 56, \r\n  tb_lineno = 727\r\n}\r\n```\r\n\r\npip freeze:\r\n\r\n```\r\natomicwrites==1.3.0\r\nattrs==19.1.0\r\nimportlib-metadata==0.19\r\nJinja2==2.10.1\r\nMarkupSafe==1.1.1\r\nmore-itertools==7.2.0\r\npackaging==19.1\r\npluggy==0.12.0\r\npy==1.8.0\r\npyparsing==2.4.2\r\npytest==5.0.1\r\nsix==1.12.0\r\nwcwidth==0.1.7\r\nzipp==0.5.2\r\n```\r\n\r\n---\r\n\r\nFirst, I reported the bug to pytest: https://github.com/pytest-dev/pytest/issues/5766\r\n\r\nBut I managed to write a reproducer which doesn't use pytest nor jinja2, by copying jinja2 into my reproducer script. My reproducer only has 4 imports:\r\n\r\n```\r\nimport sys\r\nimport textwrap\r\nimport ctypes\r\nfrom types import TracebackType\r\n```\r\n\r\nI'm now pretty sure that the bug is around \"def _init_ugly_crap():\" which uses ctypes. The code seems to be written for CPython in release mode.\r\n\r\nI'm not sure how to attach a .py file to a GitHub issue, so I uploaded it at: http://haypo.alwaysdata.net/tmp/jinja_test_api.py", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1049", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1049/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1049/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1049/events", "html_url": "https://github.com/pallets/jinja/issues/1049", "id": 482368349, "node_id": "MDU6SXNzdWU0ODIzNjgzNDk=", "number": 1049, "title": "Remove self-assignment", "user": {"login": "r41d", "id": 552662, "node_id": "MDQ6VXNlcjU1MjY2Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/552662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r41d", "html_url": "https://github.com/r41d", "followers_url": "https://api.github.com/users/r41d/followers", "following_url": "https://api.github.com/users/r41d/following{/other_user}", "gists_url": "https://api.github.com/users/r41d/gists{/gist_id}", "starred_url": "https://api.github.com/users/r41d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r41d/subscriptions", "organizations_url": "https://api.github.com/users/r41d/orgs", "repos_url": "https://api.github.com/users/r41d/repos", "events_url": "https://api.github.com/users/r41d/events{/privacy}", "received_events_url": "https://api.github.com/users/r41d/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-19T15:08:07Z", "updated_at": "2019-08-19T15:25:12Z", "closed_at": "2019-08-19T15:25:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a reason for this assignment or can it be removed?\r\n\r\nhttps://github.com/pallets/jinja/blob/274eff178d1dedcedf488a586f414a03952ac733/jinja2/_compat.py#L67\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1048", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1048/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1048/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1048/events", "html_url": "https://github.com/pallets/jinja/issues/1048", "id": 482290080, "node_id": "MDU6SXNzdWU0ODIyOTAwODA=", "number": 1048, "title": "In python3.8, the position of Unexpected Error in the stack trace is strange.", "user": {"login": "podhmo", "id": 80613, "node_id": "MDQ6VXNlcjgwNjEz", "avatar_url": "https://avatars1.githubusercontent.com/u/80613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/podhmo", "html_url": "https://github.com/podhmo", "followers_url": "https://api.github.com/users/podhmo/followers", "following_url": "https://api.github.com/users/podhmo/following{/other_user}", "gists_url": "https://api.github.com/users/podhmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/podhmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/podhmo/subscriptions", "organizations_url": "https://api.github.com/users/podhmo/orgs", "repos_url": "https://api.github.com/users/podhmo/repos", "events_url": "https://api.github.com/users/podhmo/events{/privacy}", "received_events_url": "https://api.github.com/users/podhmo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-19T12:43:14Z", "updated_at": "2019-11-20T22:43:21Z", "closed_at": "2019-10-28T15:11:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "In python3.8, the position of Unexpected Error in the stack trace is strange.\r\nAccess to an undefined variable is on line 3, but according to the error message it is on line 1.\r\n\r\n```python\r\nimport jinja2\r\n\r\nt = \"\"\"\\\r\n1: # access undefined\r\n2: \r\n3: {{xxx}} # <- accessing undefined variable, here.\"\"\"\r\n\r\nprint(jinja2.__version__)\r\nprint(jinja2.Template(t, undefined=jinja2.StrictUndefined).render())\r\n```\r\n\r\n## Expected Behavior\r\n\r\nexpected 3rd line.\r\n\r\n```\r\n  File \"<template>\", line 3, in top-level template code\r\njinja2.exceptions.UndefinedError: 'xxx' is undefined\r\n```\r\n\r\n## Actual Behavior\r\n\r\nbut 1st line.\r\n\r\n```\r\n  File \"<template>\", line 1, in <module>\r\njinja2.exceptions.UndefinedError: 'xxx' is undefined\r\n```\r\n\r\n## Template Code\r\n```jinja\r\n1: # access undefined\r\n2: \r\n3: {{xxx}} # <- accessing undefined variable, here.\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\n2.10.1\r\nTraceback (most recent call last):\r\n  File \"render-with-undefined.py\", line 9, in <module>\r\n    print(jinja2.Template(t, undefined=jinja2.StrictUndefined).render())\r\n  File \"/usr/local/lib/python3.8/site-packages/jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"/usr/local/lib/python3.8/site-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python3.8/site-packages/jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"<template>\", line 1, in <module>\r\njinja2.exceptions.UndefinedError: 'xxx' is undefined\r\n```\r\n\r\n## Your Environment\r\n\r\n* Python version: 3.8.0b3\r\n* Jinja version: 2.10.1\r\n\r\n## Detail Information\r\n\r\nhttps://gist.github.com/podhmo/0308dd8e174c3ec66a451272e4e43939", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1046", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1046/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1046/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1046/events", "html_url": "https://github.com/pallets/jinja/issues/1046", "id": 479006932, "node_id": "MDU6SXNzdWU0NzkwMDY5MzI=", "number": 1046, "title": "Package Loader gives \"no module named APP\" error", "user": {"login": "cepbrian", "id": 14946451, "node_id": "MDQ6VXNlcjE0OTQ2NDUx", "avatar_url": "https://avatars0.githubusercontent.com/u/14946451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cepbrian", "html_url": "https://github.com/cepbrian", "followers_url": "https://api.github.com/users/cepbrian/followers", "following_url": "https://api.github.com/users/cepbrian/following{/other_user}", "gists_url": "https://api.github.com/users/cepbrian/gists{/gist_id}", "starred_url": "https://api.github.com/users/cepbrian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cepbrian/subscriptions", "organizations_url": "https://api.github.com/users/cepbrian/orgs", "repos_url": "https://api.github.com/users/cepbrian/repos", "events_url": "https://api.github.com/users/cepbrian/events{/privacy}", "received_events_url": "https://api.github.com/users/cepbrian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-09T14:09:18Z", "updated_at": "2019-08-12T15:23:23Z", "closed_at": "2019-08-12T15:23:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to create a packageLoader in Jinja2 with:\r\n\r\n`loader=jinja2.PackageLoader( 'cyan', 'templates')\r\nI get an error:\r\n```\r\n\r\nIn [2]: loader=PackageLoader( 'cyan', 'templates')                                                      \r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n~/work/venvs/CYAN/lib/python3.7/site-packages/pkg_resources/__init__.py in get_provider(moduleOrReq)\r\n    358     try:\r\n--> 359         module = sys.modules[moduleOrReq]\r\n    360     except KeyError:\r\n\r\nKeyError: 'cyan'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nModuleNotFoundError                       Traceback (most recent call last)\r\n<ipython-input-2-9f5a5a8d0f55> in <module>\r\n----> 1 loader=PackageLoader( 'cyan', 'templates')\r\n\r\n~/work/venvs/CYAN/lib/python3.7/site-packages/jinja2/loaders.py in __init__(self, package_name, package_path, encoding)\r\n    222         from pkg_resources import DefaultProvider, ResourceManager, \\\r\n    223                                   get_provider\r\n--> 224         provider = get_provider(package_name)\r\n    225         self.encoding = encoding\r\n    226         self.manager = ResourceManager()\r\n\r\n~/work/venvs/CYAN/lib/python3.7/site-packages/pkg_resources/__init__.py in get_provider(moduleOrReq)\r\n    359         module = sys.modules[moduleOrReq]\r\n    360     except KeyError:\r\n--> 361         __import__(moduleOrReq)\r\n    362         module = sys.modules[moduleOrReq]\r\n    363     loader = getattr(module, '__loader__', None)\r\n\r\n```\r\nModuleNotFoundError: No module named 'cyan'\r\nThis USED to work. I haven't figured out what recent change could have caused this. There is a templates directory, it has init.py.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1044", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1044/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1044/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1044/events", "html_url": "https://github.com/pallets/jinja/issues/1044", "id": 478505625, "node_id": "MDU6SXNzdWU0Nzg1MDU2MjU=", "number": 1044, "title": "Template.generate does not use generators all the way down", "user": {"login": "maartenbreddels", "id": 1765949, "node_id": "MDQ6VXNlcjE3NjU5NDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1765949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maartenbreddels", "html_url": "https://github.com/maartenbreddels", "followers_url": "https://api.github.com/users/maartenbreddels/followers", "following_url": "https://api.github.com/users/maartenbreddels/following{/other_user}", "gists_url": "https://api.github.com/users/maartenbreddels/gists{/gist_id}", "starred_url": "https://api.github.com/users/maartenbreddels/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maartenbreddels/subscriptions", "organizations_url": "https://api.github.com/users/maartenbreddels/orgs", "repos_url": "https://api.github.com/users/maartenbreddels/repos", "events_url": "https://api.github.com/users/maartenbreddels/events{/privacy}", "received_events_url": "https://api.github.com/users/maartenbreddels/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-08T14:26:11Z", "updated_at": "2019-12-03T14:25:54Z", "closed_at": "2019-12-03T14:25:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n## Expected Behavior\r\nWhen using `Template.generate()` I expect to it to yield snippets for each statements, independent of it calling a super block.\r\n\r\n## Actual Behavior\r\n\r\nCalls to `{{ super() }}` will eagerly 'evaluate' the block (in the implementation I see it is implemented with e.g.:\r\n```\r\nyield to_string(context.call(l_0_super))\r\n``` \r\n\r\nWhat I expect, is that I get all the template snippets from the super block, e.g. implemented somwhat like\r\n```\r\nyield from to_string(context.call(l_0_super))\r\n```\r\n\r\n## Example Code\r\n\r\n```python\r\nfrom jinja2 import Template, Environment, DictLoader\r\n\r\ndef users():\r\n    l =  'foo bar'.split()\r\n    for k in l:\r\n        yield k\r\nsources = {\r\n    \"base\":\"\"\"\r\n    <html>\r\n    \r\n    {% block users %}\r\n    {% for user in users() %}\r\n        {{ user }}\r\n    {% endfor %}\r\n    {% endblock users %}\r\n    \r\n    {{ bla }}\r\n    \r\n    </html>\"\"\",\r\n    \"derived\": \"\"\"\r\n    {% extends 'base' %}\r\n    {% block users %}\r\n    {{ super() }}\r\n    {% endblock users %}\r\n\r\n    \"\"\"\r\n}\r\nenv = Environment(loader=DictLoader(sources))\r\n\r\ntemplate = env.get_template('derived')\r\n\r\nfor part in template.generate(bla=1, users=users):\r\n    print(\"--- begin ---\")\r\n    print(part)\r\n    print(\"---  end ---\")\r\n```\r\n\r\nGives as output:\r\n```\r\n$ python jinjatest.py                                                                            dev\r\n--- begin ---\r\n\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n    <html>\r\n\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n\r\n\r\n        foo\r\n\r\n        bar\r\n\r\n\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n\r\n    1\r\n\r\n    </html>\r\n---  end ---\r\n```\r\n\r\n(foo and bar are returned together).\r\n\r\nWhile using the base template (`template = env.get_template('base')`) I get the expected result:\r\n```\r\n$ python jinjatest.py                                                                            dev\r\n--- begin ---\r\n\r\n    <html>\r\n\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n        foo\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n        bar\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n\r\n---  end ---\r\n--- begin ---\r\n\r\n\r\n    1\r\n\r\n    </html>\r\n---  end ---\r\n```\r\n\r\n(foo and bar are not returned in 1 snippet).\r\n\r\n## Your Environment\r\n* Python version: 3.6\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1043", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1043/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1043/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1043/events", "html_url": "https://github.com/pallets/jinja/issues/1043", "id": 474455024, "node_id": "MDU6SXNzdWU0NzQ0NTUwMjQ=", "number": 1043, "title": "Docs at ReadTheDocs not available", "user": {"login": "wxtim", "id": 26465611, "node_id": "MDQ6VXNlcjI2NDY1NjEx", "avatar_url": "https://avatars3.githubusercontent.com/u/26465611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wxtim", "html_url": "https://github.com/wxtim", "followers_url": "https://api.github.com/users/wxtim/followers", "following_url": "https://api.github.com/users/wxtim/following{/other_user}", "gists_url": "https://api.github.com/users/wxtim/gists{/gist_id}", "starred_url": "https://api.github.com/users/wxtim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wxtim/subscriptions", "organizations_url": "https://api.github.com/users/wxtim/orgs", "repos_url": "https://api.github.com/users/wxtim/repos", "events_url": "https://api.github.com/users/wxtim/events{/privacy}", "received_events_url": "https://api.github.com/users/wxtim/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-30T08:48:07Z", "updated_at": "2019-07-30T13:02:44Z", "closed_at": "2019-07-30T13:00:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nLink http://jinja.pocoo.org/ in readme.rst should take me to jinja2 documentation at readthedocs.\r\n\r\n## Actual Behavior\r\n404 error - invalide host\r\n\r\n## Template Code\r\n```rst\r\nWebsite: http://jinja.pocoo.org/\r\n```\r\n\r\n## Full Traceback\r\n```\r\n404 - Invalid Host\r\nThe host \"jinja.pocoo.org\" is unknown to Read the Docs\r\n\r\nIf you control this domain and believe this is in error, please review our custom domain documentation. In the past, we allowed custom domains to point to us without configuring the domain in the Read the Docs dashboard and we attempted to intelligently guess the correct project based on DNS settings. Now, we believe that explicit is better than implicit. Below are some steps to help you get your domain working again:\r\n\r\n    Ensure you have a CNAME record pointing to readthedocs.io\r\n    Add your desired domain in the Read the Docs dashboard for your project (under Your Project >> Admin >> Domains)\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1039", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1039/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1039/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1039/events", "html_url": "https://github.com/pallets/jinja/issues/1039", "id": 471270212, "node_id": "MDU6SXNzdWU0NzEyNzAyMTI=", "number": 1039, "title": "StrictUndefined fails for tojson filter", "user": {"login": "beanaroo", "id": 1748909, "node_id": "MDQ6VXNlcjE3NDg5MDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1748909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beanaroo", "html_url": "https://github.com/beanaroo", "followers_url": "https://api.github.com/users/beanaroo/followers", "following_url": "https://api.github.com/users/beanaroo/following{/other_user}", "gists_url": "https://api.github.com/users/beanaroo/gists{/gist_id}", "starred_url": "https://api.github.com/users/beanaroo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beanaroo/subscriptions", "organizations_url": "https://api.github.com/users/beanaroo/orgs", "repos_url": "https://api.github.com/users/beanaroo/repos", "events_url": "https://api.github.com/users/beanaroo/events{/privacy}", "received_events_url": "https://api.github.com/users/beanaroo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-07-22T19:24:24Z", "updated_at": "2019-09-19T22:37:55Z", "closed_at": "2019-07-24T16:56:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using the `tojson` filter on an undefined varaible with `StrictUndefined` raises `TypeError: Object of type StrictUndefined is not JSON serializable` instead of `UndefinedError: 'value' is undefined`.\r\n\r\n```python\r\ne = Environment(undefined=StrictUndefined)\r\nt = e.from_string(\"{{ value|tojson }}\")\r\nt.render()\r\n```\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/opt/pycharm-eap/helpers/pydev/pydevd.py\", line 2060, in <module>\r\n    main()\r\n  File \"/opt/pycharm-eap/helpers/pydev/pydevd.py\", line 2054, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"/opt/pycharm-eap/helpers/pydev/pydevd.py\", line 1405, in run\r\n    return self._exec(is_module, entry_point_fn, module_name, file, globals, locals)\r\n  File \"/opt/pycharm-eap/helpers/pydev/pydevd.py\", line 1412, in _exec\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/opt/pycharm-eap/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"myscript.py\", line 212, in <module>\r\n    main()\r\n  File \"myscript.py\", line 53, in main\r\n    rendered_plan_path = render_plan(args.latest)\r\n  File \"myscript.py\", line 91, in render_plan\r\n    plan_renderer.render_recursive()\r\n  File \"myscript.py\", line 170, in render_recursive\r\n    self.render_file(template)\r\n  File \"myscript.py\", line 150, in render_file\r\n    rendered_template = self.j2env.get_template(template).render(config)\r\n  File \"/usr/lib/python3.7/site-packages/jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"/usr/lib/python3.7/site-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"/usr/lib/python3.7/site-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/lib/python3.7/site-packages/jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"mytemplate.tf.j2\", line 11, in top-level template code\r\n    options = {{ my_missing_dictionary|tojson }}\r\n  File \"/usr/lib/python3.7/site-packages/jinja2/filters.py\", line 1078, in do_tojson\r\n    return htmlsafe_json_dumps(value, dumper=dumper, **options)\r\n  File \"/usr/lib/python3.7/site-packages/jinja2/utils.py\", line 565, in htmlsafe_json_dumps\r\n    rv = dumper(obj, **kwargs) \\\r\n  File \"/usr/lib/python3.7/json/__init__.py\", line 238, in dumps\r\n    **kw).encode(obj)\r\n  File \"/usr/lib/python3.7/json/encoder.py\", line 199, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n  File \"/usr/lib/python3.7/json/encoder.py\", line 257, in iterencode\r\n    return _iterencode(o, 0)\r\n  File \"/usr/lib/python3.7/json/encoder.py\", line 179, in default\r\n    raise TypeError(f'Object of type {o.__class__.__name__} '\r\nTypeError: Object of type StrictUndefined is not JSON serializable\r\n```\r\n\r\n* Python version: 3.7\r\n* Jinja version: 2.10.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1037", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1037/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1037/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1037/events", "html_url": "https://github.com/pallets/jinja/issues/1037", "id": 470615687, "node_id": "MDU6SXNzdWU0NzA2MTU2ODc=", "number": 1037, "title": "Error in printing exception with undefined variable in import statement", "user": {"login": "jlumpe", "id": 7455396, "node_id": "MDQ6VXNlcjc0NTUzOTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7455396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlumpe", "html_url": "https://github.com/jlumpe", "followers_url": "https://api.github.com/users/jlumpe/followers", "following_url": "https://api.github.com/users/jlumpe/following{/other_user}", "gists_url": "https://api.github.com/users/jlumpe/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlumpe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlumpe/subscriptions", "organizations_url": "https://api.github.com/users/jlumpe/orgs", "repos_url": "https://api.github.com/users/jlumpe/repos", "events_url": "https://api.github.com/users/jlumpe/events{/privacy}", "received_events_url": "https://api.github.com/users/jlumpe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 0, "created_at": "2019-07-20T00:44:37Z", "updated_at": "2019-12-05T21:50:43Z", "closed_at": "2019-12-05T21:50:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "When making the mistake of using the \"python syntax\" in an import statement and forgetting to enclose the template name in quotes, and when the name corresponds to an undefined variable, a `TemplateNotFound` exception is raised with `Undefined` as the template name and prints an uninformative message.\r\n\r\n## Expected Behavior\r\nProbably checking the type of the template name expression, and if it's not a string report that instead of `TemplateNotFound`.\r\n\r\n## Actual Behavior\r\nException prints as\r\n\r\n    jinja2.exceptions.TemplateNotFound: <exception str() failed>\r\n\r\nin Python REPL and\r\n\r\n    <class 'str'>: (<class 'TypeError'>, TypeError('__str__ returned non-string (type Undefined)',))\r\n\r\nin IPython.\r\n\r\n## Template Code\r\n```jinja\r\n{% from foo import bar %}\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/student/anaconda/lib/python3.6/site-packages/jinja2/asyncsupport.py\", line 76, in render\r\n    return original_render(self, *args, **kwargs)\r\n  File \"/Users/student/anaconda/lib/python3.6/site-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"/Users/student/anaconda/lib/python3.6/site-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/Users/student/anaconda/lib/python3.6/site-packages/jinja2/_compat.py\", line 37, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"<template>\", line 1, in top-level template code\r\n  File \"/Users/student/anaconda/lib/python3.6/site-packages/jinja2/loaders.py\", line 286, in get_source\r\n    raise TemplateNotFound(template)\r\njinja2.exceptions.TemplateNotFound: <exception str() failed>\r\n```\r\n\r\nIn  the innermost line `raise TemplateNotFound(template)`, `template` is `Undefined`. `TemplateNotFound.__str__()` just returns `self.message`, which is also `Undefined`, so the exact behavior is dependent on what exactly is doing the exception handling/printing.\r\n\r\nGranted, this is probably unlikely to happen when loading from actual template files because of the inclusion of a file extension in the name, but I was testing with `DictLoader` and the keys were just alphanumeric strings. It took a while to figure out what the actual problem was.\r\n\r\n## Your Environment\r\n* Python version: 3.6.2\r\n* Jinja version: 2.10\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1036", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1036/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1036/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1036/events", "html_url": "https://github.com/pallets/jinja/issues/1036", "id": 470523265, "node_id": "MDU6SXNzdWU0NzA1MjMyNjU=", "number": 1036, "title": "Allow +%} to ignore trim_blocks like {%+ do for lstrip_blocks", "user": {"login": "bkmeneguello", "id": 1322552, "node_id": "MDQ6VXNlcjEzMjI1NTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1322552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkmeneguello", "html_url": "https://github.com/bkmeneguello", "followers_url": "https://api.github.com/users/bkmeneguello/followers", "following_url": "https://api.github.com/users/bkmeneguello/following{/other_user}", "gists_url": "https://api.github.com/users/bkmeneguello/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkmeneguello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkmeneguello/subscriptions", "organizations_url": "https://api.github.com/users/bkmeneguello/orgs", "repos_url": "https://api.github.com/users/bkmeneguello/repos", "events_url": "https://api.github.com/users/bkmeneguello/events{/privacy}", "received_events_url": "https://api.github.com/users/bkmeneguello/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/1", "html_url": "https://github.com/pallets/jinja/milestone/1", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/1/labels", "id": 1699763, "node_id": "MDk6TWlsZXN0b25lMTY5OTc2Mw==", "number": 1, "title": "3.0.0", "description": "", "creator": {"login": "jeffwidman", "id": 483314, "node_id": "MDQ6VXNlcjQ4MzMxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffwidman", "html_url": "https://github.com/jeffwidman", "followers_url": "https://api.github.com/users/jeffwidman/followers", "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}", "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions", "organizations_url": "https://api.github.com/users/jeffwidman/orgs", "repos_url": "https://api.github.com/users/jeffwidman/repos", "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffwidman/received_events", "type": "User", "site_admin": false}, "open_issues": 4, "closed_issues": 10, "state": "open", "created_at": "2016-04-12T07:31:20Z", "updated_at": "2020-06-22T17:34:41Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2019-07-19T20:18:22Z", "updated_at": "2020-06-22T17:34:41Z", "closed_at": "2020-06-22T17:34:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nWhen trim_block is enabled, if a block ends with +%} this behaviour should be ignored.\r\n\r\n## Actual Behavior\r\nAs reported in previous issues, defining a block this way results in an error and to force new lines right after a block it's required to put two line breaks.\r\n\r\n## Template Code\r\nWhen trim_blocks is enabled\r\n```jinja\r\n{% if something %}X{% endif +%}\r\nmore things\r\n```\r\nShould result in:\r\n```\r\nX\r\nmore things\r\n```\r\n\r\n## Your Environment\r\n* Python version: any\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1034", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1034/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1034/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1034/events", "html_url": "https://github.com/pallets/jinja/issues/1034", "id": 469589922, "node_id": "MDU6SXNzdWU0Njk1ODk5MjI=", "number": 1034, "title": "meta.find_undeclared_variables does not take into account default filter", "user": {"login": "chandanc-ns", "id": 41563428, "node_id": "MDQ6VXNlcjQxNTYzNDI4", "avatar_url": "https://avatars3.githubusercontent.com/u/41563428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chandanc-ns", "html_url": "https://github.com/chandanc-ns", "followers_url": "https://api.github.com/users/chandanc-ns/followers", "following_url": "https://api.github.com/users/chandanc-ns/following{/other_user}", "gists_url": "https://api.github.com/users/chandanc-ns/gists{/gist_id}", "starred_url": "https://api.github.com/users/chandanc-ns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chandanc-ns/subscriptions", "organizations_url": "https://api.github.com/users/chandanc-ns/orgs", "repos_url": "https://api.github.com/users/chandanc-ns/repos", "events_url": "https://api.github.com/users/chandanc-ns/events{/privacy}", "received_events_url": "https://api.github.com/users/chandanc-ns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 357062399, "node_id": "MDU6TGFiZWwzNTcwNjIzOTk=", "url": "https://api.github.com/repos/pallets/jinja/labels/bug", "name": "bug", "color": "d93f0b", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-18T06:21:59Z", "updated_at": "2019-10-11T15:35:05Z", "closed_at": "2019-10-11T15:35:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nmeta.find_undeclared_variables does not take into account default filter\r\n---\r\n\r\n## Expected Behavior\r\nPlease see the code in Template Code section, while the template renders correctly find_undeclared_variables reports bar as undeclared variable\r\n\r\nmeta.find_undeclared_variables(ast) == set([])\r\n\r\n## Actual Behavior\r\nmeta.find_undeclared_variables(ast) == set(['bar'])\r\n\r\n## Template Code\r\n```jfrom jinja2 import Environment, meta\r\nfrom jinja2 import Template\r\n\r\n_template_body = '{% set foo = 42 %}{{ bar|default(10) + foo }}'\r\n_temp = Template(_template_body)\r\nassert _temp.render()\r\nenv = Environment()\r\nast = env.parse(_template_body)\r\nassert meta.find_undeclared_variables(ast) == set([''])\r\n```\r\n\r\n## Full Traceback\r\nNone\r\n\r\n## Your Environment\r\n* Python version: Python 3.5.2\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1033", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1033/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1033/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1033/events", "html_url": "https://github.com/pallets/jinja/issues/1033", "id": 468127830, "node_id": "MDU6SXNzdWU0NjgxMjc4MzA=", "number": 1033, "title": "missing details in 'sort' filter docs", "user": {"login": "utoddl", "id": 3476899, "node_id": "MDQ6VXNlcjM0NzY4OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/3476899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/utoddl", "html_url": "https://github.com/utoddl", "followers_url": "https://api.github.com/users/utoddl/followers", "following_url": "https://api.github.com/users/utoddl/following{/other_user}", "gists_url": "https://api.github.com/users/utoddl/gists{/gist_id}", "starred_url": "https://api.github.com/users/utoddl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/utoddl/subscriptions", "organizations_url": "https://api.github.com/users/utoddl/orgs", "repos_url": "https://api.github.com/users/utoddl/repos", "events_url": "https://api.github.com/users/utoddl/events{/privacy}", "received_events_url": "https://api.github.com/users/utoddl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 193352435, "node_id": "MDU6TGFiZWwxOTMzNTI0MzU=", "url": "https://api.github.com/repos/pallets/jinja/labels/docs", "name": "docs", "color": "fef2c0", "default": false, "description": null}, {"id": 393940080, "node_id": "MDU6TGFiZWwzOTM5NDAwODA=", "url": "https://api.github.com/repos/pallets/jinja/labels/good%20first%20issue", "name": "good first issue", "color": "0e8a16", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-15T13:28:22Z", "updated_at": "2019-10-17T19:21:15Z", "closed_at": "2019-10-17T19:21:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is an issue with the \"sort\" filter's docs. (The code itself seems to work fine.) A couple of extra lines could save people a _lot_ of time. Please consider adding (1) that the sort performed by the sort filter is stable, and (2) that sorting by multiple attributes therefore can be accomplished by\r\n```jinja\r\n    sort(attribute='b') | sort(attribute='a')\r\n```\r\n---\r\n\r\n## Expected Behavior\r\nUsers read the sort docs, then write the above code.\r\n\r\n## Actual Behavior\r\nUsers read the sort docs, then write code like the following over the course of more hours than I'd like to admit to accomplish the same thing:\r\n```jinja\r\n  sort(attribute='a') | groupby(attribute='a') | map('last') \r\n              | map('sort', attribute='b') | list | flatten\r\n```\r\n## Your Environment\r\nNot really relevant, but since you asked:\r\n* Python version: multiple (We're using Ansible in a 800+host environment.)\r\n* Jinja version: surprisingly recent, given the hodge-podge of hosts we're running from.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1032", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1032/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1032/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1032/events", "html_url": "https://github.com/pallets/jinja/issues/1032", "id": 464908734, "node_id": "MDU6SXNzdWU0NjQ5MDg3MzQ=", "number": 1032, "title": "RecursionError when running pytest on Jinja2 source", "user": {"login": "Kelledin", "id": 11402500, "node_id": "MDQ6VXNlcjExNDAyNTAw", "avatar_url": "https://avatars3.githubusercontent.com/u/11402500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kelledin", "html_url": "https://github.com/Kelledin", "followers_url": "https://api.github.com/users/Kelledin/followers", "following_url": "https://api.github.com/users/Kelledin/following{/other_user}", "gists_url": "https://api.github.com/users/Kelledin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kelledin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kelledin/subscriptions", "organizations_url": "https://api.github.com/users/Kelledin/orgs", "repos_url": "https://api.github.com/users/Kelledin/repos", "events_url": "https://api.github.com/users/Kelledin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kelledin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-07T02:44:56Z", "updated_at": "2019-07-07T03:08:20Z", "closed_at": "2019-07-07T03:08:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\nRunning \"python3 -m pytest -v\" within the Jinja2 source tree should collect and run test cases from the `tests/` directory.\r\n\r\n## Actual Behavior\r\npytest collects 539 tests, but dies with \"RecursionError: maximum recursion depth exceeded\" before running any of them.\r\n\r\n## Template Code\r\nNo particular template of my own; this is apparently triggered by the content under `tests/res/`.  Moving `tests/res/` aside gets past the RecursionError, but of course any tests trying to import res have problems.\r\n\r\nMoving tests/res/templates aside (leaving just an empty `__init__.py`) does not prevent this error.\r\n\r\n## Full Traceback\r\n```\r\nfatal: --local can only be used inside a git repository\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.6.6, pytest-3.7.1, py-1.5.4, pluggy-0.7.1 -- /usr/bin/python3\r\ncachedir: .pytest_cache\r\nbenchmark: 3.1.1 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\r\nrootdir: /home/ivaldi/packages/newpkg/jinja-2.10.1, inifile: setup.cfg\r\nplugins: xdist-1.22.5, timeout-1.3.3, sugar-0.9.1, shutil-1.7.0, mock-1.10.0, isort-0.3.1, forked-0.2, flake8-1.0.4, faulthandler-1.5.0, expect-1.1.0, env-0.6.2, cython-0.1.0, cov-2.5.1, console-scripts-0.1.9, checkdocs-1.2.0, catchlog-1.2.2, benchmark-3.1.1, aspectlib-1.4.2\r\ncollecting ... collected 539 items / 1 errors\r\n\r\n==================================== ERRORS ====================================\r\n____________________ ERROR collecting tests/res/__init__.py ____________________\r\n/usr/lib/python3/dist-packages/pluggy/hooks.py:258: in __call__\r\n    return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\n/usr/lib/python3/dist-packages/pluggy/manager.py:67: in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n/usr/lib/python3/dist-packages/pluggy/manager.py:61: in <lambda>\r\n    firstresult=hook.spec_opts.get('firstresult'),\r\n/usr/lib/python3/dist-packages/_pytest/python.py:210: in pytest_collect_file\r\n    return ihook.pytest_pycollect_makemodule(path=path, parent=parent)\r\n/usr/lib/python3/dist-packages/pluggy/hooks.py:258: in __call__\r\n    return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\n/usr/lib/python3/dist-packages/pluggy/manager.py:67: in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n/usr/lib/python3/dist-packages/pluggy/manager.py:61: in <lambda>\r\n    firstresult=hook.spec_opts.get('firstresult'),\r\n/usr/lib/python3/dist-packages/_pytest/python.py:215: in pytest_pycollect_makemodule\r\n    return Package(path, parent)\r\n/usr/lib/python3/dist-packages/_pytest/python.py:552: in __init__\r\n    self, fspath, parent=parent, config=config, session=session, nodeid=nodeid\r\n/usr/lib/python3/dist-packages/_pytest/nodes.py:371: in __init__\r\n    name, parent, config, session, nodeid=nodeid, fspath=fspath\r\n/usr/lib/python3/dist-packages/_pytest/python.py:275: in __init__\r\n    super(PyobjMixin, self).__init__(*k, **kw)\r\n/usr/lib/python3/dist-packages/_pytest/nodes.py:93: in __init__\r\n    self.keywords = NodeKeywords(self)\r\nE   RecursionError: maximum recursion depth exceeded\r\n=============================== warnings summary ===============================\r\n<undetermined location>\r\n  pytest-catchlog plugin has been merged into the core, please remove it from your requirements.\r\n\r\n-- Docs: http://doc.pytest.org/en/latest/warnings.html\r\n!!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n===================== 1 warnings, 1 error in 3.73 seconds ======================\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.6.6 or 2.7.15 (2.7.15 has the same result, with a somewhat different traceback)\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1029", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1029/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1029/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1029/events", "html_url": "https://github.com/pallets/jinja/issues/1029", "id": 464253656, "node_id": "MDU6SXNzdWU0NjQyNTM2NTY=", "number": 1029, "title": "NativeEnvironment - strange behaviour for templates containing comments", "user": {"login": "jpgxs", "id": 7528759, "node_id": "MDQ6VXNlcjc1Mjg3NTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7528759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpgxs", "html_url": "https://github.com/jpgxs", "followers_url": "https://api.github.com/users/jpgxs/followers", "following_url": "https://api.github.com/users/jpgxs/following{/other_user}", "gists_url": "https://api.github.com/users/jpgxs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpgxs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpgxs/subscriptions", "organizations_url": "https://api.github.com/users/jpgxs/orgs", "repos_url": "https://api.github.com/users/jpgxs/repos", "events_url": "https://api.github.com/users/jpgxs/events{/privacy}", "received_events_url": "https://api.github.com/users/jpgxs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-04T12:59:07Z", "updated_at": "2019-07-04T16:37:20Z", "closed_at": "2019-07-04T16:37:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using `NativeEnvironment` causes strange behaviour for templates which include comments whereby some comments are replaced with adjacent text from the original template.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nThe behaviour of comments (`{# ... #}`) does not change when using `NativeEnvironment`.\r\n\r\n## Actual Behavior\r\nComments (`{# ... #}`) are replaced with adjacent content from the original template.\r\n\r\n## Template Code\r\n```jinja\r\nLINE1\r\n{# COMMENT #}\r\nLINE2\r\n```\r\n\r\n## Expected output\r\n```\r\nLINE1\r\n\r\nLINE2\r\n```\r\n\r\n## Actual output\r\n```\r\nLINE1\r\n\r\nLINE2LINE1\r\n\r\nLINE2\r\n```\r\n\r\n## Your Environment\r\n* Python version: 2.7.15 / 3.7.2\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1028", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1028/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1028/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1028/events", "html_url": "https://github.com/pallets/jinja/issues/1028", "id": 462976626, "node_id": "MDU6SXNzdWU0NjI5NzY2MjY=", "number": 1028, "title": "pytest warn", "user": {"login": "j-vnode", "id": 11017449, "node_id": "MDQ6VXNlcjExMDE3NDQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/11017449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j-vnode", "html_url": "https://github.com/j-vnode", "followers_url": "https://api.github.com/users/j-vnode/followers", "following_url": "https://api.github.com/users/j-vnode/following{/other_user}", "gists_url": "https://api.github.com/users/j-vnode/gists{/gist_id}", "starred_url": "https://api.github.com/users/j-vnode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j-vnode/subscriptions", "organizations_url": "https://api.github.com/users/j-vnode/orgs", "repos_url": "https://api.github.com/users/j-vnode/repos", "events_url": "https://api.github.com/users/j-vnode/events{/privacy}", "received_events_url": "https://api.github.com/users/j-vnode/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-02T01:25:03Z", "updated_at": "2019-07-04T21:00:58Z", "closed_at": "2019-07-02T04:37:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n    from collections import MutableMapping", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1026", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1026/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1026/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1026/events", "html_url": "https://github.com/pallets/jinja/issues/1026", "id": 462681961, "node_id": "MDU6SXNzdWU0NjI2ODE5NjE=", "number": 1026, "title": "Project documentation could be more friendly to potential new contributors", "user": {"login": "holdenweb", "id": 105312, "node_id": "MDQ6VXNlcjEwNTMxMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/105312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/holdenweb", "html_url": "https://github.com/holdenweb", "followers_url": "https://api.github.com/users/holdenweb/followers", "following_url": "https://api.github.com/users/holdenweb/following{/other_user}", "gists_url": "https://api.github.com/users/holdenweb/gists{/gist_id}", "starred_url": "https://api.github.com/users/holdenweb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/holdenweb/subscriptions", "organizations_url": "https://api.github.com/users/holdenweb/orgs", "repos_url": "https://api.github.com/users/holdenweb/repos", "events_url": "https://api.github.com/users/holdenweb/events{/privacy}", "received_events_url": "https://api.github.com/users/holdenweb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-01T12:17:54Z", "updated_at": "2019-07-01T15:15:32Z", "closed_at": "2019-07-01T15:15:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue tracker is a tool to address bugs in Jinja itself.\r\nPlease use the #pocoo IRC channel on freenode or Stack Overflow for general\r\nquestions about using Jinja or issues not related to Jinja.\r\n\r\nIf you'd like to report a bug in Jinja, fill out the template below and provide\r\nany extra information that may be useful / related to your problem.\r\nIdeally, you create an [MCVE](http://stackoverflow.com/help/mcve) reproducing\r\nthe problem before opening an issue to ensure it's not caused by something in\r\nyour code.\r\n\r\n---\r\n\r\n## Expected Behavior\r\nFrom jinja's PyPI page I should be able to download and install a development version\r\nof jinja2.\r\n\r\n## Actual Behavior\r\nThe PyPI page at https://pypi.org/project/Jinja2/ contains no reference to the source repository.\r\nNavigating to the [documentation](http://jinja.pocoo.org/docs/2.10/), where a search for \"contrib\" fails, to the [installation page](http://jinja.pocoo.org/docs/2.10/intro/#installation) section I finally reached the instructions for [Installing the development version](http://jinja.pocoo.org/docs/2.10/intro/#installing-the-development-version) to find they are unhelpful in the following ways:\r\n\r\n1. The `git clone` command in step 3 works, but creates a directory named `jinja`, so the `cd` in step 4 would fail.\r\n2. Step 4 is Python v2-specific for no apparent reason, and assumes a UNIX-like environment. It also assumes that the host system's Python will be used, and while we may assume developers have sufficient permissions to do so it is rarely recommended.\r\n3. No mention is made of virtual environments, which should be mentioned and demonstrated to permit those without previous experience of them to build and use jinja2.\r\n4. Given that we are now at 2.10.1 I should have thought the [Python 3 support](http://jinja.pocoo.org/docs/2.10/intro/#experimental-python-3-support) is no longer experimental.\r\n## Template Code\r\n```jinja\r\n{{ none required }}\r\n\r\n```\r\n\r\n## Full Traceback\r\n```pytb\r\nnone required\r\n\r\n```\r\n\r\n## Your Environment\r\n* Python version: Windows 10 '3.7.3 (default, Apr 24 2019, 15:29:51) [MSC v.1915 64 bit (AMD64)]' installed via conda.\r\n* Jinja version: 2.10.1\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1024", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1024/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1024/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1024/events", "html_url": "https://github.com/pallets/jinja/issues/1024", "id": 459867177, "node_id": "MDU6SXNzdWU0NTk4NjcxNzc=", "number": 1024, "title": "Boolean output string filter", "user": {"login": "darkdragon-001", "id": 177976, "node_id": "MDQ6VXNlcjE3Nzk3Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/177976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darkdragon-001", "html_url": "https://github.com/darkdragon-001", "followers_url": "https://api.github.com/users/darkdragon-001/followers", "following_url": "https://api.github.com/users/darkdragon-001/following{/other_user}", "gists_url": "https://api.github.com/users/darkdragon-001/gists{/gist_id}", "starred_url": "https://api.github.com/users/darkdragon-001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darkdragon-001/subscriptions", "organizations_url": "https://api.github.com/users/darkdragon-001/orgs", "repos_url": "https://api.github.com/users/darkdragon-001/repos", "events_url": "https://api.github.com/users/darkdragon-001/events{/privacy}", "received_events_url": "https://api.github.com/users/darkdragon-001/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-24T12:37:15Z", "updated_at": "2019-06-24T15:18:43Z", "closed_at": "2019-06-24T15:16:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I need to output boolean variables as string to build a command. My commands want to have `yes` and `no`. So the `string` filter (`mybool|string`) does not work since it outputs `True` and `False`.\r\nCurrently, I use `('yes' if mybool else 'no')`, but it would be nice to have something prettier built-in.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pallets/jinja/issues/1020", "repository_url": "https://api.github.com/repos/pallets/jinja", "labels_url": "https://api.github.com/repos/pallets/jinja/issues/1020/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/jinja/issues/1020/comments", "events_url": "https://api.github.com/repos/pallets/jinja/issues/1020/events", "html_url": "https://github.com/pallets/jinja/issues/1020", "id": 457719595, "node_id": "MDU6SXNzdWU0NTc3MTk1OTU=", "number": 1020, "title": "Jinja2 NativeEnvironment dropping single quotes between elements in template to render", "user": {"login": "geauxvirtual", "id": 1395030, "node_id": "MDQ6VXNlcjEzOTUwMzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1395030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geauxvirtual", "html_url": "https://github.com/geauxvirtual", "followers_url": "https://api.github.com/users/geauxvirtual/followers", "following_url": "https://api.github.com/users/geauxvirtual/following{/other_user}", "gists_url": "https://api.github.com/users/geauxvirtual/gists{/gist_id}", "starred_url": "https://api.github.com/users/geauxvirtual/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geauxvirtual/subscriptions", "organizations_url": "https://api.github.com/users/geauxvirtual/orgs", "repos_url": "https://api.github.com/users/geauxvirtual/repos", "events_url": "https://api.github.com/users/geauxvirtual/events{/privacy}", "received_events_url": "https://api.github.com/users/geauxvirtual/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/jinja/milestones/2", "html_url": "https://github.com/pallets/jinja/milestone/2", "labels_url": "https://api.github.com/repos/pallets/jinja/milestones/2/labels", "id": 3092936, "node_id": "MDk6TWlsZXN0b25lMzA5MjkzNg==", "number": 2, "title": "2.11.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 81, "state": "closed", "created_at": "2018-02-06T14:08:54Z", "updated_at": "2020-01-29T06:36:03Z", "due_on": null, "closed_at": "2020-01-29T06:36:03Z"}, "comments": 1, "created_at": "2019-06-18T22:12:40Z", "updated_at": "2019-11-15T13:27:13Z", "closed_at": "2019-10-22T20:33:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Expected Behavior\r\n```\r\n>>> from jinja2 import Template\r\n>>> template = Template(\"'{{ foo }}', '{{ bar }}', '{{ baz }}'\")\r\n>>> template.render(foo='foobar', bar='barbaz', baz='bazfoo')\r\n('foobar', 'barbaz', 'bazfoo')\r\n```\r\n\r\n## Actual Behavior\r\n```\r\n>>> from jinja2.nativetypes import NativeEnvironment\r\n>>> e = NativeEnvironment()\r\n>>> t = e.from_string(\"'{{ foo }}', '{{ bar }}', '{{ baz }}'\")\r\n>>> t.render(foo='foobar', bar='barbaz', baz='bazfoo')\r\n'foobar, barbaz, bazfoo'\r\n```\r\n\r\n\r\n## Your Environment\r\n* Python version: 2.7.5\r\n* Jinja version: 2.10, 2.10.1, current master\r\n\r\nTrying to find an explanation of the on the above. Tested this in an interpreter to narrow it down to just Jinja2, and nothing else that may be calling it, such as Ansible with jinja2_native set to True.\r\n\r\nWhen not using jinja2_native, we get the expected behavior above that the three substitutions occur with single quotes around each value. When jinja2_native is set to true (in the NativeEnvironment as shown above), the inner single quotes in the string are disregarded, and a single string is returned with the three substitutions.\r\n\r\nThis also occurs even with additional characters between the single quotes:\r\n```\r\n>>> e = NativeEnvironment()\r\n>>> t = e.from_string(\"--foo='{{ foo }}' --bar='{{ bar }}'\")\r\n>>> t.render(foo='foobar', bar='barbaz')\r\nu\"--foo='foobar --bar=barbaz'\"\r\n```\r\n\r\nAny help would be appreciated.\r\n", "performed_via_github_app": null, "score": 1.0}]}