{"total_count": 104, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/160", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/160/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/160/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/160", "id": 672547265, "node_id": "MDU6SXNzdWU2NzI1NDcyNjU=", "number": 160, "title": "Error when connecting Client.", "user": {"login": "icychocolate98", "id": 45860726, "node_id": "MDQ6VXNlcjQ1ODYwNzI2", "avatar_url": "https://avatars2.githubusercontent.com/u/45860726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icychocolate98", "html_url": "https://github.com/icychocolate98", "followers_url": "https://api.github.com/users/icychocolate98/followers", "following_url": "https://api.github.com/users/icychocolate98/following{/other_user}", "gists_url": "https://api.github.com/users/icychocolate98/gists{/gist_id}", "starred_url": "https://api.github.com/users/icychocolate98/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icychocolate98/subscriptions", "organizations_url": "https://api.github.com/users/icychocolate98/orgs", "repos_url": "https://api.github.com/users/icychocolate98/repos", "events_url": "https://api.github.com/users/icychocolate98/events{/privacy}", "received_events_url": "https://api.github.com/users/icychocolate98/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-04T06:44:06Z", "updated_at": "2020-08-04T10:57:40Z", "closed_at": "2020-08-04T06:56:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nHi I'm trying to use pure client API to connect and make some queries. But I have this error:\r\n\r\n\"SSL: WRONG_VERSION_NUMBER'\"\r\n\r\n```\r\n**To Reproduce**\r\nclient = Client(host = CLICKHOUSE_SERVER,\r\n                port = 9000,\r\n                user =CLICKHOUSE_USER,\r\n                password = CLICKHOUSE_PASSWORD,\r\n                secure = True,\r\n                verify = False,\r\n                database = database,\r\n                compression = True\r\n            )\r\n\r\n    tableName = 'test'\r\n\r\n    query = 'CREATE TABLE'+tableName+'ENGINE = Memory'\r\n    \r\n    client.execute(query)\r\n```\r\n\r\n\r\n**Expected behavior**\r\n\r\n\r\n**Versions**\r\n\r\n- clickhouse-driver==0.1.4\r\n- Python 3.6.9\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/158", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/158/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/158/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/158", "id": 666272976, "node_id": "MDU6SXNzdWU2NjYyNzI5NzY=", "number": 158, "title": "A way to disable logging", "user": {"login": "tetafro", "id": 11755173, "node_id": "MDQ6VXNlcjExNzU1MTcz", "avatar_url": "https://avatars1.githubusercontent.com/u/11755173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tetafro", "html_url": "https://github.com/tetafro", "followers_url": "https://api.github.com/users/tetafro/followers", "following_url": "https://api.github.com/users/tetafro/following{/other_user}", "gists_url": "https://api.github.com/users/tetafro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tetafro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tetafro/subscriptions", "organizations_url": "https://api.github.com/users/tetafro/orgs", "repos_url": "https://api.github.com/users/tetafro/repos", "events_url": "https://api.github.com/users/tetafro/events{/privacy}", "received_events_url": "https://api.github.com/users/tetafro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-27T12:56:18Z", "updated_at": "2020-07-27T16:24:07Z", "closed_at": "2020-07-27T16:24:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to disable logging inside the library? I want to log only from my code, and to disable traces in logs (except from unhandled exception).\r\nBut currently I get this\r\n```python\r\nclickhouse = clickhouse_driver.Client(host=host, port=port)\r\ntry:\r\n    clickhouse.execute('SELEC 1')\r\nexcept Exception as e:\r\n    logger.fatal('Failed to execute query: ' + str(e))\r\n```\r\n\r\n```\r\nFailed to connect to localhost:9001\r\nTraceback (most recent call last):\r\n  File \"/project/venv/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 256, in connect\r\n    return self._init_connection(host, port)\r\n  File \"/project/venv/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 226, in _init_connection\r\n    self.socket = self._create_socket(host, port)\r\n  File \"/project/venv/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 221, in _create_socket\r\n    raise err\r\n  File \"/project/venv/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 212, in _create_socket\r\n    sock.connect(sa)\r\nConnectionRefusedError: [Errno 111] Connection refused\r\nFailed to execute query: Code: 210. Connection refused (None:None)\r\n```\r\n\r\nAs you can see, there's an error from library along with my own error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/157", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/157/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/157/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/157", "id": 663627654, "node_id": "MDU6SXNzdWU2NjM2Mjc2NTQ=", "number": 157, "title": "clickhouse_driver.errors.TypeMismatchError: Code: 53. Type mismatch in VALUES section", "user": {"login": "workoutokok", "id": 44049598, "node_id": "MDQ6VXNlcjQ0MDQ5NTk4", "avatar_url": "https://avatars0.githubusercontent.com/u/44049598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workoutokok", "html_url": "https://github.com/workoutokok", "followers_url": "https://api.github.com/users/workoutokok/followers", "following_url": "https://api.github.com/users/workoutokok/following{/other_user}", "gists_url": "https://api.github.com/users/workoutokok/gists{/gist_id}", "starred_url": "https://api.github.com/users/workoutokok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workoutokok/subscriptions", "organizations_url": "https://api.github.com/users/workoutokok/orgs", "repos_url": "https://api.github.com/users/workoutokok/repos", "events_url": "https://api.github.com/users/workoutokok/events{/privacy}", "received_events_url": "https://api.github.com/users/workoutokok/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-22T09:49:45Z", "updated_at": "2020-07-23T05:43:49Z", "closed_at": "2020-07-23T05:42:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nMinimal piece of Python code that reproduces the problem.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Versions**\r\n\r\n- Version of package with the problem.\r\n- Python version.\r\n\r\nclickhouse_driver.errors.TypeMismatchError: Code: 53. Type mismatch in VALUES section. Repeat query with types_check=True for detailed info. Column ENTRY_TIME: argument out of range\r\n![image](https://user-images.githubusercontent.com/44049598/88162275-b7fe6880-cc43-11ea-9e07-a32a77b726d8.png)\r\n\r\n![image](https://user-images.githubusercontent.com/44049598/88162207-9dc48a80-cc43-11ea-83ff-ea936d6eb7d7.png)\r\n\r\nparams=[ {'ENTRY_TIME': datetime.datetime(1900, 1, 1, 8, 5, 56)}]\r\nif the datetime.datetime(1900, 1, 1, 8, 5, 56) greater than or equal datetime.datetime(1970, 1, 1, 0, 0, 00) it can execute sucessfully", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/153", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/153/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/153/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/153/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/153", "id": 651345826, "node_id": "MDU6SXNzdWU2NTEzNDU4MjY=", "number": 153, "title": "clickhouse_driver.errors.SocketTimeoutError: Code: 209. ", "user": {"login": "sunyongsheng112", "id": 49972499, "node_id": "MDQ6VXNlcjQ5OTcyNDk5", "avatar_url": "https://avatars2.githubusercontent.com/u/49972499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunyongsheng112", "html_url": "https://github.com/sunyongsheng112", "followers_url": "https://api.github.com/users/sunyongsheng112/followers", "following_url": "https://api.github.com/users/sunyongsheng112/following{/other_user}", "gists_url": "https://api.github.com/users/sunyongsheng112/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunyongsheng112/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunyongsheng112/subscriptions", "organizations_url": "https://api.github.com/users/sunyongsheng112/orgs", "repos_url": "https://api.github.com/users/sunyongsheng112/repos", "events_url": "https://api.github.com/users/sunyongsheng112/events{/privacy}", "received_events_url": "https://api.github.com/users/sunyongsheng112/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-06T08:23:57Z", "updated_at": "2020-07-07T11:14:02Z", "closed_at": "2020-07-07T11:14:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Python 3.7.1 (default, Jun 28 2020, 14:14:13) \r\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from clickhouse_driver.client import Client\r\n>>> client = Client('localhost',port= 8123, password='UHXQQmhb' )\r\n>>> client.execute(\"SELECT timestamp from ft_match_predication_all where  timestamp like '2020-07-05 %' limit 1\")\r\nFailed to connect to localhost:8123\r\nTraceback (most recent call last):\r\n  File \"/usr/local/python3/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 256, in connect\r\n    return self._init_connection(host, port)\r\n  File \"/usr/local/python3/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 238, in _init_connection\r\n    self.receive_hello()\r\n  File \"/usr/local/python3/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 331, in receive_hello\r\n    packet_type = read_varint(self.fin)\r\n  File \"clickhouse_driver/varint.pyx\", line 40, in clickhouse_driver.varint.read_varint\r\n  File \"clickhouse_driver/bufferedreader.pyx\", line 55, in clickhouse_driver.bufferedreader.BufferedReader.read_one\r\n  File \"clickhouse_driver/bufferedreader.pyx\", line 188, in clickhouse_driver.bufferedreader.BufferedSocketReader.read_into_buffer\r\nsocket.timeout: timed out\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/python3/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 205, in execute\r\n    self.connection.force_connect()\r\n  File \"/usr/local/python3/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 180, in force_connect\r\n    self.connect()\r\n  File \"/usr/local/python3/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 277, in connect\r\n    raise err\r\nclickhouse_driver.errors.SocketTimeoutError: Code: 209. None (None:None)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/151", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/151/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/151/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/151/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/151", "id": 650858195, "node_id": "MDU6SXNzdWU2NTA4NTgxOTU=", "number": 151, "title": "dictionary substitution for strings (quote problem)", "user": {"login": "robsunch", "id": 11682269, "node_id": "MDQ6VXNlcjExNjgyMjY5", "avatar_url": "https://avatars0.githubusercontent.com/u/11682269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robsunch", "html_url": "https://github.com/robsunch", "followers_url": "https://api.github.com/users/robsunch/followers", "following_url": "https://api.github.com/users/robsunch/following{/other_user}", "gists_url": "https://api.github.com/users/robsunch/gists{/gist_id}", "starred_url": "https://api.github.com/users/robsunch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robsunch/subscriptions", "organizations_url": "https://api.github.com/users/robsunch/orgs", "repos_url": "https://api.github.com/users/robsunch/repos", "events_url": "https://api.github.com/users/robsunch/events{/privacy}", "received_events_url": "https://api.github.com/users/robsunch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-04T09:15:13Z", "updated_at": "2020-07-10T20:46:03Z", "closed_at": "2020-07-10T20:46:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Description**\r\nThis is probably not a bug, but I don't know where is a good place to find an answer. Sorry for crowding the space here. I am also new to clickhouse and python, so please forgive my ignorance.\r\n\r\nI want to loop over a list of table names. For example, \r\n\r\n`client.execute('SELECT count() FROM default.table_a')`\r\n`client.execute('SELECT count() FROM default.table_b')`\r\n`client.execute('SELECT count() FROM default.table_c')`\r\n\r\nI tried the following dictionary substitution:\r\n`for x in ['a','b','c']:\r\n  client.execute('SELECT count() FROM default.table_%(table)s', {'table': x})\r\n`\r\nThis doesn't work and returns an error:\r\n\r\n> DB::Exception: Syntax error: failed at position 43: 'a'. Expected one of: SAMPLE, LIMIT, WHERE, INNER, AS, HAVING, INTO OUTFILE, GROUP BY, identifier, LEFT ARRAY JOIN, PREWHERE, JOIN, alias, ORDER BY, array join, SETTINGS, UNION ALL, ARRAY JOIN, FORMAT, Dot, WITH, FINAL, token, table, table function, subquery or list of joined tables. Stack trace:\r\n\r\nI think the problem is that the dictionary substitution keeps the quotes. Is there a way to get rid of the quotes? It seems that all the examples in the documentation are trying to inject numbers rather than strings.\r\n\r\n**Versions**\r\n\r\n- Python 3.8.3\r\n- clickhouse-driver 0.1.4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/147", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/147/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/147/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/147", "id": 647998292, "node_id": "MDU6SXNzdWU2NDc5OTgyOTI=", "number": 147, "title": "IterQueryResult", "user": {"login": "burrito-dev", "id": 28867872, "node_id": "MDQ6VXNlcjI4ODY3ODcy", "avatar_url": "https://avatars2.githubusercontent.com/u/28867872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/burrito-dev", "html_url": "https://github.com/burrito-dev", "followers_url": "https://api.github.com/users/burrito-dev/followers", "following_url": "https://api.github.com/users/burrito-dev/following{/other_user}", "gists_url": "https://api.github.com/users/burrito-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/burrito-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/burrito-dev/subscriptions", "organizations_url": "https://api.github.com/users/burrito-dev/orgs", "repos_url": "https://api.github.com/users/burrito-dev/repos", "events_url": "https://api.github.com/users/burrito-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/burrito-dev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-30T08:58:38Z", "updated_at": "2020-06-30T19:03:21Z", "closed_at": "2020-06-30T19:03:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello there!\r\n\r\nThere is no way to get IterQueryResult object. I think it would be nice to get this object in client.execute_iter(proxy=False) or something like that to have an opportunity to iterate over rows. \r\n\r\nI have a lot of problems with that, because my app's logic connected with max_block_size, and i had to create cringe hacks over execute_iter", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/146", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/146/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/146/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/146/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/146", "id": 646653691, "node_id": "MDU6SXNzdWU2NDY2NTM2OTE=", "number": 146, "title": "Unquotting special characters", "user": {"login": "VorontsovAlex", "id": 43369243, "node_id": "MDQ6VXNlcjQzMzY5MjQz", "avatar_url": "https://avatars3.githubusercontent.com/u/43369243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VorontsovAlex", "html_url": "https://github.com/VorontsovAlex", "followers_url": "https://api.github.com/users/VorontsovAlex/followers", "following_url": "https://api.github.com/users/VorontsovAlex/following{/other_user}", "gists_url": "https://api.github.com/users/VorontsovAlex/gists{/gist_id}", "starred_url": "https://api.github.com/users/VorontsovAlex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VorontsovAlex/subscriptions", "organizations_url": "https://api.github.com/users/VorontsovAlex/orgs", "repos_url": "https://api.github.com/users/VorontsovAlex/repos", "events_url": "https://api.github.com/users/VorontsovAlex/events{/privacy}", "received_events_url": "https://api.github.com/users/VorontsovAlex/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-27T10:19:42Z", "updated_at": "2020-07-01T07:11:58Z", "closed_at": "2020-07-01T07:11:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nCreating a Client object using the function is shown below produces an error when either username or password contains at least one of the following characters: \r\n`@/:`\r\nhttps://github.com/mymarilyn/clickhouse-driver/blob/1069842d6fb16d7871f272214e1e4bc9384355ef/clickhouse_driver/client.py#L428\r\nI suggest using unquote function for them.  \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/145", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/145/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/145/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/145", "id": 640671144, "node_id": "MDU6SXNzdWU2NDA2NzExNDQ=", "number": 145, "title": "UnexpectedPacketFromServerError while trying to use clickhouse-driver", "user": {"login": "atercygnus", "id": 24862461, "node_id": "MDQ6VXNlcjI0ODYyNDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/24862461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atercygnus", "html_url": "https://github.com/atercygnus", "followers_url": "https://api.github.com/users/atercygnus/followers", "following_url": "https://api.github.com/users/atercygnus/following{/other_user}", "gists_url": "https://api.github.com/users/atercygnus/gists{/gist_id}", "starred_url": "https://api.github.com/users/atercygnus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atercygnus/subscriptions", "organizations_url": "https://api.github.com/users/atercygnus/orgs", "repos_url": "https://api.github.com/users/atercygnus/repos", "events_url": "https://api.github.com/users/atercygnus/events{/privacy}", "received_events_url": "https://api.github.com/users/atercygnus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-17T18:59:37Z", "updated_at": "2020-06-22T10:48:27Z", "closed_at": "2020-06-22T10:48:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have clickhouse on production and try to make queryes using clickhouse-driver.\r\n\r\nMinimal code snippet:\r\n```\r\n#! /usr/local/bin/python3.6\r\n\r\nfrom clickhouse_driver import Client\r\n\r\nclient = Client(\r\n    host='myserver.com',\r\n    database='default',\r\n    port=9090,\r\n    user='user',\r\n    password='password'\r\n)\r\n\r\nprint(client.execute('select 1'))\r\n```\r\n\r\ngives an error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"./ch_test_2.py\", line 13, in <module>\r\n    print(client.execute('select 1'))\r\n  File \"/home/beglyak/.local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 205, in execute\r\n    self.connection.force_connect()\r\n  File \"/home/beglyak/.local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 180, in force_connect\r\n    self.connect()\r\n  File \"/home/beglyak/.local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 256, in connect\r\n    return self._init_connection(host, port)\r\n  File \"/home/beglyak/.local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 238, in _init_connection\r\n    self.receive_hello()\r\n  File \"/home/beglyak/.local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 374, in receive_hello\r\n    raise errors.UnexpectedPacketFromServerError(message)\r\nclickhouse_driver.errors.UnexpectedPacketFromServerError: Code: 102. Unexpected packet from server None:None (expected Hello or Exception, got Unknown packet)\r\n```\r\n\r\nSame credentials using http works fine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/143", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/143/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/143/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/143/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/143", "id": 639223575, "node_id": "MDU6SXNzdWU2MzkyMjM1NzU=", "number": 143, "title": "Possible to send custom headers with requests / queries?", "user": {"login": "pjatx", "id": 5004634, "node_id": "MDQ6VXNlcjUwMDQ2MzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5004634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjatx", "html_url": "https://github.com/pjatx", "followers_url": "https://api.github.com/users/pjatx/followers", "following_url": "https://api.github.com/users/pjatx/following{/other_user}", "gists_url": "https://api.github.com/users/pjatx/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjatx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjatx/subscriptions", "organizations_url": "https://api.github.com/users/pjatx/orgs", "repos_url": "https://api.github.com/users/pjatx/repos", "events_url": "https://api.github.com/users/pjatx/events{/privacy}", "received_events_url": "https://api.github.com/users/pjatx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-15T22:29:47Z", "updated_at": "2020-06-16T16:33:52Z", "closed_at": "2020-06-16T16:33:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to alter the code a bit to pass through a custom http header? I work in an environment where that's necessary to get through to our clickhouse instance. \r\n\r\nI've got it working via the Clickhouse CLI tool, but would love some direction on how I might be able to achieve the same in this tool as I'd like to script some queries. Any help / guidance would be really appreciated!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/138", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/138/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/138/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/138", "id": 625612086, "node_id": "MDU6SXNzdWU2MjU2MTIwODY=", "number": 138, "title": "All fields mandatory during insert?", "user": {"login": "kulkarnikv", "id": 9944640, "node_id": "MDQ6VXNlcjk5NDQ2NDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9944640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kulkarnikv", "html_url": "https://github.com/kulkarnikv", "followers_url": "https://api.github.com/users/kulkarnikv/followers", "following_url": "https://api.github.com/users/kulkarnikv/following{/other_user}", "gists_url": "https://api.github.com/users/kulkarnikv/gists{/gist_id}", "starred_url": "https://api.github.com/users/kulkarnikv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kulkarnikv/subscriptions", "organizations_url": "https://api.github.com/users/kulkarnikv/orgs", "repos_url": "https://api.github.com/users/kulkarnikv/repos", "events_url": "https://api.github.com/users/kulkarnikv/events{/privacy}", "received_events_url": "https://api.github.com/users/kulkarnikv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-27T11:26:25Z", "updated_at": "2020-05-28T04:43:46Z", "closed_at": "2020-05-28T04:43:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "While executing insert statement, the driver is throwing KeyError. Is this a known behavior or a bug or I am not using some setting? \r\n\r\nclickhouse-driver version - 0.1.3\r\nclickhouse server version - 20.4.4\r\n\r\n**Using native client:**\r\n\r\n`clickhouse.us-central1-dev.internal :) insert into r format JSONEachRow {\"a\":\"a1\"}`\r\nINSERT INTO r FORMAT JSONEachRow\r\nOk.\r\n1 rows in set. Elapsed: 0.030 sec. \r\n\r\n**Using clickhouse-driver on python:**\r\n\r\n`>>> from clickhouse_driver import Client`\r\n`>>> clickhouse_client = Client('XXX.XXX.XXX.XXX')`\r\n`>>> clickhouse_client.execute('describe r')`\r\n[('a', 'String', '', '', '', '', ''), ('b', 'String', '', '', '', '', '')]\r\n`>>> clickhouse_client.execute('insert into r format JSONEachRow', [{\"a\":\"a1\", \"b\":\"b1\"}])`\r\n1\r\n`>>> clickhouse_client.execute('insert into r format JSONEachRow', [{\"a\":\"a1\"}])`\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 211, in execute\r\n    columnar=columnar\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 366, in process_insert_query\r\n    types_check=types_check, columnar=columnar)\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 400, in send_data\r\n    types_check=types_check)\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/block.py\", line 39, in __init__\r\n    self.data = self.normalize(data or [])\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/block.py\", line 127, in normalize\r\n    self._mutate_dicts_to_rows(data)\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/block.py\", line 161, in _mutate_dicts_to_rows\r\n    data[i] = [row[name] for name in column_names]\r\n  File \"/Users/koushikkulkarni/opt/anaconda3/lib/python3.7/site-packages/clickhouse_driver/block.py\", line 161, in <listcomp>\r\n    data[i] = [row[name] for name in column_names]\r\nKeyError: 'b'\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/137", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/137/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/137/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/137", "id": 620718352, "node_id": "MDU6SXNzdWU2MjA3MTgzNTI=", "number": 137, "title": "After install clickhouse-driver(0.1.3) from source code\uff0c import error", "user": {"login": "linzhi", "id": 450938, "node_id": "MDQ6VXNlcjQ1MDkzOA==", "avatar_url": "https://avatars2.githubusercontent.com/u/450938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linzhi", "html_url": "https://github.com/linzhi", "followers_url": "https://api.github.com/users/linzhi/followers", "following_url": "https://api.github.com/users/linzhi/following{/other_user}", "gists_url": "https://api.github.com/users/linzhi/gists{/gist_id}", "starred_url": "https://api.github.com/users/linzhi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linzhi/subscriptions", "organizations_url": "https://api.github.com/users/linzhi/orgs", "repos_url": "https://api.github.com/users/linzhi/repos", "events_url": "https://api.github.com/users/linzhi/events{/privacy}", "received_events_url": "https://api.github.com/users/linzhi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-19T06:38:04Z", "updated_at": "2020-06-30T16:19:52Z", "closed_at": "2020-06-30T16:19:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nfrom clickhouse_driver import Client\r\nModuleNotFoundError: No module named 'clickhouse_driver.varint'\r\n\r\n**To Reproduce**\r\nMinimal piece of Python code that reproduces the problem.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Versions**\r\n\r\n- Version of package with the problem.\r\n- 3.7.0.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/134", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/134/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/134/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/134", "id": 588365327, "node_id": "MDU6SXNzdWU1ODgzNjUzMjc=", "number": 134, "title": "Are we tz aware or not?", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-26T11:56:44Z", "updated_at": "2020-03-27T20:00:51Z", "closed_at": "2020-03-27T20:00:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please look at this example:\r\n\r\n```\r\nnode = Client(host='localhost', port=8123, database='default', compression=True)\r\n\r\nnode.execute(\"create table dummy (dtime DateTime, val Int8) engine Memory\")\r\nnode.execute('insert into dummy (dtime, val) values (now(), 1)')\r\nnode.execute('select * from dummy')\r\n```\r\n\r\n[(datetime.datetime(2020, 3, 26, 12, 42, 4), 1)]\r\n\r\n`node.execute('select toStartOfMinute(dtime), val from dummy')`\r\n\r\n[(datetime.datetime(2020, 3, 26, 12, 42, tzinfo=<DstTzInfo 'Europe/Rome' CET+1:00:00 STD>), 1)]\r\n\r\nAs you can see, default behavior is to get not tz aware datetime, but if we use toStartOf... functions, than result is tz aware.\r\n\r\nAre we tz aware or not?\r\nWe should be consistent here.\r\n\r\n**Versions**\r\nclickhouse_driver 0.1.3\r\npython 3.7.4 (windows 10 64)\r\nClickHouse server version 19.16.3 revision 54427\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/132", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/132/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/132/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/132", "id": 580883914, "node_id": "MDU6SXNzdWU1ODA4ODM5MTQ=", "number": 132, "title": "Is not it better to be renamed to 'clickhouse_driver_numpy' or so?", "user": {"login": "balaccord", "id": 61668410, "node_id": "MDQ6VXNlcjYxNjY4NDEw", "avatar_url": "https://avatars2.githubusercontent.com/u/61668410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/balaccord", "html_url": "https://github.com/balaccord", "followers_url": "https://api.github.com/users/balaccord/followers", "following_url": "https://api.github.com/users/balaccord/following{/other_user}", "gists_url": "https://api.github.com/users/balaccord/gists{/gist_id}", "starred_url": "https://api.github.com/users/balaccord/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/balaccord/subscriptions", "organizations_url": "https://api.github.com/users/balaccord/orgs", "repos_url": "https://api.github.com/users/balaccord/repos", "events_url": "https://api.github.com/users/balaccord/events{/privacy}", "received_events_url": "https://api.github.com/users/balaccord/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-13T21:59:15Z", "updated_at": "2020-03-13T22:25:00Z", "closed_at": "2020-03-13T22:25:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**SORRY, WRONG REPOSITORY**\r\nit's for https://github.com/Arturus/clickhouse-driver\r\n\r\n**WAS**\r\n\r\nIt seems to me this module is better to be renamed to the non-conflicting _something_ just to make sure if someone (say, me) would want to have both modules installed: the standard (slow yet supported) and this one (fast yet kinda left)\r\n\r\nQuick and dirty workaround:\r\n\r\n```\r\nfind . -type f | grep -vE '\\.git' |\r\n  xargs perl -pi.orig -e 's/(clickhouse)([_-])(driver)/$1$2$3$2numpy/g'\r\npip -e .\r\n```\r\n\r\nQuick and dirty 1e7 rows test (digits are real, names are dummy)\r\nIf someone asked me I'd say the performance is _JUST AMAZING_ comparing to the standard module: >20x speedup!!!\r\n\r\n```\r\nimport clickhouse_driver\r\nimport clickhouse_driver_numpy\r\n\r\nclient = clickhouse_driver.Client('192.168.1.225', database=\"some_db\")\r\nclient_numpy = clickhouse_driver_numpy.Client('192.168.1.225', database=\"some_db\", settings=dict(numpy_columns=True))\r\n\r\n%time data=client.execute('SELECT f1_int32, f2_int64, f3_int32 FROM some_table LIMIT 10000000', columnar=True) # the same int32 field 3 times \r\n%time data=client_numpy.execute('SELECT f1_int32, f2_int64, f3_int32 FROM some_table LIMIT 10000000', columnar=True)\r\nWall time: 23.6 s\r\nWall time: 1.08 s\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/131", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/131/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/131/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/131", "id": 580369076, "node_id": "MDU6SXNzdWU1ODAzNjkwNzY=", "number": 131, "title": "ImportError: .../varint.cpython-36m-x86_64-linux-gnu.so: failed to map segment from shared object: Operation not permitted", "user": {"login": "edwinkong", "id": 12974944, "node_id": "MDQ6VXNlcjEyOTc0OTQ0", "avatar_url": "https://avatars2.githubusercontent.com/u/12974944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edwinkong", "html_url": "https://github.com/edwinkong", "followers_url": "https://api.github.com/users/edwinkong/followers", "following_url": "https://api.github.com/users/edwinkong/following{/other_user}", "gists_url": "https://api.github.com/users/edwinkong/gists{/gist_id}", "starred_url": "https://api.github.com/users/edwinkong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edwinkong/subscriptions", "organizations_url": "https://api.github.com/users/edwinkong/orgs", "repos_url": "https://api.github.com/users/edwinkong/repos", "events_url": "https://api.github.com/users/edwinkong/events{/privacy}", "received_events_url": "https://api.github.com/users/edwinkong/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-13T04:49:18Z", "updated_at": "2020-06-10T16:48:38Z", "closed_at": "2020-06-10T16:48:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "- **Problem**\r\nWhen executing `import clickhouse_driver` in a virtualenv, an ImportError was raised.\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/pipeline/counter_pipeline/venv/lib64/python3.6/site-packages/clickhouse_driver/__init__.py\", line 2, in <module>\r\n    from .client import Client\r\n  File \"/home/pipeline/counter_pipeline/venv/lib64/python3.6/site-packages/clickhouse_driver/client.py\", line 6, in <module>\r\n    from .block import ColumnOrientedBlock, RowOrientedBlock\r\n  File \"/home/pipeline/counter_pipeline/venv/lib64/python3.6/site-packages/clickhouse_driver/block.py\", line 1, in <module>\r\n    from .reader import read_varint, read_binary_uint8, read_binary_int32\r\n  File \"/home/pipeline/counter_pipeline/venv/lib64/python3.6/site-packages/clickhouse_driver/reader.py\", line 3, in <module>\r\n    from .varint import read_varint\r\nImportError: /home/pipeline/counter_pipeline/venv/lib64/python3.6/site-packages/clickhouse_driver/varint.cpython-36m-x86_64-linux-gnu.so: failed to map segment from shared object: Operation not permitted\r\n```\r\nRunning the Python as root, no avail.\r\n\r\n- **Environment**\r\nPython version: Python 3.6.8 \r\nOS version: RedHat Enterprise Linux 7.5\r\nDriver version: clickhouse _driver==0.1.3\r\nClickHouse version: ClickHouse client version 19.16.2.2 (official build).\r\n\r\n- **Additional Information**\r\nIt worked in another miniconda3 environment.\r\n\r\n[strace result](https://github.com/mymarilyn/clickhouse-driver/files/4327947/strace.txt)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/129", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/129/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/129/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/129", "id": 577646645, "node_id": "MDU6SXNzdWU1Nzc2NDY2NDU=", "number": 129, "title": "Decimal is broken when specified as `Decimal64(S)` rather than `Decimal(P,S)` in schemas", "user": {"login": "mridsole", "id": 9067729, "node_id": "MDQ6VXNlcjkwNjc3Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/9067729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mridsole", "html_url": "https://github.com/mridsole", "followers_url": "https://api.github.com/users/mridsole/followers", "following_url": "https://api.github.com/users/mridsole/following{/other_user}", "gists_url": "https://api.github.com/users/mridsole/gists{/gist_id}", "starred_url": "https://api.github.com/users/mridsole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mridsole/subscriptions", "organizations_url": "https://api.github.com/users/mridsole/orgs", "repos_url": "https://api.github.com/users/mridsole/repos", "events_url": "https://api.github.com/users/mridsole/events{/privacy}", "received_events_url": "https://api.github.com/users/mridsole/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-09T04:11:32Z", "updated_at": "2020-03-16T01:14:56Z", "closed_at": "2020-03-16T01:14:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "On `clickhouse-driver-0.1.3`, `clickhouse-server 20.1.5.26`, `python 3.6.9`.\r\n\r\nIf decimal is used like this (`Decimal<bits>(S)` instead of `Decimal(P,S)`),\r\n```\r\nCREATE TABLE IF NOT EXISTS proddb.hb_top_levels\r\n(\r\n    ...\r\n    `top_bid_price`         Decimal64(4),\r\n    ...\r\n)\r\n```\r\n`clickhouse-driver` can't handle it, e.g. `client.execute('SELECT top_bid_price FROM proddb.hb_top_levels')` fails with\r\n```\r\n.../clickhouse_driver/columns/decimalcolumn.py in create_decimal_column(spec, column_options)\r\n    139 \r\n    140 def create_decimal_column(spec, column_options):\r\n--> 141     precision, scale = spec[8:-1].split(',')\r\n    142     precision, scale = int(precision), int(scale)\r\n    143\r\n```\r\n`create_decimal_column` seems to handle only the `Decimal(P,S)` case (which does work).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/126", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/126/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/126/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/126", "id": 567392771, "node_id": "MDU6SXNzdWU1NjczOTI3NzE=", "number": 126, "title": "Error on out file close: [WinError 10053] An established connection was aborted by the software in your host machine", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-02-19T08:18:09Z", "updated_at": "2020-03-10T14:44:49Z", "closed_at": "2020-03-10T14:44:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to insert dataframe df_orig_del rows to the table with \r\nprod.execute(\"\"\"insert into Cempresso.CempressoIssues values\"\"\", df_orig_del.values.tolist())\r\nbut after a while I get the error:\r\n\r\n```\r\nError on out file close: [WinError 10053] An established connection was aborted by the software in your host machine\r\n---------------------------------------------------------------------------\r\nConnectionAbortedError                    Traceback (most recent call last)\r\n<ipython-input-15-69838faeba6a> in <module>\r\n      1 # brisanje postoje\u0107ih\r\n----> 2 prod.execute(\"\"\"insert into Cempresso.CempressoIssues values\"\"\", df_orig_del.values.tolist())\r\n\r\nc:\\users\\zoran\\dropbox\\bulb\\python\\bulb\\src\\bulb\\clickhouse.py in execute(self, sql, params, print_sql, report_time, head_tail_rows, rename_cols, execute_as_is, print_stats)\r\n   1322         else:\r\n   1323             self.last_insert_num_of_rows = self.__insert(sql, params=params, print_sql=print_sql,\r\n-> 1324                                                          report_time=report_time)\r\n   1325             self.last_sql = sql\r\n   1326             return self.last_insert_num_of_rows\r\n\r\nc:\\users\\zoran\\dropbox\\bulb\\python\\bulb\\src\\bulb\\clickhouse.py in __insert(self, sql, params, print_sql, report_time)\r\n   1487 \r\n   1488         start_time = datetime.datetime.now()\r\n-> 1489         self.__client.execute(sql, params=params)\r\n   1490         end_time = datetime.datetime.now()\r\n   1491 \r\n\r\n~\\Miniconda3\\lib\\site-packages\\clickhouse_driver\\client.py in execute(self, query, params, with_column_types, external_tables, query_id, settings, types_check, columnar)\r\n    205                 rv = self.process_insert_query(\r\n    206                     query, params, external_tables=external_tables,\r\n--> 207                     query_id=query_id, types_check=types_check\r\n    208                 )\r\n    209             else:\r\n\r\n~\\Miniconda3\\lib\\site-packages\\clickhouse_driver\\client.py in process_insert_query(self, query_without_data, data, external_tables, query_id, types_check)\r\n    356         sample_block = self.receive_sample_block()\r\n    357         if sample_block:\r\n--> 358             self.send_data(sample_block, data, types_check=types_check)\r\n    359             packet = self.connection.receive_packet()\r\n    360             if packet.exception:\r\n\r\n~\\Miniconda3\\lib\\site-packages\\clickhouse_driver\\client.py in send_data(self, sample_block, data, types_check)\r\n    380             block = Block(sample_block.columns_with_types, chunk,\r\n    381                           types_check=types_check)\r\n--> 382             self.connection.send_data(block)\r\n    383 \r\n    384         # Empty block means end of data.\r\n\r\n~\\Miniconda3\\lib\\site-packages\\clickhouse_driver\\connection.py in send_data(self, block, table_name)\r\n    479             write_binary_str(table_name, self.fout)\r\n    480 \r\n--> 481         self.block_out.write(block)\r\n    482         self.block_out.reset()\r\n    483         logger.debug('Block send time: %f', time() - start)\r\n\r\n~\\Miniconda3\\lib\\site-packages\\clickhouse_driver\\streams\\native.py in write(self, block)\r\n     41                              self.fout, types_check=block.types_check)\r\n     42 \r\n---> 43         self.finalize()\r\n     44 \r\n     45     def finalize(self):\r\n\r\n~\\Miniconda3\\lib\\site-packages\\clickhouse_driver\\streams\\compressed.py in finalize(self)\r\n     44         i = 0\r\n     45         while i < compressed_size:\r\n---> 46             self.raw_fout.write(compressed[i:i + block_size])\r\n     47             i += block_size\r\n     48 \r\n\r\n~\\Miniconda3\\lib\\socket.py in write(self, b)\r\n    605         self._checkWritable()\r\n    606         try:\r\n--> 607             return self._sock.send(b)\r\n    608         except error as e:\r\n    609             # XXX what about EINTR?\r\n\r\nConnectionAbortedError: [WinError 10053] An established connection was aborted by the software in your host machine\r\n```\r\n\r\n**To Reproduce**\r\nI can reproduce it at will. \r\n```\r\ndf_orig_del.shape\r\n(768578, 43)\r\n```\r\n\r\nbut I have noticed that if I am doing the same with less rows (let's say less than 10.000 rows), insert works.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Versions**\r\n\r\n- clickhouse-driver         0.1.1            py37hfa6e2cd_0    conda-forge\r\n- python                    3.7.4                h5263a28_0\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/125", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/125/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/125/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/125", "id": 565727371, "node_id": "MDU6SXNzdWU1NjU3MjczNzE=", "number": 125, "title": "Does not support DateTime64", "user": {"login": "zhao-xiaogang", "id": 15973495, "node_id": "MDQ6VXNlcjE1OTczNDk1", "avatar_url": "https://avatars2.githubusercontent.com/u/15973495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhao-xiaogang", "html_url": "https://github.com/zhao-xiaogang", "followers_url": "https://api.github.com/users/zhao-xiaogang/followers", "following_url": "https://api.github.com/users/zhao-xiaogang/following{/other_user}", "gists_url": "https://api.github.com/users/zhao-xiaogang/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhao-xiaogang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhao-xiaogang/subscriptions", "organizations_url": "https://api.github.com/users/zhao-xiaogang/orgs", "repos_url": "https://api.github.com/users/zhao-xiaogang/repos", "events_url": "https://api.github.com/users/zhao-xiaogang/events{/privacy}", "received_events_url": "https://api.github.com/users/zhao-xiaogang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-15T10:11:06Z", "updated_at": "2020-02-25T11:21:27Z", "closed_at": "2020-02-25T11:21:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nClickHouse release v20.1.2.4, New Feature:\r\n  Add DateTime64 datatype with configurable sub-second precision\r\nhttps://github.com/ClickHouse/ClickHouse/pull/7170\r\n\r\nclickhouse-driver does not yet support DateTime64\r\n\r\n**To Reproduce**\r\n\r\n```\r\n>>> c = Client.from_url('clickhouse://127.0.0.1:20140')\r\n>>> c.execute('select version()')\r\n[(u'20.1.4.14',)]\r\n>>> c.execute('select toTypeName(now64())')\r\n[(u'DateTime64(3)',)]\r\n>>> c.execute('select now64()')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/client.py\", line 214, in execute\r\n    columnar=columnar\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/client.py\", line 337, in process_ordinary_query\r\n    columnar=columnar)\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/client.py\", line 83, in receive_result\r\n    return result.get_result()\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/result.py\", line 48, in get_result\r\n    for packet in self.packet_generator:\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/client.py\", line 95, in packet_generator\r\n    packet = self.receive_packet()\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/client.py\", line 109, in receive_packet\r\n    packet = self.connection.receive_packet()\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/connection.py\", line 386, in receive_packet\r\n    packet.block = self.receive_data()\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/connection.py\", line 449, in receive_data\r\n    return self.block_in.read()\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/streams/native.py\", line 75, in read\r\n    self.fin)\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/columns/service.py\", line 83, in read_column\r\n    column = get_column_by_spec(column_spec, column_options=column_options)\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/columns/service.py\", line 54, in get_column_by_spec\r\n    return create_datetime_column(spec, column_options)\r\n  File \"/usr/local/lib/python2.7/dist-packages/clickhouse_driver/columns/datetimecolumn.py\", line 111, in create_datetime_column\r\n    timezone = get_timezone(tz_name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pytz/__init__.py\", line 181, in timezone\r\n    raise UnknownTimeZoneError(zone)\r\npytz.exceptions.UnknownTimeZoneError: '('\r\n```\r\n\r\n**Expected behavior**\r\nThe expectation is the same as the result returned by clickhouse-client\r\n\r\n**Versions**\r\nclickhouse-driver: 0.1.2\r\nclickhouse-server: 20.1.4.14\r\nPython: 2.7.6\r\nOS: Ubuntu 14.04.6 LTS", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/124", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/124/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/124/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/124", "id": 556759967, "node_id": "MDU6SXNzdWU1NTY3NTk5Njc=", "number": 124, "title": "Question about output types", "user": {"login": "artbeglaryan", "id": 12035563, "node_id": "MDQ6VXNlcjEyMDM1NTYz", "avatar_url": "https://avatars1.githubusercontent.com/u/12035563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/artbeglaryan", "html_url": "https://github.com/artbeglaryan", "followers_url": "https://api.github.com/users/artbeglaryan/followers", "following_url": "https://api.github.com/users/artbeglaryan/following{/other_user}", "gists_url": "https://api.github.com/users/artbeglaryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/artbeglaryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/artbeglaryan/subscriptions", "organizations_url": "https://api.github.com/users/artbeglaryan/orgs", "repos_url": "https://api.github.com/users/artbeglaryan/repos", "events_url": "https://api.github.com/users/artbeglaryan/events{/privacy}", "received_events_url": "https://api.github.com/users/artbeglaryan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-29T10:09:56Z", "updated_at": "2020-03-04T06:44:03Z", "closed_at": "2020-01-30T10:40:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a plan to have response on CSV/JSON/TSV format, without converting to python types?\r\n\r\nI know that there are some workarounds right now by querying via requests and convert to whatever you need.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/121", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/121/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/121/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/121", "id": 541704125, "node_id": "MDU6SXNzdWU1NDE3MDQxMjU=", "number": 121, "title": "Query execution fails with error Unexpected EOF while reading bytes", "user": {"login": "sperez4mba", "id": 513989, "node_id": "MDQ6VXNlcjUxMzk4OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/513989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sperez4mba", "html_url": "https://github.com/sperez4mba", "followers_url": "https://api.github.com/users/sperez4mba/followers", "following_url": "https://api.github.com/users/sperez4mba/following{/other_user}", "gists_url": "https://api.github.com/users/sperez4mba/gists{/gist_id}", "starred_url": "https://api.github.com/users/sperez4mba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sperez4mba/subscriptions", "organizations_url": "https://api.github.com/users/sperez4mba/orgs", "repos_url": "https://api.github.com/users/sperez4mba/repos", "events_url": "https://api.github.com/users/sperez4mba/events{/privacy}", "received_events_url": "https://api.github.com/users/sperez4mba/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-23T11:03:28Z", "updated_at": "2020-03-16T13:07:47Z", "closed_at": "2020-01-02T14:53:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,\r\n\r\nI've been facing a recurrent error in my application. In a nutshell what my application does is to generate a Clickhouse query statement based on certain input and then execute the query on a Clickhouse server. The queries are somewhat complex but they are only read queries. The Clickhouse client is instantiated with no specific settings.\r\n\r\nYou can see the complete error traceback I'm getting below:\r\n\r\n`\r\nError on clickhouse-master.almostsavanamed.com:9000 ping: Unexpected EOF while reading bytes\r\n`\r\n\r\n`\r\nERROR:root:{'exception': {'message': 'Traceback (most recent call last):\\n  File \"./src/user_interface/src/api_action.py\", line 25, in handle\\n    return self.execution()\\n  File \"./src/user_interface/action/api/v3/searches/list_diagnostics_api_action.py\", line 19, in execution\\n    query_response = self._service.execute(query_diagnostics=query_list_diagnostics)\\n  File \"./src/application/service/list_diagnostics_app_service.py\", line 64, in execute\\n    diagnostic_view_object_list = self.__list_diagnostics(query_diagnostics)\\n  File \"./src/application/service/list_diagnostics_app_service.py\", line 35, in __list_diagnostics\\n    return self.__diagnostics_reader_repository.specify(specification=diagnostics_specification)\\n  File \"./src/infrastructure/persistence/clickhouse/repository/clickhouse_diagnostics_reader_repository.py\", line 20, in specify\\n    tuples = self.__session.execute(statement_string=specification)\\n  File \"./src/infrastructure/persistence/clickhouse/__init__.py\", line 24, in execute\\n    return self.session.execute(statement_string, with_column_types=with_column_types)\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 212, in execute\\n    columnar=columnar\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 332, in process_ordinary_query\\n    columnar=columnar)\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 81, in receive_result\\n    return result.get_result()\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/result.py\", line 48, in get_result\\n    for packet in self.packet_generator:\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 93, in packet_generator\\n    packet = self.receive_packet()\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 107, in receive_packet\\n    packet = self.connection.receive_packet()\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 388, in receive_packet\\n    packet.type = packet_type = read_varint(self.fin)\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/reader.py\", line 30, in read_varint\\n    i = f.read_one()\\n  File \"clickhouse_driver/bufferedreader.pyx\", line 66, in clickhouse_driver.bufferedreader.BufferedReader.read_one\\n  File \"clickhouse_driver/bufferedreader.pyx\", line 196, in clickhouse_driver.bufferedreader.BufferedSocketReader.read_into_buffer\\nEOFError: Unexpected EOF while reading bytes\\n', 'file': './src/user_interface/src/api_action.py', 'line': 25, 'name': 'EOFError'}, 'request': {'body': None, 'query': {'age_range_min': '0', 'age_range_max': '120', 'date_range_min': '2016-01-01', 'date_range_max': '2017-12-31', 'page': '1', 'per_page': '30', 'search_by': 'clinical_act'}}, 'message': 'Unexpected EOF while reading bytes'}\r\n`\r\n\r\n`\r\nERROR:root:{'exception': {'message': 'Traceback (most recent call last):\\n  File \"./src/user_interface/src/api_action.py\", line 25, in handle\\n    return self.execution()\\n  File \"./src/user_interface/action/api/v3/searches/list_diagnostics_api_action.py\", line 19, in execution\\n    query_response = self._service.execute(query_diagnostics=query_list_diagnostics)\\n  File \"./src/application/service/list_diagnostics_app_service.py\", line 64, in execute\\n    diagnostic_view_object_list = self.__list_diagnostics(query_diagnostics)\\n  File \"./src/application/service/list_diagnostics_app_service.py\", line 35, in __list_diagnostics\\n    return self.__diagnostics_reader_repository.specify(specification=diagnostics_specification)\\n  File \"./src/infrastructure/persistence/clickhouse/repository/clickhouse_diagnostics_reader_repository.py\", line 20, in specify\\n    tuples = self.__session.execute(statement_string=specification)\\n  File \"./src/infrastructure/persistence/clickhouse/__init__.py\", line 24, in execute\\n    return self.session.execute(statement_string, with_column_types=with_column_types)\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 194, in execute\\n    self.connection.force_connect()\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 171, in force_connect\\n    elif not self.ping():\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 381, in ping\\n    return False\\n  File \"/usr/local/lib/python3.7/contextlib.py\", line 119, in __exit__\\n    next(self.gen)\\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 530, in timeout_setter\\n    self.socket.settimeout(old_timeout)\\nOSError: [Errno 9] Bad file descriptor\\n', 'file': './src/user_interface/src/api_action.py', 'line': 25, 'name': 'OSError'}, 'request': {'body': None, 'query': {'age_range_min': '0', 'age_range_max': '120', 'date_range_min': '2016-01-01', 'date_range_max': '2017-12-31', 'page': '1', 'per_page': '30', 'search_by': 'patient'}}, 'message': '[Errno 9] Bad file descriptor'}\r\n`\r\n\r\nIn production the application is deployed using uwsgi with the config below:\r\n\r\n```python\r\n[uwsgi]\r\nchdir = /manager-backend\r\nmaster = true\r\nmodule = wsgi:app\r\nbuffer-size = 65535\r\ndie-on-term = true\r\nhttp = 0.0.0.0:80\r\nvacuum = true\r\nenable-threads = true\r\nsingle-interpreter = true\r\nprocesses = 2\r\nthreads = 2\r\n```\r\n\r\nVersions:\r\n\r\npython 3.7.4\r\nuWSGI: 2.0.18\r\nos: alpine3.9\r\nclickhouse driver: 0.1.0\r\nclickhouse server: version 18.14.8 revision 54409 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/120", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/120/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/120/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/120", "id": 530734723, "node_id": "MDU6SXNzdWU1MzA3MzQ3MjM=", "number": 120, "title": "performance overhead", "user": {"login": "jangorecki", "id": 3627377, "node_id": "MDQ6VXNlcjM2MjczNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3627377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jangorecki", "html_url": "https://github.com/jangorecki", "followers_url": "https://api.github.com/users/jangorecki/followers", "following_url": "https://api.github.com/users/jangorecki/following{/other_user}", "gists_url": "https://api.github.com/users/jangorecki/gists{/gist_id}", "starred_url": "https://api.github.com/users/jangorecki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jangorecki/subscriptions", "organizations_url": "https://api.github.com/users/jangorecki/orgs", "repos_url": "https://api.github.com/users/jangorecki/repos", "events_url": "https://api.github.com/users/jangorecki/events{/privacy}", "received_events_url": "https://api.github.com/users/jangorecki/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-01T13:49:59Z", "updated_at": "2019-12-02T15:06:23Z", "closed_at": "2019-12-02T15:06:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am benchmarking clickhouse and currently using `clickhouse-client`. It is quite cumbersome. It would be much easier to use some scripting language for that. Thus I have question, does `clickhouse-driver` python module impose any overhead in processing queries? clickhouse-server and python sessions would sit on the same machine.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/119", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/119/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/119/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/119", "id": 521400455, "node_id": "MDU6SXNzdWU1MjE0MDA0NTU=", "number": 119, "title": "insert error with aioch", "user": {"login": "llj098", "id": 139195, "node_id": "MDQ6VXNlcjEzOTE5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/139195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llj098", "html_url": "https://github.com/llj098", "followers_url": "https://api.github.com/users/llj098/followers", "following_url": "https://api.github.com/users/llj098/following{/other_user}", "gists_url": "https://api.github.com/users/llj098/gists{/gist_id}", "starred_url": "https://api.github.com/users/llj098/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llj098/subscriptions", "organizations_url": "https://api.github.com/users/llj098/orgs", "repos_url": "https://api.github.com/users/llj098/repos", "events_url": "https://api.github.com/users/llj098/events{/privacy}", "received_events_url": "https://api.github.com/users/llj098/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-12T08:29:53Z", "updated_at": "2020-03-10T08:27:01Z", "closed_at": "2020-03-10T08:27:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi, \r\n\r\nbelow is my code, insert with pandas data frame:\r\n\r\n```\r\n...\r\n        bts['symbol'] = 'btc_usdt'                                                                                                                                                                                 \r\n        sql = 'INSERT INTO metrics.trade_bucket(vol, flow, timestamp, exchange, symbol, flow_ratio, cdf) VALUES';                                                                                                  \r\n        await ch_client.execute(sql, bts.to_dict(orient='records'))           \r\n...\r\n```\r\n\r\nit sucess for first a few times, but later it will show:\r\n\r\n```\r\n[ERROR]2019-11-12 16:12:51,180-[base_events.py:L1285] Task exception was never retrieved\r\nfuture: <Task finished coro=<save_db() done, defined at main.py:121> exception=UnexpectedPacketFromServerError('Unexpected packet from server localhost:9000 (expected Pong, got EndOfStream)',)>\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 129, in save_db\r\n    await ch_client.execute(sql, bts.to_dict(orient='records'))\r\n  File \"/usr/local/lib/python3.6/dist-packages/aioch/client.py\", line 92, in execute\r\n    **kwargs)\r\n  File \"/usr/lib/python3.6/concurrent/futures/thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/clickhouse_driver/client.py\", line 196, in execute\r\n    self.connection.force_connect()\r\n  File \"/usr/local/lib/python3.6/dist-packages/clickhouse_driver/connection.py\", line 174, in force_connect\r\n    elif not self.ping():\r\n  File \"/usr/local/lib/python3.6/dist-packages/clickhouse_driver/connection.py\", line 365, in ping\r\n    raise errors.UnexpectedPacketFromServerError(msg)\r\nclickhouse_driver.errors.UnexpectedPacketFromServerError: Code: 102. Unexpected packet from server localhost:9000 (expected Pong, got EndOfStream)\r\n[ERROR]2019-11-12 16:12:51,181-[base_events.py:L1285] Task exception was never retrieved\r\nfuture: <Task finished coro=<save_db() done, defined at main.py:121> exception=ServerException('DB::NetException. DB::NetException: Unexpected packet Data received from client. Stack trace:\\n\\n0. 0x55b9d08ae640 \r\nStackTrace::StackTrace() /usr/bin/clickhouse\\n1. 0x55b9d08ae415 DB::Exception::Exception(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /usr/bin/clickhouse\\n2. 0x55b\r\n9d046f533 ? /usr/bin/clickhouse\\n3. 0x55b9d098b309 DB::TCPHandler::receivePacket() /usr/bin/clickhouse\\n4. 0x55b9d098c8a4 DB::TCPHandler::runImpl() /usr/bin/clickhouse\\n5. 0x55b9d098d4fb DB::TCPHandler::run() /u\r\nsr/bin/clickhouse\\n6. 0x55b9d47c13c0 Poco::Net::TCPServerConnection::start() /usr/bin/clickhouse\\n7. 0x55b9d47c1add Poco::Net::TCPServerDispatcher::run() /usr/bin/clickhouse\\n8. 0x55b9d5e4b901 Poco::PooledThread\r\n::run() /usr/bin/clickhouse\\n9. 0x55b9d5e496ac Poco::ThreadImpl::runnableEntry(void*) /usr/bin/clickhouse\\n10. 0x55b9d65beeb0 ? /usr/bin/clickhouse\\n11. 0x7fc1597a56db start_thread /lib/x86_64-linux-gnu/libpthre\r\nad-2.27.so\\n12. 0x7fc1590c288f __clone /lib/x86_64-linux-gnu/libc-2.27.so\\n', 101)>\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 129, in save_db\r\n    await ch_client.execute(sql, bts.to_dict(orient='records'))\r\n  File \"/usr/local/lib/python3.6/dist-packages/aioch/client.py\", line 92, in execute\r\n    **kwargs)\r\n  File \"/usr/lib/python3.6/concurrent/futures/thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/clickhouse_driver/client.py\", line 207, in execute\r\n    query_id=query_id, types_check=types_check\r\n  File \"/usr/local/lib/python3.6/dist-packages/clickhouse_driver/client.py\", line 364, in process_insert_query\r\n    raise packet.exception\r\nclickhouse_driver.errors.ServerException: Code: 101.\r\nDB::NetException. DB::NetException: Unexpected packet Data received from client. Stack trace:\r\n\r\n0. 0x55b9d08ae640 StackTrace::StackTrace() /usr/bin/clickhouse\r\n1. 0x55b9d08ae415 DB::Exception::Exception(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /usr/bin/clickhouse\r\n2. 0x55b9d046f533 ? /usr/bin/clickhouse\r\n3. 0x55b9d098b309 DB::TCPHandler::receivePacket() /usr/bin/clickhouse\r\n4. 0x55b9d098c8a4 DB::TCPHandler::runImpl() /usr/bin/clickhouse\r\n5. 0x55b9d098d4fb DB::TCPHandler::run() /usr/bin/clickhouse\r\n6. 0x55b9d47c13c0 Poco::Net::TCPServerConnection::start() /usr/bin/clickhouse\r\n7. 0x55b9d47c1add Poco::Net::TCPServerDispatcher::run() /usr/bin/clickhouse\r\n8. 0x55b9d5e4b901 Poco::PooledThread::run() /usr/bin/clickhouse\r\n9. 0x55b9d5e496ac Poco::ThreadImpl::runnableEntry(void*) /usr/bin/clickhouse\r\n10. 0x55b9d65beeb0 ? /usr/bin/clickhouse\r\n11. 0x7fc1597a56db start_thread /lib/x86_64-linux-gnu/libpthread-2.27.so\r\n12. 0x7fc1590c288f __clone /lib/x86_64-linux-gnu/libc-2.27.so\r\n\r\n^[[5~^[[5~^[^[[5~^CTraceback (most recent call last):\r\n  File \"main.py\", line 284, in <module>\r\n    loop.run_until_complete(main())\r\n  File \"/usr/lib/python3.6/asyncio/base_events.py\", line 471, in run_until_complete\r\n    self.run_forever()\r\n  File \"/usr/lib/python3.6/asyncio/base_events.py\", line 438, in run_forever\r\n    self._run_once()\r\n  File \"/usr/lib/python3.6/asyncio/base_events.py\", line 1415, in _run_once\r\n    event_list = self._selector.select(timeout)\r\n  File \"/usr/lib/python3.6/selectors.py\", line 445, in select\r\n    fd_event_list = self._epoll.poll(timeout, max_ev)\r\n\r\n```\r\n\r\nI'm using aioch, since it's a wrapper, I post the issue here. Not always error, sometime works OK, sometimes show the exceptions above. \r\n\r\nVersions:\r\n\r\n- clickhouse-driver: 0.12.0\r\n- aioch: 0.0.1\r\n- clickhouse server: 19.15\r\n- python 3.6.9\r\n- os: ubuntu 16.04\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/118", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/118/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/118/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/118", "id": 520861202, "node_id": "MDU6SXNzdWU1MjA4NjEyMDI=", "number": 118, "title": "TypeMismatchError for LowCardinality(Nullable(String))", "user": {"login": "the-horhe", "id": 12816025, "node_id": "MDQ6VXNlcjEyODE2MDI1", "avatar_url": "https://avatars1.githubusercontent.com/u/12816025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the-horhe", "html_url": "https://github.com/the-horhe", "followers_url": "https://api.github.com/users/the-horhe/followers", "following_url": "https://api.github.com/users/the-horhe/following{/other_user}", "gists_url": "https://api.github.com/users/the-horhe/gists{/gist_id}", "starred_url": "https://api.github.com/users/the-horhe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the-horhe/subscriptions", "organizations_url": "https://api.github.com/users/the-horhe/orgs", "repos_url": "https://api.github.com/users/the-horhe/repos", "events_url": "https://api.github.com/users/the-horhe/events{/privacy}", "received_events_url": "https://api.github.com/users/the-horhe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-11T10:14:23Z", "updated_at": "2019-11-22T06:22:29Z", "closed_at": "2019-11-22T06:22:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to insert data in table with nullable low cardinality field, but getting error: \r\n```\r\n  File \"/.../python3.6/site-packages/clickhouse_driver/columns/service.py\", line 110, in write_column\r\n    column_spec, type(e.args[0]), e.args[0], column_name\r\nclickhouse_driver.errors.TypeMismatchError: Code: 53. Type mismatch in VALUES section. Expected LowCardinality(Nullable(String)) got <class 'int'>: 0 for column \"lc_string\".\r\n```\r\n\r\n**To Reproduce**\r\n```\r\n--SQL\r\nCREATE TABLE lc_test(id UInt64, lc_string LowCardinality(Nullable(String))) ENGINE = MergeTree() ORDER BY id;\r\n```\r\n\r\n```\r\n# python\r\nfrom clickhouse_driver import Client\r\n\r\n\r\nconn_args = dict(host='localhost')\r\nclient = Client(**conn_args)\r\n\r\nsql = f\"INSERT INTO lc_test VALUES\"\r\nclient.execute(query=sql, params=[(1, 'test')], types_check=True)\r\n\r\n```\r\n\r\n**Expected behavior**\r\nLine with id=1 and lc_string='test' appear in lc_test\r\n\r\n**Versions**\r\n\r\n- clickhouse-driver version 0.1.2\r\n- Python 3.6.8 (default, May  7 2019, 14:58:50)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/115", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/115/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/115/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/115", "id": 511020057, "node_id": "MDU6SXNzdWU1MTEwMjAwNTc=", "number": 115, "title": "Python 3.8", "user": {"login": "ofek", "id": 9677399, "node_id": "MDQ6VXNlcjk2NzczOTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/9677399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ofek", "html_url": "https://github.com/ofek", "followers_url": "https://api.github.com/users/ofek/followers", "following_url": "https://api.github.com/users/ofek/following{/other_user}", "gists_url": "https://api.github.com/users/ofek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ofek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ofek/subscriptions", "organizations_url": "https://api.github.com/users/ofek/orgs", "repos_url": "https://api.github.com/users/ofek/repos", "events_url": "https://api.github.com/users/ofek/events{/privacy}", "received_events_url": "https://api.github.com/users/ofek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-23T01:42:24Z", "updated_at": "2019-11-21T03:38:30Z", "closed_at": "2019-11-21T03:38:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello there! Any idea when binary wheels for Python 3.8 will be distributed on PyPI?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/114", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/114/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/114/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/114", "id": 508505850, "node_id": "MDU6SXNzdWU1MDg1MDU4NTA=", "number": 114, "title": "conda, clickhouse-driver and compression", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-17T14:13:26Z", "updated_at": "2019-10-18T17:02:51Z", "closed_at": "2019-10-18T17:02:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nif I have installed clickhouse-driver from https://anaconda.org/conda-forge/clickhouse-driver\r\nusing \"conda install -c conda-forge clickhouse-driver\"\r\nwill I be able to use lz4 compression in this case?\r\n\r\nAs I don't see on https://anaconda.org packages as \"clickhouse-driver[lz4,zstd]\", can I use compression at all?\r\nI have instanced Client with compression=True, but how to check whether I am using compression or not?\r\n\r\n\r\nRegards.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/113", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/113/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/113/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/113", "id": 508222447, "node_id": "MDU6SXNzdWU1MDgyMjI0NDc=", "number": 113, "title": "QueryResult working example", "user": {"login": "ns-agour", "id": 55970678, "node_id": "MDQ6VXNlcjU1OTcwNjc4", "avatar_url": "https://avatars2.githubusercontent.com/u/55970678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ns-agour", "html_url": "https://github.com/ns-agour", "followers_url": "https://api.github.com/users/ns-agour/followers", "following_url": "https://api.github.com/users/ns-agour/following{/other_user}", "gists_url": "https://api.github.com/users/ns-agour/gists{/gist_id}", "starred_url": "https://api.github.com/users/ns-agour/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ns-agour/subscriptions", "organizations_url": "https://api.github.com/users/ns-agour/orgs", "repos_url": "https://api.github.com/users/ns-agour/repos", "events_url": "https://api.github.com/users/ns-agour/events{/privacy}", "received_events_url": "https://api.github.com/users/ns-agour/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-17T04:12:08Z", "updated_at": "2020-03-10T08:24:54Z", "closed_at": "2020-03-10T08:24:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am unable to find a working example QueryResult API in your doc or any where else could you please help me with the same.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/110", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/110/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/110/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/110", "id": 502013342, "node_id": "MDU6SXNzdWU1MDIwMTMzNDI=", "number": 110, "title": "Types checking fails on enum column.", "user": {"login": "Crazy-Owl", "id": 179961, "node_id": "MDQ6VXNlcjE3OTk2MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/179961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Crazy-Owl", "html_url": "https://github.com/Crazy-Owl", "followers_url": "https://api.github.com/users/Crazy-Owl/followers", "following_url": "https://api.github.com/users/Crazy-Owl/following{/other_user}", "gists_url": "https://api.github.com/users/Crazy-Owl/gists{/gist_id}", "starred_url": "https://api.github.com/users/Crazy-Owl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Crazy-Owl/subscriptions", "organizations_url": "https://api.github.com/users/Crazy-Owl/orgs", "repos_url": "https://api.github.com/users/Crazy-Owl/repos", "events_url": "https://api.github.com/users/Crazy-Owl/events{/privacy}", "received_events_url": "https://api.github.com/users/Crazy-Owl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-03T11:39:53Z", "updated_at": "2020-06-10T16:50:25Z", "closed_at": "2020-06-10T16:50:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\n\r\n`EnumColumn` columns are typechecked as `IntColumn` columns.\r\n\r\nThis probably happens because `IntColumn` column constructor conditionally creates `before_write_item` fn and overrides it on given object, and `EnumColumn` inherits from `IntColumn`, whereas for `EnumColumn` column `before_write_item` is defined in class definition. So `IntColumn` version of type checking function overrides `EnumColumn` one for `EnumColumn` instance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/109", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/109/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/109/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/109", "id": 497796925, "node_id": "MDU6SXNzdWU0OTc3OTY5MjU=", "number": 109, "title": "execute_with_progress does not expose columnar.", "user": {"login": "igorbb", "id": 1078598, "node_id": "MDQ6VXNlcjEwNzg1OTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1078598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igorbb", "html_url": "https://github.com/igorbb", "followers_url": "https://api.github.com/users/igorbb/followers", "following_url": "https://api.github.com/users/igorbb/following{/other_user}", "gists_url": "https://api.github.com/users/igorbb/gists{/gist_id}", "starred_url": "https://api.github.com/users/igorbb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igorbb/subscriptions", "organizations_url": "https://api.github.com/users/igorbb/orgs", "repos_url": "https://api.github.com/users/igorbb/repos", "events_url": "https://api.github.com/users/igorbb/events{/privacy}", "received_events_url": "https://api.github.com/users/igorbb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-24T16:29:54Z", "updated_at": "2019-09-26T09:57:09Z", "closed_at": "2019-09-26T09:57:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "execute_with_progress was missing columnar.\r\nThis need to be exposed in case a user whishes to have column-wise results while using a progress bar  #108  should have a fix.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/105", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/105/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/105/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/105", "id": 488721476, "node_id": "MDU6SXNzdWU0ODg3MjE0NzY=", "number": 105, "title": "Different results from clickhouse-client", "user": {"login": "jdavid", "id": 596769, "node_id": "MDQ6VXNlcjU5Njc2OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/596769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdavid", "html_url": "https://github.com/jdavid", "followers_url": "https://api.github.com/users/jdavid/followers", "following_url": "https://api.github.com/users/jdavid/following{/other_user}", "gists_url": "https://api.github.com/users/jdavid/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdavid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdavid/subscriptions", "organizations_url": "https://api.github.com/users/jdavid/orgs", "repos_url": "https://api.github.com/users/jdavid/repos", "events_url": "https://api.github.com/users/jdavid/events{/privacy}", "received_events_url": "https://api.github.com/users/jdavid/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-03T17:05:06Z", "updated_at": "2019-09-09T15:48:59Z", "closed_at": "2019-09-09T15:48:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nThe exact same query returns different results than clickhouse-client:\r\n\r\n```\r\n$ clickhouse-client -d wsn\r\nClickHouse client version 19.13.1.11.\r\nConnecting to database wsn at localhost:9000 as user default.\r\nConnected to ClickHouse server version 19.13.1 revision 54425.\r\n\r\nlocalhost :) SELECT LWIN_6_14_1_1_1, LWOUT_6_15_1_1_1 FROM finseflux_Biomet WHERE TIMESTAMP = 1519862405;\r\n\r\nSELECT \r\n    LWIN_6_14_1_1_1, \r\n    LWOUT_6_15_1_1_1\r\nFROM finseflux_Biomet\r\nWHERE TIMESTAMP = 1519862405\r\n\r\n\u250c\u2500LWIN_6_14_1_1_1\u2500\u252c\u2500LWOUT_6_15_1_1_1\u2500\u2510\r\n\u2502        146.4748 \u2502         202.6803 \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\r\n1 rows in set. Elapsed: 0.007 sec. Processed 8.19 thousand rows, 98.30 KB (1.09 million rows/s., 13.09 MB/s.) \r\n```\r\n\r\nWhile with clickhouse-driver:\r\n\r\n```\r\n$ python\r\nPython 3.6.5 (default, Jun 24 2019, 11:07:25) \r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from clickhouse_driver import Client\r\n>>> client = Client('localhost', database='wsn')\r\n>>> client.execute(\"SELECT LWIN_6_14_1_1_1, LWOUT_6_15_1_1_1 FROM finseflux_Biomet WHERE TIMESTAMP = 1519862405;\")\r\n[(146.47479248046875, 202.6802978515625)]\r\n```\r\n\r\nSo, 146.4748 vs 146.47479248046875 and 202.6803 vs 202.6802978515625 ; the value returned by clickhouse-client is the value that was inserted. The type is Float32.\r\n\r\nAny idea what's going on?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/104", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/104/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/104/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/104", "id": 488488009, "node_id": "MDU6SXNzdWU0ODg0ODgwMDk=", "number": 104, "title": "Using clickhouse-driver to query for data of type FixedString(16) returns a problem", "user": {"login": "zengzhiying", "id": 13583823, "node_id": "MDQ6VXNlcjEzNTgzODIz", "avatar_url": "https://avatars1.githubusercontent.com/u/13583823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zengzhiying", "html_url": "https://github.com/zengzhiying", "followers_url": "https://api.github.com/users/zengzhiying/followers", "following_url": "https://api.github.com/users/zengzhiying/following{/other_user}", "gists_url": "https://api.github.com/users/zengzhiying/gists{/gist_id}", "starred_url": "https://api.github.com/users/zengzhiying/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zengzhiying/subscriptions", "organizations_url": "https://api.github.com/users/zengzhiying/orgs", "repos_url": "https://api.github.com/users/zengzhiying/repos", "events_url": "https://api.github.com/users/zengzhiying/events{/privacy}", "received_events_url": "https://api.github.com/users/zengzhiying/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-03T09:18:29Z", "updated_at": "2019-09-04T09:14:22Z", "closed_at": "2019-09-03T12:37:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Clickhouse version: 19.8.3.8\r\nClickhouse driver version: 0.1.0\r\nCreate table sql is: \r\n`create table example (date Date, info_id FixedString(16), create_time UInt32) ENGINE= MergeTree PARTITION BY date ORDER BY create_time SETTINGS index_granularity=8192`\r\nThen try to insert the data\uff1a\r\n`insert into example(date, info_id, create_time) values('2019-09-03', UUIDStringToNum('5d424f77-0c00-5789-848e-555969d0e7f1'), 1567498636)`\r\n`insert into example(date, info_id, create_time) values('2019-09-03', UUIDStringToNum('2d124177-0c66-5789-848e-555969d0e7f1'), 1567498636)`\r\n`insert into example(date, info_id, create_time) values('2019-09-03', UUIDStringToNum('2d124177-0c00-5789-848e-555969d0e7f1'), 1567498636)`\r\nThe focus is on the info_id of the FixedString(16) type.\r\nQuery data is normal: `select UUIDNumToString(info_id) as id from example`\r\n\u250c\u2500id\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 5d424f77-0c00-5789-848e-555969d0e7f1 \u2502\r\n\u2502 2d124177-0c66-5789-848e-555969d0e7f1 \u2502\r\n\u2502 2d124177-0c00-5789-848e-555969d0e7f1 \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\nUse the python code to query as follows:\r\n`from clickhouse_driver import Client`\r\n`c = Client('127.0.0.1', port=9000)`\r\n`rows = c.execute('select * from default.example')`\r\nRows are shown in ipython as follows:\r\n[(datetime.date(2019, 9, 3),\r\n  b'-\\x12Aw\\x0cfW\\x89\\x84\\x8eUYi\\xd0\\xe7\\xf1',\r\n  1567498636),\r\n (datetime.date(2019, 9, 3), '-\\x12Aw\\x0c', 1567498636),\r\n (datetime.date(2019, 9, 3), ']BOw\\x0c', 1567498636)]\r\nThe returned part of the id seems to be truncated.\r\nIt seems that this problem occurs when the id contains 0c00.\r\n**There is no such problem with the driver of version 0.0.19.**\r\nHow to solve this? Thank you", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/103", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/103/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/103/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/103", "id": 484564351, "node_id": "MDU6SXNzdWU0ODQ1NjQzNTE=", "number": 103, "title": "execute_iter ", "user": {"login": "danlittlejohn", "id": 379037, "node_id": "MDQ6VXNlcjM3OTAzNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/379037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danlittlejohn", "html_url": "https://github.com/danlittlejohn", "followers_url": "https://api.github.com/users/danlittlejohn/followers", "following_url": "https://api.github.com/users/danlittlejohn/following{/other_user}", "gists_url": "https://api.github.com/users/danlittlejohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/danlittlejohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danlittlejohn/subscriptions", "organizations_url": "https://api.github.com/users/danlittlejohn/orgs", "repos_url": "https://api.github.com/users/danlittlejohn/repos", "events_url": "https://api.github.com/users/danlittlejohn/events{/privacy}", "received_events_url": "https://api.github.com/users/danlittlejohn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-23T14:37:21Z", "updated_at": "2019-08-23T17:51:04Z", "closed_at": "2019-08-23T17:51:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to use execute_iter() and getting a error with the iterator object.  Works fine for execute(). Using version 0.20.\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/wsgiref/handlers.py\", line 138, in run\r\n    self.finish_response()\r\n  File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/wsgiref/handlers.py\", line 179, in finish_response\r\n    for data in self.result:\r\n  File \"/app/apps/analytics_app/views.py\", line 518, in csv_row_generator\r\n    for rows in row_iterator:\r\n  File \"/opt/app-root/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 86, in iter_receive_result\r\n    for rows in IterQueryResult(gen, with_column_types=with_column_types):\r\n  File \"/opt/app-root/lib/python3.6/site-packages/clickhouse_driver/result.py\", line 115, in next\r\n    packet = next(self.packet_generator)\r\n  File \"/opt/app-root/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 93, in packet_generator\r\n    packet = self.receive_packet()\r\n  File \"/opt/app-root/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 107, in receive_packet\r\n    packet = self.connection.receive_packet()\r\n  File \"/opt/app-root/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 388, in receive_packet\r\n    packet.type = packet_type = read_varint(self.fin)\r\n  File \"/opt/app-root/lib/python3.6/site-packages/clickhouse_driver/reader.py\", line 30, in read_varint\r\n    i = f.read_one()\r\nAttributeError: 'NoneType' object has no attribute 'read_one'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/102", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/102/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/102/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/102", "id": 480470236, "node_id": "MDU6SXNzdWU0ODA0NzAyMzY=", "number": 102, "title": "\u3010DateTime\u3011Column done_date: integer out of range for 'I' format code", "user": {"login": "wen08jie", "id": 54090812, "node_id": "MDQ6VXNlcjU0MDkwODEy", "avatar_url": "https://avatars3.githubusercontent.com/u/54090812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wen08jie", "html_url": "https://github.com/wen08jie", "followers_url": "https://api.github.com/users/wen08jie/followers", "following_url": "https://api.github.com/users/wen08jie/following{/other_user}", "gists_url": "https://api.github.com/users/wen08jie/gists{/gist_id}", "starred_url": "https://api.github.com/users/wen08jie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wen08jie/subscriptions", "organizations_url": "https://api.github.com/users/wen08jie/orgs", "repos_url": "https://api.github.com/users/wen08jie/repos", "events_url": "https://api.github.com/users/wen08jie/events{/privacy}", "received_events_url": "https://api.github.com/users/wen08jie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-14T04:03:43Z", "updated_at": "2019-08-15T01:17:38Z", "closed_at": "2019-08-15T01:17:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "dataJson = \"{\\\"done_date\\\": \\\"9919-07-28 18:16:55\\\"}\"\r\n\r\nException:\r\nCode: 53. Type mismatch in VALUES section. Repeat query with types_check=True for detailed info. Column done_date: integer out of range for 'I' format code\r\n\r\nHow should I remove the length limit .. when insert into DateTime ? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/101", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/101/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/101/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/101", "id": 478361557, "node_id": "MDU6SXNzdWU0NzgzNjE1NTc=", "number": 101, "title": "Distribute the LICENSE file", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-08T09:44:03Z", "updated_at": "2019-09-24T07:58:08Z", "closed_at": "2019-09-24T07:58:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Both with the wheels and the source release. For the time being I've copied the LICENSE file to the conda-forge recipe, which we should remove once it is distributed with the source tarball.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/100", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/100/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/100/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/100", "id": 474474230, "node_id": "MDU6SXNzdWU0NzQ0NzQyMzA=", "number": 100, "title": "insert statement will hang with last version", "user": {"login": "jdj199222", "id": 40590418, "node_id": "MDQ6VXNlcjQwNTkwNDE4", "avatar_url": "https://avatars3.githubusercontent.com/u/40590418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdj199222", "html_url": "https://github.com/jdj199222", "followers_url": "https://api.github.com/users/jdj199222/followers", "following_url": "https://api.github.com/users/jdj199222/following{/other_user}", "gists_url": "https://api.github.com/users/jdj199222/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdj199222/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdj199222/subscriptions", "organizations_url": "https://api.github.com/users/jdj199222/orgs", "repos_url": "https://api.github.com/users/jdj199222/repos", "events_url": "https://api.github.com/users/jdj199222/events{/privacy}", "received_events_url": "https://api.github.com/users/jdj199222/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-30T09:27:10Z", "updated_at": "2019-08-08T11:58:06Z", "closed_at": "2019-08-08T11:58:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "![image](https://user-images.githubusercontent.com/40590418/62117817-3ce3ca00-b2ef-11e9-9759-c22d149d2293.png)\r\n![image](https://user-images.githubusercontent.com/40590418/62118192-d4e1b380-b2ef-11e9-921d-0d58d5326421.png)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/99", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/99/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/99/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/99", "id": 471040713, "node_id": "MDU6SXNzdWU0NzEwNDA3MTM=", "number": 99, "title": "can't install clickhouse-cityhash on Windows", "user": {"login": "anaskras", "id": 20391384, "node_id": "MDQ6VXNlcjIwMzkxMzg0", "avatar_url": "https://avatars1.githubusercontent.com/u/20391384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anaskras", "html_url": "https://github.com/anaskras", "followers_url": "https://api.github.com/users/anaskras/followers", "following_url": "https://api.github.com/users/anaskras/following{/other_user}", "gists_url": "https://api.github.com/users/anaskras/gists{/gist_id}", "starred_url": "https://api.github.com/users/anaskras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anaskras/subscriptions", "organizations_url": "https://api.github.com/users/anaskras/orgs", "repos_url": "https://api.github.com/users/anaskras/repos", "events_url": "https://api.github.com/users/anaskras/events{/privacy}", "received_events_url": "https://api.github.com/users/anaskras/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-07-22T11:26:01Z", "updated_at": "2019-08-28T07:55:10Z", "closed_at": "2019-08-28T07:55:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Building wheels for collected packages: clickhouse-cityhash\r\n  Building wheel for clickhouse-cityhash (setup.py): started\r\n  Building wheel for clickhouse-cityhash (setup.py): finished with status 'error'\r\n  Running setup.py clean for clickhouse-cityhash\r\nFailed to build clickhouse-cityhash\r\nInstalling collected packages: clickhouse-cityhash\r\n  Running setup.py install for clickhouse-cityhash: started\r\n    Running setup.py install for clickhouse-cityhash: finished with status 'error'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/98", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/98/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/98/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/98", "id": 466438199, "node_id": "MDU6SXNzdWU0NjY0MzgxOTk=", "number": 98, "title": "DateTimeColumn has no timezone", "user": {"login": "robert-cody", "id": 13272122, "node_id": "MDQ6VXNlcjEzMjcyMTIy", "avatar_url": "https://avatars0.githubusercontent.com/u/13272122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robert-cody", "html_url": "https://github.com/robert-cody", "followers_url": "https://api.github.com/users/robert-cody/followers", "following_url": "https://api.github.com/users/robert-cody/following{/other_user}", "gists_url": "https://api.github.com/users/robert-cody/gists{/gist_id}", "starred_url": "https://api.github.com/users/robert-cody/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robert-cody/subscriptions", "organizations_url": "https://api.github.com/users/robert-cody/orgs", "repos_url": "https://api.github.com/users/robert-cody/repos", "events_url": "https://api.github.com/users/robert-cody/events{/privacy}", "received_events_url": "https://api.github.com/users/robert-cody/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-10T17:47:20Z", "updated_at": "2019-10-09T09:02:10Z", "closed_at": "2019-10-09T09:02:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "clickhouse_driver/columns/datetimecolumn.py:\r\n```\r\ndef after_read_item(self, value):\r\n    dt = datetime.fromtimestamp(value, self.timezone)\r\n    return dt.replace(tzinfo=None)\r\n```\r\n\r\nAfter parsing tzinfo is removed which seems like an incorrect behaviour and has unpredictable side-effects.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/94", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/94/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/94/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/94", "id": 454631224, "node_id": "MDU6SXNzdWU0NTQ2MzEyMjQ=", "number": 94, "title": "--", "user": {"login": "zhao977136991", "id": 18359045, "node_id": "MDQ6VXNlcjE4MzU5MDQ1", "avatar_url": "https://avatars3.githubusercontent.com/u/18359045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhao977136991", "html_url": "https://github.com/zhao977136991", "followers_url": "https://api.github.com/users/zhao977136991/followers", "following_url": "https://api.github.com/users/zhao977136991/following{/other_user}", "gists_url": "https://api.github.com/users/zhao977136991/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhao977136991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhao977136991/subscriptions", "organizations_url": "https://api.github.com/users/zhao977136991/orgs", "repos_url": "https://api.github.com/users/zhao977136991/repos", "events_url": "https://api.github.com/users/zhao977136991/events{/privacy}", "received_events_url": "https://api.github.com/users/zhao977136991/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-11T11:21:28Z", "updated_at": "2019-06-11T15:08:47Z", "closed_at": "2019-06-11T15:07:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/93", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/93/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/93/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/93", "id": 453575884, "node_id": "MDU6SXNzdWU0NTM1NzU4ODQ=", "number": 93, "title": "Build error when installing with lz4 compression on OSX", "user": {"login": "darraghenright", "id": 695304, "node_id": "MDQ6VXNlcjY5NTMwNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/695304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darraghenright", "html_url": "https://github.com/darraghenright", "followers_url": "https://api.github.com/users/darraghenright/followers", "following_url": "https://api.github.com/users/darraghenright/following{/other_user}", "gists_url": "https://api.github.com/users/darraghenright/gists{/gist_id}", "starred_url": "https://api.github.com/users/darraghenright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darraghenright/subscriptions", "organizations_url": "https://api.github.com/users/darraghenright/orgs", "repos_url": "https://api.github.com/users/darraghenright/repos", "events_url": "https://api.github.com/users/darraghenright/events{/privacy}", "received_events_url": "https://api.github.com/users/darraghenright/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-07T15:37:39Z", "updated_at": "2019-06-11T22:22:14Z", "closed_at": "2019-06-11T21:51:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "HI there.\r\n\r\nThe issue occurs when running `pip install clickhouse-driver[lz4]` on OSX 10.14.5\r\n\r\nThis is actually an build error with dependency [`clickhouse-cityhash`](https://pypi.org/project/clickhouse-cityhash/) but since that repo does not have issues enabled, and the issue is breaking installation of this repo on my machine I thought I should report here\u2014in case there's a known reason/fix or if anyone else encounters the issue.\r\n\r\nThe main error:\r\n\r\n```\r\nBuilding wheel for clickhouse-cityhash (setup.py) ... error\r\n```\r\n\r\nis followed by a slew of C compilation errors including repeated instances of:\r\n\r\n```\r\nsrc/city.cc:396:5: error: use of undeclared identifier '_mm_crc32_u64'\r\n```\r\n\r\n[Full trace on Pastebin](https://pastebin.com/LzUEcXRW). It's rather long so I figured it's better to link\u2014let me know if you want this pasted\r\n\r\nIt eventually dies after hitting its `-ferror-limit`. I've tried with various flags to disable the error limit, as well as using `gcc` and `g++` instead of `c`, without success.\r\n\r\nLooking at `_mm_crc32_u64`, this appears to be very low level, to do with SSE4 instruction sets. I am totally out of my depth with this so any insight is appreciated!\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/92", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/92/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/92/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/92", "id": 450668771, "node_id": "MDU6SXNzdWU0NTA2Njg3NzE=", "number": 92, "title": "How temporary tables work with clickhouse_driver?", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-31T08:01:57Z", "updated_at": "2019-06-02T12:01:42Z", "closed_at": "2019-06-02T12:01:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have created a temporary table with:\r\nclient.execute('create temporary table temp_table as select * from database.table')\r\n\r\nAfter this command I can select from the table, and everything works well.\r\n\r\nWhen I am using dbeaver over http protocol for doing the same there is a session_timeout parameter in driver that determines how long will temporary table live before it is automatically deleted.\r\n\r\nAs we are not using http protocol, so we don't have http sessions, how long temporary table lives?\r\nDo we have an option to set this time?\r\n\r\nRegards.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/91", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/91/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/91/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/91", "id": 449316514, "node_id": "MDU6SXNzdWU0NDkzMTY1MTQ=", "number": 91, "title": "How to handle nan values?", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-28T14:52:01Z", "updated_at": "2019-06-11T17:27:26Z", "closed_at": "2019-06-11T17:27:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nif I create a table:\r\n\r\nCREATE TABLE group_issues_test (\r\n\tissue_name String\r\n\t,issue_title String\r\n\t,modified_date DATETIME DEFAULT now()\r\n    ,Sign Int8 DEFAULT CAST(1, 'Int8')\r\n\t) \r\n    ENGINE = CollapsingMergeTree (Sign) \r\n    ORDER BY issue_name SETTINGS index_granularity = 8192\r\n\r\nand than dataframe as:\r\n\r\ndf = pd.DataFrame([\r\n    ['issue_name_1', 'issue_title_1', 1],  \r\n    [None, 'issue_title_1', 1],  \r\n    ['issue_name_1', np.nan, 1],  \r\n    ['issue_name_1', 'issue_title_1', np.nan]])\r\n\r\n![image](https://user-images.githubusercontent.com/15207713/58487252-8edd6780-8167-11e9-91ad-f423042a35b0.png)\r\n\r\nwhen I try to insert with:\r\nclient.execute(\"\"\"insert into group_issues_test (issue_name, issue_title, Sign) values\"\"\", df.values.tolist())\r\n\r\nI get:\r\n\r\n`---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-23-a3a097b7e364> in <module>\r\n----> 1 client.execute(\"\"\"insert into group_issues_test (issue_name, issue_title, Sign) values\"\"\", df.values.tolist())\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\client.py in execute(self, query, params, with_column_types, external_tables, query_id, settings, types_check, columnar)\r\n    200                 return self.process_insert_query(\r\n    201                     query, params, external_tables=external_tables,\r\n--> 202                     query_id=query_id, types_check=types_check\r\n    203                 )\r\n    204             else:\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\client.py in process_insert_query(self, query_without_data, data, external_tables, query_id, types_check)\r\n    349         sample_block = self.receive_sample_block()\r\n    350         if sample_block:\r\n--> 351             self.send_data(sample_block, data, types_check=types_check)\r\n    352             packet = self.connection.receive_packet()\r\n    353             if packet.exception:\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\client.py in send_data(self, sample_block, data, types_check)\r\n    373             block = Block(sample_block.columns_with_types, chunk,\r\n    374                           types_check=types_check)\r\n--> 375             self.connection.send_data(block)\r\n    376 \r\n    377         # Empty block means end of data.\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\connection.py in send_data(self, block, table_name)\r\n    474             write_binary_str(table_name, self.fout)\r\n    475 \r\n--> 476         self.block_out.write(block)\r\n    477         self.block_out.reset()\r\n    478         logger.debug('Block send time: %f', time() - start)\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\streams\\native.py in write(self, block)\r\n     39 \r\n     40                 write_column(self.context, col_name, col_type, items,\r\n---> 41                              self.fout, types_check=block.types_check)\r\n     42 \r\n     43         self.finalize()\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\columns\\service.py in write_column(context, column_name, column_spec, items, buf, types_check)\r\n     82 \r\n     83     try:\r\n---> 84         column.write_data(items, buf)\r\n     85 \r\n     86     except column_exceptions.ColumnTypeMismatchException as e:\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\columns\\base.py in write_data(self, items, buf)\r\n     77             self._write_nulls_map(items, buf)\r\n     78 \r\n---> 79         self._write_data(items, buf)\r\n     80 \r\n     81     def _write_data(self, items, buf):\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\columns\\base.py in _write_data(self, items, buf)\r\n     81     def _write_data(self, items, buf):\r\n     82         prepared = self.prepare_items(items)\r\n---> 83         self.write_items(prepared, buf)\r\n     84 \r\n     85     def write_items(self, items, buf):\r\n\r\nc:\\users\\user\\appdata\\local\\programs\\python\\python37\\lib\\site-packages\\clickhouse_driver\\columns\\stringcolumn.py in write_items(self, items, buf)\r\n     25         for value in items:\r\n     26             if not isinstance(value, bytes):\r\n---> 27                 value = utf_8_encode(value)[0]\r\n     28 \r\n     29             write_varint(len(value), buf)\r\n\r\nTypeError: utf_8_encode() argument 1 must be str, not None\r\n\r\n`\r\n\r\nHow to handle this type of error?\r\nShould I replace all string columns with None/np.nan with empty string (''), or...?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/90", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/90/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/90/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/90", "id": 446587404, "node_id": "MDU6SXNzdWU0NDY1ODc0MDQ=", "number": 90, "title": "Insert and fields with default value", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-21T12:20:21Z", "updated_at": "2019-06-02T18:18:47Z", "closed_at": "2019-06-02T18:18:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nif I create table as:\r\n\r\nCREATE TABLE run_diff ( Customer String, Start_DateTime DateTime,  output_PortStatus String,  Start_Date Date DEFAULT toDate(Start_DateTime),  inserted_on DateTime DEFAULT now()) ENGINE = MergeTree() PARTITION BY Start_Date ORDER BY Start_Date SETTINGS index_granularity = 8192\r\n\r\nand dataframe as:\r\n\r\n\r\nnr_of_rows = 10\r\n\r\nrd = pd.DataFrame({\r\n    'Customer' : [random.choice(['A', 'B', 'C', 'D']) for cnt in range(nr_of_rows)],\r\n    'Start_DateTime' : [prev_24h - datetime.timedelta(hours=2) + datetime.timedelta(hours=cnt) for cnt in range(nr_of_rows)], \r\n    'Status' : [random.choice(['WORKING', 'NOT_WORKING']) for cnt in range(nr_of_rows)],\r\n})\r\n\r\nIf I try to insert dataframe to table with:\r\n\r\nclient.execute('\"insert into run_diff values\"', rd.values.tolist())\r\n\r\nI get an error: ValueError: Expected 5 columns, got 3\r\n\r\nIf I add date (for Start_Date) and datetime (for inserted_on) columns into dataframe, insert is executed with no errors.\r\nWhy clickhouse_dirver expect values to be provided for columns with default values/functions?\r\nIs this a bug or feature?\r\n\r\nRegards.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/88", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/88/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/88/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/88", "id": 446574625, "node_id": "MDU6SXNzdWU0NDY1NzQ2MjU=", "number": 88, "title": "LowCardinality data type support", "user": {"login": "blubard", "id": 50867003, "node_id": "MDQ6VXNlcjUwODY3MDAz", "avatar_url": "https://avatars3.githubusercontent.com/u/50867003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blubard", "html_url": "https://github.com/blubard", "followers_url": "https://api.github.com/users/blubard/followers", "following_url": "https://api.github.com/users/blubard/following{/other_user}", "gists_url": "https://api.github.com/users/blubard/gists{/gist_id}", "starred_url": "https://api.github.com/users/blubard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blubard/subscriptions", "organizations_url": "https://api.github.com/users/blubard/orgs", "repos_url": "https://api.github.com/users/blubard/repos", "events_url": "https://api.github.com/users/blubard/events{/privacy}", "received_events_url": "https://api.github.com/users/blubard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-21T11:50:38Z", "updated_at": "2019-06-02T18:14:36Z", "closed_at": "2019-06-02T18:14:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue #80 still prevails in 0.0.19 though it is closed.\r\n`\r\nclickhouse_driver.errors.UnknownTypeError: Code: 50. Unknown type LowCardinality(String)\r\n`\r\nIt is fixed in the master branch tough. When will the next versions be tagged?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/86", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/86/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/86/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/86", "id": 435019249, "node_id": "MDU6SXNzdWU0MzUwMTkyNDk=", "number": 86, "title": "clickhouse-driver does not work with Docker on Mac", "user": {"login": "yedy99", "id": 29296918, "node_id": "MDQ6VXNlcjI5Mjk2OTE4", "avatar_url": "https://avatars0.githubusercontent.com/u/29296918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yedy99", "html_url": "https://github.com/yedy99", "followers_url": "https://api.github.com/users/yedy99/followers", "following_url": "https://api.github.com/users/yedy99/following{/other_user}", "gists_url": "https://api.github.com/users/yedy99/gists{/gist_id}", "starred_url": "https://api.github.com/users/yedy99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yedy99/subscriptions", "organizations_url": "https://api.github.com/users/yedy99/orgs", "repos_url": "https://api.github.com/users/yedy99/repos", "events_url": "https://api.github.com/users/yedy99/events{/privacy}", "received_events_url": "https://api.github.com/users/yedy99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-04-19T01:42:37Z", "updated_at": "2019-06-02T18:39:33Z", "closed_at": "2019-06-02T18:39:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Mac OSX: 10.14.4 \r\ndocker: 18.09.2,\r\nclickhouse: v19.5.2.6\r\n\r\nAfter installing clickhouse-driver, I running following commands:\r\nfrom clickhouse_driver import Client\r\nclient = Client('localhost')\r\nclient.execute('select 1;')\r\nHowever, an error shows up:\r\n\"clickhouse_driver.errors.NetworkError: Code: 210. Connection refused (localhost:9000)\"\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/84", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/84/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/84/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/84", "id": 432933150, "node_id": "MDU6SXNzdWU0MzI5MzMxNTA=", "number": 84, "title": "clickhouse_driver.errors.SocketTimeoutError", "user": {"login": "86085185", "id": 14801587, "node_id": "MDQ6VXNlcjE0ODAxNTg3", "avatar_url": "https://avatars1.githubusercontent.com/u/14801587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/86085185", "html_url": "https://github.com/86085185", "followers_url": "https://api.github.com/users/86085185/followers", "following_url": "https://api.github.com/users/86085185/following{/other_user}", "gists_url": "https://api.github.com/users/86085185/gists{/gist_id}", "starred_url": "https://api.github.com/users/86085185/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/86085185/subscriptions", "organizations_url": "https://api.github.com/users/86085185/orgs", "repos_url": "https://api.github.com/users/86085185/repos", "events_url": "https://api.github.com/users/86085185/events{/privacy}", "received_events_url": "https://api.github.com/users/86085185/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-14T05:00:27Z", "updated_at": "2020-06-01T20:50:29Z", "closed_at": "2019-04-14T09:47:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "code:\r\nfrom clickhouse_driver import Client\r\nclient = Client('xx.xxx.xx.xx',port=8123,database='default',user='default',password='')\r\nclient.execute('SHOW tables\u2019)\r\n\r\nerror:\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 232, in connect\r\n    self.receive_hello()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 307, in receive_hello\r\n    packet_type = read_varint(self.fin)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/reader.py\", line 30, in read_varint\r\n    i = f.read_one()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/bufferedreader.py\", line 48, in read_one\r\n    self.read_into_buffer()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/bufferedreader.py\", line 143, in read_into_buffer\r\n    self.current_buffer_size = self.sock.recv_into(self.buffer)\r\nsocket.timeout: timed out\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 191, in execute\r\n    self.connection.force_connect()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 166, in force_connect\r\n    self.connect()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 240, in connect\r\n    '{} ({})'.format(e.strerror, self.get_description())\r\nclickhouse_driver.errors.SocketTimeoutError: Code: 209. None (39.96.218.165:8123)\r\n\r\ncheck:\r\ncurl xx.xxx.xx.xx:8123\r\nok\r\njdbc connect\r\nok\r\ndatagrip connect\r\nok\r\n\r\nuse python3.6,but can not connect clickhouse ,who can help solve the problem????\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/83", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/83/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/83/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/83", "id": 431534054, "node_id": "MDU6SXNzdWU0MzE1MzQwNTQ=", "number": 83, "title": "Insert with direct values in SQL hungs", "user": {"login": "mbasunov", "id": 6403347, "node_id": "MDQ6VXNlcjY0MDMzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6403347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbasunov", "html_url": "https://github.com/mbasunov", "followers_url": "https://api.github.com/users/mbasunov/followers", "following_url": "https://api.github.com/users/mbasunov/following{/other_user}", "gists_url": "https://api.github.com/users/mbasunov/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbasunov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbasunov/subscriptions", "organizations_url": "https://api.github.com/users/mbasunov/orgs", "repos_url": "https://api.github.com/users/mbasunov/repos", "events_url": "https://api.github.com/users/mbasunov/events{/privacy}", "received_events_url": "https://api.github.com/users/mbasunov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-10T14:24:39Z", "updated_at": "2019-04-10T20:51:18Z", "closed_at": "2019-04-10T20:51:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n`\r\nclient = Client('localhost')\r\nclient.execute('CREATE TABLE test (x Int32) ENGINE = Memory')\r\nclient.execute('insert into test values (1)')\r\n`\r\nInsert query hungs.\r\nBut this workaround works:\r\n`\r\nclient.execute('insert into test select 1')\r\n`\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/82", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/82/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/82/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/82", "id": 429148843, "node_id": "MDU6SXNzdWU0MjkxNDg4NDM=", "number": 82, "title": "Last query\u2019s profile info ", "user": {"login": "healiseu", "id": 14239698, "node_id": "MDQ6VXNlcjE0MjM5Njk4", "avatar_url": "https://avatars1.githubusercontent.com/u/14239698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/healiseu", "html_url": "https://github.com/healiseu", "followers_url": "https://api.github.com/users/healiseu/followers", "following_url": "https://api.github.com/users/healiseu/following{/other_user}", "gists_url": "https://api.github.com/users/healiseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/healiseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/healiseu/subscriptions", "organizations_url": "https://api.github.com/users/healiseu/orgs", "repos_url": "https://api.github.com/users/healiseu/repos", "events_url": "https://api.github.com/users/healiseu/events{/privacy}", "received_events_url": "https://api.github.com/users/healiseu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-04-04T08:33:43Z", "updated_at": "2019-08-08T17:28:27Z", "closed_at": "2019-08-08T17:28:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, is there an easy way to read \r\n* The number of rows in the result set, \r\n* the time passed, \r\n* and the average speed of query processing\r\n\r\nthat [ClickHouse command-line client][2] displays at the end of processing a query ?\r\n\r\n```txt\r\nFor example:\r\n21 rows in set. Elapsed: 2.172 sec. Processed 2.78 million rows, 33.33 MB (1.28 million rows/s., 15.34 MB/s.)\r\n```\r\nI have tried reading [query profile info][2] but I could only get\r\n* rows, i.e. number of rows in the result set\r\n* bytes of the result set ?\r\n\r\nI am missing 3 more measurements\r\n1. elapsed time\r\n2. read_rows\r\n3. read_bytes\r\n\r\n#### Question:\r\nHow would you execute `client.last_query.profile_info` to get these three ?\r\n\r\nBTW1: I can process the system.query_log but this is a cumbersome approach\r\nBTW2: This could be a nice feature to have, i.e. adding an option to display profile info from `Client.execute()`\r\n\r\n[1]: https://clickhouse-driver.readthedocs.io/en/latest/features.html#reading-query-profile-info\r\n[2]: https://clickhouse.yandex/docs/en/interfaces/cli/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/81", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/81/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/81/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/81", "id": 428069678, "node_id": "MDU6SXNzdWU0MjgwNjk2Nzg=", "number": 81, "title": "error: unpack requires a string argument of length 1", "user": {"login": "ggeop", "id": 35366798, "node_id": "MDQ6VXNlcjM1MzY2Nzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/35366798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggeop", "html_url": "https://github.com/ggeop", "followers_url": "https://api.github.com/users/ggeop/followers", "following_url": "https://api.github.com/users/ggeop/following{/other_user}", "gists_url": "https://api.github.com/users/ggeop/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggeop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggeop/subscriptions", "organizations_url": "https://api.github.com/users/ggeop/orgs", "repos_url": "https://api.github.com/users/ggeop/repos", "events_url": "https://api.github.com/users/ggeop/events{/privacy}", "received_events_url": "https://api.github.com/users/ggeop/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-02T07:38:39Z", "updated_at": "2019-04-08T07:53:07Z", "closed_at": "2019-04-08T07:53:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI observe a strange behavior when I execute a query with clickhouse-driver from versions higher from 0.0.15. My system dependencies are Ubuntu 16.04.2 LTS and Python 2.7.3.\r\n\r\n**An example of a query:**\r\n```\r\nfrom clickhouse_driver import Client\r\nclient = Client('localhost')\r\nclient.execute('SHOW databases')\r\n```\r\n\r\n**The error log:**\r\n```\r\n....\r\n  File \"/usr/local/pyenv/.pyenv/versions/py_env-2.7.3/lib/python2.7/site-packages/clickhouse_driver/block.py\", line 26, in read\r\n    self.is_overflows = bool(read_binary_uint8(buf))\r\n  File \"/usr/local/pyenv/.pyenv/versions/py_env-2.7.3/lib/python2.7/site-packages/clickhouse_driver/reader.py\", line 66, in read_binary_uint8\r\n    return read_binary_int(buf, 'B')\r\n  File \"/usr/local/pyenv/.pyenv/versions/py_env-2.7.3/lib/python2.7/site-packages/clickhouse_driver/reader.py\", line 46, in read_binary_int\r\n    return s.unpack(buf.read(s.size))[0]\r\nerror: unpack requires a string argument of length 1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/80", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/80/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/80/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/80", "id": 425256463, "node_id": "MDU6SXNzdWU0MjUyNTY0NjM=", "number": 80, "title": "Support LowCardinality data type", "user": {"login": "5cmpersec", "id": 10252420, "node_id": "MDQ6VXNlcjEwMjUyNDIw", "avatar_url": "https://avatars0.githubusercontent.com/u/10252420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/5cmpersec", "html_url": "https://github.com/5cmpersec", "followers_url": "https://api.github.com/users/5cmpersec/followers", "following_url": "https://api.github.com/users/5cmpersec/following{/other_user}", "gists_url": "https://api.github.com/users/5cmpersec/gists{/gist_id}", "starred_url": "https://api.github.com/users/5cmpersec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/5cmpersec/subscriptions", "organizations_url": "https://api.github.com/users/5cmpersec/orgs", "repos_url": "https://api.github.com/users/5cmpersec/repos", "events_url": "https://api.github.com/users/5cmpersec/events{/privacy}", "received_events_url": "https://api.github.com/users/5cmpersec/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-26T07:02:18Z", "updated_at": "2019-04-24T03:34:16Z", "closed_at": "2019-04-24T03:34:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please support `LowCardinality` data type.\r\n\r\n```\r\nclickhouse_driver.errors.UnknownTypeError: Code: 50. Unknown type LowCardinality(String)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/79", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/79/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/79/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/79", "id": 425053764, "node_id": "MDU6SXNzdWU0MjUwNTM3NjQ=", "number": 79, "title": "Insert from remote", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-25T18:30:58Z", "updated_at": "2019-06-02T18:19:40Z", "closed_at": "2019-06-02T18:19:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I am on server X which has IP address xxx.xxx.xxx.xxx, can I do inserts from the same database/table from server Y which has IP address yyy.yyy.yyy.yyy, like this one? \r\n\r\ninsert into database.table (startTime, endTime, AdapterID...)\r\n select startTime, endTime, AdapterID...\r\n, Sign from remote('yyy.yyy.yyy.yyy', database, table)\r\n\r\nI tried with client.execute(), but looks like that it expects insert values as separate parameter.\r\nDo we have a workaround?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/78", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/78/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/78/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/78", "id": 420393597, "node_id": "MDU6SXNzdWU0MjAzOTM1OTc=", "number": 78, "title": "how to do do dynamic DDL?", "user": {"login": "smartinsightsfromdata", "id": 3786727, "node_id": "MDQ6VXNlcjM3ODY3Mjc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3786727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smartinsightsfromdata", "html_url": "https://github.com/smartinsightsfromdata", "followers_url": "https://api.github.com/users/smartinsightsfromdata/followers", "following_url": "https://api.github.com/users/smartinsightsfromdata/following{/other_user}", "gists_url": "https://api.github.com/users/smartinsightsfromdata/gists{/gist_id}", "starred_url": "https://api.github.com/users/smartinsightsfromdata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smartinsightsfromdata/subscriptions", "organizations_url": "https://api.github.com/users/smartinsightsfromdata/orgs", "repos_url": "https://api.github.com/users/smartinsightsfromdata/repos", "events_url": "https://api.github.com/users/smartinsightsfromdata/events{/privacy}", "received_events_url": "https://api.github.com/users/smartinsightsfromdata/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-13T09:22:51Z", "updated_at": "2019-03-31T14:58:48Z", "closed_at": "2019-03-31T14:58:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following code fails. My intention is to use something this in a loop using a list of table names.\r\n\r\nWhat is the right way to do this?\r\n\r\n```\r\nr1 = client.execute('DROP TABLE IF EXISTS %(table)s', {'table': 'iris'})\r\n```\r\nThe error is:\r\n\r\n```\r\nDB::Exception: Syntax error: failed at position 26: 'iris'. Expected identifier.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/77", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/77/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/77/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/77", "id": 418440053, "node_id": "MDU6SXNzdWU0MTg0NDAwNTM=", "number": 77, "title": "Function escape_param should escape enum values", "user": {"login": "robert-cody", "id": 13272122, "node_id": "MDQ6VXNlcjEzMjcyMTIy", "avatar_url": "https://avatars0.githubusercontent.com/u/13272122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robert-cody", "html_url": "https://github.com/robert-cody", "followers_url": "https://api.github.com/users/robert-cody/followers", "following_url": "https://api.github.com/users/robert-cody/following{/other_user}", "gists_url": "https://api.github.com/users/robert-cody/gists{/gist_id}", "starred_url": "https://api.github.com/users/robert-cody/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robert-cody/subscriptions", "organizations_url": "https://api.github.com/users/robert-cody/orgs", "repos_url": "https://api.github.com/users/robert-cody/repos", "events_url": "https://api.github.com/users/robert-cody/events{/privacy}", "received_events_url": "https://api.github.com/users/robert-cody/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-07T17:56:49Z", "updated_at": "2019-03-31T16:14:24Z", "closed_at": "2019-03-31T16:14:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "For all types function escape_param adds quotes around passed values, but for enums it's not which is pretty strange and makes it impossible to pass iterables with enum values:\r\n`\r\n... AND `type` IN %(types)s\r\n`\r\nbecomes:\r\n`\r\n... AND `type` IN [type1, type2, type3]\r\n`\r\nwhich leads to error: \r\n> DB::Exception: Unknown identifier: type1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/74", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/74/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/74/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/74", "id": 412227435, "node_id": "MDU6SXNzdWU0MTIyMjc0MzU=", "number": 74, "title": "Cannot insert datetime as date", "user": {"login": "gle4er", "id": 17588327, "node_id": "MDQ6VXNlcjE3NTg4MzI3", "avatar_url": "https://avatars3.githubusercontent.com/u/17588327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gle4er", "html_url": "https://github.com/gle4er", "followers_url": "https://api.github.com/users/gle4er/followers", "following_url": "https://api.github.com/users/gle4er/following{/other_user}", "gists_url": "https://api.github.com/users/gle4er/gists{/gist_id}", "starred_url": "https://api.github.com/users/gle4er/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gle4er/subscriptions", "organizations_url": "https://api.github.com/users/gle4er/orgs", "repos_url": "https://api.github.com/users/gle4er/repos", "events_url": "https://api.github.com/users/gle4er/events{/privacy}", "received_events_url": "https://api.github.com/users/gle4er/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-20T03:27:25Z", "updated_at": "2019-02-20T04:44:03Z", "closed_at": "2019-02-20T04:44:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi everyone!\r\nI'm making a python script, which I wish export table from Oracle to Clickhouse.\r\nOracle driver get date value as datetime (this value looks like 2019-02-20 00:00:00). In Clickhouse table, this value puts directly in column as Date. So, clickhouse-driver expected to get value as type date and I got error:\r\n\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 202, in execute\r\n    query_id=query_id, types_check=types_check`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 351, in process_insert_query\r\n    self.send_data(sample_block, data, types_check=types_check)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 375, in send_data\r\n    self.connection.send_data(block)` \r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 476, in send_data\r\n    self.block_out.write(block)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/streams/native.py\", line 41, in write\r\n    self.fout, types_check=block.types_check)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/columns/service.py\", line 84, in write_column\r\n    column.write_data(items, buf)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/columns/base.py\", line 79, in write_data\r\n    self._write_data(items, buf)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/columns/base.py\", line 82, in _write_data\r\n    prepared = self.prepare_items(items)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/columns/base.py\", line 69, in prepare_items\r\n    x = before_write(x)`\r\n`File \"/usr/lib/python3.7/site-packages/clickhouse_driver/columns/datecolumn.py\", line 14, in before_write_item\r\n    return (value - self.epoch_start).days`\r\n`TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'datetime.date'`\r\n\r\nHow workaround this problem? Or need changes in driver code?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/71", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/71/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/71/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/71", "id": 409547762, "node_id": "MDU6SXNzdWU0MDk1NDc3NjI=", "number": 71, "title": "Type bytes as parameter in select-query", "user": {"login": "heyciao", "id": 14062695, "node_id": "MDQ6VXNlcjE0MDYyNjk1", "avatar_url": "https://avatars0.githubusercontent.com/u/14062695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heyciao", "html_url": "https://github.com/heyciao", "followers_url": "https://api.github.com/users/heyciao/followers", "following_url": "https://api.github.com/users/heyciao/following{/other_user}", "gists_url": "https://api.github.com/users/heyciao/gists{/gist_id}", "starred_url": "https://api.github.com/users/heyciao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heyciao/subscriptions", "organizations_url": "https://api.github.com/users/heyciao/orgs", "repos_url": "https://api.github.com/users/heyciao/repos", "events_url": "https://api.github.com/users/heyciao/events{/privacy}", "received_events_url": "https://api.github.com/users/heyciao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-02-12T23:22:29Z", "updated_at": "2019-06-02T18:45:18Z", "closed_at": "2019-06-02T18:45:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI totally don't understand how I'm supposed to handle parameters of type \"bytes\" in a select query (but works perfectly when executing an \"insert into XXX values...\", maybe because in such cases I pass a \"list\" of \"bytes\"?).\r\n\r\nExample (I tried to simplify it as much as possible):\r\nThis works fine...\r\n\r\n`listtuplesResult = self.dbHandle.execute(\"select %(parm1)s\",{\"parm1\":'hello there'}, settings={'strings_as_bytes': True})`\r\n\r\n...and I get back a nice \"bytes\"-variable containing the same characters, but as soon as I make the string become \"bytes\" like this (I just add \"b\" before the string \"hello there\")...\r\n\r\n`listtuplesResult = self.dbHandle.execute(\"select %(parm1)s\",{\"parm1\":b'hello there'}, settings={'strings_as_bytes': True})`\r\n\r\n...the code crashes returning the following error:\r\n```\r\nSQL \"select %(parm1)s\" failed with the following error:Code: 62.\r\nDB::Exception: Syntax error: failed at position 9: 'hello there'. Expected one of: GROUP BY, ORDER BY, AS, PREWHERE, AND, OR, UNION ALL, IS, BETWEEN, NOT LIKE, LIKE, GLOBAL IN, IN, GLOBAL NOT IN, NOT IN, Comma, Dot, Arrow, QuestionMark, token, FROM, WITH, WHERE, SETTINGS, INTO OUTFILE, FORMAT, identifier, alias, HAVING, LIMIT. Stack trace:\r\n```\r\n\r\nAm I doing something very basic very wrong?\r\nI reaaally have to perform a \"select\" using bytes (not strings, because the bytes that I'm using are random and I cannot encode them to e.g. any valid UTF-8 string).\r\nI did look at the source code but I'm not a hacker and ultimately I got stuck in \"util/escape.py\" as I don't find there an \"elif\" that takes care about the binary types... . \r\nThanks a lot", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/70", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/70/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/70/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/70", "id": 402676318, "node_id": "MDU6SXNzdWU0MDI2NzYzMTg=", "number": 70, "title": "Unable to Insert data to tables", "user": {"login": "Lakshmisowmya", "id": 20332588, "node_id": "MDQ6VXNlcjIwMzMyNTg4", "avatar_url": "https://avatars3.githubusercontent.com/u/20332588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lakshmisowmya", "html_url": "https://github.com/Lakshmisowmya", "followers_url": "https://api.github.com/users/Lakshmisowmya/followers", "following_url": "https://api.github.com/users/Lakshmisowmya/following{/other_user}", "gists_url": "https://api.github.com/users/Lakshmisowmya/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lakshmisowmya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lakshmisowmya/subscriptions", "organizations_url": "https://api.github.com/users/Lakshmisowmya/orgs", "repos_url": "https://api.github.com/users/Lakshmisowmya/repos", "events_url": "https://api.github.com/users/Lakshmisowmya/events{/privacy}", "received_events_url": "https://api.github.com/users/Lakshmisowmya/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-24T12:04:55Z", "updated_at": "2019-03-31T14:58:01Z", "closed_at": "2019-03-31T14:58:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to automate the database access using python script script.py\r\n\r\nfrom clickhouse_driver import Client\r\nimport json\r\nimport sys\r\n\r\ndef ch():\r\n\r\n    client = Client('localhost')\r\n    query = sys.argv[1]\r\n    cmdp = client.execute(query)\r\n    jsonoutput= json.dumps(cmdp)\r\n    print(jsonoutput)\r\nch()\r\n\r\nDATA Insertion in below format is not working \r\n>python script.py  'INSERT INTO arrays_test  VALUES [[\"Hello\", [1, 2]], [\"World\", [3, 4, 5]], [\"Goodbye\", []], [\"Hellotest\", [1, 2]], [\"Worldtest\", [3, 4, 5]], [\"Goodbyetest\", []]]'\r\n\r\n Other queries as below are working\r\n> python script.py \"show tables\" - works\r\n>python script.py \"select * from table\" - works\r\n>python script.py \"CREATE TABLE test (s String, arr Array(UInt8)) ENGINE = Memory\" - works\r\n \r\n Any help on this?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/69", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/69/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/69/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/69", "id": 395871325, "node_id": "MDU6SXNzdWUzOTU4NzEzMjU=", "number": 69, "title": "clickhouse_driver.errors.UnknownPacketFromServerError: Code: 100. Unknown packet XXX from server", "user": {"login": "wawaka", "id": 2454530, "node_id": "MDQ6VXNlcjI0NTQ1MzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2454530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wawaka", "html_url": "https://github.com/wawaka", "followers_url": "https://api.github.com/users/wawaka/followers", "following_url": "https://api.github.com/users/wawaka/following{/other_user}", "gists_url": "https://api.github.com/users/wawaka/gists{/gist_id}", "starred_url": "https://api.github.com/users/wawaka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wawaka/subscriptions", "organizations_url": "https://api.github.com/users/wawaka/orgs", "repos_url": "https://api.github.com/users/wawaka/repos", "events_url": "https://api.github.com/users/wawaka/events{/privacy}", "received_events_url": "https://api.github.com/users/wawaka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-01-04T10:08:31Z", "updated_at": "2019-10-30T14:40:04Z", "closed_at": "2019-03-31T14:33:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This error happens for some queries only.\r\n```Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 137, in execute\r\n    columnar=columnar\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 208, in process_ordinary_query\r\n    columnar=columnar)\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 50, in receive_result\r\n    return result.get_result()\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/result.py\", line 39, in get_result\r\n    for packet in self.packet_generator:\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 62, in packet_generator\r\n    packet = self.receive_packet()\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/client.py\", line 76, in receive_packet\r\n    packet = self.connection.receive_packet()\r\n  File \"/usr/local/lib/python3.7/site-packages/clickhouse_driver/connection.py\", line 352, in receive_packet\r\n    packet_type, self.get_description()\r\nclickhouse_driver.errors.UnknownPacketFromServerError: Code: 100. Unknown packet 109 from server <HOST>:<PORT>\r\n```\r\nIt was introduced in commit d47a263df27221cfc35bea23e6a7f18dd9e9a665", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/68", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/68/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/68/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/68", "id": 395821836, "node_id": "MDU6SXNzdWUzOTU4MjE4MzY=", "number": 68, "title": "How to insert CSV data using clickhouse-driver?", "user": {"login": "hodgesrm", "id": 2666453, "node_id": "MDQ6VXNlcjI2NjY0NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2666453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hodgesrm", "html_url": "https://github.com/hodgesrm", "followers_url": "https://api.github.com/users/hodgesrm/followers", "following_url": "https://api.github.com/users/hodgesrm/following{/other_user}", "gists_url": "https://api.github.com/users/hodgesrm/gists{/gist_id}", "starred_url": "https://api.github.com/users/hodgesrm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hodgesrm/subscriptions", "organizations_url": "https://api.github.com/users/hodgesrm/orgs", "repos_url": "https://api.github.com/users/hodgesrm/repos", "events_url": "https://api.github.com/users/hodgesrm/events{/privacy}", "received_events_url": "https://api.github.com/users/hodgesrm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-01-04T06:30:57Z", "updated_at": "2019-01-16T09:24:28Z", "closed_at": "2019-01-16T09:24:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to insert CSV file data using clickhouse-driver?  I've been unable to figure out how to do this. A naive approach like the following fails because the Client class mistakes it for a SELECT and hangs waiting for a response from the server:\r\n```python\r\nfrom clickhouse_driver import Client\r\nclient = Client('localhost')\r\nwith open('iris.csv', 'r') as data:\r\n    csv = data.read()\r\nsql = \"INSERT INTO iris FORMAT CSV \\n\" + str(csv) + \"\\n;\"\r\nclient.execute(sql)\r\n```\r\nIt seems that INSERT needs to include a list or dictionary on the client.execute() call, which is not compatible with file data. It would be nice if clickhouse-driver supported something like the following:\r\n```python\r\nfrom clickhouse_driver import Client\r\nclient = Client('localhost')\r\nwith open('iris.csv', 'r') as data:\r\n    client.execute(\"INSERT INTO iris FORMAT CSV\", data)\r\n```\r\nProperly implemented this would allow Python to stream the CSV contents up to ClickHouse, which would be helpful for loading very large files. \r\n\r\nLet me know if you want a pull request on this and I'll try to put one together this month.  It does not look too hard to implement. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/66", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/66/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/66/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/66", "id": 393957885, "node_id": "MDU6SXNzdWUzOTM5NTc4ODU=", "number": 66, "title": "Feature 'format JSON' needed", "user": {"login": "jackpgao", "id": 3423412, "node_id": "MDQ6VXNlcjM0MjM0MTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3423412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackpgao", "html_url": "https://github.com/jackpgao", "followers_url": "https://api.github.com/users/jackpgao/followers", "following_url": "https://api.github.com/users/jackpgao/following{/other_user}", "gists_url": "https://api.github.com/users/jackpgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackpgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackpgao/subscriptions", "organizations_url": "https://api.github.com/users/jackpgao/orgs", "repos_url": "https://api.github.com/users/jackpgao/repos", "events_url": "https://api.github.com/users/jackpgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jackpgao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-25T04:06:27Z", "updated_at": "2019-10-21T03:09:29Z", "closed_at": "2019-10-21T03:09:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can you provide  'format JSON' as the clickhouse-client does?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/61", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/61/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/61/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/61", "id": 387207713, "node_id": "MDU6SXNzdWUzODcyMDc3MTM=", "number": 61, "title": "insert data into Date column face error", "user": {"login": "PeterMung", "id": 1510121, "node_id": "MDQ6VXNlcjE1MTAxMjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1510121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PeterMung", "html_url": "https://github.com/PeterMung", "followers_url": "https://api.github.com/users/PeterMung/followers", "following_url": "https://api.github.com/users/PeterMung/following{/other_user}", "gists_url": "https://api.github.com/users/PeterMung/gists{/gist_id}", "starred_url": "https://api.github.com/users/PeterMung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PeterMung/subscriptions", "organizations_url": "https://api.github.com/users/PeterMung/orgs", "repos_url": "https://api.github.com/users/PeterMung/repos", "events_url": "https://api.github.com/users/PeterMung/events{/privacy}", "received_events_url": "https://api.github.com/users/PeterMung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-04T10:05:17Z", "updated_at": "2019-01-11T18:51:27Z", "closed_at": "2019-01-11T18:51:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Exception:\r\nunsupported operand type(s) for -: 'str' and 'datetime.date'\r\n\r\nwhen i try insert into Datetime format column, it's success.\r\n\r\nhow to fix this problem? thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/60", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/60/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/60/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/60", "id": 371247445, "node_id": "MDU6SXNzdWUzNzEyNDc0NDU=", "number": 60, "title": "SELECT INTO OUTFILE", "user": {"login": "kasparrov", "id": 2706306, "node_id": "MDQ6VXNlcjI3MDYzMDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/2706306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kasparrov", "html_url": "https://github.com/kasparrov", "followers_url": "https://api.github.com/users/kasparrov/followers", "following_url": "https://api.github.com/users/kasparrov/following{/other_user}", "gists_url": "https://api.github.com/users/kasparrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/kasparrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kasparrov/subscriptions", "organizations_url": "https://api.github.com/users/kasparrov/orgs", "repos_url": "https://api.github.com/users/kasparrov/repos", "events_url": "https://api.github.com/users/kasparrov/events{/privacy}", "received_events_url": "https://api.github.com/users/kasparrov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-17T20:10:46Z", "updated_at": "2018-10-18T08:34:13Z", "closed_at": "2018-10-18T08:34:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "current version of driver ignore select into outfile? \r\nthere are no difference between queries\r\n`select * from log LIMIT 10000 INTO OUTFILE '/var/tmp/test123.csv' FORMAT TabSeparated`\r\nand\r\n`select * from log LIMIT 10000`\r\n\r\nclickhouse-driver version 0.0.16", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/59", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/59/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/59/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/59", "id": 369080541, "node_id": "MDU6SXNzdWUzNjkwODA1NDE=", "number": 59, "title": "AttributeError when receiving ServerPacketTypes.PROFILE_INFO", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-11T11:41:30Z", "updated_at": "2018-10-14T08:30:24Z", "closed_at": "2018-10-14T08:30:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After updating to 0.0.16 the following error appears:\r\n\r\n```\r\n/opt/conda/envs/ibis-dev-3.6/lib/python3.6/site-packages/clickhouse_driver/client.py:222: in process_ordinary_query\r\n    columnar=columnar)\r\n/opt/conda/envs/ibis-dev-3.6/lib/python3.6/site-packages/clickhouse_driver/client.py:57: in receive_result\r\n    return result.get_result()\r\n/opt/conda/envs/ibis-dev-3.6/lib/python3.6/site-packages/clickhouse_driver/result.py:39: in get_result\r\n    for packet in self.packet_generator:\r\n/opt/conda/envs/ibis-dev-3.6/lib/python3.6/site-packages/clickhouse_driver/client.py:69: in packet_generator\r\n    packet = self.receive_packet()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <clickhouse_driver.client.Client object at 0x7ff6b95f0cc0>\r\n\r\n    def receive_packet(self):\r\n        packet = self.connection.receive_packet()\r\n    \r\n        if packet.type == ServerPacketTypes.EXCEPTION:\r\n            raise packet.exception\r\n    \r\n        elif packet.type == ServerPacketTypes.PROGRESS:\r\n            return packet\r\n    \r\n        elif packet.type == ServerPacketTypes.END_OF_STREAM:\r\n            return False\r\n    \r\n        elif packet.type == ServerPacketTypes.DATA:\r\n            return packet\r\n    \r\n        elif packet.type == ServerPacketTypes.TOTALS:\r\n            return packet\r\n    \r\n        elif packet.type == ServerPacketTypes.EXTREMES:\r\n            return packet\r\n    \r\n        elif packet.type == ServerPacketTypes.PROFILE_INFO:\r\n>           self.last_query.store_profile(packet)\r\nE           AttributeError: 'NoneType' object has no attribute 'store_profile'\r\n```\r\n\r\nsee https://circleci.com/gh/cpcloud/ibis/14423\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/58", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/58/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/58/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/58", "id": 369072151, "node_id": "MDU6SXNzdWUzNjkwNzIxNTE=", "number": 58, "title": "How to Insert Date/DateTime from python list or tuple object?", "user": {"login": "Livenux", "id": 7109328, "node_id": "MDQ6VXNlcjcxMDkzMjg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7109328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Livenux", "html_url": "https://github.com/Livenux", "followers_url": "https://api.github.com/users/Livenux/followers", "following_url": "https://api.github.com/users/Livenux/following{/other_user}", "gists_url": "https://api.github.com/users/Livenux/gists{/gist_id}", "starred_url": "https://api.github.com/users/Livenux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Livenux/subscriptions", "organizations_url": "https://api.github.com/users/Livenux/orgs", "repos_url": "https://api.github.com/users/Livenux/repos", "events_url": "https://api.github.com/users/Livenux/events{/privacy}", "received_events_url": "https://api.github.com/users/Livenux/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-11T11:17:01Z", "updated_at": "2018-10-12T07:12:29Z", "closed_at": "2018-10-12T07:12:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a list data type data like this:\r\n``` python\r\n[['2018-10-10', 600]]\r\n``` \r\ntable schema\uff1a\r\n``` sql\r\ncreate table example(\r\n TestDate Date,\r\n TestValue Int32\r\n) engigne=TinyLog\r\n```\r\nWhen I use cllickhouse-driver insert data to table, a data type error has occurred:\r\n``` \r\nCode: 53. Type mismatch in VALUES section. Expected Date got <class 'str'>: 2018-10-10 for column \"TestDate\".\r\n```\r\nHow to slove it\uff1fThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/56", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/56/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/56/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/56", "id": 363761022, "node_id": "MDU6SXNzdWUzNjM3NjEwMjI=", "number": 56, "title": "Error writing string while using supserset and clickhouse driver (text encode not set to UTF-8)", "user": {"login": "Matt-Texier", "id": 11010314, "node_id": "MDQ6VXNlcjExMDEwMzE0", "avatar_url": "https://avatars0.githubusercontent.com/u/11010314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matt-Texier", "html_url": "https://github.com/Matt-Texier", "followers_url": "https://api.github.com/users/Matt-Texier/followers", "following_url": "https://api.github.com/users/Matt-Texier/following{/other_user}", "gists_url": "https://api.github.com/users/Matt-Texier/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matt-Texier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matt-Texier/subscriptions", "organizations_url": "https://api.github.com/users/Matt-Texier/orgs", "repos_url": "https://api.github.com/users/Matt-Texier/repos", "events_url": "https://api.github.com/users/Matt-Texier/events{/privacy}", "received_events_url": "https://api.github.com/users/Matt-Texier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-25T20:51:00Z", "updated_at": "2018-09-25T21:33:10Z", "closed_at": "2018-09-25T21:33:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nSomething new is happening while adding a clickhouse db to supserset at the time superset is trying to get table meta data.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/superset/views/core.py\", line 1764, in testconn\r\n    return json_success(json.dumps(engine.table_names(), indent=4))\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/base.py\", line 2139, in table_names\r\n    return self.dialect.get_table_names(conn, schema)\r\n  File \"<string>\", line 2, in get_table_names\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/reflection.py\", line 42, in cache\r\n    return fn(self, con, *args, **kw)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_sqlalchemy/drivers/base.py\", line 482, in get_table_names\r\n    return [row.name for row in self._execute(connection, 'SHOW TABLES')]\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_sqlalchemy/drivers/native/base.py\", line 34, in _execute\r\n    return connection.execute(sql)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/base.py\", line 942, in execute\r\n    return self._execute_text(object, multiparams, params)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/base.py\", line 1104, in _execute_text\r\n    statement, parameters\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/base.py\", line 1200, in _execute_context\r\n    context)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/base.py\", line 1416, in _handle_dbapi_exception\r\n    util.reraise(*exc_info)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/util/compat.py\", line 249, in reraise\r\n    raise value\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/sqlalchemy/engine/base.py\", line 1193, in _execute_context\r\n    context)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_sqlalchemy/drivers/base.py\", line 492, in do_execute\r\n    cursor.execute(statement, parameters, context=context)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py\", line 125, in execute\r\n    external_tables=external_tables, settings=settings\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_driver/client.py\", line 102, in execute\r\n    self.connection.force_connect()\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_driver/connection.py\", line 124, in force_connect\r\n    self.connect()\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_driver/connection.py\", line 189, in connect\r\n    self.send_hello()\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_driver/connection.py\", line 260, in send_hello\r\n    write_binary_str(self.password, self.fout)\r\n  File \"/home/matthieu/python-venv/super-modular/lib/python3.5/site-packages/clickhouse_driver/writer.py\", line 18, in write_binary_str\r\n    text = text.encode('utf-8')\r\nAttributeError: 'NoneType' object has no attribute 'encode'\r\n2018-09-25 21:09:57,639:INFO:werkzeug:127.0.0.1 - - [25/Sep/2018 21:09:57] \"POST /superset/testconn HTTP/1.1\" 500 -\r\n```\r\n\r\nI suspect that something has changed in a new version of the driver and that now it is checking that there is no none UTF-8 bytes in the string before storing it ?\r\n\r\nHow do you suggest me to fix that ? Is it something to be set on string sent by superset or is it something on clickhouse driver ?\r\n\r\nThanks Matthieu. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/55", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/55/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/55/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/55", "id": 362515244, "node_id": "MDU6SXNzdWUzNjI1MTUyNDQ=", "number": 55, "title": "Accessing rows_before_limit property through API", "user": {"login": "vanzi", "id": 416521, "node_id": "MDQ6VXNlcjQxNjUyMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/416521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vanzi", "html_url": "https://github.com/vanzi", "followers_url": "https://api.github.com/users/vanzi/followers", "following_url": "https://api.github.com/users/vanzi/following{/other_user}", "gists_url": "https://api.github.com/users/vanzi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vanzi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vanzi/subscriptions", "organizations_url": "https://api.github.com/users/vanzi/orgs", "repos_url": "https://api.github.com/users/vanzi/repos", "events_url": "https://api.github.com/users/vanzi/events{/privacy}", "received_events_url": "https://api.github.com/users/vanzi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-21T08:46:26Z", "updated_at": "2018-10-07T18:55:28Z", "closed_at": "2018-10-07T18:55:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `BlockStreamProfileInfo.rows_before_limit` property is useful to get the rows count for pagination without running an extra query, but there does not seem to be any way to access it through the API (i.e. the client silently ignores the `PROFILE_INFO` packet).\r\n\r\nAs a workaround I hacked together a small change in `Client.receive_packet` where it saves the last `packet.profile_info` in the Client instance and we can use it like this:\r\n\r\n    client = Client()\r\n    rows = client.execute('SELECT ...')\r\n    total_count = client.profile_info.rows_before_limit\r\n\r\nSo it's not pretty, but it seems to work fine. Anyway, I think it would make sense to have it in the main API without additional hacks, but I'm not sure what's the best place to put it in... Do you have any thoughts on that? Or perhaps are there any additional caveats that might have caused leaving this out of the API scope?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/54", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/54/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/54/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/54", "id": 362138569, "node_id": "MDU6SXNzdWUzNjIxMzg1Njk=", "number": 54, "title": "Column names", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-20T11:12:45Z", "updated_at": "2018-09-20T13:06:55Z", "closed_at": "2018-09-20T12:18:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI can execute:\r\n\r\nclient.execute('SELECT * FROM test3')\r\n\r\nor\r\n\r\nclient.execute('SELECT a, b, c FROM test3')\r\n\r\nand I will get list of tuples (one tuple for each row), but I don't have column names.\r\n\r\nIs it somehow possible to get all columns names (named tuple, or something) with the data itself, in order to simplify further data manipulation?\r\n\r\nFor example, after getting result set from client.execute('SELECT * FROM test3'), I have to manually find out all column names and than provide that information to the pandas dataframe.\r\n\r\nRegards.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/53", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/53/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/53/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/53", "id": 362075264, "node_id": "MDU6SXNzdWUzNjIwNzUyNjQ=", "number": 53, "title": "Add Decimal type support", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-20T08:31:41Z", "updated_at": "2018-10-10T09:31:30Z", "closed_at": "2018-10-10T09:31:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Recent clickhouse have an experimental decimal type: https://github.com/yandex/ClickHouse/blob/master/CHANGELOG.md#clickhouse-release-181213-2018-09-10\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/52", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/52/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/52/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/52", "id": 356796567, "node_id": "MDU6SXNzdWUzNTY3OTY1Njc=", "number": 52, "title": "AttributeError: 'Client' object has no attribute 'execute_iter'", "user": {"login": "ghuname", "id": 15207713, "node_id": "MDQ6VXNlcjE1MjA3NzEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15207713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghuname", "html_url": "https://github.com/ghuname", "followers_url": "https://api.github.com/users/ghuname/followers", "following_url": "https://api.github.com/users/ghuname/following{/other_user}", "gists_url": "https://api.github.com/users/ghuname/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghuname/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghuname/subscriptions", "organizations_url": "https://api.github.com/users/ghuname/orgs", "repos_url": "https://api.github.com/users/ghuname/repos", "events_url": "https://api.github.com/users/ghuname/events{/privacy}", "received_events_url": "https://api.github.com/users/ghuname/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-04T12:54:52Z", "updated_at": "2018-09-11T15:51:46Z", "closed_at": "2018-09-11T15:51:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nlooks like there is no execute_iter method in version '0.0.10'.\r\n\r\n\r\nfrom clickhouse_driver import Client\r\n\r\nclient = Client(host='localhost', port=2102, database='shard01')\r\n\r\nsettings = {'max_block_size': 100000}\r\n\r\nrows_gen = client.execute_iter('select * from query.TCC_S1', settings=settings)\r\n\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-20-1a29fcf8bbb2> in <module>()\r\n      2 client = Client(host='localhost', port=2102, database='shard01')\r\n      3 settings = {'max_block_size': 100000}\r\n----> 4 rows_gen = client.execute_iter('select * from query.TCC_S1', settings=settings)\r\n\r\nAttributeError: 'Client' object has no attribute 'execute_iter'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/51", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/51/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/51/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/51", "id": 353679818, "node_id": "MDU6SXNzdWUzNTM2Nzk4MTg=", "number": 51, "title": "column/string value may be None NoneType' object has no attribute 'encode'", "user": {"login": "linuxgood1230", "id": 13182871, "node_id": "MDQ6VXNlcjEzMTgyODcx", "avatar_url": "https://avatars2.githubusercontent.com/u/13182871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linuxgood1230", "html_url": "https://github.com/linuxgood1230", "followers_url": "https://api.github.com/users/linuxgood1230/followers", "following_url": "https://api.github.com/users/linuxgood1230/following{/other_user}", "gists_url": "https://api.github.com/users/linuxgood1230/gists{/gist_id}", "starred_url": "https://api.github.com/users/linuxgood1230/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linuxgood1230/subscriptions", "organizations_url": "https://api.github.com/users/linuxgood1230/orgs", "repos_url": "https://api.github.com/users/linuxgood1230/repos", "events_url": "https://api.github.com/users/linuxgood1230/events{/privacy}", "received_events_url": "https://api.github.com/users/linuxgood1230/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-24T07:46:16Z", "updated_at": "2018-08-26T21:05:15Z", "closed_at": "2018-08-26T21:05:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "column/string value may be None \r\n\r\n  def try_encode(self, value):\r\n        if not isinstance(value, bytes):\r\n            return value.encode('utf-8')\r\n        return value", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/50", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/50/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/50/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/50", "id": 349962279, "node_id": "MDU6SXNzdWUzNDk5NjIyNzk=", "number": 50, "title": "DBAPI Support", "user": {"login": "DeanThompson", "id": 1628320, "node_id": "MDQ6VXNlcjE2MjgzMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1628320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeanThompson", "html_url": "https://github.com/DeanThompson", "followers_url": "https://api.github.com/users/DeanThompson/followers", "following_url": "https://api.github.com/users/DeanThompson/following{/other_user}", "gists_url": "https://api.github.com/users/DeanThompson/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeanThompson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeanThompson/subscriptions", "organizations_url": "https://api.github.com/users/DeanThompson/orgs", "repos_url": "https://api.github.com/users/DeanThompson/repos", "events_url": "https://api.github.com/users/DeanThompson/events{/privacy}", "received_events_url": "https://api.github.com/users/DeanThompson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-13T09:55:25Z", "updated_at": "2020-02-25T11:22:19Z", "closed_at": "2020-02-25T11:22:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for the hard working on this great project.\r\n\r\nDoes this driver already implement the [DBAPI](https://www.python.org/dev/peps/pep-0249/)? If not, do we have a plan?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/49", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/49/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/49/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/49", "id": 349363824, "node_id": "MDU6SXNzdWUzNDkzNjM4MjQ=", "number": 49, "title": "Links related issues", "user": {"login": "nh1571", "id": 18585055, "node_id": "MDQ6VXNlcjE4NTg1MDU1", "avatar_url": "https://avatars1.githubusercontent.com/u/18585055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nh1571", "html_url": "https://github.com/nh1571", "followers_url": "https://api.github.com/users/nh1571/followers", "following_url": "https://api.github.com/users/nh1571/following{/other_user}", "gists_url": "https://api.github.com/users/nh1571/gists{/gist_id}", "starred_url": "https://api.github.com/users/nh1571/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nh1571/subscriptions", "organizations_url": "https://api.github.com/users/nh1571/orgs", "repos_url": "https://api.github.com/users/nh1571/repos", "events_url": "https://api.github.com/users/nh1571/events{/privacy}", "received_events_url": "https://api.github.com/users/nh1571/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-10T03:28:58Z", "updated_at": "2018-08-26T20:28:57Z", "closed_at": "2018-08-26T20:28:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Do you need to explicitly close the connection using clickhouse_driver?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/48", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/48/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/48/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/48", "id": 346569573, "node_id": "MDU6SXNzdWUzNDY1Njk1NzM=", "number": 48, "title": "Error if enum key is blank", "user": {"login": "subuk", "id": 702942, "node_id": "MDQ6VXNlcjcwMjk0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/702942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subuk", "html_url": "https://github.com/subuk", "followers_url": "https://api.github.com/users/subuk/followers", "following_url": "https://api.github.com/users/subuk/following{/other_user}", "gists_url": "https://api.github.com/users/subuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/subuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subuk/subscriptions", "organizations_url": "https://api.github.com/users/subuk/orgs", "repos_url": "https://api.github.com/users/subuk/repos", "events_url": "https://api.github.com/users/subuk/events{/privacy}", "received_events_url": "https://api.github.com/users/subuk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-08-01T12:01:05Z", "updated_at": "2019-01-11T18:50:49Z", "closed_at": "2019-01-11T18:50:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "## How to reproduce\r\n\r\nCreate table with enum field and insert a few rows\r\n```SQL\r\nDROP TABLE IF EXISTS events;\r\nCREATE TABLE events (\r\n    time DateTime('UTC'),\r\n    project Enum8('' = 0, 'first' = 1),\r\n    text String\r\n) ENGINE = MergeTree() ORDER BY (time) PARTITION BY toYYYYMM(time);\r\n\r\nINSERT INTO events VALUES(now(), 'first', 'descr1');\r\nINSERT INTO events VALUES(now(), '', 'descr2');\r\n```\r\n\r\nTry to select with python driver:\r\n```python\r\nimport clickhouse_driver\r\nclient = clickhouse_driver.Client(host='127.0.0.1')\r\nprint(client.execute(\"SELECT * FROM events\"))\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/tmp/driver-test.py\", line 4, in <module>\r\n    print(client.execute(\"SELECT * FROM events\"))\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 189, in execute\r\n    types_check=types_check, columnar=columnar\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 246, in process_ordinary_query\r\n    columnar=columnar)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 82, in receive_result\r\n    self.receive_no_progress_result(result, columnar)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 109, in receive_no_progress_result\r\n    packet = self.receive_packet()\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 140, in receive_packet\r\n    packet = self.connection.receive_packet()\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/connection.py\", line 334, in receive_packet\r\n    packet.block = self.receive_data()\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/connection.py\", line 393, in receive_data\r\n    block = self.block_in.read()\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/streams/native.py\", line 80, in read\r\n    self.fin)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/columns/service.py\", line 67, in read_column\r\n    column = get_column_by_spec(column_spec, column_options=column_options)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/columns/service.py\", line 45, in get_column_by_spec\r\n    return create_enum_column(spec, column_options)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/clickhouse_driver/columns/enumcolumn.py\", line 67, in create_enum_column\r\n    return cls(Enum(cls.ch_type, d), **column_options)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/enum/__init__.py\", line 349, in __call__\r\n    return cls._create_(value, names, module=module, type=type, start=start)\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/enum/__init__.py\", line 462, in _create_\r\n    classdict[member_name] = member_value\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/enum/__init__.py\", line 125, in __setitem__\r\n    if _is_sunder(key):\r\n  File \"/Users/name/pyenv/lib/python2.7/site-packages/enum/__init__.py\", line 80, in _is_sunder\r\n    return (name[0] == name[-1] == '_' and\r\nIndexError: string index out of range\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/47", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/47/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/47/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/47", "id": 345100867, "node_id": "MDU6SXNzdWUzNDUxMDA4Njc=", "number": 47, "title": "how to get column names with select", "user": {"login": "exitNA", "id": 5160007, "node_id": "MDQ6VXNlcjUxNjAwMDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5160007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/exitNA", "html_url": "https://github.com/exitNA", "followers_url": "https://api.github.com/users/exitNA/followers", "following_url": "https://api.github.com/users/exitNA/following{/other_user}", "gists_url": "https://api.github.com/users/exitNA/gists{/gist_id}", "starred_url": "https://api.github.com/users/exitNA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/exitNA/subscriptions", "organizations_url": "https://api.github.com/users/exitNA/orgs", "repos_url": "https://api.github.com/users/exitNA/repos", "events_url": "https://api.github.com/users/exitNA/events{/privacy}", "received_events_url": "https://api.github.com/users/exitNA/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-27T06:01:35Z", "updated_at": "2018-08-07T17:40:54Z", "closed_at": "2018-08-07T17:40:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi, for select query, only the values are returned , how to get column names and types info?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/46", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/46/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/46/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/46", "id": 344949803, "node_id": "MDU6SXNzdWUzNDQ5NDk4MDM=", "number": 46, "title": "Request: Client configuration file support", "user": {"login": "b-l-a-c-k-b-e-a-r-d", "id": 29207153, "node_id": "MDQ6VXNlcjI5MjA3MTUz", "avatar_url": "https://avatars1.githubusercontent.com/u/29207153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d", "html_url": "https://github.com/b-l-a-c-k-b-e-a-r-d", "followers_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/followers", "following_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/following{/other_user}", "gists_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/subscriptions", "organizations_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/orgs", "repos_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/repos", "events_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/events{/privacy}", "received_events_url": "https://api.github.com/users/b-l-a-c-k-b-e-a-r-d/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-26T18:09:11Z", "updated_at": "2018-08-07T17:56:40Z", "closed_at": "2018-08-07T17:56:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Request the the driver be able to load settings from a client configuration file similar to the `clickhouse-client`.  e.g.\r\n\r\n`~/.clickhouse-client/config.xml`\r\n```\r\n<config>\r\n    <user>default</user>\r\n    <password>my_password</password>\r\n</config>\r\n```\r\n\r\nThis will remove the need to store credentials in code.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/43", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/43/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/43/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/43", "id": 339590921, "node_id": "MDU6SXNzdWUzMzk1OTA5MjE=", "number": 43, "title": "Extended support of IPv4 and IPv6 column types", "user": {"login": "Matt-Texier", "id": 11010314, "node_id": "MDQ6VXNlcjExMDEwMzE0", "avatar_url": "https://avatars0.githubusercontent.com/u/11010314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matt-Texier", "html_url": "https://github.com/Matt-Texier", "followers_url": "https://api.github.com/users/Matt-Texier/followers", "following_url": "https://api.github.com/users/Matt-Texier/following{/other_user}", "gists_url": "https://api.github.com/users/Matt-Texier/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matt-Texier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matt-Texier/subscriptions", "organizations_url": "https://api.github.com/users/Matt-Texier/orgs", "repos_url": "https://api.github.com/users/Matt-Texier/repos", "events_url": "https://api.github.com/users/Matt-Texier/events{/privacy}", "received_events_url": "https://api.github.com/users/Matt-Texier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-07-09T20:13:45Z", "updated_at": "2019-02-25T08:45:20Z", "closed_at": "2018-09-25T20:44:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am afraid to come with a form of specific request here. I opened this issue last week on Yandex/clickhouse repository: https://github.com/yandex/ClickHouse/issues/2605. It was about issues with support of specific column and types to store IPv4 and IPv6 data.\r\n\r\nI didn't get any sort of positive answer from them... at least short term.\r\n\r\nI was wondering if it could make sense to develop a form of additional types in your code such that column named IPv4_... or IPv6_... benefits from a specific behaviour. the idea would be to apply conversion function in you code and introduce those column as type INET (similar to postGRESQL) : https://www.postgresql.org/docs/9.1/static/datatype-net-types.html.\r\n\r\nBy having this feature, This type could be handled by upper layers like your SQLAlchemy driver and related UI and Frontend.\r\n\r\nDoes it sounds like something doable / acceptable ?\r\n\r\nThanks Matthieu.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/40", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/40/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/40/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/40", "id": 335748041, "node_id": "MDU6SXNzdWUzMzU3NDgwNDE=", "number": 40, "title": "Unknown type Tuple(Float64, Float64)", "user": {"login": "solokirrik", "id": 20256925, "node_id": "MDQ6VXNlcjIwMjU2OTI1", "avatar_url": "https://avatars2.githubusercontent.com/u/20256925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solokirrik", "html_url": "https://github.com/solokirrik", "followers_url": "https://api.github.com/users/solokirrik/followers", "following_url": "https://api.github.com/users/solokirrik/following{/other_user}", "gists_url": "https://api.github.com/users/solokirrik/gists{/gist_id}", "starred_url": "https://api.github.com/users/solokirrik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solokirrik/subscriptions", "organizations_url": "https://api.github.com/users/solokirrik/orgs", "repos_url": "https://api.github.com/users/solokirrik/repos", "events_url": "https://api.github.com/users/solokirrik/events{/privacy}", "received_events_url": "https://api.github.com/users/solokirrik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-26T10:07:11Z", "updated_at": "2020-06-13T22:29:35Z", "closed_at": "2020-06-13T22:29:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can't execute query with column of type Array(Tuple(Float64, Float64)) as result.\r\n\r\n```sql\r\nDROP TABLE IF EXISTS test_polygon;\r\n\r\nCREATE TABLE test_polygon\r\n(\r\n    id Int64,\r\n    polygon Nested(\r\n        lat Float64,\r\n        lon Float64\r\n    )\r\n)\r\nENGINE = Log();\r\n\r\nINSERT INTO test_polygon VALUES\r\n(1111, [0., 8., 7., 0.], [0., 7., 8., 0.]),\r\n(2222, [5., 5., 4., 3., 5.], [10., 12., 11., 10., 10.]);\r\n```\r\n\r\n```sql\r\nSELECT\r\n    id,\r\n    arrayMap((x, y) -> (x, y), polygon.lat, polygon.lon) AS polygon\r\nFROM test_polygon\r\n\r\n\u250c\u2500\u2500\u2500id\u2500\u252c\u2500polygon\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 1111 \u2502 [(0,0),(8,7),(7,8),(0,0)]            \u2502\r\n\u2502 2222 \u2502 [(5,10),(5,12),(4,11),(3,10),(5,10)] \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\r\n2 rows in set. Elapsed: 0.003 sec.\r\n```\r\n\r\n```python\r\nfrom clickhouse_driver import Client \r\n\r\nclient = Client('localhost')\r\nprint(client.execute('SELECT id, arrayMap((x, y)-> tuple(x, y), polygon_lat, polygon_lon) AS polygon FROM test_db.test_polygon'))\r\n```\r\n\r\n```\r\nKeyError                                  Traceback (most recent call last)\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/columns/service.py in get_column_by_spec(spec, column_options)\r\n     57         try:\r\n---> 58             cls = column_by_type[spec]\r\n     59             return cls(**column_options)\r\n\r\nKeyError: 'Tuple(Float64, Float64)'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nUnknownTypeError                          Traceback (most recent call last)\r\n<ipython-input-51-1fc000cc1814> in <module>()\r\n----> 1 print(client.execute('SELECT id, arrayMap((x, y)-> tuple(x, y), polygon_lat, polygon_lon) AS polygon FROM test_db.test_polygon'))\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/client.py in execute(self, query, params, with_column_types, external_tables, query_id, settings, types_check, columnar)\r\n    187                     external_tables=external_tables,\r\n    188                     query_id=query_id, settings=query_settings,\r\n--> 189                     types_check=types_check, columnar=columnar\r\n    190                 )\r\n    191 \r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/client.py in process_ordinary_query(self, query, params, with_column_types, external_tables, query_id, settings, types_check, columnar)\r\n    244                                              types_check=types_check)\r\n    245         return self.receive_result(with_column_types=with_column_types,\r\n--> 246                                    columnar=columnar)\r\n    247 \r\n    248     def process_insert_query(self, query_without_data, data,\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/client.py in receive_result(self, with_column_types, progress, columnar)\r\n     80 \r\n     81         else:\r\n---> 82             self.receive_no_progress_result(result, columnar)\r\n     83             return result.get_result()\r\n     84 \r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/client.py in receive_no_progress_result(self, result, columnar)\r\n    107     def receive_no_progress_result(self, result, columnar=False):\r\n    108         while True:\r\n--> 109             packet = self.receive_packet()\r\n    110             if not packet:\r\n    111                 break\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/client.py in receive_packet(self)\r\n    138 \r\n    139     def receive_packet(self):\r\n--> 140         packet = self.connection.receive_packet()\r\n    141 \r\n    142         if packet.type == ServerPacketTypes.EXCEPTION:\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/connection.py in receive_packet(self)\r\n    332 \r\n    333         if packet_type == ServerPacketTypes.DATA:\r\n--> 334             packet.block = self.receive_data()\r\n    335 \r\n    336         elif packet_type == ServerPacketTypes.EXCEPTION:\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/connection.py in receive_data(self)\r\n    391             read_binary_str(self.fin)\r\n    392 \r\n--> 393         block = self.block_in.read()\r\n    394         self.block_in.reset()\r\n    395         return block\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/streams/native.py in read(self)\r\n     78             if n_rows:\r\n     79                 column = read_column(self.context, column_type, n_rows,\r\n---> 80                                      self.fin)\r\n     81                 data.append(column)\r\n     82 \r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/columns/service.py in read_column(context, column_spec, n_items, buf)\r\n     65 def read_column(context, column_spec, n_items, buf):\r\n     66     column_options = {'context': context}\r\n---> 67     column = get_column_by_spec(column_spec, column_options=column_options)\r\n     68     return column.read_data(n_items, buf)\r\n     69 \r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/columns/service.py in get_column_by_spec(spec, column_options)\r\n     49 \r\n     50     elif spec.startswith('Array'):\r\n---> 51         return create_array_column(spec, create_column_with_options)\r\n     52 \r\n     53     elif spec.startswith('Nullable'):\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/columns/arraycolumn.py in create_array_column(spec, column_by_spec_getter)\r\n    186 def create_array_column(spec, column_by_spec_getter):\r\n    187     inner = spec[6:-1]\r\n--> 188     return ArrayColumn(column_by_spec_getter(inner))\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/columns/service.py in create_column_with_options(x)\r\n     37 \r\n     38     def create_column_with_options(x):\r\n---> 39         return get_column_by_spec(x, column_options)\r\n     40 \r\n     41     if spec.startswith('FixedString'):\r\n\r\n~/.pyenv/versions/jupyter3.6.4/lib/python3.6/site-packages/clickhouse_driver/columns/service.py in get_column_by_spec(spec, column_options)\r\n     60 \r\n     61         except KeyError as e:\r\n---> 62             raise errors.UnknownTypeError('Unknown type {}'.format(e.args[0]))\r\n     63 \r\n     64 \r\n\r\nUnknownTypeError: Code: 50. Unknown type Tuple(Float64, Float64)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/39", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/39/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/39/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/39", "id": 334999349, "node_id": "MDU6SXNzdWUzMzQ5OTkzNDk=", "number": 39, "title": "Meta/Column names from query", "user": {"login": "digitalist", "id": 3270326, "node_id": "MDQ6VXNlcjMyNzAzMjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/3270326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/digitalist", "html_url": "https://github.com/digitalist", "followers_url": "https://api.github.com/users/digitalist/followers", "following_url": "https://api.github.com/users/digitalist/following{/other_user}", "gists_url": "https://api.github.com/users/digitalist/gists{/gist_id}", "starred_url": "https://api.github.com/users/digitalist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/digitalist/subscriptions", "organizations_url": "https://api.github.com/users/digitalist/orgs", "repos_url": "https://api.github.com/users/digitalist/repos", "events_url": "https://api.github.com/users/digitalist/events{/privacy}", "received_events_url": "https://api.github.com/users/digitalist/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-06-22T19:51:49Z", "updated_at": "2018-06-25T08:51:29Z", "closed_at": "2018-06-25T08:51:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Meta/Column names...  how do I get them? \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/38", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/38/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/38/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/38", "id": 328501911, "node_id": "MDU6SXNzdWUzMjg1MDE5MTE=", "number": 38, "title": "Tuple support", "user": {"login": "NetBUG", "id": 1539823, "node_id": "MDQ6VXNlcjE1Mzk4MjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1539823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NetBUG", "html_url": "https://github.com/NetBUG", "followers_url": "https://api.github.com/users/NetBUG/followers", "following_url": "https://api.github.com/users/NetBUG/following{/other_user}", "gists_url": "https://api.github.com/users/NetBUG/gists{/gist_id}", "starred_url": "https://api.github.com/users/NetBUG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NetBUG/subscriptions", "organizations_url": "https://api.github.com/users/NetBUG/orgs", "repos_url": "https://api.github.com/users/NetBUG/repos", "events_url": "https://api.github.com/users/NetBUG/events{/privacy}", "received_events_url": "https://api.github.com/users/NetBUG/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-06-01T12:31:03Z", "updated_at": "2020-06-13T22:29:10Z", "closed_at": "2020-06-13T22:29:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't return unique combinations of two columns (e.g. `src` and `dst`). \r\nExecuting a query with `SELECT DISTINCT(field1, field2)` causes the following error when returning data from Clickhouse:\r\n\r\n```SELECT DISTINCT (src, dst) as key FROM samples WHERE timestamp > now() - 9600;\r\nTraceback (most recent call last):\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/columns/service.py\", line 56, in get_column_by_spec\r\ncls = column_by_type[spec]\r\nKeyError: 'Tuple(String, String)'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\nFile \"./cronapp.py\", line 71, in\r\nrun(period=period)\r\nFile \"./cronapp.py\", line 52, in run\r\ndata = get_conn_list(period=period)\r\nFile \"./cronapp.py\", line 21, in get_conn_list\r\nreturn client.execute(query)\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 176, in execute\r\ntypes_check=types_check, columnar=columnar\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 227, in process_ordinary_query\r\ncolumnar=columnar)\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 75, in receive_result\r\nself.receive_no_progress_result(result, columnar)\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 102, in receive_no_progress_result\r\npacket = self.receive_packet()\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 133, in receive_packet\r\npacket = self.connection.receive_packet()\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 331, in receive_packet\r\npacket.block = self.receive_data()\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 394, in receive_data\r\nblock = self.block_in.read()\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/streams/native.py\", line 77, in read\r\ncolumn = read_column(column_type, n_rows, self.fin)\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/columns/service.py\", line 64, in read_column\r\ncolumn = get_column_by_spec(column_spec)\r\nFile \"/home/netbug/.local/lib/python3.6/site-packages/clickhouse_driver/columns/service.py\", line 60, in get_column_by_spec\r\nraise errors.UnknownTypeError('Unknown type {}'.format(e.args[0]))\r\nclickhouse_driver.errors.UnknownTypeError: Code: 50. Unknown type Tuple(String, String)```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/37", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/37/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/37/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/37", "id": 321360784, "node_id": "MDU6SXNzdWUzMjEzNjA3ODQ=", "number": 37, "title": "Memory Overflow", "user": {"login": "brunoalano", "id": 810642, "node_id": "MDQ6VXNlcjgxMDY0Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/810642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brunoalano", "html_url": "https://github.com/brunoalano", "followers_url": "https://api.github.com/users/brunoalano/followers", "following_url": "https://api.github.com/users/brunoalano/following{/other_user}", "gists_url": "https://api.github.com/users/brunoalano/gists{/gist_id}", "starred_url": "https://api.github.com/users/brunoalano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brunoalano/subscriptions", "organizations_url": "https://api.github.com/users/brunoalano/orgs", "repos_url": "https://api.github.com/users/brunoalano/repos", "events_url": "https://api.github.com/users/brunoalano/events{/privacy}", "received_events_url": "https://api.github.com/users/brunoalano/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-05-08T21:55:58Z", "updated_at": "2019-02-21T07:53:16Z", "closed_at": "2018-05-14T15:00:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running Clickhouse on production, using the `asyncio` wrapper. But sometimes I get a issue when inserting into database.\r\n\r\n```\r\nJob processing failed\r\njob: <Job coro=<<coroutine object user_events_producer at 0x7f39382c1fc0>>>\r\nTraceback (most recent call last):\r\n  File \"./app.py\", line 189, in user_events_producer\r\n    [e.data for e in events_queue]\r\n  File \"/usr/local/lib/python3.6/site-packages/aioch/client.py\", line 92, in execute\r\n    **kwargs)\r\n  File \"/usr/local/lib/python3.6/concurrent/futures/thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 159, in execute\r\n    self.connection.force_connect()\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 124, in force_connect\r\n    elif not self.ping():\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/connection.py\", line 303, in ping\r\n    packet_type = read_varint(self.fin)\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/reader.py\", line 29, in read_varint\r\n    i = _read_one(f)\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/reader.py\", line 14, in _read_one\r\n    c = f.read(1)\r\ninfo ValueError: PyMemoryView_FromBuffer(): info->buf must not be NULL\r\nJob processing failed\r\njob: <Job coro=<<coroutine object user_events_producer at 0x7f3939175308>>>\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 169, in execute\r\n    types_check=types_check\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 237, in process_insert_query\r\n    sample_block = self.receive_sample_block()\r\n  File \"/usr/local/lib/python3.6/site-packages/clickhouse_driver/client.py\", line 251, in receive_sample_block\r\n    raise packet.exception\r\nclickhouse_driver.errors.ServerException: Code: 101.\r\nDB::NetException. DB::NetException: Unexpected packet Query received from client. Stack trace:\r\ningestion-server\r\n0. /usr/bin/clickhouse-server(StackTrace::StackTrace()+0x15) [0x84eb065]\r\n1. /usr/bin/clickhouse-server(DB::Exception::Exception(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)+0x21) [0x2ccbe01]\r\n2. /usr/bin/clickhouse-server(DB::TCPHandler::receivePacket()+0x22e) [0x2cdb7de]\r\n3. /usr/bin/clickhouse-server(DB::TCPHandler::readData(DB::Settings const&)+0x1c2) [0x2cdbb42]\r\n4. /usr/bin/clickhouse-server(DB::TCPHandler::processInsertQuery(DB::Settings const&)+0x205) [0x2cdbee5]\r\n5. /usr/bin/clickhouse-server(DB::TCPHandler::runImpl()+0x476) [0x2cdc566]\r\n6. /usr/bin/clickhouse-server(DB::TCPHandler::run()+0x2a) [0x2cdd3ba]\r\n7. /usr/bin/clickhouse-server(Poco::Net::TCPServerConnection::start()+0xe) [0x86d53de]\r\n8. /usr/bin/clickhouse-server(Poco::Net::TCPServerDispatcher::run()+0x169) [0x86d57b9]\r\n9. /usr/bin/clickhouse-server(Poco::PooledThread::run()+0x76) [0x8776976]\r\n10. /usr/bin/clickhouse-server(Poco::ThreadImpl::runnableEntry(void*)+0x37) [0x8772b87]\r\n11. /usr/bin/clickhouse-server() [0x8dd397e]\r\n12. /lib/x86_64-linux-gnu/libpthread.so.0(+0x76da) [0x7f650da8d6da]\r\n13. /lib/x86_64-linux-gnu/libc.so.6(clone+0x3e) [0x7f650d21488e]\r\ningestion-server\r\n```\r\n\r\nI don't know if the issue is the server or the client.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/36", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/36/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/36/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/36", "id": 315429621, "node_id": "MDU6SXNzdWUzMTU0Mjk2MjE=", "number": 36, "title": "Iterator support", "user": {"login": "bertop89", "id": 3531137, "node_id": "MDQ6VXNlcjM1MzExMzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3531137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertop89", "html_url": "https://github.com/bertop89", "followers_url": "https://api.github.com/users/bertop89/followers", "following_url": "https://api.github.com/users/bertop89/following{/other_user}", "gists_url": "https://api.github.com/users/bertop89/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertop89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertop89/subscriptions", "organizations_url": "https://api.github.com/users/bertop89/orgs", "repos_url": "https://api.github.com/users/bertop89/repos", "events_url": "https://api.github.com/users/bertop89/events{/privacy}", "received_events_url": "https://api.github.com/users/bertop89/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-04-18T10:52:20Z", "updated_at": "2018-08-26T20:29:23Z", "closed_at": "2018-08-26T20:29:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there any way that the return of a SELECT query would be a row iterator instead of loading the whole query result into memory. Thank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/35", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/35/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/35/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/35", "id": 312375034, "node_id": "MDU6SXNzdWUzMTIzNzUwMzQ=", "number": 35, "title": "execute wait long time", "user": {"login": "liyongcun", "id": 3389900, "node_id": "MDQ6VXNlcjMzODk5MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3389900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyongcun", "html_url": "https://github.com/liyongcun", "followers_url": "https://api.github.com/users/liyongcun/followers", "following_url": "https://api.github.com/users/liyongcun/following{/other_user}", "gists_url": "https://api.github.com/users/liyongcun/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyongcun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyongcun/subscriptions", "organizations_url": "https://api.github.com/users/liyongcun/orgs", "repos_url": "https://api.github.com/users/liyongcun/repos", "events_url": "https://api.github.com/users/liyongcun/events{/privacy}", "received_events_url": "https://api.github.com/users/liyongcun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-09T02:52:58Z", "updated_at": "2018-05-24T20:49:49Z", "closed_at": "2018-05-24T20:49:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[root@lyc tmp]# python\r\nPython 2.6.6 (r266:84292, Aug 18 2016, 15:13:37) \r\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-17)] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from clickhouse_driver import Client\r\n>>> client = Client('192.168.133.2',18123,'client_report','admin','************',insert_block_size=1)\r\n>>> client.execute('SHOW TABLES')\r\n^CTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python2.6/site-packages/clickhouse_driver/client.py\", line 159, in execute\r\n    self.connection.force_connect()\r\n  File \"/usr/lib/python2.6/site-packages/clickhouse_driver/connection.py\", line 122, in force_connect\r\n    self.connect()\r\n  File \"/usr/lib/python2.6/site-packages/clickhouse_driver/connection.py\", line 188, in connect\r\n    self.receive_hello()\r\n  File \"/usr/lib/python2.6/site-packages/clickhouse_driver/connection.py\", line 263, in receive_hello\r\n    packet_type = read_varint(self.fin)\r\n  File \"/usr/lib/python2.6/site-packages/clickhouse_driver/reader.py\", line 29, in read_varint\r\n    i = _read_one(f)\r\n  File \"/usr/lib/python2.6/site-packages/clickhouse_driver/reader.py\", line 14, in _read_one\r\n    c = f.read(1)\r\n  File \"/usr/lib64/python2.6/socket.py\", line 383, in read\r\n    data = self._sock.recv(left)\r\nKeyboardInterrupt\r\n>>> ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/34", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/34/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/34/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/34", "id": 309599809, "node_id": "MDU6SXNzdWUzMDk1OTk4MDk=", "number": 34, "title": "enhancement - ability to omit values when using JSONEachRow", "user": {"login": "k4otix", "id": 10135730, "node_id": "MDQ6VXNlcjEwMTM1NzMw", "avatar_url": "https://avatars0.githubusercontent.com/u/10135730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k4otix", "html_url": "https://github.com/k4otix", "followers_url": "https://api.github.com/users/k4otix/followers", "following_url": "https://api.github.com/users/k4otix/following{/other_user}", "gists_url": "https://api.github.com/users/k4otix/gists{/gist_id}", "starred_url": "https://api.github.com/users/k4otix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k4otix/subscriptions", "organizations_url": "https://api.github.com/users/k4otix/orgs", "repos_url": "https://api.github.com/users/k4otix/repos", "events_url": "https://api.github.com/users/k4otix/events{/privacy}", "received_events_url": "https://api.github.com/users/k4otix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-29T02:50:11Z", "updated_at": "2018-06-24T12:05:34Z", "closed_at": "2018-06-24T12:05:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "clickhouse-driver==0.0.10\r\nClickHouse server version 1.1.54362\r\n\r\nClickhouse JSONEachRow format supports omitting values when inserting records; it would be great if clickhouse-driver would also support this behavior - http://clickhouse-docs.readthedocs.io/en/latest/formats/jsoneachrow.html\r\n\r\n>  It is also possible to omit values in which case the default value of the column is inserted.\r\n\r\nHowever, clickhouse-driver instead throws an exception:\r\n\r\n```python\r\nrecord = {'x': 1}\r\nclient.execute('DROP TABLE IF EXISTS test')\r\nclient.execute('CREATE TABLE test (x Int32, y Int32) ENGINE=Memory')\r\nclient.execute('INSERT INTO test FORMAT JSONEachRow', [record])\r\nprint(client.execute('SELECT * FROM test'))\r\n```\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 89, in <module>\r\n    client.execute('INSERT INTO test FORMAT JSONEachRow', [record])\r\n  File \"/anaconda3/envs/myenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 169, in execute\r\n    types_check=types_check\r\n  File \"/anaconda3/envs/myenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 239, in process_insert_query\r\n    self.send_data(sample_block, data, types_check=types_check)\r\n  File \"/anaconda3/envs/myenv/lib/python2.7/site-packages/clickhouse_driver/client.py\", line 261, in send_data\r\n    types_check=types_check)\r\n  File \"/anaconda3/envs/myenv/lib/python2.7/site-packages/clickhouse_driver/block.py\", line 51, in __init__\r\n    self.dicts_to_rows(data)\r\n  File \"/anaconda3/envs/myenv/lib/python2.7/site-packages/clickhouse_driver/block.py\", line 70, in dicts_to_rows\r\n    self.data[i] = [row[name] for name in column_names]\r\nKeyError: u'y'\r\n```\r\n\r\nWorking example using **clickhouse-client**:\r\n```\r\n$ clickhouse-client -n --query='DROP TABLE IF EXISTS test; CREATE TABLE test (x Int32, y Int32) ENGINE=Memory; INSERT INTO test FORMAT JSONEachRow' <<< '{\"x\": 1}'\r\n$ clickhouse-client -E --query='SELECT * FROM test'\r\nRow 1:\r\n\u2500\u2500\u2500\u2500\u2500\u2500\r\nx: 1\r\ny: 0\r\n```\r\nI was able to get past the `KeyError` in the Traceback above by changing https://github.com/mymarilyn/clickhouse-driver/blob/56395db5a933ee54d9ae8cdebd021f94870899a6/src/block.py#L70 to:\r\n```python\r\nself.data[i] = [row[name] for name in column_names if name in row]\r\n```\r\nI get to the point of sending the data to the server but get the following error, which I unfortunately don't have the time to dig into right now to come up with a possible PR/solution:\r\n```\r\n  File \"/anaconda3/envs/myenv/lib/python2.7/site-packages/clickhouse_driver/streams/native.py\", line 37, in write\r\n    raise ValueError('Different rows length')\r\nValueError: Different rows length\r\n```\r\nThis would be a great feature so that JSON objects don't always have to be fully specified in the client code!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/33", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/33/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/33/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/33", "id": 309549282, "node_id": "MDU6SXNzdWUzMDk1NDkyODI=", "number": 33, "title": "input_format_skip_unknown_fields setting seems to have no effect", "user": {"login": "k4otix", "id": 10135730, "node_id": "MDQ6VXNlcjEwMTM1NzMw", "avatar_url": "https://avatars0.githubusercontent.com/u/10135730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k4otix", "html_url": "https://github.com/k4otix", "followers_url": "https://api.github.com/users/k4otix/followers", "following_url": "https://api.github.com/users/k4otix/following{/other_user}", "gists_url": "https://api.github.com/users/k4otix/gists{/gist_id}", "starred_url": "https://api.github.com/users/k4otix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k4otix/subscriptions", "organizations_url": "https://api.github.com/users/k4otix/orgs", "repos_url": "https://api.github.com/users/k4otix/repos", "events_url": "https://api.github.com/users/k4otix/events{/privacy}", "received_events_url": "https://api.github.com/users/k4otix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-28T22:06:02Z", "updated_at": "2018-06-24T12:07:12Z", "closed_at": "2018-06-24T12:07:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to the Clickhouse documentation, an exception should be raised if `input_format_skip_unknown_fields` is set to false\r\n\r\nhttps://clickhouse.yandex/docs/en/operations/settings/settings/#input_format_skip_unknown_fields\r\n\r\nI can reproduce this behavior as expected with clickhouse-client, but clickhouse-driver seems to ignore this setting. In the example below, \"z\" is not part of the schema.\r\n\r\nclickhouse-driver==0.0.10\r\nClickHouse server version 1.1.54362\r\n\r\n```python\r\nfor skip in (True, False):\r\n    print('Skip Unknown:', skip)\r\n    record = {'x': 1, 'y': 2, 'z': 3}\r\n    client.execute('DROP TABLE IF EXISTS test')\r\n    client.execute('CREATE TABLE test (x Int32, y Int32) ENGINE=Memory')\r\n    client.execute('INSERT INTO test FORMAT JSONEachRow', [record], settings={'input_format_skip_unknown_fields': skip})\r\n    print(client.execute('SELECT * FROM test'))\r\n```\r\n**output:** (no exception rasied in either case)\r\n```\r\n('Skip Unknown:', True)\r\n[(1, 2)]\r\n('Skip Unknown:', False)\r\n[(1, 2)]\r\n```\r\n\r\n**clickhouse-client** - skip unknown fields\r\n```\r\n$ clickhouse-client -n --query='DROP TABLE IF EXISTS test; CREATE TABLE test (x Int32, y Int32) ENGINE=Memory; set input_format_skip_unknown_fields=1; INSERT INTO test FORMAT JSONEachRow' <<< '{\"x\": 1, \"y\": 2, \"z\": 3}'\r\n$ clickhouse-client -E --query='SELECT * FROM test'\r\nRow 1:\r\n\u2500\u2500\u2500\u2500\u2500\u2500\r\nx: 1\r\ny: 2\r\n```\r\n**clickhouse-client** - don't skip unknown fields\r\n```\r\n$ clickhouse-client -n --query='DROP TABLE IF EXISTS test; CREATE TABLE test (x Int32, y Int32) ENGINE=Memory; set input_format_skip_unknown_fields=0; INSERT INTO test FORMAT JSONEachRow' <<< '{\"x\": 1, \"y\": 2, \"z\": 3}'\r\nError on processing query: INSERT INTO test FORMAT JSONEachRow\r\nCode: 117, e.displayText() = DB::Exception: Unknown field found while parsing JSONEachRow format: z, e.what() = DB::Exception, Stack trace:\r\n\r\n0. clickhouse-client(StackTrace::StackTrace()+0x16) [0x4d32516]\r\n1. clickhouse-client(DB::Exception::Exception(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)+0x1f) [0x26ae89f]\r\n2. clickhouse-client(DB::JSONEachRowRowInputStream::read(std::vector<COWPtr<DB::IColumn>::mutable_ptr<DB::IColumn>, std::allocator<COWPtr<DB::IColumn>::mutable_ptr<DB::IColumn> > >&)+0x1401) [0x4a16ee1]\r\n3. clickhouse-client(DB::BlockInputStreamFromRowInputStream::readImpl()+0x88) [0x4c37388]\r\n4. clickhouse-client(DB::IProfilingBlockInputStream::read()+0x237) [0x408f377]\r\n5. clickhouse-client(DB::AsynchronousBlockInputStream::calculate(MemoryTracker*)+0x47) [0x26c1327]\r\n6. clickhouse-client(ThreadPool::worker()+0x167) [0x4facd67]\r\n7. clickhouse-client() [0x53f6f1f]\r\n8. /lib64/libpthread.so.0(+0x7e25) [0x7f35d8f0fe25]\r\n9. /lib64/libc.so.6(clone+0x6d) [0x7f35d82c534d]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/32", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/32/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/32/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/32", "id": 306846302, "node_id": "MDU6SXNzdWUzMDY4NDYzMDI=", "number": 32, "title": "Extremely slow on large select, http protocol almost 10 times faster", "user": {"login": "dmitriyshashkin", "id": 11873939, "node_id": "MDQ6VXNlcjExODczOTM5", "avatar_url": "https://avatars1.githubusercontent.com/u/11873939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitriyshashkin", "html_url": "https://github.com/dmitriyshashkin", "followers_url": "https://api.github.com/users/dmitriyshashkin/followers", "following_url": "https://api.github.com/users/dmitriyshashkin/following{/other_user}", "gists_url": "https://api.github.com/users/dmitriyshashkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitriyshashkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitriyshashkin/subscriptions", "organizations_url": "https://api.github.com/users/dmitriyshashkin/orgs", "repos_url": "https://api.github.com/users/dmitriyshashkin/repos", "events_url": "https://api.github.com/users/dmitriyshashkin/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitriyshashkin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-03-20T12:34:35Z", "updated_at": "2020-05-10T14:48:35Z", "closed_at": "2020-05-10T14:48:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that selecting large datasets using the native client is extremely slow. Here is my benchmark https://gist.github.com/dmitriyshashkin/6a4849bdcf882ba340cdfbc1990da401\r\n\r\nInitially, I've encountered this behavior on my own dataset, but I was able to reproduce it using the dataset and the structure described here https://clickhouse.yandex/docs/en/getting_started/example_datasets/ontime/\r\n\r\nTo simplify things a little bit I've used the data for just one month:  http://transtats.bts.gov/PREZIP/On_Time_On_Time_Performance_2017_12.zip\r\n\r\nAs you can see the fastest way to get the data is by using HTTP protocol with requests and pandas. The problem gets worse as the number of the rows grows, on my own dataset with 5M rows I waited for 1 hour before I had to interrupt the process. The bottleneck is not CH itself, the \"top\" command shows that all the work is done by python with 100% CPU utilization, while CH is almost idle.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/31", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/31/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/31/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/31", "id": 305054712, "node_id": "MDU6SXNzdWUzMDUwNTQ3MTI=", "number": 31, "title": "When using domain instead of IP address, the DNS resolve don't change.", "user": {"login": "jackpgao", "id": 3423412, "node_id": "MDQ6VXNlcjM0MjM0MTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3423412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackpgao", "html_url": "https://github.com/jackpgao", "followers_url": "https://api.github.com/users/jackpgao/followers", "following_url": "https://api.github.com/users/jackpgao/following{/other_user}", "gists_url": "https://api.github.com/users/jackpgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackpgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackpgao/subscriptions", "organizations_url": "https://api.github.com/users/jackpgao/orgs", "repos_url": "https://api.github.com/users/jackpgao/repos", "events_url": "https://api.github.com/users/jackpgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jackpgao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-14T07:53:19Z", "updated_at": "2018-04-08T02:11:39Z", "closed_at": "2018-04-08T02:11:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use domain instead of IP address, in order to do load balance and failover.\r\n\r\nBut when I change the domain mapping, the script still continuing connect to the origin IP address. \r\n\r\nFor example, I use domain 'xxx.test.com' which mapping ip1, and ip2, and start the script, the data will write into ip1 and ip2 round-robin.\r\n\r\n\r\nAfter the mapping of domain to ip2 and ip3, that means replace ip1 with ip3, the script still continues to  write to ip1. \r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/29", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/29/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/29/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/29", "id": 302070357, "node_id": "MDU6SXNzdWUzMDIwNzAzNTc=", "number": 29, "title": "Dates are lower by 1", "user": {"login": "Thordin", "id": 5335295, "node_id": "MDQ6VXNlcjUzMzUyOTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/5335295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thordin", "html_url": "https://github.com/Thordin", "followers_url": "https://api.github.com/users/Thordin/followers", "following_url": "https://api.github.com/users/Thordin/following{/other_user}", "gists_url": "https://api.github.com/users/Thordin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thordin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thordin/subscriptions", "organizations_url": "https://api.github.com/users/Thordin/orgs", "repos_url": "https://api.github.com/users/Thordin/repos", "events_url": "https://api.github.com/users/Thordin/events{/privacy}", "received_events_url": "https://api.github.com/users/Thordin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-04T09:19:53Z", "updated_at": "2018-03-15T03:17:20Z", "closed_at": "2018-03-15T03:17:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "date.fromtimestamp is supposed to take a local timestamp not a UTC one. I am in a timezone that is behind UTC, so all dates are 1 day behind.\r\n\r\n```\r\n>>> datetime.date.fromtimestamp(0)\r\ndatetime.date(1969, 12, 31)\r\n```\r\n\r\nTo fix this you need to use datetime.datetime.utcfromtimestamp().date() instead.\r\n\r\nhttps://github.com/mymarilyn/clickhouse-driver/blob/a3a26513d9533f389674c34c19ed7f8dd94b5289/src/columns/datecolumn.py#L18\r\n\r\n`return datetime.datetime.utcfromtimestamp(value * self.offset).date()`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/25", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/25/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/25/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/25", "id": 296698796, "node_id": "MDU6SXNzdWUyOTY2OTg3OTY=", "number": 25, "title": "Better support for writing bytes", "user": {"login": "lidalei", "id": 7344016, "node_id": "MDQ6VXNlcjczNDQwMTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7344016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lidalei", "html_url": "https://github.com/lidalei", "followers_url": "https://api.github.com/users/lidalei/followers", "following_url": "https://api.github.com/users/lidalei/following{/other_user}", "gists_url": "https://api.github.com/users/lidalei/gists{/gist_id}", "starred_url": "https://api.github.com/users/lidalei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lidalei/subscriptions", "organizations_url": "https://api.github.com/users/lidalei/orgs", "repos_url": "https://api.github.com/users/lidalei/repos", "events_url": "https://api.github.com/users/lidalei/events{/privacy}", "received_events_url": "https://api.github.com/users/lidalei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-13T11:09:31Z", "updated_at": "2018-06-04T08:42:02Z", "closed_at": "2018-06-04T08:42:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When writing a FixedString column, the data is first encoded using utf-8 to bytes in Python. This could cause a problem when the string cannot be encoded using utf-8. For instance, cipher text bytes generated by hmac sha256. I would suggest add type checking before encoding in https://github.com/mymarilyn/clickhouse-driver/blob/master/src/writer.py#L18 and https://github.com/mymarilyn/clickhouse-driver/blob/master/src/writer.py#L24. If the text is already bytes, just don't encode it. For example, `import hmac; hmac.new(b\"done\", msg=b\"yes\", digestmod=\"sha256\").digest().decode('utf-8')` will throw an exception `'utf-8' codec can't decode byte 0xcb in position 3`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/24", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/24/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/24/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/24", "id": 294144586, "node_id": "MDU6SXNzdWUyOTQxNDQ1ODY=", "number": 24, "title": "TooLargeStringSize: Code: 131.", "user": {"login": "inkrement", "id": 604528, "node_id": "MDQ6VXNlcjYwNDUyOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/604528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inkrement", "html_url": "https://github.com/inkrement", "followers_url": "https://api.github.com/users/inkrement/followers", "following_url": "https://api.github.com/users/inkrement/following{/other_user}", "gists_url": "https://api.github.com/users/inkrement/gists{/gist_id}", "starred_url": "https://api.github.com/users/inkrement/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inkrement/subscriptions", "organizations_url": "https://api.github.com/users/inkrement/orgs", "repos_url": "https://api.github.com/users/inkrement/repos", "events_url": "https://api.github.com/users/inkrement/events{/privacy}", "received_events_url": "https://api.github.com/users/inkrement/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-03T20:58:59Z", "updated_at": "2018-02-05T15:53:19Z", "closed_at": "2018-02-05T15:53:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I often get the error `TooLargeStringSize: Code: 131.` on inserting data into a table. How I can prevent it? I already tried to insert really small batches.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/23", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/23/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/23/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/23", "id": 292113372, "node_id": "MDU6SXNzdWUyOTIxMTMzNzI=", "number": 23, "title": "Insert Buffer?", "user": {"login": "inkrement", "id": 604528, "node_id": "MDQ6VXNlcjYwNDUyOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/604528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inkrement", "html_url": "https://github.com/inkrement", "followers_url": "https://api.github.com/users/inkrement/followers", "following_url": "https://api.github.com/users/inkrement/following{/other_user}", "gists_url": "https://api.github.com/users/inkrement/gists{/gist_id}", "starred_url": "https://api.github.com/users/inkrement/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inkrement/subscriptions", "organizations_url": "https://api.github.com/users/inkrement/orgs", "repos_url": "https://api.github.com/users/inkrement/repos", "events_url": "https://api.github.com/users/inkrement/events{/privacy}", "received_events_url": "https://api.github.com/users/inkrement/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-27T11:27:59Z", "updated_at": "2018-01-29T09:27:03Z", "closed_at": "2018-01-29T09:27:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "The documentation recommends to insert chunks of at least 1000 items at once. Is there an easy way to add some sort of buffer to gather inserts and thus enhance to performance? Of course, one could use a simple list and append to it/insert if it reaches a specific size, but things get more complicated when someone uses multiprocessing etc.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/21", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/21/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/21/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/21", "id": 289960097, "node_id": "MDU6SXNzdWUyODk5NjAwOTc=", "number": 21, "title": "Nothing type", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-01-19T12:27:32Z", "updated_at": "2018-03-16T11:03:01Z", "closed_at": "2018-03-16T11:03:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Recent clickhouse has a new type `Nothing` which is currently unhandled by clickhouse-driver.\r\n\r\nhttps://github.com/yandex/ClickHouse/blob/630d731ee35b55cfe2f3debfe92c1c21bbe3f50b/dbms/tests/queries/0_stateless/00420_null_in_scalar_subqueries.sql\r\n\r\nSelecting `Null` raises:\r\n\r\n```\r\n/tmp/workspace/miniconda/envs/ibis_2.7/lib/python2.7/site-packages/clickhouse_driver/columns/nullablecolumn.py:5: in create_nullable_column\r\n    nested = column_by_spec_getter(inner)\r\n/tmp/workspace/miniconda/envs/ibis_2.7/lib/python2.7/site-packages/clickhouse_driver/columns/service.py:30: in create_column_with_options\r\n    return get_column_by_spec(x, column_options)\r\n/tmp/workspace/miniconda/envs/ibis_2.7/lib/python2.7/site-packages/clickhouse_driver/columns/service.py:51: in get_column_by_spec\r\n    raise errors.UnknownTypeError('Unknown type {}'.format(e.args[0]))\r\nE   UnknownTypeError: Code: 50. Unknown type Nothing\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/20", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/20/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/20/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/20", "id": 289940473, "node_id": "MDU6SXNzdWUyODk5NDA0NzM=", "number": 20, "title": "Wrong DateTime insert", "user": {"login": "v-v-vishnevskiy", "id": 2003933, "node_id": "MDQ6VXNlcjIwMDM5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2003933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/v-v-vishnevskiy", "html_url": "https://github.com/v-v-vishnevskiy", "followers_url": "https://api.github.com/users/v-v-vishnevskiy/followers", "following_url": "https://api.github.com/users/v-v-vishnevskiy/following{/other_user}", "gists_url": "https://api.github.com/users/v-v-vishnevskiy/gists{/gist_id}", "starred_url": "https://api.github.com/users/v-v-vishnevskiy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/v-v-vishnevskiy/subscriptions", "organizations_url": "https://api.github.com/users/v-v-vishnevskiy/orgs", "repos_url": "https://api.github.com/users/v-v-vishnevskiy/repos", "events_url": "https://api.github.com/users/v-v-vishnevskiy/events{/privacy}", "received_events_url": "https://api.github.com/users/v-v-vishnevskiy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2018-01-19T11:09:55Z", "updated_at": "2018-06-04T08:38:32Z", "closed_at": "2018-06-04T08:38:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nAfter insert datetime.datetime(2018, 1, 19, 10) through this driver I see '2018-01-19 13:00:00' value in table.\r\nTimezone on my computer and clickhouse server is Moskow.\r\n\r\nWhat I must do to see '2018-01-19 10:00:00' after insert?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/19", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/19/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/19/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/19", "id": 289209138, "node_id": "MDU6SXNzdWUyODkyMDkxMzg=", "number": 19, "title": "Nested datatype", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-01-17T10:12:36Z", "updated_at": "2018-09-04T09:21:44Z", "closed_at": "2018-09-04T09:21:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Would it be possible to support https://clickhouse.yandex/docs/en/data_types/nested_data_structures/nested.html ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/18", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/18/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/18/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/18", "id": 288807652, "node_id": "MDU6SXNzdWUyODg4MDc2NTI=", "number": 18, "title": "Multithreaded client", "user": {"login": "kdubovikov", "id": 832185, "node_id": "MDQ6VXNlcjgzMjE4NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/832185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdubovikov", "html_url": "https://github.com/kdubovikov", "followers_url": "https://api.github.com/users/kdubovikov/followers", "following_url": "https://api.github.com/users/kdubovikov/following{/other_user}", "gists_url": "https://api.github.com/users/kdubovikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdubovikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdubovikov/subscriptions", "organizations_url": "https://api.github.com/users/kdubovikov/orgs", "repos_url": "https://api.github.com/users/kdubovikov/repos", "events_url": "https://api.github.com/users/kdubovikov/events{/privacy}", "received_events_url": "https://api.github.com/users/kdubovikov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-16T07:18:27Z", "updated_at": "2018-01-22T07:35:40Z", "closed_at": "2018-01-22T07:35:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've had some issues with using `clickhouse_driver` in a multithreaded asyncio environment. The connection seems not to be thread safe. I'm not sure that is the best approach to solve the issues I've encountered, but here is a pooled connection implementation I am using:\r\n```\r\nimport multiprocessing\r\nimport asyncio\r\nimport logging\r\nfrom functools import partial\r\nfrom concurrent.futures import ThreadPoolExecutor\r\n\r\nfrom clickhouse_driver import Client\r\nimport threading\r\n\r\nclass ThreadSafeClient:\r\n    def __init__(self, host, compression):\r\n        self._host = host\r\n        self._compression = compression\r\n        self._loop = asyncio.get_event_loop()\r\n        self._pool = {}\r\n\r\n    async def get_conn(self):\r\n        tid = threading.get_ident()\r\n        logging.info(f\"{tid} - get connection\")\r\n\r\n        if tid not in self._pool:\r\n            self._pool[tid] = Client(self._host, compression=self._compression, client_name=f\"mlcoin-api-{tid}\")\r\n            logging.info(f\"{tid} - new connection created\")\r\n\r\n        return self._pool[tid]\r\n\r\n    async def execute(self, statement, values=None, types_check=True):\r\n        def execute_in_pool(statement, values, types_check):\r\n            tid = threading.get_ident()\r\n\r\n            if tid not in self._pool:\r\n                self._pool[tid] = Client(self._host, compression=self._compression, client_name=f\"mlcoin-api-{tid}\")\r\n                logging.info(f\"{tid} - new connection created\")\r\n\r\n            conn = self._pool[tid]\r\n            return conn.execute(statement, values, types_check=types_check)\r\n\r\n        execute_stmt = partial(execute_in_pool, types_check=True)\r\n        result = await self._loop.run_in_executor(\r\n            None,\r\n            execute_stmt,\r\n            statement,\r\n            values)\r\n\r\n        return result\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/15", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/15/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/15/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/15", "id": 286593603, "node_id": "MDU6SXNzdWUyODY1OTM2MDM=", "number": 15, "title": "Support Interval Types", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-07T19:44:33Z", "updated_at": "2018-06-01T11:41:55Z", "closed_at": "2018-01-11T11:13:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Recent Clickhouse [supports](https://github.com/yandex/ClickHouse/search?l=SQL&q=interval&type=&utf8=%E2%9C%93) intervals / timedeltas but they have special types.\r\n\r\nQuery:\r\n\r\n```sql\r\nSELECT INTERVAL `int_col` DAY AS `tmp`\r\nFROM ibis_testing.`functional_alltypes`\r\nLIMIT 10000\r\n```\r\n\r\nTraceback:\r\n\r\n```bash    return self.con.execute(query, columnar=True, with_column_types=True)                                                                                                                                                            [2/45772]\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/client.py:176: in execute\r\n    types_check=types_check, columnar=columnar\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/client.py:227: in process_ordinary_query\r\n    columnar=columnar)\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/client.py:75: in receive_result\r\n    self.receive_no_progress_result(result, columnar)\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/client.py:102: in receive_no_progress_result\r\n    packet = self.receive_packet()\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/client.py:133: in receive_packet\r\n    packet = self.connection.receive_packet()\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/connection.py:323: in receive_packet\r\n    packet.block = self.receive_data()\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/connection.py:386: in receive_data\r\n    block = self.block_in.read()\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/streams/native.py:77: in read\r\n    column = read_column(column_type, n_rows, self.fin)\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/columns/service.py:55: in read_column\r\n    column = get_column_by_spec(column_spec)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nspec = 'IntervalDay', column_options = {}\r\n\r\n    def get_column_by_spec(spec, column_options=None):\r\n        column_options = column_options or {}\r\n\r\n        def create_column_with_options(x):\r\n            return get_column_by_spec(x, column_options)\r\n\r\n        if spec.startswith('FixedString'):\r\n            length = int(spec[12:-1])\r\n            return FixedString(length)\r\n\r\n        elif spec.startswith('Enum'):\r\n            return create_enum_column(spec)\r\n\r\n        elif spec.startswith('Array'):\r\n            return create_array_column(spec, create_column_with_options)\r\n\r\n        elif spec.startswith('Nullable'):\r\n            return create_nullable_column(spec, create_column_with_options)\r\n\r\n        else:\r\n            try:\r\n                cls = column_by_type[spec]\r\n                return cls(**column_options)\r\n\r\n            except KeyError as e:\r\n>               raise errors.UnknownTypeError('Unknown type {}'.format(e.args[0]))\r\nE               clickhouse_driver.errors.UnknownTypeError: Code: 50. Unknown type IntervalDay\r\n\r\n../../.pyenv/versions/miniconda3-latest/envs/ml3/lib/python3.6/site-packages/clickhouse_driver/columns/service.py:51: UnknownTypeError\r\n------------------------------------------------- Captured log call --------------------------------------------------\r\nconnection.py              174 INFO     Connecting. Database: ibis_testing. User: default\r\nconnection.py              275 INFO     Connected to ClickHouse server version 1.1.54310\r\nconnection.py              439 INFO     Query: SELECT INTERVAL `int_col` DAY AS `tmp`\r\nFROM ibis_testing.`functional_alltypes`\r\nLIMIT 10000\r\nconnection.py              414 DEBUG    Block send time: 8.8e-05\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/14", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/14/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/14/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/14", "id": 285653144, "node_id": "MDU6SXNzdWUyODU2NTMxNDQ=", "number": 14, "title": "Insert NULL values for Nullable types", "user": {"login": "tarashypka", "id": 15344666, "node_id": "MDQ6VXNlcjE1MzQ0NjY2", "avatar_url": "https://avatars3.githubusercontent.com/u/15344666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tarashypka", "html_url": "https://github.com/tarashypka", "followers_url": "https://api.github.com/users/tarashypka/followers", "following_url": "https://api.github.com/users/tarashypka/following{/other_user}", "gists_url": "https://api.github.com/users/tarashypka/gists{/gist_id}", "starred_url": "https://api.github.com/users/tarashypka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tarashypka/subscriptions", "organizations_url": "https://api.github.com/users/tarashypka/orgs", "repos_url": "https://api.github.com/users/tarashypka/repos", "events_url": "https://api.github.com/users/tarashypka/events{/privacy}", "received_events_url": "https://api.github.com/users/tarashypka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-03T10:51:46Z", "updated_at": "2018-01-03T11:16:36Z", "closed_at": "2018-01-03T11:15:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I have created table with Nullable columns. How to pass NULL values via bulk insert? \r\n\r\nIt seems there are no analogue value for NULL, None is not working atm.\r\n \r\nActually None is working and it inserts NULL values :)\r\n  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/13", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/13/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/13/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/13", "id": 275157155, "node_id": "MDU6SXNzdWUyNzUxNTcxNTU=", "number": 13, "title": "SQL injections?", "user": {"login": "kdubovikov", "id": 832185, "node_id": "MDQ6VXNlcjgzMjE4NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/832185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdubovikov", "html_url": "https://github.com/kdubovikov", "followers_url": "https://api.github.com/users/kdubovikov/followers", "following_url": "https://api.github.com/users/kdubovikov/following{/other_user}", "gists_url": "https://api.github.com/users/kdubovikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdubovikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdubovikov/subscriptions", "organizations_url": "https://api.github.com/users/kdubovikov/orgs", "repos_url": "https://api.github.com/users/kdubovikov/repos", "events_url": "https://api.github.com/users/kdubovikov/events{/privacy}", "received_events_url": "https://api.github.com/users/kdubovikov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-19T13:01:14Z", "updated_at": "2018-06-24T12:07:49Z", "closed_at": "2018-06-24T12:07:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nThanks for this great library. I was thinking whether it has any protection against SQL injection? https://github.com/mymarilyn/clickhouse-driver/blob/master/src/util/escape.py does not seem to have any checks for injected queries.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/12", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/12/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/12/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/12", "id": 266916736, "node_id": "MDU6SXNzdWUyNjY5MTY3MzY=", "number": 12, "title": "Doesn't work with ipv6-only hosts", "user": {"login": "vhaldemar", "id": 2813303, "node_id": "MDQ6VXNlcjI4MTMzMDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2813303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vhaldemar", "html_url": "https://github.com/vhaldemar", "followers_url": "https://api.github.com/users/vhaldemar/followers", "following_url": "https://api.github.com/users/vhaldemar/following{/other_user}", "gists_url": "https://api.github.com/users/vhaldemar/gists{/gist_id}", "starred_url": "https://api.github.com/users/vhaldemar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vhaldemar/subscriptions", "organizations_url": "https://api.github.com/users/vhaldemar/orgs", "repos_url": "https://api.github.com/users/vhaldemar/repos", "events_url": "https://api.github.com/users/vhaldemar/events{/privacy}", "received_events_url": "https://api.github.com/users/vhaldemar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-10-19T17:00:08Z", "updated_at": "2017-10-23T10:46:38Z", "closed_at": "2017-10-23T10:46:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://gist.github.com/vhaldemar/eb51f28207412ed6128d710a1704c064", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/10", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/10/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/10/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/10", "id": 261406238, "node_id": "MDU6SXNzdWUyNjE0MDYyMzg=", "number": 10, "title": "Is not working under CentOS 7 after install from pip", "user": {"login": "morokin", "id": 6605568, "node_id": "MDQ6VXNlcjY2MDU1Njg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6605568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morokin", "html_url": "https://github.com/morokin", "followers_url": "https://api.github.com/users/morokin/followers", "following_url": "https://api.github.com/users/morokin/following{/other_user}", "gists_url": "https://api.github.com/users/morokin/gists{/gist_id}", "starred_url": "https://api.github.com/users/morokin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morokin/subscriptions", "organizations_url": "https://api.github.com/users/morokin/orgs", "repos_url": "https://api.github.com/users/morokin/repos", "events_url": "https://api.github.com/users/morokin/events{/privacy}", "received_events_url": "https://api.github.com/users/morokin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xzkostyan", "id": 9579432, "node_id": "MDQ6VXNlcjk1Nzk0MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/9579432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzkostyan", "html_url": "https://github.com/xzkostyan", "followers_url": "https://api.github.com/users/xzkostyan/followers", "following_url": "https://api.github.com/users/xzkostyan/following{/other_user}", "gists_url": "https://api.github.com/users/xzkostyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzkostyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzkostyan/subscriptions", "organizations_url": "https://api.github.com/users/xzkostyan/orgs", "repos_url": "https://api.github.com/users/xzkostyan/repos", "events_url": "https://api.github.com/users/xzkostyan/events{/privacy}", "received_events_url": "https://api.github.com/users/xzkostyan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-09-28T17:53:32Z", "updated_at": "2017-10-08T02:18:37Z", "closed_at": "2017-10-08T02:18:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\nI'm experiencing some strange issues with module and there are no other issues with any other modules:\r\n\r\nInstalled from pip without issues:\r\n\r\n```\r\n# pip install clickhouse-driver[lz4]\r\n\r\nCollecting clickhouse-driver[lz4]\r\n  Using cached clickhouse-driver-0.0.6.tar.gz\r\nRequirement already satisfied (use --upgrade to upgrade): six in /usr/lib/python2.7/site-packages (from clickhouse-driver[lz4])\r\nRequirement already satisfied (use --upgrade to upgrade): enum34 in /usr/lib/python2.7/site-packages (from clickhouse-driver[lz4])\r\nRequirement already satisfied (use --upgrade to upgrade): lz4 in /usr/lib64/python2.7/site-packages (from clickhouse-driver[lz4])\r\nCollecting clickhouse-cityhash==1.0.2 (from clickhouse-driver[lz4])\r\n  Using cached clickhouse-cityhash-1.0.2.tar.gz\r\nInstalling collected packages: clickhouse-cityhash, clickhouse-driver\r\n  Running setup.py install for clickhouse-cityhash ... done\r\n  Running setup.py install for clickhouse-driver ... done\r\nSuccessfully installed clickhouse-cityhash-1.0.2 clickhouse-driver-0.0.6\r\n```\r\n\r\n```\r\n# pip show clickhouse_driver\r\n\r\nName: clickhouse-driver\r\nVersion: 0.0.6\r\nSummary: Python driver with native interface for ClickHouse\r\nHome-page: https://github.com/mymarilyn/clickhouse-driver\r\nAuthor: Konstantin Lebedev\r\nAuthor-email: kostyan.lebedev@gmail.com\r\nLicense: MIT\r\nLocation: /usr/lib/python2.7/site-packages\r\nRequires: six, enum34\r\n```\r\n\r\n```\r\n# ll /usr/lib/python2.7/site-packages/clickhouse_driver\r\ntotal 164\r\n-rw-r--r-- 1 root root  2155 Jun 30 18:36 block.py\r\n-rw-r--r-- 1 root root  3109 Sep 28 17:42 block.pyc\r\n-rw-r--r-- 1 root root   693 May 22 18:29 blockstreamprofileinfo.py\r\n-rw-r--r-- 1 root root  1247 Sep 28 17:42 blockstreamprofileinfo.pyc\r\n-rw-r--r-- 1 root root  2165 May 22 18:29 clientinfo.py\r\n-rw-r--r-- 1 root root  2856 Sep 28 17:42 clientinfo.pyc\r\n-rw-r--r-- 1 root root  7666 Sep 18 19:58 client.py\r\n-rw-r--r-- 1 root root  7783 Sep 28 17:42 client.pyc\r\ndrwxr-xr-x 2 root root  4096 Sep 28 17:42 columns\r\ndrwxr-xr-x 2 root root  4096 Sep 28 17:42 compression\r\n-rw-r--r-- 1 root root 11992 Sep 16 19:59 connection.py\r\n-rw-r--r-- 1 root root 12551 Sep 28 17:42 connection.pyc\r\n-rw-r--r-- 1 root root   596 Sep 16 20:24 defines.py\r\n-rw-r--r-- 1 root root   885 Sep 28 17:42 defines.pyc\r\n-rw-r--r-- 1 root root  2899 Sep 16 20:24 errors.py\r\n-rw-r--r-- 1 root root  6561 Sep 28 17:42 errors.pyc\r\n-rw-r--r-- 1 root root    68 Sep 19 18:00 __init__.py\r\n-rw-r--r-- 1 root root   443 Sep 28 17:42 __init__.pyc\r\n-rw-r--r-- 1 root root   522 May 22 18:29 progress.py\r\n-rw-r--r-- 1 root root  1113 Sep 28 17:42 progress.pyc\r\n-rw-r--r-- 1 root root  2002 Aug 31 18:09 protocol.py\r\n-rw-r--r-- 1 root root  2645 Sep 28 17:42 protocol.pyc\r\n-rw-r--r-- 1 root root   186 May 22 18:29 queryprocessingstage.py\r\n-rw-r--r-- 1 root root   590 Sep 28 17:42 queryprocessingstage.pyc\r\n-rw-r--r-- 1 root root  1686 Sep  4 20:49 reader.py\r\n-rw-r--r-- 1 root root  3676 Sep 28 17:42 reader.pyc\r\n-rw-r--r-- 1 root root   717 May 22 18:29 readhelpers.py\r\n-rw-r--r-- 1 root root   945 Sep 28 17:42 readhelpers.pyc\r\ndrwxr-xr-x 2 root root  4096 Sep 28 17:42 settings\r\ndrwxr-xr-x 2 root root  4096 Sep 28 17:42 streams\r\ndrwxr-xr-x 2 root root  4096 Sep 28 17:42 util\r\n-rw-r--r-- 1 root root  1770 Aug 31 18:09 writer.py\r\n-rw-r--r-- 1 root root  3882 Sep 28 17:42 writer.pyc\r\n\r\n```\r\n**Example code test.py**\r\n\r\n```python\r\n#! /usr/bin/env python\r\n\r\nfrom clickhouse_driver.client import Client\r\n\r\nch_db = Client(host='clickhouse-host', database='test_db',\r\n               compression=True)\r\nquery = 'select * from test_table'\r\nresult = ch_db.execute(query)\r\n\r\nprint result\r\n```\r\n\r\nOutput:\r\n```\r\nTraceback (most recent call last):\r\n  File \"./test.py\", line 3, in <module>\r\n    from clickhouse_driver.client import Client\r\nImportError: No module named client\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/9", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/9/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/9/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/9", "id": 258747815, "node_id": "MDU6SXNzdWUyNTg3NDc4MTU=", "number": 9, "title": "Pandas interop", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-09-19T09:06:49Z", "updated_at": "2018-01-19T21:43:42Z", "closed_at": "2018-01-19T21:43:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It might worth considering to support (optionally) pandas dataframes as inputs and outputs  in clickhouse-driver.\r\nCreating pandas dataframe would be quite straightforward from the block stream before transposing to row oriented block. \r\nHere is a basic pandas dtype -> clickhouse type mapping: https://github.com/kszucs/ibis/blob/0101250a9d96f6a387129fcd770f3e092856dc56/ibis/clickhouse/types.py#L14\r\n\r\n@xzkostyan would You like to include pandas support?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/8", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/8/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/8/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/8", "id": 258494246, "node_id": "MDU6SXNzdWUyNTg0OTQyNDY=", "number": 8, "title": "Big INSERT ends in timeout", "user": {"login": "knutknudsen", "id": 18634088, "node_id": "MDQ6VXNlcjE4NjM0MDg4", "avatar_url": "https://avatars2.githubusercontent.com/u/18634088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/knutknudsen", "html_url": "https://github.com/knutknudsen", "followers_url": "https://api.github.com/users/knutknudsen/followers", "following_url": "https://api.github.com/users/knutknudsen/following{/other_user}", "gists_url": "https://api.github.com/users/knutknudsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/knutknudsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/knutknudsen/subscriptions", "organizations_url": "https://api.github.com/users/knutknudsen/orgs", "repos_url": "https://api.github.com/users/knutknudsen/repos", "events_url": "https://api.github.com/users/knutknudsen/events{/privacy}", "received_events_url": "https://api.github.com/users/knutknudsen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-18T14:11:04Z", "updated_at": "2017-09-18T16:13:58Z", "closed_at": "2017-09-18T16:13:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI have an issue with a big insert query > 2000 cols. \r\nFinally it runs with native clickhouse client.\r\nAfter some config changes runs in 0.5 seconds\r\n\r\nNow I tried to run the same query with the clickhouse-driver.\r\nIt times out.\r\n\r\nBefore I had the same script working with pymysql.\r\n\r\nAny idea how to fix this?\r\n\r\nTraceback (most recent call last):\r\n  File \"Click_v01.py\", line 154, in <module>\r\n    client.execute(sql)\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/client.py\", line 73, in execute\r\n    query_id=query_id, settings=settings\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/client.py\", line 88, in process_ordinary_query\r\n    return self.receive_result(with_column_types=with_column_types)\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/client.py\", line 19, in receive_result\r\n    block = self.receive_block()\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/client.py\", line 38, in receive_block\r\n    packet = self.connection.receive_packet()\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/connection.py\", line 234, in receive_packet\r\n    packet.type = packet_type = read_varint(self.fin)\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/reader.py\", line 46, in read_varint\r\n    i = _read_one(f)\r\n  File \"/usr/lib/python3.4/site-packages/clickhouse_driver/reader.py\", line 31, in _read_one\r\n    c = f.read(1)\r\n  File \"/usr/lib64/python3.4/socket.py\", line 378, in readinto\r\n    return self._sock.recv_into(b)\r\nsocket.timeout: timed out\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/7", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/7/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/7/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/7", "id": 256651195, "node_id": "MDU6SXNzdWUyNTY2NTExOTU=", "number": 7, "title": "Timeout error", "user": {"login": "hashbash", "id": 10183440, "node_id": "MDQ6VXNlcjEwMTgzNDQw", "avatar_url": "https://avatars3.githubusercontent.com/u/10183440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashbash", "html_url": "https://github.com/hashbash", "followers_url": "https://api.github.com/users/hashbash/followers", "following_url": "https://api.github.com/users/hashbash/following{/other_user}", "gists_url": "https://api.github.com/users/hashbash/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashbash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashbash/subscriptions", "organizations_url": "https://api.github.com/users/hashbash/orgs", "repos_url": "https://api.github.com/users/hashbash/repos", "events_url": "https://api.github.com/users/hashbash/events{/privacy}", "received_events_url": "https://api.github.com/users/hashbash/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-11T10:14:49Z", "updated_at": "2019-04-14T04:53:14Z", "closed_at": "2017-09-11T17:40:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello!\r\n\r\nI'm getting a timeout error when trying to fetch results from clickhouse using this package on windows.\r\nAny ideas how I can fix it?\r\n\r\n\r\n\r\n```\r\nfrom clickhouse_driver.client import Client\r\nprint('Import Client - Ok', Client)\r\n\r\nclient = Client('***-clickhouse.***', 8123, , database='test')\r\nprint('Get instance of Client - Ok', client)\r\n\r\nresult = client.execute('select 1')\r\nprint('Get results - Ok', result)\r\n```\r\nOutput:\r\n```\r\nImport Client - Ok <class 'clickhouse_driver.client.Client'>\r\nGet instance of Client - Ok <clickhouse_driver.client.Client object at 0x0000000004B95C88>\r\n---------------------------------------------------------------------------\r\ntimeout                                   Traceback (most recent call last)\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\connection.py in connect(self)\r\n    126             self.send_hello()\r\n--> 127             self.receive_hello()\r\n    128 \r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\connection.py in receive_hello(self)\r\n    175     def receive_hello(self):\r\n--> 176         packet_type = read_varint(self.fin)\r\n    177 \r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\reader.py in read_varint(f)\r\n     45     while True:\r\n---> 46         i = _read_one(f)\r\n     47         result |= (i & 0x7f) << shift\r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\reader.py in _read_one(f)\r\n     30 def _read_one(f):\r\n---> 31     c = f.read(1)\r\n     32     if c == '':\r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\socket.py in readinto(self, b)\r\n    585             try:\r\n--> 586                 return self._sock.recv_into(b)\r\n    587             except timeout:\r\n\r\ntimeout: timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-7-73d5ad8d95e2> in <module>()\r\n      5 print('Get instance of Client - Ok', client)\r\n      6 \r\n----> 7 result = client.execute('select 1')\r\n      8 print('Get results - Ok', result)\r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\client.py in execute(self, query, params, with_column_types, external_tables, query_id, settings)\r\n     58     def execute(self, query, params=None, with_column_types=False,\r\n     59                 external_tables=None, query_id=None, settings=None):\r\n---> 60         self.connection.force_connect()\r\n     61 \r\n     62         try:\r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\connection.py in force_connect(self)\r\n     97 \r\n     98         if not self.connected:\r\n---> 99             self.connect()\r\n    100 \r\n    101         elif not self.ping():\r\n\r\nC:\\Users\\username\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\clickhouse_driver\\connection.py in connect(self)\r\n    133             self.disconnect()\r\n    134             raise errors.SocketTimeoutError(\r\n--> 135                 '{} ({})'.format(e.message, self.get_description())\r\n    136             )\r\n    137 \r\n\r\nAttributeError: 'timeout' object has no attribute 'message'\r\n```\r\nPs.\r\nI checked this connection credentials via jdbc-driver", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/6", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/6/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/6/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/6", "id": 251571829, "node_id": "MDU6SXNzdWUyNTE1NzE4Mjk=", "number": 6, "title": "Conda forge feedstock", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-21T07:29:32Z", "updated_at": "2017-10-05T09:56:09Z", "closed_at": "2017-10-05T07:36:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi! \r\n\r\nI'm working on clickhouse backend for [ibis](https://github.com/ibis-project/ibis).\r\nIbis is installable from both pip and conda. I'd like to use clickhouse-driver, but currently `clickhouse-driver` and `clickhouse-cityhash` don't have conda packages.\r\n\r\nI've already created the recipes, but [conda forge](https://conda-forge.org/) packages require maintainers. Would You please create the feedstocks?\r\n\r\nHere are the recipes: https://github.com/kszucs/clickhouse-conda ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/5", "repository_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver", "labels_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/5/comments", "events_url": "https://api.github.com/repos/mymarilyn/clickhouse-driver/issues/5/events", "html_url": "https://github.com/mymarilyn/clickhouse-driver/issues/5", "id": 250857224, "node_id": "MDU6SXNzdWUyNTA4NTcyMjQ=", "number": 5, "title": "Asyncio client", "user": {"login": "kszucs", "id": 961747, "node_id": "MDQ6VXNlcjk2MTc0Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kszucs", "html_url": "https://github.com/kszucs", "followers_url": "https://api.github.com/users/kszucs/followers", "following_url": "https://api.github.com/users/kszucs/following{/other_user}", "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions", "organizations_url": "https://api.github.com/users/kszucs/orgs", "repos_url": "https://api.github.com/users/kszucs/repos", "events_url": "https://api.github.com/users/kszucs/events{/privacy}", "received_events_url": "https://api.github.com/users/kszucs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-08-17T07:48:04Z", "updated_at": "2017-09-27T19:32:18Z", "closed_at": "2017-09-27T19:25:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "First of all, great to have a native driver! \r\n\r\nI'd like to use clickhouse driver from asyncio, how should I implement asyncio connection?\r\nWould it be enough to provide an asynchronous version for `Connection` and `Client`?\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}]}