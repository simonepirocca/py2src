{"total_count": 23, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/wbond/oscrypto/issues/45", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/45/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/45/events", "html_url": "https://github.com/wbond/oscrypto/issues/45", "id": 612521739, "node_id": "MDU6SXNzdWU2MTI1MjE3Mzk=", "number": 45, "title": "test_tls_connect_revoked failed due to expired certificate", "user": {"login": "Ikke", "id": 135698, "node_id": "MDQ6VXNlcjEzNTY5OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/135698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ikke", "html_url": "https://github.com/Ikke", "followers_url": "https://api.github.com/users/Ikke/followers", "following_url": "https://api.github.com/users/Ikke/following{/other_user}", "gists_url": "https://api.github.com/users/Ikke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ikke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ikke/subscriptions", "organizations_url": "https://api.github.com/users/Ikke/orgs", "repos_url": "https://api.github.com/users/Ikke/repos", "events_url": "https://api.github.com/users/Ikke/events{/privacy}", "received_events_url": "https://api.github.com/users/Ikke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-05T11:12:17Z", "updated_at": "2020-05-21T15:40:26Z", "closed_at": "2020-05-21T15:40:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "`test_tls_connect_revoked` in `tests/test_tls.py` fails with\r\n\r\n```\r\noscrypto.errors.TLSVerificationError: Server certificate verification failed - certificate expired 2020-04-13 12:00:00Z\r\n```\r\nApparently the certificate for revoked.grc.com is expired.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/42", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/42/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/42/events", "html_url": "https://github.com/wbond/oscrypto/issues/42", "id": 574967049, "node_id": "MDU6SXNzdWU1NzQ5NjcwNDk=", "number": 42, "title": "Failing to load libcrypto", "user": {"login": "grant100", "id": 28523112, "node_id": "MDQ6VXNlcjI4NTIzMTEy", "avatar_url": "https://avatars2.githubusercontent.com/u/28523112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grant100", "html_url": "https://github.com/grant100", "followers_url": "https://api.github.com/users/grant100/followers", "following_url": "https://api.github.com/users/grant100/following{/other_user}", "gists_url": "https://api.github.com/users/grant100/gists{/gist_id}", "starred_url": "https://api.github.com/users/grant100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grant100/subscriptions", "organizations_url": "https://api.github.com/users/grant100/orgs", "repos_url": "https://api.github.com/users/grant100/repos", "events_url": "https://api.github.com/users/grant100/events{/privacy}", "received_events_url": "https://api.github.com/users/grant100/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-03T21:42:31Z", "updated_at": "2020-05-21T15:56:58Z", "closed_at": "2020-05-21T15:56:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having trouble on MacOS 10.15.3 with this line and version 1.1.1/1.2.0 on python 3.6.8\r\n\r\n    from oscrypto import asymmetric\r\n\r\nI'm getting the following error:\r\n\r\n    dlopen(/usr/local/lib/libcrypto.42.dylib, 6): image not found\r\n\r\n\r\nIt does appear to be in`/usr/lib`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/41", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/41/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/41/events", "html_url": "https://github.com/wbond/oscrypto/issues/41", "id": 571615116, "node_id": "MDU6SXNzdWU1NzE2MTUxMTY=", "number": 41, "title": "Unable to load lib file when using Conda virtual environment", "user": {"login": "chunheisiu", "id": 5173707, "node_id": "MDQ6VXNlcjUxNzM3MDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5173707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chunheisiu", "html_url": "https://github.com/chunheisiu", "followers_url": "https://api.github.com/users/chunheisiu/followers", "following_url": "https://api.github.com/users/chunheisiu/following{/other_user}", "gists_url": "https://api.github.com/users/chunheisiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/chunheisiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chunheisiu/subscriptions", "organizations_url": "https://api.github.com/users/chunheisiu/orgs", "repos_url": "https://api.github.com/users/chunheisiu/repos", "events_url": "https://api.github.com/users/chunheisiu/events{/privacy}", "received_events_url": "https://api.github.com/users/chunheisiu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-26T19:46:27Z", "updated_at": "2020-05-21T15:56:45Z", "closed_at": "2020-05-21T15:56:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am on macOS Catalina and Python 3.7. While on Conda base, the application runs without errors. However, running it in a Conda virtual environment results in the following error.\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/Users/charles.siu/git/domain_classifier_real_estate/data_collector/server.py\", line 7, in <module>\r\n    from data_collector.domain import parse_train_domains, parse_predict_domains\r\n  File \"/Users/charles.siu/git/domain_classifier_real_estate/data_collector/domain.py\", line 7, in <module>\r\n    from data_collector.cert import get_cert, get_cert_issuer\r\n  File \"/Users/charles.siu/git/domain_classifier_real_estate/data_collector/cert.py\", line 6, in <module>\r\n    import oscrypto.asymmetric\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/asymmetric.py\", line 19, in <module>\r\n    from ._asymmetric import _unwrap_private_key_info\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/_asymmetric.py\", line 27, in <module>\r\n    from .kdf import pbkdf1, pbkdf2, pkcs12_kdf\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/kdf.py\", line 9, in <module>\r\n    from .util import rand_bytes\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/util.py\", line 10, in <module>\r\n    from ._mac.util import rand_bytes\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/_mac/util.py\", line 208, in <module>\r\n    from .._openssl._libcrypto import libcrypto\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/_openssl/_libcrypto.py\", line 15, in <module>\r\n    from ._libcrypto_ctypes import (\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/site-packages/oscrypto/_openssl/_libcrypto_ctypes.py\", line 37, in <module>\r\n    libcrypto = CDLL(libcrypto_path, use_errno=True)\r\n  File \"/usr/local/anaconda3/envs/domain_classifier/lib/python3.7/ctypes/__init__.py\", line 364, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\nOSError: dlopen(/usr/local/anaconda3/envs/domain_classifier/bin/../lib/libcrypto.42.dylib, 6): image not found\r\n```\r\nI have tried symbolic linking `/usr/lib` to `../lib` but it seemed to have created more issues. Any help is appreciated!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/39", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/39/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/39/events", "html_url": "https://github.com/wbond/oscrypto/issues/39", "id": 547169417, "node_id": "MDU6SXNzdWU1NDcxNjk0MTc=", "number": 39, "title": "More hash_algorithms, like sha3 or blake2? ", "user": {"login": "yjqiang", "id": 8900942, "node_id": "MDQ6VXNlcjg5MDA5NDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/8900942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yjqiang", "html_url": "https://github.com/yjqiang", "followers_url": "https://api.github.com/users/yjqiang/followers", "following_url": "https://api.github.com/users/yjqiang/following{/other_user}", "gists_url": "https://api.github.com/users/yjqiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yjqiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yjqiang/subscriptions", "organizations_url": "https://api.github.com/users/yjqiang/orgs", "repos_url": "https://api.github.com/users/yjqiang/repos", "events_url": "https://api.github.com/users/yjqiang/events{/privacy}", "received_events_url": "https://api.github.com/users/yjqiang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-08T23:54:18Z", "updated_at": "2020-01-09T01:03:20Z", "closed_at": "2020-01-08T23:58:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://docs.python.org/3/library/hashlib.html\r\nOf course sha3 and blake2 are safer than sha2 and md5. But I also noticed they were added recently in python3.6, while oscrypto supports python2. So I'm not sure about whether we should support them right now. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/37", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/37/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/37/events", "html_url": "https://github.com/wbond/oscrypto/issues/37", "id": 538434919, "node_id": "MDU6SXNzdWU1Mzg0MzQ5MTk=", "number": 37, "title": "Warnings for non-extern, non-static global variables", "user": {"login": "erincific", "id": 57348716, "node_id": "MDQ6VXNlcjU3MzQ4NzE2", "avatar_url": "https://avatars2.githubusercontent.com/u/57348716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erincific", "html_url": "https://github.com/erincific", "followers_url": "https://api.github.com/users/erincific/followers", "following_url": "https://api.github.com/users/erincific/following{/other_user}", "gists_url": "https://api.github.com/users/erincific/gists{/gist_id}", "starred_url": "https://api.github.com/users/erincific/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erincific/subscriptions", "organizations_url": "https://api.github.com/users/erincific/orgs", "repos_url": "https://api.github.com/users/erincific/repos", "events_url": "https://api.github.com/users/erincific/events{/privacy}", "received_events_url": "https://api.github.com/users/erincific/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-16T14:08:47Z", "updated_at": "2020-01-04T14:21:54Z", "closed_at": "2019-12-16T15:48:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! Looks like we're using your software, so thanks before anything else.\r\n\r\nI have been looking into this series of warnings thrown when running some python commands, which complained about several global variables not having the `extern` keyword. I'm adding the warnings below.\r\n\r\nI finally troubleshooted it down to your code, and temporarily fixed it by the obvious solution of adding the keyword where necessary.\r\n\r\nMy question is, do you think we should actually use `extern` here? I am not knowledgable about this domain, so any kind of information would be helpful. I'd be happy to open a PR.\r\n\r\n**Files affected:**\r\n```bash\r\n_mac/_security_cffi.py\r\n_mac/_core_foundation_cffi.py\r\n```\r\n\r\nThanks!\r\n\r\n**The warning avalanche:**\r\n```bash\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingKey' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingPKCS7Key' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingPKCS5Key' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingPKCS1Key' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingOAEPKey' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingNoneKey' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecModeCBCKey' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecTransformInputAttributeName' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecDigestTypeAttribute' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecDigestLengthAttribute' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecIVKey' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrIsExtractable' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecDigestSHA1' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecDigestSHA2' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecDigestMD5' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyType' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeRSA' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeDSA' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeECDSA' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeySizeInBits' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrLabel' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrCanSign' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrCanVerify' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeAES' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeRC4' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeRC2' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyType3DES' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecAttrKeyTypeDES' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kCFAllocatorDefault' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kCFTypeArrayCallBacks' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kCFBooleanTrue' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kCFTypeDictionaryKeyCallBacks' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/Users/erinc/.virtualenvs/findapro/lib/python3.6/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kCFTypeDictionaryValueCallBacks' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/35", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/35/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/35/events", "html_url": "https://github.com/wbond/oscrypto/issues/35", "id": 526308791, "node_id": "MDU6SXNzdWU1MjYzMDg3OTE=", "number": 35, "title": "oscrypto segfaults on catalina", "user": {"login": "worldwise001", "id": 320682, "node_id": "MDQ6VXNlcjMyMDY4Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/320682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/worldwise001", "html_url": "https://github.com/worldwise001", "followers_url": "https://api.github.com/users/worldwise001/followers", "following_url": "https://api.github.com/users/worldwise001/following{/other_user}", "gists_url": "https://api.github.com/users/worldwise001/gists{/gist_id}", "starred_url": "https://api.github.com/users/worldwise001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/worldwise001/subscriptions", "organizations_url": "https://api.github.com/users/worldwise001/orgs", "repos_url": "https://api.github.com/users/worldwise001/repos", "events_url": "https://api.github.com/users/worldwise001/events{/privacy}", "received_events_url": "https://api.github.com/users/worldwise001/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-11-21T01:25:12Z", "updated_at": "2020-06-02T23:31:21Z", "closed_at": "2019-11-21T03:49:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've come here after an all-day debugging session. tl;dr I think oscrypto is picking up the wrong SSL backend for catalina (OS X 10.15.1) which causes a crash.\r\n\r\nThere's some workarounds as documented here: https://forums.developer.apple.com/thread/119429\r\nThough that seems pretty gnarly. \r\n\r\nSpecifically I'm finding it failing in _libcrypto_cffi:\r\n```\r\nlibcrypto_path = _backend_config().get('libcrypto_path')\r\nif libcrypto_path is None:\r\n    libcrypto_path = find_library('crypto')\r\nif not libcrypto_path:\r\n    raise LibraryNotFoundError('The library libcrypto could not be found')\r\n\r\ntry:\r\n    vffi = FFI()\r\n    vffi.cdef(\"const char *SSLeay_version(int type);\")\r\n    version_string = vffi.string(vffi.dlopen(libcrypto_path).SSLeay_version(0)).decode('utf-8') #### fails here\r\nexcept (AttributeError):\r\n    vffi = FFI()\r\n    vffi.cdef(\"const char *OpenSSL_version(int type);\")\r\n    version_string = vffi.string(vffi.dlopen(libcrypto_path).OpenSSL_version(0)).decode('utf-8')\r\n```\r\n\r\nI suspect we are just picking a version that makes Catalina extremely upset, and so if we can pick a pinned version that would be better.\r\n\r\nI posted something similar here: https://github.com/snowflakedb/snowflake-connector-python/issues/235", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/34", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/34/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/34/events", "html_url": "https://github.com/wbond/oscrypto/issues/34", "id": 522352172, "node_id": "MDU6SXNzdWU1MjIzNTIxNzI=", "number": 34, "title": "oscrypto 1.1.0 and cffi 1.13.2 dumps lots of warnings", "user": {"login": "sfc-gh-stakeda", "id": 20942173, "node_id": "MDQ6VXNlcjIwOTQyMTcz", "avatar_url": "https://avatars0.githubusercontent.com/u/20942173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfc-gh-stakeda", "html_url": "https://github.com/sfc-gh-stakeda", "followers_url": "https://api.github.com/users/sfc-gh-stakeda/followers", "following_url": "https://api.github.com/users/sfc-gh-stakeda/following{/other_user}", "gists_url": "https://api.github.com/users/sfc-gh-stakeda/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfc-gh-stakeda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfc-gh-stakeda/subscriptions", "organizations_url": "https://api.github.com/users/sfc-gh-stakeda/orgs", "repos_url": "https://api.github.com/users/sfc-gh-stakeda/repos", "events_url": "https://api.github.com/users/sfc-gh-stakeda/events{/privacy}", "received_events_url": "https://api.github.com/users/sfc-gh-stakeda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-13T17:02:08Z", "updated_at": "2020-01-04T14:22:06Z", "closed_at": "2019-12-28T21:33:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Lots of warnings are dumped when importing `oscrypto.asymmetric` in the environment including `cffi` 1.13.2:\r\n```\r\n> python -c 'from oscrypto import asymmetric'\r\n/private/tmp/k1/lib/python3.7/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecRandomDefault' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/private/tmp/k1/lib/python3.7/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingKey' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/private/tmp/k1/lib/python3.7/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingPKCS7Key' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n/private/tmp/k1/lib/python3.7/site-packages/cffi/cparser.py:164: UserWarning: Global variable 'kSecPaddingPKCS5Key' in cdef(): for consistency with C it should have a storage class specifier (usually 'extern')\r\n  \"(usually 'extern')\" % (decl.name,))\r\n...\r\n```\r\nMy test environment is as follows:\r\n```\r\n> system_profiler SPSoftwareDataType\r\n\r\nSoftware:\r\n\r\n    System Software Overview:\r\n\r\n      System Version: macOS 10.14.6 (18G1012)\r\n      Kernel Version: Darwin 18.7.0\r\n```\r\n\r\nPython Version is as follows.\r\n```\r\n> python --version\r\nPython 3.7.4\r\n```\r\n\r\npip output is\r\n```\r\n> pip list\r\nPackage    Version\r\n---------- -------\r\nasn1crypto 1.2.0\r\ncffi       1.13.2\r\noscrypto   1.1.0\r\npip        19.0.3\r\npycparser  2.19\r\nsetuptools 40.8.0\r\n```\r\n\r\nIf `cffi` is not included, no warning is dumped.\r\nAlso `cffi==1.13.0` doesn't show any warning too.\r\n\r\nI suspect `cffi` added more strict checking on the global variables?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/30", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/30/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/30/events", "html_url": "https://github.com/wbond/oscrypto/issues/30", "id": 393862555, "node_id": "MDU6SXNzdWUzOTM4NjI1NTU=", "number": 30, "title": "Not obvious load_certificate behavior", "user": {"login": "arykalin", "id": 2527425, "node_id": "MDQ6VXNlcjI1Mjc0MjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2527425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arykalin", "html_url": "https://github.com/arykalin", "followers_url": "https://api.github.com/users/arykalin/followers", "following_url": "https://api.github.com/users/arykalin/following{/other_user}", "gists_url": "https://api.github.com/users/arykalin/gists{/gist_id}", "starred_url": "https://api.github.com/users/arykalin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arykalin/subscriptions", "organizations_url": "https://api.github.com/users/arykalin/orgs", "repos_url": "https://api.github.com/users/arykalin/repos", "events_url": "https://api.github.com/users/arykalin/events{/privacy}", "received_events_url": "https://api.github.com/users/arykalin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-24T11:19:13Z", "updated_at": "2019-07-23T11:12:56Z", "closed_at": "2019-07-23T11:12:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, the problem occurs if I want to load certificate from variable. In this case this:\r\n\r\n\r\n`ROOT_CA = b\"\"\"\r\n-----BEGIN CERTIFICATE-----\r\nMIID1TCCAr2gAwIBAgIJAIOVTvMIMD7OMA0GCSqGSIb3DQEBCwUAMIGAMQswCQYD\r\nVQQGEwJVUzENMAsGA1UECAwEVXRhaDEXMBUGA1UEBwwOU2FsdCBMYWtlIENpdHkx\r\nDzANBgNVBAoMBlZlbmFmaTEbMBkGA1UECwwSTk9UIEZPUiBQUk9EVUNUSU9OMRsw\r\nGQYDVQQDDBJWQ2VydCBUZXN0IE1vZGUgQ0EwHhcNMTgwMzI3MTAyNTI5WhcNMzgw\r\nMzIyMTAyNTI5WjCBgDELMAkGA1UEBhMCVVMxDTALBgNVBAgMBFV0YWgxFzAVBgNV\r\nBAcMDlNhbHQgTGFrZSBDaXR5MQ8wDQYDVQQKDAZWZW5hZmkxGzAZBgNVBAsMEk5P\r\nVCBGT1IgUFJPRFVDVElPTjEbMBkGA1UEAwwSVkNlcnQgVGVzdCBNb2RlIENBMIIB\r\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0BobDKthxG5SuMfAp2heyDQN\r\n/IL9NTEnFJUUl/CkLEQTSQT68M9US7TCxi+FOizIoev2k4Nkovgk7uM0q94aygbh\r\ncHyTTL64uphHwcClu99ZQ6DIwzDH2gREsLWfj+KXw4bPsne+5tGxv2+0jG2at5or\r\np/nOQWYD1C1HB6ZQqvP3PypDjou7Uh+Y00bOfXkbYWr8GkX4XAL6UtC0jUnsBEZX\r\nCuwO1BlIIoKNokhOV7Jcb3l/jurjzVWfem+tqwYb/Tkj6MI1YBqt6Yy2EsGsoAv1\r\nE5/IGcjSQnLEqDWhpY0s2fA4o+bAMzyakDFKJoQbF982QhS2fT+d87vQlnMi1QID\r\nAQABo1AwTjAdBgNVHQ4EFgQUzqRFDvLX0mz4AjPb45tLGavm8AcwHwYDVR0jBBgw\r\nFoAUzqRFDvLX0mz4AjPb45tLGavm8AcwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0B\r\nAQsFAAOCAQEAWbRgS1qUyGMh3ToJ060s5cdoKzyx/ji5pRPXRxrmzzSxP+dlKX7h\r\nAKUgYOV9FU/k2f4C7TeCZSsir20x8fKRg4qs6r8vHTcWnkC6A08SNlT5kjyJl8vt\r\nqQTEsemnyBFis8ZFUfYdmNYqZXuWSb7ZBfNkR7qMVna8A87NyEmTtlTBkZYSTOaB\r\nNRuOli+/6akXg/OW/GfVUD11D413CtZsWNzKaxj1WH88mjBYwQx2pGRzMWHfWBka\r\nf6ZUnA9hhqxO4CHqQWmKPHftbGscwx5yg/J6J7TfG+rYd5ZVVhrr2un2xpOTctjO\r\nlriDCQa4FOwP9/x1OJRXEsSl5YFqBppX5A==\r\n-----END CERTIFICATE-----\r\n\"\"\"\r\n\r\nroot_ca_certificate = asymmetric.load_certificate(ROOT_CA)`\r\n\r\nWill cause \"ValueError: The data specified does not appear to be a known certificate format\"\r\n\r\nTo fix I need to start certificate string from the same line as quotes. This one works:\r\n\r\n`\r\nROOT_CA = b\"\"\"-----BEGIN CERTIFICATE-----\r\nMIID1TCCAr2gAwIBAgIJAIOVTvMIMD7OMA0GCSqGSIb3DQEBCwUAMIGAMQswCQYD\r\nVQQGEwJVUzENMAsGA1UECAwEVXRhaDEXMBUGA1UEBwwOU2FsdCBMYWtlIENpdHkx\r\nDzANBgNVBAoMBlZlbmFmaTEbMBkGA1UECwwSTk9UIEZPUiBQUk9EVUNUSU9OMRsw\r\nGQYDVQQDDBJWQ2VydCBUZXN0IE1vZGUgQ0EwHhcNMTgwMzI3MTAyNTI5WhcNMzgw\r\nMzIyMTAyNTI5WjCBgDELMAkGA1UEBhMCVVMxDTALBgNVBAgMBFV0YWgxFzAVBgNV\r\nBAcMDlNhbHQgTGFrZSBDaXR5MQ8wDQYDVQQKDAZWZW5hZmkxGzAZBgNVBAsMEk5P\r\nVCBGT1IgUFJPRFVDVElPTjEbMBkGA1UEAwwSVkNlcnQgVGVzdCBNb2RlIENBMIIB\r\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0BobDKthxG5SuMfAp2heyDQN\r\n/IL9NTEnFJUUl/CkLEQTSQT68M9US7TCxi+FOizIoev2k4Nkovgk7uM0q94aygbh\r\ncHyTTL64uphHwcClu99ZQ6DIwzDH2gREsLWfj+KXw4bPsne+5tGxv2+0jG2at5or\r\np/nOQWYD1C1HB6ZQqvP3PypDjou7Uh+Y00bOfXkbYWr8GkX4XAL6UtC0jUnsBEZX\r\nCuwO1BlIIoKNokhOV7Jcb3l/jurjzVWfem+tqwYb/Tkj6MI1YBqt6Yy2EsGsoAv1\r\nE5/IGcjSQnLEqDWhpY0s2fA4o+bAMzyakDFKJoQbF982QhS2fT+d87vQlnMi1QID\r\nAQABo1AwTjAdBgNVHQ4EFgQUzqRFDvLX0mz4AjPb45tLGavm8AcwHwYDVR0jBBgw\r\nFoAUzqRFDvLX0mz4AjPb45tLGavm8AcwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0B\r\nAQsFAAOCAQEAWbRgS1qUyGMh3ToJ060s5cdoKzyx/ji5pRPXRxrmzzSxP+dlKX7h\r\nAKUgYOV9FU/k2f4C7TeCZSsir20x8fKRg4qs6r8vHTcWnkC6A08SNlT5kjyJl8vt\r\nqQTEsemnyBFis8ZFUfYdmNYqZXuWSb7ZBfNkR7qMVna8A87NyEmTtlTBkZYSTOaB\r\nNRuOli+/6akXg/OW/GfVUD11D413CtZsWNzKaxj1WH88mjBYwQx2pGRzMWHfWBka\r\nf6ZUnA9hhqxO4CHqQWmKPHftbGscwx5yg/J6J7TfG+rYd5ZVVhrr2un2xpOTctjO\r\nlriDCQa4FOwP9/x1OJRXEsSl5YFqBppX5A==\r\n-----END CERTIFICATE-----\r\n\"\"\"\r\n\r\nroot_ca_certificate = asymmetric.load_certificate(ROOT_CA)\r\n`\r\n\r\nThe reason is this check: https://github.com/wbond/oscrypto/blob/master/oscrypto/keys.py#L140", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/28", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/28/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/28/events", "html_url": "https://github.com/wbond/oscrypto/issues/28", "id": 337716650, "node_id": "MDU6SXNzdWUzMzc3MTY2NTA=", "number": 28, "title": "Can't use On Python3.7, Mac brew install python3", "user": {"login": "jacksonpan", "id": 696493, "node_id": "MDQ6VXNlcjY5NjQ5Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/696493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacksonpan", "html_url": "https://github.com/jacksonpan", "followers_url": "https://api.github.com/users/jacksonpan/followers", "following_url": "https://api.github.com/users/jacksonpan/following{/other_user}", "gists_url": "https://api.github.com/users/jacksonpan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacksonpan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacksonpan/subscriptions", "organizations_url": "https://api.github.com/users/jacksonpan/orgs", "repos_url": "https://api.github.com/users/jacksonpan/repos", "events_url": "https://api.github.com/users/jacksonpan/events{/privacy}", "received_events_url": "https://api.github.com/users/jacksonpan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-03T01:45:47Z", "updated_at": "2019-10-03T14:10:56Z", "closed_at": "2018-07-03T13:32:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "today i upgrade to python3.7 with brew. but now i can't run my project and i find the problem was oscrypto.\r\n\r\n![image](https://user-images.githubusercontent.com/696493/42194244-95e3000a-7ea5-11e8-95c2-d8b97f3e7f01.png)\r\n\r\ni find the file(_libcrypto_ctypes.py) line: 258, \r\n        libcrypto.EVP_MD_CTX_new.argtypes = []\r\nwhen run here then     raise FFIEngineError('Error initializing ctypes')\r\nand the pic you can see in the libcrypto object, there is no object named EVP_MD_CTX_new.\r\n\r\ncan you fix it, soon?\r\n\r\nwhen i use python3.6, it runs well", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/24", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/24/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/24/events", "html_url": "https://github.com/wbond/oscrypto/issues/24", "id": 296429820, "node_id": "MDU6SXNzdWUyOTY0Mjk4MjA=", "number": 24, "title": "Bug in _openssl's aes_cbc_no_padding_encrypt?", "user": {"login": "nathforge", "id": 70400, "node_id": "MDQ6VXNlcjcwNDAw", "avatar_url": "https://avatars0.githubusercontent.com/u/70400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathforge", "html_url": "https://github.com/nathforge", "followers_url": "https://api.github.com/users/nathforge/followers", "following_url": "https://api.github.com/users/nathforge/following{/other_user}", "gists_url": "https://api.github.com/users/nathforge/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathforge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathforge/subscriptions", "organizations_url": "https://api.github.com/users/nathforge/orgs", "repos_url": "https://api.github.com/users/nathforge/repos", "events_url": "https://api.github.com/users/nathforge/events{/privacy}", "received_events_url": "https://api.github.com/users/nathforge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 220107723, "node_id": "MDU6TGFiZWwyMjAxMDc3MjM=", "url": "https://api.github.com/repos/wbond/oscrypto/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-12T16:06:43Z", "updated_at": "2019-10-03T14:11:19Z", "closed_at": "2019-07-23T11:12:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to call `oscrypto.symmetric.aes_cbc_no_padding_encrypt` with a 16 byte key, 16 byte IV, and 64 bytes of data.\r\n\r\nThis throws an error:\r\n\r\n```python\r\n>>> import oscrypto.symmetric\r\n>>>\r\n>>> key  = [0]   * 16\r\n>>> iv   = [1]   * 16\r\n>>> data = [255] * 64\r\n>>>\r\n>>> oscrypto.symmetric.aes_cbc_no_padding_encrypt(key=bytes(key), data=bytes(data), iv=bytes(iv))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"oscrypto/_openssl/symmetric.py\", line 74, in aes_cbc_no_padding_encrypt\r\n    return (iv, _encrypt(cipher, key, data, iv, False))\r\n  File \"oscrypto/_openssl/symmetric.py\", line 606, in _encrypt\r\n    raise ValueError('padding must be specified')\r\nValueError: padding must be specified\r\n```\r\n\r\n---\r\n\r\nHere's the abridged source of [oscrypto._openssl.symmetric](https://github.com/wbond/oscrypto/blob/master/oscrypto/_openssl/symmetric.py):\r\n\r\n```\r\ndef aes_cbc_no_padding_encrypt(key, data, iv):\r\n    cipher = _calculate_aes_cipher(key)\r\n    return (iv, _encrypt(cipher, key, data, iv, False))\r\n\r\ndef _calculate_aes_cipher(key):\r\n    if len(key) == 16:\r\n        return 'aes128'\r\n\r\ndef _encrypt(cipher, key, data, iv, padding):\r\n    if cipher != 'rc4' and not padding:\r\n        raise ValueError('padding must be specified')\r\n    # ...\r\n```\r\n\r\nAs I read it, `aes_cbc_no_padding_encrypt` always passes `cipher != rc4` and `padding = False` to `_encrypt`, resulting in the exception.\r\n\r\n---\r\n\r\nHappy to help with a fix, just wanted to check I'm not doing anything crazy?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/23", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/23/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/23/events", "html_url": "https://github.com/wbond/oscrypto/issues/23", "id": 292670001, "node_id": "MDU6SXNzdWUyOTI2NzAwMDE=", "number": 23, "title": "'Certificate' object has no attribute 'issuer'", "user": {"login": "heri16", "id": 527101, "node_id": "MDQ6VXNlcjUyNzEwMQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/527101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heri16", "html_url": "https://github.com/heri16", "followers_url": "https://api.github.com/users/heri16/followers", "following_url": "https://api.github.com/users/heri16/following{/other_user}", "gists_url": "https://api.github.com/users/heri16/gists{/gist_id}", "starred_url": "https://api.github.com/users/heri16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heri16/subscriptions", "organizations_url": "https://api.github.com/users/heri16/orgs", "repos_url": "https://api.github.com/users/heri16/repos", "events_url": "https://api.github.com/users/heri16/events{/privacy}", "received_events_url": "https://api.github.com/users/heri16/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-30T06:44:49Z", "updated_at": "2018-02-06T16:10:10Z", "closed_at": "2018-02-06T16:10:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there documentation on the asymmetric.Certificate class?\r\nI am trying to retrieve the subject and issuer to compare them.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/22", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/22/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/22/events", "html_url": "https://github.com/wbond/oscrypto/issues/22", "id": 291671247, "node_id": "MDU6SXNzdWUyOTE2NzEyNDc=", "number": 22, "title": "High Siearra Openssl Issue", "user": {"login": "cah-sachin", "id": 4475487, "node_id": "MDQ6VXNlcjQ0NzU0ODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/4475487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cah-sachin", "html_url": "https://github.com/cah-sachin", "followers_url": "https://api.github.com/users/cah-sachin/followers", "following_url": "https://api.github.com/users/cah-sachin/following{/other_user}", "gists_url": "https://api.github.com/users/cah-sachin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cah-sachin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cah-sachin/subscriptions", "organizations_url": "https://api.github.com/users/cah-sachin/orgs", "repos_url": "https://api.github.com/users/cah-sachin/repos", "events_url": "https://api.github.com/users/cah-sachin/events{/privacy}", "received_events_url": "https://api.github.com/users/cah-sachin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-01-25T18:33:17Z", "updated_at": "2019-10-03T14:11:41Z", "closed_at": "2018-02-23T22:11:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are facing issue with Mac OS High Sierra 10.13.2 (17C88).\r\n\r\nWe are using oscrypto library which internally uses openssl of OS. While accessing it we are receiving following error.\r\n\r\nWe don't receive below error in sierra operating system of MAC\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/cli.py\", line 413, in main\r\n    environments=options.environments, tasks=arguments)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/reactor.py\", line 128, in build\r\n    return self.build_execution_plan(tasks, execution_plan)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/reactor.py\", line 166, in build_execution_plan\r\n    reactor=self)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/execution.py\", line 351, in execute_execution_plan\r\n    summaries.append(self.execute_task(task, **keyword_arguments))\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/execution.py\", line 298, in execute_task\r\n    task.execute(self.logger, keyword_arguments)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/execution.py\", line 169, in execute\r\n    executable.execute(argument_dict)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/execution.py\", line 100, in execute\r\n    self.callable(*arguments)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/plugins/python/unittest_plugin.py\", line 61, in run_unit_tests\r\n    run_tests(project, logger, \"unittest\", \"unit tests\")\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/plugins/python/unittest_plugin.py\", line 71, in run_tests\r\n    project, logger, execution_prefix, execution_name))\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/utils.py\", line 323, in fork_process\r\n    raise_exception(result[1], result[2])\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/utils.py\", line 305, in instrumented_target\r\n    send_value = (target(*args, **kwargs), None, None)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/plugins/python/unittest_plugin.py\", line 101, in do_run_tests\r\n    test_method_prefix)\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/pybuilder/plugins/python/unittest_plugin.py\", line 136, in execute_tests_matching\r\n    tests = loader.loadTestsFromNames(test_modules)\r\n  File \"/Users/rodrigo.velez/.pyenv/versions/2.7.14/lib/python2.7/unittest/loader.py\", line 130, in loadTestsFromNames\r\n    suites = [self.loadTestsFromName(name, module) for name in names]\r\n  File \"/Users/rodrigo.velez/.pyenv/versions/2.7.14/lib/python2.7/unittest/loader.py\", line 91, in loadTestsFromName\r\n    module = __import__('.'.join(parts_copy))\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/src/unittest/python/services/test_certificate_service.py\", line 13, in <module>\r\n    from deeplaser.certificate.crypto.standard import TokenGeneratorOsCrypto\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/src/main/python/deeplaser/certificate/crypto/standard.py\", line 11, in <module>\r\n    from oscrypto import asymmetric\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/oscrypto/asymmetric.py\", line 15, in <module>\r\n    from .kdf import pbkdf2, pbkdf2_iteration_calculator\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/oscrypto/kdf.py\", line 9, in <module>\r\n    from .util import rand_bytes\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/oscrypto/util.py\", line 10, in <module>\r\n    from ._osx.util import rand_bytes\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/oscrypto/_osx/util.py\", line 208, in <module>\r\n    from .._openssl._libcrypto import libcrypto\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/oscrypto/_openssl/_libcrypto.py\", line 14, in <module>\r\n    from ._libcrypto_ctypes import (\r\n  File \"/Users/rodrigo.velez/First_steps/deeplaser-core/deeplaser-core-env/lib/python2.7/site-packages/oscrypto/_openssl/_libcrypto_ctypes.py\", line 668, in <module>\r\n    raise FFIEngineError('Error initializing ctypes')\r\nFFIEngineError: Error initializing ctypes\r\n------------------------------------------------------------\r\nBUILD FAILED - Error initializing ctypes\r\n------------------------------------------------------------\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/21", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/21/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/21/events", "html_url": "https://github.com/wbond/oscrypto/issues/21", "id": 261156164, "node_id": "MDU6SXNzdWUyNjExNTYxNjQ=", "number": 21, "title": "Signature validation with mismatched key size or algorithms", "user": {"login": "mttcpr", "id": 17837811, "node_id": "MDQ6VXNlcjE3ODM3ODEx", "avatar_url": "https://avatars2.githubusercontent.com/u/17837811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mttcpr", "html_url": "https://github.com/mttcpr", "followers_url": "https://api.github.com/users/mttcpr/followers", "following_url": "https://api.github.com/users/mttcpr/following{/other_user}", "gists_url": "https://api.github.com/users/mttcpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mttcpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mttcpr/subscriptions", "organizations_url": "https://api.github.com/users/mttcpr/orgs", "repos_url": "https://api.github.com/users/mttcpr/repos", "events_url": "https://api.github.com/users/mttcpr/events{/privacy}", "received_events_url": "https://api.github.com/users/mttcpr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-28T00:17:48Z", "updated_at": "2017-12-14T18:57:00Z", "closed_at": "2017-12-14T18:57:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not exactly a bug, more a suggestion.\r\n\r\nUsing windows, if you try to verify a 2048 bit signature with a 4096 bit key (or vice versa I assume), you get this back:\r\n\r\n> OSError: NTSTATUS error 0xC000000D: An invalid parameter was passed to a service or function\r\n\r\nFrom a usability standpoint I think this condition should raise [for example] SignatureError('Signature length does not match RSA key size') instead of sending back an OSError or a ValueError for algorithm mismatch. \r\n\r\nAs a caller, I want to answer \"Can I verify this signature with this public key (certificate)?\" Assuming I pass in valid objects, I think it makes sense to get a \"No\" response (e.g. SignatureError) back and save the ValueError and OSError for stuff that can't be handled a gracefully like \"I can't verify this because I don't support MD2\"\r\n\r\nFor example, in CertValidator - validate.py, _self_signed(cert), if the algorithm or key size is not matched to the signature in the certificate then this error will pop past your oscrypto.errors.SignatureError catch block: \r\n\r\n```\r\n    try:\r\n        key_object = asymmetric.load_certificate(cert)\r\n        verify_func(key_object, cert['signature_value'].native, cert['tbs_certificate'].dump(), hash_algo)\r\n        return True\r\n\r\n    except (oscrypto.errors.SignatureError):\r\n        return False\r\n```\r\n\t\t\r\nThe _validate_path function has the same issue and could realistically expose this if the caller didn't ensure they were doing the algorithm matching and key size checks during path building.\r\n\r\nIt seems there are several ways you might address handling these conditions, including saying you want those errors to propagate back up and doing nothing! However, if you do agree that this should be addressed somewhere, I imagine you'd prefer the fix not be per-platform. That said, the particular case that brought this to my attention was mismatched rsa key/sig size on Windows. I noted that if this code were changed\r\n\r\n```\r\nfailure = res == BcryptConst.STATUS_INVALID_SIGNATURE\r\nfailure = failure or (rsa_pss_padding and res == BcryptConst.STATUS_INVALID_PARAMETER)\r\n\r\n```\r\nto\r\n```\r\nfailure = res == BcryptConst.STATUS_INVALID_SIGNATURE or res == BcryptConst.STATUS_INVALID_PARAMETER`\r\n```\r\n\r\nthat it would give the desired SignatureError answer for this particular case. Given you're already abstracting away STATUS_INVALID_PARAMETER in the rsa_pss_padding case perhaps it makes sense to simply always do so as it might pop up for other unimagined conditions? Obviously the better solution for my exact use case would be to never get to that line and raise SignatureError('Signature length does not match RSA key size') farther up the stack.\r\n\r\nThoughts?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/18", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/18/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/18/events", "html_url": "https://github.com/wbond/oscrypto/issues/18", "id": 235899212, "node_id": "MDU6SXNzdWUyMzU4OTkyMTI=", "number": 18, "title": "In OpenBSD oscrypto is not depending on cffi package", "user": {"login": "oherrala", "id": 89251, "node_id": "MDQ6VXNlcjg5MjUx", "avatar_url": "https://avatars3.githubusercontent.com/u/89251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oherrala", "html_url": "https://github.com/oherrala", "followers_url": "https://api.github.com/users/oherrala/followers", "following_url": "https://api.github.com/users/oherrala/following{/other_user}", "gists_url": "https://api.github.com/users/oherrala/gists{/gist_id}", "starred_url": "https://api.github.com/users/oherrala/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oherrala/subscriptions", "organizations_url": "https://api.github.com/users/oherrala/orgs", "repos_url": "https://api.github.com/users/oherrala/repos", "events_url": "https://api.github.com/users/oherrala/events{/privacy}", "received_events_url": "https://api.github.com/users/oherrala/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-06-14T14:30:12Z", "updated_at": "2018-10-11T14:28:28Z", "closed_at": "2018-03-22T02:13:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "OpenBSD (-current, snapshot 2016-06-14) using Python 3.6 from Ports is missing Python `cffi` package. I didn't test other Python versions, but let me know if it's needed.\r\n\r\nShould `oscrypto` depend on `cffi` and install it if missing? This helps users who install Python packages with `pip install`.\r\n\r\nWorkaround (or solution) for this issue in OpenBSD is to install `py3-cffi` package from Ports. However, hunting missing Python packages from ports is not solution for users without root access.\r\n\r\nWhen cffi is missing, the user gets following traceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/_libcrypto_cffi.py\", line 13, in <module>\r\n    from cffi import FFI\r\nModuleNotFoundError: No module named 'cffi'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/_libcrypto.py\", line 8, in <module>\r\n    from ._libcrypto_cffi import (\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/_libcrypto_cffi.py\", line 16, in <module>\r\n    raise FFIEngineError('Error importing cffi')\r\noscrypto._ffi.FFIEngineError: Error importing cffi\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/_libcrypto_ctypes.py\", line 258, in <module>\r\n    libcrypto.EVP_MD_CTX_new.argtypes = []\r\n  File \"/usr/local/lib/python3.6/ctypes/__init__.py\", line 361, in __getattr__\r\n    func = self.__getitem__(name)\r\n  File \"/usr/local/lib/python3.6/ctypes/__init__.py\", line 366, in __getitem__\r\n    func = self._FuncPtr((name_or_ordinal, self))\r\nAttributeError: Unable to resolve symbol\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/trytls\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/site-packages/trytls/runner.py\", line 177, in main\r\n    bundle = bundles.load_bundle(bundle_name)\r\n  File \"/usr/local/lib/python3.6/site-packages/trytls/bundles/__init__.py\", line 11, in load_bundle\r\n    return entry.load()\r\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 2268, in load\r\n    return self.resolve()\r\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 2274, in resolve\r\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\r\n  File \"/usr/local/lib/python3.6/site-packages/trytls/bundles/https.py\", line 15, in <module>\r\n    from ..gencert import gencert\r\n  File \"/usr/local/lib/python3.6/site-packages/trytls/gencert.py\", line 3, in <module>\r\n    from oscrypto import asymmetric\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/asymmetric.py\", line 15, in <module>\r\n    from .kdf import pbkdf2, pbkdf2_iteration_calculator\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/kdf.py\", line 9, in <module>\r\n    from .util import rand_bytes\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/util.py\", line 14, in <module>\r\n    from ._openssl.util import rand_bytes\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/util.py\", line 6, in <module>\r\n    from ._libcrypto import libcrypto, libcrypto_version_info, handle_openssl_error\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/_libcrypto.py\", line 14, in <module>\r\n    from ._libcrypto_ctypes import (\r\n  File \"/usr/local/lib/python3.6/site-packages/oscrypto/_openssl/_libcrypto_ctypes.py\", line 668, in <module>\r\n    raise FFIEngineError('Error initializing ctypes')\r\noscrypto._ffi.FFIEngineError: Error initializing ctypes\r\n```\r\n\r\nFor cross referencing this issue is also in TryTLS repo: https://github.com/ouspg/trytls/issues/307\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/17", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/17/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/17/events", "html_url": "https://github.com/wbond/oscrypto/issues/17", "id": 200641226, "node_id": "MDU6SXNzdWUyMDA2NDEyMjY=", "number": 17, "title": "OSX Error decoding fails with incorrect pub key", "user": {"login": "peter-conalgo", "id": 1482781, "node_id": "MDQ6VXNlcjE0ODI3ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1482781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-conalgo", "html_url": "https://github.com/peter-conalgo", "followers_url": "https://api.github.com/users/peter-conalgo/followers", "following_url": "https://api.github.com/users/peter-conalgo/following{/other_user}", "gists_url": "https://api.github.com/users/peter-conalgo/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-conalgo/subscriptions", "organizations_url": "https://api.github.com/users/peter-conalgo/orgs", "repos_url": "https://api.github.com/users/peter-conalgo/repos", "events_url": "https://api.github.com/users/peter-conalgo/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-conalgo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-13T14:21:28Z", "updated_at": "2017-01-17T18:54:14Z", "closed_at": "2017-01-17T18:54:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "When constructing an EC public key from invalid X, Y coordinates (ie. not on the curve), the error handling code in `oscrypto/_osx/_core_foundation.py` fails due to a NULL c-pointer. Root cause is expecting `CFHelpers.cf_string_to_unicode` to return None if given a null `CFStringRef`. It seems to raise an exception instead:\r\n\r\n```\r\n...\r\n  File \".../ENV/lib/python3.5/site-packages/oscrypto/_osx/_core_foundation.py\", line 43, in handle_cf_error\r\n    output = CFHelpers.cf_string_to_unicode(cf_string_ref)\r\n  File \".../ENV/lib/python3.5/site-packages/oscrypto/_osx/_core_foundation_cffi.py\", line 248, in cf_string_to_unicode\r\n    string = ffi.string(string_ptr)\r\n  File \".../ENV/lib/python3.5/site-packages/cffi/api.py\", line 300, in string\r\n    return self._backend.string(cdata, maxlen)\r\nRuntimeError: cannot use string() on <cdata 'char *' NULL>\r\n```\r\n\r\nHere is a snippet of code that demonstrates the issue:\r\n\r\n```python\r\nfrom oscrypto import asymmetric\r\nfrom binascii import a2b_hex, b2a_hex\r\nfrom asn1crypto.keys import PublicKeyInfo, PublicKeyAlgorithmId, PublicKeyAlgorithm\r\nfrom asn1crypto.keys import ECPointBitString, NamedCurve\r\n\r\ndef test_it():\r\n    if 0:\r\n        pub_key, _ = asymmetric.generate_pair('ec', curve=u'secp256r1')\r\n        x,y = pub_key.asn1['public_key'].to_coords()\r\n    else:\r\n        x, y = 123, 456\r\n\r\n    algo = PublicKeyAlgorithm()\r\n    algo['algorithm'] = PublicKeyAlgorithmId('ec')\r\n    algo['parameters'] = NamedCurve('secp256r1')\r\n\r\n    pubkey = PublicKeyInfo()\r\n    pubkey['algorithm'] = algo\r\n    pubkey['public_key'] = ECPointBitString.from_coords(x, y)\r\n\r\n    pub_key2 = asymmetric.load_public_key(pubkey.dump())\r\n```\r\n\r\nI've already patched my copy of this code to catch and handle this specific case, but I wanted to report it anyway. The remainder of the error handling code works and give \"Invalid Key\" for this case, which seems appropriate.\r\n\r\nHere are some version numbers from my machine:\r\n```\r\nDarwin x.local 15.6.0 Darwin Kernel Version 15.6.0: Mon Aug 29 20:21:34 PDT 2016; root:xnu-3248.60.11~1/RELEASE_X86_64 x86_64\r\n\r\nasn1crypto==0.19.0\r\ncertbuilder==0.14.2\r\ncffi==1.9.1\r\nidna==2.2\r\noscrypto==0.17.2\r\npyasn1==0.1.9\r\npycparser==2.17\r\nsix==1.10.0\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/16", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/16/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/16/events", "html_url": "https://github.com/wbond/oscrypto/issues/16", "id": 171075542, "node_id": "MDU6SXNzdWUxNzEwNzU1NDI=", "number": 16, "title": "asymmetric.generate_pair fails on Homebrew Python 2.7 + virtualenv", "user": {"login": "jviide", "id": 19776768, "node_id": "MDQ6VXNlcjE5Nzc2NzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/19776768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jviide", "html_url": "https://github.com/jviide", "followers_url": "https://api.github.com/users/jviide/followers", "following_url": "https://api.github.com/users/jviide/following{/other_user}", "gists_url": "https://api.github.com/users/jviide/gists{/gist_id}", "starred_url": "https://api.github.com/users/jviide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jviide/subscriptions", "organizations_url": "https://api.github.com/users/jviide/orgs", "repos_url": "https://api.github.com/users/jviide/repos", "events_url": "https://api.github.com/users/jviide/events{/privacy}", "received_events_url": "https://api.github.com/users/jviide/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 220107723, "node_id": "MDU6TGFiZWwyMjAxMDc3MjM=", "url": "https://api.github.com/repos/wbond/oscrypto/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-08-14T19:57:02Z", "updated_at": "2016-09-20T01:19:20Z", "closed_at": "2016-08-28T01:12:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I bumped into a situation similar to #7, where calling `asymmetric.generate_pair` using Python 2.7 and virtualenv fails with `OSError: The user name or passphrase you entered is not correct.`. The twist is that I wasn't using the system Python 2.7, but one installed through [Homebrew](http://brew.sh/).\n\nThe issue can be reproduced by initializing and activating a new virtualenv using `python2.7` from Homebrew. It should be noted that in this case Homebrew files aren't in the usual /usr/local path, but inside the test user's home directory.\n\n``` sh\n$ which python2.7\n/Users/test/homebrew/bin/python2.7\n$ python2.7 -m virtualenv test\n$ source test/bin/activate\n(test) $ pip2.7 install oscrypto\n(test) $ python2.7\n```\n\nNow calling `asymmetric.generate_pair` in the virtualenv fails:\n\n``` python\n>>> from oscrypto import asymmetric\n>>> asymmetric.generate_pair(\"rsa\", 4096)\nTraceback (most recent call last):\n  ...\nOSError: The user name or passphrase you entered is not correct.\n```\n\nI suspect the problem is related to [lines 57-58 in oscrypto/asymmetric.py](https://github.com/wbond/oscrypto/blob/d5fa796fc792f08372c477c94b3d5eef9c564331/oscrypto/asymmetric.py#L57-L58) that check the `sys.real_prefix` path. In my scenario `real_prefix` is set, but doesn't begin with `_system_prefix`:\n\n``` python\n>>> import sys\n>>> sys.real_prefix\n'/Users/test/homebrew/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7'\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/15", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/15/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/15/events", "html_url": "https://github.com/wbond/oscrypto/issues/15", "id": 160283490, "node_id": "MDU6SXNzdWUxNjAyODM0OTA=", "number": 15, "title": "trust_list: Add OID info/filtering", "user": {"login": "wbond", "id": 41734, "node_id": "MDQ6VXNlcjQxNzM0", "avatar_url": "https://avatars0.githubusercontent.com/u/41734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbond", "html_url": "https://github.com/wbond", "followers_url": "https://api.github.com/users/wbond/followers", "following_url": "https://api.github.com/users/wbond/following{/other_user}", "gists_url": "https://api.github.com/users/wbond/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbond/subscriptions", "organizations_url": "https://api.github.com/users/wbond/orgs", "repos_url": "https://api.github.com/users/wbond/repos", "events_url": "https://api.github.com/users/wbond/events{/privacy}", "received_events_url": "https://api.github.com/users/wbond/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-06-14T21:04:01Z", "updated_at": "2016-07-12T00:06:55Z", "closed_at": "2016-06-24T13:30:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Package Control will be switching to use `oscrypto.trust_list` for TLS trust roots to solve:\n- https://github.com/wbond/package_control/issues/1002\n- https://github.com/wbond/package_control/issues/1079\n\nIn order to do this, we need to tweak `trust_list.get_list()`. Ideally we need:\n1. A way to filter `get_list()` by one or more [key usage strings](https://github.com/wbond/asn1crypto/blob/master/asn1crypto/x509.py#L395-L406)/[extended key usage OIDs](https://github.com/wbond/asn1crypto/blob/master/asn1crypto/x509.py#L1531-L1595) \n2. A new method such as `get_list()` that will return the list os trust roots along with a `set()` of their key usage names and extended key usage OIDs\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/14", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/14/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/14/events", "html_url": "https://github.com/wbond/oscrypto/issues/14", "id": 149543374, "node_id": "MDU6SXNzdWUxNDk1NDMzNzQ=", "number": 14, "title": "Remove _STACK struct definition from _openssl", "user": {"login": "wbond", "id": 41734, "node_id": "MDQ6VXNlcjQxNzM0", "avatar_url": "https://avatars0.githubusercontent.com/u/41734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbond", "html_url": "https://github.com/wbond", "followers_url": "https://api.github.com/users/wbond/followers", "following_url": "https://api.github.com/users/wbond/following{/other_user}", "gists_url": "https://api.github.com/users/wbond/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbond/subscriptions", "organizations_url": "https://api.github.com/users/wbond/orgs", "repos_url": "https://api.github.com/users/wbond/repos", "events_url": "https://api.github.com/users/wbond/events{/privacy}", "received_events_url": "https://api.github.com/users/wbond/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-04-19T18:27:00Z", "updated_at": "2016-05-04T02:30:23Z", "closed_at": "2016-05-04T02:30:23Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Instead of defining the struct contents, which are liable to change, `sk_num()` and `sk_value()` should be used instead.\n\nOpenSSL 0.9.8y:\n\n```\nint sk_num(const STACK *);\nchar *sk_value(const STACK *, int);\n```\n\nOpenSSL 1.1.0:\n\n```\nint sk_num(const _STACK *);\nvoid *sk_value(const _STACK *, int);\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/12", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/12/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/12/events", "html_url": "https://github.com/wbond/oscrypto/issues/12", "id": 144339042, "node_id": "MDU6SXNzdWUxNDQzMzkwNDI=", "number": 12, "title": "test_tls_connect_google fails in eu1 zone", "user": {"login": "nresare", "id": 541939, "node_id": "MDQ6VXNlcjU0MTkzOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/541939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nresare", "html_url": "https://github.com/nresare", "followers_url": "https://api.github.com/users/nresare/followers", "following_url": "https://api.github.com/users/nresare/following{/other_user}", "gists_url": "https://api.github.com/users/nresare/gists{/gist_id}", "starred_url": "https://api.github.com/users/nresare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nresare/subscriptions", "organizations_url": "https://api.github.com/users/nresare/orgs", "repos_url": "https://api.github.com/users/nresare/repos", "events_url": "https://api.github.com/users/nresare/events{/privacy}", "received_events_url": "https://api.github.com/users/nresare/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-03-29T17:49:32Z", "updated_at": "2016-03-30T08:24:20Z", "closed_at": "2016-03-30T08:24:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have now tracked down the test case failure that we are seeing in our environment. The data returned from www.gooole.com:443 contains a HTTP 302 redirecting to www.google.ie and the html contained in the response has all it's HTML tags in caps. This breaks the test case which attempts to read until b'&lt;/html&gt;'.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/11", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/11/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/11/events", "html_url": "https://github.com/wbond/oscrypto/issues/11", "id": 141046298, "node_id": "MDU6SXNzdWUxNDEwNDYyOTg=", "number": 11, "title": "Add Ability to Generate DHParameters", "user": {"login": "wbond", "id": 41734, "node_id": "MDQ6VXNlcjQxNzM0", "avatar_url": "https://avatars0.githubusercontent.com/u/41734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbond", "html_url": "https://github.com/wbond", "followers_url": "https://api.github.com/users/wbond/followers", "following_url": "https://api.github.com/users/wbond/following{/other_user}", "gists_url": "https://api.github.com/users/wbond/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbond/subscriptions", "organizations_url": "https://api.github.com/users/wbond/orgs", "repos_url": "https://api.github.com/users/wbond/repos", "events_url": "https://api.github.com/users/wbond/events{/privacy}", "received_events_url": "https://api.github.com/users/wbond/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 220107725, "node_id": "MDU6TGFiZWwyMjAxMDc3MjU=", "url": "https://api.github.com/repos/wbond/oscrypto/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-03-15T17:34:49Z", "updated_at": "2016-03-22T01:50:25Z", "closed_at": "2016-03-22T01:50:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/9", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/9/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/9/events", "html_url": "https://github.com/wbond/oscrypto/issues/9", "id": 123445620, "node_id": "MDU6SXNzdWUxMjM0NDU2MjA=", "number": 9, "title": "Typo in docs/asymmetric.md docs ", "user": {"login": "stxlvt", "id": 15009379, "node_id": "MDQ6VXNlcjE1MDA5Mzc5", "avatar_url": "https://avatars2.githubusercontent.com/u/15009379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stxlvt", "html_url": "https://github.com/stxlvt", "followers_url": "https://api.github.com/users/stxlvt/followers", "following_url": "https://api.github.com/users/stxlvt/following{/other_user}", "gists_url": "https://api.github.com/users/stxlvt/gists{/gist_id}", "starred_url": "https://api.github.com/users/stxlvt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stxlvt/subscriptions", "organizations_url": "https://api.github.com/users/stxlvt/orgs", "repos_url": "https://api.github.com/users/stxlvt/repos", "events_url": "https://api.github.com/users/stxlvt/events{/privacy}", "received_events_url": "https://api.github.com/users/stxlvt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-12-22T09:22:32Z", "updated_at": "2016-03-14T14:18:23Z", "closed_at": "2016-03-14T14:18:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "In line 1 and 3, s/assymetric/asymmetric/\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/7", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/7/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/7/events", "html_url": "https://github.com/wbond/oscrypto/issues/7", "id": 118056737, "node_id": "MDU6SXNzdWUxMTgwNTY3Mzc=", "number": 7, "title": "OSError: None in virtualenv", "user": {"login": "the01", "id": 4753009, "node_id": "MDQ6VXNlcjQ3NTMwMDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4753009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the01", "html_url": "https://github.com/the01", "followers_url": "https://api.github.com/users/the01/followers", "following_url": "https://api.github.com/users/the01/following{/other_user}", "gists_url": "https://api.github.com/users/the01/gists{/gist_id}", "starred_url": "https://api.github.com/users/the01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the01/subscriptions", "organizations_url": "https://api.github.com/users/the01/orgs", "repos_url": "https://api.github.com/users/the01/repos", "events_url": "https://api.github.com/users/the01/events{/privacy}", "received_events_url": "https://api.github.com/users/the01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 220107723, "node_id": "MDU6TGFiZWwyMjAxMDc3MjM=", "url": "https://api.github.com/repos/wbond/oscrypto/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-11-20T14:52:37Z", "updated_at": "2015-12-02T20:34:30Z", "closed_at": "2015-12-02T20:34:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\nI am trying to run oscrypto (latest pip install) inside a virtualenv on OSX 10.10 (python2.7).\nAs a test one-liner:\n\n``` bash\npython -c \"import oscrypto.asymmetric as asym;asym.generate_pair('rsa', 1024)\"\n```\n\nand end up with:\n\n``` python\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"env/lib/python2.7/site-packages/oscrypto/_osx/asymmetric.py\", line 388, in generate_pair\n    handle_sec_error(result)\n  File \"env/lib/python2.7/site-packages/oscrypto/_osx/_security.py\", line 47, in handle_sec_error\n    raise exception_class(output)\nOSError: None\n```\n\nany ideas or reasons, why this wouldn't work?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wbond/oscrypto/issues/2", "repository_url": "https://api.github.com/repos/wbond/oscrypto", "labels_url": "https://api.github.com/repos/wbond/oscrypto/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/wbond/oscrypto/issues/2/comments", "events_url": "https://api.github.com/repos/wbond/oscrypto/issues/2/events", "html_url": "https://github.com/wbond/oscrypto/issues/2", "id": 103598736, "node_id": "MDU6SXNzdWUxMDM1OTg3MzY=", "number": 2, "title": "Implement none hash_algorithm for rsa_pkcs1v15_sign", "user": {"login": "asyd", "id": 334868, "node_id": "MDQ6VXNlcjMzNDg2OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/334868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asyd", "html_url": "https://github.com/asyd", "followers_url": "https://api.github.com/users/asyd/followers", "following_url": "https://api.github.com/users/asyd/following{/other_user}", "gists_url": "https://api.github.com/users/asyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/asyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asyd/subscriptions", "organizations_url": "https://api.github.com/users/asyd/orgs", "repos_url": "https://api.github.com/users/asyd/repos", "events_url": "https://api.github.com/users/asyd/events{/privacy}", "received_events_url": "https://api.github.com/users/asyd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-08-27T21:28:23Z", "updated_at": "2015-08-29T15:51:34Z", "closed_at": "2015-08-29T15:51:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "To implement the https://github.com/spark/firmware protocol, I need to perform a signature with PKCS15 padding, but without applying a hash.\n\nThanks you!\n", "performed_via_github_app": null, "score": 1.0}]}