{"total_count": 5, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/16", "repository_url": "https://api.github.com/repos/ska-sa/fakenewsredis", "labels_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/16/comments", "events_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/16/events", "html_url": "https://github.com/ska-sa/fakenewsredis/issues/16", "id": 298240958, "node_id": "MDU6SXNzdWUyOTgyNDA5NTg=", "number": 16, "title": "Flesh out the scripting support", "user": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 746429868, "node_id": "MDU6TGFiZWw3NDY0Mjk4Njg=", "url": "https://api.github.com/repos/ska-sa/fakenewsredis/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-19T11:22:44Z", "updated_at": "2018-03-23T10:33:36Z", "closed_at": "2018-03-23T10:33:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "While #9 provided the core components by supporting `EVAL`, there are still other commands like `EVALSHA` and `SCRIPT LOAD` to implement. Additionally, redis-py provides a `Script` convenience class that needs to be emulated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/15", "repository_url": "https://api.github.com/repos/ska-sa/fakenewsredis", "labels_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/15/comments", "events_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/15/events", "html_url": "https://github.com/ska-sa/fakenewsredis/issues/15", "id": 298240501, "node_id": "MDU6SXNzdWUyOTgyNDA1MDE=", "number": 15, "title": "Lua environmental differences", "user": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 746429868, "node_id": "MDU6TGFiZWw3NDY0Mjk4Njg=", "url": "https://api.github.com/repos/ska-sa/fakenewsredis/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-19T11:20:56Z", "updated_at": "2018-03-23T10:33:47Z", "closed_at": "2018-03-23T10:33:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "The Lua scripting support (EVAL) does not perfectly emulate the environment available to a real redis script. Some known differences are:\r\n- Libraries such as cjson are not loaded\r\n- Setting of global variables is only checked each time a redis function is called, rather than being enforced by a metatable.\r\n- dofile and readfile are not disabled.\r\n- Various functions on the redis object are not implemented e.g. `redis.sha1hex`, `redis.log`\r\n- It doesn't prevent mutating commands after a random command (this will be a major task since it requires knowing which commands are mutating and/or random).\r\n- The random seed might not be reset with every script (untested)\r\n\r\nFor more details see the [redis documentation](https://redis.io/commands/eval) and [implementation(https://github.com/antirez/redis/blob/32ac4c64baf00747da1acc0cc61ee236922e2dcf/src/scripting.c#L867-L885).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/7", "repository_url": "https://api.github.com/repos/ska-sa/fakenewsredis", "labels_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/7/comments", "events_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/7/events", "html_url": "https://github.com/ska-sa/fakenewsredis/issues/7", "id": 291215320, "node_id": "MDU6SXNzdWUyOTEyMTUzMjA=", "number": 7, "title": "Set with invalid expiry time should not set key", "user": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-01-24T13:49:43Z", "updated_at": "2018-01-24T14:08:46Z", "closed_at": "2018-01-24T14:08:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "A call like `set('x', 'y', ex=-1)` should have no side effects (and does not in real redis), but fakenewsredis 0.9.3 still sets 'x' to 'y' but does not set an expiry time.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/5", "repository_url": "https://api.github.com/repos/ska-sa/fakenewsredis", "labels_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/5/comments", "events_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/5/events", "html_url": "https://github.com/ska-sa/fakenewsredis/issues/5", "id": 289973821, "node_id": "MDU6SXNzdWUyODk5NzM4MjE=", "number": 5, "title": "Update to match redis-py 2.10.6", "user": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-01-19T13:21:40Z", "updated_at": "2018-01-24T14:07:38Z", "closed_at": "2018-01-24T14:07:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "There are a few unit tests that fail when run against the latest redis-py (2.10.6):\r\n```\r\n======================================================================\r\nERROR: test_set_ex_should_expire_value (test_fakenewsredis.TestRealRedis)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/bmerry/work/sdp/git/fakenewsredis/test_fakenewsredis.py\", line 3145, in test_set_ex_should_expire_value\r\n    self.redis.set('foo', 'bar', ex=0)\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/client.py\", line 1171, in set\r\n    return self.execute_command('SET', *pieces)\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/client.py\", line 668, in execute_command\r\n    return self.parse_response(connection, command_name, **options)\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/client.py\", line 680, in parse_response\r\n    response = connection.read_response()\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/connection.py\", line 629, in read_response\r\n    raise response\r\nResponseError: invalid expire time in set\r\n\r\n======================================================================\r\nERROR: test_set_ex_should_expire_value (test_fakenewsredis.TestRealRedisDecodeResponses)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/bmerry/work/sdp/git/fakenewsredis/test_fakenewsredis.py\", line 3145, in test_set_ex_should_expire_value\r\n    self.redis.set('foo', 'bar', ex=0)\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/client.py\", line 1171, in set\r\n    return self.execute_command('SET', *pieces)\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/client.py\", line 668, in execute_command\r\n    return self.parse_response(connection, command_name, **options)\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/client.py\", line 680, in parse_response\r\n    response = connection.read_response()\r\n  File \"/home/bmerry/work/sdp/env/local/lib/python2.7/site-packages/redis/connection.py\", line 629, in read_response\r\n    raise response\r\nResponseError: invalid expire time in set\r\n```\r\n\r\nThis is due to a change in how a zero expiry time is interpreted.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/2", "repository_url": "https://api.github.com/repos/ska-sa/fakenewsredis", "labels_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/2/comments", "events_url": "https://api.github.com/repos/ska-sa/fakenewsredis/issues/2/events", "html_url": "https://github.com/ska-sa/fakenewsredis/issues/2", "id": 273254247, "node_id": "MDU6SXNzdWUyNzMyNTQyNDc=", "number": 2, "title": "Mutating operations incorrectly clear expiry", "user": {"login": "bmerry", "id": 1963944, "node_id": "MDQ6VXNlcjE5NjM5NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1963944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmerry", "html_url": "https://github.com/bmerry", "followers_url": "https://api.github.com/users/bmerry/followers", "following_url": "https://api.github.com/users/bmerry/following{/other_user}", "gists_url": "https://api.github.com/users/bmerry/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmerry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmerry/subscriptions", "organizations_url": "https://api.github.com/users/bmerry/orgs", "repos_url": "https://api.github.com/users/bmerry/repos", "events_url": "https://api.github.com/users/bmerry/events{/privacy}", "received_events_url": "https://api.github.com/users/bmerry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-12T18:43:17Z", "updated_at": "2017-11-12T19:55:20Z", "closed_at": "2017-11-12T19:55:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "A number of operations modify an existing value, then assign back to `self._db`, which has the side-effect of clearing the expiry time. According to the redis documentation, only operations that completely replace a key (rather than modifying it) clear the expiry. I haven't written any tests yet, but looking at the code, it is probably at least\r\n- decr, incr, incrby, incrbyfloat\r\n- setbit\r\n- ltrim\r\n- rpoplpush\r\n\r\nSome other operations where I'm not sure what redis will do\r\n- getset\r\n- rename, renamenx", "performed_via_github_app": null, "score": 1.0}]}