{"total_count": 147, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/celery/django-celery-beat/issues/357", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/357/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/357/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/357/events", "html_url": "https://github.com/celery/django-celery-beat/issues/357", "id": 681123497, "node_id": "MDU6SXNzdWU2ODExMjM0OTc=", "number": 357, "title": "Changelog on Periodic Tasks", "user": {"login": "caiolopes", "id": 4184169, "node_id": "MDQ6VXNlcjQxODQxNjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4184169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caiolopes", "html_url": "https://github.com/caiolopes", "followers_url": "https://api.github.com/users/caiolopes/followers", "following_url": "https://api.github.com/users/caiolopes/following{/other_user}", "gists_url": "https://api.github.com/users/caiolopes/gists{/gist_id}", "starred_url": "https://api.github.com/users/caiolopes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caiolopes/subscriptions", "organizations_url": "https://api.github.com/users/caiolopes/orgs", "repos_url": "https://api.github.com/users/caiolopes/repos", "events_url": "https://api.github.com/users/caiolopes/events{/privacy}", "received_events_url": "https://api.github.com/users/caiolopes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-18T15:15:02Z", "updated_at": "2020-08-18T15:40:16Z", "closed_at": "2020-08-18T15:40:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nIs there a way of auditing changes on a periodic tasks?\r\n\r\nWho changed and when and a plus would be: why.\r\n\r\n* Celery Version: 4.4.2 (cliffs)\r\n* Celery-Beat Version: 1.5.0\r\n\r\n### Exact steps to reproduce the issue:\r\n\r\n1. Disable a periodic task\r\n2. Try to find when, which user changed and why\r\n\r\n### Detailed information\r\n\r\nPeriodic Tasks can be very crucial to a application, and if someone change it, can we be able to audit by having a log of those changes?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/345", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/345/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/345/events", "html_url": "https://github.com/celery/django-celery-beat/issues/345", "id": 629731619, "node_id": "MDU6SXNzdWU2Mjk3MzE2MTk=", "number": 345, "title": "the default timezone of CrontabSchedule should not be a hardcode", "user": {"login": "belongwqz", "id": 6919651, "node_id": "MDQ6VXNlcjY5MTk2NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6919651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/belongwqz", "html_url": "https://github.com/belongwqz", "followers_url": "https://api.github.com/users/belongwqz/followers", "following_url": "https://api.github.com/users/belongwqz/following{/other_user}", "gists_url": "https://api.github.com/users/belongwqz/gists{/gist_id}", "starred_url": "https://api.github.com/users/belongwqz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/belongwqz/subscriptions", "organizations_url": "https://api.github.com/users/belongwqz/orgs", "repos_url": "https://api.github.com/users/belongwqz/repos", "events_url": "https://api.github.com/users/belongwqz/events{/privacy}", "received_events_url": "https://api.github.com/users/belongwqz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-03T06:34:15Z", "updated_at": "2020-06-07T23:33:24Z", "closed_at": "2020-06-07T23:33:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nthe default timezone of CrontabSchedule current is 'UTC', can it keep the same with CELERY_TIMEZONE dynamically.  \r\n\r\n* Celery Version: 4.4.3\r\n* Celery-Beat Version: 2.0.0\r\n\r\n### Exact steps to reproduce the issue:\r\n1. open `xxx/admin/django_celery_beat/crontabschedule/add/ `  to add a crontabschedule\r\n2. the Cron Timezone is UTC\r\n\r\n### Detailed information\r\n\r\nwhen is write `CELERY_TIMEZONE = 'Asia/Shanghai'` in the settings.py of my projects\uff0ccan the timezone of CrontabSchedule is 'Asia/Shanghai' but not 'UTC'\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/338", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/338/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/338/events", "html_url": "https://github.com/celery/django-celery-beat/issues/338", "id": 610627684, "node_id": "MDU6SXNzdWU2MTA2Mjc2ODQ=", "number": 338, "title": "Celery beat not working after upgrading to django 3.0.5", "user": {"login": "shivamzxzx", "id": 23228236, "node_id": "MDQ6VXNlcjIzMjI4MjM2", "avatar_url": "https://avatars3.githubusercontent.com/u/23228236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivamzxzx", "html_url": "https://github.com/shivamzxzx", "followers_url": "https://api.github.com/users/shivamzxzx/followers", "following_url": "https://api.github.com/users/shivamzxzx/following{/other_user}", "gists_url": "https://api.github.com/users/shivamzxzx/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivamzxzx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivamzxzx/subscriptions", "organizations_url": "https://api.github.com/users/shivamzxzx/orgs", "repos_url": "https://api.github.com/users/shivamzxzx/repos", "events_url": "https://api.github.com/users/shivamzxzx/events{/privacy}", "received_events_url": "https://api.github.com/users/shivamzxzx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-01T08:10:55Z", "updated_at": "2020-06-03T05:52:02Z", "closed_at": "2020-05-01T10:54:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\ncelery==4.4.2\r\ndjango-celery==3.3.1 \r\n\r\n### Exact steps to reproduce the issue:\r\n1. Run command -> celery -A YOUR_PROJECT beat --loglevel=info\r\n\r\n### Detailed information\r\n\r\nerror traceback - \r\n\r\n[2020-05-01 07:37:48,332: WARNING/MainProcess] Traceback (most recent call last):\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/kombu/utils/objects.py\", line 42, in get\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] return obj.dict[self.name]\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] KeyError\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] :\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] 'scheduler'\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] During handling of the above exception, another exception occurred:\r\n[2020-05-01 07:37:48,333: WARNING/MainProcess] Traceback (most recent call last):\r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/bin/celery\", line 10, in \r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] sys.exit(main())\r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/main.py\", line 16, in main\r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] _main()\r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/celery.py\", line 322, in main\r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] cmd.execute_from_commandline(argv)\r\n[2020-05-01 07:37:48,334: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/celery.py\", line 495, in execute_from_commandline\r\n[2020-05-01 07:37:48,335: WARNING/MainProcess] super(CeleryCommand, self).execute_from_commandline(argv)))\r\n[2020-05-01 07:37:48,335: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/base.py\", line 305, in execute_from_commandline\r\n[2020-05-01 07:37:48,335: WARNING/MainProcess] return self.handle_argv(self.prog_name, argv[1:])\r\n[2020-05-01 07:37:48,335: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/celery.py\", line 487, in handle_argv\r\n[2020-05-01 07:37:48,336: WARNING/MainProcess] return self.execute(command, argv)\r\n[2020-05-01 07:37:48,336: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/celery.py\", line 419, in execute\r\n[2020-05-01 07:37:48,336: WARNING/MainProcess] ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\r\n[2020-05-01 07:37:48,336: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/base.py\", line 309, in run_from_argv\r\n[2020-05-01 07:37:48,336: WARNING/MainProcess] sys.argv if argv is None else argv, command)\r\n[2020-05-01 07:37:48,336: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/base.py\", line 393, in handle_argv\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] return self(*args, **options)\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/base.py\", line 253, in call\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] ret = self.run(*args, **kwargs)\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/bin/beat.py\", line 109, in run\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] return beat().run()\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/apps/beat.py\", line 81, in run\r\n[2020-05-01 07:37:48,337: WARNING/MainProcess] self.start_scheduler()\r\n[2020-05-01 07:37:48,338: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n[2020-05-01 07:37:48,338: WARNING/MainProcess] service.start()\r\n[2020-05-01 07:37:48,338: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/beat.py\", line 622, in start\r\n[2020-05-01 07:37:48,338: WARNING/MainProcess] humanize_seconds(self.scheduler.max_interval))\r\n[2020-05-01 07:37:48,338: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/kombu/utils/objects.py\", line 44, in get\r\n[2020-05-01 07:37:48,338: WARNING/MainProcess] value = obj.dict[self.name] = self.__get(obj)\r\n[2020-05-01 07:37:48,339: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/beat.py\", line 666, in scheduler\r\n[2020-05-01 07:37:48,339: WARNING/MainProcess] return self.get_scheduler()\r\n[2020-05-01 07:37:48,339: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/beat.py\", line 661, in get_scheduler\r\n[2020-05-01 07:37:48,339: WARNING/MainProcess] lazy=lazy,\r\n[2020-05-01 07:37:48,340: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/schedulers.py\", line 161, in init\r\n[2020-05-01 07:37:48,340: WARNING/MainProcess] Scheduler.init(self, *args, **kwargs)\r\n[2020-05-01 07:37:48,340: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/celery/beat.py\", line 257, in init\r\n[2020-05-01 07:37:48,340: WARNING/MainProcess] self.setup_schedule()\r\n[2020-05-01 07:37:48,340: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/schedulers.py\", line 169, in setup_schedule\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] self.install_default_entries(self.schedule)\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/schedulers.py\", line 263, in schedule\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] self.sync()\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/schedulers.py\", line 217, in sync\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] with commit_on_success():\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] File \"/usr/lib/python3.6/contextlib.py\", line 81, in enter\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] return next(self.gen)\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/db.py\", line 52, in commit_on_success\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] if connection.features.autocommits_when_autocommit_is_off:\r\n[2020-05-01 07:37:48,341: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/django/contrib/gis/db/backends/base/features.py\", line 99, in getattr\r\n[2020-05-01 07:37:48,342: WARNING/MainProcess] raise AttributeError\r\n[2020-05-01 07:37:48,342: WARNING/MainProcess] AttributeError\r\n[2020-05-01 07:37:48,342: INFO/MainProcess] Writing entries (0)...\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] Traceback (most recent call last):\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/usr/lib/python3.6/multiprocessing/util.py\", line 262, in _run_finalizers\r\nfinalizer()\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/usr/lib/python3.6/multiprocessing/util.py\", line 186, in call\r\nres = self._callback(*self._args, **self._kwargs)\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/schedulers.py\", line 217, in sync\r\nwith commit_on_success():\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/usr/lib/python3.6/contextlib.py\", line 81, in enter\r\nreturn next(self.gen)\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/db.py\", line 52, in commit_on_success\r\nif connection.features.autocommits_when_autocommit_is_off:\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/django/contrib/gis/db/backends/base/features.py\", line 99, in getattr\r\nraise AttributeError\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] AttributeError\r\n[2020-05-01 07:37:48,343: INFO/MainProcess] Writing entries (0)...\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] Traceback (most recent call last):\r\n[2020-05-01 07:37:48,343: WARNING/MainProcess] File \"/usr/lib/python3.6/multiprocessing/util.py\", line 262, in _run_finalizers\r\nfinalizer()\r\n[2020-05-01 07:37:48,344: WARNING/MainProcess] File \"/usr/lib/python3.6/multiprocessing/util.py\", line 186, in call\r\nres = self._callback(*self._args, **self._kwargs)\r\n[2020-05-01 07:37:48,344: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/schedulers.py\", line 217, in sync\r\nwith commit_on_success():\r\n[2020-05-01 07:37:48,344: WARNING/MainProcess] File \"/usr/lib/python3.6/contextlib.py\", line 81, in enter\r\nreturn next(self.gen)\r\n[2020-05-01 07:37:48,344: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/djcelery/db.py\", line 52, in commit_on_success\r\nif connection.features.autocommits_when_autocommit_is_off:\r\n[2020-05-01 07:37:48,344: WARNING/MainProcess] File \"/home/shivam/tmq1/venv2/lib/python3.6/site-packages/django/contrib/gis/db/backends/base/features.py\", line 99, in getattr\r\nraise AttributeError\r\n[2020-05-01 07:37:48,344: WARNING/MainProcess] AttributeError\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/333", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/333/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/333/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/333/events", "html_url": "https://github.com/celery/django-celery-beat/issues/333", "id": 599383772, "node_id": "MDU6SXNzdWU1OTkzODM3NzI=", "number": 333, "title": "how can i add scheduler by django xadmin", "user": {"login": "chestarss", "id": 11288347, "node_id": "MDQ6VXNlcjExMjg4MzQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/11288347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chestarss", "html_url": "https://github.com/chestarss", "followers_url": "https://api.github.com/users/chestarss/followers", "following_url": "https://api.github.com/users/chestarss/following{/other_user}", "gists_url": "https://api.github.com/users/chestarss/gists{/gist_id}", "starred_url": "https://api.github.com/users/chestarss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chestarss/subscriptions", "organizations_url": "https://api.github.com/users/chestarss/orgs", "repos_url": "https://api.github.com/users/chestarss/repos", "events_url": "https://api.github.com/users/chestarss/events{/privacy}", "received_events_url": "https://api.github.com/users/chestarss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-14T08:17:23Z", "updated_at": "2020-04-14T08:22:57Z", "closed_at": "2020-04-14T08:22:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nInclude a *brief* descrioption of the problem here, and fill out the version info below.  \r\n\r\n* Celery Version: \r\n* Celery-Beat Version: \r\n\r\n### Exact steps to reproduce the issue:\r\n1. \r\n2. \r\n3. \r\n\r\n### Detailed information\r\n\r\nPlease include more detailed information here, such as relevant information about your system setup, things you did to try and debug the problem, log messages, etc.  \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/328", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/328/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/328/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/328/events", "html_url": "https://github.com/celery/django-celery-beat/issues/328", "id": 589841465, "node_id": "MDU6SXNzdWU1ODk4NDE0NjU=", "number": 328, "title": "AppRegistryNotReady when i used DatabaseScheduler", "user": {"login": "Shailendranjain", "id": 7576234, "node_id": "MDQ6VXNlcjc1NzYyMzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/7576234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shailendranjain", "html_url": "https://github.com/Shailendranjain", "followers_url": "https://api.github.com/users/Shailendranjain/followers", "following_url": "https://api.github.com/users/Shailendranjain/following{/other_user}", "gists_url": "https://api.github.com/users/Shailendranjain/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shailendranjain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shailendranjain/subscriptions", "organizations_url": "https://api.github.com/users/Shailendranjain/orgs", "repos_url": "https://api.github.com/users/Shailendranjain/repos", "events_url": "https://api.github.com/users/Shailendranjain/events{/privacy}", "received_events_url": "https://api.github.com/users/Shailendranjain/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-29T17:28:01Z", "updated_at": "2020-03-31T01:33:22Z", "closed_at": "2020-03-31T01:33:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nRunning beat with default scheduler (-s) works fine.\r\n\r\nHowever running beat with custom scheduler ( -S django) resulting in below errors.\r\n\r\nraise AppRegistryNotReady(\u2018Apps aren\u2019t loaded yet\u2019)\r\n\r\ndjango.core.exception.AppRegistryNotReady: Apps aren\u2019t loaded yet\r\n\r\n* Celery Version: 4.0.0\r\n* Celery-Beat Version: 1.0.1\r\n\r\nAlthough it is older version ( because I need to use django 1.11.6 with other dependency) , can you please advise why I am not able to start celery beat ?\r\n\r\nNote: I am able to access the django-celery-beat tables through django admin. \r\n\r\n### Exact steps to reproduce the issue:\r\n1. \r\n2. \r\n3. \r\n\r\n### Detailed information\r\n\r\nPlease include more detailed information here, such as relevant information about your system setup, things you did to try and debug the problem, log messages, etc.  \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/324", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/324/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/324/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/324/events", "html_url": "https://github.com/celery/django-celery-beat/issues/324", "id": 583647214, "node_id": "MDU6SXNzdWU1ODM2NDcyMTQ=", "number": 324, "title": "Inclusion of locale directory installing latest version from Github", "user": {"login": "mondeja", "id": 23049315, "node_id": "MDQ6VXNlcjIzMDQ5MzE1", "avatar_url": "https://avatars1.githubusercontent.com/u/23049315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mondeja", "html_url": "https://github.com/mondeja", "followers_url": "https://api.github.com/users/mondeja/followers", "following_url": "https://api.github.com/users/mondeja/following{/other_user}", "gists_url": "https://api.github.com/users/mondeja/gists{/gist_id}", "starred_url": "https://api.github.com/users/mondeja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mondeja/subscriptions", "organizations_url": "https://api.github.com/users/mondeja/orgs", "repos_url": "https://api.github.com/users/mondeja/repos", "events_url": "https://api.github.com/users/mondeja/events{/privacy}", "received_events_url": "https://api.github.com/users/mondeja/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-18T11:04:11Z", "updated_at": "2020-06-02T10:14:14Z", "closed_at": "2020-06-02T10:14:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Summary:\r\nIt could be nice that I could run `pip install git+https://github.com/celery/django-celery-beat.git#egg=django_celery_beat` and the `locale` directory were be included inside `django_celery_beat` directory of my virtualenv.\r\n\r\n* Celery Version: 4.4.2\r\n* Celery-Beat Version: 2.0.0\r\n\r\n### Exact steps to reproduce the issue:\r\n1. Install the library with `pip install django-celery-beat` inside virtual environment.\r\n2. See that locale directory is not found.\r\n3. Install the library with `pip install git+https://github.com/celery/django-celery-beat.git#egg=django_celery_beat`.\r\n4. See again that locale directory is not found.\r\n\r\n### Detailed information\r\nFor now, I'm installing `django-celery-beat` from Pypi. This not include locales, and this is the expected behaviour. For locale directory inclusion, I'm currently executing a script that download the selected locales from the repository and including them in the directory of the library inside my virtualenv.\r\n\r\nOther packages like `sphinx_rtd_theme` [includes the locales in `MAINFEST.in`](https://github.com/readthedocs/sphinx_rtd_theme/blob/master/MANIFEST.in) using `recursive-include`, but doesn't include it on source code tarball distributed through Pypi. See [this](https://github.com/readthedocs/sphinx_rtd_theme/issues/888) for a test case.\r\n\r\nIt would be nice that we can include the locales, at least, installing `django-celery-beat` through Github. It doesn't make sense the inclusion of locales inside source code tarball distributed through Pypi because are not stable, especially the chinese translation. For this, we need only a couple of changes:\r\n\r\n- Include `locale` directory inside `django_celery_beat` directory.\r\n- Include the line `recursive-include django_celery_beat/locale *.po *.mo` inside MANIFEST.in\r\n- In release process, exclude the locales directory.\r\n\r\nI can accomplish this with a pull, but I need help with release process updating, because there are not any public script included in the repository.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/320", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/320/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/320/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/320/events", "html_url": "https://github.com/celery/django-celery-beat/issues/320", "id": 577316884, "node_id": "MDU6SXNzdWU1NzczMTY4ODQ=", "number": 320, "title": "last_run_at not updated but tasks executed properly", "user": {"login": "mnboos", "id": 22575883, "node_id": "MDQ6VXNlcjIyNTc1ODgz", "avatar_url": "https://avatars1.githubusercontent.com/u/22575883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mnboos", "html_url": "https://github.com/mnboos", "followers_url": "https://api.github.com/users/mnboos/followers", "following_url": "https://api.github.com/users/mnboos/following{/other_user}", "gists_url": "https://api.github.com/users/mnboos/gists{/gist_id}", "starred_url": "https://api.github.com/users/mnboos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mnboos/subscriptions", "organizations_url": "https://api.github.com/users/mnboos/orgs", "repos_url": "https://api.github.com/users/mnboos/repos", "events_url": "https://api.github.com/users/mnboos/events{/privacy}", "received_events_url": "https://api.github.com/users/mnboos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-07T10:47:17Z", "updated_at": "2020-03-08T15:34:07Z", "closed_at": "2020-03-08T15:34:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nA have a crontab scheduled tasks, which runs propery every minute. But the `last_run_at` field doesn't get updated regularly, i.e. at every run, only after a few minutes.\r\n\r\n* Celery Version: 4.4.1\r\n* Celery-Beat Version: 2.0.0\r\n\r\n### Exact steps to reproduce the issue:\r\n1. Create a crontab scheduled task to run every minute\r\n2. Check the `last_run_at` field after every run. Sometimes it's updated but most often not.\r\n\r\n### Detailed information\r\n\r\n- Celery worker and beat are running in a docker container (own container for celery worker and celery beat)\r\n- TimeZone ist `Europe/Zurich`\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/308", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/308/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/308/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/308/events", "html_url": "https://github.com/celery/django-celery-beat/issues/308", "id": 562207011, "node_id": "MDU6SXNzdWU1NjIyMDcwMTE=", "number": 308, "title": "Django 3.0 removed django.utils.six and made django-celery-beat incompatible", "user": {"login": "monuyadav016", "id": 21173250, "node_id": "MDQ6VXNlcjIxMTczMjUw", "avatar_url": "https://avatars1.githubusercontent.com/u/21173250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monuyadav016", "html_url": "https://github.com/monuyadav016", "followers_url": "https://api.github.com/users/monuyadav016/followers", "following_url": "https://api.github.com/users/monuyadav016/following{/other_user}", "gists_url": "https://api.github.com/users/monuyadav016/gists{/gist_id}", "starred_url": "https://api.github.com/users/monuyadav016/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monuyadav016/subscriptions", "organizations_url": "https://api.github.com/users/monuyadav016/orgs", "repos_url": "https://api.github.com/users/monuyadav016/repos", "events_url": "https://api.github.com/users/monuyadav016/events{/privacy}", "received_events_url": "https://api.github.com/users/monuyadav016/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-02-09T17:02:13Z", "updated_at": "2020-03-02T09:54:55Z", "closed_at": "2020-03-02T09:53:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\nSo I'm using Django 3.0 for my project and got import error for django.utils.six and then I found this in the Django 3.0 release notes:\r\n```\r\nWhile Python 2 support was removed in Django 2.0, some private APIs weren\u2019t removed from Django so that third party apps could continue using them until the Python 2 end-of-life.\r\n\r\nSince we expect apps to drop Python 2 compatibility when adding support for Django 3.0, we\u2019re removing these APIs at this time.\r\n...\r\ndjango.utils.six - Remove usage of this vendored library or switch to [six](https://pypi.org/project/six/).\r\n```\r\n\r\n* Celery Version: 4.4\r\n* Celery-Beat Version: 1.6.0\r\n\r\n### Exact steps to reproduce the issue:\r\n1. Install Django 3.0\r\n2. Install django-celery-beat\r\n3. Run `python manage.py migrate`\r\n\r\nI hope Django 3.0 support will be added soon.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/304", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/304/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/304/events", "html_url": "https://github.com/celery/django-celery-beat/issues/304", "id": 559086920, "node_id": "MDU6SXNzdWU1NTkwODY5MjA=", "number": 304, "title": "django-timezone-field breaking celery-beat for Django 3", "user": {"login": "npsqm", "id": 59708580, "node_id": "MDQ6VXNlcjU5NzA4NTgw", "avatar_url": "https://avatars3.githubusercontent.com/u/59708580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/npsqm", "html_url": "https://github.com/npsqm", "followers_url": "https://api.github.com/users/npsqm/followers", "following_url": "https://api.github.com/users/npsqm/following{/other_user}", "gists_url": "https://api.github.com/users/npsqm/gists{/gist_id}", "starred_url": "https://api.github.com/users/npsqm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/npsqm/subscriptions", "organizations_url": "https://api.github.com/users/npsqm/orgs", "repos_url": "https://api.github.com/users/npsqm/repos", "events_url": "https://api.github.com/users/npsqm/events{/privacy}", "received_events_url": "https://api.github.com/users/npsqm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-02-03T13:33:50Z", "updated_at": "2020-02-20T18:11:39Z", "closed_at": "2020-02-07T08:08:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\ndjango-celery-beat-1.6.0 does not work with Django 3 because of it's dependency on django-timezone-field<4.0 because timezone-field<4.0 does not support Django 3. The breaking dependency change was introduced as a reaction to  #296\r\n\r\n* Celery Version: 4.4.0 (cliffs)\r\n* Celery-Beat Version: django-celery-beat-1.6.0\r\n* Djang Version: 3.0.3\r\n\r\n### Exact steps to reproduce the issue:\r\n1. Install django-celery-beat-1.6.0 and Django 3.0.3\r\n2. call django.setup() in your code (or do `python3 manage.py shell` I guess)\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n\r\n[...]\r\n  File \"/usr/local/lib/python3.7/dist-packages/django/__init__.py\", line 24, in setup\r\n    apps.populate(settings.INSTALLED_APPS)\r\n  File \"/usr/local/lib/python3.7/dist-packages/django/apps/registry.py\", line 114, in populate\r\n    app_config.import_models()\r\n  File \"/usr/local/lib/python3.7/dist-packages/django/apps/config.py\", line 211, in import_models\r\n    self.models_module = import_module(models_module_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/usr/local/lib/python3.7/dist-packages/django_celery_beat/models.py\", line 6, in <module>\r\n    import timezone_field\r\n  File \"/usr/local/lib/python3.7/dist-packages/timezone_field/__init__.py\", line 1, in <module>\r\n    from timezone_field.fields import TimeZoneField\r\n  File \"/usr/local/lib/python3.7/dist-packages/timezone_field/fields.py\", line 5, in <module>\r\n    from django.utils import six\r\nImportError: cannot import name 'six' from 'django.utils' (/usr/local/lib/python3.7/dist-packages/django/utils/__init__.py)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/303", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/303/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/303/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/303/events", "html_url": "https://github.com/celery/django-celery-beat/issues/303", "id": 558720019, "node_id": "MDU6SXNzdWU1NTg3MjAwMTk=", "number": 303, "title": "No changelog for 1.6.0", "user": {"login": "maxmalysh", "id": 6844656, "node_id": "MDQ6VXNlcjY4NDQ2NTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/6844656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxmalysh", "html_url": "https://github.com/maxmalysh", "followers_url": "https://api.github.com/users/maxmalysh/followers", "following_url": "https://api.github.com/users/maxmalysh/following{/other_user}", "gists_url": "https://api.github.com/users/maxmalysh/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxmalysh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxmalysh/subscriptions", "organizations_url": "https://api.github.com/users/maxmalysh/orgs", "repos_url": "https://api.github.com/users/maxmalysh/repos", "events_url": "https://api.github.com/users/maxmalysh/events{/privacy}", "received_events_url": "https://api.github.com/users/maxmalysh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-02T16:24:22Z", "updated_at": "2020-02-08T03:58:11Z", "closed_at": "2020-02-08T03:58:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI see that 1.6.0 was uploaded to pypi, but there is no mention of it in the changelog:\r\nhttps://github.com/celery/django-celery-beat/blob/master/Changelog\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/301", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/301/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/301/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/301/events", "html_url": "https://github.com/celery/django-celery-beat/issues/301", "id": 552680570, "node_id": "MDU6SXNzdWU1NTI2ODA1NzA=", "number": 301, "title": "manually start and stop task", "user": {"login": "saileshkush95", "id": 28560875, "node_id": "MDQ6VXNlcjI4NTYwODc1", "avatar_url": "https://avatars3.githubusercontent.com/u/28560875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saileshkush95", "html_url": "https://github.com/saileshkush95", "followers_url": "https://api.github.com/users/saileshkush95/followers", "following_url": "https://api.github.com/users/saileshkush95/following{/other_user}", "gists_url": "https://api.github.com/users/saileshkush95/gists{/gist_id}", "starred_url": "https://api.github.com/users/saileshkush95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saileshkush95/subscriptions", "organizations_url": "https://api.github.com/users/saileshkush95/orgs", "repos_url": "https://api.github.com/users/saileshkush95/repos", "events_url": "https://api.github.com/users/saileshkush95/events{/privacy}", "received_events_url": "https://api.github.com/users/saileshkush95/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-21T07:48:53Z", "updated_at": "2020-02-01T09:26:45Z", "closed_at": "2020-02-01T09:26:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm little bit confuse about does this works for manually start ant stop \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/296", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/296/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/296/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/296/events", "html_url": "https://github.com/celery/django-celery-beat/issues/296", "id": 537485595, "node_id": "MDU6SXNzdWU1Mzc0ODU1OTU=", "number": 296, "title": "django-timezone-field breaking celery-beat on Python 3 and Django 1.11", "user": {"login": "karangupta31", "id": 37868871, "node_id": "MDQ6VXNlcjM3ODY4ODcx", "avatar_url": "https://avatars3.githubusercontent.com/u/37868871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karangupta31", "html_url": "https://github.com/karangupta31", "followers_url": "https://api.github.com/users/karangupta31/followers", "following_url": "https://api.github.com/users/karangupta31/following{/other_user}", "gists_url": "https://api.github.com/users/karangupta31/gists{/gist_id}", "starred_url": "https://api.github.com/users/karangupta31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karangupta31/subscriptions", "organizations_url": "https://api.github.com/users/karangupta31/orgs", "repos_url": "https://api.github.com/users/karangupta31/repos", "events_url": "https://api.github.com/users/karangupta31/events{/privacy}", "received_events_url": "https://api.github.com/users/karangupta31/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-13T11:00:21Z", "updated_at": "2020-02-08T07:55:29Z", "closed_at": "2020-02-08T07:55:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Summary:\r\n\r\nWith the release of django-timezone-field v4.0, the support for django 1.11 has been dropped. \r\nhttps://github.com/mfogel/django-timezone-field\r\n\r\n* Celery-Beat Version: 1.4.0 and 1.5.0\r\n\r\n### Exact steps to reproduce the issue:\r\n1. Setup project on Django 1.11 and Python 3.7\r\n2. Install django-celery-beat\r\n3. django-timezone-field breaks as it doesn't support django 1.11. \r\n\r\n### Detailed information\r\n\r\nWith the release of django-timezone-field v4.0, the support for django 1.11 has been dropped. Hence for the above environment, the package breaks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/289", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/289/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/289/events", "html_url": "https://github.com/celery/django-celery-beat/issues/289", "id": 523971454, "node_id": "MDU6SXNzdWU1MjM5NzE0NTQ=", "number": 289, "title": "django.utils.six has been removed in django3", "user": {"login": "zzp198", "id": 43930552, "node_id": "MDQ6VXNlcjQzOTMwNTUy", "avatar_url": "https://avatars1.githubusercontent.com/u/43930552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzp198", "html_url": "https://github.com/zzp198", "followers_url": "https://api.github.com/users/zzp198/followers", "following_url": "https://api.github.com/users/zzp198/following{/other_user}", "gists_url": "https://api.github.com/users/zzp198/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzp198/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzp198/subscriptions", "organizations_url": "https://api.github.com/users/zzp198/orgs", "repos_url": "https://api.github.com/users/zzp198/repos", "events_url": "https://api.github.com/users/zzp198/events{/privacy}", "received_events_url": "https://api.github.com/users/zzp198/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-11-17T11:23:46Z", "updated_at": "2020-02-17T20:18:32Z", "closed_at": "2020-02-08T03:59:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nInclude a *brief* descrioption of the problem here, and fill out the version info below.  \r\n\r\n* Celery Version: \r\n* Celery-Beat Version: \r\n\r\n### Exact steps to reproduce the issue:\r\n1. \r\n2. \r\n3. \r\n\r\n### Detailed information\r\n\r\ndjango.utils.six has been removed in Django3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/284", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/284/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/284/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/284/events", "html_url": "https://github.com/celery/django-celery-beat/issues/284", "id": 496989612, "node_id": "MDU6SXNzdWU0OTY5ODk2MTI=", "number": 284, "title": "Any chance to get unreleased commits into a new release 1.6.0?", "user": {"login": "moseb", "id": 47785526, "node_id": "MDQ6VXNlcjQ3Nzg1NTI2", "avatar_url": "https://avatars1.githubusercontent.com/u/47785526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moseb", "html_url": "https://github.com/moseb", "followers_url": "https://api.github.com/users/moseb/followers", "following_url": "https://api.github.com/users/moseb/following{/other_user}", "gists_url": "https://api.github.com/users/moseb/gists{/gist_id}", "starred_url": "https://api.github.com/users/moseb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moseb/subscriptions", "organizations_url": "https://api.github.com/users/moseb/orgs", "repos_url": "https://api.github.com/users/moseb/repos", "events_url": "https://api.github.com/users/moseb/events{/privacy}", "received_events_url": "https://api.github.com/users/moseb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "auvipy", "id": 6212603, "node_id": "MDQ6VXNlcjYyMTI2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6212603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/auvipy", "html_url": "https://github.com/auvipy", "followers_url": "https://api.github.com/users/auvipy/followers", "following_url": "https://api.github.com/users/auvipy/following{/other_user}", "gists_url": "https://api.github.com/users/auvipy/gists{/gist_id}", "starred_url": "https://api.github.com/users/auvipy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/auvipy/subscriptions", "organizations_url": "https://api.github.com/users/auvipy/orgs", "repos_url": "https://api.github.com/users/auvipy/repos", "events_url": "https://api.github.com/users/auvipy/events{/privacy}", "received_events_url": "https://api.github.com/users/auvipy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "auvipy", "id": 6212603, "node_id": "MDQ6VXNlcjYyMTI2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6212603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/auvipy", "html_url": "https://github.com/auvipy", "followers_url": "https://api.github.com/users/auvipy/followers", "following_url": "https://api.github.com/users/auvipy/following{/other_user}", "gists_url": "https://api.github.com/users/auvipy/gists{/gist_id}", "starred_url": "https://api.github.com/users/auvipy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/auvipy/subscriptions", "organizations_url": "https://api.github.com/users/auvipy/orgs", "repos_url": "https://api.github.com/users/auvipy/repos", "events_url": "https://api.github.com/users/auvipy/events{/privacy}", "received_events_url": "https://api.github.com/users/auvipy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-09-23T09:33:18Z", "updated_at": "2020-02-01T10:49:02Z", "closed_at": "2020-02-01T10:49:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There's a few commits since 1.5.0 that have not made their way into a release yet:\r\nhttps://github.com/celery/django-celery-beat/compare/1.5.0...master\r\n\r\nAre there plans for a release?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/280", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/280/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/280/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/280/events", "html_url": "https://github.com/celery/django-celery-beat/issues/280", "id": 486234364, "node_id": "MDU6SXNzdWU0ODYyMzQzNjQ=", "number": 280, "title": "expires in app.conf.beat_schedule options is not worked.", "user": {"login": "o3o3o", "id": 4308542, "node_id": "MDQ6VXNlcjQzMDg1NDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4308542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/o3o3o", "html_url": "https://github.com/o3o3o", "followers_url": "https://api.github.com/users/o3o3o/followers", "following_url": "https://api.github.com/users/o3o3o/following{/other_user}", "gists_url": "https://api.github.com/users/o3o3o/gists{/gist_id}", "starred_url": "https://api.github.com/users/o3o3o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/o3o3o/subscriptions", "organizations_url": "https://api.github.com/users/o3o3o/orgs", "repos_url": "https://api.github.com/users/o3o3o/repos", "events_url": "https://api.github.com/users/o3o3o/events{/privacy}", "received_events_url": "https://api.github.com/users/o3o3o/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-28T08:33:26Z", "updated_at": "2019-08-31T04:20:33Z", "closed_at": "2019-08-31T04:20:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Summary:\r\n\r\nThe `expires` option in app.conf.beat_schedule is not worked.\r\n\r\n\r\n* Celery Version:  4.3.0\r\n* Celery-Beat Version:  1.5.0\r\n\r\n### Exact steps to reproduce the issue:\r\n```\r\n@app.task\r\ndef test():\r\n\r\n    return \"test hello\" \r\n\r\napp.conf.beat_schedule = {\r\n    \"test\": {\r\n        \"task\": \"common.tasks.test\",\r\n        \"schedule\": crontab(minute=\"*/1\"),\r\n        \"options\": {\"expires\": 1},\r\n    },\r\n}\r\n```\r\n\r\n### Detailed information\r\n\r\n\r\nI used database scheduler,  I cannot find expires value in DB after run celery beat:\r\n```\r\ncelery beat -A server --scheduler django_celery_beat.schedulers:DatabaseScheduler --loglevel=INFO\r\n```\r\n```\r\nselect * from django_celery_beat_periodictask where expires is not null;\r\n(0 rows)\r\n```\r\nI tried to trace the code and found [_unpack_options](https://github.com/celery/django-celery-beat/blob/4dfe20d0518ca86f695c3232b3404e8f0e31a8c5/django_celery_beat/schedulers.py#L197) do not save expires argument.\r\n\r\nSo the default entry `celery.backend_cleanup` was not executed too.\r\n\r\n---\r\nupdate: \r\n\r\nrelated: #19  #209 \r\n \r\n \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/277", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/277/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/277/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/277/events", "html_url": "https://github.com/celery/django-celery-beat/issues/277", "id": 469006550, "node_id": "MDU6SXNzdWU0NjkwMDY1NTA=", "number": 277, "title": "Clocked schedule seems not working with local timezone", "user": {"login": "gruiyuan", "id": 13253933, "node_id": "MDQ6VXNlcjEzMjUzOTMz", "avatar_url": "https://avatars2.githubusercontent.com/u/13253933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gruiyuan", "html_url": "https://github.com/gruiyuan", "followers_url": "https://api.github.com/users/gruiyuan/followers", "following_url": "https://api.github.com/users/gruiyuan/following{/other_user}", "gists_url": "https://api.github.com/users/gruiyuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gruiyuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gruiyuan/subscriptions", "organizations_url": "https://api.github.com/users/gruiyuan/orgs", "repos_url": "https://api.github.com/users/gruiyuan/repos", "events_url": "https://api.github.com/users/gruiyuan/events{/privacy}", "received_events_url": "https://api.github.com/users/gruiyuan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-17T06:16:31Z", "updated_at": "2019-07-19T13:12:23Z", "closed_at": "2019-07-19T13:12:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n  Hear I use the '+8:00' timezone. I set an one-off clocked schedule and made the 'clocked _time' to be 1 minute later then the 'start_time. But it wasn't worked at that time(with my timezone). Actually that job start at 8 hours later.\r\n  Here are some key settings in my django project.\r\n```\r\nTIME_ZONE = 'Asia/Shanghai'\r\nUSE_TZ = False\r\nCELERY_ENABLE_UTC = False\r\nCELERY_TIMEZONE = TIME_ZONE\r\nDJANGO_CELERY_BEAT_TZ_AWARE = False\r\n```\r\n  And the versions are:\r\n- python: 3.7.3\r\n- django: 2.2.3\r\n- celery: 4.3.0\r\n- django-celery-beat: 1.5.0\r\n  Hope to solve my problem soon.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/267", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/267/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/267/events", "html_url": "https://github.com/celery/django-celery-beat/issues/267", "id": 456560330, "node_id": "MDU6SXNzdWU0NTY1NjAzMzA=", "number": 267, "title": "[1.5.0] clockedschedule.py redefines celery.schedules.schedstate of Celery >=3.1.0?", "user": {"login": "hartwork", "id": 1577132, "node_id": "MDQ6VXNlcjE1NzcxMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1577132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartwork", "html_url": "https://github.com/hartwork", "followers_url": "https://api.github.com/users/hartwork/followers", "following_url": "https://api.github.com/users/hartwork/following{/other_user}", "gists_url": "https://api.github.com/users/hartwork/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartwork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartwork/subscriptions", "organizations_url": "https://api.github.com/users/hartwork/orgs", "repos_url": "https://api.github.com/users/hartwork/repos", "events_url": "https://api.github.com/users/hartwork/events{/privacy}", "received_events_url": "https://api.github.com/users/hartwork/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-15T17:45:10Z", "updated_at": "2019-06-20T20:23:37Z", "closed_at": "2019-06-20T20:23:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nI noticed this code:\r\nhttps://github.com/celery/django-celery-beat/blob/db68a4997420e141b002b555d0d58e98f32a6a4f/django_celery_beat/clockedschedule.py#L10\r\n\r\nI would expect `from celery.schedules import schedstate` instead, which requires Celery >=3.1.0.\r\n\r\nIs there need to support Celery <3.1.0? otherwise, I would suggest to turn this into an import, e.g. to be safe towards future use of `isinstance` that would fail for non-obvious reasons.\r\n\r\nWhat do you think?\r\n\r\nCC @yywing ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/266", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/266/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/266/events", "html_url": "https://github.com/celery/django-celery-beat/issues/266", "id": 456200647, "node_id": "MDU6SXNzdWU0NTYyMDA2NDc=", "number": 266, "title": "Clocked tasks won't execute", "user": {"login": "alternativshik", "id": 1004718, "node_id": "MDQ6VXNlcjEwMDQ3MTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1004718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alternativshik", "html_url": "https://github.com/alternativshik", "followers_url": "https://api.github.com/users/alternativshik/followers", "following_url": "https://api.github.com/users/alternativshik/following{/other_user}", "gists_url": "https://api.github.com/users/alternativshik/gists{/gist_id}", "starred_url": "https://api.github.com/users/alternativshik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alternativshik/subscriptions", "organizations_url": "https://api.github.com/users/alternativshik/orgs", "repos_url": "https://api.github.com/users/alternativshik/repos", "events_url": "https://api.github.com/users/alternativshik/events{/privacy}", "received_events_url": "https://api.github.com/users/alternativshik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-14T11:32:34Z", "updated_at": "2019-06-16T13:05:57Z", "closed_at": "2019-06-16T06:48:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\nClocked tasks not run from beat. \r\n\r\n* Celery Version: 4.3.0\r\n* Celery-Beat Version: 1.5\r\n\r\n### Exact steps to reproduce the issue:\r\n1. Created clocked schedule.\r\n2. Create periodic task with On-OFF enabled and selected clocked schedule\r\n3. Beat logs says that Schedule was changed\r\n4. At selected time task don't execute\r\n\r\n\r\n### Detailed information\r\nI'm using correct timezones for celery and for django project, if I select interval or crontab schedule for tasks - they run fine.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/259", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/259/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/259/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/259/events", "html_url": "https://github.com/celery/django-celery-beat/issues/259", "id": 451199006, "node_id": "MDU6SXNzdWU0NTExOTkwMDY=", "number": 259, "title": "start_time not working when using interval schedule for everyday.", "user": {"login": "jeromecaisip", "id": 25382735, "node_id": "MDQ6VXNlcjI1MzgyNzM1", "avatar_url": "https://avatars3.githubusercontent.com/u/25382735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromecaisip", "html_url": "https://github.com/jeromecaisip", "followers_url": "https://api.github.com/users/jeromecaisip/followers", "following_url": "https://api.github.com/users/jeromecaisip/following{/other_user}", "gists_url": "https://api.github.com/users/jeromecaisip/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromecaisip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromecaisip/subscriptions", "organizations_url": "https://api.github.com/users/jeromecaisip/orgs", "repos_url": "https://api.github.com/users/jeromecaisip/repos", "events_url": "https://api.github.com/users/jeromecaisip/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromecaisip/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-02T14:39:38Z", "updated_at": "2019-07-31T15:11:19Z", "closed_at": "2019-06-03T12:57:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I tried running a scheduled a task to run in the future by specifying my desired schedule the start_time field. However upon checking the logs, the task wasn't executed. So I tried checking by using a short interval for 5 seconds with the start_time being now()+several minutes. And it did it run. I am using IntervalSchedule for scheduling and MySQL for database. \r\n\r\nThanks. \r\n\r\n* Celery Version: 4.3.0\r\n* Celery-Beat Version: 1.5.0\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/258", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/258/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/258/events", "html_url": "https://github.com/celery/django-celery-beat/issues/258", "id": 451198753, "node_id": "MDU6SXNzdWU0NTExOTg3NTM=", "number": 258, "title": "setup.py does not pull in Django or Celery as direct runtime dependencies", "user": {"login": "hartwork", "id": 1577132, "node_id": "MDQ6VXNlcjE1NzcxMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1577132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartwork", "html_url": "https://github.com/hartwork", "followers_url": "https://api.github.com/users/hartwork/followers", "following_url": "https://api.github.com/users/hartwork/following{/other_user}", "gists_url": "https://api.github.com/users/hartwork/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartwork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartwork/subscriptions", "organizations_url": "https://api.github.com/users/hartwork/orgs", "repos_url": "https://api.github.com/users/hartwork/repos", "events_url": "https://api.github.com/users/hartwork/events{/privacy}", "received_events_url": "https://api.github.com/users/hartwork/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-02T14:36:53Z", "updated_at": "2019-06-16T16:16:17Z", "closed_at": "2019-06-16T16:16:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nI noticed that `setup.py` uses `requirements/*.txt` for dependencies, but none of the ones used during `pip install django-celery-beat` pull in Django and/or Celery, directly. (Django is pulled in indirectly, though). Is that a conscious decision? If not, can they be added?\r\n\r\nBest, Sebastian", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/256", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/256/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/256/events", "html_url": "https://github.com/celery/django-celery-beat/issues/256", "id": 448281516, "node_id": "MDU6SXNzdWU0NDgyODE1MTY=", "number": 256, "title": "Expose PeriodicTask.last_run_at in Django admin, at least read-only?", "user": {"login": "moseb", "id": 47785526, "node_id": "MDQ6VXNlcjQ3Nzg1NTI2", "avatar_url": "https://avatars1.githubusercontent.com/u/47785526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moseb", "html_url": "https://github.com/moseb", "followers_url": "https://api.github.com/users/moseb/followers", "following_url": "https://api.github.com/users/moseb/following{/other_user}", "gists_url": "https://api.github.com/users/moseb/gists{/gist_id}", "starred_url": "https://api.github.com/users/moseb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moseb/subscriptions", "organizations_url": "https://api.github.com/users/moseb/orgs", "repos_url": "https://api.github.com/users/moseb/repos", "events_url": "https://api.github.com/users/moseb/events{/privacy}", "received_events_url": "https://api.github.com/users/moseb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419078067, "node_id": "MDU6TGFiZWw0MTkwNzgwNjc=", "url": "https://api.github.com/repos/celery/django-celery-beat/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-24T17:39:10Z", "updated_at": "2019-06-13T03:43:27Z", "closed_at": "2019-06-13T03:43:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nIt seems that `PeriodicTask.last_run_at` is not exposed to Django admin. I get that modifying it might produce hick-ups but being able to see it would ease debugging sometimes.\r\n\r\nWhat do you think?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/254", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/254/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/254/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/254/events", "html_url": "https://github.com/celery/django-celery-beat/issues/254", "id": 446922811, "node_id": "MDU6SXNzdWU0NDY5MjI4MTE=", "number": 254, "title": "PyPI release blocked by warehouse bug", "user": {"login": "auvipy", "id": 6212603, "node_id": "MDQ6VXNlcjYyMTI2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6212603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/auvipy", "html_url": "https://github.com/auvipy", "followers_url": "https://api.github.com/users/auvipy/followers", "following_url": "https://api.github.com/users/auvipy/following{/other_user}", "gists_url": "https://api.github.com/users/auvipy/gists{/gist_id}", "starred_url": "https://api.github.com/users/auvipy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/auvipy/subscriptions", "organizations_url": "https://api.github.com/users/auvipy/orgs", "repos_url": "https://api.github.com/users/auvipy/repos", "events_url": "https://api.github.com/users/auvipy/events{/privacy}", "received_events_url": "https://api.github.com/users/auvipy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-22T04:04:12Z", "updated_at": "2019-05-22T16:41:34Z", "closed_at": "2019-05-22T16:41:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/pypa/warehouse/issues/5890", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/253", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/253/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/253/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/253/events", "html_url": "https://github.com/celery/django-celery-beat/issues/253", "id": 446647051, "node_id": "MDU6SXNzdWU0NDY2NDcwNTE=", "number": 253, "title": "TypeError: Object of type 'UTC' is not JSON serializable", "user": {"login": "springgreenner", "id": 35355191, "node_id": "MDQ6VXNlcjM1MzU1MTkx", "avatar_url": "https://avatars2.githubusercontent.com/u/35355191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/springgreenner", "html_url": "https://github.com/springgreenner", "followers_url": "https://api.github.com/users/springgreenner/followers", "following_url": "https://api.github.com/users/springgreenner/following{/other_user}", "gists_url": "https://api.github.com/users/springgreenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/springgreenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/springgreenner/subscriptions", "organizations_url": "https://api.github.com/users/springgreenner/orgs", "repos_url": "https://api.github.com/users/springgreenner/repos", "events_url": "https://api.github.com/users/springgreenner/events{/privacy}", "received_events_url": "https://api.github.com/users/springgreenner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-21T14:19:04Z", "updated_at": "2019-05-21T16:39:52Z", "closed_at": "2019-05-21T16:39:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\n\r\nInclude a *brief* descrioption of the problem here, and fill out the version info below.  \r\n\r\n* Celery Version: 4.3.0\r\n* Celery-Beat Version: 1.4.0\r\n* django :2.2\r\n* rest-framework:3.9.2\r\n\r\n### Exact steps to reproduce the issue:\r\nI use drf, serializer error, TypeError: Object of type'UTC'is not JSON serializable, how can I solve it?\r\n\r\n### Detailed information\r\n\r\nPlease include more detailed information here, such as relevant information about your system setup, things you did to try and debug the problem, log messages, etc.  \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/252", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/252/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/252/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/252/events", "html_url": "https://github.com/celery/django-celery-beat/issues/252", "id": 445799716, "node_id": "MDU6SXNzdWU0NDU3OTk3MTY=", "number": 252, "title": "Can I specify task id on creating PeriodicTask?", "user": {"login": "zhaoxin", "id": 324931, "node_id": "MDQ6VXNlcjMyNDkzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/324931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhaoxin", "html_url": "https://github.com/zhaoxin", "followers_url": "https://api.github.com/users/zhaoxin/followers", "following_url": "https://api.github.com/users/zhaoxin/following{/other_user}", "gists_url": "https://api.github.com/users/zhaoxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhaoxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhaoxin/subscriptions", "organizations_url": "https://api.github.com/users/zhaoxin/orgs", "repos_url": "https://api.github.com/users/zhaoxin/repos", "events_url": "https://api.github.com/users/zhaoxin/events{/privacy}", "received_events_url": "https://api.github.com/users/zhaoxin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-19T09:42:01Z", "updated_at": "2019-05-19T12:46:33Z", "closed_at": "2019-05-19T12:46:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "With apply_async I could make a task id, e.g. uuid, in advance and give it to the task I invoke. Can I do this with PeriodicTask.objects.create()? Or with django_celery_beat the task_id only can be given when invoked by this library?\r\nThanks.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/251", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/251/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/251/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/251/events", "html_url": "https://github.com/celery/django-celery-beat/issues/251", "id": 443830129, "node_id": "MDU6SXNzdWU0NDM4MzAxMjk=", "number": 251, "title": "Python 3 versions support status", "user": {"login": "sireliah", "id": 17201781, "node_id": "MDQ6VXNlcjE3MjAxNzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/17201781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sireliah", "html_url": "https://github.com/sireliah", "followers_url": "https://api.github.com/users/sireliah/followers", "following_url": "https://api.github.com/users/sireliah/following{/other_user}", "gists_url": "https://api.github.com/users/sireliah/gists{/gist_id}", "starred_url": "https://api.github.com/users/sireliah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sireliah/subscriptions", "organizations_url": "https://api.github.com/users/sireliah/orgs", "repos_url": "https://api.github.com/users/sireliah/repos", "events_url": "https://api.github.com/users/sireliah/events{/privacy}", "received_events_url": "https://api.github.com/users/sireliah/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-14T10:15:46Z", "updated_at": "2019-05-14T11:54:34Z", "closed_at": "2019-05-14T10:38:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary:\r\nWhat is the roadmap for supporting newer versions of Python 3?\r\nCurrently we support:\r\n```\r\n    Programming Language :: Python :: 3\r\n    Programming Language :: Python :: 3.4\r\n    Programming Language :: Python :: 3.5\r\n```\r\nI saw some work by @liquidpele here: https://github.com/celery/django-celery-beat/pull/243 to make tests compatible ith Python 3.7. When the library is planned to officially support Python > 3.5?\r\n\r\nIf there is any blocker, I can help myself with porting the code.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/247", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/247/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/247/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/247/events", "html_url": "https://github.com/celery/django-celery-beat/issues/247", "id": 439978848, "node_id": "MDU6SXNzdWU0Mzk5Nzg4NDg=", "number": 247, "title": "OperationalError at /admin/django_celery_beat/intervalschedule/add/", "user": {"login": "Kazatel", "id": 19363695, "node_id": "MDQ6VXNlcjE5MzYzNjk1", "avatar_url": "https://avatars2.githubusercontent.com/u/19363695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kazatel", "html_url": "https://github.com/Kazatel", "followers_url": "https://api.github.com/users/Kazatel/followers", "following_url": "https://api.github.com/users/Kazatel/following{/other_user}", "gists_url": "https://api.github.com/users/Kazatel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kazatel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kazatel/subscriptions", "organizations_url": "https://api.github.com/users/Kazatel/orgs", "repos_url": "https://api.github.com/users/Kazatel/repos", "events_url": "https://api.github.com/users/Kazatel/events{/privacy}", "received_events_url": "https://api.github.com/users/Kazatel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346090404, "node_id": "MDU6TGFiZWwxMzQ2MDkwNDA0", "url": "https://api.github.com/repos/celery/django-celery-beat/labels/More%20Info%20Needed", "name": "More Info Needed", "color": "ebb7f7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-03T10:11:20Z", "updated_at": "2019-05-06T07:05:35Z", "closed_at": "2019-05-03T15:50:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "when I try to write into DB, I got this error.\r\n\r\n\r\nRequest Method: | POST\r\n-- | --\r\nhttp://<server>/admin/django_celery_beat/intervalschedule/add/\r\n1.11.3\r\nOperationalError\r\n(1785, 'Statement violates GTID consistency: Updates to non-transactional tables can only be done in either autocommitted statements or single-statement transactions, and never in the same statement as updates to transactional tables.')\r\n/opt/app/data/tm480h/project/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-linux-x86_64.egg/MySQLdb/connections.py  in defaulterrorhandler, line 36\r\n/opt/app/data/tm480h/project/bin/python\r\n\r\nAll worked fine on my test DB, where we don't have replication setup on database.\r\n\r\nOne of the suggestion I fount to fix that is , to disable GTID on mysql database, however I need to discuss this with DB team and if company policy allow us to do that.\r\n\r\nI would like to know if by any change I can change celery beat source code to do comits imidiately to transanctional table or if I can use any other workeround.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/242", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/242/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/242/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/242/events", "html_url": "https://github.com/celery/django-celery-beat/issues/242", "id": 437092459, "node_id": "MDU6SXNzdWU0MzcwOTI0NTk=", "number": 242, "title": "How can I add other fields to the PeriodicTask model?", "user": {"login": "JianmingMo", "id": 16352437, "node_id": "MDQ6VXNlcjE2MzUyNDM3", "avatar_url": "https://avatars0.githubusercontent.com/u/16352437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JianmingMo", "html_url": "https://github.com/JianmingMo", "followers_url": "https://api.github.com/users/JianmingMo/followers", "following_url": "https://api.github.com/users/JianmingMo/following{/other_user}", "gists_url": "https://api.github.com/users/JianmingMo/gists{/gist_id}", "starred_url": "https://api.github.com/users/JianmingMo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JianmingMo/subscriptions", "organizations_url": "https://api.github.com/users/JianmingMo/orgs", "repos_url": "https://api.github.com/users/JianmingMo/repos", "events_url": "https://api.github.com/users/JianmingMo/events{/privacy}", "received_events_url": "https://api.github.com/users/JianmingMo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-25T09:17:42Z", "updated_at": "2019-04-25T11:54:15Z", "closed_at": "2019-04-25T11:54:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/236", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/236/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/236/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/236/events", "html_url": "https://github.com/celery/django-celery-beat/issues/236", "id": 422588794, "node_id": "MDU6SXNzdWU0MjI1ODg3OTQ=", "number": 236, "title": "Issue with crontab to run every `x` days", "user": {"login": "ajaykmr2292", "id": 29298860, "node_id": "MDQ6VXNlcjI5Mjk4ODYw", "avatar_url": "https://avatars3.githubusercontent.com/u/29298860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajaykmr2292", "html_url": "https://github.com/ajaykmr2292", "followers_url": "https://api.github.com/users/ajaykmr2292/followers", "following_url": "https://api.github.com/users/ajaykmr2292/following{/other_user}", "gists_url": "https://api.github.com/users/ajaykmr2292/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajaykmr2292/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajaykmr2292/subscriptions", "organizations_url": "https://api.github.com/users/ajaykmr2292/orgs", "repos_url": "https://api.github.com/users/ajaykmr2292/repos", "events_url": "https://api.github.com/users/ajaykmr2292/events{/privacy}", "received_events_url": "https://api.github.com/users/ajaykmr2292/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-19T07:54:05Z", "updated_at": "2019-04-22T14:55:01Z", "closed_at": "2019-04-22T14:55:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to know whether `crontab` can be used to run every 3 days from the current day. Also, suppose the last day of the month is 31, then after running on `30th`, the next run must be on `2nd` and not `3rd` (as is the case with crontab since it runs for every date divisible by 3). \r\n\r\nAs you can see, if the month has date `31`, then the gap will be 4 days and not 3 days. So, I would like to know whether crontab can do it.\r\n\r\nI assume it cant. So, I was trying to use `IntervalSchedule` model to run every `x` days. But I would like to know whether I could use `IntervalSchedule` to run every `x` days at specified time (like say run every 2 days at 11AM). Please tell me how to do this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/234", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/234/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/234/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/234/events", "html_url": "https://github.com/celery/django-celery-beat/issues/234", "id": 421923398, "node_id": "MDU6SXNzdWU0MjE5MjMzOTg=", "number": 234, "title": "Enable Cron task, interval task not work", "user": {"login": "lacoski", "id": 14269589, "node_id": "MDQ6VXNlcjE0MjY5NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/14269589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lacoski", "html_url": "https://github.com/lacoski", "followers_url": "https://api.github.com/users/lacoski/followers", "following_url": "https://api.github.com/users/lacoski/following{/other_user}", "gists_url": "https://api.github.com/users/lacoski/gists{/gist_id}", "starred_url": "https://api.github.com/users/lacoski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lacoski/subscriptions", "organizations_url": "https://api.github.com/users/lacoski/orgs", "repos_url": "https://api.github.com/users/lacoski/repos", "events_url": "https://api.github.com/users/lacoski/events{/privacy}", "received_events_url": "https://api.github.com/users/lacoski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419078065, "node_id": "MDU6TGFiZWw0MTkwNzgwNjU=", "url": "https://api.github.com/repos/celery/django-celery-beat/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-03-17T13:38:06Z", "updated_at": "2019-07-06T13:33:05Z", "closed_at": "2019-07-06T13:33:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "My Django Web has interval task type and cron task type. When i disable cron task type, interval task type work. But when i enable cron task type, cron task type work and interval task not work.\r\n\r\nI run celery beat and celery worker with supervisor. And i'm sure service beat running\r\n\r\nVersion\r\n```\r\ncelery==4.2.1\r\ndjango-celery-beat==1.3.0\r\n```\r\n\r\nMy settings\r\n```\r\nINSTALLED_APPS += [\r\n    'django_celery_beat',\r\n    'reports',\r\n]\r\n\r\nLANGUAGE_CODE = 'en-us'\r\nTIME_ZONE = 'Asia/Ho_Chi_Minh'\r\nUSE_TZ = True\r\n\r\n\r\nCELERY_BROKER_URL = [\r\n    'pyamqp://xxxx:xxxx@xx.xx.xx.10:5672/dev_vhost',\r\n    'pyamqp://xxxx:xxxx@xx.xx.xx.11:5672/dev_vhost',\r\n    'pyamqp://xxxx:xxxx@xx.xx.xx.12:5672/dev_vhost',\r\n\r\n]\r\n\r\nCELERY_RESULT_BACKEND = 'rpc://'\r\nCELERY_ENABLE_UTC = True\r\nCELERY_TIMEZONE = 'Asia/Ho_Chi_Minh'\r\nCELERY_BROKER_HEARTBEAT = 0\r\n\r\nCELERY_ACCEPT_CONTENT = ['application/json']\r\nCELERY_RESULT_SERIALIZER = 'json'\r\nCELERY_TASK_SERIALIZER = 'json'\r\n```\r\n\r\nLog celery beat (when enable cron task type)\r\n```\r\n[2019-03-17 17:02:48,562: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:05:49,343: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:08:49,931: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:11:50,555: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:14:51,154: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:17:51,766: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:20:52,366: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:23:52,960: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:26:53,554: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:29:54,142: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:32:54,724: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:35:55,317: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:38:55,932: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:41:56,539: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:44:57,147: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:47:57,733: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:50:58,349: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:53:58,954: INFO/MainProcess] Writing entries...\r\n[2019-03-17 17:56:59,546: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:00:00,144: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:03:00,728: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:06:01,331: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:09:01,938: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:12:02,527: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:15:03,118: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:18:03,707: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:21:04,287: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:24:04,872: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:27:05,464: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:30:06,069: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:33:06,670: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:36:07,249: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:39:07,837: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:42:08,425: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:45:09,004: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:48:09,614: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:51:10,214: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:54:10,815: INFO/MainProcess] Writing entries...\r\n[2019-03-17 18:57:11,412: INFO/MainProcess] Writing entries...\r\n[2019-03-17 19:00:12,025: INFO/MainProcess] Writing entries...\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/232", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/232/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/232/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/232/events", "html_url": "https://github.com/celery/django-celery-beat/issues/232", "id": 419843369, "node_id": "MDU6SXNzdWU0MTk4NDMzNjk=", "number": 232, "title": "How to improve readability for multiline string arguments when setting task on Django admin interface?", "user": {"login": "yybot1", "id": 5652553, "node_id": "MDQ6VXNlcjU2NTI1NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5652553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yybot1", "html_url": "https://github.com/yybot1", "followers_url": "https://api.github.com/users/yybot1/followers", "following_url": "https://api.github.com/users/yybot1/following{/other_user}", "gists_url": "https://api.github.com/users/yybot1/gists{/gist_id}", "starred_url": "https://api.github.com/users/yybot1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yybot1/subscriptions", "organizations_url": "https://api.github.com/users/yybot1/orgs", "repos_url": "https://api.github.com/users/yybot1/repos", "events_url": "https://api.github.com/users/yybot1/events{/privacy}", "received_events_url": "https://api.github.com/users/yybot1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-12T07:44:40Z", "updated_at": "2019-03-12T08:44:48Z", "closed_at": "2019-03-12T08:44:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "When setting arguments of the periodic task on Django admin interface, as it's JSON encoded, how to improve readability for multiline string arguments?\r\n\r\nExample, for a ConfigParser config string:\r\n[\"[Default]\\ntest: yes\\n\"]\r\n\r\nIt works, but how to improve readability? anything like:\r\n[\"\r\n[Default]\r\ntest: yes\r\n\"]\r\n\r\nCurrently, I get this error:\r\nUnable to parse JSON: Invalid control character at: line 1 column 3 (char 2)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/229", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/229/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/229/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/229/events", "html_url": "https://github.com/celery/django-celery-beat/issues/229", "id": 416421490, "node_id": "MDU6SXNzdWU0MTY0MjE0OTA=", "number": 229, "title": "Add locking to ensure only one celery beat server runs at any time", "user": {"login": "chdsbd", "id": 1929960, "node_id": "MDQ6VXNlcjE5Mjk5NjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1929960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chdsbd", "html_url": "https://github.com/chdsbd", "followers_url": "https://api.github.com/users/chdsbd/followers", "following_url": "https://api.github.com/users/chdsbd/following{/other_user}", "gists_url": "https://api.github.com/users/chdsbd/gists{/gist_id}", "starred_url": "https://api.github.com/users/chdsbd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chdsbd/subscriptions", "organizations_url": "https://api.github.com/users/chdsbd/orgs", "repos_url": "https://api.github.com/users/chdsbd/repos", "events_url": "https://api.github.com/users/chdsbd/events{/privacy}", "received_events_url": "https://api.github.com/users/chdsbd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419078069, "node_id": "MDU6TGFiZWw0MTkwNzgwNjk=", "url": "https://api.github.com/repos/celery/django-celery-beat/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-02T17:44:01Z", "updated_at": "2019-05-03T13:47:57Z", "closed_at": "2019-05-03T13:47:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I think it would be useful to add a locking feature that insures only one celery beat server runs at any time, similar to what [redbeat](https://github.com/sibson/redbeat#why-redbeat) provides via redis.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/224", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/224/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/224/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/224/events", "html_url": "https://github.com/celery/django-celery-beat/issues/224", "id": 413018544, "node_id": "MDU6SXNzdWU0MTMwMTg1NDQ=", "number": 224, "title": "Beat doesn't fire task between 20:00 and 4:00 (UTC+0) sharp after upgrading from 1.0.1 to 1.4.0 and django 1.11 to 2.1.7", "user": {"login": "bogdanhopu", "id": 25581819, "node_id": "MDQ6VXNlcjI1NTgxODE5", "avatar_url": "https://avatars0.githubusercontent.com/u/25581819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bogdanhopu", "html_url": "https://github.com/bogdanhopu", "followers_url": "https://api.github.com/users/bogdanhopu/followers", "following_url": "https://api.github.com/users/bogdanhopu/following{/other_user}", "gists_url": "https://api.github.com/users/bogdanhopu/gists{/gist_id}", "starred_url": "https://api.github.com/users/bogdanhopu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bogdanhopu/subscriptions", "organizations_url": "https://api.github.com/users/bogdanhopu/orgs", "repos_url": "https://api.github.com/users/bogdanhopu/repos", "events_url": "https://api.github.com/users/bogdanhopu/events{/privacy}", "received_events_url": "https://api.github.com/users/bogdanhopu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-21T16:41:02Z", "updated_at": "2019-02-26T13:53:01Z", "closed_at": "2019-02-26T13:53:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have multiple tasks scheduled, both cron and at intervals with one task schedule every minute. After the upgrade, each day between 20:00 sharp and 4:00 sharp (UTC+0) no task get scheduled. I tried rebooting the heroku dyno in that time interval and still nothing. This happens on multiple environments.\r\n\r\nIt's like beat has quiet hours.\r\n\r\nCelery remained unchanged at version 4.1.1 .", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/223", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/223/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/223/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/223/events", "html_url": "https://github.com/celery/django-celery-beat/issues/223", "id": 412826776, "node_id": "MDU6SXNzdWU0MTI4MjY3NzY=", "number": 223, "title": "I solved the problem of USE_TZ=False and DJANGO_CELERY_BEAT_TZ_AWARE = \u200b\u200bFalse", "user": {"login": "wssnail", "id": 6237069, "node_id": "MDQ6VXNlcjYyMzcwNjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6237069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wssnail", "html_url": "https://github.com/wssnail", "followers_url": "https://api.github.com/users/wssnail/followers", "following_url": "https://api.github.com/users/wssnail/following{/other_user}", "gists_url": "https://api.github.com/users/wssnail/gists{/gist_id}", "starred_url": "https://api.github.com/users/wssnail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wssnail/subscriptions", "organizations_url": "https://api.github.com/users/wssnail/orgs", "repos_url": "https://api.github.com/users/wssnail/repos", "events_url": "https://api.github.com/users/wssnail/events{/privacy}", "received_events_url": "https://api.github.com/users/wssnail/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-21T09:30:03Z", "updated_at": "2019-02-22T02:06:42Z", "closed_at": "2019-02-22T02:01:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "In my country\uff0cI can't use UTC because this will make my timing task work abnormally.\r\nSo I need to set USE_TZ=False \uff0cBut I have an exception\uff1a\r\n```python\r\n    if maybe_make_aware(self._default_now()) < self.model.start_time:\r\nTypeError: can't compare offset-naive and offset-aware datetimes\r\n```\r\nLooking for a lot of information, a variety of modifications.\r\nBut when we think about it, we can think that we don't need any settings, just make sure they can compare them.\r\n1.`set USE_TZ=False and DJANGO_CELERY_BEAT_TZ_AWARE = \u200b\u200bFalse`\r\n2.Modify the location where the exception occurred,like this:\r\ndjango_celery_beat.schedulers.py\r\n```python\r\n    def is_due(self):\r\n        if not self.model.enabled:\r\n            # 5 second delay for re-enable.\r\n            return schedules.schedstate(False, 5.0)\r\n\r\n        # START DATE: only run after the `start_time`, if one exists.\r\n        if self.model.start_time is not None:\r\n            # ------start----------------------------------------------------\r\n            # if maybe_make_aware(self._default_now()) < self.model.start_time:\r\n            #     print(\"xxxx\")\r\n            default_now = self._default_now()\r\n            # import copy\r\n            # start_time = copy.deepcopy(self.model.start_time)\r\n            start_time = self.model.start_time\r\n            if is_naive(start_time) != is_naive(default_now):\r\n                if is_naive(start_time):\r\n                    start_time = maybe_make_aware(start_time)\r\n                else:\r\n                    default_now = maybe_make_aware(default_now)\r\n            if default_now < start_time:\r\n            # if maybe_make_aware(self._default_now()) < self.model.start_time:\r\n            # -------end---------------------------------------------------\r\n                # The datetime is before the start date - don't run.\r\n                _, delay = self.schedule.is_due(self.last_run_at)\r\n                # use original delay for re-check\r\n                return schedules.schedstate(False, delay)\r\n```\r\nWe don't need to know what the start_time is stored in the database, and we don't know what the local settings are.\r\nEither is is_naive or both aware, and we only have the maybe_make_aware method, just need to convert naive to aware", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/220", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/220/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/220/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/220/events", "html_url": "https://github.com/celery/django-celery-beat/issues/220", "id": 403091467, "node_id": "MDU6SXNzdWU0MDMwOTE0Njc=", "number": 220, "title": "Django 2.1 support", "user": {"login": "barseghyanartur", "id": 4925587, "node_id": "MDQ6VXNlcjQ5MjU1ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/4925587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barseghyanartur", "html_url": "https://github.com/barseghyanartur", "followers_url": "https://api.github.com/users/barseghyanartur/followers", "following_url": "https://api.github.com/users/barseghyanartur/following{/other_user}", "gists_url": "https://api.github.com/users/barseghyanartur/gists{/gist_id}", "starred_url": "https://api.github.com/users/barseghyanartur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barseghyanartur/subscriptions", "organizations_url": "https://api.github.com/users/barseghyanartur/orgs", "repos_url": "https://api.github.com/users/barseghyanartur/repos", "events_url": "https://api.github.com/users/barseghyanartur/events{/privacy}", "received_events_url": "https://api.github.com/users/barseghyanartur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-25T10:17:26Z", "updated_at": "2019-01-25T19:45:15Z", "closed_at": "2019-01-25T19:45:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any hope for Django 2.1 support soon?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/219", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/219/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/219/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/219/events", "html_url": "https://github.com/celery/django-celery-beat/issues/219", "id": 401439179, "node_id": "MDU6SXNzdWU0MDE0MzkxNzk=", "number": 219, "title": "Scheduler is mis-firing some tasks", "user": {"login": "viperfx", "id": 328257, "node_id": "MDQ6VXNlcjMyODI1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/328257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viperfx", "html_url": "https://github.com/viperfx", "followers_url": "https://api.github.com/users/viperfx/followers", "following_url": "https://api.github.com/users/viperfx/following{/other_user}", "gists_url": "https://api.github.com/users/viperfx/gists{/gist_id}", "starred_url": "https://api.github.com/users/viperfx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viperfx/subscriptions", "organizations_url": "https://api.github.com/users/viperfx/orgs", "repos_url": "https://api.github.com/users/viperfx/repos", "events_url": "https://api.github.com/users/viperfx/events{/privacy}", "received_events_url": "https://api.github.com/users/viperfx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-01-21T16:57:57Z", "updated_at": "2019-07-28T12:24:52Z", "closed_at": "2019-04-20T16:48:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "My work load is not too crazy, compared to have I heard from other teams and read online. I'm currently curing celery beat with django-celery-beat so that I can have my tasks managed by the DB (postgres). This allows users to change schedules dynamically.\r\n\r\nThis past weekend I did a upgrade of my codebase from py2 to py3, and I switched from huey to celery and use native celery beat to handle scheduling.\r\nPreviously, I was doing a dumb loop to check for scheduled in a task that fired every minute.\r\n\r\nI know... its not great but here is what I did.\r\n```\r\n#run every minute\r\ndef conditionally_run_other_tasks():\r\n    # query database and see if some tasks should be run.\r\n    # call the tasks in here and they will be enqueued and executed\r\n```\r\n\r\nHence why I was really glad to move away from that. Having said that though, that little loop only missed a beat a couple of times a month.\r\n\r\nI deployed celery yesterday and it has already **missed 5 tasks out of 40.** \r\n\r\nI believe I am on the latest and greatest.\r\n```\r\ncelery==4.2.1\r\ndjango-celery-beat==1.4.0\r\nDjango==2.1.4\r\n```\r\n\r\nSo celery should be using redis as the broker and django-celery-beat should be using Django ORM with Postgres for storing the schedules.\r\n\r\nI have datadog logging a bunch of stuff. I can show you some interesting graphs.\r\n\r\n**No tasks were dispatched between 4am and 7am UTC**\r\n\r\n![image](https://user-images.githubusercontent.com/328257/51488122-bfa13080-1d72-11e9-9771-568e6681d603.png)\r\n\r\nLatency and and requests, seem pretty normal\r\n![image](https://user-images.githubusercontent.com/328257/51488177-d9427800-1d72-11e9-935b-14a88625508f.png)\r\n\r\nQueries are being run around that time too\r\n![image](https://user-images.githubusercontent.com/328257/51488194-e65f6700-1d72-11e9-81c8-ce2fcb74fa26.png)\r\n\r\n\r\nSo the scheduler did not send the task, I believe.\r\n\r\nAny comments or ideas you might have about why it might be happening or what I could do for debugging would be really great.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/218", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/218/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/218/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/218/events", "html_url": "https://github.com/celery/django-celery-beat/issues/218", "id": 401017122, "node_id": "MDU6SXNzdWU0MDEwMTcxMjI=", "number": 218, "title": "INFO:django_celery_beat.schedulers:Writing entries... logged every 3 minutes", "user": {"login": "viperfx", "id": 328257, "node_id": "MDQ6VXNlcjMyODI1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/328257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viperfx", "html_url": "https://github.com/viperfx", "followers_url": "https://api.github.com/users/viperfx/followers", "following_url": "https://api.github.com/users/viperfx/following{/other_user}", "gists_url": "https://api.github.com/users/viperfx/gists{/gist_id}", "starred_url": "https://api.github.com/users/viperfx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viperfx/subscriptions", "organizations_url": "https://api.github.com/users/viperfx/orgs", "repos_url": "https://api.github.com/users/viperfx/repos", "events_url": "https://api.github.com/users/viperfx/events{/privacy}", "received_events_url": "https://api.github.com/users/viperfx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-01-19T17:36:35Z", "updated_at": "2020-05-19T05:13:25Z", "closed_at": "2020-05-19T05:13:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I see this log message from the celery beat worker, every 3 minutes.\r\n\r\nIs there a reason for this? I do not see what could be causing the writes on DB.\r\n\r\nI am using the latest version of the library.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/217", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/217/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/217/events", "html_url": "https://github.com/celery/django-celery-beat/issues/217", "id": 398069243, "node_id": "MDU6SXNzdWUzOTgwNjkyNDM=", "number": 217, "title": "Messed up migration files", "user": {"login": "justmobilize", "id": 1547881, "node_id": "MDQ6VXNlcjE1NDc4ODE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1547881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justmobilize", "html_url": "https://github.com/justmobilize", "followers_url": "https://api.github.com/users/justmobilize/followers", "following_url": "https://api.github.com/users/justmobilize/following{/other_user}", "gists_url": "https://api.github.com/users/justmobilize/gists{/gist_id}", "starred_url": "https://api.github.com/users/justmobilize/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justmobilize/subscriptions", "organizations_url": "https://api.github.com/users/justmobilize/orgs", "repos_url": "https://api.github.com/users/justmobilize/repos", "events_url": "https://api.github.com/users/justmobilize/events{/privacy}", "received_events_url": "https://api.github.com/users/justmobilize/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1346092395, "node_id": "MDU6TGFiZWwxMzQ2MDkyMzk1", "url": "https://api.github.com/repos/celery/django-celery-beat/labels/Investigating", "name": "Investigating", "color": "c6d8ff", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2019-01-10T23:56:39Z", "updated_at": "2019-05-06T11:19:48Z", "closed_at": "2019-05-06T11:19:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! Are there plans to create a new version with corrected migrations? I would love to use some of the new features, but until the migrations are stable, I can't.\r\n\r\nI would be happy to help if I can get commitment to the release being rolled out quickly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/213", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/213/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/213/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/213/events", "html_url": "https://github.com/celery/django-celery-beat/issues/213", "id": 394631090, "node_id": "MDU6SXNzdWUzOTQ2MzEwOTA=", "number": 213, "title": "Question: Usage of django celery.backend_cleanup ", "user": {"login": "arbazkiraak", "id": 13177578, "node_id": "MDQ6VXNlcjEzMTc3NTc4", "avatar_url": "https://avatars2.githubusercontent.com/u/13177578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arbazkiraak", "html_url": "https://github.com/arbazkiraak", "followers_url": "https://api.github.com/users/arbazkiraak/followers", "following_url": "https://api.github.com/users/arbazkiraak/following{/other_user}", "gists_url": "https://api.github.com/users/arbazkiraak/gists{/gist_id}", "starred_url": "https://api.github.com/users/arbazkiraak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arbazkiraak/subscriptions", "organizations_url": "https://api.github.com/users/arbazkiraak/orgs", "repos_url": "https://api.github.com/users/arbazkiraak/repos", "events_url": "https://api.github.com/users/arbazkiraak/events{/privacy}", "received_events_url": "https://api.github.com/users/arbazkiraak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-28T12:55:09Z", "updated_at": "2019-09-04T11:36:49Z", "closed_at": "2018-12-30T03:56:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is not much documentation available for the actual usage of `django celery.backend_cleanup ` \r\n\r\nLet's assume i have following `4 tasks scheduled with different interval`\r\n\r\n![image](https://user-images.githubusercontent.com/13177578/50515721-52c8ac80-0acc-11e9-9f9b-9af1d0b86bd0.png)\r\n\r\nChecking DatabaseScheduler Logs I had found that only `Task1` is executing on interval. \r\n\r\n```\r\n[2018-12-28 11:21:08,241: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:24:08,778: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:27:09,315: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:28:32,948: INFO/MainProcess] Scheduler: Scheduler: Sending due TASK1(project_monitor_tasks)\r\n[2018-12-28 11:30:13,215: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:33:13,772: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:36:14,316: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:39:14,868: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:42:15,397: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:43:55,700: INFO/MainProcess] DatabaseScheduler: Schedule changed.\r\n[2018-12-28 11:43:55,700: INFO/MainProcess] Writing entries...\r\n[2018-12-28 11:45:15,997: INFO/MainProcess] Writing entries...\r\n.....\r\n....\r\n[2018-12-28 17:16:28,613: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:19:29,138: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:22:29,625: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:25:30,140: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:28:30,657: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:28:32,943: INFO/MainProcess] Scheduler: Sending due TASK1(project_monitor_tasks)\r\n[2018-12-28 17:31:33,441: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:34:34,009: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:37:34,578: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:40:35,130: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:43:35,657: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:43:50,716: INFO/MainProcess] DatabaseScheduler: Schedule changed.\r\n[2018-12-28 17:43:50,716: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:46:36,266: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:49:36,809: INFO/MainProcess] Writing entries...\r\n[2018-12-28 17:52:37,352: INFO/MainProcess] Writing entries...\r\n```\r\nQ1) why other `TASKS` which are at different intervals such as `24,8,10` Hours are not executing? , I'm Assuming this is because  `Crontab of  celery.backend_cleanup ` is set to every `4 Hours` which is cleaning up queue tasks. Should i keep the large interval time for `celery.backend_cleanup` task ?\r\n\r\nQ2) Why we should keep `celery.backend_cleanup` task?  Does it loads new tasks on every cleanup?\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/212", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/212/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/212/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/212/events", "html_url": "https://github.com/celery/django-celery-beat/issues/212", "id": 392894729, "node_id": "MDU6SXNzdWUzOTI4OTQ3Mjk=", "number": 212, "title": "    category=models.ForeignKey(Category,default=None) TypeError: __init__() missing 1 required positional argument: 'on_delete'", "user": {"login": "sachinsiddhpura", "id": 34954488, "node_id": "MDQ6VXNlcjM0OTU0NDg4", "avatar_url": "https://avatars2.githubusercontent.com/u/34954488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sachinsiddhpura", "html_url": "https://github.com/sachinsiddhpura", "followers_url": "https://api.github.com/users/sachinsiddhpura/followers", "following_url": "https://api.github.com/users/sachinsiddhpura/following{/other_user}", "gists_url": "https://api.github.com/users/sachinsiddhpura/gists{/gist_id}", "starred_url": "https://api.github.com/users/sachinsiddhpura/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sachinsiddhpura/subscriptions", "organizations_url": "https://api.github.com/users/sachinsiddhpura/orgs", "repos_url": "https://api.github.com/users/sachinsiddhpura/repos", "events_url": "https://api.github.com/users/sachinsiddhpura/events{/privacy}", "received_events_url": "https://api.github.com/users/sachinsiddhpura/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-20T05:22:12Z", "updated_at": "2018-12-20T10:44:59Z", "closed_at": "2018-12-20T10:44:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/211", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/211/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/211/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/211/events", "html_url": "https://github.com/celery/django-celery-beat/issues/211", "id": 392483521, "node_id": "MDU6SXNzdWUzOTI0ODM1MjE=", "number": 211, "title": "Issue with Django USE_TZ=False and TIME_ZONE set", "user": {"login": "Sovetnikov", "id": 9721773, "node_id": "MDQ6VXNlcjk3MjE3NzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/9721773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sovetnikov", "html_url": "https://github.com/Sovetnikov", "followers_url": "https://api.github.com/users/Sovetnikov/followers", "following_url": "https://api.github.com/users/Sovetnikov/following{/other_user}", "gists_url": "https://api.github.com/users/Sovetnikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sovetnikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sovetnikov/subscriptions", "organizations_url": "https://api.github.com/users/Sovetnikov/orgs", "repos_url": "https://api.github.com/users/Sovetnikov/repos", "events_url": "https://api.github.com/users/Sovetnikov/events{/privacy}", "received_events_url": "https://api.github.com/users/Sovetnikov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-19T08:08:04Z", "updated_at": "2019-04-01T04:22:10Z", "closed_at": "2019-04-01T04:22:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "The situation:\r\ncelery 4.2.1\r\ndjango-celery-beat 1.4.0\r\nDjango 2.1.3\r\nPython 3.7\r\nPostgres 9\r\n\r\ndjango settings.py:\r\nTIME_ZONE = 'Europe/Moscow'\r\nUSE_TZ = False\r\n\r\n> celery report\r\nsoftware -> celery:4.2.1 (windowlicker) kombu:4.2.2 py:3.7.1\r\nbilliard:3.5.0.5 redis:3.0.1\r\nplatform -> system:Linux arch:64bit imp:CPython\r\nloader -> celery.loaders.app.AppLoader\r\nsettings -> transport:redis results:django-cache\r\nresult_backend: 'django-cache'\r\ntask_serializer: 'pickle'\r\naccept_content: ['json', 'pickle']\r\nresult_serializer: 'pickle'\r\ntimezone: 'Europe/Moscow'\r\nresult_expires: datetime.timedelta(days=14)\r\ntask_track_started: True\r\nbroker_url: 'redis://redis:6379/1'\r\nworker_log_color: False\r\nworker_max_tasks_per_child: 50\r\nworker_prefetch_multiplier: 1\r\n\r\nThe project is using naive datetime and i know what i'm doing.\r\n\r\nThe problem is that task with period of 1 minute schedule is started constantly by beat in loop.\r\n\r\n> beat_1 | [2018-12-19 09:00:54,575: DEBUG/MainProcess] .tasks.server_tasks.tasks_scheduler sent. id->03755bc5-3cfc-408d-928c-69092e8f09cb\r\nbeat_1 | [2018-12-19 09:00:54,586: INFO/MainProcess] Scheduler: Sending due task (tasks.server_tasks.tasks_scheduler)\r\nbeat_1 | [2018-12-19 09:00:54,588: DEBUG/MainProcess] .tasks.server_tasks.tasks_scheduler sent. id->3ecb6d84-ec1a-4684-bece-90d10c4f2bd8\r\nbeat_1 | [2018-12-19 09:00:54,600: INFO/MainProcess] Scheduler: Sending due task (.tasks.server_tasks.tasks_scheduler)\r\nbeat_1 | [2018-12-19 09:00:54,602: DEBUG/MainProcess] .tasks.server_tasks.tasks_scheduler sent. id->5981449a-2626-48f1-90ab-0ff6d17ba5de\r\nbeat_1 | [2018-12-19 09:00:54,611: INFO/MainProcess] Scheduler: Sending due task (.tasks.server_tasks.tasks_scheduler)\r\n\r\nIn postgres times stored as UTC and my connection has right timezone set.\r\nMy datetime fields is always has local value in local timezone as set in settings.py.\r\n\r\nAfter debugging i see that problem is that celery.beat.Scheduler.is_due always returns negative values and task is started at every tick.\r\n\r\nI see that few function dealing with time conversion that beat is using undercover. It is:\r\ncelery.utils.time.make_aware\r\ncelery.utils.time.maybe_make_aware\r\ndjango_celery_beat.utils.make_aware\r\n\r\ndjango_celery_beat.utils.make_aware - works fine, depends on USE_TZ. If USE_TZ is False it doing nothing, if True it makes assumption that naive time is UTC and converts it to local timezone.\r\n\r\ncelery.utils.time.maybe_make_aware is used in celery.schedules.schedule.is_due with last_run_at.\r\nlast_run_at in my case is naive time already in local timezone! But celery.utils.time.maybe_make_aware thinks it is UTC time.\r\n\r\nDjango with USE_TZ=False imply that naive time is always local time.\r\nBut celery function celery.utils.time.maybe_make_aware thinks that naive time is always UTC time and makes wrong conversion.\r\n\r\nI think core problem is that celery makes \"wrong\" assumption on naive time timezone, but never mind...\r\n\r\nThe fix, i think, is that django-celery-beat must take this into account and convert all naive time to UTC when passing to celery functions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/209", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/209/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/209/events", "html_url": "https://github.com/celery/django-celery-beat/issues/209", "id": 391657934, "node_id": "MDU6SXNzdWUzOTE2NTc5MzQ=", "number": 209, "title": "PeriodicTask.expires as timedelta and not absolute date [feature request]", "user": {"login": "kobymeir", "id": 1146242, "node_id": "MDQ6VXNlcjExNDYyNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1146242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kobymeir", "html_url": "https://github.com/kobymeir", "followers_url": "https://api.github.com/users/kobymeir/followers", "following_url": "https://api.github.com/users/kobymeir/following{/other_user}", "gists_url": "https://api.github.com/users/kobymeir/gists{/gist_id}", "starred_url": "https://api.github.com/users/kobymeir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kobymeir/subscriptions", "organizations_url": "https://api.github.com/users/kobymeir/orgs", "repos_url": "https://api.github.com/users/kobymeir/repos", "events_url": "https://api.github.com/users/kobymeir/events{/privacy}", "received_events_url": "https://api.github.com/users/kobymeir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1327689559, "node_id": "MDU6TGFiZWwxMzI3Njg5NTU5", "url": "https://api.github.com/repos/celery/django-celery-beat/labels/feature%20request", "name": "feature request", "color": "fca16c", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-17T10:56:32Z", "updated_at": "2020-05-22T04:20:45Z", "closed_at": "2020-05-22T04:20:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wish to schedule tasks every hour, However i don't want the tasks to pile up in the queue in case the worker stops working.\r\nIt would be much easier to set them to be expired after 50-60 minutes from their creation time.\r\nso if the worker does start again all of the tasks (except the last one) will be expired.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/207", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/207/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/207/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/207/events", "html_url": "https://github.com/celery/django-celery-beat/issues/207", "id": 389203019, "node_id": "MDU6SXNzdWUzODkyMDMwMTk=", "number": 207, "title": "Can it be apply without reload celery-beat?", "user": {"login": "mrgaolei", "id": 1567325, "node_id": "MDQ6VXNlcjE1NjczMjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1567325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrgaolei", "html_url": "https://github.com/mrgaolei", "followers_url": "https://api.github.com/users/mrgaolei/followers", "following_url": "https://api.github.com/users/mrgaolei/following{/other_user}", "gists_url": "https://api.github.com/users/mrgaolei/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrgaolei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrgaolei/subscriptions", "organizations_url": "https://api.github.com/users/mrgaolei/orgs", "repos_url": "https://api.github.com/users/mrgaolei/repos", "events_url": "https://api.github.com/users/mrgaolei/events{/privacy}", "received_events_url": "https://api.github.com/users/mrgaolei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-10T09:08:12Z", "updated_at": "2018-12-12T09:44:19Z", "closed_at": "2018-12-12T09:44:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "`django-celery-beat` is very useful, but when I change entry, I must restart/reload celery-beat to apply my new cron-entry.\r\n\r\nCan it apply without reload celery-beat?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/204", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/204/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/204/events", "html_url": "https://github.com/celery/django-celery-beat/issues/204", "id": 387879729, "node_id": "MDU6SXNzdWUzODc4Nzk3Mjk=", "number": 204, "title": "Crontab ignored after upgrade from 1.1.1 to 1.3.0", "user": {"login": "jfscyberpub", "id": 23479272, "node_id": "MDQ6VXNlcjIzNDc5Mjcy", "avatar_url": "https://avatars3.githubusercontent.com/u/23479272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfscyberpub", "html_url": "https://github.com/jfscyberpub", "followers_url": "https://api.github.com/users/jfscyberpub/followers", "following_url": "https://api.github.com/users/jfscyberpub/following{/other_user}", "gists_url": "https://api.github.com/users/jfscyberpub/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfscyberpub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfscyberpub/subscriptions", "organizations_url": "https://api.github.com/users/jfscyberpub/orgs", "repos_url": "https://api.github.com/users/jfscyberpub/repos", "events_url": "https://api.github.com/users/jfscyberpub/events{/privacy}", "received_events_url": "https://api.github.com/users/jfscyberpub/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-05T18:07:25Z", "updated_at": "2018-12-05T19:33:18Z", "closed_at": "2018-12-05T19:33:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "We upgraded django-celery-beat from 1.1.1 to 1.3.0. We ran the migration. Since then, all tasks with a crontab are not working anymore. All with an interval are working fine. Please advise.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/201", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/201/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/201/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/201/events", "html_url": "https://github.com/celery/django-celery-beat/issues/201", "id": 385954572, "node_id": "MDU6SXNzdWUzODU5NTQ1NzI=", "number": 201, "title": "Make CrontabSchedule be configurable to allow timezone naive schedule", "user": {"login": "milind-shakya-sp", "id": 43146933, "node_id": "MDQ6VXNlcjQzMTQ2OTMz", "avatar_url": "https://avatars2.githubusercontent.com/u/43146933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/milind-shakya-sp", "html_url": "https://github.com/milind-shakya-sp", "followers_url": "https://api.github.com/users/milind-shakya-sp/followers", "following_url": "https://api.github.com/users/milind-shakya-sp/following{/other_user}", "gists_url": "https://api.github.com/users/milind-shakya-sp/gists{/gist_id}", "starred_url": "https://api.github.com/users/milind-shakya-sp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/milind-shakya-sp/subscriptions", "organizations_url": "https://api.github.com/users/milind-shakya-sp/orgs", "repos_url": "https://api.github.com/users/milind-shakya-sp/repos", "events_url": "https://api.github.com/users/milind-shakya-sp/events{/privacy}", "received_events_url": "https://api.github.com/users/milind-shakya-sp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-29T22:28:35Z", "updated_at": "2018-12-04T07:46:35Z", "closed_at": "2018-12-04T07:46:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For projects that want to use `django-celery-beat` but that have `USE_TZ` set to False, cannot, cleanly migrate to `django-celery-beat` since cannot use `USE_TZ` to True for legacy reasons.\r\n\r\nWould it be beneficial to make it configurable so, we can return a [time zone aware schedule](https://github.com/celery/django-celery-beat/blob/master/django_celery_beat/models.py#L194) or a [timezone naive schedule](https://github.com/celery/django-celery/blob/master/djcelery/models.py#L166) based on a setting, so it fixes both sides of the problem?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/199", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/199/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/199/events", "html_url": "https://github.com/celery/django-celery-beat/issues/199", "id": 382099633, "node_id": "MDU6SXNzdWUzODIwOTk2MzM=", "number": 199, "title": "TypeError(\"can't compare offset-naive and offset-aware datetimes\",) with USE_TZ=False", "user": {"login": "ana-yankova", "id": 2765909, "node_id": "MDQ6VXNlcjI3NjU5MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/2765909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ana-yankova", "html_url": "https://github.com/ana-yankova", "followers_url": "https://api.github.com/users/ana-yankova/followers", "following_url": "https://api.github.com/users/ana-yankova/following{/other_user}", "gists_url": "https://api.github.com/users/ana-yankova/gists{/gist_id}", "starred_url": "https://api.github.com/users/ana-yankova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ana-yankova/subscriptions", "organizations_url": "https://api.github.com/users/ana-yankova/orgs", "repos_url": "https://api.github.com/users/ana-yankova/repos", "events_url": "https://api.github.com/users/ana-yankova/events{/privacy}", "received_events_url": "https://api.github.com/users/ana-yankova/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-19T08:11:46Z", "updated_at": "2018-12-11T09:44:08Z", "closed_at": "2018-12-11T09:44:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Celery beat exits with TypeError when started with a naive datetime Django project (USE_TZ=False) and PeriodicTask object with `start_time`\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n    service.start()\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/beat.py\", line 554, in start\r\n    interval = self.scheduler.tick()\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/beat.py\", line 261, in tick\r\n    self.populate_heap()\r\n  File \"/usr/local/lib/python2.7/site-packages/celery/beat.py\", line 242, in populate_heap\r\n    for e in values(self.schedule)]\r\n  File \"/usr/local/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 104, in is_due\r\n    if maybe_make_aware(self._default_now()) < self.model.start_time:\r\n```\r\n\r\nCELERY_ENABLE_UTC value doesn't seem to make a difference.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/198", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/198/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/198/events", "html_url": "https://github.com/celery/django-celery-beat/issues/198", "id": 380897420, "node_id": "MDU6SXNzdWUzODA4OTc0MjA=", "number": 198, "title": "InconsistentMigrationHistory when updating to 1.3.0", "user": {"login": "timthelion", "id": 1391608, "node_id": "MDQ6VXNlcjEzOTE2MDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1391608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timthelion", "html_url": "https://github.com/timthelion", "followers_url": "https://api.github.com/users/timthelion/followers", "following_url": "https://api.github.com/users/timthelion/following{/other_user}", "gists_url": "https://api.github.com/users/timthelion/gists{/gist_id}", "starred_url": "https://api.github.com/users/timthelion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timthelion/subscriptions", "organizations_url": "https://api.github.com/users/timthelion/orgs", "repos_url": "https://api.github.com/users/timthelion/repos", "events_url": "https://api.github.com/users/timthelion/events{/privacy}", "received_events_url": "https://api.github.com/users/timthelion/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2018-11-14T21:37:08Z", "updated_at": "2018-12-09T11:19:25Z", "closed_at": "2018-12-08T14:06:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "     $ python3 manage.py showmigrations\r\n\r\nshows\r\n```\r\ndjango_celery_beat\r\n [X] 0001_initial\r\n [X] 0002_auto_20161118_0346\r\n [X] 0003_auto_20161209_0049\r\n [X] 0004_auto_20170221_0000\r\n [X] 0005_add_solarschedule_events_choices\r\n [ ] 0006_auto_20180210_1226\r\n [X] 0006_auto_20180322_0932\r\n [X] 0007_auto_20180521_0826\r\n [X] 0008_auto_20180914_1922\r\n [ ] 0006_periodictask_priority\r\n```\r\n\r\nAnd I cannot migrate.\r\n\r\nSeems to me that https://github.com/celery/django-celery-beat/commit/639ceb2d6eec0d9cf3771ad6025d791d622c85cc is relevant.\r\n\r\n````\r\n        \"django-celery-beat\": {\r\n\ufffc             \"hashes\": [\r\n\ufffc                 \"sha256:b25bc19a589e2851361408708a2aac43524608dd35b85d34a295f90f873a75e5\",\r\n\ufffc                 \"sha256:f3be14a02280d9977757acfcc8464d0bb5a24c3ed5fbd88b60ca63bb24fce632\"\r\n\ufffc             ],\r\n\ufffc             \"index\": \"pypi\",\r\n\ufffc             \"version\": \"==1.2.0\"\r\n\ufffc         },\r\n````\r\n\r\nWas in my Pipfile.lock BEFORE the migration.\r\n\r\n````\r\n        \"django-celery-beat\": {\r\n            \"hashes\": [\r\n                \"sha256:800b67d396b12c59ca40b50a10c3ace58ca5907879237cad4e0cd404e779aa39\",\r\n                \"sha256:81cdf4b2dfe64433ec2527ce654bc4bf3e3a3410690163205f6afcd3697e4158\"\r\n            ],\r\n            \"index\": \"pypi\",\r\n            \"version\": \"==1.3.0\"\r\n        },\r\n````\r\n\r\nIs in my `Pipfile.lock` now.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/197", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/197/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/197/events", "html_url": "https://github.com/celery/django-celery-beat/issues/197", "id": 378278655, "node_id": "MDU6SXNzdWUzNzgyNzg2NTU=", "number": 197, "title": "Search-filter in admin", "user": {"login": "xeor", "id": 682676, "node_id": "MDQ6VXNlcjY4MjY3Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/682676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xeor", "html_url": "https://github.com/xeor", "followers_url": "https://api.github.com/users/xeor/followers", "following_url": "https://api.github.com/users/xeor/following{/other_user}", "gists_url": "https://api.github.com/users/xeor/gists{/gist_id}", "starred_url": "https://api.github.com/users/xeor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xeor/subscriptions", "organizations_url": "https://api.github.com/users/xeor/orgs", "repos_url": "https://api.github.com/users/xeor/repos", "events_url": "https://api.github.com/users/xeor/events{/privacy}", "received_events_url": "https://api.github.com/users/xeor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-07T13:03:41Z", "updated_at": "2018-11-07T15:47:21Z", "closed_at": "2018-11-07T15:47:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We need more searchability in admin...\r\n\r\nSearch, filters, ...?\r\n\r\nBasics are fixed in https://github.com/celery/django-celery-beat/pull/196\r\n\r\nAnother related issue is https://github.com/celery/django-celery-beat/issues/64 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/195", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/195/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/195/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/195/events", "html_url": "https://github.com/celery/django-celery-beat/issues/195", "id": 377989045, "node_id": "MDU6SXNzdWUzNzc5ODkwNDU=", "number": 195, "title": "Adding task in the future causes all tasks with that interval to not run", "user": {"login": "bodgerbarnett", "id": 1990439, "node_id": "MDQ6VXNlcjE5OTA0Mzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1990439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bodgerbarnett", "html_url": "https://github.com/bodgerbarnett", "followers_url": "https://api.github.com/users/bodgerbarnett/followers", "following_url": "https://api.github.com/users/bodgerbarnett/following{/other_user}", "gists_url": "https://api.github.com/users/bodgerbarnett/gists{/gist_id}", "starred_url": "https://api.github.com/users/bodgerbarnett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bodgerbarnett/subscriptions", "organizations_url": "https://api.github.com/users/bodgerbarnett/orgs", "repos_url": "https://api.github.com/users/bodgerbarnett/repos", "events_url": "https://api.github.com/users/bodgerbarnett/events{/privacy}", "received_events_url": "https://api.github.com/users/bodgerbarnett/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-11-06T19:00:56Z", "updated_at": "2018-12-11T10:52:38Z", "closed_at": "2018-12-11T10:52:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you create a PeriodicTask with a start time of now and an interval of 10 seconds and then another task with the same interval and a start time of now, they'll both fire every 10 seconds. So far so good.\r\n\r\nBut if you then change one of the tasks to have a start time of tomorrow, both tasks stop firing. If you restart the worker, you'll get the today task firing once but then it stops.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/193", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/193/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/193/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/193/events", "html_url": "https://github.com/celery/django-celery-beat/issues/193", "id": 375392647, "node_id": "MDU6SXNzdWUzNzUzOTI2NDc=", "number": 193, "title": "Can't create a task with interval from the admin panel", "user": {"login": "c1rdan", "id": 1965374, "node_id": "MDQ6VXNlcjE5NjUzNzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1965374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c1rdan", "html_url": "https://github.com/c1rdan", "followers_url": "https://api.github.com/users/c1rdan/followers", "following_url": "https://api.github.com/users/c1rdan/following{/other_user}", "gists_url": "https://api.github.com/users/c1rdan/gists{/gist_id}", "starred_url": "https://api.github.com/users/c1rdan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c1rdan/subscriptions", "organizations_url": "https://api.github.com/users/c1rdan/orgs", "repos_url": "https://api.github.com/users/c1rdan/repos", "events_url": "https://api.github.com/users/c1rdan/events{/privacy}", "received_events_url": "https://api.github.com/users/c1rdan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-30T09:27:33Z", "updated_at": "2018-11-13T11:06:50Z", "closed_at": "2018-11-13T11:06:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't add a task with an interval from the admin panel, it raises ValidationError as solar is also present when it's not. I could create the same PeriodicTask from django shell.\r\n\r\n![image](https://user-images.githubusercontent.com/1965374/47708408-47711600-dc2e-11e8-98ea-aab1f81508c9.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/191", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/191/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/191/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/191/events", "html_url": "https://github.com/celery/django-celery-beat/issues/191", "id": 374059877, "node_id": "MDU6SXNzdWUzNzQwNTk4Nzc=", "number": 191, "title": "release 1.2.0 triggers periodic errors \"Database error while sync: InterfaceError('connection already closed')\"", "user": {"login": "picturedots", "id": 766699, "node_id": "MDQ6VXNlcjc2NjY5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/766699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/picturedots", "html_url": "https://github.com/picturedots", "followers_url": "https://api.github.com/users/picturedots/followers", "following_url": "https://api.github.com/users/picturedots/following{/other_user}", "gists_url": "https://api.github.com/users/picturedots/gists{/gist_id}", "starred_url": "https://api.github.com/users/picturedots/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/picturedots/subscriptions", "organizations_url": "https://api.github.com/users/picturedots/orgs", "repos_url": "https://api.github.com/users/picturedots/repos", "events_url": "https://api.github.com/users/picturedots/events{/privacy}", "received_events_url": "https://api.github.com/users/picturedots/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-10-25T17:49:13Z", "updated_at": "2018-11-12T15:22:22Z", "closed_at": "2018-11-12T15:22:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading to django-celery-beat==1.2.0 I now get the below errors every three minutes.  \r\n\r\nMy environment is:\r\nDjango==2.1.2\r\ndjango-celery-beat==1.2.0\r\ncelery==4.2.1\r\npsycopg2-binary==2.7.5\r\npython 3.7\r\n2 crontabs, no intervals\r\n\r\n\r\n\r\n\r\n\r\n```worker_1       | [2018-10-25 17:36:05,697: INFO/Beat] Writing entries...\r\nworker_1       | [2018-10-25 17:36:05,709: ERROR/Beat] Database error while sync: InterfaceError('connection already closed')\r\nworker_1       | Traceback (most recent call last):\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py\", line 234, in _cursor\r\nworker_1       |     return self._prepare_cursor(self.create_cursor(name))\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/backends/postgresql/base.py\", line 222, in create_cursor\r\nworker_1       |     cursor = self.connection.cursor()\r\nworker_1       | psycopg2.InterfaceError: connection already closed\r\nworker_1       |\r\nworker_1       | The above exception was the direct cause of the following exception:\r\nworker_1       |\r\nworker_1       | Traceback (most recent call last):\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django_celery_beat/schedulers.py\", line 262, in sync\r\nworker_1       |     self.schedule[name].save()\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django_celery_beat/schedulers.py\", line 303, in schedule\r\nworker_1       |     elif self.schedule_changed():\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django_celery_beat/schedulers.py\", line 234, in schedule_changed\r\nworker_1       |     last, ts = self._last_timestamp, self.Changes.last_change()\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django_celery_beat/models.py\", line 240, in last_change\r\nworker_1       |     return cls.objects.get(ident=1).last_update\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\nworker_1       |     return getattr(self.get_queryset(), name)(*args, **kwargs)\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/models/query.py\", line 393, in get\r\nworker_1       |     num = len(clone)\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/models/query.py\", line 250, in __len__\r\nworker_1       |     self._fetch_all()\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/models/query.py\", line 1186, in _fetch_all\r\nworker_1       |     self._result_cache = list(self._iterable_class(self))\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/models/query.py\", line 54, in __iter__\r\nworker_1       |     results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/models/sql/compiler.py\", line 1063, in execute_sql\r\nworker_1       |     cursor = self.connection.cursor()\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py\", line 255, in cursor\r\nworker_1       |     return self._cursor()\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py\", line 234, in _cursor\r\nworker_1       |     return self._prepare_cursor(self.create_cursor(name))\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/utils.py\", line 89, in __exit__\r\nworker_1       |     raise dj_exc_value.with_traceback(traceback) from exc_value\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py\", line 234, in _cursor\r\nworker_1       |     return self._prepare_cursor(self.create_cursor(name))\r\nworker_1       |   File \"/usr/local/lib/python3.7/site-packages/django/db/backends/postgresql/base.py\", line 222, in create_cursor\r\nworker_1       |     cursor = self.connection.cursor()\r\nworker_1       | django.db.utils.InterfaceError: connection already closed\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/188", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/188/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/188/events", "html_url": "https://github.com/celery/django-celery-beat/issues/188", "id": 372614748, "node_id": "MDU6SXNzdWUzNzI2MTQ3NDg=", "number": 188, "title": "django celery beat not executing any tasks.", "user": {"login": "weestack", "id": 25548462, "node_id": "MDQ6VXNlcjI1NTQ4NDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/25548462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weestack", "html_url": "https://github.com/weestack", "followers_url": "https://api.github.com/users/weestack/followers", "following_url": "https://api.github.com/users/weestack/following{/other_user}", "gists_url": "https://api.github.com/users/weestack/gists{/gist_id}", "starred_url": "https://api.github.com/users/weestack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weestack/subscriptions", "organizations_url": "https://api.github.com/users/weestack/orgs", "repos_url": "https://api.github.com/users/weestack/repos", "events_url": "https://api.github.com/users/weestack/events{/privacy}", "received_events_url": "https://api.github.com/users/weestack/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-22T17:22:12Z", "updated_at": "2018-12-11T09:47:15Z", "closed_at": "2018-12-11T09:47:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've followed the tutorial seen here: https://www.merixstudio.com/blog/django-celery-beat/\r\n\r\nI've added django-celery-beat to installed apps and migrated it.\r\nThen I've added a custom task, that Django_celery_beat discovers itself with no problems.\r\n\r\ncelery.py\r\n```\r\nimport os\r\nfrom celery import Celery\r\n\r\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'helius.settings.local')\r\n\r\napp = Celery('helius')\r\napp.config_from_object('django.conf:settings', namespace='CELERY')\r\napp.autodiscover_tasks()\r\n```\r\n\r\nMy settings.py is:\r\n```\r\nCELERY_BROKER_URL = 'amqp://localhost'\r\nCELERY_TIMEZONE = 'Europe/Copenhagen'\r\nCELERYBEAT_SCHEDULER = 'django_celery_beat.schedulers:DatabaseScheduler'\r\n```\r\n\r\nAnd I then execude django-celery-beat with this command to do the testing:\r\n`celery -A proj beat -l ERROR --scheduler django_celery_beat.schedulers:DatabaseScheduler\r\n`\r\n\r\nWhen I run the above command the only task discovered is `celery.backend_cleanup`.\r\nIf I try to run the custom task with the bulk action `run task` nothing happens.\r\n\r\nCan someone see what my problem is?\r\nIn advance thanks to anyone reading thru this :)\r\n\r\nHave a fantastic day.\r\nBest regards Alexander\r\n\r\n====EDIT====\r\nBTW yes I do have a worker running!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/187", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/187/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/187/events", "html_url": "https://github.com/celery/django-celery-beat/issues/187", "id": 372377647, "node_id": "MDU6SXNzdWUzNzIzNzc2NDc=", "number": 187, "title": "New release of django-celery-beat", "user": {"login": "tinylambda", "id": 5546016, "node_id": "MDQ6VXNlcjU1NDYwMTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5546016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinylambda", "html_url": "https://github.com/tinylambda", "followers_url": "https://api.github.com/users/tinylambda/followers", "following_url": "https://api.github.com/users/tinylambda/following{/other_user}", "gists_url": "https://api.github.com/users/tinylambda/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinylambda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinylambda/subscriptions", "organizations_url": "https://api.github.com/users/tinylambda/orgs", "repos_url": "https://api.github.com/users/tinylambda/repos", "events_url": "https://api.github.com/users/tinylambda/events{/privacy}", "received_events_url": "https://api.github.com/users/tinylambda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-10-22T02:19:26Z", "updated_at": "2018-11-12T15:22:37Z", "closed_at": "2018-11-12T15:22:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I found that several bugs were fixed last month, I think it's time to create a new release.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/186", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/186/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/186/events", "html_url": "https://github.com/celery/django-celery-beat/issues/186", "id": 370973547, "node_id": "MDU6SXNzdWUzNzA5NzM1NDc=", "number": 186, "title": "cannot pass tests in test_schedulers.py", "user": {"login": "tinylambda", "id": 5546016, "node_id": "MDQ6VXNlcjU1NDYwMTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5546016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinylambda", "html_url": "https://github.com/tinylambda", "followers_url": "https://api.github.com/users/tinylambda/followers", "following_url": "https://api.github.com/users/tinylambda/following{/other_user}", "gists_url": "https://api.github.com/users/tinylambda/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinylambda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinylambda/subscriptions", "organizations_url": "https://api.github.com/users/tinylambda/orgs", "repos_url": "https://api.github.com/users/tinylambda/repos", "events_url": "https://api.github.com/users/tinylambda/events{/privacy}", "received_events_url": "https://api.github.com/users/tinylambda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-17T09:12:26Z", "updated_at": "2018-10-19T11:57:01Z", "closed_at": "2018-10-19T11:57:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I execute \r\n`python3 -m pytest  t/unit/test_schedulers.py`\r\nunder the project root and it reports:\r\n\r\nlocalhost:django-celery-beat Felix$ python3 -m pytest  t/unit/test_schedulers.py \r\n=========================================================== test session starts ============================================================\r\nplatform darwin -- Python 3.6.3, pytest-3.8.2, py-1.6.0, pluggy-0.7.1\r\nrootdir: /Users/Felix/PycharmProjects/django-celery-beat, inifile: setup.cfg\r\nplugins: celery-4.2.1\r\ncollected 0 items / 1 errors                                                                                                               \r\n\r\n================================================================== ERRORS ==================================================================\r\n________________________________________________ ERROR collecting t/unit/test_schedulers.py ________________________________________________\r\nt/unit/test_schedulers.py:15: in <module>\r\n    from django_celery_beat import schedulers\r\ndjango_celery_beat/schedulers.py:21: in <module>\r\n    from .models import (\r\ndjango_celery_beat/models.py:42: in <module>\r\n    class SolarSchedule(models.Model):\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/db/models/base.py:87: in __new__\r\n    app_config = apps.get_containing_app_config(module)\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/apps/registry.py:249: in get_containing_app_config\r\n    self.check_apps_ready()\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/apps/registry.py:132: in check_apps_ready\r\n    raise AppRegistryNotReady(\"Apps aren't loaded yet.\")\r\nE   django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n========================================================= 1 error in 3.34 seconds ==========================================================\r\n\r\nany suggestions ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/177", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/177/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/177/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/177/events", "html_url": "https://github.com/celery/django-celery-beat/issues/177", "id": 369492756, "node_id": "MDU6SXNzdWUzNjk0OTI3NTY=", "number": 177, "title": "Migration rename leads to a dependency error when upgrading", "user": {"login": "nikolaik", "id": 104154, "node_id": "MDQ6VXNlcjEwNDE1NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/104154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikolaik", "html_url": "https://github.com/nikolaik", "followers_url": "https://api.github.com/users/nikolaik/followers", "following_url": "https://api.github.com/users/nikolaik/following{/other_user}", "gists_url": "https://api.github.com/users/nikolaik/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikolaik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikolaik/subscriptions", "organizations_url": "https://api.github.com/users/nikolaik/orgs", "repos_url": "https://api.github.com/users/nikolaik/repos", "events_url": "https://api.github.com/users/nikolaik/events{/privacy}", "received_events_url": "https://api.github.com/users/nikolaik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-12T10:27:51Z", "updated_at": "2018-11-04T12:23:08Z", "closed_at": "2018-10-13T15:59:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Migration with sequence number 0006 [0006_auto_20180210_1226](https://github.com/celery/django-celery-beat/blob/v1.1.1/django_celery_beat/migrations/0006_auto_20180210_1226.py) in v1.1.1 was renamed to [0006_auto_20180322_0932](https://github.com/celery/django-celery-beat/blob/v1.2.0/django_celery_beat/migrations/0006_auto_20180322_0932.py) in v1.2.0 (and the contents changed).\r\n\r\nThis causes the following error with our own migrations pointing to the v1.1.1 migration.\r\n```\r\ndjango.db.migrations.exceptions.NodeNotFoundError: Migration myapp.0001_initial dependencies reference nonexistent parent node ('django_celery_beat', '0006_auto_20180210_1226')\r\n```\r\n\r\nWhat was the reasoning behind renaming the migration instead of creating a new one? #99 introduced the renamed migration.\r\nSince this change was introduced in a semver wise non breaking version bump, should we create a fix for this, restoring the old 0006 migration and adding the new migrations since v1.1.1 from 0007 and onward?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/175", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/175/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/175/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/175/events", "html_url": "https://github.com/celery/django-celery-beat/issues/175", "id": 369031990, "node_id": "MDU6SXNzdWUzNjkwMzE5OTA=", "number": 175, "title": "AttributeError 'NoneType' object has no attribute 'keys' on startup", "user": {"login": "HugoArts", "id": 53270, "node_id": "MDQ6VXNlcjUzMjcw", "avatar_url": "https://avatars3.githubusercontent.com/u/53270?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HugoArts", "html_url": "https://github.com/HugoArts", "followers_url": "https://api.github.com/users/HugoArts/followers", "following_url": "https://api.github.com/users/HugoArts/following{/other_user}", "gists_url": "https://api.github.com/users/HugoArts/gists{/gist_id}", "starred_url": "https://api.github.com/users/HugoArts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HugoArts/subscriptions", "organizations_url": "https://api.github.com/users/HugoArts/orgs", "repos_url": "https://api.github.com/users/HugoArts/repos", "events_url": "https://api.github.com/users/HugoArts/events{/privacy}", "received_events_url": "https://api.github.com/users/HugoArts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-10-11T09:30:02Z", "updated_at": "2018-11-13T11:07:56Z", "closed_at": "2018-11-13T11:07:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "A recent upgrade to django-celery-beat causes the following exception to appear when attempting to start celery beat:\r\n\r\n```\r\n[2018-10-11 11:28:28,973: CRITICAL/MainProcess] beat raised exception <class 'AttributeError'>: AttributeError(\"'NoneType' object has no attribute 'keys'\",)\r\nTraceback (most recent call last):\r\n  File \"/Users/hugo/projects/envs/qollap/lib/python3.6/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n    service.start()\r\n  File \"/Users/hugo/projects/envs/qollap/lib/python3.6/site-packages/celery/beat.py\", line 588, in start\r\n    interval = self.scheduler.tick()\r\n  File \"/Users/hugo/projects/envs/qollap/lib/python3.6/site-packages/celery/beat.py\", line 291, in tick\r\n    not self.schedules_equal(self.old_schedulers, self.schedule)):\r\n  File \"/Users/hugo/projects/envs/qollap/lib/python3.6/site-packages/celery/beat.py\", line 317, in schedules_equal\r\n    if set(old_schedules.keys()) != set(new_schedules.keys()):\r\nAttributeError: 'NoneType' object has no attribute 'keys'\r\n```\r\n\r\nThe command used to start beat is `celery -A project beat -S django`. This issue does not occur when using django-celery-beat 1.1.0.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/174", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/174/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/174/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/174/events", "html_url": "https://github.com/celery/django-celery-beat/issues/174", "id": 368973965, "node_id": "MDU6SXNzdWUzNjg5NzM5NjU=", "number": 174, "title": "TransactionManagementError when updating CrontabSchedule and Periodic Task dynamically", "user": {"login": "kowsari", "id": 1079552, "node_id": "MDQ6VXNlcjEwNzk1NTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1079552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kowsari", "html_url": "https://github.com/kowsari", "followers_url": "https://api.github.com/users/kowsari/followers", "following_url": "https://api.github.com/users/kowsari/following{/other_user}", "gists_url": "https://api.github.com/users/kowsari/gists{/gist_id}", "starred_url": "https://api.github.com/users/kowsari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kowsari/subscriptions", "organizations_url": "https://api.github.com/users/kowsari/orgs", "repos_url": "https://api.github.com/users/kowsari/repos", "events_url": "https://api.github.com/users/kowsari/events{/privacy}", "received_events_url": "https://api.github.com/users/kowsari/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-10-11T06:41:39Z", "updated_at": "2018-11-20T09:43:04Z", "closed_at": "2018-11-13T11:08:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have a requirement to dynamically add CrontabSchedule and Periodic tasks for meetings and execute a celery task when the meeting time come up. Each meeting in my model has associated CrontabSchedule and Periodic tasks for reminders and the meeting.\r\n\r\nI create celery beat tasks this way in my meeting model.\r\n```\r\n           for i in reminder_items:\r\n                reminder_time = recurrence - timedelta(minutes=i)\r\n                schedule, _ = CrontabSchedule.objects.get_or_create(\r\n                    minute=reminder_time.minute,\r\n                    hour=reminder_time.hour,\r\n                    day_of_week='*',\r\n                    day_of_month=reminder_time.day,\r\n                    month_of_year=reminder_time.month,\r\n                )\r\n                reminder_task = PeriodicTask.objects.create(\r\n                    crontab=schedule,\r\n                    name='meeting-{}-task-{}'.format(self.pk, counter),\r\n                    task=self.MEETING_TASK_NAME,\r\n                    expires=expires,\r\n                    kwargs=json.dumps({'meeting_id': self.pk,\r\n                                       'reminder': i,\r\n                                       'state': 'start'})\r\n                )\r\n                with transaction.atomic():\r\n                    schedule.save()\r\n                    reminder_task.save()\r\n                    self.tasks.add(reminder_task)\r\n                    counter += 1\r\n\r\n                    from django_celery_beat.models import PeriodicTasks\r\n                    PeriodicTasks.changed(reminder_task)\r\n```\r\n\r\nThis actually executes quite nicely at the right time, however the next time sync() happens, I start getting \"Database gave error: TransactionManagementError(\"An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.\",)\r\nTraceback (most recent call last):\"\r\n\r\nI tried using transactions, or without transactions or moving around the with block, but it hasnt made a difference. Can you please advise what the problem could be?\r\n\r\nI am using the following versions:\r\ncelery==4.2.1\r\nDjango==2.1.2\r\ndjango-celery-beat==1.2.0\r\nmysqlclient==1.3.13\r\n\r\nThank you!\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/172", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/172/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/172/events", "html_url": "https://github.com/celery/django-celery-beat/issues/172", "id": 368841744, "node_id": "MDU6SXNzdWUzNjg4NDE3NDQ=", "number": 172, "title": "Can't create task if interval or solar schedule is selected", "user": {"login": "lucasdavila86", "id": 1821603, "node_id": "MDQ6VXNlcjE4MjE2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1821603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucasdavila86", "html_url": "https://github.com/lucasdavila86", "followers_url": "https://api.github.com/users/lucasdavila86/followers", "following_url": "https://api.github.com/users/lucasdavila86/following{/other_user}", "gists_url": "https://api.github.com/users/lucasdavila86/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucasdavila86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucasdavila86/subscriptions", "organizations_url": "https://api.github.com/users/lucasdavila86/orgs", "repos_url": "https://api.github.com/users/lucasdavila86/repos", "events_url": "https://api.github.com/users/lucasdavila86/events{/privacy}", "received_events_url": "https://api.github.com/users/lucasdavila86/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-10T20:35:32Z", "updated_at": "2018-12-11T09:45:06Z", "closed_at": "2018-12-11T09:45:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm only able to a create scheduled task if I use a crontab schedule. I think this was introduced in this line\r\nhttps://github.com/celery/django-celery-beat/compare/v1.1.1...master#diff-eeed49a50aa95de80188931bb26bee4eR328\r\n\r\nMaybe this should be the solution\r\n```\r\nif self.interval and self.solar:\r\n    raise ValidationError({\r\n        'solar': [err_msg]\r\n    })\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/170", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/170/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/170/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/170/events", "html_url": "https://github.com/celery/django-celery-beat/issues/170", "id": 368335253, "node_id": "MDU6SXNzdWUzNjgzMzUyNTM=", "number": 170, "title": "Scheduler forgets the task after PeriodicTasks.changed() called", "user": {"login": "rsichny", "id": 745639, "node_id": "MDQ6VXNlcjc0NTYzOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/745639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsichny", "html_url": "https://github.com/rsichny", "followers_url": "https://api.github.com/users/rsichny/followers", "following_url": "https://api.github.com/users/rsichny/following{/other_user}", "gists_url": "https://api.github.com/users/rsichny/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsichny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsichny/subscriptions", "organizations_url": "https://api.github.com/users/rsichny/orgs", "repos_url": "https://api.github.com/users/rsichny/repos", "events_url": "https://api.github.com/users/rsichny/events{/privacy}", "received_events_url": "https://api.github.com/users/rsichny/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-09T18:18:35Z", "updated_at": "2018-10-13T04:11:10Z", "closed_at": "2018-10-13T04:11:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "for version 1.2.0:\r\n\r\n1. The scheduler is active and running with one task (cron '* * * * *').\r\n2. Task is being scheduled every minute\r\n3. PeriodicTasks.changed(task) is called somewhere.\r\n4. We see confirmation that schedule was updated in scheduler's debug output.\r\n5. The task is not being scheduled on the next minute (and actually never again)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/169", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/169/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/169/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/169/events", "html_url": "https://github.com/celery/django-celery-beat/issues/169", "id": 368288279, "node_id": "MDU6SXNzdWUzNjgyODgyNzk=", "number": 169, "title": "Regression on DatabaseScheduler.schedule ", "user": {"login": "pkolios", "id": 936827, "node_id": "MDQ6VXNlcjkzNjgyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/936827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkolios", "html_url": "https://github.com/pkolios", "followers_url": "https://api.github.com/users/pkolios/followers", "following_url": "https://api.github.com/users/pkolios/following{/other_user}", "gists_url": "https://api.github.com/users/pkolios/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkolios/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkolios/subscriptions", "organizations_url": "https://api.github.com/users/pkolios/orgs", "repos_url": "https://api.github.com/users/pkolios/repos", "events_url": "https://api.github.com/users/pkolios/events{/privacy}", "received_events_url": "https://api.github.com/users/pkolios/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-09T16:11:30Z", "updated_at": "2018-11-06T15:42:12Z", "closed_at": "2018-11-06T15:42:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello there, I have been facing an issue which I think is caused by this commit https://github.com/celery/django-celery-beat/commit/ab2b5be36b43eaf9b5d8f72e05d23e6a8830ba5e. The current celery scheduler implementation is testing if `self._heap is None` here https://github.com/celery/celery/blob/5cdaebf776dfab539a8b44bb961f96d81d523383/celery/beat.py#L293\r\n\r\nWith this change this, `self._heap` is never none and the call to `self.schedules_equal(self.old_schedulers, self.schedule)` is executed resulting in the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n    service.start()\r\n  File \"/usr/local/lib/python3.7/site-packages/celery/beat.py\", line 588, in start\r\n    interval = self.scheduler.tick()\r\n  File \"/usr/local/lib/python3.7/site-packages/celery/beat.py\", line 291, in tick\r\n    not self.schedules_equal(self.old_schedulers, self.schedule)):\r\n  File \"/usr/local/lib/python3.7/site-packages/celery/beat.py\", line 317, in schedules_equal\r\n    if set(old_schedules.keys()) != set(new_schedules.keys()):\r\nAttributeError: 'NoneType' object has no attribute 'keys'\r\n```\r\n\r\nEventually causing the scheduler to exit.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/168", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/168/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/168/events", "html_url": "https://github.com/celery/django-celery-beat/issues/168", "id": 368048305, "node_id": "MDU6SXNzdWUzNjgwNDgzMDU=", "number": 168, "title": "Cannot update or create new periodic task in django admin interface", "user": {"login": "cmberryau", "id": 7057675, "node_id": "MDQ6VXNlcjcwNTc2NzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/7057675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmberryau", "html_url": "https://github.com/cmberryau", "followers_url": "https://api.github.com/users/cmberryau/followers", "following_url": "https://api.github.com/users/cmberryau/following{/other_user}", "gists_url": "https://api.github.com/users/cmberryau/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmberryau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmberryau/subscriptions", "organizations_url": "https://api.github.com/users/cmberryau/orgs", "repos_url": "https://api.github.com/users/cmberryau/repos", "events_url": "https://api.github.com/users/cmberryau/events{/privacy}", "received_events_url": "https://api.github.com/users/cmberryau/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-09T05:40:34Z", "updated_at": "2018-11-13T11:07:25Z", "closed_at": "2018-11-13T11:07:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "After updating to 1.2.0, cannot update or create new periodic task, met with error that must have only one of time schedule, crontab or solar schedule.\r\n\r\nadal==1.1.0\r\namqp==2.3.2\r\nargon2-cffi==18.1.0\r\nasn1crypto==0.24.0\r\nbilliard==3.5.0.4\r\nboto3==1.9.19\r\nbotocore==1.12.19\r\ncelery==4.2.1\r\ncertifi==2018.8.24\r\ncffi==1.11.5\r\nchardet==3.0.4\r\ncryptography==2.3.1\r\nDjango==2.1.2\r\ndjango-appconf==1.0.2\r\ndjango-axes==4.4.0\r\ndjango-celery-beat==1.2.0\r\ndjango-celery-results==1.0.1\r\ndjango-crispy-forms==1.7.2\r\ndjango-ipware==2.1.0\r\ndjango-polymorphic==2.0.3\r\ndjango-smtp-ssl==1.0\r\ndjango-timezone-field==3.0\r\ndnspython==1.15.0\r\ndocutils==0.14\r\neventlet==0.24.1\r\nfuture-fstrings==0.4.4\r\ngreenlet==0.4.15\r\nidna==2.7\r\njmespath==0.9.3\r\nkombu==4.2.1\r\nmonotonic==1.5\r\npsycopg2==2.7.5\r\npycparser==2.19\r\npycurl==7.43.0.2\r\nPyJWT==1.6.4\r\npypowerbi==0.22\r\npython-crontab==2.3.5\r\npython-dateutil==2.7.3\r\npytz==2018.5\r\nraven==6.9.0\r\nrequests==2.19.1\r\ns3transfer==0.1.13\r\nsix==1.11.0\r\nurllib3==1.23\r\nvine==1.1.4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/165", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/165/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/165/events", "html_url": "https://github.com/celery/django-celery-beat/issues/165", "id": 367190979, "node_id": "MDU6SXNzdWUzNjcxOTA5Nzk=", "number": 165, "title": "Should Celery Beat start without database tables?", "user": {"login": "craiga", "id": 76330, "node_id": "MDQ6VXNlcjc2MzMw", "avatar_url": "https://avatars3.githubusercontent.com/u/76330?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craiga", "html_url": "https://github.com/craiga", "followers_url": "https://api.github.com/users/craiga/followers", "following_url": "https://api.github.com/users/craiga/following{/other_user}", "gists_url": "https://api.github.com/users/craiga/gists{/gist_id}", "starred_url": "https://api.github.com/users/craiga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craiga/subscriptions", "organizations_url": "https://api.github.com/users/craiga/orgs", "repos_url": "https://api.github.com/users/craiga/repos", "events_url": "https://api.github.com/users/craiga/events{/privacy}", "received_events_url": "https://api.github.com/users/craiga/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-05T12:32:53Z", "updated_at": "2018-11-13T11:09:55Z", "closed_at": "2018-11-13T11:09:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you start Celery Beat with django_celery_beat's DatabaseScheduler before running migrations, you get an error:\r\n\r\n    celery beat v4.2.1 (windowlicker) is starting.\r\n    /usr/local/lib/python3.6/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.\r\n      \"\"\")\r\n    __    -    ... __   -        _\r\n    LocalTime -> 2018-10-05 12:14:41\r\n    Configuration ->\r\n        . broker -> amqp://env-mgmt-dashboard:**@rabbitmq:5672//\r\n        . loader -> celery.loaders.app.AppLoader\r\n        . scheduler -> django_celery_beat.schedulers.DatabaseScheduler\r\n    \r\n        . logfile -> [stderr]@%INFO\r\n        . maxinterval -> 5.00 seconds (5s)\r\n    beat: Starting...\r\n    Writing entries...\r\n    beat raised exception <class 'django.db.utils.ProgrammingError'>: ProgrammingError('relation \"django_celery_beat_periodictask\" does not exist\\nLINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\\n                                                             ^\\n',)\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.6/site-packages/kombu/utils/objects.py\", line 42, in __get__\r\n        return obj.__dict__[self.__name__]\r\n    KeyError: 'scheduler'\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n        return self.cursor.execute(sql, params)\r\n    psycopg2.ProgrammingError: relation \"django_celery_beat_periodictask\" does not exist\r\n    LINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\r\n                                                                 ^\r\n    \r\n    \r\n    The above exception was the direct cause of the following exception:\r\n    \r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.6/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n        service.start()\r\n      File \"/usr/local/lib/python3.6/site-packages/celery/beat.py\", line 579, in start\r\n        humanize_seconds(self.scheduler.max_interval))\r\n      File \"/usr/local/lib/python3.6/site-packages/kombu/utils/objects.py\", line 44, in __get__\r\n        value = obj.__dict__[self.__name__] = self.__get(obj)\r\n      File \"/usr/local/lib/python3.6/site-packages/celery/beat.py\", line 623, in scheduler\r\n        return self.get_scheduler()\r\n      File \"/usr/local/lib/python3.6/site-packages/celery/beat.py\", line 618, in get_scheduler\r\n        lazy=lazy,\r\n      File \"/usr/local/lib/python3.6/site-packages/django_celery_beat/schedulers.py\", line 183, in __init__\r\n        Scheduler.__init__(self, *args, **kwargs)\r\n      File \"/usr/local/lib/python3.6/site-packages/celery/beat.py\", line 225, in __init__\r\n        self.setup_schedule()\r\n      File \"/usr/local/lib/python3.6/site-packages/django_celery_beat/schedulers.py\", line 191, in setup_schedule\r\n        self.install_default_entries(self.schedule)\r\n      File \"/usr/local/lib/python3.6/site-packages/django_celery_beat/schedulers.py\", line 290, in schedule\r\n        self._schedule = self.all_as_schedule()\r\n      File \"/usr/local/lib/python3.6/site-packages/django_celery_beat/schedulers.py\", line 197, in all_as_schedule\r\n        for model in self.Model.objects.enabled():\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/models/query.py\", line 268, in __iter__\r\n        self._fetch_all()\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/models/query.py\", line 1186, in _fetch_all\r\n        self._result_cache = list(self._iterable_class(self))\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/models/query.py\", line 54, in __iter__\r\n        results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/models/sql/compiler.py\", line 1065, in execute_sql\r\n        cursor.execute(sql, params)\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 100, in execute\r\n        return super().execute(sql, params)\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 68, in execute\r\n        return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 77, in _execute_with_wrappers\r\n        return executor(sql, params, many, context)\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n        return self.cursor.execute(sql, params)\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/utils.py\", line 89, in __exit__\r\n        raise dj_exc_value.with_traceback(traceback) from exc_value\r\n      File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n        return self.cursor.execute(sql, params)\r\n    django.db.utils.ProgrammingError: relation \"django_celery_beat_periodictask\" does not exist\r\n    LINE 1: ...ango_celery_beat_periodictask\".\"description\" FROM \"django_ce...\r\n                                                                 ^\r\n    \r\n    Writing entries...\r\n\r\nYou could argue this is fair enough, but it's not a great experience for users starting Celery Beat as part of Docker Compose (I quite often run `docker-compose up` before running `migrate`, and I don't think I'm alone in this).\r\n\r\nI'd expect this to be handled in a similar way to what happens when the broker isn't present: when the schedule fails to load, a message is logged, and loading the schedule is retried later on.\r\n\r\n[I've made a start on a fix for this](https://github.com/celery/django-celery-beat/compare/master...craiga:handle-database-error-getting-schedule#diff-b75d080f084c75edb1046bcac05d0d12) by catching database errors in `all_as_schedule`:\r\n\r\n    def all_as_schedule(self):\r\n        debug('DatabaseScheduler: Fetching database schedule')\r\n        s = {}\r\n        try:\r\n            for model in self.Model.objects.enabled():\r\n                try:\r\n                    s[model.name] = self.Entry(model, app=self.app)\r\n                except ValueError:\r\n                    pass\r\n        except DatabaseError as exc:\r\n            logger.exception('Database gave error: %r', exc)\r\n        return s\r\n\r\nThis works reasonably well, but breaks installing default entries. I also imagine there needs to be tests.\r\n\r\nIf there's interest in this feature, I'd love some guidance on what the best way to implement it would be.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/164", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/164/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/164/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/164/events", "html_url": "https://github.com/celery/django-celery-beat/issues/164", "id": 366368302, "node_id": "MDU6SXNzdWUzNjYzNjgzMDI=", "number": 164, "title": "Unable to setup celery beat on elasticbeanstalk ", "user": {"login": "rinkuameotech", "id": 19410794, "node_id": "MDQ6VXNlcjE5NDEwNzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/19410794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rinkuameotech", "html_url": "https://github.com/rinkuameotech", "followers_url": "https://api.github.com/users/rinkuameotech/followers", "following_url": "https://api.github.com/users/rinkuameotech/following{/other_user}", "gists_url": "https://api.github.com/users/rinkuameotech/gists{/gist_id}", "starred_url": "https://api.github.com/users/rinkuameotech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rinkuameotech/subscriptions", "organizations_url": "https://api.github.com/users/rinkuameotech/orgs", "repos_url": "https://api.github.com/users/rinkuameotech/repos", "events_url": "https://api.github.com/users/rinkuameotech/events{/privacy}", "received_events_url": "https://api.github.com/users/rinkuameotech/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-03T14:28:57Z", "updated_at": "2018-12-22T09:10:59Z", "closed_at": "2018-12-22T09:10:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I create a separate config file for celery and on eb it is unable to find update_supervisor.sh saying no such file or directory \r\n\r\nCan anyone help me in this \r\nThanks in advance \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/163", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/163/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/163/events", "html_url": "https://github.com/celery/django-celery-beat/issues/163", "id": 365338327, "node_id": "MDU6SXNzdWUzNjUzMzgzMjc=", "number": 163, "title": "Scheduling the first task in a future date", "user": {"login": "asfaltboy", "id": 321520, "node_id": "MDQ6VXNlcjMyMTUyMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/321520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asfaltboy", "html_url": "https://github.com/asfaltboy", "followers_url": "https://api.github.com/users/asfaltboy/followers", "following_url": "https://api.github.com/users/asfaltboy/following{/other_user}", "gists_url": "https://api.github.com/users/asfaltboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/asfaltboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asfaltboy/subscriptions", "organizations_url": "https://api.github.com/users/asfaltboy/orgs", "repos_url": "https://api.github.com/users/asfaltboy/repos", "events_url": "https://api.github.com/users/asfaltboy/events{/privacy}", "received_events_url": "https://api.github.com/users/asfaltboy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-01T07:27:50Z", "updated_at": "2018-12-22T09:23:11Z", "closed_at": "2018-12-22T09:23:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Our application has this requirement, where a dynamically created periodic task should start at a given date (rather than now). We could simply run the task with `apply_async(eta=time)`, but we'd lose the visibility and control we get by using `PeriodicTask`.\r\n\r\nCurrently, the \"work around\" I am considering is to provide `last_run_at` on creation of the period task, pointing at a date in the past that will facilitate the next schedule to run at the given date.\r\n\r\nFor example, given an hourly task, scheduled to run first 30 minutes from now:\r\n\r\n  1.  Calculate the date in the past using schedule date, e.g:\r\n\r\n      ```python\r\n      last_run_at = in_30_minutes - interval\r\n      ```\r\n\r\n  2. Create the periodic task using:\r\n\r\n     ```python\r\n     ModelEntry.from_entry(name='test_task', last_run_at=last_run_at, ...)\r\n     ```\r\n\r\nQuestion: Is there a better way to do this, and if not, would the community / maintainers be interested in a PR that introduces this functionality into **django-celery-beat** ? For example, we could add a new field `PeriodicTask.first_run_date` and use that date calculate the upcoming schedule in `ModelEntry.is_due`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/159", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/159/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/159/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/159/events", "html_url": "https://github.com/celery/django-celery-beat/issues/159", "id": 354785590, "node_id": "MDU6SXNzdWUzNTQ3ODU1OTA=", "number": 159, "title": "Beat scheduler crashes - InterfaceError: connection already closed", "user": {"login": "MilanPecov", "id": 4331824, "node_id": "MDQ6VXNlcjQzMzE4MjQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/4331824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MilanPecov", "html_url": "https://github.com/MilanPecov", "followers_url": "https://api.github.com/users/MilanPecov/followers", "following_url": "https://api.github.com/users/MilanPecov/following{/other_user}", "gists_url": "https://api.github.com/users/MilanPecov/gists{/gist_id}", "starred_url": "https://api.github.com/users/MilanPecov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MilanPecov/subscriptions", "organizations_url": "https://api.github.com/users/MilanPecov/orgs", "repos_url": "https://api.github.com/users/MilanPecov/repos", "events_url": "https://api.github.com/users/MilanPecov/events{/privacy}", "received_events_url": "https://api.github.com/users/MilanPecov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-28T15:31:32Z", "updated_at": "2018-10-13T11:29:17Z", "closed_at": "2018-10-13T11:29:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\ncelery==4.2.1\r\ndjango-celery-beat==1.1.1\r\npostgres=postgres:9.6-alpine\r\n```\r\n\r\ncelery beat runs good for a while but then when `Writing entries...` action comes it crashes with this error. Is there any workaround this?\r\n\r\n![image](https://user-images.githubusercontent.com/4331824/44733560-2124e200-aae8-11e8-9926-55eea8df9734.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/158", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/158/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/158/events", "html_url": "https://github.com/celery/django-celery-beat/issues/158", "id": 353585003, "node_id": "MDU6SXNzdWUzNTM1ODUwMDM=", "number": 158, "title": "Beat scheduler crashes due to race condition", "user": {"login": "alon-unifi", "id": 8681005, "node_id": "MDQ6VXNlcjg2ODEwMDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8681005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alon-unifi", "html_url": "https://github.com/alon-unifi", "followers_url": "https://api.github.com/users/alon-unifi/followers", "following_url": "https://api.github.com/users/alon-unifi/following{/other_user}", "gists_url": "https://api.github.com/users/alon-unifi/gists{/gist_id}", "starred_url": "https://api.github.com/users/alon-unifi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alon-unifi/subscriptions", "organizations_url": "https://api.github.com/users/alon-unifi/orgs", "repos_url": "https://api.github.com/users/alon-unifi/repos", "events_url": "https://api.github.com/users/alon-unifi/events{/privacy}", "received_events_url": "https://api.github.com/users/alon-unifi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-08-23T23:02:30Z", "updated_at": "2018-10-20T15:24:40Z", "closed_at": "2018-10-13T11:29:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Problem\r\n\r\nPreviously reported by @poloping on the celery project tracker [here](https://github.com/celery/celery/issues/4771), and encountered by myself as well - if a schedule gets updated just around the time that the 3 minute sync cycle elapses, one of the sync operations gets a closed connection and the scheduler crashes.\r\n\r\nI've traced it to a previous fix, in this pull request https://github.com/celery/django-celery-beat/pull/58, where a call to `close_old_connections()` was added to the sync method. This PR seems to fix an issue for MySQL but breaks **postgresql** in my case. I'm using **CONN_MAX_AGE = 0**\r\n\r\n### Using:\r\ncelery 4.2.0\r\ndjango-celery-beat 1.1.1\r\n\r\n### Trace:\r\n\r\n```\r\n[2018-08-23 20:00:33,887: CRITICAL/MainProcess] beat raised exception <class 'django.db.utils.InterfaceError'>: InterfaceError('connection already closed',)\r\nTraceback (most recent call last):\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n    service.start()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/beat.py\", line 595, in start\r\n    self.scheduler._do_sync()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/beat.py\", line 374, in _do_sync\r\n    self.sync()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 243, in sync\r\n    self.schedule[name].save()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 289, in schedule\r\n    self.sync()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 243, in sync\r\n    self.schedule[name].save()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 284, in schedule\r\n    elif self.schedule_changed():\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 215, in schedule_changed\r\n    last, ts = self._last_timestamp, self.Changes.last_change()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/models.py\", line 226, in last_change\r\n    return cls.objects.get(ident=1).last_update\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/manager.py\", line 85, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 374, in get\r\n    num = len(clone)\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 232, in __len__\r\n    self._fetch_all()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\r\n    self._result_cache = list(self._iterable_class(self))\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 53, in __iter__\r\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 887, in execute_sql\r\n    cursor = self.connection.cursor()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 254, in cursor\r\n    return self._cursor()\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 231, in _cursor\r\n    return self._prepare_cursor(self.create_cursor(name))\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/utils.py\", line 94, in __exit__\r\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 231, in _cursor\r\n    return self._prepare_cursor(self.create_cursor(name))\r\n  File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/postgresql/base.py\", line 220, in create_cursor\r\n    cursor = self.connection.cursor()\r\nInterfaceError: connection already closed\r\ncelery beat v4.2.0 (windowlicker) is starting.\r\n__    -    ... __   -        _\r\nLocalTime -> 2018-08-23 19:58:28\r\nConfiguration ->\r\n    . broker -> redis://localhost:6379//\r\n    . loader -> celery.loaders.app.AppLoader\r\n    . scheduler -> django_celery_beat.schedulers.DatabaseScheduler\r\n\r\n    . logfile -> [stderr]@%DEBUG\r\n    . maxinterval -> 5.00 seconds (5s)\r\n[2018-08-23 20:00:33,895: WARNING/MainProcess] Traceback (most recent call last):\r\n[2018-08-23 20:00:33,895: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/bin/celery\", line 11, in <module>\r\n[2018-08-23 20:00:33,896: WARNING/MainProcess] sys.exit(main())\r\n[2018-08-23 20:00:33,896: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/__main__.py\", line 16, in main\r\n[2018-08-23 20:00:33,896: WARNING/MainProcess] _main()\r\n[2018-08-23 20:00:33,897: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/celery.py\", line 322, in main\r\n[2018-08-23 20:00:33,897: WARNING/MainProcess] cmd.execute_from_commandline(argv)\r\n[2018-08-23 20:00:33,897: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/celery.py\", line 496, in execute_from_commandline\r\n[2018-08-23 20:00:33,898: WARNING/MainProcess] super(CeleryCommand, self).execute_from_commandline(argv)))\r\n[2018-08-23 20:00:33,898: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/base.py\", line 275, in execute_from_commandline\r\n[2018-08-23 20:00:33,898: WARNING/MainProcess] return self.handle_argv(self.prog_name, argv[1:])\r\n[2018-08-23 20:00:33,898: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/celery.py\", line 488, in handle_argv\r\n[2018-08-23 20:00:33,898: WARNING/MainProcess] return self.execute(command, argv)\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/celery.py\", line 420, in execute\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/base.py\", line 279, in run_from_argv\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] sys.argv if argv is None else argv, command)\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/base.py\", line 363, in handle_argv\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] return self(*args, **options)\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/base.py\", line 238, in __call__\r\n[2018-08-23 20:00:33,899: WARNING/MainProcess] ret = self.run(*args, **kwargs)\r\n[2018-08-23 20:00:33,900: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/bin/beat.py\", line 109, in run\r\n[2018-08-23 20:00:33,900: WARNING/MainProcess] return beat().run()\r\n[2018-08-23 20:00:33,900: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/apps/beat.py\", line 81, in run\r\n[2018-08-23 20:00:33,900: WARNING/MainProcess] self.start_scheduler()\r\n[2018-08-23 20:00:33,900: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/apps/beat.py\", line 109, in start_scheduler\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] service.start()\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/beat.py\", line 595, in start\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] self.scheduler._do_sync()\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/celery/beat.py\", line 374, in _do_sync\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] self.sync()\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 243, in sync\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] self.schedule[name].save()\r\n[2018-08-23 20:00:33,901: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 289, in schedule\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] self.sync()\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 243, in sync\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] self.schedule[name].save()\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 284, in schedule\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] elif self.schedule_changed():\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 215, in schedule_changed\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] last, ts = self._last_timestamp, self.Changes.last_change()\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django_celery_beat/models.py\", line 226, in last_change\r\n[2018-08-23 20:00:33,902: WARNING/MainProcess] return cls.objects.get(ident=1).last_update\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/manager.py\", line 85, in manager_method\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 374, in get\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] num = len(clone)\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 232, in __len__\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] self._fetch_all()\r\n[2018-08-23 20:00:33,903: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] self._result_cache = list(self._iterable_class(self))\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/query.py\", line 53, in __iter__\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 887, in execute_sql\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] cursor = self.connection.cursor()\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 254, in cursor\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] return self._cursor()\r\n[2018-08-23 20:00:33,904: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 231, in _cursor\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] return self._prepare_cursor(self.create_cursor(name))\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/utils.py\", line 94, in __exit__\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] six.reraise(dj_exc_type, dj_exc_value, traceback)\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 231, in _cursor\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] return self._prepare_cursor(self.create_cursor(name))\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] File \"/Users/alon/dev/unifi_virtenv/lib/python2.7/site-packages/django/db/backends/postgresql/base.py\", line 220, in create_cursor\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] cursor = self.connection.cursor()\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] django.db.utils\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] .\r\n[2018-08-23 20:00:33,905: WARNING/MainProcess] InterfaceError\r\n[2018-08-23 20:00:33,906: WARNING/MainProcess] :\r\n[2018-08-23 20:00:33,906: WARNING/MainProcess] connection already closed\r\n[2018-08-23 20:00:33,906: INFO/MainProcess] Writing entries...\r\n[2018-08-23 20:00:33,910: INFO/MainProcess] Writing entries...\r\n```\r\n\r\nnote that from this point on nothing gets scheduled until beat gets restarted.\r\n\r\n@bigmars86 @auvipy - as you've been working on the previous PR do you have any ideas what may be causing this on postgresql and what I should be looking it to get to the root cause?\r\n\r\nfor now I've worked around the issue by using a custom scheduler class that extends the `DatabaseScheduler` class and overrides the sync() method to exclude the `close_old_connections()` call. This made the issue go away. This is also the version of sync() that was used by djcelery and that worked for me in the last few years with no hiccups.\r\n\r\nThank you.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/152", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/152/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/152/events", "html_url": "https://github.com/celery/django-celery-beat/issues/152", "id": 337010315, "node_id": "MDU6SXNzdWUzMzcwMTAzMTU=", "number": 152, "title": "shared task pass argument via celery beat periodic task", "user": {"login": "sandykaka", "id": 8442050, "node_id": "MDQ6VXNlcjg0NDIwNTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/8442050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandykaka", "html_url": "https://github.com/sandykaka", "followers_url": "https://api.github.com/users/sandykaka/followers", "following_url": "https://api.github.com/users/sandykaka/following{/other_user}", "gists_url": "https://api.github.com/users/sandykaka/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandykaka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandykaka/subscriptions", "organizations_url": "https://api.github.com/users/sandykaka/orgs", "repos_url": "https://api.github.com/users/sandykaka/repos", "events_url": "https://api.github.com/users/sandykaka/events{/privacy}", "received_events_url": "https://api.github.com/users/sandykaka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-29T14:00:24Z", "updated_at": "2020-02-01T09:22:54Z", "closed_at": "2020-02-01T09:22:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I setup celery beat as\r\n\r\n```\r\ncelery -A proj beat -l info --scheduler django_celery_beat.schedulers:DatabaseScheduler \r\n```\r\nAnd I have a method as def get_data(name) and I setup tasks.py as\r\n\r\n```\r\n@shared_task\r\ndef get_data(name):\r\n    views.get_data(name)\r\n```\r\nAnd in Django admin in `periodic task` I selected `get_data` and passed Arguments: as `[\"test_name\"]` But I get an error\r\n\r\n`celery.beat.SchedulingError: Couldn't apply scheduled task get_data: get_data() takes 0 positional arguments but 1 was given`\r\nI also tried Keyword arguments: but doesn't work.\r\n\r\nIf I don't pass any arguments in worker I get error\r\n\r\n`TypeError: get_data() missing 1 required positional argument: 'name'`\r\nHow can I pass name=test_name as argument?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/147", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/147/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/147/events", "html_url": "https://github.com/celery/django-celery-beat/issues/147", "id": 331065082, "node_id": "MDU6SXNzdWUzMzEwNjUwODI=", "number": 147, "title": "worker\u542f\u52a8\u4e0d\u4e86", "user": {"login": "February00", "id": 37895812, "node_id": "MDQ6VXNlcjM3ODk1ODEy", "avatar_url": "https://avatars2.githubusercontent.com/u/37895812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/February00", "html_url": "https://github.com/February00", "followers_url": "https://api.github.com/users/February00/followers", "following_url": "https://api.github.com/users/February00/following{/other_user}", "gists_url": "https://api.github.com/users/February00/gists{/gist_id}", "starred_url": "https://api.github.com/users/February00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/February00/subscriptions", "organizations_url": "https://api.github.com/users/February00/orgs", "repos_url": "https://api.github.com/users/February00/repos", "events_url": "https://api.github.com/users/February00/events{/privacy}", "received_events_url": "https://api.github.com/users/February00/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-11T06:54:34Z", "updated_at": "2018-12-23T14:23:25Z", "closed_at": "2018-12-23T14:23:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u8bf7\u95ee\uff0c\u5728\u5229\u7528celery -A proj worker -l info \u542f\u52a8worker\u65f6\uff0c\u51fa\u73b0django.core.exceptions.ImproperLyConfigured: Requested settings,but settings are not configured.You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before assessing settings.\r\n\r\n\u6211\u5229\u7528settings.configure()\u8fdb\u884c\u4e86\u5c1d\u8bd5\uff0c\u8fd8\u662f\u6ca1\u6709\u89e3\u51b3\uff0c\u8fd8\u662f\u62a5\u8fd9\u4e2a\u9519\u8bef\u3002\r\n\r\n\u9ebb\u70e6\u95ee\u4e00\u4e0b\uff0c\u77e5\u4e0d\u77e5\u9053\u8fd9\u662f\u4ec0\u4e48\u539f\u56e0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/144", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/144/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/144/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/144/events", "html_url": "https://github.com/celery/django-celery-beat/issues/144", "id": 327999204, "node_id": "MDU6SXNzdWUzMjc5OTkyMDQ=", "number": 144, "title": "is there any way to get next_run_at?", "user": {"login": "yywing", "id": 22928185, "node_id": "MDQ6VXNlcjIyOTI4MTg1", "avatar_url": "https://avatars2.githubusercontent.com/u/22928185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yywing", "html_url": "https://github.com/yywing", "followers_url": "https://api.github.com/users/yywing/followers", "following_url": "https://api.github.com/users/yywing/following{/other_user}", "gists_url": "https://api.github.com/users/yywing/gists{/gist_id}", "starred_url": "https://api.github.com/users/yywing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yywing/subscriptions", "organizations_url": "https://api.github.com/users/yywing/orgs", "repos_url": "https://api.github.com/users/yywing/repos", "events_url": "https://api.github.com/users/yywing/events{/privacy}", "received_events_url": "https://api.github.com/users/yywing/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-31T05:29:08Z", "updated_at": "2018-06-05T01:20:51Z", "closed_at": "2018-06-05T01:20:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I want wo get next run time.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/142", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/142/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/142/events", "html_url": "https://github.com/celery/django-celery-beat/issues/142", "id": 319866506, "node_id": "MDU6SXNzdWUzMTk4NjY1MDY=", "number": 142, "title": "PeriodicTask doesn't start tasks", "user": {"login": "kezelyx", "id": 38942480, "node_id": "MDQ6VXNlcjM4OTQyNDgw", "avatar_url": "https://avatars0.githubusercontent.com/u/38942480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kezelyx", "html_url": "https://github.com/kezelyx", "followers_url": "https://api.github.com/users/kezelyx/followers", "following_url": "https://api.github.com/users/kezelyx/following{/other_user}", "gists_url": "https://api.github.com/users/kezelyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/kezelyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kezelyx/subscriptions", "organizations_url": "https://api.github.com/users/kezelyx/orgs", "repos_url": "https://api.github.com/users/kezelyx/repos", "events_url": "https://api.github.com/users/kezelyx/events{/privacy}", "received_events_url": "https://api.github.com/users/kezelyx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-03T10:32:20Z", "updated_at": "2019-11-03T13:26:08Z", "closed_at": "2018-05-06T18:54:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "celery -A app beat -l debug -S django\r\ncelery -A app worker -l debug \r\n\r\nsettings:\r\nCELERY_TIMEZONE = 'UTC'\r\nCELERY_ENABLE_UTC = True\r\nCELERY_BEAT_SCHEDULER = 'django_celery_beat.schedulers:DatabaseScheduler'\r\n\r\n>>> django_celery_beat.VERSION\r\nversion_info_t(major=1, minor=1, micro=1, releaselevel='', serial='')\r\n>>> celery.VERSION\r\nversion_info_t(major=4, minor=2, micro=0, releaselevel='rc2', serial='')\r\n\r\n>>> from djcelery.models import PeriodicTask\r\n>>> PeriodicTask.objects.all()\r\n<ExtendedQuerySet [<PeriodicTask: Proxy checker Task: every 10 seconds>]>\r\n\r\nAlso IntervalSchedule.SECONDS raises an exception:\r\n    type object 'IntervalSchedule' has no attribute 'SECONDS'\r\nSo I use a pure string for IntervalSchedule:\r\nperiod='seconds'\r\n\r\nAfter starting a beat. I just see the next lines and nothing more:\r\n[2018-05-03 13:15:42,011: DEBUG/MainProcess] beat: Waking up in 5.00 seconds.\r\n[2018-05-03 13:15:47,023: DEBUG/MainProcess] beat: Waking up in 5.00 seconds.\r\n[2018-05-03 13:15:52,032: DEBUG/MainProcess] beat: Waking up in 5.00 seconds.\r\n[2018-05-03 13:15:57,042: DEBUG/MainProcess] beat: Waking up in 5.00 seconds.\r\n[2018-05-03 13:16:02,053: DEBUG/MainProcess] beat: Waking up in 5.00 seconds.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/140", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/140/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/140/events", "html_url": "https://github.com/celery/django-celery-beat/issues/140", "id": 316827815, "node_id": "MDU6SXNzdWUzMTY4Mjc4MTU=", "number": 140, "title": "Setting a periodic task with crontab and timezone overrides the timezone of already created tasks", "user": {"login": "dnmellen", "id": 1197584, "node_id": "MDQ6VXNlcjExOTc1ODQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1197584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnmellen", "html_url": "https://github.com/dnmellen", "followers_url": "https://api.github.com/users/dnmellen/followers", "following_url": "https://api.github.com/users/dnmellen/following{/other_user}", "gists_url": "https://api.github.com/users/dnmellen/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnmellen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnmellen/subscriptions", "organizations_url": "https://api.github.com/users/dnmellen/orgs", "repos_url": "https://api.github.com/users/dnmellen/repos", "events_url": "https://api.github.com/users/dnmellen/events{/privacy}", "received_events_url": "https://api.github.com/users/dnmellen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-23T14:05:19Z", "updated_at": "2018-12-11T10:48:40Z", "closed_at": "2018-12-11T10:48:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I want to have different executions of the same task (ie: task1) with different timezones periodically using crontab but I'm experiencing weird results.\r\n\r\nSteps to reproduce:\r\n(context: local hour in Europe/Madrid 15:20 aprox)\r\n1. Create a PeriodicTask for task1 with crontab * 15 * * *  tz=Europe/Madrid (This runs ok every minute)\r\n2. Create a PeriodicTask for task1 with crontab * 15 * * *  tz=Europe/Chicago (This should not run at this moment but the periodic task created in the step 1 does not run anymore)\r\n\r\nIs this expected? I expected to be able to run periodic tasks in different timezones for the same crontab an task since the timezone is linked to the user, not the task itself.\r\n\r\nUsing:\r\n- Django 1.11\r\n- Celery 4.2.0rc2\r\n- django-celery-beat (master 3b3b14298a07d3f8f9d90b25030bbbf3fb9d3922)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/139", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/139/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/139/events", "html_url": "https://github.com/celery/django-celery-beat/issues/139", "id": 312285557, "node_id": "MDU6SXNzdWUzMTIyODU1NTc=", "number": 139, "title": "Next schduled task sent with current one", "user": {"login": "SylvainLosey", "id": 35432469, "node_id": "MDQ6VXNlcjM1NDMyNDY5", "avatar_url": "https://avatars3.githubusercontent.com/u/35432469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SylvainLosey", "html_url": "https://github.com/SylvainLosey", "followers_url": "https://api.github.com/users/SylvainLosey/followers", "following_url": "https://api.github.com/users/SylvainLosey/following{/other_user}", "gists_url": "https://api.github.com/users/SylvainLosey/gists{/gist_id}", "starred_url": "https://api.github.com/users/SylvainLosey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SylvainLosey/subscriptions", "organizations_url": "https://api.github.com/users/SylvainLosey/orgs", "repos_url": "https://api.github.com/users/SylvainLosey/repos", "events_url": "https://api.github.com/users/SylvainLosey/events{/privacy}", "received_events_url": "https://api.github.com/users/SylvainLosey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-08T08:36:29Z", "updated_at": "2018-12-11T10:47:36Z", "closed_at": "2018-12-11T10:47:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have trouble configuring Celery Beat to reliably send tasks at the scheduled time. It sometimes sends the next scheduled task at the same time than the current one, which then messes the whole schedule.\r\n\r\nHere is the 4 tasks I need to run, configured in celery.py:\r\n\r\n```\r\n    from __future__ import absolute_import, unicode_literals\r\n    import os\r\n    from celery import Celery\r\n    from celery.schedules import crontab\r\n    \r\n    # set the default Django settings module for the 'celery' program.\r\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'oust.settings.local')\r\n    \r\n    app = Celery('oust')\r\n    \r\n    app.config_from_object('django.conf:settings', namespace='CELERY')\r\n    \r\n    app.autodiscover_tasks()\r\n    \r\n    app.conf.timezone='Europe/Zurich'\r\n    \r\n    \r\n    app.conf.beat_schedule = {\r\n        'Send pickup reminders': {\r\n            'task': 'send_pickup_reminders',\r\n            'schedule': crontab(hour=17, minute=0),\r\n        },\r\n        'Decrease pickup counters': {\r\n            'task': 'decrease_pickup_counters',\r\n            'schedule': crontab(hour=23, minute=55),\r\n        },\r\n        'Update all pickups': {\r\n            'task': 'update_all_pickups',\r\n            'schedule': crontab(hour=2, minute=0),\r\n        },\r\n        'Generate new invoices': {\r\n            'task': 'generate_new_invoices',\r\n            'schedule': crontab(hour=0, minute=15),\r\n        },\r\n    }\r\n```\r\n\r\nAnd here is an example of a task sent with the previous one :\r\n\r\n```\r\n    Apr 07 19:00:00 oust-prod app/beat.1:  [2018-04-08 04:00:00,010: INFO/MainProcess] Scheduler: Sending due task celery.backend_cleanup (celery.backend_cleanup) \r\n    Apr 07 19:00:00 oust-prod app/worker.1:  [2018-04-08 04:00:00,017: INFO/MainProcess] Received task: celery.backend_cleanup[d3d30f13-0244-4582-8944-80fc56ae7b94]   \r\n    Apr 07 19:00:00 oust-prod app/worker.1:  [2018-04-08 04:00:00,022: DEBUG/MainProcess] Task accepted: celery.backend_cleanup[d3d30f13-0244-4582-8944-80fc56ae7b94] pid:9 \r\n    Apr 07 19:00:00 oust-prod app/worker.1:  [2018-04-08 04:00:00,029: INFO/MainProcess] Received task: send_pickup_reminders[e01ea890-86b2-4192-9238-0ee358e2ca1b]   \r\n    Apr 07 19:00:00 oust-prod app/worker.1:  [2018-04-08 04:00:00,080: INFO/ForkPoolWorker-1] Task celery.backend_cleanup[d3d30f13-0244-4582-8944-80fc56ae7b94] succeeded in 0.05823612492531538s: None \r\n    Apr 07 19:00:00 oust-prod app/beat.1:  [2018-04-08 04:00:00,013: DEBUG/MainProcess] celery.backend_cleanup sent. id->d3d30f13-0244-4582-8944-80fc56ae7b94 \r\n    Apr 07 19:00:00 oust-prod app/beat.1:  [2018-04-08 04:00:00,021: INFO/MainProcess] Scheduler: Sending due task send_pickup_reminders (send_pickup_reminders) \r\n    Apr 07 19:00:00 oust-prod app/beat.1:  [2018-04-08 04:00:00,031: DEBUG/MainProcess] send_pickup_reminders sent. id->e01ea890-86b2-4192-9238-0ee358e2ca1b \r\n    Apr 07 19:00:00 oust-prod app/beat.1:  [2018-04-08 04:00:00,034: DEBUG/MainProcess] beat: Waking up in 5.00 seconds. \r\n    Apr 07 19:00:00 oust-prod app/worker.1:  [2018-04-08 04:00:00,086: DEBUG/MainProcess] Task accepted: send_pickup_reminders[e01ea890-86b2-4192-9238-0ee358e2ca1b] pid:9 \r\n    Apr 07 19:00:00 oust-prod app/worker.1:  [2018-04-08 04:00:00,142: INFO/ForkPoolWorker-1] Task send_pickup_reminders[e01ea890-86b2-4192-9238-0ee358e2ca1b] succeeded in 0.059483697172254324s: None \r\n    Apr 07 19:00:05 oust-prod app/beat.1:  [2018-04-08 04:00:05,043: DEBUG/MainProcess] beat: Waking up in 5.00 seconds.\r\n```\r\n\r\nHere the scheduler sends celery backend cleanup as normal at 04:00, but then also sends the next scheduled taks, send pickup reminder, which should be executed at 17:00.\r\n\r\nThis has happened with multiple different tasks and schedules. I just can't find what causes this problem.\r\n\r\n\r\nHere are the relevant settings I used:\r\n\r\nsettings.py\r\n\r\n```\r\n    INSTALLED_APPS = [\r\n        ...\r\n        'django_celery_beat',\r\n        'django_celery_results',\r\n        ...\r\n    ]\r\n\r\n    TIME_ZONE = 'Europe/Zurich'\r\n    USE_I18N = True\r\n    USE_L10N = True\r\n    USE_TZ = True\r\n```\r\n\r\nProduction settings\r\n\r\n```\r\n    CELERY_BROKER_URL= os.environ['REDISCLOUD_URL']\r\n    CELERY_RESULT_BACKEND = 'django-db'\r\n    CELERY_ACCEPT_CONTENT = ['application/json']\r\n    CELERY_TASK_SERIALIZER = 'json'\r\n    CELERY_RESULT_SERIALIZER = 'json'\r\n```\r\n\r\n\r\nVersion info\r\n\r\n```\r\nDjango (2.0)\r\ndjango-celery-beat (1.1.1)\r\ncelery (4.1.0)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/138", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/138/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/138/events", "html_url": "https://github.com/celery/django-celery-beat/issues/138", "id": 310727482, "node_id": "MDU6SXNzdWUzMTA3Mjc0ODI=", "number": 138, "title": "The last_run_at field changed by django again, if both django and celery set time zone.", "user": {"login": "linxi-1214", "id": 20988026, "node_id": "MDQ6VXNlcjIwOTg4MDI2", "avatar_url": "https://avatars3.githubusercontent.com/u/20988026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linxi-1214", "html_url": "https://github.com/linxi-1214", "followers_url": "https://api.github.com/users/linxi-1214/followers", "following_url": "https://api.github.com/users/linxi-1214/following{/other_user}", "gists_url": "https://api.github.com/users/linxi-1214/gists{/gist_id}", "starred_url": "https://api.github.com/users/linxi-1214/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linxi-1214/subscriptions", "organizations_url": "https://api.github.com/users/linxi-1214/orgs", "repos_url": "https://api.github.com/users/linxi-1214/repos", "events_url": "https://api.github.com/users/linxi-1214/events{/privacy}", "received_events_url": "https://api.github.com/users/linxi-1214/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-03T07:41:14Z", "updated_at": "2018-12-11T10:42:10Z", "closed_at": "2018-12-11T10:42:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I set a interval task to run every 10 seconds. After I starting the celery beat process, it send the task all the time.\r\nAnd, I found in the django_celery_beat.schedulers module:\r\n```python\r\ndef __init__(self, model, app=None):\r\n        \"\"\"Initialize the model entry.\"\"\"\r\n        self.app = app or current_app._get_current_object()\r\n        self.name = model.name\r\n        self.task = model.task\r\n        try:\r\n            self.schedule = model.schedule\r\n        except model.DoesNotExist:\r\n            logger.error(\r\n                'Disabling schedule %s that was removed from database',\r\n                self.name,\r\n            )\r\n            self._disable(model)\r\n        try:\r\n            self.args = loads(model.args or '[]')\r\n            self.kwargs = loads(model.kwargs or '{}')\r\n        except ValueError as exc:\r\n            logger.exception(\r\n                'Removing schedule %s for argument deseralization error: %r',\r\n                self.name, exc,\r\n            )\r\n            self._disable(model)\r\n\r\n        self.options = {\r\n            'queue': model.queue,\r\n            'exchange': model.exchange,\r\n            'routing_key': model.routing_key,\r\n            'expires': model.expires,\r\n        }\r\n        self.total_run_count = model.total_run_count\r\n        self.model = model\r\n\r\n        if not model.last_run_at:\r\n            model.last_run_at = self._default_now()\r\n        self.last_run_at = make_aware(model.last_run_at)\r\n\r\n    def _disable(self, model):\r\n        model.no_changes = True\r\n        model.enabled = False\r\n        model.save()\r\n\r\n   def is_due(self):\r\n        if not self.model.enabled:\r\n            return False, 5.0   # 5 second delay for re-enable.\r\n        return self.schedule.is_due(self.last_run_at)\r\n\r\n\r\n    def _default_now(self):\r\n        now = self.app.now()\r\n        # The PyTZ datetime must be localised for the Django-Celery-Beat\r\n        # scheduler to work. Keep in mind that timezone arithmatic\r\n        # with a localized timezone may be inaccurate.\r\n        return now.tzinfo.localize(now.replace(tzinfo=None))\r\n\r\n    def __next__(self):\r\n        self.model.last_run_at = self.app.now()\r\n        self.model.total_run_count += 1\r\n        self.model.no_changes = True\r\n        return self.__class__(self.model)\r\n```\r\n\r\nI have a question, in the __init__ method:\r\n```python\r\n       if not model.last_run_at:\r\n            model.last_run_at = self._default_now()\r\n        self.last_run_at = make_aware(model.last_run_at)\r\n```\r\nuse `make_aware` handle the time. and why in the __next__ method, doesn't use the `make_aware` method ? and why not use `self._default_now()`?\r\n\r\nI run in  the django shell env:\r\n```python\r\nIn [1]: from celery.utils.time import timezone\r\n\r\nIn [2]: tz = timezone.get_timezone('Asia/Shanghai')\r\n\r\nIn [3]: now = datetime.utcnow().replace(tzinfo=tz)\r\n\r\nIn [4]: from datetime import datetime\r\n\r\nIn [5]: now = datetime.utcnow().replace(tzinfo=tz)\r\n\r\nIn [6]: now\r\nOut[6]: datetime.datetime(2018, 4, 3, 7, 8, 9, 783633, tzinfo=<DstTzInfo 'Asia/Shanghai' LMT+8:06:00 STD>)\r\n\r\nIn [7]: from django_celery_beat.utils import make_aware\r\n\r\nIn [8]: lrt = now.tzinfo.localize(now.replace(tzinfo=None))\r\n\r\nIn [9]: lrt\r\nOut[9]: datetime.datetime(2018, 4, 3, 7, 8, 9, 783633, tzinfo=<DstTzInfo 'Asia/Shanghai' CST+8:00:00 STD>)\r\n```\r\nwhen use `now.tzinfo.localize(now.replace(tzinfo=None))`, the `tzinfo` changed to `CST`, maybe it is not import, then I update the periodic task instance.\r\n```python\r\nIn [11]: from django_celery_beat.models import PeriodicTask\r\n\r\nIn [12]: t = PeriodicTask.objects.get(pk=1)\r\n\r\nIn [13]: t.last_run_at = lastrt\r\n\r\nIn [14]: t.save()\r\n\r\nIn [15]: t.enabled=1\r\n\r\nIn [16]: t.last_run_at = lastrt\r\n\r\nIn [17]: t.save()\r\n\r\nIn [18]: lastrt\r\nOut[18]: datetime.datetime(2018, 4, 3, 7, 8, 9, 783633, tzinfo=<DstTzInfo 'Asia/Shanghai' CST+8:00:00 STD>)\r\n```\r\nand query again:\r\n\r\n```python\r\nIn [1]: from django_celery_beat.models import PeriodicTask\r\n\r\nIn [2]: t2 = PeriodicTask.objects.get(pk=1)\r\n\r\nIn [3]: t2.last_run_at\r\nOut[3]: datetime.datetime(2018, 4, 2, 23, 8, 9, 783633, tzinfo=<UTC>)\r\n```\r\nthe last_run_at field's value was changed by django again, so I got a wrong date time.\r\n\r\nand last_run_at field's value always < now(), so it run all the time.\r\n\r\nThe version info is:\r\n```shell\r\nDjango (1.11.11)\r\ndjango-celery-beat (1.1.1)\r\ncelery (4.1.0)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/137", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/137/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/137/events", "html_url": "https://github.com/celery/django-celery-beat/issues/137", "id": 308446509, "node_id": "MDU6SXNzdWUzMDg0NDY1MDk=", "number": 137, "title": "Migration issue", "user": {"login": "frague59", "id": 1118696, "node_id": "MDQ6VXNlcjExMTg2OTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1118696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frague59", "html_url": "https://github.com/frague59", "followers_url": "https://api.github.com/users/frague59/followers", "following_url": "https://api.github.com/users/frague59/following{/other_user}", "gists_url": "https://api.github.com/users/frague59/gists{/gist_id}", "starred_url": "https://api.github.com/users/frague59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frague59/subscriptions", "organizations_url": "https://api.github.com/users/frague59/orgs", "repos_url": "https://api.github.com/users/frague59/repos", "events_url": "https://api.github.com/users/frague59/events{/privacy}", "received_events_url": "https://api.github.com/users/frague59/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-03-26T06:25:19Z", "updated_at": "2018-10-13T16:39:11Z", "closed_at": "2018-10-13T16:39:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI've the following issue when upgrading celery-beat:\r\n\r\n```\r\nCommandError: Conflicting migrations detected; multiple leaf nodes in the migration graph: (0006_auto_20180210_1226, 0007_auto_20180219_1427 in django_celery_beat).\r\n```\r\nHow can I fix this ?\r\n\r\nThanks for this great tool !\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/135", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/135/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/135/events", "html_url": "https://github.com/celery/django-celery-beat/issues/135", "id": 307160430, "node_id": "MDU6SXNzdWUzMDcxNjA0MzA=", "number": 135, "title": "Keep running after the update 1.1.1", "user": {"login": "kevindwei", "id": 20273599, "node_id": "MDQ6VXNlcjIwMjczNTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/20273599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevindwei", "html_url": "https://github.com/kevindwei", "followers_url": "https://api.github.com/users/kevindwei/followers", "following_url": "https://api.github.com/users/kevindwei/following{/other_user}", "gists_url": "https://api.github.com/users/kevindwei/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevindwei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevindwei/subscriptions", "organizations_url": "https://api.github.com/users/kevindwei/orgs", "repos_url": "https://api.github.com/users/kevindwei/repos", "events_url": "https://api.github.com/users/kevindwei/events{/privacy}", "received_events_url": "https://api.github.com/users/kevindwei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-03-21T08:54:22Z", "updated_at": "2018-12-11T11:34:02Z", "closed_at": "2018-12-11T10:41:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "after the update django-celery-beat==1.1.1  ,the task keeps running,?????\r\nsysytem:centos7\r\ncelery (4.1.0)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/134", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/134/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/134/events", "html_url": "https://github.com/celery/django-celery-beat/issues/134", "id": 305760193, "node_id": "MDU6SXNzdWUzMDU3NjAxOTM=", "number": 134, "title": "Period Tasks Don't Adjust for Daylight Savings", "user": {"login": "harelw", "id": 5924977, "node_id": "MDQ6VXNlcjU5MjQ5Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/5924977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harelw", "html_url": "https://github.com/harelw", "followers_url": "https://api.github.com/users/harelw/followers", "following_url": "https://api.github.com/users/harelw/following{/other_user}", "gists_url": "https://api.github.com/users/harelw/gists{/gist_id}", "starred_url": "https://api.github.com/users/harelw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harelw/subscriptions", "organizations_url": "https://api.github.com/users/harelw/orgs", "repos_url": "https://api.github.com/users/harelw/repos", "events_url": "https://api.github.com/users/harelw/events{/privacy}", "received_events_url": "https://api.github.com/users/harelw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-16T00:04:21Z", "updated_at": "2018-12-11T10:15:34Z", "closed_at": "2018-12-11T10:15:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a periodic task set with a crontab of `0 14 4 * *` (Every Thursday at 2 PM) and `TIMEZONE` for Django set to `America/Los_Angeles`. Upon the recent change in time, it now triggers at 3 PM Los Angeles time, as if Daylight Savings hadn't started.\r\n\r\nI do not have a different timezone set for Celery.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/133", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/133/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/133/events", "html_url": "https://github.com/celery/django-celery-beat/issues/133", "id": 301599460, "node_id": "MDU6SXNzdWUzMDE1OTk0NjA=", "number": 133, "title": "Timezone change warning instructions needs updating", "user": {"login": "harelw", "id": 5924977, "node_id": "MDQ6VXNlcjU5MjQ5Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/5924977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harelw", "html_url": "https://github.com/harelw", "followers_url": "https://api.github.com/users/harelw/followers", "following_url": "https://api.github.com/users/harelw/following{/other_user}", "gists_url": "https://api.github.com/users/harelw/gists{/gist_id}", "starred_url": "https://api.github.com/users/harelw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harelw/subscriptions", "organizations_url": "https://api.github.com/users/harelw/orgs", "repos_url": "https://api.github.com/users/harelw/repos", "events_url": "https://api.github.com/users/harelw/events{/privacy}", "received_events_url": "https://api.github.com/users/harelw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-01T23:31:17Z", "updated_at": "2018-12-11T10:16:23Z", "closed_at": "2018-12-11T10:16:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "New instructions:\r\n\r\n```\r\nfrom django_celery_beat.models import PeriodicTask, PeriodicTasks\r\nPeriodicTask.objects.all().update(last_run_at=None)\r\nfor task in PeriodicTask.objects.all():\r\n    PeriodicTasks.changed(task)\r\n```\r\n\r\n\r\nhttps://github.com/celery/django-celery-beat/blob/60b7fc624528ac213ff2c6aa77e0063c63f727ea/docs/includes/introduction.txt#L39", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/132", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/132/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/132/events", "html_url": "https://github.com/celery/django-celery-beat/issues/132", "id": 300347875, "node_id": "MDU6SXNzdWUzMDAzNDc4NzU=", "number": 132, "title": "AttributeError: 'NoneType' object has no attribute 'localize'", "user": {"login": "muhtarcanrb", "id": 12232799, "node_id": "MDQ6VXNlcjEyMjMyNzk5", "avatar_url": "https://avatars0.githubusercontent.com/u/12232799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muhtarcanrb", "html_url": "https://github.com/muhtarcanrb", "followers_url": "https://api.github.com/users/muhtarcanrb/followers", "following_url": "https://api.github.com/users/muhtarcanrb/following{/other_user}", "gists_url": "https://api.github.com/users/muhtarcanrb/gists{/gist_id}", "starred_url": "https://api.github.com/users/muhtarcanrb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muhtarcanrb/subscriptions", "organizations_url": "https://api.github.com/users/muhtarcanrb/orgs", "repos_url": "https://api.github.com/users/muhtarcanrb/repos", "events_url": "https://api.github.com/users/muhtarcanrb/events{/privacy}", "received_events_url": "https://api.github.com/users/muhtarcanrb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-26T18:33:29Z", "updated_at": "2020-04-20T19:10:24Z", "closed_at": "2018-12-11T10:16:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "django-celery-beat==1.1.1\r\n\r\n```\r\n2018-02-26 18:26:25,989 - CRITICAL - celery.beat:111 - beat raised exception <type 'exceptions.AttributeError'>: AttributeError(\"'NoneType' object has no attribute 'localize'\",)\r\nTraceback (most recent call last):\r\n  File \"/opt/app/lib/python2.7/site-packages/celery/apps/beat.py\", line 107, in start_scheduler\r\n    service.start()\r\n  File \"/opt/app/lib/python2.7/site-packages/celery/beat.py\", line 528, in start\r\n    humanize_seconds(self.scheduler.max_interval))\r\n  File \"/opt/app/lib/python2.7/site-packages/kombu/utils/objects.py\", line 44, in __get__\r\n    value = obj.__dict__[self.__name__] = self.__get(obj)\r\n  File \"/opt/app/lib/python2.7/site-packages/celery/beat.py\", line 572, in scheduler\r\n    return self.get_scheduler()\r\n  File \"/opt/app/lib/python2.7/site-packages/celery/beat.py\", line 567, in get_scheduler\r\n    lazy=lazy,\r\n  File \"/opt/app/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 183, in __init__\r\n    Scheduler.__init__(self, *args, **kwargs)\r\n  File \"/opt/app/lib/python2.7/site-packages/celery/beat.py\", line 204, in __init__\r\n    self.setup_schedule()\r\n  File \"/opt/app/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 191, in setup_schedule\r\n    self.install_default_entries(self.schedule)\r\n  File \"/opt/app/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 290, in schedule\r\n    self._schedule = self.all_as_schedule()\r\n  File \"/opt/app/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 199, in all_as_schedule\r\n    s[model.name] = self.Entry(model, app=self.app)\r\n  File \"/opt/app/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 88, in __init__\r\n    model.last_run_at = self._default_now()\r\n  File \"/opt/app/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 106, in _default_now\r\n    return now.tzinfo.localize(now.replace(tzinfo=None))\r\nAttributeError: 'NoneType' object has no attribute 'localize'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/131", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/131/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/131/events", "html_url": "https://github.com/celery/django-celery-beat/issues/131", "id": 298310003, "node_id": "MDU6SXNzdWUyOTgzMTAwMDM=", "number": 131, "title": "Set up periodic tasks with Django as database", "user": {"login": "AlexLoar", "id": 7362705, "node_id": "MDQ6VXNlcjczNjI3MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7362705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexLoar", "html_url": "https://github.com/AlexLoar", "followers_url": "https://api.github.com/users/AlexLoar/followers", "following_url": "https://api.github.com/users/AlexLoar/following{/other_user}", "gists_url": "https://api.github.com/users/AlexLoar/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexLoar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexLoar/subscriptions", "organizations_url": "https://api.github.com/users/AlexLoar/orgs", "repos_url": "https://api.github.com/users/AlexLoar/repos", "events_url": "https://api.github.com/users/AlexLoar/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexLoar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-19T15:12:56Z", "updated_at": "2018-12-11T10:17:11Z", "closed_at": "2018-12-11T10:17:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to set up Django-celery-beat in order to create periodic tasks.\r\nMy configuration is as follows:\r\n\r\n    from celery import Celery\r\n    import os\r\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings.local')\r\n    celery = Celery(broker=\"django-db\")\r\n    celery.autodiscover_tasks()\r\n    \r\n    CELERY_ACCEPT_CONTENT = ['json']\r\n    CELERY_TASK_SERIALIZER = 'json'\r\n    CELERY_RESULT_SERIALIZER = 'json'\r\n    CELERY_TIMEZONE = 'UTC'\r\n    CELERY_ENABLE_UTC = True\r\n    CELERY_BEAT_SCHEDULER = 'django_celery_beat.schedulers.DatabaseScheduler'\r\n\r\nI'm trying to use Django as database and run both the beat service and the workers. \r\n\r\nWhen I launch the workers like this:\r\n\r\n    celery -A app worker --loglevel=DEBUG --app=config.settings.local\r\n\r\n... I get:\r\n\r\n    ERROR/MainProcess] consumer: Cannot connect to amqp://guest:**@django-db:5672//: [Errno 8] nodename nor servname provided, or not known.\r\n\r\nAnd when I try it when beat:\r\n\r\n    celery -A app beat -l info --scheduler django_celery_beat.schedulers:DatabaseScheduler --app=config.settings.local\r\n\r\nI get this error:\r\n\r\n    ERROR/MainProcess] beat: Connection error: [Errno 8] nodename nor servname provided, or not known. Trying again in 4.0 seconds...\r\n\r\nI'd like to be able to create periodic tasks through the Django admin but I'm stuck at this point so any help is welcome.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/130", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/130/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/130/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/130/events", "html_url": "https://github.com/celery/django-celery-beat/issues/130", "id": 297613613, "node_id": "MDU6SXNzdWUyOTc2MTM2MTM=", "number": 130, "title": "Question: Task names in django_celery_results", "user": {"login": "ACPK", "id": 2019893, "node_id": "MDQ6VXNlcjIwMTk4OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2019893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ACPK", "html_url": "https://github.com/ACPK", "followers_url": "https://api.github.com/users/ACPK/followers", "following_url": "https://api.github.com/users/ACPK/following{/other_user}", "gists_url": "https://api.github.com/users/ACPK/gists{/gist_id}", "starred_url": "https://api.github.com/users/ACPK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ACPK/subscriptions", "organizations_url": "https://api.github.com/users/ACPK/orgs", "repos_url": "https://api.github.com/users/ACPK/repos", "events_url": "https://api.github.com/users/ACPK/events{/privacy}", "received_events_url": "https://api.github.com/users/ACPK/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-15T22:06:52Z", "updated_at": "2018-12-11T10:17:42Z", "closed_at": "2018-12-11T10:17:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "When viewing \"django_celery_results\" in Django's admin area, how can an admin:\r\n\r\n1. See the associated task name\r\n2. I only see two days worth of tasks. How can I keep a log of all completed and failed jobs?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/129", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/129/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/129/events", "html_url": "https://github.com/celery/django-celery-beat/issues/129", "id": 297307433, "node_id": "MDU6SXNzdWUyOTczMDc0MzM=", "number": 129, "title": "Celery Beats sends a lot of tasks", "user": {"login": "dpineiden", "id": 225633, "node_id": "MDQ6VXNlcjIyNTYzMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/225633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dpineiden", "html_url": "https://github.com/dpineiden", "followers_url": "https://api.github.com/users/dpineiden/followers", "following_url": "https://api.github.com/users/dpineiden/following{/other_user}", "gists_url": "https://api.github.com/users/dpineiden/gists{/gist_id}", "starred_url": "https://api.github.com/users/dpineiden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dpineiden/subscriptions", "organizations_url": "https://api.github.com/users/dpineiden/orgs", "repos_url": "https://api.github.com/users/dpineiden/repos", "events_url": "https://api.github.com/users/dpineiden/events{/privacy}", "received_events_url": "https://api.github.com/users/dpineiden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-02-15T01:54:51Z", "updated_at": "2018-02-21T17:28:09Z", "closed_at": "2018-02-21T17:28:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\r\nI'm very new with celery, so maybe there are some problems with my configuration...\r\n\r\nThe problem is:\r\nI have to run celery beat, that sends the tasks assigned\r\nI have to run celery worker to receive the tasks and run that.\r\nIs ok with that?\r\n\r\nTHe problem is when i run beat, sends a lot of tasks by second. So if the task is send a email, my  case, that cause sends a lot of email when i need only 1.\r\n\r\nThe timezone in django and celery are the same..\r\nI created PeriodicTask with Crontab\r\n\r\nWhat could be? How to solve?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/128", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/128/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/128/events", "html_url": "https://github.com/celery/django-celery-beat/issues/128", "id": 297204445, "node_id": "MDU6SXNzdWUyOTcyMDQ0NDU=", "number": 128, "title": "IntervalSchedule-based PeriodicTasks ignore the \"enabled\" flag", "user": {"login": "ShaheedHaque", "id": 4881193, "node_id": "MDQ6VXNlcjQ4ODExOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4881193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShaheedHaque", "html_url": "https://github.com/ShaheedHaque", "followers_url": "https://api.github.com/users/ShaheedHaque/followers", "following_url": "https://api.github.com/users/ShaheedHaque/following{/other_user}", "gists_url": "https://api.github.com/users/ShaheedHaque/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShaheedHaque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShaheedHaque/subscriptions", "organizations_url": "https://api.github.com/users/ShaheedHaque/orgs", "repos_url": "https://api.github.com/users/ShaheedHaque/repos", "events_url": "https://api.github.com/users/ShaheedHaque/events{/privacy}", "received_events_url": "https://api.github.com/users/ShaheedHaque/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-14T18:47:59Z", "updated_at": "2018-02-15T09:10:20Z", "closed_at": "2018-02-15T08:57:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've been happily using the \"enabled\" flag to control CrontabSchedule-based PeriodicTasks. However, this flag seems to be ignored by IntervalSchedule-based PeriodicTasks. Here is some sample debug (after a restart of Beat, in case that is relevant):\r\n\r\n> [2018-02-14 18:29:13,145: INFO/MainProcess] Received task: xxx.yyy.zzz[uuid]  \r\n> [2018-02-14 18:41:48,782: INFO/ForkPoolWorker-4] xxx.yyy.zzz[uuid]: setting of flag (enabled: False)\r\n\r\nI've looked around, but don't see where this flag is applied, even in the CrontabSchedule case. I'd be happy to debug further if I could be pointed in the right direction.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/127", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/127/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/127/events", "html_url": "https://github.com/celery/django-celery-beat/issues/127", "id": 296746043, "node_id": "MDU6SXNzdWUyOTY3NDYwNDM=", "number": 127, "title": "Model class django_celery_beat.models.SolarSchedule doesn't declare an explicit app_label and isn't in an application in INSTALLED_APPS.", "user": {"login": "lyrubiano5", "id": 26607736, "node_id": "MDQ6VXNlcjI2NjA3NzM2", "avatar_url": "https://avatars2.githubusercontent.com/u/26607736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lyrubiano5", "html_url": "https://github.com/lyrubiano5", "followers_url": "https://api.github.com/users/lyrubiano5/followers", "following_url": "https://api.github.com/users/lyrubiano5/following{/other_user}", "gists_url": "https://api.github.com/users/lyrubiano5/gists{/gist_id}", "starred_url": "https://api.github.com/users/lyrubiano5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lyrubiano5/subscriptions", "organizations_url": "https://api.github.com/users/lyrubiano5/orgs", "repos_url": "https://api.github.com/users/lyrubiano5/repos", "events_url": "https://api.github.com/users/lyrubiano5/events{/privacy}", "received_events_url": "https://api.github.com/users/lyrubiano5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-13T13:57:57Z", "updated_at": "2019-01-10T12:26:24Z", "closed_at": "2018-12-11T10:25:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I installed the library, when I tried to do python manage.py runserver appear this error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/122", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/122/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/122/events", "html_url": "https://github.com/celery/django-celery-beat/issues/122", "id": 295833567, "node_id": "MDU6SXNzdWUyOTU4MzM1Njc=", "number": 122, "title": "Database field used to store the day-of-month is too small", "user": {"login": "ShaheedHaque", "id": 4881193, "node_id": "MDQ6VXNlcjQ4ODExOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4881193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShaheedHaque", "html_url": "https://github.com/ShaheedHaque", "followers_url": "https://api.github.com/users/ShaheedHaque/followers", "following_url": "https://api.github.com/users/ShaheedHaque/following{/other_user}", "gists_url": "https://api.github.com/users/ShaheedHaque/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShaheedHaque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShaheedHaque/subscriptions", "organizations_url": "https://api.github.com/users/ShaheedHaque/orgs", "repos_url": "https://api.github.com/users/ShaheedHaque/repos", "events_url": "https://api.github.com/users/ShaheedHaque/events{/privacy}", "received_events_url": "https://api.github.com/users/ShaheedHaque/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-09T11:04:52Z", "updated_at": "2018-02-10T21:08:08Z", "closed_at": "2018-02-10T21:08:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The database field used to store the day-of-month is 64 chars long, which is too short for the worst case scenario of '[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]' which is 85 chars without the spaces or 115 with them.\r\n\r\nThis is with django-celery-beat==1.1.0, celery==4.1.0 and Django==2.0.1.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/121", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/121/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/121/events", "html_url": "https://github.com/celery/django-celery-beat/issues/121", "id": 292828478, "node_id": "MDU6SXNzdWUyOTI4Mjg0Nzg=", "number": 121, "title": "Reason about same schedule object.", "user": {"login": "anonymez", "id": 14571621, "node_id": "MDQ6VXNlcjE0NTcxNjIx", "avatar_url": "https://avatars3.githubusercontent.com/u/14571621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anonymez", "html_url": "https://github.com/anonymez", "followers_url": "https://api.github.com/users/anonymez/followers", "following_url": "https://api.github.com/users/anonymez/following{/other_user}", "gists_url": "https://api.github.com/users/anonymez/gists{/gist_id}", "starred_url": "https://api.github.com/users/anonymez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anonymez/subscriptions", "organizations_url": "https://api.github.com/users/anonymez/orgs", "repos_url": "https://api.github.com/users/anonymez/repos", "events_url": "https://api.github.com/users/anonymez/events{/privacy}", "received_events_url": "https://api.github.com/users/anonymez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-30T15:37:51Z", "updated_at": "2018-12-11T10:30:22Z", "closed_at": "2018-12-11T10:30:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can someone explain me why or point me to the right documentation for the reason of this sentence in README.md?\r\n\r\n**you have multiple periodic tasks executing every 10 seconds, then they should all point to the same schedule object.**\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/120", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/120/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/120/events", "html_url": "https://github.com/celery/django-celery-beat/issues/120", "id": 292101080, "node_id": "MDU6SXNzdWUyOTIxMDEwODA=", "number": 120, "title": "Release version 1.1.1", "user": {"login": "thedrow", "id": 48936, "node_id": "MDQ6VXNlcjQ4OTM2", "avatar_url": "https://avatars2.githubusercontent.com/u/48936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thedrow", "html_url": "https://github.com/thedrow", "followers_url": "https://api.github.com/users/thedrow/followers", "following_url": "https://api.github.com/users/thedrow/following{/other_user}", "gists_url": "https://api.github.com/users/thedrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thedrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thedrow/subscriptions", "organizations_url": "https://api.github.com/users/thedrow/orgs", "repos_url": "https://api.github.com/users/thedrow/repos", "events_url": "https://api.github.com/users/thedrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thedrow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-01-27T07:48:50Z", "updated_at": "2018-02-18T12:40:24Z", "closed_at": "2018-02-18T12:40:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We need to ensure that this time there's a changelog for all previous releases as well.\r\n@auvipy Would you mind taking care of this release?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/117", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/117/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/117/events", "html_url": "https://github.com/celery/django-celery-beat/issues/117", "id": 289514860, "node_id": "MDU6SXNzdWUyODk1MTQ4NjA=", "number": 117, "title": "New migration of SolarSchedule is always made when run `makemigrations", "user": {"login": "fuatu", "id": 12870428, "node_id": "MDQ6VXNlcjEyODcwNDI4", "avatar_url": "https://avatars2.githubusercontent.com/u/12870428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fuatu", "html_url": "https://github.com/fuatu", "followers_url": "https://api.github.com/users/fuatu/followers", "following_url": "https://api.github.com/users/fuatu/following{/other_user}", "gists_url": "https://api.github.com/users/fuatu/gists{/gist_id}", "starred_url": "https://api.github.com/users/fuatu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fuatu/subscriptions", "organizations_url": "https://api.github.com/users/fuatu/orgs", "repos_url": "https://api.github.com/users/fuatu/repos", "events_url": "https://api.github.com/users/fuatu/events{/privacy}", "received_events_url": "https://api.github.com/users/fuatu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-18T06:05:48Z", "updated_at": "2018-01-18T10:31:17Z", "closed_at": "2018-01-18T10:31:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have version 1.1.0 and I have this problem. \r\neach makemigration gives an output of:\r\nAlter field event on solarschedule\r\n\r\nI also checked the issue #100 ; however it is not fixed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/116", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/116/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/116/events", "html_url": "https://github.com/celery/django-celery-beat/issues/116", "id": 288543956, "node_id": "MDU6SXNzdWUyODg1NDM5NTY=", "number": 116, "title": "\"* * * * *\" doesn't run tasks between 00:00 and 01:00", "user": {"login": "kedare", "id": 359877, "node_id": "MDQ6VXNlcjM1OTg3Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/359877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kedare", "html_url": "https://github.com/kedare", "followers_url": "https://api.github.com/users/kedare/followers", "following_url": "https://api.github.com/users/kedare/following{/other_user}", "gists_url": "https://api.github.com/users/kedare/gists{/gist_id}", "starred_url": "https://api.github.com/users/kedare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kedare/subscriptions", "organizations_url": "https://api.github.com/users/kedare/orgs", "repos_url": "https://api.github.com/users/kedare/repos", "events_url": "https://api.github.com/users/kedare/events{/privacy}", "received_events_url": "https://api.github.com/users/kedare/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-15T10:20:38Z", "updated_at": "2018-12-11T10:30:54Z", "closed_at": "2018-12-11T10:30:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI have a very weird issue on my setup.\r\n\r\nI have a task setup to run every minute with \"* * * * *\" (I converted to a \"every minutes\" interval to see if the issue is the same), and I see that it works perfectly, except between 00:05 and 01:00 where is doesn't run at all (No error, nothing, it's just not scheduled)\r\n\r\nAny idea of what could be the issue ?\r\n\r\nMy versions :\r\n````\r\ndjango = \"==2.0\"\r\ncelery = \"==4.1.0\"\r\ndjango-celery-beat = \"==1.1.0\"\r\n````\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/115", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/115/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/115/events", "html_url": "https://github.com/celery/django-celery-beat/issues/115", "id": 287761256, "node_id": "MDU6SXNzdWUyODc3NjEyNTY=", "number": 115, "title": "missing migration in pypi release", "user": {"login": "rsichny", "id": 745639, "node_id": "MDQ6VXNlcjc0NTYzOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/745639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsichny", "html_url": "https://github.com/rsichny", "followers_url": "https://api.github.com/users/rsichny/followers", "following_url": "https://api.github.com/users/rsichny/following{/other_user}", "gists_url": "https://api.github.com/users/rsichny/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsichny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsichny/subscriptions", "organizations_url": "https://api.github.com/users/rsichny/orgs", "repos_url": "https://api.github.com/users/rsichny/repos", "events_url": "https://api.github.com/users/rsichny/events{/privacy}", "received_events_url": "https://api.github.com/users/rsichny/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2018-01-11T11:58:35Z", "updated_at": "2018-01-27T07:47:31Z", "closed_at": "2018-01-27T07:47:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "1. create clean django2.0 project\r\n2. `pip install django-celery-beat`\r\n3. add django_celery_beat to installed_apps\r\n4. run `python manage.py migrate`\r\n\r\n**Actual result:**\r\nthe warning appears:\r\n```\r\n  Your models have changes that are not yet reflected in a migration, and so won't be applied.\r\n  Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.\r\n```\r\n\r\n**Expected:**\r\nno warnings\r\n\r\nThe reason is missing migration in pypi release", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/113", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/113/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/113/events", "html_url": "https://github.com/celery/django-celery-beat/issues/113", "id": 286320645, "node_id": "MDU6SXNzdWUyODYzMjA2NDU=", "number": 113, "title": "Migration Loop: A new migration is generated everytime I launch \"migrate\" command", "user": {"login": "DEKHTIARJonathan", "id": 10923599, "node_id": "MDQ6VXNlcjEwOTIzNTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/10923599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DEKHTIARJonathan", "html_url": "https://github.com/DEKHTIARJonathan", "followers_url": "https://api.github.com/users/DEKHTIARJonathan/followers", "following_url": "https://api.github.com/users/DEKHTIARJonathan/following{/other_user}", "gists_url": "https://api.github.com/users/DEKHTIARJonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/DEKHTIARJonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DEKHTIARJonathan/subscriptions", "organizations_url": "https://api.github.com/users/DEKHTIARJonathan/orgs", "repos_url": "https://api.github.com/users/DEKHTIARJonathan/repos", "events_url": "https://api.github.com/users/DEKHTIARJonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/DEKHTIARJonathan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-01-05T15:31:41Z", "updated_at": "2020-08-14T05:42:05Z", "closed_at": "2018-01-09T13:10:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello dear friends,\r\n\r\nEverytimes I launch a migration of my application, django_celery_beat create an automatic migration: \r\n\r\n```\r\nMigrations for 'django_celery_beat':\r\n  ./venv/lib/site-packages/django_celery_beat/migrations/0008_auto_20180105_1622.py\r\n    - Alter field event on solarschedule\r\nRunning migrations:\r\n  Applying django_celery_beat.0008_auto_20180105_1622... OK\r\n```\r\n\r\nHere are a few examples:\r\n\r\n**0005_auto_20180105_1619.py**\r\n\r\n```python\r\noperations = [\r\n    migrations.AlterField(\r\n        model_name='solarschedule',\r\n        name='event',\r\n        field=models.CharField(choices=[('dawn_astronomical', 'dawn_astronomical'), ('dusk_civil', 'dusk_civil'), ('sunrise', 'sunrise'), ('dawn_civil', 'dawn_civil'), ('dusk_nautical', 'dusk_nautical'), ('solar_noon', 'solar_noon'), ('sunset', 'sunset'), ('dawn_nautical', 'dawn_nautical'), ('dusk_astronomical', 'dusk_astronomical')], max_length=24, verbose_name='event'),\r\n    ),\r\n]\r\n```\r\n\r\n**0006_auto_20180105_1622.py.py**\r\n\r\n```python\r\noperations = [\r\n    migrations.AlterField(\r\n        model_name='solarschedule',\r\n        name='event',\r\n        field=models.CharField(choices=[('dawn_civil', 'dawn_civil'), ('dusk_nautical', 'dusk_nautical'), ('solar_noon', 'solar_noon'), ('dawn_astronomical', 'dawn_astronomical'), ('sunset', 'sunset'), ('dusk_astronomical', 'dusk_astronomical'), ('dusk_civil', 'dusk_civil'), ('dawn_nautical', 'dawn_nautical'), ('sunrise', 'sunrise')], max_length=24, verbose_name='event'),\r\n    ),\r\n]\r\n\r\n```\r\n\r\n**0007_auto_20180105_1622.py**\r\n\r\n```python\r\noperations = [\r\n    migrations.AlterField(\r\n        model_name='solarschedule',\r\n        name='event',\r\n        field=models.CharField(choices=[('dusk_nautical', 'dusk_nautical'), ('solar_noon', 'solar_noon'), ('dusk_civil', 'dusk_civil'), ('dawn_astronomical', 'dawn_astronomical'), ('dawn_nautical', 'dawn_nautical'), ('dawn_civil', 'dawn_civil'), ('dusk_astronomical', 'dusk_astronomical'), ('sunset', 'sunset'), ('sunrise', 'sunrise')], max_length=24, verbose_name='event'),\r\n    ),\r\n]\r\n```\r\n\r\n**0008_auto_20180105_1622.py.py**\r\n\r\n```python\r\noperations = [\r\n    migrations.AlterField(\r\n        model_name='solarschedule',\r\n        name='event',\r\n        field=models.CharField(choices=[('dusk_astronomical', 'dusk_astronomical'), ('dusk_civil', 'dusk_civil'), ('dawn_nautical', 'dawn_nautical'), ('solar_noon', 'solar_noon'), ('dawn_astronomical', 'dawn_astronomical'), ('dusk_nautical', 'dusk_nautical'), ('sunrise', 'sunrise'), ('sunset', 'sunset'), ('dawn_civil', 'dawn_civil')], max_length=24, verbose_name='event'),\r\n    ),\r\n]\r\n```\r\n\r\nThe problem is quite easy to understand, the choices comes in a random order, which lead to a new migration each time (very likely).\r\n\r\nThanks for the help and the fix, I don't have time for a PR now.\r\n\r\nAll the best,\r\n\r\nJonathan D.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/111", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/111/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/111/events", "html_url": "https://github.com/celery/django-celery-beat/issues/111", "id": 285650981, "node_id": "MDU6SXNzdWUyODU2NTA5ODE=", "number": 111, "title": "Are crontab schedules with multiple minutes/hours/dow/wom/moy supported?", "user": {"login": "realjackofall", "id": 13963223, "node_id": "MDQ6VXNlcjEzOTYzMjIz", "avatar_url": "https://avatars3.githubusercontent.com/u/13963223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/realjackofall", "html_url": "https://github.com/realjackofall", "followers_url": "https://api.github.com/users/realjackofall/followers", "following_url": "https://api.github.com/users/realjackofall/following{/other_user}", "gists_url": "https://api.github.com/users/realjackofall/gists{/gist_id}", "starred_url": "https://api.github.com/users/realjackofall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/realjackofall/subscriptions", "organizations_url": "https://api.github.com/users/realjackofall/orgs", "repos_url": "https://api.github.com/users/realjackofall/repos", "events_url": "https://api.github.com/users/realjackofall/events{/privacy}", "received_events_url": "https://api.github.com/users/realjackofall/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-03T10:41:57Z", "updated_at": "2019-01-11T07:56:52Z", "closed_at": "2018-12-11T10:36:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "django-celery used to allow periodic tasks with crontab schedule of format \"5,10,15 1,2 * * *\".\r\nThis doesn't seem to work in django-celery-beat. Is this not supported or does it not work?\r\n\r\nMore details in this SO thread - https://stackoverflow.com/questions/47468605/does-django-celery-beat-support-crontab-schedules-with-multiple-minutes-hours", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/108", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/108/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/108/events", "html_url": "https://github.com/celery/django-celery-beat/issues/108", "id": 283464382, "node_id": "MDU6SXNzdWUyODM0NjQzODI=", "number": 108, "title": "Task running every minute.", "user": {"login": "sp1rs", "id": 2691397, "node_id": "MDQ6VXNlcjI2OTEzOTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/2691397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sp1rs", "html_url": "https://github.com/sp1rs", "followers_url": "https://api.github.com/users/sp1rs/followers", "following_url": "https://api.github.com/users/sp1rs/following{/other_user}", "gists_url": "https://api.github.com/users/sp1rs/gists{/gist_id}", "starred_url": "https://api.github.com/users/sp1rs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sp1rs/subscriptions", "organizations_url": "https://api.github.com/users/sp1rs/orgs", "repos_url": "https://api.github.com/users/sp1rs/repos", "events_url": "https://api.github.com/users/sp1rs/events{/privacy}", "received_events_url": "https://api.github.com/users/sp1rs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-20T06:45:25Z", "updated_at": "2019-05-02T12:27:19Z", "closed_at": "2018-12-11T16:03:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n@periodic_task(run_every=crontab(hour=\"*/2\"))\r\ndef pass_x_to_y():\r\n      # Some code.\r\n      return\r\n\r\n# Cdoe is running every minute. Any reason why?\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/105", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/105/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/105/events", "html_url": "https://github.com/celery/django-celery-beat/issues/105", "id": 281821265, "node_id": "MDU6SXNzdWUyODE4MjEyNjU=", "number": 105, "title": "Impossible to install version 1.1.0 on windows", "user": {"login": "DEKHTIARJonathan", "id": 10923599, "node_id": "MDQ6VXNlcjEwOTIzNTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/10923599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DEKHTIARJonathan", "html_url": "https://github.com/DEKHTIARJonathan", "followers_url": "https://api.github.com/users/DEKHTIARJonathan/followers", "following_url": "https://api.github.com/users/DEKHTIARJonathan/following{/other_user}", "gists_url": "https://api.github.com/users/DEKHTIARJonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/DEKHTIARJonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DEKHTIARJonathan/subscriptions", "organizations_url": "https://api.github.com/users/DEKHTIARJonathan/orgs", "repos_url": "https://api.github.com/users/DEKHTIARJonathan/repos", "events_url": "https://api.github.com/users/DEKHTIARJonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/DEKHTIARJonathan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-13T16:53:29Z", "updated_at": "2018-12-11T10:18:27Z", "closed_at": "2018-12-11T10:18:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI tried to update the package version on one of my projects, and it fails installing during a dependency update: \r\n\r\n```\r\nCollecting ephem>=3.7.6.0 (from django-celery-beat)\r\n\r\nc:\\programdata\\anaconda3\\include\\pyconfig.h(59): fatal error C1083: Cannot open include file: 'io.h': No such file or directory\r\n  error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\BIN\\\\x86_amd64\\\\cl.exe' failed with exit status 2\r\n\r\n    ----------------------------------------\r\nCommand \"c:\\gitpro~1\\feedcr~1.io\\venv\\scripts\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\Jonathan\\\\AppData\\\\Local\\\\Temp\\\\pip-build-prp7qwm_\\\\ephem\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);cod\r\ne=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\Jonathan\\AppData\\Local\\Temp\\pip-n3nk2gi7-record\\install-record.txt --single-version-externally-managed --compile --instal\r\nl-headers c:\\gitpro~1\\feedcr~1.io\\venv\\include\\site\\python3.6\\ephem\" failed with error code 1 in C:\\Users\\Jonathan\\AppData\\Local\\Temp\\pip-build-prp7qwm_\\ephem\\\r\n```\r\n\r\nI guess this is connected to 818a37fdbfb143484b17f9370f5ad43d5aa0611\r\n\r\nIs it possible to bump the version and release a small fix on PyPI ? This would allow me to update the package version ;)\r\n\r\nThanks a lot,\r\n\r\nJonathan", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/104", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/104/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/104/events", "html_url": "https://github.com/celery/django-celery-beat/issues/104", "id": 281137690, "node_id": "MDU6SXNzdWUyODExMzc2OTA=", "number": 104, "title": "Expires param", "user": {"login": "volodchenkov", "id": 143041, "node_id": "MDQ6VXNlcjE0MzA0MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/143041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/volodchenkov", "html_url": "https://github.com/volodchenkov", "followers_url": "https://api.github.com/users/volodchenkov/followers", "following_url": "https://api.github.com/users/volodchenkov/following{/other_user}", "gists_url": "https://api.github.com/users/volodchenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/volodchenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/volodchenkov/subscriptions", "organizations_url": "https://api.github.com/users/volodchenkov/orgs", "repos_url": "https://api.github.com/users/volodchenkov/repos", "events_url": "https://api.github.com/users/volodchenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/volodchenkov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-12-11T19:24:49Z", "updated_at": "2018-12-11T10:19:49Z", "closed_at": "2018-12-11T10:19:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "How can I pass expires param (in seconds) to PeriodicTask from django admin?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/101", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/101/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/101/events", "html_url": "https://github.com/celery/django-celery-beat/issues/101", "id": 278865760, "node_id": "MDU6SXNzdWUyNzg4NjU3NjA=", "number": 101, "title": "Lost connection to MySQL breaks Celery", "user": {"login": "cepreu2github", "id": 4133611, "node_id": "MDQ6VXNlcjQxMzM2MTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/4133611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cepreu2github", "html_url": "https://github.com/cepreu2github", "followers_url": "https://api.github.com/users/cepreu2github/followers", "following_url": "https://api.github.com/users/cepreu2github/following{/other_user}", "gists_url": "https://api.github.com/users/cepreu2github/gists{/gist_id}", "starred_url": "https://api.github.com/users/cepreu2github/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cepreu2github/subscriptions", "organizations_url": "https://api.github.com/users/cepreu2github/orgs", "repos_url": "https://api.github.com/users/cepreu2github/repos", "events_url": "https://api.github.com/users/cepreu2github/events{/privacy}", "received_events_url": "https://api.github.com/users/cepreu2github/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-04T04:14:41Z", "updated_at": "2018-03-23T05:09:19Z", "closed_at": "2018-03-23T05:09:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is stacktrace, which we got at one of our servers:\r\n```\r\n[2017-12-03 00:00:20,621: ERROR/ForkPoolWorker-6] Task polemarch.main.tasks.tasks.ScheduledTask[c13325d1-4191-4d70-bc27-a8a312e241a7] raised unexpected: OperationalError(2013, 'Lost connection to MySQL server during query')\r\nTraceback (most recent call last):\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/celery/app/trace.py\", line 374, in trace_task\r\n    R = retval = fun(*args, **kwargs)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/celery/app/trace.py\", line 629, in __protected_call__\r\n    return self.run(*args, **kwargs)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/polemarch/main/utils.py\", line 583, in wrapper\r\n    return task_cls(*args, **kwargs).start()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/polemarch/main/utils.py\", line 607, in start\r\n    return self.run()\r\n  File \"polemarch/main/tasks/tasks.py\", line 50, in polemarch.main.tasks.tasks.ScheduledTask.run\r\n  File \"polemarch/main/models/tasks.py\", line 137, in polemarch.main.models.tasks.PeriodicTask.execute\r\n  File \"polemarch/main/models/projects.py\", line 140, in polemarch.main.models.projects.Project.execute\r\n  File \"polemarch/main/models/projects.py\", line 122, in polemarch.main.models.projects.Project._send_hook\r\n  File \"polemarch/main/models/projects.py\", line 57, in polemarch.main.models.projects.Project.get_hook_data\r\n  File \"polemarch/main/models/projects.py\", line 72, in polemarch.main.models.projects.Project.type\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/models/manager.py\", line 85, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/models/query.py\", line 374, in get\r\n    num = len(clone)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/models/query.py\", line 232, in __len__\r\n    self._fetch_all()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/models/query.py\", line 1118, in _fetch_all\r\n    self._result_cache = list(self._iterable_class(self))\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/models/query.py\", line 53, in __iter__\r\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 894, in execute_sql\r\n    raise original_exception\r\nOperationalError: (2013, 'Lost connection to MySQL server during query')\r\nTraceback (most recent call last):\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/billiard/process.py\", line 327, in _bootstrap\r\n    self.run()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/celery/beat.py\", line 634, in run\r\n    self.service.start(embedded_process=True)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/celery/beat.py\", line 568, in start\r\n    self.sync()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/celery/beat.py\", line 571, in sync\r\n    self.scheduler.close()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/polemarch/main/celery_beat_scheduler.py\", line 24, in close\r\n    self).close()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/celery/beat.py\", line 352, in close\r\n    self.sync()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django_celery_beat/schedulers.py\", line 233, in sync\r\n    with transaction.atomic():\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/transaction.py\", line 184, in __enter__\r\n    connection.set_autocommit(False, force_begin_transaction_with_broken_autocommit=True)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/backends/base/base.py\", line 411, in set_autocommit\r\n    self._set_autocommit(autocommit)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/backends/mysql/base.py\", line 307, in _set_autocommit\r\n    self.connection.autocommit(autocommit)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/utils.py\", line 94, in __exit__\r\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/django/db/backends/mysql/base.py\", line 307, in _set_autocommit\r\n    self.connection.autocommit(autocommit)\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/pymysql/connections.py\", line 760, in autocommit\r\n    self._send_autocommit_mode()\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/pymysql/connections.py\", line 777, in _send_autocommit_mode\r\n    self.escape(self.autocommit_mode))\r\n  File \"//opt/polemarch/lib/python2.7/site-packages/pymysql/connections.py\", line 1071, in _execute_command\r\n    raise err.InterfaceError(\"(0, '')\")\r\nInterfaceError: (0, '')\r\n```\r\nFirst exception - it is reaction of our worker at MySQL connection problems. Second is our Beat stacktrace. As you can see `pymysql` raises InterfaceError at begin of transaction. But in in `sync()` (`django_celery_beat/schedulers.py`, line 233) we have such code:\r\n```\r\n        except DatabaseError as exc:\r\n            # retry later\r\n            self._dirty |= _tried\r\n            logger.exception('Database error while sync: %r', exc)\r\n```\r\nRetry only at DatabaseError! Other exceptions types raises futher and ruin Beat. It can't execute tasks until manual restart. According https://docs.djangoproject.com/en/1.11/ref/exceptions/#database-exceptions InterfaceError is also one of known exceptions during DB work. And, unfortunately for our server, it is not child of DatabaseError in contrast to other exceptions. So I suggest to add it at except clause too.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/100", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/100/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/100/events", "html_url": "https://github.com/celery/django-celery-beat/issues/100", "id": 276969249, "node_id": "MDU6SXNzdWUyNzY5NjkyNDk=", "number": 100, "title": "New migration of SolarSchedule is always made when run `makemigrations`", "user": {"login": "MidTin", "id": 5621317, "node_id": "MDQ6VXNlcjU2MjEzMTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5621317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MidTin", "html_url": "https://github.com/MidTin", "followers_url": "https://api.github.com/users/MidTin/followers", "following_url": "https://api.github.com/users/MidTin/following{/other_user}", "gists_url": "https://api.github.com/users/MidTin/gists{/gist_id}", "starred_url": "https://api.github.com/users/MidTin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MidTin/subscriptions", "organizations_url": "https://api.github.com/users/MidTin/orgs", "repos_url": "https://api.github.com/users/MidTin/repos", "events_url": "https://api.github.com/users/MidTin/events{/privacy}", "received_events_url": "https://api.github.com/users/MidTin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-11-27T10:31:41Z", "updated_at": "2018-01-18T06:03:34Z", "closed_at": "2017-12-05T10:05:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems the choices of SolarSchedule.event make this happen.\r\n\r\nhttps://github.com/celery/django-celery-beat/blob/master/django_celery_beat/models.py#L43", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/97", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/97/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/97/events", "html_url": "https://github.com/celery/django-celery-beat/issues/97", "id": 273663269, "node_id": "MDU6SXNzdWUyNzM2NjMyNjk=", "number": 97, "title": "master tests failing", "user": {"login": "brianmay", "id": 112729, "node_id": "MDQ6VXNlcjExMjcyOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/112729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianmay", "html_url": "https://github.com/brianmay", "followers_url": "https://api.github.com/users/brianmay/followers", "following_url": "https://api.github.com/users/brianmay/following{/other_user}", "gists_url": "https://api.github.com/users/brianmay/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianmay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianmay/subscriptions", "organizations_url": "https://api.github.com/users/brianmay/orgs", "repos_url": "https://api.github.com/users/brianmay/repos", "events_url": "https://api.github.com/users/brianmay/events{/privacy}", "received_events_url": "https://api.github.com/users/brianmay/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-14T04:21:48Z", "updated_at": "2018-01-22T06:55:11Z", "closed_at": "2018-01-22T06:55:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please ensure tests pass on master branch.\r\n\r\nAs is tests are failing on pull requests, and I suspect this is because the master branch is broken, not because the pull requests themselves are broken.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/96", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/96/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/96/events", "html_url": "https://github.com/celery/django-celery-beat/issues/96", "id": 271920916, "node_id": "MDU6SXNzdWUyNzE5MjA5MTY=", "number": 96, "title": "Scheduled intervals are scheduled for time minus 1 minute", "user": {"login": "remcinerney", "id": 16635325, "node_id": "MDQ6VXNlcjE2NjM1MzI1", "avatar_url": "https://avatars0.githubusercontent.com/u/16635325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/remcinerney", "html_url": "https://github.com/remcinerney", "followers_url": "https://api.github.com/users/remcinerney/followers", "following_url": "https://api.github.com/users/remcinerney/following{/other_user}", "gists_url": "https://api.github.com/users/remcinerney/gists{/gist_id}", "starred_url": "https://api.github.com/users/remcinerney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/remcinerney/subscriptions", "organizations_url": "https://api.github.com/users/remcinerney/orgs", "repos_url": "https://api.github.com/users/remcinerney/repos", "events_url": "https://api.github.com/users/remcinerney/events{/privacy}", "received_events_url": "https://api.github.com/users/remcinerney/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-11-07T17:38:37Z", "updated_at": "2018-12-11T10:20:33Z", "closed_at": "2018-12-11T10:20:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that all scheduled intervals are set to execute at a scheduled time of 1 minute less than specified...\r\n\r\nFor e.g., \r\nInterval time: 2 mins - executed every 1 minute\r\nInterval time: 65 seconds - executed every 5 seconds\r\nInterval time: 60seconds or less - executed continuously....\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/93", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/93/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/93/events", "html_url": "https://github.com/celery/django-celery-beat/issues/93", "id": 270589827, "node_id": "MDU6SXNzdWUyNzA1ODk4Mjc=", "number": 93, "title": "test_models.test_SolarSchedule_schedule is failing", "user": {"login": "craiga", "id": 76330, "node_id": "MDQ6VXNlcjc2MzMw", "avatar_url": "https://avatars3.githubusercontent.com/u/76330?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craiga", "html_url": "https://github.com/craiga", "followers_url": "https://api.github.com/users/craiga/followers", "following_url": "https://api.github.com/users/craiga/following{/other_user}", "gists_url": "https://api.github.com/users/craiga/gists{/gist_id}", "starred_url": "https://api.github.com/users/craiga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craiga/subscriptions", "organizations_url": "https://api.github.com/users/craiga/orgs", "repos_url": "https://api.github.com/users/craiga/repos", "events_url": "https://api.github.com/users/craiga/events{/privacy}", "received_events_url": "https://api.github.com/users/craiga/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-02T09:45:00Z", "updated_at": "2018-12-11T10:20:55Z", "closed_at": "2018-12-11T10:20:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following test is failing on `assert isdue is False`. I've been trying to fix this, but I can't quite wrap my head around how this test is supposed to work.\r\n\r\n```python\r\n    def test_SolarSchedule_schedule(self):\r\n        s = SolarSchedule(event='solar_noon', latitude=48.06, longitude=12.86)\r\n        dt = datetime(day=25, month=7, year=2017, hour=12, minute=0)\r\n        dt_lastrun = make_aware(dt)\r\n\r\n        assert s.schedule is not None\r\n\r\n        isdue, nextcheck = s.schedule.is_due(dt_lastrun)\r\n        assert isdue is False  # False means scheduler needs to keep checking.\r\n        assert (nextcheck > 0) and (isdue is False) or \\\r\n            (nextcheck == s.max_interval) and (isdue is True)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/91", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/91/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/91/events", "html_url": "https://github.com/celery/django-celery-beat/issues/91", "id": 270364538, "node_id": "MDU6SXNzdWUyNzAzNjQ1Mzg=", "number": 91, "title": "Endless migrations creation", "user": {"login": "wardal", "id": 15804042, "node_id": "MDQ6VXNlcjE1ODA0MDQy", "avatar_url": "https://avatars1.githubusercontent.com/u/15804042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wardal", "html_url": "https://github.com/wardal", "followers_url": "https://api.github.com/users/wardal/followers", "following_url": "https://api.github.com/users/wardal/following{/other_user}", "gists_url": "https://api.github.com/users/wardal/gists{/gist_id}", "starred_url": "https://api.github.com/users/wardal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wardal/subscriptions", "organizations_url": "https://api.github.com/users/wardal/orgs", "repos_url": "https://api.github.com/users/wardal/repos", "events_url": "https://api.github.com/users/wardal/events{/privacy}", "received_events_url": "https://api.github.com/users/wardal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-11-01T16:20:33Z", "updated_at": "2018-01-18T10:30:49Z", "closed_at": "2018-01-18T10:30:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Each time when execute `python manage.py makemigrations` it will create new migration:\r\n\r\n```\r\n(qb_celery) python manage.py makemigrations\r\nMigrations for 'django_celery_beat':\r\n  /home/user/.virtualenvs/qb_celery/lib/python3.5/site-packages/django_celery_beat/migrations/0015_auto_20171101_1607.py\r\n    - Alter field event on solarschedule\r\n(qb_celery) python manage.py makemigrations\r\nMigrations for 'django_celery_beat':\r\n  /home/user/.virtualenvs/qb_celery/lib/python3.5/site-packages/django_celery_beat/migrations/0016_auto_20171101_1607.py\r\n    - Alter field event on solarschedule\r\n(qb_celery) python manage.py makemigrations\r\nMigrations for 'django_celery_beat':\r\n  /home/user/.virtualenvs/qb_celery/lib/python3.5/site-packages/django_celery_beat/migrations/0017_auto_20171101_1607.py\r\n    - Alter field event on solarschedule\r\n```\r\nThe reason for that:\r\n\r\n`SOLAR_SCHEDULES = [(x, _(x)) for x in schedules.solar._all_events]`\r\n\r\nall_events:\r\n```\r\n_all_events = {\r\n        'dawn_astronomical',\r\n        'dawn_nautical',\r\n        'dawn_civil',\r\n        'sunrise',\r\n        'solar_noon',\r\n        'sunset',\r\n        'dusk_civil',\r\n        'dusk_nautical',\r\n        'dusk_astronomical',\r\n    }\r\n```\r\nso each time, when we import `from celery import schedules` it gives for SOLAR_SCHEDULES dict with different order.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/celery/django-celery-beat/issues/90", "repository_url": "https://api.github.com/repos/celery/django-celery-beat", "labels_url": "https://api.github.com/repos/celery/django-celery-beat/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/celery/django-celery-beat/issues/90/comments", "events_url": "https://api.github.com/repos/celery/django-celery-beat/issues/90/events", "html_url": "https://github.com/celery/django-celery-beat/issues/90", "id": 269990124, "node_id": "MDU6SXNzdWUyNjk5OTAxMjQ=", "number": 90, "title": "Migration file missing", "user": {"login": "srikanth-chandaluri", "id": 26059420, "node_id": "MDQ6VXNlcjI2MDU5NDIw", "avatar_url": "https://avatars0.githubusercontent.com/u/26059420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srikanth-chandaluri", "html_url": "https://github.com/srikanth-chandaluri", "followers_url": "https://api.github.com/users/srikanth-chandaluri/followers", "following_url": "https://api.github.com/users/srikanth-chandaluri/following{/other_user}", "gists_url": "https://api.github.com/users/srikanth-chandaluri/gists{/gist_id}", "starred_url": "https://api.github.com/users/srikanth-chandaluri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srikanth-chandaluri/subscriptions", "organizations_url": "https://api.github.com/users/srikanth-chandaluri/orgs", "repos_url": "https://api.github.com/users/srikanth-chandaluri/repos", "events_url": "https://api.github.com/users/srikanth-chandaluri/events{/privacy}", "received_events_url": "https://api.github.com/users/srikanth-chandaluri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-31T14:55:50Z", "updated_at": "2018-02-18T14:53:21Z", "closed_at": "2018-02-18T14:53:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi ,\r\nPlease create solarschedule table migration file. ", "performed_via_github_app": null, "score": 1.0}]}