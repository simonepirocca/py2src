{"total_count": 1127, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1528", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1528/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1528/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1528/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1528", "id": 681187015, "node_id": "MDU6SXNzdWU2ODExODcwMTU=", "number": 1528, "title": "How do I get unread conversations?", "user": {"login": "GamiDPC", "id": 17031085, "node_id": "MDQ6VXNlcjE3MDMxMDg1", "avatar_url": "https://avatars2.githubusercontent.com/u/17031085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GamiDPC", "html_url": "https://github.com/GamiDPC", "followers_url": "https://api.github.com/users/GamiDPC/followers", "following_url": "https://api.github.com/users/GamiDPC/following{/other_user}", "gists_url": "https://api.github.com/users/GamiDPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/GamiDPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GamiDPC/subscriptions", "organizations_url": "https://api.github.com/users/GamiDPC/orgs", "repos_url": "https://api.github.com/users/GamiDPC/repos", "events_url": "https://api.github.com/users/GamiDPC/events{/privacy}", "received_events_url": "https://api.github.com/users/GamiDPC/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-18T16:47:38Z", "updated_at": "2020-08-18T19:56:30Z", "closed_at": "2020-08-18T19:56:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Didn't find the function how to get unread dialogs?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1527", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1527/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1527/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1527/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1527", "id": 681068108, "node_id": "MDU6SXNzdWU2ODEwNjgxMDg=", "number": 1527, "title": "The @client.on(events.NewMessage(chats='XXXXX') Event does not trigger after few messages, if we minimize of maximize the cmd prompy , it process the message.", "user": {"login": "Ikram24817", "id": 42579318, "node_id": "MDQ6VXNlcjQyNTc5MzE4", "avatar_url": "https://avatars1.githubusercontent.com/u/42579318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ikram24817", "html_url": "https://github.com/Ikram24817", "followers_url": "https://api.github.com/users/Ikram24817/followers", "following_url": "https://api.github.com/users/Ikram24817/following{/other_user}", "gists_url": "https://api.github.com/users/Ikram24817/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ikram24817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ikram24817/subscriptions", "organizations_url": "https://api.github.com/users/Ikram24817/orgs", "repos_url": "https://api.github.com/users/Ikram24817/repos", "events_url": "https://api.github.com/users/Ikram24817/events{/privacy}", "received_events_url": "https://api.github.com/users/Ikram24817/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-18T14:02:10Z", "updated_at": "2020-08-18T19:58:05Z", "closed_at": "2020-08-18T19:58:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "The @client.on(events.NewMessage(chats='XXXXX') Event does not trigger after few messages, if we minimize OR maximize the cmd prompt , where the .py file is running , then it processes the message.\r\n\r\nI need the event to run when a new message is delivered in the telegram channel, it is fine but intermittently doesnt work, if we if we minimize OR maximize the cmd prompt , where the .py file is running , then it processes the message\r\n\r\nPlease help.\r\n\r\n\r\nThe Code is \r\n`api_id = 444444\r\napi_hash = '2qwcsads434454512112bdsasadsad333e'\r\n\r\n# use full phone number including + and country code\r\nphone = '+919933333333'\r\nusername = '@XXXXXXXXXX'\r\n\r\n\r\nclient = TelegramClient(username, api_id, api_hash)\r\n\r\n# assert client.connect()\r\nprint(\"Client Created\")\r\n\r\n\r\n\r\n@client.on(events.NewMessage(chats='XXXXX'))\r\n\r\nasync def myfunc(event):\r\n    print('{}'.format(event))\r\n    print('The Message is --------->')\r\n    print('\\n')\r\n\r\n    print('{}'.format(event.raw_text))\r\n    print('\\n')\r\n    print('{}'.format(event.message.message))\r\n    print('{}'.format(event.message.date))\r\n    if 'hello' in event.raw_text:\r\n        event.reply('hi!')\r\n\r\nclient.start()\r\nclient.run_until_disconnected()`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1525", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1525/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1525/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1525/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1525", "id": 680177574, "node_id": "MDU6SXNzdWU2ODAxNzc1NzQ=", "number": 1525, "title": "This is not a bug. but if you want to click a button you can use this simple code (i searched it for 1 hour and i find it)", "user": {"login": "furkan6116", "id": 49105226, "node_id": "MDQ6VXNlcjQ5MTA1MjI2", "avatar_url": "https://avatars2.githubusercontent.com/u/49105226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/furkan6116", "html_url": "https://github.com/furkan6116", "followers_url": "https://api.github.com/users/furkan6116/followers", "following_url": "https://api.github.com/users/furkan6116/following{/other_user}", "gists_url": "https://api.github.com/users/furkan6116/gists{/gist_id}", "starred_url": "https://api.github.com/users/furkan6116/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/furkan6116/subscriptions", "organizations_url": "https://api.github.com/users/furkan6116/orgs", "repos_url": "https://api.github.com/users/furkan6116/repos", "events_url": "https://api.github.com/users/furkan6116/events{/privacy}", "received_events_url": "https://api.github.com/users/furkan6116/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-17T11:55:37Z", "updated_at": "2020-08-17T12:02:09Z", "closed_at": "2020-08-17T12:02:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "sender = await event.get_sender()\r\nmessages = await client.get_messages(sender.username)\r\nawait messages[0].click(0)\r\n\r\nThis will click the first button in the message. You could also click(row, column), using some text such as click(text='\ud83d\udc4d') or even the data directly click(data=b'payload').\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1524", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1524/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1524/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1524/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1524", "id": 679790312, "node_id": "MDU6SXNzdWU2Nzk3OTAzMTI=", "number": 1524, "title": "Upload videos larger than 300MB", "user": {"login": "prodrigues1912", "id": 20822981, "node_id": "MDQ6VXNlcjIwODIyOTgx", "avatar_url": "https://avatars2.githubusercontent.com/u/20822981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prodrigues1912", "html_url": "https://github.com/prodrigues1912", "followers_url": "https://api.github.com/users/prodrigues1912/followers", "following_url": "https://api.github.com/users/prodrigues1912/following{/other_user}", "gists_url": "https://api.github.com/users/prodrigues1912/gists{/gist_id}", "starred_url": "https://api.github.com/users/prodrigues1912/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prodrigues1912/subscriptions", "organizations_url": "https://api.github.com/users/prodrigues1912/orgs", "repos_url": "https://api.github.com/users/prodrigues1912/repos", "events_url": "https://api.github.com/users/prodrigues1912/events{/privacy}", "received_events_url": "https://api.github.com/users/prodrigues1912/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-16T17:13:06Z", "updated_at": "2020-08-16T19:26:27Z", "closed_at": "2020-08-16T19:26:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I cannot upload videos larger than 300MB as videos, with streaming support. Please, how do I solve this?\r\n\r\nCode:\r\n\r\n```\r\nimport os\r\n\r\nfrom telethon import TelegramClient, sync\r\nfrom telethon.tl.types import DocumentAttributeVideo\r\n\r\nimport settings as stg\r\n\r\n\r\nclient = TelegramClient(\"test_session\", stg.api_id, stg.api_hash)\r\nclient.start()\r\n\r\nfor root, _, files in os.walk(stg.path):\r\n    file_dictionary = {int(sub.split(\".\")[0]): sub for sub in files}\r\n    for key, value in sorted(file_dictionary.items()):\r\n\r\n        print(os.path.join(root, value))\r\n        # file = client.upload_file(os.path.join(root, value),file_name=value)\r\n        client.send_file(\r\n            stg.telegram_group,\r\n            file=os.path.join(root, value),\r\n            caption=value[:-4],\r\n            attributes=(DocumentAttributeVideo(0, 0, 0)),\r\n            supports_streaming=True,\r\n        )\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1523", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1523/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1523/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1523/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1523", "id": 679498681, "node_id": "MDU6SXNzdWU2Nzk0OTg2ODE=", "number": 1523, "title": "Want to increase telegram channel post views", "user": {"login": "pulkit5667", "id": 63954083, "node_id": "MDQ6VXNlcjYzOTU0MDgz", "avatar_url": "https://avatars3.githubusercontent.com/u/63954083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pulkit5667", "html_url": "https://github.com/pulkit5667", "followers_url": "https://api.github.com/users/pulkit5667/followers", "following_url": "https://api.github.com/users/pulkit5667/following{/other_user}", "gists_url": "https://api.github.com/users/pulkit5667/gists{/gist_id}", "starred_url": "https://api.github.com/users/pulkit5667/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pulkit5667/subscriptions", "organizations_url": "https://api.github.com/users/pulkit5667/orgs", "repos_url": "https://api.github.com/users/pulkit5667/repos", "events_url": "https://api.github.com/users/pulkit5667/events{/privacy}", "received_events_url": "https://api.github.com/users/pulkit5667/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-15T04:37:58Z", "updated_at": "2020-08-15T08:36:57Z", "closed_at": "2020-08-15T08:36:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to increase my telegram channel post views but I don't know how to write python. Because I am a beginner and I am learning some coding. Can anyone please help me to write post views increase script. Or can anyone give me the already coded script so I can learn and increase views on my channel post.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1522", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1522/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1522/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1522/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1522", "id": 678879972, "node_id": "MDU6SXNzdWU2Nzg4Nzk5NzI=", "number": 1522, "title": "client.get_dialogs SORT by TITLE name", "user": {"login": "psychosys", "id": 58204209, "node_id": "MDQ6VXNlcjU4MjA0MjA5", "avatar_url": "https://avatars2.githubusercontent.com/u/58204209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psychosys", "html_url": "https://github.com/psychosys", "followers_url": "https://api.github.com/users/psychosys/followers", "following_url": "https://api.github.com/users/psychosys/following{/other_user}", "gists_url": "https://api.github.com/users/psychosys/gists{/gist_id}", "starred_url": "https://api.github.com/users/psychosys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psychosys/subscriptions", "organizations_url": "https://api.github.com/users/psychosys/orgs", "repos_url": "https://api.github.com/users/psychosys/repos", "events_url": "https://api.github.com/users/psychosys/events{/privacy}", "received_events_url": "https://api.github.com/users/psychosys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-14T04:05:05Z", "updated_at": "2020-08-14T09:54:51Z", "closed_at": "2020-08-14T09:54:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "it is very helpful if you add an option to sort the get_dialogs results by **TITLE** name", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1519", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1519/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1519/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1519/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1519", "id": 677133348, "node_id": "MDU6SXNzdWU2NzcxMzMzNDg=", "number": 1519, "title": "Iter Profile Photos returns address of a tiny picture", "user": {"login": "psychosys", "id": 58204209, "node_id": "MDQ6VXNlcjU4MjA0MjA5", "avatar_url": "https://avatars2.githubusercontent.com/u/58204209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psychosys", "html_url": "https://github.com/psychosys", "followers_url": "https://api.github.com/users/psychosys/followers", "following_url": "https://api.github.com/users/psychosys/following{/other_user}", "gists_url": "https://api.github.com/users/psychosys/gists{/gist_id}", "starred_url": "https://api.github.com/users/psychosys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psychosys/subscriptions", "organizations_url": "https://api.github.com/users/psychosys/orgs", "repos_url": "https://api.github.com/users/psychosys/repos", "events_url": "https://api.github.com/users/psychosys/events{/privacy}", "received_events_url": "https://api.github.com/users/psychosys/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-11T19:20:34Z", "updated_at": "2020-08-11T21:15:20Z", "closed_at": "2020-08-11T21:15:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\niter_profile_photos returns a very tiny photo to be downloaded with download_media, is there anyway to choose the PhotoSize type?\r\n\r\nI can see that there are three types of photo, type 'c' has resolution of 640x640! this is the one I want to grab!\r\n\r\nfor example\r\n for photo in client.iter_profile_photos(peerid, limit=None):\r\n  client.download_media(photo, imgstorepath)\r\n\r\ndownloads profile pictures with resolution of **40x40** \r\n**thumb = -1** doesn't work either with download_media\r\n\r\n===\r\n\r\ndownload_profile_photo works great with download_big = true, but it downloads only a single file\r\n\r\nThanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1516", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1516/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1516/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1516/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1516", "id": 674721629, "node_id": "MDU6SXNzdWU2NzQ3MjE2Mjk=", "number": 1516, "title": "Don't resend media poll and throw exception", "user": {"login": "CiFFiRO", "id": 40390020, "node_id": "MDQ6VXNlcjQwMzkwMDIw", "avatar_url": "https://avatars0.githubusercontent.com/u/40390020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CiFFiRO", "html_url": "https://github.com/CiFFiRO", "followers_url": "https://api.github.com/users/CiFFiRO/followers", "following_url": "https://api.github.com/users/CiFFiRO/following{/other_user}", "gists_url": "https://api.github.com/users/CiFFiRO/gists{/gist_id}", "starred_url": "https://api.github.com/users/CiFFiRO/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CiFFiRO/subscriptions", "organizations_url": "https://api.github.com/users/CiFFiRO/orgs", "repos_url": "https://api.github.com/users/CiFFiRO/repos", "events_url": "https://api.github.com/users/CiFFiRO/events{/privacy}", "received_events_url": "https://api.github.com/users/CiFFiRO/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-07T03:02:59Z", "updated_at": "2020-08-07T14:04:12Z", "closed_at": "2020-08-07T14:04:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\nIf bot (or user) get new message with poll, bot doesn't resend message and get throw exception TypeError.\r\nOther messages with photo, documents, audio, video or without media resend to target user ok.\r\nResend message with media web page get similar error.\r\n\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient\r\nfrom telethon import events\r\nimport sys\r\n\r\nbot = TelegramClient(...) // connection is ok\r\nsecret_id = // target user id\r\n\r\n@bot.on(events.NewMessage(incoming=True))\r\nasync def handler(event):\r\n    try:\r\n        await bot.send_message(secret_id, message=event.message.text, file=event.message.media)\r\n    except:\r\n        print(sys.exc_info()[0])\r\n\r\nbot.loop.run_forever()\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n<class 'TypeError'>\r\n// ... //\r\n  File \"D:\\workspace\\post_filter_telegram\\venv\\lib\\site-packages\\telethon\\client\\uploads.py\", line 377, in send_file\r\n    raise TypeError('Cannot use {!r} as file'.format(file))\r\nTypeError: Cannot use <telethon.tl.types.MessageMediaPoll object at *> as file\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1515", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1515/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1515/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1515/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1515", "id": 674601508, "node_id": "MDU6SXNzdWU2NzQ2MDE1MDg=", "number": 1515, "title": "MessageMediaDocument not return file_id ( like bots )", "user": {"login": "A2DNEW", "id": 27811691, "node_id": "MDQ6VXNlcjI3ODExNjkx", "avatar_url": "https://avatars3.githubusercontent.com/u/27811691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/A2DNEW", "html_url": "https://github.com/A2DNEW", "followers_url": "https://api.github.com/users/A2DNEW/followers", "following_url": "https://api.github.com/users/A2DNEW/following{/other_user}", "gists_url": "https://api.github.com/users/A2DNEW/gists{/gist_id}", "starred_url": "https://api.github.com/users/A2DNEW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/A2DNEW/subscriptions", "organizations_url": "https://api.github.com/users/A2DNEW/orgs", "repos_url": "https://api.github.com/users/A2DNEW/repos", "events_url": "https://api.github.com/users/A2DNEW/events{/privacy}", "received_events_url": "https://api.github.com/users/A2DNEW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-06T21:06:33Z", "updated_at": "2020-08-07T10:35:50Z", "closed_at": "2020-08-06T22:26:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI use this code\r\n\r\n`msg = await client.get_messages('me', limit=1, offset_id=0)`\r\n\r\nBut print(msg) not show to me file_id like bots:\r\n\r\n`BQACAgQAAxkBAAK9_F8sa5j8iJQ845yxMdgYieRXRQwpAALrBwACzo2RU...`\r\n\r\nHow I can get file_id for medias?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1514", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1514/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1514/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1514/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1514", "id": 673988183, "node_id": "MDU6SXNzdWU2NzM5ODgxODM=", "number": 1514, "title": "I want to add members to a public group but it gives runtime error [ InviteToChannelRequest ]", "user": {"login": "mramitdas", "id": 51442266, "node_id": "MDQ6VXNlcjUxNDQyMjY2", "avatar_url": "https://avatars3.githubusercontent.com/u/51442266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mramitdas", "html_url": "https://github.com/mramitdas", "followers_url": "https://api.github.com/users/mramitdas/followers", "following_url": "https://api.github.com/users/mramitdas/following{/other_user}", "gists_url": "https://api.github.com/users/mramitdas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mramitdas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mramitdas/subscriptions", "organizations_url": "https://api.github.com/users/mramitdas/orgs", "repos_url": "https://api.github.com/users/mramitdas/repos", "events_url": "https://api.github.com/users/mramitdas/events{/privacy}", "received_events_url": "https://api.github.com/users/mramitdas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-06T03:34:50Z", "updated_at": "2020-08-06T08:22:32Z", "closed_at": "2020-08-06T08:22:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Error :-\r\ntelethon.errors.rpcerrorlist.UserIdInvalidError: Invalid object ID for a user. Make sure to pass the right types, for instance making sure that the request is designed for users or otherwise look for a different one more suited (caused by InviteToChannelRequest)\r\n\r\ncode :-\r\n\r\nchannel_username = input(\"Enter Group/Channel Username: \")\r\nuser_to_add = InputPeerUser(user['id'], user['access_hash'])\r\nclient(InviteToChannelRequest(channel_username, [user_to_add]))\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1512", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1512/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1512/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1512/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1512", "id": 673376387, "node_id": "MDU6SXNzdWU2NzMzNzYzODc=", "number": 1512, "title": "Pass custom arguments to progress callbacks", "user": {"login": "yash-dk", "id": 24204379, "node_id": "MDQ6VXNlcjI0MjA0Mzc5", "avatar_url": "https://avatars2.githubusercontent.com/u/24204379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yash-dk", "html_url": "https://github.com/yash-dk", "followers_url": "https://api.github.com/users/yash-dk/followers", "following_url": "https://api.github.com/users/yash-dk/following{/other_user}", "gists_url": "https://api.github.com/users/yash-dk/gists{/gist_id}", "starred_url": "https://api.github.com/users/yash-dk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yash-dk/subscriptions", "organizations_url": "https://api.github.com/users/yash-dk/orgs", "repos_url": "https://api.github.com/users/yash-dk/repos", "events_url": "https://api.github.com/users/yash-dk/events{/privacy}", "received_events_url": "https://api.github.com/users/yash-dk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T08:59:22Z", "updated_at": "2020-08-05T09:43:16Z", "closed_at": "2020-08-05T09:43:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Make provision to pass optional custom progress callback arguments along with progress callbacks in Downloads and Uploads.\r\nLike\r\n`await message.download_media(progress_callback=callback,prog_args=(args))`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1511", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1511/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1511/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1511/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1511", "id": 673334140, "node_id": "MDU6SXNzdWU2NzMzMzQxNDA=", "number": 1511, "title": "Send Message fails for specific text", "user": {"login": "Ak4zh", "id": 26350053, "node_id": "MDQ6VXNlcjI2MzUwMDUz", "avatar_url": "https://avatars3.githubusercontent.com/u/26350053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ak4zh", "html_url": "https://github.com/Ak4zh", "followers_url": "https://api.github.com/users/Ak4zh/followers", "following_url": "https://api.github.com/users/Ak4zh/following{/other_user}", "gists_url": "https://api.github.com/users/Ak4zh/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ak4zh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ak4zh/subscriptions", "organizations_url": "https://api.github.com/users/Ak4zh/orgs", "repos_url": "https://api.github.com/users/Ak4zh/repos", "events_url": "https://api.github.com/users/Ak4zh/events{/privacy}", "received_events_url": "https://api.github.com/users/Ak4zh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T07:52:09Z", "updated_at": "2020-08-05T09:58:36Z", "closed_at": "2020-08-05T09:58:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n\r\nIf client parse mode is set as html AND message has `&` character followed by anything but not space, the message will fail.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\n\r\nclient = TelegramClient('session', API_ID, API_HASH)\r\nclient.parse_mode = 'html'\r\nclient.send_message(912931015, \"Telegram &\")\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:/Users/ak/PycharmProjects/bug/test.py\", line 10, in <module>\r\n    client.send_message(912931015, \"Telegram &\")\r\n  File \"C:\\Users\\ak\\PycharmProjects\\bug\\venv\\lib\\site-packages\\telethon\\sync.py\", line 39, in syncified\r\n    return loop.run_until_complete(coro)\r\n  File \"C:\\Users\\ak\\AppData\\Local\\Programs\\Python\\Python37\\lib\\asyncio\\base_events.py\", line 587, in run_until_complete\r\n    return future.result()\r\n  File \"C:\\Users\\ak\\PycharmProjects\\bug\\venv\\lib\\site-packages\\telethon\\client\\messages.py\", line 737, in send_message\r\n    'The message cannot be empty unless a file is provided'\r\nValueError: The message cannot be empty unless a file is provided\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1510", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1510/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1510/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1510/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1510", "id": 672700029, "node_id": "MDU6SXNzdWU2NzI3MDAwMjk=", "number": 1510, "title": "Error in forwarding a message from channel", "user": {"login": "Kirmada7", "id": 64690540, "node_id": "MDQ6VXNlcjY0NjkwNTQw", "avatar_url": "https://avatars3.githubusercontent.com/u/64690540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kirmada7", "html_url": "https://github.com/Kirmada7", "followers_url": "https://api.github.com/users/Kirmada7/followers", "following_url": "https://api.github.com/users/Kirmada7/following{/other_user}", "gists_url": "https://api.github.com/users/Kirmada7/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kirmada7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kirmada7/subscriptions", "organizations_url": "https://api.github.com/users/Kirmada7/orgs", "repos_url": "https://api.github.com/users/Kirmada7/repos", "events_url": "https://api.github.com/users/Kirmada7/events{/privacy}", "received_events_url": "https://api.github.com/users/Kirmada7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-04T10:54:13Z", "updated_at": "2020-08-04T11:24:25Z", "closed_at": "2020-08-04T11:15:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [ No] The error is in the library's code, and not in my own.\r\n* [ yes] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ yes] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest versison.\r\n\r\n**Code that causes the issue**\r\n```user = []\r\n    user = await client.get_messages('link to channel', limit=1)\r\n    for u in user:\r\n        message = u.message\r\n        print(message)\r\n        e = await client.get_entity('myusername')\r\n        await client.forward_messages(e,\r\n                                      message,\r\n                                      silent=True\r\n                                      )\r\n...\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTypeError: Cannot forward messages of type <class 'str'>\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1508", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1508/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1508/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1508/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1508", "id": 671117293, "node_id": "MDU6SXNzdWU2NzExMTcyOTM=", "number": 1508, "title": "get_participants() not returning real user amount", "user": {"login": "alereyesx", "id": 63877846, "node_id": "MDQ6VXNlcjYzODc3ODQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/63877846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alereyesx", "html_url": "https://github.com/alereyesx", "followers_url": "https://api.github.com/users/alereyesx/followers", "following_url": "https://api.github.com/users/alereyesx/following{/other_user}", "gists_url": "https://api.github.com/users/alereyesx/gists{/gist_id}", "starred_url": "https://api.github.com/users/alereyesx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alereyesx/subscriptions", "organizations_url": "https://api.github.com/users/alereyesx/orgs", "repos_url": "https://api.github.com/users/alereyesx/repos", "events_url": "https://api.github.com/users/alereyesx/events{/privacy}", "received_events_url": "https://api.github.com/users/alereyesx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-01T19:09:12Z", "updated_at": "2020-08-01T20:35:22Z", "closed_at": "2020-08-01T19:51:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "get_participants() method does not seem to be able to fetch all users from a channel, yet it does it correctly when used on a group.\r\n\r\n\r\nchannel_users = await client.get_participants(entity=channel, aggressive=True)\r\n\r\nThat piece of code returns the correct amount of users when entity is a group, but it misses hundreds of users when user on a channel bigger than 1000 users.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1507", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1507/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1507/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1507/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1507", "id": 670428089, "node_id": "MDU6SXNzdWU2NzA0MjgwODk=", "number": 1507, "title": "telethon 1.16.0's force_file cause some TG's features to break", "user": {"login": "a-fruity-melon", "id": 52106595, "node_id": "MDQ6VXNlcjUyMTA2NTk1", "avatar_url": "https://avatars3.githubusercontent.com/u/52106595?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-fruity-melon", "html_url": "https://github.com/a-fruity-melon", "followers_url": "https://api.github.com/users/a-fruity-melon/followers", "following_url": "https://api.github.com/users/a-fruity-melon/following{/other_user}", "gists_url": "https://api.github.com/users/a-fruity-melon/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-fruity-melon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-fruity-melon/subscriptions", "organizations_url": "https://api.github.com/users/a-fruity-melon/orgs", "repos_url": "https://api.github.com/users/a-fruity-melon/repos", "events_url": "https://api.github.com/users/a-fruity-melon/events{/privacy}", "received_events_url": "https://api.github.com/users/a-fruity-melon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-08-01T02:03:20Z", "updated_at": "2020-08-11T06:44:55Z", "closed_at": "2020-08-10T14:19:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n\r\nI'm a maintainer of a downstream library named [`Pagermaid-Modify`](https://github.com/xtaodada/PagerMaid-Modify). The library provides a command `-sticker`, which allows users to save any static image as a sticker inside his/her own sticker pack.\r\n\r\nThis feature works fine for `telethon==1.15.0`, but fails on `telethon==1.16.0`. After a painful investigation, the library's maintainers finally found that `telethon==1.16.0`'s ~~**stream upload feature**~~ `force_file`'s behavior change will result in strange behaviors of Telegram's server, including but not limited to:\r\n\r\n- Failure on getting the image's dimension, which directly breaks the whole sticker image's upload process;\r\n- Failure on generating a thumbnail (I guess?) for the image, which results in a black screen if users click on the uploaded image. (Reproducible on some Android devices, and on macOS.)\r\n\r\nThere's no difference between the binary codes of images uploaded by these two versions of `telethon`, nor between file sizes and names.\r\n\r\n![image](https://user-images.githubusercontent.com/52106595/89091204-51fba900-d3da-11ea-9f85-256f5378ad70.png)\r\n\r\n[video here](https://t.me/s/share_tmp_file)\r\n\r\nCurrently, we're fixing this by locking `telethon`'s version:\r\n\r\nhttps://github.com/xtaodada/PagerMaid-Modify/blob/6c005af10433f7c028cc127f17d67c64af61a64b/requirements.txt#L19\r\n\r\nBut this is not a long-term solution, and we're looking forward to having this fixed from upstream.\r\n\r\nAny plan for fixing this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1506", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1506/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1506/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1506/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1506", "id": 668617831, "node_id": "MDU6SXNzdWU2Njg2MTc4MzE=", "number": 1506, "title": "All account are banned", "user": {"login": "JepsonHerts", "id": 53977233, "node_id": "MDQ6VXNlcjUzOTc3MjMz", "avatar_url": "https://avatars0.githubusercontent.com/u/53977233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JepsonHerts", "html_url": "https://github.com/JepsonHerts", "followers_url": "https://api.github.com/users/JepsonHerts/followers", "following_url": "https://api.github.com/users/JepsonHerts/following{/other_user}", "gists_url": "https://api.github.com/users/JepsonHerts/gists{/gist_id}", "starred_url": "https://api.github.com/users/JepsonHerts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JepsonHerts/subscriptions", "organizations_url": "https://api.github.com/users/JepsonHerts/orgs", "repos_url": "https://api.github.com/users/JepsonHerts/repos", "events_url": "https://api.github.com/users/JepsonHerts/events{/privacy}", "received_events_url": "https://api.github.com/users/JepsonHerts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-30T11:11:26Z", "updated_at": "2020-07-30T12:09:46Z", "closed_at": "2020-07-30T12:09:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, it has never happened to me before, but since last night every time I log in with Telethon both old and new numbers, they are banned. How is it possible?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1504", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1504/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1504/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1504/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1504", "id": 666806284, "node_id": "MDU6SXNzdWU2NjY4MDYyODQ=", "number": 1504, "title": "API authentication not working when requesting server is in a different country", "user": {"login": "spencescu", "id": 10536370, "node_id": "MDQ6VXNlcjEwNTM2Mzcw", "avatar_url": "https://avatars0.githubusercontent.com/u/10536370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spencescu", "html_url": "https://github.com/spencescu", "followers_url": "https://api.github.com/users/spencescu/followers", "following_url": "https://api.github.com/users/spencescu/following{/other_user}", "gists_url": "https://api.github.com/users/spencescu/gists{/gist_id}", "starred_url": "https://api.github.com/users/spencescu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spencescu/subscriptions", "organizations_url": "https://api.github.com/users/spencescu/orgs", "repos_url": "https://api.github.com/users/spencescu/repos", "events_url": "https://api.github.com/users/spencescu/events{/privacy}", "received_events_url": "https://api.github.com/users/spencescu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 41, "created_at": "2020-07-28T06:31:16Z", "updated_at": "2020-07-31T17:22:42Z", "closed_at": "2020-07-28T09:46:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am working on an API application and the code works fine when running on my local machine (in Greece). However, when I install the code on a customer AWS instance (in the US) I never get the login codes. I used my US phone number to sign up for another telegram account and that worked.\r\nOn the other hand, I am able to log in to telegram web with the Greek number from the US server, so it seems the web app does not have country restrictions, but the API does. Can you please point me to any docs related to this, unless this is a bug?\r\n\r\n**Checklist**\r\n* [ ] The error is in the library's code, and not in my own.\r\n* [ x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\n...\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"code.py\", line 1, in <code>\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1502", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1502/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1502/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1502/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1502", "id": 665151860, "node_id": "MDU6SXNzdWU2NjUxNTE4NjA=", "number": 1502, "title": "Would it be possible to change photo of private group through Peer?", "user": {"login": "tedescolor", "id": 25659660, "node_id": "MDQ6VXNlcjI1NjU5NjYw", "avatar_url": "https://avatars1.githubusercontent.com/u/25659660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tedescolor", "html_url": "https://github.com/tedescolor", "followers_url": "https://api.github.com/users/tedescolor/followers", "following_url": "https://api.github.com/users/tedescolor/following{/other_user}", "gists_url": "https://api.github.com/users/tedescolor/gists{/gist_id}", "starred_url": "https://api.github.com/users/tedescolor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tedescolor/subscriptions", "organizations_url": "https://api.github.com/users/tedescolor/orgs", "repos_url": "https://api.github.com/users/tedescolor/repos", "events_url": "https://api.github.com/users/tedescolor/events{/privacy}", "received_events_url": "https://api.github.com/users/tedescolor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-24T12:59:25Z", "updated_at": "2020-07-24T13:06:23Z", "closed_at": "2020-07-24T13:06:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "CODE\r\ntry: \r\n    result = client(EditPhotoRequest(channel=-414981409, photo=input_chat_uploaded_photo)) \r\nexcept BaseException as e: \r\n    print(e) \r\n\r\nRESULT:                                                                                                                                                                                                                              \r\nCannot cast InputPeerChat to any kind of InputChannel\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1501", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1501/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1501/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1501/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1501", "id": 660055626, "node_id": "MDU6SXNzdWU2NjAwNTU2MjY=", "number": 1501, "title": "Getting information automatically", "user": {"login": "Mohammad01Reza", "id": 65535952, "node_id": "MDQ6VXNlcjY1NTM1OTUy", "avatar_url": "https://avatars3.githubusercontent.com/u/65535952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mohammad01Reza", "html_url": "https://github.com/Mohammad01Reza", "followers_url": "https://api.github.com/users/Mohammad01Reza/followers", "following_url": "https://api.github.com/users/Mohammad01Reza/following{/other_user}", "gists_url": "https://api.github.com/users/Mohammad01Reza/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mohammad01Reza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mohammad01Reza/subscriptions", "organizations_url": "https://api.github.com/users/Mohammad01Reza/orgs", "repos_url": "https://api.github.com/users/Mohammad01Reza/repos", "events_url": "https://api.github.com/users/Mohammad01Reza/events{/privacy}", "received_events_url": "https://api.github.com/users/Mohammad01Reza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-18T10:12:11Z", "updated_at": "2020-07-18T18:32:02Z", "closed_at": "2020-07-18T18:32:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have searched for this issue before posting it and there isn't a duplicate.\r\n\r\n Hi , I wasn\u2019t sure if this is right place to ask this , also I\u2019m new in here so I\u2019m sorry if it isn\u2019t , this could be a new feature or plugin that I think it is very useful , whole telethon is based on being and doing stuff automatically , so why shouldn\u2019t login part?\r\nduring the project that I\u2019m currently working with it , it is essential to edit and personalize telethon\u2019s source itself for getting login information such as phone , code and 2steps password from a database that I created before , I want to do login stuff automatically without typing phone and code and password in console , so it is need to edit source itself , so I figured login codes that lonami wrote in source , is related to auth.py , I wrote this lines in auth.py and I confronted with an error that shouldn\u2019t be , this is my code that I wrote :  (this code just gets the login code from database)\r\nclass Mydatabase():\r\n\t\r\n\tdef __init__(self):\r\n\t\t\r\n\t\tself.mydb=mysql.connector.connect(\r\n\t\thost=\"localhost\"\r\n\t\t, user=\"myslef\",\r\n\t\tpassword=\"H59SAG45gff4bzcnMftr67Eqy\",\r\n\t\tdatabase=\"Telegram\"\r\n\t\t)\r\n\t\tself.cursor=self.mydb.cursor()\r\n\t\r\n\t\r\n\tdef check_user(self,phone):\r\n\t\tself.phone=phone\r\n\t\tsql=\"SELECT Code FROM Main_database WHERE User_id=%s\"\r\n\t\tvalue=(self.phone)\r\n\t\tself.cursor.execute(sql,value)\r\n\t\tresult=self.cursor.fetchall\r\n\t\tif(result):\r\n\t\t\tcode=result[0]\r\n\t\t\treturn code\r\n\t\t\r\n\r\nclass AuthMethods(Mydatabase):\r\n\t\r\n\tdef __init__(self):\r\n\t\tMydatabase.__init__(self)\r\n\r\n    # region Public methods\r\n\r\nAnd this is the error :\r\n  \r\n![ccba6303-eca1-4b4e-ac91-27945cba2fe3](https://user-images.githubusercontent.com/65535952/87850185-84e66d00-c903-11ea-88da-56dc7b2e507c.jpg)\r\n\r\nSo I was wonder what cause this , I tried and I couldn\u2019t solve this so I will be very appreciate if you just give me a little guidance about this and what should I do for it.thank you  \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1500", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1500/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1500/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1500/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1500", "id": 658058473, "node_id": "MDU6SXNzdWU2NTgwNTg0NzM=", "number": 1500, "title": "Can't get entity (group) by id, get error - ValueError: Cannot find any entity corresponding to", "user": {"login": "glorsh66", "id": 30538582, "node_id": "MDQ6VXNlcjMwNTM4NTgy", "avatar_url": "https://avatars2.githubusercontent.com/u/30538582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glorsh66", "html_url": "https://github.com/glorsh66", "followers_url": "https://api.github.com/users/glorsh66/followers", "following_url": "https://api.github.com/users/glorsh66/following{/other_user}", "gists_url": "https://api.github.com/users/glorsh66/gists{/gist_id}", "starred_url": "https://api.github.com/users/glorsh66/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glorsh66/subscriptions", "organizations_url": "https://api.github.com/users/glorsh66/orgs", "repos_url": "https://api.github.com/users/glorsh66/repos", "events_url": "https://api.github.com/users/glorsh66/events{/privacy}", "received_events_url": "https://api.github.com/users/glorsh66/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-16T10:15:22Z", "updated_at": "2020-07-16T10:21:51Z", "closed_at": "2020-07-16T10:21:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to get a group or a chat, and constantly get the same error \"ValueError: Cannot find any entity corresponding to\"\r\nAnd I am sure that this is the valid ID, because I can easily send a message to this group.\r\nAt the same time I can easily get a group by its name.\r\n\r\n` await client.get_dialogs()\r\n        group_entity = await client.get_entity(group)\r\n        message = \"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435:\\n\"\r\n`\r\n`\r\n        dialogs = await client.get_dialogs(int(group))\r\n        my_chat = await client.get_entity(PeerChat(group))\r\n        my_channel = await client.get_entity(PeerChannel(group))\r\n` ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1498", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1498/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1498/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1498/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1498", "id": 651592265, "node_id": "MDU6SXNzdWU2NTE1OTIyNjU=", "number": 1498, "title": "update new telegram limit", "user": {"login": "muhammedfurkan", "id": 9547040, "node_id": "MDQ6VXNlcjk1NDcwNDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9547040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muhammedfurkan", "html_url": "https://github.com/muhammedfurkan", "followers_url": "https://api.github.com/users/muhammedfurkan/followers", "following_url": "https://api.github.com/users/muhammedfurkan/following{/other_user}", "gists_url": "https://api.github.com/users/muhammedfurkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/muhammedfurkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muhammedfurkan/subscriptions", "organizations_url": "https://api.github.com/users/muhammedfurkan/orgs", "repos_url": "https://api.github.com/users/muhammedfurkan/repos", "events_url": "https://api.github.com/users/muhammedfurkan/events{/privacy}", "received_events_url": "https://api.github.com/users/muhammedfurkan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-06T14:37:56Z", "updated_at": "2020-07-06T18:11:42Z", "closed_at": "2020-07-06T18:11:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/LonamiWebs/Telethon/blob/4393ec0b83d511b6a20d8a20334138730f084375/telethon/utils.py#L1238\r\n\r\naccording to telegram news channel\r\n\r\nhttps://t.me/tginfoen/884\r\n\r\n`if file_size <= 1572864000:` to `if file_size <= 2097152000:`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1497", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1497/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1497/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1497/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1497", "id": 650358787, "node_id": "MDU6SXNzdWU2NTAzNTg3ODc=", "number": 1497, "title": "how to use `setPrivacy`", "user": {"login": "masoudcom", "id": 29269213, "node_id": "MDQ6VXNlcjI5MjY5MjEz", "avatar_url": "https://avatars2.githubusercontent.com/u/29269213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masoudcom", "html_url": "https://github.com/masoudcom", "followers_url": "https://api.github.com/users/masoudcom/followers", "following_url": "https://api.github.com/users/masoudcom/following{/other_user}", "gists_url": "https://api.github.com/users/masoudcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/masoudcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masoudcom/subscriptions", "organizations_url": "https://api.github.com/users/masoudcom/orgs", "repos_url": "https://api.github.com/users/masoudcom/repos", "events_url": "https://api.github.com/users/masoudcom/events{/privacy}", "received_events_url": "https://api.github.com/users/masoudcom/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-03T05:46:51Z", "updated_at": "2020-07-03T08:13:45Z", "closed_at": "2020-07-03T08:13:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\nI wanna use set-privacy for hidden phone number.\r\nplease help me", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1496", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1496/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1496/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1496/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1496", "id": 647862837, "node_id": "MDU6SXNzdWU2NDc4NjI4Mzc=", "number": 1496, "title": "telethon.errors.rpcerrorlist.UserIdInvalidError #1239", "user": {"login": "bilalahmed-125", "id": 67621229, "node_id": "MDQ6VXNlcjY3NjIxMjI5", "avatar_url": "https://avatars3.githubusercontent.com/u/67621229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bilalahmed-125", "html_url": "https://github.com/bilalahmed-125", "followers_url": "https://api.github.com/users/bilalahmed-125/followers", "following_url": "https://api.github.com/users/bilalahmed-125/following{/other_user}", "gists_url": "https://api.github.com/users/bilalahmed-125/gists{/gist_id}", "starred_url": "https://api.github.com/users/bilalahmed-125/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bilalahmed-125/subscriptions", "organizations_url": "https://api.github.com/users/bilalahmed-125/orgs", "repos_url": "https://api.github.com/users/bilalahmed-125/repos", "events_url": "https://api.github.com/users/bilalahmed-125/events{/privacy}", "received_events_url": "https://api.github.com/users/bilalahmed-125/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-30T05:04:58Z", "updated_at": "2020-06-30T08:39:39Z", "closed_at": "2020-06-30T08:39:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [ ] The error is in the library's code, and not in my own.\r\n* [ ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\n...\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"code.py\", line 1, in <code>\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1495", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1495/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1495/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1495/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1495", "id": 645859957, "node_id": "MDU6SXNzdWU2NDU4NTk5NTc=", "number": 1495, "title": "Dialog.is_channel returns True for both Channels and Megagroups", "user": {"login": "fralcow", "id": 29120383, "node_id": "MDQ6VXNlcjI5MTIwMzgz", "avatar_url": "https://avatars2.githubusercontent.com/u/29120383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fralcow", "html_url": "https://github.com/fralcow", "followers_url": "https://api.github.com/users/fralcow/followers", "following_url": "https://api.github.com/users/fralcow/following{/other_user}", "gists_url": "https://api.github.com/users/fralcow/gists{/gist_id}", "starred_url": "https://api.github.com/users/fralcow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fralcow/subscriptions", "organizations_url": "https://api.github.com/users/fralcow/orgs", "repos_url": "https://api.github.com/users/fralcow/repos", "events_url": "https://api.github.com/users/fralcow/events{/privacy}", "received_events_url": "https://api.github.com/users/fralcow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-25T21:23:57Z", "updated_at": "2020-06-25T22:10:38Z", "closed_at": "2020-06-25T22:10:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\nI am trying to iterate through all dialogs and get a list of all channels. To do so I use the dialog.is_channel property. However, I have noticed that it returns True for both channels and megagroups. I also noticed that it is possible to get the desired results by also checking dialog.is_group property, which returns False for the channels.\r\n\r\nI am not sure if it is the intended behavior for the .is_channel or the problem with how telegram defines channels and megagroups, but I feel like it stems from the logic in [telethon/tl/custom/dialog.py](https://github.com/LonamiWebs/Telethon/blob/d68d70362b0bb2f99162d290c33ede6ab4c19db1/telethon/tl/custom/dialog.py#L93):\r\n\r\n```python\r\nself.is_group = (\r\n    isinstance(self.entity, (types.Chat, types.ChatForbidden)) or\r\n    (isinstance(self.entity, types.Channel) and self.entity.megagroup)\r\n)\r\nself.is_channel = isinstance(self.entity, types.Channel)\r\n```\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient\r\n\r\nclient.start()\r\ndialogs = client.iter_dialogs()\r\nchannels = []\r\n\r\n# name_1 is a group\r\n# name_2 is a megagroup\r\n# name_3 is a channel\r\nfor d in dialogs:\r\n    if d.name == 'name_1' or \\\r\n            d.name == 'name_2' or \\\r\n            d.name == 'name_3':\r\n        channels.append(d)\r\n\r\nbreakpoint()\r\n\r\n\r\n```\r\n\r\n**Traceback**\r\n```python\r\n(Pdb) [[x.name, x.is_channel, x.is_group] for x in channels]\r\n[['name_1', False, True],['name_2', True, True], ['name_3', True, False]]\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1492", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1492/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1492/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1492/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1492", "id": 644361442, "node_id": "MDU6SXNzdWU2NDQzNjE0NDI=", "number": 1492, "title": "MessageButton.click() on KeyboardButtonRequestPhone completely ignored", "user": {"login": "TrollStation", "id": 1363026, "node_id": "MDQ6VXNlcjEzNjMwMjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1363026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TrollStation", "html_url": "https://github.com/TrollStation", "followers_url": "https://api.github.com/users/TrollStation/followers", "following_url": "https://api.github.com/users/TrollStation/following{/other_user}", "gists_url": "https://api.github.com/users/TrollStation/gists{/gist_id}", "starred_url": "https://api.github.com/users/TrollStation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TrollStation/subscriptions", "organizations_url": "https://api.github.com/users/TrollStation/orgs", "repos_url": "https://api.github.com/users/TrollStation/repos", "events_url": "https://api.github.com/users/TrollStation/events{/privacy}", "received_events_url": "https://api.github.com/users/TrollStation/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-24T06:41:54Z", "updated_at": "2020-07-04T11:29:53Z", "closed_at": "2020-07-04T11:29:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nawait c.send_message(\"/reset\")\r\nr = await c.get_response()\r\nsleep(wait)\r\nawait r.click(0)  # <- Here i try click on KeyboardButtonRequestPhone\r\nr = await c.get_response()\r\nsleep(wait)\r\n```\r\n\r\n**Traceback**\r\n```\r\nno tracebacks\r\n```\r\nMy code is not matter. I had append working code to library on my machine and it works. I dont have enough time and dont realize how correctly make contributions to that awesome project.\r\n\r\nClick method in MessageButton class completely ignores KeyboardButtonRequestPhone. My simple code does bots behaviour testing, i tried emulate clicks on \"request_phone\" buttons, but nothing happened and conversation instance tears dows with the TimeoutError. Then i go to [telethon/tl/custom/messagebutton.py](https://github.com/LonamiWebs/Telethon/blob/master/telethon/tl/custom/messagebutton.py) and see if-elif block does not contain any checks for KeyboardButtonRequestPhone as instance.\r\n\r\nThen I just added at end of file\r\n```python\r\n        elif isinstance(self.button, types.KeyboardButtonRequestPhone):\r\n            user = await self._client.get_me()\r\n            input_media_contact = types.InputMediaContact(phone_number=user.phone,\r\n                                                          first_name=user.first_name,\r\n                                                          last_name=user.last_name,\r\n                                                          vcard='')\r\n            return await self._client.send_file(self._chat, file=input_media_contact)\r\n```\r\nand it works. On click() it shares contact, just like other clients. \r\nProbably same issue with KeyboardButtonRequestGeoLocation because that type is missing in if-elif block. I did not figure out how to get true geolocation (especially where there is no such possibility), but the essence is the same.\r\n\r\nSorry if this is so obvious, but I could not understand what was happening in half an hour. Hope this helps someone.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1491", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1491/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1491/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1491/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1491", "id": 644176849, "node_id": "MDU6SXNzdWU2NDQxNzY4NDk=", "number": 1491, "title": "AttributeError: 'TelegramClient' object has no attribute 'invoke'", "user": {"login": "nedlir", "id": 66902031, "node_id": "MDQ6VXNlcjY2OTAyMDMx", "avatar_url": "https://avatars2.githubusercontent.com/u/66902031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedlir", "html_url": "https://github.com/nedlir", "followers_url": "https://api.github.com/users/nedlir/followers", "following_url": "https://api.github.com/users/nedlir/following{/other_user}", "gists_url": "https://api.github.com/users/nedlir/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedlir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedlir/subscriptions", "organizations_url": "https://api.github.com/users/nedlir/orgs", "repos_url": "https://api.github.com/users/nedlir/repos", "events_url": "https://api.github.com/users/nedlir/events{/privacy}", "received_events_url": "https://api.github.com/users/nedlir/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-23T22:05:22Z", "updated_at": "2020-06-24T06:59:13Z", "closed_at": "2020-06-24T06:59:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**What I want to achieve**\r\nI want to add a contact to my telegram account by adding their number.\r\n\r\n**The code**\r\n```\r\nfrom telethon import TelegramClient\r\nfrom telethon.tl.types import InputPhoneContact\r\nfrom telethon.tl.functions.contacts import GetContactsRequest\r\nfrom telethon.tl.functions.contacts import ImportContactsRequest\r\n\r\nwith TelegramClient('Love', api_id, api_hash) as client:\r\n    client.connect()\r\n    contact = InputPhoneContact(client_id=0, \r\n                        phone=test_number, \r\n                        first_name=\"Friend\", \r\n                        last_name=\"_Name\")\r\n    contacts = client(GetContactsRequest(0))\r\n    result = client.invoke(ImportContactsRequest(contact))\r\n    client.send_message('me', 'Added contact succesfully!')\r\n```\r\n**The Error**\r\n**`AttributeError: 'TelegramClient' object has no attribute 'invoke' `**\r\n\r\nIt seems like adding users is not working for me. I'm using latest version of telethon (1.14) and latest version of Python (3.8.3).\r\n\r\nYour assistance is kindly appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1490", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1490/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1490/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1490/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1490", "id": 643603286, "node_id": "MDU6SXNzdWU2NDM2MDMyODY=", "number": 1490, "title": "Reply to message only from users", "user": {"login": "ibimo", "id": 56967494, "node_id": "MDQ6VXNlcjU2OTY3NDk0", "avatar_url": "https://avatars1.githubusercontent.com/u/56967494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibimo", "html_url": "https://github.com/ibimo", "followers_url": "https://api.github.com/users/ibimo/followers", "following_url": "https://api.github.com/users/ibimo/following{/other_user}", "gists_url": "https://api.github.com/users/ibimo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibimo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibimo/subscriptions", "organizations_url": "https://api.github.com/users/ibimo/orgs", "repos_url": "https://api.github.com/users/ibimo/repos", "events_url": "https://api.github.com/users/ibimo/events{/privacy}", "received_events_url": "https://api.github.com/users/ibimo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-23T07:32:10Z", "updated_at": "2020-06-23T07:56:59Z", "closed_at": "2020-06-23T07:56:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Im using this code and it work, the problem is:\r\nThe userbot respond/reply to messages from groups too, how i can avoid this?\r\n\r\n`from telethon import TelegramClient, events\r\n\r\nclient = TelegramClient('anon', api_id, api_hash)\r\n\r\n@client.on(events.NewMessage)\r\nasync def my_event_handler(event):\r\n    if 'hello' in event.raw_text:\r\n        await event.reply('hi!')\r\n\r\nclient.start()\r\nclient.run_until_disconnected()`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1489", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1489/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1489/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1489/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1489", "id": 643293274, "node_id": "MDU6SXNzdWU2NDMyOTMyNzQ=", "number": 1489, "title": "Account Banned", "user": {"login": "shmosta", "id": 16457621, "node_id": "MDQ6VXNlcjE2NDU3NjIx", "avatar_url": "https://avatars1.githubusercontent.com/u/16457621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shmosta", "html_url": "https://github.com/shmosta", "followers_url": "https://api.github.com/users/shmosta/followers", "following_url": "https://api.github.com/users/shmosta/following{/other_user}", "gists_url": "https://api.github.com/users/shmosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/shmosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shmosta/subscriptions", "organizations_url": "https://api.github.com/users/shmosta/orgs", "repos_url": "https://api.github.com/users/shmosta/repos", "events_url": "https://api.github.com/users/shmosta/events{/privacy}", "received_events_url": "https://api.github.com/users/shmosta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-22T18:57:26Z", "updated_at": "2020-06-22T21:59:57Z", "closed_at": "2020-06-22T21:59:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.  Awesome lib, very robust and has worked well for me up until a few weeks ago when I got my first account banned.  I didn't file a bug as the repro steps are pretty vague.  I created a new account this week and launched telethon_examples/print_updates.py.  Shortly after successful auth code validation and login, my account was banned :/ Anyone else facing this issue?  I registered my app as a desktop app using the Telegram API.  I should also note that the native Telegram app was running in the background while I launched my Telethon app if that's worth anything.  Any tips or suggestions on what we can do to avoid getting banned?  I'm in North America, connecting through a common residential ISP and don't spam or even use Telegram all that often.  Any help is greatly appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1488", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1488/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1488/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1488/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1488", "id": 642632868, "node_id": "MDU6SXNzdWU2NDI2MzI4Njg=", "number": 1488, "title": "AuthKeyDuplicatedError Eror problem ", "user": {"login": "aryatahlil", "id": 67241521, "node_id": "MDQ6VXNlcjY3MjQxNTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/67241521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aryatahlil", "html_url": "https://github.com/aryatahlil", "followers_url": "https://api.github.com/users/aryatahlil/followers", "following_url": "https://api.github.com/users/aryatahlil/following{/other_user}", "gists_url": "https://api.github.com/users/aryatahlil/gists{/gist_id}", "starred_url": "https://api.github.com/users/aryatahlil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aryatahlil/subscriptions", "organizations_url": "https://api.github.com/users/aryatahlil/orgs", "repos_url": "https://api.github.com/users/aryatahlil/repos", "events_url": "https://api.github.com/users/aryatahlil/events{/privacy}", "received_events_url": "https://api.github.com/users/aryatahlil/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-21T20:12:35Z", "updated_at": "2020-06-22T07:51:19Z", "closed_at": "2020-06-21T21:54:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi . first of all thank u so much for your amazing library \r\nim using your library with For Loop to join telegram Account to different channel . after finishing my work with which one of session i use Client.disconnect() but after few times I got this eror : \r\nAuthKeyDuplicatedError : The authorization key (session file) was used under two different IP addresses simultaneously, and can no longer be used. Use the same session exclusively, or use different sessions.\r\n\r\nI im from Iran and i have to use proxy and change my ip every 5minute in loop and i dont know how to manage my client to not get this eror . i have searched so much (as much as my knowledge help) but got nothing can help . i need u help me to findout how to manage it . i should use something else instead of disconnect?\r\nmy code is dirty and maybe u can not understand so i simplify it and write here \r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\n f = open('profiles.txt', \"r\")\r\n profiles = f.readlines()\r\n for index,phone_number in enumerate(profiles, start=1):\r\n        phone_number=phone_number.replace(\"\\n\",\"\")\r\n        client = TelegramClient(StringSession(phone_number), api_id, api_hash,proxy=(socks.SOCKS5,'127.0.0.1', 9150)) #using Tor proxy \r\n        client.connect()\r\n        #join to channel \r\n        client.disconnect()\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"code.py\", line 1, in <code>\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1487", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1487/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1487/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1487/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1487", "id": 642247541, "node_id": "MDU6SXNzdWU2NDIyNDc1NDE=", "number": 1487, "title": "how make  a specific event", "user": {"login": "alimrd318", "id": 42865702, "node_id": "MDQ6VXNlcjQyODY1NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/42865702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alimrd318", "html_url": "https://github.com/alimrd318", "followers_url": "https://api.github.com/users/alimrd318/followers", "following_url": "https://api.github.com/users/alimrd318/following{/other_user}", "gists_url": "https://api.github.com/users/alimrd318/gists{/gist_id}", "starred_url": "https://api.github.com/users/alimrd318/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alimrd318/subscriptions", "organizations_url": "https://api.github.com/users/alimrd318/orgs", "repos_url": "https://api.github.com/users/alimrd318/repos", "events_url": "https://api.github.com/users/alimrd318/events{/privacy}", "received_events_url": "https://api.github.com/users/alimrd318/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-19T22:33:20Z", "updated_at": "2020-06-20T06:55:21Z", "closed_at": "2020-06-20T06:55:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "hey, i want have an event run at a time for example 5:00 every day o r some thing like this \r\nand another question \r\n\r\n`@client.on(events.NewMessage(incoming=True)) `\r\n`async def my_event_handler(event):`\r\n    `    if event.is_private:`\r\n`print('something')`\r\n\r\n\r\nis it possible have is_private condition in this event with incoming=True ?\r\ni want private message incoming how can do this in an event?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1486", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1486/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1486/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1486/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1486", "id": 641842530, "node_id": "MDU6SXNzdWU2NDE4NDI1MzA=", "number": 1486, "title": "get all Deleted accounts in the chat with iter_participants !", "user": {"login": "alimoradi2020", "id": 63239531, "node_id": "MDQ6VXNlcjYzMjM5NTMx", "avatar_url": "https://avatars3.githubusercontent.com/u/63239531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alimoradi2020", "html_url": "https://github.com/alimoradi2020", "followers_url": "https://api.github.com/users/alimoradi2020/followers", "following_url": "https://api.github.com/users/alimoradi2020/following{/other_user}", "gists_url": "https://api.github.com/users/alimoradi2020/gists{/gist_id}", "starred_url": "https://api.github.com/users/alimoradi2020/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alimoradi2020/subscriptions", "organizations_url": "https://api.github.com/users/alimoradi2020/orgs", "repos_url": "https://api.github.com/users/alimoradi2020/repos", "events_url": "https://api.github.com/users/alimoradi2020/events{/privacy}", "received_events_url": "https://api.github.com/users/alimoradi2020/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-19T09:41:13Z", "updated_at": "2020-06-19T10:24:11Z", "closed_at": "2020-06-19T10:23:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please describe your idea. Would you like another friendly method? Renaming them to something more appropriated? Changing the way something works?\r\nHi, how can i get all Deleted accounts in the chat with iter_participants ??\r\ni use 'filter' for Bots with ChannelParticipantsBots\r\nand how about for deleted accounts !", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1485", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1485/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1485/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1485/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1485", "id": 639367312, "node_id": "MDU6SXNzdWU2MzkzNjczMTI=", "number": 1485, "title": "'TelegramClient' object has no attribute 'qr_login'", "user": {"login": "dumpload", "id": 17916980, "node_id": "MDQ6VXNlcjE3OTE2OTgw", "avatar_url": "https://avatars0.githubusercontent.com/u/17916980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dumpload", "html_url": "https://github.com/dumpload", "followers_url": "https://api.github.com/users/dumpload/followers", "following_url": "https://api.github.com/users/dumpload/following{/other_user}", "gists_url": "https://api.github.com/users/dumpload/gists{/gist_id}", "starred_url": "https://api.github.com/users/dumpload/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dumpload/subscriptions", "organizations_url": "https://api.github.com/users/dumpload/orgs", "repos_url": "https://api.github.com/users/dumpload/repos", "events_url": "https://api.github.com/users/dumpload/events{/privacy}", "received_events_url": "https://api.github.com/users/dumpload/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-16T04:49:51Z", "updated_at": "2020-06-16T06:28:53Z", "closed_at": "2020-06-16T06:28:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nIn [1]: from telethon import sync, TelegramClient\r\nIn [2]: from telethon.sessions import StringSession\r\nIn [3]: client = TelegramClient(StringSession(''),'123','123')\r\nIn [4]: client.qr_login()\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-4-eeffdef08427> in <module>\r\n----> 1 client.qr_login()\r\nAttributeError: 'TelegramClient' object has no attribute 'qr_login'\r\nIn [5]: import telethon\r\nIn [6]: telethon.__version__\r\nOut[6]: '1.14.0'\r\n```\r\nrelese pack error, may be. thank\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1483", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1483/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1483/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1483/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1483", "id": 637495930, "node_id": "MDU6SXNzdWU2Mzc0OTU5MzA=", "number": 1483, "title": "get owner of groups and supergroups", "user": {"login": "NaWeeDBHR", "id": 27665441, "node_id": "MDQ6VXNlcjI3NjY1NDQx", "avatar_url": "https://avatars0.githubusercontent.com/u/27665441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NaWeeDBHR", "html_url": "https://github.com/NaWeeDBHR", "followers_url": "https://api.github.com/users/NaWeeDBHR/followers", "following_url": "https://api.github.com/users/NaWeeDBHR/following{/other_user}", "gists_url": "https://api.github.com/users/NaWeeDBHR/gists{/gist_id}", "starred_url": "https://api.github.com/users/NaWeeDBHR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NaWeeDBHR/subscriptions", "organizations_url": "https://api.github.com/users/NaWeeDBHR/orgs", "repos_url": "https://api.github.com/users/NaWeeDBHR/repos", "events_url": "https://api.github.com/users/NaWeeDBHR/events{/privacy}", "received_events_url": "https://api.github.com/users/NaWeeDBHR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-12T05:32:31Z", "updated_at": "2020-06-12T06:09:55Z", "closed_at": "2020-06-12T06:09:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\nwe can get admins of groups and supergroups with this\r\n```\r\n# Filter by admins\r\nfrom telethon.tl.types import ChannelParticipantsAdmins\r\nasync for user in client.iter_participants(chat, filter=ChannelParticipantsAdmins):\r\n    print(user.first_name)\r\n```\r\nbut i need to get the owner and creator of supergroups and groups, not all admins!!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1482", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1482/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1482/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1482/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1482", "id": 633469348, "node_id": "MDU6SXNzdWU2MzM0NjkzNDg=", "number": 1482, "title": "min_date and max_date arguments are not working in SearchRequest function.", "user": {"login": "Morteza-Gh-Kh", "id": 59505816, "node_id": "MDQ6VXNlcjU5NTA1ODE2", "avatar_url": "https://avatars3.githubusercontent.com/u/59505816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Morteza-Gh-Kh", "html_url": "https://github.com/Morteza-Gh-Kh", "followers_url": "https://api.github.com/users/Morteza-Gh-Kh/followers", "following_url": "https://api.github.com/users/Morteza-Gh-Kh/following{/other_user}", "gists_url": "https://api.github.com/users/Morteza-Gh-Kh/gists{/gist_id}", "starred_url": "https://api.github.com/users/Morteza-Gh-Kh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Morteza-Gh-Kh/subscriptions", "organizations_url": "https://api.github.com/users/Morteza-Gh-Kh/orgs", "repos_url": "https://api.github.com/users/Morteza-Gh-Kh/repos", "events_url": "https://api.github.com/users/Morteza-Gh-Kh/events{/privacy}", "received_events_url": "https://api.github.com/users/Morteza-Gh-Kh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-07T14:38:33Z", "updated_at": "2020-06-07T14:48:53Z", "closed_at": "2020-06-07T14:48:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I ran following code to get messages between two dates (`min_date`, `max_date`) but results shows that they both have no effects on results.\r\n\r\n```\r\n        result = await client(SearchRequest(\r\n            peer=my_channel,\r\n            q='',\r\n            filter = InputMessagesFilterUrl(),\r\n            min_date=datetime.datetime(2017, 11, 13),\r\n            max_date=datetime.datetime(2019, 1, 9),\r\n            offset_id=0,\r\n            add_offset=0,\r\n            limit=100,\r\n            max_id=0,\r\n            min_id=0,\r\n            hash=0,\r\n            from_id=None\r\n        ))\r\n        for message in result.messages:  \r\n            print(message.date)\r\n```\r\n\r\nThis is only a part of results that shows function isn't working properly:\r\n\r\n```\r\n2019-05-31 22:20:40+00:00\r\n2019-03-01 08:13:49+00:00\r\n2019-01-09 13:24:14+00:00\r\n2018-10-28 09:11:24+00:00\r\n2017-11-13 19:46:12+00:00\r\n2017-10-23 09:46:34+00:00\r\n2017-10-23 09:46:34+00:00\r\n2017-10-23 09:45:53+00:00\r\n```\r\nAs you can see, there is dates before and after that period of time specified in arguments.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1480", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1480/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1480/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1480/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1480", "id": 632270104, "node_id": "MDU6SXNzdWU2MzIyNzAxMDQ=", "number": 1480, "title": "Feature to get new joiners and messages in a group by day or by date", "user": {"login": "srinivasdasu24", "id": 51058068, "node_id": "MDQ6VXNlcjUxMDU4MDY4", "avatar_url": "https://avatars2.githubusercontent.com/u/51058068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srinivasdasu24", "html_url": "https://github.com/srinivasdasu24", "followers_url": "https://api.github.com/users/srinivasdasu24/followers", "following_url": "https://api.github.com/users/srinivasdasu24/following{/other_user}", "gists_url": "https://api.github.com/users/srinivasdasu24/gists{/gist_id}", "starred_url": "https://api.github.com/users/srinivasdasu24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srinivasdasu24/subscriptions", "organizations_url": "https://api.github.com/users/srinivasdasu24/orgs", "repos_url": "https://api.github.com/users/srinivasdasu24/repos", "events_url": "https://api.github.com/users/srinivasdasu24/events{/privacy}", "received_events_url": "https://api.github.com/users/srinivasdasu24/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-06T07:22:55Z", "updated_at": "2020-06-06T08:01:08Z", "closed_at": "2020-06-06T08:01:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please describe your idea. Would you like another friendly method? Renaming them to something more appropriated? Changing the way something works?\r\nHi,\r\n\r\nIt will be good if we have a feature to get the list of new joiners in a day or by day wise and similarly for messages", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1479", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1479/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1479/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1479/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1479", "id": 631119425, "node_id": "MDU6SXNzdWU2MzExMTk0MjU=", "number": 1479, "title": "events.Album handles events separately", "user": {"login": "apepenkov", "id": 39992738, "node_id": "MDQ6VXNlcjM5OTkyNzM4", "avatar_url": "https://avatars0.githubusercontent.com/u/39992738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apepenkov", "html_url": "https://github.com/apepenkov", "followers_url": "https://api.github.com/users/apepenkov/followers", "following_url": "https://api.github.com/users/apepenkov/following{/other_user}", "gists_url": "https://api.github.com/users/apepenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/apepenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apepenkov/subscriptions", "organizations_url": "https://api.github.com/users/apepenkov/orgs", "repos_url": "https://api.github.com/users/apepenkov/repos", "events_url": "https://api.github.com/users/apepenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/apepenkov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-06-04T20:20:19Z", "updated_at": "2020-06-06T19:01:39Z", "closed_at": "2020-06-06T19:01:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Checklist**\r\n* [ + ] The error is in the library's code, and not in my own.\r\n* [ + ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ + ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient, events\r\nimport asyncio\r\n\r\nloop = asyncio.get_event_loop()\r\napi_id = ...\r\napi_hash = \"\"\r\nclient_1 = TelegramClient(\"client\", api_id, api_hash)\r\n\r\n@client_1.on(events.Album())\r\nasync def album_handler(event: events.Album.Event):\r\n    print(event.messages)\r\n\r\n\r\nasync def main():\r\n    await client_1.start()\r\n    print('Started')\r\n    await client_1.run_until_disconnected()\r\n\r\n\r\nloop.run_until_complete(main())\r\n\r\n\r\n```\r\nExpected: one event, event.messages -> list of telethon.tl.patched.Message\r\nGot: N events (for N images), every with one [telethon.tl.patched.Message]\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1478", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1478/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1478/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1478/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1478", "id": 630474717, "node_id": "MDU6SXNzdWU2MzA0NzQ3MTc=", "number": 1478, "title": "AssertionError: yield from wasn't used with future", "user": {"login": "sumous", "id": 1303581, "node_id": "MDQ6VXNlcjEzMDM1ODE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1303581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sumous", "html_url": "https://github.com/sumous", "followers_url": "https://api.github.com/users/sumous/followers", "following_url": "https://api.github.com/users/sumous/following{/other_user}", "gists_url": "https://api.github.com/users/sumous/gists{/gist_id}", "starred_url": "https://api.github.com/users/sumous/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sumous/subscriptions", "organizations_url": "https://api.github.com/users/sumous/orgs", "repos_url": "https://api.github.com/users/sumous/repos", "events_url": "https://api.github.com/users/sumous/events{/privacy}", "received_events_url": "https://api.github.com/users/sumous/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-04T03:06:07Z", "updated_at": "2020-06-06T11:54:55Z", "closed_at": "2020-06-06T11:54:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [ ] The error is in the library's code, and not in my own.\r\n* [ ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\nenvironment: python3.6\uff0c telethon 1.14.0\r\n[helpers.py#L123](https://github.com/LonamiWebs/Telethon/blob/v1.14.0/telethon/helpers.py#L123) has fixed this bug, But It just fixed in python 3.7 [futures.py#L265](https://github.com/python/cpython/blob/3.7/Lib/asyncio/futures.py#L265).\r\nIn python 3.6, It is [AssertionError](https://github.com/python/cpython/blob/3.6/Lib/asyncio/futures.py#L328)\r\n\r\n\r\n\r\n**Traceback**\r\n```\r\n[2020-06-04 10:09:15,701: WARNING/ForkPoolWorker-4] 2020-06-04 10:09:15,701 - telethon.network.connection.connection - ERROR - Unhandled exception from recv_task after cancelling <class '_asyncio.Task'> (<Task cancelling coro=<Connection._recv_loop() running at /var/www/project/env/lib/python3.6/site-packages/telethon/network/connection/connection.py:194>>)\r\nTraceback (most recent call last):\r\n  File \"/var/www/project/env/lib/python3.6/site-packages/telethon/helpers.py\", line 120, in _cancel\r\n    await task\r\nAssertionError: yield from wasn't used with future\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1477", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1477/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1477/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1477/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1477", "id": 629383299, "node_id": "MDU6SXNzdWU2MjkzODMyOTk=", "number": 1477, "title": "telethon.errors.rpcerrorlist.AuthKeyUnregisteredError: The key is not registered in the system ", "user": {"login": "Th0rgal", "id": 41830259, "node_id": "MDQ6VXNlcjQxODMwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/41830259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Th0rgal", "html_url": "https://github.com/Th0rgal", "followers_url": "https://api.github.com/users/Th0rgal/followers", "following_url": "https://api.github.com/users/Th0rgal/following{/other_user}", "gists_url": "https://api.github.com/users/Th0rgal/gists{/gist_id}", "starred_url": "https://api.github.com/users/Th0rgal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Th0rgal/subscriptions", "organizations_url": "https://api.github.com/users/Th0rgal/orgs", "repos_url": "https://api.github.com/users/Th0rgal/repos", "events_url": "https://api.github.com/users/Th0rgal/events{/privacy}", "received_events_url": "https://api.github.com/users/Th0rgal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-02T17:32:27Z", "updated_at": "2020-06-03T16:56:41Z", "closed_at": "2020-06-03T15:09:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient\r\n\r\nasync def create_bot(api_id, api_hash, bot_account, name, bot_token=None):\r\n    client = TelegramClient(name, api_id, api_hash)\r\n    return client.start(bot_token=bot_token) if bot_account else client\r\n\r\nasync def load_telegram_listeners(loop, config, reposters):\r\n    bot = await create_bot(\r\n        config.telegram_listener_api_id,\r\n        config.telegram_listener_api_hash,\r\n        config.telegram_listener_bot_account,\r\n        \"telegram_listener\",\r\n        config.telegram_listener_bot_token,\r\n    )\r\n    await bot.connect()\r\n    async for message in bot.iter_messages(\"me\"):\r\n        print(message.id, message.text)\r\n```\r\n\r\nerror:\r\n```traceback\r\n(bot) conda-shell-chrootenv:thomas@horus:~/workspace/photobe$ python .\r\nTraceback (most recent call last):\r\n  File \"/home/thomas/.conda/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/thomas/.conda/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"./__main__.py\", line 23, in <module>\r\n    loop.run_until_complete(main(loop))\r\n  File \"/home/thomas/.conda/lib/python3.7/asyncio/base_events.py\", line 584, in run_until_complete\r\n    return future.result()\r\n  File \"./__main__.py\", line 17, in main\r\n    await telegram.load_telegram_listeners(loop, config, None)\r\n  File \"./telegram/manager.py\", line 19, in load_telegram_listeners\r\n    async for message in bot.iter_messages(\"me\"):\r\n  File \"/home/thomas/.local/lib/python3.7/site-packages/telethon/requestiter.py\", line 75, in __anext__\r\n    if await self._load_next_chunk():\r\n  File \"/home/thomas/.local/lib/python3.7/site-packages/telethon/client/messages.py\", line 165, in _load_next_chunk\r\n    r = await self.client(self.request)\r\n  File \"/home/thomas/.local/lib/python3.7/site-packages/telethon/client/users.py\", line 30, in __call__\r\n    return await self._call(self._sender, request, ordered=ordered)\r\n  File \"/home/thomas/.local/lib/python3.7/site-packages/telethon/client/users.py\", line 77, in _call\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.AuthKeyUnregisteredError: The key is not registered in the system (caused by GetHistoryRequest)\r\n```\r\n\r\nI'm sorry, I don't understand what this error means and i'm unable to find documentation about it. :(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1475", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1475/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1475/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1475/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1475", "id": 626491125, "node_id": "MDU6SXNzdWU2MjY0OTExMjU=", "number": 1475, "title": "Slow download speed on ARM platform", "user": {"login": "nicorac", "id": 2361673, "node_id": "MDQ6VXNlcjIzNjE2NzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2361673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicorac", "html_url": "https://github.com/nicorac", "followers_url": "https://api.github.com/users/nicorac/followers", "following_url": "https://api.github.com/users/nicorac/following{/other_user}", "gists_url": "https://api.github.com/users/nicorac/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicorac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicorac/subscriptions", "organizations_url": "https://api.github.com/users/nicorac/orgs", "repos_url": "https://api.github.com/users/nicorac/repos", "events_url": "https://api.github.com/users/nicorac/events{/privacy}", "received_events_url": "https://api.github.com/users/nicorac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-28T13:02:46Z", "updated_at": "2020-06-06T11:58:10Z", "closed_at": "2020-06-06T11:58:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wrote a program that uses Telethon to backup media documents from my own channel messages.\r\n\r\nI've tested it on 2 different systems, both on the same Internet connection, and there's a big difference in download speed between them (with up to 4 parallel downloads active):\r\n- Win10 Pro x64, core i7, Python 3.6.6: up to **55 Mbps**\r\n- Linux cubietruck kernel 3.4.61, ubuntu server 18.04.5, armv7l, ARM, Python 3.6.9: up to **6 Mbps**\r\n\r\nThe ARM board is a Cubietruck4 ARM board with an Allwinner A20 SoC.\r\nObviously there's a big difference between the two CPUs, but I was not expecting such a big one.\r\n\r\nWhat I've tried so far:\r\n- installed the required cryptg module and checked that it works (without it the download speed drops below 1 Mbps)\r\n- tried to split download into parts, each one downloading proper sized chunks; this gave a big improvement on core i7 (up to 55Mbps) but not on ARM (always \"capped\" to 6Mbps)\r\n\r\nMy questions:\r\n- is there a way to compare cryptg performances between the two systems?\r\n- @Lonami [said here](https://github.com/cher-nov/cryptg/issues/1) that tgcrypt is faster than cryptg; may I replace cryptg with the more efficient tgcrypto?\r\n- I'm actually downloading media in chunks (parts), together with parallel downloads of the same file; is this faster than a single download_file() call? Or is it an useless complication?\r\n- is there anything else I could try to increase download speed on ARM (other than upgrade the Allwinner A20 with something else \ud83d\ude09?)\r\n- if the only chance I have is to upgrade the ARM board, what shall I look for in the new one? RAM? Cores? Encryption performances?\r\n\r\nThanks for your great work", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1472", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1472/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1472/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1472/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1472", "id": 623578153, "node_id": "MDU6SXNzdWU2MjM1NzgxNTM=", "number": 1472, "title": "SendMessageRequest", "user": {"login": "imvg", "id": 65800334, "node_id": "MDQ6VXNlcjY1ODAwMzM0", "avatar_url": "https://avatars1.githubusercontent.com/u/65800334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imvg", "html_url": "https://github.com/imvg", "followers_url": "https://api.github.com/users/imvg/followers", "following_url": "https://api.github.com/users/imvg/following{/other_user}", "gists_url": "https://api.github.com/users/imvg/gists{/gist_id}", "starred_url": "https://api.github.com/users/imvg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imvg/subscriptions", "organizations_url": "https://api.github.com/users/imvg/orgs", "repos_url": "https://api.github.com/users/imvg/repos", "events_url": "https://api.github.com/users/imvg/events{/privacy}", "received_events_url": "https://api.github.com/users/imvg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-23T04:18:46Z", "updated_at": "2020-05-23T09:11:20Z", "closed_at": "2020-05-23T06:34:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use send_message to send a message, but I receive a SendMessageRequest error\r\nI send messages to two channels separately, the first channel has been banned by the administrator, but the second channel has not been banned, but I still can not send a message to the second channel\r\nI tested that if I first send a message to the second channel, it can be sent successfully, and then send a message to the first channel, a SendMessageRequest error will occur\r\n![image](https://user-images.githubusercontent.com/65800334/82721415-845c9c00-9cef-11ea-89f3-93bdec125eed.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1471", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1471/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1471/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1471/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1471", "id": 621947477, "node_id": "MDU6SXNzdWU2MjE5NDc0Nzc=", "number": 1471, "title": "Friendly method for QR login", "user": {"login": "tulir", "id": 4224639, "node_id": "MDQ6VXNlcjQyMjQ2Mzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4224639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tulir", "html_url": "https://github.com/tulir", "followers_url": "https://api.github.com/users/tulir/followers", "following_url": "https://api.github.com/users/tulir/following{/other_user}", "gists_url": "https://api.github.com/users/tulir/gists{/gist_id}", "starred_url": "https://api.github.com/users/tulir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tulir/subscriptions", "organizations_url": "https://api.github.com/users/tulir/orgs", "repos_url": "https://api.github.com/users/tulir/repos", "events_url": "https://api.github.com/users/tulir/events{/privacy}", "received_events_url": "https://api.github.com/users/tulir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-20T17:24:11Z", "updated_at": "2020-06-05T19:59:18Z", "closed_at": "2020-06-05T19:59:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://core.telegram.org/api/qr-login\r\n\r\n#1467 is probably a requirement for this to happen", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1469", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1469/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1469/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1469/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1469", "id": 621392848, "node_id": "MDU6SXNzdWU2MjEzOTI4NDg=", "number": 1469, "title": "Hosting a Telethon User BOT on google-app-engine", "user": {"login": "bsashidh", "id": 1477696, "node_id": "MDQ6VXNlcjE0Nzc2OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1477696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsashidh", "html_url": "https://github.com/bsashidh", "followers_url": "https://api.github.com/users/bsashidh/followers", "following_url": "https://api.github.com/users/bsashidh/following{/other_user}", "gists_url": "https://api.github.com/users/bsashidh/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsashidh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsashidh/subscriptions", "organizations_url": "https://api.github.com/users/bsashidh/orgs", "repos_url": "https://api.github.com/users/bsashidh/repos", "events_url": "https://api.github.com/users/bsashidh/events{/privacy}", "received_events_url": "https://api.github.com/users/bsashidh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-20T01:34:34Z", "updated_at": "2020-05-20T07:06:27Z", "closed_at": "2020-05-20T07:03:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to deploy a simple user bot on Google App Engine Flexible Environment running python3.7, but I get the following error. \r\n\r\n\"File \"/env/lib/python3.7/site-packages/telethon/client/auth.py\", line 20, in phone: typing.Callable[[], str] = lambda: input('Please enter your phone (or bot token): '), EOFError: EOF when reading a line\"\r\n\r\nI beleive this is because the library is prompting a user input from the terminal for phone number/password which will not work on google app engine. Is it possible to allow these inputs in any other way that can work on the Google App Engine Platform?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1468", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1468/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1468/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1468/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1468", "id": 620890461, "node_id": "MDU6SXNzdWU2MjA4OTA0NjE=", "number": 1468, "title": "Help with Encrypted data invalid", "user": {"login": "p0pye", "id": 25545645, "node_id": "MDQ6VXNlcjI1NTQ1NjQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/25545645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/p0pye", "html_url": "https://github.com/p0pye", "followers_url": "https://api.github.com/users/p0pye/followers", "following_url": "https://api.github.com/users/p0pye/following{/other_user}", "gists_url": "https://api.github.com/users/p0pye/gists{/gist_id}", "starred_url": "https://api.github.com/users/p0pye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/p0pye/subscriptions", "organizations_url": "https://api.github.com/users/p0pye/orgs", "repos_url": "https://api.github.com/users/p0pye/repos", "events_url": "https://api.github.com/users/p0pye/events{/privacy}", "received_events_url": "https://api.github.com/users/p0pye/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-19T11:13:21Z", "updated_at": "2020-05-19T11:26:36Z", "closed_at": "2020-05-19T11:26:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, sometimes i receive some error like this when i call MessageButton.click():\r\n ```\r\n  File \"botlogic.py\", line 468, in find_button\r\n    await btn_next_page.click()\r\n  File \"/usr/local/lib64/python3.6/site-packages/telethon/tl/custom/messagebutton.py\", line 87, in click\r\n    return await self._client(req)\r\n  File \"/usr/local/lib64/python3.6/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.DataInvalidError: Encrypted data invalid (caused by GetBotCallbackAnswerRequest)\r\n```\r\n\r\nThere is my code:\r\n```python\r\nbuttons = await message.get_buttons()\r\nbtn_next_page = None\r\nfor lst in buttons:\r\n    for btn in lst:\r\n        ... some code\r\n        if btn is not None and \"2/\" in str(btn.text):\r\n            btn_next_page = btn\r\n            await btn_next_page.click()\r\n```\r\nCan you help me with this error? What am I doing wrong?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1467", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1467/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1467/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1467/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1467", "id": 620003709, "node_id": "MDU6SXNzdWU2MjAwMDM3MDk=", "number": 1467, "title": "Investigate handling updates prior to login", "user": {"login": "Lonami", "id": 6297805, "node_id": "MDQ6VXNlcjYyOTc4MDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/6297805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lonami", "html_url": "https://github.com/Lonami", "followers_url": "https://api.github.com/users/Lonami/followers", "following_url": "https://api.github.com/users/Lonami/following{/other_user}", "gists_url": "https://api.github.com/users/Lonami/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lonami/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lonami/subscriptions", "organizations_url": "https://api.github.com/users/Lonami/orgs", "repos_url": "https://api.github.com/users/Lonami/repos", "events_url": "https://api.github.com/users/Lonami/events{/privacy}", "received_events_url": "https://api.github.com/users/Lonami/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-18T08:17:06Z", "updated_at": "2020-06-05T19:17:57Z", "closed_at": "2020-06-05T19:17:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Apparently some updates like `updateLoginToken` happen before login ([original report](https://t.me/TelethonChat/215020)) but currently fails because we don't have entities ([original report](https://t.me/TelethonChat/214670)):\r\n```\r\n[ERROR/2020-05-13 08:30:11,237] asyncio: Task exception was never retrieved\r\nfuture: <Task finished name='Task-10' coro=<UpdateMethods._dispatch_update() done, defined at /home/kp/unlogged/venv/lib/python3.8/site-packages/telethon/client/updates.py:382> exception=AttributeError(\"'NoneType' object has no attribute 'user_id'\")>\r\nTraceback (most recent call last):\r\n  File \"/home/kp/unlogged/venv/lib/python3.8/site-packages/telethon/client/updates.py\", line 563, in getitem\r\n    return self.dict[builder]\r\nKeyError: <class 'telethon.events.raw.Raw'>\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/kp/unlogged/venv/lib/python3.8/site-packages/telethon/client/updates.py\", line 420, in _dispatch_update\r\n    event = built[type(builder)]\r\n  File \"/home/kp/unlogged/venv/lib/python3.8/site-packages/telethon/client/updates.py\", line 566, in getitem\r\n    self.update, self.others, self.client._self_input_peer.user_id)\r\nAttributeError: 'NoneType' object has no attribute 'user_id'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1465", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1465/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1465/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1465/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1465", "id": 619956904, "node_id": "MDU6SXNzdWU2MTk5NTY5MDQ=", "number": 1465, "title": "V1.12b version, the account is disabled or cancelled within one minute after registering and generating an account", "user": {"login": "FLYVIP", "id": 52144572, "node_id": "MDQ6VXNlcjUyMTQ0NTcy", "avatar_url": "https://avatars2.githubusercontent.com/u/52144572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FLYVIP", "html_url": "https://github.com/FLYVIP", "followers_url": "https://api.github.com/users/FLYVIP/followers", "following_url": "https://api.github.com/users/FLYVIP/following{/other_user}", "gists_url": "https://api.github.com/users/FLYVIP/gists{/gist_id}", "starred_url": "https://api.github.com/users/FLYVIP/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FLYVIP/subscriptions", "organizations_url": "https://api.github.com/users/FLYVIP/orgs", "repos_url": "https://api.github.com/users/FLYVIP/repos", "events_url": "https://api.github.com/users/FLYVIP/events{/privacy}", "received_events_url": "https://api.github.com/users/FLYVIP/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-18T06:54:46Z", "updated_at": "2020-05-18T07:06:15Z", "closed_at": "2020-05-18T07:06:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Version V1.12b, the account is disabled or cancelled within one minute after registering and generating an account, and the replacement of different IP, apiid, number, etc. still exists. What is the reason for this? This situation has occurred since yesterday. It has been normal before.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1464", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1464/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1464/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1464/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1464", "id": 619588103, "node_id": "MDU6SXNzdWU2MTk1ODgxMDM=", "number": 1464, "title": "Bug in SendChangePhoneCodeRequest?", "user": {"login": "NotStatilko", "id": 43419673, "node_id": "MDQ6VXNlcjQzNDE5Njcz", "avatar_url": "https://avatars2.githubusercontent.com/u/43419673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotStatilko", "html_url": "https://github.com/NotStatilko", "followers_url": "https://api.github.com/users/NotStatilko/followers", "following_url": "https://api.github.com/users/NotStatilko/following{/other_user}", "gists_url": "https://api.github.com/users/NotStatilko/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotStatilko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotStatilko/subscriptions", "organizations_url": "https://api.github.com/users/NotStatilko/orgs", "repos_url": "https://api.github.com/users/NotStatilko/repos", "events_url": "https://api.github.com/users/NotStatilko/events{/privacy}", "received_events_url": "https://api.github.com/users/NotStatilko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-17T01:25:02Z", "updated_at": "2020-05-17T15:50:20Z", "closed_at": "2020-05-17T07:28:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\nHello!  I developed [backups for Telegram](https://bit.ly/tgback) based on Telethon. Recently, I noticed that my sessions were disconnected, although they were active for ~6 months. Also, when I started to rewrite my code, I noticed that the `SendChangePhoneCodeRequest`  began to return an **[undocumented](https://tl.telethon.dev/methods/account/send_change_phone_code.html) [error](https://pastebin.com/snR3tXby)**, although before that everything worked fine.  Can you tell me what happened, and how can this be fixed?\r\n\r\nTo raise error you can clone [my repository](bit.ly/tgback), change to `except OSError:` in [this line](https://github.com/NotStatilko/tgback/blob/c65a903acd5ffa33ac419193665ec0bde19ce707/TelegramBackup.py#L124), run `TelegramBackup.py`, [backup account and try to change phone](https://github.com/NotStatilko/tgback/blob/master/README.md), you can input your active phone number.\r\n\r\nShort Error:\r\n```\r\ntelethon.errors.rpcbaseerrors.AuthKeyError: RPCError 406: FRESH_CHANGE_PHONE_FORBIDDEN (caused by SendChangePhoneCodeRequest)\r\n```\r\n\r\nRegards", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1462", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1462/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1462/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1462/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1462", "id": 619543208, "node_id": "MDU6SXNzdWU2MTk1NDMyMDg=", "number": 1462, "title": "Forwarding file without forward header", "user": {"login": "xybydy", "id": 4909109, "node_id": "MDQ6VXNlcjQ5MDkxMDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4909109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xybydy", "html_url": "https://github.com/xybydy", "followers_url": "https://api.github.com/users/xybydy/followers", "following_url": "https://api.github.com/users/xybydy/following{/other_user}", "gists_url": "https://api.github.com/users/xybydy/gists{/gist_id}", "starred_url": "https://api.github.com/users/xybydy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xybydy/subscriptions", "organizations_url": "https://api.github.com/users/xybydy/orgs", "repos_url": "https://api.github.com/users/xybydy/repos", "events_url": "https://api.github.com/users/xybydy/events{/privacy}", "received_events_url": "https://api.github.com/users/xybydy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1008177162, "node_id": "MDU6TGFiZWwxMDA4MTc3MTYy", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/can't%20reproduce", "name": "can't reproduce", "color": "d4c5f9", "default": false, "description": "The maintainer cannot reproduce this issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-16T19:46:07Z", "updated_at": "2020-05-17T07:38:27Z", "closed_at": "2020-05-17T07:30:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "In docs it is written that the way to forward messages without the forward header is simply using send_message function but it only works for text messages.\r\n\r\nIs there any way that we can forward files without the headers? Pyrogram can do that (but unable to search files by its name, pyrogram requires file caption), and the libs based on tdlib does that as well but I couldn't find any way to do that on Telethon.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1459", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1459/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1459/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1459/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1459", "id": 615949909, "node_id": "MDU6SXNzdWU2MTU5NDk5MDk=", "number": 1459, "title": "ImportContactsRequest response only five contacts", "user": {"login": "Mike9641", "id": 65177991, "node_id": "MDQ6VXNlcjY1MTc3OTkx", "avatar_url": "https://avatars3.githubusercontent.com/u/65177991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mike9641", "html_url": "https://github.com/Mike9641", "followers_url": "https://api.github.com/users/Mike9641/followers", "following_url": "https://api.github.com/users/Mike9641/following{/other_user}", "gists_url": "https://api.github.com/users/Mike9641/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mike9641/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mike9641/subscriptions", "organizations_url": "https://api.github.com/users/Mike9641/orgs", "repos_url": "https://api.github.com/users/Mike9641/repos", "events_url": "https://api.github.com/users/Mike9641/events{/privacy}", "received_events_url": "https://api.github.com/users/Mike9641/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-11T14:55:13Z", "updated_at": "2020-05-11T15:33:28Z", "closed_at": "2020-05-11T15:33:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am adding 100 phone numbers. Imported only five contacts. what am I doing wrong?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1458", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1458/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1458/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1458/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1458", "id": 615482909, "node_id": "MDU6SXNzdWU2MTU0ODI5MDk=", "number": 1458, "title": "Possible bug with event.get_pinned_message()", "user": {"login": "Dareten", "id": 30283450, "node_id": "MDQ6VXNlcjMwMjgzNDUw", "avatar_url": "https://avatars2.githubusercontent.com/u/30283450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dareten", "html_url": "https://github.com/Dareten", "followers_url": "https://api.github.com/users/Dareten/followers", "following_url": "https://api.github.com/users/Dareten/following{/other_user}", "gists_url": "https://api.github.com/users/Dareten/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dareten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dareten/subscriptions", "organizations_url": "https://api.github.com/users/Dareten/orgs", "repos_url": "https://api.github.com/users/Dareten/repos", "events_url": "https://api.github.com/users/Dareten/events{/privacy}", "received_events_url": "https://api.github.com/users/Dareten/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-10T21:45:17Z", "updated_at": "2020-05-17T07:36:22Z", "closed_at": "2020-05-17T07:36:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\n@client.on(events.ChatAction(chats=main_id))\r\nasync def normal_handler(event):\r\n    global one, pin\r\n    if event.new_pin:\r\n        pin = await event.get_pinned_message()\r\n```\r\n\r\n**Traceback**\r\n```\r\nERROR:telethon.client.updates:Unhandled exception on normal_handler\r\nTraceback (most recent call last):\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\client\\updates.py\", line 431, in _dispatch_update\r\n    await callback(event)\r\n  File \"D:\\Darts\\hello.py\", line 22, in normal_handler\r\n    pin = await event.get_pinned_message()\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\events\\chataction.py\", line 264, in get_pinned_message\r\n    r = await self._client(functions.channels.GetMessagesRequest(\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\client\\users.py\", line 30, in __call__\r\n    return await self._call(self._sender, request, ordered=ordered)\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\client\\users.py\", line 37, in _call\r\n    await r.resolve(self, utils)\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\tl\\functions\\channels.py\", line 780, in resolve\r\n    self.channel = utils.get_input_channel(await client.get_input_entity(self.channel))\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\utils.py\", line 263, in get_input_channel\r\n    _raise_cast_fail(entity, 'InputChannel')\r\n  File \"D:\\Python\\lib\\site-packages\\telethon\\utils.py\", line 138, in _raise_cast_fail\r\n    raise TypeError('Cannot cast {} to any kind of {}.'.format(\r\nTypeError: Cannot cast InputPeerChat to any kind of InputChannel.\r\n```\r\nThis bug was reproduced on my PC and heroku cloud, but on my friend's PC this code works well.\r\nIt doesn't depend on the chat.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1456", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1456/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1456/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1456/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1456", "id": 614643373, "node_id": "MDU6SXNzdWU2MTQ2NDMzNzM=", "number": 1456, "title": "Inconsistency between edit_message and send_message", "user": {"login": "penn5", "id": 5600962, "node_id": "MDQ6VXNlcjU2MDA5NjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5600962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penn5", "html_url": "https://github.com/penn5", "followers_url": "https://api.github.com/users/penn5/followers", "following_url": "https://api.github.com/users/penn5/following{/other_user}", "gists_url": "https://api.github.com/users/penn5/gists{/gist_id}", "starred_url": "https://api.github.com/users/penn5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penn5/subscriptions", "organizations_url": "https://api.github.com/users/penn5/orgs", "repos_url": "https://api.github.com/users/penn5/repos", "events_url": "https://api.github.com/users/penn5/events{/privacy}", "received_events_url": "https://api.github.com/users/penn5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-08T10:03:45Z", "updated_at": "2020-05-17T07:37:28Z", "closed_at": "2020-05-17T07:37:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\ntry:\r\n    await client.send_message(\"TelethonChat\", \"\")\r\nexcept ValueError:\r\n    # Could mean 'message empty' or 'unknown entity'\r\nmsg = await client.send_message(\"TelethonChat\", \".\")\r\ntry:\r\n    await client.edit_message(msg.to_id, msg.id, \"\")\r\nexcept MessageEmptyError:\r\n    # message is empty\r\n```\r\nI would propose that send_message throws MessageEmptyError before making the RPC request. This way, the errors can be differentiated against a ValueError from an unknown entity, and makes it consistent with edit_message. It also means that it's not necessary to make an RPC request to get the error returned from the server, so it can be detected faster.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1455", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1455/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1455/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1455/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1455", "id": 613948346, "node_id": "MDU6SXNzdWU2MTM5NDgzNDY=", "number": 1455, "title": "This event loop is already running", "user": {"login": "mossishahi", "id": 33085339, "node_id": "MDQ6VXNlcjMzMDg1MzM5", "avatar_url": "https://avatars3.githubusercontent.com/u/33085339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mossishahi", "html_url": "https://github.com/mossishahi", "followers_url": "https://api.github.com/users/mossishahi/followers", "following_url": "https://api.github.com/users/mossishahi/following{/other_user}", "gists_url": "https://api.github.com/users/mossishahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mossishahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mossishahi/subscriptions", "organizations_url": "https://api.github.com/users/mossishahi/orgs", "repos_url": "https://api.github.com/users/mossishahi/repos", "events_url": "https://api.github.com/users/mossishahi/events{/privacy}", "received_events_url": "https://api.github.com/users/mossishahi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-07T10:31:11Z", "updated_at": "2020-05-07T10:36:21Z", "closed_at": "2020-05-07T10:36:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\nI am about to start working with Telethon and face this problem,\r\nI run this simple code:\r\nand face these errors:\r\n\r\n```\r\napi_id = ***\r\napi_hash = '***'\r\n\r\nimport telethon.sync\r\nclient = TelegramClient('mossishahi555', api_id, api_hash)\r\n\r\nasync def main():\r\n    me = await client.get_me()\r\n\r\nwith client:\r\n    client.loop.run_until_complete(main())\r\n\r\n```\r\n\r\n1. I face with error 'database lock' due to the repeated session name, how should terminate a session each time?\r\n\r\n2. the error is:\r\n```\r\n<ipython-input-101-26c8aa6ea2c1> in <module>\r\n     10     me = await client.get_me()\r\n     11 \r\n---> 12 with client:\r\n     13     client.loop.run_until_complete(main())\r\n\r\n~/anaconda3/lib/python3.7/site-packages/telethon/helpers.py in _sync_enter(self)\r\n    149     if loop.is_running():\r\n    150         raise RuntimeError(\r\n--> 151             'You must use \"async with\" if the event loop '\r\n    152             'is running (i.e. you are inside an \"async def\")'\r\n    153         )\r\n\r\nRuntimeError: You must use \"async with\" if the event loop is running (i.e. you are inside an \"async def\")\r\n\r\n```\r\n\r\n3. by adding an `async` before `with` I have this error:\r\nit gets the phone number and sends a code but again a new error:\r\n\r\n```\r\nPlease enter your phone (or bot token): +***\r\nPlease enter the code you received: **\r\nSigned in successfully as -----\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-103-e352deadf251> in async-def-wrapper()\r\n\r\n~/anaconda3/lib/python3.7/asyncio/base_events.py in run_until_complete(self, future)\r\n    569         future.add_done_callback(_run_until_complete_cb)\r\n    570         try:\r\n--> 571             self.run_forever()\r\n    572         except:\r\n    573             if new_task and future.done() and not future.cancelled():\r\n\r\n~/anaconda3/lib/python3.7/asyncio/base_events.py in run_forever(self)\r\n    524         self._check_closed()\r\n    525         if self.is_running():\r\n--> 526             raise RuntimeError('This event loop is already running')\r\n    527         if events._get_running_loop() is not None:\r\n    528             raise RuntimeError(\r\n\r\nRuntimeError: This event loop is already running\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1454", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1454/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1454/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1454/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1454", "id": 612473388, "node_id": "MDU6SXNzdWU2MTI0NzMzODg=", "number": 1454, "title": "Getting ValueError: non-hexadecimal number found in fromhex() for Mtproto secret", "user": {"login": "hamedhr", "id": 20525424, "node_id": "MDQ6VXNlcjIwNTI1NDI0", "avatar_url": "https://avatars1.githubusercontent.com/u/20525424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hamedhr", "html_url": "https://github.com/hamedhr", "followers_url": "https://api.github.com/users/hamedhr/followers", "following_url": "https://api.github.com/users/hamedhr/following{/other_user}", "gists_url": "https://api.github.com/users/hamedhr/gists{/gist_id}", "starred_url": "https://api.github.com/users/hamedhr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hamedhr/subscriptions", "organizations_url": "https://api.github.com/users/hamedhr/orgs", "repos_url": "https://api.github.com/users/hamedhr/repos", "events_url": "https://api.github.com/users/hamedhr/events{/privacy}", "received_events_url": "https://api.github.com/users/hamedhr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-05T09:44:00Z", "updated_at": "2020-05-05T09:54:55Z", "closed_at": "2020-05-05T09:54:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi \r\n\r\nI'm trying to connect with MtProto which causes the Exception :\r\n\r\n`\r\n self._secret = bytes.fromhex(proxy[2])\r\nValueError: non-hexadecimal number found in fromhex() arg at position 1\r\n`\r\n\r\nexample link for MtProto : \r\n\r\n`\r\nhttps://t.me/proxy?server=&port=443&secret=7jK5IN_7UWQwKOL2uHjU6sFpbnN0YWdyYW1zdGF0aWMtYS5ha2FtYWloZC5uZXQ\r\n`\r\n`\r\nfrom telethon.sync import TelegramClient, events, connection\r\n\r\napi_id = 12345\r\napi_hash = \"1234567890\"\r\n\r\nsecret=\"7jK5IN_7UWQwKOL2uHjU6sFpbnN0YWdyYW1zdGF0aWMtYS5ha2FtYWloZC5uZXQ\"\r\nproxy = (\"snitched.DigiArray.xyz\", 443, secret)\r\nconnection = connection.tcpmtproxy.ConnectionTcpMTProxyRandomizedIntermediate\r\n\r\nwith TelegramClient(\"anon\", api_id, api_hash,\r\n                    connection=connection,\r\n                    proxy=proxy,\r\n                    connection_retries=1) as client:\r\n    client.send_message(\"me\", \"Hi\")\r\n`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1453", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1453/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1453/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1453/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1453", "id": 612145787, "node_id": "MDU6SXNzdWU2MTIxNDU3ODc=", "number": 1453, "title": "Cannot forward dice message (sendDice)", "user": {"login": "ilyaroot", "id": 34151911, "node_id": "MDQ6VXNlcjM0MTUxOTEx", "avatar_url": "https://avatars3.githubusercontent.com/u/34151911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilyaroot", "html_url": "https://github.com/ilyaroot", "followers_url": "https://api.github.com/users/ilyaroot/followers", "following_url": "https://api.github.com/users/ilyaroot/following{/other_user}", "gists_url": "https://api.github.com/users/ilyaroot/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilyaroot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilyaroot/subscriptions", "organizations_url": "https://api.github.com/users/ilyaroot/orgs", "repos_url": "https://api.github.com/users/ilyaroot/repos", "events_url": "https://api.github.com/users/ilyaroot/events{/privacy}", "received_events_url": "https://api.github.com/users/ilyaroot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-04T20:26:01Z", "updated_at": "2020-05-05T07:29:47Z", "closed_at": "2020-05-05T07:29:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x]  I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient, events, sync, functions, utils\r\nimport asyncio, os, sys\r\n...\r\n@client.on(events.NewMessage())\r\nasync def my_event_handler(event):\r\n        sender = await event.get_sender()\r\n        chat = await event.get_chat()\r\n        name = utils.get_display_name(sender)\r\n        chatname = utils.get_display_name(chat)\r\n        where = \"My Home\"\r\n        if chatname == where:\r\n                if '+' in event.raw_text:\r\n                        message_782 = await client.get_messages('me', ids=782)\r\n                        await client.forward_messages(where, message_782)\r\n\r\n```\r\nmessage_782 is Dice roll (sendDice Bot API Method).\r\nGot ID from:\r\n```python\r\nchat = 'me'\r\nfor message in client.iter_messages(chat):\r\n        print(message.id, ':', message.text)\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/telethon/client/updates.py\", line 431, in _dispatch_update\r\n    await callback(event)\r\n  File \"pygram.py\", line 25, in my_event_handler\r\n    await client.forward_messages(where, message_782)\r\n  File \"/usr/local/lib/python3.8/site-packages/telethon/client/messages.py\", line 887, in forward_messages\r\n    for chat_id, chunk in itertools.groupby(messages, key=get_key):\r\n  File \"/usr/local/lib/python3.8/site-packages/telethon/client/messages.py\", line 870, in _get_key\r\n    raise TypeError('Cannot forward messages of type {}'.format(type(m)))\r\nTypeError: Cannot forward messages of type <class 'telethon.tl.patched.MessageService'>\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1452", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1452/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1452/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1452/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1452", "id": 611470422, "node_id": "MDU6SXNzdWU2MTE0NzA0MjI=", "number": 1452, "title": "'t.me/SomeBot_bot' URL doesn't work in CallbackQuery answer", "user": {"login": "TishSerg", "id": 11420785, "node_id": "MDQ6VXNlcjExNDIwNzg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11420785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TishSerg", "html_url": "https://github.com/TishSerg", "followers_url": "https://api.github.com/users/TishSerg/followers", "following_url": "https://api.github.com/users/TishSerg/following{/other_user}", "gists_url": "https://api.github.com/users/TishSerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/TishSerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TishSerg/subscriptions", "organizations_url": "https://api.github.com/users/TishSerg/orgs", "repos_url": "https://api.github.com/users/TishSerg/repos", "events_url": "https://api.github.com/users/TishSerg/events{/privacy}", "received_events_url": "https://api.github.com/users/TishSerg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-03T18:00:15Z", "updated_at": "2020-05-03T19:40:47Z", "closed_at": "2020-05-03T19:27:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Checklist**\r\n* [\u2714\ufe0f] The error is in the library's code, and not in my own.\r\n* [\u2714\ufe0f] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [\u2714\ufe0f] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nawait callbackquery_event.answer('To bot...', url='t.me/\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588_bot')    # Fails\r\ntelethon.Button.url('Go to bot', 't.me/\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588_bot')    # Works\r\n```\r\n\r\n**Traceback**\r\n```\r\n  File \"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\\frontend.py\", line 238, in handle_button_test\r\n    await cbq_event.answer('To bot...', url='t.me/\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588_bot')\r\n  File \"C:\\Users\\\u2588\u2588\u2588\u2588\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\telethon\\events\\callbackquery.py\", line 242, in answer\r\n    return await self._client(\r\n  File \"C:\\Users\\\u2588\u2588\u2588\u2588\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\telethon\\client\\users.py\", line 30, in __call__\r\n    return await self._call(self._sender, request, ordered=ordered)\r\n  File \"C:\\Users\\\u2588\u2588\u2588\u2588\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\telethon\\client\\users.py\", line 77, in _call\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.UrlInvalidError: The URL used was invalid (e.g. when answering a callback with an URL that's not t.me/yourbot or your game's URL) (caused by SetBotCallbackAnswerRequest)\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1451", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1451/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1451/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1451/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1451", "id": 611158935, "node_id": "MDU6SXNzdWU2MTExNTg5MzU=", "number": 1451, "title": "InviteToChannelRequest doesn't returns any error but neither add user to a group", "user": {"login": "alyatrach", "id": 19417332, "node_id": "MDQ6VXNlcjE5NDE3MzMy", "avatar_url": "https://avatars1.githubusercontent.com/u/19417332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alyatrach", "html_url": "https://github.com/alyatrach", "followers_url": "https://api.github.com/users/alyatrach/followers", "following_url": "https://api.github.com/users/alyatrach/following{/other_user}", "gists_url": "https://api.github.com/users/alyatrach/gists{/gist_id}", "starred_url": "https://api.github.com/users/alyatrach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alyatrach/subscriptions", "organizations_url": "https://api.github.com/users/alyatrach/orgs", "repos_url": "https://api.github.com/users/alyatrach/repos", "events_url": "https://api.github.com/users/alyatrach/events{/privacy}", "received_events_url": "https://api.github.com/users/alyatrach/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-02T10:52:11Z", "updated_at": "2020-05-02T12:19:50Z", "closed_at": "2020-05-02T12:19:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "`result = client(InviteToChannelRequest(target_group_entity,[user_to_add]))\r\n            print(result)\r\nexcept UserChannelsTooMuchError:\r\n            print(\"Getting User Channels Too Much Error. Skipping\")\r\n            continue\r\n`\r\nFor some users (not all) InviteToChannelRequest behaves like it have added a user to a group and no exception is caught, but when i am checking the group manually, the user is not there. Also, when i'm trying to add that user manually to a group, i got error message from telegram says \"sorry but the user is already in too many channels, ask them to leave some first\" ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1443", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1443/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1443/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1443/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1443", "id": 606951742, "node_id": "MDU6SXNzdWU2MDY5NTE3NDI=", "number": 1443, "title": "Chat action 'song' is alias for 'document' and not for 'audio'", "user": {"login": "TishSerg", "id": 11420785, "node_id": "MDQ6VXNlcjExNDIwNzg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11420785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TishSerg", "html_url": "https://github.com/TishSerg", "followers_url": "https://api.github.com/users/TishSerg/followers", "following_url": "https://api.github.com/users/TishSerg/following{/other_user}", "gists_url": "https://api.github.com/users/TishSerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/TishSerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TishSerg/subscriptions", "organizations_url": "https://api.github.com/users/TishSerg/orgs", "repos_url": "https://api.github.com/users/TishSerg/repos", "events_url": "https://api.github.com/users/TishSerg/events{/privacy}", "received_events_url": "https://api.github.com/users/TishSerg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-26T08:13:23Z", "updated_at": "2020-04-26T09:00:00Z", "closed_at": "2020-04-26T09:00:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Code that causes the issue**\r\n```python\r\nasync with client.action(input_chat, 'audio'):\r\n            print('audio')\r\n            await asyncio.sleep(2)\r\nasync with client.action(input_chat, 'song'):\r\n            print('song')\r\n            await asyncio.sleep(2)\r\nasync with client.action(input_chat, 'document'):\r\n            print('document')\r\n            await asyncio.sleep(2)\r\n```\r\nWhen 'song' is printed all the Telegram clients I checked (Windows Telegram Desktop, Android Telegram and Telegram X) show that document is being sent (not 'audio').\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1441", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1441/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1441/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1441/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1441", "id": 606617658, "node_id": "MDU6SXNzdWU2MDY2MTc2NTg=", "number": 1441, "title": "Cant output emojis", "user": {"login": "kotik1998", "id": 23015769, "node_id": "MDQ6VXNlcjIzMDE1NzY5", "avatar_url": "https://avatars3.githubusercontent.com/u/23015769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kotik1998", "html_url": "https://github.com/kotik1998", "followers_url": "https://api.github.com/users/kotik1998/followers", "following_url": "https://api.github.com/users/kotik1998/following{/other_user}", "gists_url": "https://api.github.com/users/kotik1998/gists{/gist_id}", "starred_url": "https://api.github.com/users/kotik1998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kotik1998/subscriptions", "organizations_url": "https://api.github.com/users/kotik1998/orgs", "repos_url": "https://api.github.com/users/kotik1998/repos", "events_url": "https://api.github.com/users/kotik1998/events{/privacy}", "received_events_url": "https://api.github.com/users/kotik1998/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-24T22:28:14Z", "updated_at": "2020-04-25T07:43:25Z", "closed_at": "2020-04-25T07:43:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\nFor some reason i cant output text from telegram with emojis, it leaves my text file blanc.\r\nIs there any solution to this?\r\nMy plan is to \"re-send\" messages from private chat to discord group.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1440", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1440/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1440/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1440/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1440", "id": 603519392, "node_id": "MDU6SXNzdWU2MDM1MTkzOTI=", "number": 1440, "title": "Telethon update username and name", "user": {"login": "saarmia123", "id": 10598854, "node_id": "MDQ6VXNlcjEwNTk4ODU0", "avatar_url": "https://avatars1.githubusercontent.com/u/10598854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saarmia123", "html_url": "https://github.com/saarmia123", "followers_url": "https://api.github.com/users/saarmia123/followers", "following_url": "https://api.github.com/users/saarmia123/following{/other_user}", "gists_url": "https://api.github.com/users/saarmia123/gists{/gist_id}", "starred_url": "https://api.github.com/users/saarmia123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saarmia123/subscriptions", "organizations_url": "https://api.github.com/users/saarmia123/orgs", "repos_url": "https://api.github.com/users/saarmia123/repos", "events_url": "https://api.github.com/users/saarmia123/events{/privacy}", "received_events_url": "https://api.github.com/users/saarmia123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-20T20:38:06Z", "updated_at": "2020-04-20T22:15:29Z", "closed_at": "2020-04-20T22:15:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Been trying to auth and than update username and name from a random txt file... seems like theres an error with the await...\r\n\r\n\r\n\r\n\r\nfrom telethon import TelegramClient\r\nfrom telethon.tl.functions.messages import GetDialogsRequest\r\nfrom telethon.tl.functions.account import UpdateProfileRequest\r\nfrom telethon.tl.functions.account import UpdateUsernameRequest\r\nimport random\r\nfrom os import path\r\nfrom telethon import functions, types\r\nimport sys\r\nimport csv\r\nimport traceback\r\nimport time\r\nimport signal\r\nimport requests\r\nimport pynput\r\nimport asyncio\r\n\r\n\r\n  \r\n\r\napi_id = 569194\r\napi_hash = 'baa712364f25b56aa2468be7e94132b6'\r\nfile = open(\"number.txt\").readlines()\r\nproxies = open(\"proxies.txt\").read().split(\"\\n\")\r\nprint(proxies)\r\nwhile True:\r\n    phone = input(\"Enter Number with CountryCode: \")\r\n    if path.exists(f\"{phone}.session\"):\r\n        print(\"Already Saved Session..\")\r\n    else:\r\n        proxy = random.choice(proxies)\r\n        p = {\"hostname\":proxy.split(\":\")[0],\"port\":int(proxy.split(\":\")[1])}\r\n        print(p)\r\n        print(phone)\r\n        with TelegramClient(phone, api_id, api_hash) as client:\r\n        if not client.is_user_authorized():\r\n            client.send_code_request(phone)\r\n            client.sign_in(phone, input('Enter the code : '))\r\n        else:\r\n            file = open(\"firstnames.txt\").readlines()\r\n            reader = csv.reader(file)\r\n            nrow = random.choice(list(reader))\r\n            file2 = open(\"usernames.txt\").readlines()\r\n            reader2 = csv.reader(file2)\r\n            urow = random.choice(list(reader2))        \r\n            await client(functions.account.UpdateProfileRequest(first_name=nrow ))\r\n            await client(UpdateUsernameRequest(urow))", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1439", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1439/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1439/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1439/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1439", "id": 602346322, "node_id": "MDU6SXNzdWU2MDIzNDYzMjI=", "number": 1439, "title": "Download to browser", "user": {"login": "A2DNEW", "id": 27811691, "node_id": "MDQ6VXNlcjI3ODExNjkx", "avatar_url": "https://avatars3.githubusercontent.com/u/27811691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/A2DNEW", "html_url": "https://github.com/A2DNEW", "followers_url": "https://api.github.com/users/A2DNEW/followers", "following_url": "https://api.github.com/users/A2DNEW/following{/other_user}", "gists_url": "https://api.github.com/users/A2DNEW/gists{/gist_id}", "starred_url": "https://api.github.com/users/A2DNEW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/A2DNEW/subscriptions", "organizations_url": "https://api.github.com/users/A2DNEW/orgs", "repos_url": "https://api.github.com/users/A2DNEW/repos", "events_url": "https://api.github.com/users/A2DNEW/events{/privacy}", "received_events_url": "https://api.github.com/users/A2DNEW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-18T01:04:25Z", "updated_at": "2020-04-18T07:34:11Z", "closed_at": "2020-04-18T07:34:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use this code for download\r\n\r\n```\r\nimport webbrowser\r\nimport asyncio\r\nimport aiohttp\r\nfrom threading import Timer\r\nfrom telethon import TelegramClient, events, sync\r\nfrom aiohttp import web\r\n\r\napi_id = xxx\r\napi_hash = 'xxx'\r\n\r\nclient = TelegramClient('session_name', api_id, api_hash)\r\nclient.start()\r\n\r\nasync def main():\r\n    print(\"----START\")\r\n\r\nwith client:\r\n    client.loop.run_until_complete(main())\r\n\r\nasync def hello(request):\r\n    await client.connect()\r\n\r\n    async for message in client.iter_messages('me'):     \r\n        await client.download_media(message)   \r\n        break\r\n\r\n    return web.Response(text = \"done\")\r\n\r\napp = web.Application()\r\napp.router.add_get('/', hello)\r\nweb.run_app(app)\r\n```\r\n\r\nAfter run `http://0.0.0.0:8080` this code working fine, but files downloaded to server!\r\nI want files download with browsers and users can resume it\r\nHow I can?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1438", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1438/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1438/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1438/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1438", "id": 601930423, "node_id": "MDU6SXNzdWU2MDE5MzA0MjM=", "number": 1438, "title": "MTproxy TLS Support?", "user": {"login": "Drparsayar", "id": 20334696, "node_id": "MDQ6VXNlcjIwMzM0Njk2", "avatar_url": "https://avatars1.githubusercontent.com/u/20334696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Drparsayar", "html_url": "https://github.com/Drparsayar", "followers_url": "https://api.github.com/users/Drparsayar/followers", "following_url": "https://api.github.com/users/Drparsayar/following{/other_user}", "gists_url": "https://api.github.com/users/Drparsayar/gists{/gist_id}", "starred_url": "https://api.github.com/users/Drparsayar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Drparsayar/subscriptions", "organizations_url": "https://api.github.com/users/Drparsayar/orgs", "repos_url": "https://api.github.com/users/Drparsayar/repos", "events_url": "https://api.github.com/users/Drparsayar/events{/privacy}", "received_events_url": "https://api.github.com/users/Drparsayar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-17T12:11:22Z", "updated_at": "2020-05-03T14:55:23Z", "closed_at": "2020-05-03T14:54:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there, i was wondering if you were planning to add support for the new version of MTProto proxies (TLS),\r\n\r\nwill we have the support for the new version of MTProto Proxies in your library in the near future?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1436", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1436/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1436/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1436/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1436", "id": 599018682, "node_id": "MDU6SXNzdWU1OTkwMTg2ODI=", "number": 1436, "title": "InputMessagesFilterPhoneCalls doesn't work as a filter when using get_messages()", "user": {"login": "sanjeetsuhag", "id": 5172619, "node_id": "MDQ6VXNlcjUxNzI2MTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5172619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjeetsuhag", "html_url": "https://github.com/sanjeetsuhag", "followers_url": "https://api.github.com/users/sanjeetsuhag/followers", "following_url": "https://api.github.com/users/sanjeetsuhag/following{/other_user}", "gists_url": "https://api.github.com/users/sanjeetsuhag/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjeetsuhag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjeetsuhag/subscriptions", "organizations_url": "https://api.github.com/users/sanjeetsuhag/orgs", "repos_url": "https://api.github.com/users/sanjeetsuhag/repos", "events_url": "https://api.github.com/users/sanjeetsuhag/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjeetsuhag/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-13T17:25:46Z", "updated_at": "2020-04-13T19:32:02Z", "closed_at": "2020-04-13T19:32:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient\r\nfrom telethon.tl.types import InputMessagesFilterPhoneCalls\r\n\r\nasync def main():\r\n    dialogs = await client.get_dialogs()\r\n    chat = await client.get_input_entity(dialogs[0])\r\n\r\n    messages = await client.get_messages(chat, 0, filter=InputMessagesFilterPhoneCalls)\r\n    print(messages.total)\r\n\r\nwith TelegramClient('client', key['api_id'], key['api_hash']) as client:\r\n    client.loop.run_until_complete(main())\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/sanjeetsuhag/Developer/TelegramStats/test.py\", line 27, in <module>\r\n    client.loop.run_until_complete(main())\r\n  File \"/usr/local/Cellar/python/3.7.6_1/Frameworks/Python.framework/Versions/3.7/lib/python3.7/asyncio/base_events.py\", line 583, in run_until_complete\r\n    return future.result()\r\n  File \"/Users/sanjeetsuhag/Developer/TelegramStats/test.py\", line 23, in main\r\n    messages = await client.get_messages(chat, 0, filter=InputMessagesFilterPhoneCalls)\r\n  File \"/Users/sanjeetsuhag/Library/Python/3.7/lib/python/site-packages/telethon/client/messages.py\", line 531, in get_messages\r\n    return await it.collect()\r\n  File \"/Users/sanjeetsuhag/Library/Python/3.7/lib/python/site-packages/telethon/requestiter.py\", line 114, in collect\r\n    async for message in self:\r\n  File \"/Users/sanjeetsuhag/Library/Python/3.7/lib/python/site-packages/telethon/requestiter.py\", line 58, in __anext__\r\n    if await self._init(**self.kwargs):\r\n  File \"/Users/sanjeetsuhag/Library/Python/3.7/lib/python/site-packages/telethon/client/messages.py\", line 139, in _init\r\n    result = await self.client(self.request)\r\n  File \"/Users/sanjeetsuhag/Library/Python/3.7/lib/python/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.PeerIdNotSupportedError: The provided peer ID is not supported (caused by SearchRequest)\r\n```\r\n\r\n---\r\n\r\nI am following [the example provided in the API for getting the total number of Photos](https://docs.telethon.dev/en/latest/modules/client.html#telethon.client.messages.MessageMethods.get_messages), and instead trying to get the total number of PhoneCalls in a chat.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1434", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1434/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1434/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1434/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1434", "id": 598430406, "node_id": "MDU6SXNzdWU1OTg0MzA0MDY=", "number": 1434, "title": "Docs not clear about InviteToChannelRequest", "user": {"login": "itajackass", "id": 17260726, "node_id": "MDQ6VXNlcjE3MjYwNzI2", "avatar_url": "https://avatars2.githubusercontent.com/u/17260726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itajackass", "html_url": "https://github.com/itajackass", "followers_url": "https://api.github.com/users/itajackass/followers", "following_url": "https://api.github.com/users/itajackass/following{/other_user}", "gists_url": "https://api.github.com/users/itajackass/gists{/gist_id}", "starred_url": "https://api.github.com/users/itajackass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itajackass/subscriptions", "organizations_url": "https://api.github.com/users/itajackass/orgs", "repos_url": "https://api.github.com/users/itajackass/repos", "events_url": "https://api.github.com/users/itajackass/events{/privacy}", "received_events_url": "https://api.github.com/users/itajackass/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-12T07:42:47Z", "updated_at": "2020-04-12T08:00:41Z", "closed_at": "2020-04-12T08:00:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi i'm not sure is a docs no clear or other problem. \r\n\r\nBtw i've a channel that sponsorize my website. \r\n\r\nI've already some members who joined to my channel from link on my website, about 150 users. \r\n\r\nNow i want to add all my contacts friends on my mobile phone to my channel. \r\n\r\nI have all username of my friends. \r\n\r\nNow i tried to use function InviteToChannelRequest in a loop. Every 60 seconds I add a friend.\r\n\r\nI have about 80 friends to add. \r\n\r\nThe problem is when i reached 200 members ti my channel, function stop working and give to me error UserToMuchError..... \r\n\r\nBut from docs I understand i can add 200 user from my account, i 've to add only 80 friend but it stop after 50 users. \r\n\r\nDocs unclear or I wrong something? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1433", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1433/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1433/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1433/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1433", "id": 598351973, "node_id": "MDU6SXNzdWU1OTgzNTE5NzM=", "number": 1433, "title": "Add get_env helper from the examples to the main code", "user": {"login": "ov7a", "id": 4946730, "node_id": "MDQ6VXNlcjQ5NDY3MzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/4946730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ov7a", "html_url": "https://github.com/ov7a", "followers_url": "https://api.github.com/users/ov7a/followers", "following_url": "https://api.github.com/users/ov7a/following{/other_user}", "gists_url": "https://api.github.com/users/ov7a/gists{/gist_id}", "starred_url": "https://api.github.com/users/ov7a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ov7a/subscriptions", "organizations_url": "https://api.github.com/users/ov7a/orgs", "repos_url": "https://api.github.com/users/ov7a/repos", "events_url": "https://api.github.com/users/ov7a/events{/privacy}", "received_events_url": "https://api.github.com/users/ov7a/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-11T21:11:00Z", "updated_at": "2020-04-12T07:57:36Z", "closed_at": "2020-04-12T07:57:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[`get_env` function](https://github.com/LonamiWebs/Telethon/blob/master/telethon_examples/print_updates.py#L14) from telethon examples is a quite useful helper. I think it would be nice to add it to the main code.\r\n\r\nFirst, it shows a clean way to get one's head around storing api secrets. It can easily be reused in simple scripts.\r\n\r\nSecond, the examples can be a bit cleaner without duplicate code. \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1431", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1431/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1431/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1431/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1431", "id": 598071459, "node_id": "MDU6SXNzdWU1OTgwNzE0NTk=", "number": 1431, "title": "SearchResult returning partial items", "user": {"login": "Azorius291", "id": 63475031, "node_id": "MDQ6VXNlcjYzNDc1MDMx", "avatar_url": "https://avatars0.githubusercontent.com/u/63475031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Azorius291", "html_url": "https://github.com/Azorius291", "followers_url": "https://api.github.com/users/Azorius291/followers", "following_url": "https://api.github.com/users/Azorius291/following{/other_user}", "gists_url": "https://api.github.com/users/Azorius291/gists{/gist_id}", "starred_url": "https://api.github.com/users/Azorius291/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Azorius291/subscriptions", "organizations_url": "https://api.github.com/users/Azorius291/orgs", "repos_url": "https://api.github.com/users/Azorius291/repos", "events_url": "https://api.github.com/users/Azorius291/events{/privacy}", "received_events_url": "https://api.github.com/users/Azorius291/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-10T20:12:30Z", "updated_at": "2020-04-10T21:26:57Z", "closed_at": "2020-04-10T21:26:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm trying to search public channels in the global search that contain a certain keyword, when I try it with \r\n\r\n```\r\nresults = client(functions.contacts.SearchRequest(\r\n        q=keyword,\r\n        limit=100\r\n))\r\n```\r\n\r\nIt returns only the first 3 results that I can see in the telegram app too, but doesn't return the full search that I can see by pressing \"show more\" in the telegram app", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1429", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1429/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1429/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1429/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1429", "id": 596995534, "node_id": "MDU6SXNzdWU1OTY5OTU1MzQ=", "number": 1429, "title": "telethon.errors.common.TypeNotFoundError: Could not find a matching Constructor ID", "user": {"login": "BlackMambaaaa", "id": 57272140, "node_id": "MDQ6VXNlcjU3MjcyMTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/57272140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlackMambaaaa", "html_url": "https://github.com/BlackMambaaaa", "followers_url": "https://api.github.com/users/BlackMambaaaa/followers", "following_url": "https://api.github.com/users/BlackMambaaaa/following{/other_user}", "gists_url": "https://api.github.com/users/BlackMambaaaa/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlackMambaaaa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlackMambaaaa/subscriptions", "organizations_url": "https://api.github.com/users/BlackMambaaaa/orgs", "repos_url": "https://api.github.com/users/BlackMambaaaa/repos", "events_url": "https://api.github.com/users/BlackMambaaaa/events{/privacy}", "received_events_url": "https://api.github.com/users/BlackMambaaaa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-09T03:31:35Z", "updated_at": "2020-04-09T07:57:29Z", "closed_at": "2020-04-09T07:57:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a bot that relays messages from 2 telegram chats to my Botfather bot. Bot starts and runs fine but after few mins of being idle it throughs following error.\r\n\r\nI am on Python3.7 , Telethon version 0.19.6\r\nI have tried upgrading to latest Telethon but then it does not even starts and gives me workers update error.  I have also tried fix provided in #69 but still have same issue.\r\n\r\n```\r\nFile \"start_forward.py\", line 38, in <module>\r\n    client.idle()\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/telegram_bare_client.py\", line 696, in idle\r\n    self._sender.receive(update_state=self.updates)\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/network/mtproto_sender.py\", line 180, in receive\r\n    self._process_msg(remote_msg_id, remote_seq, reader, update_state)\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/network/mtproto_sender.py\", line 234, in _process_msg\r\n    return self._handle_container(msg_id, sequence, reader, state)\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/network/mtproto_sender.py\", line 392, in _handle_container\r\n    if not self._process_msg(inner_msg_id, sequence, reader, state):\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/network/mtproto_sender.py\", line 247, in _process_msg\r\n    obj = reader.tgread_object()\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/extensions/binary_reader.py\", line 143, in tgread_object\r\n    return clazz.from_reader(self)\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/tl/types/__init__.py\", line 20530, in from_reader\r\n    _x = reader.tgread_object()\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/extensions/binary_reader.py\", line 143, in tgread_object\r\n    return clazz.from_reader(self)\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/tl/types/__init__.py\", line 19149, in from_reader\r\n    _message = reader.tgread_object()\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/extensions/binary_reader.py\", line 143, in tgread_object\r\n    return clazz.from_reader(self)\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/tl/types/__init__.py\", line 10676, in from_reader\r\n    _media = reader.tgread_object()\r\n  File \"/usr/local/lib/python3.7/dist-packages/telethon/extensions/binary_reader.py\", line 141, in tgread_object\r\n    raise TypeNotFoundError(constructor_id)\r\ntelethon.errors.common.TypeNotFoundError: Could not find a matching Constructor ID for the TLObject that was supposed to be read with ID 0x7c4414d3. Most likely, a TLObject was trying to be read when it should not be read.\r\n\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1428", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1428/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1428/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1428/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1428", "id": 594408512, "node_id": "MDU6SXNzdWU1OTQ0MDg1MTI=", "number": 1428, "title": "asyncio:Task exception was never retrieved future: ... caused by GetFullChannelRequest", "user": {"login": "j4hangir", "id": 7769125, "node_id": "MDQ6VXNlcjc3NjkxMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/7769125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j4hangir", "html_url": "https://github.com/j4hangir", "followers_url": "https://api.github.com/users/j4hangir/followers", "following_url": "https://api.github.com/users/j4hangir/following{/other_user}", "gists_url": "https://api.github.com/users/j4hangir/gists{/gist_id}", "starred_url": "https://api.github.com/users/j4hangir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j4hangir/subscriptions", "organizations_url": "https://api.github.com/users/j4hangir/orgs", "repos_url": "https://api.github.com/users/j4hangir/repos", "events_url": "https://api.github.com/users/j4hangir/events{/privacy}", "received_events_url": "https://api.github.com/users/j4hangir/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-05T11:30:38Z", "updated_at": "2020-06-06T12:04:44Z", "closed_at": "2020-06-06T12:04:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting these sporadically:\r\n\r\n```ERROR:asyncio:Task exception was never retrievedfuture: <Task finished coro=<UpdateMethods._dispatch_update() done, defined at /opt/rh/rh-python36/root/usr/lib64/python3.6/site-packages/telethon/client/updates.py:379> exception=ChannelInvalidError('Invalid channel object. Make sure to pass the right types, for instance making sure that the request is designed for channelsor otherwise look for a different one more suited (caused by GetChannelDifferenceRequest)',)>\r\nTraceback (most recent call last):  File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/site-packages/telethon/client/updates.py\", line 388, in_dispatch_update\r\n    await self._get_difference(update, channel_id, pts_date)  File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/site-packages/telethon/client/updates.py\", line 479, in_get_difference\r\n    force=True  File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await futuretelethon.errors.rpcerrorlist.ChannelInvalidError: Invalid channel object. Make sure to pass the right types,for instance making sure that the request is designed for channels or otherwise look for a different one more suited (caused by GetChannelDifferenceRequest)```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1426", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1426/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1426/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1426/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1426", "id": 593347528, "node_id": "MDU6SXNzdWU1OTMzNDc1Mjg=", "number": 1426, "title": "FloodWaitError in client.download_media", "user": {"login": "max00xam", "id": 18701377, "node_id": "MDQ6VXNlcjE4NzAxMzc3", "avatar_url": "https://avatars0.githubusercontent.com/u/18701377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/max00xam", "html_url": "https://github.com/max00xam", "followers_url": "https://api.github.com/users/max00xam/followers", "following_url": "https://api.github.com/users/max00xam/following{/other_user}", "gists_url": "https://api.github.com/users/max00xam/gists{/gist_id}", "starred_url": "https://api.github.com/users/max00xam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/max00xam/subscriptions", "organizations_url": "https://api.github.com/users/max00xam/orgs", "repos_url": "https://api.github.com/users/max00xam/repos", "events_url": "https://api.github.com/users/max00xam/events{/privacy}", "received_events_url": "https://api.github.com/users/max00xam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-03T12:28:28Z", "updated_at": "2020-07-13T22:46:13Z", "closed_at": "2020-04-28T18:51:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\n\r\n@client.on(events.NewMessage())\r\nasync def message_handler(event):\r\n     await client.download_media(event.message)\r\n```\r\n\r\n**Traceback**\r\n```\r\nERROR:telethon.client.updates:Unhandled exception on message_handler\r\nTraceback (most recent call last):\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/client/updates.py\", line 428, in _dispatch_update\r\n    await callback(event)\r\n  File \"telegram.py\", line 1075, in message_handler\r\n    await client.download_media(event.message, download_filename)\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/client/downloads.py\", line 353, in download_media\r\n    media, file, date, thumb, progress_callback\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/client/downloads.py\", line 728, in _download_document\r\n    progress_callback=progress_callback\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/client/downloads.py\", line 436, in download_file\r\n    input_location, request_size=part_size, dc_id=dc_id):\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/requestiter.py\", line 75, in __anext__\r\n    if await self._load_next_chunk():\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/client/downloads.py\", line 60, in _load_next_chunk\r\n    cur = await self._request()\r\n  File \"/path/.local/lib/python3.7/site-packages/telethon/client/downloads.py\", line 70, in _request\r\n    result = await self._sender.send(self.request)\r\ntelethon.errors.rpcerrorlist.FloodWaitError: A wait of 49 seconds is required (caused by GetFileRequest)\r\n\r\n```\r\n\r\nHACK TO FIX:\r\ntelethon/client/downloads.py\r\nrows: 68 - 86\r\n\r\n```\r\n    async def _request(self):\r\n        result = None\r\n        count = 1\r\n        time_chunk = .3\r\n        max_retries = 15\r\n\r\n        while not result:\r\n           try:\r\n               result = await self._sender.send(self.request)\r\n           except:\r\n               if count > max_retries: break\r\n               self.client._log[__name__].info('ERROR retring in {}s'.format(count*time_chunk))\r\n               await asyncio.sleep(count * time_chunk) # maxxam\r\n               count += 1\r\n\r\n        try:\r\n            if not result:\r\n                await asyncio.sleep(30)\r\n                await self._sender.send(self.request)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1423", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1423/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1423/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1423/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1423", "id": 592118013, "node_id": "MDU6SXNzdWU1OTIxMTgwMTM=", "number": 1423, "title": "I don't recieve verification code", "user": {"login": "Magaknuto", "id": 52451888, "node_id": "MDQ6VXNlcjUyNDUxODg4", "avatar_url": "https://avatars1.githubusercontent.com/u/52451888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Magaknuto", "html_url": "https://github.com/Magaknuto", "followers_url": "https://api.github.com/users/Magaknuto/followers", "following_url": "https://api.github.com/users/Magaknuto/following{/other_user}", "gists_url": "https://api.github.com/users/Magaknuto/gists{/gist_id}", "starred_url": "https://api.github.com/users/Magaknuto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Magaknuto/subscriptions", "organizations_url": "https://api.github.com/users/Magaknuto/orgs", "repos_url": "https://api.github.com/users/Magaknuto/repos", "events_url": "https://api.github.com/users/Magaknuto/events{/privacy}", "received_events_url": "https://api.github.com/users/Magaknuto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-01T18:29:17Z", "updated_at": "2020-05-07T19:35:07Z", "closed_at": "2020-04-01T18:50:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to use telethon on ubuntu running on aws ec2 and I can't receve the code. Same is happening to my phone running ubuntu with linux deploy (with full root access).\r\nOn my main ubuntu computer I managed to get verification code and everything is working.\r\n\r\nthe error I get on other devices is \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"tutorial.py\", line 60, in <module>\r\n    client.loop.run_until_complete(main())\r\n  File \"/usr/lib/python3.6/asyncio/base_events.py\", line 468, in run_until_complete\r\n    return future.result()\r\n  File \"tutorial.py\", line 51, in main\r\n    channel = await client(GetChannelsRequest(id=['Real group example']))\r\n  File \"/home/magaknuto/.local/lib/python3.6/site-packages/telethon/client/users.pine 34, in __call__\r\n    await r.resolve(self, utils)\r\n  File \"/home/magaknuto/.local/lib/python3.6/site-packages/telethon/tl/functions/cls.py\", line 643, in resolve\r\n    _tmp.append(utils.get_input_channel(await client.get_input_entity(_x)))\r\n  File \"/home/magaknuto/.local/lib/python3.6/site-packages/telethon/client/users.pine 404, in get_input_entity\r\n    await self._get_entity_from_string(peer))\r\n  File \"/home/magaknuto/.local/lib/python3.6/site-packages/telethon/client/users.pine 538, in _get_entity_from_string\r\n    'Cannot find any entity corresponding to \"{}\"'.format(string)\r\nValueError: Cannot find any entity corresponding to \"Real group example\"\r\n```\r\n\r\nwith the unchanged code that worked before\r\nsame thing happens if I try to send message to gruop\r\n\r\nMy code is:\r\n```\r\nfrom telethon.tl.functions.channels import GetChannelsRequest, JoinChannelRequest\r\nfrom telethon import TelegramClient\r\nfrom telethon.tl.types import InputPeerChannel\r\nimport os\r\n\r\nsession_file = \"./my_cred.session\"\r\napi_id = \"1385502\"\r\napi_hash = \"319cc3dd4ce9b9addb263c44791fcd23\"\r\nphone = \"+387065021796\"\r\n\r\nasync def main():\r\n    # await client.send_message(\"Call me Johny\", 'Hello, this is test!')\r\n    channel = await client(GetChannelsRequest(id=['Real group example']))\r\n    print(channel)\r\n    print(channel.chats[0].access_hash)\r\n    chanel_entity = InputPeerChannel(\r\n        channel.chats[0].id, channel.chats[0].access_hash)\r\n    # await client(JoinChannelRequest(channel=chanel_entity))\r\n    await client.send_message(entity=chanel_entity, message=\"opet s akompjutera\")\r\n\r\nwith TelegramClient(session_file, api_id, api_hash) as client:\r\n    client.loop.run_until_complete(main())\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1420", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1420/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1420/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1420/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1420", "id": 589811246, "node_id": "MDU6SXNzdWU1ODk4MTEyNDY=", "number": 1420, "title": "events.MessageRead doesn't have any message in it", "user": {"login": "MehdiAghighi", "id": 34032643, "node_id": "MDQ6VXNlcjM0MDMyNjQz", "avatar_url": "https://avatars2.githubusercontent.com/u/34032643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MehdiAghighi", "html_url": "https://github.com/MehdiAghighi", "followers_url": "https://api.github.com/users/MehdiAghighi/followers", "following_url": "https://api.github.com/users/MehdiAghighi/following{/other_user}", "gists_url": "https://api.github.com/users/MehdiAghighi/gists{/gist_id}", "starred_url": "https://api.github.com/users/MehdiAghighi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MehdiAghighi/subscriptions", "organizations_url": "https://api.github.com/users/MehdiAghighi/orgs", "repos_url": "https://api.github.com/users/MehdiAghighi/repos", "events_url": "https://api.github.com/users/MehdiAghighi/events{/privacy}", "received_events_url": "https://api.github.com/users/MehdiAghighi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-29T15:00:32Z", "updated_at": "2020-04-13T09:40:20Z", "closed_at": "2020-04-13T09:40:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\n@client.on(events.MessageRead)\r\nasync def messageRead(event):\r\n    if event.is_private:\r\n        chat = await event.get_chat()\r\n        messages = await event.get_messages()\r\n        print(messages) # here\r\n        await client.send_message(\"me\", \"[\" + chat.username + \"]\" + \"(\" + \"https://t.me/\" + chat.username + \")\" + \" Has Read Your Message \" + \"\ud83d\udc47\")\r\n```\r\nin the code above where i am trying to print messages that are read, it tells me there are no messages and gives me below result when i am trying to print `messages`\r\n```\r\n[, total=0]\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1418", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1418/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1418/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1418/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1418", "id": 589279185, "node_id": "MDU6SXNzdWU1ODkyNzkxODU=", "number": 1418, "title": "AttributeError: 'TelegramClient' object has no attribute '_cache_media'", "user": {"login": "TishSerg", "id": 11420785, "node_id": "MDQ6VXNlcjExNDIwNzg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11420785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TishSerg", "html_url": "https://github.com/TishSerg", "followers_url": "https://api.github.com/users/TishSerg/followers", "following_url": "https://api.github.com/users/TishSerg/following{/other_user}", "gists_url": "https://api.github.com/users/TishSerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/TishSerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TishSerg/subscriptions", "organizations_url": "https://api.github.com/users/TishSerg/orgs", "repos_url": "https://api.github.com/users/TishSerg/repos", "events_url": "https://api.github.com/users/TishSerg/events{/privacy}", "received_events_url": "https://api.github.com/users/TishSerg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-27T17:10:25Z", "updated_at": "2020-03-29T08:28:01Z", "closed_at": "2020-03-29T08:15:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Version**\r\n```\r\n>>> import telethon; print(telethon.__version__)\r\n1.11.3\r\n```\r\n\r\n**Code that causes the issue**\r\n```python\r\nimport telethon\r\n...\r\nasync def callback_query_handler(event: telethon.events.CallbackQuery):\r\n    await event.edit(text='new text1', buttons=[telethon.Button.inline('New btn')])\r\n    pass\r\n...\r\nui_tg_bot = telethon.TelegramClient(...)\r\nui_tg_bot.add_event_handler(callback_query_handler, telethon.events.CallbackQuery)\r\nui_tg_bot.start(bot_token=bot_token)\r\nui_tg_bot.run_until_disconnected()\r\n```\r\n\r\n**Traceback**\r\n```\r\n[ERROR/2020-03-27 19:04:22,200] telethon.client.updates: Unhandled exception on callback_query_handler\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\\u2588\u2588\u2588\u2588\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\telethon\\client\\updates.py\", line 428, in _dispatch_update\r\n    await callback(event)\r\n  File \"D:\\Lab\\_repos\\\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\\\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588.py\", line 51, in callback_query_handler\r\n    await event.edit(text='new text1', buttons=[telethon.Button.inline('New btn')])\r\n  File \"C:\\Users\\\u2588\u2588\u2588\u2588\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\telethon\\events\\callbackquery.py\", line 318, in edit\r\n    return await self._client.edit_message(\r\n  File \"C:\\Users\\\u2588\u2588\u2588\u2588\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python38\\site-packages\\telethon\\client\\messages.py\", line 1049, in edit_message\r\n    await self._cache_media(msg, file, file_handle, image=image)\r\nAttributeError: 'TelegramClient' object has no attribute '_cache_media'\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1417", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1417/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1417/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1417/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1417", "id": 586693340, "node_id": "MDU6SXNzdWU1ODY2OTMzNDA=", "number": 1417, "title": "fake-tls MTProxy support", "user": {"login": "PayaMousavi", "id": 59400836, "node_id": "MDQ6VXNlcjU5NDAwODM2", "avatar_url": "https://avatars2.githubusercontent.com/u/59400836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PayaMousavi", "html_url": "https://github.com/PayaMousavi", "followers_url": "https://api.github.com/users/PayaMousavi/followers", "following_url": "https://api.github.com/users/PayaMousavi/following{/other_user}", "gists_url": "https://api.github.com/users/PayaMousavi/gists{/gist_id}", "starred_url": "https://api.github.com/users/PayaMousavi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PayaMousavi/subscriptions", "organizations_url": "https://api.github.com/users/PayaMousavi/orgs", "repos_url": "https://api.github.com/users/PayaMousavi/repos", "events_url": "https://api.github.com/users/PayaMousavi/events{/privacy}", "received_events_url": "https://api.github.com/users/PayaMousavi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-24T05:01:18Z", "updated_at": "2020-03-24T08:20:23Z", "closed_at": "2020-03-24T08:20:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1416", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1416/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1416/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1416/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1416", "id": 586385740, "node_id": "MDU6SXNzdWU1ODYzODU3NDA=", "number": 1416, "title": "cannot convert 'coroutine' object to bytes", "user": {"login": "2012mjm", "id": 3141834, "node_id": "MDQ6VXNlcjMxNDE4MzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3141834?v=4", "gravatar_id": "", "url": "https://api.github.com/users/2012mjm", "html_url": "https://github.com/2012mjm", "followers_url": "https://api.github.com/users/2012mjm/followers", "following_url": "https://api.github.com/users/2012mjm/following{/other_user}", "gists_url": "https://api.github.com/users/2012mjm/gists{/gist_id}", "starred_url": "https://api.github.com/users/2012mjm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/2012mjm/subscriptions", "organizations_url": "https://api.github.com/users/2012mjm/orgs", "repos_url": "https://api.github.com/users/2012mjm/repos", "events_url": "https://api.github.com/users/2012mjm/events{/privacy}", "received_events_url": "https://api.github.com/users/2012mjm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-23T17:25:29Z", "updated_at": "2020-03-23T21:07:45Z", "closed_at": "2020-03-23T21:07:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "cannot convert 'coroutine' object to bytes\r\n\r\n```python\r\nfrom telethon.tl.functions.photos import UploadProfilePhotoRequest\r\n\r\nasync def uploadPhoto(self):\r\n  await self.client(UploadProfilePhotoRequest(\r\n    file=self.client.upload_file('photos/image.jpg')\r\n  ))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1415", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1415/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1415/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1415/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1415", "id": 585747806, "node_id": "MDU6SXNzdWU1ODU3NDc4MDY=", "number": 1415, "title": "Trouble with uploading file from URL using client.send_file()", "user": {"login": "DragonightFury", "id": 37414171, "node_id": "MDQ6VXNlcjM3NDE0MTcx", "avatar_url": "https://avatars0.githubusercontent.com/u/37414171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DragonightFury", "html_url": "https://github.com/DragonightFury", "followers_url": "https://api.github.com/users/DragonightFury/followers", "following_url": "https://api.github.com/users/DragonightFury/following{/other_user}", "gists_url": "https://api.github.com/users/DragonightFury/gists{/gist_id}", "starred_url": "https://api.github.com/users/DragonightFury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DragonightFury/subscriptions", "organizations_url": "https://api.github.com/users/DragonightFury/orgs", "repos_url": "https://api.github.com/users/DragonightFury/repos", "events_url": "https://api.github.com/users/DragonightFury/events{/privacy}", "received_events_url": "https://api.github.com/users/DragonightFury/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-22T15:47:32Z", "updated_at": "2020-03-23T08:27:52Z", "closed_at": "2020-03-22T20:01:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```\r\nawait bot.client.send_file(\r\n                        bot.chat_id,\r\n                        \"https://storage.googleapis.com/paperplaneextdf.appspot.com/track.flac\",\r\n                        caption=\"Uploaded succesfully\",\r\n                        force_document=False,\r\n                        allow_cache=False,\r\n                        reply_to=bot.id)\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback info:\r\nTraceback (most recent call last):\r\n  File \"/home/dragonightfury/\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b/paperplaneextdf/userbot/events.py\", line 59, in wrapper\r\n    await func(check)\r\n  File \"/home/dragonightfury/\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b/paperplaneextdf/userbot/modules/evaluators.py\", line 224, in spotify_downloader\r\n    await bot.client.send_file(\r\n  File \"/usr/lib/python3.8/site-packages/telethon/client/uploads.py\", line 351, in send_file\r\n    msg = self._get_response_message(request, await self(request), entity)\r\n  File \"/usr/lib/python3.8/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.MediaEmptyError: The provided media object is invalid or the current account may not be able to send it (such as games as users) (caused by SendMediaRequest)\r\n\r\n```\r\nWhere my journey begins: I was trying to upload a .flac track with metadata. What did I try: hachoir, a bunch of FTP storages (i was able to get direct link to a file), Google Firebase, local storage. Google Firebase is the only one service that provides common direct link. I thought this problem was caused by FTP, but when i have set up Google Firebase and uploaded my file there, i got the same traceback. Uploading from local storage works fine, but without metadata.You can check that URL works by yourself. \r\n\r\nThanks for help, best wishes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1414", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1414/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1414/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1414/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1414", "id": 585632296, "node_id": "MDU6SXNzdWU1ODU2MzIyOTY=", "number": 1414, "title": "connect failed", "user": {"login": "leetomlee123", "id": 19498940, "node_id": "MDQ6VXNlcjE5NDk4OTQw", "avatar_url": "https://avatars3.githubusercontent.com/u/19498940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leetomlee123", "html_url": "https://github.com/leetomlee123", "followers_url": "https://api.github.com/users/leetomlee123/followers", "following_url": "https://api.github.com/users/leetomlee123/following{/other_user}", "gists_url": "https://api.github.com/users/leetomlee123/gists{/gist_id}", "starred_url": "https://api.github.com/users/leetomlee123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leetomlee123/subscriptions", "organizations_url": "https://api.github.com/users/leetomlee123/orgs", "repos_url": "https://api.github.com/users/leetomlee123/repos", "events_url": "https://api.github.com/users/leetomlee123/events{/privacy}", "received_events_url": "https://api.github.com/users/leetomlee123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-22T02:47:33Z", "updated_at": "2020-06-10T06:45:45Z", "closed_at": "2020-03-22T03:17:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "DEBUG:asyncio:Using proactor: IocpProactor\r\nINFO:telethon.network.mtprotosender:Connecting to 149.154.167.51:443/TcpFull...\r\nDEBUG:telethon.network.mtprotosender:Connection attempt 1...\r\nDEBUG:telethon.network.mtprotosender:Connection success!\r\nDEBUG:telethon.network.mtprotosender:New auth_key attempt 1...\r\nINFO:telethon.network.connection.connection:The server closed the connection\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nWARNING:telethon.network.mtprotosender:Connection error 1 during auth_key gen: ConnectionError: Not connected\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nDEBUG:telethon.network.mtprotosender:Connection attempt 2...\r\nDEBUG:telethon.network.mtprotosender:Connection success!\r\nDEBUG:telethon.network.mtprotosender:New auth_key attempt 2...\r\nINFO:telethon.network.connection.connection:The server closed the connection\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nWARNING:telethon.network.mtprotosender:Connection error 2 during auth_key gen: ConnectionError: Not connected\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nDEBUG:telethon.network.mtprotosender:Connection attempt 3...\r\nDEBUG:telethon.network.mtprotosender:Connection success!\r\nDEBUG:telethon.network.mtprotosender:New auth_key attempt 3...\r\nINFO:telethon.network.connection.connection:The server closed the connection\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nWARNING:telethon.network.mtprotosender:Connection error 3 during auth_key gen: ConnectionError: Not connected\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nDEBUG:telethon.network.mtprotosender:Connection attempt 4...\r\nWARNING:telethon.network.mtprotosender:Attempt 4 at connecting failed: ConnectionResetError: Connection lost\r\nDEBUG:telethon.network.mtprotosender:Connection attempt 5...\r\nDEBUG:telethon.network.mtprotosender:Connection success!\r\nDEBUG:telethon.network.mtprotosender:New auth_key attempt 5...\r\nINFO:telethon.network.connection.connection:The server closed the connection\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nWARNING:telethon.network.mtprotosender:Connection error 5 during auth_key gen: ConnectionError: Not connected\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nDEBUG:telethon.network.mtprotosender:Connection attempt 6...\r\nDEBUG:telethon.network.mtprotosender:Connection success!\r\nDEBUG:telethon.network.mtprotosender:New auth_key attempt 6...\r\nINFO:telethon.network.connection.connection:The server closed the connection\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nWARNING:telethon.network.mtprotosender:Connection error 6 during auth_key gen: ConnectionError: Not connected\r\nINFO:telethon.network.connection.connection:<class 'ConnectionResetError'> during disconnect: [WinError 64] \u6307\u5b9a\u7684\u7f51\u7edc\u540d\u4e0d\u518d\u53ef\u7528\u3002\r\nTraceback (most recent call last):\r\n  File \"C:/Users/lxv1/Desktop/source/hub/telegram.py\", line 106, in <module>\r\n    client.start()\r\n  File \"C:\\Users\\lxv1\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\telethon\\client\\auth.py\", line 132, in start\r\n    else self.loop.run_until_complete(coro)\r\n  File \"C:\\Users\\lxv1\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\asyncio\\base_events.py\", line 612, in run_until_complete\r\n    return future.result()\r\n  File \"C:\\Users\\lxv1\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\telethon\\client\\auth.py\", line 139, in _start\r\n    await self.connect()\r\n  File \"C:\\Users\\lxv1\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\telethon\\client\\telegrambaseclient.py\", line 439, in connect\r\n    if not await self._sender.connect(self._connection(\r\n  File \"C:\\Users\\lxv1\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\telethon\\network\\mtprotosender.py\", line 125, in connect\r\n    await self._connect()\r\n  File \"C:\\Users\\lxv1\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\telethon\\network\\mtprotosender.py\", line 250, in _connect\r\n    raise ConnectionError('Connection to Telegram failed {} time(s)'.format(self._retries))\r\nConnectionError: Connection to Telegram failed 5 time(s)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1413", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1413/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1413/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1413/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1413", "id": 585621621, "node_id": "MDU6SXNzdWU1ODU2MjE2MjE=", "number": 1413, "title": "telethon able to use v2ray?", "user": {"login": "moriweiji", "id": 18164265, "node_id": "MDQ6VXNlcjE4MTY0MjY1", "avatar_url": "https://avatars0.githubusercontent.com/u/18164265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moriweiji", "html_url": "https://github.com/moriweiji", "followers_url": "https://api.github.com/users/moriweiji/followers", "following_url": "https://api.github.com/users/moriweiji/following{/other_user}", "gists_url": "https://api.github.com/users/moriweiji/gists{/gist_id}", "starred_url": "https://api.github.com/users/moriweiji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moriweiji/subscriptions", "organizations_url": "https://api.github.com/users/moriweiji/orgs", "repos_url": "https://api.github.com/users/moriweiji/repos", "events_url": "https://api.github.com/users/moriweiji/events{/privacy}", "received_events_url": "https://api.github.com/users/moriweiji/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-22T01:19:58Z", "updated_at": "2020-03-22T20:03:42Z", "closed_at": "2020-03-22T20:03:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "telethon able to use v2ray? if it able to used\uff0cplease tell me how? thank you!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1412", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1412/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1412/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1412/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1412", "id": 585591699, "node_id": "MDU6SXNzdWU1ODU1OTE2OTk=", "number": 1412, "title": "ValueError: Could not find the input entity for <telethon.tl.types.PeerUser object at 0x7f972ec6e400>. ", "user": {"login": "Shhishsh", "id": 19343306, "node_id": "MDQ6VXNlcjE5MzQzMzA2", "avatar_url": "https://avatars3.githubusercontent.com/u/19343306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shhishsh", "html_url": "https://github.com/Shhishsh", "followers_url": "https://api.github.com/users/Shhishsh/followers", "following_url": "https://api.github.com/users/Shhishsh/following{/other_user}", "gists_url": "https://api.github.com/users/Shhishsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shhishsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shhishsh/subscriptions", "organizations_url": "https://api.github.com/users/Shhishsh/orgs", "repos_url": "https://api.github.com/users/Shhishsh/repos", "events_url": "https://api.github.com/users/Shhishsh/events{/privacy}", "received_events_url": "https://api.github.com/users/Shhishsh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-21T21:47:54Z", "updated_at": "2020-03-22T20:00:40Z", "closed_at": "2020-03-22T20:00:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is my Code: \r\n``` try:\r\n\tclient(ImportChatInviteRequest(gruppoF))\r\nexcept Exception:\r\n\tprint(\"Gia' ci sono\")\r\nchatinvite=client(CheckChatInviteRequest(gruppoF))\r\ngruppoF=chatinvite.chat.id\r\nresult=client(GetParticipantsRequest(channel=gruppoF,filter=types.ChannelParticipantsRecent(),offset=42,limit=20000,hash=0))```\r\n\r\nThe error:\r\nValueError: Could not find the input entity for <telethon.tl.types.PeerUser object at 0x7f972ec6e400>. Please read https://docs.telethon.dev/en/latest/concepts/entities.html to find out more details.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1411", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1411/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1411/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1411/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1411", "id": 585532388, "node_id": "MDU6SXNzdWU1ODU1MzIzODg=", "number": 1411, "title": "Conversation.cancel_all() and Conversation.cancel() seems not to be working ", "user": {"login": "thekillgfx", "id": 39156526, "node_id": "MDQ6VXNlcjM5MTU2NTI2", "avatar_url": "https://avatars3.githubusercontent.com/u/39156526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thekillgfx", "html_url": "https://github.com/thekillgfx", "followers_url": "https://api.github.com/users/thekillgfx/followers", "following_url": "https://api.github.com/users/thekillgfx/following{/other_user}", "gists_url": "https://api.github.com/users/thekillgfx/gists{/gist_id}", "starred_url": "https://api.github.com/users/thekillgfx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thekillgfx/subscriptions", "organizations_url": "https://api.github.com/users/thekillgfx/orgs", "repos_url": "https://api.github.com/users/thekillgfx/repos", "events_url": "https://api.github.com/users/thekillgfx/events{/privacy}", "received_events_url": "https://api.github.com/users/thekillgfx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-21T16:30:44Z", "updated_at": "2020-04-28T19:02:45Z", "closed_at": "2020-04-28T19:02:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nimport asyncio\r\nfrom telethon import functions, types\r\nfrom telethon import TelegramClient, events\r\n\r\nimport logging\r\nlogging.basicConfig(level=logging.WARNING)\r\n\r\nclient = None\r\n\r\ndef start_session():\r\n    global client\r\n    client = TelegramClient('session_name', 'api_id', 'api_hash')\r\n    client.start()\r\n\r\nasync def main():\r\n    user = await client.get_input_entity('yourtag')\r\n    try:\r\n        async with client.conversation(user) as conv:  \r\n            await conv.send_message('conversation started')\r\n            await client.conversation(user).cancel_all() #tried also with conv.cancel()\r\n            await conv.send_message('why am I working?')            \r\n    except asyncio.TimeoutError:\r\n        html = '\ud83d\udde3 conversation timed out'\r\n        await client.send_message(user, html, parse_mode='html')\r\n    except asyncio.CancelledError:\r\n        html = '\ud83d\udde3 conversation has been cancelled'\r\n        await client.send_message(user, html, parse_mode='html')\r\n\r\nstart_session()\r\nloop = asyncio.get_event_loop()\r\nloop.run_until_complete(main())\r\n```\r\n\r\n**Traceback**\r\nThere isn't any traceback or error, but ```await conv.send_message('why am I working?')``` should raise error and it doesn't, or at least it shouldn't send the message since the ```Conversation``` has been cancelled.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1410", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1410/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1410/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1410/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1410", "id": 585446788, "node_id": "MDU6SXNzdWU1ODU0NDY3ODg=", "number": 1410, "title": "event twice  trigger", "user": {"login": "du5", "id": 54979375, "node_id": "MDQ6VXNlcjU0OTc5Mzc1", "avatar_url": "https://avatars3.githubusercontent.com/u/54979375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/du5", "html_url": "https://github.com/du5", "followers_url": "https://api.github.com/users/du5/followers", "following_url": "https://api.github.com/users/du5/following{/other_user}", "gists_url": "https://api.github.com/users/du5/gists{/gist_id}", "starred_url": "https://api.github.com/users/du5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/du5/subscriptions", "organizations_url": "https://api.github.com/users/du5/orgs", "repos_url": "https://api.github.com/users/du5/repos", "events_url": "https://api.github.com/users/du5/events{/privacy}", "received_events_url": "https://api.github.com/users/du5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-21T07:17:28Z", "updated_at": "2020-03-21T08:57:29Z", "closed_at": "2020-03-21T07:45:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import TelegramClient, events, sync, functions, types\r\napi_id = 123455\r\napi_hash = \"xxxxxxx\"\r\nclient = TelegramClient(\"xxx\", api_id, api_hash)\r\nclient.start()\r\nme = client.get_me()\r\n\r\n@client.on(events.NewMessage)\r\nasync def handler(event):\r\n    if \"xxx\" == event.raw_text:\r\n         ...\r\n    elif \"xxxx\" == event.raw_text or \"xxxxx\" == event.raw_text[0:5]:\r\n        ...\r\n    elif len(event.raw_text.split()) in [2, 3, 4] and \"/rate\" == event.raw_text[0:5]:\r\n        print(event.id)\r\n\r\nwith client:\r\n    # This remembers the events.NewMessage we registered before\r\n    client.add_event_handler(handler)\r\n    print(\"(Press Ctrl+C to stop this)\")\r\n    client.run_until_disconnected()\r\n\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\n(Press Ctrl+C to stop this)\r\n973138\r\n973138\r\n```\r\n![image](https://user-images.githubusercontent.com/54979375/77221670-a8ccb880-6b86-11ea-8131-b61824aa5b6d.png)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1409", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1409/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1409/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1409/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1409", "id": 583599161, "node_id": "MDU6SXNzdWU1ODM1OTkxNjE=", "number": 1409, "title": "Fast accounts ban", "user": {"login": "kallibr44", "id": 24863106, "node_id": "MDQ6VXNlcjI0ODYzMTA2", "avatar_url": "https://avatars0.githubusercontent.com/u/24863106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kallibr44", "html_url": "https://github.com/kallibr44", "followers_url": "https://api.github.com/users/kallibr44/followers", "following_url": "https://api.github.com/users/kallibr44/following{/other_user}", "gists_url": "https://api.github.com/users/kallibr44/gists{/gist_id}", "starred_url": "https://api.github.com/users/kallibr44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kallibr44/subscriptions", "organizations_url": "https://api.github.com/users/kallibr44/orgs", "repos_url": "https://api.github.com/users/kallibr44/repos", "events_url": "https://api.github.com/users/kallibr44/events{/privacy}", "received_events_url": "https://api.github.com/users/kallibr44/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-18T09:44:07Z", "updated_at": "2020-03-18T10:12:52Z", "closed_at": "2020-03-18T10:12:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "api_id = 1336220  # API ID  (banned credential)\r\napi_hash = \"b6bc04d81b9503415b3175ad34cda94a\"  # API Hash (banned credential)\r\nphone_number = \"+79123123123\" \r\nclient = TelegramClient('qqqq', api_id, api_hash, connection=connection.ConnectionTcpMTProxyRandomizedIntermediate, proxy=('proxy.digitalresistance.dog', 443, 'd41d8cd98f00b204e9800998ecf8427e'))\r\n\r\nclient.start()\r\n\r\nasync def main():\r\n    dp =await client.get_dialogs()\r\n    print(dp)\r\n\r\n\r\nif __name__ == '__main__':\r\n    with client:\r\n        client.loop.run_until_complete(main())\r\n\r\ni'm ran this code and after this 1 request i got ban on my acount. Also, i got ban on 5 more accs with this code. Do you know how to solve this problem? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1408", "id": 583494925, "node_id": "MDU6SXNzdWU1ODM0OTQ5MjU=", "number": 1408, "title": "error when tring to use client.send_file for multiple photos", "user": {"login": "ram-sh", "id": 5938042, "node_id": "MDQ6VXNlcjU5MzgwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5938042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ram-sh", "html_url": "https://github.com/ram-sh", "followers_url": "https://api.github.com/users/ram-sh/followers", "following_url": "https://api.github.com/users/ram-sh/following{/other_user}", "gists_url": "https://api.github.com/users/ram-sh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ram-sh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ram-sh/subscriptions", "organizations_url": "https://api.github.com/users/ram-sh/orgs", "repos_url": "https://api.github.com/users/ram-sh/repos", "events_url": "https://api.github.com/users/ram-sh/events{/privacy}", "received_events_url": "https://api.github.com/users/ram-sh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-18T06:19:38Z", "updated_at": "2020-08-03T12:12:35Z", "closed_at": "2020-03-18T16:26:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nUsing Python 3.7.5 and Telethon 1.11.3.\r\n\r\nfollowing the example from [Telethon documentation](https://docs.telethon.dev/en/latest/modules/client.html) \r\n\r\n```\r\n# Albums\r\nawait client.send_file(chat, [\r\n    '/my/photos/holiday1.jpg',\r\n    '/my/photos/holiday2.jpg',\r\n    '/my/drawings/portrait.png'\r\n])\r\n```\r\n\r\nwhen trying to send more than one photo using client.send_file i get \"Media invalid (caused by SendMultiMediaRequest)\" error.\r\n\r\nwhen sending a single photo there is no error:\r\n`await client.send_file(contact, 'http://s3.amazonaws.com/tn1.app/0.png')`\r\n\r\nthe error occurs when trying to send more than one photo:\r\n`await client.send_file(contact, ['http://s3.amazonaws.com/tn1.app/0.png', 'http://s3.amazonaws.com/tn1.app/2.png'])`\r\n\r\nthanks much in advance!\r\nRS", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1407", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1407/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1407/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1407/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1407", "id": 582433091, "node_id": "MDU6SXNzdWU1ODI0MzMwOTE=", "number": 1407, "title": "using TDlib vs MTProto", "user": {"login": "aminraisy", "id": 9150403, "node_id": "MDQ6VXNlcjkxNTA0MDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/9150403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aminraisy", "html_url": "https://github.com/aminraisy", "followers_url": "https://api.github.com/users/aminraisy/followers", "following_url": "https://api.github.com/users/aminraisy/following{/other_user}", "gists_url": "https://api.github.com/users/aminraisy/gists{/gist_id}", "starred_url": "https://api.github.com/users/aminraisy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aminraisy/subscriptions", "organizations_url": "https://api.github.com/users/aminraisy/orgs", "repos_url": "https://api.github.com/users/aminraisy/repos", "events_url": "https://api.github.com/users/aminraisy/events{/privacy}", "received_events_url": "https://api.github.com/users/aminraisy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-16T16:26:25Z", "updated_at": "2020-04-05T10:42:10Z", "closed_at": "2020-04-05T10:42:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "@Lonami I read the wiki [advantages of MTProto over HTTP-Bot_API](https://github.com/LonamiWebs/Telethon/wiki/MTProto-vs-HTTP-Bot-API) \r\nwould you please have a comparison between MTProto libraries vs TDLib libraries (for example [airgram](https://github.com/airgram/airgram/)). any advantages using MTproto over TDLib ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1405", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1405/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1405/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1405/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1405", "id": 581670369, "node_id": "MDU6SXNzdWU1ODE2NzAzNjk=", "number": 1405, "title": "`event.new_pin==False` when pinning message in small group (in channels/megagroups it works OK)", "user": {"login": "TishSerg", "id": 11420785, "node_id": "MDQ6VXNlcjExNDIwNzg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11420785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TishSerg", "html_url": "https://github.com/TishSerg", "followers_url": "https://api.github.com/users/TishSerg/followers", "following_url": "https://api.github.com/users/TishSerg/following{/other_user}", "gists_url": "https://api.github.com/users/TishSerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/TishSerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TishSerg/subscriptions", "organizations_url": "https://api.github.com/users/TishSerg/orgs", "repos_url": "https://api.github.com/users/TishSerg/repos", "events_url": "https://api.github.com/users/TishSerg/events{/privacy}", "received_events_url": "https://api.github.com/users/TishSerg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-15T13:15:37Z", "updated_at": "2020-04-27T20:05:07Z", "closed_at": "2020-04-27T19:17:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Checklist**\r\n* [\u2714 ] The error is in the library's code, and not in my own.\r\n* [\u2714 ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [\u2714 ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nimport telethon\r\n...\r\nasync def chat_action_handler(event: telethon.events.ChatAction):\r\n    print(event.stringify())\r\n    pass\r\n...\r\nui_tg_bot = telethon.TelegramClient(...)\r\nui_tg_bot.add_event_handler(chat_action_handler,    telethon.events.ChatAction)\r\nui_tg_bot.start(bot_token=bot_token)\r\nui_tg_bot.run_until_disconnected()\r\n```\r\n\r\n**print(event.stringify()) where event: telethon.events.ChatAction**\r\n(sensitive data is removed)\r\n```\r\nChatAction.Event(\r\n        action_message=MessageService(\r\n                id=381,\r\n                to_id=PeerChat(\r\n                        chat_id=2\u2588\u2588\u2588\u2588\u2588\u2588\u25888\r\n                ),\r\n                date=datetime.datetime(2020, 3, 15, 13, 2, 26, tzinfo=datetime.timezone.utc),\r\n                action=MessageActionPinMessage(\r\n                ),\r\n                out=False,\r\n                mentioned=False,\r\n                media_unread=False,\r\n                silent=True,\r\n                post=False,\r\n                legacy=False,\r\n                from_id=1\u2588\u2588\u2588\u2588\u2588\u2588\u25886,\r\n                reply_to_msg_id=None\r\n        ),\r\n        original_update=UpdateNewMessage(\r\n                message=MessageService(\r\n                        id=381,\r\n                        to_id=PeerChat(\r\n                                chat_id=2\u2588\u2588\u2588\u2588\u2588\u2588\u25888\r\n                        ),\r\n                        date=datetime.datetime(2020, 3, 15, 13, 2, 26, tzinfo=datetime.timezone.utc),\r\n                        action=MessageActionPinMessage(\r\n                        ),\r\n                        out=False,\r\n                        mentioned=False,\r\n                        media_unread=False,\r\n                        silent=True,\r\n                        post=False,\r\n                        legacy=False,\r\n                        from_id=1\u2588\u2588\u2588\u2588\u2588\u2588\u25886,\r\n                        reply_to_msg_id=None\r\n                ),\r\n                pts=804,\r\n                pts_count=1\r\n        ),\r\n        new_pin=False,\r\n        new_photo=False,\r\n        photo=None,\r\n        user_added=False,\r\n        user_joined=False,\r\n        user_left=False,\r\n        user_kicked=False,\r\n        unpin=None,\r\n        created=False,\r\n        new_title=None\r\n)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1404", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1404/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1404/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1404/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1404", "id": 581095706, "node_id": "MDU6SXNzdWU1ODEwOTU3MDY=", "number": 1404, "title": "send_file method ignore thumbnail if file has been previously uploaded", "user": {"login": "kfur", "id": 23473905, "node_id": "MDQ6VXNlcjIzNDczOTA1", "avatar_url": "https://avatars1.githubusercontent.com/u/23473905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kfur", "html_url": "https://github.com/kfur", "followers_url": "https://api.github.com/users/kfur/followers", "following_url": "https://api.github.com/users/kfur/following{/other_user}", "gists_url": "https://api.github.com/users/kfur/gists{/gist_id}", "starred_url": "https://api.github.com/users/kfur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kfur/subscriptions", "organizations_url": "https://api.github.com/users/kfur/orgs", "repos_url": "https://api.github.com/users/kfur/repos", "events_url": "https://api.github.com/users/kfur/events{/privacy}", "received_events_url": "https://api.github.com/users/kfur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-14T07:58:29Z", "updated_at": "2020-03-14T11:28:33Z", "closed_at": "2020-03-14T11:13:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfile = client.upload_file(file_path)\r\nclient.send_file(file, thumb=thumb_path)\r\n```\r\n\r\nI think bug is located here https://github.com/LonamiWebs/Telethon/blob/68438f462127fa02021f40a0e2d686072978a264/telethon/client/uploads.py#L642\r\nif this condition true then thumbnail will be ignored", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1401", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1401/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1401/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1401/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1401", "id": 579072645, "node_id": "MDU6SXNzdWU1NzkwNzI2NDU=", "number": 1401, "title": "telethon.errors.rpcerrorlist.FloodWaitError while sending message to batch of phone numbers", "user": {"login": "umax", "id": 14619, "node_id": "MDQ6VXNlcjE0NjE5", "avatar_url": "https://avatars1.githubusercontent.com/u/14619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umax", "html_url": "https://github.com/umax", "followers_url": "https://api.github.com/users/umax/followers", "following_url": "https://api.github.com/users/umax/following{/other_user}", "gists_url": "https://api.github.com/users/umax/gists{/gist_id}", "starred_url": "https://api.github.com/users/umax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umax/subscriptions", "organizations_url": "https://api.github.com/users/umax/orgs", "repos_url": "https://api.github.com/users/umax/repos", "events_url": "https://api.github.com/users/umax/events{/privacy}", "received_events_url": "https://api.github.com/users/umax/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-11T07:53:56Z", "updated_at": "2020-03-19T22:30:23Z", "closed_at": "2020-03-11T08:10:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\nwith TelegramClient('anon', API_ID, API_HASH) as client:\r\n    for phone_number in phone_numbers:\r\n        await client.send_message(phone_number, 'test message')\r\n```\r\n\r\n**Traceback**\r\n```\r\nfunctions.contacts.GetContactsRequest(0))).users:\r\n  File \"/Users/plastun/venv/telethon/lib/python3.7/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.FloodWaitError: A wait of 6991 seconds is required (caused by GetContactsRequest)\r\n```\r\n\r\nIs there any efficient way to send messages to my contacts?\r\nI just want to send message to all my contacts.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1400", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1400/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1400/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1400/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1400", "id": 578976193, "node_id": "MDU6SXNzdWU1Nzg5NzYxOTM=", "number": 1400, "title": "AttributeError: 'InputFileBig' object has no attribute 'md5' while sending album", "user": {"login": "drforse", "id": 46328218, "node_id": "MDQ6VXNlcjQ2MzI4MjE4", "avatar_url": "https://avatars1.githubusercontent.com/u/46328218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drforse", "html_url": "https://github.com/drforse", "followers_url": "https://api.github.com/users/drforse/followers", "following_url": "https://api.github.com/users/drforse/following{/other_user}", "gists_url": "https://api.github.com/users/drforse/gists{/gist_id}", "starred_url": "https://api.github.com/users/drforse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drforse/subscriptions", "organizations_url": "https://api.github.com/users/drforse/orgs", "repos_url": "https://api.github.com/users/drforse/repos", "events_url": "https://api.github.com/users/drforse/events{/privacy}", "received_events_url": "https://api.github.com/users/drforse/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T02:57:30Z", "updated_at": "2020-03-11T09:43:33Z", "closed_at": "2020-03-11T09:43:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [ ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```\r\nawait client.send_file(entity=CHANNEL_ID, file=(long_vid_path, short_vid_path, pic_path), caption=caption, parse_mode='html')\r\n```\r\n\r\n**Traceback**\r\n```\r\n2020-03-11T01:21:17.933069+00:00 app[bot.1]: Traceback (most recent call last):\r\n2020-03-11T01:21:17.933070+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/aiogram/dispatcher/dispatcher.py\", line 332, in _process_polling_updates\r\n2020-03-11T01:21:17.933071+00:00 app[bot.1]: for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):\r\n2020-03-11T01:21:17.933072+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/aiogram/dispatcher/dispatcher.py\", line 188, in process_updates\r\n2020-03-11T01:21:17.933072+00:00 app[bot.1]: return await asyncio.gather(*tasks)\r\n2020-03-11T01:21:17.933073+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/aiogram/dispatcher/handler.py\", line 117, in notify\r\n2020-03-11T01:21:17.933073+00:00 app[bot.1]: response = await handler_obj.handler(*args, **partial_data)\r\n2020-03-11T01:21:17.933074+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/aiogram/dispatcher/dispatcher.py\", line 208, in process_update\r\n2020-03-11T01:21:17.933074+00:00 app[bot.1]: return await self.message_handlers.notify(update.message)\r\n2020-03-11T01:21:17.933075+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/aiogram/dispatcher/handler.py\", line 117, in notify\r\n2020-03-11T01:21:17.933075+00:00 app[bot.1]: response = await handler_obj.handler(*args, **partial_data)\r\n2020-03-11T01:21:17.933076+00:00 app[bot.1]: File \"/app/bot_funcs.py\", line 14, in post_now\r\n2020-03-11T01:21:17.933077+00:00 app[bot.1]: await post_porn()\r\n2020-03-11T01:21:17.933077+00:00 app[bot.1]: File \"/app/main.py\", line 36, in post_porn\r\n2020-03-11T01:21:17.933078+00:00 app[bot.1]: await client.send_file(entity=CHANNEL_ID, file=(vid.info.download_path, demo_path, thumb_path), caption=caption, parse_mode='html')\r\n2020-03-11T01:21:17.933078+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/telethon/client/uploads.py\", line 299, in send_file\r\n2020-03-11T01:21:17.933078+00:00 app[bot.1]: result += await self._send_album(\r\n2020-03-11T01:21:17.933079+00:00 app[bot.1]: File \"/app/.heroku/python/lib/python3.8/site-packages/telethon/client/uploads.py\", line 402, in _send_album\r\n2020-03-11T01:21:17.933079+00:00 app[bot.1]: fh.md5, fh.size, utils.get_input_document(r.document))\r\n2020-03-11T01:21:17.933080+00:00 app[bot.1]: AttributeError: 'InputFileBig' object has no attribute 'md5'\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1399", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1399/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1399/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1399/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1399", "id": 577344296, "node_id": "MDU6SXNzdWU1NzczNDQyOTY=", "number": 1399, "title": "PeerFloodError", "user": {"login": "JepsonHerts", "id": 53977233, "node_id": "MDQ6VXNlcjUzOTc3MjMz", "avatar_url": "https://avatars0.githubusercontent.com/u/53977233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JepsonHerts", "html_url": "https://github.com/JepsonHerts", "followers_url": "https://api.github.com/users/JepsonHerts/followers", "following_url": "https://api.github.com/users/JepsonHerts/following{/other_user}", "gists_url": "https://api.github.com/users/JepsonHerts/gists{/gist_id}", "starred_url": "https://api.github.com/users/JepsonHerts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JepsonHerts/subscriptions", "organizations_url": "https://api.github.com/users/JepsonHerts/orgs", "repos_url": "https://api.github.com/users/JepsonHerts/repos", "events_url": "https://api.github.com/users/JepsonHerts/events{/privacy}", "received_events_url": "https://api.github.com/users/JepsonHerts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-07T14:44:19Z", "updated_at": "2020-03-07T14:51:31Z", "closed_at": "2020-03-07T14:50:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "When i make new userbot and try to message an user, it give me this error:\r\n ```Traceback (most recent call last):\r\n  File \"prova2.py\", line 26, in <module>\r\n    client(SendMessageRequest(peer=\"JepsonHerts\", message=\"Sei un grande\"))\r\n  File \"/root/.local/lib/python3.6/site-packages/telethon/sync.py\", line 39, in syncified\r\n    return loop.run_until_complete(coro)\r\n  File \"/usr/lib/python3.6/asyncio/base_events.py\", line 484, in run_until_complete\r\n    return future.result()\r\n  File \"/root/.local/lib/python3.6/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.PeerFloodError: Too many requests (caused by SendMessageRequest)\r\n``` ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1398", "id": 576325288, "node_id": "MDU6SXNzdWU1NzYzMjUyODg=", "number": 1398, "title": "Editing of messages shared via bot inline queries, breaks for some users", "user": {"login": "Nukesor", "id": 3322822, "node_id": "MDQ6VXNlcjMzMjI4MjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/3322822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nukesor", "html_url": "https://github.com/Nukesor", "followers_url": "https://api.github.com/users/Nukesor/followers", "following_url": "https://api.github.com/users/Nukesor/following{/other_user}", "gists_url": "https://api.github.com/users/Nukesor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nukesor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nukesor/subscriptions", "organizations_url": "https://api.github.com/users/Nukesor/orgs", "repos_url": "https://api.github.com/users/Nukesor/repos", "events_url": "https://api.github.com/users/Nukesor/events{/privacy}", "received_events_url": "https://api.github.com/users/Nukesor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-03-05T15:13:30Z", "updated_at": "2020-04-05T09:00:46Z", "closed_at": "2020-04-03T16:37:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey @Lonami\r\nI reported the issue yesterday in your chat, and created a minimal example and steps on how to reproduce the issue.\r\n\r\n**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\nI wrote a minimal example that can be found over here:\r\nhttps://github.com/nukesor/debug\r\n\r\n1. Clone\r\n2. `poetry install`\r\n3. `poetry run python main.py`\r\n4. Insert your bot credentials api_id/api_hash into `debug.toml`\r\n5. `poetry run python main.py`\r\n6. Send a inline query. Be aware, it doesn't fail for every user.\r\n7. Feel free to request a message from @dasMerlon (that's also her telegram handle). She agreed on being contacted by you and it fails consistently for her.\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/nuke/repos/ultimate_pollbot/pollbot/helper/update.py\", line 139, in update_reference\r\n    await client.edit_message(\r\n  File \"/home/nuke/.cache/pypoetry/virtualenvs/ultimate-pollbot-Jkq_D4LD-py3.8/lib/python3.8/site-packages/telethon/client/messages.py\", line 1028, in edit_message\r\n    return await self(functions.messages.EditInlineBotMessageRequest(\r\n  File \"/home/nuke/.cache/pypoetry/virtualenvs/ultimate-pollbot-Jkq_D4LD-py3.8/lib/python3.8/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.MessageIdInvalidError: The specified message ID is invalid or you can't do that operation on such message (caused by EditInlineBotMessageRequest)\r\nThe specified message ID is invalid or you can't do that operation on such message (caused by EditInlineBotMessageRequest)\r\n```\r\n\r\nThe original message from your support chat:\r\n\r\nOver the course of the last two weeks, I migrated @ultimate_pollbot from PTB to Telethon and I'm happy to announce that the rewrite went live today.\r\n\r\nHowever, I'm getting some very weird Telegram exceptions in production.\r\nThe bot is running as a Telegram Bot. Telethon version is 1.11.3, Python 3.8\r\n\r\nFor some users (there's no apparent pattern), editing of messages shared via inline query fail with this error:\r\n```\r\nThe specified message ID is invalid or you can't do that operation on such message (caused by EditInlineBotMessageRequest)\r\n```\r\nAfter some trial and error, I also found that directly editing via Inline Button CallbackEvents from such messages via event.edit('some text') fail with the exact same error.\r\n\r\nI investigated events from those messages in all affected event handlers, and id/dc_id/access_hash are the same in every handler/event.\r\n\r\nThe error occurs in chats, private chats and supergroups. But there is absolutely no pattern.\r\nFor some people it doesn't work at all (deterministically), for some it only works in certain chats, for some it works all the time (for instance me).\r\n\r\nThe inline query message is an article.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1396", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1396/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1396/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1396/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1396", "id": 572257800, "node_id": "MDU6SXNzdWU1NzIyNTc4MDA=", "number": 1396, "title": "Update docs with examples of progress_callback", "user": {"login": "Aeres-u99", "id": 26499754, "node_id": "MDQ6VXNlcjI2NDk5NzU0", "avatar_url": "https://avatars3.githubusercontent.com/u/26499754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aeres-u99", "html_url": "https://github.com/Aeres-u99", "followers_url": "https://api.github.com/users/Aeres-u99/followers", "following_url": "https://api.github.com/users/Aeres-u99/following{/other_user}", "gists_url": "https://api.github.com/users/Aeres-u99/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aeres-u99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aeres-u99/subscriptions", "organizations_url": "https://api.github.com/users/Aeres-u99/orgs", "repos_url": "https://api.github.com/users/Aeres-u99/repos", "events_url": "https://api.github.com/users/Aeres-u99/events{/privacy}", "received_events_url": "https://api.github.com/users/Aeres-u99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-27T18:03:31Z", "updated_at": "2020-02-28T11:35:46Z", "closed_at": "2020-02-28T10:50:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to run my program which basically downloads media from a channel. \r\nThe code snippet from quickstart section\r\n```\r\nif message.video:\r\n\u258f   path = await message.download_media(progress_callback(total))\r\n\u258f   print(\"Saved: \",path)\r\n```\r\nthis helps me in downloading the file but does not displays the progress.\r\nFrom referring to the docs I could find this, but I am unable to understand how to use the callback for the purpose. Kindly provide me with an explanation.\r\n[download_media()](https://docs.telethon.dev/en/latest/modules/client.html#telethon.client.downloads.DownloadMethods) ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1395", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1395/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1395/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1395/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1395", "id": 571929342, "node_id": "MDU6SXNzdWU1NzE5MjkzNDI=", "number": 1395, "title": "Prepare for Python 3.10 removal of loop argument", "user": {"login": "Lonami", "id": 6297805, "node_id": "MDQ6VXNlcjYyOTc4MDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/6297805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lonami", "html_url": "https://github.com/Lonami", "followers_url": "https://api.github.com/users/Lonami/followers", "following_url": "https://api.github.com/users/Lonami/following{/other_user}", "gists_url": "https://api.github.com/users/Lonami/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lonami/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lonami/subscriptions", "organizations_url": "https://api.github.com/users/Lonami/orgs", "repos_url": "https://api.github.com/users/Lonami/repos", "events_url": "https://api.github.com/users/Lonami/events{/privacy}", "received_events_url": "https://api.github.com/users/Lonami/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-27T09:15:13Z", "updated_at": "2020-03-11T09:55:36Z", "closed_at": "2020-03-11T09:55:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nDeprecationWarning: The loop argument is deprecated and scheduled for removal in Python 3.10.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1394", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1394/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1394/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1394/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1394", "id": 571695036, "node_id": "MDU6SXNzdWU1NzE2OTUwMzY=", "number": 1394, "title": "Update ideas for pin_message()", "user": {"login": "thekillgfx", "id": 39156526, "node_id": "MDQ6VXNlcjM5MTU2NTI2", "avatar_url": "https://avatars3.githubusercontent.com/u/39156526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thekillgfx", "html_url": "https://github.com/thekillgfx", "followers_url": "https://api.github.com/users/thekillgfx/followers", "following_url": "https://api.github.com/users/thekillgfx/following{/other_user}", "gists_url": "https://api.github.com/users/thekillgfx/gists{/gist_id}", "starred_url": "https://api.github.com/users/thekillgfx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thekillgfx/subscriptions", "organizations_url": "https://api.github.com/users/thekillgfx/orgs", "repos_url": "https://api.github.com/users/thekillgfx/repos", "events_url": "https://api.github.com/users/thekillgfx/events{/privacy}", "received_events_url": "https://api.github.com/users/thekillgfx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431466823, "node_id": "MDU6TGFiZWw0MzE0NjY4MjM=", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Nice to have things that are not a bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-26T22:16:54Z", "updated_at": "2020-04-29T08:29:44Z", "closed_at": "2020-04-29T08:29:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here are two ideas to change the way [pin_message](https://docs.telethon.dev/en/latest/modules/client.html#telethon.client.messages.MessageMethods.pin_message) method works.\r\n\r\n1) `pin_message` should return the same as [UpdatePinnedMessageRequest](https://tl.telethon.dev/methods/messages/update_pinned_message.html) does instead of `None`.\r\n\r\n2) I would also recommend to add an argument to `pin_message`, something that let the user choose between deleting the `message service` or not; it could be deleted without asking imo since I find it so annoying, but maybe someone likes/needs it. \r\nUsing `UpdatePinnedMessageRequest` I discovered that: \r\n```\r\nresult = await client(functions.messages.UpdatePinnedMessageRequest(\r\n  peer=chat,\r\n  id=message.id,\r\n  silent=True\r\n))\r\nservice_message = result.updates[2].message\r\n```\r\n\r\nI hope I've provided all the infos needed let me know if you need some clarification.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1392", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1392/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1392/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1392/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1392", "id": 568115280, "node_id": "MDU6SXNzdWU1NjgxMTUyODA=", "number": 1392, "title": "iter_messages returns objects with corrupted MessageEntityUrl entries.", "user": {"login": "akamaus", "id": 58955, "node_id": "MDQ6VXNlcjU4OTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/58955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akamaus", "html_url": "https://github.com/akamaus", "followers_url": "https://api.github.com/users/akamaus/followers", "following_url": "https://api.github.com/users/akamaus/following{/other_user}", "gists_url": "https://api.github.com/users/akamaus/gists{/gist_id}", "starred_url": "https://api.github.com/users/akamaus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akamaus/subscriptions", "organizations_url": "https://api.github.com/users/akamaus/orgs", "repos_url": "https://api.github.com/users/akamaus/repos", "events_url": "https://api.github.com/users/akamaus/events{/privacy}", "received_events_url": "https://api.github.com/users/akamaus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T07:52:54Z", "updated_at": "2020-02-20T08:55:05Z", "closed_at": "2020-02-20T08:55:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [X ] The error is in the library's code, and not in my own.\r\n* [X ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nimport telethon as T\r\ntg = T.TelegramClient(**credentials)\r\nawait tg.start(**auth_data)\r\n\r\nfor m in tg.iter_messages('habmingazeta', offset_id=18979): \r\n    print(m.to_dict()) \r\n    break\r\n```\r\n\r\nLets inspect some snippets from object returned (sorry, it's in russian, but we only need http url parts). \r\n```\r\nIn [13]: m.message[:500]                                                                                                                                                                              \r\nOut[13]: '\u041e \u0433\u043b\u0430\u0432\u043d\u043e\u043c \u043a \u044d\u0442\u043e\u043c\u0443 \u0447\u0430\u0441\u0443:\\n\\n\ud83d\udd3a\u0420\u043e\u0441\u0441\u0438\u044f \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442 \u0436\u0435\u043b\u0435\u0437\u043d\u043e\u0434\u043e\u0440\u043e\u0436\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u041a\u0438\u0442\u0430\u0435\u043c \u0441 3 \u0444\u0435\u0432\u0440\u0430\u043b\u044f http://amp.gs/uyuV\\n\\n\ud83d\udd3a\u0412 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u0445 \u0430\u043f\u0442\u0435\u043a\u0430\u0445 \u0434\u0435\u0444\u0438\u0446\u0438\u0442 \u043c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u0438\u0445 \u043c\u0430\u0441\u043e\u043a http://amp.gs/uyu9\\n\\n\ud83d\udd3a\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u00ab\u0441\u043a\u043e\u0440\u044b\u0435\u00bb \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044f\u0442 \u043d\u0430 \u0430\u0443\u0442\u0441\u043e\u0440\u0441\u0438\u043d\u0433. \u0412\u043e\u0434\u0438\u0442\u0435\u043b\u0438 \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0443\u044e\u0442 http://amp.gs/uyu4\\n\\n\ud83d\udd3a\u0412 \u0422\u043e\u043c\u0441\u043a\u0435 \u0443 \u0441\u0430\u043c\u043e\u043b\u0435\u0442\u0430 Bombardier \u043f\u0440\u0438 \u043f\u043e\u0441\u0430\u0434\u043a\u0435 \u0440\u0430\u0437\u0440\u0443\u0448\u0438\u043b\u043e\u0441\u044c \u0448\u0430\u0441\u0441\u0438 http://amp.gs/uyuR\\n\\n\ud83d\udd3a\u0412\u0426\u0418\u041e\u041c: \u0421\u0430\u043c\u044b\u0435 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0438\u0437 \u043f\u043e\u043f\u0440\u0430\u0432\u043e\u043a \u0432 \u041a\u043e\u043d\u0441\u0442\u0438\u0442\u0443\u0446\u0438\u044e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 90 \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u0432 \u0440\u043e\u0441\u0441\u0438\u044f\u043d http://amp.gs/uyuU\\n\\n\ud83d\udd3a\u0412\u0435\u0440\u043d\u0443\u0432\u0448\u0438\u0435\u0441\u044f \u0441 \u043d\u043e\u0432\u043e\u0433\u043e\u0434\u043d\u0438\u0445 \u043a\u0430\u043d\u0438\u043a\u0443\u043b \u043a'\r\n\r\nIn [15]: m.entities[0].to_dict()                                                                                                                                                                                 \r\nOut[15]: {'_': 'MessageEntityUrl', 'offset': 101, 'length': 18}\r\n\r\nIn [17]: m.entities[1].to_dict()                                                                                                                                                                                 \r\nOut[17]: {'_': 'MessageEntityUrl', 'offset': 170, 'length': 18}\r\n\r\nIn [18]: m.message[101:101+18]                                                                                                                                                                                   \r\nOut[18]: 'ttp://amp.gs/uyuV\\n'\r\n\r\nIn [19]: m.message[170:170+18]                                                                                                                                                                                   \r\nOut[19]: 'tp://amp.gs/uyu9\\n\\n'\r\n```\r\n\r\nYou see, URL position is displaced and the displacement grows with each new entity. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1391", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1391/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1391/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1391/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1391", "id": 566441294, "node_id": "MDU6SXNzdWU1NjY0NDEyOTQ=", "number": 1391, "title": "send_file doesn't work with videos", "user": {"login": "uzlov", "id": 8656239, "node_id": "MDQ6VXNlcjg2NTYyMzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8656239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uzlov", "html_url": "https://github.com/uzlov", "followers_url": "https://api.github.com/users/uzlov/followers", "following_url": "https://api.github.com/users/uzlov/following{/other_user}", "gists_url": "https://api.github.com/users/uzlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/uzlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uzlov/subscriptions", "organizations_url": "https://api.github.com/users/uzlov/orgs", "repos_url": "https://api.github.com/users/uzlov/repos", "events_url": "https://api.github.com/users/uzlov/events{/privacy}", "received_events_url": "https://api.github.com/users/uzlov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-17T17:40:33Z", "updated_at": "2020-02-17T18:29:34Z", "closed_at": "2020-02-17T18:29:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "send_file can send album of videos (files is the list of telethon.tl.types.MessageMediaDocument)\r\nI have only the first video after the sending.\r\nand send_file doesn't have a supporting of message for whole album\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1390", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1390/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1390/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1390/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1390", "id": 566310640, "node_id": "MDU6SXNzdWU1NjYzMTA2NDA=", "number": 1390, "title": "New generation mtproto in Telethon ", "user": {"login": "amir124", "id": 5613106, "node_id": "MDQ6VXNlcjU2MTMxMDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5613106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amir124", "html_url": "https://github.com/amir124", "followers_url": "https://api.github.com/users/amir124/followers", "following_url": "https://api.github.com/users/amir124/following{/other_user}", "gists_url": "https://api.github.com/users/amir124/gists{/gist_id}", "starred_url": "https://api.github.com/users/amir124/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amir124/subscriptions", "organizations_url": "https://api.github.com/users/amir124/orgs", "repos_url": "https://api.github.com/users/amir124/repos", "events_url": "https://api.github.com/users/amir124/events{/privacy}", "received_events_url": "https://api.github.com/users/amir124/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-17T13:47:44Z", "updated_at": "2020-02-17T16:04:32Z", "closed_at": "2020-02-17T14:28:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nTelethon  support 16 hex\r\nThe new Mtprpto is  32 hex or +60 hex\r\nI want to use a new mtproto\r\nBut your code is error with new generation mtproto\r\nWhat is your solution and suggestion for use?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1388", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1388/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1388/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1388/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1388", "id": 564628203, "node_id": "MDU6SXNzdWU1NjQ2MjgyMDM=", "number": 1388, "title": "Documumentation Typos Report.", "user": {"login": "nitanmarcel", "id": 41646249, "node_id": "MDQ6VXNlcjQxNjQ2MjQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/41646249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nitanmarcel", "html_url": "https://github.com/nitanmarcel", "followers_url": "https://api.github.com/users/nitanmarcel/followers", "following_url": "https://api.github.com/users/nitanmarcel/following{/other_user}", "gists_url": "https://api.github.com/users/nitanmarcel/gists{/gist_id}", "starred_url": "https://api.github.com/users/nitanmarcel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nitanmarcel/subscriptions", "organizations_url": "https://api.github.com/users/nitanmarcel/orgs", "repos_url": "https://api.github.com/users/nitanmarcel/repos", "events_url": "https://api.github.com/users/nitanmarcel/events{/privacy}", "received_events_url": "https://api.github.com/users/nitanmarcel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-13T11:44:07Z", "updated_at": "2020-02-28T10:50:54Z", "closed_at": "2020-02-28T10:50:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Events Reference \r\n- https://docs.telethon.dev/en/latest/quick-references/events-reference.html#events-reference\r\n\r\n\r\n**NewMessage**, **MessageEdited** and **MessageDeleted** has no attributes documented like the other events reference:\r\n\r\n- https://docs.telethon.dev/en/latest/quick-references/events-reference.html#newmessage\r\n\r\n\r\n- [ChatAction](https://docs.telethon.dev/en/latest/quick-references/events-reference.html#chataction)\r\n\r\n`user`, `users`, have incomplete documentation strings. It stops after __(e.g.__ without any continuation\r\n\r\n# Objects Reference\r\n- https://docs.telethon.dev/en/latest/quick-references/objects-reference.html\r\n\r\n[InlineResult](https://docs.telethon.dev/en/latest/quick-references/objects-reference.html#inlineresult)\r\n\r\nThe following types:\r\n\r\n``ARTICLE \t\r\nPHOTO \t\r\nGIF \t\r\nVIDEO \t\r\nVIDEO_GIF \t\r\nAUDIO \t\r\nDOCUMENT \t\r\nLOCATION \t\r\nVENUE \t\r\nCONTACT``\r\n\r\nAre not documented. I don't know if this is intended but I will report them anyway.\r\n\r\n# Not Documented:\r\n\r\n- ``400: SCHEDULE_STATUS_PRIVATE`` (you can't schedule a message when someone comes online if their status is private).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1386", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1386/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1386/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1386/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1386", "id": 564147562, "node_id": "MDU6SXNzdWU1NjQxNDc1NjI=", "number": 1386, "title": "The phone code entered invalid", "user": {"login": "JepsonHerts", "id": 53977233, "node_id": "MDQ6VXNlcjUzOTc3MjMz", "avatar_url": "https://avatars0.githubusercontent.com/u/53977233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JepsonHerts", "html_url": "https://github.com/JepsonHerts", "followers_url": "https://api.github.com/users/JepsonHerts/followers", "following_url": "https://api.github.com/users/JepsonHerts/following{/other_user}", "gists_url": "https://api.github.com/users/JepsonHerts/gists{/gist_id}", "starred_url": "https://api.github.com/users/JepsonHerts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JepsonHerts/subscriptions", "organizations_url": "https://api.github.com/users/JepsonHerts/orgs", "repos_url": "https://api.github.com/users/JepsonHerts/repos", "events_url": "https://api.github.com/users/JepsonHerts/events{/privacy}", "received_events_url": "https://api.github.com/users/JepsonHerts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-12T17:19:11Z", "updated_at": "2020-02-12T20:28:13Z", "closed_at": "2020-02-12T18:28:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nThis is my code:\r\nclient=TelegramClient(sessione, api_id, api_hash)\r\n\tclient.connect()\r\n\tphone=input(\"Number: \")\r\n\tclient.send_code_request(phone)\r\n\tcode = input('Sms: ')\r\n\tclient.sign_up(code, first_name=input(\"Nome: \"), last_name=input(\"Cognome: \"))\r\n\r\nWhen i put the Sms code, it gives me an error saying that it is invalid with the error .....telethon.errors.rpc_error_list.PhoneCodeInvalidError: The phone code entered was invalid\r\n\r\nBut if I change the code to:\r\n\tclient=TelegramClient(sessione, api_id, api_hash)\r\n\tclient.connect()\r\n\tphone=input(\"Inserisci numero: \")\r\n\tclient.send_code_request(phone)\r\n\tcode = input('Codice sms: ')\r\n\tclient.start(phone)\r\nIT WORKS but it create an user with no name and last name etc...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1385", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1385/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1385/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1385/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1385", "id": 563256017, "node_id": "MDU6SXNzdWU1NjMyNTYwMTc=", "number": 1385, "title": "send flac file failed", "user": {"login": "mengyyy", "id": 10589755, "node_id": "MDQ6VXNlcjEwNTg5NzU1", "avatar_url": "https://avatars1.githubusercontent.com/u/10589755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mengyyy", "html_url": "https://github.com/mengyyy", "followers_url": "https://api.github.com/users/mengyyy/followers", "following_url": "https://api.github.com/users/mengyyy/following{/other_user}", "gists_url": "https://api.github.com/users/mengyyy/gists{/gist_id}", "starred_url": "https://api.github.com/users/mengyyy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mengyyy/subscriptions", "organizations_url": "https://api.github.com/users/mengyyy/orgs", "repos_url": "https://api.github.com/users/mengyyy/repos", "events_url": "https://api.github.com/users/mengyyy/events{/privacy}", "received_events_url": "https://api.github.com/users/mengyyy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-11T14:46:26Z", "updated_at": "2020-02-11T22:11:05Z", "closed_at": "2020-02-11T15:06:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Python 3.8.1 \r\nUbuntu 18 .04 x64\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\nbot = TelegramClient(\"bot\", API_ID, API_HASH).start(bot_token=BOT_TOKEN)\r\nresult = await bot.send_file(chat, file=\"./test.flac\", caption=\"send test.flac, parse_mode=\"html\", force_document=True)\r\n...\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\n[warn] [/metadata] Duplicate field name Key 'stream_info' already exists\r\n[warn] [/metadata] Duplicate field name Key 'stream_info' already exists\r\n[warn] [/metadata] Duplicate field name Key 'stream_info' already exists\r\n[warn] [/metadata] Duplicate field name Key 'stream_info' already exists\r\n[warn] [/metadata] Duplicate field name Key 'stream_info' already exists\r\n....\r\nUntil all memory exhaust\r\nCtrl +C \r\nUniqKeyError                              Traceback (most recent call last)\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _addField(self, field)\r\n    193         try:\r\n--> 194             self._fields.append(field._name, field)\r\n    195         except UniqKeyError as err:\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/core/dict.py in append(self, key, value)\r\n     66         if key in self._index:\r\n---> 67             raise UniqKeyError(\"Key '%s' already exists\" % key)\r\n     68         self._index[key] = len(self._value_list)\r\n\r\nUniqKeyError: Key 'stream_info' already exists\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nKeyboardInterrupt                         Traceback (most recent call last)\r\n<ipython-input-11-3d5b904dcbd4> in <module>\r\n----> 1 result = await bot.send_file(chat, file=file_path, caption=caption, parse_mode=\"html\", force_document=True)\r\n\r\n/usr/local/lib/python3.8/dist-packages/telethon/client/uploads.py in send_file(self, entity, file, caption, force_document, clear_draft, progress_callback, reply_to, attributes, thumb, allow_cache, parse_mode, voice_note, video_note, buttons, silent, supports_streaming, schedule, **kwargs)\r\n    331                 await self._parse_message_text(caption, parse_mode)\r\n    332\r\n--> 333         file_handle, media, image = await self._file_to_media(\r\n    334             file, force_document=force_document,\r\n    335             progress_callback=progress_callback,\r\n\r\n/usr/local/lib/python3.8/dist-packages/telethon/client/uploads.py in _file_to_media(self, file, force_document, progress_callback, attributes, thumb, allow_cache, voice_note, video_note, supports_streaming, mime_type, as_image)\r\n    672             media = types.InputMediaUploadedPhoto(file_handle)\r\n    673         else:\r\n--> 674             attributes, mime_type = utils.get_attributes(\r\n    675                 file,\r\n    676                 mime_type=mime_type,\r\n\r\n/usr/local/lib/python3.8/dist-packages/telethon/utils.py in get_attributes(file, attributes, mime_type, force_document, voice_note, video_note, supports_streaming)\r\n    604\r\n    605     if is_audio(file):\r\n--> 606         m = _get_metadata(file)\r\n    607         if m:\r\n    608             attr_dict[types.DocumentAttributeAudio] = \\\r\n\r\n/usr/local/lib/python3.8/dist-packages/telethon/utils.py in _get_metadata(file)\r\n    583         try:\r\n    584             with hachoir.parser.createParser(file) as parser:\r\n--> 585                 return hachoir.metadata.extractMetadata(parser)\r\n    586         except Exception as e:\r\n    587             _log.warning('Failed to analyze %s: %s %s', file, e.__class__, e)\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/metadata/metadata.py in extractMetadata(parser, quality)\r\n    326     metadata = extractor(quality)\r\n    327     try:\r\n--> 328         metadata.extract(parser)\r\n    329     except Exception as err:\r\n    330         error(\"Error during metadata extraction: %s\" % str(err))\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/metadata/audio.py in extract(self, flac)\r\n    409\r\n    410     def extract(self, flac):\r\n--> 411         if \"metadata/stream_info/content\" in flac:\r\n    412             self.useStreamInfo(flac[\"metadata/stream_info/content\"])\r\n    413         if \"metadata/comment/content\" in flac:\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/field.py in __contains__(self, key)\r\n    271         \"\"\"\r\n    272         try:\r\n--> 273             return self.getField(key, False) is not None\r\n    274         except FieldError:\r\n    275             return False\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in getField(self, key, const)\r\n    231                 raise MissingField(self, key)\r\n    232             return self._fields.values[key]\r\n--> 233         return Field.getField(self, key, const)\r\n    234\r\n    235     def _truncate(self, size):\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/field.py in getField(self, key, const)\r\n    250                 current = self\r\n    251             for part in key.split(\"/\"):\r\n--> 252                 field = current._getField(part, const)\r\n    253                 if field is None:\r\n    254                     raise MissingField(current, part)\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _getField(self, name, const)\r\n    219                 field = self._fields[name]\r\n    220             elif self._field_generator is not None and not const:\r\n--> 221                 field = self._feedUntil(name)\r\n    222         return field\r\n    223\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _feedUntil(self, field_name)\r\n    331             while True:\r\n    332                 field = next(self._field_generator)\r\n--> 333                 self._addField(field)\r\n    334                 if field.name == field_name:\r\n    335                     return field\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _addField(self, field)\r\n    168         self.__is_feeding = True\r\n    169         try:\r\n--> 170             field.size\r\n    171         except Exception as err:\r\n    172             if field.is_field_set and field.current_length and field.eof:\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _getSize(self)\r\n    112     def _getSize(self):\r\n    113         if self._size is None:\r\n--> 114             self._feedAll()\r\n    115         return self._size\r\n    116     size = property(\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _feedAll(self)\r\n    366             while True:\r\n    367                 field = next(self._field_generator)\r\n--> 368                 self._addField(field)\r\n    369         except StopIteration:\r\n    370             self._stopFeeding()\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/generic_field_set.py in _addField(self, field)\r\n    196             self.warning(\"Duplicate field name \" + str(err))\r\n    197             field._name += \"[]\"\r\n--> 198             self.setUniqueFieldName(field)\r\n    199             self._fields.append(field._name, field)\r\n    200         if ask_stop:\r\n\r\n/usr/local/lib/python3.8/dist-packages/hachoir/field/basic_field_set.py in setUniqueFieldName(self, field)\r\n    121         except KeyError:\r\n    122             self._field_array_count[key] = 0\r\n--> 123         field._name = key + \"[%u]\" % self._field_array_count[key]\r\n    124\r\n    125     def readFirstFields(self, number):\r\n\r\nKeyboardInterrupt:\r\n\r\n```\r\n\r\nHere you can get this flac file\r\nhttps://files.catbox.moe/zzcy3k.flac\r\n\r\nmd5sum test.flac\r\n17b710198fff0a12f8369f6e8c04f4f1  test.flac\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1383", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1383/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1383/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1383/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1383", "id": 560751952, "node_id": "MDU6SXNzdWU1NjA3NTE5NTI=", "number": 1383, "title": "Asks for phone number in vscode and is stuck", "user": {"login": "RajeshSivadasan", "id": 36217458, "node_id": "MDQ6VXNlcjM2MjE3NDU4", "avatar_url": "https://avatars1.githubusercontent.com/u/36217458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RajeshSivadasan", "html_url": "https://github.com/RajeshSivadasan", "followers_url": "https://api.github.com/users/RajeshSivadasan/followers", "following_url": "https://api.github.com/users/RajeshSivadasan/following{/other_user}", "gists_url": "https://api.github.com/users/RajeshSivadasan/gists{/gist_id}", "starred_url": "https://api.github.com/users/RajeshSivadasan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RajeshSivadasan/subscriptions", "organizations_url": "https://api.github.com/users/RajeshSivadasan/orgs", "repos_url": "https://api.github.com/users/RajeshSivadasan/repos", "events_url": "https://api.github.com/users/RajeshSivadasan/events{/privacy}", "received_events_url": "https://api.github.com/users/RajeshSivadasan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-06T03:14:02Z", "updated_at": "2020-06-06T19:09:47Z", "closed_at": "2020-06-06T19:09:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "While trying to run basic code, it is asking for phone number or bot token and is stuck there.\r\n![telethon](https://user-images.githubusercontent.com/36217458/73902732-b969ed80-48bc-11ea-80df-eef479998fb0.jpg)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1382", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1382/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1382/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1382/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1382", "id": 559795111, "node_id": "MDU6SXNzdWU1NTk3OTUxMTE=", "number": 1382, "title": "get_chat() caused struct.error: required argument is not an integer", "user": {"login": "dmitriyl", "id": 1176425, "node_id": "MDQ6VXNlcjExNzY0MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1176425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitriyl", "html_url": "https://github.com/dmitriyl", "followers_url": "https://api.github.com/users/dmitriyl/followers", "following_url": "https://api.github.com/users/dmitriyl/following{/other_user}", "gists_url": "https://api.github.com/users/dmitriyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitriyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitriyl/subscriptions", "organizations_url": "https://api.github.com/users/dmitriyl/orgs", "repos_url": "https://api.github.com/users/dmitriyl/repos", "events_url": "https://api.github.com/users/dmitriyl/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitriyl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-04T15:29:08Z", "updated_at": "2020-02-09T15:58:48Z", "closed_at": "2020-02-09T15:58:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [V] The error is in the library's code, and not in my own.\r\n* [V] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [V] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon import *\r\nimport logging\r\n\r\nlogging.basicConfig(format='[%(levelname) 5s/%(asctime)s] %(name)s: %(message)s', level=logging.WARNING)\r\napp_id = *my-id*\r\napi_hash = *my-hash*\r\n\r\nclient = TelegramClient('session_name', app_id, api_hash)\r\n\r\n@client.on(events.NewMessage)\r\nasync def my_event_handler(event: events.newmessage.NewMessage.Event):\r\n    chat: types.Chat = await event.get_chat()\r\n    print(f\"({chat.title}) - {event.raw_text}\")\r\n\r\n\r\nclient.start()\r\nclient.run_until_disconnected()\r\n...\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\n[ERROR/0000-00-00 00:00:00,000] telethon.client.updates: Unhandled exception on my_event_handler\r\nTraceback (most recent call last):\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/client/updates.py\", line 428, in _dispatch_update\r\n    await callback(event)\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/app2.py\", line 12, in my_event_handler\r\n    chat: types.Chat = await event.get_chat()\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/tl/custom/chatgetter.py\", line 50, in get_chat\r\n    await self._client.get_entity(self._input_chat)\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/client/users.py\", line 284, in get_entity\r\n    functions.messages.GetChatsRequest(chats))).chats\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/client/users.py\", line 53, in __call__\r\n    future = self._sender.send(request, ordered=ordered)\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/network/mtprotosender.py\", line 172, in send\r\n    state = RequestState(request, self._loop)\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/network/requeststate.py\", line 17, in __init__\r\n    self.data = bytes(request)\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/tl/functions/messages.py\", line 1146, in __bytes__\r\n    b'\\x15\\xc4\\xb5\\x1c',struct.pack('<i', len(self.id)),b''.join(struct.pack('<i', x) for x in self.id),\r\n  File \"/Users/dmitry/PycharmProjects/telegram-parser/venv/lib/python3.7/site-packages/telethon/tl/functions/messages.py\", line 1146, in <genexpr>\r\n    b'\\x15\\xc4\\xb5\\x1c',struct.pack('<i', len(self.id)),b''.join(struct.pack('<i', x) for x in self.id),\r\nstruct.error: required argument is not an integer\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1381", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1381/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1381/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1381/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1381", "id": 559273418, "node_id": "MDU6SXNzdWU1NTkyNzM0MTg=", "number": 1381, "title": "ChatAction not detecting when user joins via invitation link a Supergroup/channel", "user": {"login": "alexmeri98", "id": 28692057, "node_id": "MDQ6VXNlcjI4NjkyMDU3", "avatar_url": "https://avatars0.githubusercontent.com/u/28692057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexmeri98", "html_url": "https://github.com/alexmeri98", "followers_url": "https://api.github.com/users/alexmeri98/followers", "following_url": "https://api.github.com/users/alexmeri98/following{/other_user}", "gists_url": "https://api.github.com/users/alexmeri98/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexmeri98/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexmeri98/subscriptions", "organizations_url": "https://api.github.com/users/alexmeri98/orgs", "repos_url": "https://api.github.com/users/alexmeri98/repos", "events_url": "https://api.github.com/users/alexmeri98/events{/privacy}", "received_events_url": "https://api.github.com/users/alexmeri98/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-03T19:05:09Z", "updated_at": "2020-02-03T19:05:42Z", "closed_at": "2020-02-03T19:05:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've already posted this doubt in: [Stack Oveflow Post](https://stackoverflow.com/questions/60045482/telethon-chataction-event-not-detecting-when-user-joins-a-channel)\r\nI'll be so thanksfull if you check it out. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1380", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1380/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1380/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1380/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1380", "id": 557452597, "node_id": "MDU6SXNzdWU1NTc0NTI1OTc=", "number": 1380, "title": "How I increase view in telegram post", "user": {"login": "Mrnvdp07", "id": 59812903, "node_id": "MDQ6VXNlcjU5ODEyOTAz", "avatar_url": "https://avatars0.githubusercontent.com/u/59812903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mrnvdp07", "html_url": "https://github.com/Mrnvdp07", "followers_url": "https://api.github.com/users/Mrnvdp07/followers", "following_url": "https://api.github.com/users/Mrnvdp07/following{/other_user}", "gists_url": "https://api.github.com/users/Mrnvdp07/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mrnvdp07/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mrnvdp07/subscriptions", "organizations_url": "https://api.github.com/users/Mrnvdp07/orgs", "repos_url": "https://api.github.com/users/Mrnvdp07/repos", "events_url": "https://api.github.com/users/Mrnvdp07/events{/privacy}", "received_events_url": "https://api.github.com/users/Mrnvdp07/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-30T12:10:15Z", "updated_at": "2020-01-30T12:43:43Z", "closed_at": "2020-01-30T12:43:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [ ] The error is in the library's code, and not in my own.\r\n* [ ] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [ ] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfrom telethon.sync import TelegramClient\r\n...\r\n\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"code.py\", line 1, in <code>\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}]}