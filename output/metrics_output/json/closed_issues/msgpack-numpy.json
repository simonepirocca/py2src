{"total_count": 34, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/41", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/41/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/41/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/41", "id": 665281157, "node_id": "MDU6SXNzdWU2NjUyODExNTc=", "number": 41, "title": "Problem with multidimensional arrays", "user": {"login": "matiasdahl", "id": 10188263, "node_id": "MDQ6VXNlcjEwMTg4MjYz", "avatar_url": "https://avatars0.githubusercontent.com/u/10188263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matiasdahl", "html_url": "https://github.com/matiasdahl", "followers_url": "https://api.github.com/users/matiasdahl/followers", "following_url": "https://api.github.com/users/matiasdahl/following{/other_user}", "gists_url": "https://api.github.com/users/matiasdahl/gists{/gist_id}", "starred_url": "https://api.github.com/users/matiasdahl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matiasdahl/subscriptions", "organizations_url": "https://api.github.com/users/matiasdahl/orgs", "repos_url": "https://api.github.com/users/matiasdahl/repos", "events_url": "https://api.github.com/users/matiasdahl/events{/privacy}", "received_events_url": "https://api.github.com/users/matiasdahl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-24T16:29:33Z", "updated_at": "2020-07-28T11:36:44Z", "closed_at": "2020-07-28T07:38:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi. There seems to be a problem with handling multidimensional numpy arrays.  At least on linux and python 3.8.\r\n\r\nTo reproduce\r\n\r\n```bash\r\ndocker run -it --rm -p 5678:5678 python:3.8.1-slim-buster /bin/bash\r\n\r\napt -y update \r\napt -y upgrade\r\n\r\npython --version   # Python 3.8.1\r\n\r\npip3 install jupyter==1.0.0 msgpack==0.6.2 msgpack-numpy==0.4.6.post0 numpy==1.18.2\r\n\r\n# Start jupyter notebook in docker\r\njupyter notebook --port 5678 --ip 0.0.0.0 --allow-root\r\n\r\n# Opening a notebook browser window gives the following environment\r\nimport sys\r\nprint(sys.platform) # linux\r\nprint(sys.version) # 3.8.1 (default, Feb  2 2020, 08:49:34) [GCC 8.3.0]\r\n```\r\n\r\nThe below example from the README works. We can serialize and deserialize 1d numpy arrays.\r\n\r\n```python\r\nimport msgpack\r\nimport msgpack_numpy as m\r\nimport numpy as np\r\n\r\nx = np.random.rand(5)\r\nx_enc = msgpack.packb(x, default=m.encode)\r\nassert len(x_enc) == 76\r\n\r\nx_rec = msgpack.unpackb(x_enc, object_hook=m.decode)\r\nassert (x == x_rec).all()\r\n```\r\n----\r\n\r\nHowever, the above is a 1d-array. If we try to serialize a 2D (or higher dimensional) array the below code shows that the size of the serialized data does increase. However, when the data is deserialized, the result is somehow only an array of length 5 (?).\r\n\r\n```python\r\nx = np.random.rand(5, 4000)\r\nassert x.shape == (5, 4000)\r\nx_enc = msgpack.packb(x, default=m.encode)\r\nassert len(x_enc) == 160039\r\n\r\n_ = msgpack.unpackb(x_enc, object_hook=m.decode) \r\n```\r\nHere the last line fails with the below error\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-4-013267d9f88a> in <module>\r\n      4 assert len(x_enc) == 160039\r\n      5 \r\n----> 6 _ = msgpack.unpackb(x_enc, object_hook=m.decode)\r\n\r\n/usr/local/lib/python3.8/site-packages/msgpack/fallback.py in unpackb(packed, **kwargs)\r\n    134     unpacker.feed(packed)\r\n    135     try:\r\n--> 136         ret = unpacker._unpack()\r\n    137     except OutOfData:\r\n    138         raise ValueError(\"Unpack failed: incomplete input\")\r\n\r\n/usr/local/lib/python3.8/site-packages/msgpack/fallback.py in _unpack(self, execute)\r\n    659                     ret[key] = self._unpack(EX_CONSTRUCT)\r\n    660                 if self._object_hook is not None:\r\n--> 661                     ret = self._object_hook(ret)\r\n    662             return ret\r\n    663         if execute == EX_SKIP:\r\n\r\n/usr/local/lib/python3.8/site-packages/msgpack_numpy.py in decode(obj, chain)\r\n     87                 else:\r\n     88                     descr = obj[b'type']\r\n---> 89                 return np.frombuffer(obj[b'data'],\r\n     90                             dtype=np.dtype(descr)).reshape(obj[b'shape'])\r\n     91             else:\r\n\r\nValueError: cannot reshape array of size 5 into shape (5,4000)\r\n```\r\n----\r\n\r\nIf I read the code for `msgpack-numpy` correctly, the below is essentially the serialize-deserialize logic. This does work, so this suggests that the problem in on `msgpack`:s side and how it handle:s `memoryview` objects (?)\r\n\r\n```python\r\nx = np.random.rand(5, 4000)\r\nserialized_data = x.data \r\nassert type(serialized_data) == memoryview\r\n\r\nx_rec = np.frombuffer(serialized_data, dtype=np.dtype(x.dtype.str)).reshape(x.shape)\r\nassert (x == x_rec).all()\r\n```\r\n\r\n## Possible workarounds\r\n\r\nThe below shows that serialization/deserialization works when the memory layout is not C-contiguous (and then `obj.tobytes()` is used instead of `obj.data`),  [msgpack-numpy source](https://github.com/lebedov/msgpack-numpy/blob/master/msgpack_numpy.py#L24):\r\n\r\n```python\r\nx0 = np.random.rand(5, 4000)\r\nassert x0.flags['C_CONTIGUOUS'] == True\r\n\r\n# transpose does not rewrite the array in memory. Thus x0.T has C_CONTIGUOUS=False\r\n# and this makes it possible to build an array which is identical to x0, but\r\n# with C_CONTIGUOUS=False\r\nx = np.ascontiguousarray(x0.T).T\r\nassert x.flags['C_CONTIGUOUS'] == False\r\nassert (x0 == x).all()\r\n\r\n# Now x can be serialized and deserialized\r\nx_enc = msgpack.packb(x, default=m.encode)\r\nassert len(x_enc) == 160041\r\n\r\nx_rec = msgpack.unpackb(x_enc, object_hook=m.decode)\r\nassert (x == x_rec).all()\r\n```\r\n\r\nThis suggests the following work-around\r\n\r\n```python\r\nm.ndarray_to_bytes = lambda obj: bytes(obj.data)\r\n# or m.ndarray_to_bytes = lambda obj: obj.tobytes()\r\n```\r\n\r\nThen serialization for multidim arrays works with the same code as in the README\r\n\r\n```python\r\nx = np.random.rand(1, 2, 3, 4, 5, 6)\r\nassert x.shape == (1, 2, 3, 4, 5, 6)\r\nx_enc = msgpack.packb(x, default=m.encode)\r\nassert len(x_enc) == 5801\r\n\r\nx_rec = msgpack.unpackb(x_enc, object_hook=m.decode)\r\nassert (x == x_rec).all()\r\n```\r\n\r\n----\r\n\r\n### Unit tests\r\n\r\nWhen running the unit tests (in the above docker environment) I get three failing tests and the first two seem to be related to the above issue. \r\n\r\n```\r\n...............EE........F\r\n======================================================================\r\nERROR: test_numpy_array_float_2d (__main__.test_numpy_msgpack)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"tests.py\", line 199, in test_numpy_array_float_2d\r\n    x_rec = self.encode_decode(x)\r\n  File \"tests.py\", line 31, in encode_decode\r\n    return msgpack.unpackb(x_enc, use_list=use_list,\r\n  File \"/msgpack-numpy/msgpack_numpy.py\", line 255, in unpackb\r\n    return _unpackb(packed, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/msgpack/fallback.py\", line 136, in unpackb\r\n    ret = unpacker._unpack()\r\n  File \"/usr/local/lib/python3.8/site-packages/msgpack/fallback.py\", line 661, in _unpack\r\n    ret = self._object_hook(ret)\r\n  File \"/msgpack-numpy/msgpack_numpy.py\", line 89, in decode\r\n    return np.frombuffer(obj[b'data'],\r\nValueError: cannot reshape array of size 5 into shape (5,5)\r\n\r\n======================================================================\r\nERROR: test_numpy_array_float_2d_macos (__main__.test_numpy_msgpack)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"tests.py\", line 208, in test_numpy_array_float_2d_macos\r\n    x_rec = self.encode_decode(x, use_list=False, max_bin_len=50000000)\r\n  File \"tests.py\", line 31, in encode_decode\r\n    return msgpack.unpackb(x_enc, use_list=use_list,\r\n  File \"/msgpack-numpy/msgpack_numpy.py\", line 255, in unpackb\r\n    return _unpackb(packed, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/msgpack/fallback.py\", line 136, in unpackb\r\n    ret = unpacker._unpack()\r\n  File \"/usr/local/lib/python3.8/site-packages/msgpack/fallback.py\", line 661, in _unpack\r\n    ret = self._object_hook(ret)\r\n  File \"/msgpack-numpy/msgpack_numpy.py\", line 89, in decode\r\n    return np.frombuffer(obj[b'data'],\r\nValueError: cannot reshape array of size 5 into shape (5,5)\r\n\r\n======================================================================\r\nFAIL: test_str (__main__.test_numpy_msgpack)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"tests.py\", line 62, in test_str\r\n    assert_equal(type(self.encode_decode(u'foo')), str)\r\n  File \"/usr/local/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 428, in assert_equal\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nItems are not equal:\r\n ACTUAL: <class 'bytes'>\r\n DESIRED: <class 'str'>\r\n```\r\n\r\nBoth `test_numpy_array_float_2d` and `test_numpy_array_float_2d_macos` pass if  `ndarray_to_bytes` is \r\nreplaced with either of the above alternatives. \r\n\r\nThis become rather long issue. Please let me know if I can provide more details or if something is unclear.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/40", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/40/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/40/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/40", "id": 650778093, "node_id": "MDU6SXNzdWU2NTA3NzgwOTM=", "number": 40, "title": "Decoded arrays are read only?", "user": {"login": "goodboy", "id": 291685, "node_id": "MDQ6VXNlcjI5MTY4NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/291685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goodboy", "html_url": "https://github.com/goodboy", "followers_url": "https://api.github.com/users/goodboy/followers", "following_url": "https://api.github.com/users/goodboy/following{/other_user}", "gists_url": "https://api.github.com/users/goodboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/goodboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goodboy/subscriptions", "organizations_url": "https://api.github.com/users/goodboy/orgs", "repos_url": "https://api.github.com/users/goodboy/repos", "events_url": "https://api.github.com/users/goodboy/events{/privacy}", "received_events_url": "https://api.github.com/users/goodboy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-03T22:01:56Z", "updated_at": "2020-07-05T22:33:47Z", "closed_at": "2020-07-05T22:10:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not entirely sure of the details of this because I haven't ever really encountered a *read-only* array before, but the this script should explain the issue:\r\n\r\n```python\r\nimport numpy as np\r\n\r\nimport msgpack\r\nimport msgpack_numpy\r\nfrom msgpack_numpy import patch\r\npatch()\r\n\r\nx = np.array([(1, 2, b'a', [1.0, 2.0])],\r\n             np.dtype([('arg0', np.uint32),\r\n                       ('arg1', np.uint32),\r\n                       ('arg2', 'S1'),\r\n                       ('arg3', np.float32, (2,))]))\r\n\r\nx['arg0'] = [2]\r\nx['arg0'] == [2]\r\n\r\nx_enc = msgpack.packb(x)\r\nx2 = msgpack.unpackb(x_enc)\r\n\r\n# ValueError here\r\ntry:\r\n    x2['arg0'] = [1]\r\nexcept ValueError:\r\n    # I guess this is expected?\r\n    x3 = np.array(x2)\r\n    x3['arg0'] = [1]\r\n```\r\n\r\nDoes this mean the user is expected to make a copy of any decoded array they wish to modify? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/39", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/39/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/39/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/39", "id": 582954931, "node_id": "MDU6SXNzdWU1ODI5NTQ5MzE=", "number": 39, "title": "UnicodeDecodeError when decoding Numpy types", "user": {"login": "Tronic", "id": 98187, "node_id": "MDQ6VXNlcjk4MTg3", "avatar_url": "https://avatars1.githubusercontent.com/u/98187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tronic", "html_url": "https://github.com/Tronic", "followers_url": "https://api.github.com/users/Tronic/followers", "following_url": "https://api.github.com/users/Tronic/following{/other_user}", "gists_url": "https://api.github.com/users/Tronic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tronic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tronic/subscriptions", "organizations_url": "https://api.github.com/users/Tronic/orgs", "repos_url": "https://api.github.com/users/Tronic/repos", "events_url": "https://api.github.com/users/Tronic/events{/privacy}", "received_events_url": "https://api.github.com/users/Tronic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-17T11:47:35Z", "updated_at": "2020-05-25T15:10:46Z", "closed_at": "2020-05-25T15:07:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "This module should not override the msgpack default parameters with `use_bin_type=0` and `raw=True` like it does. This causes UnicodeDecodeErrors and will also mix up str and bytes types elsewhere. Manually specifying `use_bin_type=True` and `raw=False` avoids the problems:\r\n\r\n```python\r\nIn [1]: import msgpack_numpy as mp, numpy as np                                                                                                          \r\n\r\nIn [2]: mp.packb(np.array([-0.0]))                                                                                                                       \r\nOut[2]: b'\\x85\\xa2nd\\xc3\\xa4type\\xa3<f8\\xa4kind\\xa0\\xa5shape\\x91\\x01\\xa4data\\xa8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x80'\r\n\r\nIn [3]: mp.unpackb(_)                                                                                                                                    \r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 7: invalid start byte\r\n\r\nIn [4]: mp.packb(np.array([-0.0]), use_bin_type=True)                                                                                                    \r\nOut[4]: b'\\x85\\xc4\\x02nd\\xc3\\xc4\\x04type\\xa3<f8\\xc4\\x04kind\\xc4\\x00\\xc4\\x05shape\\x91\\x01\\xc4\\x04data\\xc4\\x08\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x80'\r\n\r\nIn [5]: mp.unpackb(_, raw=False)                                                                                                                         \r\nOut[5]: array([-0.])\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/37", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/37/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/37/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/37", "id": 511382483, "node_id": "MDU6SXNzdWU1MTEzODI0ODM=", "number": 37, "title": "msgpack_numpy shouldn't support np.int type\uff01", "user": {"login": "weiyinfu", "id": 16095925, "node_id": "MDQ6VXNlcjE2MDk1OTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/16095925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiyinfu", "html_url": "https://github.com/weiyinfu", "followers_url": "https://api.github.com/users/weiyinfu/followers", "following_url": "https://api.github.com/users/weiyinfu/following{/other_user}", "gists_url": "https://api.github.com/users/weiyinfu/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiyinfu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiyinfu/subscriptions", "organizations_url": "https://api.github.com/users/weiyinfu/orgs", "repos_url": "https://api.github.com/users/weiyinfu/repos", "events_url": "https://api.github.com/users/weiyinfu/events{/privacy}", "received_events_url": "https://api.github.com/users/weiyinfu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-10-23T14:57:49Z", "updated_at": "2019-10-24T19:50:37Z", "closed_at": "2019-10-23T16:08:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "msgpack's strength is less space and run faster.But if I use msgpack_numpy,the space used can be larger than json. The reason is that msgpack-numpy support np.ndarray,np.bool,np.int...\r\nmsgpack_numpy will serialize np.int to a four-tuple dict.\r\n\r\n```python\r\nimport numpy as np\r\nimport msgpack_numpy as msgpack\r\nx = np.array([1, 2, 5], dtype=np.int32)\r\nxx = [i for i in x]\r\n\r\ny = msgpack.packb(xx)\r\nprint(msgpack.packb(x.tolist()))\r\n```\r\nSo,I think msgpack_numpy shouldn't do the job it cannot handle well.It's a missleading to other people.You just need to encode np.ndarray rather than np.int.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/36", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/36/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/36/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/36", "id": 490346996, "node_id": "MDU6SXNzdWU0OTAzNDY5OTY=", "number": 36, "title": "Can't decode encoded structured arrays with subarrays", "user": {"login": "egnor", "id": 279819, "node_id": "MDQ6VXNlcjI3OTgxOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/279819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/egnor", "html_url": "https://github.com/egnor", "followers_url": "https://api.github.com/users/egnor/followers", "following_url": "https://api.github.com/users/egnor/following{/other_user}", "gists_url": "https://api.github.com/users/egnor/gists{/gist_id}", "starred_url": "https://api.github.com/users/egnor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/egnor/subscriptions", "organizations_url": "https://api.github.com/users/egnor/orgs", "repos_url": "https://api.github.com/users/egnor/repos", "events_url": "https://api.github.com/users/egnor/events{/privacy}", "received_events_url": "https://api.github.com/users/egnor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-06T14:05:54Z", "updated_at": "2019-09-08T16:48:32Z", "closed_at": "2019-09-08T16:48:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Example:\r\n\r\n```\r\n% python3\r\nPython 3.6.8 (default, Jan 14 2019, 11:02:34) \r\n[GCC 8.0.1 20180414 (experimental) [trunk revision 259383]] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import numpy\r\n>>> numpy.__version__\r\n'1.17.1'\r\n>>> import msgpack_numpy\r\n>>> s = numpy.recarray((5,), dtype=[('x', 'f', (2,))])\r\n>>> s\r\nrec.array([([5.989970e-38, 0.000000e+00],),\r\n           ([0.000000e+00, 2.847438e-42],),\r\n           ([4.641605e+17, 4.557023e-41],),\r\n           ([2.382207e-44, 0.000000e+00],),\r\n           ([6.726233e-44, 0.000000e+00],)],\r\n          dtype=[('x', '<f4', (2,))])\r\n>>> e = msgpack_numpy.encode(s)\r\n>>> e\r\n{b'nd': True, b'type': [('x', '<f4', (2,))], b'kind': b'V', b'shape': (5,), b'data': b'\\x00\\x10\\xa3\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xf0\\x07\\x00\\x00\\xf0 \\xce\\\\\\x08\\x7f\\x00\\x00\\x11\\x00\\x00\\x00\\x00\\x00\\x00\\x000\\x00\\x00\\x00\\x00\\x00\\x00\\x00'}\r\n>>> msgpack_numpy.decode(e)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/egnor/source/thepisky/local_virtualenv/lib/python3.6/site-packages/msgpack_numpy.py\", line 84, in decode\r\n    dtype=np.dtype(descr)).reshape(obj[b'shape'])\r\nValueError: invalid shape in fixed-type tuple.\r\n```\r\n\r\nThis seems to be because of this bit in the code:\r\n\r\n```\r\n# Check if b'kind' is in obj to enable decoding of data\r\n# serialized with older versions (#20):\r\nif b'kind' in obj and obj[b'kind'] == b'V':\r\n    descr = [tuple(tostr(t) for t in d) for d in obj[b'type']]\r\nelse:\r\n    descr = obj[b'type']\r\n```\r\n\r\nI'm not sure exactly what compatibility is being maintained, but the tostr(t) turns (2,) into \"(2,)\" which isn't valid.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/35", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/35/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/35/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/35", "id": 443560696, "node_id": "MDU6SXNzdWU0NDM1NjA2OTY=", "number": 35, "title": "Issue with packing and unpacking n-dimensional numpy arrays on mac os x", "user": {"login": "thatGreekGuy96", "id": 42438403, "node_id": "MDQ6VXNlcjQyNDM4NDAz", "avatar_url": "https://avatars3.githubusercontent.com/u/42438403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thatGreekGuy96", "html_url": "https://github.com/thatGreekGuy96", "followers_url": "https://api.github.com/users/thatGreekGuy96/followers", "following_url": "https://api.github.com/users/thatGreekGuy96/following{/other_user}", "gists_url": "https://api.github.com/users/thatGreekGuy96/gists{/gist_id}", "starred_url": "https://api.github.com/users/thatGreekGuy96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thatGreekGuy96/subscriptions", "organizations_url": "https://api.github.com/users/thatGreekGuy96/orgs", "repos_url": "https://api.github.com/users/thatGreekGuy96/repos", "events_url": "https://api.github.com/users/thatGreekGuy96/events{/privacy}", "received_events_url": "https://api.github.com/users/thatGreekGuy96/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-13T19:21:30Z", "updated_at": "2019-05-16T12:19:47Z", "closed_at": "2019-05-16T12:19:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nNoticed a bug when using the `packb` and `unpackb` methods with `msgpack-numpy`'s `encode` and `decode` functions respectively. \r\n\r\nIt looks as though some of the data is 'lost' along the way. This is the error message I received: \r\n```\r\n File \"test_msgpack.py\", line 33, in test_encode_decode_2darray\r\n    array_decoded = msgpack.unpackb(msg, object_hook=m.decode, use_list=False, max_bin_len=50000000, raw=False)\r\n  File \"/anaconda3/envs/poddie/lib/python3.6/site-packages/msgpack/fallback.py\", line 138, in unpackb\r\n    ret = unpacker._unpack()\r\n  File \"/anaconda3/envs/poddie/lib/python3.6/site-packages/msgpack/fallback.py\", line 666, in _unpack\r\n    ret = self._object_hook(ret)\r\n  File \"/anaconda3/envs/poddie/lib/python3.6/site-packages/msgpack_numpy.py\", line 112, in decode\r\n    dtype=np.dtype(descr)).reshape(obj[b'shape'])\r\nValueError: cannot reshape array of size 10 into shape (10,2)\r\n```\r\n\r\nThis happened in the third test of this code \r\n```python\r\n\"\"\"\r\nDate: 13/05/2018\r\n\r\nUnit tests for msgpack\r\n\"\"\"\r\n\r\nimport unittest\r\nimport msgpack\r\nimport msgpack_numpy as m\r\nimport numpy as np\r\n\r\nclass TestMsgpack(unittest.TestCase):\r\n\r\n    def test_encode_decode_only_array(self):\r\n        test_array = np.arange(10)\r\n        msg = msgpack.packb(test_array, default=m.encode, use_bin_type=True)\r\n        array_decoded = msgpack.unpackb(msg, object_hook=m.decode, use_list=False, max_bin_len=50000000, raw=False)\r\n\r\n        np.testing.assert_equal(test_array, array_decoded)\r\n\r\n    def test_encode_decode_with_labels(self):\r\n        test_array = np.arange(10)\r\n        test_labels = ['i am a happy label wooo']\r\n        msg = msgpack.packb((test_array, test_labels), default=m.encode, use_bin_type=True)\r\n        msg_decoded = msgpack.unpackb(msg, object_hook=m.decode, use_list=False, max_bin_len=50000000, raw=False)\r\n\r\n        np.testing.assert_equal(test_array, msg_decoded[0])\r\n        self.assertEqual(test_labels[0], msg_decoded[1][0])\r\n\r\n    def test_encode_decode_2darray(self):\r\n        test_array = np.reshape(np.arange(20), (10,2))\r\n        msg = msgpack.packb(test_array, default=m.encode, use_bin_type=True)\r\n        array_decoded = msgpack.unpackb(msg, object_hook=m.decode, use_list=False, max_bin_len=50000000, raw=False)\r\n\r\n        np.testing.assert_equal(array_decoded, test_array)\r\n\r\nif __name__ == '__main__':\r\n    from utils.test_utils import run_test_as_main\r\n\r\n    test_cases_to_run = [TestMsgpack]\r\n    run_test_as_main(test_cases_to_run)\r\n\r\n```\r\n\r\nI looked around the code a bit and noticed that if I change line 40 in the msgpack-numpy code from \r\n`   b'data': obj.data if obj.flags['C_CONTIGUOUS'] else obj.tobytes()}`\r\nto \r\n`b'data': obj.tobytes()`\r\nthe issue disappears.\r\n\r\nMany thanks and hope you can help,\r\nAndreas\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/34", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/34/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/34/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/34", "id": 378407445, "node_id": "MDU6SXNzdWUzNzg0MDc0NDU=", "number": 34, "title": "0.4.4.1 Cannot dump incontiguous array", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-07T18:10:57Z", "updated_at": "2018-11-08T15:34:03Z", "closed_at": "2018-11-08T15:34:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "```python\r\nimport numpy as np\r\nimport msgpack\r\nimport msgpack_numpy\r\nmsgpack_numpy.patch()\r\n\r\nx = np.zeros((128, 128))\r\ny = x[10:100, 10:100]\r\n\r\nmsgpack.dumps(y)\r\n```\r\nRun with python3, and msgpack-numpy 0.4.4.1 (latest), it fails with:\r\n```\r\nTraceback (most recent call last):\r\n  File \"a.py\", line 12, in <module>\r\n    msgpack.dumps(y)\r\n  File \"HOME/.local/lib/python3.6/site-packages/msgpack_numpy.py\", line 196, in packb\r\n    return Packer(**kwargs).pack(o)\r\n  File \"msgpack/_packer.pyx\", line 284, in msgpack._packer.Packer.pack\r\n  File \"msgpack/_packer.pyx\", line 290, in msgpack._packer.Packer.pack\r\n  File \"msgpack/_packer.pyx\", line 287, in msgpack._packer.Packer.pack\r\n  File \"msgpack/_packer.pyx\", line 234, in msgpack._packer.Packer._pack\r\n  File \"msgpack/_packer.pyx\", line 266, in msgpack._packer.Packer._pack\r\nBufferError: memoryview: underlying buffer is not C-contiguous\r\n```\r\n\r\nHowever the same code works for 0.4.3.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/33", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/33/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/33/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/33", "id": 364331257, "node_id": "MDU6SXNzdWUzNjQzMzEyNTc=", "number": 33, "title": "0.4.4.1 breaks spacy", "user": {"login": "anneschuth", "id": 586744, "node_id": "MDQ6VXNlcjU4Njc0NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/586744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anneschuth", "html_url": "https://github.com/anneschuth", "followers_url": "https://api.github.com/users/anneschuth/followers", "following_url": "https://api.github.com/users/anneschuth/following{/other_user}", "gists_url": "https://api.github.com/users/anneschuth/gists{/gist_id}", "starred_url": "https://api.github.com/users/anneschuth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anneschuth/subscriptions", "organizations_url": "https://api.github.com/users/anneschuth/orgs", "repos_url": "https://api.github.com/users/anneschuth/repos", "events_url": "https://api.github.com/users/anneschuth/events{/privacy}", "received_events_url": "https://api.github.com/users/anneschuth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-27T07:01:11Z", "updated_at": "2019-05-15T11:49:57Z", "closed_at": "2019-05-15T11:49:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since 0.4.4.1 we have breaking builds of projects that use spacy, with the following error: \r\n\r\n```python\r\n    ents_model_nl.to_disk(model_path_nl)\r\n../../../virtualenv/python3.6.3/lib/python3.6/site-packages/spacy/language.py:621: in to_disk\r\n    util.to_disk(path, serializers, {p: False for p in disable})\r\n../../../virtualenv/python3.6.3/lib/python3.6/site-packages/spacy/util.py:503: in to_disk\r\n    writer(path / key)\r\n../../../virtualenv/python3.6.3/lib/python3.6/site-packages/spacy/language.py:609: in <lambda>\r\n    ('tokenizer', lambda p: self.tokenizer.to_disk(p, vocab=False)),\r\ntokenizer.pyx:354: in spacy.tokenizer.Tokenizer.to_disk\r\n    ???\r\ntokenizer.pyx:355: in spacy.tokenizer.Tokenizer.to_disk\r\n    ???\r\ntokenizer.pyx:384: in spacy.tokenizer.Tokenizer.to_bytes\r\n    ???\r\n../../../virtualenv/python3.6.3/lib/python3.6/site-packages/spacy/util.py:486: in to_bytes\r\n    return msgpack.dumps(serialized, use_bin_type=True, encoding='utf8')\r\n../../../virtualenv/python3.6.3/lib/python3.6/site-packages/msgpack_numpy.py:196: in packb\r\n    return Packer(**kwargs).pack(o)\r\nE   TypeError: __init__() got an unexpected keyword argument 'encoding'\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/32", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/32/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/32/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/32", "id": 364256890, "node_id": "MDU6SXNzdWUzNjQyNTY4OTA=", "number": 32, "title": "0.4.4 failed with Python 2", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-27T00:04:40Z", "updated_at": "2018-09-27T00:30:27Z", "closed_at": "2018-09-27T00:30:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "```python\r\nimport numpy as np\r\nimport msgpack\r\nimport msgpack_numpy\r\nmsgpack_numpy.patch()\r\nmsgpack_numpy.dumps(np.random.rand(3,3))\r\n```\r\nFailed when run with __python 2__ with:\r\n```\r\nmsgpack==0.5.6\r\nmsgpack-numpy==0.4.4\r\n```\r\nand the error message:\r\n```\r\nTraceback (most recent call last):\r\n  File \"bug.py\", line 8, in <module>\r\n    msgpack_numpy.dumps(np.random.rand(3,3))\r\n  File \"/HOME/.local/lib/python2.7/site-packages/msgpack_numpy.py\", line 165, in packb\r\n    return Packer(**kwargs).pack(o)\r\n  File \"msgpack/_packer.pyx\", line 284, in msgpack._packer.Packer.pack\r\n  File \"msgpack/_packer.pyx\", line 290, in msgpack._packer.Packer.pack\r\n  File \"msgpack/_packer.pyx\", line 287, in msgpack._packer.Packer.pack\r\n  File \"msgpack/_packer.pyx\", line 234, in msgpack._packer.Packer._pack\r\n  File \"msgpack/_packer.pyx\", line 281, in msgpack._packer.Packer._pack\r\nTypeError: can't serialize <read-write buffer for 0x7f08bfd28120, size 72, offset 0 at 0x7f08bfd15bf0> \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/31", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/31/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/31/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/31", "id": 364229991, "node_id": "MDU6SXNzdWUzNjQyMjk5OTE=", "number": 31, "title": "Deprecation Warning: encoding is deprecated", "user": {"login": "DomHudson", "id": 10864294, "node_id": "MDQ6VXNlcjEwODY0Mjk0", "avatar_url": "https://avatars2.githubusercontent.com/u/10864294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DomHudson", "html_url": "https://github.com/DomHudson", "followers_url": "https://api.github.com/users/DomHudson/followers", "following_url": "https://api.github.com/users/DomHudson/following{/other_user}", "gists_url": "https://api.github.com/users/DomHudson/gists{/gist_id}", "starred_url": "https://api.github.com/users/DomHudson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DomHudson/subscriptions", "organizations_url": "https://api.github.com/users/DomHudson/orgs", "repos_url": "https://api.github.com/users/DomHudson/repos", "events_url": "https://api.github.com/users/DomHudson/events{/privacy}", "received_events_url": "https://api.github.com/users/DomHudson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-26T21:59:28Z", "updated_at": "2018-09-27T08:29:44Z", "closed_at": "2018-09-27T00:28:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Summary\r\nI am getting the following deprecation warnings during encoding and decoding. \r\n```\r\nmsgpack_numpy.py:133: PendingDeprecationWarning: encoding is deprecated.\r\n  use_bin_type=use_bin_type)\r\n```\r\n\r\n```\r\nPendingDeprecationWarning: encoding is deprecated, Use raw=False instead.\r\n  return _unpackb(packed, **kwargs)\r\n```\r\nThe relevant commit/line is:\r\nhttps://github.com/msgpack/msgpack-python/pull/265/files#diff-2e1ae6be4195b4cbed2c0ed3df9e7194R117\r\n\r\n----\r\n\r\n## System\r\n\r\n```\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.1 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n```\r\n\r\n```\r\nPython 3.6.5 (default, Apr  1 2018, 05:46:30) \r\n[GCC 7.3.0] on linux\r\n```\r\n\r\n```\r\nmsgpack                         0.5.6     \r\nmsgpack-numpy                   0.4.3.1   \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/30", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/30/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/30/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/30", "id": 361771116, "node_id": "MDU6SXNzdWUzNjE3NzExMTY=", "number": 30, "title": "Allow, at least as an option, copyless encoding", "user": {"login": "valmar", "id": 558469, "node_id": "MDQ6VXNlcjU1ODQ2OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/558469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/valmar", "html_url": "https://github.com/valmar", "followers_url": "https://api.github.com/users/valmar/followers", "following_url": "https://api.github.com/users/valmar/following{/other_user}", "gists_url": "https://api.github.com/users/valmar/gists{/gist_id}", "starred_url": "https://api.github.com/users/valmar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/valmar/subscriptions", "organizations_url": "https://api.github.com/users/valmar/orgs", "repos_url": "https://api.github.com/users/valmar/repos", "events_url": "https://api.github.com/users/valmar/events{/privacy}", "received_events_url": "https://api.github.com/users/valmar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-19T14:16:47Z", "updated_at": "2018-09-26T01:45:41Z", "closed_at": "2018-09-26T01:45:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "The 'encode' function uses the numpy 'tobytes' method, which makes a copy of the data.\r\n(See the documentation here: https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tobytes.html)\r\n\r\nWhile this is perfect for most use cases, we are using this module in a high-throughput data processing environment, and copyless encoding would allow our code to be faster and use less memory. This could be achieved by exposing the underlying buffer from a\r\nnumpy array. If a is 'a' numpy array, 'a.data' can substitute 'a.tobytes()'.\r\n\r\nThank you very much for your library and your work!\r\n\r\nValmar\r\n\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/29", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/29/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/29/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/29", "id": 361001441, "node_id": "MDU6SXNzdWUzNjEwMDE0NDE=", "number": 29, "title": "Add python3 classifier to setup.py", "user": {"login": "pklapperich", "id": 12666157, "node_id": "MDQ6VXNlcjEyNjY2MTU3", "avatar_url": "https://avatars3.githubusercontent.com/u/12666157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pklapperich", "html_url": "https://github.com/pklapperich", "followers_url": "https://api.github.com/users/pklapperich/followers", "following_url": "https://api.github.com/users/pklapperich/following{/other_user}", "gists_url": "https://api.github.com/users/pklapperich/gists{/gist_id}", "starred_url": "https://api.github.com/users/pklapperich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pklapperich/subscriptions", "organizations_url": "https://api.github.com/users/pklapperich/orgs", "repos_url": "https://api.github.com/users/pklapperich/repos", "events_url": "https://api.github.com/users/pklapperich/events{/privacy}", "received_events_url": "https://api.github.com/users/pklapperich/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-17T19:04:44Z", "updated_at": "2018-09-17T22:40:16Z", "closed_at": "2018-09-17T22:40:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "By listing only the \"Python\" classifier in setup.py, this project is advertising lack of support for Python3 and causes it to show up on projects like [py3readiness](https://hugovk.github.io/py3readiness/) (which attempts to track the porting effort to Python3 in advance of Python2 EOL).\r\n\r\nI think this project is properly classified by:\r\n```\r\n    'Programming Language :: Python',\r\n    'Programming Language :: Python :: 2.7',\r\n    'Programming Language :: Python :: 3',\r\n    'Programming Language :: Python :: 3.4',\r\n    'Programming Language :: Python :: 3.5',\r\n    'Programming Language :: Python :: 3.6',\r\n    'Programming Language :: Python :: 3.7',\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/28", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/28/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/28/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/28", "id": 349109167, "node_id": "MDU6SXNzdWUzNDkxMDkxNjc=", "number": 28, "title": "Loading numpy array outside of Python", "user": {"login": "liran-funaro", "id": 1833758, "node_id": "MDQ6VXNlcjE4MzM3NTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1833758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liran-funaro", "html_url": "https://github.com/liran-funaro", "followers_url": "https://api.github.com/users/liran-funaro/followers", "following_url": "https://api.github.com/users/liran-funaro/following{/other_user}", "gists_url": "https://api.github.com/users/liran-funaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/liran-funaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liran-funaro/subscriptions", "organizations_url": "https://api.github.com/users/liran-funaro/orgs", "repos_url": "https://api.github.com/users/liran-funaro/repos", "events_url": "https://api.github.com/users/liran-funaro/events{/privacy}", "received_events_url": "https://api.github.com/users/liran-funaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-09T12:37:27Z", "updated_at": "2018-08-09T15:24:53Z", "closed_at": "2018-08-09T15:24:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "How will other (non python) implementation of msgpack handles this?\r\nFor example, what should I use when parsing msgpack via C++?\r\nhttps://github.com/msgpack/msgpack-c", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/27", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/27/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/27/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/27", "id": 340042061, "node_id": "MDU6SXNzdWUzNDAwNDIwNjE=", "number": 27, "title": "Getting DeprecationWarning on decode function.", "user": {"login": "ardzoht", "id": 6800940, "node_id": "MDQ6VXNlcjY4MDA5NDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6800940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ardzoht", "html_url": "https://github.com/ardzoht", "followers_url": "https://api.github.com/users/ardzoht/followers", "following_url": "https://api.github.com/users/ardzoht/following{/other_user}", "gists_url": "https://api.github.com/users/ardzoht/gists{/gist_id}", "starred_url": "https://api.github.com/users/ardzoht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ardzoht/subscriptions", "organizations_url": "https://api.github.com/users/ardzoht/orgs", "repos_url": "https://api.github.com/users/ardzoht/repos", "events_url": "https://api.github.com/users/ardzoht/events{/privacy}", "received_events_url": "https://api.github.com/users/ardzoht/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-10T23:35:00Z", "updated_at": "2018-07-11T11:03:07Z", "closed_at": "2018-07-11T11:03:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using the decode function on message objects, I'm getting the following message constantly...\r\n\r\n> DeprecationWarning: The binary mode of fromstring is deprecated, as it behaves surprisingly on unicode inputs. Use frombuffer instead\r\n  dtype=np.dtype(descr)).reshape(obj[b'shape'])\r\n\r\nShould it use frombuffer function from now on?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/26", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/26/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/26/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/26", "id": 299368021, "node_id": "MDU6SXNzdWUyOTkzNjgwMjE=", "number": 26, "title": "AttributeError: module 'msgpack._unpacker' has no attribute 'unpack'", "user": {"login": "nikhil8786", "id": 18592885, "node_id": "MDQ6VXNlcjE4NTkyODg1", "avatar_url": "https://avatars2.githubusercontent.com/u/18592885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhil8786", "html_url": "https://github.com/nikhil8786", "followers_url": "https://api.github.com/users/nikhil8786/followers", "following_url": "https://api.github.com/users/nikhil8786/following{/other_user}", "gists_url": "https://api.github.com/users/nikhil8786/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhil8786/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhil8786/subscriptions", "organizations_url": "https://api.github.com/users/nikhil8786/orgs", "repos_url": "https://api.github.com/users/nikhil8786/repos", "events_url": "https://api.github.com/users/nikhil8786/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhil8786/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-22T14:11:17Z", "updated_at": "2018-02-26T03:16:07Z", "closed_at": "2018-02-26T03:16:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI am facing this problem while running my code:\r\nAttributeError: module 'msgpack._unpacker' has no attribute 'unpack'\r\nPython Version : 3.6\r\nOs : Ubuntu 14.04\r\nmsgpack-numpy Version: 0.4.2\r\nmsgpack : 0.5.5\r\nnumpy : 1.14.0", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/24", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/24/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/24/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/24", "id": 283066456, "node_id": "MDU6SXNzdWUyODMwNjY0NTY=", "number": 24, "title": "Compatibility with Javascript", "user": {"login": "lnunno", "id": 5023012, "node_id": "MDQ6VXNlcjUwMjMwMTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5023012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnunno", "html_url": "https://github.com/lnunno", "followers_url": "https://api.github.com/users/lnunno/followers", "following_url": "https://api.github.com/users/lnunno/following{/other_user}", "gists_url": "https://api.github.com/users/lnunno/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnunno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnunno/subscriptions", "organizations_url": "https://api.github.com/users/lnunno/orgs", "repos_url": "https://api.github.com/users/lnunno/repos", "events_url": "https://api.github.com/users/lnunno/events{/privacy}", "received_events_url": "https://api.github.com/users/lnunno/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-19T00:29:02Z", "updated_at": "2017-12-19T20:01:16Z", "closed_at": "2017-12-19T20:01:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is this library meant to be used with other libraries, mainly Javascript? I'm receiving something that was written in this library with msgpack-lite but I'm seeing something that looks like the correct numpy arrays with the appropriate fields, but they have a `data` attribute that looks like it hasn't been decoded.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/22", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/22/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/22/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/22", "id": 277619247, "node_id": "MDU6SXNzdWUyNzc2MTkyNDc=", "number": 22, "title": "Encoding a numpy array containing 0 returns None", "user": {"login": "alison-f-cooper", "id": 2709382, "node_id": "MDQ6VXNlcjI3MDkzODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2709382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alison-f-cooper", "html_url": "https://github.com/alison-f-cooper", "followers_url": "https://api.github.com/users/alison-f-cooper/followers", "following_url": "https://api.github.com/users/alison-f-cooper/following{/other_user}", "gists_url": "https://api.github.com/users/alison-f-cooper/gists{/gist_id}", "starred_url": "https://api.github.com/users/alison-f-cooper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alison-f-cooper/subscriptions", "organizations_url": "https://api.github.com/users/alison-f-cooper/orgs", "repos_url": "https://api.github.com/users/alison-f-cooper/repos", "events_url": "https://api.github.com/users/alison-f-cooper/events{/privacy}", "received_events_url": "https://api.github.com/users/alison-f-cooper/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-29T03:39:54Z", "updated_at": "2018-05-07T13:15:08Z", "closed_at": "2018-05-07T13:15:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've only seen this come up in this particular case, and it's a bit strange. If I try to encode numpy array containing just 0 (`np.array([0])`), `None` is returned. I am using `msgpack.packb(value, use_bin_type=True)`, where value is the numpy array. If I add some more structure to it, like putting it in a json blob, e.g. `{ 'data': np.array([0]) } `, it works fine. I do not see this problem with other integers, like `np.array([1])`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/21", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/21/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/21/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/21", "id": 245841370, "node_id": "MDU6SXNzdWUyNDU4NDEzNzA=", "number": 21, "title": "structured array issue", "user": {"login": "cycomanic", "id": 1154946, "node_id": "MDQ6VXNlcjExNTQ5NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1154946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cycomanic", "html_url": "https://github.com/cycomanic", "followers_url": "https://api.github.com/users/cycomanic/followers", "following_url": "https://api.github.com/users/cycomanic/following{/other_user}", "gists_url": "https://api.github.com/users/cycomanic/gists{/gist_id}", "starred_url": "https://api.github.com/users/cycomanic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cycomanic/subscriptions", "organizations_url": "https://api.github.com/users/cycomanic/orgs", "repos_url": "https://api.github.com/users/cycomanic/repos", "events_url": "https://api.github.com/users/cycomanic/events{/privacy}", "received_events_url": "https://api.github.com/users/cycomanic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-26T20:16:54Z", "updated_at": "2017-07-30T22:47:40Z", "closed_at": "2017-07-30T22:47:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "if I try to pack/unpack the following structured array I get ValueError. I saw some tests on structured arrays in the code, so I assume they work (maybe it's because I have an array inside the structured array?).\r\n```python\r\n\r\nIn [10]: x=np.array([(1, 2.3, np.arange(10.))], dtype=[('num', np.int32), ('flo', np.float64), ('arr', np.float64, (10))])\r\nIn [11]: s=msgpack.packb(x)\r\nIn [12]: o=msgpack.unpackb(s)\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-12-f6dc2c41c01d> in <module>()\r\n----> 1 o=msgpack.unpackb(s)\r\n\r\n/home/jschrod/.local/lib/python3.5/site-packages/msgpack_numpy.py in unpackb(packed, object_hook, encoding, **kwargs)\r\n    185 \r\n    186     kwargs['object_hook'] = object_hook\r\n--> 187     return _unpacker.unpackb(packed, encoding=encoding, **kwargs)\r\n    188 \r\n    189 load = unpack\r\n\r\nmsgpack/_unpacker.pyx in msgpack._unpacker.unpackb (msgpack/_unpacker.cpp:2068)()\r\n\r\n/home/jschrod/.local/lib/python3.5/site-packages/msgpack_numpy.py in decode(obj)\r\n     82                     descr = obj[b'type']\r\n     83                 return np.fromstring(obj[b'data'],\r\n---> 84                             dtype=np.dtype(descr)).reshape(obj[b'shape'])\r\n     85             else:\r\n     86                 descr = obj[b'type']\r\n\r\nValueError: invalid shape in fixed-type tuple.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/20", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/20/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/20/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/20", "id": 241123320, "node_id": "MDU6SXNzdWUyNDExMjMzMjA=", "number": 20, "title": "Compatibily issue introduced by issue #15", "user": {"login": "proximous", "id": 8294191, "node_id": "MDQ6VXNlcjgyOTQxOTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8294191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/proximous", "html_url": "https://github.com/proximous", "followers_url": "https://api.github.com/users/proximous/followers", "following_url": "https://api.github.com/users/proximous/following{/other_user}", "gists_url": "https://api.github.com/users/proximous/gists{/gist_id}", "starred_url": "https://api.github.com/users/proximous/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/proximous/subscriptions", "organizations_url": "https://api.github.com/users/proximous/orgs", "repos_url": "https://api.github.com/users/proximous/repos", "events_url": "https://api.github.com/users/proximous/events{/privacy}", "received_events_url": "https://api.github.com/users/proximous/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-07T00:24:20Z", "updated_at": "2017-07-07T03:05:14Z", "closed_at": "2017-07-07T03:05:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Issue #15 added a \"kind\" field.  This breaks compatibility with data encoded with older versions.\r\n\r\nI'm not an expert, but is seems that simply testing for \"kind\" before trying to access it would resolve this compatibility (at least it does for me).\r\n\r\nSpecifically, if line #76 is changed from:\r\n`if obj[b'kind'] == b'V':`\r\n\r\nto \r\n\r\n`if b'kind' in obj and obj[b'kind'] == b'V'`\r\n\r\nthen I can successfully read my old files. If this is the correct fix, could you please implement and update to pypi?  Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/19", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/19/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/19/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/19", "id": 232241912, "node_id": "MDU6SXNzdWUyMzIyNDE5MTI=", "number": 19, "title": "Defaults differs from `msgpack`", "user": {"login": "pohmelie", "id": 2385765, "node_id": "MDQ6VXNlcjIzODU3NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2385765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pohmelie", "html_url": "https://github.com/pohmelie", "followers_url": "https://api.github.com/users/pohmelie/followers", "following_url": "https://api.github.com/users/pohmelie/following{/other_user}", "gists_url": "https://api.github.com/users/pohmelie/gists{/gist_id}", "starred_url": "https://api.github.com/users/pohmelie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pohmelie/subscriptions", "organizations_url": "https://api.github.com/users/pohmelie/orgs", "repos_url": "https://api.github.com/users/pohmelie/repos", "events_url": "https://api.github.com/users/pohmelie/events{/privacy}", "received_events_url": "https://api.github.com/users/pohmelie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-30T12:50:08Z", "updated_at": "2017-07-30T22:34:27Z", "closed_at": "2017-07-30T22:34:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "`msgpack-numpy` defaults differs from `msgpack`:\r\n``` python\r\n>>> import msgpack\r\n>>> import msgpack_numpy as m\r\n>>> msgpack.unpackb(msgpack.packb(\"foo\"))\r\nb'foo'\r\n>>> m.patch()\r\n>>> msgpack.unpackb(msgpack.packb(\"foo\"))\r\n'foo'\r\n>>> \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/18", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/18/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/18/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/18", "id": 230982530, "node_id": "MDU6SXNzdWUyMzA5ODI1MzA=", "number": 18, "title": "Numpy >= 1.9.0 required", "user": {"login": "frankkahl", "id": 28920444, "node_id": "MDQ6VXNlcjI4OTIwNDQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/28920444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankkahl", "html_url": "https://github.com/frankkahl", "followers_url": "https://api.github.com/users/frankkahl/followers", "following_url": "https://api.github.com/users/frankkahl/following{/other_user}", "gists_url": "https://api.github.com/users/frankkahl/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankkahl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankkahl/subscriptions", "organizations_url": "https://api.github.com/users/frankkahl/orgs", "repos_url": "https://api.github.com/users/frankkahl/repos", "events_url": "https://api.github.com/users/frankkahl/events{/privacy}", "received_events_url": "https://api.github.com/users/frankkahl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-24T09:50:56Z", "updated_at": "2017-05-24T12:23:50Z", "closed_at": "2017-05-24T12:23:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "msgpack_numpy requires numpy >= 1.9.0 since it uses the tobytes() method of ndarray which was added\r\nwith numpy 1.9.0.\r\nSuggestion:\r\n   modify numpy dependency from 'numpy' to 'numpy>=1.9.0' in setup.py", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/17", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/17/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/17/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/17", "id": 218186182, "node_id": "MDU6SXNzdWUyMTgxODYxODI=", "number": 17, "title": "Wire-incompatibility between 0.3.7. and 0.3.9", "user": {"login": "hmeine", "id": 462802, "node_id": "MDQ6VXNlcjQ2MjgwMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/462802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hmeine", "html_url": "https://github.com/hmeine", "followers_url": "https://api.github.com/users/hmeine/followers", "following_url": "https://api.github.com/users/hmeine/following{/other_user}", "gists_url": "https://api.github.com/users/hmeine/gists{/gist_id}", "starred_url": "https://api.github.com/users/hmeine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hmeine/subscriptions", "organizations_url": "https://api.github.com/users/hmeine/orgs", "repos_url": "https://api.github.com/users/hmeine/repos", "events_url": "https://api.github.com/users/hmeine/events{/privacy}", "received_events_url": "https://api.github.com/users/hmeine/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-30T12:50:02Z", "updated_at": "2017-03-30T13:50:22Z", "closed_at": "2017-03-30T13:50:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Although there was only a minor version increase, we have problems with passing ndarrays between (marshalling) processes running 0.3.7 and (demarshalling) processes running 0.3.9.\r\n\r\nWas that intended?  It's kind of evil, because one side is a pre-packaged environment, and that's now incompatible with the default that's pip installed. :-(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/16", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/16/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/16/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/16", "id": 209996023, "node_id": "MDU6SXNzdWUyMDk5OTYwMjM=", "number": 16, "title": "Install fails missing dependency setuptools and wheel", "user": {"login": "hholst80", "id": 6200749, "node_id": "MDQ6VXNlcjYyMDA3NDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/6200749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hholst80", "html_url": "https://github.com/hholst80", "followers_url": "https://api.github.com/users/hholst80/followers", "following_url": "https://api.github.com/users/hholst80/following{/other_user}", "gists_url": "https://api.github.com/users/hholst80/gists{/gist_id}", "starred_url": "https://api.github.com/users/hholst80/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hholst80/subscriptions", "organizations_url": "https://api.github.com/users/hholst80/orgs", "repos_url": "https://api.github.com/users/hholst80/repos", "events_url": "https://api.github.com/users/hholst80/events{/privacy}", "received_events_url": "https://api.github.com/users/hholst80/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-24T09:14:25Z", "updated_at": "2017-02-26T16:31:06Z", "closed_at": "2017-02-26T16:31:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nCollecting msgpack_numpy\r\n  Downloading msgpack-numpy-0.3.9.tar.gz\r\n    Complete output from command python setup.py egg_info:\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n    ImportError: No module named 'setuptools'\r\n```\r\n\r\nInstalling `setuptools` is not enough:\r\n\r\n```\r\nCollecting msgpack-python>=0.3.0 (from msgpack_numpy)\r\n  Downloading msgpack-python-0.4.8.tar.gz (113kB)\r\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 122kB 11.8MB/s\r\nBuilding wheels for collected packages: msgpack-numpy, msgpack-python\r\n  Running setup.py bdist_wheel for msgpack-numpy ... error\r\n  Complete output from command /usr/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-id62ap4x/msgpack-numpy/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" bdist_wheel -d /tmp/tmpjnte0kt3pip-wheel- --python-tag cp35:\r\n  usage: -c [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]\r\n     or: -c --help [cmd1 cmd2 ...]\r\n     or: -c --help-commands\r\n     or: -c cmd --help\r\n\r\n  error: invalid command 'bdist_wheel'\r\n```\r\n\r\nAfter installing also `wheel` package it works.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/15", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/15/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/15/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/15", "id": 205568305, "node_id": "MDU6SXNzdWUyMDU1NjgzMDU=", "number": 15, "title": "The array unpacked is completely different than the packed one", "user": {"login": "subiol", "id": 20721041, "node_id": "MDQ6VXNlcjIwNzIxMDQx", "avatar_url": "https://avatars0.githubusercontent.com/u/20721041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subiol", "html_url": "https://github.com/subiol", "followers_url": "https://api.github.com/users/subiol/followers", "following_url": "https://api.github.com/users/subiol/following{/other_user}", "gists_url": "https://api.github.com/users/subiol/gists{/gist_id}", "starred_url": "https://api.github.com/users/subiol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subiol/subscriptions", "organizations_url": "https://api.github.com/users/subiol/orgs", "repos_url": "https://api.github.com/users/subiol/repos", "events_url": "https://api.github.com/users/subiol/events{/privacy}", "received_events_url": "https://api.github.com/users/subiol/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-02-06T12:26:06Z", "updated_at": "2017-02-24T04:05:17Z", "closed_at": "2017-02-21T22:08:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed the recent msgpack-numpy 0.3.8 using pip. I am using python 3.6.0, numpy 1.12.0, msgpack-python 0.4.8 . The array I am getting out is completely different than the one that I packed. I have tried the example in the readme and it works fine, so I have create a short script that reproduces the behaviour:\r\n\r\n```\r\nimport numpy as np\r\nimport msgpack\r\nimport msgpack_numpy as m\r\n\r\n\r\nthedata = [(39133, 628009281, 103670,  4, b'a'),\r\n           (39133, 628009283, 103670, 10, b'a'),\r\n           (39198, 628010832, 103662, 28, b'b'),\r\n           (43248, 628119055, 103247, 26, b'b'),\r\n           (43252, 628119143, 103246,  6, b'b'),\r\n           (43254, 628119186, 103246, 22, b'b')]\r\n\r\nthedtype = np.dtype([ ('arg0', np.uint32),\r\n                      ('arg1', np.uint32),\r\n                      ('arg2', np.uint32),\r\n                      ('arg3', np.uint32),\r\n                      ('arg4', 'S1') ])\r\n\r\nnp_arr = np.array(thedata, dtype=thedtype)\r\nprint(np_arr)\r\nx_enc = msgpack.packb(np_arr, default=m.encode)\r\ndecoded_arr = msgpack.unpackb(x_enc, object_hook=m.decode)\r\nprint(decoded_arr)\r\n```\r\nwhen I run this script I get:\r\n\r\n> [(39133, 628009281, 103670,  4, b'a') (39133, 628009283, 103670, 10, b'a')\r\n>  (39198, 628010832, 103662, 28, b'b') (43248, 628119055, 103247, 26, b'b')\r\n>  (43252, 628119143, 103246,  6, b'b') (43254, 628119186, 103246, 22, b'b')]\r\n> [ [ -35 -104    0    0   65  -87  110   37  -10 -108    1    0    4    0    0    0   97]\r\n>  [ -35 -104    0    0   67  -87  110   37  -10 -108    1    0   10    0    0    0   97]\r\n>  [  30 -103    0    0   80  -81  110   37  -18 -108    1    0   28    0     0    0   98]\r\n>  [ -16  -88    0    0   15   86  112   37   79 -109    1    0   26    0    0      0   98]\r\n>  [ -12  -88    0    0  103   86  112   37   78 -109    1    0    6    0    0     0   98]\r\n>  [ -10  -88    0    0 -110   86  112   37   78 -109    1    0   22    0    0     0   98]]\r\n\r\nSo as you can see the array packed and the array unpacked are very different.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/14", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/14/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/14/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/14", "id": 203353253, "node_id": "MDU6SXNzdWUyMDMzNTMyNTM=", "number": 14, "title": "Where's the tag for 0.3.7?", "user": {"login": "hmeine", "id": 462802, "node_id": "MDQ6VXNlcjQ2MjgwMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/462802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hmeine", "html_url": "https://github.com/hmeine", "followers_url": "https://api.github.com/users/hmeine/followers", "following_url": "https://api.github.com/users/hmeine/following{/other_user}", "gists_url": "https://api.github.com/users/hmeine/gists{/gist_id}", "starred_url": "https://api.github.com/users/hmeine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hmeine/subscriptions", "organizations_url": "https://api.github.com/users/hmeine/orgs", "repos_url": "https://api.github.com/users/hmeine/repos", "events_url": "https://api.github.com/users/hmeine/events{/privacy}", "received_events_url": "https://api.github.com/users/hmeine/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-26T11:53:13Z", "updated_at": "2017-01-26T22:06:19Z", "closed_at": "2017-01-26T22:06:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "On PyPI, there's already version 0.3.7, but I can't see that here under Releases?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/13", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/13/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/13/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/13", "id": 181930679, "node_id": "MDU6SXNzdWUxODE5MzA2Nzk=", "number": 13, "title": "Re-encoding a numpy ndarray returns a 'dict'", "user": {"login": "tvkpz", "id": 8055298, "node_id": "MDQ6VXNlcjgwNTUyOTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8055298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tvkpz", "html_url": "https://github.com/tvkpz", "followers_url": "https://api.github.com/users/tvkpz/followers", "following_url": "https://api.github.com/users/tvkpz/following{/other_user}", "gists_url": "https://api.github.com/users/tvkpz/gists{/gist_id}", "starred_url": "https://api.github.com/users/tvkpz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tvkpz/subscriptions", "organizations_url": "https://api.github.com/users/tvkpz/orgs", "repos_url": "https://api.github.com/users/tvkpz/repos", "events_url": "https://api.github.com/users/tvkpz/events{/privacy}", "received_events_url": "https://api.github.com/users/tvkpz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-10-10T03:08:11Z", "updated_at": "2017-02-05T03:30:23Z", "closed_at": "2016-10-10T18:07:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using msgpack-numpy for the first time. I tried the example but it returns a 'dict'. How do I get back the original numpy ndarray from the 'data' field.\n\nSorry if this is not the right forum for asking the question.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/12", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/12/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/12/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/12", "id": 145453028, "node_id": "MDU6SXNzdWUxNDU0NTMwMjg=", "number": 12, "title": "Can't open files created in 0.3.6 using latest code", "user": {"login": "craffel", "id": 417568, "node_id": "MDQ6VXNlcjQxNzU2OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/417568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craffel", "html_url": "https://github.com/craffel", "followers_url": "https://api.github.com/users/craffel/followers", "following_url": "https://api.github.com/users/craffel/following{/other_user}", "gists_url": "https://api.github.com/users/craffel/gists{/gist_id}", "starred_url": "https://api.github.com/users/craffel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craffel/subscriptions", "organizations_url": "https://api.github.com/users/craffel/orgs", "repos_url": "https://api.github.com/users/craffel/repos", "events_url": "https://api.github.com/users/craffel/events{/privacy}", "received_events_url": "https://api.github.com/users/craffel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-04-03T04:47:15Z", "updated_at": "2017-02-06T23:41:20Z", "closed_at": "2017-02-06T23:41:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, thanks for this useful library.  After this commit:\nhttps://github.com/lebedov/msgpack-numpy/commit/be01578967e0ee14dabf4db4bec03c2195b924f0\nI can't open files created prior to it, in Python 2.7.11.  I get a `UnicodeDecodeError`, e.g. \n`UnicodeDecodeError: 'utf8' codec can't decode byte 0x9b in position 0: invalid start byte`\nIf you are aware that it's not backwards-compatible, no worries and feel free to close.  But, it would be great if it was!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/10", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/10/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/10/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/10", "id": 95572272, "node_id": "MDU6SXNzdWU5NTU3MjI3Mg==", "number": 10, "title": "ValueError: bytes is too large", "user": {"login": "mistycheney", "id": 580361, "node_id": "MDQ6VXNlcjU4MDM2MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/580361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mistycheney", "html_url": "https://github.com/mistycheney", "followers_url": "https://api.github.com/users/mistycheney/followers", "following_url": "https://api.github.com/users/mistycheney/following{/other_user}", "gists_url": "https://api.github.com/users/mistycheney/gists{/gist_id}", "starred_url": "https://api.github.com/users/mistycheney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mistycheney/subscriptions", "organizations_url": "https://api.github.com/users/mistycheney/orgs", "repos_url": "https://api.github.com/users/mistycheney/repos", "events_url": "https://api.github.com/users/mistycheney/events{/privacy}", "received_events_url": "https://api.github.com/users/mistycheney/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-07-17T02:43:18Z", "updated_at": "2015-07-17T04:40:11Z", "closed_at": "2015-07-17T03:14:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "When the array I am trying to pack is large, with shape (500, 500, 2620, 2), it fails.\n# \n\n/oasis/projects/nsf/csd181/yuncong/virtualenv-1.9.1/yuncongve/lib/python2.7/site-packages/msgpack_numpy.pyc in packb(o, default, **kwargs)\n    141 \n    142     kwargs['default'] = default\n--> 143     return Packer(**kwargs).pack(o)\n    144 \n    145 def unpack(stream, object_hook=decode, **kwargs):\n\nmsgpack/_packer.pyx in msgpack._packer.Packer.pack (msgpack/_packer.cpp:223)()\n\nmsgpack/_packer.pyx in msgpack._packer.Packer.pack (msgpack/_packer.cpp:225)()\n\nmsgpack/_packer.pyx in msgpack._packer.Packer._pack (msgpack/_packer.cpp:184)()\n\nmsgpack/_packer.pyx in msgpack._packer.Packer._pack (msgpack/_packer.cpp:158)()\n\nValueError: bytes is too large\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/9", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/9/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/9/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/9", "id": 93805096, "node_id": "MDU6SXNzdWU5MzgwNTA5Ng==", "number": 9, "title": "msgpack._packer issue", "user": {"login": "mehdisadeghi", "id": 3101557, "node_id": "MDQ6VXNlcjMxMDE1NTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3101557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mehdisadeghi", "html_url": "https://github.com/mehdisadeghi", "followers_url": "https://api.github.com/users/mehdisadeghi/followers", "following_url": "https://api.github.com/users/mehdisadeghi/following{/other_user}", "gists_url": "https://api.github.com/users/mehdisadeghi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mehdisadeghi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mehdisadeghi/subscriptions", "organizations_url": "https://api.github.com/users/mehdisadeghi/orgs", "repos_url": "https://api.github.com/users/mehdisadeghi/repos", "events_url": "https://api.github.com/users/mehdisadeghi/events{/privacy}", "received_events_url": "https://api.github.com/users/mehdisadeghi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-07-08T14:35:30Z", "updated_at": "2015-07-08T15:03:19Z", "closed_at": "2015-07-08T15:03:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is similar to issue #6.\n\n`_packer` is an internal variable of msgpack and if cython is not available when installing msgpack, then it would not be available as well. In this case msgpack will fallback to pure python installation and will not compile its cython extensions.\n\nDoes msgpack_numpy explicitly requires those cython extensions to function properly? If yes, then it is a good idea to mention it in documents to inform users about it.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/6", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/6/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/6/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/6", "id": 50426133, "node_id": "MDU6SXNzdWU1MDQyNjEzMw==", "number": 6, "title": "msgpack._packer and msgpack._unpacker do not exist", "user": {"login": "jkokorian", "id": 6113878, "node_id": "MDQ6VXNlcjYxMTM4Nzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6113878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkokorian", "html_url": "https://github.com/jkokorian", "followers_url": "https://api.github.com/users/jkokorian/followers", "following_url": "https://api.github.com/users/jkokorian/following{/other_user}", "gists_url": "https://api.github.com/users/jkokorian/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkokorian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkokorian/subscriptions", "organizations_url": "https://api.github.com/users/jkokorian/orgs", "repos_url": "https://api.github.com/users/jkokorian/repos", "events_url": "https://api.github.com/users/jkokorian/events{/privacy}", "received_events_url": "https://api.github.com/users/jkokorian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-11-29T13:48:55Z", "updated_at": "2014-11-29T19:26:09Z", "closed_at": "2014-11-29T19:26:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting an error when I import the module. I've just posted it on stackoverflow:\nhttp://stackoverflow.com/questions/27202976/msgpack-packer-does-not-exist-in-anaconda-installation\n\nApparently msgpack._packer and msgpack._unpacker do not exist. I have msgpack-python version 0.4.2 and I'm running a 64 bit anaconda installation on windows.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/5", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/5/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/5/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/5", "id": 19259964, "node_id": "MDU6SXNzdWUxOTI1OTk2NA==", "number": 5, "title": "Error when de-serializing dictionary containing numpy arrays", "user": {"login": "e0en", "id": 1905152, "node_id": "MDQ6VXNlcjE5MDUxNTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1905152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/e0en", "html_url": "https://github.com/e0en", "followers_url": "https://api.github.com/users/e0en/followers", "following_url": "https://api.github.com/users/e0en/following{/other_user}", "gists_url": "https://api.github.com/users/e0en/gists{/gist_id}", "starred_url": "https://api.github.com/users/e0en/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/e0en/subscriptions", "organizations_url": "https://api.github.com/users/e0en/orgs", "repos_url": "https://api.github.com/users/e0en/repos", "events_url": "https://api.github.com/users/e0en/events{/privacy}", "received_events_url": "https://api.github.com/users/e0en/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-09-10T13:54:50Z", "updated_at": "2013-09-10T17:28:22Z", "closed_at": "2013-09-10T17:28:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "The code below causes error:\n\n```\nimport numpy as np\nimport msgpack\nimport msgpack_numpy as m\nm.patch()\n\n\ndict_np = {\"np\": np.zeros((3, 4)), }\npacked = msgpack.packb(dict_np)\nunpacked = msgpack.unpackb(packed)  # this will cause error\n```\n\nThe code above will cause a `KeyError` because the `decode` function in `msgpack_numpy` tries to decode the dictionary `dict_np` as a serialized version of numpy array.\n\nWrapping the entire content of `decode` function with try-except clause will solve this issue. More specifically, modify the code below:\n\n```\ndef decode(obj):\n    blah_blah\n```\n\nlike this:\n\n```\ndef decode(obj):\n    try:\n        blah_blah\n    except KeyError:\n        return obj\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/4", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/4/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/4/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/4", "id": 19257117, "node_id": "MDU6SXNzdWUxOTI1NzExNw==", "number": 4, "title": "Error with numpy array of strings.", "user": {"login": "e0en", "id": 1905152, "node_id": "MDQ6VXNlcjE5MDUxNTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1905152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/e0en", "html_url": "https://github.com/e0en", "followers_url": "https://api.github.com/users/e0en/followers", "following_url": "https://api.github.com/users/e0en/following{/other_user}", "gists_url": "https://api.github.com/users/e0en/gists{/gist_id}", "starred_url": "https://api.github.com/users/e0en/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/e0en/subscriptions", "organizations_url": "https://api.github.com/users/e0en/orgs", "repos_url": "https://api.github.com/users/e0en/repos", "events_url": "https://api.github.com/users/e0en/events{/privacy}", "received_events_url": "https://api.github.com/users/e0en/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-09-10T13:01:49Z", "updated_at": "2013-09-10T14:28:57Z", "closed_at": "2013-09-10T14:28:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "The code below causes error:\n\n```\nimport numpy as np\nimport msgpack\nimport msgpack_numpy as m\nm.patch()\n\n\nstr_array = np.array([\"a\" * i for i in xrange(10)])\npacked = msgpack.packb(data)\nunpacked = msgpack.unpackb(packed)  # this will cause error\n```\n\nThis error occurs because the `str_array.dtype.name` cannot be found in `np.typeDict`.\nI wrote a naive workaround for this bug. You can download my modified version of `__init__.py` [here](http://db.tt/OCDQ9YcA).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/3", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/3/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/3/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/3", "id": 14845374, "node_id": "MDU6SXNzdWUxNDg0NTM3NA==", "number": 3, "title": "Error with Python 32 bit", "user": {"login": "markusr", "id": 1866703, "node_id": "MDQ6VXNlcjE4NjY3MDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1866703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markusr", "html_url": "https://github.com/markusr", "followers_url": "https://api.github.com/users/markusr/followers", "following_url": "https://api.github.com/users/markusr/following{/other_user}", "gists_url": "https://api.github.com/users/markusr/gists{/gist_id}", "starred_url": "https://api.github.com/users/markusr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markusr/subscriptions", "organizations_url": "https://api.github.com/users/markusr/orgs", "repos_url": "https://api.github.com/users/markusr/repos", "events_url": "https://api.github.com/users/markusr/events{/privacy}", "received_events_url": "https://api.github.com/users/markusr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-05-28T15:31:19Z", "updated_at": "2013-05-28T17:50:25Z", "closed_at": "2013-05-28T17:50:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just found another bug on a 32 bit python. There is no np.float128 on 32 bit architecture. \n\nTraceback (most recent call last):\n    import msgpack_numpy as m\n  File \"C:\\Python27\\lib\\site-packages\\msgpack_numpy__init__.py\", line 47, in <module>\n    'complex256': np.float128,\nAttributeError: 'module' object has no attribute 'float128'\n\nI could resolve the problem by commenting out line 47. Is there a proper way of doing this?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/2", "repository_url": "https://api.github.com/repos/lebedov/msgpack-numpy", "labels_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/2/comments", "events_url": "https://api.github.com/repos/lebedov/msgpack-numpy/issues/2/events", "html_url": "https://github.com/lebedov/msgpack-numpy/issues/2", "id": 14836604, "node_id": "MDU6SXNzdWUxNDgzNjYwNA==", "number": 2, "title": "Large complex array encoding is slow", "user": {"login": "markusr", "id": 1866703, "node_id": "MDQ6VXNlcjE4NjY3MDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1866703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markusr", "html_url": "https://github.com/markusr", "followers_url": "https://api.github.com/users/markusr/followers", "following_url": "https://api.github.com/users/markusr/following{/other_user}", "gists_url": "https://api.github.com/users/markusr/gists{/gist_id}", "starred_url": "https://api.github.com/users/markusr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markusr/subscriptions", "organizations_url": "https://api.github.com/users/markusr/orgs", "repos_url": "https://api.github.com/users/markusr/repos", "events_url": "https://api.github.com/users/markusr/events{/privacy}", "received_events_url": "https://api.github.com/users/markusr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-05-28T12:21:24Z", "updated_at": "2013-05-28T15:26:05Z", "closed_at": "2013-05-28T15:26:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following program takes about 1.5 seconds to run on my PC. It seems that no advantage of the a numpy-complex-array is taken. Can this be done faster? \n\n```\nimport numpy as np\nimport msgpack\nimport msgpack_numpy as m\nm.patch() \n\nimport time\n\nif __name__ == '__main__':\n    t0 = time.time()\n    data = np.arange(25*5000, dtype=np.complex128)\n    encmsg = msgpack.packb(data)\n    orgmsg = msgpack.unpackb(encmsg)\n    print time.time() - t0\n```\n", "performed_via_github_app": null, "score": 1.0}]}